var i8=Object.defineProperty,o8=Object.defineProperties;var s8=Object.getOwnPropertyDescriptors;var w3=Object.getOwnPropertySymbols;var l8=Object.prototype.hasOwnProperty,u8=Object.prototype.propertyIsEnumerable;var T3=(N,U,e)=>U in N?i8(N,U,{enumerable:!0,configurable:!0,writable:!0,value:e}):N[U]=e,Ri=(N,U)=>{for(var e in U||(U={}))l8.call(U,e)&&T3(N,e,U[e]);if(w3)for(var e of w3(U))u8.call(U,e)&&T3(N,e,U[e]);return N},Ug=(N,U)=>o8(N,s8(U));function m2(N,U){const e=Object.create(null),I=N.split(",");for(let F=0;F<I.length;F++)e[I[F]]=!0;return U?F=>!!e[F.toLowerCase()]:F=>!!e[F]}const f8="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",c8=m2(f8);function AM(N){return!!N||N===""}function $p(N){if(yi(N)){const U={};for(let e=0;e<N.length;e++){const I=N[e],F=yl(I)?p8(I):$p(I);if(F)for(const s in F)U[s]=F[s]}return U}else{if(yl(N))return N;if(ws(N))return N}}const h8=/;(?![^(]*\))/g,v8=/:(.+)/;function p8(N){const U={};return N.split(h8).forEach(e=>{if(e){const I=e.split(v8);I.length>1&&(U[I[0].trim()]=I[1].trim())}}),U}function mf(N){let U="";if(yl(N))U=N;else if(yi(N))for(let e=0;e<N.length;e++){const I=mf(N[e]);I&&(U+=I+" ")}else if(ws(N))for(const e in N)N[e]&&(U+=e+" ");return U.trim()}function d8(N,U){if(N.length!==U.length)return!1;let e=!0;for(let I=0;e&&I<N.length;I++)e=B0(N[I],U[I]);return e}function B0(N,U){if(N===U)return!0;let e=A3(N),I=A3(U);if(e||I)return e&&I?N.getTime()===U.getTime():!1;if(e=yi(N),I=yi(U),e||I)return e&&I?d8(N,U):!1;if(e=ws(N),I=ws(U),e||I){if(!e||!I)return!1;const F=Object.keys(N).length,s=Object.keys(U).length;if(F!==s)return!1;for(const o in N){const h=N.hasOwnProperty(o),y=U.hasOwnProperty(o);if(h&&!y||!h&&y||!B0(N[o],U[o]))return!1}}return String(N)===String(U)}function x2(N,U){return N.findIndex(e=>B0(e,U))}const pl=N=>yl(N)?N:N==null?"":yi(N)||ws(N)&&(N.toString===EM||!Yi(N.toString))?JSON.stringify(N,SM,2):String(N),SM=(N,U)=>U&&U.__v_isRef?SM(N,U.value):Yp(U)?{[`Map(${U.size})`]:[...U.entries()].reduce((e,[I,F])=>(e[`${I} =>`]=F,e),{})}:fd(U)?{[`Set(${U.size})`]:[...U.values()]}:ws(U)&&!yi(U)&&!kM(U)?String(U):U,Go={},Wp=[],ec=()=>{},g8=()=>!1,y8=/^on[^a-z]/,am=N=>y8.test(N),b2=N=>N.startsWith("onUpdate:"),Il=Object.assign,_2=(N,U)=>{const e=N.indexOf(U);e>-1&&N.splice(e,1)},m8=Object.prototype.hasOwnProperty,mo=(N,U)=>m8.call(N,U),yi=Array.isArray,Yp=N=>im(N)==="[object Map]",fd=N=>im(N)==="[object Set]",A3=N=>N instanceof Date,Yi=N=>typeof N=="function",yl=N=>typeof N=="string",w2=N=>typeof N=="symbol",ws=N=>N!==null&&typeof N=="object",MM=N=>ws(N)&&Yi(N.then)&&Yi(N.catch),EM=Object.prototype.toString,im=N=>EM.call(N),x8=N=>im(N).slice(8,-1),kM=N=>im(N)==="[object Object]",T2=N=>yl(N)&&N!=="NaN"&&N[0]!=="-"&&""+parseInt(N,10)===N,my=m2(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),om=N=>{const U=Object.create(null);return e=>U[e]||(U[e]=N(e))},b8=/-(\w)/g,Qp=om(N=>N.replace(b8,(U,e)=>e?e.toUpperCase():"")),_8=/\B([A-Z])/g,jv=om(N=>N.replace(_8,"-$1").toLowerCase()),CM=om(N=>N.charAt(0).toUpperCase()+N.slice(1)),D1=om(N=>N?`on${CM(N)}`:""),k0=(N,U)=>!Object.is(N,U),xy=(N,U)=>{for(let e=0;e<N.length;e++)N[e](U)},Ry=(N,U,e)=>{Object.defineProperty(N,U,{configurable:!0,enumerable:!1,value:e})},A2=N=>{const U=parseFloat(N);return isNaN(U)?N:U};let S3;const w8=()=>S3||(S3=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Xc;class T8{constructor(U=!1){this.active=!0,this.effects=[],this.cleanups=[],!U&&Xc&&(this.parent=Xc,this.index=(Xc.scopes||(Xc.scopes=[])).push(this)-1)}run(U){if(this.active)try{return Xc=this,U()}finally{Xc=this.parent}}on(){Xc=this}off(){Xc=this.parent}stop(U){if(this.active){let e,I;for(e=0,I=this.effects.length;e<I;e++)this.effects[e].stop();for(e=0,I=this.cleanups.length;e<I;e++)this.cleanups[e]();if(this.scopes)for(e=0,I=this.scopes.length;e<I;e++)this.scopes[e].stop(!0);if(this.parent&&!U){const F=this.parent.scopes.pop();F&&F!==this&&(this.parent.scopes[this.index]=F,F.index=this.index)}this.active=!1}}}function A8(N,U=Xc){U&&U.active&&U.effects.push(N)}const S2=N=>{const U=new Set(N);return U.w=0,U.n=0,U},LM=N=>(N.w&Uh)>0,PM=N=>(N.n&Uh)>0,S8=({deps:N})=>{if(N.length)for(let U=0;U<N.length;U++)N[U].w|=Uh},M8=N=>{const{deps:U}=N;if(U.length){let e=0;for(let I=0;I<U.length;I++){const F=U[I];LM(F)&&!PM(F)?F.delete(N):U[e++]=F,F.w&=~Uh,F.n&=~Uh}U.length=e}},ub=new WeakMap;let c0=0,Uh=1;const fb=30;let Ic;const Pv=Symbol(""),cb=Symbol("");class M2{constructor(U,e=null,I){this.fn=U,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,A8(this,I)}run(){if(!this.active)return this.fn();let U=Ic,e=Nh;for(;U;){if(U===this)return;U=U.parent}try{return this.parent=Ic,Ic=this,Nh=!0,Uh=1<<++c0,c0<=fb?S8(this):M3(this),this.fn()}finally{c0<=fb&&M8(this),Uh=1<<--c0,Ic=this.parent,Nh=e,this.parent=void 0}}stop(){this.active&&(M3(this),this.onStop&&this.onStop(),this.active=!1)}}function M3(N){const{deps:U}=N;if(U.length){for(let e=0;e<U.length;e++)U[e].delete(N);U.length=0}}let Nh=!0;const IM=[];function cd(){IM.push(Nh),Nh=!1}function hd(){const N=IM.pop();Nh=N===void 0?!0:N}function Ku(N,U,e){if(Nh&&Ic){let I=ub.get(N);I||ub.set(N,I=new Map);let F=I.get(e);F||I.set(e,F=S2()),RM(F)}}function RM(N,U){let e=!1;c0<=fb?PM(N)||(N.n|=Uh,e=!LM(N)):e=!N.has(Ic),e&&(N.add(Ic),Ic.deps.push(N))}function eh(N,U,e,I,F,s){const o=ub.get(N);if(!o)return;let h=[];if(U==="clear")h=[...o.values()];else if(e==="length"&&yi(N))o.forEach((y,t)=>{(t==="length"||t>=I)&&h.push(y)});else switch(e!==void 0&&h.push(o.get(e)),U){case"add":yi(N)?T2(e)&&h.push(o.get("length")):(h.push(o.get(Pv)),Yp(N)&&h.push(o.get(cb)));break;case"delete":yi(N)||(h.push(o.get(Pv)),Yp(N)&&h.push(o.get(cb)));break;case"set":Yp(N)&&h.push(o.get(Pv));break}if(h.length===1)h[0]&&hb(h[0]);else{const y=[];for(const t of h)t&&y.push(...t);hb(S2(y))}}function hb(N,U){for(const e of yi(N)?N:[...N])(e!==Ic||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const E8=m2("__proto__,__v_isRef,__isVue"),DM=new Set(Object.getOwnPropertyNames(Symbol).map(N=>Symbol[N]).filter(w2)),k8=E2(),C8=E2(!1,!0),L8=E2(!0),E3=P8();function P8(){const N={};return["includes","indexOf","lastIndexOf"].forEach(U=>{N[U]=function(...e){const I=To(this);for(let s=0,o=this.length;s<o;s++)Ku(I,"get",s+"");const F=I[U](...e);return F===-1||F===!1?I[U](...e.map(To)):F}}),["push","pop","shift","unshift","splice"].forEach(U=>{N[U]=function(...e){cd();const I=To(this)[U].apply(this,e);return hd(),I}}),N}function E2(N=!1,U=!1){return function(I,F,s){if(F==="__v_isReactive")return!N;if(F==="__v_isReadonly")return N;if(F==="__v_isShallow")return U;if(F==="__v_raw"&&s===(N?U?Y8:BM:U?NM:zM).get(I))return I;const o=yi(I);if(!N&&o&&mo(E3,F))return Reflect.get(E3,F,s);const h=Reflect.get(I,F,s);return(w2(F)?DM.has(F):E8(F))||(N||Ku(I,"get",F),U)?h:dl(h)?!o||!T2(F)?h.value:h:ws(h)?N?UM(h):lm(h):h}}const I8=FM(),R8=FM(!0);function FM(N=!1){return function(e,I,F,s){let o=e[I];if(C0(o)&&dl(o)&&!dl(F))return!1;if(!N&&!C0(F)&&(VM(F)||(F=To(F),o=To(o)),!yi(e)&&dl(o)&&!dl(F)))return o.value=F,!0;const h=yi(e)&&T2(I)?Number(I)<e.length:mo(e,I),y=Reflect.set(e,I,F,s);return e===To(s)&&(h?k0(F,o)&&eh(e,"set",I,F):eh(e,"add",I,F)),y}}function D8(N,U){const e=mo(N,U);N[U];const I=Reflect.deleteProperty(N,U);return I&&e&&eh(N,"delete",U,void 0),I}function F8(N,U){const e=Reflect.has(N,U);return(!w2(U)||!DM.has(U))&&Ku(N,"has",U),e}function O8(N){return Ku(N,"iterate",yi(N)?"length":Pv),Reflect.ownKeys(N)}const OM={get:k8,set:I8,deleteProperty:D8,has:F8,ownKeys:O8},z8={get:L8,set(N,U){return!0},deleteProperty(N,U){return!0}},N8=Il({},OM,{get:C8,set:R8}),k2=N=>N,sm=N=>Reflect.getPrototypeOf(N);function Vg(N,U,e=!1,I=!1){N=N.__v_raw;const F=To(N),s=To(U);U!==s&&!e&&Ku(F,"get",U),!e&&Ku(F,"get",s);const{has:o}=sm(F),h=I?k2:e?P2:L0;if(o.call(F,U))return h(N.get(U));if(o.call(F,s))return h(N.get(s));N!==F&&N.get(U)}function Hg(N,U=!1){const e=this.__v_raw,I=To(e),F=To(N);return N!==F&&!U&&Ku(I,"has",N),!U&&Ku(I,"has",F),N===F?e.has(N):e.has(N)||e.has(F)}function Gg(N,U=!1){return N=N.__v_raw,!U&&Ku(To(N),"iterate",Pv),Reflect.get(N,"size",N)}function k3(N){N=To(N);const U=To(this);return sm(U).has.call(U,N)||(U.add(N),eh(U,"add",N,N)),this}function C3(N,U){U=To(U);const e=To(this),{has:I,get:F}=sm(e);let s=I.call(e,N);s||(N=To(N),s=I.call(e,N));const o=F.call(e,N);return e.set(N,U),s?k0(U,o)&&eh(e,"set",N,U):eh(e,"add",N,U),this}function L3(N){const U=To(this),{has:e,get:I}=sm(U);let F=e.call(U,N);F||(N=To(N),F=e.call(U,N)),I&&I.call(U,N);const s=U.delete(N);return F&&eh(U,"delete",N,void 0),s}function P3(){const N=To(this),U=N.size!==0,e=N.clear();return U&&eh(N,"clear",void 0,void 0),e}function jg(N,U){return function(I,F){const s=this,o=s.__v_raw,h=To(o),y=U?k2:N?P2:L0;return!N&&Ku(h,"iterate",Pv),o.forEach((t,a)=>I.call(F,y(t),y(a),s))}}function $g(N,U,e){return function(...I){const F=this.__v_raw,s=To(F),o=Yp(s),h=N==="entries"||N===Symbol.iterator&&o,y=N==="keys"&&o,t=F[N](...I),a=e?k2:U?P2:L0;return!U&&Ku(s,"iterate",y?cb:Pv),{next(){const{value:i,done:n}=t.next();return n?{value:i,done:n}:{value:h?[a(i[0]),a(i[1])]:a(i),done:n}},[Symbol.iterator](){return this}}}}function wh(N){return function(...U){return N==="delete"?!1:this}}function B8(){const N={get(s){return Vg(this,s)},get size(){return Gg(this)},has:Hg,add:k3,set:C3,delete:L3,clear:P3,forEach:jg(!1,!1)},U={get(s){return Vg(this,s,!1,!0)},get size(){return Gg(this)},has:Hg,add:k3,set:C3,delete:L3,clear:P3,forEach:jg(!1,!0)},e={get(s){return Vg(this,s,!0)},get size(){return Gg(this,!0)},has(s){return Hg.call(this,s,!0)},add:wh("add"),set:wh("set"),delete:wh("delete"),clear:wh("clear"),forEach:jg(!0,!1)},I={get(s){return Vg(this,s,!0,!0)},get size(){return Gg(this,!0)},has(s){return Hg.call(this,s,!0)},add:wh("add"),set:wh("set"),delete:wh("delete"),clear:wh("clear"),forEach:jg(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{N[s]=$g(s,!1,!1),e[s]=$g(s,!0,!1),U[s]=$g(s,!1,!0),I[s]=$g(s,!0,!0)}),[N,e,U,I]}const[U8,V8,H8,G8]=B8();function C2(N,U){const e=U?N?G8:H8:N?V8:U8;return(I,F,s)=>F==="__v_isReactive"?!N:F==="__v_isReadonly"?N:F==="__v_raw"?I:Reflect.get(mo(e,F)&&F in I?e:I,F,s)}const j8={get:C2(!1,!1)},$8={get:C2(!1,!0)},W8={get:C2(!0,!1)},zM=new WeakMap,NM=new WeakMap,BM=new WeakMap,Y8=new WeakMap;function X8(N){switch(N){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Z8(N){return N.__v_skip||!Object.isExtensible(N)?0:X8(x8(N))}function lm(N){return C0(N)?N:L2(N,!1,OM,j8,zM)}function K8(N){return L2(N,!1,N8,$8,NM)}function UM(N){return L2(N,!0,z8,W8,BM)}function L2(N,U,e,I,F){if(!ws(N)||N.__v_raw&&!(U&&N.__v_isReactive))return N;const s=F.get(N);if(s)return s;const o=Z8(N);if(o===0)return N;const h=new Proxy(N,o===2?I:e);return F.set(N,h),h}function Xp(N){return C0(N)?Xp(N.__v_raw):!!(N&&N.__v_isReactive)}function C0(N){return!!(N&&N.__v_isReadonly)}function VM(N){return!!(N&&N.__v_isShallow)}function HM(N){return Xp(N)||C0(N)}function To(N){const U=N&&N.__v_raw;return U?To(U):N}function GM(N){return Ry(N,"__v_skip",!0),N}const L0=N=>ws(N)?lm(N):N,P2=N=>ws(N)?UM(N):N;function jM(N){Nh&&Ic&&(N=To(N),RM(N.dep||(N.dep=S2())))}function $M(N,U){N=To(N),N.dep&&hb(N.dep)}function dl(N){return!!(N&&N.__v_isRef===!0)}function Fh(N){return J8(N,!1)}function J8(N,U){return dl(N)?N:new Q8(N,U)}class Q8{constructor(U,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?U:To(U),this._value=e?U:L0(U)}get value(){return jM(this),this._value}set value(U){U=this.__v_isShallow?U:To(U),k0(U,this._rawValue)&&(this._rawValue=U,this._value=this.__v_isShallow?U:L0(U),$M(this))}}function q8(N){return dl(N)?N.value:N}const eI={get:(N,U,e)=>q8(Reflect.get(N,U,e)),set:(N,U,e,I)=>{const F=N[U];return dl(F)&&!dl(e)?(F.value=e,!0):Reflect.set(N,U,e,I)}};function WM(N){return Xp(N)?N:new Proxy(N,eI)}function by(N){const U=yi(N)?new Array(N.length):{};for(const e in N)U[e]=rI(N,e);return U}class tI{constructor(U,e,I){this._object=U,this._key=e,this._defaultValue=I,this.__v_isRef=!0}get value(){const U=this._object[this._key];return U===void 0?this._defaultValue:U}set value(U){this._object[this._key]=U}}function rI(N,U,e){const I=N[U];return dl(I)?I:new tI(N,U,e)}class nI{constructor(U,e,I,F){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new M2(U,()=>{this._dirty||(this._dirty=!0,$M(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!F,this.__v_isReadonly=I}get value(){const U=To(this);return jM(U),(U._dirty||!U._cacheable)&&(U._dirty=!1,U._value=U.effect.run()),U._value}set value(U){this._setter(U)}}function aI(N,U,e=!1){let I,F;const s=Yi(N);return s?(I=N,F=ec):(I=N.get,F=N.set),new nI(I,F,s||!F,e)}Promise.resolve();function Bh(N,U,e,I){let F;try{F=I?N(...I):N()}catch(s){um(s,U,e)}return F}function Tf(N,U,e,I){if(Yi(N)){const s=Bh(N,U,e,I);return s&&MM(s)&&s.catch(o=>{um(o,U,e)}),s}const F=[];for(let s=0;s<N.length;s++)F.push(Tf(N[s],U,e,I));return F}function um(N,U,e,I=!0){const F=U?U.vnode:null;if(U){let s=U.parent;const o=U.proxy,h=e;for(;s;){const t=s.ec;if(t){for(let a=0;a<t.length;a++)if(t[a](N,o,h)===!1)return}s=s.parent}const y=U.appContext.config.errorHandler;if(y){Bh(y,null,10,[N,o,h]);return}}iI(N,e,F,I)}function iI(N,U,e,I=!0){console.error(N)}let Dy=!1,vb=!1;const Xu=[];let Kc=0;const g0=[];let h0=null,zp=0;const y0=[];let Ch=null,Np=0;const YM=Promise.resolve();let I2=null,pb=null;function _y(N){const U=I2||YM;return N?U.then(this?N.bind(this):N):U}function oI(N){let U=Kc+1,e=Xu.length;for(;U<e;){const I=U+e>>>1;P0(Xu[I])<N?U=I+1:e=I}return U}function XM(N){(!Xu.length||!Xu.includes(N,Dy&&N.allowRecurse?Kc+1:Kc))&&N!==pb&&(N.id==null?Xu.push(N):Xu.splice(oI(N.id),0,N),ZM())}function ZM(){!Dy&&!vb&&(vb=!0,I2=YM.then(QM))}function sI(N){const U=Xu.indexOf(N);U>Kc&&Xu.splice(U,1)}function KM(N,U,e,I){yi(N)?e.push(...N):(!U||!U.includes(N,N.allowRecurse?I+1:I))&&e.push(N),ZM()}function lI(N){KM(N,h0,g0,zp)}function uI(N){KM(N,Ch,y0,Np)}function R2(N,U=null){if(g0.length){for(pb=U,h0=[...new Set(g0)],g0.length=0,zp=0;zp<h0.length;zp++)h0[zp]();h0=null,zp=0,pb=null,R2(N,U)}}function JM(N){if(y0.length){const U=[...new Set(y0)];if(y0.length=0,Ch){Ch.push(...U);return}for(Ch=U,Ch.sort((e,I)=>P0(e)-P0(I)),Np=0;Np<Ch.length;Np++)Ch[Np]();Ch=null,Np=0}}const P0=N=>N.id==null?1/0:N.id;function QM(N){vb=!1,Dy=!0,R2(N),Xu.sort((e,I)=>P0(e)-P0(I));const U=ec;try{for(Kc=0;Kc<Xu.length;Kc++){const e=Xu[Kc];e&&e.active!==!1&&Bh(e,null,14)}}finally{Kc=0,Xu.length=0,JM(),Dy=!1,I2=null,(Xu.length||g0.length||y0.length)&&QM(N)}}function fI(N,U,...e){const I=N.vnode.props||Go;let F=e;const s=U.startsWith("update:"),o=s&&U.slice(7);if(o&&o in I){const a=`${o==="modelValue"?"model":o}Modifiers`,{number:i,trim:n}=I[a]||Go;n?F=e.map(r=>r.trim()):i&&(F=e.map(A2))}let h,y=I[h=D1(U)]||I[h=D1(Qp(U))];!y&&s&&(y=I[h=D1(jv(U))]),y&&Tf(y,N,6,F);const t=I[h+"Once"];if(t){if(!N.emitted)N.emitted={};else if(N.emitted[h])return;N.emitted[h]=!0,Tf(t,N,6,F)}}function qM(N,U,e=!1){const I=U.emitsCache,F=I.get(N);if(F!==void 0)return F;const s=N.emits;let o={},h=!1;if(!Yi(N)){const y=t=>{const a=qM(t,U,!0);a&&(h=!0,Il(o,a))};!e&&U.mixins.length&&U.mixins.forEach(y),N.extends&&y(N.extends),N.mixins&&N.mixins.forEach(y)}return!s&&!h?(I.set(N,null),null):(yi(s)?s.forEach(y=>o[y]=null):Il(o,s),I.set(N,o),o)}function D2(N,U){return!N||!am(U)?!1:(U=U.slice(2).replace(/Once$/,""),mo(N,U[0].toLowerCase()+U.slice(1))||mo(N,jv(U))||mo(N,U))}let bf=null,fm=null;function Fy(N){const U=bf;return bf=N,fm=N&&N.type.__scopeId||null,U}function cI(N){fm=N}function hI(){fm=null}function db(N,U=bf,e){if(!U||N._n)return N;const I=(...F)=>{I._d&&V3(-1);const s=Fy(U),o=N(...F);return Fy(s),I._d&&V3(1),o};return I._n=!0,I._c=!0,I._d=!0,I}function F1(N){const{type:U,vnode:e,proxy:I,withProxy:F,props:s,propsOptions:[o],slots:h,attrs:y,emit:t,render:a,renderCache:i,data:n,setupState:r,ctx:f,inheritAttrs:u}=N;let l,m;const d=Fy(N);try{if(e.shapeFlag&4){const g=F||I;l=Pc(a.call(g,g,i,s,r,n,f)),m=y}else{const g=U;l=Pc(g.length>1?g(s,{attrs:y,slots:h,emit:t}):g(s,null)),m=U.props?y:vI(y)}}catch(g){m0.length=0,um(g,N,1),l=yo(tc)}let b=l;if(m&&u!==!1){const g=Object.keys(m),{shapeFlag:_}=b;g.length&&_&7&&(o&&g.some(b2)&&(m=pI(m,o)),b=qp(b,m))}return e.dirs&&(b.dirs=b.dirs?b.dirs.concat(e.dirs):e.dirs),e.transition&&(b.transition=e.transition),l=b,Fy(d),l}const vI=N=>{let U;for(const e in N)(e==="class"||e==="style"||am(e))&&((U||(U={}))[e]=N[e]);return U},pI=(N,U)=>{const e={};for(const I in N)(!b2(I)||!(I.slice(9)in U))&&(e[I]=N[I]);return e};function dI(N,U,e){const{props:I,children:F,component:s}=N,{props:o,children:h,patchFlag:y}=U,t=s.emitsOptions;if(U.dirs||U.transition)return!0;if(e&&y>=0){if(y&1024)return!0;if(y&16)return I?I3(I,o,t):!!o;if(y&8){const a=U.dynamicProps;for(let i=0;i<a.length;i++){const n=a[i];if(o[n]!==I[n]&&!D2(t,n))return!0}}}else return(F||h)&&(!h||!h.$stable)?!0:I===o?!1:I?o?I3(I,o,t):!0:!!o;return!1}function I3(N,U,e){const I=Object.keys(U);if(I.length!==Object.keys(N).length)return!0;for(let F=0;F<I.length;F++){const s=I[F];if(U[s]!==N[s]&&!D2(e,s))return!0}return!1}function gI({vnode:N,parent:U},e){for(;U&&U.subTree===N;)(N=U.vnode).el=e,U=U.parent}const yI=N=>N.__isSuspense;function mI(N,U){U&&U.pendingBranch?yi(N)?U.effects.push(...N):U.effects.push(N):uI(N)}function xI(N,U){if(Ll){let e=Ll.provides;const I=Ll.parent&&Ll.parent.provides;I===e&&(e=Ll.provides=Object.create(I)),e[N]=U}}function O1(N,U,e=!1){const I=Ll||bf;if(I){const F=I.parent==null?I.vnode.appContext&&I.vnode.appContext.provides:I.parent.provides;if(F&&N in F)return F[N];if(arguments.length>1)return e&&Yi(U)?U.call(I.proxy):U}}const R3={};function Gs(N,U,e){return eE(N,U,e)}function eE(N,U,{immediate:e,deep:I,flush:F,onTrack:s,onTrigger:o}=Go){const h=Ll;let y,t=!1,a=!1;if(dl(N)?(y=()=>N.value,t=VM(N)):Xp(N)?(y=()=>N,I=!0):yi(N)?(a=!0,t=N.some(Xp),y=()=>N.map(m=>{if(dl(m))return m.value;if(Xp(m))return Lv(m);if(Yi(m))return Bh(m,h,2)})):Yi(N)?U?y=()=>Bh(N,h,2):y=()=>{if(!(h&&h.isUnmounted))return i&&i(),Tf(N,h,3,[n])}:y=ec,U&&I){const m=y;y=()=>Lv(m())}let i,n=m=>{i=l.onStop=()=>{Bh(m,h,4)}};if(I0)return n=ec,U?e&&Tf(U,h,3,[y(),a?[]:void 0,n]):y(),ec;let r=a?[]:R3;const f=()=>{if(!!l.active)if(U){const m=l.run();(I||t||(a?m.some((d,b)=>k0(d,r[b])):k0(m,r)))&&(i&&i(),Tf(U,h,3,[m,r===R3?void 0:r,n]),r=m)}else l.run()};f.allowRecurse=!!U;let u;F==="sync"?u=f:F==="post"?u=()=>Eu(f,h&&h.suspense):u=()=>{!h||h.isMounted?lI(f):f()};const l=new M2(y,u);return U?e?f():r=l.run():F==="post"?Eu(l.run.bind(l),h&&h.suspense):l.run(),()=>{l.stop(),h&&h.scope&&_2(h.scope.effects,l)}}function bI(N,U,e){const I=this.proxy,F=yl(N)?N.includes(".")?tE(I,N):()=>I[N]:N.bind(I,I);let s;Yi(U)?s=U:(s=U.handler,e=U);const o=Ll;ed(this);const h=eE(F,s.bind(I),e);return o?ed(o):Rv(),h}function tE(N,U){const e=U.split(".");return()=>{let I=N;for(let F=0;F<e.length&&I;F++)I=I[e[F]];return I}}function Lv(N,U){if(!ws(N)||N.__v_skip||(U=U||new Set,U.has(N)))return N;if(U.add(N),dl(N))Lv(N.value,U);else if(yi(N))for(let e=0;e<N.length;e++)Lv(N[e],U);else if(fd(N)||Yp(N))N.forEach(e=>{Lv(e,U)});else if(kM(N))for(const e in N)Lv(N[e],U);return N}function _I(){const N={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vm(()=>{N.isMounted=!0}),sE(()=>{N.isUnmounting=!0}),N}const gf=[Function,Array],wI={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:gf,onEnter:gf,onAfterEnter:gf,onEnterCancelled:gf,onBeforeLeave:gf,onLeave:gf,onAfterLeave:gf,onLeaveCancelled:gf,onBeforeAppear:gf,onAppear:gf,onAfterAppear:gf,onAppearCancelled:gf},setup(N,{slots:U}){const e=nR(),I=_I();let F;return()=>{const s=U.default&&aE(U.default(),!0);if(!s||!s.length)return;const o=To(N),{mode:h}=o,y=s[0];if(I.isLeaving)return z1(y);const t=D3(y);if(!t)return z1(y);const a=gb(t,o,I,e);yb(t,a);const i=e.subTree,n=i&&D3(i);let r=!1;const{getTransitionKey:f}=t.type;if(f){const u=f();F===void 0?F=u:u!==F&&(F=u,r=!0)}if(n&&n.type!==tc&&(!Mv(t,n)||r)){const u=gb(n,o,I,e);if(yb(n,u),h==="out-in")return I.isLeaving=!0,u.afterLeave=()=>{I.isLeaving=!1,e.update()},z1(y);h==="in-out"&&t.type!==tc&&(u.delayLeave=(l,m,d)=>{const b=nE(I,n);b[String(n.key)]=n,l._leaveCb=()=>{m(),l._leaveCb=void 0,delete a.delayedLeave},a.delayedLeave=d})}return y}}},rE=wI;function nE(N,U){const{leavingVNodes:e}=N;let I=e.get(U.type);return I||(I=Object.create(null),e.set(U.type,I)),I}function gb(N,U,e,I){const{appear:F,mode:s,persisted:o=!1,onBeforeEnter:h,onEnter:y,onAfterEnter:t,onEnterCancelled:a,onBeforeLeave:i,onLeave:n,onAfterLeave:r,onLeaveCancelled:f,onBeforeAppear:u,onAppear:l,onAfterAppear:m,onAppearCancelled:d}=U,b=String(N.key),g=nE(e,N),_=(A,c)=>{A&&Tf(A,I,9,c)},p={mode:s,persisted:o,beforeEnter(A){let c=h;if(!e.isMounted)if(F)c=u||h;else return;A._leaveCb&&A._leaveCb(!0);const S=g[b];S&&Mv(N,S)&&S.el._leaveCb&&S.el._leaveCb(),_(c,[A])},enter(A){let c=y,S=t,T=a;if(!e.isMounted)if(F)c=l||y,S=m||t,T=d||a;else return;let x=!1;const w=A._enterCb=v=>{x||(x=!0,v?_(T,[A]):_(S,[A]),p.delayedLeave&&p.delayedLeave(),A._enterCb=void 0)};c?(c(A,w),c.length<=1&&w()):w()},leave(A,c){const S=String(N.key);if(A._enterCb&&A._enterCb(!0),e.isUnmounting)return c();_(i,[A]);let T=!1;const x=A._leaveCb=w=>{T||(T=!0,c(),w?_(f,[A]):_(r,[A]),A._leaveCb=void 0,g[S]===N&&delete g[S])};g[S]=N,n?(n(A,x),n.length<=1&&x()):x()},clone(A){return gb(A,U,e,I)}};return p}function z1(N){if(cm(N))return N=qp(N),N.children=null,N}function D3(N){return cm(N)?N.children?N.children[0]:void 0:N}function yb(N,U){N.shapeFlag&6&&N.component?yb(N.component.subTree,U):N.shapeFlag&128?(N.ssContent.transition=U.clone(N.ssContent),N.ssFallback.transition=U.clone(N.ssFallback)):N.transition=U}function aE(N,U=!1){let e=[],I=0;for(let F=0;F<N.length;F++){const s=N[F];s.type===is?(s.patchFlag&128&&I++,e=e.concat(aE(s.children,U))):(U||s.type!==tc)&&e.push(s)}if(I>1)for(let F=0;F<e.length;F++)e[F].patchFlag=-2;return e}function TI(N){return Yi(N)?{setup:N,name:N.name}:N}const mb=N=>!!N.type.__asyncLoader,cm=N=>N.type.__isKeepAlive;function AI(N,U){iE(N,"a",U)}function SI(N,U){iE(N,"da",U)}function iE(N,U,e=Ll){const I=N.__wdc||(N.__wdc=()=>{let F=e;for(;F;){if(F.isDeactivated)return;F=F.parent}return N()});if(hm(U,I,e),e){let F=e.parent;for(;F&&F.parent;)cm(F.parent.vnode)&&MI(I,U,e,F),F=F.parent}}function MI(N,U,e,I){const F=hm(U,N,I,!0);F2(()=>{_2(I[U],F)},e)}function hm(N,U,e=Ll,I=!1){if(e){const F=e[N]||(e[N]=[]),s=U.__weh||(U.__weh=(...o)=>{if(e.isUnmounted)return;cd(),ed(e);const h=Tf(U,e,N,o);return Rv(),hd(),h});return I?F.unshift(s):F.push(s),s}}const oh=N=>(U,e=Ll)=>(!I0||N==="sp")&&hm(N,U,e),EI=oh("bm"),vm=oh("m"),oE=oh("bu"),kI=oh("u"),sE=oh("bum"),F2=oh("um"),CI=oh("sp"),LI=oh("rtg"),PI=oh("rtc");function II(N,U=Ll){hm("ec",N,U)}let xb=!0;function RI(N){const U=uE(N),e=N.proxy,I=N.ctx;xb=!1,U.beforeCreate&&F3(U.beforeCreate,N,"bc");const{data:F,computed:s,methods:o,watch:h,provide:y,inject:t,created:a,beforeMount:i,mounted:n,beforeUpdate:r,updated:f,activated:u,deactivated:l,beforeDestroy:m,beforeUnmount:d,destroyed:b,unmounted:g,render:_,renderTracked:p,renderTriggered:A,errorCaptured:c,serverPrefetch:S,expose:T,inheritAttrs:x,components:w,directives:v,filters:C}=U;if(t&&DI(t,I,null,N.appContext.config.unwrapInjectedRef),o)for(const L in o){const z=o[L];Yi(z)&&(I[L]=z.bind(e))}if(F){const L=F.call(e,e);ws(L)&&(N.data=lm(L))}if(xb=!0,s)for(const L in s){const z=s[L],O=Yi(z)?z.bind(e,e):Yi(z.get)?z.get.bind(e,e):ec,R=!Yi(z)&&Yi(z.set)?z.set.bind(e):ec,D=ku({get:O,set:R});Object.defineProperty(I,L,{enumerable:!0,configurable:!0,get:()=>D.value,set:H=>D.value=H})}if(h)for(const L in h)lE(h[L],I,e,L);if(y){const L=Yi(y)?y.call(e):y;Reflect.ownKeys(L).forEach(z=>{xI(z,L[z])})}a&&F3(a,N,"c");function E(L,z){yi(z)?z.forEach(O=>L(O.bind(e))):z&&L(z.bind(e))}if(E(EI,i),E(vm,n),E(oE,r),E(kI,f),E(AI,u),E(SI,l),E(II,c),E(PI,p),E(LI,A),E(sE,d),E(F2,g),E(CI,S),yi(T))if(T.length){const L=N.exposed||(N.exposed={});T.forEach(z=>{Object.defineProperty(L,z,{get:()=>e[z],set:O=>e[z]=O})})}else N.exposed||(N.exposed={});_&&N.render===ec&&(N.render=_),x!=null&&(N.inheritAttrs=x),w&&(N.components=w),v&&(N.directives=v)}function DI(N,U,e=ec,I=!1){yi(N)&&(N=bb(N));for(const F in N){const s=N[F];let o;ws(s)?"default"in s?o=O1(s.from||F,s.default,!0):o=O1(s.from||F):o=O1(s),dl(o)&&I?Object.defineProperty(U,F,{enumerable:!0,configurable:!0,get:()=>o.value,set:h=>o.value=h}):U[F]=o}}function F3(N,U,e){Tf(yi(N)?N.map(I=>I.bind(U.proxy)):N.bind(U.proxy),U,e)}function lE(N,U,e,I){const F=I.includes(".")?tE(e,I):()=>e[I];if(yl(N)){const s=U[N];Yi(s)&&Gs(F,s)}else if(Yi(N))Gs(F,N.bind(e));else if(ws(N))if(yi(N))N.forEach(s=>lE(s,U,e,I));else{const s=Yi(N.handler)?N.handler.bind(e):U[N.handler];Yi(s)&&Gs(F,s,N)}}function uE(N){const U=N.type,{mixins:e,extends:I}=U,{mixins:F,optionsCache:s,config:{optionMergeStrategies:o}}=N.appContext,h=s.get(U);let y;return h?y=h:!F.length&&!e&&!I?y=U:(y={},F.length&&F.forEach(t=>Oy(y,t,o,!0)),Oy(y,U,o)),s.set(U,y),y}function Oy(N,U,e,I=!1){const{mixins:F,extends:s}=U;s&&Oy(N,s,e,!0),F&&F.forEach(o=>Oy(N,o,e,!0));for(const o in U)if(!(I&&o==="expose")){const h=FI[o]||e&&e[o];N[o]=h?h(N[o],U[o]):U[o]}return N}const FI={data:O3,props:Tv,emits:Tv,methods:Tv,computed:Tv,beforeCreate:su,created:su,beforeMount:su,mounted:su,beforeUpdate:su,updated:su,beforeDestroy:su,beforeUnmount:su,destroyed:su,unmounted:su,activated:su,deactivated:su,errorCaptured:su,serverPrefetch:su,components:Tv,directives:Tv,watch:zI,provide:O3,inject:OI};function O3(N,U){return U?N?function(){return Il(Yi(N)?N.call(this,this):N,Yi(U)?U.call(this,this):U)}:U:N}function OI(N,U){return Tv(bb(N),bb(U))}function bb(N){if(yi(N)){const U={};for(let e=0;e<N.length;e++)U[N[e]]=N[e];return U}return N}function su(N,U){return N?[...new Set([].concat(N,U))]:U}function Tv(N,U){return N?Il(Il(Object.create(null),N),U):U}function zI(N,U){if(!N)return U;if(!U)return N;const e=Il(Object.create(null),N);for(const I in U)e[I]=su(N[I],U[I]);return e}function NI(N,U,e,I=!1){const F={},s={};Ry(s,pm,1),N.propsDefaults=Object.create(null),fE(N,U,F,s);for(const o in N.propsOptions[0])o in F||(F[o]=void 0);e?N.props=I?F:K8(F):N.type.props?N.props=F:N.props=s,N.attrs=s}function BI(N,U,e,I){const{props:F,attrs:s,vnode:{patchFlag:o}}=N,h=To(F),[y]=N.propsOptions;let t=!1;if((I||o>0)&&!(o&16)){if(o&8){const a=N.vnode.dynamicProps;for(let i=0;i<a.length;i++){let n=a[i];const r=U[n];if(y)if(mo(s,n))r!==s[n]&&(s[n]=r,t=!0);else{const f=Qp(n);F[f]=_b(y,h,f,r,N,!1)}else r!==s[n]&&(s[n]=r,t=!0)}}}else{fE(N,U,F,s)&&(t=!0);let a;for(const i in h)(!U||!mo(U,i)&&((a=jv(i))===i||!mo(U,a)))&&(y?e&&(e[i]!==void 0||e[a]!==void 0)&&(F[i]=_b(y,h,i,void 0,N,!0)):delete F[i]);if(s!==h)for(const i in s)(!U||!mo(U,i)&&!0)&&(delete s[i],t=!0)}t&&eh(N,"set","$attrs")}function fE(N,U,e,I){const[F,s]=N.propsOptions;let o=!1,h;if(U)for(let y in U){if(my(y))continue;const t=U[y];let a;F&&mo(F,a=Qp(y))?!s||!s.includes(a)?e[a]=t:(h||(h={}))[a]=t:D2(N.emitsOptions,y)||(!(y in I)||t!==I[y])&&(I[y]=t,o=!0)}if(s){const y=To(e),t=h||Go;for(let a=0;a<s.length;a++){const i=s[a];e[i]=_b(F,y,i,t[i],N,!mo(t,i))}}return o}function _b(N,U,e,I,F,s){const o=N[e];if(o!=null){const h=mo(o,"default");if(h&&I===void 0){const y=o.default;if(o.type!==Function&&Yi(y)){const{propsDefaults:t}=F;e in t?I=t[e]:(ed(F),I=t[e]=y.call(null,U),Rv())}else I=y}o[0]&&(s&&!h?I=!1:o[1]&&(I===""||I===jv(e))&&(I=!0))}return I}function cE(N,U,e=!1){const I=U.propsCache,F=I.get(N);if(F)return F;const s=N.props,o={},h=[];let y=!1;if(!Yi(N)){const a=i=>{y=!0;const[n,r]=cE(i,U,!0);Il(o,n),r&&h.push(...r)};!e&&U.mixins.length&&U.mixins.forEach(a),N.extends&&a(N.extends),N.mixins&&N.mixins.forEach(a)}if(!s&&!y)return I.set(N,Wp),Wp;if(yi(s))for(let a=0;a<s.length;a++){const i=Qp(s[a]);z3(i)&&(o[i]=Go)}else if(s)for(const a in s){const i=Qp(a);if(z3(i)){const n=s[a],r=o[i]=yi(n)||Yi(n)?{type:n}:n;if(r){const f=U3(Boolean,r.type),u=U3(String,r.type);r[0]=f>-1,r[1]=u<0||f<u,(f>-1||mo(r,"default"))&&h.push(i)}}}const t=[o,h];return I.set(N,t),t}function z3(N){return N[0]!=="$"}function N3(N){const U=N&&N.toString().match(/^\s*function (\w+)/);return U?U[1]:N===null?"null":""}function B3(N,U){return N3(N)===N3(U)}function U3(N,U){return yi(U)?U.findIndex(e=>B3(e,N)):Yi(U)&&B3(U,N)?0:-1}const hE=N=>N[0]==="_"||N==="$stable",O2=N=>yi(N)?N.map(Pc):[Pc(N)],UI=(N,U,e)=>{const I=db((...F)=>O2(U(...F)),e);return I._c=!1,I},vE=(N,U,e)=>{const I=N._ctx;for(const F in N){if(hE(F))continue;const s=N[F];if(Yi(s))U[F]=UI(F,s,I);else if(s!=null){const o=O2(s);U[F]=()=>o}}},pE=(N,U)=>{const e=O2(U);N.slots.default=()=>e},VI=(N,U)=>{if(N.vnode.shapeFlag&32){const e=U._;e?(N.slots=To(U),Ry(U,"_",e)):vE(U,N.slots={})}else N.slots={},U&&pE(N,U);Ry(N.slots,pm,1)},HI=(N,U,e)=>{const{vnode:I,slots:F}=N;let s=!0,o=Go;if(I.shapeFlag&32){const h=U._;h?e&&h===1?s=!1:(Il(F,U),!e&&h===1&&delete F._):(s=!U.$stable,vE(U,F)),o=U}else U&&(pE(N,U),o={default:1});if(s)for(const h in F)!hE(h)&&!(h in o)&&delete F[h]};function Ih(N,U){const e=bf;if(e===null)return N;const I=e.proxy,F=N.dirs||(N.dirs=[]);for(let s=0;s<U.length;s++){let[o,h,y,t=Go]=U[s];Yi(o)&&(o={mounted:o,updated:o}),o.deep&&Lv(h),F.push({dir:o,instance:I,value:h,oldValue:void 0,arg:y,modifiers:t})}return N}function hv(N,U,e,I){const F=N.dirs,s=U&&U.dirs;for(let o=0;o<F.length;o++){const h=F[o];s&&(h.oldValue=s[o].value);let y=h.dir[I];y&&(cd(),Tf(y,e,8,[N.el,h,N,U]),hd())}}function dE(){return{app:null,config:{isNativeTag:g8,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GI=0;function jI(N,U){return function(I,F=null){F!=null&&!ws(F)&&(F=null);const s=dE(),o=new Set;let h=!1;const y=s.app={_uid:GI++,_component:I,_props:F,_container:null,_context:s,_instance:null,version:fR,get config(){return s.config},set config(t){},use(t,...a){return o.has(t)||(t&&Yi(t.install)?(o.add(t),t.install(y,...a)):Yi(t)&&(o.add(t),t(y,...a))),y},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),y},component(t,a){return a?(s.components[t]=a,y):s.components[t]},directive(t,a){return a?(s.directives[t]=a,y):s.directives[t]},mount(t,a,i){if(!h){const n=yo(I,F);return n.appContext=s,a&&U?U(n,t):N(n,t,i),h=!0,y._container=t,t.__vue_app__=y,B2(n.component)||n.component.proxy}},unmount(){h&&(N(null,y._container),delete y._container.__vue_app__)},provide(t,a){return s.provides[t]=a,y}};return y}}function wb(N,U,e,I,F=!1){if(yi(N)){N.forEach((n,r)=>wb(n,U&&(yi(U)?U[r]:U),e,I,F));return}if(mb(I)&&!F)return;const s=I.shapeFlag&4?B2(I.component)||I.component.proxy:I.el,o=F?null:s,{i:h,r:y}=N,t=U&&U.r,a=h.refs===Go?h.refs={}:h.refs,i=h.setupState;if(t!=null&&t!==y&&(yl(t)?(a[t]=null,mo(i,t)&&(i[t]=null)):dl(t)&&(t.value=null)),Yi(y))Bh(y,h,12,[o,a]);else{const n=yl(y),r=dl(y);if(n||r){const f=()=>{if(N.f){const u=n?a[y]:y.value;F?yi(u)&&_2(u,s):yi(u)?u.includes(s)||u.push(s):n?a[y]=[s]:(y.value=[s],N.k&&(a[N.k]=y.value))}else n?(a[y]=o,mo(i,y)&&(i[y]=o)):dl(y)&&(y.value=o,N.k&&(a[N.k]=o))};o?(f.id=-1,Eu(f,e)):f()}}}const Eu=mI;function $I(N){return WI(N)}function WI(N,U){const e=w8();e.__VUE__=!0;const{insert:I,remove:F,patchProp:s,createElement:o,createText:h,createComment:y,setText:t,setElementText:a,parentNode:i,nextSibling:n,setScopeId:r=ec,cloneNode:f,insertStaticContent:u}=N,l=(V,j,ee,q=null,X=null,J=null,ie=!1,ne=null,oe=!!j.dynamicChildren)=>{if(V===j)return;V&&!Mv(V,j)&&(q=Z(V),B(V,X,J,!0),V=null),j.patchFlag===-2&&(oe=!1,j.dynamicChildren=null);const{type:se,ref:me,shapeFlag:ce}=j;switch(se){case z2:m(V,j,ee,q);break;case tc:d(V,j,ee,q);break;case N1:V==null&&b(j,ee,q,ie);break;case is:v(V,j,ee,q,X,J,ie,ne,oe);break;default:ce&1?p(V,j,ee,q,X,J,ie,ne,oe):ce&6?C(V,j,ee,q,X,J,ie,ne,oe):(ce&64||ce&128)&&se.process(V,j,ee,q,X,J,ie,ne,oe,le)}me!=null&&X&&wb(me,V&&V.ref,J,j||V,!j)},m=(V,j,ee,q)=>{if(V==null)I(j.el=h(j.children),ee,q);else{const X=j.el=V.el;j.children!==V.children&&t(X,j.children)}},d=(V,j,ee,q)=>{V==null?I(j.el=y(j.children||""),ee,q):j.el=V.el},b=(V,j,ee,q)=>{[V.el,V.anchor]=u(V.children,j,ee,q,V.el,V.anchor)},g=({el:V,anchor:j},ee,q)=>{let X;for(;V&&V!==j;)X=n(V),I(V,ee,q),V=X;I(j,ee,q)},_=({el:V,anchor:j})=>{let ee;for(;V&&V!==j;)ee=n(V),F(V),V=ee;F(j)},p=(V,j,ee,q,X,J,ie,ne,oe)=>{ie=ie||j.type==="svg",V==null?A(j,ee,q,X,J,ie,ne,oe):T(V,j,X,J,ie,ne,oe)},A=(V,j,ee,q,X,J,ie,ne)=>{let oe,se;const{type:me,props:ce,shapeFlag:pe,transition:xe,patchFlag:Se,dirs:Ae}=V;if(V.el&&f!==void 0&&Se===-1)oe=V.el=f(V.el);else{if(oe=V.el=o(V.type,J,ce&&ce.is,ce),pe&8?a(oe,V.children):pe&16&&S(V.children,oe,null,q,X,J&&me!=="foreignObject",ie,ne),Ae&&hv(V,null,q,"created"),ce){for(const Ee in ce)Ee!=="value"&&!my(Ee)&&s(oe,Ee,null,ce[Ee],J,V.children,q,X,Q);"value"in ce&&s(oe,"value",null,ce.value),(se=ce.onVnodeBeforeMount)&&Sc(se,q,V)}c(oe,V,V.scopeId,ie,q)}Ae&&hv(V,null,q,"beforeMount");const Ce=(!X||X&&!X.pendingBranch)&&xe&&!xe.persisted;Ce&&xe.beforeEnter(oe),I(oe,j,ee),((se=ce&&ce.onVnodeMounted)||Ce||Ae)&&Eu(()=>{se&&Sc(se,q,V),Ce&&xe.enter(oe),Ae&&hv(V,null,q,"mounted")},X)},c=(V,j,ee,q,X)=>{if(ee&&r(V,ee),q)for(let J=0;J<q.length;J++)r(V,q[J]);if(X){let J=X.subTree;if(j===J){const ie=X.vnode;c(V,ie,ie.scopeId,ie.slotScopeIds,X.parent)}}},S=(V,j,ee,q,X,J,ie,ne,oe=0)=>{for(let se=oe;se<V.length;se++){const me=V[se]=ne?Ph(V[se]):Pc(V[se]);l(null,me,j,ee,q,X,J,ie,ne)}},T=(V,j,ee,q,X,J,ie)=>{const ne=j.el=V.el;let{patchFlag:oe,dynamicChildren:se,dirs:me}=j;oe|=V.patchFlag&16;const ce=V.props||Go,pe=j.props||Go;let xe;ee&&vv(ee,!1),(xe=pe.onVnodeBeforeUpdate)&&Sc(xe,ee,j,V),me&&hv(j,V,ee,"beforeUpdate"),ee&&vv(ee,!0);const Se=X&&j.type!=="foreignObject";if(se?x(V.dynamicChildren,se,ne,ee,q,Se,J):ie||O(V,j,ne,null,ee,q,Se,J,!1),oe>0){if(oe&16)w(ne,j,ce,pe,ee,q,X);else if(oe&2&&ce.class!==pe.class&&s(ne,"class",null,pe.class,X),oe&4&&s(ne,"style",ce.style,pe.style,X),oe&8){const Ae=j.dynamicProps;for(let Ce=0;Ce<Ae.length;Ce++){const Ee=Ae[Ce],Oe=ce[Ee],_e=pe[Ee];(_e!==Oe||Ee==="value")&&s(ne,Ee,Oe,_e,X,V.children,ee,q,Q)}}oe&1&&V.children!==j.children&&a(ne,j.children)}else!ie&&se==null&&w(ne,j,ce,pe,ee,q,X);((xe=pe.onVnodeUpdated)||me)&&Eu(()=>{xe&&Sc(xe,ee,j,V),me&&hv(j,V,ee,"updated")},q)},x=(V,j,ee,q,X,J,ie)=>{for(let ne=0;ne<j.length;ne++){const oe=V[ne],se=j[ne],me=oe.el&&(oe.type===is||!Mv(oe,se)||oe.shapeFlag&70)?i(oe.el):ee;l(oe,se,me,null,q,X,J,ie,!0)}},w=(V,j,ee,q,X,J,ie)=>{if(ee!==q){for(const ne in q){if(my(ne))continue;const oe=q[ne],se=ee[ne];oe!==se&&ne!=="value"&&s(V,ne,se,oe,ie,j.children,X,J,Q)}if(ee!==Go)for(const ne in ee)!my(ne)&&!(ne in q)&&s(V,ne,ee[ne],null,ie,j.children,X,J,Q);"value"in q&&s(V,"value",ee.value,q.value)}},v=(V,j,ee,q,X,J,ie,ne,oe)=>{const se=j.el=V?V.el:h(""),me=j.anchor=V?V.anchor:h("");let{patchFlag:ce,dynamicChildren:pe,slotScopeIds:xe}=j;xe&&(ne=ne?ne.concat(xe):xe),V==null?(I(se,ee,q),I(me,ee,q),S(j.children,ee,me,X,J,ie,ne,oe)):ce>0&&ce&64&&pe&&V.dynamicChildren?(x(V.dynamicChildren,pe,ee,X,J,ie,ne),(j.key!=null||X&&j===X.subTree)&&gE(V,j,!0)):O(V,j,ee,me,X,J,ie,ne,oe)},C=(V,j,ee,q,X,J,ie,ne,oe)=>{j.slotScopeIds=ne,V==null?j.shapeFlag&512?X.ctx.activate(j,ee,q,ie,oe):M(j,ee,q,X,J,ie,oe):E(V,j,oe)},M=(V,j,ee,q,X,J,ie)=>{const ne=V.component=rR(V,q,X);if(cm(V)&&(ne.ctx.renderer=le),aR(ne),ne.asyncDep){if(X&&X.registerDep(ne,L),!V.el){const oe=ne.subTree=yo(tc);d(null,oe,j,ee)}return}L(ne,V,j,ee,X,J,ie)},E=(V,j,ee)=>{const q=j.component=V.component;if(dI(V,j,ee))if(q.asyncDep&&!q.asyncResolved){z(q,j,ee);return}else q.next=j,sI(q.update),q.update();else j.component=V.component,j.el=V.el,q.vnode=j},L=(V,j,ee,q,X,J,ie)=>{const ne=()=>{if(V.isMounted){let{next:me,bu:ce,u:pe,parent:xe,vnode:Se}=V,Ae=me,Ce;vv(V,!1),me?(me.el=Se.el,z(V,me,ie)):me=Se,ce&&xy(ce),(Ce=me.props&&me.props.onVnodeBeforeUpdate)&&Sc(Ce,xe,me,Se),vv(V,!0);const Ee=F1(V),Oe=V.subTree;V.subTree=Ee,l(Oe,Ee,i(Oe.el),Z(Oe),V,X,J),me.el=Ee.el,Ae===null&&gI(V,Ee.el),pe&&Eu(pe,X),(Ce=me.props&&me.props.onVnodeUpdated)&&Eu(()=>Sc(Ce,xe,me,Se),X)}else{let me;const{el:ce,props:pe}=j,{bm:xe,m:Se,parent:Ae}=V,Ce=mb(j);if(vv(V,!1),xe&&xy(xe),!Ce&&(me=pe&&pe.onVnodeBeforeMount)&&Sc(me,Ae,j),vv(V,!0),ce&&ue){const Ee=()=>{V.subTree=F1(V),ue(ce,V.subTree,V,X,null)};Ce?j.type.__asyncLoader().then(()=>!V.isUnmounted&&Ee()):Ee()}else{const Ee=V.subTree=F1(V);l(null,Ee,ee,q,V,X,J),j.el=Ee.el}if(Se&&Eu(Se,X),!Ce&&(me=pe&&pe.onVnodeMounted)){const Ee=j;Eu(()=>Sc(me,Ae,Ee),X)}j.shapeFlag&256&&V.a&&Eu(V.a,X),V.isMounted=!0,j=ee=q=null}},oe=V.effect=new M2(ne,()=>XM(V.update),V.scope),se=V.update=oe.run.bind(oe);se.id=V.uid,vv(V,!0),se()},z=(V,j,ee)=>{j.component=V;const q=V.vnode.props;V.vnode=j,V.next=null,BI(V,j.props,q,ee),HI(V,j.children,ee),cd(),R2(void 0,V.update),hd()},O=(V,j,ee,q,X,J,ie,ne,oe=!1)=>{const se=V&&V.children,me=V?V.shapeFlag:0,ce=j.children,{patchFlag:pe,shapeFlag:xe}=j;if(pe>0){if(pe&128){D(se,ce,ee,q,X,J,ie,ne,oe);return}else if(pe&256){R(se,ce,ee,q,X,J,ie,ne,oe);return}}xe&8?(me&16&&Q(se,X,J),ce!==se&&a(ee,ce)):me&16?xe&16?D(se,ce,ee,q,X,J,ie,ne,oe):Q(se,X,J,!0):(me&8&&a(ee,""),xe&16&&S(ce,ee,q,X,J,ie,ne,oe))},R=(V,j,ee,q,X,J,ie,ne,oe)=>{V=V||Wp,j=j||Wp;const se=V.length,me=j.length,ce=Math.min(se,me);let pe;for(pe=0;pe<ce;pe++){const xe=j[pe]=oe?Ph(j[pe]):Pc(j[pe]);l(V[pe],xe,ee,null,X,J,ie,ne,oe)}se>me?Q(V,X,J,!0,!1,ce):S(j,ee,q,X,J,ie,ne,oe,ce)},D=(V,j,ee,q,X,J,ie,ne,oe)=>{let se=0;const me=j.length;let ce=V.length-1,pe=me-1;for(;se<=ce&&se<=pe;){const xe=V[se],Se=j[se]=oe?Ph(j[se]):Pc(j[se]);if(Mv(xe,Se))l(xe,Se,ee,null,X,J,ie,ne,oe);else break;se++}for(;se<=ce&&se<=pe;){const xe=V[ce],Se=j[pe]=oe?Ph(j[pe]):Pc(j[pe]);if(Mv(xe,Se))l(xe,Se,ee,null,X,J,ie,ne,oe);else break;ce--,pe--}if(se>ce){if(se<=pe){const xe=pe+1,Se=xe<me?j[xe].el:q;for(;se<=pe;)l(null,j[se]=oe?Ph(j[se]):Pc(j[se]),ee,Se,X,J,ie,ne,oe),se++}}else if(se>pe)for(;se<=ce;)B(V[se],X,J,!0),se++;else{const xe=se,Se=se,Ae=new Map;for(se=Se;se<=pe;se++){const ze=j[se]=oe?Ph(j[se]):Pc(j[se]);ze.key!=null&&Ae.set(ze.key,se)}let Ce,Ee=0;const Oe=pe-Se+1;let _e=!1,Re=0;const Ve=new Array(Oe);for(se=0;se<Oe;se++)Ve[se]=0;for(se=xe;se<=ce;se++){const ze=V[se];if(Ee>=Oe){B(ze,X,J,!0);continue}let De;if(ze.key!=null)De=Ae.get(ze.key);else for(Ce=Se;Ce<=pe;Ce++)if(Ve[Ce-Se]===0&&Mv(ze,j[Ce])){De=Ce;break}De===void 0?B(ze,X,J,!0):(Ve[De-Se]=se+1,De>=Re?Re=De:_e=!0,l(ze,j[De],ee,null,X,J,ie,ne,oe),Ee++)}const Je=_e?YI(Ve):Wp;for(Ce=Je.length-1,se=Oe-1;se>=0;se--){const ze=Se+se,De=j[ze],je=ze+1<me?j[ze+1].el:q;Ve[se]===0?l(null,De,ee,je,X,J,ie,ne,oe):_e&&(Ce<0||se!==Je[Ce]?H(De,ee,je,2):Ce--)}}},H=(V,j,ee,q,X=null)=>{const{el:J,type:ie,transition:ne,children:oe,shapeFlag:se}=V;if(se&6){H(V.component.subTree,j,ee,q);return}if(se&128){V.suspense.move(j,ee,q);return}if(se&64){ie.move(V,j,ee,le);return}if(ie===is){I(J,j,ee);for(let ce=0;ce<oe.length;ce++)H(oe[ce],j,ee,q);I(V.anchor,j,ee);return}if(ie===N1){g(V,j,ee);return}if(q!==2&&se&1&&ne)if(q===0)ne.beforeEnter(J),I(J,j,ee),Eu(()=>ne.enter(J),X);else{const{leave:ce,delayLeave:pe,afterLeave:xe}=ne,Se=()=>I(J,j,ee),Ae=()=>{ce(J,()=>{Se(),xe&&xe()})};pe?pe(J,Se,Ae):Ae()}else I(J,j,ee)},B=(V,j,ee,q=!1,X=!1)=>{const{type:J,props:ie,ref:ne,children:oe,dynamicChildren:se,shapeFlag:me,patchFlag:ce,dirs:pe}=V;if(ne!=null&&wb(ne,null,ee,V,!0),me&256){j.ctx.deactivate(V);return}const xe=me&1&&pe,Se=!mb(V);let Ae;if(Se&&(Ae=ie&&ie.onVnodeBeforeUnmount)&&Sc(Ae,j,V),me&6)re(V.component,ee,q);else{if(me&128){V.suspense.unmount(ee,q);return}xe&&hv(V,null,j,"beforeUnmount"),me&64?V.type.remove(V,j,ee,X,le,q):se&&(J!==is||ce>0&&ce&64)?Q(se,j,ee,!1,!0):(J===is&&ce&384||!X&&me&16)&&Q(oe,j,ee),q&&$(V)}(Se&&(Ae=ie&&ie.onVnodeUnmounted)||xe)&&Eu(()=>{Ae&&Sc(Ae,j,V),xe&&hv(V,null,j,"unmounted")},ee)},$=V=>{const{type:j,el:ee,anchor:q,transition:X}=V;if(j===is){W(ee,q);return}if(j===N1){_(V);return}const J=()=>{F(ee),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(V.shapeFlag&1&&X&&!X.persisted){const{leave:ie,delayLeave:ne}=X,oe=()=>ie(ee,J);ne?ne(V.el,J,oe):oe()}else J()},W=(V,j)=>{let ee;for(;V!==j;)ee=n(V),F(V),V=ee;F(j)},re=(V,j,ee)=>{const{bum:q,scope:X,update:J,subTree:ie,um:ne}=V;q&&xy(q),X.stop(),J&&(J.active=!1,B(ie,V,j,ee)),ne&&Eu(ne,j),Eu(()=>{V.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},Q=(V,j,ee,q=!1,X=!1,J=0)=>{for(let ie=J;ie<V.length;ie++)B(V[ie],j,ee,q,X)},Z=V=>V.shapeFlag&6?Z(V.component.subTree):V.shapeFlag&128?V.suspense.next():n(V.anchor||V.el),K=(V,j,ee)=>{V==null?j._vnode&&B(j._vnode,null,null,!0):l(j._vnode||null,V,j,null,null,null,ee),JM(),j._vnode=V},le={p:l,um:B,m:H,r:$,mt:M,mc:S,pc:O,pbc:x,n:Z,o:N};let fe,ue;return U&&([fe,ue]=U(le)),{render:K,hydrate:fe,createApp:jI(K,fe)}}function vv({effect:N,update:U},e){N.allowRecurse=U.allowRecurse=e}function gE(N,U,e=!1){const I=N.children,F=U.children;if(yi(I)&&yi(F))for(let s=0;s<I.length;s++){const o=I[s];let h=F[s];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=F[s]=Ph(F[s]),h.el=o.el),e||gE(o,h))}}function YI(N){const U=N.slice(),e=[0];let I,F,s,o,h;const y=N.length;for(I=0;I<y;I++){const t=N[I];if(t!==0){if(F=e[e.length-1],N[F]<t){U[I]=F,e.push(I);continue}for(s=0,o=e.length-1;s<o;)h=s+o>>1,N[e[h]]<t?s=h+1:o=h;t<N[e[s]]&&(s>0&&(U[I]=e[s-1]),e[s]=I)}}for(s=e.length,o=e[s-1];s-- >0;)e[s]=o,o=U[o];return e}const XI=N=>N.__isTeleport,ZI=Symbol(),is=Symbol(void 0),z2=Symbol(void 0),tc=Symbol(void 0),N1=Symbol(void 0),m0=[];let Iv=null;function _i(N=!1){m0.push(Iv=N?null:[])}function KI(){m0.pop(),Iv=m0[m0.length-1]||null}let zy=1;function V3(N){zy+=N}function yE(N){return N.dynamicChildren=zy>0?Iv||Wp:null,KI(),zy>0&&Iv&&Iv.push(N),N}function ro(N,U,e,I,F,s){return yE(bi(N,U,e,I,F,s,!0))}function Yu(N,U,e,I,F){return yE(yo(N,U,e,I,F,!0))}function Ny(N){return N?N.__v_isVNode===!0:!1}function Mv(N,U){return N.type===U.type&&N.key===U.key}const pm="__vInternal",mE=({key:N})=>N!=null?N:null,wy=({ref:N,ref_key:U,ref_for:e})=>N!=null?yl(N)||dl(N)||Yi(N)?{i:bf,r:N,k:U,f:!!e}:N:null;function bi(N,U=null,e=null,I=0,F=null,s=N===is?0:1,o=!1,h=!1){const y={__v_isVNode:!0,__v_skip:!0,type:N,props:U,key:U&&mE(U),ref:U&&wy(U),scopeId:fm,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:I,dynamicProps:F,dynamicChildren:null,appContext:null};return h?(N2(y,e),s&128&&N.normalize(y)):e&&(y.shapeFlag|=yl(e)?8:16),zy>0&&!o&&Iv&&(y.patchFlag>0||s&6)&&y.patchFlag!==32&&Iv.push(y),y}const yo=JI;function JI(N,U=null,e=null,I=0,F=null,s=!1){if((!N||N===ZI)&&(N=tc),Ny(N)){const h=qp(N,U,!0);return e&&N2(h,e),h}if(lR(N)&&(N=N.__vccOpts),U){U=QI(U);let{class:h,style:y}=U;h&&!yl(h)&&(U.class=mf(h)),ws(y)&&(HM(y)&&!yi(y)&&(y=Il({},y)),U.style=$p(y))}const o=yl(N)?1:yI(N)?128:XI(N)?64:ws(N)?4:Yi(N)?2:0;return bi(N,U,e,I,F,o,s,!0)}function QI(N){return N?HM(N)||pm in N?Il({},N):N:null}function qp(N,U,e=!1){const{props:I,ref:F,patchFlag:s,children:o}=N,h=U?xE(I||{},U):I;return{__v_isVNode:!0,__v_skip:!0,type:N.type,props:h,key:h&&mE(h),ref:U&&U.ref?e&&F?yi(F)?F.concat(wy(U)):[F,wy(U)]:wy(U):F,scopeId:N.scopeId,slotScopeIds:N.slotScopeIds,children:o,target:N.target,targetAnchor:N.targetAnchor,staticCount:N.staticCount,shapeFlag:N.shapeFlag,patchFlag:U&&N.type!==is?s===-1?16:s|16:s,dynamicProps:N.dynamicProps,dynamicChildren:N.dynamicChildren,appContext:N.appContext,dirs:N.dirs,transition:N.transition,component:N.component,suspense:N.suspense,ssContent:N.ssContent&&qp(N.ssContent),ssFallback:N.ssFallback&&qp(N.ssFallback),el:N.el,anchor:N.anchor}}function Zp(N=" ",U=0){return yo(z2,null,N,U)}function lu(N="",U=!1){return U?(_i(),Yu(tc,null,N)):yo(tc,null,N)}function Pc(N){return N==null||typeof N=="boolean"?yo(tc):yi(N)?yo(is,null,N.slice()):typeof N=="object"?Ph(N):yo(z2,null,String(N))}function Ph(N){return N.el===null||N.memo?N:qp(N)}function N2(N,U){let e=0;const{shapeFlag:I}=N;if(U==null)U=null;else if(yi(U))e=16;else if(typeof U=="object")if(I&65){const F=U.default;F&&(F._c&&(F._d=!1),N2(N,F()),F._c&&(F._d=!0));return}else{e=32;const F=U._;!F&&!(pm in U)?U._ctx=bf:F===3&&bf&&(bf.slots._===1?U._=1:(U._=2,N.patchFlag|=1024))}else Yi(U)?(U={default:U,_ctx:bf},e=32):(U=String(U),I&64?(e=16,U=[Zp(U)]):e=8);N.children=U,N.shapeFlag|=e}function xE(...N){const U={};for(let e=0;e<N.length;e++){const I=N[e];for(const F in I)if(F==="class")U.class!==I.class&&(U.class=mf([U.class,I.class]));else if(F==="style")U.style=$p([U.style,I.style]);else if(am(F)){const s=U[F],o=I[F];o&&s!==o&&!(yi(s)&&s.includes(o))&&(U[F]=s?[].concat(s,o):o)}else F!==""&&(U[F]=I[F])}return U}function Sc(N,U,e,I=null){Tf(N,U,7,[e,I])}function Lc(N,U,e,I){let F;const s=e&&e[I];if(yi(N)||yl(N)){F=new Array(N.length);for(let o=0,h=N.length;o<h;o++)F[o]=U(N[o],o,void 0,s&&s[o])}else if(typeof N=="number"){F=new Array(N);for(let o=0;o<N;o++)F[o]=U(o+1,o,void 0,s&&s[o])}else if(ws(N))if(N[Symbol.iterator])F=Array.from(N,(o,h)=>U(o,h,void 0,s&&s[h]));else{const o=Object.keys(N);F=new Array(o.length);for(let h=0,y=o.length;h<y;h++){const t=o[h];F[h]=U(N[t],t,h,s&&s[h])}}else F=[];return e&&(e[I]=F),F}function Cl(N,U,e={},I,F){if(bf.isCE)return yo("slot",U==="default"?null:{name:U},I&&I());let s=N[U];s&&s._c&&(s._d=!1),_i();const o=s&&bE(s(e)),h=Yu(is,{key:e.key||`_${U}`},o||(I?I():[]),o&&N._===1?64:-2);return!F&&h.scopeId&&(h.slotScopeIds=[h.scopeId+"-s"]),s&&s._c&&(s._d=!0),h}function bE(N){return N.some(U=>Ny(U)?!(U.type===tc||U.type===is&&!bE(U.children)):!0)?N:null}const Tb=N=>N?_E(N)?B2(N)||N.proxy:Tb(N.parent):null,By=Il(Object.create(null),{$:N=>N,$el:N=>N.vnode.el,$data:N=>N.data,$props:N=>N.props,$attrs:N=>N.attrs,$slots:N=>N.slots,$refs:N=>N.refs,$parent:N=>Tb(N.parent),$root:N=>Tb(N.root),$emit:N=>N.emit,$options:N=>uE(N),$forceUpdate:N=>()=>XM(N.update),$nextTick:N=>_y.bind(N.proxy),$watch:N=>bI.bind(N)}),qI={get({_:N},U){const{ctx:e,setupState:I,data:F,props:s,accessCache:o,type:h,appContext:y}=N;let t;if(U[0]!=="$"){const r=o[U];if(r!==void 0)switch(r){case 1:return I[U];case 2:return F[U];case 4:return e[U];case 3:return s[U]}else{if(I!==Go&&mo(I,U))return o[U]=1,I[U];if(F!==Go&&mo(F,U))return o[U]=2,F[U];if((t=N.propsOptions[0])&&mo(t,U))return o[U]=3,s[U];if(e!==Go&&mo(e,U))return o[U]=4,e[U];xb&&(o[U]=0)}}const a=By[U];let i,n;if(a)return U==="$attrs"&&Ku(N,"get",U),a(N);if((i=h.__cssModules)&&(i=i[U]))return i;if(e!==Go&&mo(e,U))return o[U]=4,e[U];if(n=y.config.globalProperties,mo(n,U))return n[U]},set({_:N},U,e){const{data:I,setupState:F,ctx:s}=N;return F!==Go&&mo(F,U)?(F[U]=e,!0):I!==Go&&mo(I,U)?(I[U]=e,!0):mo(N.props,U)||U[0]==="$"&&U.slice(1)in N?!1:(s[U]=e,!0)},has({_:{data:N,setupState:U,accessCache:e,ctx:I,appContext:F,propsOptions:s}},o){let h;return!!e[o]||N!==Go&&mo(N,o)||U!==Go&&mo(U,o)||(h=s[0])&&mo(h,o)||mo(I,o)||mo(By,o)||mo(F.config.globalProperties,o)},defineProperty(N,U,e){return e.get!=null?this.set(N,U,e.get(),null):e.value!=null&&this.set(N,U,e.value,null),Reflect.defineProperty(N,U,e)}},eR=dE();let tR=0;function rR(N,U,e){const I=N.type,F=(U?U.appContext:N.appContext)||eR,s={uid:tR++,vnode:N,type:I,parent:U,appContext:F,root:null,next:null,subTree:null,effect:null,update:null,scope:new T8(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:U?U.provides:Object.create(F.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cE(I,F),emitsOptions:qM(I,F),emit:null,emitted:null,propsDefaults:Go,inheritAttrs:I.inheritAttrs,ctx:Go,data:Go,props:Go,attrs:Go,slots:Go,refs:Go,setupState:Go,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=U?U.root:s,s.emit=fI.bind(null,s),N.ce&&N.ce(s),s}let Ll=null;const nR=()=>Ll||bf,ed=N=>{Ll=N,N.scope.on()},Rv=()=>{Ll&&Ll.scope.off(),Ll=null};function _E(N){return N.vnode.shapeFlag&4}let I0=!1;function aR(N,U=!1){I0=U;const{props:e,children:I}=N.vnode,F=_E(N);NI(N,e,F,U),VI(N,I);const s=F?iR(N,U):void 0;return I0=!1,s}function iR(N,U){const e=N.type;N.accessCache=Object.create(null),N.proxy=GM(new Proxy(N.ctx,qI));const{setup:I}=e;if(I){const F=N.setupContext=I.length>1?sR(N):null;ed(N),cd();const s=Bh(I,N,0,[N.props,F]);if(hd(),Rv(),MM(s)){if(s.then(Rv,Rv),U)return s.then(o=>{H3(N,o,U)}).catch(o=>{um(o,N,0)});N.asyncDep=s}else H3(N,s,U)}else wE(N,U)}function H3(N,U,e){Yi(U)?N.type.__ssrInlineRender?N.ssrRender=U:N.render=U:ws(U)&&(N.setupState=WM(U)),wE(N,e)}let G3;function wE(N,U,e){const I=N.type;if(!N.render){if(!U&&G3&&!I.render){const F=I.template;if(F){const{isCustomElement:s,compilerOptions:o}=N.appContext.config,{delimiters:h,compilerOptions:y}=I,t=Il(Il({isCustomElement:s,delimiters:h},o),y);I.render=G3(F,t)}}N.render=I.render||ec}ed(N),cd(),RI(N),hd(),Rv()}function oR(N){return new Proxy(N.attrs,{get(U,e){return Ku(N,"get","$attrs"),U[e]}})}function sR(N){const U=I=>{N.exposed=I||{}};let e;return{get attrs(){return e||(e=oR(N))},slots:N.slots,emit:N.emit,expose:U}}function B2(N){if(N.exposed)return N.exposeProxy||(N.exposeProxy=new Proxy(WM(GM(N.exposed)),{get(U,e){if(e in U)return U[e];if(e in By)return By[e](N)}}))}function lR(N){return Yi(N)&&"__vccOpts"in N}const ku=(N,U)=>aI(N,U,I0);function uR(N,U,e){const I=arguments.length;return I===2?ws(U)&&!yi(U)?Ny(U)?yo(N,null,[U]):yo(N,U):yo(N,null,U):(I>3?e=Array.prototype.slice.call(arguments,2):I===3&&Ny(e)&&(e=[e]),yo(N,U,e))}const fR="3.2.31",cR="http://www.w3.org/2000/svg",Ev=typeof document!="undefined"?document:null,j3=Ev&&Ev.createElement("template"),hR={insert:(N,U,e)=>{U.insertBefore(N,e||null)},remove:N=>{const U=N.parentNode;U&&U.removeChild(N)},createElement:(N,U,e,I)=>{const F=U?Ev.createElementNS(cR,N):Ev.createElement(N,e?{is:e}:void 0);return N==="select"&&I&&I.multiple!=null&&F.setAttribute("multiple",I.multiple),F},createText:N=>Ev.createTextNode(N),createComment:N=>Ev.createComment(N),setText:(N,U)=>{N.nodeValue=U},setElementText:(N,U)=>{N.textContent=U},parentNode:N=>N.parentNode,nextSibling:N=>N.nextSibling,querySelector:N=>Ev.querySelector(N),setScopeId(N,U){N.setAttribute(U,"")},cloneNode(N){const U=N.cloneNode(!0);return"_value"in N&&(U._value=N._value),U},insertStaticContent(N,U,e,I,F,s){const o=e?e.previousSibling:U.lastChild;if(F&&(F===s||F.nextSibling))for(;U.insertBefore(F.cloneNode(!0),e),!(F===s||!(F=F.nextSibling)););else{j3.innerHTML=I?`<svg>${N}</svg>`:N;const h=j3.content;if(I){const y=h.firstChild;for(;y.firstChild;)h.appendChild(y.firstChild);h.removeChild(y)}U.insertBefore(h,e)}return[o?o.nextSibling:U.firstChild,e?e.previousSibling:U.lastChild]}};function vR(N,U,e){const I=N._vtc;I&&(U=(U?[U,...I]:[...I]).join(" ")),U==null?N.removeAttribute("class"):e?N.setAttribute("class",U):N.className=U}function pR(N,U,e){const I=N.style,F=yl(e);if(e&&!F){for(const s in e)Ab(I,s,e[s]);if(U&&!yl(U))for(const s in U)e[s]==null&&Ab(I,s,"")}else{const s=I.display;F?U!==e&&(I.cssText=e):U&&N.removeAttribute("style"),"_vod"in N&&(I.display=s)}}const $3=/\s*!important$/;function Ab(N,U,e){if(yi(e))e.forEach(I=>Ab(N,U,I));else if(U.startsWith("--"))N.setProperty(U,e);else{const I=dR(N,U);$3.test(e)?N.setProperty(jv(I),e.replace($3,""),"important"):N[I]=e}}const W3=["Webkit","Moz","ms"],B1={};function dR(N,U){const e=B1[U];if(e)return e;let I=Qp(U);if(I!=="filter"&&I in N)return B1[U]=I;I=CM(I);for(let F=0;F<W3.length;F++){const s=W3[F]+I;if(s in N)return B1[U]=s}return U}const Y3="http://www.w3.org/1999/xlink";function gR(N,U,e,I,F){if(I&&U.startsWith("xlink:"))e==null?N.removeAttributeNS(Y3,U.slice(6,U.length)):N.setAttributeNS(Y3,U,e);else{const s=c8(U);e==null||s&&!AM(e)?N.removeAttribute(U):N.setAttribute(U,s?"":e)}}function yR(N,U,e,I,F,s,o){if(U==="innerHTML"||U==="textContent"){I&&o(I,F,s),N[U]=e==null?"":e;return}if(U==="value"&&N.tagName!=="PROGRESS"&&!N.tagName.includes("-")){N._value=e;const h=e==null?"":e;(N.value!==h||N.tagName==="OPTION")&&(N.value=h),e==null&&N.removeAttribute(U);return}if(e===""||e==null){const h=typeof N[U];if(h==="boolean"){N[U]=AM(e);return}else if(e==null&&h==="string"){N[U]="",N.removeAttribute(U);return}else if(h==="number"){try{N[U]=0}catch{}N.removeAttribute(U);return}}try{N[U]=e}catch{}}let Uy=Date.now,TE=!1;if(typeof window!="undefined"){Uy()>document.createEvent("Event").timeStamp&&(Uy=()=>performance.now());const N=navigator.userAgent.match(/firefox\/(\d+)/i);TE=!!(N&&Number(N[1])<=53)}let Sb=0;const mR=Promise.resolve(),xR=()=>{Sb=0},bR=()=>Sb||(mR.then(xR),Sb=Uy());function U2(N,U,e,I){N.addEventListener(U,e,I)}function _R(N,U,e,I){N.removeEventListener(U,e,I)}function wR(N,U,e,I,F=null){const s=N._vei||(N._vei={}),o=s[U];if(I&&o)o.value=I;else{const[h,y]=TR(U);if(I){const t=s[U]=AR(I,F);U2(N,h,t,y)}else o&&(_R(N,h,o,y),s[U]=void 0)}}const X3=/(?:Once|Passive|Capture)$/;function TR(N){let U;if(X3.test(N)){U={};let e;for(;e=N.match(X3);)N=N.slice(0,N.length-e[0].length),U[e[0].toLowerCase()]=!0}return[jv(N.slice(2)),U]}function AR(N,U){const e=I=>{const F=I.timeStamp||Uy();(TE||F>=e.attached-1)&&Tf(SR(I,e.value),U,5,[I])};return e.value=N,e.attached=bR(),e}function SR(N,U){if(yi(U)){const e=N.stopImmediatePropagation;return N.stopImmediatePropagation=()=>{e.call(N),N._stopped=!0},U.map(I=>F=>!F._stopped&&I&&I(F))}else return U}const Z3=/^on[a-z]/,MR=(N,U,e,I,F=!1,s,o,h,y)=>{U==="class"?vR(N,I,F):U==="style"?pR(N,e,I):am(U)?b2(U)||wR(N,U,e,I,o):(U[0]==="."?(U=U.slice(1),!0):U[0]==="^"?(U=U.slice(1),!1):ER(N,U,I,F))?yR(N,U,I,s,o,h,y):(U==="true-value"?N._trueValue=I:U==="false-value"&&(N._falseValue=I),gR(N,U,I,F))};function ER(N,U,e,I){return I?!!(U==="innerHTML"||U==="textContent"||U in N&&Z3.test(U)&&Yi(e)):U==="spellcheck"||U==="draggable"||U==="form"||U==="list"&&N.tagName==="INPUT"||U==="type"&&N.tagName==="TEXTAREA"||Z3.test(U)&&yl(e)?!1:U in N}const Th="transition",$d="animation",Vy=(N,{slots:U})=>uR(rE,kR(N),U);Vy.displayName="Transition";const AE={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Vy.props=Il({},rE.props,AE);const pv=(N,U=[])=>{yi(N)?N.forEach(e=>e(...U)):N&&N(...U)},K3=N=>N?yi(N)?N.some(U=>U.length>1):N.length>1:!1;function kR(N){const U={};for(const w in N)w in AE||(U[w]=N[w]);if(N.css===!1)return U;const{name:e="v",type:I,duration:F,enterFromClass:s=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:h=`${e}-enter-to`,appearFromClass:y=s,appearActiveClass:t=o,appearToClass:a=h,leaveFromClass:i=`${e}-leave-from`,leaveActiveClass:n=`${e}-leave-active`,leaveToClass:r=`${e}-leave-to`}=N,f=CR(F),u=f&&f[0],l=f&&f[1],{onBeforeEnter:m,onEnter:d,onEnterCancelled:b,onLeave:g,onLeaveCancelled:_,onBeforeAppear:p=m,onAppear:A=d,onAppearCancelled:c=b}=U,S=(w,v,C)=>{Ap(w,v?a:h),Ap(w,v?t:o),C&&C()},T=(w,v)=>{Ap(w,r),Ap(w,n),v&&v()},x=w=>(v,C)=>{const M=w?A:d,E=()=>S(v,w,C);pv(M,[v,E]),J3(()=>{Ap(v,w?y:s),Ah(v,w?a:h),K3(M)||Q3(v,I,u,E)})};return Il(U,{onBeforeEnter(w){pv(m,[w]),Ah(w,s),Ah(w,o)},onBeforeAppear(w){pv(p,[w]),Ah(w,y),Ah(w,t)},onEnter:x(!1),onAppear:x(!0),onLeave(w,v){const C=()=>T(w,v);Ah(w,i),IR(),Ah(w,n),J3(()=>{Ap(w,i),Ah(w,r),K3(g)||Q3(w,I,l,C)}),pv(g,[w,C])},onEnterCancelled(w){S(w,!1),pv(b,[w])},onAppearCancelled(w){S(w,!0),pv(c,[w])},onLeaveCancelled(w){T(w),pv(_,[w])}})}function CR(N){if(N==null)return null;if(ws(N))return[U1(N.enter),U1(N.leave)];{const U=U1(N);return[U,U]}}function U1(N){return A2(N)}function Ah(N,U){U.split(/\s+/).forEach(e=>e&&N.classList.add(e)),(N._vtc||(N._vtc=new Set)).add(U)}function Ap(N,U){U.split(/\s+/).forEach(I=>I&&N.classList.remove(I));const{_vtc:e}=N;e&&(e.delete(U),e.size||(N._vtc=void 0))}function J3(N){requestAnimationFrame(()=>{requestAnimationFrame(N)})}let LR=0;function Q3(N,U,e,I){const F=N._endId=++LR,s=()=>{F===N._endId&&I()};if(e)return setTimeout(s,e);const{type:o,timeout:h,propCount:y}=PR(N,U);if(!o)return I();const t=o+"end";let a=0;const i=()=>{N.removeEventListener(t,n),s()},n=r=>{r.target===N&&++a>=y&&i()};setTimeout(()=>{a<y&&i()},h+1),N.addEventListener(t,n)}function PR(N,U){const e=window.getComputedStyle(N),I=f=>(e[f]||"").split(", "),F=I(Th+"Delay"),s=I(Th+"Duration"),o=q3(F,s),h=I($d+"Delay"),y=I($d+"Duration"),t=q3(h,y);let a=null,i=0,n=0;U===Th?o>0&&(a=Th,i=o,n=s.length):U===$d?t>0&&(a=$d,i=t,n=y.length):(i=Math.max(o,t),a=i>0?o>t?Th:$d:null,n=a?a===Th?s.length:y.length:0);const r=a===Th&&/\b(transform|all)(,|$)/.test(e[Th+"Property"]);return{type:a,timeout:i,propCount:n,hasTransform:r}}function q3(N,U){for(;N.length<U.length;)N=N.concat(N);return Math.max(...U.map((e,I)=>eT(e)+eT(N[I])))}function eT(N){return Number(N.slice(0,-1).replace(",","."))*1e3}function IR(){return document.body.offsetHeight}const Hy=N=>{const U=N.props["onUpdate:modelValue"];return yi(U)?e=>xy(U,e):U},RR={deep:!0,created(N,U,e){N._assign=Hy(e),U2(N,"change",()=>{const I=N._modelValue,F=R0(N),s=N.checked,o=N._assign;if(yi(I)){const h=x2(I,F),y=h!==-1;if(s&&!y)o(I.concat(F));else if(!s&&y){const t=[...I];t.splice(h,1),o(t)}}else if(fd(I)){const h=new Set(I);s?h.add(F):h.delete(F),o(h)}else o(SE(N,s))})},mounted:tT,beforeUpdate(N,U,e){N._assign=Hy(e),tT(N,U,e)}};function tT(N,{value:U,oldValue:e},I){N._modelValue=U,yi(U)?N.checked=x2(U,I.props.value)>-1:fd(U)?N.checked=U.has(I.props.value):U!==e&&(N.checked=B0(U,SE(N,!0)))}const rT={deep:!0,created(N,{value:U,modifiers:{number:e}},I){const F=fd(U);U2(N,"change",()=>{const s=Array.prototype.filter.call(N.options,o=>o.selected).map(o=>e?A2(R0(o)):R0(o));N._assign(N.multiple?F?new Set(s):s:s[0])}),N._assign=Hy(I)},mounted(N,{value:U}){nT(N,U)},beforeUpdate(N,U,e){N._assign=Hy(e)},updated(N,{value:U}){nT(N,U)}};function nT(N,U){const e=N.multiple;if(!(e&&!yi(U)&&!fd(U))){for(let I=0,F=N.options.length;I<F;I++){const s=N.options[I],o=R0(s);if(e)yi(U)?s.selected=x2(U,o)>-1:s.selected=U.has(o);else if(B0(R0(s),U)){N.selectedIndex!==I&&(N.selectedIndex=I);return}}!e&&N.selectedIndex!==-1&&(N.selectedIndex=-1)}}function R0(N){return"_value"in N?N._value:N.value}function SE(N,U){const e=U?"_trueValue":"_falseValue";return e in N?N[e]:U}const DR=["ctrl","shift","alt","meta"],FR={stop:N=>N.stopPropagation(),prevent:N=>N.preventDefault(),self:N=>N.target!==N.currentTarget,ctrl:N=>!N.ctrlKey,shift:N=>!N.shiftKey,alt:N=>!N.altKey,meta:N=>!N.metaKey,left:N=>"button"in N&&N.button!==0,middle:N=>"button"in N&&N.button!==1,right:N=>"button"in N&&N.button!==2,exact:(N,U)=>DR.some(e=>N[`${e}Key`]&&!U.includes(e))},qs=(N,U)=>(e,...I)=>{for(let F=0;F<U.length;F++){const s=FR[U[F]];if(s&&s(e,U))return}return N(e,...I)},OR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Mc=(N,U)=>e=>{if(!("key"in e))return;const I=jv(e.key);if(U.some(F=>F===I||OR[F]===I))return N(e)},Wd={beforeMount(N,{value:U},{transition:e}){N._vod=N.style.display==="none"?"":N.style.display,e&&U?e.beforeEnter(N):Yd(N,U)},mounted(N,{value:U},{transition:e}){e&&U&&e.enter(N)},updated(N,{value:U,oldValue:e},{transition:I}){!U!=!e&&(I?U?(I.beforeEnter(N),Yd(N,!0),I.enter(N)):I.leave(N,()=>{Yd(N,!1)}):Yd(N,U))},beforeUnmount(N,{value:U}){Yd(N,U)}};function Yd(N,U){N.style.display=U?N._vod:"none"}const zR=Il({patchProp:MR},hR);let aT;function NR(){return aT||(aT=$I(zR))}const Eie=(...N)=>{const U=NR().createApp(...N),{mount:e}=U;return U.mount=I=>{const F=BR(I);if(!F)return;const s=U._component;!Yi(s)&&!s.render&&!s.template&&(s.template=F.innerHTML),F.innerHTML="";const o=e(F,!1,F instanceof SVGElement);return F instanceof Element&&(F.removeAttribute("v-cloak"),F.setAttribute("data-v-app","")),o},U};function BR(N){return yl(N)?document.querySelector(N):N}var No=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ME(N){return N&&N.__esModule&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N}function EE(N){if(N.__esModule)return N;var U=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(N).forEach(function(e){var I=Object.getOwnPropertyDescriptor(N,e);Object.defineProperty(U,e,I.get?I:{enumerable:!0,get:function(){return N[e]}})}),U}function Wg(N){throw new Error('Could not dynamically require "'+N+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kE={exports:{}};(function(N,U){(function(e){N.exports=e()})(function(){return function(){function e(I,F,s){function o(t,a){if(!F[t]){if(!I[t]){var i=typeof Wg=="function"&&Wg;if(!a&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=F[t]={exports:{}};I[t][0].call(r.exports,function(f){var u=I[t][1][f];return o(u||f)},r,r.exports,e,I,F,s)}return F[t].exports}for(var h=typeof Wg=="function"&&Wg,y=0;y<s.length;y++)o(s[y]);return o}return e}()({1:[function(e,I,F){var s=e("../src/lib"),o={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var h in o){var y=h.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");s.addStyleRule(y,o[h])}},{"../src/lib":503}],2:[function(e,I,F){I.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1118}],3:[function(e,I,F){I.exports=e("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(e,I,F){I.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(e,I,F){I.exports=e("../src/traces/box")},{"../src/traces/box":679}],6:[function(e,I,F){I.exports=e("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(e,I,F){I.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(e,I,F){I.exports=e("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(e,I,F){I.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(e,I,F){I.exports=e("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(e,I,F){I.exports=e("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(e,I,F){I.exports=e("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(e,I,F){I.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(e,I,F){I.exports=e("../src/core")},{"../src/core":481}],15:[function(e,I,F){I.exports=e("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(e,I,F){I.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1119}],17:[function(e,I,F){I.exports=e("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(e,I,F){I.exports=e("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(e,I,F){I.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1120}],20:[function(e,I,F){I.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(e,I,F){I.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(e,I,F){I.exports=e("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(e,I,F){I.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(e,I,F){I.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(e,I,F){I.exports=e("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(e,I,F){I.exports=e("../src/traces/image")},{"../src/traces/image":852}],27:[function(e,I,F){var s=e("./core");s.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./funnel"),e("./waterfall"),e("./image"),e("./pie"),e("./sunburst"),e("./treemap"),e("./icicle"),e("./funnelarea"),e("./scatter3d"),e("./surface"),e("./isosurface"),e("./volume"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./choroplethmapbox"),e("./densitymapbox"),e("./sankey"),e("./indicator"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar"),e("./scattersmith"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),I.exports=s},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(e,I,F){I.exports=e("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(e,I,F){I.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(e,I,F){I.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(e,I,F){I.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(e,I,F){I.exports=e("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(e,I,F){I.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":896}],34:[function(e,I,F){I.exports=e("../src/traces/pie")},{"../src/traces/pie":907}],35:[function(e,I,F){I.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":916}],36:[function(e,I,F){I.exports=e("../src/traces/sankey")},{"../src/traces/sankey":922}],37:[function(e,I,F){I.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":960}],38:[function(e,I,F){I.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":967}],39:[function(e,I,F){I.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":975}],40:[function(e,I,F){I.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":989}],41:[function(e,I,F){I.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":999}],42:[function(e,I,F){I.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1007}],43:[function(e,I,F){I.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1015}],44:[function(e,I,F){I.exports=e("../src/traces/scattersmith")},{"../src/traces/scattersmith":1022}],45:[function(e,I,F){I.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1030}],46:[function(e,I,F){I.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1122}],47:[function(e,I,F){I.exports=e("../src/traces/splom")},{"../src/traces/splom":1040}],48:[function(e,I,F){I.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1048}],49:[function(e,I,F){I.exports=e("../src/traces/sunburst")},{"../src/traces/sunburst":1056}],50:[function(e,I,F){I.exports=e("../src/traces/surface")},{"../src/traces/surface":1065}],51:[function(e,I,F){I.exports=e("../src/traces/table")},{"../src/traces/table":1073}],52:[function(e,I,F){I.exports=e("../src/traces/treemap")},{"../src/traces/treemap":1084}],53:[function(e,I,F){I.exports=e("../src/traces/violin")},{"../src/traces/violin":1097}],54:[function(e,I,F){I.exports=e("../src/traces/volume")},{"../src/traces/volume":1105}],55:[function(e,I,F){I.exports=e("../src/traces/waterfall")},{"../src/traces/waterfall":1113}],56:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F,e("d3-array"),e("d3-collection"),e("d3-shape"),e("elementary-circuits-directed-graph")):o(s.d3=s.d3||{},s.d3,s.d3,s.d3,null)})(this,function(s,o,h,y,t){t=t&&t.hasOwnProperty("default")?t.default:t;function a(ce){return ce.target.depth}function i(ce){return ce.depth}function n(ce,pe){return pe-1-ce.height}function r(ce,pe){return ce.sourceLinks.length?ce.depth:pe-1}function f(ce){return ce.targetLinks.length?ce.depth:ce.sourceLinks.length?o.min(ce.sourceLinks,a)-1:0}function u(ce){return function(){return ce}}var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce};function m(ce,pe){return b(ce.source,pe.source)||ce.index-pe.index}function d(ce,pe){return b(ce.target,pe.target)||ce.index-pe.index}function b(ce,pe){return ce.partOfCycle===pe.partOfCycle?ce.y0-pe.y0:ce.circularLinkType==="top"||pe.circularLinkType==="bottom"?-1:1}function g(ce){return ce.value}function _(ce){return(ce.y0+ce.y1)/2}function p(ce){return _(ce.source)}function A(ce){return _(ce.target)}function c(ce){return ce.index}function S(ce){return ce.nodes}function T(ce){return ce.links}function x(ce,pe){var xe=ce.get(pe);if(!xe)throw new Error("missing: "+pe);return xe}function w(ce,pe){return pe(ce)}var v=25,C=10,M=.3;function E(){var ce=0,pe=0,xe=1,Se=1,Ae=24,Ce,Ee=c,Oe=r,_e=S,Re=T,Ve=32,Je=2,ze,De=null;function je(){var St={nodes:_e.apply(null,arguments),links:Re.apply(null,arguments)};dt(St),L(St,Ee,De),Et(St),Ot(St),z(St,Ee),Vt(St,Ve,Ee),kt(St);for(var ot=4,ht=0;ht<ot;ht++)J(St,Se,Ee),ie(St,Se,Ee),ee(St,pe,Se,Ee),J(St,Se,Ee),ie(St,Se,Ee);return me(St,pe,Se),$(St,Je,Se,Ee),St}je.nodeId=function(St){return arguments.length?(Ee=typeof St=="function"?St:u(St),je):Ee},je.nodeAlign=function(St){return arguments.length?(Oe=typeof St=="function"?St:u(St),je):Oe},je.nodeWidth=function(St){return arguments.length?(Ae=+St,je):Ae},je.nodePadding=function(St){return arguments.length?(Ce=+St,je):Ce},je.nodes=function(St){return arguments.length?(_e=typeof St=="function"?St:u(St),je):_e},je.links=function(St){return arguments.length?(Re=typeof St=="function"?St:u(St),je):Re},je.size=function(St){return arguments.length?(ce=pe=0,xe=+St[0],Se=+St[1],je):[xe-ce,Se-pe]},je.extent=function(St){return arguments.length?(ce=+St[0][0],xe=+St[1][0],pe=+St[0][1],Se=+St[1][1],je):[[ce,pe],[xe,Se]]},je.iterations=function(St){return arguments.length?(Ve=+St,je):Ve},je.circularLinkGap=function(St){return arguments.length?(Je=+St,je):Je},je.nodePaddingRatio=function(St){return arguments.length?(ze=+St,je):ze},je.sortNodes=function(St){return arguments.length?(De=St,je):De},je.update=function(St){return z(St,Ee),kt(St),St.links.forEach(function(ot){ot.circular&&(ot.circularLinkType=ot.y0+ot.y1<Se?"top":"bottom",ot.source.circularLinkType=ot.circularLinkType,ot.target.circularLinkType=ot.circularLinkType)}),J(St,Se,Ee,!1),ie(St,Se,Ee),$(St,Je,Se,Ee),St};function dt(St){St.nodes.forEach(function(ht,Ke){ht.index=Ke,ht.sourceLinks=[],ht.targetLinks=[]});var ot=h.map(St.nodes,Ee);return St.links.forEach(function(ht,Ke){ht.index=Ke;var Pe=ht.source,We=ht.target;(typeof Pe=="undefined"?"undefined":l(Pe))!=="object"&&(Pe=ht.source=x(ot,Pe)),(typeof We=="undefined"?"undefined":l(We))!=="object"&&(We=ht.target=x(ot,We)),Pe.sourceLinks.push(ht),We.targetLinks.push(ht)}),St}function Et(St){St.nodes.forEach(function(ot){ot.partOfCycle=!1,ot.value=Math.max(o.sum(ot.sourceLinks,g),o.sum(ot.targetLinks,g)),ot.sourceLinks.forEach(function(ht){ht.circular&&(ot.partOfCycle=!0,ot.circularLinkType=ht.circularLinkType)}),ot.targetLinks.forEach(function(ht){ht.circular&&(ot.partOfCycle=!0,ot.circularLinkType=ht.circularLinkType)})})}function $t(St){var ot=0,ht=0,Ke=0,Pe=0,We=o.max(St.nodes,function(Qe){return Qe.column});return St.links.forEach(function(Qe){Qe.circular&&(Qe.circularLinkType=="top"?ot=ot+Qe.width:ht=ht+Qe.width,Qe.target.column==0&&(Pe=Pe+Qe.width),Qe.source.column==We&&(Ke=Ke+Qe.width))}),ot=ot>0?ot+v+C:ot,ht=ht>0?ht+v+C:ht,Ke=Ke>0?Ke+v+C:Ke,Pe=Pe>0?Pe+v+C:Pe,{top:ot,bottom:ht,left:Pe,right:Ke}}function wt(St,ot){var ht=o.max(St.nodes,function(Tt){return Tt.column}),Ke=xe-ce,Pe=Se-pe,We=Ke+ot.right+ot.left,Qe=Pe+ot.top+ot.bottom,ut=Ke/We,It=Pe/Qe;return ce=ce*ut+ot.left,xe=ot.right==0?xe:xe*ut,pe=pe*It+ot.top,Se=Se*It,St.nodes.forEach(function(Tt){Tt.x0=ce+Tt.column*((xe-ce-Ae)/ht),Tt.x1=Tt.x0+Ae}),It}function Ot(St){var ot,ht,Ke;for(ot=St.nodes,ht=[],Ke=0;ot.length;++Ke,ot=ht,ht=[])ot.forEach(function(Pe){Pe.depth=Ke,Pe.sourceLinks.forEach(function(We){ht.indexOf(We.target)<0&&!We.circular&&ht.push(We.target)})});for(ot=St.nodes,ht=[],Ke=0;ot.length;++Ke,ot=ht,ht=[])ot.forEach(function(Pe){Pe.height=Ke,Pe.targetLinks.forEach(function(We){ht.indexOf(We.source)<0&&!We.circular&&ht.push(We.source)})});St.nodes.forEach(function(Pe){Pe.column=Math.floor(Oe.call(null,Pe,Ke))})}function Vt(St,ot,ht){var Ke=h.nest().key(function(Tt){return Tt.column}).sortKeys(o.ascending).entries(St.nodes).map(function(Tt){return Tt.values});Qe(ht),It();for(var Pe=1,We=ot;We>0;--We)ut(Pe*=.99,ht),It();function Qe(Tt){if(ze){var Bt=1/0;Ke.forEach(function(ar){var nr=Se*ze/(ar.length+1);Bt=nr<Bt?nr:Bt}),Ce=Bt}var rr=o.min(Ke,function(ar){return(Se-pe-(ar.length-1)*Ce)/o.sum(ar,g)});rr=rr*M,St.links.forEach(function(ar){ar.width=ar.value*rr});var Ut=$t(St),Qt=wt(St,Ut);rr=rr*Qt,St.links.forEach(function(ar){ar.width=ar.value*rr}),Ke.forEach(function(ar){var nr=ar.length;ar.forEach(function(cr,Kr){cr.depth==Ke.length-1&&nr==1||cr.depth==0&&nr==1?(cr.y0=Se/2-cr.value*rr,cr.y1=cr.y0+cr.value*rr):cr.partOfCycle?D(cr,Tt)==0?(cr.y0=Se/2+Kr,cr.y1=cr.y0+cr.value*rr):cr.circularLinkType=="top"?(cr.y0=pe+Kr,cr.y1=cr.y0+cr.value*rr):(cr.y0=Se-cr.value*rr-Kr,cr.y1=cr.y0+cr.value*rr):Ut.top==0||Ut.bottom==0?(cr.y0=(Se-pe)/nr*Kr,cr.y1=cr.y0+cr.value*rr):(cr.y0=(Se-pe)/2-nr/2+Kr,cr.y1=cr.y0+cr.value*rr)})})}function ut(Tt,Bt){var rr=Ke.length;Ke.forEach(function(Ut){var Qt=Ut.length,ar=Ut[0].depth;Ut.forEach(function(nr){var cr;if((nr.sourceLinks.length||nr.targetLinks.length)&&!(nr.partOfCycle&&D(nr,Bt)>0))if(ar==0&&Qt==1)cr=nr.y1-nr.y0,nr.y0=Se/2-cr/2,nr.y1=Se/2+cr/2;else if(ar==rr-1&&Qt==1)cr=nr.y1-nr.y0,nr.y0=Se/2-cr/2,nr.y1=Se/2+cr/2;else{var Kr=0,yn=o.mean(nr.sourceLinks,A),Qr=o.mean(nr.targetLinks,p);yn&&Qr?Kr=(yn+Qr)/2:Kr=yn||Qr;var st=(Kr-_(nr))*Tt;nr.y0+=st,nr.y1+=st}})})}function It(){Ke.forEach(function(Tt){var Bt,rr,Ut=pe,Qt=Tt.length,ar;for(Tt.sort(b),ar=0;ar<Qt;++ar)Bt=Tt[ar],rr=Ut-Bt.y0,rr>0&&(Bt.y0+=rr,Bt.y1+=rr),Ut=Bt.y1+Ce;if(rr=Ut-Ce-Se,rr>0)for(Ut=Bt.y0-=rr,Bt.y1-=rr,ar=Qt-2;ar>=0;--ar)Bt=Tt[ar],rr=Bt.y1+Ce-Ut,rr>0&&(Bt.y0-=rr,Bt.y1-=rr),Ut=Bt.y0})}}function kt(St){St.nodes.forEach(function(ot){ot.sourceLinks.sort(d),ot.targetLinks.sort(m)}),St.nodes.forEach(function(ot){var ht=ot.y0,Ke=ht,Pe=ot.y1,We=Pe;ot.sourceLinks.forEach(function(Qe){Qe.circular?(Qe.y0=Pe-Qe.width/2,Pe=Pe-Qe.width):(Qe.y0=ht+Qe.width/2,ht+=Qe.width)}),ot.targetLinks.forEach(function(Qe){Qe.circular?(Qe.y1=We-Qe.width/2,We=We-Qe.width):(Qe.y1=Ke+Qe.width/2,Ke+=Qe.width)})})}return je}function L(ce,pe,xe){var Se=0;if(xe===null){for(var Ae=[],Ce=0;Ce<ce.links.length;Ce++){var Ee=ce.links[Ce],Oe=Ee.source.index,_e=Ee.target.index;Ae[Oe]||(Ae[Oe]=[]),Ae[_e]||(Ae[_e]=[]),Ae[Oe].indexOf(_e)===-1&&Ae[Oe].push(_e)}var Re=t(Ae);Re.sort(function(De,je){return De.length-je.length});var Ve={};for(Ce=0;Ce<Re.length;Ce++){var Je=Re[Ce],ze=Je.slice(-2);Ve[ze[0]]||(Ve[ze[0]]={}),Ve[ze[0]][ze[1]]=!0}ce.links.forEach(function(De){var je=De.target.index,dt=De.source.index;je===dt||Ve[dt]&&Ve[dt][je]?(De.circular=!0,De.circularLinkID=Se,Se=Se+1):De.circular=!1})}else ce.links.forEach(function(De){De.source[xe]<De.target[xe]?De.circular=!1:(De.circular=!0,De.circularLinkID=Se,Se=Se+1)})}function z(ce,pe){var xe=0,Se=0;ce.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType||Ae.target.circularLinkType?Ae.circularLinkType=Ae.source.circularLinkType?Ae.source.circularLinkType:Ae.target.circularLinkType:Ae.circularLinkType=xe<Se?"top":"bottom",Ae.circularLinkType=="top"?xe=xe+1:Se=Se+1,ce.nodes.forEach(function(Ce){(w(Ce,pe)==w(Ae.source,pe)||w(Ce,pe)==w(Ae.target,pe))&&(Ce.circularLinkType=Ae.circularLinkType)}))}),ce.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType==Ae.target.circularLinkType&&(Ae.circularLinkType=Ae.source.circularLinkType),se(Ae,pe)&&(Ae.circularLinkType=Ae.source.circularLinkType))})}function O(ce){var pe=Math.abs(ce.y1-ce.y0),xe=Math.abs(ce.target.x0-ce.source.x1);return Math.atan(xe/pe)}function R(ce,pe){return ce.source.column<pe.target.column?!1:!(ce.target.column>pe.source.column)}function D(ce,pe){var xe=0;ce.sourceLinks.forEach(function(Ae){xe=Ae.circular&&!se(Ae,pe)?xe+1:xe});var Se=0;return ce.targetLinks.forEach(function(Ae){Se=Ae.circular&&!se(Ae,pe)?Se+1:Se}),xe+Se}function H(ce){var pe=ce.source.sourceLinks,xe=0;pe.forEach(function(Ce){xe=Ce.circular?xe+1:xe});var Se=ce.target.targetLinks,Ae=0;return Se.forEach(function(Ce){Ae=Ce.circular?Ae+1:Ae}),!(xe>1||Ae>1)}function B(ce,pe,xe){return ce.sort(re),ce.forEach(function(Se,Ae){var Ce=0;if(se(Se,xe)&&H(Se))Se.circularPathData.verticalBuffer=Ce+Se.width/2;else{var Ee=0;for(Ee;Ee<Ae;Ee++)if(R(ce[Ae],ce[Ee])){var Oe=ce[Ee].circularPathData.verticalBuffer+ce[Ee].width/2+pe;Ce=Oe>Ce?Oe:Ce}Se.circularPathData.verticalBuffer=Ce+Se.width/2}}),ce}function $(ce,pe,xe,Se){var Ae=5,Ce=o.min(ce.links,function(_e){return _e.source.y0});ce.links.forEach(function(_e){_e.circular&&(_e.circularPathData={})});var Ee=ce.links.filter(function(_e){return _e.circularLinkType=="top"});B(Ee,pe,Se);var Oe=ce.links.filter(function(_e){return _e.circularLinkType=="bottom"});B(Oe,pe,Se),ce.links.forEach(function(_e){if(_e.circular){if(_e.circularPathData.arcRadius=_e.width+C,_e.circularPathData.leftNodeBuffer=Ae,_e.circularPathData.rightNodeBuffer=Ae,_e.circularPathData.sourceWidth=_e.source.x1-_e.source.x0,_e.circularPathData.sourceX=_e.source.x0+_e.circularPathData.sourceWidth,_e.circularPathData.targetX=_e.target.x0,_e.circularPathData.sourceY=_e.y0,_e.circularPathData.targetY=_e.y1,se(_e,Se)&&H(_e))_e.circularPathData.leftSmallArcRadius=C+_e.width/2,_e.circularPathData.leftLargeArcRadius=C+_e.width/2,_e.circularPathData.rightSmallArcRadius=C+_e.width/2,_e.circularPathData.rightLargeArcRadius=C+_e.width/2,_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=_e.source.y1+v+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=_e.source.y0-v-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius);else{var Re=_e.source.column,Ve=_e.circularLinkType,Je=ce.links.filter(function(je){return je.source.column==Re&&je.circularLinkType==Ve});_e.circularLinkType=="bottom"?Je.sort(Z):Je.sort(Q);var ze=0;Je.forEach(function(je,dt){je.circularLinkID==_e.circularLinkID&&(_e.circularPathData.leftSmallArcRadius=C+_e.width/2+ze,_e.circularPathData.leftLargeArcRadius=C+_e.width/2+dt*pe+ze),ze=ze+je.width}),Re=_e.target.column,Je=ce.links.filter(function(je){return je.target.column==Re&&je.circularLinkType==Ve}),_e.circularLinkType=="bottom"?Je.sort(le):Je.sort(K),ze=0,Je.forEach(function(je,dt){je.circularLinkID==_e.circularLinkID&&(_e.circularPathData.rightSmallArcRadius=C+_e.width/2+ze,_e.circularPathData.rightLargeArcRadius=C+_e.width/2+dt*pe+ze),ze=ze+je.width}),_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=Math.max(xe,_e.source.y1,_e.target.y1)+v+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=Ce-v-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius)}_e.circularPathData.leftInnerExtent=_e.circularPathData.sourceX+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightInnerExtent=_e.circularPathData.targetX-_e.circularPathData.rightNodeBuffer,_e.circularPathData.leftFullExtent=_e.circularPathData.sourceX+_e.circularPathData.leftLargeArcRadius+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightFullExtent=_e.circularPathData.targetX-_e.circularPathData.rightLargeArcRadius-_e.circularPathData.rightNodeBuffer}if(_e.circular)_e.path=W(_e);else{var De=y.linkHorizontal().source(function(je){var dt=je.source.x0+(je.source.x1-je.source.x0),Et=je.y0;return[dt,Et]}).target(function(je){var dt=je.target.x0,Et=je.y1;return[dt,Et]});_e.path=De(_e)}})}function W(ce){var pe="";return ce.circularLinkType=="top"?pe="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 0 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY-ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 0 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 0 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY-ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 0 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY:pe="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 1 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY+ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 1 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 1 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY+ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 1 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY,pe}function re(ce,pe){return fe(ce)==fe(pe)?ce.circularLinkType=="bottom"?Z(ce,pe):Q(ce,pe):fe(pe)-fe(ce)}function Q(ce,pe){return ce.y0-pe.y0}function Z(ce,pe){return pe.y0-ce.y0}function K(ce,pe){return ce.y1-pe.y1}function le(ce,pe){return pe.y1-ce.y1}function fe(ce){return ce.target.column-ce.source.column}function ue(ce){return ce.target.x0-ce.source.x1}function V(ce,pe){var xe=O(ce),Se=ue(pe)/Math.tan(xe),Ae=oe(ce)=="up"?ce.y1+Se:ce.y1-Se;return Ae}function j(ce,pe){var xe=O(ce),Se=ue(pe)/Math.tan(xe),Ae=oe(ce)=="up"?ce.y1-Se:ce.y1+Se;return Ae}function ee(ce,pe,xe,Se){ce.links.forEach(function(Ae){if(!Ae.circular&&Ae.target.column-Ae.source.column>1){var Ce=Ae.source.column+1,Ee=Ae.target.column-1,Oe=1,_e=Ee-Ce+1;for(Oe=1;Ce<=Ee;Ce++,Oe++)ce.nodes.forEach(function(Re){if(Re.column==Ce){var Ve=Oe/(_e+1),Je=Math.pow(1-Ve,3),ze=3*Ve*Math.pow(1-Ve,2),De=3*Math.pow(Ve,2)*(1-Ve),je=Math.pow(Ve,3),dt=Je*Ae.y0+ze*Ae.y0+De*Ae.y1+je*Ae.y1,Et=dt-Ae.width/2,$t=dt+Ae.width/2,wt;Et>Re.y0&&Et<Re.y1?(wt=Re.y1-Et+10,wt=Re.circularLinkType=="bottom"?wt:-wt,Re=X(Re,wt,pe,xe),ce.nodes.forEach(function(Ot){w(Ot,Se)==w(Re,Se)||Ot.column!=Re.column||q(Re,Ot)&&X(Ot,wt,pe,xe)})):$t>Re.y0&&$t<Re.y1?(wt=$t-Re.y0+10,Re=X(Re,wt,pe,xe),ce.nodes.forEach(function(Ot){w(Ot,Se)==w(Re,Se)||Ot.column!=Re.column||Ot.y0<Re.y1&&Ot.y1>Re.y1&&X(Ot,wt,pe,xe)})):Et<Re.y0&&$t>Re.y1&&(wt=$t-Re.y0+10,Re=X(Re,wt,pe,xe),ce.nodes.forEach(function(Ot){w(Ot,Se)==w(Re,Se)||Ot.column!=Re.column||Ot.y0<Re.y1&&Ot.y1>Re.y1&&X(Ot,wt,pe,xe)}))}})}})}function q(ce,pe){return ce.y0>pe.y0&&ce.y0<pe.y1||ce.y1>pe.y0&&ce.y1<pe.y1?!0:ce.y0<pe.y0&&ce.y1>pe.y1}function X(ce,pe,xe,Se){return ce.y0+pe>=xe&&ce.y1+pe<=Se&&(ce.y0=ce.y0+pe,ce.y1=ce.y1+pe,ce.targetLinks.forEach(function(Ae){Ae.y1=Ae.y1+pe}),ce.sourceLinks.forEach(function(Ae){Ae.y0=Ae.y0+pe})),ce}function J(ce,pe,xe,Se){ce.nodes.forEach(function(Ae){Se&&Ae.y+(Ae.y1-Ae.y0)>pe&&(Ae.y=Ae.y-(Ae.y+(Ae.y1-Ae.y0)-pe));var Ce=ce.links.filter(function(_e){return w(_e.source,xe)==w(Ae,xe)}),Ee=Ce.length;Ee>1&&Ce.sort(function(_e,Re){if(!_e.circular&&!Re.circular){if(_e.target.column==Re.target.column)return _e.y1-Re.y1;if(ne(_e,Re)){if(_e.target.column>Re.target.column){var Ve=j(Re,_e);return _e.y1-Ve}if(Re.target.column>_e.target.column){var Je=j(_e,Re);return Je-Re.y1}}else return _e.y1-Re.y1}if(_e.circular&&!Re.circular)return _e.circularLinkType=="top"?-1:1;if(Re.circular&&!_e.circular)return Re.circularLinkType=="top"?1:-1;if(_e.circular&&Re.circular)return _e.circularLinkType===Re.circularLinkType&&_e.circularLinkType=="top"?_e.target.column===Re.target.column?_e.target.y1-Re.target.y1:Re.target.column-_e.target.column:_e.circularLinkType===Re.circularLinkType&&_e.circularLinkType=="bottom"?_e.target.column===Re.target.column?Re.target.y1-_e.target.y1:_e.target.column-Re.target.column:_e.circularLinkType=="top"?-1:1});var Oe=Ae.y0;Ce.forEach(function(_e){_e.y0=Oe+_e.width/2,Oe=Oe+_e.width}),Ce.forEach(function(_e,Re){if(_e.circularLinkType=="bottom"){var Ve=Re+1,Je=0;for(Ve;Ve<Ee;Ve++)Je=Je+Ce[Ve].width;_e.y0=Ae.y1-Je-_e.width/2}})})}function ie(ce,pe,xe){ce.nodes.forEach(function(Se){var Ae=ce.links.filter(function(Oe){return w(Oe.target,xe)==w(Se,xe)}),Ce=Ae.length;Ce>1&&Ae.sort(function(Oe,_e){if(!Oe.circular&&!_e.circular){if(Oe.source.column==_e.source.column)return Oe.y0-_e.y0;if(ne(Oe,_e)){if(_e.source.column<Oe.source.column){var Re=V(_e,Oe);return Oe.y0-Re}if(Oe.source.column<_e.source.column){var Ve=V(Oe,_e);return Ve-_e.y0}}else return Oe.y0-_e.y0}if(Oe.circular&&!_e.circular)return Oe.circularLinkType=="top"?-1:1;if(_e.circular&&!Oe.circular)return _e.circularLinkType=="top"?1:-1;if(Oe.circular&&_e.circular)return Oe.circularLinkType===_e.circularLinkType&&Oe.circularLinkType=="top"?Oe.source.column===_e.source.column?Oe.source.y1-_e.source.y1:Oe.source.column-_e.source.column:Oe.circularLinkType===_e.circularLinkType&&Oe.circularLinkType=="bottom"?Oe.source.column===_e.source.column?Oe.source.y1-_e.source.y1:_e.source.column-Oe.source.column:Oe.circularLinkType=="top"?-1:1});var Ee=Se.y0;Ae.forEach(function(Oe){Oe.y1=Ee+Oe.width/2,Ee=Ee+Oe.width}),Ae.forEach(function(Oe,_e){if(Oe.circularLinkType=="bottom"){var Re=_e+1,Ve=0;for(Re;Re<Ce;Re++)Ve=Ve+Ae[Re].width;Oe.y1=Se.y1-Ve-Oe.width/2}})})}function ne(ce,pe){return oe(ce)==oe(pe)}function oe(ce){return ce.y0-ce.y1>0?"up":"down"}function se(ce,pe){return w(ce.source,pe)==w(ce.target,pe)}function me(ce,pe,xe){var Se=ce.nodes,Ae=ce.links,Ce=!1,Ee=!1;if(Ae.forEach(function(ze){ze.circularLinkType=="top"?Ce=!0:ze.circularLinkType=="bottom"&&(Ee=!0)}),Ce==!1||Ee==!1){var Oe=o.min(Se,function(ze){return ze.y0}),_e=o.max(Se,function(ze){return ze.y1}),Re=_e-Oe,Ve=xe-pe,Je=Ve/Re;Se.forEach(function(ze){var De=(ze.y1-ze.y0)*Je;ze.y0=(ze.y0-Oe)*Je,ze.y1=ze.y0+De}),Ae.forEach(function(ze){ze.y0=(ze.y0-Oe)*Je,ze.y1=(ze.y1-Oe)*Je,ze.width=ze.width*Je})}}s.sankeyCircular=E,s.sankeyCenter=f,s.sankeyLeft=i,s.sankeyRight=n,s.sankeyJustify=r,Object.defineProperty(s,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F,e("d3-array"),e("d3-collection"),e("d3-shape")):o(s.d3=s.d3||{},s.d3,s.d3,s.d3)})(this,function(s,o,h,y){function t(C){return C.target.depth}function a(C){return C.depth}function i(C,M){return M-1-C.height}function n(C,M){return C.sourceLinks.length?C.depth:M-1}function r(C){return C.targetLinks.length?C.depth:C.sourceLinks.length?o.min(C.sourceLinks,t)-1:0}function f(C){return function(){return C}}function u(C,M){return m(C.source,M.source)||C.index-M.index}function l(C,M){return m(C.target,M.target)||C.index-M.index}function m(C,M){return C.y0-M.y0}function d(C){return C.value}function b(C){return(C.y0+C.y1)/2}function g(C){return b(C.source)*C.value}function _(C){return b(C.target)*C.value}function p(C){return C.index}function A(C){return C.nodes}function c(C){return C.links}function S(C,M){var E=C.get(M);if(!E)throw new Error("missing: "+M);return E}var T=function(){var C=0,M=0,E=1,L=1,z=24,O=8,R=p,D=n,H=A,B=c,$=32,W=2/3;function re(){var ue={nodes:H.apply(null,arguments),links:B.apply(null,arguments)};return Q(ue),Z(ue),K(ue),le(ue),fe(ue),ue}re.update=function(ue){return fe(ue),ue},re.nodeId=function(ue){return arguments.length?(R=typeof ue=="function"?ue:f(ue),re):R},re.nodeAlign=function(ue){return arguments.length?(D=typeof ue=="function"?ue:f(ue),re):D},re.nodeWidth=function(ue){return arguments.length?(z=+ue,re):z},re.nodePadding=function(ue){return arguments.length?(O=+ue,re):O},re.nodes=function(ue){return arguments.length?(H=typeof ue=="function"?ue:f(ue),re):H},re.links=function(ue){return arguments.length?(B=typeof ue=="function"?ue:f(ue),re):B},re.size=function(ue){return arguments.length?(C=M=0,E=+ue[0],L=+ue[1],re):[E-C,L-M]},re.extent=function(ue){return arguments.length?(C=+ue[0][0],E=+ue[1][0],M=+ue[0][1],L=+ue[1][1],re):[[C,M],[E,L]]},re.iterations=function(ue){return arguments.length?($=+ue,re):$};function Q(ue){ue.nodes.forEach(function(j,ee){j.index=ee,j.sourceLinks=[],j.targetLinks=[]});var V=h.map(ue.nodes,R);ue.links.forEach(function(j,ee){j.index=ee;var q=j.source,X=j.target;typeof q!="object"&&(q=j.source=S(V,q)),typeof X!="object"&&(X=j.target=S(V,X)),q.sourceLinks.push(j),X.targetLinks.push(j)})}function Z(ue){ue.nodes.forEach(function(V){V.value=Math.max(o.sum(V.sourceLinks,d),o.sum(V.targetLinks,d))})}function K(ue){var V,j,ee;for(V=ue.nodes,j=[],ee=0;V.length;++ee,V=j,j=[])V.forEach(function(X){X.depth=ee,X.sourceLinks.forEach(function(J){j.indexOf(J.target)<0&&j.push(J.target)})});for(V=ue.nodes,j=[],ee=0;V.length;++ee,V=j,j=[])V.forEach(function(X){X.height=ee,X.targetLinks.forEach(function(J){j.indexOf(J.source)<0&&j.push(J.source)})});var q=(E-C-z)/(ee-1);ue.nodes.forEach(function(X){X.x1=(X.x0=C+Math.max(0,Math.min(ee-1,Math.floor(D.call(null,X,ee))))*q)+z})}function le(ue){var V=h.nest().key(function(ne){return ne.x0}).sortKeys(o.ascending).entries(ue.nodes).map(function(ne){return ne.values});q(),ie();for(var j=1,ee=$;ee>0;--ee)J(j*=.99),ie(),X(j),ie();function q(){var ne=o.max(V,function(me){return me.length}),oe=W*(L-M)/(ne-1);O>oe&&(O=oe);var se=o.min(V,function(me){return(L-M-(me.length-1)*O)/o.sum(me,d)});V.forEach(function(me){me.forEach(function(ce,pe){ce.y1=(ce.y0=pe)+ce.value*se})}),ue.links.forEach(function(me){me.width=me.value*se})}function X(ne){V.forEach(function(oe){oe.forEach(function(se){if(se.targetLinks.length){var me=(o.sum(se.targetLinks,g)/o.sum(se.targetLinks,d)-b(se))*ne;se.y0+=me,se.y1+=me}})})}function J(ne){V.slice().reverse().forEach(function(oe){oe.forEach(function(se){if(se.sourceLinks.length){var me=(o.sum(se.sourceLinks,_)/o.sum(se.sourceLinks,d)-b(se))*ne;se.y0+=me,se.y1+=me}})})}function ie(){V.forEach(function(ne){var oe,se,me=M,ce=ne.length,pe;for(ne.sort(m),pe=0;pe<ce;++pe)oe=ne[pe],se=me-oe.y0,se>0&&(oe.y0+=se,oe.y1+=se),me=oe.y1+O;if(se=me-O-L,se>0)for(me=oe.y0-=se,oe.y1-=se,pe=ce-2;pe>=0;--pe)oe=ne[pe],se=oe.y1+O-me,se>0&&(oe.y0-=se,oe.y1-=se),me=oe.y0})}}function fe(ue){ue.nodes.forEach(function(V){V.sourceLinks.sort(l),V.targetLinks.sort(u)}),ue.nodes.forEach(function(V){var j=V.y0,ee=j;V.sourceLinks.forEach(function(q){q.y0=j+q.width/2,j+=q.width}),V.targetLinks.forEach(function(q){q.y1=ee+q.width/2,ee+=q.width})})}return re};function x(C){return[C.source.x1,C.y0]}function w(C){return[C.target.x0,C.y1]}var v=function(){return y.linkHorizontal().source(x).target(w)};s.sankey=T,s.sankeyCenter=r,s.sankeyLeft=a,s.sankeyRight=i,s.sankeyJustify=n,s.sankeyLinkHorizontal=v,Object.defineProperty(s,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(e,I,F){(function(){var s={version:"3.8.0"},o=[].slice,h=function(he){return o.call(he)},y=self.document;function t(he){return he&&(he.ownerDocument||he.document||he).documentElement}function a(he){return he&&(he.ownerDocument&&he.ownerDocument.defaultView||he.document&&he||he.defaultView)}if(y)try{h(y.documentElement.childNodes)[0].nodeType}catch{h=function(we){for(var Ie=we.length,He=new Array(Ie);Ie--;)He[Ie]=we[Ie];return He}}if(Date.now||(Date.now=function(){return+new Date}),y)try{y.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,f=this.CSSStyleDeclaration.prototype,u=f.setProperty;i.setAttribute=function(we,Ie){n.call(this,we,Ie+"")},i.setAttributeNS=function(we,Ie,He){r.call(this,we,Ie,He+"")},f.setProperty=function(we,Ie,He){u.call(this,we,Ie+"",He)}}s.ascending=l;function l(he,we){return he<we?-1:he>we?1:he>=we?0:NaN}s.descending=function(he,we){return we<he?-1:we>he?1:we>=he?0:NaN},s.min=function(he,we){var Ie=-1,He=he.length,Ue,Ze;if(arguments.length===1){for(;++Ie<He;)if((Ze=he[Ie])!=null&&Ze>=Ze){Ue=Ze;break}for(;++Ie<He;)(Ze=he[Ie])!=null&&Ue>Ze&&(Ue=Ze)}else{for(;++Ie<He;)if((Ze=we.call(he,he[Ie],Ie))!=null&&Ze>=Ze){Ue=Ze;break}for(;++Ie<He;)(Ze=we.call(he,he[Ie],Ie))!=null&&Ue>Ze&&(Ue=Ze)}return Ue},s.max=function(he,we){var Ie=-1,He=he.length,Ue,Ze;if(arguments.length===1){for(;++Ie<He;)if((Ze=he[Ie])!=null&&Ze>=Ze){Ue=Ze;break}for(;++Ie<He;)(Ze=he[Ie])!=null&&Ze>Ue&&(Ue=Ze)}else{for(;++Ie<He;)if((Ze=we.call(he,he[Ie],Ie))!=null&&Ze>=Ze){Ue=Ze;break}for(;++Ie<He;)(Ze=we.call(he,he[Ie],Ie))!=null&&Ze>Ue&&(Ue=Ze)}return Ue},s.extent=function(he,we){var Ie=-1,He=he.length,Ue,Ze,xt;if(arguments.length===1){for(;++Ie<He;)if((Ze=he[Ie])!=null&&Ze>=Ze){Ue=xt=Ze;break}for(;++Ie<He;)(Ze=he[Ie])!=null&&(Ue>Ze&&(Ue=Ze),xt<Ze&&(xt=Ze))}else{for(;++Ie<He;)if((Ze=we.call(he,he[Ie],Ie))!=null&&Ze>=Ze){Ue=xt=Ze;break}for(;++Ie<He;)(Ze=we.call(he,he[Ie],Ie))!=null&&(Ue>Ze&&(Ue=Ze),xt<Ze&&(xt=Ze))}return[Ue,xt]};function m(he){return he===null?NaN:+he}function d(he){return!isNaN(he)}s.sum=function(he,we){var Ie=0,He=he.length,Ue,Ze=-1;if(arguments.length===1)for(;++Ze<He;)d(Ue=+he[Ze])&&(Ie+=Ue);else for(;++Ze<He;)d(Ue=+we.call(he,he[Ze],Ze))&&(Ie+=Ue);return Ie},s.mean=function(he,we){var Ie=0,He=he.length,Ue,Ze=-1,xt=He;if(arguments.length===1)for(;++Ze<He;)d(Ue=m(he[Ze]))?Ie+=Ue:--xt;else for(;++Ze<He;)d(Ue=m(we.call(he,he[Ze],Ze)))?Ie+=Ue:--xt;if(xt)return Ie/xt},s.quantile=function(he,we){var Ie=(he.length-1)*we+1,He=Math.floor(Ie),Ue=+he[He-1],Ze=Ie-He;return Ze?Ue+Ze*(he[He]-Ue):Ue},s.median=function(he,we){var Ie=[],He=he.length,Ue,Ze=-1;if(arguments.length===1)for(;++Ze<He;)d(Ue=m(he[Ze]))&&Ie.push(Ue);else for(;++Ze<He;)d(Ue=m(we.call(he,he[Ze],Ze)))&&Ie.push(Ue);if(Ie.length)return s.quantile(Ie.sort(l),.5)},s.variance=function(he,we){var Ie=he.length,He=0,Ue,Ze,xt=0,vt=-1,Lt=0;if(arguments.length===1)for(;++vt<Ie;)d(Ue=m(he[vt]))&&(Ze=Ue-He,He+=Ze/++Lt,xt+=Ze*(Ue-He));else for(;++vt<Ie;)d(Ue=m(we.call(he,he[vt],vt)))&&(Ze=Ue-He,He+=Ze/++Lt,xt+=Ze*(Ue-He));if(Lt>1)return xt/(Lt-1)},s.deviation=function(){var he=s.variance.apply(this,arguments);return he&&Math.sqrt(he)};function b(he){return{left:function(we,Ie,He,Ue){for(arguments.length<3&&(He=0),arguments.length<4&&(Ue=we.length);He<Ue;){var Ze=He+Ue>>>1;he(we[Ze],Ie)<0?He=Ze+1:Ue=Ze}return He},right:function(we,Ie,He,Ue){for(arguments.length<3&&(He=0),arguments.length<4&&(Ue=we.length);He<Ue;){var Ze=He+Ue>>>1;he(we[Ze],Ie)>0?Ue=Ze:He=Ze+1}return He}}}var g=b(l);s.bisectLeft=g.left,s.bisect=s.bisectRight=g.right,s.bisector=function(he){return b(he.length===1?function(we,Ie){return l(he(we),Ie)}:he)},s.shuffle=function(he,we,Ie){(He=arguments.length)<3&&(Ie=he.length,He<2&&(we=0));for(var He=Ie-we,Ue,Ze;He;)Ze=Math.random()*He--|0,Ue=he[He+we],he[He+we]=he[Ze+we],he[Ze+we]=Ue;return he},s.permute=function(he,we){for(var Ie=we.length,He=new Array(Ie);Ie--;)He[Ie]=he[we[Ie]];return He},s.pairs=function(he){for(var we=0,Ie=he.length-1,He=he[0],Ue=new Array(Ie<0?0:Ie);we<Ie;)Ue[we]=[He,He=he[++we]];return Ue},s.transpose=function(he){if(!(Ze=he.length))return[];for(var we=-1,Ie=s.min(he,_),He=new Array(Ie);++we<Ie;)for(var Ue=-1,Ze,xt=He[we]=new Array(Ze);++Ue<Ze;)xt[Ue]=he[Ue][we];return He};function _(he){return he.length}s.zip=function(){return s.transpose(arguments)},s.keys=function(he){var we=[];for(var Ie in he)we.push(Ie);return we},s.values=function(he){var we=[];for(var Ie in he)we.push(he[Ie]);return we},s.entries=function(he){var we=[];for(var Ie in he)we.push({key:Ie,value:he[Ie]});return we},s.merge=function(he){for(var we=he.length,Ie,He=-1,Ue=0,Ze,xt;++He<we;)Ue+=he[He].length;for(Ze=new Array(Ue);--we>=0;)for(xt=he[we],Ie=xt.length;--Ie>=0;)Ze[--Ue]=xt[Ie];return Ze};var p=Math.abs;s.range=function(he,we,Ie){if(arguments.length<3&&(Ie=1,arguments.length<2&&(we=he,he=0)),(we-he)/Ie===1/0)throw new Error("infinite range");var He=[],Ue=A(p(Ie)),Ze=-1,xt;if(he*=Ue,we*=Ue,Ie*=Ue,Ie<0)for(;(xt=he+Ie*++Ze)>we;)He.push(xt/Ue);else for(;(xt=he+Ie*++Ze)<we;)He.push(xt/Ue);return He};function A(he){for(var we=1;he*we%1;)we*=10;return we}function c(he,we){for(var Ie in we)Object.defineProperty(he.prototype,Ie,{value:we[Ie],enumerable:!1})}s.map=function(he,we){var Ie=new S;if(he instanceof S)he.forEach(function(vt,Lt){Ie.set(vt,Lt)});else if(Array.isArray(he)){var He=-1,Ue=he.length,Ze;if(arguments.length===1)for(;++He<Ue;)Ie.set(He,he[He]);else for(;++He<Ue;)Ie.set(we.call(he,Ze=he[He],He),Ze)}else for(var xt in he)Ie.set(xt,he[xt]);return Ie};function S(){this._=Object.create(null)}var T="__proto__",x="\0";c(S,{has:C,get:function(he){return this._[w(he)]},set:function(he,we){return this._[w(he)]=we},remove:M,keys:E,values:function(){var he=[];for(var we in this._)he.push(this._[we]);return he},entries:function(){var he=[];for(var we in this._)he.push({key:v(we),value:this._[we]});return he},size:L,empty:z,forEach:function(he){for(var we in this._)he.call(this,v(we),this._[we])}});function w(he){return(he+="")===T||he[0]===x?x+he:he}function v(he){return(he+="")[0]===x?he.slice(1):he}function C(he){return w(he)in this._}function M(he){return(he=w(he))in this._&&delete this._[he]}function E(){var he=[];for(var we in this._)he.push(v(we));return he}function L(){var he=0;for(var we in this._)++he;return he}function z(){for(var he in this._)return!1;return!0}s.nest=function(){var he={},we=[],Ie=[],He,Ue;function Ze(vt,Lt,jt){if(jt>=we.length)return Ue?Ue.call(he,Lt):He?Lt.sort(He):Lt;for(var Kt=-1,qt=Lt.length,Sr=we[jt++],qr,cn,kr,Vr=new S,Xr;++Kt<qt;)(Xr=Vr.get(qr=Sr(cn=Lt[Kt])))?Xr.push(cn):Vr.set(qr,[cn]);return vt?(cn=vt(),kr=function(on,ln){cn.set(on,Ze(vt,ln,jt))}):(cn={},kr=function(on,ln){cn[on]=Ze(vt,ln,jt)}),Vr.forEach(kr),cn}function xt(vt,Lt){if(Lt>=we.length)return vt;var jt=[],Kt=Ie[Lt++];return vt.forEach(function(qt,Sr){jt.push({key:qt,values:xt(Sr,Lt)})}),Kt?jt.sort(function(qt,Sr){return Kt(qt.key,Sr.key)}):jt}return he.map=function(vt,Lt){return Ze(Lt,vt,0)},he.entries=function(vt){return xt(Ze(s.map,vt,0),0)},he.key=function(vt){return we.push(vt),he},he.sortKeys=function(vt){return Ie[we.length-1]=vt,he},he.sortValues=function(vt){return He=vt,he},he.rollup=function(vt){return Ue=vt,he},he},s.set=function(he){var we=new O;if(he)for(var Ie=0,He=he.length;Ie<He;++Ie)we.add(he[Ie]);return we};function O(){this._=Object.create(null)}c(O,{has:C,add:function(he){return this._[w(he+="")]=!0,he},remove:M,values:E,size:L,empty:z,forEach:function(he){for(var we in this._)he.call(this,v(we))}}),s.behavior={};function R(he){return he}s.rebind=function(he,we){for(var Ie=1,He=arguments.length,Ue;++Ie<He;)he[Ue=arguments[Ie]]=D(he,we,we[Ue]);return he};function D(he,we,Ie){return function(){var He=Ie.apply(we,arguments);return He===we?he:He}}function H(he,we){if(we in he)return we;we=we.charAt(0).toUpperCase()+we.slice(1);for(var Ie=0,He=B.length;Ie<He;++Ie){var Ue=B[Ie]+we;if(Ue in he)return Ue}}var B=["webkit","ms","moz","Moz","o","O"];function $(){}s.dispatch=function(){for(var he=new W,we=-1,Ie=arguments.length;++we<Ie;)he[arguments[we]]=re(he);return he};function W(){}W.prototype.on=function(he,we){var Ie=he.indexOf("."),He="";if(Ie>=0&&(He=he.slice(Ie+1),he=he.slice(0,Ie)),he)return arguments.length<2?this[he].on(He):this[he].on(He,we);if(arguments.length===2){if(we==null)for(he in this)this.hasOwnProperty(he)&&this[he].on(He,null);return this}};function re(he){var we=[],Ie=new S;function He(){for(var Ue=we,Ze=-1,xt=Ue.length,vt;++Ze<xt;)(vt=Ue[Ze].on)&&vt.apply(this,arguments);return he}return He.on=function(Ue,Ze){var xt=Ie.get(Ue),vt;return arguments.length<2?xt&&xt.on:(xt&&(xt.on=null,we=we.slice(0,vt=we.indexOf(xt)).concat(we.slice(vt+1)),Ie.remove(Ue)),Ze&&we.push(Ie.set(Ue,{on:Ze})),he)},He}s.event=null;function Q(){s.event.preventDefault()}function Z(){for(var he=s.event,we;we=he.sourceEvent;)he=we;return he}function K(he){for(var we=new W,Ie=0,He=arguments.length;++Ie<He;)we[arguments[Ie]]=re(we);return we.of=function(Ue,Ze){return function(xt){try{var vt=xt.sourceEvent=s.event;xt.target=he,s.event=xt,we[xt.type].apply(Ue,Ze)}finally{s.event=vt}}},we}s.requote=function(he){return he.replace(le,"\\$&")};var le=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fe={}.__proto__?function(he,we){he.__proto__=we}:function(he,we){for(var Ie in we)he[Ie]=we[Ie]};function ue(he){return fe(he,q),he}var V=function(he,we){return we.querySelector(he)},j=function(he,we){return we.querySelectorAll(he)},ee=function(he,we){var Ie=he.matches||he[H(he,"matchesSelector")];return ee=function(He,Ue){return Ie.call(He,Ue)},ee(he,we)};typeof Sizzle=="function"&&(V=function(he,we){return Sizzle(he,we)[0]||null},j=Sizzle,ee=Sizzle.matchesSelector),s.selection=function(){return s.select(y.documentElement)};var q=s.selection.prototype=[];q.select=function(he){var we=[],Ie,He,Ue,Ze;he=X(he);for(var xt=-1,vt=this.length;++xt<vt;){we.push(Ie=[]),Ie.parentNode=(Ue=this[xt]).parentNode;for(var Lt=-1,jt=Ue.length;++Lt<jt;)(Ze=Ue[Lt])?(Ie.push(He=he.call(Ze,Ze.__data__,Lt,xt)),He&&"__data__"in Ze&&(He.__data__=Ze.__data__)):Ie.push(null)}return ue(we)};function X(he){return typeof he=="function"?he:function(){return V(he,this)}}q.selectAll=function(he){var we=[],Ie,He;he=J(he);for(var Ue=-1,Ze=this.length;++Ue<Ze;)for(var xt=this[Ue],vt=-1,Lt=xt.length;++vt<Lt;)(He=xt[vt])&&(we.push(Ie=h(he.call(He,He.__data__,vt,Ue))),Ie.parentNode=He);return ue(we)};function J(he){return typeof he=="function"?he:function(){return j(he,this)}}var ie="http://www.w3.org/1999/xhtml",ne={svg:"http://www.w3.org/2000/svg",xhtml:ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};s.ns={prefix:ne,qualify:function(he){var we=he.indexOf(":"),Ie=he;return we>=0&&(Ie=he.slice(0,we))!=="xmlns"&&(he=he.slice(we+1)),ne.hasOwnProperty(Ie)?{space:ne[Ie],local:he}:he}},q.attr=function(he,we){if(arguments.length<2){if(typeof he=="string"){var Ie=this.node();return he=s.ns.qualify(he),he.local?Ie.getAttributeNS(he.space,he.local):Ie.getAttribute(he)}for(we in he)this.each(oe(we,he[we]));return this}return this.each(oe(he,we))};function oe(he,we){he=s.ns.qualify(he);function Ie(){this.removeAttribute(he)}function He(){this.removeAttributeNS(he.space,he.local)}function Ue(){this.setAttribute(he,we)}function Ze(){this.setAttributeNS(he.space,he.local,we)}function xt(){var Lt=we.apply(this,arguments);Lt==null?this.removeAttribute(he):this.setAttribute(he,Lt)}function vt(){var Lt=we.apply(this,arguments);Lt==null?this.removeAttributeNS(he.space,he.local):this.setAttributeNS(he.space,he.local,Lt)}return we==null?he.local?He:Ie:typeof we=="function"?he.local?vt:xt:he.local?Ze:Ue}function se(he){return he.trim().replace(/\s+/g," ")}q.classed=function(he,we){if(arguments.length<2){if(typeof he=="string"){var Ie=this.node(),He=(he=ce(he)).length,Ue=-1;if(we=Ie.classList){for(;++Ue<He;)if(!we.contains(he[Ue]))return!1}else for(we=Ie.getAttribute("class");++Ue<He;)if(!me(he[Ue]).test(we))return!1;return!0}for(we in he)this.each(pe(we,he[we]));return this}return this.each(pe(he,we))};function me(he){return new RegExp("(?:^|\\s+)"+s.requote(he)+"(?:\\s+|$)","g")}function ce(he){return(he+"").trim().split(/^|\s+/)}function pe(he,we){he=ce(he).map(xe);var Ie=he.length;function He(){for(var Ze=-1;++Ze<Ie;)he[Ze](this,we)}function Ue(){for(var Ze=-1,xt=we.apply(this,arguments);++Ze<Ie;)he[Ze](this,xt)}return typeof we=="function"?Ue:He}function xe(he){var we=me(he);return function(Ie,He){if(Ue=Ie.classList)return He?Ue.add(he):Ue.remove(he);var Ue=Ie.getAttribute("class")||"";He?(we.lastIndex=0,we.test(Ue)||Ie.setAttribute("class",se(Ue+" "+he))):Ie.setAttribute("class",se(Ue.replace(we," ")))}}q.style=function(he,we,Ie){var He=arguments.length;if(He<3){if(typeof he!="string"){He<2&&(we="");for(Ie in he)this.each(Se(Ie,he[Ie],we));return this}if(He<2){var Ue=this.node();return a(Ue).getComputedStyle(Ue,null).getPropertyValue(he)}Ie=""}return this.each(Se(he,we,Ie))};function Se(he,we,Ie){function He(){this.style.removeProperty(he)}function Ue(){this.style.setProperty(he,we,Ie)}function Ze(){var xt=we.apply(this,arguments);xt==null?this.style.removeProperty(he):this.style.setProperty(he,xt,Ie)}return we==null?He:typeof we=="function"?Ze:Ue}q.property=function(he,we){if(arguments.length<2){if(typeof he=="string")return this.node()[he];for(we in he)this.each(Ae(we,he[we]));return this}return this.each(Ae(he,we))};function Ae(he,we){function Ie(){delete this[he]}function He(){this[he]=we}function Ue(){var Ze=we.apply(this,arguments);Ze==null?delete this[he]:this[he]=Ze}return we==null?Ie:typeof we=="function"?Ue:He}q.text=function(he){return arguments.length?this.each(typeof he=="function"?function(){var we=he.apply(this,arguments);this.textContent=we==null?"":we}:he==null?function(){this.textContent=""}:function(){this.textContent=he}):this.node().textContent},q.html=function(he){return arguments.length?this.each(typeof he=="function"?function(){var we=he.apply(this,arguments);this.innerHTML=we==null?"":we}:he==null?function(){this.innerHTML=""}:function(){this.innerHTML=he}):this.node().innerHTML},q.append=function(he){return he=Ce(he),this.select(function(){return this.appendChild(he.apply(this,arguments))})};function Ce(he){function we(){var He=this.ownerDocument,Ue=this.namespaceURI;return Ue===ie&&He.documentElement.namespaceURI===ie?He.createElement(he):He.createElementNS(Ue,he)}function Ie(){return this.ownerDocument.createElementNS(he.space,he.local)}return typeof he=="function"?he:(he=s.ns.qualify(he)).local?Ie:we}q.insert=function(he,we){return he=Ce(he),we=X(we),this.select(function(){return this.insertBefore(he.apply(this,arguments),we.apply(this,arguments)||null)})},q.remove=function(){return this.each(Ee)};function Ee(){var he=this.parentNode;he&&he.removeChild(this)}q.data=function(he,we){var Ie=-1,He=this.length,Ue,Ze;if(!arguments.length){for(he=new Array(He=(Ue=this[0]).length);++Ie<He;)(Ze=Ue[Ie])&&(he[Ie]=Ze.__data__);return he}function xt(Kt,qt){var Sr,qr=Kt.length,cn=qt.length,kr=Math.min(qr,cn),Vr=new Array(cn),Xr=new Array(cn),on=new Array(qr),ln,Zr;if(we){var $n=new S,aa=new Array(qr),Sa;for(Sr=-1;++Sr<qr;)(ln=Kt[Sr])&&($n.has(Sa=we.call(ln,ln.__data__,Sr))?on[Sr]=ln:$n.set(Sa,ln),aa[Sr]=Sa);for(Sr=-1;++Sr<cn;)(ln=$n.get(Sa=we.call(qt,Zr=qt[Sr],Sr)))?ln!==!0&&(Vr[Sr]=ln,ln.__data__=Zr):Xr[Sr]=Oe(Zr),$n.set(Sa,!0);for(Sr=-1;++Sr<qr;)Sr in aa&&$n.get(aa[Sr])!==!0&&(on[Sr]=Kt[Sr])}else{for(Sr=-1;++Sr<kr;)ln=Kt[Sr],Zr=qt[Sr],ln?(ln.__data__=Zr,Vr[Sr]=ln):Xr[Sr]=Oe(Zr);for(;Sr<cn;++Sr)Xr[Sr]=Oe(qt[Sr]);for(;Sr<qr;++Sr)on[Sr]=Kt[Sr]}Xr.update=Vr,Xr.parentNode=Vr.parentNode=on.parentNode=Kt.parentNode,vt.push(Xr),Lt.push(Vr),jt.push(on)}var vt=Je([]),Lt=ue([]),jt=ue([]);if(typeof he=="function")for(;++Ie<He;)xt(Ue=this[Ie],he.call(Ue,Ue.parentNode.__data__,Ie));else for(;++Ie<He;)xt(Ue=this[Ie],he);return Lt.enter=function(){return vt},Lt.exit=function(){return jt},Lt};function Oe(he){return{__data__:he}}q.datum=function(he){return arguments.length?this.property("__data__",he):this.property("__data__")},q.filter=function(he){var we=[],Ie,He,Ue;typeof he!="function"&&(he=_e(he));for(var Ze=0,xt=this.length;Ze<xt;Ze++){we.push(Ie=[]),Ie.parentNode=(He=this[Ze]).parentNode;for(var vt=0,Lt=He.length;vt<Lt;vt++)(Ue=He[vt])&&he.call(Ue,Ue.__data__,vt,Ze)&&Ie.push(Ue)}return ue(we)};function _e(he){return function(){return ee(this,he)}}q.order=function(){for(var he=-1,we=this.length;++he<we;)for(var Ie=this[he],He=Ie.length-1,Ue=Ie[He],Ze;--He>=0;)(Ze=Ie[He])&&(Ue&&Ue!==Ze.nextSibling&&Ue.parentNode.insertBefore(Ze,Ue),Ue=Ze);return this},q.sort=function(he){he=Re.apply(this,arguments);for(var we=-1,Ie=this.length;++we<Ie;)this[we].sort(he);return this.order()};function Re(he){return arguments.length||(he=l),function(we,Ie){return we&&Ie?he(we.__data__,Ie.__data__):!we-!Ie}}q.each=function(he){return Ve(this,function(we,Ie,He){he.call(we,we.__data__,Ie,He)})};function Ve(he,we){for(var Ie=0,He=he.length;Ie<He;Ie++)for(var Ue=he[Ie],Ze=0,xt=Ue.length,vt;Ze<xt;Ze++)(vt=Ue[Ze])&&we(vt,Ze,Ie);return he}q.call=function(he){var we=h(arguments);return he.apply(we[0]=this,we),this},q.empty=function(){return!this.node()},q.node=function(){for(var he=0,we=this.length;he<we;he++)for(var Ie=this[he],He=0,Ue=Ie.length;He<Ue;He++){var Ze=Ie[He];if(Ze)return Ze}return null},q.size=function(){var he=0;return Ve(this,function(){++he}),he};function Je(he){return fe(he,ze),he}var ze=[];s.selection.enter=Je,s.selection.enter.prototype=ze,ze.append=q.append,ze.empty=q.empty,ze.node=q.node,ze.call=q.call,ze.size=q.size,ze.select=function(he){for(var we=[],Ie,He,Ue,Ze,xt,vt=-1,Lt=this.length;++vt<Lt;){Ue=(Ze=this[vt]).update,we.push(Ie=[]),Ie.parentNode=Ze.parentNode;for(var jt=-1,Kt=Ze.length;++jt<Kt;)(xt=Ze[jt])?(Ie.push(Ue[jt]=He=he.call(Ze.parentNode,xt.__data__,jt,vt)),He.__data__=xt.__data__):Ie.push(null)}return ue(we)},ze.insert=function(he,we){return arguments.length<2&&(we=De(this)),q.insert.call(this,he,we)};function De(he){var we,Ie;return function(He,Ue,Ze){var xt=he[Ze].update,vt=xt.length,Lt;for(Ze!=Ie&&(Ie=Ze,we=0),Ue>=we&&(we=Ue+1);!(Lt=xt[we])&&++we<vt;);return Lt}}s.select=function(he){var we;return typeof he=="string"?(we=[V(he,y)],we.parentNode=y.documentElement):(we=[he],we.parentNode=t(he)),ue([we])},s.selectAll=function(he){var we;return typeof he=="string"?(we=h(j(he,y)),we.parentNode=y.documentElement):(we=h(he),we.parentNode=null),ue([we])},q.on=function(he,we,Ie){var He=arguments.length;if(He<3){if(typeof he!="string"){He<2&&(we=!1);for(Ie in he)this.each(je(Ie,he[Ie],we));return this}if(He<2)return(He=this.node()["__on"+he])&&He._;Ie=!1}return this.each(je(he,we,Ie))};function je(he,we,Ie){var He="__on"+he,Ue=he.indexOf("."),Ze=Et;Ue>0&&(he=he.slice(0,Ue));var xt=dt.get(he);xt&&(he=xt,Ze=$t);function vt(){var Kt=this[He];Kt&&(this.removeEventListener(he,Kt,Kt.$),delete this[He])}function Lt(){var Kt=Ze(we,h(arguments));vt.call(this),this.addEventListener(he,this[He]=Kt,Kt.$=Ie),Kt._=we}function jt(){var Kt=new RegExp("^__on([^.]+)"+s.requote(he)+"$"),qt;for(var Sr in this)if(qt=Sr.match(Kt)){var qr=this[Sr];this.removeEventListener(qt[1],qr,qr.$),delete this[Sr]}}return Ue?we?Lt:vt:we?$:jt}var dt=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});y&&dt.forEach(function(he){"on"+he in y&&dt.remove(he)});function Et(he,we){return function(Ie){var He=s.event;s.event=Ie,we[0]=this.__data__;try{he.apply(this,we)}finally{s.event=He}}}function $t(he,we){var Ie=Et(he,we);return function(He){var Ue=this,Ze=He.relatedTarget;(!Ze||Ze!==Ue&&!(Ze.compareDocumentPosition(Ue)&8))&&Ie.call(Ue,He)}}var wt,Ot=0;function Vt(he){var we=".dragsuppress-"+ ++Ot,Ie="click"+we,He=s.select(a(he)).on("touchmove"+we,Q).on("dragstart"+we,Q).on("selectstart"+we,Q);if(wt==null&&(wt="onselectstart"in he?!1:H(he.style,"userSelect")),wt){var Ue=t(he).style,Ze=Ue[wt];Ue[wt]="none"}return function(xt){if(He.on(we,null),wt&&(Ue[wt]=Ze),xt){var vt=function(){He.on(Ie,null)};He.on(Ie,function(){Q(),vt()},!0),setTimeout(vt,0)}}}s.mouse=function(he){return St(he,Z())};var kt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function St(he,we){we.changedTouches&&(we=we.changedTouches[0]);var Ie=he.ownerSVGElement||he;if(Ie.createSVGPoint){var He=Ie.createSVGPoint();if(kt<0){var Ue=a(he);if(Ue.scrollX||Ue.scrollY){Ie=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ze=Ie[0][0].getScreenCTM();kt=!(Ze.f||Ze.e),Ie.remove()}}return kt?(He.x=we.pageX,He.y=we.pageY):(He.x=we.clientX,He.y=we.clientY),He=He.matrixTransform(he.getScreenCTM().inverse()),[He.x,He.y]}var xt=he.getBoundingClientRect();return[we.clientX-xt.left-he.clientLeft,we.clientY-xt.top-he.clientTop]}s.touch=function(he,we,Ie){if(arguments.length<3&&(Ie=we,we=Z().changedTouches),we){for(var He=0,Ue=we.length,Ze;He<Ue;++He)if((Ze=we[He]).identifier===Ie)return St(he,Ze)}},s.behavior.drag=function(){var he=K(Ue,"drag","dragstart","dragend"),we=null,Ie=Ze($,s.mouse,a,"mousemove","mouseup"),He=Ze(ot,s.touch,R,"touchmove","touchend");function Ue(){this.on("mousedown.drag",Ie).on("touchstart.drag",He)}function Ze(xt,vt,Lt,jt,Kt){return function(){var qt=this,Sr=s.event.target.correspondingElement||s.event.target,qr=qt.parentNode,cn=he.of(qt,arguments),kr=0,Vr=xt(),Xr=".drag"+(Vr==null?"":"-"+Vr),on,ln=s.select(Lt(Sr)).on(jt+Xr,aa).on(Kt+Xr,Sa),Zr=Vt(Sr),$n=vt(qr,Vr);we?(on=we.apply(qt,arguments),on=[on.x-$n[0],on.y-$n[1]]):on=[0,0],cn({type:"dragstart"});function aa(){var ua=vt(qr,Vr),La,ha;!ua||(La=ua[0]-$n[0],ha=ua[1]-$n[1],kr|=La|ha,$n=ua,cn({type:"drag",x:ua[0]+on[0],y:ua[1]+on[1],dx:La,dy:ha}))}function Sa(){!vt(qr,Vr)||(ln.on(jt+Xr,null).on(Kt+Xr,null),Zr(kr),cn({type:"dragend"}))}}}return Ue.origin=function(xt){return arguments.length?(we=xt,Ue):we},s.rebind(Ue,he,"on")};function ot(){return s.event.changedTouches[0].identifier}s.touches=function(he,we){return arguments.length<2&&(we=Z().touches),we?h(we).map(function(Ie){var He=St(he,Ie);return He.identifier=Ie.identifier,He}):[]};var ht=1e-6,Ke=ht*ht,Pe=Math.PI,We=2*Pe,Qe=We-ht,ut=Pe/2,It=Pe/180,Tt=180/Pe;function Bt(he,we,Ie){return(we[0]-he[0])*(Ie[1]-he[1])-(we[1]-he[1])*(Ie[0]-he[0])}function rr(he){return he>1?ut:he<-1?-ut:Math.asin(he)}function Ut(he){return((he=Math.exp(he))-1/he)/2}function Qt(he){return((he=Math.exp(he))+1/he)/2}function ar(he){return((he=Math.exp(2*he))-1)/(he+1)}var nr=Math.SQRT2,cr=2,Kr=4;s.interpolateZoom=function(he,we){var Ie=he[0],He=he[1],Ue=he[2],Ze=we[0],xt=we[1],vt=we[2],Lt=Ze-Ie,jt=xt-He,Kt=Lt*Lt+jt*jt,qt,Sr;if(Kt<Ke)Sr=Math.log(vt/Ue)/nr,qt=function(on){return[Ie+on*Lt,He+on*jt,Ue*Math.exp(nr*on*Sr)]};else{var qr=Math.sqrt(Kt),cn=(vt*vt-Ue*Ue+Kr*Kt)/(2*Ue*cr*qr),kr=(vt*vt-Ue*Ue-Kr*Kt)/(2*vt*cr*qr),Vr=Math.log(Math.sqrt(cn*cn+1)-cn),Xr=Math.log(Math.sqrt(kr*kr+1)-kr);Sr=(Xr-Vr)/nr,qt=function(on){var ln=on*Sr,Zr=Qt(Vr),$n=Ue/(cr*qr)*(Zr*ar(nr*ln+Vr)-Ut(Vr));return[Ie+$n*Lt,He+$n*jt,Ue*Zr/Qt(nr*ln+Vr)]}}return qt.duration=Sr*1e3,qt},s.behavior.zoom=function(){var he={x:0,y:0,k:1},we,Ie,He,Ue=[960,500],Ze=yn,xt=250,vt=0,Lt="mousedown.zoom",jt="mousemove.zoom",Kt="mouseup.zoom",qt,Sr="touchstart.zoom",qr,cn=K(ln,"zoomstart","zoom","zoomend"),kr,Vr,Xr,on;st||(st="onwheel"in y?(Qr=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in y?(Qr=function(){return s.event.wheelDelta},"mousewheel"):(Qr=function(){return-s.event.detail},"MozMousePixelScroll"));function ln(va){va.on(Lt,ai).on(st+".zoom",Po).on("dblclick.zoom",Xi).on(Sr,ki)}ln.event=function(va){va.each(function(){var ci=cn.of(this,arguments),Ja=he;Ka?s.select(this).transition().each("start.zoom",function(){he=this.__chart__||{x:0,y:0,k:1},ha(ci)}).tween("zoom:zoom",function(){var Ni=Ue[0],pi=Ue[1],Mo=Ie?Ie[0]:Ni/2,po=Ie?Ie[1]:pi/2,zo=s.interpolateZoom([(Mo-he.x)/he.k,(po-he.y)/he.k,Ni/he.k],[(Mo-Ja.x)/Ja.k,(po-Ja.y)/Ja.k,Ni/Ja.k]);return function(ms){var cs=zo(ms),xs=Ni/cs[2];this.__chart__=he={x:Mo-cs[0]*xs,y:po-cs[1]*xs,k:xs},Wa(ci)}}).each("interrupt.zoom",function(){Fa(ci)}).each("end.zoom",function(){Fa(ci)}):(this.__chart__=he,ha(ci),Wa(ci),Fa(ci))})},ln.translate=function(va){return arguments.length?(he={x:+va[0],y:+va[1],k:he.k},La(),ln):[he.x,he.y]},ln.scale=function(va){return arguments.length?(he={x:he.x,y:he.y,k:null},aa(+va),La(),ln):he.k},ln.scaleExtent=function(va){return arguments.length?(Ze=va==null?yn:[+va[0],+va[1]],ln):Ze},ln.center=function(va){return arguments.length?(He=va&&[+va[0],+va[1]],ln):He},ln.size=function(va){return arguments.length?(Ue=va&&[+va[0],+va[1]],ln):Ue},ln.duration=function(va){return arguments.length?(xt=+va,ln):xt},ln.x=function(va){return arguments.length?(Vr=va,kr=va.copy(),he={x:0,y:0,k:1},ln):Vr},ln.y=function(va){return arguments.length?(on=va,Xr=va.copy(),he={x:0,y:0,k:1},ln):on};function Zr(va){return[(va[0]-he.x)/he.k,(va[1]-he.y)/he.k]}function $n(va){return[va[0]*he.k+he.x,va[1]*he.k+he.y]}function aa(va){he.k=Math.max(Ze[0],Math.min(Ze[1],va))}function Sa(va,ci){ci=$n(ci),he.x+=va[0]-ci[0],he.y+=va[1]-ci[1]}function ua(va,ci,Ja,Ni){va.__chart__={x:he.x,y:he.y,k:he.k},aa(Math.pow(2,Ni)),Sa(Ie=ci,Ja),va=s.select(va),xt>0&&(va=va.transition().duration(xt)),va.call(ln.event)}function La(){Vr&&Vr.domain(kr.range().map(function(va){return(va-he.x)/he.k}).map(kr.invert)),on&&on.domain(Xr.range().map(function(va){return(va-he.y)/he.k}).map(Xr.invert))}function ha(va){vt++||va({type:"zoomstart"})}function Wa(va){La(),va({type:"zoom",scale:he.k,translate:[he.x,he.y]})}function Fa(va){--vt||(va({type:"zoomend"}),Ie=null)}function ai(){var va=this,ci=cn.of(va,arguments),Ja=0,Ni=s.select(a(va)).on(jt,po).on(Kt,zo),pi=Zr(s.mouse(va)),Mo=Vt(va);zn.call(va),ha(ci);function po(){Ja=1,Sa(s.mouse(va),pi),Wa(ci)}function zo(){Ni.on(jt,null).on(Kt,null),Mo(Ja),Fa(ci)}}function ki(){var va=this,ci=cn.of(va,arguments),Ja={},Ni=0,pi,Mo=".zoom-"+s.event.changedTouches[0].identifier,po="touchmove"+Mo,zo="touchend"+Mo,ms=[],cs=s.select(va),xs=Vt(va);qi(),ha(ci),cs.on(Lt,null).on(Sr,qi);function io(){var Ho=s.touches(va);return pi=he.k,Ho.forEach(function(bo){bo.identifier in Ja&&(Ja[bo.identifier]=Zr(bo))}),Ho}function qi(){var Ho=s.event.target;s.select(Ho).on(po,Ua).on(zo,Qa),ms.push(Ho);for(var bo=s.event.changedTouches,rs=0,lo=bo.length;rs<lo;++rs)Ja[bo[rs].identifier]=null;var bs=io(),Js=Date.now();if(bs.length===1){if(Js-qr<500){var Gu=bs[0];ua(va,Gu,Ja[Gu.identifier],Math.floor(Math.log(he.k)/Math.LN2)+1),Q()}qr=Js}else if(bs.length>1){var Gu=bs[0],uo=bs[1],uh=Gu[0]-uo[0],wu=Gu[1]-uo[1];Ni=uh*uh+wu*wu}}function Ua(){var Ho=s.touches(va),bo,rs,lo,bs;zn.call(va);for(var Js=0,Gu=Ho.length;Js<Gu;++Js,bs=null)if(lo=Ho[Js],bs=Ja[lo.identifier]){if(rs)break;bo=lo,rs=bs}if(bs){var uo=(uo=lo[0]-bo[0])*uo+(uo=lo[1]-bo[1])*uo,uh=Ni&&Math.sqrt(uo/Ni);bo=[(bo[0]+lo[0])/2,(bo[1]+lo[1])/2],rs=[(rs[0]+bs[0])/2,(rs[1]+bs[1])/2],aa(uh*pi)}qr=null,Sa(bo,rs),Wa(ci)}function Qa(){if(s.event.touches.length){for(var Ho=s.event.changedTouches,bo=0,rs=Ho.length;bo<rs;++bo)delete Ja[Ho[bo].identifier];for(var lo in Ja)return void io()}s.selectAll(ms).on(Mo,null),cs.on(Lt,ai).on(Sr,ki),xs(),Fa(ci)}}function Po(){var va=cn.of(this,arguments);qt?clearTimeout(qt):(zn.call(this),we=Zr(Ie=He||s.mouse(this)),ha(va)),qt=setTimeout(function(){qt=null,Fa(va)},50),Q(),aa(Math.pow(2,Qr()*.002)*he.k),Sa(Ie,we),Wa(va)}function Xi(){var va=s.mouse(this),ci=Math.log(he.k)/Math.LN2;ua(this,va,Zr(va),s.event.shiftKey?Math.ceil(ci)-1:Math.floor(ci)+1)}return s.rebind(ln,cn,"on")};var yn=[0,1/0],Qr,st;s.color=Gt;function Gt(){}Gt.prototype.toString=function(){return this.rgb()+""},s.hsl=Zt;function Zt(he,we,Ie){return this instanceof Zt?(this.h=+he,this.s=+we,void(this.l=+Ie)):arguments.length<2?he instanceof Zt?new Zt(he.h,he.s,he.l):hn(""+he,Tr,Zt):new Zt(he,we,Ie)}var Ht=Zt.prototype=new Gt;Ht.brighter=function(he){return he=Math.pow(.7,arguments.length?he:1),new Zt(this.h,this.s,this.l/he)},Ht.darker=function(he){return he=Math.pow(.7,arguments.length?he:1),new Zt(this.h,this.s,he*this.l)},Ht.rgb=function(){return _r(this.h,this.s,this.l)};function _r(he,we,Ie){var He,Ue;he=isNaN(he)?0:(he%=360)<0?he+360:he,we=isNaN(we)||we<0?0:we>1?1:we,Ie=Ie<0?0:Ie>1?1:Ie,Ue=Ie<=.5?Ie*(1+we):Ie+we-Ie*we,He=2*Ie-Ue;function Ze(vt){return vt>360?vt-=360:vt<0&&(vt+=360),vt<60?He+(Ue-He)*vt/60:vt<180?Ue:vt<240?He+(Ue-He)*(240-vt)/60:He}function xt(vt){return Math.round(Ze(vt)*255)}return new gr(xt(he+120),xt(he),xt(he-120))}s.hcl=it;function it(he,we,Ie){return this instanceof it?(this.h=+he,this.c=+we,void(this.l=+Ie)):arguments.length<2?he instanceof it?new it(he.h,he.c,he.l):he instanceof Ge?Pt(he.l,he.a,he.b):Pt((he=wr((he=s.rgb(he)).r,he.g,he.b)).l,he.a,he.b):new it(he,we,Ie)}var Te=it.prototype=new Gt;Te.brighter=function(he){return new it(this.h,this.c,Math.min(100,this.l+Ye*(arguments.length?he:1)))},Te.darker=function(he){return new it(this.h,this.c,Math.max(0,this.l-Ye*(arguments.length?he:1)))},Te.rgb=function(){return ke(this.h,this.c,this.l).rgb()};function ke(he,we,Ie){return isNaN(he)&&(he=0),isNaN(we)&&(we=0),new Ge(Ie,Math.cos(he*=It)*we,Math.sin(he)*we)}s.lab=Ge;function Ge(he,we,Ie){return this instanceof Ge?(this.l=+he,this.a=+we,void(this.b=+Ie)):arguments.length<2?he instanceof Ge?new Ge(he.l,he.a,he.b):he instanceof it?ke(he.h,he.c,he.l):wr((he=gr(he)).r,he.g,he.b):new Ge(he,we,Ie)}var Ye=18,qe=.95047,at=1,et=1.08883,pt=Ge.prototype=new Gt;pt.brighter=function(he){return new Ge(Math.min(100,this.l+Ye*(arguments.length?he:1)),this.a,this.b)},pt.darker=function(he){return new Ge(Math.max(0,this.l-Ye*(arguments.length?he:1)),this.a,this.b)},pt.rgb=function(){return _t(this.l,this.a,this.b)};function _t(he,we,Ie){var He=(he+16)/116,Ue=He+we/500,Ze=He-Ie/200;return Ue=Xt(Ue)*qe,He=Xt(He)*at,Ze=Xt(Ze)*et,new gr(ur(3.2404542*Ue-1.5371385*He-.4985314*Ze),ur(-.969266*Ue+1.8760108*He+.041556*Ze),ur(.0556434*Ue-.2040259*He+1.0572252*Ze))}function Pt(he,we,Ie){return he>0?new it(Math.atan2(Ie,we)*Tt,Math.sqrt(we*we+Ie*Ie),he):new it(NaN,NaN,he)}function Xt(he){return he>.206893034?he*he*he:(he-4/29)/7.787037}function zt(he){return he>.008856?Math.pow(he,1/3):7.787037*he+4/29}function ur(he){return Math.round(255*(he<=.00304?12.92*he:1.055*Math.pow(he,1/2.4)-.055))}s.rgb=gr;function gr(he,we,Ie){return this instanceof gr?(this.r=~~he,this.g=~~we,void(this.b=~~Ie)):arguments.length<2?he instanceof gr?new gr(he.r,he.g,he.b):hn(""+he,gr,_r):new gr(he,we,Ie)}function Mr(he){return new gr(he>>16,he>>8&255,he&255)}function un(he){return Mr(he)+""}var zr=gr.prototype=new Gt;zr.brighter=function(he){he=Math.pow(.7,arguments.length?he:1);var we=this.r,Ie=this.g,He=this.b,Ue=30;return!we&&!Ie&&!He?new gr(Ue,Ue,Ue):(we&&we<Ue&&(we=Ue),Ie&&Ie<Ue&&(Ie=Ue),He&&He<Ue&&(He=Ue),new gr(Math.min(255,we/he),Math.min(255,Ie/he),Math.min(255,He/he)))},zr.darker=function(he){return he=Math.pow(.7,arguments.length?he:1),new gr(he*this.r,he*this.g,he*this.b)},zr.hsl=function(){return Tr(this.r,this.g,this.b)},zr.toString=function(){return"#"+$r(this.r)+$r(this.g)+$r(this.b)};function $r(he){return he<16?"0"+Math.max(0,he).toString(16):Math.min(255,he).toString(16)}function hn(he,we,Ie){var He=0,Ue=0,Ze=0,xt,vt,Lt;if(xt=/([a-z]+)\((.*)\)/.exec(he=he.toLowerCase()),xt)switch(vt=xt[2].split(","),xt[1]){case"hsl":return Ie(parseFloat(vt[0]),parseFloat(vt[1])/100,parseFloat(vt[2])/100);case"rgb":return we(Br(vt[0]),Br(vt[1]),Br(vt[2]))}return(Lt=Cr.get(he))?we(Lt.r,Lt.g,Lt.b):(he!=null&&he.charAt(0)==="#"&&!isNaN(Lt=parseInt(he.slice(1),16))&&(he.length===4?(He=(Lt&3840)>>4,He=He>>4|He,Ue=Lt&240,Ue=Ue>>4|Ue,Ze=Lt&15,Ze=Ze<<4|Ze):he.length===7&&(He=(Lt&16711680)>>16,Ue=(Lt&65280)>>8,Ze=Lt&255)),we(He,Ue,Ze))}function Tr(he,we,Ie){var He=Math.min(he/=255,we/=255,Ie/=255),Ue=Math.max(he,we,Ie),Ze=Ue-He,xt,vt,Lt=(Ue+He)/2;return Ze?(vt=Lt<.5?Ze/(Ue+He):Ze/(2-Ue-He),he==Ue?xt=(we-Ie)/Ze+(we<Ie?6:0):we==Ue?xt=(Ie-he)/Ze+2:xt=(he-we)/Ze+4,xt*=60):(xt=NaN,vt=Lt>0&&Lt<1?0:xt),new Zt(xt,vt,Lt)}function wr(he,we,Ie){he=Ur(he),we=Ur(we),Ie=Ur(Ie);var He=zt((.4124564*he+.3575761*we+.1804375*Ie)/qe),Ue=zt((.2126729*he+.7151522*we+.072175*Ie)/at),Ze=zt((.0193339*he+.119192*we+.9503041*Ie)/et);return Ge(116*Ue-16,500*(He-Ue),200*(Ue-Ze))}function Ur(he){return(he/=255)<=.04045?he/12.92:Math.pow((he+.055)/1.055,2.4)}function Br(he){var we=parseFloat(he);return he.charAt(he.length-1)==="%"?Math.round(we*2.55):we}var Cr=s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Cr.forEach(function(he,we){Cr.set(he,Mr(we))});function nt(he){return typeof he=="function"?he:function(){return he}}s.functor=nt,s.xhr=Rt(R);function Rt(he){return function(we,Ie,He){return arguments.length===2&&typeof Ie=="function"&&(He=Ie,Ie=null),Jt(we,Ie,he,He)}}function Jt(he,we,Ie,He){var Ue={},Ze=s.dispatch("beforesend","progress","load","error"),xt={},vt=new XMLHttpRequest,Lt=null;self.XDomainRequest&&!("withCredentials"in vt)&&/^(http(s)?:)?\/\//.test(he)&&(vt=new XDomainRequest),"onload"in vt?vt.onload=vt.onerror=jt:vt.onreadystatechange=function(){vt.readyState>3&&jt()};function jt(){var Kt=vt.status,qt;if(!Kt&&Dr(vt)||Kt>=200&&Kt<300||Kt===304){try{qt=Ie.call(Ue,vt)}catch(Sr){Ze.error.call(Ue,Sr);return}Ze.load.call(Ue,qt)}else Ze.error.call(Ue,vt)}return vt.onprogress=function(Kt){var qt=s.event;s.event=Kt;try{Ze.progress.call(Ue,vt)}finally{s.event=qt}},Ue.header=function(Kt,qt){return Kt=(Kt+"").toLowerCase(),arguments.length<2?xt[Kt]:(qt==null?delete xt[Kt]:xt[Kt]=qt+"",Ue)},Ue.mimeType=function(Kt){return arguments.length?(we=Kt==null?null:Kt+"",Ue):we},Ue.responseType=function(Kt){return arguments.length?(Lt=Kt,Ue):Lt},Ue.response=function(Kt){return Ie=Kt,Ue},["get","post"].forEach(function(Kt){Ue[Kt]=function(){return Ue.send.apply(Ue,[Kt].concat(h(arguments)))}}),Ue.send=function(Kt,qt,Sr){if(arguments.length===2&&typeof qt=="function"&&(Sr=qt,qt=null),vt.open(Kt,he,!0),we!=null&&!("accept"in xt)&&(xt.accept=we+",*/*"),vt.setRequestHeader)for(var qr in xt)vt.setRequestHeader(qr,xt[qr]);return we!=null&&vt.overrideMimeType&&vt.overrideMimeType(we),Lt!=null&&(vt.responseType=Lt),Sr!=null&&Ue.on("error",Sr).on("load",function(cn){Sr(null,cn)}),Ze.beforesend.call(Ue,vt),vt.send(qt==null?null:qt),Ue},Ue.abort=function(){return vt.abort(),Ue},s.rebind(Ue,Ze,"on"),He==null?Ue:Ue.get(hr(He))}function hr(he){return he.length===1?function(we,Ie){he(we==null?Ie:null)}:he}function Dr(he){var we=he.responseType;return we&&we!=="text"?he.response:he.responseText}s.dsv=function(he,we){var Ie=new RegExp('["'+he+`
]`),He=he.charCodeAt(0);function Ue(jt,Kt,qt){arguments.length<3&&(qt=Kt,Kt=null);var Sr=Jt(jt,we,Kt==null?Ze:xt(Kt),qt);return Sr.row=function(qr){return arguments.length?Sr.response((Kt=qr)==null?Ze:xt(qr)):Kt},Sr}function Ze(jt){return Ue.parse(jt.responseText)}function xt(jt){return function(Kt){return Ue.parse(Kt.responseText,jt)}}Ue.parse=function(jt,Kt){var qt;return Ue.parseRows(jt,function(Sr,qr){if(qt)return qt(Sr,qr-1);var cn=function(kr){for(var Vr={},Xr=Sr.length,on=0;on<Xr;++on)Vr[Sr[on]]=kr[on];return Vr};qt=Kt?function(kr,Vr){return Kt(cn(kr),Vr)}:cn})},Ue.parseRows=function(jt,Kt){var qt={},Sr={},qr=[],cn=jt.length,kr=0,Vr=0,Xr,on;function ln(){if(kr>=cn)return Sr;if(on)return on=!1,qt;var $n=kr;if(jt.charCodeAt($n)===34){for(var aa=$n;aa++<cn;)if(jt.charCodeAt(aa)===34){if(jt.charCodeAt(aa+1)!==34)break;++aa}kr=aa+2;var Sa=jt.charCodeAt(aa+1);return Sa===13?(on=!0,jt.charCodeAt(aa+2)===10&&++kr):Sa===10&&(on=!0),jt.slice($n+1,aa).replace(/""/g,'"')}for(;kr<cn;){var Sa=jt.charCodeAt(kr++),ua=1;if(Sa===10)on=!0;else if(Sa===13)on=!0,jt.charCodeAt(kr)===10&&(++kr,++ua);else if(Sa!==He)continue;return jt.slice($n,kr-ua)}return jt.slice($n)}for(;(Xr=ln())!==Sr;){for(var Zr=[];Xr!==qt&&Xr!==Sr;)Zr.push(Xr),Xr=ln();Kt&&(Zr=Kt(Zr,Vr++))==null||qr.push(Zr)}return qr},Ue.format=function(jt){if(Array.isArray(jt[0]))return Ue.formatRows(jt);var Kt=new O,qt=[];return jt.forEach(function(Sr){for(var qr in Sr)Kt.has(qr)||qt.push(Kt.add(qr))}),[qt.map(Lt).join(he)].concat(jt.map(function(Sr){return qt.map(function(qr){return Lt(Sr[qr])}).join(he)})).join(`
`)},Ue.formatRows=function(jt){return jt.map(vt).join(`
`)};function vt(jt){return jt.map(Lt).join(he)}function Lt(jt){return Ie.test(jt)?'"'+jt.replace(/\"/g,'""')+'"':jt}return Ue},s.csv=s.dsv(",","text/csv"),s.tsv=s.dsv("	","text/tab-separated-values");var Gr,Rr,Ct,tr,Lr=this[H(this,"requestAnimationFrame")]||function(he){setTimeout(he,17)};s.timer=function(){Nr.apply(this,arguments)};function Nr(he,we,Ie){var He=arguments.length;He<2&&(we=0),He<3&&(Ie=Date.now());var Ue=Ie+we,Ze={c:he,t:Ue,n:null};return Rr?Rr.n=Ze:Gr=Ze,Rr=Ze,Ct||(tr=clearTimeout(tr),Ct=1,Lr(Tn)),Ze}function Tn(){var he=rn(),we=kn()-he;we>24?(isFinite(we)&&(clearTimeout(tr),tr=setTimeout(Tn,we)),Ct=0):(Ct=1,Lr(Tn))}s.timer.flush=function(){rn(),kn()};function rn(){for(var he=Date.now(),we=Gr;we;)he>=we.t&&we.c(he-we.t)&&(we.c=null),we=we.n;return he}function kn(){for(var he,we=Gr,Ie=1/0;we;)we.c?(we.t<Ie&&(Ie=we.t),we=(he=we).n):we=he?he.n=we.n:Gr=we.n;return Rr=he,Ie}s.round=function(he,we){return we?Math.round(he*(we=Math.pow(10,we)))/we:Math.round(he)},s.geom={};function Cn(he){return he[0]}function oa(he){return he[1]}s.geom.hull=function(he){var we=Cn,Ie=oa;if(arguments.length)return He(he);function He(Ue){if(Ue.length<3)return[];var Ze=nt(we),xt=nt(Ie),vt,Lt=Ue.length,jt=[],Kt=[];for(vt=0;vt<Lt;vt++)jt.push([+Ze.call(this,Ue[vt],vt),+xt.call(this,Ue[vt],vt),vt]);for(jt.sort(Oa),vt=0;vt<Lt;vt++)Kt.push([jt[vt][0],-jt[vt][1]]);var qt=ya(jt),Sr=ya(Kt),qr=Sr[0]===qt[0],cn=Sr[Sr.length-1]===qt[qt.length-1],kr=[];for(vt=qt.length-1;vt>=0;--vt)kr.push(Ue[jt[qt[vt]][2]]);for(vt=+qr;vt<Sr.length-cn;++vt)kr.push(Ue[jt[Sr[vt]][2]]);return kr}return He.x=function(Ue){return arguments.length?(we=Ue,He):we},He.y=function(Ue){return arguments.length?(Ie=Ue,He):Ie},He};function ya(he){for(var we=he.length,Ie=[0,1],He=2,Ue=2;Ue<we;Ue++){for(;He>1&&Bt(he[Ie[He-2]],he[Ie[He-1]],he[Ue])<=0;)--He;Ie[He++]=Ue}return Ie.slice(0,He)}function Oa(he,we){return he[0]-we[0]||he[1]-we[1]}s.geom.polygon=function(he){return fe(he,Xa),he};var Xa=s.geom.polygon.prototype=[];Xa.area=function(){for(var he=-1,we=this.length,Ie,He=this[we-1],Ue=0;++he<we;)Ie=He,He=this[he],Ue+=Ie[1]*He[0]-Ie[0]*He[1];return Ue*.5},Xa.centroid=function(he){var we=-1,Ie=this.length,He=0,Ue=0,Ze,xt=this[Ie-1],vt;for(arguments.length||(he=-1/(6*this.area()));++we<Ie;)Ze=xt,xt=this[we],vt=Ze[0]*xt[1]-xt[0]*Ze[1],He+=(Ze[0]+xt[0])*vt,Ue+=(Ze[1]+xt[1])*vt;return[He*he,Ue*he]},Xa.clip=function(he){for(var we,Ie=Ar(he),He=-1,Ue=this.length-Ar(this),Ze,xt,vt=this[Ue-1],Lt,jt,Kt;++He<Ue;){for(we=he.slice(),he.length=0,Lt=this[He],jt=we[(xt=we.length-Ie)-1],Ze=-1;++Ze<xt;)Kt=we[Ze],za(Kt,vt,Lt)?(za(jt,vt,Lt)||he.push(Pa(jt,Kt,vt,Lt)),he.push(Kt)):za(jt,vt,Lt)&&he.push(Pa(jt,Kt,vt,Lt)),jt=Kt;Ie&&he.push(he[0]),vt=Lt}return he};function za(he,we,Ie){return(Ie[0]-we[0])*(he[1]-we[1])<(Ie[1]-we[1])*(he[0]-we[0])}function Pa(he,we,Ie,He){var Ue=he[0],Ze=Ie[0],xt=we[0]-Ue,vt=He[0]-Ze,Lt=he[1],jt=Ie[1],Kt=we[1]-Lt,qt=He[1]-jt,Sr=(vt*(Lt-jt)-qt*(Ue-Ze))/(qt*xt-vt*Kt);return[Ue+Sr*xt,Lt+Sr*Kt]}function Ar(he){var we=he[0],Ie=he[he.length-1];return!(we[0]-Ie[0]||we[1]-Ie[1])}var nn,vn,Mn,Gn=[],la,na,Nn=[];function Kn(){ca(this),this.edge=this.site=this.circle=null}function Va(he){var we=Gn.pop()||new Kn;return we.site=he,we}function mi(he){xr(he),Mn.remove(he),Gn.push(he),ca(he)}function Nt(he){var we=he.circle,Ie=we.x,He=we.cy,Ue={x:Ie,y:He},Ze=he.P,xt=he.N,vt=[he];mi(he);for(var Lt=Ze;Lt.circle&&p(Ie-Lt.circle.x)<ht&&p(He-Lt.circle.cy)<ht;)Ze=Lt.P,vt.unshift(Lt),mi(Lt),Lt=Ze;vt.unshift(Lt),xr(Lt);for(var jt=xt;jt.circle&&p(Ie-jt.circle.x)<ht&&p(He-jt.circle.cy)<ht;)xt=jt.N,vt.push(jt),mi(jt),jt=xt;vt.push(jt),xr(jt);var Kt=vt.length,qt;for(qt=1;qt<Kt;++qt)jt=vt[qt],Lt=vt[qt-1],sa(jt.edge,Lt.site,jt.site,Ue);Lt=vt[0],jt=vt[Kt-1],jt.edge=Sn(Lt.site,jt.site,null,Ue),br(Lt),br(jt)}function yr(he){for(var we=he.x,Ie=he.y,He,Ue,Ze,xt,vt=Mn._;vt;)if(Ze=fn(vt,Ie)-we,Ze>ht)vt=vt.L;else if(xt=we-mn(vt,Ie),xt>ht){if(!vt.R){He=vt;break}vt=vt.R}else{Ze>-ht?(He=vt.P,Ue=vt):xt>-ht?(He=vt,Ue=vt.N):He=Ue=vt;break}var Lt=Va(he);if(Mn.insert(He,Lt),!(!He&&!Ue)){if(He===Ue){xr(He),Ue=Va(He.site),Mn.insert(Lt,Ue),Lt.edge=Ue.edge=Sn(He.site,Lt.site),br(He),br(Ue);return}if(!Ue){Lt.edge=Sn(He.site,Lt.site);return}xr(He),xr(Ue);var jt=He.site,Kt=jt.x,qt=jt.y,Sr=he.x-Kt,qr=he.y-qt,cn=Ue.site,kr=cn.x-Kt,Vr=cn.y-qt,Xr=2*(Sr*Vr-qr*kr),on=Sr*Sr+qr*qr,ln=kr*kr+Vr*Vr,Zr={x:(Vr*on-qr*ln)/Xr+Kt,y:(Sr*ln-kr*on)/Xr+qt};sa(Ue.edge,jt,cn,Zr),Lt.edge=Sn(jt,he,null,Zr),Ue.edge=Sn(he,cn,null,Zr),br(He),br(Ue)}}function fn(he,we){var Ie=he.site,He=Ie.x,Ue=Ie.y,Ze=Ue-we;if(!Ze)return He;var xt=he.P;if(!xt)return-1/0;Ie=xt.site;var vt=Ie.x,Lt=Ie.y,jt=Lt-we;if(!jt)return vt;var Kt=vt-He,qt=1/Ze-1/jt,Sr=Kt/jt;return qt?(-Sr+Math.sqrt(Sr*Sr-2*qt*(Kt*Kt/(-2*jt)-Lt+jt/2+Ue-Ze/2)))/qt+He:(He+vt)/2}function mn(he,we){var Ie=he.N;if(Ie)return fn(Ie,we);var He=he.site;return He.y===we?He.x:1/0}function gn(he){this.site=he,this.edges=[]}gn.prototype.prepare=function(){for(var he=this.edges,we=he.length,Ie;we--;)Ie=he[we].edge,(!Ie.b||!Ie.a)&&he.splice(we,1);return he.sort(En),he.length};function Dn(he){for(var we=he[0][0],Ie=he[1][0],He=he[0][1],Ue=he[1][1],Ze,xt,vt,Lt,jt=vn,Kt=jt.length,qt,Sr,qr,cn,kr,Vr;Kt--;)if(qt=jt[Kt],!(!qt||!qt.prepare()))for(qr=qt.edges,cn=qr.length,Sr=0;Sr<cn;)Vr=qr[Sr].end(),vt=Vr.x,Lt=Vr.y,kr=qr[++Sr%cn].start(),Ze=kr.x,xt=kr.y,(p(vt-Ze)>ht||p(Lt-xt)>ht)&&(qr.splice(Sr,0,new ma(Zn(qt.site,Vr,p(vt-we)<ht&&Ue-Lt>ht?{x:we,y:p(Ze-we)<ht?xt:Ue}:p(Lt-Ue)<ht&&Ie-vt>ht?{x:p(xt-Ue)<ht?Ze:Ie,y:Ue}:p(vt-Ie)<ht&&Lt-He>ht?{x:Ie,y:p(Ze-Ie)<ht?xt:He}:p(Lt-He)<ht&&vt-we>ht?{x:p(xt-He)<ht?Ze:we,y:He}:null),qt.site,null)),++cn)}function En(he,we){return we.angle-he.angle}function dn(){ca(this),this.x=this.y=this.arc=this.site=this.cy=null}function br(he){var we=he.P,Ie=he.N;if(!(!we||!Ie)){var He=we.site,Ue=he.site,Ze=Ie.site;if(He!==Ze){var xt=Ue.x,vt=Ue.y,Lt=He.x-xt,jt=He.y-vt,Kt=Ze.x-xt,Vr=Ze.y-vt,qt=2*(Lt*Vr-jt*Kt);if(!(qt>=-Ke)){var Sr=Lt*Lt+jt*jt,qr=Kt*Kt+Vr*Vr,cn=(Vr*Sr-jt*qr)/qt,kr=(Lt*qr-Kt*Sr)/qt,Vr=kr+vt,Xr=Nn.pop()||new dn;Xr.arc=he,Xr.site=Ue,Xr.x=cn+xt,Xr.y=Vr+Math.sqrt(cn*cn+kr*kr),Xr.cy=Vr,he.circle=Xr;for(var on=null,ln=na._;ln;)if(Xr.y<ln.y||Xr.y===ln.y&&Xr.x<=ln.x)if(ln.L)ln=ln.L;else{on=ln.P;break}else if(ln.R)ln=ln.R;else{on=ln;break}na.insert(on,Xr),on||(la=Xr)}}}}function xr(he){var we=he.circle;we&&(we.P||(la=we.N),na.remove(we),Nn.push(we),ca(we),he.circle=null)}function Fr(he,we,Ie,He){return function(Ue){var Ze=Ue.a,xt=Ue.b,vt=Ze.x,Lt=Ze.y,jt=xt.x,Kt=xt.y,qt=0,Sr=1,qr=jt-vt,cn=Kt-Lt,kr;if(kr=he-vt,!(!qr&&kr>0)){if(kr/=qr,qr<0){if(kr<qt)return;kr<Sr&&(Sr=kr)}else if(qr>0){if(kr>Sr)return;kr>qt&&(qt=kr)}if(kr=Ie-vt,!(!qr&&kr<0)){if(kr/=qr,qr<0){if(kr>Sr)return;kr>qt&&(qt=kr)}else if(qr>0){if(kr<qt)return;kr<Sr&&(Sr=kr)}if(kr=we-Lt,!(!cn&&kr>0)){if(kr/=cn,cn<0){if(kr<qt)return;kr<Sr&&(Sr=kr)}else if(cn>0){if(kr>Sr)return;kr>qt&&(qt=kr)}if(kr=He-Lt,!(!cn&&kr<0)){if(kr/=cn,cn<0){if(kr>Sr)return;kr>qt&&(qt=kr)}else if(cn>0){if(kr<qt)return;kr<Sr&&(Sr=kr)}return qt>0&&(Ue.a={x:vt+qt*qr,y:Lt+qt*cn}),Sr<1&&(Ue.b={x:vt+Sr*qr,y:Lt+Sr*cn}),Ue}}}}}}function bn(he){for(var we=nn,Ie=Fr(he[0][0],he[0][1],he[1][0],he[1][1]),He=we.length,Ue;He--;)Ue=we[He],(!Hn(Ue,he)||!Ie(Ue)||p(Ue.a.x-Ue.b.x)<ht&&p(Ue.a.y-Ue.b.y)<ht)&&(Ue.a=Ue.b=null,we.splice(He,1))}function Hn(he,we){var Ie=he.b;if(Ie)return!0;var He=he.a,Ue=we[0][0],Ze=we[1][0],xt=we[0][1],vt=we[1][1],Lt=he.l,jt=he.r,Kt=Lt.x,qt=Lt.y,Sr=jt.x,qr=jt.y,cn=(Kt+Sr)/2,kr=(qt+qr)/2,Vr,Xr;if(qr===qt){if(cn<Ue||cn>=Ze)return;if(Kt>Sr){if(!He)He={x:cn,y:xt};else if(He.y>=vt)return;Ie={x:cn,y:vt}}else{if(!He)He={x:cn,y:vt};else if(He.y<xt)return;Ie={x:cn,y:xt}}}else if(Vr=(Kt-Sr)/(qr-qt),Xr=kr-Vr*cn,Vr<-1||Vr>1)if(Kt>Sr){if(!He)He={x:(xt-Xr)/Vr,y:xt};else if(He.y>=vt)return;Ie={x:(vt-Xr)/Vr,y:vt}}else{if(!He)He={x:(vt-Xr)/Vr,y:vt};else if(He.y<xt)return;Ie={x:(xt-Xr)/Vr,y:xt}}else if(qt<qr){if(!He)He={x:Ue,y:Vr*Ue+Xr};else if(He.x>=Ze)return;Ie={x:Ze,y:Vr*Ze+Xr}}else{if(!He)He={x:Ze,y:Vr*Ze+Xr};else if(He.x<Ue)return;Ie={x:Ue,y:Vr*Ue+Xr}}return he.a=He,he.b=Ie,!0}function ra(he,we){this.l=he,this.r=we,this.a=this.b=null}function Sn(he,we,Ie,He){var Ue=new ra(he,we);return nn.push(Ue),Ie&&sa(Ue,he,we,Ie),He&&sa(Ue,we,he,He),vn[he.i].edges.push(new ma(Ue,he,we)),vn[we.i].edges.push(new ma(Ue,we,he)),Ue}function Zn(he,we,Ie){var He=new ra(he,null);return He.a=we,He.b=Ie,nn.push(He),He}function sa(he,we,Ie,He){!he.a&&!he.b?(he.a=He,he.l=we,he.r=Ie):he.l===Ie?he.b=He:he.a=He}function ma(he,we,Ie){var He=he.a,Ue=he.b;this.edge=he,this.site=we,this.angle=Ie?Math.atan2(Ie.y-we.y,Ie.x-we.x):he.l===we?Math.atan2(Ue.x-He.x,He.y-Ue.y):Math.atan2(He.x-Ue.x,Ue.y-He.y)}ma.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function wa(){this._=null}function ca(he){he.U=he.C=he.L=he.R=he.P=he.N=null}wa.prototype={insert:function(he,we){var Ie,He,Ue;if(he){if(we.P=he,we.N=he.N,he.N&&(he.N.P=we),he.N=we,he.R){for(he=he.R;he.L;)he=he.L;he.L=we}else he.R=we;Ie=he}else this._?(he=ls(this._),we.P=null,we.N=he,he.P=he.L=we,Ie=he):(we.P=we.N=null,this._=we,Ie=null);for(we.L=we.R=null,we.U=Ie,we.C=!0,he=we;Ie&&Ie.C;)He=Ie.U,Ie===He.L?(Ue=He.R,Ue&&Ue.C?(Ie.C=Ue.C=!1,He.C=!0,he=He):(he===Ie.R&&(ka(this,Ie),he=Ie,Ie=he.U),Ie.C=!1,He.C=!0,Do(this,He))):(Ue=He.L,Ue&&Ue.C?(Ie.C=Ue.C=!1,He.C=!0,he=He):(he===Ie.L&&(Do(this,Ie),he=Ie,Ie=he.U),Ie.C=!1,He.C=!0,ka(this,He))),Ie=he.U;this._.C=!1},remove:function(he){he.N&&(he.N.P=he.P),he.P&&(he.P.N=he.N),he.N=he.P=null;var we=he.U,Ie,He=he.L,Ue=he.R,Ze,xt;if(He?Ue?Ze=ls(Ue):Ze=He:Ze=Ue,we?we.L===he?we.L=Ze:we.R=Ze:this._=Ze,He&&Ue?(xt=Ze.C,Ze.C=he.C,Ze.L=He,He.U=Ze,Ze!==Ue?(we=Ze.U,Ze.U=he.U,he=Ze.R,we.L=he,Ze.R=Ue,Ue.U=Ze):(Ze.U=we,we=Ze,he=Ze.R)):(xt=he.C,he=Ze),he&&(he.U=we),!xt){if(he&&he.C){he.C=!1;return}do{if(he===this._)break;if(he===we.L){if(Ie=we.R,Ie.C&&(Ie.C=!1,we.C=!0,ka(this,we),Ie=we.R),Ie.L&&Ie.L.C||Ie.R&&Ie.R.C){(!Ie.R||!Ie.R.C)&&(Ie.L.C=!1,Ie.C=!0,Do(this,Ie),Ie=we.R),Ie.C=we.C,we.C=Ie.R.C=!1,ka(this,we),he=this._;break}}else if(Ie=we.L,Ie.C&&(Ie.C=!1,we.C=!0,Do(this,we),Ie=we.L),Ie.L&&Ie.L.C||Ie.R&&Ie.R.C){(!Ie.L||!Ie.L.C)&&(Ie.R.C=!1,Ie.C=!0,ka(this,Ie),Ie=we.L),Ie.C=we.C,we.C=Ie.L.C=!1,Do(this,we),he=this._;break}Ie.C=!0,he=we,we=we.U}while(!he.C);he&&(he.C=!1)}}};function ka(he,we){var Ie=we,He=we.R,Ue=Ie.U;Ue?Ue.L===Ie?Ue.L=He:Ue.R=He:he._=He,He.U=Ue,Ie.U=He,Ie.R=He.L,Ie.R&&(Ie.R.U=Ie),He.L=Ie}function Do(he,we){var Ie=we,He=we.L,Ue=Ie.U;Ue?Ue.L===Ie?Ue.L=He:Ue.R=He:he._=He,He.U=Ue,Ie.U=He,Ie.L=He.R,Ie.L&&(Ie.L.U=Ie),He.R=Ie}function ls(he){for(;he.L;)he=he.L;return he}function Ts(he,we){var Ie=he.sort(Kl).pop(),He,Ue,Ze;for(nn=[],vn=new Array(he.length),Mn=new wa,na=new wa;;)if(Ze=la,Ie&&(!Ze||Ie.y<Ze.y||Ie.y===Ze.y&&Ie.x<Ze.x))(Ie.x!==He||Ie.y!==Ue)&&(vn[Ie.i]=new gn(Ie),yr(Ie),He=Ie.x,Ue=Ie.y),Ie=he.pop();else if(Ze)Nt(Ze.arc);else break;we&&(bn(we),Dn(we));var xt={cells:vn,edges:nn};return Mn=na=nn=vn=null,xt}function Kl(he,we){return we.y-he.y||we.x-he.x}s.geom.voronoi=function(he){var we=Cn,Ie=oa,He=we,Ue=Ie,Ze=hu;if(he)return xt(he);function xt(Lt){var jt=new Array(Lt.length),Kt=Ze[0][0],qt=Ze[0][1],Sr=Ze[1][0],qr=Ze[1][1];return Ts(vt(Lt),Ze).cells.forEach(function(cn,kr){var Vr=cn.edges,Xr=cn.site,on=jt[kr]=Vr.length?Vr.map(function(ln){var Zr=ln.start();return[Zr.x,Zr.y]}):Xr.x>=Kt&&Xr.x<=Sr&&Xr.y>=qt&&Xr.y<=qr?[[Kt,qr],[Sr,qr],[Sr,qt],[Kt,qt]]:[];on.point=Lt[kr]}),jt}function vt(Lt){return Lt.map(function(jt,Kt){return{x:Math.round(He(jt,Kt)/ht)*ht,y:Math.round(Ue(jt,Kt)/ht)*ht,i:Kt}})}return xt.links=function(Lt){return Ts(vt(Lt)).edges.filter(function(jt){return jt.l&&jt.r}).map(function(jt){return{source:Lt[jt.l.i],target:Lt[jt.r.i]}})},xt.triangles=function(Lt){var jt=[];return Ts(vt(Lt)).cells.forEach(function(Kt,qt){for(var Sr=Kt.site,qr=Kt.edges.sort(En),cn=-1,kr=qr.length,Vr,Xr=qr[kr-1].edge,on=Xr.l===Sr?Xr.r:Xr.l;++cn<kr;)Vr=on,Xr=qr[cn].edge,on=Xr.l===Sr?Xr.r:Xr.l,qt<Vr.i&&qt<on.i&&tf(Sr,Vr,on)<0&&jt.push([Lt[qt],Lt[Vr.i],Lt[on.i]])}),jt},xt.x=function(Lt){return arguments.length?(He=nt(we=Lt),xt):we},xt.y=function(Lt){return arguments.length?(Ue=nt(Ie=Lt),xt):Ie},xt.clipExtent=function(Lt){return arguments.length?(Ze=Lt==null?hu:Lt,xt):Ze===hu?null:Ze},xt.size=function(Lt){return arguments.length?xt.clipExtent(Lt&&[[0,0],Lt]):Ze===hu?null:Ze&&Ze[1]},xt};var hu=[[-1e6,-1e6],[1e6,1e6]];function tf(he,we,Ie){return(he.x-Ie.x)*(we.y-he.y)-(he.x-we.x)*(Ie.y-he.y)}s.geom.delaunay=function(he){return s.geom.voronoi().triangles(he)},s.geom.quadtree=function(he,we,Ie,He,Ue){var Ze=Cn,xt=oa,vt;if(vt=arguments.length)return Ze=Ai,xt=Ol,vt===3&&(Ue=Ie,He=we,Ie=we=0),Lt(he);function Lt(jt){var Kt,qt=nt(Ze),Sr=nt(xt),qr,cn,kr,Vr,Xr,on,ln,Zr;if(we!=null)Xr=we,on=Ie,ln=He,Zr=Ue;else if(ln=Zr=-(Xr=on=1/0),qr=[],cn=[],Vr=jt.length,vt)for(kr=0;kr<Vr;++kr)Kt=jt[kr],Kt.x<Xr&&(Xr=Kt.x),Kt.y<on&&(on=Kt.y),Kt.x>ln&&(ln=Kt.x),Kt.y>Zr&&(Zr=Kt.y),qr.push(Kt.x),cn.push(Kt.y);else for(kr=0;kr<Vr;++kr){var $n=+qt(Kt=jt[kr],kr),aa=+Sr(Kt,kr);$n<Xr&&(Xr=$n),aa<on&&(on=aa),$n>ln&&(ln=$n),aa>Zr&&(Zr=aa),qr.push($n),cn.push(aa)}var Sa=ln-Xr,ua=Zr-on;Sa>ua?Zr=on+Sa:ln=Xr+ua;function La(Fa,ai,ki,Po,Xi,va,ci,Ja){if(!(isNaN(ki)||isNaN(Po)))if(Fa.leaf){var Ni=Fa.x,pi=Fa.y;if(Ni!=null)if(p(Ni-ki)+p(pi-Po)<.01)ha(Fa,ai,ki,Po,Xi,va,ci,Ja);else{var Mo=Fa.point;Fa.x=Fa.y=Fa.point=null,ha(Fa,Mo,Ni,pi,Xi,va,ci,Ja),ha(Fa,ai,ki,Po,Xi,va,ci,Ja)}else Fa.x=ki,Fa.y=Po,Fa.point=ai}else ha(Fa,ai,ki,Po,Xi,va,ci,Ja)}function ha(Fa,ai,ki,Po,Xi,va,ci,Ja){var Ni=(Xi+ci)*.5,pi=(va+Ja)*.5,Mo=ki>=Ni,po=Po>=pi,zo=po<<1|Mo;Fa.leaf=!1,Fa=Fa.nodes[zo]||(Fa.nodes[zo]=xl()),Mo?Xi=Ni:ci=Ni,po?va=pi:Ja=pi,La(Fa,ai,ki,Po,Xi,va,ci,Ja)}var Wa=xl();if(Wa.add=function(Fa){La(Wa,Fa,+qt(Fa,++kr),+Sr(Fa,kr),Xr,on,ln,Zr)},Wa.visit=function(Fa){to(Fa,Wa,Xr,on,ln,Zr)},Wa.find=function(Fa){return Xo(Wa,Fa[0],Fa[1],Xr,on,ln,Zr)},kr=-1,we==null){for(;++kr<Vr;)La(Wa,jt[kr],qr[kr],cn[kr],Xr,on,ln,Zr);--kr}else jt.forEach(Wa.add);return qr=cn=jt=Kt=null,Wa}return Lt.x=function(jt){return arguments.length?(Ze=jt,Lt):Ze},Lt.y=function(jt){return arguments.length?(xt=jt,Lt):xt},Lt.extent=function(jt){return arguments.length?(jt==null?we=Ie=He=Ue=null:(we=+jt[0][0],Ie=+jt[0][1],He=+jt[1][0],Ue=+jt[1][1]),Lt):we==null?null:[[we,Ie],[He,Ue]]},Lt.size=function(jt){return arguments.length?(jt==null?we=Ie=He=Ue=null:(we=Ie=0,He=+jt[0],Ue=+jt[1]),Lt):we==null?null:[He-we,Ue-Ie]},Lt};function Ai(he){return he.x}function Ol(he){return he.y}function xl(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function to(he,we,Ie,He,Ue,Ze){if(!he(we,Ie,He,Ue,Ze)){var xt=(Ie+Ue)*.5,vt=(He+Ze)*.5,Lt=we.nodes;Lt[0]&&to(he,Lt[0],Ie,He,xt,vt),Lt[1]&&to(he,Lt[1],xt,He,Ue,vt),Lt[2]&&to(he,Lt[2],Ie,vt,xt,Ze),Lt[3]&&to(he,Lt[3],xt,vt,Ue,Ze)}}function Xo(he,we,Ie,He,Ue,Ze,xt){var vt=1/0,Lt;return function jt(Kt,qt,Sr,qr,cn){if(!(qt>Ze||Sr>xt||qr<He||cn<Ue)){if(kr=Kt.point){var kr,Vr=we-Kt.x,Xr=Ie-Kt.y,on=Vr*Vr+Xr*Xr;if(on<vt){var ln=Math.sqrt(vt=on);He=we-ln,Ue=Ie-ln,Ze=we+ln,xt=Ie+ln,Lt=kr}}for(var Zr=Kt.nodes,$n=(qt+qr)*.5,aa=(Sr+cn)*.5,Sa=we>=$n,ua=Ie>=aa,La=ua<<1|Sa,ha=La+4;La<ha;++La)if(Kt=Zr[La&3])switch(La&3){case 0:jt(Kt,qt,Sr,$n,aa);break;case 1:jt(Kt,$n,Sr,qr,aa);break;case 2:jt(Kt,qt,aa,$n,cn);break;case 3:jt(Kt,$n,aa,qr,cn);break}}}(he,He,Ue,Ze,xt),Lt}s.interpolateRgb=vu;function vu(he,we){he=s.rgb(he),we=s.rgb(we);var Ie=he.r,He=he.g,Ue=he.b,Ze=we.r-Ie,xt=we.g-He,vt=we.b-Ue;return function(Lt){return"#"+$r(Math.round(Ie+Ze*Lt))+$r(Math.round(He+xt*Lt))+$r(Math.round(Ue+vt*Lt))}}s.interpolateObject=$s;function $s(he,we){var Ie={},He={},Ue;for(Ue in he)Ue in we?Ie[Ue]=Ao(he[Ue],we[Ue]):He[Ue]=he[Ue];for(Ue in we)Ue in he||(He[Ue]=we[Ue]);return function(Ze){for(Ue in Ie)He[Ue]=Ie[Ue](Ze);return He}}s.interpolateNumber=$i;function $i(he,we){return he=+he,we=+we,function(Ie){return he*(1-Ie)+we*Ie}}s.interpolateString=Jl;function Jl(he,we){var Ie=ho.lastIndex=Ji.lastIndex=0,He,Ue,Ze,xt=-1,vt=[],Lt=[];for(he=he+"",we=we+"";(He=ho.exec(he))&&(Ue=Ji.exec(we));)(Ze=Ue.index)>Ie&&(Ze=we.slice(Ie,Ze),vt[xt]?vt[xt]+=Ze:vt[++xt]=Ze),(He=He[0])===(Ue=Ue[0])?vt[xt]?vt[xt]+=Ue:vt[++xt]=Ue:(vt[++xt]=null,Lt.push({i:xt,x:$i(He,Ue)})),Ie=Ji.lastIndex;return Ie<we.length&&(Ze=we.slice(Ie),vt[xt]?vt[xt]+=Ze:vt[++xt]=Ze),vt.length<2?Lt[0]?(we=Lt[0].x,function(jt){return we(jt)+""}):function(){return we}:(we=Lt.length,function(jt){for(var Kt=0,qt;Kt<we;++Kt)vt[(qt=Lt[Kt]).i]=qt.x(jt);return vt.join("")})}var ho=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ji=new RegExp(ho.source,"g");s.interpolate=Ao;function Ao(he,we){for(var Ie=s.interpolators.length,He;--Ie>=0&&!(He=s.interpolators[Ie](he,we)););return He}s.interpolators=[function(he,we){var Ie=typeof we;return(Ie==="string"?Cr.has(we.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(we)?vu:Jl:we instanceof Gt?vu:Array.isArray(we)?vo:Ie==="object"&&isNaN(we)?$s:$i)(he,we)}],s.interpolateArray=vo;function vo(he,we){var Ie=[],He=[],Ue=he.length,Ze=we.length,xt=Math.min(he.length,we.length),vt;for(vt=0;vt<xt;++vt)Ie.push(Ao(he[vt],we[vt]));for(;vt<Ue;++vt)He[vt]=he[vt];for(;vt<Ze;++vt)He[vt]=we[vt];return function(Lt){for(vt=0;vt<xt;++vt)He[vt]=Ie[vt](Lt);return He}}var Ps=function(){return R},zl=s.map({linear:Ps,poly:nl,quad:function(){return Zo},cubic:function(){return oc},sin:function(){return Ru},exp:function(){return sc},circle:function(){return lc},elastic:Nl,back:Du,bounce:function(){return al}}),Cf=s.map({in:R,out:Lf,"in-out":bl,"out-in":function(he){return bl(Lf(he))}});s.ease=function(he){var we=he.indexOf("-"),Ie=we>=0?he.slice(0,we):he,He=we>=0?he.slice(we+1):"in";return Ie=zl.get(Ie)||Ps,He=Cf.get(He)||R,As(He(Ie.apply(null,o.call(arguments,1))))};function As(he){return function(we){return we<=0?0:we>=1?1:he(we)}}function Lf(he){return function(we){return 1-he(1-we)}}function bl(he){return function(we){return .5*(we<.5?he(2*we):2-he(2-2*we))}}function Zo(he){return he*he}function oc(he){return he*he*he}function _l(he){if(he<=0)return 0;if(he>=1)return 1;var we=he*he,Ie=we*he;return 4*(he<.5?Ie:3*(he-we)+Ie-.75)}function nl(he){return function(we){return Math.pow(we,he)}}function Ru(he){return 1-Math.cos(he*ut)}function sc(he){return Math.pow(2,10*(he-1))}function lc(he){return 1-Math.sqrt(1-he*he)}function Nl(he,we){var Ie;return arguments.length<2&&(we=.45),arguments.length?Ie=we/We*Math.asin(1/he):(he=1,Ie=we/4),function(He){return 1+he*Math.pow(2,-10*He)*Math.sin((He-Ie)*We/we)}}function Du(he){return he||(he=1.70158),function(we){return we*we*((he+1)*we-he)}}function al(he){return he<1/2.75?7.5625*he*he:he<2/2.75?7.5625*(he-=1.5/2.75)*he+.75:he<2.5/2.75?7.5625*(he-=2.25/2.75)*he+.9375:7.5625*(he-=2.625/2.75)*he+.984375}s.interpolateHcl=rf;function rf(he,we){he=s.hcl(he),we=s.hcl(we);var Ie=he.h,He=he.c,Ue=he.l,Ze=we.h-Ie,xt=we.c-He,vt=we.l-Ue;return isNaN(xt)&&(xt=0,He=isNaN(He)?we.c:He),isNaN(Ze)?(Ze=0,Ie=isNaN(Ie)?we.h:Ie):Ze>180?Ze-=360:Ze<-180&&(Ze+=360),function(Lt){return ke(Ie+Ze*Lt,He+xt*Lt,Ue+vt*Lt)+""}}s.interpolateHsl=Ql;function Ql(he,we){he=s.hsl(he),we=s.hsl(we);var Ie=he.h,He=he.s,Ue=he.l,Ze=we.h-Ie,xt=we.s-He,vt=we.l-Ue;return isNaN(xt)&&(xt=0,He=isNaN(He)?we.s:He),isNaN(Ze)?(Ze=0,Ie=isNaN(Ie)?we.h:Ie):Ze>180?Ze-=360:Ze<-180&&(Ze+=360),function(Lt){return _r(Ie+Ze*Lt,He+xt*Lt,Ue+vt*Lt)+""}}s.interpolateLab=nf;function nf(he,we){he=s.lab(he),we=s.lab(we);var Ie=he.l,He=he.a,Ue=he.b,Ze=we.l-Ie,xt=we.a-He,vt=we.b-Ue;return function(Lt){return _t(Ie+Ze*Lt,He+xt*Lt,Ue+vt*Lt)+""}}s.interpolateRound=Pf;function Pf(he,we){return we-=he,function(Ie){return Math.round(he+we*Ie)}}s.transform=function(he){var we=y.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(Ie){if(Ie!=null){we.setAttribute("transform",Ie);var He=we.transform.baseVal.consolidate()}return new Fu(He?He.matrix:Ou)})(he)};function Fu(he){var we=[he.a,he.b],Ie=[he.c,he.d],He=Bl(we),Ue=uc(we,Ie),Ze=Bl(af(Ie,we,-Ue))||0;we[0]*Ie[1]<Ie[0]*we[1]&&(we[0]*=-1,we[1]*=-1,He*=-1,Ue*=-1),this.rotate=(He?Math.atan2(we[1],we[0]):Math.atan2(-Ie[0],Ie[1]))*Tt,this.translate=[he.e,he.f],this.scale=[He,Ze],this.skew=Ze?Math.atan2(Ue,Ze)*Tt:0}Fu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function uc(he,we){return he[0]*we[0]+he[1]*we[1]}function Bl(he){var we=Math.sqrt(uc(he,he));return we&&(he[0]/=we,he[1]/=we),we}function af(he,we,Ie){return he[0]+=Ie*we[0],he[1]+=Ie*we[1],he}var Ou={a:1,b:0,c:0,d:1,e:0,f:0};s.interpolateTransform=zu;function Ws(he){return he.length?he.pop()+",":""}function pu(he,we,Ie,He){if(he[0]!==we[0]||he[1]!==we[1]){var Ue=Ie.push("translate(",null,",",null,")");He.push({i:Ue-4,x:$i(he[0],we[0])},{i:Ue-2,x:$i(he[1],we[1])})}else(we[0]||we[1])&&Ie.push("translate("+we+")")}function of(he,we,Ie,He){he!==we?(he-we>180?we+=360:we-he>180&&(he+=360),He.push({i:Ie.push(Ws(Ie)+"rotate(",null,")")-2,x:$i(he,we)})):we&&Ie.push(Ws(Ie)+"rotate("+we+")")}function If(he,we,Ie,He){he!==we?He.push({i:Ie.push(Ws(Ie)+"skewX(",null,")")-2,x:$i(he,we)}):we&&Ie.push(Ws(Ie)+"skewX("+we+")")}function Rf(he,we,Ie,He){if(he[0]!==we[0]||he[1]!==we[1]){var Ue=Ie.push(Ws(Ie)+"scale(",null,",",null,")");He.push({i:Ue-4,x:$i(he[0],we[0])},{i:Ue-2,x:$i(he[1],we[1])})}else(we[0]!==1||we[1]!==1)&&Ie.push(Ws(Ie)+"scale("+we+")")}function zu(he,we){var Ie=[],He=[];return he=s.transform(he),we=s.transform(we),pu(he.translate,we.translate,Ie,He),of(he.rotate,we.rotate,Ie,He),If(he.skew,we.skew,Ie,He),Rf(he.scale,we.scale,Ie,He),he=we=null,function(Ue){for(var Ze=-1,xt=He.length,vt;++Ze<xt;)Ie[(vt=He[Ze]).i]=vt.x(Ue);return Ie.join("")}}function fc(he,we){return we=(we-=he=+he)||1/we,function(Ie){return(Ie-he)/we}}function Df(he,we){return we=(we-=he=+he)||1/we,function(Ie){return Math.max(0,Math.min(1,(Ie-he)/we))}}s.layout={},s.layout.bundle=function(){return function(he){for(var we=[],Ie=-1,He=he.length;++Ie<He;)we.push(Ss(he[Ie]));return we}};function Ss(he){for(var we=he.source,Ie=he.target,He=eu(we,Ie),Ue=[we];we!==He;)we=we.parent,Ue.push(we);for(var Ze=Ue.length;Ie!==He;)Ue.splice(Ze,0,Ie),Ie=Ie.parent;return Ue}function ql(he){for(var we=[],Ie=he.parent;Ie!=null;)we.push(he),he=Ie,Ie=Ie.parent;return we.push(he),we}function eu(he,we){if(he===we)return he;for(var Ie=ql(he),He=ql(we),Ue=Ie.pop(),Ze=He.pop(),xt=null;Ue===Ze;)xt=Ue,Ue=Ie.pop(),Ze=He.pop();return xt}s.layout.chord=function(){var he={},we,Ie,He,Ue,Ze=0,xt,vt,Lt;function jt(){var qt={},Sr=[],qr=s.range(Ue),cn=[],kr,Vr,Xr,on,ln;for(we=[],Ie=[],kr=0,on=-1;++on<Ue;){for(Vr=0,ln=-1;++ln<Ue;)Vr+=He[on][ln];Sr.push(Vr),cn.push(s.range(Ue)),kr+=Vr}for(xt&&qr.sort(function(Wa,Fa){return xt(Sr[Wa],Sr[Fa])}),vt&&cn.forEach(function(Wa,Fa){Wa.sort(function(ai,ki){return vt(He[Fa][ai],He[Fa][ki])})}),kr=(We-Ze*Ue)/kr,Vr=0,on=-1;++on<Ue;){for(Xr=Vr,ln=-1;++ln<Ue;){var Zr=qr[on],$n=cn[Zr][ln],aa=He[Zr][$n],Sa=Vr,ua=Vr+=aa*kr;qt[Zr+"-"+$n]={index:Zr,subindex:$n,startAngle:Sa,endAngle:ua,value:aa}}Ie[Zr]={index:Zr,startAngle:Xr,endAngle:Vr,value:Sr[Zr]},Vr+=Ze}for(on=-1;++on<Ue;)for(ln=on-1;++ln<Ue;){var La=qt[on+"-"+ln],ha=qt[ln+"-"+on];(La.value||ha.value)&&we.push(La.value<ha.value?{source:ha,target:La}:{source:La,target:ha})}Lt&&Kt()}function Kt(){we.sort(function(qt,Sr){return Lt((qt.source.value+qt.target.value)/2,(Sr.source.value+Sr.target.value)/2)})}return he.matrix=function(qt){return arguments.length?(Ue=(He=qt)&&He.length,we=Ie=null,he):He},he.padding=function(qt){return arguments.length?(Ze=qt,we=Ie=null,he):Ze},he.sortGroups=function(qt){return arguments.length?(xt=qt,we=Ie=null,he):xt},he.sortSubgroups=function(qt){return arguments.length?(vt=qt,we=null,he):vt},he.sortChords=function(qt){return arguments.length?(Lt=qt,we&&Kt(),he):Lt},he.chords=function(){return we||jt(),we},he.groups=function(){return Ie||jt(),Ie},he},s.layout.force=function(){var he={},we=s.dispatch("start","tick","end"),Ie,He=[1,1],Ue,Ze,xt=.9,vt=ol,Lt=Eo,jt=-30,Kt=du,qt=.1,Sr=.64,qr=[],cn=[],kr,Vr,Xr;function on(Zr){return function($n,aa,Sa,ua){if($n.point!==Zr){var La=$n.cx-Zr.x,ha=$n.cy-Zr.y,Wa=ua-aa,Fa=La*La+ha*ha;if(Wa*Wa/Sr<Fa){if(Fa<Kt){var ai=$n.charge/Fa;Zr.px-=La*ai,Zr.py-=ha*ai}return!0}if($n.point&&Fa&&Fa<Kt){var ai=$n.pointCharge/Fa;Zr.px-=La*ai,Zr.py-=ha*ai}}return!$n.charge}}he.tick=function(){if((Ze*=.99)<.005)return Ie=null,we.end({type:"end",alpha:Ze=0}),!0;var Zr=qr.length,$n=cn.length,aa,Sa,ua,La,ha,Wa,Fa,ai,ki;for(Sa=0;Sa<$n;++Sa)ua=cn[Sa],La=ua.source,ha=ua.target,ai=ha.x-La.x,ki=ha.y-La.y,(Wa=ai*ai+ki*ki)&&(Wa=Ze*Vr[Sa]*((Wa=Math.sqrt(Wa))-kr[Sa])/Wa,ai*=Wa,ki*=Wa,ha.x-=ai*(Fa=La.weight+ha.weight?La.weight/(La.weight+ha.weight):.5),ha.y-=ki*Fa,La.x+=ai*(Fa=1-Fa),La.y+=ki*Fa);if((Fa=Ze*qt)&&(ai=He[0]/2,ki=He[1]/2,Sa=-1,Fa))for(;++Sa<Zr;)ua=qr[Sa],ua.x+=(ai-ua.x)*Fa,ua.y+=(ki-ua.y)*Fa;if(jt)for(il(aa=s.geom.quadtree(qr),Ze,Xr),Sa=-1;++Sa<Zr;)(ua=qr[Sa]).fixed||aa.visit(on(ua));for(Sa=-1;++Sa<Zr;)ua=qr[Sa],ua.fixed?(ua.x=ua.px,ua.y=ua.py):(ua.x-=(ua.px-(ua.px=ua.x))*xt,ua.y-=(ua.py-(ua.py=ua.y))*xt);we.tick({type:"tick",alpha:Ze})},he.nodes=function(Zr){return arguments.length?(qr=Zr,he):qr},he.links=function(Zr){return arguments.length?(cn=Zr,he):cn},he.size=function(Zr){return arguments.length?(He=Zr,he):He},he.linkDistance=function(Zr){return arguments.length?(vt=typeof Zr=="function"?Zr:+Zr,he):vt},he.distance=he.linkDistance,he.linkStrength=function(Zr){return arguments.length?(Lt=typeof Zr=="function"?Zr:+Zr,he):Lt},he.friction=function(Zr){return arguments.length?(xt=+Zr,he):xt},he.charge=function(Zr){return arguments.length?(jt=typeof Zr=="function"?Zr:+Zr,he):jt},he.chargeDistance=function(Zr){return arguments.length?(Kt=Zr*Zr,he):Math.sqrt(Kt)},he.gravity=function(Zr){return arguments.length?(qt=+Zr,he):qt},he.theta=function(Zr){return arguments.length?(Sr=Zr*Zr,he):Math.sqrt(Sr)},he.alpha=function(Zr){return arguments.length?(Zr=+Zr,Ze?Zr>0?Ze=Zr:(Ie.c=null,Ie.t=NaN,Ie=null,we.end({type:"end",alpha:Ze=0})):Zr>0&&(we.start({type:"start",alpha:Ze=Zr}),Ie=Nr(he.tick)),he):Ze},he.start=function(){var Zr,$n=qr.length,aa=cn.length,Sa=He[0],ua=He[1],La,ha;for(Zr=0;Zr<$n;++Zr)(ha=qr[Zr]).index=Zr,ha.weight=0;for(Zr=0;Zr<aa;++Zr)ha=cn[Zr],typeof ha.source=="number"&&(ha.source=qr[ha.source]),typeof ha.target=="number"&&(ha.target=qr[ha.target]),++ha.source.weight,++ha.target.weight;for(Zr=0;Zr<$n;++Zr)ha=qr[Zr],isNaN(ha.x)&&(ha.x=Wa("x",Sa)),isNaN(ha.y)&&(ha.y=Wa("y",ua)),isNaN(ha.px)&&(ha.px=ha.x),isNaN(ha.py)&&(ha.py=ha.y);if(kr=[],typeof vt=="function")for(Zr=0;Zr<aa;++Zr)kr[Zr]=+vt.call(this,cn[Zr],Zr);else for(Zr=0;Zr<aa;++Zr)kr[Zr]=vt;if(Vr=[],typeof Lt=="function")for(Zr=0;Zr<aa;++Zr)Vr[Zr]=+Lt.call(this,cn[Zr],Zr);else for(Zr=0;Zr<aa;++Zr)Vr[Zr]=Lt;if(Xr=[],typeof jt=="function")for(Zr=0;Zr<$n;++Zr)Xr[Zr]=+jt.call(this,qr[Zr],Zr);else for(Zr=0;Zr<$n;++Zr)Xr[Zr]=jt;function Wa(Fa,ai){if(!La){for(La=new Array($n),Xi=0;Xi<$n;++Xi)La[Xi]=[];for(Xi=0;Xi<aa;++Xi){var ki=cn[Xi];La[ki.source.index].push(ki.target),La[ki.target.index].push(ki.source)}}for(var Po=La[Zr],Xi=-1,va=Po.length,ci;++Xi<va;)if(!isNaN(ci=Po[Xi][Fa]))return ci;return Math.random()*ai}return he.resume()},he.resume=function(){return he.alpha(.1)},he.stop=function(){return he.alpha(0)},he.drag=function(){if(Ue||(Ue=s.behavior.drag().origin(R).on("dragstart.force",sf).on("drag.force",ln).on("dragend.force",Ys)),!arguments.length)return Ue;this.on("mouseover.force",Ko).on("mouseout.force",Nu).call(Ue)};function ln(Zr){Zr.px=s.event.x,Zr.py=s.event.y,he.resume()}return s.rebind(he,we,"on")};function sf(he){he.fixed|=2}function Ys(he){he.fixed&=-7}function Ko(he){he.fixed|=4,he.px=he.x,he.py=he.y}function Nu(he){he.fixed&=-5}function il(he,we,Ie){var He=0,Ue=0;if(he.charge=0,!he.leaf)for(var Ze=he.nodes,xt=Ze.length,vt=-1,Lt;++vt<xt;)Lt=Ze[vt],Lt!=null&&(il(Lt,we,Ie),he.charge+=Lt.charge,He+=Lt.charge*Lt.cx,Ue+=Lt.charge*Lt.cy);if(he.point){he.leaf||(he.point.x+=Math.random()-.5,he.point.y+=Math.random()-.5);var jt=we*Ie[he.point.index];he.charge+=he.pointCharge=jt,He+=jt*he.point.x,Ue+=jt*he.point.y}he.cx=He/he.charge,he.cy=Ue/he.charge}var ol=20,Eo=1,du=1/0;s.layout.hierarchy=function(){var he=Bu,we=yu,Ie=tu;function He(Ue){var Ze=[Ue],xt=[],vt;for(Ue.depth=0;(vt=Ze.pop())!=null;)if(xt.push(vt),(jt=we.call(He,vt,vt.depth))&&(Lt=jt.length)){for(var Lt,jt,Kt;--Lt>=0;)Ze.push(Kt=jt[Lt]),Kt.parent=vt,Kt.depth=vt.depth+1;Ie&&(vt.value=0),vt.children=jt}else Ie&&(vt.value=+Ie.call(He,vt,vt.depth)||0),delete vt.children;return Xs(Ue,function(qt){var Sr,qr;he&&(Sr=qt.children)&&Sr.sort(he),Ie&&(qr=qt.parent)&&(qr.value+=qt.value)}),xt}return He.sort=function(Ue){return arguments.length?(he=Ue,He):he},He.children=function(Ue){return arguments.length?(we=Ue,He):we},He.value=function(Ue){return arguments.length?(Ie=Ue,He):Ie},He.revalue=function(Ue){return Ie&&(Ul(Ue,function(Ze){Ze.children&&(Ze.value=0)}),Xs(Ue,function(Ze){var xt;Ze.children||(Ze.value=+Ie.call(He,Ze,Ze.depth)||0),(xt=Ze.parent)&&(xt.value+=Ze.value)})),Ue},He};function gu(he,we){return s.rebind(he,we,"sort","children","value"),he.nodes=he,he.links=mu,he}function Ul(he,we){for(var Ie=[he];(he=Ie.pop())!=null;)if(we(he),(Ue=he.children)&&(He=Ue.length))for(var He,Ue;--He>=0;)Ie.push(Ue[He])}function Xs(he,we){for(var Ie=[he],He=[];(he=Ie.pop())!=null;)if(He.push(he),(xt=he.children)&&(Ze=xt.length))for(var Ue=-1,Ze,xt;++Ue<Ze;)Ie.push(xt[Ue]);for(;(he=He.pop())!=null;)we(he)}function yu(he){return he.children}function tu(he){return he.value}function Bu(he,we){return we.value-he.value}function mu(he){return s.merge(he.map(function(we){return(we.children||[]).map(function(Ie){return{source:we,target:Ie}})}))}s.layout.partition=function(){var he=s.layout.hierarchy(),we=[1,1];function Ie(Ze,xt,vt,Lt){var jt=Ze.children;if(Ze.x=xt,Ze.y=Ze.depth*Lt,Ze.dx=vt,Ze.dy=Lt,jt&&(qt=jt.length)){var Kt=-1,qt,Sr,qr;for(vt=Ze.value?vt/Ze.value:0;++Kt<qt;)Ie(Sr=jt[Kt],xt,qr=Sr.value*vt,Lt),xt+=qr}}function He(Ze){var xt=Ze.children,vt=0;if(xt&&(jt=xt.length))for(var Lt=-1,jt;++Lt<jt;)vt=Math.max(vt,He(xt[Lt]));return 1+vt}function Ue(Ze,xt){var vt=he.call(this,Ze,xt);return Ie(vt[0],0,we[0],we[1]/He(vt[0])),vt}return Ue.size=function(Ze){return arguments.length?(we=Ze,Ue):we},gu(Ue,he)},s.layout.pie=function(){var he=Number,we=Vl,Ie=0,He=We,Ue=0;function Ze(xt){var vt=xt.length,Lt=xt.map(function(on,ln){return+he.call(Ze,on,ln)}),jt=+(typeof Ie=="function"?Ie.apply(this,arguments):Ie),Kt=(typeof He=="function"?He.apply(this,arguments):He)-jt,qt=Math.min(Math.abs(Kt)/vt,+(typeof Ue=="function"?Ue.apply(this,arguments):Ue)),Sr=qt*(Kt<0?-1:1),qr=s.sum(Lt),cn=qr?(Kt-vt*Sr)/qr:0,kr=s.range(vt),Vr=[],Xr;return we!=null&&kr.sort(we===Vl?function(on,ln){return Lt[ln]-Lt[on]}:function(on,ln){return we(xt[on],xt[ln])}),kr.forEach(function(on){Vr[on]={data:xt[on],value:Xr=Lt[on],startAngle:jt,endAngle:jt+=Xr*cn+Sr,padAngle:qt}}),Vr}return Ze.value=function(xt){return arguments.length?(he=xt,Ze):he},Ze.sort=function(xt){return arguments.length?(we=xt,Ze):we},Ze.startAngle=function(xt){return arguments.length?(Ie=xt,Ze):Ie},Ze.endAngle=function(xt){return arguments.length?(He=xt,Ze):He},Ze.padAngle=function(xt){return arguments.length?(Ue=xt,Ze):Ue},Ze};var Vl={};s.layout.stack=function(){var he=R,we=xu,Ie=Hl,He=Uc,Ue=cc,Ze=Is;function xt(vt,Lt){if(!(cn=vt.length))return vt;var jt=vt.map(function(on,ln){return he.call(xt,on,ln)}),Kt=jt.map(function(on){return on.map(function(ln,Zr){return[Ue.call(xt,ln,Zr),Ze.call(xt,ln,Zr)]})}),qt=we.call(xt,Kt,Lt);jt=s.permute(jt,qt),Kt=s.permute(Kt,qt);var Sr=Ie.call(xt,Kt,Lt),qr=jt[0].length,cn,kr,Vr,Xr;for(Vr=0;Vr<qr;++Vr)for(He.call(xt,jt[0][Vr],Xr=Sr[Vr],Kt[0][Vr][1]),kr=1;kr<cn;++kr)He.call(xt,jt[kr][Vr],Xr+=Kt[kr-1][Vr][1],Kt[kr][Vr][1]);return vt}return xt.values=function(vt){return arguments.length?(he=vt,xt):he},xt.order=function(vt){return arguments.length?(we=typeof vt=="function"?vt:lf.get(vt)||xu,xt):we},xt.offset=function(vt){return arguments.length?(Ie=typeof vt=="function"?vt:ru.get(vt)||Hl,xt):Ie},xt.x=function(vt){return arguments.length?(Ue=vt,xt):Ue},xt.y=function(vt){return arguments.length?(Ze=vt,xt):Ze},xt.out=function(vt){return arguments.length?(He=vt,xt):He},xt};function cc(he){return he.x}function Is(he){return he.y}function Uc(he,we,Ie){he.y0=we,he.y=Ie}var lf=s.map({"inside-out":function(he){var we=he.length,Ie,He,Ue=he.map(bu),Ze=he.map(Ff),xt=s.range(we).sort(function(qt,Sr){return Ue[qt]-Ue[Sr]}),vt=0,Lt=0,jt=[],Kt=[];for(Ie=0;Ie<we;++Ie)He=xt[Ie],vt<Lt?(vt+=Ze[He],jt.push(He)):(Lt+=Ze[He],Kt.push(He));return Kt.reverse().concat(jt)},reverse:function(he){return s.range(he.length).reverse()},default:xu}),ru=s.map({silhouette:function(he){var we=he.length,Ie=he[0].length,He=[],Ue=0,Ze,xt,vt,Lt=[];for(xt=0;xt<Ie;++xt){for(Ze=0,vt=0;Ze<we;Ze++)vt+=he[Ze][xt][1];vt>Ue&&(Ue=vt),He.push(vt)}for(xt=0;xt<Ie;++xt)Lt[xt]=(Ue-He[xt])/2;return Lt},wiggle:function(he){var we=he.length,Ie=he[0],He=Ie.length,Ue,Ze,xt,vt,Lt,jt,Kt,qt,Sr,qr=[];for(qr[0]=qt=Sr=0,Ze=1;Ze<He;++Ze){for(Ue=0,vt=0;Ue<we;++Ue)vt+=he[Ue][Ze][1];for(Ue=0,Lt=0,Kt=Ie[Ze][0]-Ie[Ze-1][0];Ue<we;++Ue){for(xt=0,jt=(he[Ue][Ze][1]-he[Ue][Ze-1][1])/(2*Kt);xt<Ue;++xt)jt+=(he[xt][Ze][1]-he[xt][Ze-1][1])/Kt;Lt+=jt*he[Ue][Ze][1]}qr[Ze]=qt-=vt?Lt/vt*Kt:0,qt<Sr&&(Sr=qt)}for(Ze=0;Ze<He;++Ze)qr[Ze]-=Sr;return qr},expand:function(he){var we=he.length,Ie=he[0].length,He=1/we,Ue,Ze,xt,vt=[];for(Ze=0;Ze<Ie;++Ze){for(Ue=0,xt=0;Ue<we;Ue++)xt+=he[Ue][Ze][1];if(xt)for(Ue=0;Ue<we;Ue++)he[Ue][Ze][1]/=xt;else for(Ue=0;Ue<we;Ue++)he[Ue][Ze][1]=He}for(Ze=0;Ze<Ie;++Ze)vt[Ze]=0;return vt},zero:Hl});function xu(he){return s.range(he.length)}function Hl(he){for(var we=-1,Ie=he[0].length,He=[];++we<Ie;)He[we]=0;return He}function bu(he){for(var we=1,Ie=0,He=he[0][1],Ue,Ze=he.length;we<Ze;++we)(Ue=he[we][1])>He&&(Ie=we,He=Ue);return Ie}function Ff(he){return he.reduce(Of,0)}function Of(he,we){return he+we[1]}s.layout.histogram=function(){var he=!0,we=Number,Ie=nu,He=Vc;function Ue(Ze,Sr){for(var vt=[],Lt=Ze.map(we,this),jt=Ie.call(this,Lt,Sr),Kt=He.call(this,jt,Lt,Sr),qt,Sr=-1,qr=Lt.length,cn=Kt.length-1,kr=he?1:1/qr,Vr;++Sr<cn;)qt=vt[Sr]=[],qt.dx=Kt[Sr+1]-(qt.x=Kt[Sr]),qt.y=0;if(cn>0)for(Sr=-1;++Sr<qr;)Vr=Lt[Sr],Vr>=jt[0]&&Vr<=jt[1]&&(qt=vt[s.bisect(Kt,Vr,1,cn)-1],qt.y+=kr,qt.push(Ze[Sr]));return vt}return Ue.value=function(Ze){return arguments.length?(we=Ze,Ue):we},Ue.range=function(Ze){return arguments.length?(Ie=nt(Ze),Ue):Ie},Ue.bins=function(Ze){return arguments.length?(He=typeof Ze=="number"?function(xt){return Wi(xt,Ze)}:nt(Ze),Ue):He},Ue.frequency=function(Ze){return arguments.length?(he=!!Ze,Ue):he},Ue};function Vc(he,we){return Wi(he,Math.ceil(Math.log(we.length)/Math.LN2+1))}function Wi(he,we){for(var Ie=-1,He=+he[0],Ue=(he[1]-He)/we,Ze=[];++Ie<=we;)Ze[Ie]=Ue*Ie+He;return Ze}function nu(he){return[s.min(he),s.max(he)]}s.layout.pack=function(){var he=s.layout.hierarchy().sort(Gl),we=0,Ie=[1,1],He;function Ue(Ze,xt){var vt=he.call(this,Ze,xt),Lt=vt[0],jt=Ie[0],Kt=Ie[1],qt=He==null?Math.sqrt:typeof He=="function"?He:function(){return He};if(Lt.x=Lt.y=0,Xs(Lt,function(qr){qr.r=+qt(qr.value)}),Xs(Lt,ko),we){var Sr=we*(He?1:Math.max(2*Lt.r/jt,2*Lt.r/Kt))/2;Xs(Lt,function(qr){qr.r+=Sr}),Xs(Lt,ko),Xs(Lt,function(qr){qr.r-=Sr})}return wl(Lt,jt/2,Kt/2,He?1:1/Math.max(2*Lt.r/jt,2*Lt.r/Kt)),vt}return Ue.size=function(Ze){return arguments.length?(Ie=Ze,Ue):Ie},Ue.radius=function(Ze){return arguments.length?(He=Ze==null||typeof Ze=="function"?Ze:+Ze,Ue):He},Ue.padding=function(Ze){return arguments.length?(we=+Ze,Ue):we},gu(Ue,he)};function Gl(he,we){return he.value-we.value}function Ms(he,we){var Ie=he._pack_next;he._pack_next=we,we._pack_prev=he,we._pack_next=Ie,Ie._pack_prev=we}function Rs(he,we){he._pack_next=we,we._pack_prev=he}function _u(he,we){var Ie=we.x-he.x,He=we.y-he.y,Ue=he.r+we.r;return .999*Ue*Ue>Ie*Ie+He*He}function ko(he){if(!(we=he.children)||!(Sr=we.length))return;var we,Ie=1/0,He=-1/0,Ue=1/0,Ze=-1/0,xt,vt,Lt,jt,Kt,qt,Sr;function qr(Zr){Ie=Math.min(Zr.x-Zr.r,Ie),He=Math.max(Zr.x+Zr.r,He),Ue=Math.min(Zr.y-Zr.r,Ue),Ze=Math.max(Zr.y+Zr.r,Ze)}if(we.forEach(zf),xt=we[0],xt.x=-xt.r,xt.y=0,qr(xt),Sr>1&&(vt=we[1],vt.x=vt.r,vt.y=0,qr(vt),Sr>2))for(Lt=we[2],Tl(xt,vt,Lt),qr(Lt),Ms(xt,Lt),xt._pack_prev=Lt,Ms(Lt,vt),vt=xt._pack_next,jt=3;jt<Sr;jt++){Tl(xt,vt,Lt=we[jt]);var cn=0,kr=1,Vr=1;for(Kt=vt._pack_next;Kt!==vt;Kt=Kt._pack_next,kr++)if(_u(Kt,Lt)){cn=1;break}if(cn==1)for(qt=xt._pack_prev;qt!==Kt._pack_prev&&!_u(qt,Lt);qt=qt._pack_prev,Vr++);cn?(kr<Vr||kr==Vr&&vt.r<xt.r?Rs(xt,vt=Kt):Rs(xt=qt,vt),jt--):(Ms(xt,Lt),vt=Lt,qr(Lt))}var Xr=(Ie+He)/2,on=(Ue+Ze)/2,ln=0;for(jt=0;jt<Sr;jt++)Lt=we[jt],Lt.x-=Xr,Lt.y-=on,ln=Math.max(ln,Lt.r+Math.sqrt(Lt.x*Lt.x+Lt.y*Lt.y));he.r=ln,we.forEach(Ds)}function zf(he){he._pack_next=he._pack_prev=he}function Ds(he){delete he._pack_next,delete he._pack_prev}function wl(he,we,Ie,He){var Ue=he.children;if(he.x=we+=He*he.x,he.y=Ie+=He*he.y,he.r*=He,Ue)for(var Ze=-1,xt=Ue.length;++Ze<xt;)wl(Ue[Ze],we,Ie,He)}function Tl(he,we,Ie){var He=he.r+Ie.r,Ue=we.x-he.x,Ze=we.y-he.y;if(He&&(Ue||Ze)){var xt=we.r+Ie.r,vt=Ue*Ue+Ze*Ze;xt*=xt,He*=He;var Lt=.5+(He-xt)/(2*vt),jt=Math.sqrt(Math.max(0,2*xt*(He+vt)-(He-=vt)*He-xt*xt))/(2*vt);Ie.x=he.x+Lt*Ue+jt*Ze,Ie.y=he.y+Lt*Ze-jt*Ue}else Ie.x=he.x+He,Ie.y=he.y}s.layout.tree=function(){var he=s.layout.hierarchy().sort(null).value(null),we=sl,Ie=[1,1],He=null;function Ue(Kt,qt){var Sr=he.call(this,Kt,qt),qr=Sr[0],cn=Ze(qr);if(Xs(cn,xt),cn.parent.m=-cn.z,Ul(cn,vt),He)Ul(qr,jt);else{var kr=qr,Vr=qr,Xr=qr;Ul(qr,function($n){$n.x<kr.x&&(kr=$n),$n.x>Vr.x&&(Vr=$n),$n.depth>Xr.depth&&(Xr=$n)});var on=we(kr,Vr)/2-kr.x,ln=Ie[0]/(Vr.x+we(Vr,kr)/2+on),Zr=Ie[1]/(Xr.depth||1);Ul(qr,function($n){$n.x=($n.x+on)*ln,$n.y=$n.depth*Zr})}return Sr}function Ze(Kt){for(var qt={A:null,children:[Kt]},Sr=[qt],qr;(qr=Sr.pop())!=null;)for(var cn=qr.children,kr,Vr=0,Xr=cn.length;Vr<Xr;++Vr)Sr.push((cn[Vr]=kr={_:cn[Vr],parent:qr,children:(kr=cn[Vr].children)&&kr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Vr}).a=kr);return qt.children[0]}function xt(Kt){var qt=Kt.children,Sr=Kt.parent.children,qr=Kt.i?Sr[Kt.i-1]:null;if(qt.length){Os(Kt);var cn=(qt[0].z+qt[qt.length-1].z)/2;qr?(Kt.z=qr.z+we(Kt._,qr._),Kt.m=Kt.z-cn):Kt.z=cn}else qr&&(Kt.z=qr.z+we(Kt._,qr._));Kt.parent.A=Lt(Kt,qr,Kt.parent.A||Sr[0])}function vt(Kt){Kt._.x=Kt.z+Kt.parent.m,Kt.m+=Kt.parent.m}function Lt(Kt,qt,Sr){if(qt){for(var qr=Kt,cn=Kt,kr=qt,Vr=qr.parent.children[0],Xr=qr.m,on=cn.m,ln=kr.m,Zr=Vr.m,$n;kr=no(kr),qr=Fs(qr),kr&&qr;)Vr=Fs(Vr),cn=no(cn),cn.a=Kt,$n=kr.z+ln-qr.z-Xr+we(kr._,qr._),$n>0&&(Jo(Nf(kr,Kt,Sr),Kt,$n),Xr+=$n,on+=$n),ln+=kr.m,Xr+=qr.m,Zr+=Vr.m,on+=cn.m;kr&&!no(cn)&&(cn.t=kr,cn.m+=ln-on),qr&&!Fs(Vr)&&(Vr.t=qr,Vr.m+=Xr-Zr,Sr=Kt)}return Sr}function jt(Kt){Kt.x*=Ie[0],Kt.y=Kt.depth*Ie[1]}return Ue.separation=function(Kt){return arguments.length?(we=Kt,Ue):we},Ue.size=function(Kt){return arguments.length?(He=(Ie=Kt)==null?jt:null,Ue):He?null:Ie},Ue.nodeSize=function(Kt){return arguments.length?(He=(Ie=Kt)==null?null:jt,Ue):He?Ie:null},gu(Ue,he)};function sl(he,we){return he.parent==we.parent?1:2}function Fs(he){var we=he.children;return we.length?we[0]:he.t}function no(he){var we=he.children,Ie;return(Ie=we.length)?we[Ie-1]:he.t}function Jo(he,we,Ie){var He=Ie/(we.i-he.i);we.c-=He,we.s+=Ie,he.c+=He,we.z+=Ie,we.m+=Ie}function Os(he){for(var we=0,Ie=0,He=he.children,Ue=He.length,Ze;--Ue>=0;)Ze=He[Ue],Ze.z+=we,Ze.m+=we,we+=Ze.s+(Ie+=Ze.c)}function Nf(he,we,Ie){return he.a.parent===we.parent?he.a:Ie}s.layout.cluster=function(){var he=s.layout.hierarchy().sort(null).value(null),we=sl,Ie=[1,1],He=!1;function Ue(Ze,xt){var vt=he.call(this,Ze,xt),Lt=vt[0],jt,Kt=0;Xs(Lt,function(kr){var Vr=kr.children;Vr&&Vr.length?(kr.x=Bf(Vr),kr.y=Uu(Vr)):(kr.x=jt?Kt+=we(kr,jt):0,kr.y=0,jt=kr)});var qt=yt(Lt),Sr=Ft(Lt),qr=qt.x-we(qt,Sr)/2,cn=Sr.x+we(Sr,qt)/2;return Xs(Lt,He?function(kr){kr.x=(kr.x-Lt.x)*Ie[0],kr.y=(Lt.y-kr.y)*Ie[1]}:function(kr){kr.x=(kr.x-qr)/(cn-qr)*Ie[0],kr.y=(1-(Lt.y?kr.y/Lt.y:1))*Ie[1]}),vt}return Ue.separation=function(Ze){return arguments.length?(we=Ze,Ue):we},Ue.size=function(Ze){return arguments.length?(He=(Ie=Ze)==null,Ue):He?null:Ie},Ue.nodeSize=function(Ze){return arguments.length?(He=(Ie=Ze)!=null,Ue):He?Ie:null},gu(Ue,he)};function Uu(he){return 1+s.max(he,function(we){return we.y})}function Bf(he){return he.reduce(function(we,Ie){return we+Ie.x},0)/he.length}function yt(he){var we=he.children;return we&&we.length?yt(we[0]):he}function Ft(he){var we=he.children,Ie;return we&&(Ie=we.length)?Ft(we[Ie-1]):he}s.layout.treemap=function(){var he=s.layout.hierarchy(),we=Math.round,Ie=[1,1],He=null,Ue=fr,Ze=!1,xt,vt="squarify",Lt=.5*(1+Math.sqrt(5));function jt(kr,Vr){for(var Xr=-1,on=kr.length,ln,Zr;++Xr<on;)Zr=(ln=kr[Xr]).value*(Vr<0?0:Vr),ln.area=isNaN(Zr)||Zr<=0?0:Zr}function Kt(kr){var Vr=kr.children;if(Vr&&Vr.length){var Xr=Ue(kr),on=[],ln=Vr.slice(),Zr,$n=1/0,aa,Sa=vt==="slice"?Xr.dx:vt==="dice"?Xr.dy:vt==="slice-dice"?kr.depth&1?Xr.dy:Xr.dx:Math.min(Xr.dx,Xr.dy),ua;for(jt(ln,Xr.dx*Xr.dy/kr.value),on.area=0;(ua=ln.length)>0;)on.push(Zr=ln[ua-1]),on.area+=Zr.area,vt!=="squarify"||(aa=Sr(on,Sa))<=$n?(ln.pop(),$n=aa):(on.area-=on.pop().area,qr(on,Sa,Xr,!1),Sa=Math.min(Xr.dx,Xr.dy),on.length=on.area=0,$n=1/0);on.length&&(qr(on,Sa,Xr,!0),on.length=on.area=0),Vr.forEach(Kt)}}function qt(kr){var Vr=kr.children;if(Vr&&Vr.length){var Xr=Ue(kr),on=Vr.slice(),ln,Zr=[];for(jt(on,Xr.dx*Xr.dy/kr.value),Zr.area=0;ln=on.pop();)Zr.push(ln),Zr.area+=ln.area,ln.z!=null&&(qr(Zr,ln.z?Xr.dx:Xr.dy,Xr,!on.length),Zr.length=Zr.area=0);Vr.forEach(qt)}}function Sr(kr,Vr){for(var Xr=kr.area,on,ln=0,Zr=1/0,$n=-1,aa=kr.length;++$n<aa;)!(on=kr[$n].area)||(on<Zr&&(Zr=on),on>ln&&(ln=on));return Xr*=Xr,Vr*=Vr,Xr?Math.max(Vr*ln*Lt/Xr,Xr/(Vr*Zr*Lt)):1/0}function qr(kr,Vr,Xr,on){var ln=-1,Zr=kr.length,$n=Xr.x,aa=Xr.y,Sa=Vr?we(kr.area/Vr):0,ua;if(Vr==Xr.dx){for((on||Sa>Xr.dy)&&(Sa=Xr.dy);++ln<Zr;)ua=kr[ln],ua.x=$n,ua.y=aa,ua.dy=Sa,$n+=ua.dx=Math.min(Xr.x+Xr.dx-$n,Sa?we(ua.area/Sa):0);ua.z=!0,ua.dx+=Xr.x+Xr.dx-$n,Xr.y+=Sa,Xr.dy-=Sa}else{for((on||Sa>Xr.dx)&&(Sa=Xr.dx);++ln<Zr;)ua=kr[ln],ua.x=$n,ua.y=aa,ua.dx=Sa,aa+=ua.dy=Math.min(Xr.y+Xr.dy-aa,Sa?we(ua.area/Sa):0);ua.z=!1,ua.dy+=Xr.y+Xr.dy-aa,Xr.x+=Sa,Xr.dx-=Sa}}function cn(kr){var Vr=xt||he(kr),Xr=Vr[0];return Xr.x=Xr.y=0,Xr.value?(Xr.dx=Ie[0],Xr.dy=Ie[1]):Xr.dx=Xr.dy=0,xt&&he.revalue(Xr),jt([Xr],Xr.dx*Xr.dy/Xr.value),(xt?qt:Kt)(Xr),Ze&&(xt=Vr),Vr}return cn.size=function(kr){return arguments.length?(Ie=kr,cn):Ie},cn.padding=function(kr){if(!arguments.length)return He;function Vr(ln){var Zr=kr.call(cn,ln,ln.depth);return Zr==null?fr(ln):ir(ln,typeof Zr=="number"?[Zr,Zr,Zr,Zr]:Zr)}function Xr(ln){return ir(ln,kr)}var on;return Ue=(He=kr)==null?fr:(on=typeof kr)=="function"?Vr:(on==="number"&&(kr=[kr,kr,kr,kr]),Xr),cn},cn.round=function(kr){return arguments.length?(we=kr?Math.round:Number,cn):we!=Number},cn.sticky=function(kr){return arguments.length?(Ze=kr,xt=null,cn):Ze},cn.ratio=function(kr){return arguments.length?(Lt=kr,cn):Lt},cn.mode=function(kr){return arguments.length?(vt=kr+"",cn):vt},gu(cn,he)};function fr(he){return{x:he.x,y:he.y,dx:he.dx,dy:he.dy}}function ir(he,we){var Ie=he.x+we[3],He=he.y+we[0],Ue=he.dx-we[1]-we[3],Ze=he.dy-we[0]-we[2];return Ue<0&&(Ie+=Ue/2,Ue=0),Ze<0&&(He+=Ze/2,Ze=0),{x:Ie,y:He,dx:Ue,dy:Ze}}s.random={normal:function(he,we){var Ie=arguments.length;return Ie<2&&(we=1),Ie<1&&(he=0),function(){var He,Ue,Ze;do He=Math.random()*2-1,Ue=Math.random()*2-1,Ze=He*He+Ue*Ue;while(!Ze||Ze>1);return he+we*He*Math.sqrt(-2*Math.log(Ze)/Ze)}},logNormal:function(){var he=s.random.normal.apply(s,arguments);return function(){return Math.exp(he())}},bates:function(he){var we=s.random.irwinHall(he);return function(){return we()/he}},irwinHall:function(he){return function(){for(var we=0,Ie=0;Ie<he;Ie++)we+=Math.random();return we}}},s.scale={};function Ir(he){var we=he[0],Ie=he[he.length-1];return we<Ie?[we,Ie]:[Ie,we]}function an(he){return he.rangeExtent?he.rangeExtent():Ir(he.range())}function xn(he,we,Ie,He){var Ue=Ie(he[0],he[1]),Ze=He(we[0],we[1]);return function(xt){return Ze(Ue(xt))}}function Ln(he,we){var Ie=0,He=he.length-1,Ue=he[Ie],Ze=he[He],xt;return Ze<Ue&&(xt=Ie,Ie=He,He=xt,xt=Ue,Ue=Ze,Ze=xt),he[Ie]=we.floor(Ue),he[He]=we.ceil(Ze),he}function Fn(he){return he?{floor:function(we){return Math.floor(we/he)*he},ceil:function(we){return Math.ceil(we/he)*he}}:jn}var jn={floor:R,ceil:R};function _n(he,we,Ie,He){var Ue=[],Ze=[],xt=0,vt=Math.min(he.length,we.length)-1;for(he[vt]<he[0]&&(he=he.slice().reverse(),we=we.slice().reverse());++xt<=vt;)Ue.push(Ie(he[xt-1],he[xt])),Ze.push(He(we[xt-1],we[xt]));return function(Lt){var jt=s.bisect(he,Lt,1,vt)-1;return Ze[jt](Ue[jt](Lt))}}s.scale.linear=function(){return Un([0,1],[0,1],Ao,!1)};function Un(he,we,Ie,He){var Ue,Ze;function xt(){var Lt=Math.min(he.length,we.length)>2?_n:xn,jt=He?Df:fc;return Ue=Lt(he,we,jt,Ie),Ze=Lt(we,he,jt,Ao),vt}function vt(Lt){return Ue(Lt)}return vt.invert=function(Lt){return Ze(Lt)},vt.domain=function(Lt){return arguments.length?(he=Lt.map(Number),xt()):he},vt.range=function(Lt){return arguments.length?(we=Lt,xt()):we},vt.rangeRound=function(Lt){return vt.range(Lt).interpolate(Pf)},vt.clamp=function(Lt){return arguments.length?(He=Lt,xt()):He},vt.interpolate=function(Lt){return arguments.length?(Ie=Lt,xt()):Ie},vt.ticks=function(Lt){return Ha(he,Lt)},vt.tickFormat=function(Lt,jt){return d3_scale_linearTickFormat(he,Lt,jt)},vt.nice=function(Lt){return Wn(he,Lt),xt()},vt.copy=function(){return Un(he,we,Ie,He)},xt()}function On(he,we){return s.rebind(he,we,"range","rangeRound","interpolate","clamp")}function Wn(he,we){return Ln(he,Fn(ea(he,we)[2])),Ln(he,Fn(ea(he,we)[2])),he}function ea(he,we){we==null&&(we=10);var Ie=Ir(he),He=Ie[1]-Ie[0],Ue=Math.pow(10,Math.floor(Math.log(He/we)/Math.LN10)),Ze=we/He*Ue;return Ze<=.15?Ue*=10:Ze<=.35?Ue*=5:Ze<=.75&&(Ue*=2),Ie[0]=Math.ceil(Ie[0]/Ue)*Ue,Ie[1]=Math.floor(Ie[1]/Ue)*Ue+Ue*.5,Ie[2]=Ue,Ie}function Ha(he,we){return s.range.apply(s,ea(he,we))}s.scale.log=function(){return Ia(s.scale.linear().domain([0,1]),10,!0,[1,10])};function Ia(he,we,Ie,He){function Ue(vt){return(Ie?Math.log(vt<0?0:vt):-Math.log(vt>0?0:-vt))/Math.log(we)}function Ze(vt){return Ie?Math.pow(we,vt):-Math.pow(we,-vt)}function xt(vt){return he(Ue(vt))}return xt.invert=function(vt){return Ze(he.invert(vt))},xt.domain=function(vt){return arguments.length?(Ie=vt[0]>=0,he.domain((He=vt.map(Number)).map(Ue)),xt):He},xt.base=function(vt){return arguments.length?(we=+vt,he.domain(He.map(Ue)),xt):we},xt.nice=function(){var vt=Ln(He.map(Ue),Ie?Math:Ga);return he.domain(vt),He=vt.map(Ze),xt},xt.ticks=function(){var vt=Ir(He),Lt=[],jt=vt[0],Kt=vt[1],qt=Math.floor(Ue(jt)),Sr=Math.ceil(Ue(Kt)),qr=we%1?2:we;if(isFinite(Sr-qt)){if(Ie){for(;qt<Sr;qt++)for(var cn=1;cn<qr;cn++)Lt.push(Ze(qt)*cn);Lt.push(Ze(qt))}else for(Lt.push(Ze(qt));qt++<Sr;)for(var cn=qr-1;cn>0;cn--)Lt.push(Ze(qt)*cn);for(qt=0;Lt[qt]<jt;qt++);for(Sr=Lt.length;Lt[Sr-1]>Kt;Sr--);Lt=Lt.slice(qt,Sr)}return Lt},xt.copy=function(){return Ia(he.copy(),we,Ie,He)},On(xt,he)}var Ga={floor:function(he){return-Math.ceil(-he)},ceil:function(he){return-Math.floor(-he)}};s.scale.pow=function(){return ja(s.scale.linear(),1,[0,1])};function ja(he,we,Ie){var He=Qn(we),Ue=Qn(1/we);function Ze(xt){return he(He(xt))}return Ze.invert=function(xt){return Ue(he.invert(xt))},Ze.domain=function(xt){return arguments.length?(he.domain((Ie=xt.map(Number)).map(He)),Ze):Ie},Ze.ticks=function(xt){return Ha(Ie,xt)},Ze.tickFormat=function(xt,vt){return d3_scale_linearTickFormat(Ie,xt,vt)},Ze.nice=function(xt){return Ze.domain(Wn(Ie,xt))},Ze.exponent=function(xt){return arguments.length?(He=Qn(we=xt),Ue=Qn(1/we),he.domain(Ie.map(He)),Ze):we},Ze.copy=function(){return ja(he.copy(),we,Ie)},On(Ze,he)}function Qn(he){return function(we){return we<0?-Math.pow(-we,he):Math.pow(we,he)}}s.scale.sqrt=function(){return s.scale.pow().exponent(.5)},s.scale.ordinal=function(){return da([],{t:"range",a:[[]]})};function da(he,we){var Ie,He,Ue;function Ze(vt){return He[((Ie.get(vt)||(we.t==="range"?Ie.set(vt,he.push(vt)):NaN))-1)%He.length]}function xt(vt,Lt){return s.range(he.length).map(function(jt){return vt+Lt*jt})}return Ze.domain=function(vt){if(!arguments.length)return he;he=[],Ie=new S;for(var Lt=-1,jt=vt.length,Kt;++Lt<jt;)Ie.has(Kt=vt[Lt])||Ie.set(Kt,he.push(Kt));return Ze[we.t].apply(Ze,we.a)},Ze.range=function(vt){return arguments.length?(He=vt,Ue=0,we={t:"range",a:arguments},Ze):He},Ze.rangePoints=function(vt,Lt){arguments.length<2&&(Lt=0);var jt=vt[0],Kt=vt[1],qt=he.length<2?(jt=(jt+Kt)/2,0):(Kt-jt)/(he.length-1+Lt);return He=xt(jt+qt*Lt/2,qt),Ue=0,we={t:"rangePoints",a:arguments},Ze},Ze.rangeRoundPoints=function(vt,Lt){arguments.length<2&&(Lt=0);var jt=vt[0],Kt=vt[1],qt=he.length<2?(jt=Kt=Math.round((jt+Kt)/2),0):(Kt-jt)/(he.length-1+Lt)|0;return He=xt(jt+Math.round(qt*Lt/2+(Kt-jt-(he.length-1+Lt)*qt)/2),qt),Ue=0,we={t:"rangeRoundPoints",a:arguments},Ze},Ze.rangeBands=function(vt,Lt,jt){arguments.length<2&&(Lt=0),arguments.length<3&&(jt=Lt);var Kt=vt[1]<vt[0],qt=vt[Kt-0],Sr=vt[1-Kt],qr=(Sr-qt)/(he.length-Lt+2*jt);return He=xt(qt+qr*jt,qr),Kt&&He.reverse(),Ue=qr*(1-Lt),we={t:"rangeBands",a:arguments},Ze},Ze.rangeRoundBands=function(vt,Lt,jt){arguments.length<2&&(Lt=0),arguments.length<3&&(jt=Lt);var Kt=vt[1]<vt[0],qt=vt[Kt-0],Sr=vt[1-Kt],qr=Math.floor((Sr-qt)/(he.length-Lt+2*jt));return He=xt(qt+Math.round((Sr-qt-(he.length-Lt)*qr)/2),qr),Kt&&He.reverse(),Ue=Math.round(qr*(1-Lt)),we={t:"rangeRoundBands",a:arguments},Ze},Ze.rangeBand=function(){return Ue},Ze.rangeExtent=function(){return Ir(we.a[0])},Ze.copy=function(){return da(he,we)},Ze.domain(he)}s.scale.category10=function(){return s.scale.ordinal().range(Za)},s.scale.category20=function(){return s.scale.ordinal().range(ni)},s.scale.category20b=function(){return s.scale.ordinal().range(Mi)},s.scale.category20c=function(){return s.scale.ordinal().range(Ei)};var Za=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(un),ni=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(un),Mi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(un),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(un);s.scale.quantile=function(){return Ci([],[])};function Ci(he,we){var Ie;function He(){var Ze=0,xt=we.length;for(Ie=[];++Ze<xt;)Ie[Ze-1]=s.quantile(he,Ze/xt);return Ue}function Ue(Ze){if(!isNaN(Ze=+Ze))return we[s.bisect(Ie,Ze)]}return Ue.domain=function(Ze){return arguments.length?(he=Ze.map(m).filter(d).sort(l),He()):he},Ue.range=function(Ze){return arguments.length?(we=Ze,He()):we},Ue.quantiles=function(){return Ie},Ue.invertExtent=function(Ze){return Ze=we.indexOf(Ze),Ze<0?[NaN,NaN]:[Ze>0?Ie[Ze-1]:he[0],Ze<Ie.length?Ie[Ze]:he[he.length-1]]},Ue.copy=function(){return Ci(he,we)},He()}s.scale.quantize=function(){return Oi(0,1,[0,1])};function Oi(he,we,Ie){var He,Ue;function Ze(vt){return Ie[Math.max(0,Math.min(Ue,Math.floor(He*(vt-he))))]}function xt(){return He=Ie.length/(we-he),Ue=Ie.length-1,Ze}return Ze.domain=function(vt){return arguments.length?(he=+vt[0],we=+vt[vt.length-1],xt()):[he,we]},Ze.range=function(vt){return arguments.length?(Ie=vt,xt()):Ie},Ze.invertExtent=function(vt){return vt=Ie.indexOf(vt),vt=vt<0?NaN:vt/He+he,[vt,vt+1/He]},Ze.copy=function(){return Oi(he,we,Ie)},xt()}s.scale.threshold=function(){return vi([.5],[0,1])};function vi(he,we){function Ie(He){if(He<=He)return we[s.bisect(he,He)]}return Ie.domain=function(He){return arguments.length?(he=He,Ie):he},Ie.range=function(He){return arguments.length?(we=He,Ie):we},Ie.invertExtent=function(He){return He=we.indexOf(He),[he[He-1],he[He]]},Ie.copy=function(){return vi(he,we)},Ie}s.scale.identity=function(){return Uo([0,1])};function Uo(he){function we(Ie){return+Ie}return we.invert=we,we.domain=we.range=function(Ie){return arguments.length?(he=Ie.map(we),we):he},we.ticks=function(Ie){return Ha(he,Ie)},we.tickFormat=function(Ie,He){return d3_scale_linearTickFormat(he,Ie,He)},we.copy=function(){return Uo(he)},we}s.svg={};function xo(){return 0}s.svg.arc=function(){var he=ga,we=Li,Ie=xo,He=ri,Ue=Co,Ze=Fo,xt=zs;function vt(){var jt=Math.max(0,+he.apply(this,arguments)),Kt=Math.max(0,+we.apply(this,arguments)),qt=Ue.apply(this,arguments)-ut,Sr=Ze.apply(this,arguments)-ut,qr=Math.abs(Sr-qt),cn=qt>Sr?0:1;if(Kt<jt&&(kr=Kt,Kt=jt,jt=kr),qr>=Qe)return Lt(Kt,cn)+(jt?Lt(jt,1-cn):"")+"Z";var kr,Vr,Xr,on,ln=0,Zr=0,$n,aa,Sa,ua,La,ha,Wa,Fa,ai=[];if((on=(+xt.apply(this,arguments)||0)/2)&&(Xr=He===ri?Math.sqrt(jt*jt+Kt*Kt):+He.apply(this,arguments),cn||(Zr*=-1),Kt&&(Zr=rr(Xr/Kt*Math.sin(on))),jt&&(ln=rr(Xr/jt*Math.sin(on)))),Kt){$n=Kt*Math.cos(qt+Zr),aa=Kt*Math.sin(qt+Zr),Sa=Kt*Math.cos(Sr-Zr),ua=Kt*Math.sin(Sr-Zr);var ki=Math.abs(Sr-qt-2*Zr)<=Pe?0:1;if(Zr&&ll($n,aa,Sa,ua)===cn^ki){var Po=(qt+Sr)/2;$n=Kt*Math.cos(Po),aa=Kt*Math.sin(Po),Sa=ua=null}}else $n=aa=0;if(jt){La=jt*Math.cos(Sr-ln),ha=jt*Math.sin(Sr-ln),Wa=jt*Math.cos(qt+ln),Fa=jt*Math.sin(qt+ln);var Xi=Math.abs(qt-Sr+2*ln)<=Pe?0:1;if(ln&&ll(La,ha,Wa,Fa)===1-cn^Xi){var va=(qt+Sr)/2;La=jt*Math.cos(va),ha=jt*Math.sin(va),Wa=Fa=null}}else La=ha=0;if(qr>ht&&(kr=Math.min(Math.abs(Kt-jt)/2,+Ie.apply(this,arguments)))>.001){Vr=jt<Kt^cn?0:1;var ci=kr,Ja=kr;if(qr<Pe){var Ni=Wa==null?[La,ha]:Sa==null?[$n,aa]:Pa([$n,aa],[Wa,Fa],[Sa,ua],[La,ha]),pi=$n-Ni[0],Mo=aa-Ni[1],po=Sa-Ni[0],zo=ua-Ni[1],ms=1/Math.sin(Math.acos((pi*po+Mo*zo)/(Math.sqrt(pi*pi+Mo*Mo)*Math.sqrt(po*po+zo*zo)))/2),cs=Math.sqrt(Ni[0]*Ni[0]+Ni[1]*Ni[1]);Ja=Math.min(kr,(jt-cs)/(ms-1)),ci=Math.min(kr,(Kt-cs)/(ms+1))}if(Sa!=null){var xs=us(Wa==null?[La,ha]:[Wa,Fa],[$n,aa],Kt,ci,cn),io=us([Sa,ua],[La,ha],Kt,ci,cn);kr===ci?ai.push("M",xs[0],"A",ci,",",ci," 0 0,",Vr," ",xs[1],"A",Kt,",",Kt," 0 ",1-cn^ll(xs[1][0],xs[1][1],io[1][0],io[1][1]),",",cn," ",io[1],"A",ci,",",ci," 0 0,",Vr," ",io[0]):ai.push("M",xs[0],"A",ci,",",ci," 0 1,",Vr," ",io[0])}else ai.push("M",$n,",",aa);if(Wa!=null){var qi=us([$n,aa],[Wa,Fa],jt,-Ja,cn),Ua=us([La,ha],Sa==null?[$n,aa]:[Sa,ua],jt,-Ja,cn);kr===Ja?ai.push("L",Ua[0],"A",Ja,",",Ja," 0 0,",Vr," ",Ua[1],"A",jt,",",jt," 0 ",cn^ll(Ua[1][0],Ua[1][1],qi[1][0],qi[1][1]),",",1-cn," ",qi[1],"A",Ja,",",Ja," 0 0,",Vr," ",qi[0]):ai.push("L",Ua[0],"A",Ja,",",Ja," 0 0,",Vr," ",qi[0])}else ai.push("L",La,",",ha)}else ai.push("M",$n,",",aa),Sa!=null&&ai.push("A",Kt,",",Kt," 0 ",ki,",",cn," ",Sa,",",ua),ai.push("L",La,",",ha),Wa!=null&&ai.push("A",jt,",",jt," 0 ",Xi,",",1-cn," ",Wa,",",Fa);return ai.push("Z"),ai.join("")}function Lt(jt,Kt){return"M0,"+jt+"A"+jt+","+jt+" 0 1,"+Kt+" 0,"+-jt+"A"+jt+","+jt+" 0 1,"+Kt+" 0,"+jt}return vt.innerRadius=function(jt){return arguments.length?(he=nt(jt),vt):he},vt.outerRadius=function(jt){return arguments.length?(we=nt(jt),vt):we},vt.cornerRadius=function(jt){return arguments.length?(Ie=nt(jt),vt):Ie},vt.padRadius=function(jt){return arguments.length?(He=jt==ri?ri:nt(jt),vt):He},vt.startAngle=function(jt){return arguments.length?(Ue=nt(jt),vt):Ue},vt.endAngle=function(jt){return arguments.length?(Ze=nt(jt),vt):Ze},vt.padAngle=function(jt){return arguments.length?(xt=nt(jt),vt):xt},vt.centroid=function(){var jt=(+he.apply(this,arguments)+ +we.apply(this,arguments))/2,Kt=(+Ue.apply(this,arguments)+ +Ze.apply(this,arguments))/2-ut;return[Math.cos(Kt)*jt,Math.sin(Kt)*jt]},vt};var ri="auto";function ga(he){return he.innerRadius}function Li(he){return he.outerRadius}function Co(he){return he.startAngle}function Fo(he){return he.endAngle}function zs(he){return he&&he.padAngle}function ll(he,we,Ie,He){return(he-Ie)*we-(we-He)*he>0?0:1}function us(he,we,Ie,He,Ue){var Ze=he[0]-we[0],xt=he[1]-we[1],vt=(Ue?He:-He)/Math.sqrt(Ze*Ze+xt*xt),Lt=vt*xt,jt=-vt*Ze,Kt=he[0]+Lt,qt=he[1]+jt,Sr=we[0]+Lt,qr=we[1]+jt,cn=(Kt+Sr)/2,kr=(qt+qr)/2,Vr=Sr-Kt,Xr=qr-qt,on=Vr*Vr+Xr*Xr,ln=Ie-He,Zr=Kt*qr-Sr*qt,$n=(Xr<0?-1:1)*Math.sqrt(Math.max(0,ln*ln*on-Zr*Zr)),aa=(Zr*Xr-Vr*$n)/on,Sa=(-Zr*Vr-Xr*$n)/on,ua=(Zr*Xr+Vr*$n)/on,La=(-Zr*Vr+Xr*$n)/on,ha=aa-cn,Wa=Sa-kr,Fa=ua-cn,ai=La-kr;return ha*ha+Wa*Wa>Fa*Fa+ai*ai&&(aa=ua,Sa=La),[[aa-Lt,Sa-jt],[aa*Ie/ln,Sa*Ie/ln]]}function jl(){return!0}function Zs(he){var we=Cn,Ie=oa,He=jl,Ue=Vo,Ze=Ue.key,xt=.7;function vt(Lt){var jt=[],Kt=[],qt=-1,Sr=Lt.length,qr,cn=nt(we),kr=nt(Ie);function Vr(){jt.push("M",Ue(he(Kt),xt))}for(;++qt<Sr;)He.call(this,qr=Lt[qt],qt)?Kt.push([+cn.call(this,qr,qt),+kr.call(this,qr,qt)]):Kt.length&&(Vr(),Kt=[]);return Kt.length&&Vr(),jt.length?jt.join(""):null}return vt.x=function(Lt){return arguments.length?(we=Lt,vt):we},vt.y=function(Lt){return arguments.length?(Ie=Lt,vt):Ie},vt.defined=function(Lt){return arguments.length?(He=Lt,vt):He},vt.interpolate=function(Lt){return arguments.length?(typeof Lt=="function"?Ze=Ue=Lt:Ze=(Ue=Ns.get(Lt)||Vo).key,vt):Ze},vt.tension=function(Lt){return arguments.length?(xt=Lt,vt):xt},vt}s.svg.line=function(){return Zs(R)};var Ns=s.map({linear:Vo,"linear-closed":Vu,step:uf,"step-before":Bs,"step-after":Uf,basis:ul,"basis-open":Hc,"basis-closed":pc,bundle:dc,cardinal:hc,"cardinal-open":Hu,"cardinal-closed":ev,monotone:$e});Ns.forEach(function(he,we){we.key=he,we.closed=/-closed$/.test(he)});function Vo(he){return he.length>1?he.join("L"):he+"Z"}function Vu(he){return he.join("L")+"Z"}function uf(he){for(var we=0,Ie=he.length,He=he[0],Ue=[He[0],",",He[1]];++we<Ie;)Ue.push("H",(He[0]+(He=he[we])[0])/2,"V",He[1]);return Ie>1&&Ue.push("H",He[0]),Ue.join("")}function Bs(he){for(var we=0,Ie=he.length,He=he[0],Ue=[He[0],",",He[1]];++we<Ie;)Ue.push("V",(He=he[we])[1],"H",He[0]);return Ue.join("")}function Uf(he){for(var we=0,Ie=he.length,He=he[0],Ue=[He[0],",",He[1]];++we<Ie;)Ue.push("H",(He=he[we])[0],"V",He[1]);return Ue.join("")}function Hu(he,we){return he.length<4?Vo(he):he[1]+Vf(he.slice(1,-1),vc(he,we))}function ev(he,we){return he.length<3?Vu(he):he[0]+Vf((he.push(he[0]),he),vc([he[he.length-2]].concat(he,[he[1]]),we))}function hc(he,we){return he.length<3?Vo(he):he[0]+Vf(he,vc(he,we))}function Vf(he,we){if(we.length<1||he.length!=we.length&&he.length!=we.length+2)return Vo(he);var Ie=he.length!=we.length,He="",Ue=he[0],Ze=he[1],xt=we[0],vt=xt,Lt=1;if(Ie&&(He+="Q"+(Ze[0]-xt[0]*2/3)+","+(Ze[1]-xt[1]*2/3)+","+Ze[0]+","+Ze[1],Ue=he[1],Lt=2),we.length>1){vt=we[1],Ze=he[Lt],Lt++,He+="C"+(Ue[0]+xt[0])+","+(Ue[1]+xt[1])+","+(Ze[0]-vt[0])+","+(Ze[1]-vt[1])+","+Ze[0]+","+Ze[1];for(var jt=2;jt<we.length;jt++,Lt++)Ze=he[Lt],vt=we[jt],He+="S"+(Ze[0]-vt[0])+","+(Ze[1]-vt[1])+","+Ze[0]+","+Ze[1]}if(Ie){var Kt=he[Lt];He+="Q"+(Ze[0]+vt[0]*2/3)+","+(Ze[1]+vt[1]*2/3)+","+Kt[0]+","+Kt[1]}return He}function vc(he,we){for(var Ie=[],He=(1-we)/2,Ue,Ze=he[0],xt=he[1],vt=1,Lt=he.length;++vt<Lt;)Ue=Ze,Ze=xt,xt=he[vt],Ie.push([He*(xt[0]-Ue[0]),He*(xt[1]-Ue[1])]);return Ie}function ul(he){if(he.length<3)return Vo(he);var we=1,Ie=he.length,He=he[0],Ue=He[0],Ze=He[1],xt=[Ue,Ue,Ue,(He=he[1])[0]],vt=[Ze,Ze,Ze,He[1]],Lt=[Ue,",",Ze,"L",fs(Ks,xt),",",fs(Ks,vt)];for(he.push(he[Ie-1]);++we<=Ie;)He=he[we],xt.shift(),xt.push(He[0]),vt.shift(),vt.push(He[1]),Hf(Lt,xt,vt);return he.pop(),Lt.push("L",He),Lt.join("")}function Hc(he){if(he.length<4)return Vo(he);for(var we=[],Ie=-1,He=he.length,Ue,Ze=[0],xt=[0];++Ie<3;)Ue=he[Ie],Ze.push(Ue[0]),xt.push(Ue[1]);for(we.push(fs(Ks,Ze)+","+fs(Ks,xt)),--Ie;++Ie<He;)Ue=he[Ie],Ze.shift(),Ze.push(Ue[0]),xt.shift(),xt.push(Ue[1]),Hf(we,Ze,xt);return we.join("")}function pc(he){for(var we,Ie=-1,He=he.length,Ue=He+4,Ze,xt=[],vt=[];++Ie<4;)Ze=he[Ie%He],xt.push(Ze[0]),vt.push(Ze[1]);for(we=[fs(Ks,xt),",",fs(Ks,vt)],--Ie;++Ie<Ue;)Ze=he[Ie%He],xt.shift(),xt.push(Ze[0]),vt.shift(),vt.push(Ze[1]),Hf(we,xt,vt);return we.join("")}function dc(he,we){var Ie=he.length-1;if(Ie)for(var He=he[0][0],Ue=he[0][1],Ze=he[Ie][0]-He,xt=he[Ie][1]-Ue,vt=-1,Lt,jt;++vt<=Ie;)Lt=he[vt],jt=vt/Ie,Lt[0]=we*Lt[0]+(1-we)*(He+jt*Ze),Lt[1]=we*Lt[1]+(1-we)*(Ue+jt*xt);return ul(he)}function fs(he,we){return he[0]*we[0]+he[1]*we[1]+he[2]*we[2]+he[3]*we[3]}var gc=[0,2/3,1/3,0],lh=[0,1/3,2/3,0],Ks=[0,1/6,2/3,1/6];function Hf(he,we,Ie){he.push("C",fs(gc,we),",",fs(gc,Ie),",",fs(lh,we),",",fs(lh,Ie),",",fs(Ks,we),",",fs(Ks,Ie))}function Gf(he,we){return(we[1]-he[1])/(we[0]-he[0])}function yc(he){for(var we=0,Ie=he.length-1,He=[],Ue=he[0],Ze=he[1],xt=He[0]=Gf(Ue,Ze);++we<Ie;)He[we]=(xt+(xt=Gf(Ue=Ze,Ze=he[we+1])))/2;return He[we]=xt,He}function Ne(he){for(var we=[],Ie,He,Ue,Ze,xt=yc(he),vt=-1,Lt=he.length-1;++vt<Lt;)Ie=Gf(he[vt],he[vt+1]),p(Ie)<ht?xt[vt]=xt[vt+1]=0:(He=xt[vt]/Ie,Ue=xt[vt+1]/Ie,Ze=He*He+Ue*Ue,Ze>9&&(Ze=Ie*3/Math.sqrt(Ze),xt[vt]=Ze*He,xt[vt+1]=Ze*Ue));for(vt=-1;++vt<=Lt;)Ze=(he[Math.min(Lt,vt+1)][0]-he[Math.max(0,vt-1)][0])/(6*(1+xt[vt]*xt[vt])),we.push([Ze||0,xt[vt]*Ze||0]);return we}function $e(he){return he.length<3?Vo(he):he[0]+Vf(he,Ne(he))}s.svg.line.radial=function(){var he=Zs(rt);return he.radius=he.x,delete he.x,he.angle=he.y,delete he.y,he};function rt(he){for(var we,Ie=-1,He=he.length,Ue,Ze;++Ie<He;)we=he[Ie],Ue=we[0],Ze=we[1]-ut,we[0]=Ue*Math.cos(Ze),we[1]=Ue*Math.sin(Ze);return he}function lt(he){var we=Cn,Ie=Cn,He=0,Ue=oa,Ze=jl,xt=Vo,vt=xt.key,Lt=xt,jt="L",Kt=.7;function qt(Sr){var qr=[],cn=[],kr=[],Vr=-1,Xr=Sr.length,on,ln=nt(we),Zr=nt(He),$n=we===Ie?function(){return Sa}:nt(Ie),aa=He===Ue?function(){return ua}:nt(Ue),Sa,ua;function La(){qr.push("M",xt(he(kr),Kt),jt,Lt(he(cn.reverse()),Kt),"Z")}for(;++Vr<Xr;)Ze.call(this,on=Sr[Vr],Vr)?(cn.push([Sa=+ln.call(this,on,Vr),ua=+Zr.call(this,on,Vr)]),kr.push([+$n.call(this,on,Vr),+aa.call(this,on,Vr)])):cn.length&&(La(),cn=[],kr=[]);return cn.length&&La(),qr.length?qr.join(""):null}return qt.x=function(Sr){return arguments.length?(we=Ie=Sr,qt):Ie},qt.x0=function(Sr){return arguments.length?(we=Sr,qt):we},qt.x1=function(Sr){return arguments.length?(Ie=Sr,qt):Ie},qt.y=function(Sr){return arguments.length?(He=Ue=Sr,qt):Ue},qt.y0=function(Sr){return arguments.length?(He=Sr,qt):He},qt.y1=function(Sr){return arguments.length?(Ue=Sr,qt):Ue},qt.defined=function(Sr){return arguments.length?(Ze=Sr,qt):Ze},qt.interpolate=function(Sr){return arguments.length?(typeof Sr=="function"?vt=xt=Sr:vt=(xt=Ns.get(Sr)||Vo).key,Lt=xt.reverse||xt,jt=xt.closed?"M":"L",qt):vt},qt.tension=function(Sr){return arguments.length?(Kt=Sr,qt):Kt},qt}Bs.reverse=Uf,Uf.reverse=Bs,s.svg.area=function(){return lt(R)},s.svg.area.radial=function(){var he=lt(rt);return he.radius=he.x,delete he.x,he.innerRadius=he.x0,delete he.x0,he.outerRadius=he.x1,delete he.x1,he.angle=he.y,delete he.y,he.startAngle=he.y0,delete he.y0,he.endAngle=he.y1,delete he.y1,he};function bt(he){return he.source}function mt(he){return he.target}s.svg.chord=function(){var he=bt,we=mt,Ie=At,He=Co,Ue=Fo;function Ze(Kt,qt){var Sr=xt(this,he,Kt,qt),qr=xt(this,we,Kt,qt);return"M"+Sr.p0+Lt(Sr.r,Sr.p1,Sr.a1-Sr.a0)+(vt(Sr,qr)?jt(Sr.r,Sr.p1,Sr.r,Sr.p0):jt(Sr.r,Sr.p1,qr.r,qr.p0)+Lt(qr.r,qr.p1,qr.a1-qr.a0)+jt(qr.r,qr.p1,Sr.r,Sr.p0))+"Z"}function xt(Kt,qt,Sr,qr){var cn=qt.call(Kt,Sr,qr),kr=Ie.call(Kt,cn,qr),Vr=He.call(Kt,cn,qr)-ut,Xr=Ue.call(Kt,cn,qr)-ut;return{r:kr,a0:Vr,a1:Xr,p0:[kr*Math.cos(Vr),kr*Math.sin(Vr)],p1:[kr*Math.cos(Xr),kr*Math.sin(Xr)]}}function vt(Kt,qt){return Kt.a0==qt.a0&&Kt.a1==qt.a1}function Lt(Kt,qt,Sr){return"A"+Kt+","+Kt+" 0 "+ +(Sr>Pe)+",1 "+qt}function jt(Kt,qt,Sr,qr){return"Q 0,0 "+qr}return Ze.radius=function(Kt){return arguments.length?(Ie=nt(Kt),Ze):Ie},Ze.source=function(Kt){return arguments.length?(he=nt(Kt),Ze):he},Ze.target=function(Kt){return arguments.length?(we=nt(Kt),Ze):we},Ze.startAngle=function(Kt){return arguments.length?(He=nt(Kt),Ze):He},Ze.endAngle=function(Kt){return arguments.length?(Ue=nt(Kt),Ze):Ue},Ze};function At(he){return he.radius}s.svg.diagonal=function(){var he=bt,we=mt,Ie=lr;function He(Ue,Ze){var xt=he.call(this,Ue,Ze),vt=we.call(this,Ue,Ze),Lt=(xt.y+vt.y)/2,jt=[xt,{x:xt.x,y:Lt},{x:vt.x,y:Lt},vt];return jt=jt.map(Ie),"M"+jt[0]+"C"+jt[1]+" "+jt[2]+" "+jt[3]}return He.source=function(Ue){return arguments.length?(he=nt(Ue),He):he},He.target=function(Ue){return arguments.length?(we=nt(Ue),He):we},He.projection=function(Ue){return arguments.length?(Ie=Ue,He):Ie},He};function lr(he){return[he.x,he.y]}s.svg.diagonal.radial=function(){var he=s.svg.diagonal(),we=lr,Ie=he.projection;return he.projection=function(He){return arguments.length?Ie(pr(we=He)):we},he};function pr(he){return function(){var we=he.apply(this,arguments),Ie=we[0],He=we[1]-ut;return[Ie*Math.cos(He),Ie*Math.sin(He)]}}s.svg.symbol=function(){var he=mr,we=or;function Ie(He,Ue){return(Yr.get(he.call(this,He,Ue))||Pr)(we.call(this,He,Ue))}return Ie.type=function(He){return arguments.length?(he=nt(He),Ie):he},Ie.size=function(He){return arguments.length?(we=nt(He),Ie):we},Ie};function or(){return 64}function mr(){return"circle"}function Pr(he){var we=Math.sqrt(he/Pe);return"M0,"+we+"A"+we+","+we+" 0 1,1 0,"+-we+"A"+we+","+we+" 0 1,1 0,"+we+"Z"}var Yr=s.map({circle:Pr,cross:function(he){var we=Math.sqrt(he/5)/2;return"M"+-3*we+","+-we+"H"+-we+"V"+-3*we+"H"+we+"V"+-we+"H"+3*we+"V"+we+"H"+we+"V"+3*we+"H"+-we+"V"+we+"H"+-3*we+"Z"},diamond:function(he){var we=Math.sqrt(he/(2*An)),Ie=we*An;return"M0,"+-we+"L"+Ie+",0 0,"+we+" "+-Ie+",0Z"},square:function(he){var we=Math.sqrt(he)/2;return"M"+-we+","+-we+"L"+we+","+-we+" "+we+","+we+" "+-we+","+we+"Z"},"triangle-down":function(he){var we=Math.sqrt(he/tn),Ie=we*tn/2;return"M0,"+Ie+"L"+we+","+-Ie+" "+-we+","+-Ie+"Z"},"triangle-up":function(he){var we=Math.sqrt(he/tn),Ie=we*tn/2;return"M0,"+-Ie+"L"+we+","+Ie+" "+-we+","+Ie+"Z"}});s.svg.symbolTypes=Yr.keys();var tn=Math.sqrt(3),An=Math.tan(30*It);q.transition=function(he){for(var we=Ka||++qa,Ie=li(he),He=[],Ue,Ze,xt=oi||{time:Date.now(),ease:_l,delay:0,duration:250},vt=-1,Lt=this.length;++vt<Lt;){He.push(Ue=[]);for(var jt=this[vt],Kt=-1,qt=jt.length;++Kt<qt;)(Ze=jt[Kt])&&ao(Ze,Kt,Ie,we,xt),Ue.push(Ze)}return xa(He,Ie,we)},q.interrupt=function(he){return this.each(he==null?zn:Xn(li(he)))};var zn=Xn(li());function Xn(he){return function(){var we,Ie,He;(we=this[he])&&(He=we[Ie=we.active])&&(He.timer.c=null,He.timer.t=NaN,--we.count?delete we[Ie]:delete this[he],we.active+=.5,He.event&&He.event.interrupt.call(this,this.__data__,He.index))}}function xa(he,we,Ie){return fe(he,Ta),he.namespace=we,he.id=Ie,he}var Ta=[],qa=0,Ka,oi;Ta.call=q.call,Ta.empty=q.empty,Ta.node=q.node,Ta.size=q.size,s.transition=function(he,we){return he&&he.transition?Ka?he.transition(we):he:s.selection().transition(he)},s.transition.prototype=Ta,Ta.select=function(he){var we=this.id,Ie=this.namespace,He=[],Ue,Ze,xt;he=X(he);for(var vt=-1,Lt=this.length;++vt<Lt;){He.push(Ue=[]);for(var jt=this[vt],Kt=-1,qt=jt.length;++Kt<qt;)(xt=jt[Kt])&&(Ze=he.call(xt,xt.__data__,Kt,vt))?("__data__"in xt&&(Ze.__data__=xt.__data__),ao(Ze,Kt,Ie,we,xt[Ie][we]),Ue.push(Ze)):Ue.push(null)}return xa(He,Ie,we)},Ta.selectAll=function(he){var we=this.id,Ie=this.namespace,He=[],Ue,Ze,xt,vt,Lt;he=J(he);for(var jt=-1,Kt=this.length;++jt<Kt;)for(var qt=this[jt],Sr=-1,qr=qt.length;++Sr<qr;)if(xt=qt[Sr]){Lt=xt[Ie][we],Ze=he.call(xt,xt.__data__,Sr,jt),He.push(Ue=[]);for(var cn=-1,kr=Ze.length;++cn<kr;)(vt=Ze[cn])&&ao(vt,cn,Ie,we,Lt),Ue.push(vt)}return xa(He,Ie,we)},Ta.filter=function(he){var we=[],Ie,He,Ue;typeof he!="function"&&(he=_e(he));for(var Ze=0,xt=this.length;Ze<xt;Ze++){we.push(Ie=[]);for(var He=this[Ze],vt=0,Lt=He.length;vt<Lt;vt++)(Ue=He[vt])&&he.call(Ue,Ue.__data__,vt,Ze)&&Ie.push(Ue)}return xa(we,this.namespace,this.id)},Ta.tween=function(he,we){var Ie=this.id,He=this.namespace;return arguments.length<2?this.node()[He][Ie].tween.get(he):Ve(this,we==null?function(Ue){Ue[He][Ie].tween.remove(he)}:function(Ue){Ue[He][Ie].tween.set(he,we)})};function xi(he,we,Ie,He){var Ue=he.id,Ze=he.namespace;return Ve(he,typeof Ie=="function"?function(xt,vt,Lt){xt[Ze][Ue].tween.set(we,He(Ie.call(xt,xt.__data__,vt,Lt)))}:(Ie=He(Ie),function(xt){xt[Ze][Ue].tween.set(we,Ie)}))}Ta.attr=function(he,we){if(arguments.length<2){for(we in he)this.attr(we,he[we]);return this}var Ie=he=="transform"?zu:Ao,He=s.ns.qualify(he);function Ue(){this.removeAttribute(He)}function Ze(){this.removeAttributeNS(He.space,He.local)}function xt(Lt){return Lt==null?Ue:(Lt+="",function(){var jt=this.getAttribute(He),Kt;return jt!==Lt&&(Kt=Ie(jt,Lt),function(qt){this.setAttribute(He,Kt(qt))})})}function vt(Lt){return Lt==null?Ze:(Lt+="",function(){var jt=this.getAttributeNS(He.space,He.local),Kt;return jt!==Lt&&(Kt=Ie(jt,Lt),function(qt){this.setAttributeNS(He.space,He.local,Kt(qt))})})}return xi(this,"attr."+he,we,He.local?vt:xt)},Ta.attrTween=function(he,we){var Ie=s.ns.qualify(he);function He(Ze,xt){var vt=we.call(this,Ze,xt,this.getAttribute(Ie));return vt&&function(Lt){this.setAttribute(Ie,vt(Lt))}}function Ue(Ze,xt){var vt=we.call(this,Ze,xt,this.getAttributeNS(Ie.space,Ie.local));return vt&&function(Lt){this.setAttributeNS(Ie.space,Ie.local,vt(Lt))}}return this.tween("attr."+he,Ie.local?Ue:He)},Ta.style=function(he,we,Ie){var He=arguments.length;if(He<3){if(typeof he!="string"){He<2&&(we="");for(Ie in he)this.style(Ie,he[Ie],we);return this}Ie=""}function Ue(){this.style.removeProperty(he)}function Ze(xt){return xt==null?Ue:(xt+="",function(){var vt=a(this).getComputedStyle(this,null).getPropertyValue(he),Lt;return vt!==xt&&(Lt=Ao(vt,xt),function(jt){this.style.setProperty(he,Lt(jt),Ie)})})}return xi(this,"style."+he,we,Ze)},Ta.styleTween=function(he,we,Ie){arguments.length<3&&(Ie="");function He(Ue,Ze){var xt=we.call(this,Ue,Ze,a(this).getComputedStyle(this,null).getPropertyValue(he));return xt&&function(vt){this.style.setProperty(he,xt(vt),Ie)}}return this.tween("style."+he,He)},Ta.text=function(he){return xi(this,"text",he,So)};function So(he){return he==null&&(he=""),function(){this.textContent=he}}Ta.remove=function(){var he=this.namespace;return this.each("end.transition",function(){var we;this[he].count<2&&(we=this.parentNode)&&we.removeChild(this)})},Ta.ease=function(he){var we=this.id,Ie=this.namespace;return arguments.length<1?this.node()[Ie][we].ease:(typeof he!="function"&&(he=s.ease.apply(s,arguments)),Ve(this,function(He){He[Ie][we].ease=he}))},Ta.delay=function(he){var we=this.id,Ie=this.namespace;return arguments.length<1?this.node()[Ie][we].delay:Ve(this,typeof he=="function"?function(He,Ue,Ze){He[Ie][we].delay=+he.call(He,He.__data__,Ue,Ze)}:(he=+he,function(He){He[Ie][we].delay=he}))},Ta.duration=function(he){var we=this.id,Ie=this.namespace;return arguments.length<1?this.node()[Ie][we].duration:Ve(this,typeof he=="function"?function(He,Ue,Ze){He[Ie][we].duration=Math.max(1,he.call(He,He.__data__,Ue,Ze))}:(he=Math.max(1,he),function(He){He[Ie][we].duration=he}))},Ta.each=function(he,we){var Ie=this.id,He=this.namespace;if(arguments.length<2){var Ue=oi,Ze=Ka;try{Ka=Ie,Ve(this,function(xt,vt,Lt){oi=xt[He][Ie],he.call(xt,xt.__data__,vt,Lt)})}finally{oi=Ue,Ka=Ze}}else Ve(this,function(xt){var vt=xt[He][Ie];(vt.event||(vt.event=s.dispatch("start","end","interrupt"))).on(he,we)});return this},Ta.transition=function(){for(var he=this.id,we=++qa,Ie=this.namespace,He=[],Ue,Ze,xt,vt,Lt=0,jt=this.length;Lt<jt;Lt++){He.push(Ue=[]);for(var Ze=this[Lt],Kt=0,qt=Ze.length;Kt<qt;Kt++)(xt=Ze[Kt])&&(vt=xt[Ie][he],ao(xt,Kt,Ie,we,{time:vt.time,ease:vt.ease,delay:vt.delay+vt.duration,duration:vt.duration})),Ue.push(xt)}return xa(He,Ie,we)};function li(he){return he==null?"__transition__":"__transition_"+he+"__"}function ao(he,we,Ie,He,Ue){var Ze=he[Ie]||(he[Ie]={active:0,count:0}),xt=Ze[He],vt,Lt,jt,Kt,qt;function Sr(kr){var Vr=xt.delay;if(Lt.t=Vr+vt,Vr<=kr)return qr(kr-Vr);Lt.c=qr}function qr(kr){var Vr=Ze.active,Xr=Ze[Vr];Xr&&(Xr.timer.c=null,Xr.timer.t=NaN,--Ze.count,delete Ze[Vr],Xr.event&&Xr.event.interrupt.call(he,he.__data__,Xr.index));for(var on in Ze)if(+on<He){var ln=Ze[on];ln.timer.c=null,ln.timer.t=NaN,--Ze.count,delete Ze[on]}Lt.c=cn,Nr(function(){return Lt.c&&cn(kr||1)&&(Lt.c=null,Lt.t=NaN),1},0,vt),Ze.active=He,xt.event&&xt.event.start.call(he,he.__data__,we),qt=[],xt.tween.forEach(function(Zr,$n){($n=$n.call(he,he.__data__,we))&&qt.push($n)}),Kt=xt.ease,jt=xt.duration}function cn(kr){for(var Vr=kr/jt,Xr=Kt(Vr),on=qt.length;on>0;)qt[--on].call(he,Xr);if(Vr>=1)return xt.event&&xt.event.end.call(he,he.__data__,we),--Ze.count?delete Ze[He]:delete he[Ie],1}xt||(vt=Ue.time,Lt=Nr(Sr,0,vt),xt=Ze[He]={tween:new S,time:vt,timer:Lt,delay:Ue.delay,duration:Ue.duration,ease:Ue.ease,index:we},Ue=null,++Ze.count)}s.svg.axis=function(){var he=s.scale.linear(),we=Lo,Ie=6,He=6,Ue=3,Ze=[10],xt=null,vt;function Lt(jt){jt.each(function(){var Kt=s.select(this),qt=this.__chart__||he,Sr=this.__chart__=he.copy(),qr=xt==null?Sr.ticks?Sr.ticks.apply(Sr,Ze):Sr.domain():xt,cn=vt==null?Sr.tickFormat?Sr.tickFormat.apply(Sr,Ze):R:vt,kr=Kt.selectAll(".tick").data(qr,Sr),Vr=kr.enter().insert("g",".domain").attr("class","tick").style("opacity",ht),Xr=s.transition(kr.exit()).style("opacity",ht).remove(),on=s.transition(kr.order()).style("opacity",1),ln=Math.max(Ie,0)+Ue,Zr,$n=an(Sr),aa=Kt.selectAll(".domain").data([0]),Sa=(aa.enter().append("path").attr("class","domain"),s.transition(aa));Vr.append("line"),Vr.append("text");var ua=Vr.select("line"),La=on.select("line"),ha=kr.select("text").text(cn),Wa=Vr.select("text"),Fa=on.select("text"),ai=we==="top"||we==="left"?-1:1,ki,Po,Xi,va;if(we==="bottom"||we==="top"?(Zr=Pi,ki="x",Xi="y",Po="x2",va="y2",ha.attr("dy",ai<0?"0em":".71em").style("text-anchor","middle"),Sa.attr("d","M"+$n[0]+","+ai*He+"V0H"+$n[1]+"V"+ai*He)):(Zr=zi,ki="y",Xi="x",Po="y2",va="x2",ha.attr("dy",".32em").style("text-anchor",ai<0?"end":"start"),Sa.attr("d","M"+ai*He+","+$n[0]+"H0V"+$n[1]+"H"+ai*He)),ua.attr(va,ai*Ie),Wa.attr(Xi,ai*ln),La.attr(Po,0).attr(va,ai*Ie),Fa.attr(ki,0).attr(Xi,ai*ln),Sr.rangeBand){var ci=Sr,Ja=ci.rangeBand()/2;qt=Sr=function(Ni){return ci(Ni)+Ja}}else qt.rangeBand?qt=Sr:Xr.call(Zr,Sr,qt);Vr.call(Zr,qt,Sr),on.call(Zr,Sr,Sr)})}return Lt.scale=function(jt){return arguments.length?(he=jt,Lt):he},Lt.orient=function(jt){return arguments.length?(we=jt in jo?jt+"":Lo,Lt):we},Lt.ticks=function(){return arguments.length?(Ze=h(arguments),Lt):Ze},Lt.tickValues=function(jt){return arguments.length?(xt=jt,Lt):xt},Lt.tickFormat=function(jt){return arguments.length?(vt=jt,Lt):vt},Lt.tickSize=function(jt){var Kt=arguments.length;return Kt?(Ie=+jt,He=+arguments[Kt-1],Lt):Ie},Lt.innerTickSize=function(jt){return arguments.length?(Ie=+jt,Lt):Ie},Lt.outerTickSize=function(jt){return arguments.length?(He=+jt,Lt):He},Lt.tickPadding=function(jt){return arguments.length?(Ue=+jt,Lt):Ue},Lt.tickSubdivide=function(){return arguments.length&&Lt},Lt};var Lo="bottom",jo={top:1,right:1,bottom:1,left:1};function Pi(he,we,Ie){he.attr("transform",function(He){var Ue=we(He);return"translate("+(isFinite(Ue)?Ue:Ie(He))+",0)"})}function zi(he,we,Ie){he.attr("transform",function(He){var Ue=we(He);return"translate(0,"+(isFinite(Ue)?Ue:Ie(He))+")"})}s.svg.brush=function(){var he=K(Kt,"brushstart","brush","brushend"),we=null,Ie=null,He=[0,0],Ue=[0,0],Ze,xt,vt=!0,Lt=!0,jt=Oo[0];function Kt(kr){kr.each(function(){var Vr=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),Xr=Vr.selectAll(".background").data([0]);Xr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Vr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var on=Vr.selectAll(".resize").data(jt,R);on.exit().remove(),on.enter().append("g").attr("class",function(aa){return"resize "+aa}).style("cursor",function(aa){return Us[aa]}).append("rect").attr("x",function(aa){return/[ew]$/.test(aa)?-3:null}).attr("y",function(aa){return/^[ns]/.test(aa)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),on.style("display",Kt.empty()?"none":null);var ln=s.transition(Vr),Zr=s.transition(Xr),$n;we&&($n=an(we),Zr.attr("x",$n[0]).attr("width",$n[1]-$n[0]),Sr(ln)),Ie&&($n=an(Ie),Zr.attr("y",$n[0]).attr("height",$n[1]-$n[0]),qr(ln)),qt(ln)})}Kt.event=function(kr){kr.each(function(){var Vr=he.of(this,arguments),Xr={x:He,y:Ue,i:Ze,j:xt},on=this.__chart__||Xr;this.__chart__=Xr,Ka?s.select(this).transition().each("start.brush",function(){Ze=on.i,xt=on.j,He=on.x,Ue=on.y,Vr({type:"brushstart"})}).tween("brush:brush",function(){var ln=vo(He,Xr.x),Zr=vo(Ue,Xr.y);return Ze=xt=null,function($n){He=Xr.x=ln($n),Ue=Xr.y=Zr($n),Vr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ze=Xr.i,xt=Xr.j,Vr({type:"brush",mode:"resize"}),Vr({type:"brushend"})}):(Vr({type:"brushstart"}),Vr({type:"brush",mode:"resize"}),Vr({type:"brushend"}))})};function qt(kr){kr.selectAll(".resize").attr("transform",function(Vr){return"translate("+He[+/e$/.test(Vr)]+","+Ue[+/^s/.test(Vr)]+")"})}function Sr(kr){kr.select(".extent").attr("x",He[0]),kr.selectAll(".extent,.n>rect,.s>rect").attr("width",He[1]-He[0])}function qr(kr){kr.select(".extent").attr("y",Ue[0]),kr.selectAll(".extent,.e>rect,.w>rect").attr("height",Ue[1]-Ue[0])}function cn(){var kr=this,Vr=s.select(s.event.target),Xr=he.of(kr,arguments),on=s.select(kr),ln=Vr.datum(),Zr=!/^(n|s)$/.test(ln)&&we,$n=!/^(e|w)$/.test(ln)&&Ie,aa=Vr.classed("extent"),Sa=Vt(kr),ua,La=s.mouse(kr),ha,Wa=s.select(a(kr)).on("keydown.brush",ki).on("keyup.brush",Po);if(s.event.changedTouches?Wa.on("touchmove.brush",Xi).on("touchend.brush",ci):Wa.on("mousemove.brush",Xi).on("mouseup.brush",ci),on.interrupt().selectAll("*").interrupt(),aa)La[0]=He[0]-La[0],La[1]=Ue[0]-La[1];else if(ln){var Fa=+/w$/.test(ln),ai=+/^n/.test(ln);ha=[He[1-Fa]-La[0],Ue[1-ai]-La[1]],La[0]=He[Fa],La[1]=Ue[ai]}else s.event.altKey&&(ua=La.slice());on.style("pointer-events","none").selectAll(".resize").style("display",null),s.select("body").style("cursor",Vr.style("cursor")),Xr({type:"brushstart"}),Xi();function ki(){s.event.keyCode==32&&(aa||(ua=null,La[0]-=He[1],La[1]-=Ue[1],aa=2),Q())}function Po(){s.event.keyCode==32&&aa==2&&(La[0]+=He[1],La[1]+=Ue[1],aa=0,Q())}function Xi(){var Ja=s.mouse(kr),Ni=!1;ha&&(Ja[0]+=ha[0],Ja[1]+=ha[1]),aa||(s.event.altKey?(ua||(ua=[(He[0]+He[1])/2,(Ue[0]+Ue[1])/2]),La[0]=He[+(Ja[0]<ua[0])],La[1]=Ue[+(Ja[1]<ua[1])]):ua=null),Zr&&va(Ja,we,0)&&(Sr(on),Ni=!0),$n&&va(Ja,Ie,1)&&(qr(on),Ni=!0),Ni&&(qt(on),Xr({type:"brush",mode:aa?"move":"resize"}))}function va(Ja,Ni,pi){var Mo=an(Ni),po=Mo[0],zo=Mo[1],ms=La[pi],cs=pi?Ue:He,xs=cs[1]-cs[0],io,qi;if(aa&&(po-=ms,zo-=xs+ms),io=(pi?Lt:vt)?Math.max(po,Math.min(zo,Ja[pi])):Ja[pi],aa?qi=(io+=ms)+xs:(ua&&(ms=Math.max(po,Math.min(zo,2*ua[pi]-io))),ms<io?(qi=io,io=ms):qi=ms),cs[0]!=io||cs[1]!=qi)return pi?xt=null:Ze=null,cs[0]=io,cs[1]=qi,!0}function ci(){Xi(),on.style("pointer-events","all").selectAll(".resize").style("display",Kt.empty()?"none":null),s.select("body").style("cursor",null),Wa.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Sa(),Xr({type:"brushend"})}}return Kt.x=function(kr){return arguments.length?(we=kr,jt=Oo[!we<<1|!Ie],Kt):we},Kt.y=function(kr){return arguments.length?(Ie=kr,jt=Oo[!we<<1|!Ie],Kt):Ie},Kt.clamp=function(kr){return arguments.length?(we&&Ie?(vt=!!kr[0],Lt=!!kr[1]):we?vt=!!kr:Ie&&(Lt=!!kr),Kt):we&&Ie?[vt,Lt]:we?vt:Ie?Lt:null},Kt.extent=function(kr){var Vr,Xr,on,ln,Zr;return arguments.length?(we&&(Vr=kr[0],Xr=kr[1],Ie&&(Vr=Vr[0],Xr=Xr[0]),Ze=[Vr,Xr],we.invert&&(Vr=we(Vr),Xr=we(Xr)),Xr<Vr&&(Zr=Vr,Vr=Xr,Xr=Zr),(Vr!=He[0]||Xr!=He[1])&&(He=[Vr,Xr])),Ie&&(on=kr[0],ln=kr[1],we&&(on=on[1],ln=ln[1]),xt=[on,ln],Ie.invert&&(on=Ie(on),ln=Ie(ln)),ln<on&&(Zr=on,on=ln,ln=Zr),(on!=Ue[0]||ln!=Ue[1])&&(Ue=[on,ln])),Kt):(we&&(Ze?(Vr=Ze[0],Xr=Ze[1]):(Vr=He[0],Xr=He[1],we.invert&&(Vr=we.invert(Vr),Xr=we.invert(Xr)),Xr<Vr&&(Zr=Vr,Vr=Xr,Xr=Zr))),Ie&&(xt?(on=xt[0],ln=xt[1]):(on=Ue[0],ln=Ue[1],Ie.invert&&(on=Ie.invert(on),ln=Ie.invert(ln)),ln<on&&(Zr=on,on=ln,ln=Zr))),we&&Ie?[[Vr,on],[Xr,ln]]:we?[Vr,Xr]:Ie&&[on,ln])},Kt.clear=function(){return Kt.empty()||(He=[0,0],Ue=[0,0],Ze=xt=null),Kt},Kt.empty=function(){return!!we&&He[0]==He[1]||!!Ie&&Ue[0]==Ue[1]},s.rebind(Kt,he,"on")};var Us={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Oo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];s.text=Rt(function(he){return he.responseText}),s.json=function(he,we){return Jt(he,"application/json",ts,we)};function ts(he){return JSON.parse(he.responseText)}s.html=function(he,we){return Jt(he,"text/html",ys,we)};function ys(he){var we=y.createRange();return we.selectNode(y.body),we.createContextualFragment(he.responseText)}s.xml=Rt(function(he){return he.responseXML}),typeof I=="object"&&I.exports?I.exports=s:this.d3=s}).apply(self)},{}],59:[function(e,I,F){I.exports=e("./quad")},{"./quad":60}],60:[function(e,I,F){var s=e("binary-search-bounds"),o=e("clamp"),h=e("parse-rect"),y=e("array-bounds"),t=e("pick-by-alias"),a=e("defined"),i=e("flatten-vertex-data"),n=e("is-obj"),r=e("dtype"),f=e("math-log2"),u=1073741824;I.exports=function(d,b){b||(b={}),d=i(d,"float64"),b=t(b,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var g=a(b.maxDepth,255),_=a(b.bounds,y(d,2));_[0]===_[2]&&_[2]++,_[1]===_[3]&&_[3]++;var p=l(d,_),A=d.length>>>1,c;b.dtype||(b.dtype="array"),typeof b.dtype=="string"?c=new(r(b.dtype))(A):b.dtype&&(c=b.dtype,Array.isArray(c)&&(c.length=A));for(var S=0;S<A;++S)c[S]=S;var T=[],x=[],w=[],v=[];R(0,0,1,c,0,1);for(var C=0,M=0;M<T.length;M++){var E=T[M];if(c.set)c.set(E,C);else for(var L=0,z=E.length;L<z;L++)c[L+C]=E[L];var O=C+T[M].length;v[M]=[C,O],C=O}return c.range=D,c;function R($,W,re,Q,Z,K){if(!Q.length)return null;var le=T[Z]||(T[Z]=[]),fe=w[Z]||(w[Z]=[]),ue=x[Z]||(x[Z]=[]),V=le.length;if(Z++,Z>g||K>u){for(var j=0;j<Q.length;j++)le.push(Q[j]),fe.push(K),ue.push(null,null,null,null);return V}if(le.push(Q[0]),fe.push(K),Q.length<=1)return ue.push(null,null,null,null),V;for(var ee=re*.5,q=$+ee,X=W+ee,J=[],ie=[],ne=[],oe=[],se=1,me=Q.length;se<me;se++){var ce=Q[se],pe=p[ce*2],xe=p[ce*2+1];pe<q?xe<X?J.push(ce):ie.push(ce):xe<X?ne.push(ce):oe.push(ce)}return K<<=2,ue.push(R($,W,ee,J,Z,K),R($,X,ee,ie,Z,K+1),R(q,W,ee,ne,Z,K+2),R(q,X,ee,oe,Z,K+3)),V}function D(){for(var $=[],W=arguments.length;W--;)$[W]=arguments[W];var re;if(n($[$.length-1])){var Q=$.pop();!$.length&&(Q.x!=null||Q.l!=null||Q.left!=null)&&($=[Q],re={}),re=t(Q,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else re={};$.length||($=_);var Z=h.apply(void 0,$),K=[Math.min(Z.x,Z.x+Z.width),Math.min(Z.y,Z.y+Z.height),Math.max(Z.x,Z.x+Z.width),Math.max(Z.y,Z.y+Z.height)],le=K[0],fe=K[1],ue=K[2],V=K[3],j=l([le,fe,ue,V],_),ee=j[0],q=j[1],X=j[2],J=j[3],ie=a(re.level,T.length);if(re.d!=null){var ne;typeof re.d=="number"?ne=[re.d,re.d]:re.d.length&&(ne=re.d),ie=Math.min(Math.max(Math.ceil(-f(Math.abs(ne[0])/(_[2]-_[0]))),Math.ceil(-f(Math.abs(ne[1])/(_[3]-_[1])))),ie)}if(ie=Math.min(ie,T.length),re.lod)return H(ee,q,X,J,ie);var oe=[];se(0,0,1,0,0,1);function se(ce,pe,xe,Se,Ae,Ce){if(!(Ae===null||Ce===null)){var Ee=ce+xe,Oe=pe+xe;if(!(ee>Ee||q>Oe||X<ce||J<pe)&&!(Se>=ie)&&Ae!==Ce){var _e=T[Se];Ce===void 0&&(Ce=_e.length);for(var Re=Ae;Re<Ce;Re++){var Ve=_e[Re],Je=d[Ve*2],ze=d[Ve*2+1];Je>=le&&Je<=ue&&ze>=fe&&ze<=V&&oe.push(Ve)}var De=x[Se],je=De[Ae*4+0],dt=De[Ae*4+1],Et=De[Ae*4+2],$t=De[Ae*4+3],wt=me(De,Ae+1),Ot=xe*.5,Vt=Se+1;se(ce,pe,Ot,Vt,je,dt||Et||$t||wt),se(ce,pe+Ot,Ot,Vt,dt,Et||$t||wt),se(ce+Ot,pe,Ot,Vt,Et,$t||wt),se(ce+Ot,pe+Ot,Ot,Vt,$t,wt)}}}function me(ce,pe){for(var xe=null,Se=0;xe===null;)if(xe=ce[pe*4+Se],Se++,Se>ce.length)return null;return xe}return oe}function H($,W,re,Q,Z){for(var K=[],le=0;le<Z;le++){var fe=w[le],ue=v[le][0],V=B($,W,le),j=B(re,Q,le),ee=s.ge(fe,V),q=s.gt(fe,j,ee,fe.length-1);K[le]=[ee+ue,q+ue]}return K}function B($,W,re){for(var Q=1,Z=.5,K=.5,le=.5,fe=0;fe<re;fe++)Q<<=2,Q+=$<Z?W<K?0:1:W<K?2:3,le*=.5,Z+=$<Z?-le:le,K+=W<K?-le:le;return Q}};function l(m,d){for(var b=d[0],g=d[1],_=d[2],p=d[3],A=1/(_-b),c=1/(p-g),S=new Array(m.length),T=0,x=m.length/2;T<x;T++)S[2*T]=o((m[2*T]-b)*A,0,1),S[2*T+1]=o((m[2*T+1]-g)*c,0,1);return S}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(e,I,F){Object.defineProperty(F,"__esModule",{value:!0});var s=e("@turf/meta"),o=6378137;function h(n){return s.geomReduce(n,function(r,f){return r+y(f)},0)}F.default=h;function y(n){var r=0,f;switch(n.type){case"Polygon":return t(n.coordinates);case"MultiPolygon":for(f=0;f<n.coordinates.length;f++)r+=t(n.coordinates[f]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function t(n){var r=0;if(n&&n.length>0){r+=Math.abs(a(n[0]));for(var f=1;f<n.length;f++)r-=Math.abs(a(n[f]))}return r}function a(n){var r,f,u,l,m,d,b,g=0,_=n.length;if(_>2){for(b=0;b<_;b++)b===_-2?(l=_-2,m=_-1,d=0):b===_-1?(l=_-1,m=0,d=1):(l=b,m=b+1,d=b+2),r=n[l],f=n[m],u=n[d],g+=(i(u[0])-i(r[0]))*Math.sin(i(f[1]));g=g*o*o/2}return g}function i(n){return n*Math.PI/180}},{"@turf/meta":63}],62:[function(e,I,F){Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=63710088e-1,F.factors={centimeters:F.earthRadius*100,centimetres:F.earthRadius*100,degrees:F.earthRadius/111325,feet:F.earthRadius*3.28084,inches:F.earthRadius*39.37,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:F.earthRadius*1e3,millimetres:F.earthRadius*1e3,nauticalmiles:F.earthRadius/1852,radians:1,yards:F.earthRadius*1.0936},F.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/F.earthRadius,yards:1.0936133},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(M,E,L){L===void 0&&(L={});var z={type:"Feature"};return(L.id===0||L.id)&&(z.id=L.id),L.bbox&&(z.bbox=L.bbox),z.properties=E||{},z.geometry=M,z}F.feature=s;function o(M,E,L){switch(M){case"Point":return h(E).geometry;case"LineString":return i(E).geometry;case"Polygon":return t(E).geometry;case"MultiPoint":return u(E).geometry;case"MultiLineString":return f(E).geometry;case"MultiPolygon":return l(E).geometry;default:throw new Error(M+" is invalid")}}F.geometry=o;function h(M,E,L){if(L===void 0&&(L={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!x(M[0])||!x(M[1]))throw new Error("coordinates must contain numbers");var z={type:"Point",coordinates:M};return s(z,E,L)}F.point=h;function y(M,E,L){return L===void 0&&(L={}),r(M.map(function(z){return h(z,E)}),L)}F.points=y;function t(M,E,L){L===void 0&&(L={});for(var z=0,O=M;z<O.length;z++){var R=O[z];if(R.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var D=0;D<R[R.length-1].length;D++)if(R[R.length-1][D]!==R[0][D])throw new Error("First and last Position are not equivalent.")}var H={type:"Polygon",coordinates:M};return s(H,E,L)}F.polygon=t;function a(M,E,L){return L===void 0&&(L={}),r(M.map(function(z){return t(z,E)}),L)}F.polygons=a;function i(M,E,L){if(L===void 0&&(L={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");var z={type:"LineString",coordinates:M};return s(z,E,L)}F.lineString=i;function n(M,E,L){return L===void 0&&(L={}),r(M.map(function(z){return i(z,E)}),L)}F.lineStrings=n;function r(M,E){E===void 0&&(E={});var L={type:"FeatureCollection"};return E.id&&(L.id=E.id),E.bbox&&(L.bbox=E.bbox),L.features=M,L}F.featureCollection=r;function f(M,E,L){L===void 0&&(L={});var z={type:"MultiLineString",coordinates:M};return s(z,E,L)}F.multiLineString=f;function u(M,E,L){L===void 0&&(L={});var z={type:"MultiPoint",coordinates:M};return s(z,E,L)}F.multiPoint=u;function l(M,E,L){L===void 0&&(L={});var z={type:"MultiPolygon",coordinates:M};return s(z,E,L)}F.multiPolygon=l;function m(M,E,L){L===void 0&&(L={});var z={type:"GeometryCollection",geometries:M};return s(z,E,L)}F.geometryCollection=m;function d(M,E){if(E===void 0&&(E=0),E&&!(E>=0))throw new Error("precision must be a positive number");var L=Math.pow(10,E||0);return Math.round(M*L)/L}F.round=d;function b(M,E){E===void 0&&(E="kilometers");var L=F.factors[E];if(!L)throw new Error(E+" units is invalid");return M*L}F.radiansToLength=b;function g(M,E){E===void 0&&(E="kilometers");var L=F.factors[E];if(!L)throw new Error(E+" units is invalid");return M/L}F.lengthToRadians=g;function _(M,E){return A(g(M,E))}F.lengthToDegrees=_;function p(M){var E=M%360;return E<0&&(E+=360),E}F.bearingToAzimuth=p;function A(M){var E=M%(2*Math.PI);return E*180/Math.PI}F.radiansToDegrees=A;function c(M){var E=M%360;return E*Math.PI/180}F.degreesToRadians=c;function S(M,E,L){if(E===void 0&&(E="kilometers"),L===void 0&&(L="kilometers"),!(M>=0))throw new Error("length must be a positive number");return b(g(M,E),L)}F.convertLength=S;function T(M,E,L){if(E===void 0&&(E="meters"),L===void 0&&(L="kilometers"),!(M>=0))throw new Error("area must be a positive number");var z=F.areaFactors[E];if(!z)throw new Error("invalid original units");var O=F.areaFactors[L];if(!O)throw new Error("invalid final units");return M/z*O}F.convertArea=T;function x(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}F.isNumber=x;function w(M){return!!M&&M.constructor===Object}F.isObject=w;function v(M){if(!M)throw new Error("bbox is required");if(!Array.isArray(M))throw new Error("bbox must be an Array");if(M.length!==4&&M.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");M.forEach(function(E){if(!x(E))throw new Error("bbox must only contain numbers")})}F.validateBBox=v;function C(M){if(!M)throw new Error("id is required");if(["string","number"].indexOf(typeof M)===-1)throw new Error("id must be a number or a string")}F.validateId=C},{}],63:[function(e,I,F){Object.defineProperty(F,"__esModule",{value:!0});var s=e("@turf/helpers");function o(A,c,S){if(A!==null)for(var T,x,w,v,C,M,E,L=0,z=0,O,R=A.type,D=R==="FeatureCollection",H=R==="Feature",B=D?A.features.length:1,$=0;$<B;$++){E=D?A.features[$].geometry:H?A.geometry:A,O=E?E.type==="GeometryCollection":!1,C=O?E.geometries.length:1;for(var W=0;W<C;W++){var re=0,Q=0;if(v=O?E.geometries[W]:E,v!==null){M=v.coordinates;var Z=v.type;switch(L=S&&(Z==="Polygon"||Z==="MultiPolygon")?1:0,Z){case null:break;case"Point":if(c(M,z,$,re,Q)===!1)return!1;z++,re++;break;case"LineString":case"MultiPoint":for(T=0;T<M.length;T++){if(c(M[T],z,$,re,Q)===!1)return!1;z++,Z==="MultiPoint"&&re++}Z==="LineString"&&re++;break;case"Polygon":case"MultiLineString":for(T=0;T<M.length;T++){for(x=0;x<M[T].length-L;x++){if(c(M[T][x],z,$,re,Q)===!1)return!1;z++}Z==="MultiLineString"&&re++,Z==="Polygon"&&Q++}Z==="Polygon"&&re++;break;case"MultiPolygon":for(T=0;T<M.length;T++){for(Q=0,x=0;x<M[T].length;x++){for(w=0;w<M[T][x].length-L;w++){if(c(M[T][x][w],z,$,re,Q)===!1)return!1;z++}Q++}re++}break;case"GeometryCollection":for(T=0;T<v.geometries.length;T++)if(o(v.geometries[T],c,S)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function h(A,c,S,T){var x=S;return o(A,function(w,v,C,M,E){v===0&&S===void 0?x=w:x=c(x,w,v,C,M,E)},T),x}function y(A,c){var S;switch(A.type){case"FeatureCollection":for(S=0;S<A.features.length&&c(A.features[S].properties,S)!==!1;S++);break;case"Feature":c(A.properties,0);break}}function t(A,c,S){var T=S;return y(A,function(x,w){w===0&&S===void 0?T=x:T=c(T,x,w)}),T}function a(A,c){if(A.type==="Feature")c(A,0);else if(A.type==="FeatureCollection")for(var S=0;S<A.features.length&&c(A.features[S],S)!==!1;S++);}function i(A,c,S){var T=S;return a(A,function(x,w){w===0&&S===void 0?T=x:T=c(T,x,w)}),T}function n(A){var c=[];return o(A,function(S){c.push(S)}),c}function r(A,c){var S,T,x,w,v,C,M,E,L,z,O=0,R=A.type==="FeatureCollection",D=A.type==="Feature",H=R?A.features.length:1;for(S=0;S<H;S++){for(C=R?A.features[S].geometry:D?A.geometry:A,E=R?A.features[S].properties:D?A.properties:{},L=R?A.features[S].bbox:D?A.bbox:void 0,z=R?A.features[S].id:D?A.id:void 0,M=C?C.type==="GeometryCollection":!1,v=M?C.geometries.length:1,x=0;x<v;x++){if(w=M?C.geometries[x]:C,w===null){if(c(null,O,E,L,z)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(w,O,E,L,z)===!1)return!1;break}case"GeometryCollection":{for(T=0;T<w.geometries.length;T++)if(c(w.geometries[T],O,E,L,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}O++}}function f(A,c,S){var T=S;return r(A,function(x,w,v,C,M){w===0&&S===void 0?T=x:T=c(T,x,w,v,C,M)}),T}function u(A,c){r(A,function(S,T,x,w,v){var C=S===null?null:S.type;switch(C){case null:case"Point":case"LineString":case"Polygon":return c(s.feature(S,x,{bbox:w,id:v}),T,0)===!1?!1:void 0}var M;switch(C){case"MultiPoint":M="Point";break;case"MultiLineString":M="LineString";break;case"MultiPolygon":M="Polygon";break}for(var E=0;E<S.coordinates.length;E++){var L=S.coordinates[E],z={type:M,coordinates:L};if(c(s.feature(z,x),T,E)===!1)return!1}})}function l(A,c,S){var T=S;return u(A,function(x,w,v){w===0&&v===0&&S===void 0?T=x:T=c(T,x,w,v)}),T}function m(A,c){u(A,function(S,T,x){var w=0;if(!!S.geometry){var v=S.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var C,M=0,E=0,L=0;if(o(S,function(z,O,R,D,H){if(C===void 0||T>M||D>E||H>L){C=z,M=T,E=D,L=H,w=0;return}var B=s.lineString([C,z],S.properties);if(c(B,T,x,H,w)===!1)return!1;w++,C=z})===!1)return!1}}})}function d(A,c,S){var T=S,x=!1;return m(A,function(w,v,C,M,E){x===!1&&S===void 0?T=w:T=c(T,w,v,C,M,E),x=!0}),T}function b(A,c){if(!A)throw new Error("geojson is required");u(A,function(S,T,x){if(S.geometry!==null){var w=S.geometry.type,v=S.geometry.coordinates;switch(w){case"LineString":if(c(S,T,x,0,0)===!1)return!1;break;case"Polygon":for(var C=0;C<v.length;C++)if(c(s.lineString(v[C],S.properties),T,x,C)===!1)return!1;break}}})}function g(A,c,S){var T=S;return b(A,function(x,w,v,C){w===0&&S===void 0?T=x:T=c(T,x,w,v,C)}),T}function _(A,c){if(c=c||{},!s.isObject(c))throw new Error("options is invalid");var S=c.featureIndex||0,T=c.multiFeatureIndex||0,x=c.geometryIndex||0,w=c.segmentIndex||0,v=c.properties,C;switch(A.type){case"FeatureCollection":S<0&&(S=A.features.length+S),v=v||A.features[S].properties,C=A.features[S].geometry;break;case"Feature":v=v||A.properties,C=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=A;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var M=C.coordinates;switch(C.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=M.length+w-1),s.lineString([M[w],M[w+1]],v,c);case"Polygon":return x<0&&(x=M.length+x),w<0&&(w=M[x].length+w-1),s.lineString([M[x][w],M[x][w+1]],v,c);case"MultiLineString":return T<0&&(T=M.length+T),w<0&&(w=M[T].length+w-1),s.lineString([M[T][w],M[T][w+1]],v,c);case"MultiPolygon":return T<0&&(T=M.length+T),x<0&&(x=M[T].length+x),w<0&&(w=M[T][x].length-w-1),s.lineString([M[T][x][w],M[T][x][w+1]],v,c)}throw new Error("geojson is invalid")}function p(A,c){if(c=c||{},!s.isObject(c))throw new Error("options is invalid");var S=c.featureIndex||0,T=c.multiFeatureIndex||0,x=c.geometryIndex||0,w=c.coordIndex||0,v=c.properties,C;switch(A.type){case"FeatureCollection":S<0&&(S=A.features.length+S),v=v||A.features[S].properties,C=A.features[S].geometry;break;case"Feature":v=v||A.properties,C=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=A;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var M=C.coordinates;switch(C.type){case"Point":return s.point(M,v,c);case"MultiPoint":return T<0&&(T=M.length+T),s.point(M[T],v,c);case"LineString":return w<0&&(w=M.length+w),s.point(M[w],v,c);case"Polygon":return x<0&&(x=M.length+x),w<0&&(w=M[x].length+w),s.point(M[x][w],v,c);case"MultiLineString":return T<0&&(T=M.length+T),w<0&&(w=M[T].length+w),s.point(M[T][w],v,c);case"MultiPolygon":return T<0&&(T=M.length+T),x<0&&(x=M[T].length+x),w<0&&(w=M[T][x].length-w),s.point(M[T][x][w],v,c)}throw new Error("geojson is invalid")}F.coordEach=o,F.coordReduce=h,F.propEach=y,F.propReduce=t,F.featureEach=a,F.featureReduce=i,F.coordAll=n,F.geomEach=r,F.geomReduce=f,F.flattenEach=u,F.flattenReduce=l,F.segmentEach=m,F.segmentReduce=d,F.lineEach=b,F.lineReduce=g,F.findSegment=_,F.findPoint=p},{"@turf/helpers":62}],64:[function(e,I,F){Object.defineProperty(F,"__esModule",{value:!0});var s=e("@turf/meta");function o(h){var y=[1/0,1/0,-1/0,-1/0];return s.coordEach(h,function(t){y[0]>t[0]&&(y[0]=t[0]),y[1]>t[1]&&(y[1]=t[1]),y[2]<t[0]&&(y[2]=t[0]),y[3]<t[1]&&(y[3]=t[1])}),y}o.default=o,F.default=o},{"@turf/meta":66}],65:[function(e,I,F){arguments[4][62][0].apply(F,arguments)},{dup:62}],66:[function(e,I,F){arguments[4][63][0].apply(F,arguments)},{"@turf/helpers":65,dup:63}],67:[function(e,I,F){Object.defineProperty(F,"__esModule",{value:!0});var s=e("@turf/meta"),o=e("@turf/helpers");function h(y,t){t===void 0&&(t={});var a=0,i=0,n=0;return s.coordEach(y,function(r){a+=r[0],i+=r[1],n++}),o.point([a/n,i/n],t.properties)}F.default=h},{"@turf/helpers":68,"@turf/meta":69}],68:[function(e,I,F){Object.defineProperty(F,"__esModule",{value:!0}),F.earthRadius=63710088e-1,F.factors={centimeters:F.earthRadius*100,centimetres:F.earthRadius*100,degrees:F.earthRadius/111325,feet:F.earthRadius*3.28084,inches:F.earthRadius*39.37,kilometers:F.earthRadius/1e3,kilometres:F.earthRadius/1e3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:F.earthRadius*1e3,millimetres:F.earthRadius*1e3,nauticalmiles:F.earthRadius/1852,radians:1,yards:F.earthRadius/1.0936},F.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/F.earthRadius,yards:1/1.0936},F.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(H,B,$){$===void 0&&($={});var W={type:"Feature"};return($.id===0||$.id)&&(W.id=$.id),$.bbox&&(W.bbox=$.bbox),W.properties=B||{},W.geometry=H,W}F.feature=s;function o(H,B,$){switch(H){case"Point":return h(B).geometry;case"LineString":return i(B).geometry;case"Polygon":return t(B).geometry;case"MultiPoint":return u(B).geometry;case"MultiLineString":return f(B).geometry;case"MultiPolygon":return l(B).geometry;default:throw new Error(H+" is invalid")}}F.geometry=o;function h(H,B,$){$===void 0&&($={});var W={type:"Point",coordinates:H};return s(W,B,$)}F.point=h;function y(H,B,$){return $===void 0&&($={}),r(H.map(function(W){return h(W,B)}),$)}F.points=y;function t(H,B,$){$===void 0&&($={});for(var W=0,re=H;W<re.length;W++){var Q=re[W];if(Q.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Z=0;Z<Q[Q.length-1].length;Z++)if(Q[Q.length-1][Z]!==Q[0][Z])throw new Error("First and last Position are not equivalent.")}var K={type:"Polygon",coordinates:H};return s(K,B,$)}F.polygon=t;function a(H,B,$){return $===void 0&&($={}),r(H.map(function(W){return t(W,B)}),$)}F.polygons=a;function i(H,B,$){if($===void 0&&($={}),H.length<2)throw new Error("coordinates must be an array of two or more positions");var W={type:"LineString",coordinates:H};return s(W,B,$)}F.lineString=i;function n(H,B,$){return $===void 0&&($={}),r(H.map(function(W){return i(W,B)}),$)}F.lineStrings=n;function r(H,B){B===void 0&&(B={});var $={type:"FeatureCollection"};return B.id&&($.id=B.id),B.bbox&&($.bbox=B.bbox),$.features=H,$}F.featureCollection=r;function f(H,B,$){$===void 0&&($={});var W={type:"MultiLineString",coordinates:H};return s(W,B,$)}F.multiLineString=f;function u(H,B,$){$===void 0&&($={});var W={type:"MultiPoint",coordinates:H};return s(W,B,$)}F.multiPoint=u;function l(H,B,$){$===void 0&&($={});var W={type:"MultiPolygon",coordinates:H};return s(W,B,$)}F.multiPolygon=l;function m(H,B,$){$===void 0&&($={});var W={type:"GeometryCollection",geometries:H};return s(W,B,$)}F.geometryCollection=m;function d(H,B){if(B===void 0&&(B=0),B&&!(B>=0))throw new Error("precision must be a positive number");var $=Math.pow(10,B||0);return Math.round(H*$)/$}F.round=d;function b(H,B){B===void 0&&(B="kilometers");var $=F.factors[B];if(!$)throw new Error(B+" units is invalid");return H*$}F.radiansToLength=b;function g(H,B){B===void 0&&(B="kilometers");var $=F.factors[B];if(!$)throw new Error(B+" units is invalid");return H/$}F.lengthToRadians=g;function _(H,B){return A(g(H,B))}F.lengthToDegrees=_;function p(H){var B=H%360;return B<0&&(B+=360),B}F.bearingToAzimuth=p;function A(H){var B=H%(2*Math.PI);return B*180/Math.PI}F.radiansToDegrees=A;function c(H){var B=H%360;return B*Math.PI/180}F.degreesToRadians=c;function S(H,B,$){if(B===void 0&&(B="kilometers"),$===void 0&&($="kilometers"),!(H>=0))throw new Error("length must be a positive number");return b(g(H,B),$)}F.convertLength=S;function T(H,B,$){if(B===void 0&&(B="meters"),$===void 0&&($="kilometers"),!(H>=0))throw new Error("area must be a positive number");var W=F.areaFactors[B];if(!W)throw new Error("invalid original units");var re=F.areaFactors[$];if(!re)throw new Error("invalid final units");return H/W*re}F.convertArea=T;function x(H){return!isNaN(H)&&H!==null&&!Array.isArray(H)&&!/^\s*$/.test(H)}F.isNumber=x;function w(H){return!!H&&H.constructor===Object}F.isObject=w;function v(H){if(!H)throw new Error("bbox is required");if(!Array.isArray(H))throw new Error("bbox must be an Array");if(H.length!==4&&H.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");H.forEach(function(B){if(!x(B))throw new Error("bbox must only contain numbers")})}F.validateBBox=v;function C(H){if(!H)throw new Error("id is required");if(["string","number"].indexOf(typeof H)===-1)throw new Error("id must be a number or a string")}F.validateId=C;function M(){throw new Error("method has been renamed to `radiansToDegrees`")}F.radians2degrees=M;function E(){throw new Error("method has been renamed to `degreesToRadians`")}F.degrees2radians=E;function L(){throw new Error("method has been renamed to `lengthToDegrees`")}F.distanceToDegrees=L;function z(){throw new Error("method has been renamed to `lengthToRadians`")}F.distanceToRadians=z;function O(){throw new Error("method has been renamed to `radiansToLength`")}F.radiansToDistance=O;function R(){throw new Error("method has been renamed to `bearingToAzimuth`")}F.bearingToAngle=R;function D(){throw new Error("method has been renamed to `convertLength`")}F.convertDistance=D},{}],69:[function(e,I,F){Object.defineProperty(F,"__esModule",{value:!0});var s=e("@turf/helpers");function o(A,c,S){if(A!==null)for(var T,x,w,v,C,M,E,L=0,z=0,O,R=A.type,D=R==="FeatureCollection",H=R==="Feature",B=D?A.features.length:1,$=0;$<B;$++){E=D?A.features[$].geometry:H?A.geometry:A,O=E?E.type==="GeometryCollection":!1,C=O?E.geometries.length:1;for(var W=0;W<C;W++){var re=0,Q=0;if(v=O?E.geometries[W]:E,v!==null){M=v.coordinates;var Z=v.type;switch(L=S&&(Z==="Polygon"||Z==="MultiPolygon")?1:0,Z){case null:break;case"Point":if(c(M,z,$,re,Q)===!1)return!1;z++,re++;break;case"LineString":case"MultiPoint":for(T=0;T<M.length;T++){if(c(M[T],z,$,re,Q)===!1)return!1;z++,Z==="MultiPoint"&&re++}Z==="LineString"&&re++;break;case"Polygon":case"MultiLineString":for(T=0;T<M.length;T++){for(x=0;x<M[T].length-L;x++){if(c(M[T][x],z,$,re,Q)===!1)return!1;z++}Z==="MultiLineString"&&re++,Z==="Polygon"&&Q++}Z==="Polygon"&&re++;break;case"MultiPolygon":for(T=0;T<M.length;T++){for(Q=0,x=0;x<M[T].length;x++){for(w=0;w<M[T][x].length-L;w++){if(c(M[T][x][w],z,$,re,Q)===!1)return!1;z++}Q++}re++}break;case"GeometryCollection":for(T=0;T<v.geometries.length;T++)if(o(v.geometries[T],c,S)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function h(A,c,S,T){var x=S;return o(A,function(w,v,C,M,E){v===0&&S===void 0?x=w:x=c(x,w,v,C,M,E)},T),x}function y(A,c){var S;switch(A.type){case"FeatureCollection":for(S=0;S<A.features.length&&c(A.features[S].properties,S)!==!1;S++);break;case"Feature":c(A.properties,0);break}}function t(A,c,S){var T=S;return y(A,function(x,w){w===0&&S===void 0?T=x:T=c(T,x,w)}),T}function a(A,c){if(A.type==="Feature")c(A,0);else if(A.type==="FeatureCollection")for(var S=0;S<A.features.length&&c(A.features[S],S)!==!1;S++);}function i(A,c,S){var T=S;return a(A,function(x,w){w===0&&S===void 0?T=x:T=c(T,x,w)}),T}function n(A){var c=[];return o(A,function(S){c.push(S)}),c}function r(A,c){var S,T,x,w,v,C,M,E,L,z,O=0,R=A.type==="FeatureCollection",D=A.type==="Feature",H=R?A.features.length:1;for(S=0;S<H;S++){for(C=R?A.features[S].geometry:D?A.geometry:A,E=R?A.features[S].properties:D?A.properties:{},L=R?A.features[S].bbox:D?A.bbox:void 0,z=R?A.features[S].id:D?A.id:void 0,M=C?C.type==="GeometryCollection":!1,v=M?C.geometries.length:1,x=0;x<v;x++){if(w=M?C.geometries[x]:C,w===null){if(c(null,O,E,L,z)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(w,O,E,L,z)===!1)return!1;break}case"GeometryCollection":{for(T=0;T<w.geometries.length;T++)if(c(w.geometries[T],O,E,L,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}O++}}function f(A,c,S){var T=S;return r(A,function(x,w,v,C,M){w===0&&S===void 0?T=x:T=c(T,x,w,v,C,M)}),T}function u(A,c){r(A,function(S,T,x,w,v){var C=S===null?null:S.type;switch(C){case null:case"Point":case"LineString":case"Polygon":return c(s.feature(S,x,{bbox:w,id:v}),T,0)===!1?!1:void 0}var M;switch(C){case"MultiPoint":M="Point";break;case"MultiLineString":M="LineString";break;case"MultiPolygon":M="Polygon";break}for(var E=0;E<S.coordinates.length;E++){var L=S.coordinates[E],z={type:M,coordinates:L};if(c(s.feature(z,x),T,E)===!1)return!1}})}function l(A,c,S){var T=S;return u(A,function(x,w,v){w===0&&v===0&&S===void 0?T=x:T=c(T,x,w,v)}),T}function m(A,c){u(A,function(S,T,x){var w=0;if(!!S.geometry){var v=S.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var C,M=0,E=0,L=0;if(o(S,function(z,O,R,D,H){if(C===void 0||T>M||D>E||H>L){C=z,M=T,E=D,L=H,w=0;return}var B=s.lineString([C,z],S.properties);if(c(B,T,x,H,w)===!1)return!1;w++,C=z})===!1)return!1}}})}function d(A,c,S){var T=S,x=!1;return m(A,function(w,v,C,M,E){x===!1&&S===void 0?T=w:T=c(T,w,v,C,M,E),x=!0}),T}function b(A,c){if(!A)throw new Error("geojson is required");u(A,function(S,T,x){if(S.geometry!==null){var w=S.geometry.type,v=S.geometry.coordinates;switch(w){case"LineString":if(c(S,T,x,0,0)===!1)return!1;break;case"Polygon":for(var C=0;C<v.length;C++)if(c(s.lineString(v[C],S.properties),T,x,C)===!1)return!1;break}}})}function g(A,c,S){var T=S;return b(A,function(x,w,v,C){w===0&&S===void 0?T=x:T=c(T,x,w,v,C)}),T}function _(A,c){if(c=c||{},!s.isObject(c))throw new Error("options is invalid");var S=c.featureIndex||0,T=c.multiFeatureIndex||0,x=c.geometryIndex||0,w=c.segmentIndex||0,v=c.properties,C;switch(A.type){case"FeatureCollection":S<0&&(S=A.features.length+S),v=v||A.features[S].properties,C=A.features[S].geometry;break;case"Feature":v=v||A.properties,C=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=A;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var M=C.coordinates;switch(C.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=M.length+w-1),s.lineString([M[w],M[w+1]],v,c);case"Polygon":return x<0&&(x=M.length+x),w<0&&(w=M[x].length+w-1),s.lineString([M[x][w],M[x][w+1]],v,c);case"MultiLineString":return T<0&&(T=M.length+T),w<0&&(w=M[T].length+w-1),s.lineString([M[T][w],M[T][w+1]],v,c);case"MultiPolygon":return T<0&&(T=M.length+T),x<0&&(x=M[T].length+x),w<0&&(w=M[T][x].length-w-1),s.lineString([M[T][x][w],M[T][x][w+1]],v,c)}throw new Error("geojson is invalid")}function p(A,c){if(c=c||{},!s.isObject(c))throw new Error("options is invalid");var S=c.featureIndex||0,T=c.multiFeatureIndex||0,x=c.geometryIndex||0,w=c.coordIndex||0,v=c.properties,C;switch(A.type){case"FeatureCollection":S<0&&(S=A.features.length+S),v=v||A.features[S].properties,C=A.features[S].geometry;break;case"Feature":v=v||A.properties,C=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=A;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var M=C.coordinates;switch(C.type){case"Point":return s.point(M,v,c);case"MultiPoint":return T<0&&(T=M.length+T),s.point(M[T],v,c);case"LineString":return w<0&&(w=M.length+w),s.point(M[w],v,c);case"Polygon":return x<0&&(x=M.length+x),w<0&&(w=M[x].length+w),s.point(M[x][w],v,c);case"MultiLineString":return T<0&&(T=M.length+T),w<0&&(w=M[T].length+w),s.point(M[T][w],v,c);case"MultiPolygon":return T<0&&(T=M.length+T),x<0&&(x=M[T].length+x),w<0&&(w=M[T][x].length-w),s.point(M[T][x][w],v,c)}throw new Error("geojson is invalid")}F.coordEach=o,F.coordReduce=h,F.propEach=y,F.propReduce=t,F.featureEach=a,F.featureReduce=i,F.coordAll=n,F.geomEach=r,F.geomReduce=f,F.flattenEach=u,F.flattenReduce=l,F.segmentEach=m,F.segmentReduce=d,F.lineEach=b,F.lineReduce=g,F.findSegment=_,F.findPoint=p},{"@turf/helpers":68}],70:[function(e,I,F){I.exports=s;function s(o){var h=0,y=0,t=0,a=0;return o.map(function(i){i=i.slice();var n=i[0],r=n.toUpperCase();if(n!=r)switch(i[0]=r,n){case"a":i[6]+=t,i[7]+=a;break;case"v":i[1]+=a;break;case"h":i[1]+=t;break;default:for(var f=1;f<i.length;)i[f++]+=t,i[f++]+=a}switch(r){case"Z":t=h,a=y;break;case"H":t=i[1];break;case"V":a=i[1];break;case"M":t=h=i[1],a=y=i[2];break;default:t=i[i.length-2],a=i[i.length-1]}return i})}},{}],71:[function(e,I,F){I.exports=s;function s(o,h){if(!o||o.length==null)throw Error("Argument should be an array");h==null?h=1:h=Math.floor(h);for(var y=Array(h*2),t=0;t<h;t++){for(var a=-1/0,i=1/0,n=t,r=o.length;n<r;n+=h)o[n]>a&&(a=o[n]),o[n]<i&&(i=o[n]);y[t]=i,y[h+t]=a}return y}},{}],72:[function(e,I,F){I.exports=function(s,o,h){if(typeof Array.prototype.findIndex=="function")return s.findIndex(o,h);if(typeof o!="function")throw new TypeError("predicate must be a function");var y=Object(s),t=y.length;if(t===0)return-1;for(var a=0;a<t;a++)if(o.call(h,y[a],a,y))return a;return-1}},{}],73:[function(e,I,F){var s=e("array-bounds");I.exports=o;function o(h,y,t){if(!h||h.length==null)throw Error("Argument should be an array");y==null&&(y=1),t==null&&(t=s(h,y));for(var a=0;a<y;a++){var i=t[y+a],n=t[a],r=a,f=h.length;if(i===1/0&&n===-1/0)for(r=a;r<f;r+=y)h[r]=h[r]===i?1:h[r]===n?0:.5;else if(i===1/0)for(r=a;r<f;r+=y)h[r]=h[r]===i?1:0;else if(n===-1/0)for(r=a;r<f;r+=y)h[r]=h[r]===n?0:1;else{var u=i-n;for(r=a;r<f;r+=y)isNaN(h[r])||(h[r]=u===0?.5:(h[r]-n)/u)}}return h}},{"array-bounds":71}],74:[function(e,I,F){I.exports=function(o,h){var y=typeof o=="number",t=typeof h=="number";y&&!t?(h=o,o=0):!y&&!t&&(o=0,h=0),o=o|0,h=h|0;var a=h-o;if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),n=0,r=o;n<a;n++,r++)i[n]=r;return i}},{}],75:[function(e,I,F){(function(s){(function(){var o=e("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function h(E,L){if(E===L)return 0;for(var z=E.length,O=L.length,R=0,D=Math.min(z,O);R<D;++R)if(E[R]!==L[R]){z=E[R],O=L[R];break}return z<O?-1:O<z?1:0}function y(E){return s.Buffer&&typeof s.Buffer.isBuffer=="function"?s.Buffer.isBuffer(E):!!(E!=null&&E._isBuffer)}var t=e("util/"),a=Object.prototype.hasOwnProperty,i=Array.prototype.slice,n=function(){return function(){}.name==="foo"}();function r(E){return Object.prototype.toString.call(E)}function f(E){return y(E)||typeof s.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(E):E?!!(E instanceof DataView||E.buffer&&E.buffer instanceof ArrayBuffer):!1}var u=I.exports=p,l=/\s*function\s+([^\(\s]*)\s*/;function m(E){if(!!t.isFunction(E)){if(n)return E.name;var L=E.toString(),z=L.match(l);return z&&z[1]}}u.AssertionError=function(L){this.name="AssertionError",this.actual=L.actual,this.expected=L.expected,this.operator=L.operator,L.message?(this.message=L.message,this.generatedMessage=!1):(this.message=g(this),this.generatedMessage=!0);var z=L.stackStartFunction||_;if(Error.captureStackTrace)Error.captureStackTrace(this,z);else{var O=new Error;if(O.stack){var R=O.stack,D=m(z),H=R.indexOf(`
`+D);if(H>=0){var B=R.indexOf(`
`,H+1);R=R.substring(B+1)}this.stack=R}}},t.inherits(u.AssertionError,Error);function d(E,L){return typeof E=="string"?E.length<L?E:E.slice(0,L):E}function b(E){if(n||!t.isFunction(E))return t.inspect(E);var L=m(E),z=L?": "+L:"";return"[Function"+z+"]"}function g(E){return d(b(E.actual),128)+" "+E.operator+" "+d(b(E.expected),128)}function _(E,L,z,O,R){throw new u.AssertionError({message:z,actual:E,expected:L,operator:O,stackStartFunction:R})}u.fail=_;function p(E,L){E||_(E,!0,L,"==",u.ok)}u.ok=p,u.equal=function(L,z,O){L!=z&&_(L,z,O,"==",u.equal)},u.notEqual=function(L,z,O){L==z&&_(L,z,O,"!=",u.notEqual)},u.deepEqual=function(L,z,O){A(L,z,!1)||_(L,z,O,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(L,z,O){A(L,z,!0)||_(L,z,O,"deepStrictEqual",u.deepStrictEqual)};function A(E,L,z,O){if(E===L)return!0;if(y(E)&&y(L))return h(E,L)===0;if(t.isDate(E)&&t.isDate(L))return E.getTime()===L.getTime();if(t.isRegExp(E)&&t.isRegExp(L))return E.source===L.source&&E.global===L.global&&E.multiline===L.multiline&&E.lastIndex===L.lastIndex&&E.ignoreCase===L.ignoreCase;if((E===null||typeof E!="object")&&(L===null||typeof L!="object"))return z?E===L:E==L;if(f(E)&&f(L)&&r(E)===r(L)&&!(E instanceof Float32Array||E instanceof Float64Array))return h(new Uint8Array(E.buffer),new Uint8Array(L.buffer))===0;if(y(E)!==y(L))return!1;O=O||{actual:[],expected:[]};var R=O.actual.indexOf(E);return R!==-1&&R===O.expected.indexOf(L)?!0:(O.actual.push(E),O.expected.push(L),S(E,L,z,O))}function c(E){return Object.prototype.toString.call(E)=="[object Arguments]"}function S(E,L,z,O){if(E==null||L===null||L===void 0)return!1;if(t.isPrimitive(E)||t.isPrimitive(L))return E===L;if(z&&Object.getPrototypeOf(E)!==Object.getPrototypeOf(L))return!1;var R=c(E),D=c(L);if(R&&!D||!R&&D)return!1;if(R)return E=i.call(E),L=i.call(L),A(E,L,z);var H=M(E),B=M(L),$,W;if(H.length!==B.length)return!1;for(H.sort(),B.sort(),W=H.length-1;W>=0;W--)if(H[W]!==B[W])return!1;for(W=H.length-1;W>=0;W--)if($=H[W],!A(E[$],L[$],z,O))return!1;return!0}u.notDeepEqual=function(L,z,O){A(L,z,!1)&&_(L,z,O,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=T;function T(E,L,z){A(E,L,!0)&&_(E,L,z,"notDeepStrictEqual",T)}u.strictEqual=function(L,z,O){L!==z&&_(L,z,O,"===",u.strictEqual)},u.notStrictEqual=function(L,z,O){L===z&&_(L,z,O,"!==",u.notStrictEqual)};function x(E,L){if(!E||!L)return!1;if(Object.prototype.toString.call(L)=="[object RegExp]")return L.test(E);try{if(E instanceof L)return!0}catch{}return Error.isPrototypeOf(L)?!1:L.call({},E)===!0}function w(E){var L;try{E()}catch(z){L=z}return L}function v(E,L,z,O){var R;if(typeof L!="function")throw new TypeError('"block" argument must be a function');typeof z=="string"&&(O=z,z=null),R=w(L),O=(z&&z.name?" ("+z.name+").":".")+(O?" "+O:"."),E&&!R&&_(R,z,"Missing expected exception"+O);var D=typeof O=="string",H=!E&&t.isError(R),B=!E&&R&&!z;if((H&&D&&x(R,z)||B)&&_(R,z,"Got unwanted exception"+O),E&&R&&z&&!x(R,z)||!E&&R)throw R}u.throws=function(E,L,z){v(!0,E,L,z)},u.doesNotThrow=function(E,L,z){v(!1,E,L,z)},u.ifError=function(E){if(E)throw E};function C(E,L){E||_(E,!0,L,"==",C)}u.strict=o(C,u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var M=Object.keys||function(E){var L=[];for(var z in E)a.call(E,z)&&L.push(z);return L}}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":247,"util/":78}],76:[function(e,I,F){typeof Object.create=="function"?I.exports=function(o,h){o.super_=h,o.prototype=Object.create(h.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:I.exports=function(o,h){o.super_=h;var y=function(){};y.prototype=h.prototype,o.prototype=new y,o.prototype.constructor=o}},{}],77:[function(e,I,F){I.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},{}],78:[function(e,I,F){(function(s,o){(function(){var h=/%[sdj%]/g;F.format=function(B){if(!S(B)){for(var $=[],W=0;W<arguments.length;W++)$.push(a(arguments[W]));return $.join(" ")}for(var W=1,re=arguments,Q=re.length,Z=String(B).replace(h,function(le){if(le==="%%")return"%";if(W>=Q)return le;switch(le){case"%s":return String(re[W++]);case"%d":return Number(re[W++]);case"%j":try{return JSON.stringify(re[W++])}catch{return"[Circular]"}default:return le}}),K=re[W];W<Q;K=re[++W])p(K)||!v(K)?Z+=" "+K:Z+=" "+a(K);return Z},F.deprecate=function(B,$){if(x(o.process))return function(){return F.deprecate(B,$).apply(this,arguments)};if(s.noDeprecation===!0)return B;var W=!1;function re(){if(!W){if(s.throwDeprecation)throw new Error($);s.traceDeprecation?console.trace($):console.error($),W=!0}return B.apply(this,arguments)}return re};var y={},t;F.debuglog=function(B){if(x(t)&&(t={}.NODE_DEBUG||""),B=B.toUpperCase(),!y[B])if(new RegExp("\\b"+B+"\\b","i").test(t)){var $=s.pid;y[B]=function(){var W=F.format.apply(F,arguments);console.error("%s %d: %s",B,$,W)}}else y[B]=function(){};return y[B]};function a(B,$){var W={seen:[],stylize:n};return arguments.length>=3&&(W.depth=arguments[2]),arguments.length>=4&&(W.colors=arguments[3]),_($)?W.showHidden=$:$&&F._extend(W,$),x(W.showHidden)&&(W.showHidden=!1),x(W.depth)&&(W.depth=2),x(W.colors)&&(W.colors=!1),x(W.customInspect)&&(W.customInspect=!0),W.colors&&(W.stylize=i),f(W,B,W.depth)}F.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i(B,$){var W=a.styles[$];return W?"\x1B["+a.colors[W][0]+"m"+B+"\x1B["+a.colors[W][1]+"m":B}function n(B,$){return B}function r(B){var $={};return B.forEach(function(W,re){$[W]=!0}),$}function f(B,$,W){if(B.customInspect&&$&&E($.inspect)&&$.inspect!==F.inspect&&!($.constructor&&$.constructor.prototype===$)){var re=$.inspect(W,B);return S(re)||(re=f(B,re,W)),re}var Q=u(B,$);if(Q)return Q;var Z=Object.keys($),K=r(Z);if(B.showHidden&&(Z=Object.getOwnPropertyNames($)),M($)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return l($);if(Z.length===0){if(E($)){var le=$.name?": "+$.name:"";return B.stylize("[Function"+le+"]","special")}if(w($))return B.stylize(RegExp.prototype.toString.call($),"regexp");if(C($))return B.stylize(Date.prototype.toString.call($),"date");if(M($))return l($)}var fe="",ue=!1,V=["{","}"];if(g($)&&(ue=!0,V=["[","]"]),E($)){var j=$.name?": "+$.name:"";fe=" [Function"+j+"]"}if(w($)&&(fe=" "+RegExp.prototype.toString.call($)),C($)&&(fe=" "+Date.prototype.toUTCString.call($)),M($)&&(fe=" "+l($)),Z.length===0&&(!ue||$.length==0))return V[0]+fe+V[1];if(W<0)return w($)?B.stylize(RegExp.prototype.toString.call($),"regexp"):B.stylize("[Object]","special");B.seen.push($);var ee;return ue?ee=m(B,$,W,K,Z):ee=Z.map(function(q){return d(B,$,W,K,q,ue)}),B.seen.pop(),b(ee,fe,V)}function u(B,$){if(x($))return B.stylize("undefined","undefined");if(S($)){var W="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return B.stylize(W,"string")}if(c($))return B.stylize(""+$,"number");if(_($))return B.stylize(""+$,"boolean");if(p($))return B.stylize("null","null")}function l(B){return"["+Error.prototype.toString.call(B)+"]"}function m(B,$,W,re,Q){for(var Z=[],K=0,le=$.length;K<le;++K)H($,String(K))?Z.push(d(B,$,W,re,String(K),!0)):Z.push("");return Q.forEach(function(fe){fe.match(/^\d+$/)||Z.push(d(B,$,W,re,fe,!0))}),Z}function d(B,$,W,re,Q,Z){var K,le,fe;if(fe=Object.getOwnPropertyDescriptor($,Q)||{value:$[Q]},fe.get?fe.set?le=B.stylize("[Getter/Setter]","special"):le=B.stylize("[Getter]","special"):fe.set&&(le=B.stylize("[Setter]","special")),H(re,Q)||(K="["+Q+"]"),le||(B.seen.indexOf(fe.value)<0?(p(W)?le=f(B,fe.value,null):le=f(B,fe.value,W-1),le.indexOf(`
`)>-1&&(Z?le=le.split(`
`).map(function(ue){return"  "+ue}).join(`
`).substr(2):le=`
`+le.split(`
`).map(function(ue){return"   "+ue}).join(`
`))):le=B.stylize("[Circular]","special")),x(K)){if(Z&&Q.match(/^\d+$/))return le;K=JSON.stringify(""+Q),K.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(K=K.substr(1,K.length-2),K=B.stylize(K,"name")):(K=K.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),K=B.stylize(K,"string"))}return K+": "+le}function b(B,$,W){var re=B.reduce(function(Q,Z){return Z.indexOf(`
`)>=0,Q+Z.replace(/\u001b\[\d\d?m/g,"").length+1},0);return re>60?W[0]+($===""?"":$+`
 `)+" "+B.join(`,
  `)+" "+W[1]:W[0]+$+" "+B.join(", ")+" "+W[1]}function g(B){return Array.isArray(B)}F.isArray=g;function _(B){return typeof B=="boolean"}F.isBoolean=_;function p(B){return B===null}F.isNull=p;function A(B){return B==null}F.isNullOrUndefined=A;function c(B){return typeof B=="number"}F.isNumber=c;function S(B){return typeof B=="string"}F.isString=S;function T(B){return typeof B=="symbol"}F.isSymbol=T;function x(B){return B===void 0}F.isUndefined=x;function w(B){return v(B)&&z(B)==="[object RegExp]"}F.isRegExp=w;function v(B){return typeof B=="object"&&B!==null}F.isObject=v;function C(B){return v(B)&&z(B)==="[object Date]"}F.isDate=C;function M(B){return v(B)&&(z(B)==="[object Error]"||B instanceof Error)}F.isError=M;function E(B){return typeof B=="function"}F.isFunction=E;function L(B){return B===null||typeof B=="boolean"||typeof B=="number"||typeof B=="string"||typeof B=="symbol"||typeof B=="undefined"}F.isPrimitive=L,F.isBuffer=e("./support/isBuffer");function z(B){return Object.prototype.toString.call(B)}function O(B){return B<10?"0"+B.toString(10):B.toString(10)}var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var B=new Date,$=[O(B.getHours()),O(B.getMinutes()),O(B.getSeconds())].join(":");return[B.getDate(),R[B.getMonth()],$].join(" ")}F.log=function(){console.log("%s - %s",D(),F.format.apply(F,arguments))},F.inherits=e("inherits"),F._extend=function(B,$){if(!$||!v($))return B;for(var W=Object.keys($),re=W.length;re--;)B[W[re]]=$[W[re]];return B};function H(B,$){return Object.prototype.hasOwnProperty.call(B,$)}}).call(this)}).call(this,e("_process"),typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(e,I,F){F.byteLength=n,F.toByteArray=f,F.fromByteArray=m;for(var s=[],o=[],h=typeof Uint8Array!="undefined"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,a=y.length;t<a;++t)s[t]=y[t],o[y.charCodeAt(t)]=t;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63;function i(d){var b=d.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=d.indexOf("=");g===-1&&(g=b);var _=g===b?0:4-g%4;return[g,_]}function n(d){var b=i(d),g=b[0],_=b[1];return(g+_)*3/4-_}function r(d,b,g){return(b+g)*3/4-g}function f(d){var b,g=i(d),_=g[0],p=g[1],A=new h(r(d,_,p)),c=0,S=p>0?_-4:_,T;for(T=0;T<S;T+=4)b=o[d.charCodeAt(T)]<<18|o[d.charCodeAt(T+1)]<<12|o[d.charCodeAt(T+2)]<<6|o[d.charCodeAt(T+3)],A[c++]=b>>16&255,A[c++]=b>>8&255,A[c++]=b&255;return p===2&&(b=o[d.charCodeAt(T)]<<2|o[d.charCodeAt(T+1)]>>4,A[c++]=b&255),p===1&&(b=o[d.charCodeAt(T)]<<10|o[d.charCodeAt(T+1)]<<4|o[d.charCodeAt(T+2)]>>2,A[c++]=b>>8&255,A[c++]=b&255),A}function u(d){return s[d>>18&63]+s[d>>12&63]+s[d>>6&63]+s[d&63]}function l(d,b,g){for(var _,p=[],A=b;A<g;A+=3)_=(d[A]<<16&16711680)+(d[A+1]<<8&65280)+(d[A+2]&255),p.push(u(_));return p.join("")}function m(d){for(var b,g=d.length,_=g%3,p=[],A=16383,c=0,S=g-_;c<S;c+=A)p.push(l(d,c,c+A>S?S:c+A));return _===1?(b=d[g-1],p.push(s[b>>2]+s[b<<4&63]+"==")):_===2&&(b=(d[g-2]<<8)+d[g-1],p.push(s[b>>10]+s[b>>4&63]+s[b<<2&63]+"=")),p.join("")}},{}],80:[function(e,I,F){function s(i,n,r,f,u){for(var l=u+1;f<=u;){var m=f+u>>>1,d=i[m],b=r!==void 0?r(d,n):d-n;b>=0?(l=m,u=m-1):f=m+1}return l}function o(i,n,r,f,u){for(var l=u+1;f<=u;){var m=f+u>>>1,d=i[m],b=r!==void 0?r(d,n):d-n;b>0?(l=m,u=m-1):f=m+1}return l}function h(i,n,r,f,u){for(var l=f-1;f<=u;){var m=f+u>>>1,d=i[m],b=r!==void 0?r(d,n):d-n;b<0?(l=m,f=m+1):u=m-1}return l}function y(i,n,r,f,u){for(var l=f-1;f<=u;){var m=f+u>>>1,d=i[m],b=r!==void 0?r(d,n):d-n;b<=0?(l=m,f=m+1):u=m-1}return l}function t(i,n,r,f,u){for(;f<=u;){var l=f+u>>>1,m=i[l],d=r!==void 0?r(m,n):m-n;if(d===0)return l;d<=0?f=l+1:u=l-1}return-1}function a(i,n,r,f,u,l){return typeof r=="function"?l(i,n,r,f===void 0?0:f|0,u===void 0?i.length-1:u|0):l(i,n,void 0,r===void 0?0:r|0,f===void 0?i.length-1:f|0)}I.exports={ge:function(i,n,r,f,u){return a(i,n,r,f,u,s)},gt:function(i,n,r,f,u){return a(i,n,r,f,u,o)},lt:function(i,n,r,f,u){return a(i,n,r,f,u,h)},le:function(i,n,r,f,u){return a(i,n,r,f,u,y)},eq:function(i,n,r,f,u){return a(i,n,r,f,u,t)}}},{}],81:[function(e,I,F){var s=32;F.INT_BITS=s,F.INT_MAX=2147483647,F.INT_MIN=-1<<s-1,F.sign=function(y){return(y>0)-(y<0)},F.abs=function(y){var t=y>>s-1;return(y^t)-t},F.min=function(y,t){return t^(y^t)&-(y<t)},F.max=function(y,t){return y^(y^t)&-(y<t)},F.isPow2=function(y){return!(y&y-1)&&!!y},F.log2=function(y){var t,a;return t=(y>65535)<<4,y>>>=t,a=(y>255)<<3,y>>>=a,t|=a,a=(y>15)<<2,y>>>=a,t|=a,a=(y>3)<<1,y>>>=a,t|=a,t|y>>1},F.log10=function(y){return y>=1e9?9:y>=1e8?8:y>=1e7?7:y>=1e6?6:y>=1e5?5:y>=1e4?4:y>=1e3?3:y>=100?2:y>=10?1:0},F.popCount=function(y){return y=y-(y>>>1&1431655765),y=(y&858993459)+(y>>>2&858993459),(y+(y>>>4)&252645135)*16843009>>>24};function o(y){var t=32;return y&=-y,y&&t--,y&65535&&(t-=16),y&16711935&&(t-=8),y&252645135&&(t-=4),y&858993459&&(t-=2),y&1431655765&&(t-=1),t}F.countTrailingZeros=o,F.nextPow2=function(y){return y+=y===0,--y,y|=y>>>1,y|=y>>>2,y|=y>>>4,y|=y>>>8,y|=y>>>16,y+1},F.prevPow2=function(y){return y|=y>>>1,y|=y>>>2,y|=y>>>4,y|=y>>>8,y|=y>>>16,y-(y>>>1)},F.parity=function(y){return y^=y>>>16,y^=y>>>8,y^=y>>>4,y&=15,27030>>>y&1};var h=new Array(256);(function(y){for(var t=0;t<256;++t){var a=t,i=t,n=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=a&1,--n;y[t]=i<<n&255}})(h),F.reverse=function(y){return h[y&255]<<24|h[y>>>8&255]<<16|h[y>>>16&255]<<8|h[y>>>24&255]},F.interleave2=function(y,t){return y&=65535,y=(y|y<<8)&16711935,y=(y|y<<4)&252645135,y=(y|y<<2)&858993459,y=(y|y<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,y|t<<1},F.deinterleave2=function(y,t){return y=y>>>t&1431655765,y=(y|y>>>1)&858993459,y=(y|y>>>2)&252645135,y=(y|y>>>4)&16711935,y=(y|y>>>16)&65535,y<<16>>16},F.interleave3=function(y,t,a){return y&=1023,y=(y|y<<16)&4278190335,y=(y|y<<8)&251719695,y=(y|y<<4)&3272356035,y=(y|y<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,y|=t<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,y|a<<2},F.deinterleave3=function(y,t){return y=y>>>t&1227133513,y=(y|y>>>2)&3272356035,y=(y|y>>>4)&251719695,y=(y|y>>>8)&4278190335,y=(y|y>>>16)&1023,y<<22>>22},F.nextCombination=function(y){var t=y|y-1;return t+1|(~t&-~t)-1>>>o(y)+1}},{}],82:[function(e,I,F){var s=e("clamp");I.exports=h;var o=1e20;function h(a,i){i||(i={});var n=i.cutoff==null?.25:i.cutoff,r=i.radius==null?8:i.radius,f=i.channel||0,u,l,m,d,b,g,_,p,A,c,S;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!i.width||!i.height)throw Error("For raw data width and height should be provided by options");u=i.width,l=i.height,d=a,i.stride?g=i.stride:g=Math.floor(a.length/u/l)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(p=a,_=p.getContext("2d"),u=p.width,l=p.height,A=_.getImageData(0,0,u,l),d=A.data,g=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(p=a.canvas,_=a,u=p.width,l=p.height,A=_.getImageData(0,0,u,l),d=A.data,g=4):window.ImageData&&a instanceof window.ImageData&&(A=a,u=a.width,l=a.height,d=A.data,g=4);if(m=Math.max(u,l),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(b=d,d=Array(u*l),c=0,S=b.length;c<S;c++)d[c]=b[c*g+f]/255;else if(g!==1)throw Error("Raw data can have only 1 value per pixel");var T=Array(u*l),x=Array(u*l),w=Array(m),v=Array(m),C=Array(m+1),M=Array(m);for(c=0,S=u*l;c<S;c++){var E=d[c];T[c]=E===1?0:E===0?o:Math.pow(Math.max(0,.5-E),2),x[c]=E===1?o:E===0?0:Math.pow(Math.max(0,E-.5),2)}y(T,u,l,w,v,M,C),y(x,u,l,w,v,M,C);var L=window.Float32Array?new Float32Array(u*l):new Array(u*l);for(c=0,S=u*l;c<S;c++)L[c]=s(1-((T[c]-x[c])/r+n),0,1);return L}function y(a,i,n,r,f,u,l){for(var m=0;m<i;m++){for(var d=0;d<n;d++)r[d]=a[d*i+m];for(t(r,f,u,l,n),d=0;d<n;d++)a[d*i+m]=f[d]}for(d=0;d<n;d++){for(m=0;m<i;m++)r[m]=a[d*i+m];for(t(r,f,u,l,i),m=0;m<i;m++)a[d*i+m]=Math.sqrt(f[m])}}function t(a,i,n,r,f){n[0]=0,r[0]=-o,r[1]=+o;for(var u=1,l=0;u<f;u++){for(var m=(a[u]+u*u-(a[n[l]]+n[l]*n[l]))/(2*u-2*n[l]);m<=r[l];)l--,m=(a[u]+u*u-(a[n[l]]+n[l]*n[l]))/(2*u-2*n[l]);l++,n[l]=u,r[l]=m,r[l+1]=+o}for(u=0,l=0;u<f;u++){for(;r[l+1]<u;)l++;i[u]=(u-n[l])*(u-n[l])+a[n[l]]}}},{clamp:86}],83:[function(e,I,F){},{}],84:[function(e,I,F){var s=typeof Reflect=="object"?Reflect:null,o=s&&typeof s.apply=="function"?s.apply:function(c,S,T){return Function.prototype.apply.call(c,S,T)},h;s&&typeof s.ownKeys=="function"?h=s.ownKeys:Object.getOwnPropertySymbols?h=function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:h=function(c){return Object.getOwnPropertyNames(c)};function y(A){console&&console.warn&&console.warn(A)}var t=Number.isNaN||function(c){return c!==c};function a(){a.init.call(this)}I.exports=a,I.exports.once=p,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function n(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(A){if(typeof A!="number"||A<0||t(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");i=A}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||t(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this};function r(A){return A._maxListeners===void 0?a.defaultMaxListeners:A._maxListeners}a.prototype.getMaxListeners=function(){return r(this)},a.prototype.emit=function(c){for(var S=[],T=1;T<arguments.length;T++)S.push(arguments[T]);var x=c==="error",w=this._events;if(w!==void 0)x=x&&w.error===void 0;else if(!x)return!1;if(x){var v;if(S.length>0&&(v=S[0]),v instanceof Error)throw v;var C=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw C.context=v,C}var M=w[c];if(M===void 0)return!1;if(typeof M=="function")o(M,this,S);else for(var E=M.length,L=b(M,E),T=0;T<E;++T)o(L[T],this,S);return!0};function f(A,c,S,T){var x,w,v;if(n(S),w=A._events,w===void 0?(w=A._events=Object.create(null),A._eventsCount=0):(w.newListener!==void 0&&(A.emit("newListener",c,S.listener?S.listener:S),w=A._events),v=w[c]),v===void 0)v=w[c]=S,++A._eventsCount;else if(typeof v=="function"?v=w[c]=T?[S,v]:[v,S]:T?v.unshift(S):v.push(S),x=r(A),x>0&&v.length>x&&!v.warned){v.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=A,C.type=c,C.count=v.length,y(C)}return A}a.prototype.addListener=function(c,S){return f(this,c,S,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(c,S){return f(this,c,S,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(A,c,S){var T={fired:!1,wrapFn:void 0,target:A,type:c,listener:S},x=u.bind(T);return x.listener=S,T.wrapFn=x,x}a.prototype.once=function(c,S){return n(S),this.on(c,l(this,c,S)),this},a.prototype.prependOnceListener=function(c,S){return n(S),this.prependListener(c,l(this,c,S)),this},a.prototype.removeListener=function(c,S){var T,x,w,v,C;if(n(S),x=this._events,x===void 0)return this;if(T=x[c],T===void 0)return this;if(T===S||T.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete x[c],x.removeListener&&this.emit("removeListener",c,T.listener||S));else if(typeof T!="function"){for(w=-1,v=T.length-1;v>=0;v--)if(T[v]===S||T[v].listener===S){C=T[v].listener,w=v;break}if(w<0)return this;w===0?T.shift():g(T,w),T.length===1&&(x[c]=T[0]),x.removeListener!==void 0&&this.emit("removeListener",c,C||S)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(c){var S,T,x;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[c]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[c]),this;if(arguments.length===0){var w=Object.keys(T),v;for(x=0;x<w.length;++x)v=w[x],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=T[c],typeof S=="function")this.removeListener(c,S);else if(S!==void 0)for(x=S.length-1;x>=0;x--)this.removeListener(c,S[x]);return this};function m(A,c,S){var T=A._events;if(T===void 0)return[];var x=T[c];return x===void 0?[]:typeof x=="function"?S?[x.listener||x]:[x]:S?_(x):b(x,x.length)}a.prototype.listeners=function(c){return m(this,c,!0)},a.prototype.rawListeners=function(c){return m(this,c,!1)},a.listenerCount=function(A,c){return typeof A.listenerCount=="function"?A.listenerCount(c):d.call(A,c)},a.prototype.listenerCount=d;function d(A){var c=this._events;if(c!==void 0){var S=c[A];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?h(this._events):[]};function b(A,c){for(var S=new Array(c),T=0;T<c;++T)S[T]=A[T];return S}function g(A,c){for(;c+1<A.length;c++)A[c]=A[c+1];A.pop()}function _(A){for(var c=new Array(A.length),S=0;S<c.length;++S)c[S]=A[S].listener||A[S];return c}function p(A,c){return new Promise(function(S,T){function x(){w!==void 0&&A.removeListener("error",w),S([].slice.call(arguments))}var w;c!=="error"&&(w=function(C){A.removeListener(c,x),T(C)},A.once("error",w)),A.once(c,x)})}},{}],85:[function(e,I,F){(function(s){(function(){var o=e("base64-js"),h=e("ieee754");F.Buffer=i,F.SlowBuffer=_,F.INSPECT_MAX_BYTES=50;var y=2147483647;F.kMaxLength=y,i.TYPED_ARRAY_SUPPORT=t(),!i.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var ne=new Uint8Array(1);return ne.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ne.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.byteOffset}});function a(ne){if(ne>y)throw new RangeError('The value "'+ne+'" is invalid for option "size"');var oe=new Uint8Array(ne);return oe.__proto__=i.prototype,oe}function i(ne,oe,se){if(typeof ne=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(ne)}return n(ne,oe,se)}typeof Symbol!="undefined"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192;function n(ne,oe,se){if(typeof ne=="string")return l(ne,oe);if(ArrayBuffer.isView(ne))return m(ne);if(ne==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ne);if(J(ne,ArrayBuffer)||ne&&J(ne.buffer,ArrayBuffer))return d(ne,oe,se);if(typeof ne=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=ne.valueOf&&ne.valueOf();if(me!=null&&me!==ne)return i.from(me,oe,se);var ce=b(ne);if(ce)return ce;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ne[Symbol.toPrimitive]=="function")return i.from(ne[Symbol.toPrimitive]("string"),oe,se);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ne)}i.from=function(ne,oe,se){return n(ne,oe,se)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array;function r(ne){if(typeof ne!="number")throw new TypeError('"size" argument must be of type number');if(ne<0)throw new RangeError('The value "'+ne+'" is invalid for option "size"')}function f(ne,oe,se){return r(ne),ne<=0?a(ne):oe!==void 0?typeof se=="string"?a(ne).fill(oe,se):a(ne).fill(oe):a(ne)}i.alloc=function(ne,oe,se){return f(ne,oe,se)};function u(ne){return r(ne),a(ne<0?0:g(ne)|0)}i.allocUnsafe=function(ne){return u(ne)},i.allocUnsafeSlow=function(ne){return u(ne)};function l(ne,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!i.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var se=p(ne,oe)|0,me=a(se),ce=me.write(ne,oe);return ce!==se&&(me=me.slice(0,ce)),me}function m(ne){for(var oe=ne.length<0?0:g(ne.length)|0,se=a(oe),me=0;me<oe;me+=1)se[me]=ne[me]&255;return se}function d(ne,oe,se){if(oe<0||ne.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(ne.byteLength<oe+(se||0))throw new RangeError('"length" is outside of buffer bounds');var me;return oe===void 0&&se===void 0?me=new Uint8Array(ne):se===void 0?me=new Uint8Array(ne,oe):me=new Uint8Array(ne,oe,se),me.__proto__=i.prototype,me}function b(ne){if(i.isBuffer(ne)){var oe=g(ne.length)|0,se=a(oe);return se.length===0||ne.copy(se,0,0,oe),se}if(ne.length!==void 0)return typeof ne.length!="number"||ie(ne.length)?a(0):m(ne);if(ne.type==="Buffer"&&Array.isArray(ne.data))return m(ne.data)}function g(ne){if(ne>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return ne|0}function _(ne){return+ne!=ne&&(ne=0),i.alloc(+ne)}i.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==i.prototype},i.compare=function(oe,se){if(J(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),J(se,Uint8Array)&&(se=i.from(se,se.offset,se.byteLength)),!i.isBuffer(oe)||!i.isBuffer(se))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===se)return 0;for(var me=oe.length,ce=se.length,pe=0,xe=Math.min(me,ce);pe<xe;++pe)if(oe[pe]!==se[pe]){me=oe[pe],ce=se[pe];break}return me<ce?-1:ce<me?1:0},i.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(oe,se){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return i.alloc(0);var me;if(se===void 0)for(se=0,me=0;me<oe.length;++me)se+=oe[me].length;var ce=i.allocUnsafe(se),pe=0;for(me=0;me<oe.length;++me){var xe=oe[me];if(J(xe,Uint8Array)&&(xe=i.from(xe)),!i.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(ce,pe),pe+=xe.length}return ce};function p(ne,oe){if(i.isBuffer(ne))return ne.length;if(ArrayBuffer.isView(ne)||J(ne,ArrayBuffer))return ne.byteLength;if(typeof ne!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ne);var se=ne.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&se===0)return 0;for(var ce=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return se;case"utf8":case"utf-8":return V(ne).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se*2;case"hex":return se>>>1;case"base64":return q(ne).length;default:if(ce)return me?-1:V(ne).length;oe=(""+oe).toLowerCase(),ce=!0}}i.byteLength=p;function A(ne,oe,se){var me=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((se===void 0||se>this.length)&&(se=this.length),se<=0)||(se>>>=0,oe>>>=0,se<=oe))return"";for(ne||(ne="utf8");;)switch(ne){case"hex":return B(this,oe,se);case"utf8":case"utf-8":return z(this,oe,se);case"ascii":return D(this,oe,se);case"latin1":case"binary":return H(this,oe,se);case"base64":return L(this,oe,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,oe,se);default:if(me)throw new TypeError("Unknown encoding: "+ne);ne=(ne+"").toLowerCase(),me=!0}}i.prototype._isBuffer=!0;function c(ne,oe,se){var me=ne[oe];ne[oe]=ne[se],ne[se]=me}i.prototype.swap16=function(){var oe=this.length;if(oe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var se=0;se<oe;se+=2)c(this,se,se+1);return this},i.prototype.swap32=function(){var oe=this.length;if(oe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var se=0;se<oe;se+=4)c(this,se,se+3),c(this,se+1,se+2);return this},i.prototype.swap64=function(){var oe=this.length;if(oe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var se=0;se<oe;se+=8)c(this,se,se+7),c(this,se+1,se+6),c(this,se+2,se+5),c(this,se+3,se+4);return this},i.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?z(this,0,oe):A.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(oe){if(!i.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe?!0:i.compare(this,oe)===0},i.prototype.inspect=function(){var oe="",se=F.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,se).replace(/(.{2})/g,"$1 ").trim(),this.length>se&&(oe+=" ... "),"<Buffer "+oe+">"},i.prototype.compare=function(oe,se,me,ce,pe){if(J(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),!i.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof oe);if(se===void 0&&(se=0),me===void 0&&(me=oe?oe.length:0),ce===void 0&&(ce=0),pe===void 0&&(pe=this.length),se<0||me>oe.length||ce<0||pe>this.length)throw new RangeError("out of range index");if(ce>=pe&&se>=me)return 0;if(ce>=pe)return-1;if(se>=me)return 1;if(se>>>=0,me>>>=0,ce>>>=0,pe>>>=0,this===oe)return 0;for(var xe=pe-ce,Se=me-se,Ae=Math.min(xe,Se),Ce=this.slice(ce,pe),Ee=oe.slice(se,me),Oe=0;Oe<Ae;++Oe)if(Ce[Oe]!==Ee[Oe]){xe=Ce[Oe],Se=Ee[Oe];break}return xe<Se?-1:Se<xe?1:0};function S(ne,oe,se,me,ce){if(ne.length===0)return-1;if(typeof se=="string"?(me=se,se=0):se>2147483647?se=2147483647:se<-2147483648&&(se=-2147483648),se=+se,ie(se)&&(se=ce?0:ne.length-1),se<0&&(se=ne.length+se),se>=ne.length){if(ce)return-1;se=ne.length-1}else if(se<0)if(ce)se=0;else return-1;if(typeof oe=="string"&&(oe=i.from(oe,me)),i.isBuffer(oe))return oe.length===0?-1:T(ne,oe,se,me,ce);if(typeof oe=="number")return oe=oe&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(ne,oe,se):Uint8Array.prototype.lastIndexOf.call(ne,oe,se):T(ne,[oe],se,me,ce);throw new TypeError("val must be string, number or Buffer")}function T(ne,oe,se,me,ce){var pe=1,xe=ne.length,Se=oe.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(ne.length<2||oe.length<2)return-1;pe=2,xe/=2,Se/=2,se/=2}function Ae(Re,Ve){return pe===1?Re[Ve]:Re.readUInt16BE(Ve*pe)}var Ce;if(ce){var Ee=-1;for(Ce=se;Ce<xe;Ce++)if(Ae(ne,Ce)===Ae(oe,Ee===-1?0:Ce-Ee)){if(Ee===-1&&(Ee=Ce),Ce-Ee+1===Se)return Ee*pe}else Ee!==-1&&(Ce-=Ce-Ee),Ee=-1}else for(se+Se>xe&&(se=xe-Se),Ce=se;Ce>=0;Ce--){for(var Oe=!0,_e=0;_e<Se;_e++)if(Ae(ne,Ce+_e)!==Ae(oe,_e)){Oe=!1;break}if(Oe)return Ce}return-1}i.prototype.includes=function(oe,se,me){return this.indexOf(oe,se,me)!==-1},i.prototype.indexOf=function(oe,se,me){return S(this,oe,se,me,!0)},i.prototype.lastIndexOf=function(oe,se,me){return S(this,oe,se,me,!1)};function x(ne,oe,se,me){se=Number(se)||0;var ce=ne.length-se;me?(me=Number(me),me>ce&&(me=ce)):me=ce;var pe=oe.length;me>pe/2&&(me=pe/2);for(var xe=0;xe<me;++xe){var Se=parseInt(oe.substr(xe*2,2),16);if(ie(Se))return xe;ne[se+xe]=Se}return xe}function w(ne,oe,se,me){return X(V(oe,ne.length-se),ne,se,me)}function v(ne,oe,se,me){return X(j(oe),ne,se,me)}function C(ne,oe,se,me){return v(ne,oe,se,me)}function M(ne,oe,se,me){return X(q(oe),ne,se,me)}function E(ne,oe,se,me){return X(ee(oe,ne.length-se),ne,se,me)}i.prototype.write=function(oe,se,me,ce){if(se===void 0)ce="utf8",me=this.length,se=0;else if(me===void 0&&typeof se=="string")ce=se,me=this.length,se=0;else if(isFinite(se))se=se>>>0,isFinite(me)?(me=me>>>0,ce===void 0&&(ce="utf8")):(ce=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var pe=this.length-se;if((me===void 0||me>pe)&&(me=pe),oe.length>0&&(me<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var xe=!1;;)switch(ce){case"hex":return x(this,oe,se,me);case"utf8":case"utf-8":return w(this,oe,se,me);case"ascii":return v(this,oe,se,me);case"latin1":case"binary":return C(this,oe,se,me);case"base64":return M(this,oe,se,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,oe,se,me);default:if(xe)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),xe=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(ne,oe,se){return oe===0&&se===ne.length?o.fromByteArray(ne):o.fromByteArray(ne.slice(oe,se))}function z(ne,oe,se){se=Math.min(ne.length,se);for(var me=[],ce=oe;ce<se;){var pe=ne[ce],xe=null,Se=pe>239?4:pe>223?3:pe>191?2:1;if(ce+Se<=se){var Ae,Ce,Ee,Oe;switch(Se){case 1:pe<128&&(xe=pe);break;case 2:Ae=ne[ce+1],(Ae&192)===128&&(Oe=(pe&31)<<6|Ae&63,Oe>127&&(xe=Oe));break;case 3:Ae=ne[ce+1],Ce=ne[ce+2],(Ae&192)===128&&(Ce&192)===128&&(Oe=(pe&15)<<12|(Ae&63)<<6|Ce&63,Oe>2047&&(Oe<55296||Oe>57343)&&(xe=Oe));break;case 4:Ae=ne[ce+1],Ce=ne[ce+2],Ee=ne[ce+3],(Ae&192)===128&&(Ce&192)===128&&(Ee&192)===128&&(Oe=(pe&15)<<18|(Ae&63)<<12|(Ce&63)<<6|Ee&63,Oe>65535&&Oe<1114112&&(xe=Oe))}}xe===null?(xe=65533,Se=1):xe>65535&&(xe-=65536,me.push(xe>>>10&1023|55296),xe=56320|xe&1023),me.push(xe),ce+=Se}return R(me)}var O=4096;function R(ne){var oe=ne.length;if(oe<=O)return String.fromCharCode.apply(String,ne);for(var se="",me=0;me<oe;)se+=String.fromCharCode.apply(String,ne.slice(me,me+=O));return se}function D(ne,oe,se){var me="";se=Math.min(ne.length,se);for(var ce=oe;ce<se;++ce)me+=String.fromCharCode(ne[ce]&127);return me}function H(ne,oe,se){var me="";se=Math.min(ne.length,se);for(var ce=oe;ce<se;++ce)me+=String.fromCharCode(ne[ce]);return me}function B(ne,oe,se){var me=ne.length;(!oe||oe<0)&&(oe=0),(!se||se<0||se>me)&&(se=me);for(var ce="",pe=oe;pe<se;++pe)ce+=ue(ne[pe]);return ce}function $(ne,oe,se){for(var me=ne.slice(oe,se),ce="",pe=0;pe<me.length;pe+=2)ce+=String.fromCharCode(me[pe]+me[pe+1]*256);return ce}i.prototype.slice=function(oe,se){var me=this.length;oe=~~oe,se=se===void 0?me:~~se,oe<0?(oe+=me,oe<0&&(oe=0)):oe>me&&(oe=me),se<0?(se+=me,se<0&&(se=0)):se>me&&(se=me),se<oe&&(se=oe);var ce=this.subarray(oe,se);return ce.__proto__=i.prototype,ce};function W(ne,oe,se){if(ne%1!==0||ne<0)throw new RangeError("offset is not uint");if(ne+oe>se)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(oe,se,me){oe=oe>>>0,se=se>>>0,me||W(oe,se,this.length);for(var ce=this[oe],pe=1,xe=0;++xe<se&&(pe*=256);)ce+=this[oe+xe]*pe;return ce},i.prototype.readUIntBE=function(oe,se,me){oe=oe>>>0,se=se>>>0,me||W(oe,se,this.length);for(var ce=this[oe+--se],pe=1;se>0&&(pe*=256);)ce+=this[oe+--se]*pe;return ce},i.prototype.readUInt8=function(oe,se){return oe=oe>>>0,se||W(oe,1,this.length),this[oe]},i.prototype.readUInt16LE=function(oe,se){return oe=oe>>>0,se||W(oe,2,this.length),this[oe]|this[oe+1]<<8},i.prototype.readUInt16BE=function(oe,se){return oe=oe>>>0,se||W(oe,2,this.length),this[oe]<<8|this[oe+1]},i.prototype.readUInt32LE=function(oe,se){return oe=oe>>>0,se||W(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+this[oe+3]*16777216},i.prototype.readUInt32BE=function(oe,se){return oe=oe>>>0,se||W(oe,4,this.length),this[oe]*16777216+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},i.prototype.readIntLE=function(oe,se,me){oe=oe>>>0,se=se>>>0,me||W(oe,se,this.length);for(var ce=this[oe],pe=1,xe=0;++xe<se&&(pe*=256);)ce+=this[oe+xe]*pe;return pe*=128,ce>=pe&&(ce-=Math.pow(2,8*se)),ce},i.prototype.readIntBE=function(oe,se,me){oe=oe>>>0,se=se>>>0,me||W(oe,se,this.length);for(var ce=se,pe=1,xe=this[oe+--ce];ce>0&&(pe*=256);)xe+=this[oe+--ce]*pe;return pe*=128,xe>=pe&&(xe-=Math.pow(2,8*se)),xe},i.prototype.readInt8=function(oe,se){return oe=oe>>>0,se||W(oe,1,this.length),this[oe]&128?(255-this[oe]+1)*-1:this[oe]},i.prototype.readInt16LE=function(oe,se){oe=oe>>>0,se||W(oe,2,this.length);var me=this[oe]|this[oe+1]<<8;return me&32768?me|4294901760:me},i.prototype.readInt16BE=function(oe,se){oe=oe>>>0,se||W(oe,2,this.length);var me=this[oe+1]|this[oe]<<8;return me&32768?me|4294901760:me},i.prototype.readInt32LE=function(oe,se){return oe=oe>>>0,se||W(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},i.prototype.readInt32BE=function(oe,se){return oe=oe>>>0,se||W(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},i.prototype.readFloatLE=function(oe,se){return oe=oe>>>0,se||W(oe,4,this.length),h.read(this,oe,!0,23,4)},i.prototype.readFloatBE=function(oe,se){return oe=oe>>>0,se||W(oe,4,this.length),h.read(this,oe,!1,23,4)},i.prototype.readDoubleLE=function(oe,se){return oe=oe>>>0,se||W(oe,8,this.length),h.read(this,oe,!0,52,8)},i.prototype.readDoubleBE=function(oe,se){return oe=oe>>>0,se||W(oe,8,this.length),h.read(this,oe,!1,52,8)};function re(ne,oe,se,me,ce,pe){if(!i.isBuffer(ne))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>ce||oe<pe)throw new RangeError('"value" argument is out of bounds');if(se+me>ne.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(oe,se,me,ce){if(oe=+oe,se=se>>>0,me=me>>>0,!ce){var pe=Math.pow(2,8*me)-1;re(this,oe,se,me,pe,0)}var xe=1,Se=0;for(this[se]=oe&255;++Se<me&&(xe*=256);)this[se+Se]=oe/xe&255;return se+me},i.prototype.writeUIntBE=function(oe,se,me,ce){if(oe=+oe,se=se>>>0,me=me>>>0,!ce){var pe=Math.pow(2,8*me)-1;re(this,oe,se,me,pe,0)}var xe=me-1,Se=1;for(this[se+xe]=oe&255;--xe>=0&&(Se*=256);)this[se+xe]=oe/Se&255;return se+me},i.prototype.writeUInt8=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,1,255,0),this[se]=oe&255,se+1},i.prototype.writeUInt16LE=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,2,65535,0),this[se]=oe&255,this[se+1]=oe>>>8,se+2},i.prototype.writeUInt16BE=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,2,65535,0),this[se]=oe>>>8,this[se+1]=oe&255,se+2},i.prototype.writeUInt32LE=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,4,4294967295,0),this[se+3]=oe>>>24,this[se+2]=oe>>>16,this[se+1]=oe>>>8,this[se]=oe&255,se+4},i.prototype.writeUInt32BE=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,4,4294967295,0),this[se]=oe>>>24,this[se+1]=oe>>>16,this[se+2]=oe>>>8,this[se+3]=oe&255,se+4},i.prototype.writeIntLE=function(oe,se,me,ce){if(oe=+oe,se=se>>>0,!ce){var pe=Math.pow(2,8*me-1);re(this,oe,se,me,pe-1,-pe)}var xe=0,Se=1,Ae=0;for(this[se]=oe&255;++xe<me&&(Se*=256);)oe<0&&Ae===0&&this[se+xe-1]!==0&&(Ae=1),this[se+xe]=(oe/Se>>0)-Ae&255;return se+me},i.prototype.writeIntBE=function(oe,se,me,ce){if(oe=+oe,se=se>>>0,!ce){var pe=Math.pow(2,8*me-1);re(this,oe,se,me,pe-1,-pe)}var xe=me-1,Se=1,Ae=0;for(this[se+xe]=oe&255;--xe>=0&&(Se*=256);)oe<0&&Ae===0&&this[se+xe+1]!==0&&(Ae=1),this[se+xe]=(oe/Se>>0)-Ae&255;return se+me},i.prototype.writeInt8=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,1,127,-128),oe<0&&(oe=255+oe+1),this[se]=oe&255,se+1},i.prototype.writeInt16LE=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,2,32767,-32768),this[se]=oe&255,this[se+1]=oe>>>8,se+2},i.prototype.writeInt16BE=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,2,32767,-32768),this[se]=oe>>>8,this[se+1]=oe&255,se+2},i.prototype.writeInt32LE=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,4,2147483647,-2147483648),this[se]=oe&255,this[se+1]=oe>>>8,this[se+2]=oe>>>16,this[se+3]=oe>>>24,se+4},i.prototype.writeInt32BE=function(oe,se,me){return oe=+oe,se=se>>>0,me||re(this,oe,se,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[se]=oe>>>24,this[se+1]=oe>>>16,this[se+2]=oe>>>8,this[se+3]=oe&255,se+4};function Q(ne,oe,se,me,ce,pe){if(se+me>ne.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("Index out of range")}function Z(ne,oe,se,me,ce){return oe=+oe,se=se>>>0,ce||Q(ne,oe,se,4),h.write(ne,oe,se,me,23,4),se+4}i.prototype.writeFloatLE=function(oe,se,me){return Z(this,oe,se,!0,me)},i.prototype.writeFloatBE=function(oe,se,me){return Z(this,oe,se,!1,me)};function K(ne,oe,se,me,ce){return oe=+oe,se=se>>>0,ce||Q(ne,oe,se,8),h.write(ne,oe,se,me,52,8),se+8}i.prototype.writeDoubleLE=function(oe,se,me){return K(this,oe,se,!0,me)},i.prototype.writeDoubleBE=function(oe,se,me){return K(this,oe,se,!1,me)},i.prototype.copy=function(oe,se,me,ce){if(!i.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(me||(me=0),!ce&&ce!==0&&(ce=this.length),se>=oe.length&&(se=oe.length),se||(se=0),ce>0&&ce<me&&(ce=me),ce===me||oe.length===0||this.length===0)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),oe.length-se<ce-me&&(ce=oe.length-se+me);var pe=ce-me;if(this===oe&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(se,me,ce);else if(this===oe&&me<se&&se<ce)for(var xe=pe-1;xe>=0;--xe)oe[xe+se]=this[xe+me];else Uint8Array.prototype.set.call(oe,this.subarray(me,ce),se);return pe},i.prototype.fill=function(oe,se,me,ce){if(typeof oe=="string"){if(typeof se=="string"?(ce=se,se=0,me=this.length):typeof me=="string"&&(ce=me,me=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!i.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(oe.length===1){var pe=oe.charCodeAt(0);(ce==="utf8"&&pe<128||ce==="latin1")&&(oe=pe)}}else typeof oe=="number"&&(oe=oe&255);if(se<0||this.length<se||this.length<me)throw new RangeError("Out of range index");if(me<=se)return this;se=se>>>0,me=me===void 0?this.length:me>>>0,oe||(oe=0);var xe;if(typeof oe=="number")for(xe=se;xe<me;++xe)this[xe]=oe;else{var Se=i.isBuffer(oe)?oe:i.from(oe,ce),Ae=Se.length;if(Ae===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(xe=0;xe<me-se;++xe)this[xe+se]=Se[xe%Ae]}return this};var le=/[^+/0-9A-Za-z-_]/g;function fe(ne){if(ne=ne.split("=")[0],ne=ne.trim().replace(le,""),ne.length<2)return"";for(;ne.length%4!==0;)ne=ne+"=";return ne}function ue(ne){return ne<16?"0"+ne.toString(16):ne.toString(16)}function V(ne,oe){oe=oe||1/0;for(var se,me=ne.length,ce=null,pe=[],xe=0;xe<me;++xe){if(se=ne.charCodeAt(xe),se>55295&&se<57344){if(!ce){if(se>56319){(oe-=3)>-1&&pe.push(239,191,189);continue}else if(xe+1===me){(oe-=3)>-1&&pe.push(239,191,189);continue}ce=se;continue}if(se<56320){(oe-=3)>-1&&pe.push(239,191,189),ce=se;continue}se=(ce-55296<<10|se-56320)+65536}else ce&&(oe-=3)>-1&&pe.push(239,191,189);if(ce=null,se<128){if((oe-=1)<0)break;pe.push(se)}else if(se<2048){if((oe-=2)<0)break;pe.push(se>>6|192,se&63|128)}else if(se<65536){if((oe-=3)<0)break;pe.push(se>>12|224,se>>6&63|128,se&63|128)}else if(se<1114112){if((oe-=4)<0)break;pe.push(se>>18|240,se>>12&63|128,se>>6&63|128,se&63|128)}else throw new Error("Invalid code point")}return pe}function j(ne){for(var oe=[],se=0;se<ne.length;++se)oe.push(ne.charCodeAt(se)&255);return oe}function ee(ne,oe){for(var se,me,ce,pe=[],xe=0;xe<ne.length&&!((oe-=2)<0);++xe)se=ne.charCodeAt(xe),me=se>>8,ce=se%256,pe.push(ce),pe.push(me);return pe}function q(ne){return o.toByteArray(fe(ne))}function X(ne,oe,se,me){for(var ce=0;ce<me&&!(ce+se>=oe.length||ce>=ne.length);++ce)oe[ce+se]=ne[ce];return ce}function J(ne,oe){return ne instanceof oe||ne!=null&&ne.constructor!=null&&ne.constructor.name!=null&&ne.constructor.name===oe.name}function ie(ne){return ne!==ne}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(e,I,F){I.exports=s;function s(o,h,y){return h<y?o<h?h:o>y?y:o:o<y?y:o>h?h:o}},{}],87:[function(e,I,F){var s=e("clamp");I.exports=o,I.exports.to=o,I.exports.from=h;function o(y,t){t==null&&(t=!0);var a=y[0],i=y[1],n=y[2],r=y[3];r==null&&(r=t?1:255),t&&(a*=255,i*=255,n*=255,r*=255),a=s(a,0,255)&255,i=s(i,0,255)&255,n=s(n,0,255)&255,r=s(r,0,255)&255;var f=a*16777216+(i<<16)+(n<<8)+r;return f}function h(y,t){y=+y;var a=y>>>24,i=(y&16711680)>>>16,n=(y&65280)>>>8,r=y&255;return t===!1?[a,i,n,r]:[a/255,i/255,n/255,r/255]}},{clamp:86}],88:[function(e,I,F){I.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(e,I,F){var s=e("color-rgba"),o=e("clamp"),h=e("dtype");I.exports=function(a,i){(i==="float"||!i)&&(i="array"),i==="uint"&&(i="uint8"),i==="uint_clamped"&&(i="uint8_clamped");var n=h(i),r=new n(4),f=i!=="uint8"&&i!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=s(a),a[0]/=255,a[1]/=255,a[2]/=255),y(a)?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:255,f&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(f?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:1):(r[0]=o(Math.floor(a[0]*255),0,255),r[1]=o(Math.floor(a[1]*255),0,255),r[2]=o(Math.floor(a[2]*255),0,255),r[3]=a[3]==null?255:o(Math.floor(a[3]*255),0,255)),r)};function y(t){return!!(t instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(e,I,F){(function(s){(function(){var o=e("color-name"),h=e("is-plain-obj"),y=e("defined");I.exports=a;var t={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(i){var n,r=[],f=1,u;if(typeof i=="string")if(o[i])r=o[i].slice(),u="rgb";else if(i==="transparent")f=0,u="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var l=i.slice(1),m=l.length,d=m<=4;f=1,d?(r=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],m===4&&(f=parseInt(l[3]+l[3],16)/255)):(r=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],m===8&&(f=parseInt(l[6]+l[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),u="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var b=n[1],g=b==="rgb",l=b.replace(/a$/,"");u=l;var m=l==="cmyk"?4:l==="gray"?1:3;r=n[2].trim().split(/\s*,\s*/).map(function(c,S){if(/%$/.test(c))return S===m?parseFloat(c)/100:l==="rgb"?parseFloat(c)*255/100:parseFloat(c);if(l[S]==="h"){if(/deg$/.test(c))return parseFloat(c);if(t[c]!==void 0)return t[c]}return parseFloat(c)}),b===l&&r.push(1),f=g||r[m]===void 0?1:r[m],r=r.slice(0,m)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(r=i.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),u=i.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(i))u="rgb",r=[i>>>16,(i&65280)>>>8,i&255];else if(h(i)){var _=y(i.r,i.red,i.R,null);_!==null?(u="rgb",r=[_,y(i.g,i.green,i.G),y(i.b,i.blue,i.B)]):(u="hsl",r=[y(i.h,i.hue,i.H),y(i.s,i.saturation,i.S),y(i.l,i.lightness,i.L,i.b,i.brightness)]),f=y(i.a,i.alpha,i.opacity,1),i.opacity!=null&&(f/=100)}else(Array.isArray(i)||s.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(r=[i[0],i[1],i[2]],u="rgb",f=i.length===4?i[3]:1);return{space:u,values:r,alpha:f}}}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(e,I,F){var s=e("color-parse"),o=e("color-space/hsl"),h=e("clamp");I.exports=function(t){var a,i=s(t);return i.space?(a=Array(3),a[0]=h(i.values[0],0,255),a[1]=h(i.values[1],0,255),a[2]=h(i.values[2],0,255),i.space[0]==="h"&&(a=o.rgb(a)),a.push(h(i.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(e,I,F){var s=e("./rgb");I.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(o){var h=o[0]/360,y=o[1]/100,t=o[2]/100,a,i,n,r,f;if(y===0)return f=t*255,[f,f,f];t<.5?i=t*(1+y):i=t+y-t*y,a=2*t-i,r=[0,0,0];for(var u=0;u<3;u++)n=h+1/3*-(u-1),n<0?n++:n>1&&n--,6*n<1?f=a+(i-a)*6*n:2*n<1?f=i:3*n<2?f=a+(i-a)*(2/3-n)*6:f=a,r[u]=f*255;return r}},s.hsl=function(o){var h=o[0]/255,y=o[1]/255,t=o[2]/255,a=Math.min(h,y,t),i=Math.max(h,y,t),n=i-a,r,f,u;return i===a?r=0:h===i?r=(y-t)/n:y===i?r=2+(t-h)/n:t===i&&(r=4+(h-y)/n),r=Math.min(r*60,360),r<0&&(r+=360),u=(a+i)/2,i===a?f=0:u<=.5?f=n/(i+a):f=n/(2-i-a),[r,f*100,u*100]}},{"./rgb":93}],93:[function(e,I,F){I.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(e,I,F){I.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(e,I,F){I.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(e,I,F){I.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(e,I,F){I.exports=["normal","italic","oblique"]},{}],98:[function(e,I,F){I.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(e,I,F){I.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(e,I,F){var s=e("css-font-size-keywords");I.exports={isSize:function(h){return/^[\d\.]/.test(h)||h.indexOf("/")!==-1||s.indexOf(h)!==-1}}},{"css-font-size-keywords":95}],101:[function(e,I,F){var s=e("unquote"),o=e("css-global-keywords"),h=e("css-system-font-keywords"),y=e("css-font-weight-keywords"),t=e("css-font-style-keywords"),a=e("css-font-stretch-keywords"),i=e("string-split-by"),n=e("./lib/util").isSize;I.exports=f;var r=f.cache={};function f(l){if(typeof l!="string")throw new Error("Font argument must be a string.");if(r[l])return r[l];if(l==="")throw new Error("Cannot parse an empty string.");if(h.indexOf(l)!==-1)return r[l]={system:l};for(var m={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=i(l,/\s+/),b;b=d.shift();){if(o.indexOf(b)!==-1)return["style","variant","weight","stretch"].forEach(function(_){m[_]=b}),r[l]=m;if(t.indexOf(b)!==-1){m.style=b;continue}if(b==="normal"||b==="small-caps"){m.variant=b;continue}if(a.indexOf(b)!==-1){m.stretch=b;continue}if(y.indexOf(b)!==-1){m.weight=b;continue}if(n(b)){var g=i(b,"/");if(m.size=g[0],g[1]!=null?m.lineHeight=u(g[1]):d[0]==="/"&&(d.shift(),m.lineHeight=u(d.shift())),!d.length)throw new Error("Missing required font-family.");return m.family=i(d.join(" "),/\s*,\s*/).map(s),r[l]=m}throw new Error("Unknown or unsupported font token: "+b)}throw new Error("Missing required font-size.")}function u(l){var m=parseFloat(l);return m.toString()===l?m:l}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(e,I,F){var s=e("pick-by-alias"),o=e("./lib/util").isSize,h=l(e("css-global-keywords")),y=l(e("css-system-font-keywords")),t=l(e("css-font-weight-keywords")),a=l(e("css-font-style-keywords")),i=l(e("css-font-stretch-keywords")),n={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};I.exports=function(d){if(d=s(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),d.system)return d.system&&u(d.system,y),d.system;if(u(d.style,a),u(d.variant,n),u(d.weight,t),u(d.stretch,i),d.size==null&&(d.size=f.size),typeof d.size=="number"&&(d.size+="px"),!o)throw Error("Bad size value `"+d.size+"`");d.family||(d.family=f.family),Array.isArray(d.family)&&(d.family.length||(d.family=[f.family]),d.family=d.family.map(function(g){return r[g]?g:'"'+g+'"'}).join(", "));var b=[];return b.push(d.style),d.variant!==d.style&&b.push(d.variant),d.weight!==d.variant&&d.weight!==d.style&&b.push(d.weight),d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&b.push(d.stretch),b.push(d.size+(d.lineHeight==null||d.lineHeight==="normal"||d.lineHeight+""=="1"?"":"/"+d.lineHeight)),b.push(d.family),b.filter(Boolean).join(" ")};function u(m,d){if(m&&!d[m]&&!h[m])throw Error("Unknown keyword `"+m+"`");return m}function l(m){for(var d={},b=0;b<m.length;b++)d[m[b]]=1;return d}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(e,I,F){I.exports=["inherit","initial","unset"]},{}],104:[function(e,I,F){I.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(e,I,F){var s=e("type/value/is"),o=e("type/value/ensure"),h=e("type/plain-function/ensure"),y=e("es5-ext/object/copy"),t=e("es5-ext/object/normalize-options"),a=e("es5-ext/object/map"),i=Function.prototype.bind,n=Object.defineProperty,r=Object.prototype.hasOwnProperty,f;f=function(u,l,m){var d=o(l)&&h(l.value),b;return b=y(l),delete b.writable,delete b.value,b.get=function(){return!m.overwriteDefinition&&r.call(this,u)?d:(l.value=i.call(d,m.resolveContext?m.resolveContext(this):this),n(this,u,l),this[u])},b},I.exports=function(u){var l=t(arguments[1]);return s(l.resolveContext)&&h(l.resolveContext),a(u,function(m,d){return f(d,m,l)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(e,I,F){var s=e("type/value/is"),o=e("type/plain-function/is"),h=e("es5-ext/object/assign"),y=e("es5-ext/object/normalize-options"),t=e("es5-ext/string/#/contains"),a=I.exports=function(i,n){var r,f,u,l,m;return arguments.length<2||typeof i!="string"?(l=n,n=i,i=null):l=arguments[2],s(i)?(r=t.call(i,"c"),f=t.call(i,"e"),u=t.call(i,"w")):(r=u=!0,f=!1),m={value:n,configurable:r,enumerable:f,writable:u},l?h(y(l),m):m};a.gs=function(i,n,r){var f,u,l,m;return typeof i!="string"?(l=r,r=n,n=i,i=null):l=arguments[3],s(n)?o(n)?s(r)?o(r)||(l=r,r=void 0):r=void 0:(l=n,n=r=void 0):n=void 0,s(i)?(f=t.call(i,"c"),u=t.call(i,"e")):(f=!0,u=!1),m={get:n,set:r,configurable:f,enumerable:u},l?h(y(l),m):m}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(e,I,F){(function(s,o){o(typeof F=="object"&&typeof I!="undefined"?F:s.d3=s.d3||{})})(this,function(s){function o(V,j){return V<j?-1:V>j?1:V>=j?0:NaN}function h(V){return V.length===1&&(V=y(V)),{left:function(j,ee,q,X){for(q==null&&(q=0),X==null&&(X=j.length);q<X;){var J=q+X>>>1;V(j[J],ee)<0?q=J+1:X=J}return q},right:function(j,ee,q,X){for(q==null&&(q=0),X==null&&(X=j.length);q<X;){var J=q+X>>>1;V(j[J],ee)>0?X=J:q=J+1}return q}}}function y(V){return function(j,ee){return o(V(j),ee)}}var t=h(o),a=t.right,i=t.left;function n(V,j){j==null&&(j=r);for(var ee=0,q=V.length-1,X=V[0],J=new Array(q<0?0:q);ee<q;)J[ee]=j(X,X=V[++ee]);return J}function r(V,j){return[V,j]}function f(V,j,ee){var q=V.length,X=j.length,J=new Array(q*X),ie,ne,oe,se;for(ee==null&&(ee=r),ie=oe=0;ie<q;++ie)for(se=V[ie],ne=0;ne<X;++ne,++oe)J[oe]=ee(se,j[ne]);return J}function u(V,j){return j<V?-1:j>V?1:j>=V?0:NaN}function l(V){return V===null?NaN:+V}function m(V,j){var ee=V.length,q=0,X=-1,J=0,ie,ne,oe=0;if(j==null)for(;++X<ee;)isNaN(ie=l(V[X]))||(ne=ie-J,J+=ne/++q,oe+=ne*(ie-J));else for(;++X<ee;)isNaN(ie=l(j(V[X],X,V)))||(ne=ie-J,J+=ne/++q,oe+=ne*(ie-J));if(q>1)return oe/(q-1)}function d(V,j){var ee=m(V,j);return ee&&Math.sqrt(ee)}function b(V,j){var ee=V.length,q=-1,X,J,ie;if(j==null){for(;++q<ee;)if((X=V[q])!=null&&X>=X)for(J=ie=X;++q<ee;)(X=V[q])!=null&&(J>X&&(J=X),ie<X&&(ie=X))}else for(;++q<ee;)if((X=j(V[q],q,V))!=null&&X>=X)for(J=ie=X;++q<ee;)(X=j(V[q],q,V))!=null&&(J>X&&(J=X),ie<X&&(ie=X));return[J,ie]}var g=Array.prototype,_=g.slice,p=g.map;function A(V){return function(){return V}}function c(V){return V}function S(V,j,ee){V=+V,j=+j,ee=(X=arguments.length)<2?(j=V,V=0,1):X<3?1:+ee;for(var q=-1,X=Math.max(0,Math.ceil((j-V)/ee))|0,J=new Array(X);++q<X;)J[q]=V+q*ee;return J}var T=Math.sqrt(50),x=Math.sqrt(10),w=Math.sqrt(2);function v(V,j,ee){var q,X=-1,J,ie,ne;if(j=+j,V=+V,ee=+ee,V===j&&ee>0)return[V];if((q=j<V)&&(J=V,V=j,j=J),(ne=C(V,j,ee))===0||!isFinite(ne))return[];if(ne>0)for(V=Math.ceil(V/ne),j=Math.floor(j/ne),ie=new Array(J=Math.ceil(j-V+1));++X<J;)ie[X]=(V+X)*ne;else for(V=Math.floor(V*ne),j=Math.ceil(j*ne),ie=new Array(J=Math.ceil(V-j+1));++X<J;)ie[X]=(V-X)/ne;return q&&ie.reverse(),ie}function C(V,j,ee){var q=(j-V)/Math.max(0,ee),X=Math.floor(Math.log(q)/Math.LN10),J=q/Math.pow(10,X);return X>=0?(J>=T?10:J>=x?5:J>=w?2:1)*Math.pow(10,X):-Math.pow(10,-X)/(J>=T?10:J>=x?5:J>=w?2:1)}function M(V,j,ee){var q=Math.abs(j-V)/Math.max(0,ee),X=Math.pow(10,Math.floor(Math.log(q)/Math.LN10)),J=q/X;return J>=T?X*=10:J>=x?X*=5:J>=w&&(X*=2),j<V?-X:X}function E(V){return Math.ceil(Math.log(V.length)/Math.LN2)+1}function L(){var V=c,j=b,ee=E;function q(X){var J,ie=X.length,ne,oe=new Array(ie);for(J=0;J<ie;++J)oe[J]=V(X[J],J,X);var se=j(oe),me=se[0],ce=se[1],pe=ee(oe,me,ce);Array.isArray(pe)||(pe=M(me,ce,pe),pe=S(Math.ceil(me/pe)*pe,ce,pe));for(var xe=pe.length;pe[0]<=me;)pe.shift(),--xe;for(;pe[xe-1]>ce;)pe.pop(),--xe;var Se=new Array(xe+1),Ae;for(J=0;J<=xe;++J)Ae=Se[J]=[],Ae.x0=J>0?pe[J-1]:me,Ae.x1=J<xe?pe[J]:ce;for(J=0;J<ie;++J)ne=oe[J],me<=ne&&ne<=ce&&Se[a(pe,ne,0,xe)].push(X[J]);return Se}return q.value=function(X){return arguments.length?(V=typeof X=="function"?X:A(X),q):V},q.domain=function(X){return arguments.length?(j=typeof X=="function"?X:A([X[0],X[1]]),q):j},q.thresholds=function(X){return arguments.length?(ee=typeof X=="function"?X:Array.isArray(X)?A(_.call(X)):A(X),q):ee},q}function z(V,j,ee){if(ee==null&&(ee=l),!!(q=V.length)){if((j=+j)<=0||q<2)return+ee(V[0],0,V);if(j>=1)return+ee(V[q-1],q-1,V);var q,X=(q-1)*j,J=Math.floor(X),ie=+ee(V[J],J,V),ne=+ee(V[J+1],J+1,V);return ie+(ne-ie)*(X-J)}}function O(V,j,ee){return V=p.call(V,l).sort(o),Math.ceil((ee-j)/(2*(z(V,.75)-z(V,.25))*Math.pow(V.length,-1/3)))}function R(V,j,ee){return Math.ceil((ee-j)/(3.5*d(V)*Math.pow(V.length,-1/3)))}function D(V,j){var ee=V.length,q=-1,X,J;if(j==null){for(;++q<ee;)if((X=V[q])!=null&&X>=X)for(J=X;++q<ee;)(X=V[q])!=null&&X>J&&(J=X)}else for(;++q<ee;)if((X=j(V[q],q,V))!=null&&X>=X)for(J=X;++q<ee;)(X=j(V[q],q,V))!=null&&X>J&&(J=X);return J}function H(V,j){var ee=V.length,q=ee,X=-1,J,ie=0;if(j==null)for(;++X<ee;)isNaN(J=l(V[X]))?--q:ie+=J;else for(;++X<ee;)isNaN(J=l(j(V[X],X,V)))?--q:ie+=J;if(q)return ie/q}function B(V,j){var ee=V.length,q=-1,X,J=[];if(j==null)for(;++q<ee;)isNaN(X=l(V[q]))||J.push(X);else for(;++q<ee;)isNaN(X=l(j(V[q],q,V)))||J.push(X);return z(J.sort(o),.5)}function $(V){for(var j=V.length,ee,q=-1,X=0,J,ie;++q<j;)X+=V[q].length;for(J=new Array(X);--j>=0;)for(ie=V[j],ee=ie.length;--ee>=0;)J[--X]=ie[ee];return J}function W(V,j){var ee=V.length,q=-1,X,J;if(j==null){for(;++q<ee;)if((X=V[q])!=null&&X>=X)for(J=X;++q<ee;)(X=V[q])!=null&&J>X&&(J=X)}else for(;++q<ee;)if((X=j(V[q],q,V))!=null&&X>=X)for(J=X;++q<ee;)(X=j(V[q],q,V))!=null&&J>X&&(J=X);return J}function re(V,j){for(var ee=j.length,q=new Array(ee);ee--;)q[ee]=V[j[ee]];return q}function Q(V,j){if(!!(ee=V.length)){var ee,q=0,X=0,J,ie=V[X];for(j==null&&(j=o);++q<ee;)(j(J=V[q],ie)<0||j(ie,ie)!==0)&&(ie=J,X=q);if(j(ie,ie)===0)return X}}function Z(V,j,ee){for(var q=(ee==null?V.length:ee)-(j=j==null?0:+j),X,J;q;)J=Math.random()*q--|0,X=V[q+j],V[q+j]=V[J+j],V[J+j]=X;return V}function K(V,j){var ee=V.length,q=-1,X,J=0;if(j==null)for(;++q<ee;)(X=+V[q])&&(J+=X);else for(;++q<ee;)(X=+j(V[q],q,V))&&(J+=X);return J}function le(V){if(!(J=V.length))return[];for(var j=-1,ee=W(V,fe),q=new Array(ee);++j<ee;)for(var X=-1,J,ie=q[j]=new Array(J);++X<J;)ie[X]=V[X][j];return q}function fe(V){return V.length}function ue(){return le(arguments)}s.bisect=a,s.bisectRight=a,s.bisectLeft=i,s.ascending=o,s.bisector=h,s.cross=f,s.descending=u,s.deviation=d,s.extent=b,s.histogram=L,s.thresholdFreedmanDiaconis=O,s.thresholdScott=R,s.thresholdSturges=E,s.max=D,s.mean=H,s.median=B,s.merge=$,s.min=W,s.pairs=n,s.permute=re,s.quantile=z,s.range=S,s.scan=Q,s.shuffle=Z,s.sum=K,s.ticks=v,s.tickIncrement=C,s.tickStep=M,s.transpose=le,s.variance=m,s.zip=ue,Object.defineProperty(s,"__esModule",{value:!0})})},{}],108:[function(e,I,F){(function(s,o){o(typeof F=="object"&&typeof I!="undefined"?F:s.d3=s.d3||{})})(this,function(s){var o="$";function h(){}h.prototype=y.prototype={constructor:h,has:function(g){return o+g in this},get:function(g){return this[o+g]},set:function(g,_){return this[o+g]=_,this},remove:function(g){var _=o+g;return _ in this&&delete this[_]},clear:function(){for(var g in this)g[0]===o&&delete this[g]},keys:function(){var g=[];for(var _ in this)_[0]===o&&g.push(_.slice(1));return g},values:function(){var g=[];for(var _ in this)_[0]===o&&g.push(this[_]);return g},entries:function(){var g=[];for(var _ in this)_[0]===o&&g.push({key:_.slice(1),value:this[_]});return g},size:function(){var g=0;for(var _ in this)_[0]===o&&++g;return g},empty:function(){for(var g in this)if(g[0]===o)return!1;return!0},each:function(g){for(var _ in this)_[0]===o&&g(this[_],_.slice(1),this)}};function y(g,_){var p=new h;if(g instanceof h)g.each(function(x,w){p.set(w,x)});else if(Array.isArray(g)){var A=-1,c=g.length,S;if(_==null)for(;++A<c;)p.set(A,g[A]);else for(;++A<c;)p.set(_(S=g[A],A,g),S)}else if(g)for(var T in g)p.set(T,g[T]);return p}function t(){var g=[],_=[],p,A,c;function S(x,w,v,C){if(w>=g.length)return p!=null&&x.sort(p),A!=null?A(x):x;for(var M=-1,E=x.length,L=g[w++],z,O,R=y(),D,H=v();++M<E;)(D=R.get(z=L(O=x[M])+""))?D.push(O):R.set(z,[O]);return R.each(function(B,$){C(H,$,S(B,w,v,C))}),H}function T(x,w){if(++w>g.length)return x;var v,C=_[w-1];return A!=null&&w>=g.length?v=x.entries():(v=[],x.each(function(M,E){v.push({key:E,values:T(M,w)})})),C!=null?v.sort(function(M,E){return C(M.key,E.key)}):v}return c={object:function(x){return S(x,0,a,i)},map:function(x){return S(x,0,n,r)},entries:function(x){return T(S(x,0,n,r),0)},key:function(x){return g.push(x),c},sortKeys:function(x){return _[g.length-1]=x,c},sortValues:function(x){return p=x,c},rollup:function(x){return A=x,c}}}function a(){return{}}function i(g,_,p){g[_]=p}function n(){return y()}function r(g,_,p){g.set(_,p)}function f(){}var u=y.prototype;f.prototype=l.prototype={constructor:f,has:u.has,add:function(g){return g+="",this[o+g]=g,this},remove:u.remove,clear:u.clear,values:u.keys,size:u.size,empty:u.empty,each:u.each};function l(g,_){var p=new f;if(g instanceof f)g.each(function(S){p.add(S)});else if(g){var A=-1,c=g.length;if(_==null)for(;++A<c;)p.add(g[A]);else for(;++A<c;)p.add(_(g[A],A,g))}return p}function m(g){var _=[];for(var p in g)_.push(p);return _}function d(g){var _=[];for(var p in g)_.push(g[p]);return _}function b(g){var _=[];for(var p in g)_.push({key:p,value:g[p]});return _}s.nest=t,s.set=l,s.map=y,s.keys=m,s.values=d,s.entries=b,Object.defineProperty(s,"__esModule",{value:!0})})},{}],109:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=s||self,o(s.d3=s.d3||{}))})(this,function(s){function o(De,je,dt){De.prototype=je.prototype=dt,dt.constructor=De}function h(De,je){var dt=Object.create(De.prototype);for(var Et in je)dt[Et]=je[Et];return dt}function y(){}var t=.7,a=1/t,i="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,u=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),l=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),m=new RegExp("^rgba\\("+[i,i,i,n]+"\\)$"),d=new RegExp("^rgba\\("+[r,r,r,n]+"\\)$"),b=new RegExp("^hsl\\("+[n,r,r]+"\\)$"),g=new RegExp("^hsla\\("+[n,r,r,n]+"\\)$"),_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o(y,S,{copy:function(De){return Object.assign(new this.constructor,this,De)},displayable:function(){return this.rgb().displayable()},hex:p,formatHex:p,formatHsl:A,formatRgb:c,toString:c});function p(){return this.rgb().formatHex()}function A(){return O(this).formatHsl()}function c(){return this.rgb().formatRgb()}function S(De){var je,dt;return De=(De+"").trim().toLowerCase(),(je=f.exec(De))?(dt=je[1].length,je=parseInt(je[1],16),dt===6?T(je):dt===3?new C(je>>8&15|je>>4&240,je>>4&15|je&240,(je&15)<<4|je&15,1):dt===8?x(je>>24&255,je>>16&255,je>>8&255,(je&255)/255):dt===4?x(je>>12&15|je>>8&240,je>>8&15|je>>4&240,je>>4&15|je&240,((je&15)<<4|je&15)/255):null):(je=u.exec(De))?new C(je[1],je[2],je[3],1):(je=l.exec(De))?new C(je[1]*255/100,je[2]*255/100,je[3]*255/100,1):(je=m.exec(De))?x(je[1],je[2],je[3],je[4]):(je=d.exec(De))?x(je[1]*255/100,je[2]*255/100,je[3]*255/100,je[4]):(je=b.exec(De))?z(je[1],je[2]/100,je[3]/100,1):(je=g.exec(De))?z(je[1],je[2]/100,je[3]/100,je[4]):_.hasOwnProperty(De)?T(_[De]):De==="transparent"?new C(NaN,NaN,NaN,0):null}function T(De){return new C(De>>16&255,De>>8&255,De&255,1)}function x(De,je,dt,Et){return Et<=0&&(De=je=dt=NaN),new C(De,je,dt,Et)}function w(De){return De instanceof y||(De=S(De)),De?(De=De.rgb(),new C(De.r,De.g,De.b,De.opacity)):new C}function v(De,je,dt,Et){return arguments.length===1?w(De):new C(De,je,dt,Et==null?1:Et)}function C(De,je,dt,Et){this.r=+De,this.g=+je,this.b=+dt,this.opacity=+Et}o(C,v,h(y,{brighter:function(De){return De=De==null?a:Math.pow(a,De),new C(this.r*De,this.g*De,this.b*De,this.opacity)},darker:function(De){return De=De==null?t:Math.pow(t,De),new C(this.r*De,this.g*De,this.b*De,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatRgb:E,toString:E}));function M(){return"#"+L(this.r)+L(this.g)+L(this.b)}function E(){var De=this.opacity;return De=isNaN(De)?1:Math.max(0,Math.min(1,De)),(De===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(De===1?")":", "+De+")")}function L(De){return De=Math.max(0,Math.min(255,Math.round(De)||0)),(De<16?"0":"")+De.toString(16)}function z(De,je,dt,Et){return Et<=0?De=je=dt=NaN:dt<=0||dt>=1?De=je=NaN:je<=0&&(De=NaN),new D(De,je,dt,Et)}function O(De){if(De instanceof D)return new D(De.h,De.s,De.l,De.opacity);if(De instanceof y||(De=S(De)),!De)return new D;if(De instanceof D)return De;De=De.rgb();var je=De.r/255,dt=De.g/255,Et=De.b/255,$t=Math.min(je,dt,Et),wt=Math.max(je,dt,Et),Ot=NaN,Vt=wt-$t,kt=(wt+$t)/2;return Vt?(je===wt?Ot=(dt-Et)/Vt+(dt<Et)*6:dt===wt?Ot=(Et-je)/Vt+2:Ot=(je-dt)/Vt+4,Vt/=kt<.5?wt+$t:2-wt-$t,Ot*=60):Vt=kt>0&&kt<1?0:Ot,new D(Ot,Vt,kt,De.opacity)}function R(De,je,dt,Et){return arguments.length===1?O(De):new D(De,je,dt,Et==null?1:Et)}function D(De,je,dt,Et){this.h=+De,this.s=+je,this.l=+dt,this.opacity=+Et}o(D,R,h(y,{brighter:function(De){return De=De==null?a:Math.pow(a,De),new D(this.h,this.s,this.l*De,this.opacity)},darker:function(De){return De=De==null?t:Math.pow(t,De),new D(this.h,this.s,this.l*De,this.opacity)},rgb:function(){var De=this.h%360+(this.h<0)*360,je=isNaN(De)||isNaN(this.s)?0:this.s,dt=this.l,Et=dt+(dt<.5?dt:1-dt)*je,$t=2*dt-Et;return new C(H(De>=240?De-240:De+120,$t,Et),H(De,$t,Et),H(De<120?De+240:De-120,$t,Et),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var De=this.opacity;return De=isNaN(De)?1:Math.max(0,Math.min(1,De)),(De===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(De===1?")":", "+De+")")}}));function H(De,je,dt){return(De<60?je+(dt-je)*De/60:De<180?dt:De<240?je+(dt-je)*(240-De)/60:je)*255}var B=Math.PI/180,$=180/Math.PI,W=18,re=.96422,Q=1,Z=.82521,K=4/29,le=6/29,fe=3*le*le,ue=le*le*le;function V(De){if(De instanceof q)return new q(De.l,De.a,De.b,De.opacity);if(De instanceof ce)return pe(De);De instanceof C||(De=w(De));var je=ne(De.r),dt=ne(De.g),Et=ne(De.b),$t=X((.2225045*je+.7168786*dt+.0606169*Et)/Q),wt,Ot;return je===dt&&dt===Et?wt=Ot=$t:(wt=X((.4360747*je+.3850649*dt+.1430804*Et)/re),Ot=X((.0139322*je+.0971045*dt+.7141733*Et)/Z)),new q(116*$t-16,500*(wt-$t),200*($t-Ot),De.opacity)}function j(De,je){return new q(De,0,0,je==null?1:je)}function ee(De,je,dt,Et){return arguments.length===1?V(De):new q(De,je,dt,Et==null?1:Et)}function q(De,je,dt,Et){this.l=+De,this.a=+je,this.b=+dt,this.opacity=+Et}o(q,ee,h(y,{brighter:function(De){return new q(this.l+W*(De==null?1:De),this.a,this.b,this.opacity)},darker:function(De){return new q(this.l-W*(De==null?1:De),this.a,this.b,this.opacity)},rgb:function(){var De=(this.l+16)/116,je=isNaN(this.a)?De:De+this.a/500,dt=isNaN(this.b)?De:De-this.b/200;return je=re*J(je),De=Q*J(De),dt=Z*J(dt),new C(ie(3.1338561*je-1.6168667*De-.4906146*dt),ie(-.9787684*je+1.9161415*De+.033454*dt),ie(.0719453*je-.2289914*De+1.4052427*dt),this.opacity)}}));function X(De){return De>ue?Math.pow(De,1/3):De/fe+K}function J(De){return De>le?De*De*De:fe*(De-K)}function ie(De){return 255*(De<=.0031308?12.92*De:1.055*Math.pow(De,1/2.4)-.055)}function ne(De){return(De/=255)<=.04045?De/12.92:Math.pow((De+.055)/1.055,2.4)}function oe(De){if(De instanceof ce)return new ce(De.h,De.c,De.l,De.opacity);if(De instanceof q||(De=V(De)),De.a===0&&De.b===0)return new ce(NaN,0<De.l&&De.l<100?0:NaN,De.l,De.opacity);var je=Math.atan2(De.b,De.a)*$;return new ce(je<0?je+360:je,Math.sqrt(De.a*De.a+De.b*De.b),De.l,De.opacity)}function se(De,je,dt,Et){return arguments.length===1?oe(De):new ce(dt,je,De,Et==null?1:Et)}function me(De,je,dt,Et){return arguments.length===1?oe(De):new ce(De,je,dt,Et==null?1:Et)}function ce(De,je,dt,Et){this.h=+De,this.c=+je,this.l=+dt,this.opacity=+Et}function pe(De){if(isNaN(De.h))return new q(De.l,0,0,De.opacity);var je=De.h*B;return new q(De.l,Math.cos(je)*De.c,Math.sin(je)*De.c,De.opacity)}o(ce,me,h(y,{brighter:function(De){return new ce(this.h,this.c,this.l+W*(De==null?1:De),this.opacity)},darker:function(De){return new ce(this.h,this.c,this.l-W*(De==null?1:De),this.opacity)},rgb:function(){return pe(this).rgb()}}));var xe=-.14861,Se=1.78277,Ae=-.29227,Ce=-.90649,Ee=1.97294,Oe=Ee*Ce,_e=Ee*Se,Re=Se*Ae-Ce*xe;function Ve(De){if(De instanceof ze)return new ze(De.h,De.s,De.l,De.opacity);De instanceof C||(De=w(De));var je=De.r/255,dt=De.g/255,Et=De.b/255,$t=(Re*Et+Oe*je-_e*dt)/(Re+Oe-_e),wt=Et-$t,Ot=(Ee*(dt-$t)-Ae*wt)/Ce,Vt=Math.sqrt(Ot*Ot+wt*wt)/(Ee*$t*(1-$t)),kt=Vt?Math.atan2(Ot,wt)*$-120:NaN;return new ze(kt<0?kt+360:kt,Vt,$t,De.opacity)}function Je(De,je,dt,Et){return arguments.length===1?Ve(De):new ze(De,je,dt,Et==null?1:Et)}function ze(De,je,dt,Et){this.h=+De,this.s=+je,this.l=+dt,this.opacity=+Et}o(ze,Je,h(y,{brighter:function(De){return De=De==null?a:Math.pow(a,De),new ze(this.h,this.s,this.l*De,this.opacity)},darker:function(De){return De=De==null?t:Math.pow(t,De),new ze(this.h,this.s,this.l*De,this.opacity)},rgb:function(){var De=isNaN(this.h)?0:(this.h+120)*B,je=+this.l,dt=isNaN(this.s)?0:this.s*je*(1-je),Et=Math.cos(De),$t=Math.sin(De);return new C(255*(je+dt*(xe*Et+Se*$t)),255*(je+dt*(Ae*Et+Ce*$t)),255*(je+dt*(Ee*Et)),this.opacity)}})),s.color=S,s.cubehelix=Je,s.gray=j,s.hcl=me,s.hsl=R,s.lab=ee,s.lch=se,s.rgb=v,Object.defineProperty(s,"__esModule",{value:!0})})},{}],110:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=s||self,o(s.d3=s.d3||{}))})(this,function(s){var o={value:function(){}};function h(){for(var n=0,r=arguments.length,f={},u;n<r;++n){if(!(u=arguments[n]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new y(f)}function y(n){this._=n}function t(n,r){return n.trim().split(/^|\s+/).map(function(f){var u="",l=f.indexOf(".");if(l>=0&&(u=f.slice(l+1),f=f.slice(0,l)),f&&!r.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}y.prototype=h.prototype={constructor:y,on:function(n,r){var f=this._,u=t(n+"",f),l,m=-1,d=u.length;if(arguments.length<2){for(;++m<d;)if((l=(n=u[m]).type)&&(l=a(f[l],n.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++m<d;)if(l=(n=u[m]).type)f[l]=i(f[l],n.name,r);else if(r==null)for(l in f)f[l]=i(f[l],n.name,null);return this},copy:function(){var n={},r=this._;for(var f in r)n[f]=r[f].slice();return new y(n)},call:function(n,r){if((l=arguments.length-2)>0)for(var f=new Array(l),u=0,l,m;u<l;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(m=this._[n],u=0,l=m.length;u<l;++u)m[u].value.apply(r,f)},apply:function(n,r,f){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var u=this._[n],l=0,m=u.length;l<m;++l)u[l].value.apply(r,f)}};function a(n,r){for(var f=0,u=n.length,l;f<u;++f)if((l=n[f]).name===r)return l.value}function i(n,r,f){for(var u=0,l=n.length;u<l;++u)if(n[u].name===r){n[u]=o,n=n.slice(0,u).concat(n.slice(u+1));break}return f!=null&&n.push({name:r,value:f}),n}s.dispatch=h,Object.defineProperty(s,"__esModule",{value:!0})})},{}],111:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):o(s.d3=s.d3||{},s.d3,s.d3,s.d3,s.d3)})(this,function(s,o,h,y,t){function a(w,v){var C;w==null&&(w=0),v==null&&(v=0);function M(){var E,L=C.length,z,O=0,R=0;for(E=0;E<L;++E)z=C[E],O+=z.x,R+=z.y;for(O=O/L-w,R=R/L-v,E=0;E<L;++E)z=C[E],z.x-=O,z.y-=R}return M.initialize=function(E){C=E},M.x=function(E){return arguments.length?(w=+E,M):w},M.y=function(E){return arguments.length?(v=+E,M):v},M}function i(w){return function(){return w}}function n(){return(Math.random()-.5)*1e-6}function r(w){return w.x+w.vx}function f(w){return w.y+w.vy}function u(w){var v,C,M=1,E=1;typeof w!="function"&&(w=i(w==null?1:+w));function L(){for(var R,D=v.length,H,B,$,W,re,Q,Z=0;Z<E;++Z)for(H=o.quadtree(v,r,f).visitAfter(z),R=0;R<D;++R)B=v[R],re=C[B.index],Q=re*re,$=B.x+B.vx,W=B.y+B.vy,H.visit(K);function K(le,fe,ue,V,j){var ee=le.data,q=le.r,X=re+q;if(ee){if(ee.index>B.index){var J=$-ee.x-ee.vx,ie=W-ee.y-ee.vy,ne=J*J+ie*ie;ne<X*X&&(J===0&&(J=n(),ne+=J*J),ie===0&&(ie=n(),ne+=ie*ie),ne=(X-(ne=Math.sqrt(ne)))/ne*M,B.vx+=(J*=ne)*(X=(q*=q)/(Q+q)),B.vy+=(ie*=ne)*X,ee.vx-=J*(X=1-X),ee.vy-=ie*X)}return}return fe>$+X||V<$-X||ue>W+X||j<W-X}}function z(R){if(R.data)return R.r=C[R.data.index];for(var D=R.r=0;D<4;++D)R[D]&&R[D].r>R.r&&(R.r=R[D].r)}function O(){if(!!v){var R,D=v.length,H;for(C=new Array(D),R=0;R<D;++R)H=v[R],C[H.index]=+w(H,R,v)}}return L.initialize=function(R){v=R,O()},L.iterations=function(R){return arguments.length?(E=+R,L):E},L.strength=function(R){return arguments.length?(M=+R,L):M},L.radius=function(R){return arguments.length?(w=typeof R=="function"?R:i(+R),O(),L):w},L}function l(w){return w.index}function m(w,v){var C=w.get(v);if(!C)throw new Error("missing: "+v);return C}function d(w){var v=l,C=H,M,E=i(30),L,z,O,R,D=1;w==null&&(w=[]);function H(Q){return 1/Math.min(O[Q.source.index],O[Q.target.index])}function B(Q){for(var Z=0,K=w.length;Z<D;++Z)for(var le=0,fe,ue,V,j,ee,q,X;le<K;++le)fe=w[le],ue=fe.source,V=fe.target,j=V.x+V.vx-ue.x-ue.vx||n(),ee=V.y+V.vy-ue.y-ue.vy||n(),q=Math.sqrt(j*j+ee*ee),q=(q-L[le])/q*Q*M[le],j*=q,ee*=q,V.vx-=j*(X=R[le]),V.vy-=ee*X,ue.vx+=j*(X=1-X),ue.vy+=ee*X}function $(){if(!!z){var Q,Z=z.length,K=w.length,le=h.map(z,v),fe;for(Q=0,O=new Array(Z);Q<K;++Q)fe=w[Q],fe.index=Q,typeof fe.source!="object"&&(fe.source=m(le,fe.source)),typeof fe.target!="object"&&(fe.target=m(le,fe.target)),O[fe.source.index]=(O[fe.source.index]||0)+1,O[fe.target.index]=(O[fe.target.index]||0)+1;for(Q=0,R=new Array(K);Q<K;++Q)fe=w[Q],R[Q]=O[fe.source.index]/(O[fe.source.index]+O[fe.target.index]);M=new Array(K),W(),L=new Array(K),re()}}function W(){if(!!z)for(var Q=0,Z=w.length;Q<Z;++Q)M[Q]=+C(w[Q],Q,w)}function re(){if(!!z)for(var Q=0,Z=w.length;Q<Z;++Q)L[Q]=+E(w[Q],Q,w)}return B.initialize=function(Q){z=Q,$()},B.links=function(Q){return arguments.length?(w=Q,$(),B):w},B.id=function(Q){return arguments.length?(v=Q,B):v},B.iterations=function(Q){return arguments.length?(D=+Q,B):D},B.strength=function(Q){return arguments.length?(C=typeof Q=="function"?Q:i(+Q),W(),B):C},B.distance=function(Q){return arguments.length?(E=typeof Q=="function"?Q:i(+Q),re(),B):E},B}function b(w){return w.x}function g(w){return w.y}var _=10,p=Math.PI*(3-Math.sqrt(5));function A(w){var v,C=1,M=.001,E=1-Math.pow(M,1/300),L=0,z=.6,O=h.map(),R=t.timer(H),D=y.dispatch("tick","end");w==null&&(w=[]);function H(){B(),D.call("tick",v),C<M&&(R.stop(),D.call("end",v))}function B(re){var Q,Z=w.length,K;re===void 0&&(re=1);for(var le=0;le<re;++le)for(C+=(L-C)*E,O.each(function(fe){fe(C)}),Q=0;Q<Z;++Q)K=w[Q],K.fx==null?K.x+=K.vx*=z:(K.x=K.fx,K.vx=0),K.fy==null?K.y+=K.vy*=z:(K.y=K.fy,K.vy=0);return v}function $(){for(var re=0,Q=w.length,Z;re<Q;++re){if(Z=w[re],Z.index=re,Z.fx!=null&&(Z.x=Z.fx),Z.fy!=null&&(Z.y=Z.fy),isNaN(Z.x)||isNaN(Z.y)){var K=_*Math.sqrt(re),le=re*p;Z.x=K*Math.cos(le),Z.y=K*Math.sin(le)}(isNaN(Z.vx)||isNaN(Z.vy))&&(Z.vx=Z.vy=0)}}function W(re){return re.initialize&&re.initialize(w),re}return $(),v={tick:B,restart:function(){return R.restart(H),v},stop:function(){return R.stop(),v},nodes:function(re){return arguments.length?(w=re,$(),O.each(W),v):w},alpha:function(re){return arguments.length?(C=+re,v):C},alphaMin:function(re){return arguments.length?(M=+re,v):M},alphaDecay:function(re){return arguments.length?(E=+re,v):+E},alphaTarget:function(re){return arguments.length?(L=+re,v):L},velocityDecay:function(re){return arguments.length?(z=1-re,v):1-z},force:function(re,Q){return arguments.length>1?(Q==null?O.remove(re):O.set(re,W(Q)),v):O.get(re)},find:function(re,Q,Z){var K=0,le=w.length,fe,ue,V,j,ee;for(Z==null?Z=1/0:Z*=Z,K=0;K<le;++K)j=w[K],fe=re-j.x,ue=Q-j.y,V=fe*fe+ue*ue,V<Z&&(ee=j,Z=V);return ee},on:function(re,Q){return arguments.length>1?(D.on(re,Q),v):D.on(re)}}}function c(){var w,v,C,M=i(-30),E,L=1,z=1/0,O=.81;function R($){var W,re=w.length,Q=o.quadtree(w,b,g).visitAfter(H);for(C=$,W=0;W<re;++W)v=w[W],Q.visit(B)}function D(){if(!!w){var $,W=w.length,re;for(E=new Array(W),$=0;$<W;++$)re=w[$],E[re.index]=+M(re,$,w)}}function H($){var W=0,re,Q,Z=0,K,le,fe;if($.length){for(K=le=fe=0;fe<4;++fe)(re=$[fe])&&(Q=Math.abs(re.value))&&(W+=re.value,Z+=Q,K+=Q*re.x,le+=Q*re.y);$.x=K/Z,$.y=le/Z}else{re=$,re.x=re.data.x,re.y=re.data.y;do W+=E[re.data.index];while(re=re.next)}$.value=W}function B($,W,re,Q){if(!$.value)return!0;var Z=$.x-v.x,K=$.y-v.y,le=Q-W,fe=Z*Z+K*K;if(le*le/O<fe)return fe<z&&(Z===0&&(Z=n(),fe+=Z*Z),K===0&&(K=n(),fe+=K*K),fe<L&&(fe=Math.sqrt(L*fe)),v.vx+=Z*$.value*C/fe,v.vy+=K*$.value*C/fe),!0;if($.length||fe>=z)return;($.data!==v||$.next)&&(Z===0&&(Z=n(),fe+=Z*Z),K===0&&(K=n(),fe+=K*K),fe<L&&(fe=Math.sqrt(L*fe)));do $.data!==v&&(le=E[$.data.index]*C/fe,v.vx+=Z*le,v.vy+=K*le);while($=$.next)}return R.initialize=function($){w=$,D()},R.strength=function($){return arguments.length?(M=typeof $=="function"?$:i(+$),D(),R):M},R.distanceMin=function($){return arguments.length?(L=$*$,R):Math.sqrt(L)},R.distanceMax=function($){return arguments.length?(z=$*$,R):Math.sqrt(z)},R.theta=function($){return arguments.length?(O=$*$,R):Math.sqrt(O)},R}function S(w,v,C){var M,E=i(.1),L,z;typeof w!="function"&&(w=i(+w)),v==null&&(v=0),C==null&&(C=0);function O(D){for(var H=0,B=M.length;H<B;++H){var $=M[H],W=$.x-v||1e-6,re=$.y-C||1e-6,Q=Math.sqrt(W*W+re*re),Z=(z[H]-Q)*L[H]*D/Q;$.vx+=W*Z,$.vy+=re*Z}}function R(){if(!!M){var D,H=M.length;for(L=new Array(H),z=new Array(H),D=0;D<H;++D)z[D]=+w(M[D],D,M),L[D]=isNaN(z[D])?0:+E(M[D],D,M)}}return O.initialize=function(D){M=D,R()},O.strength=function(D){return arguments.length?(E=typeof D=="function"?D:i(+D),R(),O):E},O.radius=function(D){return arguments.length?(w=typeof D=="function"?D:i(+D),R(),O):w},O.x=function(D){return arguments.length?(v=+D,O):v},O.y=function(D){return arguments.length?(C=+D,O):C},O}function T(w){var v=i(.1),C,M,E;typeof w!="function"&&(w=i(w==null?0:+w));function L(O){for(var R=0,D=C.length,H;R<D;++R)H=C[R],H.vx+=(E[R]-H.x)*M[R]*O}function z(){if(!!C){var O,R=C.length;for(M=new Array(R),E=new Array(R),O=0;O<R;++O)M[O]=isNaN(E[O]=+w(C[O],O,C))?0:+v(C[O],O,C)}}return L.initialize=function(O){C=O,z()},L.strength=function(O){return arguments.length?(v=typeof O=="function"?O:i(+O),z(),L):v},L.x=function(O){return arguments.length?(w=typeof O=="function"?O:i(+O),z(),L):w},L}function x(w){var v=i(.1),C,M,E;typeof w!="function"&&(w=i(w==null?0:+w));function L(O){for(var R=0,D=C.length,H;R<D;++R)H=C[R],H.vy+=(E[R]-H.y)*M[R]*O}function z(){if(!!C){var O,R=C.length;for(M=new Array(R),E=new Array(R),O=0;O<R;++O)M[O]=isNaN(E[O]=+w(C[O],O,C))?0:+v(C[O],O,C)}}return L.initialize=function(O){C=O,z()},L.strength=function(O){return arguments.length?(v=typeof O=="function"?O:i(+O),z(),L):v},L.y=function(O){return arguments.length?(w=typeof O=="function"?O:i(+O),z(),L):w},L}s.forceCenter=a,s.forceCollide=u,s.forceLink=d,s.forceManyBody=c,s.forceRadial=S,s.forceSimulation=A,s.forceX=T,s.forceY=x,Object.defineProperty(s,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=typeof globalThis!="undefined"?globalThis:s||self,o(s.d3=s.d3||{}))})(this,function(s){function o(w){return Math.abs(w=Math.round(w))>=1e21?w.toLocaleString("en").replace(/,/g,""):w.toString(10)}function h(w,v){if((C=(w=v?w.toExponential(v-1):w.toExponential()).indexOf("e"))<0)return null;var C,M=w.slice(0,C);return[M.length>1?M[0]+M.slice(2):M,+w.slice(C+1)]}function y(w){return w=h(Math.abs(w)),w?w[1]:NaN}function t(w,v){return function(C,M){for(var E=C.length,L=[],z=0,O=w[0],R=0;E>0&&O>0&&(R+O+1>M&&(O=Math.max(1,M-R)),L.push(C.substring(E-=O,E+O)),!((R+=O+1)>M));)O=w[z=(z+1)%w.length];return L.reverse().join(v)}}function a(w){return function(v){return v.replace(/[0-9]/g,function(C){return w[+C]})}}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(w){if(!(v=i.exec(w)))throw new Error("invalid format: "+w);var v;return new r({fill:v[1],align:v[2],sign:v[3],symbol:v[4],zero:v[5],width:v[6],comma:v[7],precision:v[8]&&v[8].slice(1),trim:v[9],type:v[10]})}n.prototype=r.prototype;function r(w){this.fill=w.fill===void 0?" ":w.fill+"",this.align=w.align===void 0?">":w.align+"",this.sign=w.sign===void 0?"-":w.sign+"",this.symbol=w.symbol===void 0?"":w.symbol+"",this.zero=!!w.zero,this.width=w.width===void 0?void 0:+w.width,this.comma=!!w.comma,this.precision=w.precision===void 0?void 0:+w.precision,this.trim=!!w.trim,this.type=w.type===void 0?"":w.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f(w){e:for(var v=w.length,C=1,M=-1,E;C<v;++C)switch(w[C]){case".":M=E=C;break;case"0":M===0&&(M=C),E=C;break;default:if(!+w[C])break e;M>0&&(M=0);break}return M>0?w.slice(0,M)+w.slice(E+1):w}var u;function l(w,v){var C=h(w,v);if(!C)return w+"";var M=C[0],E=C[1],L=E-(u=Math.max(-8,Math.min(8,Math.floor(E/3)))*3)+1,z=M.length;return L===z?M:L>z?M+new Array(L-z+1).join("0"):L>0?M.slice(0,L)+"."+M.slice(L):"0."+new Array(1-L).join("0")+h(w,Math.max(0,v+L-1))[0]}function m(w,v){var C=h(w,v);if(!C)return w+"";var M=C[0],E=C[1];return E<0?"0."+new Array(-E).join("0")+M:M.length>E+1?M.slice(0,E+1)+"."+M.slice(E+1):M+new Array(E-M.length+2).join("0")}var d={"%":function(w,v){return(w*100).toFixed(v)},b:function(w){return Math.round(w).toString(2)},c:function(w){return w+""},d:o,e:function(w,v){return w.toExponential(v)},f:function(w,v){return w.toFixed(v)},g:function(w,v){return w.toPrecision(v)},o:function(w){return Math.round(w).toString(8)},p:function(w,v){return m(w*100,v)},r:m,s:l,X:function(w){return Math.round(w).toString(16).toUpperCase()},x:function(w){return Math.round(w).toString(16)}};function b(w){return w}var g=Array.prototype.map,_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function p(w){var v=w.grouping===void 0||w.thousands===void 0?b:t(g.call(w.grouping,Number),w.thousands+""),C=w.currency===void 0?"":w.currency[0]+"",M=w.currency===void 0?"":w.currency[1]+"",E=w.decimal===void 0?".":w.decimal+"",L=w.numerals===void 0?b:a(g.call(w.numerals,String)),z=w.percent===void 0?"%":w.percent+"",O=w.minus===void 0?"-":w.minus+"",R=w.nan===void 0?"NaN":w.nan+"";function D(B){B=n(B);var $=B.fill,W=B.align,re=B.sign,Q=B.symbol,Z=B.zero,K=B.width,le=B.comma,fe=B.precision,ue=B.trim,V=B.type;V==="n"?(le=!0,V="g"):d[V]||(fe===void 0&&(fe=12),ue=!0,V="g"),(Z||$==="0"&&W==="=")&&(Z=!0,$="0",W="=");var j=Q==="$"?C:Q==="#"&&/[boxX]/.test(V)?"0"+V.toLowerCase():"",ee=Q==="$"?M:/[%p]/.test(V)?z:"",q=d[V],X=/[defgprs%]/.test(V);fe=fe===void 0?6:/[gprs]/.test(V)?Math.max(1,Math.min(21,fe)):Math.max(0,Math.min(20,fe));function J(ie){var ne=j,oe=ee,se,me,ce;if(V==="c")oe=q(ie)+oe,ie="";else{ie=+ie;var pe=ie<0||1/ie<0;if(ie=isNaN(ie)?R:q(Math.abs(ie),fe),ue&&(ie=f(ie)),pe&&+ie==0&&re!=="+"&&(pe=!1),ne=(pe?re==="("?re:O:re==="-"||re==="("?"":re)+ne,oe=(V==="s"?_[8+u/3]:"")+oe+(pe&&re==="("?")":""),X){for(se=-1,me=ie.length;++se<me;)if(ce=ie.charCodeAt(se),48>ce||ce>57){oe=(ce===46?E+ie.slice(se+1):ie.slice(se))+oe,ie=ie.slice(0,se);break}}}le&&!Z&&(ie=v(ie,1/0));var xe=ne.length+ie.length+oe.length,Se=xe<K?new Array(K-xe+1).join($):"";switch(le&&Z&&(ie=v(Se+ie,Se.length?K-oe.length:1/0),Se=""),W){case"<":ie=ne+ie+oe+Se;break;case"=":ie=ne+Se+ie+oe;break;case"^":ie=Se.slice(0,xe=Se.length>>1)+ne+ie+oe+Se.slice(xe);break;default:ie=Se+ne+ie+oe;break}return L(ie)}return J.toString=function(){return B+""},J}function H(B,$){var W=D((B=n(B),B.type="f",B)),re=Math.max(-8,Math.min(8,Math.floor(y($)/3)))*3,Q=Math.pow(10,-re),Z=_[8+re/3];return function(K){return W(Q*K)+Z}}return{format:D,formatPrefix:H}}var A;c({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function c(w){return A=p(w),s.format=A.format,s.formatPrefix=A.formatPrefix,A}function S(w){return Math.max(0,-y(Math.abs(w)))}function T(w,v){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(y(v)/3)))*3-y(Math.abs(w)))}function x(w,v){return w=Math.abs(w),v=Math.abs(v)-w,Math.max(0,y(v)-y(w))+1}s.FormatSpecifier=r,s.formatDefaultLocale=c,s.formatLocale=p,s.formatSpecifier=n,s.precisionFixed=S,s.precisionPrefix=T,s.precisionRound=x,Object.defineProperty(s,"__esModule",{value:!0})})},{}],113:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F,e("d3-geo"),e("d3-array")):o(s.d3=s.d3||{},s.d3,s.d3)})(this,function(s,o,h){var y=Math.abs,t=Math.atan,a=Math.atan2,i=Math.cos,n=Math.exp,r=Math.floor,f=Math.log,u=Math.max,l=Math.min,m=Math.pow,d=Math.round,b=Math.sign||function(Ne){return Ne>0?1:Ne<0?-1:0},g=Math.sin,_=Math.tan,p=1e-6,A=1e-12,c=Math.PI,S=c/2,T=c/4,x=Math.SQRT1_2,w=R(2),v=R(c),C=c*2,M=180/c,E=c/180;function L(Ne){return Ne?Ne/Math.sin(Ne):1}function z(Ne){return Ne>1?S:Ne<-1?-S:Math.asin(Ne)}function O(Ne){return Ne>1?0:Ne<-1?c:Math.acos(Ne)}function R(Ne){return Ne>0?Math.sqrt(Ne):0}function D(Ne){return Ne=n(2*Ne),(Ne-1)/(Ne+1)}function H(Ne){return(n(Ne)-n(-Ne))/2}function B(Ne){return(n(Ne)+n(-Ne))/2}function $(Ne){return f(Ne+R(Ne*Ne+1))}function W(Ne){return f(Ne+R(Ne*Ne-1))}function re(Ne){var $e=_(Ne/2),rt=2*f(i(Ne/2))/($e*$e);function lt(bt,mt){var At=i(bt),lr=i(mt),pr=g(mt),or=lr*At,mr=-((1-or?f((1+or)/2)/(1-or):-.5)+rt/(1+or));return[mr*lr*g(bt),mr*pr]}return lt.invert=function(bt,mt){var At=R(bt*bt+mt*mt),lr=-Ne/2,pr=50,or;if(!At)return[0,0];do{var mr=lr/2,Pr=i(mr),Yr=g(mr),tn=Yr/Pr,An=-f(y(Pr));lr-=or=(2/tn*An-rt*tn-At)/(-An/(Yr*Yr)+1-rt/(2*Pr*Pr))*(Pr<0?.7:1)}while(y(or)>p&&--pr>0);var zn=g(lr);return[a(bt*zn,At*i(lr)),z(mt*zn/At)]},lt}function Q(){var Ne=S,$e=o.geoProjectionMutator(re),rt=$e(Ne);return rt.radius=function(lt){return arguments.length?$e(Ne=lt*E):Ne*M},rt.scale(179.976).clipAngle(147)}function Z(Ne,$e){var rt=i($e),lt=L(O(rt*i(Ne/=2)));return[2*rt*g(Ne)*lt,g($e)*lt]}Z.invert=function(Ne,$e){if(!(Ne*Ne+4*$e*$e>c*c+p)){var rt=Ne,lt=$e,bt=25;do{var mt=g(rt),At=g(rt/2),lr=i(rt/2),pr=g(lt),or=i(lt),mr=g(2*lt),Pr=pr*pr,Yr=or*or,tn=At*At,An=1-Yr*lr*lr,zn=An?O(or*lr)*R(Xn=1/An):Xn=0,Xn,xa=2*zn*or*At-Ne,Ta=zn*pr-$e,qa=Xn*(Yr*tn+zn*or*lr*Pr),Ka=Xn*(.5*mt*mr-zn*2*pr*At),oi=Xn*.25*(mr*At-zn*pr*Yr*mt),xi=Xn*(Pr*lr+zn*tn*or),So=Ka*oi-xi*qa;if(!So)break;var li=(Ta*Ka-xa*xi)/So,ao=(xa*oi-Ta*qa)/So;rt-=li,lt-=ao}while((y(li)>p||y(ao)>p)&&--bt>0);return[rt,lt]}};function K(){return o.geoProjection(Z).scale(152.63)}function le(Ne){var $e=g(Ne),rt=i(Ne),lt=Ne>=0?1:-1,bt=_(lt*Ne),mt=(1+$e-rt)/2;function At(lr,pr){var or=i(pr),mr=i(lr/=2);return[(1+or)*g(lr),(lt*pr>-a(mr,bt)-.001?0:-lt*10)+mt+g(pr)*rt-(1+or)*$e*mr]}return At.invert=function(lr,pr){var or=0,mr=0,Pr=50;do{var Yr=i(or),tn=g(or),An=i(mr),zn=g(mr),Xn=1+An,xa=Xn*tn-lr,Ta=mt+zn*rt-Xn*$e*Yr-pr,qa=Xn*Yr/2,Ka=-tn*zn,oi=$e*Xn*tn/2,xi=rt*An+$e*Yr*zn,So=Ka*oi-xi*qa,li=(Ta*Ka-xa*xi)/So/2,ao=(xa*oi-Ta*qa)/So;y(ao)>2&&(ao/=2),or-=li,mr-=ao}while((y(li)>p||y(ao)>p)&&--Pr>0);return lt*mr>-a(i(or),bt)-.001?[or*2,mr]:null},At}function fe(){var Ne=20*E,$e=Ne>=0?1:-1,rt=_($e*Ne),lt=o.geoProjectionMutator(le),bt=lt(Ne),mt=bt.stream;return bt.parallel=function(At){return arguments.length?(rt=_(($e=(Ne=At*E)>=0?1:-1)*Ne),lt(Ne)):Ne*M},bt.stream=function(At){var lr=bt.rotate(),pr=mt(At),or=(bt.rotate([0,0]),mt(At)),mr=bt.precision();return bt.rotate(lr),pr.sphere=function(){or.polygonStart(),or.lineStart();for(var Pr=$e*-180;$e*Pr<180;Pr+=$e*90)or.point(Pr,$e*90);if(Ne)for(;$e*(Pr-=3*$e*mr)>=-180;)or.point(Pr,$e*-a(i(Pr*E/2),rt)*M);or.lineEnd(),or.polygonEnd()},pr},bt.scale(218.695).center([0,28.0974])}function ue(Ne,$e){var rt=_($e/2),lt=R(1-rt*rt),bt=1+lt*i(Ne/=2),mt=g(Ne)*lt/bt,At=rt/bt,lr=mt*mt,pr=At*At;return[4/3*mt*(3+lr-3*pr),4/3*At*(3+3*lr-pr)]}ue.invert=function(Ne,$e){if(Ne*=3/8,$e*=3/8,!Ne&&y($e)>1)return null;var rt=Ne*Ne,lt=$e*$e,bt=1+rt+lt,mt=R((bt-R(bt*bt-4*$e*$e))/2),At=z(mt)/3,lr=mt?W(y($e/mt))/3:$(y(Ne))/3,pr=i(At),or=B(lr),mr=or*or-pr*pr;return[b(Ne)*2*a(H(lr)*pr,.25-mr),b($e)*2*a(or*g(At),.25+mr)]};function V(){return o.geoProjection(ue).scale(66.1603)}var j=R(8),ee=f(1+w);function q(Ne,$e){var rt=y($e);return rt<T?[Ne,f(_(T+$e/2))]:[Ne*i(rt)*(2*w-1/g(rt)),b($e)*(2*w*(rt-T)-f(_(rt/2)))]}q.invert=function(Ne,$e){if((mt=y($e))<ee)return[Ne,2*t(n($e))-S];var rt=T,lt=25,bt,mt;do{var At=i(rt/2),lr=_(rt/2);rt-=bt=(j*(rt-T)-f(lr)-mt)/(j-At*At/(2*lr))}while(y(bt)>A&&--lt>0);return[Ne/(i(rt)*(j-1/g(rt))),b($e)*rt]};function X(){return o.geoProjection(q).scale(112.314)}function J(Ne){var $e=2*c/Ne;function rt(lt,bt){var mt=o.geoAzimuthalEquidistantRaw(lt,bt);if(y(lt)>S){var At=a(mt[1],mt[0]),lr=R(mt[0]*mt[0]+mt[1]*mt[1]),pr=$e*d((At-S)/$e)+S,or=a(g(At-=pr),2-i(At));At=pr+z(c/lr*g(or))-or,mt[0]=lr*i(At),mt[1]=lr*g(At)}return mt}return rt.invert=function(lt,bt){var mt=R(lt*lt+bt*bt);if(mt>S){var At=a(bt,lt),lr=$e*d((At-S)/$e)+S,pr=At>lr?-1:1,or=mt*i(lr-At),mr=1/_(pr*O((or-c)/R(c*(c-2*or)+mt*mt)));At=lr+2*t((mr+pr*R(mr*mr-3))/3),lt=mt*i(At),bt=mt*g(At)}return o.geoAzimuthalEquidistantRaw.invert(lt,bt)},rt}function ie(){var Ne=5,$e=o.geoProjectionMutator(J),rt=$e(Ne),lt=rt.stream,bt=.01,mt=-i(bt*E),At=g(bt*E);return rt.lobes=function(lr){return arguments.length?$e(Ne=+lr):Ne},rt.stream=function(lr){var pr=rt.rotate(),or=lt(lr),mr=(rt.rotate([0,0]),lt(lr));return rt.rotate(pr),or.sphere=function(){mr.polygonStart(),mr.lineStart();for(var Pr=0,Yr=360/Ne,tn=2*c/Ne,An=90-180/Ne,zn=S;Pr<Ne;++Pr,An-=Yr,zn-=tn)mr.point(a(At*i(zn),mt)*M,z(At*g(zn))*M),An<-90?(mr.point(-90,-180-An-bt),mr.point(-90,-180-An+bt)):(mr.point(90,An+bt),mr.point(90,An-bt));mr.lineEnd(),mr.polygonEnd()},or},rt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function ne(Ne,$e){if(arguments.length<2&&($e=Ne),$e===1)return o.geoAzimuthalEqualAreaRaw;if($e===1/0)return oe;function rt(lt,bt){var mt=o.geoAzimuthalEqualAreaRaw(lt/$e,bt);return mt[0]*=Ne,mt}return rt.invert=function(lt,bt){var mt=o.geoAzimuthalEqualAreaRaw.invert(lt/Ne,bt);return mt[0]*=$e,mt},rt}function oe(Ne,$e){return[Ne*i($e)/i($e/=2),2*g($e)]}oe.invert=function(Ne,$e){var rt=2*z($e/2);return[Ne*i(rt/2)/i(rt),rt]};function se(){var Ne=2,$e=o.geoProjectionMutator(ne),rt=$e(Ne);return rt.coefficient=function(lt){return arguments.length?$e(Ne=+lt):Ne},rt.scale(169.529)}function me(Ne,$e,rt){var lt=100,bt,mt,At;rt=rt===void 0?0:+rt,$e=+$e;do mt=Ne(rt),At=Ne(rt+p),mt===At&&(At=mt+p),rt-=bt=-1*p*(mt-$e)/(mt-At);while(lt-- >0&&y(bt)>p);return lt<0?NaN:rt}function ce(Ne,$e,rt){return $e===void 0&&($e=40),rt===void 0&&(rt=A),function(lt,bt,mt,At){var lr,pr,or;mt=mt===void 0?0:+mt,At=At===void 0?0:+At;for(var mr=0;mr<$e;mr++){var Pr=Ne(mt,At),Yr=Pr[0]-lt,tn=Pr[1]-bt;if(y(Yr)<rt&&y(tn)<rt)break;var An=Yr*Yr+tn*tn;if(An>lr){mt-=pr/=2,At-=or/=2;continue}lr=An;var zn=(mt>0?-1:1)*rt,Xn=(At>0?-1:1)*rt,xa=Ne(mt+zn,At),Ta=Ne(mt,At+Xn),qa=(xa[0]-Pr[0])/zn,Ka=(xa[1]-Pr[1])/zn,oi=(Ta[0]-Pr[0])/Xn,xi=(Ta[1]-Pr[1])/Xn,So=xi*qa-Ka*oi,li=(y(So)<.5?.5:1)/So;if(pr=(tn*oi-Yr*xi)*li,or=(Yr*Ka-tn*qa)*li,mt+=pr,At+=or,y(pr)<rt&&y(or)<rt)break}return[mt,At]}}function pe(){var Ne=ne(1.68,2),$e=1.4,rt=12;function lt(bt,mt){if(bt+mt<-$e){var At=(bt-mt+1.6)*(bt+mt+$e)/8;bt+=At,mt-=.8*At*g(mt+c/2)}var lr=Ne(bt,mt),pr=(1-i(bt*mt))/rt;return lr[1]<0&&(lr[0]*=1+pr),lr[1]>0&&(lr[1]*=1+pr/1.5*lr[0]*lr[0]),lr}return lt.invert=ce(lt),lt}function xe(){return o.geoProjection(pe()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Se(Ne,$e){var rt=Ne*g($e),lt=30,bt;do $e-=bt=($e+g($e)-rt)/(1+i($e));while(y(bt)>p&&--lt>0);return $e/2}function Ae(Ne,$e,rt){function lt(bt,mt){return[Ne*bt*i(mt=Se(rt,mt)),$e*g(mt)]}return lt.invert=function(bt,mt){return mt=z(mt/$e),[bt/(Ne*i(mt)),z((2*mt+g(2*mt))/rt)]},lt}var Ce=Ae(w/S,w,c);function Ee(){return o.geoProjection(Ce).scale(169.529)}var Oe=2.00276,_e=1.11072;function Re(Ne,$e){var rt=Se(c,$e);return[Oe*Ne/(1/i($e)+_e/i(rt)),($e+w*g(rt))/Oe]}Re.invert=function(Ne,$e){var rt=Oe*$e,lt=$e<0?-T:T,bt=25,mt,At;do At=rt-w*g(lt),lt-=mt=(g(2*lt)+2*lt-c*g(At))/(2*i(2*lt)+2+c*i(At)*w*i(lt));while(y(mt)>p&&--bt>0);return At=rt-w*g(lt),[Ne*(1/i(At)+_e/i(lt))/Oe,At]};function Ve(){return o.geoProjection(Re).scale(160.857)}function Je(Ne){var $e=0,rt=o.geoProjectionMutator(Ne),lt=rt($e);return lt.parallel=function(bt){return arguments.length?rt($e=bt*E):$e*M},lt}function ze(Ne,$e){return[Ne*i($e),$e]}ze.invert=function(Ne,$e){return[Ne/i($e),$e]};function De(){return o.geoProjection(ze).scale(152.63)}function je(Ne){if(!Ne)return ze;var $e=1/_(Ne);function rt(lt,bt){var mt=$e+Ne-bt,At=mt&&lt*i(bt)/mt;return[mt*g(At),$e-mt*i(At)]}return rt.invert=function(lt,bt){var mt=R(lt*lt+(bt=$e-bt)*bt),At=$e+Ne-mt;return[mt/i(At)*a(lt,bt),At]},rt}function dt(){return Je(je).scale(123.082).center([0,26.1441]).parallel(45)}function Et(Ne){function $e(rt,lt){var bt=S-lt,mt=bt&&rt*Ne*g(bt)/bt;return[bt*g(mt)/Ne,S-bt*i(mt)]}return $e.invert=function(rt,lt){var bt=rt*Ne,mt=S-lt,At=R(bt*bt+mt*mt),lr=a(bt,mt);return[(At?At/g(At):1)*lr/Ne,S-At]},$e}function $t(){var Ne=.5,$e=o.geoProjectionMutator(Et),rt=$e(Ne);return rt.fraction=function(lt){return arguments.length?$e(Ne=+lt):Ne},rt.scale(158.837)}var wt=Ae(1,4/c,c);function Ot(){return o.geoProjection(wt).scale(152.63)}function Vt(Ne,$e,rt,lt,bt,mt){var At=i(mt),lr;if(y(Ne)>1||y(mt)>1)lr=O(rt*bt+$e*lt*At);else{var pr=g(Ne/2),or=g(mt/2);lr=2*z(R(pr*pr+$e*lt*or*or))}return y(lr)>p?[lr,a(lt*g(mt),$e*bt-rt*lt*At)]:[0,0]}function kt(Ne,$e,rt){return O((Ne*Ne+$e*$e-rt*rt)/(2*Ne*$e))}function St(Ne){return Ne-2*c*r((Ne+c)/(2*c))}function ot(Ne,$e,rt){for(var lt=[[Ne[0],Ne[1],g(Ne[1]),i(Ne[1])],[$e[0],$e[1],g($e[1]),i($e[1])],[rt[0],rt[1],g(rt[1]),i(rt[1])]],bt=lt[2],mt,At=0;At<3;++At,bt=mt)mt=lt[At],bt.v=Vt(mt[1]-bt[1],bt[3],bt[2],mt[3],mt[2],mt[0]-bt[0]),bt.point=[0,0];var lr=kt(lt[0].v[0],lt[2].v[0],lt[1].v[0]),pr=kt(lt[0].v[0],lt[1].v[0],lt[2].v[0]),or=c-lr;lt[2].point[1]=0,lt[0].point[0]=-(lt[1].point[0]=lt[0].v[0]/2);var mr=[lt[2].point[0]=lt[0].point[0]+lt[2].v[0]*i(lr),2*(lt[0].point[1]=lt[1].point[1]=lt[2].v[0]*g(lr))];function Pr(Yr,tn){var An=g(tn),zn=i(tn),Xn=new Array(3),xa;for(xa=0;xa<3;++xa){var Ta=lt[xa];if(Xn[xa]=Vt(tn-Ta[1],Ta[3],Ta[2],zn,An,Yr-Ta[0]),!Xn[xa][0])return Ta.point;Xn[xa][1]=St(Xn[xa][1]-Ta.v[1])}var qa=mr.slice();for(xa=0;xa<3;++xa){var Ka=xa==2?0:xa+1,oi=kt(lt[xa].v[0],Xn[xa][0],Xn[Ka][0]);Xn[xa][1]<0&&(oi=-oi),xa?xa==1?(oi=pr-oi,qa[0]-=Xn[xa][0]*i(oi),qa[1]-=Xn[xa][0]*g(oi)):(oi=or-oi,qa[0]+=Xn[xa][0]*i(oi),qa[1]+=Xn[xa][0]*g(oi)):(qa[0]+=Xn[xa][0]*i(oi),qa[1]-=Xn[xa][0]*g(oi))}return qa[0]/=3,qa[1]/=3,qa}return Pr}function ht(Ne){return Ne[0]*=E,Ne[1]*=E,Ne}function Ke(){return Pe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Pe(Ne,$e,rt){var lt=o.geoCentroid({type:"MultiPoint",coordinates:[Ne,$e,rt]}),bt=[-lt[0],-lt[1]],mt=o.geoRotation(bt),At=ot(ht(mt(Ne)),ht(mt($e)),ht(mt(rt)));At.invert=ce(At);var lr=o.geoProjection(At).rotate(bt),pr=lr.center;return delete lr.rotate,lr.center=function(or){return arguments.length?pr(mt(or)):mt.invert(pr())},lr.clipAngle(90)}function We(Ne,$e){var rt=R(1-g($e));return[2/v*Ne*rt,v*(1-rt)]}We.invert=function(Ne,$e){var rt=(rt=$e/v-1)*rt;return[rt>0?Ne*R(c/rt)/2:0,z(1-rt)]};function Qe(){return o.geoProjection(We).scale(95.6464).center([0,30])}function ut(Ne){var $e=_(Ne);function rt(lt,bt){return[lt,(lt?lt/g(lt):1)*(g(bt)*i(lt)-$e*i(bt))]}return rt.invert=$e?function(lt,bt){lt&&(bt*=g(lt)/lt);var mt=i(lt);return[lt,2*a(R(mt*mt+$e*$e-bt*bt)-mt,$e-bt)]}:function(lt,bt){return[lt,z(lt?bt*_(lt)/lt:bt)]},rt}function It(){return Je(ut).scale(249.828).clipAngle(90)}var Tt=R(3);function Bt(Ne,$e){return[Tt*Ne*(2*i(2*$e/3)-1)/v,Tt*v*g($e/3)]}Bt.invert=function(Ne,$e){var rt=3*z($e/(Tt*v));return[v*Ne/(Tt*(2*i(2*rt/3)-1)),rt]};function rr(){return o.geoProjection(Bt).scale(156.19)}function Ut(Ne){var $e=i(Ne);function rt(lt,bt){return[lt*$e,g(bt)/$e]}return rt.invert=function(lt,bt){return[lt/$e,z(bt*$e)]},rt}function Qt(){return Je(Ut).parallel(38.58).scale(195.044)}function ar(Ne){var $e=i(Ne);function rt(lt,bt){return[lt*$e,(1+$e)*_(bt/2)]}return rt.invert=function(lt,bt){return[lt/$e,t(bt/(1+$e))*2]},rt}function nr(){return Je(ar).scale(124.75)}function cr(Ne,$e){var rt=R(8/(3*c));return[rt*Ne*(1-y($e)/c),rt*$e]}cr.invert=function(Ne,$e){var rt=R(8/(3*c)),lt=$e/rt;return[Ne/(rt*(1-y(lt)/c)),lt]};function Kr(){return o.geoProjection(cr).scale(165.664)}function yn(Ne,$e){var rt=R(4-3*g(y($e)));return[2/R(6*c)*Ne*rt,b($e)*R(2*c/3)*(2-rt)]}yn.invert=function(Ne,$e){var rt=2-y($e)/R(2*c/3);return[Ne*R(6*c)/(2*rt),b($e)*z((4-rt*rt)/3)]};function Qr(){return o.geoProjection(yn).scale(165.664)}function st(Ne,$e){var rt=R(c*(4+c));return[2/rt*Ne*(1+R(1-4*$e*$e/(c*c))),4/rt*$e]}st.invert=function(Ne,$e){var rt=R(c*(4+c))/2;return[Ne*rt/(1+R(1-$e*$e*(4+c)/(4*c))),$e*rt/2]};function Gt(){return o.geoProjection(st).scale(180.739)}function Zt(Ne,$e){var rt=(2+S)*g($e);$e/=2;for(var lt=0,bt=1/0;lt<10&&y(bt)>p;lt++){var mt=i($e);$e-=bt=($e+g($e)*(mt+2)-rt)/(2*mt*(1+mt))}return[2/R(c*(4+c))*Ne*(1+i($e)),2*R(c/(4+c))*g($e)]}Zt.invert=function(Ne,$e){var rt=$e*R((4+c)/c)/2,lt=z(rt),bt=i(lt);return[Ne/(2/R(c*(4+c))*(1+bt)),z((lt+rt*(bt+2))/(2+S))]};function Ht(){return o.geoProjection(Zt).scale(180.739)}function _r(Ne,$e){return[Ne*(1+i($e))/R(2+c),2*$e/R(2+c)]}_r.invert=function(Ne,$e){var rt=R(2+c),lt=$e*rt/2;return[rt*Ne/(1+i(lt)),lt]};function it(){return o.geoProjection(_r).scale(173.044)}function Te(Ne,$e){for(var rt=(1+S)*g($e),lt=0,bt=1/0;lt<10&&y(bt)>p;lt++)$e-=bt=($e+g($e)-rt)/(1+i($e));return rt=R(2+c),[Ne*(1+i($e))/rt,2*$e/rt]}Te.invert=function(Ne,$e){var rt=1+S,lt=R(rt/2);return[Ne*2*lt/(1+i($e*=lt)),z(($e+g($e))/rt)]};function ke(){return o.geoProjection(Te).scale(173.044)}var Ge=3+2*w;function Ye(Ne,$e){var rt=g(Ne/=2),lt=i(Ne),bt=R(i($e)),mt=i($e/=2),At=g($e)/(mt+w*lt*bt),lr=R(2/(1+At*At)),pr=R((w*mt+(lt+rt)*bt)/(w*mt+(lt-rt)*bt));return[Ge*(lr*(pr-1/pr)-2*f(pr)),Ge*(lr*At*(pr+1/pr)-2*t(At))]}Ye.invert=function(Ne,$e){if(!(mt=ue.invert(Ne/1.2,$e*1.065)))return null;var rt=mt[0],lt=mt[1],bt=20,mt;Ne/=Ge,$e/=Ge;do{var At=rt/2,lr=lt/2,pr=g(At),or=i(At),mr=g(lr),Pr=i(lr),Yr=i(lt),tn=R(Yr),An=mr/(Pr+w*or*tn),zn=An*An,Xn=R(2/(1+zn)),xa=w*Pr+(or+pr)*tn,Ta=w*Pr+(or-pr)*tn,qa=xa/Ta,Ka=R(qa),oi=Ka-1/Ka,xi=Ka+1/Ka,So=Xn*oi-2*f(Ka)-Ne,li=Xn*An*xi-2*t(An)-$e,ao=mr&&x*tn*pr*zn/mr,Lo=(w*or*Pr+tn)/(2*(Pr+w*or*tn)*(Pr+w*or*tn)*tn),jo=-.5*An*Xn*Xn*Xn,Pi=jo*ao,zi=jo*Lo,Us=(Us=2*Pr+w*tn*(or-pr))*Us*Ka,Oo=(w*or*Pr*tn+Yr)/Us,ts=-(w*pr*mr)/(tn*Us),ys=oi*Pi-2*Oo/Ka+Xn*(Oo+Oo/qa),he=oi*zi-2*ts/Ka+Xn*(ts+ts/qa),we=An*xi*Pi-2*ao/(1+zn)+Xn*xi*ao+Xn*An*(Oo-Oo/qa),Ie=An*xi*zi-2*Lo/(1+zn)+Xn*xi*Lo+Xn*An*(ts-ts/qa),He=he*we-Ie*ys;if(!He)break;var Ue=(li*he-So*Ie)/He,Ze=(So*we-li*ys)/He;rt-=Ue,lt=u(-S,l(S,lt-Ze))}while((y(Ue)>p||y(Ze)>p)&&--bt>0);return y(y(lt)-S)<p?[0,lt]:bt&&[rt,lt]};function qe(){return o.geoProjection(Ye).scale(62.5271)}var at=i(35*E);function et(Ne,$e){var rt=_($e/2);return[Ne*at*R(1-rt*rt),(1+at)*rt]}et.invert=function(Ne,$e){var rt=$e/(1+at);return[Ne&&Ne/(at*R(1-rt*rt)),2*t(rt)]};function pt(){return o.geoProjection(et).scale(137.152)}function _t(Ne,$e){var rt=$e/2,lt=i(rt);return[2*Ne/v*i($e)*lt*lt,v*_(rt)]}_t.invert=function(Ne,$e){var rt=t($e/v),lt=i(rt),bt=2*rt;return[Ne*v/2/(i(bt)*lt*lt),bt]};function Pt(){return o.geoProjection(_t).scale(135.264)}function Xt(Ne){var $e=1-Ne,rt=mt(c,0)[0]-mt(-c,0)[0],lt=mt(0,S)[1]-mt(0,-S)[1],bt=R(2*lt/rt);function mt(pr,or){var mr=i(or),Pr=g(or);return[mr/($e+Ne*mr)*pr,$e*or+Ne*Pr]}function At(pr,or){var mr=mt(pr,or);return[mr[0]*bt,mr[1]/bt]}function lr(pr){return At(0,pr)[1]}return At.invert=function(pr,or){var mr=me(lr,or),Pr=pr/bt*(Ne+$e/i(mr));return[Pr,mr]},At}function zt(){var Ne=.5,$e=o.geoProjectionMutator(Xt),rt=$e(Ne);return rt.alpha=function(lt){return arguments.length?$e(Ne=+lt):Ne},rt.scale(168.725)}function ur(Ne){return[Ne[0]/2,z(_(Ne[1]/2*E))*M]}function gr(Ne){return[Ne[0]*2,2*t(g(Ne[1]*E))*M]}function Mr(Ne){Ne==null&&(Ne=o.geoOrthographic);var $e=Ne(),rt=o.geoEquirectangular().scale(M).precision(0).clipAngle(null).translate([0,0]);function lt(mt){return $e(ur(mt))}$e.invert&&(lt.invert=function(mt){return gr($e.invert(mt))}),lt.stream=function(mt){var At=$e.stream(mt),lr=rt.stream({point:function(pr,or){At.point(pr/2,z(_(-or/2*E))*M)},lineStart:function(){At.lineStart()},lineEnd:function(){At.lineEnd()},polygonStart:function(){At.polygonStart()},polygonEnd:function(){At.polygonEnd()}});return lr.sphere=At.sphere,lr};function bt(mt){lt[mt]=function(){return arguments.length?($e[mt].apply($e,arguments),lt):$e[mt]()}}return lt.rotate=function(mt){return arguments.length?(rt.rotate(mt),lt):rt.rotate()},lt.center=function(mt){return arguments.length?($e.center(ur(mt)),lt):gr($e.center())},bt("angle"),bt("clipAngle"),bt("clipExtent"),bt("fitExtent"),bt("fitHeight"),bt("fitSize"),bt("fitWidth"),bt("scale"),bt("translate"),bt("precision"),lt.scale(249.5)}function un(Ne,$e){var rt=2*c/$e,lt=Ne*Ne;function bt(mt,At){var lr=o.geoAzimuthalEquidistantRaw(mt,At),pr=lr[0],or=lr[1],mr=pr*pr+or*or;if(mr>lt){var Pr=R(mr),Yr=a(or,pr),tn=rt*d(Yr/rt),An=Yr-tn,zn=Ne*i(An),Xn=(Ne*g(An)-An*g(zn))/(S-zn),xa=zr(An,Xn),Ta=(c-Ne)/$r(xa,zn,c);pr=Pr;var qa=50,Ka;do pr-=Ka=(Ne+$r(xa,zn,pr)*Ta-Pr)/(xa(pr)*Ta);while(y(Ka)>p&&--qa>0);or=An*g(pr),pr<S&&(or-=Xn*(pr-S));var oi=g(tn),xi=i(tn);lr[0]=pr*xi-or*oi,lr[1]=pr*oi+or*xi}return lr}return bt.invert=function(mt,At){var lr=mt*mt+At*At;if(lr>lt){var pr=R(lr),or=a(At,mt),mr=rt*d(or/rt),Pr=or-mr;mt=pr*i(Pr),At=pr*g(Pr);for(var Yr=mt-S,tn=g(mt),An=At/tn,zn=mt<S?1/0:0,Xn=10;;){var xa=Ne*g(An),Ta=Ne*i(An),qa=g(Ta),Ka=S-Ta,oi=(xa-An*qa)/Ka,xi=zr(An,oi);if(y(zn)<A||!--Xn)break;An-=zn=(An*tn-oi*Yr-At)/(tn-Yr*2*(Ka*(Ta+An*xa*i(Ta)-qa)-xa*(xa-An*qa))/(Ka*Ka))}pr=Ne+$r(xi,Ta,mt)*(c-Ne)/$r(xi,Ta,c),or=mr+An,mt=pr*i(or),At=pr*g(or)}return o.geoAzimuthalEquidistantRaw.invert(mt,At)},bt}function zr(Ne,$e){return function(rt){var lt=Ne*i(rt);return rt<S&&(lt-=$e),R(1+lt*lt)}}function $r(Ne,$e,rt){for(var lt=50,bt=(rt-$e)/lt,mt=Ne($e)+Ne(rt),At=1,lr=$e;At<lt;++At)mt+=2*Ne(lr+=bt);return mt*.5*bt}function hn(){var Ne=6,$e=30*E,rt=i($e),lt=g($e),bt=o.geoProjectionMutator(un),mt=bt($e,Ne),At=mt.stream,lr=.01,pr=-i(lr*E),or=g(lr*E);return mt.radius=function(mr){return arguments.length?(rt=i($e=mr*E),lt=g($e),bt($e,Ne)):$e*M},mt.lobes=function(mr){return arguments.length?bt($e,Ne=+mr):Ne},mt.stream=function(mr){var Pr=mt.rotate(),Yr=At(mr),tn=(mt.rotate([0,0]),At(mr));return mt.rotate(Pr),Yr.sphere=function(){tn.polygonStart(),tn.lineStart();for(var An=0,zn=2*c/Ne,Xn=0;An<Ne;++An,Xn-=zn)tn.point(a(or*i(Xn),pr)*M,z(or*g(Xn))*M),tn.point(a(lt*i(Xn-zn/2),rt)*M,z(lt*g(Xn-zn/2))*M);tn.lineEnd(),tn.polygonEnd()},Yr},mt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Tr(Ne,$e,rt,lt,bt,mt,At,lr){arguments.length<8&&(lr=0);function pr(or,mr){if(!mr)return[Ne*or/c,0];var Pr=mr*mr,Yr=Ne+Pr*($e+Pr*(rt+Pr*lt)),tn=mr*(bt-1+Pr*(mt-lr+Pr*At)),An=(Yr*Yr+tn*tn)/(2*tn),zn=or*z(Yr/An)/c;return[An*g(zn),mr*(1+Pr*lr)+An*(1-i(zn))]}return pr.invert=function(or,mr){var Pr=c*or/Ne,Yr=mr,tn,An,zn=50;do{var Xn=Yr*Yr,xa=Ne+Xn*($e+Xn*(rt+Xn*lt)),Ta=Yr*(bt-1+Xn*(mt-lr+Xn*At)),qa=xa*xa+Ta*Ta,Ka=2*Ta,oi=qa/Ka,xi=oi*oi,So=z(xa/oi)/c,li=Pr*So,ao=xa*xa,Lo=(2*$e+Xn*(4*rt+Xn*6*lt))*Yr,jo=bt+Xn*(3*mt+Xn*5*At),Pi=2*(xa*Lo+Ta*(jo-1)),zi=2*(jo-1),Us=(Pi*Ka-qa*zi)/(Ka*Ka),Oo=i(li),ts=g(li),ys=oi*Oo,he=oi*ts,we=Pr/c*(1/R(1-ao/xi))*(Lo*oi-xa*Us)/xi,Ie=he-or,He=Yr*(1+Xn*lr)+oi-ys-mr,Ue=Us*ts+ys*we,Ze=ys*So,xt=1+Us-(Us*Oo-he*we),vt=he*So,Lt=Ue*vt-xt*Ze;if(!Lt)break;Pr-=tn=(He*Ue-Ie*xt)/Lt,Yr-=An=(Ie*vt-He*Ze)/Lt}while((y(tn)>p||y(An)>p)&&--zn>0);return[Pr,Yr]},pr}var wr=Tr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Ur(){return o.geoProjection(wr).scale(149.995)}var Br=Tr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Cr(){return o.geoProjection(Br).scale(153.93)}var nt=Tr(5/6*c,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Rt(){return o.geoProjection(nt).scale(130.945)}function Jt(Ne,$e){var rt=Ne*Ne,lt=$e*$e;return[Ne*(1-.162388*lt)*(.87-952426e-9*rt*rt),$e*(1+lt/12)]}Jt.invert=function(Ne,$e){var rt=Ne,lt=$e,bt=50,mt;do{var At=lt*lt;lt-=mt=(lt*(1+At/12)-$e)/(1+At/4)}while(y(mt)>p&&--bt>0);bt=50,Ne/=1-.162388*At;do{var lr=(lr=rt*rt)*lr;rt-=mt=(rt*(.87-952426e-9*lr)-Ne)/(.87-.00476213*lr)}while(y(mt)>p&&--bt>0);return[rt,lt]};function hr(){return o.geoProjection(Jt).scale(131.747)}var Dr=Tr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Gr(){return o.geoProjection(Dr).scale(131.087)}function Rr(Ne){var $e=Ne(S,0)[0]-Ne(-S,0)[0];function rt(lt,bt){var mt=lt>0?-.5:.5,At=Ne(lt+mt*c,bt);return At[0]-=mt*$e,At}return Ne.invert&&(rt.invert=function(lt,bt){var mt=lt>0?-.5:.5,At=Ne.invert(lt+mt*$e,bt),lr=At[0]-mt*c;return lr<-c?lr+=2*c:lr>c&&(lr-=2*c),At[0]=lr,At}),rt}function Ct(Ne,$e){var rt=b(Ne),lt=b($e),bt=i($e),mt=i(Ne)*bt,At=g(Ne)*bt,lr=g(lt*$e);Ne=y(a(At,lr)),$e=z(mt),y(Ne-S)>p&&(Ne%=S);var pr=tr(Ne>c/4?S-Ne:Ne,$e);return Ne>c/4&&(lr=pr[0],pr[0]=-pr[1],pr[1]=-lr),pr[0]*=rt,pr[1]*=-lt,pr}Ct.invert=function(Ne,$e){y(Ne)>1&&(Ne=b(Ne)*2-Ne),y($e)>1&&($e=b($e)*2-$e);var rt=b(Ne),lt=b($e),bt=-rt*Ne,mt=-lt*$e,At=mt/bt<1,lr=Lr(At?mt:bt,At?bt:mt),pr=lr[0],or=lr[1],mr=i(or);return At&&(pr=-S-pr),[rt*(a(g(pr)*mr,-g(or))+c),lt*z(i(pr)*mr)]};function tr(Ne,$e){if($e===S)return[0,0];var rt=g($e),lt=rt*rt,bt=lt*lt,mt=1+bt,At=1+3*bt,lr=1-bt,pr=z(1/R(mt)),or=lr+lt*mt*pr,mr=(1-rt)/or,Pr=R(mr),Yr=mr*mt,tn=R(Yr),An=Pr*lr,zn,Xn;if(Ne===0)return[0,-(An+lt*tn)];var xa=i($e),Ta=1/xa,qa=2*rt*xa,Ka=(-3*lt+pr*At)*qa,oi=(-or*xa-(1-rt)*Ka)/(or*or),xi=.5*oi/Pr,So=lr*xi-2*lt*Pr*qa,li=lt*mt*oi+mr*At*qa,ao=-Ta*qa,Lo=-Ta*li,jo=-2*Ta*So,Pi=4*Ne/c,zi;if(Ne>.222*c||$e<c/4&&Ne>.175*c){if(zn=(An+lt*R(Yr*(1+bt)-An*An))/(1+bt),Ne>c/4)return[zn,zn];var Us=zn,Oo=.5*zn;zn=.5*(Oo+Us),Xn=50;do{var ts=R(Yr-zn*zn),ys=zn*(jo+ao*ts)+Lo*z(zn/tn)-Pi;if(!ys)break;ys<0?Oo=zn:Us=zn,zn=.5*(Oo+Us)}while(y(Us-Oo)>p&&--Xn>0)}else{zn=p,Xn=25;do{var he=zn*zn,we=R(Yr-he),Ie=jo+ao*we,He=zn*Ie+Lo*z(zn/tn)-Pi,Ue=Ie+(Lo-ao*he)/we;zn-=zi=we?He/Ue:0}while(y(zi)>p&&--Xn>0)}return[zn,-An-lt*R(Yr-zn*zn)]}function Lr(Ne,$e){for(var rt=0,lt=1,bt=.5,mt=50;;){var At=bt*bt,lr=R(bt),pr=z(1/R(1+At)),or=1-At+bt*(1+At)*pr,mr=(1-lr)/or,Pr=R(mr),Yr=mr*(1+At),tn=Pr*(1-At),An=Yr-Ne*Ne,zn=R(An),Xn=$e+tn+bt*zn;if(y(lt-rt)<A||--mt===0||Xn===0)break;Xn>0?rt=bt:lt=bt,bt=.5*(rt+lt)}if(!mt)return null;var xa=z(lr),Ta=i(xa),qa=1/Ta,Ka=2*lr*Ta,oi=(-3*bt+pr*(1+3*At))*Ka,xi=(-or*Ta-(1-lr)*oi)/(or*or),So=.5*xi/Pr,li=(1-At)*So-2*bt*Pr*Ka,ao=-2*qa*li,Lo=-qa*Ka,jo=-qa*(bt*(1+At)*xi+mr*(1+3*At)*Ka);return[c/4*(Ne*(ao+Lo*zn)+jo*z(Ne/R(Yr))),xa]}function Nr(){return o.geoProjection(Rr(Ct)).scale(239.75)}function Tn(Ne,$e,rt){var lt,bt,mt;return Ne?(lt=rn(Ne,rt),$e?(bt=rn($e,1-rt),mt=bt[1]*bt[1]+rt*lt[0]*lt[0]*bt[0]*bt[0],[[lt[0]*bt[2]/mt,lt[1]*lt[2]*bt[0]*bt[1]/mt],[lt[1]*bt[1]/mt,-lt[0]*lt[2]*bt[0]*bt[2]/mt],[lt[2]*bt[1]*bt[2]/mt,-rt*lt[0]*lt[1]*bt[0]/mt]]):[[lt[0],0],[lt[1],0],[lt[2],0]]):(bt=rn($e,1-rt),[[0,bt[0]/bt[1]],[1/bt[1],0],[bt[2]/bt[1],0]])}function rn(Ne,$e){var rt,lt,bt,mt,At;if($e<p)return mt=g(Ne),lt=i(Ne),rt=$e*(Ne-mt*lt)/4,[mt-rt*lt,lt+rt*mt,1-$e*mt*mt/2,Ne-rt];if($e>=1-p)return rt=(1-$e)/4,lt=B(Ne),mt=D(Ne),bt=1/lt,At=lt*H(Ne),[mt+rt*(At-Ne)/(lt*lt),bt-rt*mt*bt*(At-Ne),bt+rt*mt*bt*(At+Ne),2*t(n(Ne))-S+rt*(At-Ne)/lt];var lr=[1,0,0,0,0,0,0,0,0],pr=[R($e),0,0,0,0,0,0,0,0],or=0;for(lt=R(1-$e),At=1;y(pr[or]/lr[or])>p&&or<8;)rt=lr[or++],pr[or]=(rt-lt)/2,lr[or]=(rt+lt)/2,lt=R(rt*lt),At*=2;bt=At*lr[or]*Ne;do mt=pr[or]*g(lt=bt)/lr[or],bt=(z(mt)+bt)/2;while(--or);return[g(bt),mt=i(bt),mt/i(bt-lt),bt]}function kn(Ne,$e,rt){var lt=y(Ne),bt=y($e),mt=H(bt);if(lt){var At=1/g(lt),lr=1/(_(lt)*_(lt)),pr=-(lr+rt*(mt*mt*At*At)-1+rt),or=(rt-1)*lr,mr=(-pr+R(pr*pr-4*or))/2;return[Cn(t(1/R(mr)),rt)*b(Ne),Cn(t(R((mr/lr-1)/rt)),1-rt)*b($e)]}return[0,Cn(t(mt),1-rt)*b($e)]}function Cn(Ne,$e){if(!$e)return Ne;if($e===1)return f(_(Ne/2+T));for(var rt=1,lt=R(1-$e),bt=R($e),mt=0;y(bt)>p;mt++){if(Ne%c){var At=t(lt*_(Ne)/rt);At<0&&(At+=c),Ne+=At+~~(Ne/c)*c}else Ne+=Ne;bt=(rt+lt)/2,lt=R(rt*lt),bt=((rt=bt)-lt)/2}return Ne/(m(2,mt)*rt)}function oa(Ne,$e){var rt=(w-1)/(w+1),lt=R(1-rt*rt),bt=Cn(S,lt*lt),mt=-1,At=f(_(c/4+y($e)/2)),lr=n(mt*At)/R(rt),pr=ya(lr*i(mt*Ne),lr*g(mt*Ne)),or=kn(pr[0],pr[1],lt*lt);return[-or[1],($e>=0?1:-1)*(.5*bt-or[0])]}function ya(Ne,$e){var rt=Ne*Ne,lt=$e+1,bt=1-rt-$e*$e;return[.5*((Ne>=0?S:-S)-a(bt,2*Ne)),-.25*f(bt*bt+4*rt)+.5*f(lt*lt+rt)]}function Oa(Ne,$e){var rt=$e[0]*$e[0]+$e[1]*$e[1];return[(Ne[0]*$e[0]+Ne[1]*$e[1])/rt,(Ne[1]*$e[0]-Ne[0]*$e[1])/rt]}oa.invert=function(Ne,$e){var rt=(w-1)/(w+1),lt=R(1-rt*rt),bt=Cn(S,lt*lt),mt=-1,At=Tn(.5*bt-$e,-Ne,lt*lt),lr=Oa(At[0],At[1]),pr=a(lr[1],lr[0])/mt;return[pr,2*t(n(.5/mt*f(rt*lr[0]*lr[0]+rt*lr[1]*lr[1])))-S]};function Xa(){return o.geoProjection(Rr(oa)).scale(151.496)}function za(Ne){var $e=g(Ne),rt=i(Ne),lt=Pa(Ne);lt.invert=Pa(-Ne);function bt(mt,At){var lr=lt(mt,At);mt=lr[0],At=lr[1];var pr=g(At),or=i(At),mr=i(mt),Pr=O($e*pr+rt*or*mr),Yr=g(Pr),tn=y(Yr)>p?Pr/Yr:1;return[tn*rt*g(mt),(y(mt)>S?tn:-tn)*($e*or-rt*pr*mr)]}return bt.invert=function(mt,At){var lr=R(mt*mt+At*At),pr=-g(lr),or=i(lr),mr=lr*or,Pr=-At*pr,Yr=lr*$e,tn=R(mr*mr+Pr*Pr-Yr*Yr),An=a(mr*Yr+Pr*tn,Pr*Yr-mr*tn),zn=(lr>S?-1:1)*a(mt*pr,lr*i(An)*or+At*g(An)*pr);return lt.invert(zn,An)},bt}function Pa(Ne){var $e=g(Ne),rt=i(Ne);return function(lt,bt){var mt=i(bt),At=i(lt)*mt,lr=g(lt)*mt,pr=g(bt);return[a(lr,At*rt-pr*$e),z(pr*rt+At*$e)]}}function Ar(){var Ne=0,$e=o.geoProjectionMutator(za),rt=$e(Ne),lt=rt.rotate,bt=rt.stream,mt=o.geoCircle();return rt.parallel=function(At){if(!arguments.length)return Ne*M;var lr=rt.rotate();return $e(Ne=At*E).rotate(lr)},rt.rotate=function(At){return arguments.length?(lt.call(rt,[At[0],At[1]-Ne*M]),mt.center([-At[0],-At[1]]),rt):(At=lt.call(rt),At[1]+=Ne*M,At)},rt.stream=function(At){return At=bt(At),At.sphere=function(){At.polygonStart();var lr=.01,pr=mt.radius(90-lr)().coordinates[0],or=pr.length-1,mr=-1,Pr;for(At.lineStart();++mr<or;)At.point((Pr=pr[mr])[0],Pr[1]);for(At.lineEnd(),pr=mt.radius(90+lr)().coordinates[0],or=pr.length-1,At.lineStart();--mr>=0;)At.point((Pr=pr[mr])[0],Pr[1]);At.lineEnd(),At.polygonEnd()},At},rt.scale(79.4187).parallel(45).clipAngle(180-.001)}var nn=3,vn=z(1-1/nn)*M,Mn=Ut(0);function Gn(Ne){var $e=vn*E,rt=We(c,$e)[0]-We(-c,$e)[0],lt=Mn(0,$e)[1],bt=We(0,$e)[1],mt=v-bt,At=C/Ne,lr=4/C,pr=lt+mt*mt*4/C;function or(mr,Pr){var Yr,tn=y(Pr);if(tn>$e){var An=l(Ne-1,u(0,r((mr+c)/At)));mr+=c*(Ne-1)/Ne-An*At,Yr=We(mr,tn),Yr[0]=Yr[0]*C/rt-C*(Ne-1)/(2*Ne)+An*C/Ne,Yr[1]=lt+(Yr[1]-bt)*4*mt/C,Pr<0&&(Yr[1]=-Yr[1])}else Yr=Mn(mr,Pr);return Yr[0]*=lr,Yr[1]/=pr,Yr}return or.invert=function(mr,Pr){mr/=lr,Pr*=pr;var Yr=y(Pr);if(Yr>lt){var tn=l(Ne-1,u(0,r((mr+c)/At)));mr=(mr+c*(Ne-1)/Ne-tn*At)*rt/C;var An=We.invert(mr,.25*(Yr-lt)*C/mt+bt);return An[0]-=c*(Ne-1)/Ne-tn*At,Pr<0&&(An[1]=-An[1]),An}return Mn.invert(mr,Pr)},or}function la(Ne,$e){return[Ne,$e&1?90-p:vn]}function na(Ne,$e){return[Ne,$e&1?-90+p:-vn]}function Nn(Ne){return[Ne[0]*(1-p),Ne[1]]}function Kn(Ne){var $e=[].concat(h.range(-180,180+Ne/2,Ne).map(la),h.range(180,-180-Ne/2,-Ne).map(na));return{type:"Polygon",coordinates:[Ne===180?$e.map(Nn):$e]}}function Va(){var Ne=4,$e=o.geoProjectionMutator(Gn),rt=$e(Ne),lt=rt.stream;return rt.lobes=function(bt){return arguments.length?$e(Ne=+bt):Ne},rt.stream=function(bt){var mt=rt.rotate(),At=lt(bt),lr=(rt.rotate([0,0]),lt(bt));return rt.rotate(mt),At.sphere=function(){o.geoStream(Kn(180/Ne),lr)},At},rt.scale(239.75)}function mi(Ne){var $e=1+Ne,rt=g(1/$e),lt=z(rt),bt=2*R(c/(mt=c+4*lt*$e)),mt,At=.5*bt*($e+R(Ne*(2+Ne))),lr=Ne*Ne,pr=$e*$e;function or(mr,Pr){var Yr=1-g(Pr),tn,An;if(Yr&&Yr<2){var zn=S-Pr,Xn=25,xa;do{var Ta=g(zn),qa=i(zn),Ka=lt+a(Ta,$e-qa),oi=1+pr-2*$e*qa;zn-=xa=(zn-lr*lt-$e*Ta+oi*Ka-.5*Yr*mt)/(2*$e*Ta*Ka)}while(y(xa)>A&&--Xn>0);tn=bt*R(oi),An=mr*Ka/c}else tn=bt*(Ne+Yr),An=mr*lt/c;return[tn*g(An),At-tn*i(An)]}return or.invert=function(mr,Pr){var Yr=mr*mr+(Pr-=At)*Pr,tn=(1+pr-Yr/(bt*bt))/(2*$e),An=O(tn),zn=g(An),Xn=lt+a(zn,$e-tn);return[z(mr/R(Yr))*c/Xn,z(1-2*(An-lr*lt-$e*zn+(1+pr-2*$e*tn)*Xn)/mt)]},or}function Nt(){var Ne=1,$e=o.geoProjectionMutator(mi),rt=$e(Ne);return rt.ratio=function(lt){return arguments.length?$e(Ne=+lt):Ne},rt.scale(167.774).center([0,18.67])}var yr=.7109889596207567,fn=.0528035274542;function mn(Ne,$e){return $e>-yr?(Ne=Ce(Ne,$e),Ne[1]+=fn,Ne):ze(Ne,$e)}mn.invert=function(Ne,$e){return $e>-yr?Ce.invert(Ne,$e-fn):ze.invert(Ne,$e)};function gn(){return o.geoProjection(mn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Dn(Ne,$e){return y($e)>yr?(Ne=Ce(Ne,$e),Ne[1]-=$e>0?fn:-fn,Ne):ze(Ne,$e)}Dn.invert=function(Ne,$e){return y($e)>yr?Ce.invert(Ne,$e+($e>0?fn:-fn)):ze.invert(Ne,$e)};function En(){return o.geoProjection(Dn).scale(152.63)}function dn(Ne,$e,rt,lt){var bt=R(4*c/(2*rt+(1+Ne-$e/2)*g(2*rt)+(Ne+$e)/2*g(4*rt)+$e/2*g(6*rt))),mt=R(lt*g(rt)*R((1+Ne*i(2*rt)+$e*i(4*rt))/(1+Ne+$e))),At=rt*pr(1);function lr(Pr){return R(1+Ne*i(2*Pr)+$e*i(4*Pr))}function pr(Pr){var Yr=Pr*rt;return(2*Yr+(1+Ne-$e/2)*g(2*Yr)+(Ne+$e)/2*g(4*Yr)+$e/2*g(6*Yr))/rt}function or(Pr){return lr(Pr)*g(Pr)}var mr=function(Pr,Yr){var tn=rt*me(pr,At*g(Yr)/rt,Yr/c);isNaN(tn)&&(tn=rt*b(Yr));var An=bt*lr(tn);return[An*mt*Pr/c*i(tn),An/mt*g(tn)]};return mr.invert=function(Pr,Yr){var tn=me(or,Yr*mt/bt);return[Pr*c/(i(tn)*bt*mt*lr(tn)),z(rt*pr(tn/rt)/At)]},rt===0&&(bt=R(lt/c),mr=function(Pr,Yr){return[Pr*bt,g(Yr)/bt]},mr.invert=function(Pr,Yr){return[Pr/bt,z(Yr*bt)]}),mr}function br(){var Ne=1,$e=0,rt=45*E,lt=2,bt=o.geoProjectionMutator(dn),mt=bt(Ne,$e,rt,lt);return mt.a=function(At){return arguments.length?bt(Ne=+At,$e,rt,lt):Ne},mt.b=function(At){return arguments.length?bt(Ne,$e=+At,rt,lt):$e},mt.psiMax=function(At){return arguments.length?bt(Ne,$e,rt=+At*E,lt):rt*M},mt.ratio=function(At){return arguments.length?bt(Ne,$e,rt,lt=+At):lt},mt.scale(180.739)}function xr(Ne,$e,rt,lt,bt,mt,At,lr,pr,or,mr){if(mr.nanEncountered)return NaN;var Pr,Yr,tn,An,zn,Xn,xa,Ta,qa,Ka;if(Pr=rt-$e,Yr=Ne($e+Pr*.25),tn=Ne(rt-Pr*.25),isNaN(Yr)){mr.nanEncountered=!0;return}if(isNaN(tn)){mr.nanEncountered=!0;return}return An=Pr*(lt+4*Yr+bt)/12,zn=Pr*(bt+4*tn+mt)/12,Xn=An+zn,Ka=(Xn-At)/15,or>pr?(mr.maxDepthCount++,Xn+Ka):Math.abs(Ka)<lr?Xn+Ka:(xa=$e+Pr*.5,Ta=xr(Ne,$e,xa,lt,Yr,bt,An,lr*.5,pr,or+1,mr),isNaN(Ta)?(mr.nanEncountered=!0,NaN):(qa=xr(Ne,xa,rt,bt,tn,mt,zn,lr*.5,pr,or+1,mr),isNaN(qa)?(mr.nanEncountered=!0,NaN):Ta+qa))}function Fr(Ne,$e,rt,lt,bt){var mt={maxDepthCount:0,nanEncountered:!1};lt===void 0&&(lt=1e-8),bt===void 0&&(bt=20);var At=Ne($e),lr=Ne(.5*($e+rt)),pr=Ne(rt),or=(At+4*lr+pr)*(rt-$e)/6,mr=xr(Ne,$e,rt,At,lr,pr,or,lt,bt,1,mt);return mr}function bn(Ne,$e,rt){function lt(tn){return Ne+(1-Ne)*m(1-m(tn,$e),1/$e)}function bt(tn){return Fr(lt,0,tn,1e-4)}for(var mt=1/bt(1),At=1e3,lr=(1+1e-8)*mt,pr=[],or=0;or<=At;or++)pr.push(bt(or/At)*lr);function mr(tn){var An=0,zn=At,Xn=At>>1;do pr[Xn]>tn?zn=Xn:An=Xn,Xn=An+zn>>1;while(Xn>An);var xa=pr[Xn+1]-pr[Xn];return xa&&(xa=(tn-pr[Xn+1])/xa),(Xn+1+xa)/At}var Pr=2*mr(1)/c*mt/rt,Yr=function(tn,An){var zn=mr(y(g(An))),Xn=lt(zn)*tn;return zn/=Pr,[Xn,An>=0?zn:-zn]};return Yr.invert=function(tn,An){var zn;return An*=Pr,y(An)<1&&(zn=b(An)*z(bt(y(An))*mt)),[tn/lt(y(An)),zn]},Yr}function Hn(){var Ne=0,$e=2.5,rt=1.183136,lt=o.geoProjectionMutator(bn),bt=lt(Ne,$e,rt);return bt.alpha=function(mt){return arguments.length?lt(Ne=+mt,$e,rt):Ne},bt.k=function(mt){return arguments.length?lt(Ne,$e=+mt,rt):$e},bt.gamma=function(mt){return arguments.length?lt(Ne,$e,rt=+mt):rt},bt.scale(152.63)}function ra(Ne,$e){return y(Ne[0]-$e[0])<p&&y(Ne[1]-$e[1])<p}function Sn(Ne,$e){for(var rt=-1,lt=Ne.length,bt=Ne[0],mt,At,lr,pr=[];++rt<lt;){mt=Ne[rt],At=(mt[0]-bt[0])/$e,lr=(mt[1]-bt[1])/$e;for(var or=0;or<$e;++or)pr.push([bt[0]+or*At,bt[1]+or*lr]);bt=mt}return pr.push(mt),pr}function Zn(Ne){var $e=[],rt,lt,bt,mt,At,lr,pr,or=Ne[0].length;for(pr=0;pr<or;++pr)rt=Ne[0][pr],lt=rt[0][0],bt=rt[0][1],mt=rt[1][1],At=rt[2][0],lr=rt[2][1],$e.push(Sn([[lt+p,bt+p],[lt+p,mt-p],[At-p,mt-p],[At-p,lr+p]],30));for(pr=Ne[1].length-1;pr>=0;--pr)rt=Ne[1][pr],lt=rt[0][0],bt=rt[0][1],mt=rt[1][1],At=rt[2][0],lr=rt[2][1],$e.push(Sn([[At-p,lr-p],[At-p,mt+p],[lt+p,mt+p],[lt+p,bt-p]],30));return{type:"Polygon",coordinates:[h.merge($e)]}}function sa(Ne,$e,rt){var lt,bt;function mt(pr,or){for(var mr=or<0?-1:1,Pr=$e[+(or<0)],Yr=0,tn=Pr.length-1;Yr<tn&&pr>Pr[Yr][2][0];++Yr);var An=Ne(pr-Pr[Yr][1][0],or);return An[0]+=Ne(Pr[Yr][1][0],mr*or>mr*Pr[Yr][0][1]?Pr[Yr][0][1]:or)[0],An}rt?mt.invert=rt(mt):Ne.invert&&(mt.invert=function(pr,or){for(var mr=bt[+(or<0)],Pr=$e[+(or<0)],Yr=0,tn=mr.length;Yr<tn;++Yr){var An=mr[Yr];if(An[0][0]<=pr&&pr<An[1][0]&&An[0][1]<=or&&or<An[1][1]){var zn=Ne.invert(pr-Ne(Pr[Yr][1][0],0)[0],or);return zn[0]+=Pr[Yr][1][0],ra(mt(zn[0],zn[1]),[pr,or])?zn:null}}});var At=o.geoProjection(mt),lr=At.stream;return At.stream=function(pr){var or=At.rotate(),mr=lr(pr),Pr=(At.rotate([0,0]),lr(pr));return At.rotate(or),mr.sphere=function(){o.geoStream(lt,Pr)},mr},At.lobes=function(pr){return arguments.length?(lt=Zn(pr),$e=pr.map(function(or){return or.map(function(mr){return[[mr[0][0]*E,mr[0][1]*E],[mr[1][0]*E,mr[1][1]*E],[mr[2][0]*E,mr[2][1]*E]]})}),bt=$e.map(function(or){return or.map(function(mr){var Pr=Ne(mr[0][0],mr[0][1])[0],Yr=Ne(mr[2][0],mr[2][1])[0],tn=Ne(mr[1][0],mr[0][1])[1],An=Ne(mr[1][0],mr[1][1])[1],zn;return tn>An&&(zn=tn,tn=An,An=zn),[[Pr,tn],[Yr,An]]})}),At):$e.map(function(or){return or.map(function(mr){return[[mr[0][0]*M,mr[0][1]*M],[mr[1][0]*M,mr[1][1]*M],[mr[2][0]*M,mr[2][1]*M]]})})},$e!=null&&At.lobes($e),At}var ma=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function wa(){return sa(Re,ma).scale(160.857)}var ca=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ka(){return sa(Dn,ca).scale(152.63)}var Do=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ls(){return sa(Ce,Do).scale(169.529)}var Ts=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Kl(){return sa(Ce,Ts).scale(169.529).rotate([20,0])}var hu=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function tf(){return sa(mn,hu,ce).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ai=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ol(){return sa(ze,Ai).scale(152.63).rotate([-20,0])}function xl(Ne,$e){return[3/C*Ne*R(c*c/3-$e*$e),$e]}xl.invert=function(Ne,$e){return[C/3*Ne/R(c*c/3-$e*$e),$e]};function to(){return o.geoProjection(xl).scale(158.837)}function Xo(Ne){function $e(rt,lt){if(y(y(lt)-S)<p)return[0,lt<0?-2:2];var bt=g(lt),mt=m((1+bt)/(1-bt),Ne/2),At=.5*(mt+1/mt)+i(rt*=Ne);return[2*g(rt)/At,(mt-1/mt)/At]}return $e.invert=function(rt,lt){var bt=y(lt);if(y(bt-2)<p)return rt?null:[0,b(lt)*S];if(bt>2)return null;rt/=2,lt/=2;var mt=rt*rt,At=lt*lt,lr=2*lt/(1+mt+At);return lr=m((1+lr)/(1-lr),1/Ne),[a(2*rt,1-mt-At)/Ne,z((lr-1)/(lr+1))]},$e}function vu(){var Ne=.5,$e=o.geoProjectionMutator(Xo),rt=$e(Ne);return rt.spacing=function(lt){return arguments.length?$e(Ne=+lt):Ne},rt.scale(124.75)}var $s=c/w;function $i(Ne,$e){return[Ne*(1+R(i($e)))/2,$e/(i($e/2)*i(Ne/6))]}$i.invert=function(Ne,$e){var rt=y(Ne),lt=y($e),bt=p,mt=S;lt<$s?mt*=lt/$s:bt+=6*O($s/lt);for(var At=0;At<25;At++){var lr=g(mt),pr=R(i(mt)),or=g(mt/2),mr=i(mt/2),Pr=g(bt/6),Yr=i(bt/6),tn=.5*bt*(1+pr)-rt,An=mt/(mr*Yr)-lt,zn=pr?-.25*bt*lr/pr:0,Xn=.5*(1+pr),xa=(1+.5*mt*or/mr)/(mr*Yr),Ta=mt/mr*(Pr/6)/(Yr*Yr),qa=zn*Ta-xa*Xn,Ka=(tn*Ta-An*Xn)/qa,oi=(An*zn-tn*xa)/qa;if(mt-=Ka,bt-=oi,y(Ka)<p&&y(oi)<p)break}return[Ne<0?-bt:bt,$e<0?-mt:mt]};function Jl(){return o.geoProjection($i).scale(97.2672)}function ho(Ne,$e){var rt=Ne*Ne,lt=$e*$e;return[Ne*(.975534+lt*(-.119161+rt*-.0143059+lt*-.0547009)),$e*(1.00384+rt*(.0802894+lt*-.02855+rt*199025e-9)+lt*(.0998909+lt*-.0491032))]}ho.invert=function(Ne,$e){var rt=b(Ne)*c,lt=$e/2,bt=50;do{var mt=rt*rt,At=lt*lt,lr=rt*lt,pr=rt*(.975534+At*(-.119161+mt*-.0143059+At*-.0547009))-Ne,or=lt*(1.00384+mt*(.0802894+At*-.02855+mt*199025e-9)+At*(.0998909+At*-.0491032))-$e,mr=.975534-At*(.119161+3*mt*.0143059+At*.0547009),Pr=-lr*(2*.119161+4*.0547009*At+2*.0143059*mt),Yr=lr*(2*.0802894+4*199025e-9*mt+2*-.02855*At),tn=1.00384+mt*(.0802894+199025e-9*mt)+At*(3*(.0998909-.02855*mt)-5*.0491032*At),An=Pr*Yr-tn*mr,zn=(or*Pr-pr*tn)/An,Xn=(pr*Yr-or*mr)/An;rt-=zn,lt-=Xn}while((y(zn)>p||y(Xn)>p)&&--bt>0);return bt&&[rt,lt]};function Ji(){return o.geoProjection(ho).scale(139.98)}function Ao(Ne,$e){return[g(Ne)/i($e),_($e)*i(Ne)]}Ao.invert=function(Ne,$e){var rt=Ne*Ne,lt=$e*$e,bt=lt+1,mt=rt+bt,At=Ne?x*R((mt-R(mt*mt-4*rt))/rt):1/R(bt);return[z(Ne*At),b($e)*O(At)]};function vo(){return o.geoProjection(Ao).scale(144.049).clipAngle(90-.001)}function Ps(Ne){var $e=i(Ne),rt=_(T+Ne/2);function lt(bt,mt){var At=mt-Ne,lr=y(At)<p?bt*$e:y(lr=T+mt/2)<p||y(y(lr)-S)<p?0:bt*At/f(_(lr)/rt);return[lr,At]}return lt.invert=function(bt,mt){var At,lr=mt+Ne;return[y(mt)<p?bt/$e:y(At=T+lr/2)<p||y(y(At)-S)<p?0:bt*f(_(At)/rt)/mt,lr]},lt}function zl(){return Je(Ps).parallel(40).scale(158.837)}function Cf(Ne,$e){return[Ne,1.25*f(_(T+.4*$e))]}Cf.invert=function(Ne,$e){return[Ne,2.5*t(n(.8*$e))-.625*c]};function As(){return o.geoProjection(Cf).scale(108.318)}function Lf(Ne){var $e=Ne.length-1;function rt(lt,bt){for(var mt=i(bt),At=2/(1+mt*i(lt)),lr=At*mt*g(lt),pr=At*g(bt),or=$e,mr=Ne[or],Pr=mr[0],Yr=mr[1],tn;--or>=0;)mr=Ne[or],Pr=mr[0]+lr*(tn=Pr)-pr*Yr,Yr=mr[1]+lr*Yr+pr*tn;return Pr=lr*(tn=Pr)-pr*Yr,Yr=lr*Yr+pr*tn,[Pr,Yr]}return rt.invert=function(lt,bt){var mt=20,At=lt,lr=bt;do{for(var pr=$e,or=Ne[pr],mr=or[0],Pr=or[1],Yr=0,tn=0,An;--pr>=0;)or=Ne[pr],Yr=mr+At*(An=Yr)-lr*tn,tn=Pr+At*tn+lr*An,mr=or[0]+At*(An=mr)-lr*Pr,Pr=or[1]+At*Pr+lr*An;Yr=mr+At*(An=Yr)-lr*tn,tn=Pr+At*tn+lr*An,mr=At*(An=mr)-lr*Pr-lt,Pr=At*Pr+lr*An-bt;var zn=Yr*Yr+tn*tn,Xn,xa;At-=Xn=(mr*Yr+Pr*tn)/zn,lr-=xa=(Pr*Yr-mr*tn)/zn}while(y(Xn)+y(xa)>p*p&&--mt>0);if(mt){var Ta=R(At*At+lr*lr),qa=2*t(Ta*.5),Ka=g(qa);return[a(At*Ka,Ta*i(qa)),Ta?z(lr*Ka/Ta):0]}},rt}var bl=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Zo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],oc=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],_l=[[.9245,0],[0,0],[.01943,0]],nl=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Ru(){return al(bl,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function sc(){return al(Zo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function lc(){return al(oc,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Nl(){return al(_l,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Du(){return al(nl,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function al(Ne,$e){var rt=o.geoProjection(Lf(Ne)).rotate($e).clipAngle(90),lt=o.geoRotation($e),bt=rt.center;return delete rt.rotate,rt.center=function(mt){return arguments.length?bt(lt(mt)):lt.invert(bt())},rt}var rf=R(6),Ql=R(7);function nf(Ne,$e){var rt=z(7*g($e)/(3*rf));return[rf*Ne*(2*i(2*rt/3)-1)/Ql,9*g(rt/3)/Ql]}nf.invert=function(Ne,$e){var rt=3*z($e*Ql/9);return[Ne*Ql/(rf*(2*i(2*rt/3)-1)),z(g(rt)*3*rf/7)]};function Pf(){return o.geoProjection(nf).scale(164.859)}function Fu(Ne,$e){for(var rt=(1+x)*g($e),lt=$e,bt=0,mt;bt<25&&(lt-=mt=(g(lt/2)+g(lt)-rt)/(.5*i(lt/2)+i(lt)),!(y(mt)<p));bt++);return[Ne*(1+2*i(lt)/i(lt/2))/(3*w),2*R(3)*g(lt/2)/R(2+w)]}Fu.invert=function(Ne,$e){var rt=$e*R(2+w)/(2*R(3)),lt=2*z(rt);return[3*w*Ne/(1+2*i(lt)/i(lt/2)),z((rt+g(lt))/(1+x))]};function uc(){return o.geoProjection(Fu).scale(188.209)}function Bl(Ne,$e){for(var rt=R(6/(4+c)),lt=(1+c/4)*g($e),bt=$e/2,mt=0,At;mt<25&&(bt-=At=(bt/2+g(bt)-lt)/(.5+i(bt)),!(y(At)<p));mt++);return[rt*(.5+i(bt))*Ne/1.5,rt*bt]}Bl.invert=function(Ne,$e){var rt=R(6/(4+c)),lt=$e/rt;return y(y(lt)-S)<p&&(lt=lt<0?-S:S),[1.5*Ne/(rt*(.5+i(lt))),z((lt/2+g(lt))/(1+c/4))]};function af(){return o.geoProjection(Bl).scale(166.518)}function Ou(Ne,$e){var rt=$e*$e,lt=rt*rt,bt=rt*lt;return[Ne*(.84719-.13063*rt+bt*bt*(-.04515+.05494*rt-.02326*lt+.00331*bt)),$e*(1.01183+lt*lt*(-.02625+.01926*rt-.00396*lt))]}Ou.invert=function(Ne,$e){var rt=$e,lt=25,bt,mt,At,lr;do mt=rt*rt,At=mt*mt,rt-=bt=(rt*(1.01183+At*At*(-.02625+.01926*mt-.00396*At))-$e)/(1.01183+At*At*(9*-.02625+11*.01926*mt+13*-.00396*At));while(y(bt)>A&&--lt>0);return mt=rt*rt,At=mt*mt,lr=mt*At,[Ne/(.84719-.13063*mt+lr*lr*(-.04515+.05494*mt-.02326*At+.00331*lr)),rt]};function Ws(){return o.geoProjection(Ou).scale(175.295)}function pu(Ne,$e){return[Ne*(1+i($e))/2,2*($e-_($e/2))]}pu.invert=function(Ne,$e){for(var rt=$e/2,lt=0,bt=1/0;lt<10&&y(bt)>p;++lt){var mt=i($e/2);$e-=bt=($e-_($e/2)-rt)/(1-.5/(mt*mt))}return[2*Ne/(1+i($e)),$e]};function of(){return o.geoProjection(pu).scale(152.63)}var If=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Rf(){return sa(ne(1/0),If).rotate([20,0]).scale(152.63)}function zu(Ne,$e){var rt=g($e),lt=i($e),bt=b(Ne);if(Ne===0||y($e)===S)return[0,$e];if($e===0)return[Ne,0];if(y(Ne)===S)return[Ne*lt,S*rt];var mt=c/(2*Ne)-2*Ne/c,At=2*$e/c,lr=(1-At*At)/(rt-At),pr=mt*mt,or=lr*lr,mr=1+pr/or,Pr=1+or/pr,Yr=(mt*rt/lr-mt/2)/mr,tn=(or*rt/pr+lr/2)/Pr,An=Yr*Yr+lt*lt/mr,zn=tn*tn-(or*rt*rt/pr+lr*rt-1)/Pr;return[S*(Yr+R(An)*bt),S*(tn+R(zn<0?0:zn)*b(-$e*mt)*bt)]}zu.invert=function(Ne,$e){Ne/=S,$e/=S;var rt=Ne*Ne,lt=$e*$e,bt=rt+lt,mt=c*c;return[Ne?(bt-1+R((1-bt)*(1-bt)+4*rt))/(2*Ne)*S:0,me(function(At){return bt*(c*g(At)-2*At)*c+4*At*At*($e-g(At))+2*c*At-mt*$e},0)]};function fc(){return o.geoProjection(zu).scale(127.267)}var Df=1.0148,Ss=.23185,ql=-.14499,eu=.02406,sf=Df,Ys=5*Ss,Ko=7*ql,Nu=9*eu,il=1.790857183;function ol(Ne,$e){var rt=$e*$e;return[Ne,$e*(Df+rt*rt*(Ss+rt*(ql+eu*rt)))]}ol.invert=function(Ne,$e){$e>il?$e=il:$e<-il&&($e=-il);var rt=$e,lt;do{var bt=rt*rt;rt-=lt=(rt*(Df+bt*bt*(Ss+bt*(ql+eu*bt)))-$e)/(sf+bt*bt*(Ys+bt*(Ko+Nu*bt)))}while(y(lt)>p);return[Ne,rt]};function Eo(){return o.geoProjection(ol).scale(139.319)}function du(Ne,$e){if(y($e)<p)return[Ne,0];var rt=_($e),lt=Ne*g($e);return[g(lt)/rt,$e+(1-i(lt))/rt]}du.invert=function(Ne,$e){if(y($e)<p)return[Ne,0];var rt=Ne*Ne+$e*$e,lt=$e*.5,bt=10,mt;do{var At=_(lt),lr=1/i(lt),pr=rt-2*$e*lt+lt*lt;lt-=mt=(At*pr+2*(lt-$e))/(2+pr*lr*lr+2*(lt-$e)*At)}while(y(mt)>p&&--bt>0);return At=_(lt),[(y($e)<y(lt+1/At)?z(Ne*At):b($e)*b(Ne)*(O(y(Ne*At))+S))/g(lt),lt]};function gu(){return o.geoProjection(du).scale(103.74)}function Ul(Ne,$e){var rt=tu(Ne[1],Ne[0]),lt=tu($e[1],$e[0]),bt=mu(rt,lt),mt=Bu(rt)/Bu(lt);return yu([1,0,Ne[0][0],0,1,Ne[0][1]],yu([mt,0,0,0,mt,0],yu([i(bt),g(bt),0,-g(bt),i(bt),0],[1,0,-$e[0][0],0,1,-$e[0][1]])))}function Xs(Ne){var $e=1/(Ne[0]*Ne[4]-Ne[1]*Ne[3]);return[$e*Ne[4],-$e*Ne[1],$e*(Ne[1]*Ne[5]-Ne[2]*Ne[4]),-$e*Ne[3],$e*Ne[0],$e*(Ne[2]*Ne[3]-Ne[0]*Ne[5])]}function yu(Ne,$e){return[Ne[0]*$e[0]+Ne[1]*$e[3],Ne[0]*$e[1]+Ne[1]*$e[4],Ne[0]*$e[2]+Ne[1]*$e[5]+Ne[2],Ne[3]*$e[0]+Ne[4]*$e[3],Ne[3]*$e[1]+Ne[4]*$e[4],Ne[3]*$e[2]+Ne[4]*$e[5]+Ne[5]]}function tu(Ne,$e){return[Ne[0]-$e[0],Ne[1]-$e[1]]}function Bu(Ne){return R(Ne[0]*Ne[0]+Ne[1]*Ne[1])}function mu(Ne,$e){return a(Ne[0]*$e[1]-Ne[1]*$e[0],Ne[0]*$e[0]+Ne[1]*$e[1])}function Vl(Ne,$e,rt){lt(Ne,{transform:null});function lt(or,mr){if(or.edges=lf(or.face),mr.face){var Pr=or.shared=Uc(or.face,mr.face),Yr=Ul(Pr.map(mr.project),Pr.map(or.project));or.transform=mr.transform?yu(mr.transform,Yr):Yr;for(var tn=mr.edges,An=0,zn=tn.length;An<zn;++An)Is(Pr[0],tn[An][1])&&Is(Pr[1],tn[An][0])&&(tn[An]=or),Is(Pr[0],tn[An][0])&&Is(Pr[1],tn[An][1])&&(tn[An]=or);for(tn=or.edges,An=0,zn=tn.length;An<zn;++An)Is(Pr[0],tn[An][0])&&Is(Pr[1],tn[An][1])&&(tn[An]=mr),Is(Pr[0],tn[An][1])&&Is(Pr[1],tn[An][0])&&(tn[An]=mr)}else or.transform=mr.transform;return or.children&&or.children.forEach(function(Xn){lt(Xn,or)}),or}function bt(or,mr){var Pr=$e(or,mr),Yr=Pr.project([or*M,mr*M]),tn;return(tn=Pr.transform)?[tn[0]*Yr[0]+tn[1]*Yr[1]+tn[2],-(tn[3]*Yr[0]+tn[4]*Yr[1]+tn[5])]:(Yr[1]=-Yr[1],Yr)}ru(Ne)&&(bt.invert=function(or,mr){var Pr=mt(Ne,[or,-mr]);return Pr&&(Pr[0]*=E,Pr[1]*=E,Pr)});function mt(or,mr){var Pr=or.project.invert,Yr=or.transform,tn=mr;if(Yr&&(Yr=Xs(Yr),tn=[Yr[0]*tn[0]+Yr[1]*tn[1]+Yr[2],Yr[3]*tn[0]+Yr[4]*tn[1]+Yr[5]]),Pr&&or===At(An=Pr(tn)))return An;for(var An,zn=or.children,Xn=0,xa=zn&&zn.length;Xn<xa;++Xn)if(An=mt(zn[Xn],mr))return An}function At(or){return $e(or[0]*E,or[1]*E)}var lr=o.geoProjection(bt),pr=lr.stream;return lr.stream=function(or){var mr=lr.rotate(),Pr=pr(or),Yr=(lr.rotate([0,0]),pr(or));return lr.rotate(mr),Pr.sphere=function(){Yr.polygonStart(),Yr.lineStart(),cc(Yr,Ne),Yr.lineEnd(),Yr.polygonEnd()},Pr},lr.angle(rt==null?-30:rt*M)}function cc(Ne,$e,rt){var lt,bt=$e.edges,mt=bt.length,At,lr={type:"MultiPoint",coordinates:$e.face},pr=$e.face.filter(function(zn){return y(zn[1])!==90}),or=o.geoBounds({type:"MultiPoint",coordinates:pr}),mr=!1,Pr=-1,Yr=or[1][0]-or[0][0],tn=Yr===180||Yr===360?[(or[0][0]+or[1][0])/2,(or[0][1]+or[1][1])/2]:o.geoCentroid(lr);if(rt)for(;++Pr<mt&&bt[Pr]!==rt;);++Pr;for(var An=0;An<mt;++An)At=bt[(An+Pr)%mt],Array.isArray(At)?(mr||(Ne.point((lt=o.geoInterpolate(At[0],tn)(p))[0],lt[1]),mr=!0),Ne.point((lt=o.geoInterpolate(At[1],tn)(p))[0],lt[1])):(mr=!1,At!==rt&&cc(Ne,At,$e))}function Is(Ne,$e){return Ne&&$e&&Ne[0]===$e[0]&&Ne[1]===$e[1]}function Uc(Ne,$e){for(var rt,lt,bt=Ne.length,mt=null,At=0;At<bt;++At){rt=Ne[At];for(var lr=$e.length;--lr>=0;)if(lt=$e[lr],rt[0]===lt[0]&&rt[1]===lt[1]){if(mt)return[mt,rt];mt=rt}}}function lf(Ne){for(var $e=Ne.length,rt=[],lt=Ne[$e-1],bt=0;bt<$e;++bt)rt.push([lt,lt=Ne[bt]]);return rt}function ru(Ne){return Ne.project.invert||Ne.children&&Ne.children.some(ru)}var xu=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Hl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ne){return Ne.map(function($e){return xu[$e]})});function bu(Ne){Ne=Ne||function(rt){var lt=o.geoCentroid({type:"MultiPoint",coordinates:rt});return o.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var $e=Hl.map(function(rt){return{face:rt,project:Ne(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,lt){var bt=$e[rt];bt&&(bt.children||(bt.children=[])).push($e[lt])}),Vl($e[0],function(rt,lt){return $e[rt<-c/2?lt<0?6:4:rt<0?lt<0?2:0:rt<c/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ff=2/R(3);function Of(Ne,$e){var rt=We(Ne,$e);return[rt[0]*Ff,rt[1]]}Of.invert=function(Ne,$e){return We.invert(Ne/Ff,$e)};function Vc(Ne){Ne=Ne||function(rt){var lt=o.geoCentroid({type:"MultiPoint",coordinates:rt});return o.geoProjection(Of).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var $e=Hl.map(function(rt){return{face:rt,project:Ne(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,lt){var bt=$e[rt];bt&&(bt.children||(bt.children=[])).push($e[lt])}),Vl($e[0],function(rt,lt){return $e[rt<-c/2?lt<0?6:4:rt<0?lt<0?2:0:rt<c/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Wi(Ne){Ne=Ne||function(At){var lr=At.length===6?o.geoCentroid({type:"MultiPoint",coordinates:At}):At[0];return o.geoGnomonic().scale(1).translate([0,0]).rotate([-lr[0],-lr[1]])};var $e=Hl.map(function(At){for(var lr=At.map(Rs),pr=lr.length,or=lr[pr-1],mr,Pr=[],Yr=0;Yr<pr;++Yr)mr=lr[Yr],Pr.push(Ms([or[0]*.9486832980505138+mr[0]*.31622776601683794,or[1]*.9486832980505138+mr[1]*.31622776601683794,or[2]*.9486832980505138+mr[2]*.31622776601683794]),Ms([mr[0]*.9486832980505138+or[0]*.31622776601683794,mr[1]*.9486832980505138+or[1]*.31622776601683794,mr[2]*.9486832980505138+or[2]*.31622776601683794])),or=mr;return Pr}),rt=[],lt=[-1,0,0,1,0,1,4,5];$e.forEach(function(At,lr){for(var pr=Hl[lr],or=pr.length,mr=rt[lr]=[],Pr=0;Pr<or;++Pr)$e.push([pr[Pr],At[(Pr*2+2)%(2*or)],At[(Pr*2+1)%(2*or)]]),lt.push(lr),mr.push(Gl(Rs(At[(Pr*2+2)%(2*or)]),Rs(At[(Pr*2+1)%(2*or)])))});var bt=$e.map(function(At){return{project:Ne(At),face:At}});lt.forEach(function(At,lr){var pr=bt[At];pr&&(pr.children||(pr.children=[])).push(bt[lr])});function mt(At,lr){var pr=i(lr),or=[pr*i(At),pr*g(At),g(lr)],mr=At<-c/2?lr<0?6:4:At<0?lr<0?2:0:At<c/2?lr<0?3:1:lr<0?7:5,Pr=rt[mr];return bt[nu(Pr[0],or)<0?8+3*mr:nu(Pr[1],or)<0?8+3*mr+1:nu(Pr[2],or)<0?8+3*mr+2:mr]}return Vl(bt[0],mt).angle(-30).scale(110.625).center([0,45])}function nu(Ne,$e){for(var rt=0,lt=Ne.length,bt=0;rt<lt;++rt)bt+=Ne[rt]*$e[rt];return bt}function Gl(Ne,$e){return[Ne[1]*$e[2]-Ne[2]*$e[1],Ne[2]*$e[0]-Ne[0]*$e[2],Ne[0]*$e[1]-Ne[1]*$e[0]]}function Ms(Ne){return[a(Ne[1],Ne[0])*M,z(u(-1,l(1,Ne[2])))*M]}function Rs(Ne){var $e=Ne[0]*E,rt=Ne[1]*E,lt=i(rt);return[lt*i($e),lt*g($e),g(rt)]}function _u(){}function ko(Ne){if((rt=Ne.length)<4)return!1;for(var $e=0,rt,lt=Ne[rt-1][1]*Ne[0][0]-Ne[rt-1][0]*Ne[0][1];++$e<rt;)lt+=Ne[$e-1][1]*Ne[$e][0]-Ne[$e-1][0]*Ne[$e][1];return lt<=0}function zf(Ne,$e){for(var rt=$e[0],lt=$e[1],bt=!1,mt=0,At=Ne.length,lr=At-1;mt<At;lr=mt++){var pr=Ne[mt],or=pr[0],mr=pr[1],Pr=Ne[lr],Yr=Pr[0],tn=Pr[1];mr>lt^tn>lt&&rt<(Yr-or)*(lt-mr)/(tn-mr)+or&&(bt=!bt)}return bt}function Ds(Ne,$e){var rt=$e.stream,lt;if(!rt)throw new Error("invalid projection");switch(Ne&&Ne.type){case"Feature":lt=Tl;break;case"FeatureCollection":lt=wl;break;default:lt=Fs;break}return lt(Ne,rt)}function wl(Ne,$e){return{type:"FeatureCollection",features:Ne.features.map(function(rt){return Tl(rt,$e)})}}function Tl(Ne,$e){return{type:"Feature",id:Ne.id,properties:Ne.properties,geometry:Fs(Ne.geometry,$e)}}function sl(Ne,$e){return{type:"GeometryCollection",geometries:Ne.geometries.map(function(rt){return Fs(rt,$e)})}}function Fs(Ne,$e){if(!Ne)return null;if(Ne.type==="GeometryCollection")return sl(Ne,$e);var rt;switch(Ne.type){case"Point":rt=Os;break;case"MultiPoint":rt=Os;break;case"LineString":rt=Nf;break;case"MultiLineString":rt=Nf;break;case"Polygon":rt=Uu;break;case"MultiPolygon":rt=Uu;break;case"Sphere":rt=Uu;break;default:return null}return o.geoStream(Ne,$e(rt)),rt.result()}var no=[],Jo=[],Os={point:function(Ne,$e){no.push([Ne,$e])},result:function(){var Ne=no.length?no.length<2?{type:"Point",coordinates:no[0]}:{type:"MultiPoint",coordinates:no}:null;return no=[],Ne}},Nf={lineStart:_u,point:function(Ne,$e){no.push([Ne,$e])},lineEnd:function(){no.length&&(Jo.push(no),no=[])},result:function(){var Ne=Jo.length?Jo.length<2?{type:"LineString",coordinates:Jo[0]}:{type:"MultiLineString",coordinates:Jo}:null;return Jo=[],Ne}},Uu={polygonStart:_u,lineStart:_u,point:function(Ne,$e){no.push([Ne,$e])},lineEnd:function(){var Ne=no.length;if(Ne){do no.push(no[0].slice());while(++Ne<4);Jo.push(no),no=[]}},polygonEnd:_u,result:function(){if(!Jo.length)return null;var Ne=[],$e=[];return Jo.forEach(function(rt){ko(rt)?Ne.push([rt]):$e.push(rt)}),$e.forEach(function(rt){var lt=rt[0];Ne.some(function(bt){if(zf(bt[0],lt))return bt.push(rt),!0})||Ne.push([rt])}),Jo=[],Ne.length?Ne.length>1?{type:"MultiPolygon",coordinates:Ne}:{type:"Polygon",coordinates:Ne[0]}:null}};function Bf(Ne){var $e=Ne(S,0)[0]-Ne(-S,0)[0];function rt(lt,bt){var mt=y(lt)<S,At=Ne(mt?lt:lt>0?lt-c:lt+c,bt),lr=(At[0]-At[1])*x,pr=(At[0]+At[1])*x;if(mt)return[lr,pr];var or=$e*x,mr=lr>0^pr>0?-1:1;return[mr*lr-b(pr)*or,mr*pr-b(lr)*or]}return Ne.invert&&(rt.invert=function(lt,bt){var mt=(lt+bt)*x,At=(bt-lt)*x,lr=y(mt)<.5*$e&&y(At)<.5*$e;if(!lr){var pr=$e*x,or=mt>0^At>0?-1:1,mr=-or*lt+(At>0?1:-1)*pr,Pr=-or*bt+(mt>0?1:-1)*pr;mt=(-mr-Pr)*x,At=(mr-Pr)*x}var Yr=Ne.invert(mt,At);return lr||(Yr[0]+=mt>0?c:-c),Yr}),o.geoProjection(rt).rotate([-90,-90,45]).clipAngle(180-.001)}function yt(){return Bf(Ct).scale(176.423)}function Ft(){return Bf(oa).scale(111.48)}function fr(Ne,$e){if(!(0<=($e=+$e)&&$e<=20))throw new Error("invalid digits");function rt(or){var mr=or.length,Pr=2,Yr=new Array(mr);for(Yr[0]=+or[0].toFixed($e),Yr[1]=+or[1].toFixed($e);Pr<mr;)Yr[Pr]=or[Pr],++Pr;return Yr}function lt(or){return or.map(rt)}function bt(or){for(var mr=rt(or[0]),Pr=[mr],Yr=1;Yr<or.length;Yr++){var tn=rt(or[Yr]);(tn.length>2||tn[0]!=mr[0]||tn[1]!=mr[1])&&(Pr.push(tn),mr=tn)}return Pr.length===1&&or.length>1&&Pr.push(rt(or[or.length-1])),Pr}function mt(or){return or.map(bt)}function At(or){if(or==null)return or;var mr;switch(or.type){case"GeometryCollection":mr={type:"GeometryCollection",geometries:or.geometries.map(At)};break;case"Point":mr={type:"Point",coordinates:rt(or.coordinates)};break;case"MultiPoint":mr={type:or.type,coordinates:lt(or.coordinates)};break;case"LineString":mr={type:or.type,coordinates:bt(or.coordinates)};break;case"MultiLineString":case"Polygon":mr={type:or.type,coordinates:mt(or.coordinates)};break;case"MultiPolygon":mr={type:"MultiPolygon",coordinates:or.coordinates.map(mt)};break;default:return or}return or.bbox!=null&&(mr.bbox=or.bbox),mr}function lr(or){var mr={type:"Feature",properties:or.properties,geometry:At(or.geometry)};return or.id!=null&&(mr.id=or.id),or.bbox!=null&&(mr.bbox=or.bbox),mr}if(Ne!=null)switch(Ne.type){case"Feature":return lr(Ne);case"FeatureCollection":{var pr={type:"FeatureCollection",features:Ne.features.map(lr)};return Ne.bbox!=null&&(pr.bbox=Ne.bbox),pr}default:return At(Ne)}return Ne}function ir(Ne){var $e=g(Ne);function rt(lt,bt){var mt=$e?_(lt*$e/2)/$e:lt/2;if(!bt)return[2*mt,-Ne];var At=2*t(mt*g(bt)),lr=1/_(bt);return[g(At)*lr,bt+(1-i(At))*lr-Ne]}return rt.invert=function(lt,bt){if(y(bt+=Ne)<p)return[$e?2*t($e*lt/2)/$e:lt,0];var mt=lt*lt+bt*bt,At=0,lr=10,pr;do{var or=_(At),mr=1/i(At),Pr=mt-2*bt*At+At*At;At-=pr=(or*Pr+2*(At-bt))/(2+Pr*mr*mr+2*(At-bt)*or)}while(y(pr)>p&&--lr>0);var Yr=lt*(or=_(At)),tn=_(y(bt)<y(At+1/or)?z(Yr)*.5:O(Yr)*.5+c/4)/g(At);return[$e?2*t($e*tn)/$e:2*tn,At]},rt}function Ir(){return Je(ir).scale(131.215)}var an=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];an.forEach(function(Ne){Ne[1]*=1.0144});function xn(Ne,$e){var rt=l(18,y($e)*36/c),lt=r(rt),bt=rt-lt,mt=(Pr=an[lt])[0],At=Pr[1],lr=(Pr=an[++lt])[0],pr=Pr[1],or=(Pr=an[l(19,++lt)])[0],mr=Pr[1],Pr;return[Ne*(lr+bt*(or-mt)/2+bt*bt*(or-2*lr+mt)/2),($e>0?S:-S)*(pr+bt*(mr-At)/2+bt*bt*(mr-2*pr+At)/2)]}xn.invert=function(Ne,$e){var rt=$e/S,lt=rt*90,bt=l(18,y(lt/5)),mt=u(0,r(bt));do{var At=an[mt][1],lr=an[mt+1][1],pr=an[l(19,mt+2)][1],or=pr-At,mr=pr-2*lr+At,Pr=2*(y(rt)-lr)/or,Yr=mr/or,tn=Pr*(1-Yr*Pr*(1-2*Yr*Pr));if(tn>=0||mt===1){lt=($e>=0?5:-5)*(tn+bt);var An=50,zn;do bt=l(18,y(lt)/5),mt=r(bt),tn=bt-mt,At=an[mt][1],lr=an[mt+1][1],pr=an[l(19,mt+2)][1],lt-=(zn=($e>=0?S:-S)*(lr+tn*(pr-At)/2+tn*tn*(pr-2*lr+At)/2)-$e)*M;while(y(zn)>A&&--An>0);break}}while(--mt>=0);var Xn=an[mt][0],xa=an[mt+1][0],Ta=an[l(19,mt+2)][0];return[Ne/(xa+tn*(Ta-Xn)/2+tn*tn*(Ta-2*xa+Xn)/2),lt*E]};function Ln(){return o.geoProjection(xn).scale(152.63)}function Fn(Ne){function $e(rt,lt){var bt=i(lt),mt=(Ne-1)/(Ne-bt*i(rt));return[mt*bt*g(rt),mt*g(lt)]}return $e.invert=function(rt,lt){var bt=rt*rt+lt*lt,mt=R(bt),At=(Ne-R(1-bt*(Ne+1)/(Ne-1)))/((Ne-1)/mt+mt/(Ne-1));return[a(rt*At,mt*R(1-At*At)),mt?z(lt*At/mt):0]},$e}function jn(Ne,$e){var rt=Fn(Ne);if(!$e)return rt;var lt=i($e),bt=g($e);function mt(At,lr){var pr=rt(At,lr),or=pr[1],mr=or*bt/(Ne-1)+lt;return[pr[0]*lt/mr,or/mr]}return mt.invert=function(At,lr){var pr=(Ne-1)/(Ne-1-lr*bt);return rt.invert(pr*At,pr*lr*lt)},mt}function _n(){var Ne=2,$e=0,rt=o.geoProjectionMutator(jn),lt=rt(Ne,$e);return lt.distance=function(bt){return arguments.length?rt(Ne=+bt,$e):Ne},lt.tilt=function(bt){return arguments.length?rt(Ne,$e=bt*E):$e*M},lt.scale(432.147).clipAngle(O(1/Ne)*M-1e-6)}var Un=1e-4,On=1e4,Wn=-180,ea=Wn+Un,Ha=180,Ia=Ha-Un,Ga=-90,ja=Ga+Un,Qn=90,da=Qn-Un;function Za(Ne){return Ne.length>0}function ni(Ne){return Math.floor(Ne*On)/On}function Mi(Ne){return Ne===Ga||Ne===Qn?[0,Ne]:[Wn,ni(Ne)]}function Ei(Ne){var $e=Ne[0],rt=Ne[1],lt=!1;return $e<=ea?($e=Wn,lt=!0):$e>=Ia&&($e=Ha,lt=!0),rt<=ja?(rt=Ga,lt=!0):rt>=da&&(rt=Qn,lt=!0),lt?[$e,rt]:Ne}function Ci(Ne){return Ne.map(Ei)}function Oi(Ne,$e,rt){for(var lt=0,bt=Ne.length;lt<bt;++lt){var mt=Ne[lt].slice();rt.push({index:-1,polygon:$e,ring:mt});for(var At=0,lr=mt.length;At<lr;++At){var pr=mt[At],or=pr[0],mr=pr[1];if(or<=ea||or>=Ia||mr<=ja||mr>=da){mt[At]=Ei(pr);for(var Pr=At+1;Pr<lr;++Pr){var Yr=mt[Pr],tn=Yr[0],An=Yr[1];if(tn>ea&&tn<Ia&&An>ja&&An<da)break}if(Pr===At+1)continue;if(At){var zn={index:-1,polygon:$e,ring:mt.slice(0,At+1)};zn.ring[zn.ring.length-1]=Mi(mr),rt[rt.length-1]=zn}else rt.pop();if(Pr>=lr)break;rt.push({index:-1,polygon:$e,ring:mt=mt.slice(Pr-1)}),mt[0]=Mi(mt[0][1]),At=-1,lr=mt.length}}}}function vi(Ne){var $e,rt=Ne.length,lt={},bt={},mt,At,lr,pr,or;for($e=0;$e<rt;++$e){if(mt=Ne[$e],At=mt.ring[0],pr=mt.ring[mt.ring.length-1],At[0]===pr[0]&&At[1]===pr[1]){mt.polygon.push(mt.ring),Ne[$e]=null;continue}mt.index=$e,lt[At]=bt[pr]=mt}for($e=0;$e<rt;++$e)if(mt=Ne[$e],mt){if(At=mt.ring[0],pr=mt.ring[mt.ring.length-1],lr=bt[At],or=lt[pr],delete lt[At],delete bt[pr],At[0]===pr[0]&&At[1]===pr[1]){mt.polygon.push(mt.ring);continue}lr?(delete bt[At],delete lt[lr.ring[0]],lr.ring.pop(),Ne[lr.index]=null,mt={index:-1,polygon:lr.polygon,ring:lr.ring.concat(mt.ring)},lr===or?mt.polygon.push(mt.ring):(mt.index=rt++,Ne.push(lt[mt.ring[0]]=bt[mt.ring[mt.ring.length-1]]=mt))):or?(delete lt[pr],delete bt[or.ring[or.ring.length-1]],mt.ring.pop(),mt={index:rt++,polygon:or.polygon,ring:mt.ring.concat(or.ring)},Ne[or.index]=null,Ne.push(lt[mt.ring[0]]=bt[mt.ring[mt.ring.length-1]]=mt)):(mt.ring.push(mt.ring[0]),mt.polygon.push(mt.ring))}}function Uo(Ne){var $e={type:"Feature",geometry:xo(Ne.geometry)};return Ne.id!=null&&($e.id=Ne.id),Ne.bbox!=null&&($e.bbox=Ne.bbox),Ne.properties!=null&&($e.properties=Ne.properties),$e}function xo(Ne){if(Ne==null)return Ne;var $e,rt,lt,bt;switch(Ne.type){case"GeometryCollection":$e={type:"GeometryCollection",geometries:Ne.geometries.map(xo)};break;case"Point":$e={type:"Point",coordinates:Ei(Ne.coordinates)};break;case"MultiPoint":case"LineString":$e={type:Ne.type,coordinates:Ci(Ne.coordinates)};break;case"MultiLineString":$e={type:"MultiLineString",coordinates:Ne.coordinates.map(Ci)};break;case"Polygon":{var mt=[];Oi(Ne.coordinates,mt,rt=[]),vi(rt),$e={type:"Polygon",coordinates:mt};break}case"MultiPolygon":{rt=[],lt=-1,bt=Ne.coordinates.length;for(var At=new Array(bt);++lt<bt;)Oi(Ne.coordinates[lt],At[lt]=[],rt);vi(rt),$e={type:"MultiPolygon",coordinates:At.filter(Za)};break}default:return Ne}return Ne.bbox!=null&&($e.bbox=Ne.bbox),$e}function ri(Ne){if(Ne==null)return Ne;switch(Ne.type){case"Feature":return Uo(Ne);case"FeatureCollection":{var $e={type:"FeatureCollection",features:Ne.features.map(Uo)};return Ne.bbox!=null&&($e.bbox=Ne.bbox),$e}default:return xo(Ne)}}function ga(Ne,$e){var rt=_($e/2),lt=g(T*rt);return[Ne*(.74482-.34588*lt*lt),1.70711*rt]}ga.invert=function(Ne,$e){var rt=$e/1.70711,lt=g(T*rt);return[Ne/(.74482-.34588*lt*lt),2*t(rt)]};function Li(){return o.geoProjection(ga).scale(146.153)}function Co(Ne,$e,rt){var lt=o.geoInterpolate($e,rt),bt=lt(.5),mt=o.geoRotation([-bt[0],-bt[1]])($e),At=lt.distance/2,lr=-z(g(mt[1]*E)/g(At)),pr=[-bt[0],-bt[1],-(mt[0]>0?c-lr:lr)*M],or=o.geoProjection(Ne(At)).rotate(pr),mr=o.geoRotation(pr),Pr=or.center;return delete or.rotate,or.center=function(Yr){return arguments.length?Pr(mr(Yr)):mr.invert(Pr())},or.clipAngle(90)}function Fo(Ne){var $e=i(Ne);function rt(lt,bt){var mt=o.geoGnomonicRaw(lt,bt);return mt[0]*=$e,mt}return rt.invert=function(lt,bt){return o.geoGnomonicRaw.invert(lt/$e,bt)},rt}function zs(){return ll([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function ll(Ne,$e){return Co(Fo,Ne,$e)}function us(Ne){if(!(Ne*=2))return o.geoAzimuthalEquidistantRaw;var $e=-Ne/2,rt=-$e,lt=Ne*Ne,bt=_(rt),mt=.5/g(rt);function At(lr,pr){var or=O(i(pr)*i(lr-$e)),mr=O(i(pr)*i(lr-rt)),Pr=pr<0?-1:1;return or*=or,mr*=mr,[(or-mr)/(2*Ne),Pr*R(4*lt*mr-(lt-or+mr)*(lt-or+mr))/(2*Ne)]}return At.invert=function(lr,pr){var or=pr*pr,mr=i(R(or+(Yr=lr+$e)*Yr)),Pr=i(R(or+(Yr=lr+rt)*Yr)),Yr,tn;return[a(tn=mr-Pr,Yr=(mr+Pr)*bt),(pr<0?-1:1)*O(R(Yr*Yr+tn*tn)*mt)]},At}function jl(){return Zs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Zs(Ne,$e){return Co(us,Ne,$e)}function Ns(Ne,$e){if(y($e)<p)return[Ne,0];var rt=y($e/S),lt=z(rt);if(y(Ne)<p||y(y($e)-S)<p)return[0,b($e)*c*_(lt/2)];var bt=i(lt),mt=y(c/Ne-Ne/c)/2,At=mt*mt,lr=bt/(rt+bt-1),pr=lr*(2/rt-1),or=pr*pr,mr=or+At,Pr=lr-or,Yr=At+lr;return[b(Ne)*c*(mt*Pr+R(At*Pr*Pr-mr*(lr*lr-or)))/mr,b($e)*c*(pr*Yr-mt*R((At+1)*mr-Yr*Yr))/mr]}Ns.invert=function(Ne,$e){if(y($e)<p)return[Ne,0];if(y(Ne)<p)return[0,S*g(2*t($e/c))];var rt=(Ne/=c)*Ne,lt=($e/=c)*$e,bt=rt+lt,mt=bt*bt,At=-y($e)*(1+bt),lr=At-2*lt+rt,pr=-2*At+1+2*lt+mt,or=lt/pr+(2*lr*lr*lr/(pr*pr*pr)-9*At*lr/(pr*pr))/27,mr=(At-lr*lr/(3*pr))/pr,Pr=2*R(-mr/3),Yr=O(3*or/(mr*Pr))/3;return[c*(bt-1+R(1+2*(rt-lt)+mt))/(2*Ne),b($e)*c*(-Pr*i(Yr+c/3)-lr/(3*pr))]};function Vo(){return o.geoProjection(Ns).scale(79.4183)}function Vu(Ne,$e){if(y($e)<p)return[Ne,0];var rt=y($e/S),lt=z(rt);if(y(Ne)<p||y(y($e)-S)<p)return[0,b($e)*c*_(lt/2)];var bt=i(lt),mt=y(c/Ne-Ne/c)/2,At=mt*mt,lr=bt*(R(1+At)-mt*bt)/(1+At*rt*rt);return[b(Ne)*c*lr,b($e)*c*R(1-lr*(2*mt+lr))]}Vu.invert=function(Ne,$e){if(!Ne)return[0,S*g(2*t($e/c))];var rt=y(Ne/c),lt=(1-rt*rt-($e/=c)*$e)/(2*rt),bt=lt*lt,mt=R(bt+1);return[b(Ne)*c*(mt-lt),b($e)*S*g(2*a(R((1-2*lt*rt)*(lt+mt)-rt),R(mt+lt+rt)))]};function uf(){return o.geoProjection(Vu).scale(79.4183)}function Bs(Ne,$e){if(y($e)<p)return[Ne,0];var rt=$e/S,lt=z(rt);if(y(Ne)<p||y(y($e)-S)<p)return[0,c*_(lt/2)];var bt=(c/Ne-Ne/c)/2,mt=rt/(1+i(lt));return[c*(b(Ne)*R(bt*bt+1-mt*mt)-bt),c*mt]}Bs.invert=function(Ne,$e){if(!$e)return[Ne,0];var rt=$e/c,lt=(c*c*(1-rt*rt)-Ne*Ne)/(2*c*Ne);return[Ne?c*(b(Ne)*R(lt*lt+1)-lt):0,S*g(2*t(rt))]};function Uf(){return o.geoProjection(Bs).scale(79.4183)}function Hu(Ne,$e){if(!$e)return[Ne,0];var rt=y($e);if(!Ne||rt===S)return[0,$e];var lt=rt/S,bt=lt*lt,mt=(8*lt-bt*(bt+2)-5)/(2*bt*(lt-1)),At=mt*mt,lr=lt*mt,pr=bt+At+2*lr,or=lt+3*mt,mr=Ne/S,Pr=mr+1/mr,Yr=b(y(Ne)-S)*R(Pr*Pr-4),tn=Yr*Yr,An=pr*(bt+At*tn-1)+(1-bt)*(bt*(or*or+4*At)+12*lr*At+4*At*At),zn=(Yr*(pr+At-1)+2*R(An))/(4*pr+tn);return[b(Ne)*S*zn,b($e)*S*R(1+Yr*y(zn)-zn*zn)]}Hu.invert=function(Ne,$e){var rt;if(!Ne||!$e)return[Ne,$e];$e/=c;var lt=b(Ne)*Ne/S,bt=(lt*lt-1+4*$e*$e)/y(lt),mt=bt*bt,At=2*$e,lr=50;do{var pr=At*At,or=(8*At-pr*(pr+2)-5)/(2*pr*(At-1)),mr=(3*At-pr*At-10)/(2*pr*At),Pr=or*or,Yr=At*or,tn=At+or,An=tn*tn,zn=At+3*or,Xn=An*(pr+Pr*mt-1)+(1-pr)*(pr*(zn*zn+4*Pr)+Pr*(12*Yr+4*Pr)),xa=-2*tn*(4*Yr*Pr+(1-4*pr+3*pr*pr)*(1+mr)+Pr*(-6+14*pr-mt+(-8+8*pr-2*mt)*mr)+Yr*(-8+12*pr+(-10+10*pr-mt)*mr)),Ta=R(Xn),qa=bt*(An+Pr-1)+2*Ta-lt*(4*An+mt),Ka=bt*(2*or*mr+2*tn*(1+mr))+xa/Ta-8*tn*(bt*(-1+Pr+An)+2*Ta)*(1+mr)/(mt+4*An);At-=rt=qa/Ka}while(rt>p&&--lr>0);return[b(Ne)*(R(bt*bt+4)+bt)*c/4,S*At]};function ev(){return o.geoProjection(Hu).scale(127.16)}function hc(Ne,$e,rt,lt,bt){function mt(At,lr){var pr=rt*g(lt*lr),or=R(1-pr*pr),mr=R(2/(1+or*i(At*=bt)));return[Ne*or*mr*g(At),$e*pr*mr]}return mt.invert=function(At,lr){var pr=At/Ne,or=lr/$e,mr=R(pr*pr+or*or),Pr=2*z(mr/2);return[a(At*_(Pr),Ne*mr)/bt,mr&&z(lr*g(Pr)/($e*rt*mr))/lt]},mt}function Vf(Ne,$e,rt,lt){var bt=c/3;Ne=u(Ne,p),$e=u($e,p),Ne=l(Ne,S),$e=l($e,c-p),rt=u(rt,0),rt=l(rt,100-p),lt=u(lt,p);var mt=rt/100+1,At=lt/100,lr=O(mt*i(bt))/bt,pr=g(Ne)/g(lr*S),or=$e/c,mr=R(At*g(Ne/2)/g($e/2)),Pr=mr/R(or*pr*lr),Yr=1/(mr*R(or*pr*lr));return hc(Pr,Yr,pr,lr,or)}function vc(){var Ne=65*E,$e=60*E,rt=20,lt=200,bt=o.geoProjectionMutator(Vf),mt=bt(Ne,$e,rt,lt);return mt.poleline=function(At){return arguments.length?bt(Ne=+At*E,$e,rt,lt):Ne*M},mt.parallels=function(At){return arguments.length?bt(Ne,$e=+At*E,rt,lt):$e*M},mt.inflation=function(At){return arguments.length?bt(Ne,$e,rt=+At,lt):rt},mt.ratio=function(At){return arguments.length?bt(Ne,$e,rt,lt=+At):lt},mt.scale(163.775)}function ul(){return vc().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Hc=4*c+3*R(3),pc=2*R(2*c*R(3)/Hc),dc=Ae(pc*R(3)/c,pc,Hc/6);function fs(){return o.geoProjection(dc).scale(176.84)}function gc(Ne,$e){return[Ne*R(1-3*$e*$e/(c*c)),$e]}gc.invert=function(Ne,$e){return[Ne/R(1-3*$e*$e/(c*c)),$e]};function lh(){return o.geoProjection(gc).scale(152.63)}function Ks(Ne,$e){var rt=i($e),lt=i(Ne)*rt,bt=1-lt,mt=i(Ne=a(g(Ne)*rt,-g($e))),At=g(Ne);return rt=R(1-lt*lt),[At*rt-mt*bt,-mt*rt-At*bt]}Ks.invert=function(Ne,$e){var rt=(Ne*Ne+$e*$e)/-2,lt=R(-rt*(2+rt)),bt=$e*rt+Ne*lt,mt=Ne*rt-$e*lt,At=R(mt*mt+bt*bt);return[a(lt*bt,At*(1+rt)),At?-z(lt*mt/At):0]};function Hf(){return o.geoProjection(Ks).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Gf(Ne,$e){var rt=Z(Ne,$e);return[(rt[0]+Ne/S)/2,(rt[1]+$e)/2]}Gf.invert=function(Ne,$e){var rt=Ne,lt=$e,bt=25;do{var mt=i(lt),At=g(lt),lr=g(2*lt),pr=At*At,or=mt*mt,mr=g(rt),Pr=i(rt/2),Yr=g(rt/2),tn=Yr*Yr,An=1-or*Pr*Pr,zn=An?O(mt*Pr)*R(Xn=1/An):Xn=0,Xn,xa=.5*(2*zn*mt*Yr+rt/S)-Ne,Ta=.5*(zn*At+lt)-$e,qa=.5*Xn*(or*tn+zn*mt*Pr*pr)+.5/S,Ka=Xn*(mr*lr/4-zn*At*Yr),oi=.125*Xn*(lr*Yr-zn*At*or*mr),xi=.5*Xn*(pr*Pr+zn*tn*mt)+.5,So=Ka*oi-xi*qa,li=(Ta*Ka-xa*xi)/So,ao=(xa*oi-Ta*qa)/So;rt-=li,lt-=ao}while((y(li)>p||y(ao)>p)&&--bt>0);return[rt,lt]};function yc(){return o.geoProjection(Gf).scale(158.837)}s.geoNaturalEarth=o.geoNaturalEarth1,s.geoNaturalEarthRaw=o.geoNaturalEarth1Raw,s.geoAiry=Q,s.geoAiryRaw=re,s.geoAitoff=K,s.geoAitoffRaw=Z,s.geoArmadillo=fe,s.geoArmadilloRaw=le,s.geoAugust=V,s.geoAugustRaw=ue,s.geoBaker=X,s.geoBakerRaw=q,s.geoBerghaus=ie,s.geoBerghausRaw=J,s.geoBertin1953=xe,s.geoBertin1953Raw=pe,s.geoBoggs=Ve,s.geoBoggsRaw=Re,s.geoBonne=dt,s.geoBonneRaw=je,s.geoBottomley=$t,s.geoBottomleyRaw=Et,s.geoBromley=Ot,s.geoBromleyRaw=wt,s.geoChamberlin=Pe,s.geoChamberlinRaw=ot,s.geoChamberlinAfrica=Ke,s.geoCollignon=Qe,s.geoCollignonRaw=We,s.geoCraig=It,s.geoCraigRaw=ut,s.geoCraster=rr,s.geoCrasterRaw=Bt,s.geoCylindricalEqualArea=Qt,s.geoCylindricalEqualAreaRaw=Ut,s.geoCylindricalStereographic=nr,s.geoCylindricalStereographicRaw=ar,s.geoEckert1=Kr,s.geoEckert1Raw=cr,s.geoEckert2=Qr,s.geoEckert2Raw=yn,s.geoEckert3=Gt,s.geoEckert3Raw=st,s.geoEckert4=Ht,s.geoEckert4Raw=Zt,s.geoEckert5=it,s.geoEckert5Raw=_r,s.geoEckert6=ke,s.geoEckert6Raw=Te,s.geoEisenlohr=qe,s.geoEisenlohrRaw=Ye,s.geoFahey=pt,s.geoFaheyRaw=et,s.geoFoucaut=Pt,s.geoFoucautRaw=_t,s.geoFoucautSinusoidal=zt,s.geoFoucautSinusoidalRaw=Xt,s.geoGilbert=Mr,s.geoGingery=hn,s.geoGingeryRaw=un,s.geoGinzburg4=Ur,s.geoGinzburg4Raw=wr,s.geoGinzburg5=Cr,s.geoGinzburg5Raw=Br,s.geoGinzburg6=Rt,s.geoGinzburg6Raw=nt,s.geoGinzburg8=hr,s.geoGinzburg8Raw=Jt,s.geoGinzburg9=Gr,s.geoGinzburg9Raw=Dr,s.geoGringorten=Nr,s.geoGringortenRaw=Ct,s.geoGuyou=Xa,s.geoGuyouRaw=oa,s.geoHammer=se,s.geoHammerRaw=ne,s.geoHammerRetroazimuthal=Ar,s.geoHammerRetroazimuthalRaw=za,s.geoHealpix=Va,s.geoHealpixRaw=Gn,s.geoHill=Nt,s.geoHillRaw=mi,s.geoHomolosine=En,s.geoHomolosineRaw=Dn,s.geoHufnagel=br,s.geoHufnagelRaw=dn,s.geoHyperelliptical=Hn,s.geoHyperellipticalRaw=bn,s.geoInterrupt=sa,s.geoInterruptedBoggs=wa,s.geoInterruptedHomolosine=ka,s.geoInterruptedMollweide=ls,s.geoInterruptedMollweideHemispheres=Kl,s.geoInterruptedSinuMollweide=tf,s.geoInterruptedSinusoidal=Ol,s.geoKavrayskiy7=to,s.geoKavrayskiy7Raw=xl,s.geoLagrange=vu,s.geoLagrangeRaw=Xo,s.geoLarrivee=Jl,s.geoLarriveeRaw=$i,s.geoLaskowski=Ji,s.geoLaskowskiRaw=ho,s.geoLittrow=vo,s.geoLittrowRaw=Ao,s.geoLoximuthal=zl,s.geoLoximuthalRaw=Ps,s.geoMiller=As,s.geoMillerRaw=Cf,s.geoModifiedStereographic=al,s.geoModifiedStereographicRaw=Lf,s.geoModifiedStereographicAlaska=Ru,s.geoModifiedStereographicGs48=sc,s.geoModifiedStereographicGs50=lc,s.geoModifiedStereographicMiller=Nl,s.geoModifiedStereographicLee=Du,s.geoMollweide=Ee,s.geoMollweideRaw=Ce,s.geoMtFlatPolarParabolic=Pf,s.geoMtFlatPolarParabolicRaw=nf,s.geoMtFlatPolarQuartic=uc,s.geoMtFlatPolarQuarticRaw=Fu,s.geoMtFlatPolarSinusoidal=af,s.geoMtFlatPolarSinusoidalRaw=Bl,s.geoNaturalEarth2=Ws,s.geoNaturalEarth2Raw=Ou,s.geoNellHammer=of,s.geoNellHammerRaw=pu,s.geoInterruptedQuarticAuthalic=Rf,s.geoNicolosi=fc,s.geoNicolosiRaw=zu,s.geoPatterson=Eo,s.geoPattersonRaw=ol,s.geoPolyconic=gu,s.geoPolyconicRaw=du,s.geoPolyhedral=Vl,s.geoPolyhedralButterfly=bu,s.geoPolyhedralCollignon=Vc,s.geoPolyhedralWaterman=Wi,s.geoProject=Ds,s.geoGringortenQuincuncial=yt,s.geoPeirceQuincuncial=Ft,s.geoPierceQuincuncial=Ft,s.geoQuantize=fr,s.geoQuincuncial=Bf,s.geoRectangularPolyconic=Ir,s.geoRectangularPolyconicRaw=ir,s.geoRobinson=Ln,s.geoRobinsonRaw=xn,s.geoSatellite=_n,s.geoSatelliteRaw=jn,s.geoSinuMollweide=gn,s.geoSinuMollweideRaw=mn,s.geoSinusoidal=De,s.geoSinusoidalRaw=ze,s.geoStitch=ri,s.geoTimes=Li,s.geoTimesRaw=ga,s.geoTwoPointAzimuthal=ll,s.geoTwoPointAzimuthalRaw=Fo,s.geoTwoPointAzimuthalUsa=zs,s.geoTwoPointEquidistant=Zs,s.geoTwoPointEquidistantRaw=us,s.geoTwoPointEquidistantUsa=jl,s.geoVanDerGrinten=Vo,s.geoVanDerGrintenRaw=Ns,s.geoVanDerGrinten2=uf,s.geoVanDerGrinten2Raw=Vu,s.geoVanDerGrinten3=Uf,s.geoVanDerGrinten3Raw=Bs,s.geoVanDerGrinten4=ev,s.geoVanDerGrinten4Raw=Hu,s.geoWagner=vc,s.geoWagner7=ul,s.geoWagnerRaw=Vf,s.geoWagner4=fs,s.geoWagner4Raw=dc,s.geoWagner6=lh,s.geoWagner6Raw=gc,s.geoWiechel=Hf,s.geoWiechelRaw=Ks,s.geoWinkel3=yc,s.geoWinkel3Raw=Gf,Object.defineProperty(s,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F,e("d3-array")):(s=s||self,o(s.d3=s.d3||{},s.d3))})(this,function(s,o){function h(){return new y}function y(){this.reset()}y.prototype={constructor:y,reset:function(){this.s=this.t=0},add:function(yt){a(t,yt,this.t),a(this,t.s,this.s),this.s?this.t+=t.t:this.s=t.t},valueOf:function(){return this.s}};var t=new y;function a(yt,Ft,fr){var ir=yt.s=Ft+fr,Ir=ir-Ft,an=ir-Ir;yt.t=Ft-an+(fr-Ir)}var i=1e-6,n=1e-12,r=Math.PI,f=r/2,u=r/4,l=r*2,m=180/r,d=r/180,b=Math.abs,g=Math.atan,_=Math.atan2,p=Math.cos,A=Math.ceil,c=Math.exp,S=Math.log,T=Math.pow,x=Math.sin,w=Math.sign||function(yt){return yt>0?1:yt<0?-1:0},v=Math.sqrt,C=Math.tan;function M(yt){return yt>1?0:yt<-1?r:Math.acos(yt)}function E(yt){return yt>1?f:yt<-1?-f:Math.asin(yt)}function L(yt){return(yt=x(yt/2))*yt}function z(){}function O(yt,Ft){yt&&D.hasOwnProperty(yt.type)&&D[yt.type](yt,Ft)}var R={Feature:function(yt,Ft){O(yt.geometry,Ft)},FeatureCollection:function(yt,Ft){for(var fr=yt.features,ir=-1,Ir=fr.length;++ir<Ir;)O(fr[ir].geometry,Ft)}},D={Sphere:function(yt,Ft){Ft.sphere()},Point:function(yt,Ft){yt=yt.coordinates,Ft.point(yt[0],yt[1],yt[2])},MultiPoint:function(yt,Ft){for(var fr=yt.coordinates,ir=-1,Ir=fr.length;++ir<Ir;)yt=fr[ir],Ft.point(yt[0],yt[1],yt[2])},LineString:function(yt,Ft){H(yt.coordinates,Ft,0)},MultiLineString:function(yt,Ft){for(var fr=yt.coordinates,ir=-1,Ir=fr.length;++ir<Ir;)H(fr[ir],Ft,0)},Polygon:function(yt,Ft){B(yt.coordinates,Ft)},MultiPolygon:function(yt,Ft){for(var fr=yt.coordinates,ir=-1,Ir=fr.length;++ir<Ir;)B(fr[ir],Ft)},GeometryCollection:function(yt,Ft){for(var fr=yt.geometries,ir=-1,Ir=fr.length;++ir<Ir;)O(fr[ir],Ft)}};function H(yt,Ft,fr){var ir=-1,Ir=yt.length-fr,an;for(Ft.lineStart();++ir<Ir;)an=yt[ir],Ft.point(an[0],an[1],an[2]);Ft.lineEnd()}function B(yt,Ft){var fr=-1,ir=yt.length;for(Ft.polygonStart();++fr<ir;)H(yt[fr],Ft,1);Ft.polygonEnd()}function $(yt,Ft){yt&&R.hasOwnProperty(yt.type)?R[yt.type](yt,Ft):O(yt,Ft)}var W=h(),re=h(),Q,Z,K,le,fe,ue={point:z,lineStart:z,lineEnd:z,polygonStart:function(){W.reset(),ue.lineStart=V,ue.lineEnd=j},polygonEnd:function(){var yt=+W;re.add(yt<0?l+yt:yt),this.lineStart=this.lineEnd=this.point=z},sphere:function(){re.add(l)}};function V(){ue.point=ee}function j(){q(Q,Z)}function ee(yt,Ft){ue.point=q,Q=yt,Z=Ft,yt*=d,Ft*=d,K=yt,le=p(Ft=Ft/2+u),fe=x(Ft)}function q(yt,Ft){yt*=d,Ft*=d,Ft=Ft/2+u;var fr=yt-K,ir=fr>=0?1:-1,Ir=ir*fr,an=p(Ft),xn=x(Ft),Ln=fe*xn,Fn=le*an+Ln*p(Ir),jn=Ln*ir*x(Ir);W.add(_(jn,Fn)),K=yt,le=an,fe=xn}function X(yt){return re.reset(),$(yt,ue),re*2}function J(yt){return[_(yt[1],yt[0]),E(yt[2])]}function ie(yt){var Ft=yt[0],fr=yt[1],ir=p(fr);return[ir*p(Ft),ir*x(Ft),x(fr)]}function ne(yt,Ft){return yt[0]*Ft[0]+yt[1]*Ft[1]+yt[2]*Ft[2]}function oe(yt,Ft){return[yt[1]*Ft[2]-yt[2]*Ft[1],yt[2]*Ft[0]-yt[0]*Ft[2],yt[0]*Ft[1]-yt[1]*Ft[0]]}function se(yt,Ft){yt[0]+=Ft[0],yt[1]+=Ft[1],yt[2]+=Ft[2]}function me(yt,Ft){return[yt[0]*Ft,yt[1]*Ft,yt[2]*Ft]}function ce(yt){var Ft=v(yt[0]*yt[0]+yt[1]*yt[1]+yt[2]*yt[2]);yt[0]/=Ft,yt[1]/=Ft,yt[2]/=Ft}var pe,xe,Se,Ae,Ce,Ee,Oe,_e,Re=h(),Ve,Je,ze={point:De,lineStart:dt,lineEnd:Et,polygonStart:function(){ze.point=$t,ze.lineStart=wt,ze.lineEnd=Ot,Re.reset(),ue.polygonStart()},polygonEnd:function(){ue.polygonEnd(),ze.point=De,ze.lineStart=dt,ze.lineEnd=Et,W<0?(pe=-(Se=180),xe=-(Ae=90)):Re>i?Ae=90:Re<-i&&(xe=-90),Je[0]=pe,Je[1]=Se},sphere:function(){pe=-(Se=180),xe=-(Ae=90)}};function De(yt,Ft){Ve.push(Je=[pe=yt,Se=yt]),Ft<xe&&(xe=Ft),Ft>Ae&&(Ae=Ft)}function je(yt,Ft){var fr=ie([yt*d,Ft*d]);if(_e){var ir=oe(_e,fr),Ir=[ir[1],-ir[0],0],an=oe(Ir,ir);ce(an),an=J(an);var xn=yt-Ce,Ln=xn>0?1:-1,Fn=an[0]*m*Ln,jn,_n=b(xn)>180;_n^(Ln*Ce<Fn&&Fn<Ln*yt)?(jn=an[1]*m,jn>Ae&&(Ae=jn)):(Fn=(Fn+360)%360-180,_n^(Ln*Ce<Fn&&Fn<Ln*yt)?(jn=-an[1]*m,jn<xe&&(xe=jn)):(Ft<xe&&(xe=Ft),Ft>Ae&&(Ae=Ft))),_n?yt<Ce?Vt(pe,yt)>Vt(pe,Se)&&(Se=yt):Vt(yt,Se)>Vt(pe,Se)&&(pe=yt):Se>=pe?(yt<pe&&(pe=yt),yt>Se&&(Se=yt)):yt>Ce?Vt(pe,yt)>Vt(pe,Se)&&(Se=yt):Vt(yt,Se)>Vt(pe,Se)&&(pe=yt)}else Ve.push(Je=[pe=yt,Se=yt]);Ft<xe&&(xe=Ft),Ft>Ae&&(Ae=Ft),_e=fr,Ce=yt}function dt(){ze.point=je}function Et(){Je[0]=pe,Je[1]=Se,ze.point=De,_e=null}function $t(yt,Ft){if(_e){var fr=yt-Ce;Re.add(b(fr)>180?fr+(fr>0?360:-360):fr)}else Ee=yt,Oe=Ft;ue.point(yt,Ft),je(yt,Ft)}function wt(){ue.lineStart()}function Ot(){$t(Ee,Oe),ue.lineEnd(),b(Re)>i&&(pe=-(Se=180)),Je[0]=pe,Je[1]=Se,_e=null}function Vt(yt,Ft){return(Ft-=yt)<0?Ft+360:Ft}function kt(yt,Ft){return yt[0]-Ft[0]}function St(yt,Ft){return yt[0]<=yt[1]?yt[0]<=Ft&&Ft<=yt[1]:Ft<yt[0]||yt[1]<Ft}function ot(yt){var Ft,fr,ir,Ir,an,xn,Ln;if(Ae=Se=-(pe=xe=1/0),Ve=[],$(yt,ze),fr=Ve.length){for(Ve.sort(kt),Ft=1,ir=Ve[0],an=[ir];Ft<fr;++Ft)Ir=Ve[Ft],St(ir,Ir[0])||St(ir,Ir[1])?(Vt(ir[0],Ir[1])>Vt(ir[0],ir[1])&&(ir[1]=Ir[1]),Vt(Ir[0],ir[1])>Vt(ir[0],ir[1])&&(ir[0]=Ir[0])):an.push(ir=Ir);for(xn=-1/0,fr=an.length-1,Ft=0,ir=an[fr];Ft<=fr;ir=Ir,++Ft)Ir=an[Ft],(Ln=Vt(ir[1],Ir[0]))>xn&&(xn=Ln,pe=Ir[0],Se=ir[1])}return Ve=Je=null,pe===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[pe,xe],[Se,Ae]]}var ht,Ke,Pe,We,Qe,ut,It,Tt,Bt,rr,Ut,Qt,ar,nr,cr,Kr,yn={sphere:z,point:Qr,lineStart:Gt,lineEnd:_r,polygonStart:function(){yn.lineStart=it,yn.lineEnd=Te},polygonEnd:function(){yn.lineStart=Gt,yn.lineEnd=_r}};function Qr(yt,Ft){yt*=d,Ft*=d;var fr=p(Ft);st(fr*p(yt),fr*x(yt),x(Ft))}function st(yt,Ft,fr){++ht,Pe+=(yt-Pe)/ht,We+=(Ft-We)/ht,Qe+=(fr-Qe)/ht}function Gt(){yn.point=Zt}function Zt(yt,Ft){yt*=d,Ft*=d;var fr=p(Ft);nr=fr*p(yt),cr=fr*x(yt),Kr=x(Ft),yn.point=Ht,st(nr,cr,Kr)}function Ht(yt,Ft){yt*=d,Ft*=d;var fr=p(Ft),ir=fr*p(yt),Ir=fr*x(yt),an=x(Ft),xn=_(v((xn=cr*an-Kr*Ir)*xn+(xn=Kr*ir-nr*an)*xn+(xn=nr*Ir-cr*ir)*xn),nr*ir+cr*Ir+Kr*an);Ke+=xn,ut+=xn*(nr+(nr=ir)),It+=xn*(cr+(cr=Ir)),Tt+=xn*(Kr+(Kr=an)),st(nr,cr,Kr)}function _r(){yn.point=Qr}function it(){yn.point=ke}function Te(){Ge(Qt,ar),yn.point=Qr}function ke(yt,Ft){Qt=yt,ar=Ft,yt*=d,Ft*=d,yn.point=Ge;var fr=p(Ft);nr=fr*p(yt),cr=fr*x(yt),Kr=x(Ft),st(nr,cr,Kr)}function Ge(yt,Ft){yt*=d,Ft*=d;var fr=p(Ft),ir=fr*p(yt),Ir=fr*x(yt),an=x(Ft),xn=cr*an-Kr*Ir,Ln=Kr*ir-nr*an,Fn=nr*Ir-cr*ir,jn=v(xn*xn+Ln*Ln+Fn*Fn),_n=E(jn),Un=jn&&-_n/jn;Bt+=Un*xn,rr+=Un*Ln,Ut+=Un*Fn,Ke+=_n,ut+=_n*(nr+(nr=ir)),It+=_n*(cr+(cr=Ir)),Tt+=_n*(Kr+(Kr=an)),st(nr,cr,Kr)}function Ye(yt){ht=Ke=Pe=We=Qe=ut=It=Tt=Bt=rr=Ut=0,$(yt,yn);var Ft=Bt,fr=rr,ir=Ut,Ir=Ft*Ft+fr*fr+ir*ir;return Ir<n&&(Ft=ut,fr=It,ir=Tt,Ke<i&&(Ft=Pe,fr=We,ir=Qe),Ir=Ft*Ft+fr*fr+ir*ir,Ir<n)?[NaN,NaN]:[_(fr,Ft)*m,E(ir/v(Ir))*m]}function qe(yt){return function(){return yt}}function at(yt,Ft){function fr(ir,Ir){return ir=yt(ir,Ir),Ft(ir[0],ir[1])}return yt.invert&&Ft.invert&&(fr.invert=function(ir,Ir){return ir=Ft.invert(ir,Ir),ir&&yt.invert(ir[0],ir[1])}),fr}function et(yt,Ft){return[b(yt)>r?yt+Math.round(-yt/l)*l:yt,Ft]}et.invert=et;function pt(yt,Ft,fr){return(yt%=l)?Ft||fr?at(Pt(yt),Xt(Ft,fr)):Pt(yt):Ft||fr?Xt(Ft,fr):et}function _t(yt){return function(Ft,fr){return Ft+=yt,[Ft>r?Ft-l:Ft<-r?Ft+l:Ft,fr]}}function Pt(yt){var Ft=_t(yt);return Ft.invert=_t(-yt),Ft}function Xt(yt,Ft){var fr=p(yt),ir=x(yt),Ir=p(Ft),an=x(Ft);function xn(Ln,Fn){var jn=p(Fn),_n=p(Ln)*jn,Un=x(Ln)*jn,On=x(Fn),Wn=On*fr+_n*ir;return[_(Un*Ir-Wn*an,_n*fr-On*ir),E(Wn*Ir+Un*an)]}return xn.invert=function(Ln,Fn){var jn=p(Fn),_n=p(Ln)*jn,Un=x(Ln)*jn,On=x(Fn),Wn=On*Ir-Un*an;return[_(Un*Ir+On*an,_n*fr+Wn*ir),E(Wn*fr-_n*ir)]},xn}function zt(yt){yt=pt(yt[0]*d,yt[1]*d,yt.length>2?yt[2]*d:0);function Ft(fr){return fr=yt(fr[0]*d,fr[1]*d),fr[0]*=m,fr[1]*=m,fr}return Ft.invert=function(fr){return fr=yt.invert(fr[0]*d,fr[1]*d),fr[0]*=m,fr[1]*=m,fr},Ft}function ur(yt,Ft,fr,ir,Ir,an){if(!!fr){var xn=p(Ft),Ln=x(Ft),Fn=ir*fr;Ir==null?(Ir=Ft+ir*l,an=Ft-Fn/2):(Ir=gr(xn,Ir),an=gr(xn,an),(ir>0?Ir<an:Ir>an)&&(Ir+=ir*l));for(var jn,_n=Ir;ir>0?_n>an:_n<an;_n-=Fn)jn=J([xn,-Ln*p(_n),-Ln*x(_n)]),yt.point(jn[0],jn[1])}}function gr(yt,Ft){Ft=ie(Ft),Ft[0]-=yt,ce(Ft);var fr=M(-Ft[1]);return((-Ft[2]<0?-fr:fr)+l-i)%l}function Mr(){var yt=qe([0,0]),Ft=qe(90),fr=qe(6),ir,Ir,an={point:xn};function xn(Fn,jn){ir.push(Fn=Ir(Fn,jn)),Fn[0]*=m,Fn[1]*=m}function Ln(){var Fn=yt.apply(this,arguments),jn=Ft.apply(this,arguments)*d,_n=fr.apply(this,arguments)*d;return ir=[],Ir=pt(-Fn[0]*d,-Fn[1]*d,0).invert,ur(an,jn,_n,1),Fn={type:"Polygon",coordinates:[ir]},ir=Ir=null,Fn}return Ln.center=function(Fn){return arguments.length?(yt=typeof Fn=="function"?Fn:qe([+Fn[0],+Fn[1]]),Ln):yt},Ln.radius=function(Fn){return arguments.length?(Ft=typeof Fn=="function"?Fn:qe(+Fn),Ln):Ft},Ln.precision=function(Fn){return arguments.length?(fr=typeof Fn=="function"?Fn:qe(+Fn),Ln):fr},Ln}function un(){var yt=[],Ft;return{point:function(fr,ir,Ir){Ft.push([fr,ir,Ir])},lineStart:function(){yt.push(Ft=[])},lineEnd:z,rejoin:function(){yt.length>1&&yt.push(yt.pop().concat(yt.shift()))},result:function(){var fr=yt;return yt=[],Ft=null,fr}}}function zr(yt,Ft){return b(yt[0]-Ft[0])<i&&b(yt[1]-Ft[1])<i}function $r(yt,Ft,fr,ir){this.x=yt,this.z=Ft,this.o=fr,this.e=ir,this.v=!1,this.n=this.p=null}function hn(yt,Ft,fr,ir,Ir){var an=[],xn=[],Ln,Fn;if(yt.forEach(function(ea){if(!((Ha=ea.length-1)<=0)){var Ha,Ia=ea[0],Ga=ea[Ha],ja;if(zr(Ia,Ga)){if(!Ia[2]&&!Ga[2]){for(Ir.lineStart(),Ln=0;Ln<Ha;++Ln)Ir.point((Ia=ea[Ln])[0],Ia[1]);Ir.lineEnd();return}Ga[0]+=2*i}an.push(ja=new $r(Ia,ea,null,!0)),xn.push(ja.o=new $r(Ia,null,ja,!1)),an.push(ja=new $r(Ga,ea,null,!1)),xn.push(ja.o=new $r(Ga,null,ja,!0))}}),!!an.length){for(xn.sort(Ft),Tr(an),Tr(xn),Ln=0,Fn=xn.length;Ln<Fn;++Ln)xn[Ln].e=fr=!fr;for(var jn=an[0],_n,Un;;){for(var On=jn,Wn=!0;On.v;)if((On=On.n)===jn)return;_n=On.z,Ir.lineStart();do{if(On.v=On.o.v=!0,On.e){if(Wn)for(Ln=0,Fn=_n.length;Ln<Fn;++Ln)Ir.point((Un=_n[Ln])[0],Un[1]);else ir(On.x,On.n.x,1,Ir);On=On.n}else{if(Wn)for(_n=On.p.z,Ln=_n.length-1;Ln>=0;--Ln)Ir.point((Un=_n[Ln])[0],Un[1]);else ir(On.x,On.p.x,-1,Ir);On=On.p}On=On.o,_n=On.z,Wn=!Wn}while(!On.v);Ir.lineEnd()}}}function Tr(yt){if(!!(Ft=yt.length)){for(var Ft,fr=0,ir=yt[0],Ir;++fr<Ft;)ir.n=Ir=yt[fr],Ir.p=ir,ir=Ir;ir.n=Ir=yt[0],Ir.p=ir}}var wr=h();function Ur(yt){return b(yt[0])<=r?yt[0]:w(yt[0])*((b(yt[0])+r)%l-r)}function Br(yt,Ft){var fr=Ur(Ft),ir=Ft[1],Ir=x(ir),an=[x(fr),-p(fr),0],xn=0,Ln=0;wr.reset(),Ir===1?ir=f+i:Ir===-1&&(ir=-f-i);for(var Fn=0,jn=yt.length;Fn<jn;++Fn)if(!!(Un=(_n=yt[Fn]).length))for(var _n,Un,On=_n[Un-1],Wn=Ur(On),ea=On[1]/2+u,Ha=x(ea),Ia=p(ea),Ga=0;Ga<Un;++Ga,Wn=Qn,Ha=Za,Ia=ni,On=ja){var ja=_n[Ga],Qn=Ur(ja),da=ja[1]/2+u,Za=x(da),ni=p(da),Mi=Qn-Wn,Ei=Mi>=0?1:-1,Ci=Ei*Mi,Oi=Ci>r,vi=Ha*Za;if(wr.add(_(vi*Ei*x(Ci),Ia*ni+vi*p(Ci))),xn+=Oi?Mi+Ei*l:Mi,Oi^Wn>=fr^Qn>=fr){var Uo=oe(ie(On),ie(ja));ce(Uo);var xo=oe(an,Uo);ce(xo);var ri=(Oi^Mi>=0?-1:1)*E(xo[2]);(ir>ri||ir===ri&&(Uo[0]||Uo[1]))&&(Ln+=Oi^Mi>=0?1:-1)}}return(xn<-i||xn<i&&wr<-i)^Ln&1}function Cr(yt,Ft,fr,ir){return function(Ir){var an=Ft(Ir),xn=un(),Ln=Ft(xn),Fn=!1,jn,_n,Un,On={point:Wn,lineStart:Ha,lineEnd:Ia,polygonStart:function(){On.point=Ga,On.lineStart=ja,On.lineEnd=Qn,_n=[],jn=[]},polygonEnd:function(){On.point=Wn,On.lineStart=Ha,On.lineEnd=Ia,_n=o.merge(_n);var da=Br(jn,ir);_n.length?(Fn||(Ir.polygonStart(),Fn=!0),hn(_n,Rt,da,fr,Ir)):da&&(Fn||(Ir.polygonStart(),Fn=!0),Ir.lineStart(),fr(null,null,1,Ir),Ir.lineEnd()),Fn&&(Ir.polygonEnd(),Fn=!1),_n=jn=null},sphere:function(){Ir.polygonStart(),Ir.lineStart(),fr(null,null,1,Ir),Ir.lineEnd(),Ir.polygonEnd()}};function Wn(da,Za){yt(da,Za)&&Ir.point(da,Za)}function ea(da,Za){an.point(da,Za)}function Ha(){On.point=ea,an.lineStart()}function Ia(){On.point=Wn,an.lineEnd()}function Ga(da,Za){Un.push([da,Za]),Ln.point(da,Za)}function ja(){Ln.lineStart(),Un=[]}function Qn(){Ga(Un[0][0],Un[0][1]),Ln.lineEnd();var da=Ln.clean(),Za=xn.result(),ni,Mi=Za.length,Ei,Ci,Oi;if(Un.pop(),jn.push(Un),Un=null,!!Mi){if(da&1){if(Ci=Za[0],(Ei=Ci.length-1)>0){for(Fn||(Ir.polygonStart(),Fn=!0),Ir.lineStart(),ni=0;ni<Ei;++ni)Ir.point((Oi=Ci[ni])[0],Oi[1]);Ir.lineEnd()}return}Mi>1&&da&2&&Za.push(Za.pop().concat(Za.shift())),_n.push(Za.filter(nt))}}return On}}function nt(yt){return yt.length>1}function Rt(yt,Ft){return((yt=yt.x)[0]<0?yt[1]-f-i:f-yt[1])-((Ft=Ft.x)[0]<0?Ft[1]-f-i:f-Ft[1])}var Jt=Cr(function(){return!0},hr,Gr,[-r,-f]);function hr(yt){var Ft=NaN,fr=NaN,ir=NaN,Ir;return{lineStart:function(){yt.lineStart(),Ir=1},point:function(an,xn){var Ln=an>0?r:-r,Fn=b(an-Ft);b(Fn-r)<i?(yt.point(Ft,fr=(fr+xn)/2>0?f:-f),yt.point(ir,fr),yt.lineEnd(),yt.lineStart(),yt.point(Ln,fr),yt.point(an,fr),Ir=0):ir!==Ln&&Fn>=r&&(b(Ft-ir)<i&&(Ft-=ir*i),b(an-Ln)<i&&(an-=Ln*i),fr=Dr(Ft,fr,an,xn),yt.point(ir,fr),yt.lineEnd(),yt.lineStart(),yt.point(Ln,fr),Ir=0),yt.point(Ft=an,fr=xn),ir=Ln},lineEnd:function(){yt.lineEnd(),Ft=fr=NaN},clean:function(){return 2-Ir}}}function Dr(yt,Ft,fr,ir){var Ir,an,xn=x(yt-fr);return b(xn)>i?g((x(Ft)*(an=p(ir))*x(fr)-x(ir)*(Ir=p(Ft))*x(yt))/(Ir*an*xn)):(Ft+ir)/2}function Gr(yt,Ft,fr,ir){var Ir;if(yt==null)Ir=fr*f,ir.point(-r,Ir),ir.point(0,Ir),ir.point(r,Ir),ir.point(r,0),ir.point(r,-Ir),ir.point(0,-Ir),ir.point(-r,-Ir),ir.point(-r,0),ir.point(-r,Ir);else if(b(yt[0]-Ft[0])>i){var an=yt[0]<Ft[0]?r:-r;Ir=fr*an/2,ir.point(-an,Ir),ir.point(0,Ir),ir.point(an,Ir)}else ir.point(Ft[0],Ft[1])}function Rr(yt){var Ft=p(yt),fr=6*d,ir=Ft>0,Ir=b(Ft)>i;function an(_n,Un,On,Wn){ur(Wn,yt,fr,On,_n,Un)}function xn(_n,Un){return p(_n)*p(Un)>Ft}function Ln(_n){var Un,On,Wn,ea,Ha;return{lineStart:function(){ea=Wn=!1,Ha=1},point:function(Ia,Ga){var ja=[Ia,Ga],Qn,da=xn(Ia,Ga),Za=ir?da?0:jn(Ia,Ga):da?jn(Ia+(Ia<0?r:-r),Ga):0;if(!Un&&(ea=Wn=da)&&_n.lineStart(),da!==Wn&&(Qn=Fn(Un,ja),(!Qn||zr(Un,Qn)||zr(ja,Qn))&&(ja[2]=1)),da!==Wn)Ha=0,da?(_n.lineStart(),Qn=Fn(ja,Un),_n.point(Qn[0],Qn[1])):(Qn=Fn(Un,ja),_n.point(Qn[0],Qn[1],2),_n.lineEnd()),Un=Qn;else if(Ir&&Un&&ir^da){var ni;!(Za&On)&&(ni=Fn(ja,Un,!0))&&(Ha=0,ir?(_n.lineStart(),_n.point(ni[0][0],ni[0][1]),_n.point(ni[1][0],ni[1][1]),_n.lineEnd()):(_n.point(ni[1][0],ni[1][1]),_n.lineEnd(),_n.lineStart(),_n.point(ni[0][0],ni[0][1],3)))}da&&(!Un||!zr(Un,ja))&&_n.point(ja[0],ja[1]),Un=ja,Wn=da,On=Za},lineEnd:function(){Wn&&_n.lineEnd(),Un=null},clean:function(){return Ha|(ea&&Wn)<<1}}}function Fn(_n,Un,On){var Wn=ie(_n),ea=ie(Un),Ha=[1,0,0],Ia=oe(Wn,ea),Ga=ne(Ia,Ia),ja=Ia[0],Qn=Ga-ja*ja;if(!Qn)return!On&&_n;var da=Ft*Ga/Qn,Za=-Ft*ja/Qn,ni=oe(Ha,Ia),Mi=me(Ha,da),Ei=me(Ia,Za);se(Mi,Ei);var Ci=ni,Oi=ne(Mi,Ci),vi=ne(Ci,Ci),Uo=Oi*Oi-vi*(ne(Mi,Mi)-1);if(!(Uo<0)){var xo=v(Uo),ri=me(Ci,(-Oi-xo)/vi);if(se(ri,Mi),ri=J(ri),!On)return ri;var ga=_n[0],Li=Un[0],Co=_n[1],Fo=Un[1],zs;Li<ga&&(zs=ga,ga=Li,Li=zs);var ll=Li-ga,us=b(ll-r)<i,jl=us||ll<i;if(!us&&Fo<Co&&(zs=Co,Co=Fo,Fo=zs),jl?us?Co+Fo>0^ri[1]<(b(ri[0]-ga)<i?Co:Fo):Co<=ri[1]&&ri[1]<=Fo:ll>r^(ga<=ri[0]&&ri[0]<=Li)){var Zs=me(Ci,(-Oi+xo)/vi);return se(Zs,Mi),[ri,J(Zs)]}}}function jn(_n,Un){var On=ir?yt:r-yt,Wn=0;return _n<-On?Wn|=1:_n>On&&(Wn|=2),Un<-On?Wn|=4:Un>On&&(Wn|=8),Wn}return Cr(xn,Ln,an,ir?[0,-yt]:[-r,yt-r])}function Ct(yt,Ft,fr,ir,Ir,an){var xn=yt[0],Ln=yt[1],Fn=Ft[0],jn=Ft[1],_n=0,Un=1,On=Fn-xn,Wn=jn-Ln,ea;if(ea=fr-xn,!(!On&&ea>0)){if(ea/=On,On<0){if(ea<_n)return;ea<Un&&(Un=ea)}else if(On>0){if(ea>Un)return;ea>_n&&(_n=ea)}if(ea=Ir-xn,!(!On&&ea<0)){if(ea/=On,On<0){if(ea>Un)return;ea>_n&&(_n=ea)}else if(On>0){if(ea<_n)return;ea<Un&&(Un=ea)}if(ea=ir-Ln,!(!Wn&&ea>0)){if(ea/=Wn,Wn<0){if(ea<_n)return;ea<Un&&(Un=ea)}else if(Wn>0){if(ea>Un)return;ea>_n&&(_n=ea)}if(ea=an-Ln,!(!Wn&&ea<0)){if(ea/=Wn,Wn<0){if(ea>Un)return;ea>_n&&(_n=ea)}else if(Wn>0){if(ea<_n)return;ea<Un&&(Un=ea)}return _n>0&&(yt[0]=xn+_n*On,yt[1]=Ln+_n*Wn),Un<1&&(Ft[0]=xn+Un*On,Ft[1]=Ln+Un*Wn),!0}}}}}var tr=1e9,Lr=-tr;function Nr(yt,Ft,fr,ir){function Ir(jn,_n){return yt<=jn&&jn<=fr&&Ft<=_n&&_n<=ir}function an(jn,_n,Un,On){var Wn=0,ea=0;if(jn==null||(Wn=xn(jn,Un))!==(ea=xn(_n,Un))||Fn(jn,_n)<0^Un>0)do On.point(Wn===0||Wn===3?yt:fr,Wn>1?ir:Ft);while((Wn=(Wn+Un+4)%4)!==ea);else On.point(_n[0],_n[1])}function xn(jn,_n){return b(jn[0]-yt)<i?_n>0?0:3:b(jn[0]-fr)<i?_n>0?2:1:b(jn[1]-Ft)<i?_n>0?1:0:_n>0?3:2}function Ln(jn,_n){return Fn(jn.x,_n.x)}function Fn(jn,_n){var Un=xn(jn,1),On=xn(_n,1);return Un!==On?Un-On:Un===0?_n[1]-jn[1]:Un===1?jn[0]-_n[0]:Un===2?jn[1]-_n[1]:_n[0]-jn[0]}return function(jn){var _n=jn,Un=un(),On,Wn,ea,Ha,Ia,Ga,ja,Qn,da,Za,ni,Mi={point:Ei,lineStart:Uo,lineEnd:xo,polygonStart:Oi,polygonEnd:vi};function Ei(ga,Li){Ir(ga,Li)&&_n.point(ga,Li)}function Ci(){for(var ga=0,Li=0,Co=Wn.length;Li<Co;++Li)for(var Fo=Wn[Li],zs=1,ll=Fo.length,us=Fo[0],jl,Zs,Ns=us[0],Vo=us[1];zs<ll;++zs)jl=Ns,Zs=Vo,us=Fo[zs],Ns=us[0],Vo=us[1],Zs<=ir?Vo>ir&&(Ns-jl)*(ir-Zs)>(Vo-Zs)*(yt-jl)&&++ga:Vo<=ir&&(Ns-jl)*(ir-Zs)<(Vo-Zs)*(yt-jl)&&--ga;return ga}function Oi(){_n=Un,On=[],Wn=[],ni=!0}function vi(){var ga=Ci(),Li=ni&&ga,Co=(On=o.merge(On)).length;(Li||Co)&&(jn.polygonStart(),Li&&(jn.lineStart(),an(null,null,1,jn),jn.lineEnd()),Co&&hn(On,Ln,ga,an,jn),jn.polygonEnd()),_n=jn,On=Wn=ea=null}function Uo(){Mi.point=ri,Wn&&Wn.push(ea=[]),Za=!0,da=!1,ja=Qn=NaN}function xo(){On&&(ri(Ha,Ia),Ga&&da&&Un.rejoin(),On.push(Un.result())),Mi.point=Ei,da&&_n.lineEnd()}function ri(ga,Li){var Co=Ir(ga,Li);if(Wn&&ea.push([ga,Li]),Za)Ha=ga,Ia=Li,Ga=Co,Za=!1,Co&&(_n.lineStart(),_n.point(ga,Li));else if(Co&&da)_n.point(ga,Li);else{var Fo=[ja=Math.max(Lr,Math.min(tr,ja)),Qn=Math.max(Lr,Math.min(tr,Qn))],zs=[ga=Math.max(Lr,Math.min(tr,ga)),Li=Math.max(Lr,Math.min(tr,Li))];Ct(Fo,zs,yt,Ft,fr,ir)?(da||(_n.lineStart(),_n.point(Fo[0],Fo[1])),_n.point(zs[0],zs[1]),Co||_n.lineEnd(),ni=!1):Co&&(_n.lineStart(),_n.point(ga,Li),ni=!1)}ja=ga,Qn=Li,da=Co}return Mi}}function Tn(){var yt=0,Ft=0,fr=960,ir=500,Ir,an,xn;return xn={stream:function(Ln){return Ir&&an===Ln?Ir:Ir=Nr(yt,Ft,fr,ir)(an=Ln)},extent:function(Ln){return arguments.length?(yt=+Ln[0][0],Ft=+Ln[0][1],fr=+Ln[1][0],ir=+Ln[1][1],Ir=an=null,xn):[[yt,Ft],[fr,ir]]}}}var rn=h(),kn,Cn,oa,ya={sphere:z,point:z,lineStart:Oa,lineEnd:z,polygonStart:z,polygonEnd:z};function Oa(){ya.point=za,ya.lineEnd=Xa}function Xa(){ya.point=ya.lineEnd=z}function za(yt,Ft){yt*=d,Ft*=d,kn=yt,Cn=x(Ft),oa=p(Ft),ya.point=Pa}function Pa(yt,Ft){yt*=d,Ft*=d;var fr=x(Ft),ir=p(Ft),Ir=b(yt-kn),an=p(Ir),xn=x(Ir),Ln=ir*xn,Fn=oa*fr-Cn*ir*an,jn=Cn*fr+oa*ir*an;rn.add(_(v(Ln*Ln+Fn*Fn),jn)),kn=yt,Cn=fr,oa=ir}function Ar(yt){return rn.reset(),$(yt,ya),+rn}var nn=[null,null],vn={type:"LineString",coordinates:nn};function Mn(yt,Ft){return nn[0]=yt,nn[1]=Ft,Ar(vn)}var Gn={Feature:function(yt,Ft){return na(yt.geometry,Ft)},FeatureCollection:function(yt,Ft){for(var fr=yt.features,ir=-1,Ir=fr.length;++ir<Ir;)if(na(fr[ir].geometry,Ft))return!0;return!1}},la={Sphere:function(){return!0},Point:function(yt,Ft){return Nn(yt.coordinates,Ft)},MultiPoint:function(yt,Ft){for(var fr=yt.coordinates,ir=-1,Ir=fr.length;++ir<Ir;)if(Nn(fr[ir],Ft))return!0;return!1},LineString:function(yt,Ft){return Kn(yt.coordinates,Ft)},MultiLineString:function(yt,Ft){for(var fr=yt.coordinates,ir=-1,Ir=fr.length;++ir<Ir;)if(Kn(fr[ir],Ft))return!0;return!1},Polygon:function(yt,Ft){return Va(yt.coordinates,Ft)},MultiPolygon:function(yt,Ft){for(var fr=yt.coordinates,ir=-1,Ir=fr.length;++ir<Ir;)if(Va(fr[ir],Ft))return!0;return!1},GeometryCollection:function(yt,Ft){for(var fr=yt.geometries,ir=-1,Ir=fr.length;++ir<Ir;)if(na(fr[ir],Ft))return!0;return!1}};function na(yt,Ft){return yt&&la.hasOwnProperty(yt.type)?la[yt.type](yt,Ft):!1}function Nn(yt,Ft){return Mn(yt,Ft)===0}function Kn(yt,Ft){for(var fr,ir,Ir,an=0,xn=yt.length;an<xn;an++){if(ir=Mn(yt[an],Ft),ir===0||an>0&&(Ir=Mn(yt[an],yt[an-1]),Ir>0&&fr<=Ir&&ir<=Ir&&(fr+ir-Ir)*(1-Math.pow((fr-ir)/Ir,2))<n*Ir))return!0;fr=ir}return!1}function Va(yt,Ft){return!!Br(yt.map(mi),Nt(Ft))}function mi(yt){return yt=yt.map(Nt),yt.pop(),yt}function Nt(yt){return[yt[0]*d,yt[1]*d]}function yr(yt,Ft){return(yt&&Gn.hasOwnProperty(yt.type)?Gn[yt.type]:na)(yt,Ft)}function fn(yt,Ft,fr){var ir=o.range(yt,Ft-i,fr).concat(Ft);return function(Ir){return ir.map(function(an){return[Ir,an]})}}function mn(yt,Ft,fr){var ir=o.range(yt,Ft-i,fr).concat(Ft);return function(Ir){return ir.map(function(an){return[an,Ir]})}}function gn(){var yt,Ft,fr,ir,Ir,an,xn,Ln,Fn=10,jn=Fn,_n=90,Un=360,On,Wn,ea,Ha,Ia=2.5;function Ga(){return{type:"MultiLineString",coordinates:ja()}}function ja(){return o.range(A(ir/_n)*_n,fr,_n).map(ea).concat(o.range(A(Ln/Un)*Un,xn,Un).map(Ha)).concat(o.range(A(Ft/Fn)*Fn,yt,Fn).filter(function(Qn){return b(Qn%_n)>i}).map(On)).concat(o.range(A(an/jn)*jn,Ir,jn).filter(function(Qn){return b(Qn%Un)>i}).map(Wn))}return Ga.lines=function(){return ja().map(function(Qn){return{type:"LineString",coordinates:Qn}})},Ga.outline=function(){return{type:"Polygon",coordinates:[ea(ir).concat(Ha(xn).slice(1),ea(fr).reverse().slice(1),Ha(Ln).reverse().slice(1))]}},Ga.extent=function(Qn){return arguments.length?Ga.extentMajor(Qn).extentMinor(Qn):Ga.extentMinor()},Ga.extentMajor=function(Qn){return arguments.length?(ir=+Qn[0][0],fr=+Qn[1][0],Ln=+Qn[0][1],xn=+Qn[1][1],ir>fr&&(Qn=ir,ir=fr,fr=Qn),Ln>xn&&(Qn=Ln,Ln=xn,xn=Qn),Ga.precision(Ia)):[[ir,Ln],[fr,xn]]},Ga.extentMinor=function(Qn){return arguments.length?(Ft=+Qn[0][0],yt=+Qn[1][0],an=+Qn[0][1],Ir=+Qn[1][1],Ft>yt&&(Qn=Ft,Ft=yt,yt=Qn),an>Ir&&(Qn=an,an=Ir,Ir=Qn),Ga.precision(Ia)):[[Ft,an],[yt,Ir]]},Ga.step=function(Qn){return arguments.length?Ga.stepMajor(Qn).stepMinor(Qn):Ga.stepMinor()},Ga.stepMajor=function(Qn){return arguments.length?(_n=+Qn[0],Un=+Qn[1],Ga):[_n,Un]},Ga.stepMinor=function(Qn){return arguments.length?(Fn=+Qn[0],jn=+Qn[1],Ga):[Fn,jn]},Ga.precision=function(Qn){return arguments.length?(Ia=+Qn,On=fn(an,Ir,90),Wn=mn(Ft,yt,Ia),ea=fn(Ln,xn,90),Ha=mn(ir,fr,Ia),Ga):Ia},Ga.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function Dn(){return gn()()}function En(yt,Ft){var fr=yt[0]*d,ir=yt[1]*d,Ir=Ft[0]*d,an=Ft[1]*d,xn=p(ir),Ln=x(ir),Fn=p(an),jn=x(an),_n=xn*p(fr),Un=xn*x(fr),On=Fn*p(Ir),Wn=Fn*x(Ir),ea=2*E(v(L(an-ir)+xn*Fn*L(Ir-fr))),Ha=x(ea),Ia=ea?function(Ga){var ja=x(Ga*=ea)/Ha,Qn=x(ea-Ga)/Ha,da=Qn*_n+ja*On,Za=Qn*Un+ja*Wn,ni=Qn*Ln+ja*jn;return[_(Za,da)*m,_(ni,v(da*da+Za*Za))*m]}:function(){return[fr*m,ir*m]};return Ia.distance=ea,Ia}function dn(yt){return yt}var br=h(),xr=h(),Fr,bn,Hn,ra,Sn={point:z,lineStart:z,lineEnd:z,polygonStart:function(){Sn.lineStart=Zn,Sn.lineEnd=wa},polygonEnd:function(){Sn.lineStart=Sn.lineEnd=Sn.point=z,br.add(b(xr)),xr.reset()},result:function(){var yt=br/2;return br.reset(),yt}};function Zn(){Sn.point=sa}function sa(yt,Ft){Sn.point=ma,Fr=Hn=yt,bn=ra=Ft}function ma(yt,Ft){xr.add(ra*yt-Hn*Ft),Hn=yt,ra=Ft}function wa(){ma(Fr,bn)}var ca=1/0,ka=ca,Do=-ca,ls=Do,Ts={point:Kl,lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z,result:function(){var yt=[[ca,ka],[Do,ls]];return Do=ls=-(ka=ca=1/0),yt}};function Kl(yt,Ft){yt<ca&&(ca=yt),yt>Do&&(Do=yt),Ft<ka&&(ka=Ft),Ft>ls&&(ls=Ft)}var hu=0,tf=0,Ai=0,Ol=0,xl=0,to=0,Xo=0,vu=0,$s=0,$i,Jl,ho,Ji,Ao={point:vo,lineStart:Ps,lineEnd:As,polygonStart:function(){Ao.lineStart=Lf,Ao.lineEnd=bl},polygonEnd:function(){Ao.point=vo,Ao.lineStart=Ps,Ao.lineEnd=As},result:function(){var yt=$s?[Xo/$s,vu/$s]:to?[Ol/to,xl/to]:Ai?[hu/Ai,tf/Ai]:[NaN,NaN];return hu=tf=Ai=Ol=xl=to=Xo=vu=$s=0,yt}};function vo(yt,Ft){hu+=yt,tf+=Ft,++Ai}function Ps(){Ao.point=zl}function zl(yt,Ft){Ao.point=Cf,vo(ho=yt,Ji=Ft)}function Cf(yt,Ft){var fr=yt-ho,ir=Ft-Ji,Ir=v(fr*fr+ir*ir);Ol+=Ir*(ho+yt)/2,xl+=Ir*(Ji+Ft)/2,to+=Ir,vo(ho=yt,Ji=Ft)}function As(){Ao.point=vo}function Lf(){Ao.point=Zo}function bl(){oc($i,Jl)}function Zo(yt,Ft){Ao.point=oc,vo($i=ho=yt,Jl=Ji=Ft)}function oc(yt,Ft){var fr=yt-ho,ir=Ft-Ji,Ir=v(fr*fr+ir*ir);Ol+=Ir*(ho+yt)/2,xl+=Ir*(Ji+Ft)/2,to+=Ir,Ir=Ji*yt-ho*Ft,Xo+=Ir*(ho+yt),vu+=Ir*(Ji+Ft),$s+=Ir*3,vo(ho=yt,Ji=Ft)}function _l(yt){this._context=yt}_l.prototype={_radius:4.5,pointRadius:function(yt){return this._radius=yt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(yt,Ft){switch(this._point){case 0:{this._context.moveTo(yt,Ft),this._point=1;break}case 1:{this._context.lineTo(yt,Ft);break}default:{this._context.moveTo(yt+this._radius,Ft),this._context.arc(yt,Ft,this._radius,0,l);break}}},result:z};var nl=h(),Ru,sc,lc,Nl,Du,al={point:z,lineStart:function(){al.point=rf},lineEnd:function(){Ru&&Ql(sc,lc),al.point=z},polygonStart:function(){Ru=!0},polygonEnd:function(){Ru=null},result:function(){var yt=+nl;return nl.reset(),yt}};function rf(yt,Ft){al.point=Ql,sc=Nl=yt,lc=Du=Ft}function Ql(yt,Ft){Nl-=yt,Du-=Ft,nl.add(v(Nl*Nl+Du*Du)),Nl=yt,Du=Ft}function nf(){this._string=[]}nf.prototype={_radius:4.5,_circle:Pf(4.5),pointRadius:function(yt){return(yt=+yt)!==this._radius&&(this._radius=yt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(yt,Ft){switch(this._point){case 0:{this._string.push("M",yt,",",Ft),this._point=1;break}case 1:{this._string.push("L",yt,",",Ft);break}default:{this._circle==null&&(this._circle=Pf(this._radius)),this._string.push("M",yt,",",Ft,this._circle);break}}},result:function(){if(this._string.length){var yt=this._string.join("");return this._string=[],yt}else return null}};function Pf(yt){return"m0,"+yt+"a"+yt+","+yt+" 0 1,1 0,"+-2*yt+"a"+yt+","+yt+" 0 1,1 0,"+2*yt+"z"}function Fu(yt,Ft){var fr=4.5,ir,Ir;function an(xn){return xn&&(typeof fr=="function"&&Ir.pointRadius(+fr.apply(this,arguments)),$(xn,ir(Ir))),Ir.result()}return an.area=function(xn){return $(xn,ir(Sn)),Sn.result()},an.measure=function(xn){return $(xn,ir(al)),al.result()},an.bounds=function(xn){return $(xn,ir(Ts)),Ts.result()},an.centroid=function(xn){return $(xn,ir(Ao)),Ao.result()},an.projection=function(xn){return arguments.length?(ir=xn==null?(yt=null,dn):(yt=xn).stream,an):yt},an.context=function(xn){return arguments.length?(Ir=xn==null?(Ft=null,new nf):new _l(Ft=xn),typeof fr!="function"&&Ir.pointRadius(fr),an):Ft},an.pointRadius=function(xn){return arguments.length?(fr=typeof xn=="function"?xn:(Ir.pointRadius(+xn),+xn),an):fr},an.projection(yt).context(Ft)}function uc(yt){return{stream:Bl(yt)}}function Bl(yt){return function(Ft){var fr=new af;for(var ir in yt)fr[ir]=yt[ir];return fr.stream=Ft,fr}}function af(){}af.prototype={constructor:af,point:function(yt,Ft){this.stream.point(yt,Ft)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ou(yt,Ft,fr){var ir=yt.clipExtent&&yt.clipExtent();return yt.scale(150).translate([0,0]),ir!=null&&yt.clipExtent(null),$(fr,yt.stream(Ts)),Ft(Ts.result()),ir!=null&&yt.clipExtent(ir),yt}function Ws(yt,Ft,fr){return Ou(yt,function(ir){var Ir=Ft[1][0]-Ft[0][0],an=Ft[1][1]-Ft[0][1],xn=Math.min(Ir/(ir[1][0]-ir[0][0]),an/(ir[1][1]-ir[0][1])),Ln=+Ft[0][0]+(Ir-xn*(ir[1][0]+ir[0][0]))/2,Fn=+Ft[0][1]+(an-xn*(ir[1][1]+ir[0][1]))/2;yt.scale(150*xn).translate([Ln,Fn])},fr)}function pu(yt,Ft,fr){return Ws(yt,[[0,0],Ft],fr)}function of(yt,Ft,fr){return Ou(yt,function(ir){var Ir=+Ft,an=Ir/(ir[1][0]-ir[0][0]),xn=(Ir-an*(ir[1][0]+ir[0][0]))/2,Ln=-an*ir[0][1];yt.scale(150*an).translate([xn,Ln])},fr)}function If(yt,Ft,fr){return Ou(yt,function(ir){var Ir=+Ft,an=Ir/(ir[1][1]-ir[0][1]),xn=-an*ir[0][0],Ln=(Ir-an*(ir[1][1]+ir[0][1]))/2;yt.scale(150*an).translate([xn,Ln])},fr)}var Rf=16,zu=p(30*d);function fc(yt,Ft){return+Ft?Ss(yt,Ft):Df(yt)}function Df(yt){return Bl({point:function(Ft,fr){Ft=yt(Ft,fr),this.stream.point(Ft[0],Ft[1])}})}function Ss(yt,Ft){function fr(ir,Ir,an,xn,Ln,Fn,jn,_n,Un,On,Wn,ea,Ha,Ia){var Ga=jn-ir,ja=_n-Ir,Qn=Ga*Ga+ja*ja;if(Qn>4*Ft&&Ha--){var da=xn+On,Za=Ln+Wn,ni=Fn+ea,Mi=v(da*da+Za*Za+ni*ni),Ei=E(ni/=Mi),Ci=b(b(ni)-1)<i||b(an-Un)<i?(an+Un)/2:_(Za,da),Oi=yt(Ci,Ei),vi=Oi[0],Uo=Oi[1],xo=vi-ir,ri=Uo-Ir,ga=ja*xo-Ga*ri;(ga*ga/Qn>Ft||b((Ga*xo+ja*ri)/Qn-.5)>.3||xn*On+Ln*Wn+Fn*ea<zu)&&(fr(ir,Ir,an,xn,Ln,Fn,vi,Uo,Ci,da/=Mi,Za/=Mi,ni,Ha,Ia),Ia.point(vi,Uo),fr(vi,Uo,Ci,da,Za,ni,jn,_n,Un,On,Wn,ea,Ha,Ia))}}return function(ir){var Ir,an,xn,Ln,Fn,jn,_n,Un,On,Wn,ea,Ha,Ia={point:Ga,lineStart:ja,lineEnd:da,polygonStart:function(){ir.polygonStart(),Ia.lineStart=Za},polygonEnd:function(){ir.polygonEnd(),Ia.lineStart=ja}};function Ga(Ei,Ci){Ei=yt(Ei,Ci),ir.point(Ei[0],Ei[1])}function ja(){Un=NaN,Ia.point=Qn,ir.lineStart()}function Qn(Ei,Ci){var Oi=ie([Ei,Ci]),vi=yt(Ei,Ci);fr(Un,On,_n,Wn,ea,Ha,Un=vi[0],On=vi[1],_n=Ei,Wn=Oi[0],ea=Oi[1],Ha=Oi[2],Rf,ir),ir.point(Un,On)}function da(){Ia.point=Ga,ir.lineEnd()}function Za(){ja(),Ia.point=ni,Ia.lineEnd=Mi}function ni(Ei,Ci){Qn(Ir=Ei,Ci),an=Un,xn=On,Ln=Wn,Fn=ea,jn=Ha,Ia.point=Qn}function Mi(){fr(Un,On,_n,Wn,ea,Ha,an,xn,Ir,Ln,Fn,jn,Rf,ir),Ia.lineEnd=da,da()}return Ia}}var ql=Bl({point:function(yt,Ft){this.stream.point(yt*d,Ft*d)}});function eu(yt){return Bl({point:function(Ft,fr){var ir=yt(Ft,fr);return this.stream.point(ir[0],ir[1])}})}function sf(yt,Ft,fr,ir,Ir){function an(xn,Ln){return xn*=ir,Ln*=Ir,[Ft+yt*xn,fr-yt*Ln]}return an.invert=function(xn,Ln){return[(xn-Ft)/yt*ir,(fr-Ln)/yt*Ir]},an}function Ys(yt,Ft,fr,ir,Ir,an){var xn=p(an),Ln=x(an),Fn=xn*yt,jn=Ln*yt,_n=xn/yt,Un=Ln/yt,On=(Ln*fr-xn*Ft)/yt,Wn=(Ln*Ft+xn*fr)/yt;function ea(Ha,Ia){return Ha*=ir,Ia*=Ir,[Fn*Ha-jn*Ia+Ft,fr-jn*Ha-Fn*Ia]}return ea.invert=function(Ha,Ia){return[ir*(_n*Ha-Un*Ia+On),Ir*(Wn-Un*Ha-_n*Ia)]},ea}function Ko(yt){return Nu(function(){return yt})()}function Nu(yt){var Ft,fr=150,ir=480,Ir=250,an=0,xn=0,Ln=0,Fn=0,jn=0,_n,Un=0,On=1,Wn=1,ea=null,Ha=Jt,Ia=null,Ga,ja,Qn,da=dn,Za=.5,ni,Mi,Ei,Ci,Oi;function vi(ga){return Ei(ga[0]*d,ga[1]*d)}function Uo(ga){return ga=Ei.invert(ga[0],ga[1]),ga&&[ga[0]*m,ga[1]*m]}vi.stream=function(ga){return Ci&&Oi===ga?Ci:Ci=ql(eu(_n)(Ha(ni(da(Oi=ga)))))},vi.preclip=function(ga){return arguments.length?(Ha=ga,ea=void 0,ri()):Ha},vi.postclip=function(ga){return arguments.length?(da=ga,Ia=Ga=ja=Qn=null,ri()):da},vi.clipAngle=function(ga){return arguments.length?(Ha=+ga?Rr(ea=ga*d):(ea=null,Jt),ri()):ea*m},vi.clipExtent=function(ga){return arguments.length?(da=ga==null?(Ia=Ga=ja=Qn=null,dn):Nr(Ia=+ga[0][0],Ga=+ga[0][1],ja=+ga[1][0],Qn=+ga[1][1]),ri()):Ia==null?null:[[Ia,Ga],[ja,Qn]]},vi.scale=function(ga){return arguments.length?(fr=+ga,xo()):fr},vi.translate=function(ga){return arguments.length?(ir=+ga[0],Ir=+ga[1],xo()):[ir,Ir]},vi.center=function(ga){return arguments.length?(an=ga[0]%360*d,xn=ga[1]%360*d,xo()):[an*m,xn*m]},vi.rotate=function(ga){return arguments.length?(Ln=ga[0]%360*d,Fn=ga[1]%360*d,jn=ga.length>2?ga[2]%360*d:0,xo()):[Ln*m,Fn*m,jn*m]},vi.angle=function(ga){return arguments.length?(Un=ga%360*d,xo()):Un*m},vi.reflectX=function(ga){return arguments.length?(On=ga?-1:1,xo()):On<0},vi.reflectY=function(ga){return arguments.length?(Wn=ga?-1:1,xo()):Wn<0},vi.precision=function(ga){return arguments.length?(ni=fc(Mi,Za=ga*ga),ri()):v(Za)},vi.fitExtent=function(ga,Li){return Ws(vi,ga,Li)},vi.fitSize=function(ga,Li){return pu(vi,ga,Li)},vi.fitWidth=function(ga,Li){return of(vi,ga,Li)},vi.fitHeight=function(ga,Li){return If(vi,ga,Li)};function xo(){var ga=Ys(fr,0,0,On,Wn,Un).apply(null,Ft(an,xn)),Li=(Un?Ys:sf)(fr,ir-ga[0],Ir-ga[1],On,Wn,Un);return _n=pt(Ln,Fn,jn),Mi=at(Ft,Li),Ei=at(_n,Mi),ni=fc(Mi,Za),ri()}function ri(){return Ci=Oi=null,vi}return function(){return Ft=yt.apply(this,arguments),vi.invert=Ft.invert&&Uo,xo()}}function il(yt){var Ft=0,fr=r/3,ir=Nu(yt),Ir=ir(Ft,fr);return Ir.parallels=function(an){return arguments.length?ir(Ft=an[0]*d,fr=an[1]*d):[Ft*m,fr*m]},Ir}function ol(yt){var Ft=p(yt);function fr(ir,Ir){return[ir*Ft,x(Ir)/Ft]}return fr.invert=function(ir,Ir){return[ir/Ft,E(Ir*Ft)]},fr}function Eo(yt,Ft){var fr=x(yt),ir=(fr+x(Ft))/2;if(b(ir)<i)return ol(yt);var Ir=1+fr*(2*ir-fr),an=v(Ir)/ir;function xn(Ln,Fn){var jn=v(Ir-2*ir*x(Fn))/ir;return[jn*x(Ln*=ir),an-jn*p(Ln)]}return xn.invert=function(Ln,Fn){var jn=an-Fn,_n=_(Ln,b(jn))*w(jn);return jn*ir<0&&(_n-=r*w(Ln)*w(jn)),[_n/ir,E((Ir-(Ln*Ln+jn*jn)*ir*ir)/(2*ir))]},xn}function du(){return il(Eo).scale(155.424).center([0,33.6442])}function gu(){return du().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ul(yt){var Ft=yt.length;return{point:function(fr,ir){for(var Ir=-1;++Ir<Ft;)yt[Ir].point(fr,ir)},sphere:function(){for(var fr=-1;++fr<Ft;)yt[fr].sphere()},lineStart:function(){for(var fr=-1;++fr<Ft;)yt[fr].lineStart()},lineEnd:function(){for(var fr=-1;++fr<Ft;)yt[fr].lineEnd()},polygonStart:function(){for(var fr=-1;++fr<Ft;)yt[fr].polygonStart()},polygonEnd:function(){for(var fr=-1;++fr<Ft;)yt[fr].polygonEnd()}}}function Xs(){var yt,Ft,fr=gu(),ir,Ir=du().rotate([154,0]).center([-2,58.5]).parallels([55,65]),an,xn=du().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ln,Fn,jn={point:function(On,Wn){Fn=[On,Wn]}};function _n(On){var Wn=On[0],ea=On[1];return Fn=null,ir.point(Wn,ea),Fn||(an.point(Wn,ea),Fn)||(Ln.point(Wn,ea),Fn)}_n.invert=function(On){var Wn=fr.scale(),ea=fr.translate(),Ha=(On[0]-ea[0])/Wn,Ia=(On[1]-ea[1])/Wn;return(Ia>=.12&&Ia<.234&&Ha>=-.425&&Ha<-.214?Ir:Ia>=.166&&Ia<.234&&Ha>=-.214&&Ha<-.115?xn:fr).invert(On)},_n.stream=function(On){return yt&&Ft===On?yt:yt=Ul([fr.stream(Ft=On),Ir.stream(On),xn.stream(On)])},_n.precision=function(On){return arguments.length?(fr.precision(On),Ir.precision(On),xn.precision(On),Un()):fr.precision()},_n.scale=function(On){return arguments.length?(fr.scale(On),Ir.scale(On*.35),xn.scale(On),_n.translate(fr.translate())):fr.scale()},_n.translate=function(On){if(!arguments.length)return fr.translate();var Wn=fr.scale(),ea=+On[0],Ha=+On[1];return ir=fr.translate(On).clipExtent([[ea-.455*Wn,Ha-.238*Wn],[ea+.455*Wn,Ha+.238*Wn]]).stream(jn),an=Ir.translate([ea-.307*Wn,Ha+.201*Wn]).clipExtent([[ea-.425*Wn+i,Ha+.12*Wn+i],[ea-.214*Wn-i,Ha+.234*Wn-i]]).stream(jn),Ln=xn.translate([ea-.205*Wn,Ha+.212*Wn]).clipExtent([[ea-.214*Wn+i,Ha+.166*Wn+i],[ea-.115*Wn-i,Ha+.234*Wn-i]]).stream(jn),Un()},_n.fitExtent=function(On,Wn){return Ws(_n,On,Wn)},_n.fitSize=function(On,Wn){return pu(_n,On,Wn)},_n.fitWidth=function(On,Wn){return of(_n,On,Wn)},_n.fitHeight=function(On,Wn){return If(_n,On,Wn)};function Un(){return yt=Ft=null,_n}return _n.scale(1070)}function yu(yt){return function(Ft,fr){var ir=p(Ft),Ir=p(fr),an=yt(ir*Ir);return[an*Ir*x(Ft),an*x(fr)]}}function tu(yt){return function(Ft,fr){var ir=v(Ft*Ft+fr*fr),Ir=yt(ir),an=x(Ir),xn=p(Ir);return[_(Ft*an,ir*xn),E(ir&&fr*an/ir)]}}var Bu=yu(function(yt){return v(2/(1+yt))});Bu.invert=tu(function(yt){return 2*E(yt/2)});function mu(){return Ko(Bu).scale(124.75).clipAngle(180-.001)}var Vl=yu(function(yt){return(yt=M(yt))&&yt/x(yt)});Vl.invert=tu(function(yt){return yt});function cc(){return Ko(Vl).scale(79.4188).clipAngle(180-.001)}function Is(yt,Ft){return[yt,S(C((f+Ft)/2))]}Is.invert=function(yt,Ft){return[yt,2*g(c(Ft))-f]};function Uc(){return lf(Is).scale(961/l)}function lf(yt){var Ft=Ko(yt),fr=Ft.center,ir=Ft.scale,Ir=Ft.translate,an=Ft.clipExtent,xn=null,Ln,Fn,jn;Ft.scale=function(Un){return arguments.length?(ir(Un),_n()):ir()},Ft.translate=function(Un){return arguments.length?(Ir(Un),_n()):Ir()},Ft.center=function(Un){return arguments.length?(fr(Un),_n()):fr()},Ft.clipExtent=function(Un){return arguments.length?(Un==null?xn=Ln=Fn=jn=null:(xn=+Un[0][0],Ln=+Un[0][1],Fn=+Un[1][0],jn=+Un[1][1]),_n()):xn==null?null:[[xn,Ln],[Fn,jn]]};function _n(){var Un=r*ir(),On=Ft(zt(Ft.rotate()).invert([0,0]));return an(xn==null?[[On[0]-Un,On[1]-Un],[On[0]+Un,On[1]+Un]]:yt===Is?[[Math.max(On[0]-Un,xn),Ln],[Math.min(On[0]+Un,Fn),jn]]:[[xn,Math.max(On[1]-Un,Ln)],[Fn,Math.min(On[1]+Un,jn)]])}return _n()}function ru(yt){return C((f+yt)/2)}function xu(yt,Ft){var fr=p(yt),ir=yt===Ft?x(yt):S(fr/p(Ft))/S(ru(Ft)/ru(yt)),Ir=fr*T(ru(yt),ir)/ir;if(!ir)return Is;function an(xn,Ln){Ir>0?Ln<-f+i&&(Ln=-f+i):Ln>f-i&&(Ln=f-i);var Fn=Ir/T(ru(Ln),ir);return[Fn*x(ir*xn),Ir-Fn*p(ir*xn)]}return an.invert=function(xn,Ln){var Fn=Ir-Ln,jn=w(ir)*v(xn*xn+Fn*Fn),_n=_(xn,b(Fn))*w(Fn);return Fn*ir<0&&(_n-=r*w(xn)*w(Fn)),[_n/ir,2*g(T(Ir/jn,1/ir))-f]},an}function Hl(){return il(xu).scale(109.5).parallels([30,30])}function bu(yt,Ft){return[yt,Ft]}bu.invert=bu;function Ff(){return Ko(bu).scale(152.63)}function Of(yt,Ft){var fr=p(yt),ir=yt===Ft?x(yt):(fr-p(Ft))/(Ft-yt),Ir=fr/ir+yt;if(b(ir)<i)return bu;function an(xn,Ln){var Fn=Ir-Ln,jn=ir*xn;return[Fn*x(jn),Ir-Fn*p(jn)]}return an.invert=function(xn,Ln){var Fn=Ir-Ln,jn=_(xn,b(Fn))*w(Fn);return Fn*ir<0&&(jn-=r*w(xn)*w(Fn)),[jn/ir,Ir-w(ir)*v(xn*xn+Fn*Fn)]},an}function Vc(){return il(Of).scale(131.154).center([0,13.9389])}var Wi=1.340264,nu=-.081106,Gl=893e-6,Ms=.003796,Rs=v(3)/2,_u=12;function ko(yt,Ft){var fr=E(Rs*x(Ft)),ir=fr*fr,Ir=ir*ir*ir;return[yt*p(fr)/(Rs*(Wi+3*nu*ir+Ir*(7*Gl+9*Ms*ir))),fr*(Wi+nu*ir+Ir*(Gl+Ms*ir))]}ko.invert=function(yt,Ft){for(var fr=Ft,ir=fr*fr,Ir=ir*ir*ir,an=0,xn,Ln,Fn;an<_u&&(Ln=fr*(Wi+nu*ir+Ir*(Gl+Ms*ir))-Ft,Fn=Wi+3*nu*ir+Ir*(7*Gl+9*Ms*ir),fr-=xn=Ln/Fn,ir=fr*fr,Ir=ir*ir*ir,!(b(xn)<n));++an);return[Rs*yt*(Wi+3*nu*ir+Ir*(7*Gl+9*Ms*ir))/p(fr),E(x(fr)/Rs)]};function zf(){return Ko(ko).scale(177.158)}function Ds(yt,Ft){var fr=p(Ft),ir=p(yt)*fr;return[fr*x(yt)/ir,x(Ft)/ir]}Ds.invert=tu(g);function wl(){return Ko(Ds).scale(144.049).clipAngle(60)}function Tl(){var yt=1,Ft=0,fr=0,ir=1,Ir=1,an=0,xn,Ln,Fn=null,jn,_n,Un,On=1,Wn=1,ea=Bl({point:function(da,Za){var ni=Qn([da,Za]);this.stream.point(ni[0],ni[1])}}),Ha=dn,Ia,Ga;function ja(){return On=yt*ir,Wn=yt*Ir,Ia=Ga=null,Qn}function Qn(da){var Za=da[0]*On,ni=da[1]*Wn;if(an){var Mi=ni*xn-Za*Ln;Za=Za*xn+ni*Ln,ni=Mi}return[Za+Ft,ni+fr]}return Qn.invert=function(da){var Za=da[0]-Ft,ni=da[1]-fr;if(an){var Mi=ni*xn+Za*Ln;Za=Za*xn-ni*Ln,ni=Mi}return[Za/On,ni/Wn]},Qn.stream=function(da){return Ia&&Ga===da?Ia:Ia=ea(Ha(Ga=da))},Qn.postclip=function(da){return arguments.length?(Ha=da,Fn=jn=_n=Un=null,ja()):Ha},Qn.clipExtent=function(da){return arguments.length?(Ha=da==null?(Fn=jn=_n=Un=null,dn):Nr(Fn=+da[0][0],jn=+da[0][1],_n=+da[1][0],Un=+da[1][1]),ja()):Fn==null?null:[[Fn,jn],[_n,Un]]},Qn.scale=function(da){return arguments.length?(yt=+da,ja()):yt},Qn.translate=function(da){return arguments.length?(Ft=+da[0],fr=+da[1],ja()):[Ft,fr]},Qn.angle=function(da){return arguments.length?(an=da%360*d,Ln=x(an),xn=p(an),ja()):an*m},Qn.reflectX=function(da){return arguments.length?(ir=da?-1:1,ja()):ir<0},Qn.reflectY=function(da){return arguments.length?(Ir=da?-1:1,ja()):Ir<0},Qn.fitExtent=function(da,Za){return Ws(Qn,da,Za)},Qn.fitSize=function(da,Za){return pu(Qn,da,Za)},Qn.fitWidth=function(da,Za){return of(Qn,da,Za)},Qn.fitHeight=function(da,Za){return If(Qn,da,Za)},Qn}function sl(yt,Ft){var fr=Ft*Ft,ir=fr*fr;return[yt*(.8707-.131979*fr+ir*(-.013791+ir*(.003971*fr-.001529*ir))),Ft*(1.007226+fr*(.015085+ir*(-.044475+.028874*fr-.005916*ir)))]}sl.invert=function(yt,Ft){var fr=Ft,ir=25,Ir;do{var an=fr*fr,xn=an*an;fr-=Ir=(fr*(1.007226+an*(.015085+xn*(-.044475+.028874*an-.005916*xn)))-Ft)/(1.007226+an*(.015085*3+xn*(-.044475*7+.028874*9*an-.005916*11*xn)))}while(b(Ir)>i&&--ir>0);return[yt/(.8707+(an=fr*fr)*(-.131979+an*(-.013791+an*an*an*(.003971-.001529*an)))),fr]};function Fs(){return Ko(sl).scale(175.295)}function no(yt,Ft){return[p(Ft)*x(yt),x(Ft)]}no.invert=tu(E);function Jo(){return Ko(no).scale(249.5).clipAngle(90+i)}function Os(yt,Ft){var fr=p(Ft),ir=1+p(yt)*fr;return[fr*x(yt)/ir,x(Ft)/ir]}Os.invert=tu(function(yt){return 2*g(yt)});function Nf(){return Ko(Os).scale(250).clipAngle(142)}function Uu(yt,Ft){return[S(C((f+Ft)/2)),-yt]}Uu.invert=function(yt,Ft){return[-Ft,2*g(c(yt))-f]};function Bf(){var yt=lf(Uu),Ft=yt.center,fr=yt.rotate;return yt.center=function(ir){return arguments.length?Ft([-ir[1],ir[0]]):(ir=Ft(),[ir[1],-ir[0]])},yt.rotate=function(ir){return arguments.length?fr([ir[0],ir[1],ir.length>2?ir[2]+90:90]):(ir=fr(),[ir[0],ir[1],ir[2]-90])},fr([0,0,90]).scale(159.155)}s.geoAlbers=gu,s.geoAlbersUsa=Xs,s.geoArea=X,s.geoAzimuthalEqualArea=mu,s.geoAzimuthalEqualAreaRaw=Bu,s.geoAzimuthalEquidistant=cc,s.geoAzimuthalEquidistantRaw=Vl,s.geoBounds=ot,s.geoCentroid=Ye,s.geoCircle=Mr,s.geoClipAntimeridian=Jt,s.geoClipCircle=Rr,s.geoClipExtent=Tn,s.geoClipRectangle=Nr,s.geoConicConformal=Hl,s.geoConicConformalRaw=xu,s.geoConicEqualArea=du,s.geoConicEqualAreaRaw=Eo,s.geoConicEquidistant=Vc,s.geoConicEquidistantRaw=Of,s.geoContains=yr,s.geoDistance=Mn,s.geoEqualEarth=zf,s.geoEqualEarthRaw=ko,s.geoEquirectangular=Ff,s.geoEquirectangularRaw=bu,s.geoGnomonic=wl,s.geoGnomonicRaw=Ds,s.geoGraticule=gn,s.geoGraticule10=Dn,s.geoIdentity=Tl,s.geoInterpolate=En,s.geoLength=Ar,s.geoMercator=Uc,s.geoMercatorRaw=Is,s.geoNaturalEarth1=Fs,s.geoNaturalEarth1Raw=sl,s.geoOrthographic=Jo,s.geoOrthographicRaw=no,s.geoPath=Fu,s.geoProjection=Ko,s.geoProjectionMutator=Nu,s.geoRotation=zt,s.geoStereographic=Nf,s.geoStereographicRaw=Os,s.geoStream=$,s.geoTransform=uc,s.geoTransverseMercator=Bf,s.geoTransverseMercatorRaw=Uu,Object.defineProperty(s,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=s||self,o(s.d3=s.d3||{}))})(this,function(s){function o(Ke,Pe){return Ke.parent===Pe.parent?1:2}function h(Ke){return Ke.reduce(y,0)/Ke.length}function y(Ke,Pe){return Ke+Pe.x}function t(Ke){return 1+Ke.reduce(a,0)}function a(Ke,Pe){return Math.max(Ke,Pe.y)}function i(Ke){for(var Pe;Pe=Ke.children;)Ke=Pe[0];return Ke}function n(Ke){for(var Pe;Pe=Ke.children;)Ke=Pe[Pe.length-1];return Ke}function r(){var Ke=o,Pe=1,We=1,Qe=!1;function ut(It){var Tt,Bt=0;It.eachAfter(function(nr){var cr=nr.children;cr?(nr.x=h(cr),nr.y=t(cr)):(nr.x=Tt?Bt+=Ke(nr,Tt):0,nr.y=0,Tt=nr)});var rr=i(It),Ut=n(It),Qt=rr.x-Ke(rr,Ut)/2,ar=Ut.x+Ke(Ut,rr)/2;return It.eachAfter(Qe?function(nr){nr.x=(nr.x-It.x)*Pe,nr.y=(It.y-nr.y)*We}:function(nr){nr.x=(nr.x-Qt)/(ar-Qt)*Pe,nr.y=(1-(It.y?nr.y/It.y:1))*We})}return ut.separation=function(It){return arguments.length?(Ke=It,ut):Ke},ut.size=function(It){return arguments.length?(Qe=!1,Pe=+It[0],We=+It[1],ut):Qe?null:[Pe,We]},ut.nodeSize=function(It){return arguments.length?(Qe=!0,Pe=+It[0],We=+It[1],ut):Qe?[Pe,We]:null},ut}function f(Ke){var Pe=0,We=Ke.children,Qe=We&&We.length;if(!Qe)Pe=1;else for(;--Qe>=0;)Pe+=We[Qe].value;Ke.value=Pe}function u(){return this.eachAfter(f)}function l(Ke){var Pe=this,We,Qe=[Pe],ut,It,Tt;do for(We=Qe.reverse(),Qe=[];Pe=We.pop();)if(Ke(Pe),ut=Pe.children,ut)for(It=0,Tt=ut.length;It<Tt;++It)Qe.push(ut[It]);while(Qe.length);return this}function m(Ke){for(var Pe=this,We=[Pe],Qe,ut;Pe=We.pop();)if(Ke(Pe),Qe=Pe.children,Qe)for(ut=Qe.length-1;ut>=0;--ut)We.push(Qe[ut]);return this}function d(Ke){for(var Pe=this,We=[Pe],Qe=[],ut,It,Tt;Pe=We.pop();)if(Qe.push(Pe),ut=Pe.children,ut)for(It=0,Tt=ut.length;It<Tt;++It)We.push(ut[It]);for(;Pe=Qe.pop();)Ke(Pe);return this}function b(Ke){return this.eachAfter(function(Pe){for(var We=+Ke(Pe.data)||0,Qe=Pe.children,ut=Qe&&Qe.length;--ut>=0;)We+=Qe[ut].value;Pe.value=We})}function g(Ke){return this.eachBefore(function(Pe){Pe.children&&Pe.children.sort(Ke)})}function _(Ke){for(var Pe=this,We=p(Pe,Ke),Qe=[Pe];Pe!==We;)Pe=Pe.parent,Qe.push(Pe);for(var ut=Qe.length;Ke!==We;)Qe.splice(ut,0,Ke),Ke=Ke.parent;return Qe}function p(Ke,Pe){if(Ke===Pe)return Ke;var We=Ke.ancestors(),Qe=Pe.ancestors(),ut=null;for(Ke=We.pop(),Pe=Qe.pop();Ke===Pe;)ut=Ke,Ke=We.pop(),Pe=Qe.pop();return ut}function A(){for(var Ke=this,Pe=[Ke];Ke=Ke.parent;)Pe.push(Ke);return Pe}function c(){var Ke=[];return this.each(function(Pe){Ke.push(Pe)}),Ke}function S(){var Ke=[];return this.eachBefore(function(Pe){Pe.children||Ke.push(Pe)}),Ke}function T(){var Ke=this,Pe=[];return Ke.each(function(We){We!==Ke&&Pe.push({source:We.parent,target:We})}),Pe}function x(Ke,Pe){var We=new E(Ke),Qe=+Ke.value&&(We.value=Ke.value),ut,It=[We],Tt,Bt,rr,Ut;for(Pe==null&&(Pe=v);ut=It.pop();)if(Qe&&(ut.value=+ut.data.value),(Bt=Pe(ut.data))&&(Ut=Bt.length))for(ut.children=new Array(Ut),rr=Ut-1;rr>=0;--rr)It.push(Tt=ut.children[rr]=new E(Bt[rr])),Tt.parent=ut,Tt.depth=ut.depth+1;return We.eachBefore(M)}function w(){return x(this).eachBefore(C)}function v(Ke){return Ke.children}function C(Ke){Ke.data=Ke.data.data}function M(Ke){var Pe=0;do Ke.height=Pe;while((Ke=Ke.parent)&&Ke.height<++Pe)}function E(Ke){this.data=Ke,this.depth=this.height=0,this.parent=null}E.prototype=x.prototype={constructor:E,count:u,each:l,eachAfter:d,eachBefore:m,sum:b,sort:g,path:_,ancestors:A,descendants:c,leaves:S,links:T,copy:w};var L=Array.prototype.slice;function z(Ke){for(var Pe=Ke.length,We,Qe;Pe;)Qe=Math.random()*Pe--|0,We=Ke[Pe],Ke[Pe]=Ke[Qe],Ke[Qe]=We;return Ke}function O(Ke){for(var Pe=0,We=(Ke=z(L.call(Ke))).length,Qe=[],ut,It;Pe<We;)ut=Ke[Pe],It&&H(It,ut)?++Pe:(It=$(Qe=R(Qe,ut)),Pe=0);return It}function R(Ke,Pe){var We,Qe;if(B(Pe,Ke))return[Pe];for(We=0;We<Ke.length;++We)if(D(Pe,Ke[We])&&B(re(Ke[We],Pe),Ke))return[Ke[We],Pe];for(We=0;We<Ke.length-1;++We)for(Qe=We+1;Qe<Ke.length;++Qe)if(D(re(Ke[We],Ke[Qe]),Pe)&&D(re(Ke[We],Pe),Ke[Qe])&&D(re(Ke[Qe],Pe),Ke[We])&&B(Q(Ke[We],Ke[Qe],Pe),Ke))return[Ke[We],Ke[Qe],Pe];throw new Error}function D(Ke,Pe){var We=Ke.r-Pe.r,Qe=Pe.x-Ke.x,ut=Pe.y-Ke.y;return We<0||We*We<Qe*Qe+ut*ut}function H(Ke,Pe){var We=Ke.r-Pe.r+1e-6,Qe=Pe.x-Ke.x,ut=Pe.y-Ke.y;return We>0&&We*We>Qe*Qe+ut*ut}function B(Ke,Pe){for(var We=0;We<Pe.length;++We)if(!H(Ke,Pe[We]))return!1;return!0}function $(Ke){switch(Ke.length){case 1:return W(Ke[0]);case 2:return re(Ke[0],Ke[1]);case 3:return Q(Ke[0],Ke[1],Ke[2])}}function W(Ke){return{x:Ke.x,y:Ke.y,r:Ke.r}}function re(Ke,Pe){var We=Ke.x,Qe=Ke.y,ut=Ke.r,It=Pe.x,Tt=Pe.y,Bt=Pe.r,rr=It-We,Ut=Tt-Qe,Qt=Bt-ut,ar=Math.sqrt(rr*rr+Ut*Ut);return{x:(We+It+rr/ar*Qt)/2,y:(Qe+Tt+Ut/ar*Qt)/2,r:(ar+ut+Bt)/2}}function Q(Ke,Pe,We){var Qe=Ke.x,ut=Ke.y,It=Ke.r,Tt=Pe.x,Bt=Pe.y,rr=Pe.r,Ut=We.x,Qt=We.y,ar=We.r,nr=Qe-Tt,cr=Qe-Ut,Kr=ut-Bt,yn=ut-Qt,Qr=rr-It,st=ar-It,Gt=Qe*Qe+ut*ut-It*It,Zt=Gt-Tt*Tt-Bt*Bt+rr*rr,Ht=Gt-Ut*Ut-Qt*Qt+ar*ar,_r=cr*Kr-nr*yn,it=(Kr*Ht-yn*Zt)/(_r*2)-Qe,Te=(yn*Qr-Kr*st)/_r,ke=(cr*Zt-nr*Ht)/(_r*2)-ut,Ge=(nr*st-cr*Qr)/_r,Ye=Te*Te+Ge*Ge-1,qe=2*(It+it*Te+ke*Ge),at=it*it+ke*ke-It*It,et=-(Ye?(qe+Math.sqrt(qe*qe-4*Ye*at))/(2*Ye):at/qe);return{x:Qe+it+Te*et,y:ut+ke+Ge*et,r:et}}function Z(Ke,Pe,We){var Qe=Ke.x-Pe.x,ut,It,Tt=Ke.y-Pe.y,Bt,rr,Ut=Qe*Qe+Tt*Tt;Ut?(It=Pe.r+We.r,It*=It,rr=Ke.r+We.r,rr*=rr,It>rr?(ut=(Ut+rr-It)/(2*Ut),Bt=Math.sqrt(Math.max(0,rr/Ut-ut*ut)),We.x=Ke.x-ut*Qe-Bt*Tt,We.y=Ke.y-ut*Tt+Bt*Qe):(ut=(Ut+It-rr)/(2*Ut),Bt=Math.sqrt(Math.max(0,It/Ut-ut*ut)),We.x=Pe.x+ut*Qe-Bt*Tt,We.y=Pe.y+ut*Tt+Bt*Qe)):(We.x=Pe.x+We.r,We.y=Pe.y)}function K(Ke,Pe){var We=Ke.r+Pe.r-1e-6,Qe=Pe.x-Ke.x,ut=Pe.y-Ke.y;return We>0&&We*We>Qe*Qe+ut*ut}function le(Ke){var Pe=Ke._,We=Ke.next._,Qe=Pe.r+We.r,ut=(Pe.x*We.r+We.x*Pe.r)/Qe,It=(Pe.y*We.r+We.y*Pe.r)/Qe;return ut*ut+It*It}function fe(Ke){this._=Ke,this.next=null,this.previous=null}function ue(Ke){if(!(ut=Ke.length))return 0;var Pe,We,Qe,ut,It,Tt,Bt,rr,Ut,Qt,ar;if(Pe=Ke[0],Pe.x=0,Pe.y=0,!(ut>1))return Pe.r;if(We=Ke[1],Pe.x=-We.r,We.x=Pe.r,We.y=0,!(ut>2))return Pe.r+We.r;Z(We,Pe,Qe=Ke[2]),Pe=new fe(Pe),We=new fe(We),Qe=new fe(Qe),Pe.next=Qe.previous=We,We.next=Pe.previous=Qe,Qe.next=We.previous=Pe;e:for(Bt=3;Bt<ut;++Bt){Z(Pe._,We._,Qe=Ke[Bt]),Qe=new fe(Qe),rr=We.next,Ut=Pe.previous,Qt=We._.r,ar=Pe._.r;do if(Qt<=ar){if(K(rr._,Qe._)){We=rr,Pe.next=We,We.previous=Pe,--Bt;continue e}Qt+=rr._.r,rr=rr.next}else{if(K(Ut._,Qe._)){Pe=Ut,Pe.next=We,We.previous=Pe,--Bt;continue e}ar+=Ut._.r,Ut=Ut.previous}while(rr!==Ut.next);for(Qe.previous=Pe,Qe.next=We,Pe.next=We.previous=We=Qe,It=le(Pe);(Qe=Qe.next)!==We;)(Tt=le(Qe))<It&&(Pe=Qe,It=Tt);We=Pe.next}for(Pe=[We._],Qe=We;(Qe=Qe.next)!==We;)Pe.push(Qe._);for(Qe=O(Pe),Bt=0;Bt<ut;++Bt)Pe=Ke[Bt],Pe.x-=Qe.x,Pe.y-=Qe.y;return Qe.r}function V(Ke){return ue(Ke),Ke}function j(Ke){return Ke==null?null:ee(Ke)}function ee(Ke){if(typeof Ke!="function")throw new Error;return Ke}function q(){return 0}function X(Ke){return function(){return Ke}}function J(Ke){return Math.sqrt(Ke.value)}function ie(){var Ke=null,Pe=1,We=1,Qe=q;function ut(It){return It.x=Pe/2,It.y=We/2,Ke?It.eachBefore(ne(Ke)).eachAfter(oe(Qe,.5)).eachBefore(se(1)):It.eachBefore(ne(J)).eachAfter(oe(q,1)).eachAfter(oe(Qe,It.r/Math.min(Pe,We))).eachBefore(se(Math.min(Pe,We)/(2*It.r))),It}return ut.radius=function(It){return arguments.length?(Ke=j(It),ut):Ke},ut.size=function(It){return arguments.length?(Pe=+It[0],We=+It[1],ut):[Pe,We]},ut.padding=function(It){return arguments.length?(Qe=typeof It=="function"?It:X(+It),ut):Qe},ut}function ne(Ke){return function(Pe){Pe.children||(Pe.r=Math.max(0,+Ke(Pe)||0))}}function oe(Ke,Pe){return function(We){if(Qe=We.children){var Qe,ut,It=Qe.length,Tt=Ke(We)*Pe||0,Bt;if(Tt)for(ut=0;ut<It;++ut)Qe[ut].r+=Tt;if(Bt=ue(Qe),Tt)for(ut=0;ut<It;++ut)Qe[ut].r-=Tt;We.r=Bt+Tt}}}function se(Ke){return function(Pe){var We=Pe.parent;Pe.r*=Ke,We&&(Pe.x=We.x+Ke*Pe.x,Pe.y=We.y+Ke*Pe.y)}}function me(Ke){Ke.x0=Math.round(Ke.x0),Ke.y0=Math.round(Ke.y0),Ke.x1=Math.round(Ke.x1),Ke.y1=Math.round(Ke.y1)}function ce(Ke,Pe,We,Qe,ut){for(var It=Ke.children,Tt,Bt=-1,rr=It.length,Ut=Ke.value&&(Qe-Pe)/Ke.value;++Bt<rr;)Tt=It[Bt],Tt.y0=We,Tt.y1=ut,Tt.x0=Pe,Tt.x1=Pe+=Tt.value*Ut}function pe(){var Ke=1,Pe=1,We=0,Qe=!1;function ut(Tt){var Bt=Tt.height+1;return Tt.x0=Tt.y0=We,Tt.x1=Ke,Tt.y1=Pe/Bt,Tt.eachBefore(It(Pe,Bt)),Qe&&Tt.eachBefore(me),Tt}function It(Tt,Bt){return function(rr){rr.children&&ce(rr,rr.x0,Tt*(rr.depth+1)/Bt,rr.x1,Tt*(rr.depth+2)/Bt);var Ut=rr.x0,Qt=rr.y0,ar=rr.x1-We,nr=rr.y1-We;ar<Ut&&(Ut=ar=(Ut+ar)/2),nr<Qt&&(Qt=nr=(Qt+nr)/2),rr.x0=Ut,rr.y0=Qt,rr.x1=ar,rr.y1=nr}}return ut.round=function(Tt){return arguments.length?(Qe=!!Tt,ut):Qe},ut.size=function(Tt){return arguments.length?(Ke=+Tt[0],Pe=+Tt[1],ut):[Ke,Pe]},ut.padding=function(Tt){return arguments.length?(We=+Tt,ut):We},ut}var xe="$",Se={depth:-1},Ae={};function Ce(Ke){return Ke.id}function Ee(Ke){return Ke.parentId}function Oe(){var Ke=Ce,Pe=Ee;function We(Qe){var ut,It,Tt=Qe.length,Bt,rr,Ut,Qt=new Array(Tt),ar,nr,cr={};for(It=0;It<Tt;++It)ut=Qe[It],Ut=Qt[It]=new E(ut),(ar=Ke(ut,It,Qe))!=null&&(ar+="")&&(nr=xe+(Ut.id=ar),cr[nr]=nr in cr?Ae:Ut);for(It=0;It<Tt;++It)if(Ut=Qt[It],ar=Pe(Qe[It],It,Qe),ar==null||!(ar+="")){if(Bt)throw new Error("multiple roots");Bt=Ut}else{if(rr=cr[xe+ar],!rr)throw new Error("missing: "+ar);if(rr===Ae)throw new Error("ambiguous: "+ar);rr.children?rr.children.push(Ut):rr.children=[Ut],Ut.parent=rr}if(!Bt)throw new Error("no root");if(Bt.parent=Se,Bt.eachBefore(function(Kr){Kr.depth=Kr.parent.depth+1,--Tt}).eachBefore(M),Bt.parent=null,Tt>0)throw new Error("cycle");return Bt}return We.id=function(Qe){return arguments.length?(Ke=ee(Qe),We):Ke},We.parentId=function(Qe){return arguments.length?(Pe=ee(Qe),We):Pe},We}function _e(Ke,Pe){return Ke.parent===Pe.parent?1:2}function Re(Ke){var Pe=Ke.children;return Pe?Pe[0]:Ke.t}function Ve(Ke){var Pe=Ke.children;return Pe?Pe[Pe.length-1]:Ke.t}function Je(Ke,Pe,We){var Qe=We/(Pe.i-Ke.i);Pe.c-=Qe,Pe.s+=We,Ke.c+=Qe,Pe.z+=We,Pe.m+=We}function ze(Ke){for(var Pe=0,We=0,Qe=Ke.children,ut=Qe.length,It;--ut>=0;)It=Qe[ut],It.z+=Pe,It.m+=Pe,Pe+=It.s+(We+=It.c)}function De(Ke,Pe,We){return Ke.a.parent===Pe.parent?Ke.a:We}function je(Ke,Pe){this._=Ke,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Pe}je.prototype=Object.create(E.prototype);function dt(Ke){for(var Pe=new je(Ke,0),We,Qe=[Pe],ut,It,Tt,Bt;We=Qe.pop();)if(It=We._.children)for(We.children=new Array(Bt=It.length),Tt=Bt-1;Tt>=0;--Tt)Qe.push(ut=We.children[Tt]=new je(It[Tt],Tt)),ut.parent=We;return(Pe.parent=new je(null,0)).children=[Pe],Pe}function Et(){var Ke=_e,Pe=1,We=1,Qe=null;function ut(Ut){var Qt=dt(Ut);if(Qt.eachAfter(It),Qt.parent.m=-Qt.z,Qt.eachBefore(Tt),Qe)Ut.eachBefore(rr);else{var ar=Ut,nr=Ut,cr=Ut;Ut.eachBefore(function(Gt){Gt.x<ar.x&&(ar=Gt),Gt.x>nr.x&&(nr=Gt),Gt.depth>cr.depth&&(cr=Gt)});var Kr=ar===nr?1:Ke(ar,nr)/2,yn=Kr-ar.x,Qr=Pe/(nr.x+Kr+yn),st=We/(cr.depth||1);Ut.eachBefore(function(Gt){Gt.x=(Gt.x+yn)*Qr,Gt.y=Gt.depth*st})}return Ut}function It(Ut){var Qt=Ut.children,ar=Ut.parent.children,nr=Ut.i?ar[Ut.i-1]:null;if(Qt){ze(Ut);var cr=(Qt[0].z+Qt[Qt.length-1].z)/2;nr?(Ut.z=nr.z+Ke(Ut._,nr._),Ut.m=Ut.z-cr):Ut.z=cr}else nr&&(Ut.z=nr.z+Ke(Ut._,nr._));Ut.parent.A=Bt(Ut,nr,Ut.parent.A||ar[0])}function Tt(Ut){Ut._.x=Ut.z+Ut.parent.m,Ut.m+=Ut.parent.m}function Bt(Ut,Qt,ar){if(Qt){for(var nr=Ut,cr=Ut,Kr=Qt,yn=nr.parent.children[0],Qr=nr.m,st=cr.m,Gt=Kr.m,Zt=yn.m,Ht;Kr=Ve(Kr),nr=Re(nr),Kr&&nr;)yn=Re(yn),cr=Ve(cr),cr.a=Ut,Ht=Kr.z+Gt-nr.z-Qr+Ke(Kr._,nr._),Ht>0&&(Je(De(Kr,Ut,ar),Ut,Ht),Qr+=Ht,st+=Ht),Gt+=Kr.m,Qr+=nr.m,Zt+=yn.m,st+=cr.m;Kr&&!Ve(cr)&&(cr.t=Kr,cr.m+=Gt-st),nr&&!Re(yn)&&(yn.t=nr,yn.m+=Qr-Zt,ar=Ut)}return ar}function rr(Ut){Ut.x*=Pe,Ut.y=Ut.depth*We}return ut.separation=function(Ut){return arguments.length?(Ke=Ut,ut):Ke},ut.size=function(Ut){return arguments.length?(Qe=!1,Pe=+Ut[0],We=+Ut[1],ut):Qe?null:[Pe,We]},ut.nodeSize=function(Ut){return arguments.length?(Qe=!0,Pe=+Ut[0],We=+Ut[1],ut):Qe?[Pe,We]:null},ut}function $t(Ke,Pe,We,Qe,ut){for(var It=Ke.children,Tt,Bt=-1,rr=It.length,Ut=Ke.value&&(ut-We)/Ke.value;++Bt<rr;)Tt=It[Bt],Tt.x0=Pe,Tt.x1=Qe,Tt.y0=We,Tt.y1=We+=Tt.value*Ut}var wt=(1+Math.sqrt(5))/2;function Ot(Ke,Pe,We,Qe,ut,It){for(var Tt=[],Bt=Pe.children,rr,Ut,Qt=0,ar=0,nr=Bt.length,cr,Kr,yn=Pe.value,Qr,st,Gt,Zt,Ht,_r,it;Qt<nr;){cr=ut-We,Kr=It-Qe;do Qr=Bt[ar++].value;while(!Qr&&ar<nr);for(st=Gt=Qr,_r=Math.max(Kr/cr,cr/Kr)/(yn*Ke),it=Qr*Qr*_r,Ht=Math.max(Gt/it,it/st);ar<nr;++ar){if(Qr+=Ut=Bt[ar].value,Ut<st&&(st=Ut),Ut>Gt&&(Gt=Ut),it=Qr*Qr*_r,Zt=Math.max(Gt/it,it/st),Zt>Ht){Qr-=Ut;break}Ht=Zt}Tt.push(rr={value:Qr,dice:cr<Kr,children:Bt.slice(Qt,ar)}),rr.dice?ce(rr,We,Qe,ut,yn?Qe+=Kr*Qr/yn:It):$t(rr,We,Qe,yn?We+=cr*Qr/yn:ut,It),yn-=Qr,Qt=ar}return Tt}var Vt=function Ke(Pe){function We(Qe,ut,It,Tt,Bt){Ot(Pe,Qe,ut,It,Tt,Bt)}return We.ratio=function(Qe){return Ke((Qe=+Qe)>1?Qe:1)},We}(wt);function kt(){var Ke=Vt,Pe=!1,We=1,Qe=1,ut=[0],It=q,Tt=q,Bt=q,rr=q,Ut=q;function Qt(nr){return nr.x0=nr.y0=0,nr.x1=We,nr.y1=Qe,nr.eachBefore(ar),ut=[0],Pe&&nr.eachBefore(me),nr}function ar(nr){var cr=ut[nr.depth],Kr=nr.x0+cr,yn=nr.y0+cr,Qr=nr.x1-cr,st=nr.y1-cr;Qr<Kr&&(Kr=Qr=(Kr+Qr)/2),st<yn&&(yn=st=(yn+st)/2),nr.x0=Kr,nr.y0=yn,nr.x1=Qr,nr.y1=st,nr.children&&(cr=ut[nr.depth+1]=It(nr)/2,Kr+=Ut(nr)-cr,yn+=Tt(nr)-cr,Qr-=Bt(nr)-cr,st-=rr(nr)-cr,Qr<Kr&&(Kr=Qr=(Kr+Qr)/2),st<yn&&(yn=st=(yn+st)/2),Ke(nr,Kr,yn,Qr,st))}return Qt.round=function(nr){return arguments.length?(Pe=!!nr,Qt):Pe},Qt.size=function(nr){return arguments.length?(We=+nr[0],Qe=+nr[1],Qt):[We,Qe]},Qt.tile=function(nr){return arguments.length?(Ke=ee(nr),Qt):Ke},Qt.padding=function(nr){return arguments.length?Qt.paddingInner(nr).paddingOuter(nr):Qt.paddingInner()},Qt.paddingInner=function(nr){return arguments.length?(It=typeof nr=="function"?nr:X(+nr),Qt):It},Qt.paddingOuter=function(nr){return arguments.length?Qt.paddingTop(nr).paddingRight(nr).paddingBottom(nr).paddingLeft(nr):Qt.paddingTop()},Qt.paddingTop=function(nr){return arguments.length?(Tt=typeof nr=="function"?nr:X(+nr),Qt):Tt},Qt.paddingRight=function(nr){return arguments.length?(Bt=typeof nr=="function"?nr:X(+nr),Qt):Bt},Qt.paddingBottom=function(nr){return arguments.length?(rr=typeof nr=="function"?nr:X(+nr),Qt):rr},Qt.paddingLeft=function(nr){return arguments.length?(Ut=typeof nr=="function"?nr:X(+nr),Qt):Ut},Qt}function St(Ke,Pe,We,Qe,ut){var It=Ke.children,Tt,Bt=It.length,rr,Ut=new Array(Bt+1);for(Ut[0]=rr=Tt=0;Tt<Bt;++Tt)Ut[Tt+1]=rr+=It[Tt].value;Qt(0,Bt,Ke.value,Pe,We,Qe,ut);function Qt(ar,nr,cr,Kr,yn,Qr,st){if(ar>=nr-1){var Gt=It[ar];Gt.x0=Kr,Gt.y0=yn,Gt.x1=Qr,Gt.y1=st;return}for(var Zt=Ut[ar],Ht=cr/2+Zt,_r=ar+1,it=nr-1;_r<it;){var Te=_r+it>>>1;Ut[Te]<Ht?_r=Te+1:it=Te}Ht-Ut[_r-1]<Ut[_r]-Ht&&ar+1<_r&&--_r;var ke=Ut[_r]-Zt,Ge=cr-ke;if(Qr-Kr>st-yn){var Ye=(Kr*Ge+Qr*ke)/cr;Qt(ar,_r,ke,Kr,yn,Ye,st),Qt(_r,nr,Ge,Ye,yn,Qr,st)}else{var qe=(yn*Ge+st*ke)/cr;Qt(ar,_r,ke,Kr,yn,Qr,qe),Qt(_r,nr,Ge,Kr,qe,Qr,st)}}}function ot(Ke,Pe,We,Qe,ut){(Ke.depth&1?$t:ce)(Ke,Pe,We,Qe,ut)}var ht=function Ke(Pe){function We(Qe,ut,It,Tt,Bt){if((rr=Qe._squarify)&&rr.ratio===Pe)for(var rr,Ut,Qt,ar,nr=-1,cr,Kr=rr.length,yn=Qe.value;++nr<Kr;){for(Ut=rr[nr],Qt=Ut.children,ar=Ut.value=0,cr=Qt.length;ar<cr;++ar)Ut.value+=Qt[ar].value;Ut.dice?ce(Ut,ut,It,Tt,It+=(Bt-It)*Ut.value/yn):$t(Ut,ut,It,ut+=(Tt-ut)*Ut.value/yn,Bt),yn-=Ut.value}else Qe._squarify=rr=Ot(Pe,Qe,ut,It,Tt,Bt),rr.ratio=Pe}return We.ratio=function(Qe){return Ke((Qe=+Qe)>1?Qe:1)},We}(wt);s.cluster=r,s.hierarchy=x,s.pack=ie,s.packEnclose=O,s.packSiblings=V,s.partition=pe,s.stratify=Oe,s.tree=Et,s.treemap=kt,s.treemapBinary=St,s.treemapDice=ce,s.treemapResquarify=ht,s.treemapSlice=$t,s.treemapSliceDice=ot,s.treemapSquarify=Vt,Object.defineProperty(s,"__esModule",{value:!0})})},{}],116:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F,e("d3-color")):(s=s||self,o(s.d3=s.d3||{},s.d3))})(this,function(s,o){function h(_e,Re,Ve,Je,ze){var De=_e*_e,je=De*_e;return((1-3*_e+3*De-je)*Re+(4-6*De+3*je)*Ve+(1+3*_e+3*De-3*je)*Je+je*ze)/6}function y(_e){var Re=_e.length-1;return function(Ve){var Je=Ve<=0?Ve=0:Ve>=1?(Ve=1,Re-1):Math.floor(Ve*Re),ze=_e[Je],De=_e[Je+1],je=Je>0?_e[Je-1]:2*ze-De,dt=Je<Re-1?_e[Je+2]:2*De-ze;return h((Ve-Je/Re)*Re,je,ze,De,dt)}}function t(_e){var Re=_e.length;return function(Ve){var Je=Math.floor(((Ve%=1)<0?++Ve:Ve)*Re),ze=_e[(Je+Re-1)%Re],De=_e[Je%Re],je=_e[(Je+1)%Re],dt=_e[(Je+2)%Re];return h((Ve-Je/Re)*Re,ze,De,je,dt)}}function a(_e){return function(){return _e}}function i(_e,Re){return function(Ve){return _e+Ve*Re}}function n(_e,Re,Ve){return _e=Math.pow(_e,Ve),Re=Math.pow(Re,Ve)-_e,Ve=1/Ve,function(Je){return Math.pow(_e+Je*Re,Ve)}}function r(_e,Re){var Ve=Re-_e;return Ve?i(_e,Ve>180||Ve<-180?Ve-360*Math.round(Ve/360):Ve):a(isNaN(_e)?Re:_e)}function f(_e){return(_e=+_e)==1?u:function(Re,Ve){return Ve-Re?n(Re,Ve,_e):a(isNaN(Re)?Ve:Re)}}function u(_e,Re){var Ve=Re-_e;return Ve?i(_e,Ve):a(isNaN(_e)?Re:_e)}var l=function _e(Re){var Ve=f(Re);function Je(ze,De){var je=Ve((ze=o.rgb(ze)).r,(De=o.rgb(De)).r),dt=Ve(ze.g,De.g),Et=Ve(ze.b,De.b),$t=u(ze.opacity,De.opacity);return function(wt){return ze.r=je(wt),ze.g=dt(wt),ze.b=Et(wt),ze.opacity=$t(wt),ze+""}}return Je.gamma=_e,Je}(1);function m(_e){return function(Re){var Ve=Re.length,Je=new Array(Ve),ze=new Array(Ve),De=new Array(Ve),je,dt;for(je=0;je<Ve;++je)dt=o.rgb(Re[je]),Je[je]=dt.r||0,ze[je]=dt.g||0,De[je]=dt.b||0;return Je=_e(Je),ze=_e(ze),De=_e(De),dt.opacity=1,function(Et){return dt.r=Je(Et),dt.g=ze(Et),dt.b=De(Et),dt+""}}}var d=m(y),b=m(t);function g(_e,Re){Re||(Re=[]);var Ve=_e?Math.min(Re.length,_e.length):0,Je=Re.slice(),ze;return function(De){for(ze=0;ze<Ve;++ze)Je[ze]=_e[ze]*(1-De)+Re[ze]*De;return Je}}function _(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function p(_e,Re){return(_(Re)?g:A)(_e,Re)}function A(_e,Re){var Ve=Re?Re.length:0,Je=_e?Math.min(Ve,_e.length):0,ze=new Array(Je),De=new Array(Ve),je;for(je=0;je<Je;++je)ze[je]=E(_e[je],Re[je]);for(;je<Ve;++je)De[je]=Re[je];return function(dt){for(je=0;je<Je;++je)De[je]=ze[je](dt);return De}}function c(_e,Re){var Ve=new Date;return _e=+_e,Re=+Re,function(Je){return Ve.setTime(_e*(1-Je)+Re*Je),Ve}}function S(_e,Re){return _e=+_e,Re=+Re,function(Ve){return _e*(1-Ve)+Re*Ve}}function T(_e,Re){var Ve={},Je={},ze;(_e===null||typeof _e!="object")&&(_e={}),(Re===null||typeof Re!="object")&&(Re={});for(ze in Re)ze in _e?Ve[ze]=E(_e[ze],Re[ze]):Je[ze]=Re[ze];return function(De){for(ze in Ve)Je[ze]=Ve[ze](De);return Je}}var x=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w=new RegExp(x.source,"g");function v(_e){return function(){return _e}}function C(_e){return function(Re){return _e(Re)+""}}function M(_e,Re){var Ve=x.lastIndex=w.lastIndex=0,Je,ze,De,je=-1,dt=[],Et=[];for(_e=_e+"",Re=Re+"";(Je=x.exec(_e))&&(ze=w.exec(Re));)(De=ze.index)>Ve&&(De=Re.slice(Ve,De),dt[je]?dt[je]+=De:dt[++je]=De),(Je=Je[0])===(ze=ze[0])?dt[je]?dt[je]+=ze:dt[++je]=ze:(dt[++je]=null,Et.push({i:je,x:S(Je,ze)})),Ve=w.lastIndex;return Ve<Re.length&&(De=Re.slice(Ve),dt[je]?dt[je]+=De:dt[++je]=De),dt.length<2?Et[0]?C(Et[0].x):v(Re):(Re=Et.length,function($t){for(var wt=0,Ot;wt<Re;++wt)dt[(Ot=Et[wt]).i]=Ot.x($t);return dt.join("")})}function E(_e,Re){var Ve=typeof Re,Je;return Re==null||Ve==="boolean"?a(Re):(Ve==="number"?S:Ve==="string"?(Je=o.color(Re))?(Re=Je,l):M:Re instanceof o.color?l:Re instanceof Date?c:_(Re)?g:Array.isArray(Re)?A:typeof Re.valueOf!="function"&&typeof Re.toString!="function"||isNaN(Re)?T:S)(_e,Re)}function L(_e){var Re=_e.length;return function(Ve){return _e[Math.max(0,Math.min(Re-1,Math.floor(Ve*Re)))]}}function z(_e,Re){var Ve=r(+_e,+Re);return function(Je){var ze=Ve(Je);return ze-360*Math.floor(ze/360)}}function O(_e,Re){return _e=+_e,Re=+Re,function(Ve){return Math.round(_e*(1-Ve)+Re*Ve)}}var R=180/Math.PI,D={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function H(_e,Re,Ve,Je,ze,De){var je,dt,Et;return(je=Math.sqrt(_e*_e+Re*Re))&&(_e/=je,Re/=je),(Et=_e*Ve+Re*Je)&&(Ve-=_e*Et,Je-=Re*Et),(dt=Math.sqrt(Ve*Ve+Je*Je))&&(Ve/=dt,Je/=dt,Et/=dt),_e*Je<Re*Ve&&(_e=-_e,Re=-Re,Et=-Et,je=-je),{translateX:ze,translateY:De,rotate:Math.atan2(Re,_e)*R,skewX:Math.atan(Et)*R,scaleX:je,scaleY:dt}}var B,$,W,re;function Q(_e){return _e==="none"?D:(B||(B=document.createElement("DIV"),$=document.documentElement,W=document.defaultView),B.style.transform=_e,_e=W.getComputedStyle($.appendChild(B),null).getPropertyValue("transform"),$.removeChild(B),_e=_e.slice(7,-1).split(","),H(+_e[0],+_e[1],+_e[2],+_e[3],+_e[4],+_e[5]))}function Z(_e){return _e==null||(re||(re=document.createElementNS("http://www.w3.org/2000/svg","g")),re.setAttribute("transform",_e),!(_e=re.transform.baseVal.consolidate()))?D:(_e=_e.matrix,H(_e.a,_e.b,_e.c,_e.d,_e.e,_e.f))}function K(_e,Re,Ve,Je){function ze($t){return $t.length?$t.pop()+" ":""}function De($t,wt,Ot,Vt,kt,St){if($t!==Ot||wt!==Vt){var ot=kt.push("translate(",null,Re,null,Ve);St.push({i:ot-4,x:S($t,Ot)},{i:ot-2,x:S(wt,Vt)})}else(Ot||Vt)&&kt.push("translate("+Ot+Re+Vt+Ve)}function je($t,wt,Ot,Vt){$t!==wt?($t-wt>180?wt+=360:wt-$t>180&&($t+=360),Vt.push({i:Ot.push(ze(Ot)+"rotate(",null,Je)-2,x:S($t,wt)})):wt&&Ot.push(ze(Ot)+"rotate("+wt+Je)}function dt($t,wt,Ot,Vt){$t!==wt?Vt.push({i:Ot.push(ze(Ot)+"skewX(",null,Je)-2,x:S($t,wt)}):wt&&Ot.push(ze(Ot)+"skewX("+wt+Je)}function Et($t,wt,Ot,Vt,kt,St){if($t!==Ot||wt!==Vt){var ot=kt.push(ze(kt)+"scale(",null,",",null,")");St.push({i:ot-4,x:S($t,Ot)},{i:ot-2,x:S(wt,Vt)})}else(Ot!==1||Vt!==1)&&kt.push(ze(kt)+"scale("+Ot+","+Vt+")")}return function($t,wt){var Ot=[],Vt=[];return $t=_e($t),wt=_e(wt),De($t.translateX,$t.translateY,wt.translateX,wt.translateY,Ot,Vt),je($t.rotate,wt.rotate,Ot,Vt),dt($t.skewX,wt.skewX,Ot,Vt),Et($t.scaleX,$t.scaleY,wt.scaleX,wt.scaleY,Ot,Vt),$t=wt=null,function(kt){for(var St=-1,ot=Vt.length,ht;++St<ot;)Ot[(ht=Vt[St]).i]=ht.x(kt);return Ot.join("")}}}var le=K(Q,"px, ","px)","deg)"),fe=K(Z,", ",")",")"),ue=Math.SQRT2,V=2,j=4,ee=1e-12;function q(_e){return((_e=Math.exp(_e))+1/_e)/2}function X(_e){return((_e=Math.exp(_e))-1/_e)/2}function J(_e){return((_e=Math.exp(2*_e))-1)/(_e+1)}function ie(_e,Re){var Ve=_e[0],Je=_e[1],ze=_e[2],De=Re[0],je=Re[1],dt=Re[2],Et=De-Ve,$t=je-Je,wt=Et*Et+$t*$t,Ot,Vt;if(wt<ee)Vt=Math.log(dt/ze)/ue,Ot=function(Pe){return[Ve+Pe*Et,Je+Pe*$t,ze*Math.exp(ue*Pe*Vt)]};else{var kt=Math.sqrt(wt),St=(dt*dt-ze*ze+j*wt)/(2*ze*V*kt),ot=(dt*dt-ze*ze-j*wt)/(2*dt*V*kt),ht=Math.log(Math.sqrt(St*St+1)-St),Ke=Math.log(Math.sqrt(ot*ot+1)-ot);Vt=(Ke-ht)/ue,Ot=function(Pe){var We=Pe*Vt,Qe=q(ht),ut=ze/(V*kt)*(Qe*J(ue*We+ht)-X(ht));return[Ve+ut*Et,Je+ut*$t,ze*Qe/q(ue*We+ht)]}}return Ot.duration=Vt*1e3,Ot}function ne(_e){return function(Re,Ve){var Je=_e((Re=o.hsl(Re)).h,(Ve=o.hsl(Ve)).h),ze=u(Re.s,Ve.s),De=u(Re.l,Ve.l),je=u(Re.opacity,Ve.opacity);return function(dt){return Re.h=Je(dt),Re.s=ze(dt),Re.l=De(dt),Re.opacity=je(dt),Re+""}}}var oe=ne(r),se=ne(u);function me(_e,Re){var Ve=u((_e=o.lab(_e)).l,(Re=o.lab(Re)).l),Je=u(_e.a,Re.a),ze=u(_e.b,Re.b),De=u(_e.opacity,Re.opacity);return function(je){return _e.l=Ve(je),_e.a=Je(je),_e.b=ze(je),_e.opacity=De(je),_e+""}}function ce(_e){return function(Re,Ve){var Je=_e((Re=o.hcl(Re)).h,(Ve=o.hcl(Ve)).h),ze=u(Re.c,Ve.c),De=u(Re.l,Ve.l),je=u(Re.opacity,Ve.opacity);return function(dt){return Re.h=Je(dt),Re.c=ze(dt),Re.l=De(dt),Re.opacity=je(dt),Re+""}}}var pe=ce(r),xe=ce(u);function Se(_e){return function Re(Ve){Ve=+Ve;function Je(ze,De){var je=_e((ze=o.cubehelix(ze)).h,(De=o.cubehelix(De)).h),dt=u(ze.s,De.s),Et=u(ze.l,De.l),$t=u(ze.opacity,De.opacity);return function(wt){return ze.h=je(wt),ze.s=dt(wt),ze.l=Et(Math.pow(wt,Ve)),ze.opacity=$t(wt),ze+""}}return Je.gamma=Re,Je}(1)}var Ae=Se(r),Ce=Se(u);function Ee(_e,Re){for(var Ve=0,Je=Re.length-1,ze=Re[0],De=new Array(Je<0?0:Je);Ve<Je;)De[Ve]=_e(ze,ze=Re[++Ve]);return function(je){var dt=Math.max(0,Math.min(Je-1,Math.floor(je*=Je)));return De[dt](je-dt)}}function Oe(_e,Re){for(var Ve=new Array(Re),Je=0;Je<Re;++Je)Ve[Je]=_e(Je/(Re-1));return Ve}s.interpolate=E,s.interpolateArray=p,s.interpolateBasis=y,s.interpolateBasisClosed=t,s.interpolateCubehelix=Ae,s.interpolateCubehelixLong=Ce,s.interpolateDate=c,s.interpolateDiscrete=L,s.interpolateHcl=pe,s.interpolateHclLong=xe,s.interpolateHsl=oe,s.interpolateHslLong=se,s.interpolateHue=z,s.interpolateLab=me,s.interpolateNumber=S,s.interpolateNumberArray=g,s.interpolateObject=T,s.interpolateRgb=l,s.interpolateRgbBasis=d,s.interpolateRgbBasisClosed=b,s.interpolateRound=O,s.interpolateString=M,s.interpolateTransformCss=le,s.interpolateTransformSvg=fe,s.interpolateZoom=ie,s.piecewise=Ee,s.quantize=Oe,Object.defineProperty(s,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=s||self,o(s.d3=s.d3||{}))})(this,function(s){var o=Math.PI,h=2*o,y=1e-6,t=h-y;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new a}a.prototype=i.prototype={constructor:a,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,f,u){this._+="Q"+ +n+","+ +r+","+(this._x1=+f)+","+(this._y1=+u)},bezierCurveTo:function(n,r,f,u,l,m){this._+="C"+ +n+","+ +r+","+ +f+","+ +u+","+(this._x1=+l)+","+(this._y1=+m)},arcTo:function(n,r,f,u,l){n=+n,r=+r,f=+f,u=+u,l=+l;var m=this._x1,d=this._y1,b=f-n,g=u-r,_=m-n,p=d-r,A=_*_+p*p;if(l<0)throw new Error("negative radius: "+l);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(A>y)if(!(Math.abs(p*b-g*_)>y)||!l)this._+="L"+(this._x1=n)+","+(this._y1=r);else{var c=f-m,S=u-d,T=b*b+g*g,x=c*c+S*S,w=Math.sqrt(T),v=Math.sqrt(A),C=l*Math.tan((o-Math.acos((T+A-x)/(2*w*v)))/2),M=C/v,E=C/w;Math.abs(M-1)>y&&(this._+="L"+(n+M*_)+","+(r+M*p)),this._+="A"+l+","+l+",0,0,"+ +(p*c>_*S)+","+(this._x1=n+E*b)+","+(this._y1=r+E*g)}},arc:function(n,r,f,u,l,m){n=+n,r=+r,f=+f,m=!!m;var d=f*Math.cos(u),b=f*Math.sin(u),g=n+d,_=r+b,p=1^m,A=m?u-l:l-u;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+g+","+_:(Math.abs(this._x1-g)>y||Math.abs(this._y1-_)>y)&&(this._+="L"+g+","+_),f&&(A<0&&(A=A%h+h),A>t?this._+="A"+f+","+f+",0,1,"+p+","+(n-d)+","+(r-b)+"A"+f+","+f+",0,1,"+p+","+(this._x1=g)+","+(this._y1=_):A>y&&(this._+="A"+f+","+f+",0,"+ +(A>=o)+","+p+","+(this._x1=n+f*Math.cos(l))+","+(this._y1=r+f*Math.sin(l))))},rect:function(n,r,f,u){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +f+"v"+ +u+"h"+-f+"Z"},toString:function(){return this._}},s.path=i,Object.defineProperty(s,"__esModule",{value:!0})})},{}],118:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=s||self,o(s.d3=s.d3||{}))})(this,function(s){function o(w){var v=+this._x.call(null,w),C=+this._y.call(null,w);return h(this.cover(v,C),v,C,w)}function h(w,v,C,M){if(isNaN(v)||isNaN(C))return w;var E,L=w._root,z={data:M},O=w._x0,R=w._y0,D=w._x1,H=w._y1,B,$,W,re,Q,Z,K,le;if(!L)return w._root=z,w;for(;L.length;)if((Q=v>=(B=(O+D)/2))?O=B:D=B,(Z=C>=($=(R+H)/2))?R=$:H=$,E=L,!(L=L[K=Z<<1|Q]))return E[K]=z,w;if(W=+w._x.call(null,L.data),re=+w._y.call(null,L.data),v===W&&C===re)return z.next=L,E?E[K]=z:w._root=z,w;do E=E?E[K]=new Array(4):w._root=new Array(4),(Q=v>=(B=(O+D)/2))?O=B:D=B,(Z=C>=($=(R+H)/2))?R=$:H=$;while((K=Z<<1|Q)===(le=(re>=$)<<1|W>=B));return E[le]=L,E[K]=z,w}function y(w){var v,C,M=w.length,E,L,z=new Array(M),O=new Array(M),R=1/0,D=1/0,H=-1/0,B=-1/0;for(C=0;C<M;++C)isNaN(E=+this._x.call(null,v=w[C]))||isNaN(L=+this._y.call(null,v))||(z[C]=E,O[C]=L,E<R&&(R=E),E>H&&(H=E),L<D&&(D=L),L>B&&(B=L));if(R>H||D>B)return this;for(this.cover(R,D).cover(H,B),C=0;C<M;++C)h(this,z[C],O[C],w[C]);return this}function t(w,v){if(isNaN(w=+w)||isNaN(v=+v))return this;var C=this._x0,M=this._y0,E=this._x1,L=this._y1;if(isNaN(C))E=(C=Math.floor(w))+1,L=(M=Math.floor(v))+1;else{for(var z=E-C,O=this._root,R,D;C>w||w>=E||M>v||v>=L;)switch(D=(v<M)<<1|w<C,R=new Array(4),R[D]=O,O=R,z*=2,D){case 0:E=C+z,L=M+z;break;case 1:C=E-z,L=M+z;break;case 2:E=C+z,M=L-z;break;case 3:C=E-z,M=L-z;break}this._root&&this._root.length&&(this._root=O)}return this._x0=C,this._y0=M,this._x1=E,this._y1=L,this}function a(){var w=[];return this.visit(function(v){if(!v.length)do w.push(v.data);while(v=v.next)}),w}function i(w){return arguments.length?this.cover(+w[0][0],+w[0][1]).cover(+w[1][0],+w[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function n(w,v,C,M,E){this.node=w,this.x0=v,this.y0=C,this.x1=M,this.y1=E}function r(w,v,C){var M,E=this._x0,L=this._y0,z,O,R,D,H=this._x1,B=this._y1,$=[],W=this._root,re,Q;for(W&&$.push(new n(W,E,L,H,B)),C==null?C=1/0:(E=w-C,L=v-C,H=w+C,B=v+C,C*=C);re=$.pop();)if(!(!(W=re.node)||(z=re.x0)>H||(O=re.y0)>B||(R=re.x1)<E||(D=re.y1)<L))if(W.length){var Z=(z+R)/2,K=(O+D)/2;$.push(new n(W[3],Z,K,R,D),new n(W[2],z,K,Z,D),new n(W[1],Z,O,R,K),new n(W[0],z,O,Z,K)),(Q=(v>=K)<<1|w>=Z)&&(re=$[$.length-1],$[$.length-1]=$[$.length-1-Q],$[$.length-1-Q]=re)}else{var le=w-+this._x.call(null,W.data),fe=v-+this._y.call(null,W.data),ue=le*le+fe*fe;if(ue<C){var V=Math.sqrt(C=ue);E=w-V,L=v-V,H=w+V,B=v+V,M=W.data}}return M}function f(w){if(isNaN(H=+this._x.call(null,w))||isNaN(B=+this._y.call(null,w)))return this;var v,C=this._root,M,E,L,z=this._x0,O=this._y0,R=this._x1,D=this._y1,H,B,$,W,re,Q,Z,K;if(!C)return this;if(C.length)for(;;){if((re=H>=($=(z+R)/2))?z=$:R=$,(Q=B>=(W=(O+D)/2))?O=W:D=W,v=C,!(C=C[Z=Q<<1|re]))return this;if(!C.length)break;(v[Z+1&3]||v[Z+2&3]||v[Z+3&3])&&(M=v,K=Z)}for(;C.data!==w;)if(E=C,!(C=C.next))return this;return(L=C.next)&&delete C.next,E?(L?E.next=L:delete E.next,this):v?(L?v[Z]=L:delete v[Z],(C=v[0]||v[1]||v[2]||v[3])&&C===(v[3]||v[2]||v[1]||v[0])&&!C.length&&(M?M[K]=C:this._root=C),this):(this._root=L,this)}function u(w){for(var v=0,C=w.length;v<C;++v)this.remove(w[v]);return this}function l(){return this._root}function m(){var w=0;return this.visit(function(v){if(!v.length)do++w;while(v=v.next)}),w}function d(w){var v=[],C,M=this._root,E,L,z,O,R;for(M&&v.push(new n(M,this._x0,this._y0,this._x1,this._y1));C=v.pop();)if(!w(M=C.node,L=C.x0,z=C.y0,O=C.x1,R=C.y1)&&M.length){var D=(L+O)/2,H=(z+R)/2;(E=M[3])&&v.push(new n(E,D,H,O,R)),(E=M[2])&&v.push(new n(E,L,H,D,R)),(E=M[1])&&v.push(new n(E,D,z,O,H)),(E=M[0])&&v.push(new n(E,L,z,D,H))}return this}function b(w){var v=[],C=[],M;for(this._root&&v.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));M=v.pop();){var E=M.node;if(E.length){var L,z=M.x0,O=M.y0,R=M.x1,D=M.y1,H=(z+R)/2,B=(O+D)/2;(L=E[0])&&v.push(new n(L,z,O,H,B)),(L=E[1])&&v.push(new n(L,H,O,R,B)),(L=E[2])&&v.push(new n(L,z,B,H,D)),(L=E[3])&&v.push(new n(L,H,B,R,D))}C.push(M)}for(;M=C.pop();)w(M.node,M.x0,M.y0,M.x1,M.y1);return this}function g(w){return w[0]}function _(w){return arguments.length?(this._x=w,this):this._x}function p(w){return w[1]}function A(w){return arguments.length?(this._y=w,this):this._y}function c(w,v,C){var M=new S(v==null?g:v,C==null?p:C,NaN,NaN,NaN,NaN);return w==null?M:M.addAll(w)}function S(w,v,C,M,E,L){this._x=w,this._y=v,this._x0=C,this._y0=M,this._x1=E,this._y1=L,this._root=void 0}function T(w){for(var v={data:w.data},C=v;w=w.next;)C=C.next={data:w.data};return v}var x=c.prototype=S.prototype;x.copy=function(){var w=new S(this._x,this._y,this._x0,this._y0,this._x1,this._y1),v=this._root,C,M;if(!v)return w;if(!v.length)return w._root=T(v),w;for(C=[{source:v,target:w._root=new Array(4)}];v=C.pop();)for(var E=0;E<4;++E)(M=v.source[E])&&(M.length?C.push({source:M,target:v.target[E]=new Array(4)}):v.target[E]=T(M));return w},x.add=o,x.addAll=y,x.cover=t,x.data=a,x.extent=i,x.find=r,x.remove=f,x.removeAll=u,x.root=l,x.size=m,x.visit=d,x.visitAfter=b,x.x=_,x.y=A,s.quadtree=c,Object.defineProperty(s,"__esModule",{value:!0})})},{}],119:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F,e("d3-path")):(s=s||self,o(s.d3=s.d3||{},s.d3))})(this,function(s,o){function h(nt){return function(){return nt}}var y=Math.abs,t=Math.atan2,a=Math.cos,i=Math.max,n=Math.min,r=Math.sin,f=Math.sqrt,u=1e-12,l=Math.PI,m=l/2,d=2*l;function b(nt){return nt>1?0:nt<-1?l:Math.acos(nt)}function g(nt){return nt>=1?m:nt<=-1?-m:Math.asin(nt)}function _(nt){return nt.innerRadius}function p(nt){return nt.outerRadius}function A(nt){return nt.startAngle}function c(nt){return nt.endAngle}function S(nt){return nt&&nt.padAngle}function T(nt,Rt,Jt,hr,Dr,Gr,Rr,Ct){var tr=Jt-nt,Lr=hr-Rt,Nr=Rr-Dr,Tn=Ct-Gr,rn=Tn*tr-Nr*Lr;if(!(rn*rn<u))return rn=(Nr*(Rt-Gr)-Tn*(nt-Dr))/rn,[nt+rn*tr,Rt+rn*Lr]}function x(nt,Rt,Jt,hr,Dr,Gr,Rr){var Ct=nt-Jt,tr=Rt-hr,Lr=(Rr?Gr:-Gr)/f(Ct*Ct+tr*tr),Nr=Lr*tr,Tn=-Lr*Ct,rn=nt+Nr,kn=Rt+Tn,Cn=Jt+Nr,oa=hr+Tn,ya=(rn+Cn)/2,Oa=(kn+oa)/2,Xa=Cn-rn,za=oa-kn,Pa=Xa*Xa+za*za,Ar=Dr-Gr,nn=rn*oa-Cn*kn,vn=(za<0?-1:1)*f(i(0,Ar*Ar*Pa-nn*nn)),Mn=(nn*za-Xa*vn)/Pa,Gn=(-nn*Xa-za*vn)/Pa,la=(nn*za+Xa*vn)/Pa,na=(-nn*Xa+za*vn)/Pa,Nn=Mn-ya,Kn=Gn-Oa,Va=la-ya,mi=na-Oa;return Nn*Nn+Kn*Kn>Va*Va+mi*mi&&(Mn=la,Gn=na),{cx:Mn,cy:Gn,x01:-Nr,y01:-Tn,x11:Mn*(Dr/Ar-1),y11:Gn*(Dr/Ar-1)}}function w(){var nt=_,Rt=p,Jt=h(0),hr=null,Dr=A,Gr=c,Rr=S,Ct=null;function tr(){var Lr,Nr,Tn=+nt.apply(this,arguments),rn=+Rt.apply(this,arguments),kn=Dr.apply(this,arguments)-m,Cn=Gr.apply(this,arguments)-m,oa=y(Cn-kn),ya=Cn>kn;if(Ct||(Ct=Lr=o.path()),rn<Tn&&(Nr=rn,rn=Tn,Tn=Nr),!(rn>u))Ct.moveTo(0,0);else if(oa>d-u)Ct.moveTo(rn*a(kn),rn*r(kn)),Ct.arc(0,0,rn,kn,Cn,!ya),Tn>u&&(Ct.moveTo(Tn*a(Cn),Tn*r(Cn)),Ct.arc(0,0,Tn,Cn,kn,ya));else{var Oa=kn,Xa=Cn,za=kn,Pa=Cn,Ar=oa,nn=oa,vn=Rr.apply(this,arguments)/2,Mn=vn>u&&(hr?+hr.apply(this,arguments):f(Tn*Tn+rn*rn)),Gn=n(y(rn-Tn)/2,+Jt.apply(this,arguments)),la=Gn,na=Gn,Nn,Kn;if(Mn>u){var Va=g(Mn/Tn*r(vn)),mi=g(Mn/rn*r(vn));(Ar-=Va*2)>u?(Va*=ya?1:-1,za+=Va,Pa-=Va):(Ar=0,za=Pa=(kn+Cn)/2),(nn-=mi*2)>u?(mi*=ya?1:-1,Oa+=mi,Xa-=mi):(nn=0,Oa=Xa=(kn+Cn)/2)}var Nt=rn*a(Oa),yr=rn*r(Oa),fn=Tn*a(Pa),mn=Tn*r(Pa);if(Gn>u){var gn=rn*a(Xa),Dn=rn*r(Xa),En=Tn*a(za),dn=Tn*r(za),br;if(oa<l&&(br=T(Nt,yr,En,dn,gn,Dn,fn,mn))){var xr=Nt-br[0],Fr=yr-br[1],bn=gn-br[0],Hn=Dn-br[1],ra=1/r(b((xr*bn+Fr*Hn)/(f(xr*xr+Fr*Fr)*f(bn*bn+Hn*Hn)))/2),Sn=f(br[0]*br[0]+br[1]*br[1]);la=n(Gn,(Tn-Sn)/(ra-1)),na=n(Gn,(rn-Sn)/(ra+1))}}nn>u?na>u?(Nn=x(En,dn,Nt,yr,rn,na,ya),Kn=x(gn,Dn,fn,mn,rn,na,ya),Ct.moveTo(Nn.cx+Nn.x01,Nn.cy+Nn.y01),na<Gn?Ct.arc(Nn.cx,Nn.cy,na,t(Nn.y01,Nn.x01),t(Kn.y01,Kn.x01),!ya):(Ct.arc(Nn.cx,Nn.cy,na,t(Nn.y01,Nn.x01),t(Nn.y11,Nn.x11),!ya),Ct.arc(0,0,rn,t(Nn.cy+Nn.y11,Nn.cx+Nn.x11),t(Kn.cy+Kn.y11,Kn.cx+Kn.x11),!ya),Ct.arc(Kn.cx,Kn.cy,na,t(Kn.y11,Kn.x11),t(Kn.y01,Kn.x01),!ya))):(Ct.moveTo(Nt,yr),Ct.arc(0,0,rn,Oa,Xa,!ya)):Ct.moveTo(Nt,yr),!(Tn>u)||!(Ar>u)?Ct.lineTo(fn,mn):la>u?(Nn=x(fn,mn,gn,Dn,Tn,-la,ya),Kn=x(Nt,yr,En,dn,Tn,-la,ya),Ct.lineTo(Nn.cx+Nn.x01,Nn.cy+Nn.y01),la<Gn?Ct.arc(Nn.cx,Nn.cy,la,t(Nn.y01,Nn.x01),t(Kn.y01,Kn.x01),!ya):(Ct.arc(Nn.cx,Nn.cy,la,t(Nn.y01,Nn.x01),t(Nn.y11,Nn.x11),!ya),Ct.arc(0,0,Tn,t(Nn.cy+Nn.y11,Nn.cx+Nn.x11),t(Kn.cy+Kn.y11,Kn.cx+Kn.x11),ya),Ct.arc(Kn.cx,Kn.cy,la,t(Kn.y11,Kn.x11),t(Kn.y01,Kn.x01),!ya))):Ct.arc(0,0,Tn,Pa,za,ya)}if(Ct.closePath(),Lr)return Ct=null,Lr+""||null}return tr.centroid=function(){var Lr=(+nt.apply(this,arguments)+ +Rt.apply(this,arguments))/2,Nr=(+Dr.apply(this,arguments)+ +Gr.apply(this,arguments))/2-l/2;return[a(Nr)*Lr,r(Nr)*Lr]},tr.innerRadius=function(Lr){return arguments.length?(nt=typeof Lr=="function"?Lr:h(+Lr),tr):nt},tr.outerRadius=function(Lr){return arguments.length?(Rt=typeof Lr=="function"?Lr:h(+Lr),tr):Rt},tr.cornerRadius=function(Lr){return arguments.length?(Jt=typeof Lr=="function"?Lr:h(+Lr),tr):Jt},tr.padRadius=function(Lr){return arguments.length?(hr=Lr==null?null:typeof Lr=="function"?Lr:h(+Lr),tr):hr},tr.startAngle=function(Lr){return arguments.length?(Dr=typeof Lr=="function"?Lr:h(+Lr),tr):Dr},tr.endAngle=function(Lr){return arguments.length?(Gr=typeof Lr=="function"?Lr:h(+Lr),tr):Gr},tr.padAngle=function(Lr){return arguments.length?(Rr=typeof Lr=="function"?Lr:h(+Lr),tr):Rr},tr.context=function(Lr){return arguments.length?(Ct=Lr==null?null:Lr,tr):Ct},tr}function v(nt){this._context=nt}v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Rt){switch(nt=+nt,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Rt):this._context.moveTo(nt,Rt);break;case 1:this._point=2;default:this._context.lineTo(nt,Rt);break}}};function C(nt){return new v(nt)}function M(nt){return nt[0]}function E(nt){return nt[1]}function L(){var nt=M,Rt=E,Jt=h(!0),hr=null,Dr=C,Gr=null;function Rr(Ct){var tr,Lr=Ct.length,Nr,Tn=!1,rn;for(hr==null&&(Gr=Dr(rn=o.path())),tr=0;tr<=Lr;++tr)!(tr<Lr&&Jt(Nr=Ct[tr],tr,Ct))===Tn&&((Tn=!Tn)?Gr.lineStart():Gr.lineEnd()),Tn&&Gr.point(+nt(Nr,tr,Ct),+Rt(Nr,tr,Ct));if(rn)return Gr=null,rn+""||null}return Rr.x=function(Ct){return arguments.length?(nt=typeof Ct=="function"?Ct:h(+Ct),Rr):nt},Rr.y=function(Ct){return arguments.length?(Rt=typeof Ct=="function"?Ct:h(+Ct),Rr):Rt},Rr.defined=function(Ct){return arguments.length?(Jt=typeof Ct=="function"?Ct:h(!!Ct),Rr):Jt},Rr.curve=function(Ct){return arguments.length?(Dr=Ct,hr!=null&&(Gr=Dr(hr)),Rr):Dr},Rr.context=function(Ct){return arguments.length?(Ct==null?hr=Gr=null:Gr=Dr(hr=Ct),Rr):hr},Rr}function z(){var nt=M,Rt=null,Jt=h(0),hr=E,Dr=h(!0),Gr=null,Rr=C,Ct=null;function tr(Nr){var Tn,rn,kn,Cn=Nr.length,oa,ya=!1,Oa,Xa=new Array(Cn),za=new Array(Cn);for(Gr==null&&(Ct=Rr(Oa=o.path())),Tn=0;Tn<=Cn;++Tn){if(!(Tn<Cn&&Dr(oa=Nr[Tn],Tn,Nr))===ya)if(ya=!ya)rn=Tn,Ct.areaStart(),Ct.lineStart();else{for(Ct.lineEnd(),Ct.lineStart(),kn=Tn-1;kn>=rn;--kn)Ct.point(Xa[kn],za[kn]);Ct.lineEnd(),Ct.areaEnd()}ya&&(Xa[Tn]=+nt(oa,Tn,Nr),za[Tn]=+Jt(oa,Tn,Nr),Ct.point(Rt?+Rt(oa,Tn,Nr):Xa[Tn],hr?+hr(oa,Tn,Nr):za[Tn]))}if(Oa)return Ct=null,Oa+""||null}function Lr(){return L().defined(Dr).curve(Rr).context(Gr)}return tr.x=function(Nr){return arguments.length?(nt=typeof Nr=="function"?Nr:h(+Nr),Rt=null,tr):nt},tr.x0=function(Nr){return arguments.length?(nt=typeof Nr=="function"?Nr:h(+Nr),tr):nt},tr.x1=function(Nr){return arguments.length?(Rt=Nr==null?null:typeof Nr=="function"?Nr:h(+Nr),tr):Rt},tr.y=function(Nr){return arguments.length?(Jt=typeof Nr=="function"?Nr:h(+Nr),hr=null,tr):Jt},tr.y0=function(Nr){return arguments.length?(Jt=typeof Nr=="function"?Nr:h(+Nr),tr):Jt},tr.y1=function(Nr){return arguments.length?(hr=Nr==null?null:typeof Nr=="function"?Nr:h(+Nr),tr):hr},tr.lineX0=tr.lineY0=function(){return Lr().x(nt).y(Jt)},tr.lineY1=function(){return Lr().x(nt).y(hr)},tr.lineX1=function(){return Lr().x(Rt).y(Jt)},tr.defined=function(Nr){return arguments.length?(Dr=typeof Nr=="function"?Nr:h(!!Nr),tr):Dr},tr.curve=function(Nr){return arguments.length?(Rr=Nr,Gr!=null&&(Ct=Rr(Gr)),tr):Rr},tr.context=function(Nr){return arguments.length?(Nr==null?Gr=Ct=null:Ct=Rr(Gr=Nr),tr):Gr},tr}function O(nt,Rt){return Rt<nt?-1:Rt>nt?1:Rt>=nt?0:NaN}function R(nt){return nt}function D(){var nt=R,Rt=O,Jt=null,hr=h(0),Dr=h(d),Gr=h(0);function Rr(Ct){var tr,Lr=Ct.length,Nr,Tn,rn=0,kn=new Array(Lr),Cn=new Array(Lr),oa=+hr.apply(this,arguments),ya=Math.min(d,Math.max(-d,Dr.apply(this,arguments)-oa)),Oa,Xa=Math.min(Math.abs(ya)/Lr,Gr.apply(this,arguments)),za=Xa*(ya<0?-1:1),Pa;for(tr=0;tr<Lr;++tr)(Pa=Cn[kn[tr]=tr]=+nt(Ct[tr],tr,Ct))>0&&(rn+=Pa);for(Rt!=null?kn.sort(function(Ar,nn){return Rt(Cn[Ar],Cn[nn])}):Jt!=null&&kn.sort(function(Ar,nn){return Jt(Ct[Ar],Ct[nn])}),tr=0,Tn=rn?(ya-Lr*za)/rn:0;tr<Lr;++tr,oa=Oa)Nr=kn[tr],Pa=Cn[Nr],Oa=oa+(Pa>0?Pa*Tn:0)+za,Cn[Nr]={data:Ct[Nr],index:tr,value:Pa,startAngle:oa,endAngle:Oa,padAngle:Xa};return Cn}return Rr.value=function(Ct){return arguments.length?(nt=typeof Ct=="function"?Ct:h(+Ct),Rr):nt},Rr.sortValues=function(Ct){return arguments.length?(Rt=Ct,Jt=null,Rr):Rt},Rr.sort=function(Ct){return arguments.length?(Jt=Ct,Rt=null,Rr):Jt},Rr.startAngle=function(Ct){return arguments.length?(hr=typeof Ct=="function"?Ct:h(+Ct),Rr):hr},Rr.endAngle=function(Ct){return arguments.length?(Dr=typeof Ct=="function"?Ct:h(+Ct),Rr):Dr},Rr.padAngle=function(Ct){return arguments.length?(Gr=typeof Ct=="function"?Ct:h(+Ct),Rr):Gr},Rr}var H=$(C);function B(nt){this._curve=nt}B.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(nt,Rt){this._curve.point(Rt*Math.sin(nt),Rt*-Math.cos(nt))}};function $(nt){function Rt(Jt){return new B(nt(Jt))}return Rt._curve=nt,Rt}function W(nt){var Rt=nt.curve;return nt.angle=nt.x,delete nt.x,nt.radius=nt.y,delete nt.y,nt.curve=function(Jt){return arguments.length?Rt($(Jt)):Rt()._curve},nt}function re(){return W(L().curve(H))}function Q(){var nt=z().curve(H),Rt=nt.curve,Jt=nt.lineX0,hr=nt.lineX1,Dr=nt.lineY0,Gr=nt.lineY1;return nt.angle=nt.x,delete nt.x,nt.startAngle=nt.x0,delete nt.x0,nt.endAngle=nt.x1,delete nt.x1,nt.radius=nt.y,delete nt.y,nt.innerRadius=nt.y0,delete nt.y0,nt.outerRadius=nt.y1,delete nt.y1,nt.lineStartAngle=function(){return W(Jt())},delete nt.lineX0,nt.lineEndAngle=function(){return W(hr())},delete nt.lineX1,nt.lineInnerRadius=function(){return W(Dr())},delete nt.lineY0,nt.lineOuterRadius=function(){return W(Gr())},delete nt.lineY1,nt.curve=function(Rr){return arguments.length?Rt($(Rr)):Rt()._curve},nt}function Z(nt,Rt){return[(Rt=+Rt)*Math.cos(nt-=Math.PI/2),Rt*Math.sin(nt)]}var K=Array.prototype.slice;function le(nt){return nt.source}function fe(nt){return nt.target}function ue(nt){var Rt=le,Jt=fe,hr=M,Dr=E,Gr=null;function Rr(){var Ct,tr=K.call(arguments),Lr=Rt.apply(this,tr),Nr=Jt.apply(this,tr);if(Gr||(Gr=Ct=o.path()),nt(Gr,+hr.apply(this,(tr[0]=Lr,tr)),+Dr.apply(this,tr),+hr.apply(this,(tr[0]=Nr,tr)),+Dr.apply(this,tr)),Ct)return Gr=null,Ct+""||null}return Rr.source=function(Ct){return arguments.length?(Rt=Ct,Rr):Rt},Rr.target=function(Ct){return arguments.length?(Jt=Ct,Rr):Jt},Rr.x=function(Ct){return arguments.length?(hr=typeof Ct=="function"?Ct:h(+Ct),Rr):hr},Rr.y=function(Ct){return arguments.length?(Dr=typeof Ct=="function"?Ct:h(+Ct),Rr):Dr},Rr.context=function(Ct){return arguments.length?(Gr=Ct==null?null:Ct,Rr):Gr},Rr}function V(nt,Rt,Jt,hr,Dr){nt.moveTo(Rt,Jt),nt.bezierCurveTo(Rt=(Rt+hr)/2,Jt,Rt,Dr,hr,Dr)}function j(nt,Rt,Jt,hr,Dr){nt.moveTo(Rt,Jt),nt.bezierCurveTo(Rt,Jt=(Jt+Dr)/2,hr,Jt,hr,Dr)}function ee(nt,Rt,Jt,hr,Dr){var Gr=Z(Rt,Jt),Rr=Z(Rt,Jt=(Jt+Dr)/2),Ct=Z(hr,Jt),tr=Z(hr,Dr);nt.moveTo(Gr[0],Gr[1]),nt.bezierCurveTo(Rr[0],Rr[1],Ct[0],Ct[1],tr[0],tr[1])}function q(){return ue(V)}function X(){return ue(j)}function J(){var nt=ue(ee);return nt.angle=nt.x,delete nt.x,nt.radius=nt.y,delete nt.y,nt}var ie={draw:function(nt,Rt){var Jt=Math.sqrt(Rt/l);nt.moveTo(Jt,0),nt.arc(0,0,Jt,0,d)}},ne={draw:function(nt,Rt){var Jt=Math.sqrt(Rt/5)/2;nt.moveTo(-3*Jt,-Jt),nt.lineTo(-Jt,-Jt),nt.lineTo(-Jt,-3*Jt),nt.lineTo(Jt,-3*Jt),nt.lineTo(Jt,-Jt),nt.lineTo(3*Jt,-Jt),nt.lineTo(3*Jt,Jt),nt.lineTo(Jt,Jt),nt.lineTo(Jt,3*Jt),nt.lineTo(-Jt,3*Jt),nt.lineTo(-Jt,Jt),nt.lineTo(-3*Jt,Jt),nt.closePath()}},oe=Math.sqrt(1/3),se=oe*2,me={draw:function(nt,Rt){var Jt=Math.sqrt(Rt/se),hr=Jt*oe;nt.moveTo(0,-Jt),nt.lineTo(hr,0),nt.lineTo(0,Jt),nt.lineTo(-hr,0),nt.closePath()}},ce=.8908130915292852,pe=Math.sin(l/10)/Math.sin(7*l/10),xe=Math.sin(d/10)*pe,Se=-Math.cos(d/10)*pe,Ae={draw:function(nt,Rt){var Jt=Math.sqrt(Rt*ce),hr=xe*Jt,Dr=Se*Jt;nt.moveTo(0,-Jt),nt.lineTo(hr,Dr);for(var Gr=1;Gr<5;++Gr){var Rr=d*Gr/5,Ct=Math.cos(Rr),tr=Math.sin(Rr);nt.lineTo(tr*Jt,-Ct*Jt),nt.lineTo(Ct*hr-tr*Dr,tr*hr+Ct*Dr)}nt.closePath()}},Ce={draw:function(nt,Rt){var Jt=Math.sqrt(Rt),hr=-Jt/2;nt.rect(hr,hr,Jt,Jt)}},Ee=Math.sqrt(3),Oe={draw:function(nt,Rt){var Jt=-Math.sqrt(Rt/(Ee*3));nt.moveTo(0,Jt*2),nt.lineTo(-Ee*Jt,-Jt),nt.lineTo(Ee*Jt,-Jt),nt.closePath()}},_e=-.5,Re=Math.sqrt(3)/2,Ve=1/Math.sqrt(12),Je=(Ve/2+1)*3,ze={draw:function(nt,Rt){var Jt=Math.sqrt(Rt/Je),hr=Jt/2,Dr=Jt*Ve,Gr=hr,Rr=Jt*Ve+Jt,Ct=-Gr,tr=Rr;nt.moveTo(hr,Dr),nt.lineTo(Gr,Rr),nt.lineTo(Ct,tr),nt.lineTo(_e*hr-Re*Dr,Re*hr+_e*Dr),nt.lineTo(_e*Gr-Re*Rr,Re*Gr+_e*Rr),nt.lineTo(_e*Ct-Re*tr,Re*Ct+_e*tr),nt.lineTo(_e*hr+Re*Dr,_e*Dr-Re*hr),nt.lineTo(_e*Gr+Re*Rr,_e*Rr-Re*Gr),nt.lineTo(_e*Ct+Re*tr,_e*tr-Re*Ct),nt.closePath()}},De=[ie,ne,me,Ce,Ae,Oe,ze];function je(){var nt=h(ie),Rt=h(64),Jt=null;function hr(){var Dr;if(Jt||(Jt=Dr=o.path()),nt.apply(this,arguments).draw(Jt,+Rt.apply(this,arguments)),Dr)return Jt=null,Dr+""||null}return hr.type=function(Dr){return arguments.length?(nt=typeof Dr=="function"?Dr:h(Dr),hr):nt},hr.size=function(Dr){return arguments.length?(Rt=typeof Dr=="function"?Dr:h(+Dr),hr):Rt},hr.context=function(Dr){return arguments.length?(Jt=Dr==null?null:Dr,hr):Jt},hr}function dt(){}function Et(nt,Rt,Jt){nt._context.bezierCurveTo((2*nt._x0+nt._x1)/3,(2*nt._y0+nt._y1)/3,(nt._x0+2*nt._x1)/3,(nt._y0+2*nt._y1)/3,(nt._x0+4*nt._x1+Rt)/6,(nt._y0+4*nt._y1+Jt)/6)}function $t(nt){this._context=nt}$t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Et(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Rt){switch(nt=+nt,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Rt):this._context.moveTo(nt,Rt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Et(this,nt,Rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=Rt}};function wt(nt){return new $t(nt)}function Ot(nt){this._context=nt}Ot.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(nt,Rt){switch(nt=+nt,Rt=+Rt,this._point){case 0:this._point=1,this._x2=nt,this._y2=Rt;break;case 1:this._point=2,this._x3=nt,this._y3=Rt;break;case 2:this._point=3,this._x4=nt,this._y4=Rt,this._context.moveTo((this._x0+4*this._x1+nt)/6,(this._y0+4*this._y1+Rt)/6);break;default:Et(this,nt,Rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=Rt}};function Vt(nt){return new Ot(nt)}function kt(nt){this._context=nt}kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Rt){switch(nt=+nt,Rt=+Rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Jt=(this._x0+4*this._x1+nt)/6,hr=(this._y0+4*this._y1+Rt)/6;this._line?this._context.lineTo(Jt,hr):this._context.moveTo(Jt,hr);break;case 3:this._point=4;default:Et(this,nt,Rt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=Rt}};function St(nt){return new kt(nt)}function ot(nt,Rt){this._basis=new $t(nt),this._beta=Rt}ot.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var nt=this._x,Rt=this._y,Jt=nt.length-1;if(Jt>0)for(var hr=nt[0],Dr=Rt[0],Gr=nt[Jt]-hr,Rr=Rt[Jt]-Dr,Ct=-1,tr;++Ct<=Jt;)tr=Ct/Jt,this._basis.point(this._beta*nt[Ct]+(1-this._beta)*(hr+tr*Gr),this._beta*Rt[Ct]+(1-this._beta)*(Dr+tr*Rr));this._x=this._y=null,this._basis.lineEnd()},point:function(nt,Rt){this._x.push(+nt),this._y.push(+Rt)}};var ht=function nt(Rt){function Jt(hr){return Rt===1?new $t(hr):new ot(hr,Rt)}return Jt.beta=function(hr){return nt(+hr)},Jt}(.85);function Ke(nt,Rt,Jt){nt._context.bezierCurveTo(nt._x1+nt._k*(nt._x2-nt._x0),nt._y1+nt._k*(nt._y2-nt._y0),nt._x2+nt._k*(nt._x1-Rt),nt._y2+nt._k*(nt._y1-Jt),nt._x2,nt._y2)}function Pe(nt,Rt){this._context=nt,this._k=(1-Rt)/6}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ke(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Rt){switch(nt=+nt,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Rt):this._context.moveTo(nt,Rt);break;case 1:this._point=2,this._x1=nt,this._y1=Rt;break;case 2:this._point=3;default:Ke(this,nt,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var We=function nt(Rt){function Jt(hr){return new Pe(hr,Rt)}return Jt.tension=function(hr){return nt(+hr)},Jt}(0);function Qe(nt,Rt){this._context=nt,this._k=(1-Rt)/6}Qe.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,Rt){switch(nt=+nt,Rt=+Rt,this._point){case 0:this._point=1,this._x3=nt,this._y3=Rt;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=Rt);break;case 2:this._point=3,this._x5=nt,this._y5=Rt;break;default:Ke(this,nt,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var ut=function nt(Rt){function Jt(hr){return new Qe(hr,Rt)}return Jt.tension=function(hr){return nt(+hr)},Jt}(0);function It(nt,Rt){this._context=nt,this._k=(1-Rt)/6}It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Rt){switch(nt=+nt,Rt=+Rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ke(this,nt,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var Tt=function nt(Rt){function Jt(hr){return new It(hr,Rt)}return Jt.tension=function(hr){return nt(+hr)},Jt}(0);function Bt(nt,Rt,Jt){var hr=nt._x1,Dr=nt._y1,Gr=nt._x2,Rr=nt._y2;if(nt._l01_a>u){var Ct=2*nt._l01_2a+3*nt._l01_a*nt._l12_a+nt._l12_2a,tr=3*nt._l01_a*(nt._l01_a+nt._l12_a);hr=(hr*Ct-nt._x0*nt._l12_2a+nt._x2*nt._l01_2a)/tr,Dr=(Dr*Ct-nt._y0*nt._l12_2a+nt._y2*nt._l01_2a)/tr}if(nt._l23_a>u){var Lr=2*nt._l23_2a+3*nt._l23_a*nt._l12_a+nt._l12_2a,Nr=3*nt._l23_a*(nt._l23_a+nt._l12_a);Gr=(Gr*Lr+nt._x1*nt._l23_2a-Rt*nt._l12_2a)/Nr,Rr=(Rr*Lr+nt._y1*nt._l23_2a-Jt*nt._l12_2a)/Nr}nt._context.bezierCurveTo(hr,Dr,Gr,Rr,nt._x2,nt._y2)}function rr(nt,Rt){this._context=nt,this._alpha=Rt}rr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Rt){if(nt=+nt,Rt=+Rt,this._point){var Jt=this._x2-nt,hr=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Jt*Jt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Rt):this._context.moveTo(nt,Rt);break;case 1:this._point=2;break;case 2:this._point=3;default:Bt(this,nt,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var Ut=function nt(Rt){function Jt(hr){return Rt?new rr(hr,Rt):new Pe(hr,0)}return Jt.alpha=function(hr){return nt(+hr)},Jt}(.5);function Qt(nt,Rt){this._context=nt,this._alpha=Rt}Qt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,Rt){if(nt=+nt,Rt=+Rt,this._point){var Jt=this._x2-nt,hr=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Jt*Jt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=nt,this._y3=Rt;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=Rt);break;case 2:this._point=3,this._x5=nt,this._y5=Rt;break;default:Bt(this,nt,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var ar=function nt(Rt){function Jt(hr){return Rt?new Qt(hr,Rt):new Qe(hr,0)}return Jt.alpha=function(hr){return nt(+hr)},Jt}(.5);function nr(nt,Rt){this._context=nt,this._alpha=Rt}nr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Rt){if(nt=+nt,Rt=+Rt,this._point){var Jt=this._x2-nt,hr=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Jt*Jt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Bt(this,nt,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var cr=function nt(Rt){function Jt(hr){return Rt?new nr(hr,Rt):new It(hr,0)}return Jt.alpha=function(hr){return nt(+hr)},Jt}(.5);function Kr(nt){this._context=nt}Kr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(nt,Rt){nt=+nt,Rt=+Rt,this._point?this._context.lineTo(nt,Rt):(this._point=1,this._context.moveTo(nt,Rt))}};function yn(nt){return new Kr(nt)}function Qr(nt){return nt<0?-1:1}function st(nt,Rt,Jt){var hr=nt._x1-nt._x0,Dr=Rt-nt._x1,Gr=(nt._y1-nt._y0)/(hr||Dr<0&&-0),Rr=(Jt-nt._y1)/(Dr||hr<0&&-0),Ct=(Gr*Dr+Rr*hr)/(hr+Dr);return(Qr(Gr)+Qr(Rr))*Math.min(Math.abs(Gr),Math.abs(Rr),.5*Math.abs(Ct))||0}function Gt(nt,Rt){var Jt=nt._x1-nt._x0;return Jt?(3*(nt._y1-nt._y0)/Jt-Rt)/2:Rt}function Zt(nt,Rt,Jt){var hr=nt._x0,Dr=nt._y0,Gr=nt._x1,Rr=nt._y1,Ct=(Gr-hr)/3;nt._context.bezierCurveTo(hr+Ct,Dr+Ct*Rt,Gr-Ct,Rr-Ct*Jt,Gr,Rr)}function Ht(nt){this._context=nt}Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zt(this,this._t0,Gt(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Rt){var Jt=NaN;if(nt=+nt,Rt=+Rt,!(nt===this._x1&&Rt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Rt):this._context.moveTo(nt,Rt);break;case 1:this._point=2;break;case 2:this._point=3,Zt(this,Gt(this,Jt=st(this,nt,Rt)),Jt);break;default:Zt(this,this._t0,Jt=st(this,nt,Rt));break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=Rt,this._t0=Jt}}};function _r(nt){this._context=new it(nt)}(_r.prototype=Object.create(Ht.prototype)).point=function(nt,Rt){Ht.prototype.point.call(this,Rt,nt)};function it(nt){this._context=nt}it.prototype={moveTo:function(nt,Rt){this._context.moveTo(Rt,nt)},closePath:function(){this._context.closePath()},lineTo:function(nt,Rt){this._context.lineTo(Rt,nt)},bezierCurveTo:function(nt,Rt,Jt,hr,Dr,Gr){this._context.bezierCurveTo(Rt,nt,hr,Jt,Gr,Dr)}};function Te(nt){return new Ht(nt)}function ke(nt){return new _r(nt)}function Ge(nt){this._context=nt}Ge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var nt=this._x,Rt=this._y,Jt=nt.length;if(Jt)if(this._line?this._context.lineTo(nt[0],Rt[0]):this._context.moveTo(nt[0],Rt[0]),Jt===2)this._context.lineTo(nt[1],Rt[1]);else for(var hr=Ye(nt),Dr=Ye(Rt),Gr=0,Rr=1;Rr<Jt;++Gr,++Rr)this._context.bezierCurveTo(hr[0][Gr],Dr[0][Gr],hr[1][Gr],Dr[1][Gr],nt[Rr],Rt[Rr]);(this._line||this._line!==0&&Jt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(nt,Rt){this._x.push(+nt),this._y.push(+Rt)}};function Ye(nt){var Rt,Jt=nt.length-1,hr,Dr=new Array(Jt),Gr=new Array(Jt),Rr=new Array(Jt);for(Dr[0]=0,Gr[0]=2,Rr[0]=nt[0]+2*nt[1],Rt=1;Rt<Jt-1;++Rt)Dr[Rt]=1,Gr[Rt]=4,Rr[Rt]=4*nt[Rt]+2*nt[Rt+1];for(Dr[Jt-1]=2,Gr[Jt-1]=7,Rr[Jt-1]=8*nt[Jt-1]+nt[Jt],Rt=1;Rt<Jt;++Rt)hr=Dr[Rt]/Gr[Rt-1],Gr[Rt]-=hr,Rr[Rt]-=hr*Rr[Rt-1];for(Dr[Jt-1]=Rr[Jt-1]/Gr[Jt-1],Rt=Jt-2;Rt>=0;--Rt)Dr[Rt]=(Rr[Rt]-Dr[Rt+1])/Gr[Rt];for(Gr[Jt-1]=(nt[Jt]+Dr[Jt-1])/2,Rt=0;Rt<Jt-1;++Rt)Gr[Rt]=2*nt[Rt+1]-Dr[Rt+1];return[Dr,Gr]}function qe(nt){return new Ge(nt)}function at(nt,Rt){this._context=nt,this._t=Rt}at.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(nt,Rt){switch(nt=+nt,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Rt):this._context.moveTo(nt,Rt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Rt),this._context.lineTo(nt,Rt);else{var Jt=this._x*(1-this._t)+nt*this._t;this._context.lineTo(Jt,this._y),this._context.lineTo(Jt,Rt)}break}}this._x=nt,this._y=Rt}};function et(nt){return new at(nt,.5)}function pt(nt){return new at(nt,0)}function _t(nt){return new at(nt,1)}function Pt(nt,Rt){if((Rr=nt.length)>1)for(var Jt=1,hr,Dr,Gr=nt[Rt[0]],Rr,Ct=Gr.length;Jt<Rr;++Jt)for(Dr=Gr,Gr=nt[Rt[Jt]],hr=0;hr<Ct;++hr)Gr[hr][1]+=Gr[hr][0]=isNaN(Dr[hr][1])?Dr[hr][0]:Dr[hr][1]}function Xt(nt){for(var Rt=nt.length,Jt=new Array(Rt);--Rt>=0;)Jt[Rt]=Rt;return Jt}function zt(nt,Rt){return nt[Rt]}function ur(){var nt=h([]),Rt=Xt,Jt=Pt,hr=zt;function Dr(Gr){var Rr=nt.apply(this,arguments),Ct,tr=Gr.length,Lr=Rr.length,Nr=new Array(Lr),Tn;for(Ct=0;Ct<Lr;++Ct){for(var rn=Rr[Ct],kn=Nr[Ct]=new Array(tr),Cn=0,oa;Cn<tr;++Cn)kn[Cn]=oa=[0,+hr(Gr[Cn],rn,Cn,Gr)],oa.data=Gr[Cn];kn.key=rn}for(Ct=0,Tn=Rt(Nr);Ct<Lr;++Ct)Nr[Tn[Ct]].index=Ct;return Jt(Nr,Tn),Nr}return Dr.keys=function(Gr){return arguments.length?(nt=typeof Gr=="function"?Gr:h(K.call(Gr)),Dr):nt},Dr.value=function(Gr){return arguments.length?(hr=typeof Gr=="function"?Gr:h(+Gr),Dr):hr},Dr.order=function(Gr){return arguments.length?(Rt=Gr==null?Xt:typeof Gr=="function"?Gr:h(K.call(Gr)),Dr):Rt},Dr.offset=function(Gr){return arguments.length?(Jt=Gr==null?Pt:Gr,Dr):Jt},Dr}function gr(nt,Rt){if((hr=nt.length)>0){for(var Jt,hr,Dr=0,Gr=nt[0].length,Rr;Dr<Gr;++Dr){for(Rr=Jt=0;Jt<hr;++Jt)Rr+=nt[Jt][Dr][1]||0;if(Rr)for(Jt=0;Jt<hr;++Jt)nt[Jt][Dr][1]/=Rr}Pt(nt,Rt)}}function Mr(nt,Rt){if((tr=nt.length)>0)for(var Jt,hr=0,Dr,Gr,Rr,Ct,tr,Lr=nt[Rt[0]].length;hr<Lr;++hr)for(Rr=Ct=0,Jt=0;Jt<tr;++Jt)(Gr=(Dr=nt[Rt[Jt]][hr])[1]-Dr[0])>0?(Dr[0]=Rr,Dr[1]=Rr+=Gr):Gr<0?(Dr[1]=Ct,Dr[0]=Ct+=Gr):(Dr[0]=0,Dr[1]=Gr)}function un(nt,Rt){if((Dr=nt.length)>0){for(var Jt=0,hr=nt[Rt[0]],Dr,Gr=hr.length;Jt<Gr;++Jt){for(var Rr=0,Ct=0;Rr<Dr;++Rr)Ct+=nt[Rr][Jt][1]||0;hr[Jt][1]+=hr[Jt][0]=-Ct/2}Pt(nt,Rt)}}function zr(nt,Rt){if(!(!((Rr=nt.length)>0)||!((Gr=(Dr=nt[Rt[0]]).length)>0))){for(var Jt=0,hr=1,Dr,Gr,Rr;hr<Gr;++hr){for(var Ct=0,tr=0,Lr=0;Ct<Rr;++Ct){for(var Nr=nt[Rt[Ct]],Tn=Nr[hr][1]||0,rn=Nr[hr-1][1]||0,kn=(Tn-rn)/2,Cn=0;Cn<Ct;++Cn){var oa=nt[Rt[Cn]],ya=oa[hr][1]||0,Oa=oa[hr-1][1]||0;kn+=ya-Oa}tr+=Tn,Lr+=kn*Tn}Dr[hr-1][1]+=Dr[hr-1][0]=Jt,tr&&(Jt-=Lr/tr)}Dr[hr-1][1]+=Dr[hr-1][0]=Jt,Pt(nt,Rt)}}function $r(nt){var Rt=nt.map(hn);return Xt(nt).sort(function(Jt,hr){return Rt[Jt]-Rt[hr]})}function hn(nt){for(var Rt=-1,Jt=0,hr=nt.length,Dr,Gr=-1/0;++Rt<hr;)(Dr=+nt[Rt][1])>Gr&&(Gr=Dr,Jt=Rt);return Jt}function Tr(nt){var Rt=nt.map(wr);return Xt(nt).sort(function(Jt,hr){return Rt[Jt]-Rt[hr]})}function wr(nt){for(var Rt=0,Jt=-1,hr=nt.length,Dr;++Jt<hr;)(Dr=+nt[Jt][1])&&(Rt+=Dr);return Rt}function Ur(nt){return Tr(nt).reverse()}function Br(nt){var Rt=nt.length,Jt,hr,Dr=nt.map(wr),Gr=$r(nt),Rr=0,Ct=0,tr=[],Lr=[];for(Jt=0;Jt<Rt;++Jt)hr=Gr[Jt],Rr<Ct?(Rr+=Dr[hr],tr.push(hr)):(Ct+=Dr[hr],Lr.push(hr));return Lr.reverse().concat(tr)}function Cr(nt){return Xt(nt).reverse()}s.arc=w,s.area=z,s.areaRadial=Q,s.curveBasis=wt,s.curveBasisClosed=Vt,s.curveBasisOpen=St,s.curveBundle=ht,s.curveCardinal=We,s.curveCardinalClosed=ut,s.curveCardinalOpen=Tt,s.curveCatmullRom=Ut,s.curveCatmullRomClosed=ar,s.curveCatmullRomOpen=cr,s.curveLinear=C,s.curveLinearClosed=yn,s.curveMonotoneX=Te,s.curveMonotoneY=ke,s.curveNatural=qe,s.curveStep=et,s.curveStepAfter=_t,s.curveStepBefore=pt,s.line=L,s.lineRadial=re,s.linkHorizontal=q,s.linkRadial=J,s.linkVertical=X,s.pie=D,s.pointRadial=Z,s.radialArea=Q,s.radialLine=re,s.stack=ur,s.stackOffsetDiverging=Mr,s.stackOffsetExpand=gr,s.stackOffsetNone=Pt,s.stackOffsetSilhouette=un,s.stackOffsetWiggle=zr,s.stackOrderAppearance=$r,s.stackOrderAscending=Tr,s.stackOrderDescending=Ur,s.stackOrderInsideOut=Br,s.stackOrderNone=Xt,s.stackOrderReverse=Cr,s.symbol=je,s.symbolCircle=ie,s.symbolCross=ne,s.symbolDiamond=me,s.symbolSquare=Ce,s.symbolStar=Ae,s.symbolTriangle=Oe,s.symbolWye=ze,s.symbols=De,Object.defineProperty(s,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F,e("d3-time")):(s=s||self,o(s.d3=s.d3||{},s.d3))})(this,function(s,o){function h(ot){if(0<=ot.y&&ot.y<100){var ht=new Date(-1,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L);return ht.setFullYear(ot.y),ht}return new Date(ot.y,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L)}function y(ot){if(0<=ot.y&&ot.y<100){var ht=new Date(Date.UTC(-1,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L));return ht.setUTCFullYear(ot.y),ht}return new Date(Date.UTC(ot.y,ot.m,ot.d,ot.H,ot.M,ot.S,ot.L))}function t(ot,ht,Ke){return{y:ot,m:ht,d:Ke,H:0,M:0,S:0,L:0}}function a(ot){var ht=ot.dateTime,Ke=ot.date,Pe=ot.time,We=ot.periods,Qe=ot.days,ut=ot.shortDays,It=ot.months,Tt=ot.shortMonths,Bt=m(We),rr=d(We),Ut=m(Qe),Qt=d(Qe),ar=m(ut),nr=d(ut),cr=m(It),Kr=d(It),yn=m(Tt),Qr=d(Tt),st={a:_t,A:Pt,b:Xt,B:zt,c:null,d:B,e:B,f:Z,H:$,I:W,j:re,L:Q,m:K,M:le,p:ur,q:gr,Q:je,s:dt,S:fe,u:ue,U:V,V:j,w:ee,W:q,x:null,X:null,y:X,Y:J,Z:ie,"%":De},Gt={a:Mr,A:un,b:zr,B:$r,c:null,d:ne,e:ne,f:pe,H:oe,I:se,j:me,L:ce,m:xe,M:Se,p:hn,q:Tr,Q:je,s:dt,S:Ae,u:Ce,U:Ee,V:Oe,w:_e,W:Re,x:null,X:null,y:Ve,Y:Je,Z:ze,"%":De},Zt={a:ke,A:Ge,b:Ye,B:qe,c:at,d:v,e:v,f:O,H:M,I:M,j:C,L:z,m:w,M:E,p:Te,q:x,Q:D,s:H,S:L,u:g,U:_,V:p,w:b,W:A,x:et,X:pt,y:S,Y:c,Z:T,"%":R};st.x=Ht(Ke,st),st.X=Ht(Pe,st),st.c=Ht(ht,st),Gt.x=Ht(Ke,Gt),Gt.X=Ht(Pe,Gt),Gt.c=Ht(ht,Gt);function Ht(wr,Ur){return function(Br){var Cr=[],nt=-1,Rt=0,Jt=wr.length,hr,Dr,Gr;for(Br instanceof Date||(Br=new Date(+Br));++nt<Jt;)wr.charCodeAt(nt)===37&&(Cr.push(wr.slice(Rt,nt)),(Dr=i[hr=wr.charAt(++nt)])!=null?hr=wr.charAt(++nt):Dr=hr==="e"?" ":"0",(Gr=Ur[hr])&&(hr=Gr(Br,Dr)),Cr.push(hr),Rt=nt+1);return Cr.push(wr.slice(Rt,nt)),Cr.join("")}}function _r(wr,Ur){return function(Br){var Cr=t(1900,void 0,1),nt=it(Cr,wr,Br+="",0),Rt,Jt;if(nt!=Br.length)return null;if("Q"in Cr)return new Date(Cr.Q);if("s"in Cr)return new Date(Cr.s*1e3+("L"in Cr?Cr.L:0));if(Ur&&!("Z"in Cr)&&(Cr.Z=0),"p"in Cr&&(Cr.H=Cr.H%12+Cr.p*12),Cr.m===void 0&&(Cr.m="q"in Cr?Cr.q:0),"V"in Cr){if(Cr.V<1||Cr.V>53)return null;"w"in Cr||(Cr.w=1),"Z"in Cr?(Rt=y(t(Cr.y,0,1)),Jt=Rt.getUTCDay(),Rt=Jt>4||Jt===0?o.utcMonday.ceil(Rt):o.utcMonday(Rt),Rt=o.utcDay.offset(Rt,(Cr.V-1)*7),Cr.y=Rt.getUTCFullYear(),Cr.m=Rt.getUTCMonth(),Cr.d=Rt.getUTCDate()+(Cr.w+6)%7):(Rt=h(t(Cr.y,0,1)),Jt=Rt.getDay(),Rt=Jt>4||Jt===0?o.timeMonday.ceil(Rt):o.timeMonday(Rt),Rt=o.timeDay.offset(Rt,(Cr.V-1)*7),Cr.y=Rt.getFullYear(),Cr.m=Rt.getMonth(),Cr.d=Rt.getDate()+(Cr.w+6)%7)}else("W"in Cr||"U"in Cr)&&("w"in Cr||(Cr.w="u"in Cr?Cr.u%7:"W"in Cr?1:0),Jt="Z"in Cr?y(t(Cr.y,0,1)).getUTCDay():h(t(Cr.y,0,1)).getDay(),Cr.m=0,Cr.d="W"in Cr?(Cr.w+6)%7+Cr.W*7-(Jt+5)%7:Cr.w+Cr.U*7-(Jt+6)%7);return"Z"in Cr?(Cr.H+=Cr.Z/100|0,Cr.M+=Cr.Z%100,y(Cr)):h(Cr)}}function it(wr,Ur,Br,Cr){for(var nt=0,Rt=Ur.length,Jt=Br.length,hr,Dr;nt<Rt;){if(Cr>=Jt)return-1;if(hr=Ur.charCodeAt(nt++),hr===37){if(hr=Ur.charAt(nt++),Dr=Zt[hr in i?Ur.charAt(nt++):hr],!Dr||(Cr=Dr(wr,Br,Cr))<0)return-1}else if(hr!=Br.charCodeAt(Cr++))return-1}return Cr}function Te(wr,Ur,Br){var Cr=Bt.exec(Ur.slice(Br));return Cr?(wr.p=rr[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function ke(wr,Ur,Br){var Cr=ar.exec(Ur.slice(Br));return Cr?(wr.w=nr[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function Ge(wr,Ur,Br){var Cr=Ut.exec(Ur.slice(Br));return Cr?(wr.w=Qt[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function Ye(wr,Ur,Br){var Cr=yn.exec(Ur.slice(Br));return Cr?(wr.m=Qr[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function qe(wr,Ur,Br){var Cr=cr.exec(Ur.slice(Br));return Cr?(wr.m=Kr[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function at(wr,Ur,Br){return it(wr,ht,Ur,Br)}function et(wr,Ur,Br){return it(wr,Ke,Ur,Br)}function pt(wr,Ur,Br){return it(wr,Pe,Ur,Br)}function _t(wr){return ut[wr.getDay()]}function Pt(wr){return Qe[wr.getDay()]}function Xt(wr){return Tt[wr.getMonth()]}function zt(wr){return It[wr.getMonth()]}function ur(wr){return We[+(wr.getHours()>=12)]}function gr(wr){return 1+~~(wr.getMonth()/3)}function Mr(wr){return ut[wr.getUTCDay()]}function un(wr){return Qe[wr.getUTCDay()]}function zr(wr){return Tt[wr.getUTCMonth()]}function $r(wr){return It[wr.getUTCMonth()]}function hn(wr){return We[+(wr.getUTCHours()>=12)]}function Tr(wr){return 1+~~(wr.getUTCMonth()/3)}return{format:function(wr){var Ur=Ht(wr+="",st);return Ur.toString=function(){return wr},Ur},parse:function(wr){var Ur=_r(wr+="",!1);return Ur.toString=function(){return wr},Ur},utcFormat:function(wr){var Ur=Ht(wr+="",Gt);return Ur.toString=function(){return wr},Ur},utcParse:function(wr){var Ur=_r(wr+="",!0);return Ur.toString=function(){return wr},Ur}}}var i={"-":"",_:" ","0":"0"},n=/^\s*\d+/,r=/^%/,f=/[\\^$*+?|[\]().{}]/g;function u(ot,ht,Ke){var Pe=ot<0?"-":"",We=(Pe?-ot:ot)+"",Qe=We.length;return Pe+(Qe<Ke?new Array(Ke-Qe+1).join(ht)+We:We)}function l(ot){return ot.replace(f,"\\$&")}function m(ot){return new RegExp("^(?:"+ot.map(l).join("|")+")","i")}function d(ot){for(var ht={},Ke=-1,Pe=ot.length;++Ke<Pe;)ht[ot[Ke].toLowerCase()]=Ke;return ht}function b(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+1));return Pe?(ot.w=+Pe[0],Ke+Pe[0].length):-1}function g(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+1));return Pe?(ot.u=+Pe[0],Ke+Pe[0].length):-1}function _(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.U=+Pe[0],Ke+Pe[0].length):-1}function p(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.V=+Pe[0],Ke+Pe[0].length):-1}function A(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.W=+Pe[0],Ke+Pe[0].length):-1}function c(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+4));return Pe?(ot.y=+Pe[0],Ke+Pe[0].length):-1}function S(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.y=+Pe[0]+(+Pe[0]>68?1900:2e3),Ke+Pe[0].length):-1}function T(ot,ht,Ke){var Pe=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ht.slice(Ke,Ke+6));return Pe?(ot.Z=Pe[1]?0:-(Pe[2]+(Pe[3]||"00")),Ke+Pe[0].length):-1}function x(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+1));return Pe?(ot.q=Pe[0]*3-3,Ke+Pe[0].length):-1}function w(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.m=Pe[0]-1,Ke+Pe[0].length):-1}function v(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.d=+Pe[0],Ke+Pe[0].length):-1}function C(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+3));return Pe?(ot.m=0,ot.d=+Pe[0],Ke+Pe[0].length):-1}function M(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.H=+Pe[0],Ke+Pe[0].length):-1}function E(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.M=+Pe[0],Ke+Pe[0].length):-1}function L(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+2));return Pe?(ot.S=+Pe[0],Ke+Pe[0].length):-1}function z(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+3));return Pe?(ot.L=+Pe[0],Ke+Pe[0].length):-1}function O(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke,Ke+6));return Pe?(ot.L=Math.floor(Pe[0]/1e3),Ke+Pe[0].length):-1}function R(ot,ht,Ke){var Pe=r.exec(ht.slice(Ke,Ke+1));return Pe?Ke+Pe[0].length:-1}function D(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke));return Pe?(ot.Q=+Pe[0],Ke+Pe[0].length):-1}function H(ot,ht,Ke){var Pe=n.exec(ht.slice(Ke));return Pe?(ot.s=+Pe[0],Ke+Pe[0].length):-1}function B(ot,ht){return u(ot.getDate(),ht,2)}function $(ot,ht){return u(ot.getHours(),ht,2)}function W(ot,ht){return u(ot.getHours()%12||12,ht,2)}function re(ot,ht){return u(1+o.timeDay.count(o.timeYear(ot),ot),ht,3)}function Q(ot,ht){return u(ot.getMilliseconds(),ht,3)}function Z(ot,ht){return Q(ot,ht)+"000"}function K(ot,ht){return u(ot.getMonth()+1,ht,2)}function le(ot,ht){return u(ot.getMinutes(),ht,2)}function fe(ot,ht){return u(ot.getSeconds(),ht,2)}function ue(ot){var ht=ot.getDay();return ht===0?7:ht}function V(ot,ht){return u(o.timeSunday.count(o.timeYear(ot)-1,ot),ht,2)}function j(ot,ht){var Ke=ot.getDay();return ot=Ke>=4||Ke===0?o.timeThursday(ot):o.timeThursday.ceil(ot),u(o.timeThursday.count(o.timeYear(ot),ot)+(o.timeYear(ot).getDay()===4),ht,2)}function ee(ot){return ot.getDay()}function q(ot,ht){return u(o.timeMonday.count(o.timeYear(ot)-1,ot),ht,2)}function X(ot,ht){return u(ot.getFullYear()%100,ht,2)}function J(ot,ht){return u(ot.getFullYear()%1e4,ht,4)}function ie(ot){var ht=ot.getTimezoneOffset();return(ht>0?"-":(ht*=-1,"+"))+u(ht/60|0,"0",2)+u(ht%60,"0",2)}function ne(ot,ht){return u(ot.getUTCDate(),ht,2)}function oe(ot,ht){return u(ot.getUTCHours(),ht,2)}function se(ot,ht){return u(ot.getUTCHours()%12||12,ht,2)}function me(ot,ht){return u(1+o.utcDay.count(o.utcYear(ot),ot),ht,3)}function ce(ot,ht){return u(ot.getUTCMilliseconds(),ht,3)}function pe(ot,ht){return ce(ot,ht)+"000"}function xe(ot,ht){return u(ot.getUTCMonth()+1,ht,2)}function Se(ot,ht){return u(ot.getUTCMinutes(),ht,2)}function Ae(ot,ht){return u(ot.getUTCSeconds(),ht,2)}function Ce(ot){var ht=ot.getUTCDay();return ht===0?7:ht}function Ee(ot,ht){return u(o.utcSunday.count(o.utcYear(ot)-1,ot),ht,2)}function Oe(ot,ht){var Ke=ot.getUTCDay();return ot=Ke>=4||Ke===0?o.utcThursday(ot):o.utcThursday.ceil(ot),u(o.utcThursday.count(o.utcYear(ot),ot)+(o.utcYear(ot).getUTCDay()===4),ht,2)}function _e(ot){return ot.getUTCDay()}function Re(ot,ht){return u(o.utcMonday.count(o.utcYear(ot)-1,ot),ht,2)}function Ve(ot,ht){return u(ot.getUTCFullYear()%100,ht,2)}function Je(ot,ht){return u(ot.getUTCFullYear()%1e4,ht,4)}function ze(){return"+0000"}function De(){return"%"}function je(ot){return+ot}function dt(ot){return Math.floor(+ot/1e3)}var Et;$t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $t(ot){return Et=a(ot),s.timeFormat=Et.format,s.timeParse=Et.parse,s.utcFormat=Et.utcFormat,s.utcParse=Et.utcParse,Et}var wt="%Y-%m-%dT%H:%M:%S.%LZ";function Ot(ot){return ot.toISOString()}var Vt=Date.prototype.toISOString?Ot:s.utcFormat(wt);function kt(ot){var ht=new Date(ot);return isNaN(ht)?null:ht}var St=+new Date("2000-01-01T00:00:00.000Z")?kt:s.utcParse(wt);s.isoFormat=Vt,s.isoParse=St,s.timeFormatDefaultLocale=$t,s.timeFormatLocale=a,Object.defineProperty(s,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=s||self,o(s.d3=s.d3||{}))})(this,function(s){var o=new Date,h=new Date;function y(_e,Re,Ve,Je){function ze(De){return _e(De=arguments.length===0?new Date:new Date(+De)),De}return ze.floor=function(De){return _e(De=new Date(+De)),De},ze.ceil=function(De){return _e(De=new Date(De-1)),Re(De,1),_e(De),De},ze.round=function(De){var je=ze(De),dt=ze.ceil(De);return De-je<dt-De?je:dt},ze.offset=function(De,je){return Re(De=new Date(+De),je==null?1:Math.floor(je)),De},ze.range=function(De,je,dt){var Et=[],$t;if(De=ze.ceil(De),dt=dt==null?1:Math.floor(dt),!(De<je)||!(dt>0))return Et;do Et.push($t=new Date(+De)),Re(De,dt),_e(De);while($t<De&&De<je);return Et},ze.filter=function(De){return y(function(je){if(je>=je)for(;_e(je),!De(je);)je.setTime(je-1)},function(je,dt){if(je>=je)if(dt<0)for(;++dt<=0;)for(;Re(je,-1),!De(je););else for(;--dt>=0;)for(;Re(je,1),!De(je););})},Ve&&(ze.count=function(De,je){return o.setTime(+De),h.setTime(+je),_e(o),_e(h),Math.floor(Ve(o,h))},ze.every=function(De){return De=Math.floor(De),!isFinite(De)||!(De>0)?null:De>1?ze.filter(Je?function(je){return Je(je)%De===0}:function(je){return ze.count(0,je)%De===0}):ze}),ze}var t=y(function(){},function(_e,Re){_e.setTime(+_e+Re)},function(_e,Re){return Re-_e});t.every=function(_e){return _e=Math.floor(_e),!isFinite(_e)||!(_e>0)?null:_e>1?y(function(Re){Re.setTime(Math.floor(Re/_e)*_e)},function(Re,Ve){Re.setTime(+Re+Ve*_e)},function(Re,Ve){return(Ve-Re)/_e}):t};var a=t.range,i=1e3,n=6e4,r=36e5,f=864e5,u=6048e5,l=y(function(_e){_e.setTime(_e-_e.getMilliseconds())},function(_e,Re){_e.setTime(+_e+Re*i)},function(_e,Re){return(Re-_e)/i},function(_e){return _e.getUTCSeconds()}),m=l.range,d=y(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*i)},function(_e,Re){_e.setTime(+_e+Re*n)},function(_e,Re){return(Re-_e)/n},function(_e){return _e.getMinutes()}),b=d.range,g=y(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*i-_e.getMinutes()*n)},function(_e,Re){_e.setTime(+_e+Re*r)},function(_e,Re){return(Re-_e)/r},function(_e){return _e.getHours()}),_=g.range,p=y(function(_e){_e.setHours(0,0,0,0)},function(_e,Re){_e.setDate(_e.getDate()+Re)},function(_e,Re){return(Re-_e-(Re.getTimezoneOffset()-_e.getTimezoneOffset())*n)/f},function(_e){return _e.getDate()-1}),A=p.range;function c(_e){return y(function(Re){Re.setDate(Re.getDate()-(Re.getDay()+7-_e)%7),Re.setHours(0,0,0,0)},function(Re,Ve){Re.setDate(Re.getDate()+Ve*7)},function(Re,Ve){return(Ve-Re-(Ve.getTimezoneOffset()-Re.getTimezoneOffset())*n)/u})}var S=c(0),T=c(1),x=c(2),w=c(3),v=c(4),C=c(5),M=c(6),E=S.range,L=T.range,z=x.range,O=w.range,R=v.range,D=C.range,H=M.range,B=y(function(_e){_e.setDate(1),_e.setHours(0,0,0,0)},function(_e,Re){_e.setMonth(_e.getMonth()+Re)},function(_e,Re){return Re.getMonth()-_e.getMonth()+(Re.getFullYear()-_e.getFullYear())*12},function(_e){return _e.getMonth()}),$=B.range,W=y(function(_e){_e.setMonth(0,1),_e.setHours(0,0,0,0)},function(_e,Re){_e.setFullYear(_e.getFullYear()+Re)},function(_e,Re){return Re.getFullYear()-_e.getFullYear()},function(_e){return _e.getFullYear()});W.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:y(function(Re){Re.setFullYear(Math.floor(Re.getFullYear()/_e)*_e),Re.setMonth(0,1),Re.setHours(0,0,0,0)},function(Re,Ve){Re.setFullYear(Re.getFullYear()+Ve*_e)})};var re=W.range,Q=y(function(_e){_e.setUTCSeconds(0,0)},function(_e,Re){_e.setTime(+_e+Re*n)},function(_e,Re){return(Re-_e)/n},function(_e){return _e.getUTCMinutes()}),Z=Q.range,K=y(function(_e){_e.setUTCMinutes(0,0,0)},function(_e,Re){_e.setTime(+_e+Re*r)},function(_e,Re){return(Re-_e)/r},function(_e){return _e.getUTCHours()}),le=K.range,fe=y(function(_e){_e.setUTCHours(0,0,0,0)},function(_e,Re){_e.setUTCDate(_e.getUTCDate()+Re)},function(_e,Re){return(Re-_e)/f},function(_e){return _e.getUTCDate()-1}),ue=fe.range;function V(_e){return y(function(Re){Re.setUTCDate(Re.getUTCDate()-(Re.getUTCDay()+7-_e)%7),Re.setUTCHours(0,0,0,0)},function(Re,Ve){Re.setUTCDate(Re.getUTCDate()+Ve*7)},function(Re,Ve){return(Ve-Re)/u})}var j=V(0),ee=V(1),q=V(2),X=V(3),J=V(4),ie=V(5),ne=V(6),oe=j.range,se=ee.range,me=q.range,ce=X.range,pe=J.range,xe=ie.range,Se=ne.range,Ae=y(function(_e){_e.setUTCDate(1),_e.setUTCHours(0,0,0,0)},function(_e,Re){_e.setUTCMonth(_e.getUTCMonth()+Re)},function(_e,Re){return Re.getUTCMonth()-_e.getUTCMonth()+(Re.getUTCFullYear()-_e.getUTCFullYear())*12},function(_e){return _e.getUTCMonth()}),Ce=Ae.range,Ee=y(function(_e){_e.setUTCMonth(0,1),_e.setUTCHours(0,0,0,0)},function(_e,Re){_e.setUTCFullYear(_e.getUTCFullYear()+Re)},function(_e,Re){return Re.getUTCFullYear()-_e.getUTCFullYear()},function(_e){return _e.getUTCFullYear()});Ee.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:y(function(Re){Re.setUTCFullYear(Math.floor(Re.getUTCFullYear()/_e)*_e),Re.setUTCMonth(0,1),Re.setUTCHours(0,0,0,0)},function(Re,Ve){Re.setUTCFullYear(Re.getUTCFullYear()+Ve*_e)})};var Oe=Ee.range;s.timeDay=p,s.timeDays=A,s.timeFriday=C,s.timeFridays=D,s.timeHour=g,s.timeHours=_,s.timeInterval=y,s.timeMillisecond=t,s.timeMilliseconds=a,s.timeMinute=d,s.timeMinutes=b,s.timeMonday=T,s.timeMondays=L,s.timeMonth=B,s.timeMonths=$,s.timeSaturday=M,s.timeSaturdays=H,s.timeSecond=l,s.timeSeconds=m,s.timeSunday=S,s.timeSundays=E,s.timeThursday=v,s.timeThursdays=R,s.timeTuesday=x,s.timeTuesdays=z,s.timeWednesday=w,s.timeWednesdays=O,s.timeWeek=S,s.timeWeeks=E,s.timeYear=W,s.timeYears=re,s.utcDay=fe,s.utcDays=ue,s.utcFriday=ie,s.utcFridays=xe,s.utcHour=K,s.utcHours=le,s.utcMillisecond=t,s.utcMilliseconds=a,s.utcMinute=Q,s.utcMinutes=Z,s.utcMonday=ee,s.utcMondays=se,s.utcMonth=Ae,s.utcMonths=Ce,s.utcSaturday=ne,s.utcSaturdays=Se,s.utcSecond=l,s.utcSeconds=m,s.utcSunday=j,s.utcSundays=oe,s.utcThursday=J,s.utcThursdays=pe,s.utcTuesday=q,s.utcTuesdays=me,s.utcWednesday=X,s.utcWednesdays=ce,s.utcWeek=j,s.utcWeeks=oe,s.utcYear=Ee,s.utcYears=Oe,Object.defineProperty(s,"__esModule",{value:!0})})},{}],122:[function(e,I,F){arguments[4][121][0].apply(F,arguments)},{dup:121}],123:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=s||self,o(s.d3=s.d3||{}))})(this,function(s){var o=0,h=0,y=0,t=1e3,a,i,n=0,r=0,f=0,u=typeof performance=="object"&&performance.now?performance:Date,l=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(w){setTimeout(w,17)};function m(){return r||(l(d),r=u.now()+f)}function d(){r=0}function b(){this._call=this._time=this._next=null}b.prototype=g.prototype={constructor:b,restart:function(w,v,C){if(typeof w!="function")throw new TypeError("callback is not a function");C=(C==null?m():+C)+(v==null?0:+v),!this._next&&i!==this&&(i?i._next=this:a=this,i=this),this._call=w,this._time=C,S()},stop:function(){this._call&&(this._call=null,this._time=1/0,S())}};function g(w,v,C){var M=new b;return M.restart(w,v,C),M}function _(){m(),++o;for(var w=a,v;w;)(v=r-w._time)>=0&&w._call.call(null,v),w=w._next;--o}function p(){r=(n=u.now())+f,o=h=0;try{_()}finally{o=0,c(),r=0}}function A(){var w=u.now(),v=w-n;v>t&&(f-=v,n=w)}function c(){for(var w,v=a,C,M=1/0;v;)v._call?(M>v._time&&(M=v._time),w=v,v=v._next):(C=v._next,v._next=null,v=w?w._next=C:a=C);i=w,S(M)}function S(w){if(!o){h&&(h=clearTimeout(h));var v=w-r;v>24?(w<1/0&&(h=setTimeout(p,w-u.now()-f)),y&&(y=clearInterval(y))):(y||(n=u.now(),y=setInterval(A,t)),o=1,l(p))}}function T(w,v,C){var M=new b;return v=v==null?0:+v,M.restart(function(E){M.stop(),w(E+v)},v,C),M}function x(w,v,C){var M=new b,E=v;return v==null?(M.restart(w,v,C),M):(v=+v,C=C==null?m():+C,M.restart(function L(z){z+=E,M.restart(L,E+=v,C),w(z)},v,C),M)}s.interval=x,s.now=m,s.timeout=T,s.timer=g,s.timerFlush=_,Object.defineProperty(s,"__esModule",{value:!0})})},{}],124:[function(e,I,F){I.exports=function(){for(var s=0;s<arguments.length;s++)if(arguments[s]!==void 0)return arguments[s]}},{}],125:[function(e,I,F){I.exports=y;var s=y.canvas=document.createElement("canvas"),o=s.getContext("2d"),h=t([32,126]);y.createPairs=t,y.ascii=h;function y(a,i){Array.isArray(a)&&(a=a.join(", "));var n={},r,f=16,u=.05;i&&(i.length===2&&typeof i[0]=="number"?r=t(i):Array.isArray(i)?r=i:(i.o?r=t(i.o):i.pairs&&(r=i.pairs),i.fontSize&&(f=i.fontSize),i.threshold!=null&&(u=i.threshold))),r||(r=h),o.font=f+"px "+a;for(var l=0;l<r.length;l++){var m=r[l],d=o.measureText(m[0]).width+o.measureText(m[1]).width,b=o.measureText(m).width;if(Math.abs(d-b)>f*u){var g=(b-d)/f;n[m]=g*1e3}}return n}function t(a){for(var i=[],n=a[0];n<=a[1];n++)for(var r=String.fromCharCode(n),f=a[0];f<a[1];f++){var u=String.fromCharCode(f),l=r+u;i.push(l)}return i}},{}],126:[function(e,I,F){var s=e("abs-svg-path"),o=e("normalize-svg-path"),h={M:"moveTo",C:"bezierCurveTo"};I.exports=function(y,t){y.beginPath(),o(s(t)).forEach(function(a){var i=a[0],n=a.slice(1);y[h[i]].apply(y,n)}),y.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(e,I,F){I.exports=function(s){switch(s){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(e,I,F){function s(y,t,a){var i=y[a]|0;if(i<=0)return[];var n=new Array(i),r;if(a===y.length-1)for(r=0;r<i;++r)n[r]=t;else for(r=0;r<i;++r)n[r]=s(y,t,a+1);return n}function o(y,t){var a,i;for(a=new Array(y),i=0;i<y;++i)a[i]=t;return a}function h(y,t){switch(typeof t=="undefined"&&(t=0),typeof y){case"number":if(y>0)return o(y|0,t);break;case"object":if(typeof y.length=="number")return s(y,t,0);break}return[]}I.exports=h},{}],129:[function(e,I,F){I.exports=s,I.exports.default=s;function s(D,H,B){B=B||2;var $=H&&H.length,W=$?H[0]*B:D.length,re=o(D,0,W,B,!0),Q=[];if(!re||re.next===re.prev)return Q;var Z,K,le,fe,ue,V,j;if($&&(re=r(D,H,re,B)),D.length>80*B){Z=le=D[0],K=fe=D[1];for(var ee=B;ee<W;ee+=B)ue=D[ee],V=D[ee+1],ue<Z&&(Z=ue),V<K&&(K=V),ue>le&&(le=ue),V>fe&&(fe=V);j=Math.max(le-Z,fe-K),j=j!==0?1/j:0}return y(re,Q,B,Z,K,j),Q}function o(D,H,B,$,W){var re,Q;if(W===R(D,H,B,$)>0)for(re=H;re<B;re+=$)Q=L(re,D[re],D[re+1],Q);else for(re=B-$;re>=H;re-=$)Q=L(re,D[re],D[re+1],Q);return Q&&S(Q,Q.next)&&(z(Q),Q=Q.next),Q}function h(D,H){if(!D)return D;H||(H=D);var B=D,$;do if($=!1,!B.steiner&&(S(B,B.next)||c(B.prev,B,B.next)===0)){if(z(B),B=H=B.prev,B===B.next)break;$=!0}else B=B.next;while($||B!==H);return H}function y(D,H,B,$,W,re,Q){if(!!D){!Q&&re&&d(D,$,W,re);for(var Z=D,K,le;D.prev!==D.next;){if(K=D.prev,le=D.next,re?a(D,$,W,re):t(D)){H.push(K.i/B),H.push(D.i/B),H.push(le.i/B),z(D),D=le.next,Z=le.next;continue}if(D=le,D===Z){Q?Q===1?(D=i(h(D),H,B),y(D,H,B,$,W,re,2)):Q===2&&n(D,H,B,$,W,re):y(h(D),H,B,$,W,re,1);break}}}}function t(D){var H=D.prev,B=D,$=D.next;if(c(H,B,$)>=0)return!1;for(var W=D.next.next;W!==D.prev;){if(p(H.x,H.y,B.x,B.y,$.x,$.y,W.x,W.y)&&c(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function a(D,H,B,$){var W=D.prev,re=D,Q=D.next;if(c(W,re,Q)>=0)return!1;for(var Z=W.x<re.x?W.x<Q.x?W.x:Q.x:re.x<Q.x?re.x:Q.x,K=W.y<re.y?W.y<Q.y?W.y:Q.y:re.y<Q.y?re.y:Q.y,le=W.x>re.x?W.x>Q.x?W.x:Q.x:re.x>Q.x?re.x:Q.x,fe=W.y>re.y?W.y>Q.y?W.y:Q.y:re.y>Q.y?re.y:Q.y,ue=g(Z,K,H,B,$),V=g(le,fe,H,B,$),j=D.prevZ,ee=D.nextZ;j&&j.z>=ue&&ee&&ee.z<=V;){if(j!==D.prev&&j!==D.next&&p(W.x,W.y,re.x,re.y,Q.x,Q.y,j.x,j.y)&&c(j.prev,j,j.next)>=0||(j=j.prevZ,ee!==D.prev&&ee!==D.next&&p(W.x,W.y,re.x,re.y,Q.x,Q.y,ee.x,ee.y)&&c(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;j&&j.z>=ue;){if(j!==D.prev&&j!==D.next&&p(W.x,W.y,re.x,re.y,Q.x,Q.y,j.x,j.y)&&c(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;ee&&ee.z<=V;){if(ee!==D.prev&&ee!==D.next&&p(W.x,W.y,re.x,re.y,Q.x,Q.y,ee.x,ee.y)&&c(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}function i(D,H,B){var $=D;do{var W=$.prev,re=$.next.next;!S(W,re)&&T(W,$,$.next,re)&&C(W,re)&&C(re,W)&&(H.push(W.i/B),H.push($.i/B),H.push(re.i/B),z($),z($.next),$=D=re),$=$.next}while($!==D);return h($)}function n(D,H,B,$,W,re){var Q=D;do{for(var Z=Q.next.next;Z!==Q.prev;){if(Q.i!==Z.i&&A(Q,Z)){var K=E(Q,Z);Q=h(Q,Q.next),K=h(K,K.next),y(Q,H,B,$,W,re),y(K,H,B,$,W,re);return}Z=Z.next}Q=Q.next}while(Q!==D)}function r(D,H,B,$){var W=[],re,Q,Z,K,le;for(re=0,Q=H.length;re<Q;re++)Z=H[re]*$,K=re<Q-1?H[re+1]*$:D.length,le=o(D,Z,K,$,!1),le===le.next&&(le.steiner=!0),W.push(_(le));for(W.sort(f),re=0;re<W.length;re++)u(W[re],B),B=h(B,B.next);return B}function f(D,H){return D.x-H.x}function u(D,H){if(H=l(D,H),H){var B=E(H,D);h(H,H.next),h(B,B.next)}}function l(D,H){var B=H,$=D.x,W=D.y,re=-1/0,Q;do{if(W<=B.y&&W>=B.next.y&&B.next.y!==B.y){var Z=B.x+(W-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(Z<=$&&Z>re){if(re=Z,Z===$){if(W===B.y)return B;if(W===B.next.y)return B.next}Q=B.x<B.next.x?B:B.next}}B=B.next}while(B!==H);if(!Q)return null;if($===re)return Q;var K=Q,le=Q.x,fe=Q.y,ue=1/0,V;B=Q;do $>=B.x&&B.x>=le&&$!==B.x&&p(W<fe?$:re,W,le,fe,W<fe?re:$,W,B.x,B.y)&&(V=Math.abs(W-B.y)/($-B.x),C(B,D)&&(V<ue||V===ue&&(B.x>Q.x||B.x===Q.x&&m(Q,B)))&&(Q=B,ue=V)),B=B.next;while(B!==K);return Q}function m(D,H){return c(D.prev,D,H.prev)<0&&c(H.next,D,D.next)<0}function d(D,H,B,$){var W=D;do W.z===null&&(W.z=g(W.x,W.y,H,B,$)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==D);W.prevZ.nextZ=null,W.prevZ=null,b(W)}function b(D){var H,B,$,W,re,Q,Z,K,le=1;do{for(B=D,D=null,re=null,Q=0;B;){for(Q++,$=B,Z=0,H=0;H<le&&(Z++,$=$.nextZ,!!$);H++);for(K=le;Z>0||K>0&&$;)Z!==0&&(K===0||!$||B.z<=$.z)?(W=B,B=B.nextZ,Z--):(W=$,$=$.nextZ,K--),re?re.nextZ=W:D=W,W.prevZ=re,re=W;B=$}re.nextZ=null,le*=2}while(Q>1);return D}function g(D,H,B,$,W){return D=32767*(D-B)*W,H=32767*(H-$)*W,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,D|H<<1}function _(D){var H=D,B=D;do(H.x<B.x||H.x===B.x&&H.y<B.y)&&(B=H),H=H.next;while(H!==D);return B}function p(D,H,B,$,W,re,Q,Z){return(W-Q)*(H-Z)-(D-Q)*(re-Z)>=0&&(D-Q)*($-Z)-(B-Q)*(H-Z)>=0&&(B-Q)*(re-Z)-(W-Q)*($-Z)>=0}function A(D,H){return D.next.i!==H.i&&D.prev.i!==H.i&&!v(D,H)&&(C(D,H)&&C(H,D)&&M(D,H)&&(c(D.prev,D,H.prev)||c(D,H.prev,H))||S(D,H)&&c(D.prev,D,D.next)>0&&c(H.prev,H,H.next)>0)}function c(D,H,B){return(H.y-D.y)*(B.x-H.x)-(H.x-D.x)*(B.y-H.y)}function S(D,H){return D.x===H.x&&D.y===H.y}function T(D,H,B,$){var W=w(c(D,H,B)),re=w(c(D,H,$)),Q=w(c(B,$,D)),Z=w(c(B,$,H));return!!(W!==re&&Q!==Z||W===0&&x(D,B,H)||re===0&&x(D,$,H)||Q===0&&x(B,D,$)||Z===0&&x(B,H,$))}function x(D,H,B){return H.x<=Math.max(D.x,B.x)&&H.x>=Math.min(D.x,B.x)&&H.y<=Math.max(D.y,B.y)&&H.y>=Math.min(D.y,B.y)}function w(D){return D>0?1:D<0?-1:0}function v(D,H){var B=D;do{if(B.i!==D.i&&B.next.i!==D.i&&B.i!==H.i&&B.next.i!==H.i&&T(B,B.next,D,H))return!0;B=B.next}while(B!==D);return!1}function C(D,H){return c(D.prev,D,D.next)<0?c(D,H,D.next)>=0&&c(D,D.prev,H)>=0:c(D,H,D.prev)<0||c(D,D.next,H)<0}function M(D,H){var B=D,$=!1,W=(D.x+H.x)/2,re=(D.y+H.y)/2;do B.y>re!=B.next.y>re&&B.next.y!==B.y&&W<(B.next.x-B.x)*(re-B.y)/(B.next.y-B.y)+B.x&&($=!$),B=B.next;while(B!==D);return $}function E(D,H){var B=new O(D.i,D.x,D.y),$=new O(H.i,H.x,H.y),W=D.next,re=H.prev;return D.next=H,H.prev=D,B.next=W,W.prev=B,$.next=B,B.prev=$,re.next=$,$.prev=re,$}function L(D,H,B,$){var W=new O(D,H,B);return $?(W.next=$.next,W.prev=$,$.next.prev=W,$.next=W):(W.prev=W,W.next=W),W}function z(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function O(D,H,B){this.i=D,this.x=H,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(D,H,B,$){var W=H&&H.length,re=W?H[0]*B:D.length,Q=Math.abs(R(D,0,re,B));if(W)for(var Z=0,K=H.length;Z<K;Z++){var le=H[Z]*B,fe=Z<K-1?H[Z+1]*B:D.length;Q-=Math.abs(R(D,le,fe,B))}var ue=0;for(Z=0;Z<$.length;Z+=3){var V=$[Z]*B,j=$[Z+1]*B,ee=$[Z+2]*B;ue+=Math.abs((D[V]-D[ee])*(D[j+1]-D[V+1])-(D[V]-D[j])*(D[ee+1]-D[V+1]))}return Q===0&&ue===0?0:Math.abs((ue-Q)/Q)};function R(D,H,B,$){for(var W=0,re=H,Q=B-$;re<B;re+=$)W+=(D[Q]-D[re])*(D[re+1]+D[Q+1]),Q=re;return W}s.flatten=function(D){for(var H=D[0][0].length,B={vertices:[],holes:[],dimensions:H},$=0,W=0;W<D.length;W++){for(var re=0;re<D[W].length;re++)for(var Q=0;Q<H;Q++)B.vertices.push(D[W][re][Q]);W>0&&($+=D[W-1].length,B.holes.push($))}return B}},{}],130:[function(e,I,F){var s=e("strongly-connected-components");I.exports=function(h,y){var t=[],a=[],i=[],n={},r=[],f;function u(S){i[S]=!1,n.hasOwnProperty(S)&&Object.keys(n[S]).forEach(function(T){delete n[S][T],i[T]&&u(T)})}function l(S){var T=!1;a.push(S),i[S]=!0;var x,w;for(x=0;x<r[S].length;x++)w=r[S][x],w===f?(m(f,a),T=!0):i[w]||(T=l(w));if(T)u(S);else for(x=0;x<r[S].length;x++){w=r[S][x];var v=n[w];v||(v={},n[w]=v),v[w]=!0}return a.pop(),T}function m(S,T){var x=[].concat(T).concat(S);y?y(l):t.push(x)}function d(S){for(var T=0;T<h.length;T++)T<S&&(h[T]=[]),h[T]=h[T].filter(function(x){return x>=S})}function b(S){d(S);for(var T=h,x=s(T),w=x.components.filter(function(O){return O.length>1}),v=1/0,C,M=0;M<w.length;M++)for(var E=0;E<w[M].length;E++)w[M][E]<v&&(v=w[M][E],C=M);var L=w[C];if(!L)return!1;var z=h.map(function(O,R){return L.indexOf(R)===-1?[]:O.filter(function(D){return L.indexOf(D)!==-1})});return{leastVertex:v,adjList:z}}f=0;for(var g=h.length;f<g;){var _=b(f);if(f=_.leastVertex,r=_.adjList,r){for(var p=0;p<r.length;p++)for(var A=0;A<r[p].length;A++){var c=r[p][A];i[+c]=!1,n[c]={}}l(f),f=f+1}else f=g}if(!y)return t}},{"strongly-connected-components":306}],131:[function(e,I,F){var s=e("../../object/valid-value");I.exports=function(){return s(this).length=0,this}},{"../../object/valid-value":162}],132:[function(e,I,F){I.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(e,I,F){I.exports=function(){var s=Array.from,o,h;return typeof s!="function"?!1:(o=["raz","dwa"],h=s(o),Boolean(h&&h!==o&&h[1]==="dwa"))}},{}],134:[function(e,I,F){var s=e("es6-symbol").iterator,o=e("../../function/is-arguments"),h=e("../../function/is-function"),y=e("../../number/to-pos-integer"),t=e("../../object/valid-callable"),a=e("../../object/valid-value"),i=e("../../object/is-value"),n=e("../../string/is-string"),r=Array.isArray,f=Function.prototype.call,u={configurable:!0,enumerable:!0,writable:!0,value:null},l=Object.defineProperty;I.exports=function(m){var d=arguments[1],b=arguments[2],g,_,p,A,c,S,T,x,w,v;if(m=Object(a(m)),i(d)&&t(d),!this||this===Array||!h(this)){if(!d){if(o(m))return c=m.length,c!==1?Array.apply(null,m):(A=new Array(1),A[0]=m[0],A);if(r(m)){for(A=new Array(c=m.length),_=0;_<c;++_)A[_]=m[_];return A}}A=[]}else g=this;if(!r(m)){if((w=m[s])!==void 0){for(T=t(w).call(m),g&&(A=new g),x=T.next(),_=0;!x.done;)v=d?f.call(d,b,x.value,_):x.value,g?(u.value=v,l(A,_,u)):A[_]=v,x=T.next(),++_;c=_}else if(n(m)){for(c=m.length,g&&(A=new g),_=0,p=0;_<c;++_)v=m[_],_+1<c&&(S=v.charCodeAt(0),S>=55296&&S<=56319&&(v+=m[++_])),v=d?f.call(d,b,v,p):v,g?(u.value=v,l(A,p,u)):A[p]=v,++p;c=p}}if(c===void 0)for(c=y(m.length),g&&(A=new g(c)),_=0;_<c;++_)v=d?f.call(d,b,m[_],_):m[_],g?(u.value=v,l(A,_,u)):A[_]=v;return g&&(u.value=null,A.length=c),A}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(e,I,F){var s=Object.prototype.toString,o=s.call(function(){return arguments}());I.exports=function(h){return s.call(h)===o}},{}],136:[function(e,I,F){var s=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);I.exports=function(h){return typeof h=="function"&&o(s.call(h))}},{}],137:[function(e,I,F){I.exports=function(){}},{}],138:[function(e,I,F){I.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(e,I,F){I.exports=function(){var s=Math.sign;return typeof s!="function"?!1:s(10)===1&&s(-20)===-1}},{}],140:[function(e,I,F){I.exports=function(s){return s=Number(s),isNaN(s)||s===0?s:s>0?1:-1}},{}],141:[function(e,I,F){var s=e("../math/sign"),o=Math.abs,h=Math.floor;I.exports=function(y){return isNaN(y)?0:(y=Number(y),y===0||!isFinite(y)?y:s(y)*h(o(y)))}},{"../math/sign":138}],142:[function(e,I,F){var s=e("./to-integer"),o=Math.max;I.exports=function(h){return o(0,s(h))}},{"./to-integer":141}],143:[function(e,I,F){var s=e("./valid-callable"),o=e("./valid-value"),h=Function.prototype.bind,y=Function.prototype.call,t=Object.keys,a=Object.prototype.propertyIsEnumerable;I.exports=function(i,n){return function(r,f){var u,l=arguments[2],m=arguments[3];return r=Object(o(r)),s(f),u=t(r),m&&u.sort(typeof m=="function"?h.call(m,r):void 0),typeof i!="function"&&(i=u[i]),y.call(i,u,function(d,b){return a.call(r,d)?y.call(f,l,r[d],d,r,b):n})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(e,I,F){I.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(e,I,F){I.exports=function(){var s=Object.assign,o;return typeof s!="function"?!1:(o={foo:"raz"},s(o,{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")}},{}],146:[function(e,I,F){var s=e("../keys"),o=e("../valid-value"),h=Math.max;I.exports=function(y,t){var a,i,n=h(arguments.length,2),r;for(y=Object(o(y)),r=function(f){try{y[f]=t[f]}catch(u){a||(a=u)}},i=1;i<n;++i)t=arguments[i],s(t).forEach(r);if(a!==void 0)throw a;return y}},{"../keys":152,"../valid-value":162}],147:[function(e,I,F){var s=e("../array/from"),o=e("./assign"),h=e("./valid-value");I.exports=function(y){var t=Object(h(y)),a=arguments[1],i=Object(arguments[2]);if(t!==y&&!a)return t;var n={};return a?s(a,function(r){(i.ensure||r in y)&&(n[r]=y[r])}):o(n,y),n}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(e,I,F){var s=Object.create,o;e("./set-prototype-of/is-implemented")()||(o=e("./set-prototype-of/shim")),I.exports=function(){var h,y,t;return!o||o.level!==1?s:(h={},y={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){y[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}y[a]=t}),Object.defineProperties(h,y),Object.defineProperty(o,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:h}),function(a,i){return s(a===null?h:a,i)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(e,I,F){I.exports=e("./_iterate")("forEach")},{"./_iterate":143}],150:[function(e,I,F){var s=e("./is-value"),o={function:!0,object:!0};I.exports=function(h){return s(h)&&o[typeof h]||!1}},{"./is-value":151}],151:[function(e,I,F){var s=e("../function/noop")();I.exports=function(o){return o!==s&&o!==null}},{"../function/noop":137}],152:[function(e,I,F){I.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(e,I,F){I.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(e,I,F){var s=e("../is-value"),o=Object.keys;I.exports=function(h){return o(s(h)?Object(h):h)}},{"../is-value":151}],155:[function(e,I,F){var s=e("./valid-callable"),o=e("./for-each"),h=Function.prototype.call;I.exports=function(y,t){var a={},i=arguments[2];return s(t),o(y,function(n,r,f,u){a[r]=h.call(t,i,n,r,f,u)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(e,I,F){var s=e("./is-value"),o=Array.prototype.forEach,h=Object.create,y=function(t,a){var i;for(i in t)a[i]=t[i]};I.exports=function(t){var a=h(null);return o.call(arguments,function(i){!s(i)||y(Object(i),a)}),a}},{"./is-value":151}],157:[function(e,I,F){I.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(e,I,F){var s=Object.create,o=Object.getPrototypeOf,h={};I.exports=function(){var y=Object.setPrototypeOf,t=arguments[0]||s;return typeof y!="function"?!1:o(y(t(null),h))===h}},{}],159:[function(e,I,F){var s=e("../is-object"),o=e("../valid-value"),h=Object.prototype.isPrototypeOf,y=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(i,n){if(o(i),n===null||s(n))return i;throw new TypeError("Prototype must be null or an object")},I.exports=function(i){var n,r;return i?(i.level===2?i.set?(r=i.set,n=function(f,u){return r.call(a(f,u),u),f}):n=function(f,u){return a(f,u).__proto__=u,f}:n=function f(u,l){var m;return a(u,l),m=h.call(f.nullPolyfill,u),m&&delete f.nullPolyfill.__proto__,l===null&&(l=f.nullPolyfill),u.__proto__=l,m&&y(f.nullPolyfill,"__proto__",t),u},Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null}(function(){var i=Object.create(null),n={},r,f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{r=f.set,r.call(i,n)}catch{}if(Object.getPrototypeOf(i)===n)return{set:r,level:2}}return i.__proto__=n,Object.getPrototypeOf(i)===n?{level:2}:(i={},i.__proto__=n,Object.getPrototypeOf(i)===n?{level:1}:!1)}()),e("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(e,I,F){I.exports=function(s){if(typeof s!="function")throw new TypeError(s+" is not a function");return s}},{}],161:[function(e,I,F){var s=e("./is-object");I.exports=function(o){if(!s(o))throw new TypeError(o+" is not an Object");return o}},{"./is-object":150}],162:[function(e,I,F){var s=e("./is-value");I.exports=function(o){if(!s(o))throw new TypeError("Cannot use null or undefined");return o}},{"./is-value":151}],163:[function(e,I,F){I.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(e,I,F){var s="razdwatrzy";I.exports=function(){return typeof s.contains!="function"?!1:s.contains("dwa")===!0&&s.contains("foo")===!1}},{}],165:[function(e,I,F){var s=String.prototype.indexOf;I.exports=function(o){return s.call(this,o,arguments[1])>-1}},{}],166:[function(e,I,F){var s=Object.prototype.toString,o=s.call("");I.exports=function(h){return typeof h=="string"||h&&typeof h=="object"&&(h instanceof String||s.call(h)===o)||!1}},{}],167:[function(e,I,F){var s=Object.create(null),o=Math.random;I.exports=function(){var h;do h=o().toString(36).slice(2);while(s[h]);return h}},{}],168:[function(e,I,F){var s=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/string/#/contains"),h=e("d"),y=e("es6-symbol"),t=e("./"),a=Object.defineProperty,i;i=I.exports=function(n,r){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");t.call(this,n),r?o.call(r,"key+value")?r="key+value":o.call(r,"key")?r="key":r="value":r="value",a(this,"__kind__",h("",r))},s&&s(i,t),delete i.prototype.constructor,i.prototype=Object.create(t.prototype,{_resolve:h(function(n){return this.__kind__==="value"?this.__list__[n]:this.__kind__==="key+value"?[n,this.__list__[n]]:n})}),a(i.prototype,y.toStringTag,h("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(e,I,F){var s=e("es5-ext/function/is-arguments"),o=e("es5-ext/object/valid-callable"),h=e("es5-ext/string/is-string"),y=e("./get"),t=Array.isArray,a=Function.prototype.call,i=Array.prototype.some;I.exports=function(n,r){var f,u=arguments[2],l,m,d,b,g,_,p;if(t(n)||s(n)?f="array":h(n)?f="string":n=y(n),o(r),m=function(){d=!0},f==="array"){i.call(n,function(A){return a.call(r,u,A,m),d});return}if(f==="string"){for(g=n.length,b=0;b<g&&(_=n[b],b+1<g&&(p=_.charCodeAt(0),p>=55296&&p<=56319&&(_+=n[++b])),a.call(r,u,_,m),!d);++b);return}for(l=n.next();!l.done;){if(a.call(r,u,l.value,m),d)return;l=n.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(e,I,F){var s=e("es5-ext/function/is-arguments"),o=e("es5-ext/string/is-string"),h=e("./array"),y=e("./string"),t=e("./valid-iterable"),a=e("es6-symbol").iterator;I.exports=function(i){return typeof t(i)[a]=="function"?i[a]():s(i)?new h(i):o(i)?new y(i):new h(i)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(e,I,F){var s=e("es5-ext/array/#/clear"),o=e("es5-ext/object/assign"),h=e("es5-ext/object/valid-callable"),y=e("es5-ext/object/valid-value"),t=e("d"),a=e("d/auto-bind"),i=e("es6-symbol"),n=Object.defineProperty,r=Object.defineProperties,f;I.exports=f=function(u,l){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");r(this,{__list__:t("w",y(u)),__context__:t("w",l),__nextIndex__:t("w",0)}),l&&(h(l.on),l.on("_add",this._onAdd),l.on("_delete",this._onDelete),l.on("_clear",this._onClear))},delete f.prototype.constructor,r(f.prototype,o({_next:t(function(){var u;if(!!this.__list__){if(this.__redo__&&(u=this.__redo__.shift(),u!==void 0))return u;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(u){return u===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(u)}}),_resolve:t(function(u){return this.__list__[u]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},a({_onAdd:t(function(u){if(!(u>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){n(this,"__redo__",t("c",[u]));return}this.__redo__.forEach(function(l,m){l>=u&&(this.__redo__[m]=++l)},this),this.__redo__.push(u)}}),_onDelete:t(function(u){var l;u>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(l=this.__redo__.indexOf(u),l!==-1&&this.__redo__.splice(l,1),this.__redo__.forEach(function(m,d){m>u&&(this.__redo__[d]=--m)},this)))}),_onClear:t(function(){this.__redo__&&s.call(this.__redo__),this.__nextIndex__=0})}))),n(f.prototype,i.iterator,t(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(e,I,F){var s=e("es5-ext/function/is-arguments"),o=e("es5-ext/object/is-value"),h=e("es5-ext/string/is-string"),y=e("es6-symbol").iterator,t=Array.isArray;I.exports=function(a){return o(a)?t(a)||h(a)||s(a)?!0:typeof a[y]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(e,I,F){var s=e("es5-ext/object/set-prototype-of"),o=e("d"),h=e("es6-symbol"),y=e("./"),t=Object.defineProperty,a;a=I.exports=function(i){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");i=String(i),y.call(this,i),t(this,"__length__",o("",i.length))},s&&s(a,y),delete a.prototype.constructor,a.prototype=Object.create(y.prototype,{_next:o(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:o(function(i){var n=this.__list__[i],r;return this.__nextIndex__===this.__length__?n:(r=n.charCodeAt(0),r>=55296&&r<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),t(a.prototype,h.toStringTag,o("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(e,I,F){var s=e("./is-iterable");I.exports=function(o){if(!s(o))throw new TypeError(o+" is not iterable");return o}},{"./is-iterable":172}],175:[function(e,I,F){I.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(e,I,F){var s=e("ext/global-this"),o={object:!0,symbol:!0};I.exports=function(){var h=s.Symbol,y;if(typeof h!="function")return!1;y=h("test symbol");try{String(y)}catch{return!1}return!(!o[typeof h.iterator]||!o[typeof h.toPrimitive]||!o[typeof h.toStringTag])}},{"ext/global-this":188}],177:[function(e,I,F){I.exports=function(s){return s?typeof s=="symbol"?!0:!s.constructor||s.constructor.name!=="Symbol"?!1:s[s.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(e,I,F){var s=e("d"),o=Object.create,h=Object.defineProperty,y=Object.prototype,t=o(null);I.exports=function(a){for(var i=0,n,r;t[a+(i||"")];)++i;return a+=i||"",t[a]=!0,n="@@"+a,h(y,n,s.gs(null,function(f){r||(r=!0,h(this,n,s(f)),r=!1)})),n}},{d:106}],179:[function(e,I,F){var s=e("d"),o=e("ext/global-this").Symbol;I.exports=function(h){return Object.defineProperties(h,{hasInstance:s("",o&&o.hasInstance||h("hasInstance")),isConcatSpreadable:s("",o&&o.isConcatSpreadable||h("isConcatSpreadable")),iterator:s("",o&&o.iterator||h("iterator")),match:s("",o&&o.match||h("match")),replace:s("",o&&o.replace||h("replace")),search:s("",o&&o.search||h("search")),species:s("",o&&o.species||h("species")),split:s("",o&&o.split||h("split")),toPrimitive:s("",o&&o.toPrimitive||h("toPrimitive")),toStringTag:s("",o&&o.toStringTag||h("toStringTag")),unscopables:s("",o&&o.unscopables||h("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(e,I,F){var s=e("d"),o=e("../../../validate-symbol"),h=Object.create(null);I.exports=function(y){return Object.defineProperties(y,{for:s(function(t){return h[t]?h[t]:h[t]=y(String(t))}),keyFor:s(function(t){var a;o(t);for(a in h)if(h[a]===t)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(e,I,F){var s=e("d"),o=e("./validate-symbol"),h=e("ext/global-this").Symbol,y=e("./lib/private/generate-name"),t=e("./lib/private/setup/standard-symbols"),a=e("./lib/private/setup/symbol-registry"),i=Object.create,n=Object.defineProperties,r=Object.defineProperty,f,u,l;if(typeof h=="function")try{String(h()),l=!0}catch{}else h=null;u=function(d){if(this instanceof u)throw new TypeError("Symbol is not a constructor");return f(d)},I.exports=f=function m(d){var b;if(this instanceof m)throw new TypeError("Symbol is not a constructor");return l?h(d):(b=i(u.prototype),d=d===void 0?"":String(d),n(b,{__description__:s("",d),__name__:s("",y(d))}))},t(f),a(f),n(u.prototype,{constructor:s(f),toString:s("",function(){return this.__name__})}),n(f.prototype,{toString:s(function(){return"Symbol ("+o(this).__description__+")"}),valueOf:s(function(){return o(this)})}),r(f.prototype,f.toPrimitive,s("",function(){var m=o(this);return typeof m=="symbol"?m:m.toString()})),r(f.prototype,f.toStringTag,s("c","Symbol")),r(u.prototype,f.toStringTag,s("c",f.prototype[f.toStringTag])),r(u.prototype,f.toPrimitive,s("c",f.prototype[f.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(e,I,F){var s=e("./is-symbol");I.exports=function(o){if(!s(o))throw new TypeError(o+" is not a symbol");return o}},{"./is-symbol":177}],183:[function(e,I,F){I.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(e,I,F){I.exports=function(){var s,o;if(typeof WeakMap!="function")return!1;try{s=new WeakMap([[o={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(s)!=="[object WeakMap]"||typeof s.set!="function"||s.set({},1)!==s||typeof s.delete!="function"||typeof s.has!="function"||s.get(o)!=="one")}},{}],185:[function(e,I,F){I.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(e,I,F){var s=e("es5-ext/object/is-value"),o=e("es5-ext/object/set-prototype-of"),h=e("es5-ext/object/valid-object"),y=e("es5-ext/object/valid-value"),t=e("es5-ext/string/random-uniq"),a=e("d"),i=e("es6-iterator/get"),n=e("es6-iterator/for-of"),r=e("es6-symbol").toStringTag,f=e("./is-native-implemented"),u=Array.isArray,l=Object.defineProperty,m=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf,b;I.exports=b=function(){var g=arguments[0],_;if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");return _=f&&o&&WeakMap!==b?o(new WeakMap,d(this)):this,s(g)&&(u(g)||(g=i(g))),l(_,"__weakMapData__",a("c","$weakMap$"+t())),g&&n(g,function(p){y(p),_.set(p[0],p[1])}),_},f&&(o&&o(b,WeakMap),b.prototype=Object.create(WeakMap.prototype,{constructor:a(b)})),Object.defineProperties(b.prototype,{delete:a(function(g){return m.call(h(g),this.__weakMapData__)?(delete g[this.__weakMapData__],!0):!1}),get:a(function(g){if(!!m.call(h(g),this.__weakMapData__))return g[this.__weakMapData__]}),has:a(function(g){return m.call(h(g),this.__weakMapData__)}),set:a(function(g,_){return l(h(g),this.__weakMapData__,a("c",_)),this}),toString:a(function(){return"[object WeakMap]"})}),l(b.prototype,r,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(e,I,F){var s=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};I.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}()},{}],188:[function(e,I,F){I.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(e,I,F){I.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(e,I,F){var s=e("is-string-blank");I.exports=function(o){var h=typeof o;if(h==="string"){var y=o;if(o=+o,o===0&&s(y))return!1}else if(h!=="number")return!1;return o-o<1}},{"is-string-blank":237}],191:[function(e,I,F){var s=e("dtype");I.exports=o;function o(h,y,t){if(!h)throw new TypeError("must specify data as first parameter");if(t=+(t||0)|0,Array.isArray(h)&&h[0]&&typeof h[0][0]=="number"){var a=h[0].length,i=h.length*a,n,r,f,u;(!y||typeof y=="string")&&(y=new(s(y||"float32"))(i+t));var l=y.length-t;if(i!==l)throw new Error("source length "+i+" ("+a+"x"+h.length+") does not match destination length "+l);for(n=0,f=t;n<h.length;n++)for(r=0;r<a;r++)y[f++]=h[n][r]===null?NaN:h[n][r]}else if(!y||typeof y=="string"){var m=s(y||"float32");if(Array.isArray(h)||y==="array")for(y=new m(h.length+t),n=0,f=t,u=y.length;f<u;f++,n++)y[f]=h[n]===null?NaN:h[n];else t===0?y=new m(h):(y=new m(h.length+t),y.set(h,t))}else y.set(h,t);return y}},{dtype:127}],192:[function(e,I,F){var s=e("css-font/stringify"),o=[32,126];I.exports=h;function h(y){y=y||{};var t=y.shape?y.shape:y.canvas?[y.canvas.width,y.canvas.height]:[512,512],a=y.canvas||document.createElement("canvas"),i=y.font,n=typeof y.step=="number"?[y.step,y.step]:y.step||[32,32],r=y.chars||o;if(i&&typeof i!="string"&&(i=s(i)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var f=[],u=r[0],l=0;u<=r[1];u++)f[l++]=String.fromCharCode(u);r=f}t=t.slice(),a.width=t[0],a.height=t[1];var m=a.getContext("2d");m.fillStyle="#000",m.fillRect(0,0,a.width,a.height),m.font=i,m.textAlign="center",m.textBaseline="middle",m.fillStyle="#fff";for(var d=n[0]/2,b=n[1]/2,u=0;u<r.length;u++)m.fillText(r[u],d,b),(d+=n[0])>t[0]-n[0]/2&&(d=n[0]/2,b+=n[1]);return a}},{"css-font/stringify":102}],193:[function(e,I,F){I.exports=s,s.canvas=document.createElement("canvas"),s.cache={};function s(u,a){a||(a={}),(typeof u=="string"||Array.isArray(u))&&(a.family=u);var i=Array.isArray(a.family)?a.family.join(", "):a.family;if(!i)throw Error("`family` must be defined");var n=a.size||a.fontSize||a.em||48,r=a.weight||a.fontWeight||"",f=a.style||a.fontStyle||"",u=[f,r,n].join(" ")+"px "+i,l=a.origin||"top";if(s.cache[i]&&n<=s.cache[i].em)return o(s.cache[i],l);var m=a.canvas||s.canvas,d=m.getContext("2d"),b={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},g=Math.ceil(n*1.5);m.height=g,m.width=g*.5,d.font=u;var _="H",p={top:0};d.clearRect(0,0,g,g),d.textBaseline="top",d.fillStyle="black",d.fillText(_,0,0);var A=h(d.getImageData(0,0,g,g));d.clearRect(0,0,g,g),d.textBaseline="bottom",d.fillText(_,0,g);var c=h(d.getImageData(0,0,g,g));p.lineHeight=p.bottom=g-c+A,d.clearRect(0,0,g,g),d.textBaseline="alphabetic",d.fillText(_,0,g);var S=h(d.getImageData(0,0,g,g)),T=g-S-1+A;p.baseline=p.alphabetic=T,d.clearRect(0,0,g,g),d.textBaseline="middle",d.fillText(_,0,g*.5);var x=h(d.getImageData(0,0,g,g));p.median=p.middle=g-x-1+A-g*.5,d.clearRect(0,0,g,g),d.textBaseline="hanging",d.fillText(_,0,g*.5);var w=h(d.getImageData(0,0,g,g));p.hanging=g-w-1+A-g*.5,d.clearRect(0,0,g,g),d.textBaseline="ideographic",d.fillText(_,0,g);var v=h(d.getImageData(0,0,g,g));if(p.ideographic=g-v-1+A,b.upper&&(d.clearRect(0,0,g,g),d.textBaseline="top",d.fillText(b.upper,0,0),p.upper=h(d.getImageData(0,0,g,g)),p.capHeight=p.baseline-p.upper),b.lower&&(d.clearRect(0,0,g,g),d.textBaseline="top",d.fillText(b.lower,0,0),p.lower=h(d.getImageData(0,0,g,g)),p.xHeight=p.baseline-p.lower),b.tittle&&(d.clearRect(0,0,g,g),d.textBaseline="top",d.fillText(b.tittle,0,0),p.tittle=h(d.getImageData(0,0,g,g))),b.ascent&&(d.clearRect(0,0,g,g),d.textBaseline="top",d.fillText(b.ascent,0,0),p.ascent=h(d.getImageData(0,0,g,g))),b.descent&&(d.clearRect(0,0,g,g),d.textBaseline="top",d.fillText(b.descent,0,0),p.descent=y(d.getImageData(0,0,g,g))),b.overshoot){d.clearRect(0,0,g,g),d.textBaseline="top",d.fillText(b.overshoot,0,0);var C=y(d.getImageData(0,0,g,g));p.overshoot=C-T}for(var M in p)p[M]/=n;return p.em=n,s.cache[i]=p,o(p,l)}function o(t,a){var i={};typeof a=="string"&&(a=t[a]);for(var n in t)n!=="em"&&(i[n]=t[n]-a);return i}function h(t){for(var a=t.height,i=t.data,n=3;n<i.length;n+=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}function y(t){for(var a=t.height,i=t.data,n=i.length-1;n>0;n-=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}},{}],194:[function(e,I,F){I.exports=s;function s(o,h){if(typeof o!="string")throw new TypeError("must specify type string");if(h=h||{},typeof document=="undefined"&&!h.canvas)return null;var y=h.canvas||document.createElement("canvas");typeof h.width=="number"&&(y.width=h.width),typeof h.height=="number"&&(y.height=h.height);var t=h,a;try{var i=[o];o.indexOf("webgl")===0&&i.push("experimental-"+o);for(var n=0;n<i.length;n++)if(a=y.getContext(i[n],t),a)return a}catch{a=null}return a||null}},{}],195:[function(e,I,F){I.exports=s;function s(o,h){var y=h[0],t=h[1],a=h[2],i=h[3],n=h[4],r=h[5],f=h[6],u=h[7],l=h[8],m=h[9],d=h[10],b=h[11],g=h[12],_=h[13],p=h[14],A=h[15];return o[0]=r*(d*A-b*p)-m*(f*A-u*p)+_*(f*b-u*d),o[1]=-(t*(d*A-b*p)-m*(a*A-i*p)+_*(a*b-i*d)),o[2]=t*(f*A-u*p)-r*(a*A-i*p)+_*(a*u-i*f),o[3]=-(t*(f*b-u*d)-r*(a*b-i*d)+m*(a*u-i*f)),o[4]=-(n*(d*A-b*p)-l*(f*A-u*p)+g*(f*b-u*d)),o[5]=y*(d*A-b*p)-l*(a*A-i*p)+g*(a*b-i*d),o[6]=-(y*(f*A-u*p)-n*(a*A-i*p)+g*(a*u-i*f)),o[7]=y*(f*b-u*d)-n*(a*b-i*d)+l*(a*u-i*f),o[8]=n*(m*A-b*_)-l*(r*A-u*_)+g*(r*b-u*m),o[9]=-(y*(m*A-b*_)-l*(t*A-i*_)+g*(t*b-i*m)),o[10]=y*(r*A-u*_)-n*(t*A-i*_)+g*(t*u-i*r),o[11]=-(y*(r*b-u*m)-n*(t*b-i*m)+l*(t*u-i*r)),o[12]=-(n*(m*p-d*_)-l*(r*p-f*_)+g*(r*d-f*m)),o[13]=y*(m*p-d*_)-l*(t*p-a*_)+g*(t*d-a*m),o[14]=-(y*(r*p-f*_)-n*(t*p-a*_)+g*(t*f-a*r)),o[15]=y*(r*d-f*m)-n*(t*d-a*m)+l*(t*f-a*r),o}},{}],196:[function(e,I,F){I.exports=s;function s(o){var h=new Float32Array(16);return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h}},{}],197:[function(e,I,F){I.exports=s;function s(o,h){return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[4]=h[4],o[5]=h[5],o[6]=h[6],o[7]=h[7],o[8]=h[8],o[9]=h[9],o[10]=h[10],o[11]=h[11],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15],o}},{}],198:[function(e,I,F){I.exports=s;function s(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],199:[function(e,I,F){I.exports=s;function s(o){var h=o[0],y=o[1],t=o[2],a=o[3],i=o[4],n=o[5],r=o[6],f=o[7],u=o[8],l=o[9],m=o[10],d=o[11],b=o[12],g=o[13],_=o[14],p=o[15],A=h*n-y*i,c=h*r-t*i,S=h*f-a*i,T=y*r-t*n,x=y*f-a*n,w=t*f-a*r,v=u*g-l*b,C=u*_-m*b,M=u*p-d*b,E=l*_-m*g,L=l*p-d*g,z=m*p-d*_;return A*z-c*L+S*E+T*M-x*C+w*v}},{}],200:[function(e,I,F){I.exports=s;function s(o,h){var y=h[0],t=h[1],a=h[2],i=h[3],n=y+y,r=t+t,f=a+a,u=y*n,l=t*n,m=t*r,d=a*n,b=a*r,g=a*f,_=i*n,p=i*r,A=i*f;return o[0]=1-m-g,o[1]=l+A,o[2]=d-p,o[3]=0,o[4]=l-A,o[5]=1-u-g,o[6]=b+_,o[7]=0,o[8]=d+p,o[9]=b-_,o[10]=1-u-m,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],201:[function(e,I,F){I.exports=s;function s(o,h,y){var t,a,i,n=y[0],r=y[1],f=y[2],u=Math.sqrt(n*n+r*r+f*f);return Math.abs(u)<1e-6?null:(u=1/u,n*=u,r*=u,f*=u,t=Math.sin(h),a=Math.cos(h),i=1-a,o[0]=n*n*i+a,o[1]=r*n*i+f*t,o[2]=f*n*i-r*t,o[3]=0,o[4]=n*r*i-f*t,o[5]=r*r*i+a,o[6]=f*r*i+n*t,o[7]=0,o[8]=n*f*i+r*t,o[9]=r*f*i-n*t,o[10]=f*f*i+a,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}},{}],202:[function(e,I,F){I.exports=s;function s(o,h,y){var t=h[0],a=h[1],i=h[2],n=h[3],r=t+t,f=a+a,u=i+i,l=t*r,m=t*f,d=t*u,b=a*f,g=a*u,_=i*u,p=n*r,A=n*f,c=n*u;return o[0]=1-(b+_),o[1]=m+c,o[2]=d-A,o[3]=0,o[4]=m-c,o[5]=1-(l+_),o[6]=g+p,o[7]=0,o[8]=d+A,o[9]=g-p,o[10]=1-(l+b),o[11]=0,o[12]=y[0],o[13]=y[1],o[14]=y[2],o[15]=1,o}},{}],203:[function(e,I,F){I.exports=s;function s(o,h){return o[0]=h[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=h[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=h[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],204:[function(e,I,F){I.exports=s;function s(o,h){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=h[0],o[13]=h[1],o[14]=h[2],o[15]=1,o}},{}],205:[function(e,I,F){I.exports=s;function s(o,h){var y=Math.sin(h),t=Math.cos(h);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=t,o[6]=y,o[7]=0,o[8]=0,o[9]=-y,o[10]=t,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],206:[function(e,I,F){I.exports=s;function s(o,h){var y=Math.sin(h),t=Math.cos(h);return o[0]=t,o[1]=0,o[2]=-y,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=y,o[9]=0,o[10]=t,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],207:[function(e,I,F){I.exports=s;function s(o,h){var y=Math.sin(h),t=Math.cos(h);return o[0]=t,o[1]=y,o[2]=0,o[3]=0,o[4]=-y,o[5]=t,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],208:[function(e,I,F){I.exports=s;function s(o,h,y,t,a,i,n){var r=1/(y-h),f=1/(a-t),u=1/(i-n);return o[0]=i*2*r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i*2*f,o[6]=0,o[7]=0,o[8]=(y+h)*r,o[9]=(a+t)*f,o[10]=(n+i)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*i*2*u,o[15]=0,o}},{}],209:[function(e,I,F){I.exports=s;function s(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],210:[function(e,I,F){I.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(e,I,F){I.exports=s;function s(o,h){var y=h[0],t=h[1],a=h[2],i=h[3],n=h[4],r=h[5],f=h[6],u=h[7],l=h[8],m=h[9],d=h[10],b=h[11],g=h[12],_=h[13],p=h[14],A=h[15],c=y*r-t*n,S=y*f-a*n,T=y*u-i*n,x=t*f-a*r,w=t*u-i*r,v=a*u-i*f,C=l*_-m*g,M=l*p-d*g,E=l*A-b*g,L=m*p-d*_,z=m*A-b*_,O=d*A-b*p,R=c*O-S*z+T*L+x*E-w*M+v*C;return R?(R=1/R,o[0]=(r*O-f*z+u*L)*R,o[1]=(a*z-t*O-i*L)*R,o[2]=(_*v-p*w+A*x)*R,o[3]=(d*w-m*v-b*x)*R,o[4]=(f*E-n*O-u*M)*R,o[5]=(y*O-a*E+i*M)*R,o[6]=(p*T-g*v-A*S)*R,o[7]=(l*v-d*T+b*S)*R,o[8]=(n*z-r*E+u*C)*R,o[9]=(t*E-y*z-i*C)*R,o[10]=(g*w-_*T+A*c)*R,o[11]=(m*T-l*w-b*c)*R,o[12]=(r*M-n*L-f*C)*R,o[13]=(y*L-t*M+a*C)*R,o[14]=(_*S-g*x-p*c)*R,o[15]=(l*x-m*S+d*c)*R,o):null}},{}],212:[function(e,I,F){var s=e("./identity");I.exports=o;function o(h,y,t,a){var i,n,r,f,u,l,m,d,b,g,_=y[0],p=y[1],A=y[2],c=a[0],S=a[1],T=a[2],x=t[0],w=t[1],v=t[2];return Math.abs(_-x)<1e-6&&Math.abs(p-w)<1e-6&&Math.abs(A-v)<1e-6?s(h):(m=_-x,d=p-w,b=A-v,g=1/Math.sqrt(m*m+d*d+b*b),m*=g,d*=g,b*=g,i=S*b-T*d,n=T*m-c*b,r=c*d-S*m,g=Math.sqrt(i*i+n*n+r*r),g?(g=1/g,i*=g,n*=g,r*=g):(i=0,n=0,r=0),f=d*r-b*n,u=b*i-m*r,l=m*n-d*i,g=Math.sqrt(f*f+u*u+l*l),g?(g=1/g,f*=g,u*=g,l*=g):(f=0,u=0,l=0),h[0]=i,h[1]=f,h[2]=m,h[3]=0,h[4]=n,h[5]=u,h[6]=d,h[7]=0,h[8]=r,h[9]=l,h[10]=b,h[11]=0,h[12]=-(i*_+n*p+r*A),h[13]=-(f*_+u*p+l*A),h[14]=-(m*_+d*p+b*A),h[15]=1,h)}},{"./identity":209}],213:[function(e,I,F){I.exports=s;function s(o,h,y){var t=h[0],a=h[1],i=h[2],n=h[3],r=h[4],f=h[5],u=h[6],l=h[7],m=h[8],d=h[9],b=h[10],g=h[11],_=h[12],p=h[13],A=h[14],c=h[15],S=y[0],T=y[1],x=y[2],w=y[3];return o[0]=S*t+T*r+x*m+w*_,o[1]=S*a+T*f+x*d+w*p,o[2]=S*i+T*u+x*b+w*A,o[3]=S*n+T*l+x*g+w*c,S=y[4],T=y[5],x=y[6],w=y[7],o[4]=S*t+T*r+x*m+w*_,o[5]=S*a+T*f+x*d+w*p,o[6]=S*i+T*u+x*b+w*A,o[7]=S*n+T*l+x*g+w*c,S=y[8],T=y[9],x=y[10],w=y[11],o[8]=S*t+T*r+x*m+w*_,o[9]=S*a+T*f+x*d+w*p,o[10]=S*i+T*u+x*b+w*A,o[11]=S*n+T*l+x*g+w*c,S=y[12],T=y[13],x=y[14],w=y[15],o[12]=S*t+T*r+x*m+w*_,o[13]=S*a+T*f+x*d+w*p,o[14]=S*i+T*u+x*b+w*A,o[15]=S*n+T*l+x*g+w*c,o}},{}],214:[function(e,I,F){I.exports=s;function s(o,h,y,t,a,i,n){var r=1/(h-y),f=1/(t-a),u=1/(i-n);return o[0]=-2*r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*f,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*u,o[11]=0,o[12]=(h+y)*r,o[13]=(a+t)*f,o[14]=(n+i)*u,o[15]=1,o}},{}],215:[function(e,I,F){I.exports=s;function s(o,h,y,t,a){var i=1/Math.tan(h/2),n=1/(t-a);return o[0]=i/y,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(a+t)*n,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*a*t*n,o[15]=0,o}},{}],216:[function(e,I,F){I.exports=s;function s(o,h,y,t){var a=Math.tan(h.upDegrees*Math.PI/180),i=Math.tan(h.downDegrees*Math.PI/180),n=Math.tan(h.leftDegrees*Math.PI/180),r=Math.tan(h.rightDegrees*Math.PI/180),f=2/(n+r),u=2/(a+i);return o[0]=f,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=-((n-r)*f*.5),o[9]=(a-i)*u*.5,o[10]=t/(y-t),o[11]=-1,o[12]=0,o[13]=0,o[14]=t*y/(y-t),o[15]=0,o}},{}],217:[function(e,I,F){I.exports=s;function s(o,h,y,t){var a=t[0],i=t[1],n=t[2],r=Math.sqrt(a*a+i*i+n*n),f,u,l,m,d,b,g,_,p,A,c,S,T,x,w,v,C,M,E,L,z,O,R,D;return Math.abs(r)<1e-6?null:(r=1/r,a*=r,i*=r,n*=r,f=Math.sin(y),u=Math.cos(y),l=1-u,m=h[0],d=h[1],b=h[2],g=h[3],_=h[4],p=h[5],A=h[6],c=h[7],S=h[8],T=h[9],x=h[10],w=h[11],v=a*a*l+u,C=i*a*l+n*f,M=n*a*l-i*f,E=a*i*l-n*f,L=i*i*l+u,z=n*i*l+a*f,O=a*n*l+i*f,R=i*n*l-a*f,D=n*n*l+u,o[0]=m*v+_*C+S*M,o[1]=d*v+p*C+T*M,o[2]=b*v+A*C+x*M,o[3]=g*v+c*C+w*M,o[4]=m*E+_*L+S*z,o[5]=d*E+p*L+T*z,o[6]=b*E+A*L+x*z,o[7]=g*E+c*L+w*z,o[8]=m*O+_*R+S*D,o[9]=d*O+p*R+T*D,o[10]=b*O+A*R+x*D,o[11]=g*O+c*R+w*D,h!==o&&(o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15]),o)}},{}],218:[function(e,I,F){I.exports=s;function s(o,h,y){var t=Math.sin(y),a=Math.cos(y),i=h[4],n=h[5],r=h[6],f=h[7],u=h[8],l=h[9],m=h[10],d=h[11];return h!==o&&(o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15]),o[4]=i*a+u*t,o[5]=n*a+l*t,o[6]=r*a+m*t,o[7]=f*a+d*t,o[8]=u*a-i*t,o[9]=l*a-n*t,o[10]=m*a-r*t,o[11]=d*a-f*t,o}},{}],219:[function(e,I,F){I.exports=s;function s(o,h,y){var t=Math.sin(y),a=Math.cos(y),i=h[0],n=h[1],r=h[2],f=h[3],u=h[8],l=h[9],m=h[10],d=h[11];return h!==o&&(o[4]=h[4],o[5]=h[5],o[6]=h[6],o[7]=h[7],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15]),o[0]=i*a-u*t,o[1]=n*a-l*t,o[2]=r*a-m*t,o[3]=f*a-d*t,o[8]=i*t+u*a,o[9]=n*t+l*a,o[10]=r*t+m*a,o[11]=f*t+d*a,o}},{}],220:[function(e,I,F){I.exports=s;function s(o,h,y){var t=Math.sin(y),a=Math.cos(y),i=h[0],n=h[1],r=h[2],f=h[3],u=h[4],l=h[5],m=h[6],d=h[7];return h!==o&&(o[8]=h[8],o[9]=h[9],o[10]=h[10],o[11]=h[11],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15]),o[0]=i*a+u*t,o[1]=n*a+l*t,o[2]=r*a+m*t,o[3]=f*a+d*t,o[4]=u*a-i*t,o[5]=l*a-n*t,o[6]=m*a-r*t,o[7]=d*a-f*t,o}},{}],221:[function(e,I,F){I.exports=s;function s(o,h,y){var t=y[0],a=y[1],i=y[2];return o[0]=h[0]*t,o[1]=h[1]*t,o[2]=h[2]*t,o[3]=h[3]*t,o[4]=h[4]*a,o[5]=h[5]*a,o[6]=h[6]*a,o[7]=h[7]*a,o[8]=h[8]*i,o[9]=h[9]*i,o[10]=h[10]*i,o[11]=h[11]*i,o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15],o}},{}],222:[function(e,I,F){I.exports=s;function s(o){return"mat4("+o[0]+", "+o[1]+", "+o[2]+", "+o[3]+", "+o[4]+", "+o[5]+", "+o[6]+", "+o[7]+", "+o[8]+", "+o[9]+", "+o[10]+", "+o[11]+", "+o[12]+", "+o[13]+", "+o[14]+", "+o[15]+")"}},{}],223:[function(e,I,F){I.exports=s;function s(o,h,y){var t=y[0],a=y[1],i=y[2],n,r,f,u,l,m,d,b,g,_,p,A;return h===o?(o[12]=h[0]*t+h[4]*a+h[8]*i+h[12],o[13]=h[1]*t+h[5]*a+h[9]*i+h[13],o[14]=h[2]*t+h[6]*a+h[10]*i+h[14],o[15]=h[3]*t+h[7]*a+h[11]*i+h[15]):(n=h[0],r=h[1],f=h[2],u=h[3],l=h[4],m=h[5],d=h[6],b=h[7],g=h[8],_=h[9],p=h[10],A=h[11],o[0]=n,o[1]=r,o[2]=f,o[3]=u,o[4]=l,o[5]=m,o[6]=d,o[7]=b,o[8]=g,o[9]=_,o[10]=p,o[11]=A,o[12]=n*t+l*a+g*i+h[12],o[13]=r*t+m*a+_*i+h[13],o[14]=f*t+d*a+p*i+h[14],o[15]=u*t+b*a+A*i+h[15]),o}},{}],224:[function(e,I,F){I.exports=s;function s(o,h){if(o===h){var y=h[1],t=h[2],a=h[3],i=h[6],n=h[7],r=h[11];o[1]=h[4],o[2]=h[8],o[3]=h[12],o[4]=y,o[6]=h[9],o[7]=h[13],o[8]=t,o[9]=i,o[11]=h[14],o[12]=a,o[13]=n,o[14]=r}else o[0]=h[0],o[1]=h[4],o[2]=h[8],o[3]=h[12],o[4]=h[1],o[5]=h[5],o[6]=h[9],o[7]=h[13],o[8]=h[2],o[9]=h[6],o[10]=h[10],o[11]=h[14],o[12]=h[3],o[13]=h[7],o[14]=h[11],o[15]=h[15];return o}},{}],225:[function(e,I,F){var s=e("css-font"),o=e("pick-by-alias"),h=e("regl"),y=e("gl-util/context"),t=e("es6-weak-map"),a=e("color-normalize"),i=e("font-atlas"),n=e("typedarray-pool"),r=e("parse-rect"),f=e("is-plain-obj"),u=e("parse-unit"),l=e("to-px"),m=e("detect-kerning"),d=e("object-assign"),b=e("font-measure"),g=e("flatten-vertex-data"),_=e("bit-twiddle"),p=_.nextPow2,A=new t,c=!1;if(document.body){var S=document.body.appendChild(document.createElement("div"));S.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(S).fontStretch&&(c=!0),document.body.removeChild(S)}var T=function(v){x(v)?(v={regl:v},this.gl=v.regl._gl):this.gl=y(v),this.shader=A.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=v.regl||h({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),A.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(v)?v:{})};T.prototype.createShader=function(){var v=this.regl,C=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(E,L){return[L.atlas.width,L.atlas.height]},atlasDim:function(E,L){return[L.atlas.cols,L.atlas.rows]},atlas:function(E,L){return L.atlas.texture},charStep:function(E,L){return L.atlas.step},em:function(E,L){return L.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),M={};return{regl:v,draw:C,atlas:M}},T.prototype.update=function(v){var C=this;if(typeof v=="string")v={text:v};else if(!v)return;v=o(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),v.opacity!=null&&(Array.isArray(v.opacity)?this.opacity=v.opacity.map(function(_e){return parseFloat(_e)}):this.opacity=parseFloat(v.opacity)),v.viewport!=null&&(this.viewport=r(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),v.kerning!=null&&(this.kerning=v.kerning),v.offset!=null&&(typeof v.offset=="number"&&(v.offset=[v.offset,0]),this.positionOffset=g(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!v.font&&(v.font=T.baseFontSize+"px sans-serif");var M=!1,E=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(_e,Re){if(typeof _e=="string")try{_e=s.parse(_e)}catch{_e=s.parse(T.baseFontSize+"px "+_e)}else _e=s.parse(s.stringify(_e));var Ve=s.stringify({size:T.baseFontSize,family:_e.family,stretch:c?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style}),Je=u(_e.size),ze=Math.round(Je[0]*l(Je[1]));if(ze!==C.fontSize[Re]&&(E=!0,C.fontSize[Re]=ze),(!C.font[Re]||Ve!=C.font[Re].baseString)&&(M=!0,C.font[Re]=T.fonts[Ve],!C.font[Re])){var De=_e.family.join(", "),je=[_e.style];_e.style!=_e.variant&&je.push(_e.variant),_e.variant!=_e.weight&&je.push(_e.weight),c&&_e.weight!=_e.stretch&&je.push(_e.stretch),C.font[Re]={baseString:Ve,family:De,weight:_e.weight,stretch:_e.stretch,style:_e.style,variant:_e.variant,width:{},kerning:{},metrics:b(De,{origin:"top",fontSize:T.baseFontSize,fontStyle:je.join(" ")})},T.fonts[Ve]=C.font[Re]}}),(M||E)&&this.font.forEach(function(_e,Re){var Ve=s.stringify({size:C.fontSize[Re],family:_e.family,stretch:c?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style});if(C.fontAtlas[Re]=C.shader.atlas[Ve],!C.fontAtlas[Re]){var Je=_e.metrics;C.shader.atlas[Ve]=C.fontAtlas[Re]={fontString:Ve,step:Math.ceil(C.fontSize[Re]*Je.bottom*.5)*2,em:C.fontSize[Re],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:C.regl.texture()}}v.text==null&&(v.text=C.text)}),typeof v.text=="string"&&v.position&&v.position.length>2){for(var L=Array(v.position.length*.5),z=0;z<L.length;z++)L[z]=v.text;v.text=L}var O;if(v.text!=null||M){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var R=1;R<v.text.length;R++)this.textOffsets[R]=this.textOffsets[R-1]+v.text[R-1].length,this.count+=v.text[R].length,this.counts.push(v.text[R].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];O=[],this.font.forEach(function(_e,Re){T.atlasContext.font=_e.baseString;for(var Ve=C.fontAtlas[Re],Je=0;Je<C.text.length;Je++){var ze=C.text.charAt(Je);if(Ve.ids[ze]==null&&(Ve.ids[ze]=Ve.chars.length,Ve.chars.push(ze),O.push(ze)),_e.width[ze]==null&&(_e.width[ze]=T.atlasContext.measureText(ze).width/T.baseFontSize,C.kerning)){var De=[];for(var je in _e.width)De.push(je+ze,ze+je);d(_e.kerning,m(_e.family,{pairs:De}))}}})}if(v.position)if(v.position.length>2){for(var D=!v.position[0].length,H=n.mallocFloat(this.count*2),B=0,$=0;B<this.counts.length;B++){var W=this.counts[B];if(D)for(var re=0;re<W;re++)H[$++]=v.position[B*2],H[$++]=v.position[B*2+1];else for(var Q=0;Q<W;Q++)H[$++]=v.position[B][0],H[$++]=v.position[B][1]}this.position.call?this.position({type:"float",data:H}):this.position=this.regl.buffer({type:"float",data:H}),n.freeFloat(H)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||M){var Z=n.mallocUint8(this.count),K=n.mallocFloat(this.count*2);this.textWidth=[];for(var le=0,fe=0;le<this.counts.length;le++){for(var ue=this.counts[le],V=this.font[le]||this.font[0],j=this.fontAtlas[le]||this.fontAtlas[0],ee=0;ee<ue;ee++){var q=this.text.charAt(fe),X=this.text.charAt(fe-1);if(Z[fe]=j.ids[q],K[fe*2]=V.width[q],ee){var J=K[fe*2-2],ie=K[fe*2],ne=K[fe*2-1],oe=ne+J*.5+ie*.5;if(this.kerning){var se=V.kerning[X+q];se&&(oe+=se*.001)}K[fe*2+1]=oe}else K[fe*2+1]=K[fe*2]*.5;fe++}this.textWidth.push(K.length?K[fe*2-2]*.5+K[fe*2-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:Z,type:"uint8",usage:"stream"}),this.sizeBuffer({data:K,type:"float",usage:"stream"}),n.freeUint8(Z),n.freeFloat(K),O.length&&this.font.forEach(function(_e,Re){var Ve=C.fontAtlas[Re],Je=Ve.step,ze=Math.floor(T.maxAtlasSize/Je),De=Math.min(ze,Ve.chars.length),je=Math.ceil(Ve.chars.length/De),dt=p(De*Je),Et=p(je*Je);Ve.width=dt,Ve.height=Et,Ve.rows=je,Ve.cols=De,Ve.em&&Ve.texture({data:i({canvas:T.atlasCanvas,font:Ve.fontString,chars:Ve.chars,shape:[dt,Et],step:[Je,Je]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(_e,Re){var Ve=Array.isArray(C.align)?C.align.length>1?C.align[Re]:C.align[0]:C.align;if(typeof Ve=="number")return Ve;switch(Ve){case"right":case"end":return-_e;case"center":case"centre":case"middle":return-_e*.5}return 0})),this.baseline==null&&v.baseline==null&&(v.baseline=0),v.baseline!=null&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(_e,Re){var Ve=(C.font[Re]||C.font[0]).metrics,Je=0;return Je+=Ve.bottom*.5,typeof _e=="number"?Je+=_e-Ve.baseline:Je+=-Ve[_e],Je*=-1,Je})),v.color!=null)if(v.color||(v.color="transparent"),typeof v.color=="string"||!isNaN(v.color))this.color=a(v.color,"uint8");else{var me;if(typeof v.color[0]=="number"&&v.color.length>this.counts.length){var ce=v.color.length;me=n.mallocUint8(ce);for(var pe=(v.color.subarray||v.color.slice).bind(v.color),xe=0;xe<ce;xe+=4)me.set(a(pe(xe,xe+4),"uint8"),xe)}else{var Se=v.color.length;me=n.mallocUint8(Se*4);for(var Ae=0;Ae<Se;Ae++)me.set(a(v.color[Ae]||0,"uint8"),Ae*4)}this.color=me}if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity){var Ce=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Ce){var Ee=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Ee);for(var Oe=0;Oe<this.batch.length;Oe++)this.batch[Oe]={count:this.counts.length>1?this.counts[Oe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Oe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Oe*4,Oe*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Oe]:this.opacity,baseline:this.baselineOffset[Oe]!=null?this.baselineOffset[Oe]:this.baselineOffset[0],align:this.align?this.alignOffset[Oe]!=null?this.alignOffset[Oe]:this.alignOffset[0]:0,atlas:this.fontAtlas[Oe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Oe*2,Oe*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},T.prototype.destroy=function(){},T.prototype.kerning=!0,T.prototype.position={constant:new Float32Array(2)},T.prototype.translate=null,T.prototype.scale=null,T.prototype.font=null,T.prototype.text="",T.prototype.positionOffset=[0,0],T.prototype.opacity=1,T.prototype.color=new Uint8Array([0,0,0,255]),T.prototype.alignOffset=[0,0],T.maxAtlasSize=1024,T.atlasCanvas=document.createElement("canvas"),T.atlasContext=T.atlasCanvas.getContext("2d",{alpha:!1}),T.baseFontSize=64,T.fonts={};function x(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer}I.exports=T},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(e,I,F){(function(s){(function(){var o=e("pick-by-alias");I.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},y(r)?r={container:r}:t(r)?r={container:r}:a(r)?r={gl:r}:r=o(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=s.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var f=document.querySelector(r.container);if(!f)throw Error("Element "+r.container+" is not found");r.container=f}y(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=i(),r.container.appendChild(r.canvas),h(r))}else if(!r.canvas)if(typeof document!="undefined")r.container=document.body||document.documentElement,r.canvas=i(),r.container.appendChild(r.canvas),h(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(u){try{r.gl=r.canvas.getContext(u,r.attrs)}catch{}return r.gl}),r.gl};function h(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*s.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*s.innerHeight);else{var r=n.container.getBoundingClientRect();n.canvas.width=n.width||r.right-r.left,n.canvas.height=n.height||r.bottom-r.top}}function y(n){return typeof n.getContext=="function"&&"width"in n&&"height"in n}function t(n){return typeof n.nodeName=="string"&&typeof n.appendChild=="function"&&typeof n.getBoundingClientRect=="function"}function a(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}function i(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"pick-by-alias":253}],227:[function(e,I,F){I.exports=function(s){typeof s=="string"&&(s=[s]);for(var o=[].slice.call(arguments,1),h=[],y=0;y<s.length-1;y++)h.push(s[y],o[y]||"");return h.push(s[y]),h.join("")}},{}],228:[function(e,I,F){(function(s){(function(){var o=e("is-browser"),h;typeof s.matchMedia=="function"?h=!s.matchMedia("(hover: none)").matches:h=o,I.exports=h}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"is-browser":232}],229:[function(e,I,F){var s=e("is-browser");function o(){var h=!1;try{var y=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("test",null,y),window.removeEventListener("test",null,y)}catch{h=!1}return h}I.exports=s&&o()},{"is-browser":232}],230:[function(e,I,F){F.read=function(s,o,h,y,t){var a,i,n=t*8-y-1,r=(1<<n)-1,f=r>>1,u=-7,l=h?t-1:0,m=h?-1:1,d=s[o+l];for(l+=m,a=d&(1<<-u)-1,d>>=-u,u+=n;u>0;a=a*256+s[o+l],l+=m,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=y;u>0;i=i*256+s[o+l],l+=m,u-=8);if(a===0)a=1-f;else{if(a===r)return i?NaN:(d?-1:1)*(1/0);i=i+Math.pow(2,y),a=a-f}return(d?-1:1)*i*Math.pow(2,a-y)},F.write=function(s,o,h,y,t,a){var i,n,r,f=a*8-t-1,u=(1<<f)-1,l=u>>1,m=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=y?0:a-1,b=y?1:-1,g=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(n=isNaN(o)?1:0,i=u):(i=Math.floor(Math.log(o)/Math.LN2),o*(r=Math.pow(2,-i))<1&&(i--,r*=2),i+l>=1?o+=m/r:o+=m*Math.pow(2,1-l),o*r>=2&&(i++,r/=2),i+l>=u?(n=0,i=u):i+l>=1?(n=(o*r-1)*Math.pow(2,t),i=i+l):(n=o*Math.pow(2,l-1)*Math.pow(2,t),i=0));t>=8;s[h+d]=n&255,d+=b,n/=256,t-=8);for(i=i<<t|n,f+=t;f>0;s[h+d]=i&255,d+=b,i/=256,f-=8);s[h+d-b]|=g*128}},{}],231:[function(e,I,F){typeof Object.create=="function"?I.exports=function(o,h){h&&(o.super_=h,o.prototype=Object.create(h.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:I.exports=function(o,h){if(h){o.super_=h;var y=function(){};y.prototype=h.prototype,o.prototype=new y,o.prototype.constructor=o}}},{}],232:[function(e,I,F){I.exports=!0},{}],233:[function(e,I,F){I.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(e,I,F){I.exports=h,I.exports.isMobile=h,I.exports.default=h;var s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function h(y){y||(y={});var t=y.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var a=y.tablet?o.test(t):s.test(t);return!a&&y.tablet&&y.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(e,I,F){I.exports=function(s){var o=typeof s;return s!==null&&(o==="object"||o==="function")}},{}],236:[function(e,I,F){var s=Object.prototype.toString;I.exports=function(o){var h;return s.call(o)==="[object Object]"&&(h=Object.getPrototypeOf(o),h===null||h===Object.getPrototypeOf({}))}},{}],237:[function(e,I,F){I.exports=function(s){for(var o=s.length,h,y=0;y<o;y++)if(h=s.charCodeAt(y),(h<9||h>13)&&h!==32&&h!==133&&h!==160&&h!==5760&&h!==6158&&(h<8192||h>8205)&&h!==8232&&h!==8233&&h!==8239&&h!==8287&&h!==8288&&h!==12288&&h!==65279)return!1;return!0}},{}],238:[function(e,I,F){I.exports=function(o){return typeof o!="string"?!1:(o=o.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(o)&&/[\dz]$/i.test(o)&&o.length>4))}},{}],239:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?I.exports=o():(s=s||self,s.mapboxgl=o())})(this,function(){var s,o,h;function y(t,a){if(!s)s=a;else if(!o)o=a;else{var i="var sharedChunk = {}; ("+s+")(sharedChunk); ("+o+")(sharedChunk);",n={};s(n),h=a(n),h.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}return y(["exports"],function(t){function a(k,P){return P={exports:{}},k(P,P.exports),P.exports}var i="1.10.1",n=r;function r(k,P,G,ae){this.cx=3*k,this.bx=3*(G-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*P,this.by=3*(ae-P)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=ae,this.p2x=G,this.p2y=ae}r.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},r.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},r.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},r.prototype.solveCurveX=function(k,P){typeof P=="undefined"&&(P=1e-6);var G,ae,de,be,Me;for(de=k,Me=0;Me<8;Me++){if(be=this.sampleCurveX(de)-k,Math.abs(be)<P)return de;var Be=this.sampleCurveDerivativeX(de);if(Math.abs(Be)<1e-6)break;de=de-be/Be}if(G=0,ae=1,de=k,de<G)return G;if(de>ae)return ae;for(;G<ae;){if(be=this.sampleCurveX(de),Math.abs(be-k)<P)return de;k>be?G=de:ae=de,de=(ae-G)*.5+G}return de},r.prototype.solve=function(k,P){return this.sampleCurveY(this.solveCurveX(k,P))};var f=u;function u(k,P){this.x=k,this.y=P}u.prototype={clone:function(){return new u(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,P){return this.clone()._rotateAround(k,P)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var P=k.x-this.x,G=k.y-this.y;return P*P+G*G},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,P){return Math.atan2(this.x*P-this.y*k,this.x*k+this.y*P)},_matMult:function(k){var P=k[0]*this.x+k[1]*this.y,G=k[2]*this.x+k[3]*this.y;return this.x=P,this.y=G,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var P=Math.cos(k),G=Math.sin(k),ae=P*this.x-G*this.y,de=G*this.x+P*this.y;return this.x=ae,this.y=de,this},_rotateAround:function(k,P){var G=Math.cos(k),ae=Math.sin(k),de=P.x+G*(this.x-P.x)-ae*(this.y-P.y),be=P.y+ae*(this.x-P.x)+G*(this.y-P.y);return this.x=de,this.y=be,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(k){return k instanceof u?k:Array.isArray(k)?new u(k[0],k[1]):k};function l(k,P){if(Array.isArray(k)){if(!Array.isArray(P)||k.length!==P.length)return!1;for(var G=0;G<k.length;G++)if(!l(k[G],P[G]))return!1;return!0}if(typeof k=="object"&&k!==null&&P!==null){if(typeof P!="object")return!1;var ae=Object.keys(k);if(ae.length!==Object.keys(P).length)return!1;for(var de in k)if(!l(k[de],P[de]))return!1;return!0}return k===P}function m(k){if(k<=0)return 0;if(k>=1)return 1;var P=k*k,G=P*k;return 4*(k<.5?G:3*(k-P)+G-.75)}function d(k,P,G,ae){var de=new n(k,P,G,ae);return function(be){return de.solve(be)}}var b=d(.25,.1,.25,1);function g(k,P,G){return Math.min(G,Math.max(P,k))}function _(k,P,G){var ae=G-P,de=((k-P)%ae+ae)%ae+P;return de===P?G:de}function p(k,P,G){if(!k.length)return G(null,[]);var ae=k.length,de=new Array(k.length),be=null;k.forEach(function(Me,Be){P(Me,function(tt,ct){tt&&(be=tt),de[Be]=ct,--ae===0&&G(be,de)})})}function A(k){var P=[];for(var G in k)P.push(k[G]);return P}function c(k,P){var G=[];for(var ae in k)ae in P||G.push(ae);return G}function S(k){for(var P=[],G=arguments.length-1;G-- >0;)P[G]=arguments[G+1];for(var ae=0,de=P;ae<de.length;ae+=1){var be=de[ae];for(var Me in be)k[Me]=be[Me]}return k}function T(k,P){for(var G={},ae=0;ae<P.length;ae++){var de=P[ae];de in k&&(G[de]=k[de])}return G}var x=1;function w(){return x++}function v(){function k(P){return P?(P^Math.random()*16>>P/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,k)}return k()}function C(k){return k?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(k):!1}function M(k,P){k.forEach(function(G){!P[G]||(P[G]=P[G].bind(P))})}function E(k,P){return k.indexOf(P,k.length-P.length)!==-1}function L(k,P,G){var ae={};for(var de in k)ae[de]=P.call(G||this,k[de],de,k);return ae}function z(k,P,G){var ae={};for(var de in k)P.call(G||this,k[de],de,k)&&(ae[de]=k[de]);return ae}function O(k){return Array.isArray(k)?k.map(O):typeof k=="object"&&k?L(k,O):k}function R(k,P){for(var G=0;G<k.length;G++)if(P.indexOf(k[G])>=0)return!0;return!1}var D={};function H(k){D[k]||(typeof console!="undefined"&&console.warn(k),D[k]=!0)}function B(k,P,G){return(G.y-k.y)*(P.x-k.x)>(P.y-k.y)*(G.x-k.x)}function $(k){for(var P=0,G=0,ae=k.length,de=ae-1,be=void 0,Me=void 0;G<ae;de=G++)be=k[G],Me=k[de],P+=(Me.x-be.x)*(be.y+Me.y);return P}function W(k){var P=k[0],G=k[1],ae=k[2];return G+=90,G*=Math.PI/180,ae*=Math.PI/180,{x:P*Math.cos(G)*Math.sin(ae),y:P*Math.sin(G)*Math.sin(ae),z:P*Math.cos(ae)}}function re(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Q(k){var P=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,G={};if(k.replace(P,function(de,be,Me,Be){var tt=Me||Be;return G[be]=tt?tt.toLowerCase():!0,""}),G["max-age"]){var ae=parseInt(G["max-age"],10);isNaN(ae)?delete G["max-age"]:G["max-age"]=ae}return G}var Z=null;function K(k){if(Z==null){var P=k.navigator?k.navigator.userAgent:null;Z=!!k.safari||!!(P&&(/\b(iPad|iPhone|iPod)\b/.test(P)||!!P.match("Safari")&&!P.match("Chrome")))}return Z}function le(k){try{var P=self[k];return P.setItem("_mapbox_test_",1),P.removeItem("_mapbox_test_"),!0}catch{return!1}}function fe(k){return self.btoa(encodeURIComponent(k).replace(/%([0-9A-F]{2})/g,function(P,G){return String.fromCharCode(Number("0x"+G))}))}function ue(k){return decodeURIComponent(self.atob(k).split("").map(function(P){return"%"+("00"+P.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var V=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),j=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ee=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,q,X,J={now:V,frame:function(P){var G=j(P);return{cancel:function(){return ee(G)}}},getImageData:function(P,G){G===void 0&&(G=0);var ae=self.document.createElement("canvas"),de=ae.getContext("2d");if(!de)throw new Error("failed to create canvas 2d context");return ae.width=P.width,ae.height=P.height,de.drawImage(P,0,0,P.width,P.height),de.getImageData(-G,-G,P.width+2*G,P.height+2*G)},resolveURL:function(P){return q||(q=self.document.createElement("a")),q.href=P,q.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(X==null&&(X=self.matchMedia("(prefers-reduced-motion: reduce)")),X.matches):!1}},ie={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ne={supported:!1,testSupport:pe},oe,se=!1,me,ce=!1;self.document&&(me=self.document.createElement("img"),me.onload=function(){oe&&xe(oe),oe=null,ce=!0},me.onerror=function(){se=!0,oe=null},me.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function pe(k){se||!me||(ce?xe(k):oe=k)}function xe(k){var P=k.createTexture();k.bindTexture(k.TEXTURE_2D,P);try{if(k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,me),k.isContextLost())return;ne.supported=!0}catch{}k.deleteTexture(P),se=!0}var Se="01";function Ae(){for(var k="1",P="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",G="",ae=0;ae<10;ae++)G+=P[Math.floor(Math.random()*62)];var de=12*60*60*1e3,be=[k,Se,G].join(""),Me=Date.now()+de;return{token:be,tokenExpiresAt:Me}}var Ce=function(P,G){this._transformRequestFn=P,this._customAccessToken=G,this._createSkuToken()};Ce.prototype._createSkuToken=function(){var P=Ae();this._skuToken=P.token,this._skuTokenExpiresAt=P.tokenExpiresAt},Ce.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ce.prototype.transformRequest=function(P,G){return this._transformRequestFn?this._transformRequestFn(P,G)||{url:P}:{url:P}},Ce.prototype.normalizeStyleURL=function(P,G){if(!Ee(P))return P;var ae=ze(P);return ae.path="/styles/v1"+ae.path,this._makeAPIURL(ae,this._customAccessToken||G)},Ce.prototype.normalizeGlyphsURL=function(P,G){if(!Ee(P))return P;var ae=ze(P);return ae.path="/fonts/v1"+ae.path,this._makeAPIURL(ae,this._customAccessToken||G)},Ce.prototype.normalizeSourceURL=function(P,G){if(!Ee(P))return P;var ae=ze(P);return ae.path="/v4/"+ae.authority+".json",ae.params.push("secure"),this._makeAPIURL(ae,this._customAccessToken||G)},Ce.prototype.normalizeSpriteURL=function(P,G,ae,de){var be=ze(P);return Ee(P)?(be.path="/styles/v1"+be.path+"/sprite"+G+ae,this._makeAPIURL(be,this._customAccessToken||de)):(be.path+=""+G+ae,De(be))},Ce.prototype.normalizeTileURL=function(P,G){if(this._isSkuTokenExpired()&&this._createSkuToken(),P&&!Ee(P))return P;var ae=ze(P),de=/(\.(png|jpg)\d*)(?=$)/,be=/^.+\/v4\//,Me=J.devicePixelRatio>=2||G===512?"@2x":"",Be=ne.supported?".webp":"$1";ae.path=ae.path.replace(de,""+Me+Be),ae.path=ae.path.replace(be,"/"),ae.path="/v4"+ae.path;var tt=this._customAccessToken||Ve(ae.params)||ie.ACCESS_TOKEN;return ie.REQUIRE_ACCESS_TOKEN&&tt&&this._skuToken&&ae.params.push("sku="+this._skuToken),this._makeAPIURL(ae,tt)},Ce.prototype.canonicalizeTileURL=function(P,G){var ae="/v4/",de=/\.[\w]+$/,be=ze(P);if(!be.path.match(/(^\/v4\/)/)||!be.path.match(de))return P;var Me="mapbox://tiles/";Me+=be.path.replace(ae,"");var Be=be.params;return G&&(Be=Be.filter(function(tt){return!tt.match(/^access_token=/)})),Be.length&&(Me+="?"+Be.join("&")),Me},Ce.prototype.canonicalizeTileset=function(P,G){for(var ae=G?Ee(G):!1,de=[],be=0,Me=P.tiles||[];be<Me.length;be+=1){var Be=Me[be];_e(Be)?de.push(this.canonicalizeTileURL(Be,ae)):de.push(Be)}return de},Ce.prototype._makeAPIURL=function(P,G){var ae="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",de=ze(ie.API_URL);if(P.protocol=de.protocol,P.authority=de.authority,de.path!=="/"&&(P.path=""+de.path+P.path),!ie.REQUIRE_ACCESS_TOKEN)return De(P);if(G=G||ie.ACCESS_TOKEN,!G)throw new Error("An API access token is required to use Mapbox GL. "+ae);if(G[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+ae);return P.params=P.params.filter(function(be){return be.indexOf("access_token")===-1}),P.params.push("access_token="+G),De(P)};function Ee(k){return k.indexOf("mapbox:")===0}var Oe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _e(k){return Oe.test(k)}function Re(k){return k.indexOf("sku=")>0&&_e(k)}function Ve(k){for(var P=0,G=k;P<G.length;P+=1){var ae=G[P],de=ae.match(/^access_token=(.*)$/);if(de)return de[1]}return null}var Je=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ze(k){var P=k.match(Je);if(!P)throw new Error("Unable to parse URL object");return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}function De(k){var P=k.params.length?"?"+k.params.join("&"):"";return k.protocol+"://"+k.authority+k.path+P}var je="mapbox.eventData";function dt(k){if(!k)return null;var P=k.split(".");if(!P||P.length!==3)return null;try{var G=JSON.parse(ue(P[1]));return G}catch{return null}}var Et=function(P){this.type=P,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Et.prototype.getStorageKey=function(P){var G=dt(ie.ACCESS_TOKEN),ae="";return G&&G.u?ae=fe(G.u):ae=ie.ACCESS_TOKEN||"",P?je+"."+P+":"+ae:je+":"+ae},Et.prototype.fetchEventData=function(){var P=le("localStorage"),G=this.getStorageKey(),ae=this.getStorageKey("uuid");if(P)try{var de=self.localStorage.getItem(G);de&&(this.eventData=JSON.parse(de));var be=self.localStorage.getItem(ae);be&&(this.anonId=be)}catch{H("Unable to read from LocalStorage")}},Et.prototype.saveEventData=function(){var P=le("localStorage"),G=this.getStorageKey(),ae=this.getStorageKey("uuid");if(P)try{self.localStorage.setItem(ae,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(G,JSON.stringify(this.eventData))}catch{H("Unable to write to LocalStorage")}},Et.prototype.processRequests=function(P){},Et.prototype.postEvent=function(P,G,ae,de){var be=this;if(!!ie.EVENTS_URL){var Me=ze(ie.EVENTS_URL);Me.params.push("access_token="+(de||ie.ACCESS_TOKEN||""));var Be={event:this.type,created:new Date(P).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:Se,userId:this.anonId},tt=G?S(Be,G):Be,ct={url:De(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([tt])};this.pendingRequest=Ye(ct,function(gt){be.pendingRequest=null,ae(gt),be.saveEventData(),be.processRequests(de)})}},Et.prototype.queueRequest=function(P,G){this.queue.push(P),this.processRequests(G)};var $t=function(k){function P(){k.call(this,"map.load"),this.success={},this.skuToken=""}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.postMapLoadEvent=function(ae,de,be,Me){this.skuToken=be,(ie.EVENTS_URL&&Me||ie.ACCESS_TOKEN&&Array.isArray(ae)&&ae.some(function(Be){return Ee(Be)||_e(Be)}))&&this.queueRequest({id:de,timestamp:Date.now()},Me)},P.prototype.processRequests=function(ae){var de=this;if(!(this.pendingRequest||this.queue.length===0)){var be=this.queue.shift(),Me=be.id,Be=be.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),C(this.anonId)||(this.anonId=v()),this.postEvent(Be,{skuToken:this.skuToken},function(tt){tt||Me&&(de.success[Me]=!0)},ae))}},P}(Et),wt=function(k){function P(G){k.call(this,"appUserTurnstile"),this._customAccessToken=G}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.postTurnstileEvent=function(ae,de){ie.EVENTS_URL&&ie.ACCESS_TOKEN&&Array.isArray(ae)&&ae.some(function(be){return Ee(be)||_e(be)})&&this.queueRequest(Date.now(),de)},P.prototype.processRequests=function(ae){var de=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var be=dt(ie.ACCESS_TOKEN),Me=be?be.u:ie.ACCESS_TOKEN,Be=Me!==this.eventData.tokenU;C(this.anonId)||(this.anonId=v(),Be=!0);var tt=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),gt=new Date(tt),Dt=(tt-this.eventData.lastSuccess)/(24*60*60*1e3);Be=Be||Dt>=1||Dt<-1||ct.getDate()!==gt.getDate()}else Be=!0;if(!Be)return this.processRequests();this.postEvent(tt,{"enabled.telemetry":!1},function(er){er||(de.eventData.lastSuccess=tt,de.eventData.tokenU=Me)},ae)}},P}(Et),Ot=new wt,Vt=Ot.postTurnstileEvent.bind(Ot),kt=new $t,St=kt.postMapLoadEvent.bind(kt),ot="mapbox-tiles",ht=500,Ke=50,Pe=1e3*60*7,We;function Qe(){self.caches&&!We&&(We=self.caches.open(ot))}var ut;function It(k,P){if(ut===void 0)try{new Response(new ReadableStream),ut=!0}catch{ut=!1}ut?P(k.body):k.blob().then(P)}function Tt(k,P,G){if(Qe(),!!We){var ae={status:P.status,statusText:P.statusText,headers:new self.Headers};P.headers.forEach(function(Me,Be){return ae.headers.set(Be,Me)});var de=Q(P.headers.get("Cache-Control")||"");if(!de["no-store"]){de["max-age"]&&ae.headers.set("Expires",new Date(G+de["max-age"]*1e3).toUTCString());var be=new Date(ae.headers.get("Expires")).getTime()-G;be<Pe||It(P,function(Me){var Be=new self.Response(Me,ae);Qe(),We&&We.then(function(tt){return tt.put(Bt(k.url),Be)}).catch(function(tt){return H(tt.message)})})}}}function Bt(k){var P=k.indexOf("?");return P<0?k:k.slice(0,P)}function rr(k,P){if(Qe(),!We)return P(null);var G=Bt(k.url);We.then(function(ae){ae.match(G).then(function(de){var be=Ut(de);ae.delete(G),be&&ae.put(G,de.clone()),P(null,de,be)}).catch(P)}).catch(P)}function Ut(k){if(!k)return!1;var P=new Date(k.headers.get("Expires")||0),G=Q(k.headers.get("Cache-Control")||"");return P>Date.now()&&!G["no-cache"]}var Qt=1/0;function ar(k){Qt++,Qt>Ke&&(k.getActor().send("enforceCacheSizeLimit",ht),Qt=0)}function nr(k){Qe(),We&&We.then(function(P){P.keys().then(function(G){for(var ae=0;ae<G.length-k;ae++)P.delete(G[ae])})})}function cr(k){var P=self.caches.delete(ot);k&&P.catch(k).then(function(){return k()})}function Kr(k,P){ht=k,Ke=P}var yn;function Qr(){return yn==null&&(yn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),yn}var st={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(st);var Gt=function(k){function P(G,ae,de){ae===401&&_e(de)&&(G+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),k.call(this,G),this.status=ae,this.url=de,this.name=this.constructor.name,this.message=G}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},P}(Error),Zt=re()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},Ht=function(k){return/^file:/.test(k)||/^file:/.test(Zt())&&!/^\w+:/.test(k)};function _r(k,P){var G=new self.AbortController,ae=new self.Request(k.url,{method:k.method||"GET",body:k.body,credentials:k.credentials,headers:k.headers,referrer:Zt(),signal:G.signal}),de=!1,be=!1,Me=Re(ae.url);k.type==="json"&&ae.headers.set("Accept","application/json");var Be=function(ct,gt,Dt){if(!be){if(ct&&ct.message!=="SecurityError"&&H(ct),gt&&Dt)return tt(gt);var er=Date.now();self.fetch(ae).then(function(Yt){if(Yt.ok){var dr=Me?Yt.clone():null;return tt(Yt,dr,er)}else return P(new Gt(Yt.statusText,Yt.status,k.url))}).catch(function(Yt){Yt.code!==20&&P(new Error(Yt.message))})}},tt=function(ct,gt,Dt){(k.type==="arrayBuffer"?ct.arrayBuffer():k.type==="json"?ct.json():ct.text()).then(function(er){be||(gt&&Dt&&Tt(ae,gt,Dt),de=!0,P(null,er,ct.headers.get("Cache-Control"),ct.headers.get("Expires")))}).catch(function(er){be||P(new Error(er.message))})};return Me?rr(ae,Be):Be(null,null),{cancel:function(){be=!0,de||G.abort()}}}function it(k,P){var G=new self.XMLHttpRequest;G.open(k.method||"GET",k.url,!0),k.type==="arrayBuffer"&&(G.responseType="arraybuffer");for(var ae in k.headers)G.setRequestHeader(ae,k.headers[ae]);return k.type==="json"&&(G.responseType="text",G.setRequestHeader("Accept","application/json")),G.withCredentials=k.credentials==="include",G.onerror=function(){P(new Error(G.statusText))},G.onload=function(){if((G.status>=200&&G.status<300||G.status===0)&&G.response!==null){var de=G.response;if(k.type==="json")try{de=JSON.parse(G.response)}catch(be){return P(be)}P(null,de,G.getResponseHeader("Cache-Control"),G.getResponseHeader("Expires"))}else P(new Gt(G.statusText,G.status,k.url))},G.send(k.body),{cancel:function(){return G.abort()}}}var Te=function(k,P){if(!Ht(k.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return _r(k,P);if(re()&&self.worker&&self.worker.actor){var G=!0;return self.worker.actor.send("getResource",k,P,void 0,G)}}return it(k,P)},ke=function(k,P){return Te(S(k,{type:"json"}),P)},Ge=function(k,P){return Te(S(k,{type:"arrayBuffer"}),P)},Ye=function(k,P){return Te(S(k,{method:"POST"}),P)};function qe(k){var P=self.document.createElement("a");return P.href=k,P.protocol===self.document.location.protocol&&P.host===self.document.location.host}var at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function et(k,P,G,ae){var de=new self.Image,be=self.URL;de.onload=function(){P(null,de),be.revokeObjectURL(de.src)},de.onerror=function(){return P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Me=new self.Blob([new Uint8Array(k)],{type:"image/png"});de.cacheControl=G,de.expires=ae,de.src=k.byteLength?be.createObjectURL(Me):at}function pt(k,P){var G=new self.Blob([new Uint8Array(k)],{type:"image/png"});self.createImageBitmap(G).then(function(ae){P(null,ae)}).catch(function(ae){P(new Error("Could not load image because of "+ae.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var _t,Pt,Xt=function(){_t=[],Pt=0};Xt();var zt=function(k,P){if(ne.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),Pt>=ie.MAX_PARALLEL_IMAGE_REQUESTS){var G={requestParameters:k,callback:P,cancelled:!1,cancel:function(){this.cancelled=!0}};return _t.push(G),G}Pt++;var ae=!1,de=function(){if(!ae)for(ae=!0,Pt--;_t.length&&Pt<ie.MAX_PARALLEL_IMAGE_REQUESTS;){var Me=_t.shift(),Be=Me.requestParameters,tt=Me.callback,ct=Me.cancelled;ct||(Me.cancel=zt(Be,tt).cancel)}},be=Ge(k,function(Me,Be,tt,ct){de(),Me?P(Me):Be&&(Qr()?pt(Be,P):et(Be,P,tt,ct))});return{cancel:function(){be.cancel(),de()}}},ur=function(k,P){var G=self.document.createElement("video");G.muted=!0,G.onloadstart=function(){P(null,G)};for(var ae=0;ae<k.length;ae++){var de=self.document.createElement("source");qe(k[ae])||(G.crossOrigin="Anonymous"),de.src=k[ae],G.appendChild(de)}return{cancel:function(){}}};function gr(k,P,G){var ae=G[k]&&G[k].indexOf(P)!==-1;ae||(G[k]=G[k]||[],G[k].push(P))}function Mr(k,P,G){if(G&&G[k]){var ae=G[k].indexOf(P);ae!==-1&&G[k].splice(ae,1)}}var un=function(P,G){G===void 0&&(G={}),S(this,G),this.type=P},zr=function(k){function P(G,ae){ae===void 0&&(ae={}),k.call(this,"error",S({error:G},ae))}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P}(un),$r=function(){};$r.prototype.on=function(P,G){return this._listeners=this._listeners||{},gr(P,G,this._listeners),this},$r.prototype.off=function(P,G){return Mr(P,G,this._listeners),Mr(P,G,this._oneTimeListeners),this},$r.prototype.once=function(P,G){return this._oneTimeListeners=this._oneTimeListeners||{},gr(P,G,this._oneTimeListeners),this},$r.prototype.fire=function(P,G){typeof P=="string"&&(P=new un(P,G||{}));var ae=P.type;if(this.listens(ae)){P.target=this;for(var de=this._listeners&&this._listeners[ae]?this._listeners[ae].slice():[],be=0,Me=de;be<Me.length;be+=1){var Be=Me[be];Be.call(this,P)}for(var tt=this._oneTimeListeners&&this._oneTimeListeners[ae]?this._oneTimeListeners[ae].slice():[],ct=0,gt=tt;ct<gt.length;ct+=1){var Dt=gt[ct];Mr(ae,Dt,this._oneTimeListeners),Dt.call(this,P)}var er=this._eventedParent;er&&(S(P,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),er.fire(P))}else P instanceof zr&&console.error(P.error);return this},$r.prototype.listens=function(P){return this._listeners&&this._listeners[P]&&this._listeners[P].length>0||this._oneTimeListeners&&this._oneTimeListeners[P]&&this._oneTimeListeners[P].length>0||this._eventedParent&&this._eventedParent.listens(P)},$r.prototype.setEventedParent=function(P,G){return this._eventedParent=P,this._eventedParentData=G,this};var hn=8,Tr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},wr={"*":{type:"source"}},Ur=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Br={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Cr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},nt={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Rt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Jt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},hr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Dr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Gr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Rr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ct={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},tr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Lr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Nr={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tn={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cn={type:"array",value:"*"},oa={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},ya={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Oa={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Xa={type:"array",value:"*",minimum:1},za={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},Pa={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Ar=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],nn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},vn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Mn={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Gn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},la={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},na={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Nn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Kn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Va={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},mi={"*":{type:"string"}},Nt={$version:hn,$root:Tr,sources:wr,source:Ur,source_vector:Br,source_raster:Cr,source_raster_dem:nt,source_geojson:Rt,source_video:Jt,source_image:hr,layer:Dr,layout:Gr,layout_background:Rr,layout_fill:Ct,layout_circle:tr,layout_heatmap:Lr,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Nr,layout_symbol:Tn,layout_raster:rn,layout_hillshade:kn,filter:Cn,filter_operator:oa,geometry_type:ya,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Oa,expression:Xa,expression_name:za,light:Pa,paint:Ar,paint_fill:nn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:vn,paint_circle:Mn,paint_heatmap:Gn,paint_symbol:la,paint_raster:na,paint_hillshade:Nn,paint_background:Kn,transition:Va,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:mi},yr=function(P,G,ae,de){this.message=(P?P+": ":"")+ae,de&&(this.identifier=de),G!=null&&G.__line__&&(this.line=G.__line__)};function fn(k){var P=k.key,G=k.value;return G?[new yr(P,G,"constants have been deprecated as of v8")]:[]}function mn(k){for(var P=[],G=arguments.length-1;G-- >0;)P[G]=arguments[G+1];for(var ae=0,de=P;ae<de.length;ae+=1){var be=de[ae];for(var Me in be)k[Me]=be[Me]}return k}function gn(k){return k instanceof Number||k instanceof String||k instanceof Boolean?k.valueOf():k}function Dn(k){if(Array.isArray(k))return k.map(Dn);if(k instanceof Object&&!(k instanceof Number||k instanceof String||k instanceof Boolean)){var P={};for(var G in k)P[G]=Dn(k[G]);return P}return gn(k)}var En=function(k){function P(G,ae){k.call(this,ae),this.message=ae,this.key=G}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P}(Error),dn=function(P,G){G===void 0&&(G=[]),this.parent=P,this.bindings={};for(var ae=0,de=G;ae<de.length;ae+=1){var be=de[ae],Me=be[0],Be=be[1];this.bindings[Me]=Be}};dn.prototype.concat=function(P){return new dn(this,P)},dn.prototype.get=function(P){if(this.bindings[P])return this.bindings[P];if(this.parent)return this.parent.get(P);throw new Error(P+" not found in scope.")},dn.prototype.has=function(P){return this.bindings[P]?!0:this.parent?this.parent.has(P):!1};var br={kind:"null"},xr={kind:"number"},Fr={kind:"string"},bn={kind:"boolean"},Hn={kind:"color"},ra={kind:"object"},Sn={kind:"value"},Zn={kind:"error"},sa={kind:"collator"},ma={kind:"formatted"},wa={kind:"resolvedImage"};function ca(k,P){return{kind:"array",itemType:k,N:P}}function ka(k){if(k.kind==="array"){var P=ka(k.itemType);return typeof k.N=="number"?"array<"+P+", "+k.N+">":k.itemType.kind==="value"?"array":"array<"+P+">"}else return k.kind}var Do=[br,xr,Fr,bn,Hn,ma,ra,ca(Sn),wa];function ls(k,P){if(P.kind==="error")return null;if(k.kind==="array"){if(P.kind==="array"&&(P.N===0&&P.itemType.kind==="value"||!ls(k.itemType,P.itemType))&&(typeof k.N!="number"||k.N===P.N))return null}else{if(k.kind===P.kind)return null;if(k.kind==="value")for(var G=0,ae=Do;G<ae.length;G+=1){var de=ae[G];if(!ls(de,P))return null}}return"Expected "+ka(k)+" but found "+ka(P)+" instead."}function Ts(k,P){return P.some(function(G){return G.kind===k.kind})}function Kl(k,P){return P.some(function(G){return G==="null"?k===null:G==="array"?Array.isArray(k):G==="object"?k&&!Array.isArray(k)&&typeof k=="object":G===typeof k})}var hu=a(function(k,P){var G={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ae(ct){return ct=Math.round(ct),ct<0?0:ct>255?255:ct}function de(ct){return ct<0?0:ct>1?1:ct}function be(ct){return ct[ct.length-1]==="%"?ae(parseFloat(ct)/100*255):ae(parseInt(ct))}function Me(ct){return ct[ct.length-1]==="%"?de(parseFloat(ct)/100):de(parseFloat(ct))}function Be(ct,gt,Dt){return Dt<0?Dt+=1:Dt>1&&(Dt-=1),Dt*6<1?ct+(gt-ct)*Dt*6:Dt*2<1?gt:Dt*3<2?ct+(gt-ct)*(2/3-Dt)*6:ct}function tt(ct){var gt=ct.replace(/ /g,"").toLowerCase();if(gt in G)return G[gt].slice();if(gt[0]==="#"){if(gt.length===4){var Dt=parseInt(gt.substr(1),16);return Dt>=0&&Dt<=4095?[(Dt&3840)>>4|(Dt&3840)>>8,Dt&240|(Dt&240)>>4,Dt&15|(Dt&15)<<4,1]:null}else if(gt.length===7){var Dt=parseInt(gt.substr(1),16);return Dt>=0&&Dt<=16777215?[(Dt&16711680)>>16,(Dt&65280)>>8,Dt&255,1]:null}return null}var er=gt.indexOf("("),Yt=gt.indexOf(")");if(er!==-1&&Yt+1===gt.length){var dr=gt.substr(0,er),Or=gt.substr(er+1,Yt-(er+1)).split(","),sn=1;switch(dr){case"rgba":if(Or.length!==4)return null;sn=Me(Or.pop());case"rgb":return Or.length!==3?null:[be(Or[0]),be(Or[1]),be(Or[2]),sn];case"hsla":if(Or.length!==4)return null;sn=Me(Or.pop());case"hsl":if(Or.length!==3)return null;var en=(parseFloat(Or[0])%360+360)%360/360,In=Me(Or[1]),wn=Me(Or[2]),Pn=wn<=.5?wn*(In+1):wn+In-wn*In,Bn=wn*2-Pn;return[ae(Be(Bn,Pn,en+1/3)*255),ae(Be(Bn,Pn,en)*255),ae(Be(Bn,Pn,en-1/3)*255),sn];default:return null}}return null}try{P.parseCSSColor=tt}catch{}}),tf=hu.parseCSSColor,Ai=function(P,G,ae,de){de===void 0&&(de=1),this.r=P,this.g=G,this.b=ae,this.a=de};Ai.parse=function(P){if(!!P){if(P instanceof Ai)return P;if(typeof P=="string"){var G=tf(P);if(!!G)return new Ai(G[0]/255*G[3],G[1]/255*G[3],G[2]/255*G[3],G[3])}}},Ai.prototype.toString=function(){var P=this.toArray(),G=P[0],ae=P[1],de=P[2],be=P[3];return"rgba("+Math.round(G)+","+Math.round(ae)+","+Math.round(de)+","+be+")"},Ai.prototype.toArray=function(){var P=this,G=P.r,ae=P.g,de=P.b,be=P.a;return be===0?[0,0,0,0]:[G*255/be,ae*255/be,de*255/be,be]},Ai.black=new Ai(0,0,0,1),Ai.white=new Ai(1,1,1,1),Ai.transparent=new Ai(0,0,0,0),Ai.red=new Ai(1,0,0,1);var Ol=function(P,G,ae){P?this.sensitivity=G?"variant":"case":this.sensitivity=G?"accent":"base",this.locale=ae,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ol.prototype.compare=function(P,G){return this.collator.compare(P,G)},Ol.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var xl=function(P,G,ae,de,be){this.text=P,this.image=G,this.scale=ae,this.fontStack=de,this.textColor=be},to=function(P){this.sections=P};to.fromString=function(P){return new to([new xl(P,null,null,null,null)])},to.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(P){return P.text.length!==0||P.image&&P.image.name.length!==0})},to.factory=function(P){return P instanceof to?P:to.fromString(P)},to.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(P){return P.text}).join("")},to.prototype.serialize=function(){for(var P=["format"],G=0,ae=this.sections;G<ae.length;G+=1){var de=ae[G];if(de.image){P.push(["image",de.image.name]);continue}P.push(de.text);var be={};de.fontStack&&(be["text-font"]=["literal",de.fontStack.split(",")]),de.scale&&(be["font-scale"]=de.scale),de.textColor&&(be["text-color"]=["rgba"].concat(de.textColor.toArray())),P.push(be)}return P};var Xo=function(P){this.name=P.name,this.available=P.available};Xo.prototype.toString=function(){return this.name},Xo.fromString=function(P){return P?new Xo({name:P,available:!1}):null},Xo.prototype.serialize=function(){return["image",this.name]};function vu(k,P,G,ae){if(!(typeof k=="number"&&k>=0&&k<=255&&typeof P=="number"&&P>=0&&P<=255&&typeof G=="number"&&G>=0&&G<=255)){var de=typeof ae=="number"?[k,P,G,ae]:[k,P,G];return"Invalid rgba value ["+de.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof ae=="undefined"||typeof ae=="number"&&ae>=0&&ae<=1?null:"Invalid rgba value ["+[k,P,G,ae].join(", ")+"]: 'a' must be between 0 and 1."}function $s(k){if(k===null)return!0;if(typeof k=="string")return!0;if(typeof k=="boolean")return!0;if(typeof k=="number")return!0;if(k instanceof Ai)return!0;if(k instanceof Ol)return!0;if(k instanceof to)return!0;if(k instanceof Xo)return!0;if(Array.isArray(k)){for(var P=0,G=k;P<G.length;P+=1){var ae=G[P];if(!$s(ae))return!1}return!0}else if(typeof k=="object"){for(var de in k)if(!$s(k[de]))return!1;return!0}else return!1}function $i(k){if(k===null)return br;if(typeof k=="string")return Fr;if(typeof k=="boolean")return bn;if(typeof k=="number")return xr;if(k instanceof Ai)return Hn;if(k instanceof Ol)return sa;if(k instanceof to)return ma;if(k instanceof Xo)return wa;if(Array.isArray(k)){for(var P=k.length,G,ae=0,de=k;ae<de.length;ae+=1){var be=de[ae],Me=$i(be);if(!G)G=Me;else{if(G===Me)continue;G=Sn;break}}return ca(G||Sn,P)}else return ra}function Jl(k){var P=typeof k;return k===null?"":P==="string"||P==="number"||P==="boolean"?String(k):k instanceof Ai||k instanceof to||k instanceof Xo?k.toString():JSON.stringify(k)}var ho=function(P,G){this.type=P,this.value=G};ho.parse=function(P,G){if(P.length!==2)return G.error("'literal' expression requires exactly one argument, but found "+(P.length-1)+" instead.");if(!$s(P[1]))return G.error("invalid value");var ae=P[1],de=$i(ae),be=G.expectedType;return de.kind==="array"&&de.N===0&&be&&be.kind==="array"&&(typeof be.N!="number"||be.N===0)&&(de=be),new ho(de,ae)},ho.prototype.evaluate=function(){return this.value},ho.prototype.eachChild=function(){},ho.prototype.outputDefined=function(){return!0},ho.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ai?["rgba"].concat(this.value.toArray()):this.value instanceof to?this.value.serialize():this.value};var Ji=function(P){this.name="ExpressionEvaluationError",this.message=P};Ji.prototype.toJSON=function(){return this.message};var Ao={string:Fr,number:xr,boolean:bn,object:ra},vo=function(P,G){this.type=P,this.args=G};vo.parse=function(P,G){if(P.length<2)return G.error("Expected at least one argument.");var ae=1,de,be=P[0];if(be==="array"){var Me;if(P.length>2){var Be=P[1];if(typeof Be!="string"||!(Be in Ao)||Be==="object")return G.error('The item type argument of "array" must be one of string, number, boolean',1);Me=Ao[Be],ae++}else Me=Sn;var tt;if(P.length>3){if(P[2]!==null&&(typeof P[2]!="number"||P[2]<0||P[2]!==Math.floor(P[2])))return G.error('The length argument to "array" must be a positive integer literal',2);tt=P[2],ae++}de=ca(Me,tt)}else de=Ao[be];for(var ct=[];ae<P.length;ae++){var gt=G.parse(P[ae],ae,Sn);if(!gt)return null;ct.push(gt)}return new vo(de,ct)},vo.prototype.evaluate=function(P){for(var G=0;G<this.args.length;G++){var ae=this.args[G].evaluate(P),de=ls(this.type,$i(ae));if(de){if(G===this.args.length-1)throw new Ji("Expected value to be of type "+ka(this.type)+", but found "+ka($i(ae))+" instead.")}else return ae}return null},vo.prototype.eachChild=function(P){this.args.forEach(P)},vo.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},vo.prototype.serialize=function(){var P=this.type,G=[P.kind];if(P.kind==="array"){var ae=P.itemType;if(ae.kind==="string"||ae.kind==="number"||ae.kind==="boolean"){G.push(ae.kind);var de=P.N;(typeof de=="number"||this.args.length>1)&&G.push(de)}}return G.concat(this.args.map(function(be){return be.serialize()}))};var Ps=function(P){this.type=ma,this.sections=P};Ps.parse=function(P,G){if(P.length<2)return G.error("Expected at least one argument.");var ae=P[1];if(!Array.isArray(ae)&&typeof ae=="object")return G.error("First argument must be an image or text section.");for(var de=[],be=!1,Me=1;Me<=P.length-1;++Me){var Be=P[Me];if(be&&typeof Be=="object"&&!Array.isArray(Be)){be=!1;var tt=null;if(Be["font-scale"]&&(tt=G.parse(Be["font-scale"],1,xr),!tt))return null;var ct=null;if(Be["text-font"]&&(ct=G.parse(Be["text-font"],1,ca(Fr)),!ct))return null;var gt=null;if(Be["text-color"]&&(gt=G.parse(Be["text-color"],1,Hn),!gt))return null;var Dt=de[de.length-1];Dt.scale=tt,Dt.font=ct,Dt.textColor=gt}else{var er=G.parse(P[Me],1,Sn);if(!er)return null;var Yt=er.type.kind;if(Yt!=="string"&&Yt!=="value"&&Yt!=="null"&&Yt!=="resolvedImage")return G.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,de.push({content:er,scale:null,font:null,textColor:null})}}return new Ps(de)},Ps.prototype.evaluate=function(P){var G=function(ae){var de=ae.content.evaluate(P);return $i(de)===wa?new xl("",de,null,null,null):new xl(Jl(de),null,ae.scale?ae.scale.evaluate(P):null,ae.font?ae.font.evaluate(P).join(","):null,ae.textColor?ae.textColor.evaluate(P):null)};return new to(this.sections.map(G))},Ps.prototype.eachChild=function(P){for(var G=0,ae=this.sections;G<ae.length;G+=1){var de=ae[G];P(de.content),de.scale&&P(de.scale),de.font&&P(de.font),de.textColor&&P(de.textColor)}},Ps.prototype.outputDefined=function(){return!1},Ps.prototype.serialize=function(){for(var P=["format"],G=0,ae=this.sections;G<ae.length;G+=1){var de=ae[G];P.push(de.content.serialize());var be={};de.scale&&(be["font-scale"]=de.scale.serialize()),de.font&&(be["text-font"]=de.font.serialize()),de.textColor&&(be["text-color"]=de.textColor.serialize()),P.push(be)}return P};var zl=function(P){this.type=wa,this.input=P};zl.parse=function(P,G){if(P.length!==2)return G.error("Expected two arguments.");var ae=G.parse(P[1],1,Fr);return ae?new zl(ae):G.error("No image name provided.")},zl.prototype.evaluate=function(P){var G=this.input.evaluate(P),ae=Xo.fromString(G);return ae&&P.availableImages&&(ae.available=P.availableImages.indexOf(G)>-1),ae},zl.prototype.eachChild=function(P){P(this.input)},zl.prototype.outputDefined=function(){return!1},zl.prototype.serialize=function(){return["image",this.input.serialize()]};var Cf={"to-boolean":bn,"to-color":Hn,"to-number":xr,"to-string":Fr},As=function(P,G){this.type=P,this.args=G};As.parse=function(P,G){if(P.length<2)return G.error("Expected at least one argument.");var ae=P[0];if((ae==="to-boolean"||ae==="to-string")&&P.length!==2)return G.error("Expected one argument.");for(var de=Cf[ae],be=[],Me=1;Me<P.length;Me++){var Be=G.parse(P[Me],Me,Sn);if(!Be)return null;be.push(Be)}return new As(de,be)},As.prototype.evaluate=function(P){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(P));if(this.type.kind==="color"){for(var G,ae,de=0,be=this.args;de<be.length;de+=1){var Me=be[de];if(G=Me.evaluate(P),ae=null,G instanceof Ai)return G;if(typeof G=="string"){var Be=P.parseColor(G);if(Be)return Be}else if(Array.isArray(G)&&(G.length<3||G.length>4?ae="Invalid rbga value "+JSON.stringify(G)+": expected an array containing either three or four numeric values.":ae=vu(G[0],G[1],G[2],G[3]),!ae))return new Ai(G[0]/255,G[1]/255,G[2]/255,G[3])}throw new Ji(ae||"Could not parse color from value '"+(typeof G=="string"?G:String(JSON.stringify(G)))+"'")}else if(this.type.kind==="number"){for(var tt=null,ct=0,gt=this.args;ct<gt.length;ct+=1){var Dt=gt[ct];if(tt=Dt.evaluate(P),tt===null)return 0;var er=Number(tt);if(!isNaN(er))return er}throw new Ji("Could not convert "+JSON.stringify(tt)+" to number.")}else return this.type.kind==="formatted"?to.fromString(Jl(this.args[0].evaluate(P))):this.type.kind==="resolvedImage"?Xo.fromString(Jl(this.args[0].evaluate(P))):Jl(this.args[0].evaluate(P))},As.prototype.eachChild=function(P){this.args.forEach(P)},As.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},As.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ps([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new zl(this.args[0]).serialize();var P=["to-"+this.type.kind];return this.eachChild(function(G){P.push(G.serialize())}),P};var Lf=["Unknown","Point","LineString","Polygon"],bl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};bl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},bl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Lf[this.feature.type]:this.feature.type:null},bl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},bl.prototype.canonicalID=function(){return this.canonical},bl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},bl.prototype.parseColor=function(P){var G=this._parseColorCache[P];return G||(G=this._parseColorCache[P]=Ai.parse(P)),G};var Zo=function(P,G,ae,de){this.name=P,this.type=G,this._evaluate=ae,this.args=de};Zo.prototype.evaluate=function(P){return this._evaluate(P,this.args)},Zo.prototype.eachChild=function(P){this.args.forEach(P)},Zo.prototype.outputDefined=function(){return!1},Zo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(P){return P.serialize()}))},Zo.parse=function(P,G){var ae,de=P[0],be=Zo.definitions[de];if(!be)return G.error('Unknown expression "'+de+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(be)?be[0]:be.type,Be=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,tt=Be.filter(function(Da){var Na=Da[0];return!Array.isArray(Na)||Na.length===P.length-1}),ct=null,gt=0,Dt=tt;gt<Dt.length;gt+=1){var er=Dt[gt],Yt=er[0],dr=er[1];ct=new Ko(G.registry,G.path,null,G.scope);for(var Or=[],sn=!1,en=1;en<P.length;en++){var In=P[en],wn=Array.isArray(Yt)?Yt[en-1]:Yt.type,Pn=ct.parse(In,1+Or.length,wn);if(!Pn){sn=!0;break}Or.push(Pn)}if(!sn){if(Array.isArray(Yt)&&Yt.length!==Or.length){ct.error("Expected "+Yt.length+" arguments, but found "+Or.length+" instead.");continue}for(var Bn=0;Bn<Or.length;Bn++){var Yn=Array.isArray(Yt)?Yt[Bn]:Yt.type,fa=Or[Bn];ct.concat(Bn+1).checkSubtype(Yn,fa.type)}if(ct.errors.length===0)return new Zo(de,Me,dr,Or)}}if(tt.length===1)(ae=G.errors).push.apply(ae,ct.errors);else{for(var ia=tt.length?tt:Be,Ba=ia.map(function(Da){var Na=Da[0];return oc(Na)}).join(" | "),Ma=[],Ca=1;Ca<P.length;Ca++){var si=G.parse(P[Ca],1+Ma.length);if(!si)return null;Ma.push(ka(si.type))}G.error("Expected arguments of type "+Ba+", but found ("+Ma.join(", ")+") instead.")}return null},Zo.register=function(P,G){Zo.definitions=G;for(var ae in G)P[ae]=Zo};function oc(k){return Array.isArray(k)?"("+k.map(ka).join(", ")+")":"("+ka(k.type)+"...)"}var _l=function(P,G,ae){this.type=sa,this.locale=ae,this.caseSensitive=P,this.diacriticSensitive=G};_l.parse=function(P,G){if(P.length!==2)return G.error("Expected one argument.");var ae=P[1];if(typeof ae!="object"||Array.isArray(ae))return G.error("Collator options argument must be an object.");var de=G.parse(ae["case-sensitive"]===void 0?!1:ae["case-sensitive"],1,bn);if(!de)return null;var be=G.parse(ae["diacritic-sensitive"]===void 0?!1:ae["diacritic-sensitive"],1,bn);if(!be)return null;var Me=null;return ae.locale&&(Me=G.parse(ae.locale,1,Fr),!Me)?null:new _l(de,be,Me)},_l.prototype.evaluate=function(P){return new Ol(this.caseSensitive.evaluate(P),this.diacriticSensitive.evaluate(P),this.locale?this.locale.evaluate(P):null)},_l.prototype.eachChild=function(P){P(this.caseSensitive),P(this.diacriticSensitive),this.locale&&P(this.locale)},_l.prototype.outputDefined=function(){return!1},_l.prototype.serialize=function(){var P={};return P["case-sensitive"]=this.caseSensitive.serialize(),P["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(P.locale=this.locale.serialize()),["collator",P]};var nl=8192;function Ru(k,P){k[0]=Math.min(k[0],P[0]),k[1]=Math.min(k[1],P[1]),k[2]=Math.max(k[2],P[0]),k[3]=Math.max(k[3],P[1])}function sc(k){return(180+k)/360}function lc(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function Nl(k,P){return!(k[0]<=P[0]||k[2]>=P[2]||k[1]<=P[1]||k[3]>=P[3])}function Du(k,P){var G=sc(k[0]),ae=lc(k[1]),de=Math.pow(2,P.z);return[Math.round(G*de*nl),Math.round(ae*de*nl)]}function al(k,P,G){var ae=k[0]-P[0],de=k[1]-P[1],be=k[0]-G[0],Me=k[1]-G[1];return ae*Me-be*de===0&&ae*be<=0&&de*Me<=0}function rf(k,P,G){return P[1]>k[1]!=G[1]>k[1]&&k[0]<(G[0]-P[0])*(k[1]-P[1])/(G[1]-P[1])+P[0]}function Ql(k,P){for(var G=!1,ae=0,de=P.length;ae<de;ae++)for(var be=P[ae],Me=0,Be=be.length;Me<Be-1;Me++){if(al(k,be[Me],be[Me+1]))return!1;rf(k,be[Me],be[Me+1])&&(G=!G)}return G}function nf(k,P){for(var G=0;G<P.length;G++)if(Ql(k,P[G]))return!0;return!1}function Pf(k,P){return k[0]*P[1]-k[1]*P[0]}function Fu(k,P,G,ae){var de=k[0]-G[0],be=k[1]-G[1],Me=P[0]-G[0],Be=P[1]-G[1],tt=ae[0]-G[0],ct=ae[1]-G[1],gt=de*ct-tt*be,Dt=Me*ct-tt*Be;return gt>0&&Dt<0||gt<0&&Dt>0}function uc(k,P,G,ae){var de=[P[0]-k[0],P[1]-k[1]],be=[ae[0]-G[0],ae[1]-G[1]];return Pf(be,de)===0?!1:!!(Fu(k,P,G,ae)&&Fu(G,ae,k,P))}function Bl(k,P,G){for(var ae=0,de=G;ae<de.length;ae+=1)for(var be=de[ae],Me=0;Me<be.length-1;++Me)if(uc(k,P,be[Me],be[Me+1]))return!0;return!1}function af(k,P){for(var G=0;G<k.length;++G)if(!Ql(k[G],P))return!1;for(var ae=0;ae<k.length-1;++ae)if(Bl(k[ae],k[ae+1],P))return!1;return!0}function Ou(k,P){for(var G=0;G<P.length;G++)if(af(k,P[G]))return!0;return!1}function Ws(k,P,G){for(var ae=[],de=0;de<k.length;de++){for(var be=[],Me=0;Me<k[de].length;Me++){var Be=Du(k[de][Me],G);Ru(P,Be),be.push(Be)}ae.push(be)}return ae}function pu(k,P,G){for(var ae=[],de=0;de<k.length;de++){var be=Ws(k[de],P,G);ae.push(be)}return ae}function of(k,P,G,ae){if(k[0]<G[0]||k[0]>G[2]){var de=ae*.5,be=k[0]-G[0]>de?-ae:G[0]-k[0]>de?ae:0;be===0&&(be=k[0]-G[2]>de?-ae:G[2]-k[0]>de?ae:0),k[0]+=be}Ru(P,k)}function If(k){k[0]=k[1]=1/0,k[2]=k[3]=-1/0}function Rf(k,P,G,ae){for(var de=Math.pow(2,ae.z)*nl,be=[ae.x*nl,ae.y*nl],Me=[],Be=0,tt=k;Be<tt.length;Be+=1)for(var ct=tt[Be],gt=0,Dt=ct;gt<Dt.length;gt+=1){var er=Dt[gt],Yt=[er.x+be[0],er.y+be[1]];of(Yt,P,G,de),Me.push(Yt)}return Me}function zu(k,P,G,ae){for(var de=Math.pow(2,ae.z)*nl,be=[ae.x*nl,ae.y*nl],Me=[],Be=0,tt=k;Be<tt.length;Be+=1){for(var ct=tt[Be],gt=[],Dt=0,er=ct;Dt<er.length;Dt+=1){var Yt=er[Dt],dr=[Yt.x+be[0],Yt.y+be[1]];Ru(P,dr),gt.push(dr)}Me.push(gt)}if(P[2]-P[0]<=de/2){If(P);for(var Or=0,sn=Me;Or<sn.length;Or+=1)for(var en=sn[Or],In=0,wn=en;In<wn.length;In+=1){var Pn=wn[In];of(Pn,P,G,de)}}return Me}function fc(k,P){var G=[1/0,1/0,-1/0,-1/0],ae=[1/0,1/0,-1/0,-1/0],de=k.canonicalID();if(P.type==="Polygon"){var be=Ws(P.coordinates,ae,de),Me=Rf(k.geometry(),G,ae,de);if(!Nl(G,ae))return!1;for(var Be=0,tt=Me;Be<tt.length;Be+=1){var ct=tt[Be];if(!Ql(ct,be))return!1}}if(P.type==="MultiPolygon"){var gt=pu(P.coordinates,ae,de),Dt=Rf(k.geometry(),G,ae,de);if(!Nl(G,ae))return!1;for(var er=0,Yt=Dt;er<Yt.length;er+=1){var dr=Yt[er];if(!nf(dr,gt))return!1}}return!0}function Df(k,P){var G=[1/0,1/0,-1/0,-1/0],ae=[1/0,1/0,-1/0,-1/0],de=k.canonicalID();if(P.type==="Polygon"){var be=Ws(P.coordinates,ae,de),Me=zu(k.geometry(),G,ae,de);if(!Nl(G,ae))return!1;for(var Be=0,tt=Me;Be<tt.length;Be+=1){var ct=tt[Be];if(!af(ct,be))return!1}}if(P.type==="MultiPolygon"){var gt=pu(P.coordinates,ae,de),Dt=zu(k.geometry(),G,ae,de);if(!Nl(G,ae))return!1;for(var er=0,Yt=Dt;er<Yt.length;er+=1){var dr=Yt[er];if(!Ou(dr,gt))return!1}}return!0}var Ss=function(P,G){this.type=bn,this.geojson=P,this.geometries=G};Ss.parse=function(P,G){if(P.length!==2)return G.error("'within' expression requires exactly one argument, but found "+(P.length-1)+" instead.");if($s(P[1])){var ae=P[1];if(ae.type==="FeatureCollection")for(var de=0;de<ae.features.length;++de){var be=ae.features[de].geometry.type;if(be==="Polygon"||be==="MultiPolygon")return new Ss(ae,ae.features[de].geometry)}else if(ae.type==="Feature"){var Me=ae.geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new Ss(ae,ae.geometry)}else if(ae.type==="Polygon"||ae.type==="MultiPolygon")return new Ss(ae,ae)}return G.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ss.prototype.evaluate=function(P){if(P.geometry()!=null&&P.canonicalID()!=null){if(P.geometryType()==="Point")return fc(P,this.geometries);if(P.geometryType()==="LineString")return Df(P,this.geometries)}return!1},Ss.prototype.eachChild=function(){},Ss.prototype.outputDefined=function(){return!0},Ss.prototype.serialize=function(){return["within",this.geojson]};function ql(k){if(k instanceof Zo){if(k.name==="get"&&k.args.length===1)return!1;if(k.name==="feature-state")return!1;if(k.name==="has"&&k.args.length===1)return!1;if(k.name==="properties"||k.name==="geometry-type"||k.name==="id")return!1;if(/^filter-/.test(k.name))return!1}if(k instanceof Ss)return!1;var P=!0;return k.eachChild(function(G){P&&!ql(G)&&(P=!1)}),P}function eu(k){if(k instanceof Zo&&k.name==="feature-state")return!1;var P=!0;return k.eachChild(function(G){P&&!eu(G)&&(P=!1)}),P}function sf(k,P){if(k instanceof Zo&&P.indexOf(k.name)>=0)return!1;var G=!0;return k.eachChild(function(ae){G&&!sf(ae,P)&&(G=!1)}),G}var Ys=function(P,G){this.type=G.type,this.name=P,this.boundExpression=G};Ys.parse=function(P,G){if(P.length!==2||typeof P[1]!="string")return G.error("'var' expression requires exactly one string literal argument.");var ae=P[1];return G.scope.has(ae)?new Ys(ae,G.scope.get(ae)):G.error('Unknown variable "'+ae+'". Make sure "'+ae+'" has been bound in an enclosing "let" expression before using it.',1)},Ys.prototype.evaluate=function(P){return this.boundExpression.evaluate(P)},Ys.prototype.eachChild=function(){},Ys.prototype.outputDefined=function(){return!1},Ys.prototype.serialize=function(){return["var",this.name]};var Ko=function(P,G,ae,de,be){G===void 0&&(G=[]),de===void 0&&(de=new dn),be===void 0&&(be=[]),this.registry=P,this.path=G,this.key=G.map(function(Me){return"["+Me+"]"}).join(""),this.scope=de,this.errors=be,this.expectedType=ae};Ko.prototype.parse=function(P,G,ae,de,be){return be===void 0&&(be={}),G?this.concat(G,ae,de)._parse(P,be):this._parse(P,be)},Ko.prototype._parse=function(P,G){(P===null||typeof P=="string"||typeof P=="boolean"||typeof P=="number")&&(P=["literal",P]);function ae(gt,Dt,er){return er==="assert"?new vo(Dt,[gt]):er==="coerce"?new As(Dt,[gt]):gt}if(Array.isArray(P)){if(P.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var de=P[0];if(typeof de!="string")return this.error("Expression name must be a string, but found "+typeof de+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[de];if(be){var Me=be.parse(P,this);if(!Me)return null;if(this.expectedType){var Be=this.expectedType,tt=Me.type;if((Be.kind==="string"||Be.kind==="number"||Be.kind==="boolean"||Be.kind==="object"||Be.kind==="array")&&tt.kind==="value")Me=ae(Me,Be,G.typeAnnotation||"assert");else if((Be.kind==="color"||Be.kind==="formatted"||Be.kind==="resolvedImage")&&(tt.kind==="value"||tt.kind==="string"))Me=ae(Me,Be,G.typeAnnotation||"coerce");else if(this.checkSubtype(Be,tt))return null}if(!(Me instanceof ho)&&Me.type.kind!=="resolvedImage"&&Nu(Me)){var ct=new bl;try{Me=new ho(Me.type,Me.evaluate(ct))}catch(gt){return this.error(gt.message),null}}return Me}return this.error('Unknown expression "'+de+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof P=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof P=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof P+" instead.")},Ko.prototype.concat=function(P,G,ae){var de=typeof P=="number"?this.path.concat(P):this.path,be=ae?this.scope.concat(ae):this.scope;return new Ko(this.registry,de,G||null,be,this.errors)},Ko.prototype.error=function(P){for(var G=[],ae=arguments.length-1;ae-- >0;)G[ae]=arguments[ae+1];var de=""+this.key+G.map(function(be){return"["+be+"]"}).join("");this.errors.push(new En(de,P))},Ko.prototype.checkSubtype=function(P,G){var ae=ls(P,G);return ae&&this.error(ae),ae};function Nu(k){if(k instanceof Ys)return Nu(k.boundExpression);if(k instanceof Zo&&k.name==="error")return!1;if(k instanceof _l)return!1;if(k instanceof Ss)return!1;var P=k instanceof As||k instanceof vo,G=!0;return k.eachChild(function(ae){P?G=G&&Nu(ae):G=G&&ae instanceof ho}),G?ql(k)&&sf(k,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function il(k,P){for(var G=k.length-1,ae=0,de=G,be=0,Me,Be;ae<=de;)if(be=Math.floor((ae+de)/2),Me=k[be],Be=k[be+1],Me<=P){if(be===G||P<Be)return be;ae=be+1}else if(Me>P)de=be-1;else throw new Ji("Input is not a number.");return 0}var ol=function(P,G,ae){this.type=P,this.input=G,this.labels=[],this.outputs=[];for(var de=0,be=ae;de<be.length;de+=1){var Me=be[de],Be=Me[0],tt=Me[1];this.labels.push(Be),this.outputs.push(tt)}};ol.parse=function(P,G){if(P.length-1<4)return G.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if((P.length-1)%2!==0)return G.error("Expected an even number of arguments.");var ae=G.parse(P[1],1,xr);if(!ae)return null;var de=[],be=null;G.expectedType&&G.expectedType.kind!=="value"&&(be=G.expectedType);for(var Me=1;Me<P.length;Me+=2){var Be=Me===1?-1/0:P[Me],tt=P[Me+1],ct=Me,gt=Me+1;if(typeof Be!="number")return G.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(de.length&&de[de.length-1][0]>=Be)return G.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var Dt=G.parse(tt,gt,be);if(!Dt)return null;be=be||Dt.type,de.push([Be,Dt])}return new ol(be,ae,de)},ol.prototype.evaluate=function(P){var G=this.labels,ae=this.outputs;if(G.length===1)return ae[0].evaluate(P);var de=this.input.evaluate(P);if(de<=G[0])return ae[0].evaluate(P);var be=G.length;if(de>=G[be-1])return ae[be-1].evaluate(P);var Me=il(G,de);return ae[Me].evaluate(P)},ol.prototype.eachChild=function(P){P(this.input);for(var G=0,ae=this.outputs;G<ae.length;G+=1){var de=ae[G];P(de)}},ol.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})},ol.prototype.serialize=function(){for(var P=["step",this.input.serialize()],G=0;G<this.labels.length;G++)G>0&&P.push(this.labels[G]),P.push(this.outputs[G].serialize());return P};function Eo(k,P,G){return k*(1-G)+P*G}function du(k,P,G){return new Ai(Eo(k.r,P.r,G),Eo(k.g,P.g,G),Eo(k.b,P.b,G),Eo(k.a,P.a,G))}function gu(k,P,G){return k.map(function(ae,de){return Eo(ae,P[de],G)})}var Ul=Object.freeze({__proto__:null,number:Eo,color:du,array:gu}),Xs=.95047,yu=1,tu=1.08883,Bu=4/29,mu=6/29,Vl=3*mu*mu,cc=mu*mu*mu,Is=Math.PI/180,Uc=180/Math.PI;function lf(k){return k>cc?Math.pow(k,1/3):k/Vl+Bu}function ru(k){return k>mu?k*k*k:Vl*(k-Bu)}function xu(k){return 255*(k<=.0031308?12.92*k:1.055*Math.pow(k,1/2.4)-.055)}function Hl(k){return k/=255,k<=.04045?k/12.92:Math.pow((k+.055)/1.055,2.4)}function bu(k){var P=Hl(k.r),G=Hl(k.g),ae=Hl(k.b),de=lf((.4124564*P+.3575761*G+.1804375*ae)/Xs),be=lf((.2126729*P+.7151522*G+.072175*ae)/yu),Me=lf((.0193339*P+.119192*G+.9503041*ae)/tu);return{l:116*be-16,a:500*(de-be),b:200*(be-Me),alpha:k.a}}function Ff(k){var P=(k.l+16)/116,G=isNaN(k.a)?P:P+k.a/500,ae=isNaN(k.b)?P:P-k.b/200;return P=yu*ru(P),G=Xs*ru(G),ae=tu*ru(ae),new Ai(xu(3.2404542*G-1.5371385*P-.4985314*ae),xu(-.969266*G+1.8760108*P+.041556*ae),xu(.0556434*G-.2040259*P+1.0572252*ae),k.alpha)}function Of(k,P,G){return{l:Eo(k.l,P.l,G),a:Eo(k.a,P.a,G),b:Eo(k.b,P.b,G),alpha:Eo(k.alpha,P.alpha,G)}}function Vc(k){var P=bu(k),G=P.l,ae=P.a,de=P.b,be=Math.atan2(de,ae)*Uc;return{h:be<0?be+360:be,c:Math.sqrt(ae*ae+de*de),l:G,alpha:k.a}}function Wi(k){var P=k.h*Is,G=k.c,ae=k.l;return Ff({l:ae,a:Math.cos(P)*G,b:Math.sin(P)*G,alpha:k.alpha})}function nu(k,P,G){var ae=P-k;return k+G*(ae>180||ae<-180?ae-360*Math.round(ae/360):ae)}function Gl(k,P,G){return{h:nu(k.h,P.h,G),c:Eo(k.c,P.c,G),l:Eo(k.l,P.l,G),alpha:Eo(k.alpha,P.alpha,G)}}var Ms={forward:bu,reverse:Ff,interpolate:Of},Rs={forward:Vc,reverse:Wi,interpolate:Gl},_u=Object.freeze({__proto__:null,lab:Ms,hcl:Rs}),ko=function(P,G,ae,de,be){this.type=P,this.operator=G,this.interpolation=ae,this.input=de,this.labels=[],this.outputs=[];for(var Me=0,Be=be;Me<Be.length;Me+=1){var tt=Be[Me],ct=tt[0],gt=tt[1];this.labels.push(ct),this.outputs.push(gt)}};ko.interpolationFactor=function(P,G,ae,de){var be=0;if(P.name==="exponential")be=zf(G,P.base,ae,de);else if(P.name==="linear")be=zf(G,1,ae,de);else if(P.name==="cubic-bezier"){var Me=P.controlPoints,Be=new n(Me[0],Me[1],Me[2],Me[3]);be=Be.solve(zf(G,1,ae,de))}return be},ko.parse=function(P,G){var ae=P[0],de=P[1],be=P[2],Me=P.slice(3);if(!Array.isArray(de)||de.length===0)return G.error("Expected an interpolation type expression.",1);if(de[0]==="linear")de={name:"linear"};else if(de[0]==="exponential"){var Be=de[1];if(typeof Be!="number")return G.error("Exponential interpolation requires a numeric base.",1,1);de={name:"exponential",base:Be}}else if(de[0]==="cubic-bezier"){var tt=de.slice(1);if(tt.length!==4||tt.some(function(en){return typeof en!="number"||en<0||en>1}))return G.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);de={name:"cubic-bezier",controlPoints:tt}}else return G.error("Unknown interpolation type "+String(de[0]),1,0);if(P.length-1<4)return G.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if((P.length-1)%2!==0)return G.error("Expected an even number of arguments.");if(be=G.parse(be,2,xr),!be)return null;var ct=[],gt=null;ae==="interpolate-hcl"||ae==="interpolate-lab"?gt=Hn:G.expectedType&&G.expectedType.kind!=="value"&&(gt=G.expectedType);for(var Dt=0;Dt<Me.length;Dt+=2){var er=Me[Dt],Yt=Me[Dt+1],dr=Dt+3,Or=Dt+4;if(typeof er!="number")return G.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',dr);if(ct.length&&ct[ct.length-1][0]>=er)return G.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',dr);var sn=G.parse(Yt,Or,gt);if(!sn)return null;gt=gt||sn.type,ct.push([er,sn])}return gt.kind!=="number"&&gt.kind!=="color"&&!(gt.kind==="array"&&gt.itemType.kind==="number"&&typeof gt.N=="number")?G.error("Type "+ka(gt)+" is not interpolatable."):new ko(gt,ae,de,be,ct)},ko.prototype.evaluate=function(P){var G=this.labels,ae=this.outputs;if(G.length===1)return ae[0].evaluate(P);var de=this.input.evaluate(P);if(de<=G[0])return ae[0].evaluate(P);var be=G.length;if(de>=G[be-1])return ae[be-1].evaluate(P);var Me=il(G,de),Be=G[Me],tt=G[Me+1],ct=ko.interpolationFactor(this.interpolation,de,Be,tt),gt=ae[Me].evaluate(P),Dt=ae[Me+1].evaluate(P);return this.operator==="interpolate"?Ul[this.type.kind.toLowerCase()](gt,Dt,ct):this.operator==="interpolate-hcl"?Rs.reverse(Rs.interpolate(Rs.forward(gt),Rs.forward(Dt),ct)):Ms.reverse(Ms.interpolate(Ms.forward(gt),Ms.forward(Dt),ct))},ko.prototype.eachChild=function(P){P(this.input);for(var G=0,ae=this.outputs;G<ae.length;G+=1){var de=ae[G];P(de)}},ko.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})},ko.prototype.serialize=function(){var P;this.interpolation.name==="linear"?P=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?P=["linear"]:P=["exponential",this.interpolation.base]:P=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var G=[this.operator,P,this.input.serialize()],ae=0;ae<this.labels.length;ae++)G.push(this.labels[ae],this.outputs[ae].serialize());return G};function zf(k,P,G,ae){var de=ae-G,be=k-G;return de===0?0:P===1?be/de:(Math.pow(P,be)-1)/(Math.pow(P,de)-1)}var Ds=function(P,G){this.type=P,this.args=G};Ds.parse=function(P,G){if(P.length<2)return G.error("Expectected at least one argument.");var ae=null,de=G.expectedType;de&&de.kind!=="value"&&(ae=de);for(var be=[],Me=0,Be=P.slice(1);Me<Be.length;Me+=1){var tt=Be[Me],ct=G.parse(tt,1+be.length,ae,void 0,{typeAnnotation:"omit"});if(!ct)return null;ae=ae||ct.type,be.push(ct)}var gt=de&&be.some(function(Dt){return ls(de,Dt.type)});return gt?new Ds(Sn,be):new Ds(ae,be)},Ds.prototype.evaluate=function(P){for(var G=null,ae=0,de,be=0,Me=this.args;be<Me.length;be+=1){var Be=Me[be];if(ae++,G=Be.evaluate(P),G&&G instanceof Xo&&!G.available&&(de||(de=G.name),G=null,ae===this.args.length&&(G=de)),G!==null)break}return G},Ds.prototype.eachChild=function(P){this.args.forEach(P)},Ds.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},Ds.prototype.serialize=function(){var P=["coalesce"];return this.eachChild(function(G){P.push(G.serialize())}),P};var wl=function(P,G){this.type=G.type,this.bindings=[].concat(P),this.result=G};wl.prototype.evaluate=function(P){return this.result.evaluate(P)},wl.prototype.eachChild=function(P){for(var G=0,ae=this.bindings;G<ae.length;G+=1){var de=ae[G];P(de[1])}P(this.result)},wl.parse=function(P,G){if(P.length<4)return G.error("Expected at least 3 arguments, but found "+(P.length-1)+" instead.");for(var ae=[],de=1;de<P.length-1;de+=2){var be=P[de];if(typeof be!="string")return G.error("Expected string, but found "+typeof be+" instead.",de);if(/[^a-zA-Z0-9_]/.test(be))return G.error("Variable names must contain only alphanumeric characters or '_'.",de);var Me=G.parse(P[de+1],de+1);if(!Me)return null;ae.push([be,Me])}var Be=G.parse(P[P.length-1],P.length-1,G.expectedType,ae);return Be?new wl(ae,Be):null},wl.prototype.outputDefined=function(){return this.result.outputDefined()},wl.prototype.serialize=function(){for(var P=["let"],G=0,ae=this.bindings;G<ae.length;G+=1){var de=ae[G],be=de[0],Me=de[1];P.push(be,Me.serialize())}return P.push(this.result.serialize()),P};var Tl=function(P,G,ae){this.type=P,this.index=G,this.input=ae};Tl.parse=function(P,G){if(P.length!==3)return G.error("Expected 2 arguments, but found "+(P.length-1)+" instead.");var ae=G.parse(P[1],1,xr),de=G.parse(P[2],2,ca(G.expectedType||Sn));if(!ae||!de)return null;var be=de.type;return new Tl(be.itemType,ae,de)},Tl.prototype.evaluate=function(P){var G=this.index.evaluate(P),ae=this.input.evaluate(P);if(G<0)throw new Ji("Array index out of bounds: "+G+" < 0.");if(G>=ae.length)throw new Ji("Array index out of bounds: "+G+" > "+(ae.length-1)+".");if(G!==Math.floor(G))throw new Ji("Array index must be an integer, but found "+G+" instead.");return ae[G]},Tl.prototype.eachChild=function(P){P(this.index),P(this.input)},Tl.prototype.outputDefined=function(){return!1},Tl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var sl=function(P,G){this.type=bn,this.needle=P,this.haystack=G};sl.parse=function(P,G){if(P.length!==3)return G.error("Expected 2 arguments, but found "+(P.length-1)+" instead.");var ae=G.parse(P[1],1,Sn),de=G.parse(P[2],2,Sn);return!ae||!de?null:Ts(ae.type,[bn,Fr,xr,br,Sn])?new sl(ae,de):G.error("Expected first argument to be of type boolean, string, number or null, but found "+ka(ae.type)+" instead")},sl.prototype.evaluate=function(P){var G=this.needle.evaluate(P),ae=this.haystack.evaluate(P);if(!ae)return!1;if(!Kl(G,["boolean","string","number","null"]))throw new Ji("Expected first argument to be of type boolean, string, number or null, but found "+ka($i(G))+" instead.");if(!Kl(ae,["string","array"]))throw new Ji("Expected second argument to be of type array or string, but found "+ka($i(ae))+" instead.");return ae.indexOf(G)>=0},sl.prototype.eachChild=function(P){P(this.needle),P(this.haystack)},sl.prototype.outputDefined=function(){return!0},sl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Fs=function(P,G,ae){this.type=xr,this.needle=P,this.haystack=G,this.fromIndex=ae};Fs.parse=function(P,G){if(P.length<=2||P.length>=5)return G.error("Expected 3 or 4 arguments, but found "+(P.length-1)+" instead.");var ae=G.parse(P[1],1,Sn),de=G.parse(P[2],2,Sn);if(!ae||!de)return null;if(!Ts(ae.type,[bn,Fr,xr,br,Sn]))return G.error("Expected first argument to be of type boolean, string, number or null, but found "+ka(ae.type)+" instead");if(P.length===4){var be=G.parse(P[3],3,xr);return be?new Fs(ae,de,be):null}else return new Fs(ae,de)},Fs.prototype.evaluate=function(P){var G=this.needle.evaluate(P),ae=this.haystack.evaluate(P);if(!Kl(G,["boolean","string","number","null"]))throw new Ji("Expected first argument to be of type boolean, string, number or null, but found "+ka($i(G))+" instead.");if(!Kl(ae,["string","array"]))throw new Ji("Expected second argument to be of type array or string, but found "+ka($i(ae))+" instead.");if(this.fromIndex){var de=this.fromIndex.evaluate(P);return ae.indexOf(G,de)}return ae.indexOf(G)},Fs.prototype.eachChild=function(P){P(this.needle),P(this.haystack),this.fromIndex&&P(this.fromIndex)},Fs.prototype.outputDefined=function(){return!1},Fs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var P=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),P]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var no=function(P,G,ae,de,be,Me){this.inputType=P,this.type=G,this.input=ae,this.cases=de,this.outputs=be,this.otherwise=Me};no.parse=function(P,G){if(P.length<5)return G.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if(P.length%2!==1)return G.error("Expected an even number of arguments.");var ae,de;G.expectedType&&G.expectedType.kind!=="value"&&(de=G.expectedType);for(var be={},Me=[],Be=2;Be<P.length-1;Be+=2){var tt=P[Be],ct=P[Be+1];Array.isArray(tt)||(tt=[tt]);var gt=G.concat(Be);if(tt.length===0)return gt.error("Expected at least one branch label.");for(var Dt=0,er=tt;Dt<er.length;Dt+=1){var Yt=er[Dt];if(typeof Yt!="number"&&typeof Yt!="string")return gt.error("Branch labels must be numbers or strings.");if(typeof Yt=="number"&&Math.abs(Yt)>Number.MAX_SAFE_INTEGER)return gt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Yt=="number"&&Math.floor(Yt)!==Yt)return gt.error("Numeric branch labels must be integer values.");if(!ae)ae=$i(Yt);else if(gt.checkSubtype(ae,$i(Yt)))return null;if(typeof be[String(Yt)]!="undefined")return gt.error("Branch labels must be unique.");be[String(Yt)]=Me.length}var dr=G.parse(ct,Be,de);if(!dr)return null;de=de||dr.type,Me.push(dr)}var Or=G.parse(P[1],1,Sn);if(!Or)return null;var sn=G.parse(P[P.length-1],P.length-1,de);return!sn||Or.type.kind!=="value"&&G.concat(1).checkSubtype(ae,Or.type)?null:new no(ae,de,Or,be,Me,sn)},no.prototype.evaluate=function(P){var G=this.input.evaluate(P),ae=$i(G)===this.inputType&&this.outputs[this.cases[G]]||this.otherwise;return ae.evaluate(P)},no.prototype.eachChild=function(P){P(this.input),this.outputs.forEach(P),P(this.otherwise)},no.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})&&this.otherwise.outputDefined()},no.prototype.serialize=function(){for(var P=this,G=["match",this.input.serialize()],ae=Object.keys(this.cases).sort(),de=[],be={},Me=0,Be=ae;Me<Be.length;Me+=1){var tt=Be[Me],ct=be[this.cases[tt]];ct===void 0?(be[this.cases[tt]]=de.length,de.push([this.cases[tt],[tt]])):de[ct][1].push(tt)}for(var gt=function(Or){return P.inputType.kind==="number"?Number(Or):Or},Dt=0,er=de;Dt<er.length;Dt+=1){var Yt=er[Dt],ct=Yt[0],dr=Yt[1];dr.length===1?G.push(gt(dr[0])):G.push(dr.map(gt)),G.push(this.outputs[outputIndex$1].serialize())}return G.push(this.otherwise.serialize()),G};var Jo=function(P,G,ae){this.type=P,this.branches=G,this.otherwise=ae};Jo.parse=function(P,G){if(P.length<4)return G.error("Expected at least 3 arguments, but found only "+(P.length-1)+".");if(P.length%2!==0)return G.error("Expected an odd number of arguments.");var ae;G.expectedType&&G.expectedType.kind!=="value"&&(ae=G.expectedType);for(var de=[],be=1;be<P.length-1;be+=2){var Me=G.parse(P[be],be,bn);if(!Me)return null;var Be=G.parse(P[be+1],be+1,ae);if(!Be)return null;de.push([Me,Be]),ae=ae||Be.type}var tt=G.parse(P[P.length-1],P.length-1,ae);return tt?new Jo(ae,de,tt):null},Jo.prototype.evaluate=function(P){for(var G=0,ae=this.branches;G<ae.length;G+=1){var de=ae[G],be=de[0],Me=de[1];if(be.evaluate(P))return Me.evaluate(P)}return this.otherwise.evaluate(P)},Jo.prototype.eachChild=function(P){for(var G=0,ae=this.branches;G<ae.length;G+=1){var de=ae[G],be=de[0],Me=de[1];P(be),P(Me)}P(this.otherwise)},Jo.prototype.outputDefined=function(){return this.branches.every(function(P){P[0];var G=P[1];return G.outputDefined()})&&this.otherwise.outputDefined()},Jo.prototype.serialize=function(){var P=["case"];return this.eachChild(function(G){P.push(G.serialize())}),P};var Os=function(P,G,ae,de){this.type=P,this.input=G,this.beginIndex=ae,this.endIndex=de};Os.parse=function(P,G){if(P.length<=2||P.length>=5)return G.error("Expected 3 or 4 arguments, but found "+(P.length-1)+" instead.");var ae=G.parse(P[1],1,Sn),de=G.parse(P[2],2,xr);if(!ae||!de)return null;if(!Ts(ae.type,[ca(Sn),Fr,Sn]))return G.error("Expected first argument to be of type array or string, but found "+ka(ae.type)+" instead");if(P.length===4){var be=G.parse(P[3],3,xr);return be?new Os(ae.type,ae,de,be):null}else return new Os(ae.type,ae,de)},Os.prototype.evaluate=function(P){var G=this.input.evaluate(P),ae=this.beginIndex.evaluate(P);if(!Kl(G,["string","array"]))throw new Ji("Expected first argument to be of type array or string, but found "+ka($i(G))+" instead.");if(this.endIndex){var de=this.endIndex.evaluate(P);return G.slice(ae,de)}return G.slice(ae)},Os.prototype.eachChild=function(P){P(this.input),P(this.beginIndex),this.endIndex&&P(this.endIndex)},Os.prototype.outputDefined=function(){return!1},Os.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var P=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),P]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Nf(k,P){return k==="=="||k==="!="?P.kind==="boolean"||P.kind==="string"||P.kind==="number"||P.kind==="null"||P.kind==="value":P.kind==="string"||P.kind==="number"||P.kind==="value"}function Uu(k,P,G){return P===G}function Bf(k,P,G){return P!==G}function yt(k,P,G){return P<G}function Ft(k,P,G){return P>G}function fr(k,P,G){return P<=G}function ir(k,P,G){return P>=G}function Ir(k,P,G,ae){return ae.compare(P,G)===0}function an(k,P,G,ae){return!Ir(k,P,G,ae)}function xn(k,P,G,ae){return ae.compare(P,G)<0}function Ln(k,P,G,ae){return ae.compare(P,G)>0}function Fn(k,P,G,ae){return ae.compare(P,G)<=0}function jn(k,P,G,ae){return ae.compare(P,G)>=0}function _n(k,P,G){var ae=k!=="=="&&k!=="!=";return function(){function de(be,Me,Be){this.type=bn,this.lhs=be,this.rhs=Me,this.collator=Be,this.hasUntypedArgument=be.type.kind==="value"||Me.type.kind==="value"}return de.parse=function(Me,Be){if(Me.length!==3&&Me.length!==4)return Be.error("Expected two or three arguments.");var tt=Me[0],ct=Be.parse(Me[1],1,Sn);if(!ct)return null;if(!Nf(tt,ct.type))return Be.concat(1).error('"'+tt+`" comparisons are not supported for type '`+ka(ct.type)+"'.");var gt=Be.parse(Me[2],2,Sn);if(!gt)return null;if(!Nf(tt,gt.type))return Be.concat(2).error('"'+tt+`" comparisons are not supported for type '`+ka(gt.type)+"'.");if(ct.type.kind!==gt.type.kind&&ct.type.kind!=="value"&&gt.type.kind!=="value")return Be.error("Cannot compare types '"+ka(ct.type)+"' and '"+ka(gt.type)+"'.");ae&&(ct.type.kind==="value"&&gt.type.kind!=="value"?ct=new vo(gt.type,[ct]):ct.type.kind!=="value"&&gt.type.kind==="value"&&(gt=new vo(ct.type,[gt])));var Dt=null;if(Me.length===4){if(ct.type.kind!=="string"&&gt.type.kind!=="string"&&ct.type.kind!=="value"&&gt.type.kind!=="value")return Be.error("Cannot use collator to compare non-string types.");if(Dt=Be.parse(Me[3],3,sa),!Dt)return null}return new de(ct,gt,Dt)},de.prototype.evaluate=function(Me){var Be=this.lhs.evaluate(Me),tt=this.rhs.evaluate(Me);if(ae&&this.hasUntypedArgument){var ct=$i(Be),gt=$i(tt);if(ct.kind!==gt.kind||!(ct.kind==="string"||ct.kind==="number"))throw new Ji('Expected arguments for "'+k+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+gt.kind+") instead.")}if(this.collator&&!ae&&this.hasUntypedArgument){var Dt=$i(Be),er=$i(tt);if(Dt.kind!=="string"||er.kind!=="string")return P(Me,Be,tt)}return this.collator?G(Me,Be,tt,this.collator.evaluate(Me)):P(Me,Be,tt)},de.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},de.prototype.outputDefined=function(){return!0},de.prototype.serialize=function(){var Me=[k];return this.eachChild(function(Be){Me.push(Be.serialize())}),Me},de}()}var Un=_n("==",Uu,Ir),On=_n("!=",Bf,an),Wn=_n("<",yt,xn),ea=_n(">",Ft,Ln),Ha=_n("<=",fr,Fn),Ia=_n(">=",ir,jn),Ga=function(P,G,ae,de,be){this.type=Fr,this.number=P,this.locale=G,this.currency=ae,this.minFractionDigits=de,this.maxFractionDigits=be};Ga.parse=function(P,G){if(P.length!==3)return G.error("Expected two arguments.");var ae=G.parse(P[1],1,xr);if(!ae)return null;var de=P[2];if(typeof de!="object"||Array.isArray(de))return G.error("NumberFormat options argument must be an object.");var be=null;if(de.locale&&(be=G.parse(de.locale,1,Fr),!be))return null;var Me=null;if(de.currency&&(Me=G.parse(de.currency,1,Fr),!Me))return null;var Be=null;if(de["min-fraction-digits"]&&(Be=G.parse(de["min-fraction-digits"],1,xr),!Be))return null;var tt=null;return de["max-fraction-digits"]&&(tt=G.parse(de["max-fraction-digits"],1,xr),!tt)?null:new Ga(ae,be,Me,Be,tt)},Ga.prototype.evaluate=function(P){return new Intl.NumberFormat(this.locale?this.locale.evaluate(P):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(P):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(P):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(P):void 0}).format(this.number.evaluate(P))},Ga.prototype.eachChild=function(P){P(this.number),this.locale&&P(this.locale),this.currency&&P(this.currency),this.minFractionDigits&&P(this.minFractionDigits),this.maxFractionDigits&&P(this.maxFractionDigits)},Ga.prototype.outputDefined=function(){return!1},Ga.prototype.serialize=function(){var P={};return this.locale&&(P.locale=this.locale.serialize()),this.currency&&(P.currency=this.currency.serialize()),this.minFractionDigits&&(P["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(P["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),P]};var ja=function(P){this.type=xr,this.input=P};ja.parse=function(P,G){if(P.length!==2)return G.error("Expected 1 argument, but found "+(P.length-1)+" instead.");var ae=G.parse(P[1],1);return ae?ae.type.kind!=="array"&&ae.type.kind!=="string"&&ae.type.kind!=="value"?G.error("Expected argument of type string or array, but found "+ka(ae.type)+" instead."):new ja(ae):null},ja.prototype.evaluate=function(P){var G=this.input.evaluate(P);if(typeof G=="string")return G.length;if(Array.isArray(G))return G.length;throw new Ji("Expected value to be of type string or array, but found "+ka($i(G))+" instead.")},ja.prototype.eachChild=function(P){P(this.input)},ja.prototype.outputDefined=function(){return!1},ja.prototype.serialize=function(){var P=["length"];return this.eachChild(function(G){P.push(G.serialize())}),P};var Qn={"==":Un,"!=":On,">":ea,"<":Wn,">=":Ia,"<=":Ha,array:vo,at:Tl,boolean:vo,case:Jo,coalesce:Ds,collator:_l,format:Ps,image:zl,in:sl,"index-of":Fs,interpolate:ko,"interpolate-hcl":ko,"interpolate-lab":ko,length:ja,let:wl,literal:ho,match:no,number:vo,"number-format":Ga,object:vo,slice:Os,step:ol,string:vo,"to-boolean":As,"to-color":As,"to-number":As,"to-string":As,var:Ys,within:Ss};function da(k,P){var G=P[0],ae=P[1],de=P[2],be=P[3];G=G.evaluate(k),ae=ae.evaluate(k),de=de.evaluate(k);var Me=be?be.evaluate(k):1,Be=vu(G,ae,de,Me);if(Be)throw new Ji(Be);return new Ai(G/255*Me,ae/255*Me,de/255*Me,Me)}function Za(k,P){return k in P}function ni(k,P){var G=P[k];return typeof G=="undefined"?null:G}function Mi(k,P,G,ae){for(;G<=ae;){var de=G+ae>>1;if(P[de]===k)return!0;P[de]>k?ae=de-1:G=de+1}return!1}function Ei(k){return{type:k}}Zo.register(Qn,{error:[Zn,[Fr],function(k,P){var G=P[0];throw new Ji(G.evaluate(k))}],typeof:[Fr,[Sn],function(k,P){var G=P[0];return ka($i(G.evaluate(k)))}],"to-rgba":[ca(xr,4),[Hn],function(k,P){var G=P[0];return G.evaluate(k).toArray()}],rgb:[Hn,[xr,xr,xr],da],rgba:[Hn,[xr,xr,xr,xr],da],has:{type:bn,overloads:[[[Fr],function(k,P){var G=P[0];return Za(G.evaluate(k),k.properties())}],[[Fr,ra],function(k,P){var G=P[0],ae=P[1];return Za(G.evaluate(k),ae.evaluate(k))}]]},get:{type:Sn,overloads:[[[Fr],function(k,P){var G=P[0];return ni(G.evaluate(k),k.properties())}],[[Fr,ra],function(k,P){var G=P[0],ae=P[1];return ni(G.evaluate(k),ae.evaluate(k))}]]},"feature-state":[Sn,[Fr],function(k,P){var G=P[0];return ni(G.evaluate(k),k.featureState||{})}],properties:[ra,[],function(k){return k.properties()}],"geometry-type":[Fr,[],function(k){return k.geometryType()}],id:[Sn,[],function(k){return k.id()}],zoom:[xr,[],function(k){return k.globals.zoom}],"heatmap-density":[xr,[],function(k){return k.globals.heatmapDensity||0}],"line-progress":[xr,[],function(k){return k.globals.lineProgress||0}],accumulated:[Sn,[],function(k){return k.globals.accumulated===void 0?null:k.globals.accumulated}],"+":[xr,Ei(xr),function(k,P){for(var G=0,ae=0,de=P;ae<de.length;ae+=1){var be=de[ae];G+=be.evaluate(k)}return G}],"*":[xr,Ei(xr),function(k,P){for(var G=1,ae=0,de=P;ae<de.length;ae+=1){var be=de[ae];G*=be.evaluate(k)}return G}],"-":{type:xr,overloads:[[[xr,xr],function(k,P){var G=P[0],ae=P[1];return G.evaluate(k)-ae.evaluate(k)}],[[xr],function(k,P){var G=P[0];return-G.evaluate(k)}]]},"/":[xr,[xr,xr],function(k,P){var G=P[0],ae=P[1];return G.evaluate(k)/ae.evaluate(k)}],"%":[xr,[xr,xr],function(k,P){var G=P[0],ae=P[1];return G.evaluate(k)%ae.evaluate(k)}],ln2:[xr,[],function(){return Math.LN2}],pi:[xr,[],function(){return Math.PI}],e:[xr,[],function(){return Math.E}],"^":[xr,[xr,xr],function(k,P){var G=P[0],ae=P[1];return Math.pow(G.evaluate(k),ae.evaluate(k))}],sqrt:[xr,[xr],function(k,P){var G=P[0];return Math.sqrt(G.evaluate(k))}],log10:[xr,[xr],function(k,P){var G=P[0];return Math.log(G.evaluate(k))/Math.LN10}],ln:[xr,[xr],function(k,P){var G=P[0];return Math.log(G.evaluate(k))}],log2:[xr,[xr],function(k,P){var G=P[0];return Math.log(G.evaluate(k))/Math.LN2}],sin:[xr,[xr],function(k,P){var G=P[0];return Math.sin(G.evaluate(k))}],cos:[xr,[xr],function(k,P){var G=P[0];return Math.cos(G.evaluate(k))}],tan:[xr,[xr],function(k,P){var G=P[0];return Math.tan(G.evaluate(k))}],asin:[xr,[xr],function(k,P){var G=P[0];return Math.asin(G.evaluate(k))}],acos:[xr,[xr],function(k,P){var G=P[0];return Math.acos(G.evaluate(k))}],atan:[xr,[xr],function(k,P){var G=P[0];return Math.atan(G.evaluate(k))}],min:[xr,Ei(xr),function(k,P){return Math.min.apply(Math,P.map(function(G){return G.evaluate(k)}))}],max:[xr,Ei(xr),function(k,P){return Math.max.apply(Math,P.map(function(G){return G.evaluate(k)}))}],abs:[xr,[xr],function(k,P){var G=P[0];return Math.abs(G.evaluate(k))}],round:[xr,[xr],function(k,P){var G=P[0],ae=G.evaluate(k);return ae<0?-Math.round(-ae):Math.round(ae)}],floor:[xr,[xr],function(k,P){var G=P[0];return Math.floor(G.evaluate(k))}],ceil:[xr,[xr],function(k,P){var G=P[0];return Math.ceil(G.evaluate(k))}],"filter-==":[bn,[Fr,Sn],function(k,P){var G=P[0],ae=P[1];return k.properties()[G.value]===ae.value}],"filter-id-==":[bn,[Sn],function(k,P){var G=P[0];return k.id()===G.value}],"filter-type-==":[bn,[Fr],function(k,P){var G=P[0];return k.geometryType()===G.value}],"filter-<":[bn,[Fr,Sn],function(k,P){var G=P[0],ae=P[1],de=k.properties()[G.value],be=ae.value;return typeof de==typeof be&&de<be}],"filter-id-<":[bn,[Sn],function(k,P){var G=P[0],ae=k.id(),de=G.value;return typeof ae==typeof de&&ae<de}],"filter->":[bn,[Fr,Sn],function(k,P){var G=P[0],ae=P[1],de=k.properties()[G.value],be=ae.value;return typeof de==typeof be&&de>be}],"filter-id->":[bn,[Sn],function(k,P){var G=P[0],ae=k.id(),de=G.value;return typeof ae==typeof de&&ae>de}],"filter-<=":[bn,[Fr,Sn],function(k,P){var G=P[0],ae=P[1],de=k.properties()[G.value],be=ae.value;return typeof de==typeof be&&de<=be}],"filter-id-<=":[bn,[Sn],function(k,P){var G=P[0],ae=k.id(),de=G.value;return typeof ae==typeof de&&ae<=de}],"filter->=":[bn,[Fr,Sn],function(k,P){var G=P[0],ae=P[1],de=k.properties()[G.value],be=ae.value;return typeof de==typeof be&&de>=be}],"filter-id->=":[bn,[Sn],function(k,P){var G=P[0],ae=k.id(),de=G.value;return typeof ae==typeof de&&ae>=de}],"filter-has":[bn,[Sn],function(k,P){var G=P[0];return G.value in k.properties()}],"filter-has-id":[bn,[],function(k){return k.id()!==null&&k.id()!==void 0}],"filter-type-in":[bn,[ca(Fr)],function(k,P){var G=P[0];return G.value.indexOf(k.geometryType())>=0}],"filter-id-in":[bn,[ca(Sn)],function(k,P){var G=P[0];return G.value.indexOf(k.id())>=0}],"filter-in-small":[bn,[Fr,ca(Sn)],function(k,P){var G=P[0],ae=P[1];return ae.value.indexOf(k.properties()[G.value])>=0}],"filter-in-large":[bn,[Fr,ca(Sn)],function(k,P){var G=P[0],ae=P[1];return Mi(k.properties()[G.value],ae.value,0,ae.value.length-1)}],all:{type:bn,overloads:[[[bn,bn],function(k,P){var G=P[0],ae=P[1];return G.evaluate(k)&&ae.evaluate(k)}],[Ei(bn),function(k,P){for(var G=0,ae=P;G<ae.length;G+=1){var de=ae[G];if(!de.evaluate(k))return!1}return!0}]]},any:{type:bn,overloads:[[[bn,bn],function(k,P){var G=P[0],ae=P[1];return G.evaluate(k)||ae.evaluate(k)}],[Ei(bn),function(k,P){for(var G=0,ae=P;G<ae.length;G+=1){var de=ae[G];if(de.evaluate(k))return!0}return!1}]]},"!":[bn,[bn],function(k,P){var G=P[0];return!G.evaluate(k)}],"is-supported-script":[bn,[Fr],function(k,P){var G=P[0],ae=k.globals&&k.globals.isSupportedScript;return ae?ae(G.evaluate(k)):!0}],upcase:[Fr,[Fr],function(k,P){var G=P[0];return G.evaluate(k).toUpperCase()}],downcase:[Fr,[Fr],function(k,P){var G=P[0];return G.evaluate(k).toLowerCase()}],concat:[Fr,Ei(Sn),function(k,P){return P.map(function(G){return Jl(G.evaluate(k))}).join("")}],"resolved-locale":[Fr,[sa],function(k,P){var G=P[0];return G.evaluate(k).resolvedLocale()}]});function Ci(k){return{result:"success",value:k}}function Oi(k){return{result:"error",value:k}}function vi(k){return k["property-type"]==="data-driven"||k["property-type"]==="cross-faded-data-driven"}function Uo(k){return!!k.expression&&k.expression.parameters.indexOf("zoom")>-1}function xo(k){return!!k.expression&&k.expression.interpolated}function ri(k){return k instanceof Number?"number":k instanceof String?"string":k instanceof Boolean?"boolean":Array.isArray(k)?"array":k===null?"null":typeof k}function ga(k){return typeof k=="object"&&k!==null&&!Array.isArray(k)}function Li(k){return k}function Co(k,P){var G=P.type==="color",ae=k.stops&&typeof k.stops[0][0]=="object",de=ae||k.property!==void 0,be=ae||!de,Me=k.type||(xo(P)?"exponential":"interval");if(G&&(k=mn({},k),k.stops&&(k.stops=k.stops.map(function(ia){return[ia[0],Ai.parse(ia[1])]})),k.default?k.default=Ai.parse(k.default):k.default=Ai.parse(P.default)),k.colorSpace&&k.colorSpace!=="rgb"&&!_u[k.colorSpace])throw new Error("Unknown color space: "+k.colorSpace);var Be,tt,ct;if(Me==="exponential")Be=us;else if(Me==="interval")Be=ll;else if(Me==="categorical"){Be=zs,tt=Object.create(null);for(var gt=0,Dt=k.stops;gt<Dt.length;gt+=1){var er=Dt[gt];tt[er[0]]=er[1]}ct=typeof k.stops[0][0]}else if(Me==="identity")Be=jl;else throw new Error('Unknown function type "'+Me+'"');if(ae){for(var Yt={},dr=[],Or=0;Or<k.stops.length;Or++){var sn=k.stops[Or],en=sn[0].zoom;Yt[en]===void 0&&(Yt[en]={zoom:en,type:k.type,property:k.property,default:k.default,stops:[]},dr.push(en)),Yt[en].stops.push([sn[0].value,sn[1]])}for(var In=[],wn=0,Pn=dr;wn<Pn.length;wn+=1){var Bn=Pn[wn];In.push([Yt[Bn].zoom,Co(Yt[Bn],P)])}var Yn={name:"linear"};return{kind:"composite",interpolationType:Yn,interpolationFactor:ko.interpolationFactor.bind(void 0,Yn),zoomStops:In.map(function(ia){return ia[0]}),evaluate:function(Ba,Ma){var Ca=Ba.zoom;return us({stops:In,base:k.base},P,Ca).evaluate(Ca,Ma)}}}else if(be){var fa=Me==="exponential"?{name:"exponential",base:k.base!==void 0?k.base:1}:null;return{kind:"camera",interpolationType:fa,interpolationFactor:ko.interpolationFactor.bind(void 0,fa),zoomStops:k.stops.map(function(ia){return ia[0]}),evaluate:function(ia){var Ba=ia.zoom;return Be(k,P,Ba,tt,ct)}}}else return{kind:"source",evaluate:function(Ba,Ma){var Ca=Ma&&Ma.properties?Ma.properties[k.property]:void 0;return Ca===void 0?Fo(k.default,P.default):Be(k,P,Ca,tt,ct)}}}function Fo(k,P,G){if(k!==void 0)return k;if(P!==void 0)return P;if(G!==void 0)return G}function zs(k,P,G,ae,de){var be=typeof G===de?ae[G]:void 0;return Fo(be,k.default,P.default)}function ll(k,P,G){if(ri(G)!=="number")return Fo(k.default,P.default);var ae=k.stops.length;if(ae===1||G<=k.stops[0][0])return k.stops[0][1];if(G>=k.stops[ae-1][0])return k.stops[ae-1][1];var de=il(k.stops.map(function(be){return be[0]}),G);return k.stops[de][1]}function us(k,P,G){var ae=k.base!==void 0?k.base:1;if(ri(G)!=="number")return Fo(k.default,P.default);var de=k.stops.length;if(de===1||G<=k.stops[0][0])return k.stops[0][1];if(G>=k.stops[de-1][0])return k.stops[de-1][1];var be=il(k.stops.map(function(Dt){return Dt[0]}),G),Me=Zs(G,ae,k.stops[be][0],k.stops[be+1][0]),Be=k.stops[be][1],tt=k.stops[be+1][1],ct=Ul[P.type]||Li;if(k.colorSpace&&k.colorSpace!=="rgb"){var gt=_u[k.colorSpace];ct=function(Dt,er){return gt.reverse(gt.interpolate(gt.forward(Dt),gt.forward(er),Me))}}return typeof Be.evaluate=="function"?{evaluate:function(){for(var er=[],Yt=arguments.length;Yt--;)er[Yt]=arguments[Yt];var dr=Be.evaluate.apply(void 0,er),Or=tt.evaluate.apply(void 0,er);if(!(dr===void 0||Or===void 0))return ct(dr,Or,Me)}}:ct(Be,tt,Me)}function jl(k,P,G){return P.type==="color"?G=Ai.parse(G):P.type==="formatted"?G=to.fromString(G.toString()):P.type==="resolvedImage"?G=Xo.fromString(G.toString()):ri(G)!==P.type&&(P.type!=="enum"||!P.values[G])&&(G=void 0),Fo(G,k.default,P.default)}function Zs(k,P,G,ae){var de=ae-G,be=k-G;return de===0?0:P===1?be/de:(Math.pow(P,be)-1)/(Math.pow(P,de)-1)}var Ns=function(P,G){this.expression=P,this._warningHistory={},this._evaluator=new bl,this._defaultValue=G?vc(G):null,this._enumValues=G&&G.type==="enum"?G.values:null};Ns.prototype.evaluateWithoutErrorHandling=function(P,G,ae,de,be,Me){return this._evaluator.globals=P,this._evaluator.feature=G,this._evaluator.featureState=ae,this._evaluator.canonical=de,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},Ns.prototype.evaluate=function(P,G,ae,de,be,Me){this._evaluator.globals=P,this._evaluator.feature=G||null,this._evaluator.featureState=ae||null,this._evaluator.canonical=de,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Me||null;try{var Be=this.expression.evaluate(this._evaluator);if(Be==null||typeof Be=="number"&&Be!==Be)return this._defaultValue;if(this._enumValues&&!(Be in this._enumValues))throw new Ji("Expected value to be one of "+Object.keys(this._enumValues).map(function(tt){return JSON.stringify(tt)}).join(", ")+", but found "+JSON.stringify(Be)+" instead.");return Be}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,typeof console!="undefined"&&console.warn(tt.message)),this._defaultValue}};function Vo(k){return Array.isArray(k)&&k.length>0&&typeof k[0]=="string"&&k[0]in Qn}function Vu(k,P){var G=new Ko(Qn,[],P?Vf(P):void 0),ae=G.parse(k,void 0,void 0,void 0,P&&P.type==="string"?{typeAnnotation:"coerce"}:void 0);return ae?Ci(new Ns(ae,P)):Oi(G.errors)}var uf=function(P,G){this.kind=P,this._styleExpression=G,this.isStateDependent=P!=="constant"&&!eu(G.expression)};uf.prototype.evaluateWithoutErrorHandling=function(P,G,ae,de,be,Me){return this._styleExpression.evaluateWithoutErrorHandling(P,G,ae,de,be,Me)},uf.prototype.evaluate=function(P,G,ae,de,be,Me){return this._styleExpression.evaluate(P,G,ae,de,be,Me)};var Bs=function(P,G,ae,de){this.kind=P,this.zoomStops=ae,this._styleExpression=G,this.isStateDependent=P!=="camera"&&!eu(G.expression),this.interpolationType=de};Bs.prototype.evaluateWithoutErrorHandling=function(P,G,ae,de,be,Me){return this._styleExpression.evaluateWithoutErrorHandling(P,G,ae,de,be,Me)},Bs.prototype.evaluate=function(P,G,ae,de,be,Me){return this._styleExpression.evaluate(P,G,ae,de,be,Me)},Bs.prototype.interpolationFactor=function(P,G,ae){return this.interpolationType?ko.interpolationFactor(this.interpolationType,P,G,ae):0};function Uf(k,P){if(k=Vu(k,P),k.result==="error")return k;var G=k.value.expression,ae=ql(G);if(!ae&&!vi(P))return Oi([new En("","data expressions not supported")]);var de=sf(G,["zoom"]);if(!de&&!Uo(P))return Oi([new En("","zoom expressions not supported")]);var be=hc(G);if(!be&&!de)return Oi([new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(be instanceof En)return Oi([be]);if(be instanceof ko&&!xo(P))return Oi([new En("",'"interpolate" expressions cannot be used with this property')]);if(!be)return Ci(ae?new uf("constant",k.value):new uf("source",k.value));var Me=be instanceof ko?be.interpolation:void 0;return Ci(ae?new Bs("camera",k.value,be.labels,Me):new Bs("composite",k.value,be.labels,Me))}var Hu=function(P,G){this._parameters=P,this._specification=G,mn(this,Co(this._parameters,this._specification))};Hu.deserialize=function(P){return new Hu(P._parameters,P._specification)},Hu.serialize=function(P){return{_parameters:P._parameters,_specification:P._specification}};function ev(k,P){if(ga(k))return new Hu(k,P);if(Vo(k)){var G=Uf(k,P);if(G.result==="error")throw new Error(G.value.map(function(de){return de.key+": "+de.message}).join(", "));return G.value}else{var ae=k;return typeof k=="string"&&P.type==="color"&&(ae=Ai.parse(k)),{kind:"constant",evaluate:function(){return ae}}}}function hc(k){var P=null;if(k instanceof wl)P=hc(k.result);else if(k instanceof Ds)for(var G=0,ae=k.args;G<ae.length;G+=1){var de=ae[G];if(P=hc(de),P)break}else(k instanceof ol||k instanceof ko)&&k.input instanceof Zo&&k.input.name==="zoom"&&(P=k);return P instanceof En||k.eachChild(function(be){var Me=hc(be);Me instanceof En?P=Me:!P&&Me?P=new En("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):P&&Me&&P!==Me&&(P=new En("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),P}function Vf(k){var P={color:Hn,string:Fr,number:xr,enum:Fr,boolean:bn,formatted:ma,resolvedImage:wa};return k.type==="array"?ca(P[k.value]||Sn,k.length):P[k.type]}function vc(k){return k.type==="color"&&ga(k.default)?new Ai(0,0,0,0):k.type==="color"?Ai.parse(k.default)||null:k.default===void 0?null:k.default}function ul(k){var P=k.key,G=k.value,ae=k.valueSpec||{},de=k.objectElementValidators||{},be=k.style,Me=k.styleSpec,Be=[],tt=ri(G);if(tt!=="object")return[new yr(P,G,"object expected, "+tt+" found")];for(var ct in G){var gt=ct.split(".")[0],Dt=ae[gt]||ae["*"],er=void 0;if(de[gt])er=de[gt];else if(ae[gt])er=xi;else if(de["*"])er=de["*"];else if(ae["*"])er=xi;else{Be.push(new yr(P,G[ct],'unknown property "'+ct+'"'));continue}Be=Be.concat(er({key:(P&&P+".")+ct,value:G[ct],valueSpec:Dt,style:be,styleSpec:Me,object:G,objectKey:ct},G))}for(var Yt in ae)de[Yt]||ae[Yt].required&&ae[Yt].default===void 0&&G[Yt]===void 0&&Be.push(new yr(P,G,'missing required property "'+Yt+'"'));return Be}function Hc(k){var P=k.value,G=k.valueSpec,ae=k.style,de=k.styleSpec,be=k.key,Me=k.arrayElementValidator||xi;if(ri(P)!=="array")return[new yr(be,P,"array expected, "+ri(P)+" found")];if(G.length&&P.length!==G.length)return[new yr(be,P,"array length "+G.length+" expected, length "+P.length+" found")];if(G["min-length"]&&P.length<G["min-length"])return[new yr(be,P,"array length at least "+G["min-length"]+" expected, length "+P.length+" found")];var Be={type:G.value,values:G.values};de.$version<7&&(Be.function=G.function),ri(G.value)==="object"&&(Be=G.value);for(var tt=[],ct=0;ct<P.length;ct++)tt=tt.concat(Me({array:P,arrayIndex:ct,value:P[ct],valueSpec:Be,style:ae,styleSpec:de,key:be+"["+ct+"]"}));return tt}function pc(k){var P=k.key,G=k.value,ae=k.valueSpec,de=ri(G);return de==="number"&&G!==G&&(de="NaN"),de!=="number"?[new yr(P,G,"number expected, "+de+" found")]:"minimum"in ae&&G<ae.minimum?[new yr(P,G,G+" is less than the minimum value "+ae.minimum)]:"maximum"in ae&&G>ae.maximum?[new yr(P,G,G+" is greater than the maximum value "+ae.maximum)]:[]}function dc(k){var P=k.valueSpec,G=gn(k.value.type),ae,de={},be,Me,Be=G!=="categorical"&&k.value.property===void 0,tt=!Be,ct=ri(k.value.stops)==="array"&&ri(k.value.stops[0])==="array"&&ri(k.value.stops[0][0])==="object",gt=ul({key:k.key,value:k.value,valueSpec:k.styleSpec.function,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{stops:Dt,default:dr}});return G==="identity"&&Be&&gt.push(new yr(k.key,k.value,'missing required property "property"')),G!=="identity"&&!k.value.stops&&gt.push(new yr(k.key,k.value,'missing required property "stops"')),G==="exponential"&&k.valueSpec.expression&&!xo(k.valueSpec)&&gt.push(new yr(k.key,k.value,"exponential functions not supported")),k.styleSpec.$version>=8&&(tt&&!vi(k.valueSpec)?gt.push(new yr(k.key,k.value,"property functions not supported")):Be&&!Uo(k.valueSpec)&&gt.push(new yr(k.key,k.value,"zoom functions not supported"))),(G==="categorical"||ct)&&k.value.property===void 0&&gt.push(new yr(k.key,k.value,'"property" property is required')),gt;function Dt(Or){if(G==="identity")return[new yr(Or.key,Or.value,'identity function may not have a "stops" property')];var sn=[],en=Or.value;return sn=sn.concat(Hc({key:Or.key,value:en,valueSpec:Or.valueSpec,style:Or.style,styleSpec:Or.styleSpec,arrayElementValidator:er})),ri(en)==="array"&&en.length===0&&sn.push(new yr(Or.key,en,"array must have at least one stop")),sn}function er(Or){var sn=[],en=Or.value,In=Or.key;if(ri(en)!=="array")return[new yr(In,en,"array expected, "+ri(en)+" found")];if(en.length!==2)return[new yr(In,en,"array length 2 expected, length "+en.length+" found")];if(ct){if(ri(en[0])!=="object")return[new yr(In,en,"object expected, "+ri(en[0])+" found")];if(en[0].zoom===void 0)return[new yr(In,en,"object stop key must have zoom")];if(en[0].value===void 0)return[new yr(In,en,"object stop key must have value")];if(Me&&Me>gn(en[0].zoom))return[new yr(In,en[0].zoom,"stop zoom values must appear in ascending order")];gn(en[0].zoom)!==Me&&(Me=gn(en[0].zoom),be=void 0,de={}),sn=sn.concat(ul({key:In+"[0]",value:en[0],valueSpec:{zoom:{}},style:Or.style,styleSpec:Or.styleSpec,objectElementValidators:{zoom:pc,value:Yt}}))}else sn=sn.concat(Yt({key:In+"[0]",value:en[0],valueSpec:{},style:Or.style,styleSpec:Or.styleSpec},en));return Vo(Dn(en[1]))?sn.concat([new yr(In+"[1]",en[1],"expressions are not allowed in function stops.")]):sn.concat(xi({key:In+"[1]",value:en[1],valueSpec:P,style:Or.style,styleSpec:Or.styleSpec}))}function Yt(Or,sn){var en=ri(Or.value),In=gn(Or.value),wn=Or.value!==null?Or.value:sn;if(!ae)ae=en;else if(en!==ae)return[new yr(Or.key,wn,en+" stop domain type must match previous stop domain type "+ae)];if(en!=="number"&&en!=="string"&&en!=="boolean")return[new yr(Or.key,wn,"stop domain value must be a number, string, or boolean")];if(en!=="number"&&G!=="categorical"){var Pn="number expected, "+en+" found";return vi(P)&&G===void 0&&(Pn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yr(Or.key,wn,Pn)]}return G==="categorical"&&en==="number"&&(!isFinite(In)||Math.floor(In)!==In)?[new yr(Or.key,wn,"integer expected, found "+In)]:G!=="categorical"&&en==="number"&&be!==void 0&&In<be?[new yr(Or.key,wn,"stop domain values must appear in ascending order")]:(be=In,G==="categorical"&&In in de?[new yr(Or.key,wn,"stop domain values must be unique")]:(de[In]=!0,[]))}function dr(Or){return xi({key:Or.key,value:Or.value,valueSpec:P,style:Or.style,styleSpec:Or.styleSpec})}}function fs(k){var P=(k.expressionContext==="property"?Uf:Vu)(Dn(k.value),k.valueSpec);if(P.result==="error")return P.value.map(function(ae){return new yr(""+k.key+ae.key,k.value,ae.message)});var G=P.value.expression||P.value._styleExpression.expression;if(k.expressionContext==="property"&&k.propertyKey==="text-font"&&!G.outputDefined())return[new yr(k.key,k.value,'Invalid data expression for "'+k.propertyKey+'". Output values must be contained as literals within the expression.')];if(k.expressionContext==="property"&&k.propertyType==="layout"&&!eu(G))return[new yr(k.key,k.value,'"feature-state" data expressions are not supported with layout properties.')];if(k.expressionContext==="filter"&&!eu(G))return[new yr(k.key,k.value,'"feature-state" data expressions are not supported with filters.')];if(k.expressionContext&&k.expressionContext.indexOf("cluster")===0){if(!sf(G,["zoom","feature-state"]))return[new yr(k.key,k.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(k.expressionContext==="cluster-initial"&&!ql(G))return[new yr(k.key,k.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gc(k){var P=k.value,G=k.key,ae=ri(P);return ae!=="boolean"?[new yr(G,P,"boolean expected, "+ae+" found")]:[]}function lh(k){var P=k.key,G=k.value,ae=ri(G);return ae!=="string"?[new yr(P,G,"color expected, "+ae+" found")]:tf(G)===null?[new yr(P,G,'color expected, "'+G+'" found')]:[]}function Ks(k){var P=k.key,G=k.value,ae=k.valueSpec,de=[];return Array.isArray(ae.values)?ae.values.indexOf(gn(G))===-1&&de.push(new yr(P,G,"expected one of ["+ae.values.join(", ")+"], "+JSON.stringify(G)+" found")):Object.keys(ae.values).indexOf(gn(G))===-1&&de.push(new yr(P,G,"expected one of ["+Object.keys(ae.values).join(", ")+"], "+JSON.stringify(G)+" found")),de}function Hf(k){if(k===!0||k===!1)return!0;if(!Array.isArray(k)||k.length===0)return!1;switch(k[0]){case"has":return k.length>=2&&k[1]!=="$id"&&k[1]!=="$type";case"in":return k.length>=3&&(typeof k[1]!="string"||Array.isArray(k[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return k.length!==3||Array.isArray(k[1])||Array.isArray(k[2]);case"any":case"all":for(var P=0,G=k.slice(1);P<G.length;P+=1){var ae=G[P];if(!Hf(ae)&&typeof ae!="boolean")return!1}return!0;default:return!0}}var Gf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yc(k){if(k==null)return{filter:function(){return!0},needGeometry:!1};Hf(k)||(k=rt(k));var P=Vu(k,Gf);if(P.result==="error")throw new Error(P.value.map(function(ae){return ae.key+": "+ae.message}).join(", "));var G=$e(k);return{filter:function(ae,de,be){return P.value.evaluate(ae,de,{},be)},needGeometry:G}}function Ne(k,P){return k<P?-1:k>P?1:0}function $e(k){if(!Array.isArray(k))return!1;if(k[0]==="within")return!0;for(var P=1;P<k.length;P++)if($e(k[P]))return!0;return!1}function rt(k){if(!k)return!0;var P=k[0];if(k.length<=1)return P!=="any";var G=P==="=="?lt(k[1],k[2],"=="):P==="!="?lr(lt(k[1],k[2],"==")):P==="<"||P===">"||P==="<="||P===">="?lt(k[1],k[2],P):P==="any"?bt(k.slice(1)):P==="all"?["all"].concat(k.slice(1).map(rt)):P==="none"?["all"].concat(k.slice(1).map(rt).map(lr)):P==="in"?mt(k[1],k.slice(2)):P==="!in"?lr(mt(k[1],k.slice(2))):P==="has"?At(k[1]):P==="!has"?lr(At(k[1])):P==="within"?k:!0;return G}function lt(k,P,G){switch(k){case"$type":return["filter-type-"+G,P];case"$id":return["filter-id-"+G,P];default:return["filter-"+G,k,P]}}function bt(k){return["any"].concat(k.map(rt))}function mt(k,P){if(P.length===0)return!1;switch(k){case"$type":return["filter-type-in",["literal",P]];case"$id":return["filter-id-in",["literal",P]];default:return P.length>200&&!P.some(function(G){return typeof G!=typeof P[0]})?["filter-in-large",k,["literal",P.sort(Ne)]]:["filter-in-small",k,["literal",P]]}}function At(k){switch(k){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",k]}}function lr(k){return["!",k]}function pr(k){return Hf(Dn(k.value))?fs(mn({},k,{expressionContext:"filter",valueSpec:{value:"boolean"}})):or(k)}function or(k){var P=k.value,G=k.key;if(ri(P)!=="array")return[new yr(G,P,"array expected, "+ri(P)+" found")];var ae=k.styleSpec,de,be=[];if(P.length<1)return[new yr(G,P,"filter array must have at least 1 element")];switch(be=be.concat(Ks({key:G+"[0]",value:P[0],valueSpec:ae.filter_operator,style:k.style,styleSpec:k.styleSpec})),gn(P[0])){case"<":case"<=":case">":case">=":P.length>=2&&gn(P[1])==="$type"&&be.push(new yr(G,P,'"$type" cannot be use with operator "'+P[0]+'"'));case"==":case"!=":P.length!==3&&be.push(new yr(G,P,'filter array for operator "'+P[0]+'" must have 3 elements'));case"in":case"!in":P.length>=2&&(de=ri(P[1]),de!=="string"&&be.push(new yr(G+"[1]",P[1],"string expected, "+de+" found")));for(var Me=2;Me<P.length;Me++)de=ri(P[Me]),gn(P[1])==="$type"?be=be.concat(Ks({key:G+"["+Me+"]",value:P[Me],valueSpec:ae.geometry_type,style:k.style,styleSpec:k.styleSpec})):de!=="string"&&de!=="number"&&de!=="boolean"&&be.push(new yr(G+"["+Me+"]",P[Me],"string, number, or boolean expected, "+de+" found"));break;case"any":case"all":case"none":for(var Be=1;Be<P.length;Be++)be=be.concat(or({key:G+"["+Be+"]",value:P[Be],style:k.style,styleSpec:k.styleSpec}));break;case"has":case"!has":de=ri(P[1]),P.length!==2?be.push(new yr(G,P,'filter array for "'+P[0]+'" operator must have 2 elements')):de!=="string"&&be.push(new yr(G+"[1]",P[1],"string expected, "+de+" found"));break;case"within":de=ri(P[1]),P.length!==2?be.push(new yr(G,P,'filter array for "'+P[0]+'" operator must have 2 elements')):de!=="object"&&be.push(new yr(G+"[1]",P[1],"object expected, "+de+" found"));break}return be}function mr(k,P){var G=k.key,ae=k.style,de=k.styleSpec,be=k.value,Me=k.objectKey,Be=de[P+"_"+k.layerType];if(!Be)return[];var tt=Me.match(/^(.*)-transition$/);if(P==="paint"&&tt&&Be[tt[1]]&&Be[tt[1]].transition)return xi({key:G,value:be,valueSpec:de.transition,style:ae,styleSpec:de});var ct=k.valueSpec||Be[Me];if(!ct)return[new yr(G,be,'unknown property "'+Me+'"')];var gt;if(ri(be)==="string"&&vi(ct)&&!ct.tokens&&(gt=/^{([^}]+)}$/.exec(be)))return[new yr(G,be,'"'+Me+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(gt[1])+" }`.")];var Dt=[];return k.layerType==="symbol"&&(Me==="text-field"&&ae&&!ae.glyphs&&Dt.push(new yr(G,be,'use of "text-field" requires a style "glyphs" property')),Me==="text-font"&&ga(Dn(be))&&gn(be.type)==="identity"&&Dt.push(new yr(G,be,'"text-font" does not support identity functions'))),Dt.concat(xi({key:k.key,value:be,valueSpec:ct,style:ae,styleSpec:de,expressionContext:"property",propertyType:P,propertyKey:Me}))}function Pr(k){return mr(k,"paint")}function Yr(k){return mr(k,"layout")}function tn(k){var P=[],G=k.value,ae=k.key,de=k.style,be=k.styleSpec;!G.type&&!G.ref&&P.push(new yr(ae,G,'either "type" or "ref" is required'));var Me=gn(G.type),Be=gn(G.ref);if(G.id)for(var tt=gn(G.id),ct=0;ct<k.arrayIndex;ct++){var gt=de.layers[ct];gn(gt.id)===tt&&P.push(new yr(ae,G.id,'duplicate layer id "'+G.id+'", previously used at line '+gt.id.__line__))}if("ref"in G){["type","source","source-layer","filter","layout"].forEach(function(dr){dr in G&&P.push(new yr(ae,G[dr],'"'+dr+'" is prohibited for ref layers'))});var Dt;de.layers.forEach(function(dr){gn(dr.id)===Be&&(Dt=dr)}),Dt?Dt.ref?P.push(new yr(ae,G.ref,"ref cannot reference another ref layer")):Me=gn(Dt.type):P.push(new yr(ae,G.ref,'ref layer "'+Be+'" not found'))}else if(Me!=="background")if(!G.source)P.push(new yr(ae,G,'missing required property "source"'));else{var er=de.sources&&de.sources[G.source],Yt=er&&gn(er.type);er?Yt==="vector"&&Me==="raster"?P.push(new yr(ae,G.source,'layer "'+G.id+'" requires a raster source')):Yt==="raster"&&Me!=="raster"?P.push(new yr(ae,G.source,'layer "'+G.id+'" requires a vector source')):Yt==="vector"&&!G["source-layer"]?P.push(new yr(ae,G,'layer "'+G.id+'" must specify a "source-layer"')):Yt==="raster-dem"&&Me!=="hillshade"?P.push(new yr(ae,G.source,"raster-dem source can only be used with layer type 'hillshade'.")):Me==="line"&&G.paint&&G.paint["line-gradient"]&&(Yt!=="geojson"||!er.lineMetrics)&&P.push(new yr(ae,G,'layer "'+G.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):P.push(new yr(ae,G.source,'source "'+G.source+'" not found'))}return P=P.concat(ul({key:ae,value:G,valueSpec:be.layer,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xi({key:ae+".type",value:G.type,valueSpec:be.layer.type,style:k.style,styleSpec:k.styleSpec,object:G,objectKey:"type"})},filter:pr,layout:function(Or){return ul({layer:G,key:Or.key,value:Or.value,style:Or.style,styleSpec:Or.styleSpec,objectElementValidators:{"*":function(en){return Yr(mn({layerType:Me},en))}}})},paint:function(Or){return ul({layer:G,key:Or.key,value:Or.value,style:Or.style,styleSpec:Or.styleSpec,objectElementValidators:{"*":function(en){return Pr(mn({layerType:Me},en))}}})}}})),P}function An(k){var P=k.value,G=k.key,ae=ri(P);return ae!=="string"?[new yr(G,P,"string expected, "+ae+" found")]:[]}var zn={promoteId:xa};function Xn(k){var P=k.value,G=k.key,ae=k.styleSpec,de=k.style;if(!P.type)return[new yr(G,P,'"type" is required')];var be=gn(P.type),Me;switch(be){case"vector":case"raster":case"raster-dem":return Me=ul({key:G,value:P,valueSpec:ae["source_"+be.replace("-","_")],style:k.style,styleSpec:ae,objectElementValidators:zn}),Me;case"geojson":if(Me=ul({key:G,value:P,valueSpec:ae.source_geojson,style:de,styleSpec:ae,objectElementValidators:zn}),P.cluster)for(var Be in P.clusterProperties){var tt=P.clusterProperties[Be],ct=tt[0],gt=tt[1],Dt=typeof ct=="string"?[ct,["accumulated"],["get",Be]]:ct;Me.push.apply(Me,fs({key:G+"."+Be+".map",value:gt,expressionContext:"cluster-map"})),Me.push.apply(Me,fs({key:G+"."+Be+".reduce",value:Dt,expressionContext:"cluster-reduce"}))}return Me;case"video":return ul({key:G,value:P,valueSpec:ae.source_video,style:de,styleSpec:ae});case"image":return ul({key:G,value:P,valueSpec:ae.source_image,style:de,styleSpec:ae});case"canvas":return[new yr(G,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ks({key:G+".type",value:P.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:de,styleSpec:ae})}}function xa(k){var P=k.key,G=k.value;if(ri(G)==="string")return An({key:P,value:G});var ae=[];for(var de in G)ae.push.apply(ae,An({key:P+"."+de,value:G[de]}));return ae}function Ta(k){var P=k.value,G=k.styleSpec,ae=G.light,de=k.style,be=[],Me=ri(P);if(P===void 0)return be;if(Me!=="object")return be=be.concat([new yr("light",P,"object expected, "+Me+" found")]),be;for(var Be in P){var tt=Be.match(/^(.*)-transition$/);tt&&ae[tt[1]]&&ae[tt[1]].transition?be=be.concat(xi({key:Be,value:P[Be],valueSpec:G.transition,style:de,styleSpec:G})):ae[Be]?be=be.concat(xi({key:Be,value:P[Be],valueSpec:ae[Be],style:de,styleSpec:G})):be=be.concat([new yr(Be,P[Be],'unknown property "'+Be+'"')])}return be}function qa(k){return An(k).length===0?[]:fs(k)}function Ka(k){return An(k).length===0?[]:fs(k)}var oi={"*":function(){return[]},array:Hc,boolean:gc,number:pc,color:lh,constants:fn,enum:Ks,filter:pr,function:dc,layer:tn,object:ul,source:Xn,light:Ta,string:An,formatted:qa,resolvedImage:Ka};function xi(k){var P=k.value,G=k.valueSpec,ae=k.styleSpec;if(G.expression&&ga(gn(P)))return dc(k);if(G.expression&&Vo(Dn(P)))return fs(k);if(G.type&&oi[G.type])return oi[G.type](k);var de=ul(mn({},k,{valueSpec:G.type?ae[G.type]:G}));return de}function So(k){var P=k.value,G=k.key,ae=An(k);return ae.length||(P.indexOf("{fontstack}")===-1&&ae.push(new yr(G,P,'"glyphs" url must include a "{fontstack}" token')),P.indexOf("{range}")===-1&&ae.push(new yr(G,P,'"glyphs" url must include a "{range}" token'))),ae}function li(k,P){P===void 0&&(P=Nt);var G=[];return G=G.concat(xi({key:"",value:k,valueSpec:P.$root,styleSpec:P,style:k,objectElementValidators:{glyphs:So,"*":function(){return[]}}})),k.constants&&(G=G.concat(fn({key:"constants",value:k.constants,style:k,styleSpec:P}))),ao(G)}li.source=Lo(Xn),li.light=Lo(Ta),li.layer=Lo(tn),li.filter=Lo(pr),li.paintProperty=Lo(Pr),li.layoutProperty=Lo(Yr);function ao(k){return[].concat(k).sort(function(P,G){return P.line-G.line})}function Lo(k){return function(){for(var P=[],G=arguments.length;G--;)P[G]=arguments[G];return ao(k.apply(this,P))}}var jo=li,Pi=jo.light,zi=jo.paintProperty,Us=jo.layoutProperty;function Oo(k,P){var G=!1;if(P&&P.length)for(var ae=0,de=P;ae<de.length;ae+=1){var be=de[ae];k.fire(new zr(new Error(be.message))),G=!0}return G}var ts=he,ys=3;function he(k,P,G){var ae=this.cells=[];if(k instanceof ArrayBuffer){this.arrayBuffer=k;var de=new Int32Array(this.arrayBuffer);k=de[0],P=de[1],G=de[2],this.d=P+2*G;for(var be=0;be<this.d*this.d;be++){var Me=de[ys+be],Be=de[ys+be+1];ae.push(Me===Be?null:de.subarray(Me,Be))}var tt=de[ys+ae.length],ct=de[ys+ae.length+1];this.keys=de.subarray(tt,ct),this.bboxes=de.subarray(ct),this.insert=this._insertReadonly}else{this.d=P+2*G;for(var gt=0;gt<this.d*this.d;gt++)ae.push([]);this.keys=[],this.bboxes=[]}this.n=P,this.extent=k,this.padding=G,this.scale=P/k,this.uid=0;var Dt=G/P*k;this.min=-Dt,this.max=k+Dt}he.prototype.insert=function(k,P,G,ae,de){this._forEachCell(P,G,ae,de,this._insertCell,this.uid++),this.keys.push(k),this.bboxes.push(P),this.bboxes.push(G),this.bboxes.push(ae),this.bboxes.push(de)},he.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},he.prototype._insertCell=function(k,P,G,ae,de,be){this.cells[de].push(be)},he.prototype.query=function(k,P,G,ae,de){var be=this.min,Me=this.max;if(k<=be&&P<=be&&Me<=G&&Me<=ae&&!de)return Array.prototype.slice.call(this.keys);var Be=[],tt={};return this._forEachCell(k,P,G,ae,this._queryCell,Be,tt,de),Be},he.prototype._queryCell=function(k,P,G,ae,de,be,Me,Be){var tt=this.cells[de];if(tt!==null)for(var ct=this.keys,gt=this.bboxes,Dt=0;Dt<tt.length;Dt++){var er=tt[Dt];if(Me[er]===void 0){var Yt=er*4;(Be?Be(gt[Yt+0],gt[Yt+1],gt[Yt+2],gt[Yt+3]):k<=gt[Yt+2]&&P<=gt[Yt+3]&&G>=gt[Yt+0]&&ae>=gt[Yt+1])?(Me[er]=!0,be.push(ct[er])):Me[er]=!1}}},he.prototype._forEachCell=function(k,P,G,ae,de,be,Me,Be){for(var tt=this._convertToCellCoord(k),ct=this._convertToCellCoord(P),gt=this._convertToCellCoord(G),Dt=this._convertToCellCoord(ae),er=tt;er<=gt;er++)for(var Yt=ct;Yt<=Dt;Yt++){var dr=this.d*Yt+er;if(!(Be&&!Be(this._convertFromCellCoord(er),this._convertFromCellCoord(Yt),this._convertFromCellCoord(er+1),this._convertFromCellCoord(Yt+1)))&&de.call(this,k,P,G,ae,dr,be,Me,Be))return}},he.prototype._convertFromCellCoord=function(k){return(k-this.padding)/this.scale},he.prototype._convertToCellCoord=function(k){return Math.max(0,Math.min(this.d-1,Math.floor(k*this.scale)+this.padding))},he.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var k=this.cells,P=ys+this.cells.length+1+1,G=0,ae=0;ae<this.cells.length;ae++)G+=this.cells[ae].length;var de=new Int32Array(P+G+this.keys.length+this.bboxes.length);de[0]=this.extent,de[1]=this.n,de[2]=this.padding;for(var be=P,Me=0;Me<k.length;Me++){var Be=k[Me];de[ys+Me]=be,de.set(Be,be),be+=Be.length}return de[ys+k.length]=be,de.set(this.keys,be),be+=this.keys.length,de[ys+k.length+1]=be,de.set(this.bboxes,be),be+=this.bboxes.length,de.buffer};var we=self.ImageData,Ie=self.ImageBitmap,He={};function Ue(k,P,G){G===void 0&&(G={}),Object.defineProperty(P,"_classRegistryKey",{value:k,writeable:!1}),He[k]={klass:P,omit:G.omit||[],shallow:G.shallow||[]}}Ue("Object",Object),ts.serialize=function(P,G){var ae=P.toArrayBuffer();return G&&G.push(ae),{buffer:ae}},ts.deserialize=function(P){return new ts(P.buffer)},Ue("Grid",ts),Ue("Color",Ai),Ue("Error",Error),Ue("ResolvedImage",Xo),Ue("StylePropertyFunction",Hu),Ue("StyleExpression",Ns,{omit:["_evaluator"]}),Ue("ZoomDependentExpression",Bs),Ue("ZoomConstantExpression",uf),Ue("CompoundExpression",Zo,{omit:["_evaluate"]});for(var Ze in Qn)Qn[Ze]._classRegistryKey||Ue("Expression_"+Ze,Qn[Ze]);function xt(k){return k&&typeof ArrayBuffer!="undefined"&&(k instanceof ArrayBuffer||k.constructor&&k.constructor.name==="ArrayBuffer")}function vt(k){return Ie&&k instanceof Ie}function Lt(k,P){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp)return k;if(xt(k)||vt(k))return P&&P.push(k),k;if(ArrayBuffer.isView(k)){var G=k;return P&&P.push(G.buffer),G}if(k instanceof we)return P&&P.push(k.data.buffer),k;if(Array.isArray(k)){for(var ae=[],de=0,be=k;de<be.length;de+=1){var Me=be[de];ae.push(Lt(Me,P))}return ae}if(typeof k=="object"){var Be=k.constructor,tt=Be._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var ct=Be.serialize?Be.serialize(k,P):{};if(!Be.serialize){for(var gt in k)if(!!k.hasOwnProperty(gt)&&!(He[tt].omit.indexOf(gt)>=0)){var Dt=k[gt];ct[gt]=He[tt].shallow.indexOf(gt)>=0?Dt:Lt(Dt,P)}k instanceof Error&&(ct.message=k.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return tt!=="Object"&&(ct.$name=tt),ct}throw new Error("can't serialize object of type "+typeof k)}function jt(k){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp||xt(k)||vt(k)||ArrayBuffer.isView(k)||k instanceof we)return k;if(Array.isArray(k))return k.map(jt);if(typeof k=="object"){var P=k.$name||"Object",G=He[P],ae=G.klass;if(!ae)throw new Error("can't deserialize unregistered class "+P);if(ae.deserialize)return ae.deserialize(k);for(var de=Object.create(ae.prototype),be=0,Me=Object.keys(k);be<Me.length;be+=1){var Be=Me[be];if(Be!=="$name"){var tt=k[Be];de[Be]=He[P].shallow.indexOf(Be)>=0?tt:jt(tt)}}return de}throw new Error("can't deserialize object of type "+typeof k)}var Kt=function(){this.first=!0};Kt.prototype.update=function(P,G){var ae=Math.floor(P);return this.first?(this.first=!1,this.lastIntegerZoom=ae,this.lastIntegerZoomTime=0,this.lastZoom=P,this.lastFloorZoom=ae,!0):(this.lastFloorZoom>ae?(this.lastIntegerZoom=ae+1,this.lastIntegerZoomTime=G):this.lastFloorZoom<ae&&(this.lastIntegerZoom=ae,this.lastIntegerZoomTime=G),P!==this.lastZoom?(this.lastZoom=P,this.lastFloorZoom=ae,!0):!1)};var qt={"Latin-1 Supplement":function(k){return k>=128&&k<=255},Arabic:function(k){return k>=1536&&k<=1791},"Arabic Supplement":function(k){return k>=1872&&k<=1919},"Arabic Extended-A":function(k){return k>=2208&&k<=2303},"Hangul Jamo":function(k){return k>=4352&&k<=4607},"Unified Canadian Aboriginal Syllabics":function(k){return k>=5120&&k<=5759},Khmer:function(k){return k>=6016&&k<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(k){return k>=6320&&k<=6399},"General Punctuation":function(k){return k>=8192&&k<=8303},"Letterlike Symbols":function(k){return k>=8448&&k<=8527},"Number Forms":function(k){return k>=8528&&k<=8591},"Miscellaneous Technical":function(k){return k>=8960&&k<=9215},"Control Pictures":function(k){return k>=9216&&k<=9279},"Optical Character Recognition":function(k){return k>=9280&&k<=9311},"Enclosed Alphanumerics":function(k){return k>=9312&&k<=9471},"Geometric Shapes":function(k){return k>=9632&&k<=9727},"Miscellaneous Symbols":function(k){return k>=9728&&k<=9983},"Miscellaneous Symbols and Arrows":function(k){return k>=11008&&k<=11263},"CJK Radicals Supplement":function(k){return k>=11904&&k<=12031},"Kangxi Radicals":function(k){return k>=12032&&k<=12255},"Ideographic Description Characters":function(k){return k>=12272&&k<=12287},"CJK Symbols and Punctuation":function(k){return k>=12288&&k<=12351},Hiragana:function(k){return k>=12352&&k<=12447},Katakana:function(k){return k>=12448&&k<=12543},Bopomofo:function(k){return k>=12544&&k<=12591},"Hangul Compatibility Jamo":function(k){return k>=12592&&k<=12687},Kanbun:function(k){return k>=12688&&k<=12703},"Bopomofo Extended":function(k){return k>=12704&&k<=12735},"CJK Strokes":function(k){return k>=12736&&k<=12783},"Katakana Phonetic Extensions":function(k){return k>=12784&&k<=12799},"Enclosed CJK Letters and Months":function(k){return k>=12800&&k<=13055},"CJK Compatibility":function(k){return k>=13056&&k<=13311},"CJK Unified Ideographs Extension A":function(k){return k>=13312&&k<=19903},"Yijing Hexagram Symbols":function(k){return k>=19904&&k<=19967},"CJK Unified Ideographs":function(k){return k>=19968&&k<=40959},"Yi Syllables":function(k){return k>=40960&&k<=42127},"Yi Radicals":function(k){return k>=42128&&k<=42191},"Hangul Jamo Extended-A":function(k){return k>=43360&&k<=43391},"Hangul Syllables":function(k){return k>=44032&&k<=55215},"Hangul Jamo Extended-B":function(k){return k>=55216&&k<=55295},"Private Use Area":function(k){return k>=57344&&k<=63743},"CJK Compatibility Ideographs":function(k){return k>=63744&&k<=64255},"Arabic Presentation Forms-A":function(k){return k>=64336&&k<=65023},"Vertical Forms":function(k){return k>=65040&&k<=65055},"CJK Compatibility Forms":function(k){return k>=65072&&k<=65103},"Small Form Variants":function(k){return k>=65104&&k<=65135},"Arabic Presentation Forms-B":function(k){return k>=65136&&k<=65279},"Halfwidth and Fullwidth Forms":function(k){return k>=65280&&k<=65519}};function Sr(k){for(var P=0,G=k;P<G.length;P+=1){var ae=G[P];if(Vr(ae.charCodeAt(0)))return!0}return!1}function qr(k){for(var P=0,G=k;P<G.length;P+=1){var ae=G[P];if(!cn(ae.charCodeAt(0)))return!1}return!0}function cn(k){return!(qt.Arabic(k)||qt["Arabic Supplement"](k)||qt["Arabic Extended-A"](k)||qt["Arabic Presentation Forms-A"](k)||qt["Arabic Presentation Forms-B"](k))}function kr(k){return k<11904?!1:!!(qt["Bopomofo Extended"](k)||qt.Bopomofo(k)||qt["CJK Compatibility Forms"](k)||qt["CJK Compatibility Ideographs"](k)||qt["CJK Compatibility"](k)||qt["CJK Radicals Supplement"](k)||qt["CJK Strokes"](k)||qt["CJK Symbols and Punctuation"](k)||qt["CJK Unified Ideographs Extension A"](k)||qt["CJK Unified Ideographs"](k)||qt["Enclosed CJK Letters and Months"](k)||qt["Halfwidth and Fullwidth Forms"](k)||qt.Hiragana(k)||qt["Ideographic Description Characters"](k)||qt["Kangxi Radicals"](k)||qt["Katakana Phonetic Extensions"](k)||qt.Katakana(k)||qt["Vertical Forms"](k)||qt["Yi Radicals"](k)||qt["Yi Syllables"](k))}function Vr(k){return k===746||k===747?!0:k<4352?!1:!!(qt["Bopomofo Extended"](k)||qt.Bopomofo(k)||qt["CJK Compatibility Forms"](k)&&!(k>=65097&&k<=65103)||qt["CJK Compatibility Ideographs"](k)||qt["CJK Compatibility"](k)||qt["CJK Radicals Supplement"](k)||qt["CJK Strokes"](k)||qt["CJK Symbols and Punctuation"](k)&&!(k>=12296&&k<=12305)&&!(k>=12308&&k<=12319)&&k!==12336||qt["CJK Unified Ideographs Extension A"](k)||qt["CJK Unified Ideographs"](k)||qt["Enclosed CJK Letters and Months"](k)||qt["Hangul Compatibility Jamo"](k)||qt["Hangul Jamo Extended-A"](k)||qt["Hangul Jamo Extended-B"](k)||qt["Hangul Jamo"](k)||qt["Hangul Syllables"](k)||qt.Hiragana(k)||qt["Ideographic Description Characters"](k)||qt.Kanbun(k)||qt["Kangxi Radicals"](k)||qt["Katakana Phonetic Extensions"](k)||qt.Katakana(k)&&k!==12540||qt["Halfwidth and Fullwidth Forms"](k)&&k!==65288&&k!==65289&&k!==65293&&!(k>=65306&&k<=65310)&&k!==65339&&k!==65341&&k!==65343&&!(k>=65371&&k<=65503)&&k!==65507&&!(k>=65512&&k<=65519)||qt["Small Form Variants"](k)&&!(k>=65112&&k<=65118)&&!(k>=65123&&k<=65126)||qt["Unified Canadian Aboriginal Syllabics"](k)||qt["Unified Canadian Aboriginal Syllabics Extended"](k)||qt["Vertical Forms"](k)||qt["Yijing Hexagram Symbols"](k)||qt["Yi Syllables"](k)||qt["Yi Radicals"](k))}function Xr(k){return!!(qt["Latin-1 Supplement"](k)&&(k===167||k===169||k===174||k===177||k===188||k===189||k===190||k===215||k===247)||qt["General Punctuation"](k)&&(k===8214||k===8224||k===8225||k===8240||k===8241||k===8251||k===8252||k===8258||k===8263||k===8264||k===8265||k===8273)||qt["Letterlike Symbols"](k)||qt["Number Forms"](k)||qt["Miscellaneous Technical"](k)&&(k>=8960&&k<=8967||k>=8972&&k<=8991||k>=8996&&k<=9e3||k===9003||k>=9085&&k<=9114||k>=9150&&k<=9165||k===9167||k>=9169&&k<=9179||k>=9186&&k<=9215)||qt["Control Pictures"](k)&&k!==9251||qt["Optical Character Recognition"](k)||qt["Enclosed Alphanumerics"](k)||qt["Geometric Shapes"](k)||qt["Miscellaneous Symbols"](k)&&!(k>=9754&&k<=9759)||qt["Miscellaneous Symbols and Arrows"](k)&&(k>=11026&&k<=11055||k>=11088&&k<=11097||k>=11192&&k<=11243)||qt["CJK Symbols and Punctuation"](k)||qt.Katakana(k)||qt["Private Use Area"](k)||qt["CJK Compatibility Forms"](k)||qt["Small Form Variants"](k)||qt["Halfwidth and Fullwidth Forms"](k)||k===8734||k===8756||k===8757||k>=9984&&k<=10087||k>=10102&&k<=10131||k===65532||k===65533)}function on(k){return!(Vr(k)||Xr(k))}function ln(k){return qt.Arabic(k)||qt["Arabic Supplement"](k)||qt["Arabic Extended-A"](k)||qt["Arabic Presentation Forms-A"](k)||qt["Arabic Presentation Forms-B"](k)}function Zr(k){return k>=1424&&k<=2303||qt["Arabic Presentation Forms-A"](k)||qt["Arabic Presentation Forms-B"](k)}function $n(k,P){return!(!P&&Zr(k)||k>=2304&&k<=3583||k>=3840&&k<=4255||qt.Khmer(k))}function aa(k){for(var P=0,G=k;P<G.length;P+=1){var ae=G[P];if(Zr(ae.charCodeAt(0)))return!0}return!1}function Sa(k,P){for(var G=0,ae=k;G<ae.length;G+=1){var de=ae[G];if(!$n(de.charCodeAt(0),P))return!1}return!0}var ua={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},La=null,ha=ua.unavailable,Wa=null,Fa=function(k){k&&typeof k=="string"&&k.indexOf("NetworkError")>-1&&(ha=ua.error),La&&La(k)};function ai(){ki.fire(new un("pluginStateChange",{pluginStatus:ha,pluginURL:Wa}))}var ki=new $r,Po=function(){return ha},Xi=function(k){return k({pluginStatus:ha,pluginURL:Wa}),ki.on("pluginStateChange",k),k},va=function(k,P,G){if(G===void 0&&(G=!1),ha===ua.deferred||ha===ua.loading||ha===ua.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Wa=J.resolveURL(k),ha=ua.deferred,La=P,ai(),G||ci()},ci=function(){if(ha!==ua.deferred||!Wa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ha=ua.loading,ai(),Wa&&Ge({url:Wa},function(k){k?Fa(k):(ha=ua.loaded,ai())})},Ja={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ha===ua.loaded||Ja.applyArabicShaping!=null},isLoading:function(){return ha===ua.loading},setState:function(P){ha=P.pluginStatus,Wa=P.pluginURL},isParsed:function(){return Ja.applyArabicShaping!=null&&Ja.processBidirectionalText!=null&&Ja.processStyledBidirectionalText!=null},getPluginURL:function(){return Wa}},Ni=function(){!Ja.isLoading()&&!Ja.isLoaded()&&Po()==="deferred"&&ci()},pi=function(P,G){this.zoom=P,G?(this.now=G.now,this.fadeDuration=G.fadeDuration,this.zoomHistory=G.zoomHistory,this.transition=G.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Kt,this.transition={})};pi.prototype.isSupportedScript=function(P){return Sa(P,Ja.isLoaded())},pi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},pi.prototype.getCrossfadeParameters=function(){var P=this.zoom,G=P-Math.floor(P),ae=this.crossFadingFactor();return P>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:G+(1-G)*ae}:{fromScale:.5,toScale:1,t:1-(1-ae)*G}};var Mo=function(P,G){this.property=P,this.value=G,this.expression=ev(G===void 0?P.specification.default:G,P.specification)};Mo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Mo.prototype.possiblyEvaluate=function(P,G,ae){return this.property.possiblyEvaluate(this,P,G,ae)};var po=function(P){this.property=P,this.value=new Mo(P,void 0)};po.prototype.transitioned=function(P,G){return new ms(this.property,this.value,G,S({},P.transition,this.transition),P.now)},po.prototype.untransitioned=function(){return new ms(this.property,this.value,null,{},0)};var zo=function(P){this._properties=P,this._values=Object.create(P.defaultTransitionablePropertyValues)};zo.prototype.getValue=function(P){return O(this._values[P].value.value)},zo.prototype.setValue=function(P,G){this._values.hasOwnProperty(P)||(this._values[P]=new po(this._values[P].property)),this._values[P].value=new Mo(this._values[P].property,G===null?void 0:O(G))},zo.prototype.getTransition=function(P){return O(this._values[P].transition)},zo.prototype.setTransition=function(P,G){this._values.hasOwnProperty(P)||(this._values[P]=new po(this._values[P].property)),this._values[P].transition=O(G)||void 0},zo.prototype.serialize=function(){for(var P={},G=0,ae=Object.keys(this._values);G<ae.length;G+=1){var de=ae[G],be=this.getValue(de);be!==void 0&&(P[de]=be);var Me=this.getTransition(de);Me!==void 0&&(P[de+"-transition"]=Me)}return P},zo.prototype.transitioned=function(P,G){for(var ae=new cs(this._properties),de=0,be=Object.keys(this._values);de<be.length;de+=1){var Me=be[de];ae._values[Me]=this._values[Me].transitioned(P,G._values[Me])}return ae},zo.prototype.untransitioned=function(){for(var P=new cs(this._properties),G=0,ae=Object.keys(this._values);G<ae.length;G+=1){var de=ae[G];P._values[de]=this._values[de].untransitioned()}return P};var ms=function(P,G,ae,de,be){this.property=P,this.value=G,this.begin=be+de.delay||0,this.end=this.begin+de.duration||0,P.specification.transition&&(de.delay||de.duration)&&(this.prior=ae)};ms.prototype.possiblyEvaluate=function(P,G,ae){var de=P.now||0,be=this.value.possiblyEvaluate(P,G,ae),Me=this.prior;if(Me){if(de>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(de<this.begin)return Me.possiblyEvaluate(P,G,ae);var Be=(de-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(P,G,ae),be,m(Be))}else return be};var cs=function(P){this._properties=P,this._values=Object.create(P.defaultTransitioningPropertyValues)};cs.prototype.possiblyEvaluate=function(P,G,ae){for(var de=new qi(this._properties),be=0,Me=Object.keys(this._values);be<Me.length;be+=1){var Be=Me[be];de._values[Be]=this._values[Be].possiblyEvaluate(P,G,ae)}return de},cs.prototype.hasTransition=function(){for(var P=0,G=Object.keys(this._values);P<G.length;P+=1){var ae=G[P];if(this._values[ae].prior)return!0}return!1};var xs=function(P){this._properties=P,this._values=Object.create(P.defaultPropertyValues)};xs.prototype.getValue=function(P){return O(this._values[P].value)},xs.prototype.setValue=function(P,G){this._values[P]=new Mo(this._values[P].property,G===null?void 0:O(G))},xs.prototype.serialize=function(){for(var P={},G=0,ae=Object.keys(this._values);G<ae.length;G+=1){var de=ae[G],be=this.getValue(de);be!==void 0&&(P[de]=be)}return P},xs.prototype.possiblyEvaluate=function(P,G,ae){for(var de=new qi(this._properties),be=0,Me=Object.keys(this._values);be<Me.length;be+=1){var Be=Me[be];de._values[Be]=this._values[Be].possiblyEvaluate(P,G,ae)}return de};var io=function(P,G,ae){this.property=P,this.value=G,this.parameters=ae};io.prototype.isConstant=function(){return this.value.kind==="constant"},io.prototype.constantOr=function(P){return this.value.kind==="constant"?this.value.value:P},io.prototype.evaluate=function(P,G,ae,de){return this.property.evaluate(this.value,this.parameters,P,G,ae,de)};var qi=function(P){this._properties=P,this._values=Object.create(P.defaultPossiblyEvaluatedValues)};qi.prototype.get=function(P){return this._values[P]};var Ua=function(P){this.specification=P};Ua.prototype.possiblyEvaluate=function(P,G){return P.expression.evaluate(G)},Ua.prototype.interpolate=function(P,G,ae){var de=Ul[this.specification.type];return de?de(P,G,ae):P};var Qa=function(P,G){this.specification=P,this.overrides=G};Qa.prototype.possiblyEvaluate=function(P,G,ae,de){return P.expression.kind==="constant"||P.expression.kind==="camera"?new io(this,{kind:"constant",value:P.expression.evaluate(G,null,{},ae,de)},G):new io(this,P.expression,G)},Qa.prototype.interpolate=function(P,G,ae){if(P.value.kind!=="constant"||G.value.kind!=="constant")return P;if(P.value.value===void 0||G.value.value===void 0)return new io(this,{kind:"constant",value:void 0},P.parameters);var de=Ul[this.specification.type];return de?new io(this,{kind:"constant",value:de(P.value.value,G.value.value,ae)},P.parameters):P},Qa.prototype.evaluate=function(P,G,ae,de,be,Me){return P.kind==="constant"?P.value:P.evaluate(G,ae,de,be,Me)};var Ho=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.possiblyEvaluate=function(ae,de,be,Me){if(ae.value===void 0)return new io(this,{kind:"constant",value:void 0},de);if(ae.expression.kind==="constant"){var Be=ae.expression.evaluate(de,null,{},be,Me),tt=ae.property.specification.type==="resolvedImage",ct=tt&&typeof Be!="string"?Be.name:Be,gt=this._calculate(ct,ct,ct,de);return new io(this,{kind:"constant",value:gt},de)}else if(ae.expression.kind==="camera"){var Dt=this._calculate(ae.expression.evaluate({zoom:de.zoom-1}),ae.expression.evaluate({zoom:de.zoom}),ae.expression.evaluate({zoom:de.zoom+1}),de);return new io(this,{kind:"constant",value:Dt},de)}else return new io(this,ae.expression,de)},P.prototype.evaluate=function(ae,de,be,Me,Be,tt){if(ae.kind==="source"){var ct=ae.evaluate(de,be,Me,Be,tt);return this._calculate(ct,ct,ct,de)}else return ae.kind==="composite"?this._calculate(ae.evaluate({zoom:Math.floor(de.zoom)-1},be,Me),ae.evaluate({zoom:Math.floor(de.zoom)},be,Me),ae.evaluate({zoom:Math.floor(de.zoom)+1},be,Me),de):ae.value},P.prototype._calculate=function(ae,de,be,Me){var Be=Me.zoom;return Be>Me.zoomHistory.lastIntegerZoom?{from:ae,to:de}:{from:be,to:de}},P.prototype.interpolate=function(ae){return ae},P}(Qa),bo=function(P){this.specification=P};bo.prototype.possiblyEvaluate=function(P,G,ae,de){if(P.value!==void 0)if(P.expression.kind==="constant"){var be=P.expression.evaluate(G,null,{},ae,de);return this._calculate(be,be,be,G)}else return this._calculate(P.expression.evaluate(new pi(Math.floor(G.zoom-1),G)),P.expression.evaluate(new pi(Math.floor(G.zoom),G)),P.expression.evaluate(new pi(Math.floor(G.zoom+1),G)),G)},bo.prototype._calculate=function(P,G,ae,de){var be=de.zoom;return be>de.zoomHistory.lastIntegerZoom?{from:P,to:G}:{from:ae,to:G}},bo.prototype.interpolate=function(P){return P};var rs=function(P){this.specification=P};rs.prototype.possiblyEvaluate=function(P,G,ae,de){return!!P.expression.evaluate(G,null,{},ae,de)},rs.prototype.interpolate=function(){return!1};var lo=function(P){this.properties=P,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var G in P){var ae=P[G];ae.specification.overridable&&this.overridableProperties.push(G);var de=this.defaultPropertyValues[G]=new Mo(ae,void 0),be=this.defaultTransitionablePropertyValues[G]=new po(ae);this.defaultTransitioningPropertyValues[G]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[G]=de.possiblyEvaluate({})}};Ue("DataDrivenProperty",Qa),Ue("DataConstantProperty",Ua),Ue("CrossFadedDataDrivenProperty",Ho),Ue("CrossFadedProperty",bo),Ue("ColorRampProperty",rs);var bs="-transition",Js=function(k){function P(G,ae){if(k.call(this),this.id=G.id,this.type=G.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},G.type!=="custom"&&(G=G,this.metadata=G.metadata,this.minzoom=G.minzoom,this.maxzoom=G.maxzoom,G.type!=="background"&&(this.source=G.source,this.sourceLayer=G["source-layer"],this.filter=G.filter),ae.layout&&(this._unevaluatedLayout=new xs(ae.layout)),ae.paint)){this._transitionablePaint=new zo(ae.paint);for(var de in G.paint)this.setPaintProperty(de,G.paint[de],{validate:!1});for(var be in G.layout)this.setLayoutProperty(be,G.layout[be],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qi(ae.paint)}}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},P.prototype.getLayoutProperty=function(ae){return ae==="visibility"?this.visibility:this._unevaluatedLayout.getValue(ae)},P.prototype.setLayoutProperty=function(ae,de,be){if(be===void 0&&(be={}),de!=null){var Me="layers."+this.id+".layout."+ae;if(this._validate(Us,Me,ae,de,be))return}if(ae==="visibility"){this.visibility=de;return}this._unevaluatedLayout.setValue(ae,de)},P.prototype.getPaintProperty=function(ae){return E(ae,bs)?this._transitionablePaint.getTransition(ae.slice(0,-bs.length)):this._transitionablePaint.getValue(ae)},P.prototype.setPaintProperty=function(ae,de,be){if(be===void 0&&(be={}),de!=null){var Me="layers."+this.id+".paint."+ae;if(this._validate(zi,Me,ae,de,be))return!1}if(E(ae,bs))return this._transitionablePaint.setTransition(ae.slice(0,-bs.length),de||void 0),!1;var Be=this._transitionablePaint._values[ae],tt=Be.property.specification["property-type"]==="cross-faded-data-driven",ct=Be.value.isDataDriven(),gt=Be.value;this._transitionablePaint.setValue(ae,de),this._handleSpecialPaintPropertyUpdate(ae);var Dt=this._transitionablePaint._values[ae].value,er=Dt.isDataDriven();return er||ct||tt||this._handleOverridablePaintPropertyUpdate(ae,gt,Dt)},P.prototype._handleSpecialPaintPropertyUpdate=function(ae){},P.prototype._handleOverridablePaintPropertyUpdate=function(ae,de,be){return!1},P.prototype.isHidden=function(ae){return this.minzoom&&ae<this.minzoom||this.maxzoom&&ae>=this.maxzoom?!0:this.visibility==="none"},P.prototype.updateTransitions=function(ae){this._transitioningPaint=this._transitionablePaint.transitioned(ae,this._transitioningPaint)},P.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},P.prototype.recalculate=function(ae,de){ae.getCrossfadeParameters&&(this._crossfadeParameters=ae.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(ae,void 0,de)),this.paint=this._transitioningPaint.possiblyEvaluate(ae,void 0,de)},P.prototype.serialize=function(){var ae={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(ae.layout=ae.layout||{},ae.layout.visibility=this.visibility),z(ae,function(de,be){return de!==void 0&&!(be==="layout"&&!Object.keys(de).length)&&!(be==="paint"&&!Object.keys(de).length)})},P.prototype._validate=function(ae,de,be,Me,Be){return Be===void 0&&(Be={}),Be&&Be.validate===!1?!1:Oo(this,ae.call(jo,{key:de,layerType:this.type,objectKey:be,value:Me,styleSpec:Nt,style:{glyphs:!0,sprite:!0}}))},P.prototype.is3D=function(){return!1},P.prototype.isTileClipped=function(){return!1},P.prototype.hasOffscreenPass=function(){return!1},P.prototype.resize=function(){},P.prototype.isStateDependent=function(){for(var ae in this.paint._values){var de=this.paint.get(ae);if(!(!(de instanceof io)||!vi(de.property.specification))&&(de.value.kind==="source"||de.value.kind==="composite")&&de.value.isStateDependent)return!0}return!1},P}($r),Gu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},uo=function(P,G){this._structArray=P,this._pos1=G*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},uh=128,wu=5,Qi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Qi.serialize=function(P,G){return P._trim(),G&&(P.isTransferred=!0,G.push(P.arrayBuffer)),{length:P.length,arrayBuffer:P.arrayBuffer}},Qi.deserialize=function(P){var G=Object.create(this.prototype);return G.arrayBuffer=P.arrayBuffer,G.length=P.length,G.capacity=P.arrayBuffer.byteLength/G.bytesPerElement,G._refreshViews(),G},Qi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Qi.prototype.clear=function(){this.length=0},Qi.prototype.resize=function(P){this.reserve(P),this.length=P},Qi.prototype.reserve=function(P){if(P>this.capacity){this.capacity=Math.max(P,Math.floor(this.capacity*wu),uh),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var G=this.uint8;this._refreshViews(),G&&this.uint8.set(G)}},Qi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function ns(k,P){P===void 0&&(P=1);var G=0,ae=0,de=k.map(function(Me){var Be=n1(Me.type),tt=G=Jv(G,Math.max(P,Be)),ct=Me.components||1;return ae=Math.max(ae,Be),G+=Be*ct,{name:Me.name,type:Me.type,components:ct,offset:tt}}),be=Jv(G,Math.max(ae,P));return{members:de,size:be,alignment:P}}function n1(k){return Gu[k].BYTES_PER_ELEMENT}function Jv(k,P){return Math.ceil(k/P)*P}var tv=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de){var be=this.length;return this.resize(be+1),this.emplace(be,ae,de)},P.prototype.emplace=function(ae,de,be){var Me=ae*2;return this.int16[Me+0]=de,this.int16[Me+1]=be,ae},P}(Qi);tv.prototype.bytesPerElement=4,Ue("StructArrayLayout2i4",tv);var mc=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me){var Be=this.length;return this.resize(Be+1),this.emplace(Be,ae,de,be,Me)},P.prototype.emplace=function(ae,de,be,Me,Be){var tt=ae*4;return this.int16[tt+0]=de,this.int16[tt+1]=be,this.int16[tt+2]=Me,this.int16[tt+3]=Be,ae},P}(Qi);mc.prototype.bytesPerElement=8,Ue("StructArrayLayout4i8",mc);var fh=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,ae,de,be,Me,Be,tt)},P.prototype.emplace=function(ae,de,be,Me,Be,tt,ct){var gt=ae*6;return this.int16[gt+0]=de,this.int16[gt+1]=be,this.int16[gt+2]=Me,this.int16[gt+3]=Be,this.int16[gt+4]=tt,this.int16[gt+5]=ct,ae},P}(Qi);fh.prototype.bytesPerElement=12,Ue("StructArrayLayout2i4i12",fh);var Qv=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,ae,de,be,Me,Be,tt)},P.prototype.emplace=function(ae,de,be,Me,Be,tt,ct){var gt=ae*4,Dt=ae*8;return this.int16[gt+0]=de,this.int16[gt+1]=be,this.uint8[Dt+4]=Me,this.uint8[Dt+5]=Be,this.uint8[Dt+6]=tt,this.uint8[Dt+7]=ct,ae},P}(Qi);Qv.prototype.bytesPerElement=8,Ue("StructArrayLayout2i4ub8",Qv);var Al=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er){var Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,ae,de,be,Me,Be,tt,ct,gt,Dt,er)},P.prototype.emplace=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt){var dr=ae*9,Or=ae*18;return this.uint16[dr+0]=de,this.uint16[dr+1]=be,this.uint16[dr+2]=Me,this.uint16[dr+3]=Be,this.uint16[dr+4]=tt,this.uint16[dr+5]=ct,this.uint16[dr+6]=gt,this.uint16[dr+7]=Dt,this.uint8[Or+16]=er,this.uint8[Or+17]=Yt,ae},P}(Qi);Al.prototype.bytesPerElement=18,Ue("StructArrayLayout8ui2ub18",Al);var xc=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr){var Or=this.length;return this.resize(Or+1),this.emplace(Or,ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr)},P.prototype.emplace=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or){var sn=ae*12;return this.int16[sn+0]=de,this.int16[sn+1]=be,this.int16[sn+2]=Me,this.int16[sn+3]=Be,this.uint16[sn+4]=tt,this.uint16[sn+5]=ct,this.uint16[sn+6]=gt,this.uint16[sn+7]=Dt,this.int16[sn+8]=er,this.int16[sn+9]=Yt,this.int16[sn+10]=dr,this.int16[sn+11]=Or,ae},P}(Qi);xc.prototype.bytesPerElement=24,Ue("StructArrayLayout4i4ui4i24",xc);var Td=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,ae,de,be)},P.prototype.emplace=function(ae,de,be,Me){var Be=ae*3;return this.float32[Be+0]=de,this.float32[Be+1]=be,this.float32[Be+2]=Me,ae},P}(Qi);Td.prototype.bytesPerElement=12,Ue("StructArrayLayout3f12",Td);var Ad=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae){var de=this.length;return this.resize(de+1),this.emplace(de,ae)},P.prototype.emplace=function(ae,de){var be=ae*1;return this.uint32[be+0]=de,ae},P}(Qi);Ad.prototype.bytesPerElement=4,Ue("StructArrayLayout1ul4",Ad);var rv=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be,tt,ct,gt,Dt){var er=this.length;return this.resize(er+1),this.emplace(er,ae,de,be,Me,Be,tt,ct,gt,Dt)},P.prototype.emplace=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er){var Yt=ae*10,dr=ae*5;return this.int16[Yt+0]=de,this.int16[Yt+1]=be,this.int16[Yt+2]=Me,this.int16[Yt+3]=Be,this.int16[Yt+4]=tt,this.int16[Yt+5]=ct,this.uint32[dr+3]=gt,this.uint16[Yt+8]=Dt,this.uint16[Yt+9]=er,ae},P}(Qi);rv.prototype.bytesPerElement=20,Ue("StructArrayLayout6i1ul2ui20",rv);var qv=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,ae,de,be,Me,Be,tt)},P.prototype.emplace=function(ae,de,be,Me,Be,tt,ct){var gt=ae*6;return this.int16[gt+0]=de,this.int16[gt+1]=be,this.int16[gt+2]=Me,this.int16[gt+3]=Be,this.int16[gt+4]=tt,this.int16[gt+5]=ct,ae},P}(Qi);qv.prototype.bytesPerElement=12,Ue("StructArrayLayout2i2i2i12",qv);var jf=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be){var tt=this.length;return this.resize(tt+1),this.emplace(tt,ae,de,be,Me,Be)},P.prototype.emplace=function(ae,de,be,Me,Be,tt){var ct=ae*4,gt=ae*8;return this.float32[ct+0]=de,this.float32[ct+1]=be,this.float32[ct+2]=Me,this.int16[gt+6]=Be,this.int16[gt+7]=tt,ae},P}(Qi);jf.prototype.bytesPerElement=16,Ue("StructArrayLayout2f1f2i16",jf);var $l=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me){var Be=this.length;return this.resize(Be+1),this.emplace(Be,ae,de,be,Me)},P.prototype.emplace=function(ae,de,be,Me,Be){var tt=ae*12,ct=ae*3;return this.uint8[tt+0]=de,this.uint8[tt+1]=be,this.float32[ct+1]=Me,this.float32[ct+2]=Be,ae},P}(Qi);$l.prototype.bytesPerElement=12,Ue("StructArrayLayout2ub2f12",$l);var $f=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,ae,de,be)},P.prototype.emplace=function(ae,de,be,Me){var Be=ae*3;return this.uint16[Be+0]=de,this.uint16[Be+1]=be,this.uint16[Be+2]=Me,ae},P}(Qi);$f.prototype.bytesPerElement=6,Ue("StructArrayLayout3ui6",$f);var nv=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or,sn,en,In,wn){var Pn=this.length;return this.resize(Pn+1),this.emplace(Pn,ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or,sn,en,In,wn)},P.prototype.emplace=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or,sn,en,In,wn,Pn){var Bn=ae*24,Yn=ae*12,fa=ae*48;return this.int16[Bn+0]=de,this.int16[Bn+1]=be,this.uint16[Bn+2]=Me,this.uint16[Bn+3]=Be,this.uint32[Yn+2]=tt,this.uint32[Yn+3]=ct,this.uint32[Yn+4]=gt,this.uint16[Bn+10]=Dt,this.uint16[Bn+11]=er,this.uint16[Bn+12]=Yt,this.float32[Yn+7]=dr,this.float32[Yn+8]=Or,this.uint8[fa+36]=sn,this.uint8[fa+37]=en,this.uint8[fa+38]=In,this.uint32[Yn+10]=wn,this.int16[Bn+22]=Pn,ae},P}(Qi);nv.prototype.bytesPerElement=48,Ue("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",nv);var ep=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or,sn,en,In,wn,Pn,Bn,Yn,fa,ia,Ba,Ma,Ca,si,Da,Na){var gi=this.length;return this.resize(gi+1),this.emplace(gi,ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or,sn,en,In,wn,Pn,Bn,Yn,fa,ia,Ba,Ma,Ca,si,Da,Na)},P.prototype.emplace=function(ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or,sn,en,In,wn,Pn,Bn,Yn,fa,ia,Ba,Ma,Ca,si,Da,Na,gi){var ii=ae*34,Bi=ae*17;return this.int16[ii+0]=de,this.int16[ii+1]=be,this.int16[ii+2]=Me,this.int16[ii+3]=Be,this.int16[ii+4]=tt,this.int16[ii+5]=ct,this.int16[ii+6]=gt,this.int16[ii+7]=Dt,this.uint16[ii+8]=er,this.uint16[ii+9]=Yt,this.uint16[ii+10]=dr,this.uint16[ii+11]=Or,this.uint16[ii+12]=sn,this.uint16[ii+13]=en,this.uint16[ii+14]=In,this.uint16[ii+15]=wn,this.uint16[ii+16]=Pn,this.uint16[ii+17]=Bn,this.uint16[ii+18]=Yn,this.uint16[ii+19]=fa,this.uint16[ii+20]=ia,this.uint16[ii+21]=Ba,this.uint16[ii+22]=Ma,this.uint32[Bi+12]=Ca,this.float32[Bi+13]=si,this.float32[Bi+14]=Da,this.float32[Bi+15]=Na,this.float32[Bi+16]=gi,ae},P}(Qi);ep.prototype.bytesPerElement=68,Ue("StructArrayLayout8i15ui1ul4f68",ep);var ch=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae){var de=this.length;return this.resize(de+1),this.emplace(de,ae)},P.prototype.emplace=function(ae,de){var be=ae*1;return this.float32[be+0]=de,ae},P}(Qi);ch.prototype.bytesPerElement=4,Ue("StructArrayLayout1f4",ch);var Sd=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,ae,de,be)},P.prototype.emplace=function(ae,de,be,Me){var Be=ae*3;return this.int16[Be+0]=de,this.int16[Be+1]=be,this.int16[Be+2]=Me,ae},P}(Qi);Sd.prototype.bytesPerElement=6,Ue("StructArrayLayout3i6",Sd);var bc=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,ae,de,be)},P.prototype.emplace=function(ae,de,be,Me){var Be=ae*2,tt=ae*4;return this.uint32[Be+0]=de,this.uint16[tt+2]=be,this.uint16[tt+3]=Me,ae},P}(Qi);bc.prototype.bytesPerElement=8,Ue("StructArrayLayout1ul2ui8",bc);var av=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de){var be=this.length;return this.resize(be+1),this.emplace(be,ae,de)},P.prototype.emplace=function(ae,de,be){var Me=ae*2;return this.uint16[Me+0]=de,this.uint16[Me+1]=be,ae},P}(Qi);av.prototype.bytesPerElement=4,Ue("StructArrayLayout2ui4",av);var hh=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae){var de=this.length;return this.resize(de+1),this.emplace(de,ae)},P.prototype.emplace=function(ae,de){var be=ae*1;return this.uint16[be+0]=de,ae},P}(Qi);hh.prototype.bytesPerElement=2,Ue("StructArrayLayout1ui2",hh);var _c=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de){var be=this.length;return this.resize(be+1),this.emplace(be,ae,de)},P.prototype.emplace=function(ae,de,be){var Me=ae*2;return this.float32[Me+0]=de,this.float32[Me+1]=be,ae},P}(Qi);_c.prototype.bytesPerElement=8,Ue("StructArrayLayout2f8",_c);var Md=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function(ae,de,be,Me){var Be=this.length;return this.resize(Be+1),this.emplace(Be,ae,de,be,Me)},P.prototype.emplace=function(ae,de,be,Me,Be){var tt=ae*4;return this.float32[tt+0]=de,this.float32[tt+1]=be,this.float32[tt+2]=Me,this.float32[tt+3]=Be,ae},P}(Qi);Md.prototype.bytesPerElement=16,Ue("StructArrayLayout4f16",Md);var hg=function(k){function P(){k.apply(this,arguments)}k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P;var G={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return G.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},G.x1.get=function(){return this._structArray.int16[this._pos2+2]},G.y1.get=function(){return this._structArray.int16[this._pos2+3]},G.x2.get=function(){return this._structArray.int16[this._pos2+4]},G.y2.get=function(){return this._structArray.int16[this._pos2+5]},G.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},G.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},G.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},G.anchorPoint.get=function(){return new f(this.anchorPointX,this.anchorPointY)},Object.defineProperties(P.prototype,G),P}(uo);hg.prototype.size=20;var wc=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.get=function(ae){return new hg(this,ae)},P}(rv);Ue("CollisionBoxArray",wc);var Ed=function(k){function P(){k.apply(this,arguments)}k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P;var G={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return G.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},G.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},G.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},G.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},G.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},G.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},G.segment.get=function(){return this._structArray.uint16[this._pos2+10]},G.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},G.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},G.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},G.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},G.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},G.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},G.placedOrientation.set=function(ae){this._structArray.uint8[this._pos1+37]=ae},G.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},G.hidden.set=function(ae){this._structArray.uint8[this._pos1+38]=ae},G.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},G.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+10]=ae},G.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(P.prototype,G),P}(uo);Ed.prototype.size=48;var vh=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.get=function(ae){return new Ed(this,ae)},P}(nv);Ue("PlacedSymbolArray",vh);var vg=function(k){function P(){k.apply(this,arguments)}k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P;var G={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return G.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},G.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},G.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},G.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},G.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},G.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},G.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},G.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},G.key.get=function(){return this._structArray.uint16[this._pos2+8]},G.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},G.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},G.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},G.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},G.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},G.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},G.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},G.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},G.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},G.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},G.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},G.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},G.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},G.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},G.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},G.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+12]=ae},G.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},G.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},G.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},G.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(P.prototype,G),P}(uo);vg.prototype.size=68;var pg=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.get=function(ae){return new vg(this,ae)},P}(ep);Ue("SymbolInstanceArray",pg);var ju=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.getoffsetX=function(ae){return this.float32[ae*1+0]},P}(ch);Ue("GlyphOffsetArray",ju);var dg=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.getx=function(ae){return this.int16[ae*3+0]},P.prototype.gety=function(ae){return this.int16[ae*3+1]},P.prototype.gettileUnitDistanceFromAnchor=function(ae){return this.int16[ae*3+2]},P}(Sd);Ue("SymbolLineVertexArray",dg);var gg=function(k){function P(){k.apply(this,arguments)}k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P;var G={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return G.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},G.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},G.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(P.prototype,G),P}(uo);gg.prototype.size=8;var kd=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.get=function(ae){return new gg(this,ae)},P}(bc);Ue("FeatureIndexArray",kd);var yg=ns([{name:"a_pos",components:2,type:"Int16"}],4),ve=yg.members,Y=function(P){P===void 0&&(P=[]),this.segments=P};Y.prototype.prepareSegment=function(P,G,ae,de){var be=this.segments[this.segments.length-1];return P>Y.MAX_VERTEX_ARRAY_LENGTH&&H("Max vertices per segment is "+Y.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+P),(!be||be.vertexLength+P>Y.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==de)&&(be={vertexOffset:G.length,primitiveOffset:ae.length,vertexLength:0,primitiveLength:0},de!==void 0&&(be.sortKey=de),this.segments.push(be)),be},Y.prototype.get=function(){return this.segments},Y.prototype.destroy=function(){for(var P=0,G=this.segments;P<G.length;P+=1){var ae=G[P];for(var de in ae.vaos)ae.vaos[de].destroy()}},Y.simpleSegment=function(P,G,ae,de){return new Y([{vertexOffset:P,primitiveOffset:G,vertexLength:ae,primitiveLength:de,vaos:{},sortKey:0}])},Y.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ue("SegmentVector",Y);function ge(k,P){return k=g(Math.floor(k),0,255),P=g(Math.floor(P),0,255),256*k+P}var te=ns([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ye=a(function(k){function P(G,ae){var de,be,Me,Be,tt,ct,gt,Dt;for(de=G.length&3,be=G.length-de,Me=ae,tt=3432918353,ct=461845907,Dt=0;Dt<be;)gt=G.charCodeAt(Dt)&255|(G.charCodeAt(++Dt)&255)<<8|(G.charCodeAt(++Dt)&255)<<16|(G.charCodeAt(++Dt)&255)<<24,++Dt,gt=(gt&65535)*tt+(((gt>>>16)*tt&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ct+(((gt>>>16)*ct&65535)<<16)&4294967295,Me^=gt,Me=Me<<13|Me>>>19,Be=(Me&65535)*5+(((Me>>>16)*5&65535)<<16)&4294967295,Me=(Be&65535)+27492+(((Be>>>16)+58964&65535)<<16);switch(gt=0,de){case 3:gt^=(G.charCodeAt(Dt+2)&255)<<16;case 2:gt^=(G.charCodeAt(Dt+1)&255)<<8;case 1:gt^=G.charCodeAt(Dt)&255,gt=(gt&65535)*tt+(((gt>>>16)*tt&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ct+(((gt>>>16)*ct&65535)<<16)&4294967295,Me^=gt}return Me^=G.length,Me^=Me>>>16,Me=(Me&65535)*2246822507+(((Me>>>16)*2246822507&65535)<<16)&4294967295,Me^=Me>>>13,Me=(Me&65535)*3266489909+(((Me>>>16)*3266489909&65535)<<16)&4294967295,Me^=Me>>>16,Me>>>0}k.exports=P}),Le=a(function(k){function P(G,ae){for(var de=G.length,be=ae^de,Me=0,Be;de>=4;)Be=G.charCodeAt(Me)&255|(G.charCodeAt(++Me)&255)<<8|(G.charCodeAt(++Me)&255)<<16|(G.charCodeAt(++Me)&255)<<24,Be=(Be&65535)*1540483477+(((Be>>>16)*1540483477&65535)<<16),Be^=Be>>>24,Be=(Be&65535)*1540483477+(((Be>>>16)*1540483477&65535)<<16),be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)^Be,de-=4,++Me;switch(de){case 3:be^=(G.charCodeAt(Me+2)&255)<<16;case 2:be^=(G.charCodeAt(Me+1)&255)<<8;case 1:be^=G.charCodeAt(Me)&255,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)}return be^=be>>>13,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16),be^=be>>>15,be>>>0}k.exports=P}),Fe=ye,Xe=ye,ft=Le;Fe.murmur3=Xe,Fe.murmur2=ft;var Mt=function(){this.ids=[],this.positions=[],this.indexed=!1};Mt.prototype.add=function(P,G,ae,de){this.ids.push(sr(P)),this.positions.push(G,ae,de)},Mt.prototype.getPositions=function(P){for(var G=sr(P),ae=0,de=this.ids.length-1;ae<de;){var be=ae+de>>1;this.ids[be]>=G?de=be:ae=be+1}for(var Me=[];this.ids[ae]===G;){var Be=this.positions[3*ae],tt=this.positions[3*ae+1],ct=this.positions[3*ae+2];Me.push({index:Be,start:tt,end:ct}),ae++}return Me},Mt.serialize=function(P,G){var ae=new Float64Array(P.ids),de=new Uint32Array(P.positions);return vr(ae,de,0,ae.length-1),G&&G.push(ae.buffer,de.buffer),{ids:ae,positions:de}},Mt.deserialize=function(P){var G=new Mt;return G.ids=P.ids,G.positions=P.positions,G.indexed=!0,G};var Wt=Math.pow(2,53)-1;function sr(k){var P=+k;return!isNaN(P)&&P<=Wt?P:Fe(String(k))}function vr(k,P,G,ae){for(;G<ae;){for(var de=k[G+ae>>1],be=G-1,Me=ae+1;;){do be++;while(k[be]<de);do Me--;while(k[Me]>de);if(be>=Me)break;Er(k,be,Me),Er(P,3*be,3*Me),Er(P,3*be+1,3*Me+1),Er(P,3*be+2,3*Me+2)}Me-G<ae-Me?(vr(k,P,G,Me),G=Me+1):(vr(k,P,Me+1,ae),ae=Me)}}function Er(k,P,G){var ae=k[P];k[P]=k[G],k[G]=ae}Ue("FeaturePositionMap",Mt);var jr=function(P,G){this.gl=P.gl,this.location=G},Wr=function(k){function P(G,ae){k.call(this,G,ae),this.current=0}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.set=function(ae){this.current!==ae&&(this.current=ae,this.gl.uniform1i(this.location,ae))},P}(jr),Hr=function(k){function P(G,ae){k.call(this,G,ae),this.current=0}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.set=function(ae){this.current!==ae&&(this.current=ae,this.gl.uniform1f(this.location,ae))},P}(jr),Jr=function(k){function P(G,ae){k.call(this,G,ae),this.current=[0,0]}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.set=function(ae){(ae[0]!==this.current[0]||ae[1]!==this.current[1])&&(this.current=ae,this.gl.uniform2f(this.location,ae[0],ae[1]))},P}(jr),pn=function(k){function P(G,ae){k.call(this,G,ae),this.current=[0,0,0]}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.set=function(ae){(ae[0]!==this.current[0]||ae[1]!==this.current[1]||ae[2]!==this.current[2])&&(this.current=ae,this.gl.uniform3f(this.location,ae[0],ae[1],ae[2]))},P}(jr),Rn=function(k){function P(G,ae){k.call(this,G,ae),this.current=[0,0,0,0]}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.set=function(ae){(ae[0]!==this.current[0]||ae[1]!==this.current[1]||ae[2]!==this.current[2]||ae[3]!==this.current[3])&&(this.current=ae,this.gl.uniform4f(this.location,ae[0],ae[1],ae[2],ae[3]))},P}(jr),Vn=function(k){function P(G,ae){k.call(this,G,ae),this.current=Ai.transparent}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.set=function(ae){(ae.r!==this.current.r||ae.g!==this.current.g||ae.b!==this.current.b||ae.a!==this.current.a)&&(this.current=ae,this.gl.uniform4f(this.location,ae.r,ae.g,ae.b,ae.a))},P}(jr),Jn=new Float32Array(16),ta=function(k){function P(G,ae){k.call(this,G,ae),this.current=Jn}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.set=function(ae){if(ae[12]!==this.current[12]||ae[0]!==this.current[0]){this.current=ae,this.gl.uniformMatrix4fv(this.location,!1,ae);return}for(var de=1;de<16;de++)if(ae[de]!==this.current[de]){this.current=ae,this.gl.uniformMatrix4fv(this.location,!1,ae);break}},P}(jr);function qn(k){return[ge(255*k.r,255*k.g),ge(255*k.b,255*k.a)]}var pa=function(P,G,ae){this.value=P,this.uniformNames=G.map(function(de){return"u_"+de}),this.type=ae};pa.prototype.setUniform=function(P,G,ae){P.set(ae.constantOr(this.value))},pa.prototype.getBinding=function(P,G,ae){return this.type==="color"?new Vn(P,G):new Hr(P,G)};var Aa=function(P,G){this.uniformNames=G.map(function(ae){return"u_"+ae}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Aa.prototype.setConstantPatternPositions=function(P,G){this.pixelRatioFrom=G.pixelRatio,this.pixelRatioTo=P.pixelRatio,this.patternFrom=G.tlbr,this.patternTo=P.tlbr},Aa.prototype.setUniform=function(P,G,ae,de){var be=de==="u_pattern_to"?this.patternTo:de==="u_pattern_from"?this.patternFrom:de==="u_pixel_ratio_to"?this.pixelRatioTo:de==="u_pixel_ratio_from"?this.pixelRatioFrom:null;be&&P.set(be)},Aa.prototype.getBinding=function(P,G,ae){return ae.substr(0,9)==="u_pattern"?new Rn(P,G):new Hr(P,G)};var _a=function(P,G,ae,de){this.expression=P,this.type=ae,this.maxValue=0,this.paintVertexAttributes=G.map(function(be){return{name:"a_"+be,type:"Float32",components:ae==="color"?2:1,offset:0}}),this.paintVertexArray=new de};_a.prototype.populatePaintArray=function(P,G,ae,de,be){var Me=this.paintVertexArray.length,Be=this.expression.evaluate(new pi(0),G,{},de,[],be);this.paintVertexArray.resize(P),this._setPaintValue(Me,P,Be)},_a.prototype.updatePaintArray=function(P,G,ae,de){var be=this.expression.evaluate({zoom:0},ae,de);this._setPaintValue(P,G,be)},_a.prototype._setPaintValue=function(P,G,ae){if(this.type==="color")for(var de=qn(ae),be=P;be<G;be++)this.paintVertexArray.emplace(be,de[0],de[1]);else{for(var Me=P;Me<G;Me++)this.paintVertexArray.emplace(Me,ae);this.maxValue=Math.max(this.maxValue,Math.abs(ae))}},_a.prototype.upload=function(P){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=P.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},_a.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ea=function(P,G,ae,de,be,Me){this.expression=P,this.uniformNames=G.map(function(Be){return"u_"+Be+"_t"}),this.type=ae,this.useIntegerZoom=de,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=G.map(function(Be){return{name:"a_"+Be,type:"Float32",components:ae==="color"?4:2,offset:0}}),this.paintVertexArray=new Me};Ea.prototype.populatePaintArray=function(P,G,ae,de,be){var Me=this.expression.evaluate(new pi(this.zoom),G,{},de,[],be),Be=this.expression.evaluate(new pi(this.zoom+1),G,{},de,[],be),tt=this.paintVertexArray.length;this.paintVertexArray.resize(P),this._setPaintValue(tt,P,Me,Be)},Ea.prototype.updatePaintArray=function(P,G,ae,de){var be=this.expression.evaluate({zoom:this.zoom},ae,de),Me=this.expression.evaluate({zoom:this.zoom+1},ae,de);this._setPaintValue(P,G,be,Me)},Ea.prototype._setPaintValue=function(P,G,ae,de){if(this.type==="color")for(var be=qn(ae),Me=qn(de),Be=P;Be<G;Be++)this.paintVertexArray.emplace(Be,be[0],be[1],Me[0],Me[1]);else{for(var tt=P;tt<G;tt++)this.paintVertexArray.emplace(tt,ae,de);this.maxValue=Math.max(this.maxValue,Math.abs(ae),Math.abs(de))}},Ea.prototype.upload=function(P){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=P.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ea.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ea.prototype.setUniform=function(P,G){var ae=this.useIntegerZoom?Math.floor(G.zoom):G.zoom,de=g(this.expression.interpolationFactor(ae,this.zoom,this.zoom+1),0,1);P.set(de)},Ea.prototype.getBinding=function(P,G,ae){return new Hr(P,G)};var Ra=function(P,G,ae,de,be,Me){this.expression=P,this.type=G,this.useIntegerZoom=ae,this.zoom=de,this.layerId=Me,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};Ra.prototype.populatePaintArray=function(P,G,ae){var de=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(P),this.zoomOutPaintVertexArray.resize(P),this._setPaintValues(de,P,G.patterns&&G.patterns[this.layerId],ae)},Ra.prototype.updatePaintArray=function(P,G,ae,de,be){this._setPaintValues(P,G,ae.patterns&&ae.patterns[this.layerId],be)},Ra.prototype._setPaintValues=function(P,G,ae,de){if(!(!de||!ae)){var be=ae.min,Me=ae.mid,Be=ae.max,tt=de[be],ct=de[Me],gt=de[Be];if(!(!tt||!ct||!gt))for(var Dt=P;Dt<G;Dt++)this.zoomInPaintVertexArray.emplace(Dt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],ct.pixelRatio,tt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Dt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],ct.pixelRatio,gt.pixelRatio)}},Ra.prototype.upload=function(P){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=P.createVertexBuffer(this.zoomInPaintVertexArray,te.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=P.createVertexBuffer(this.zoomOutPaintVertexArray,te.members,this.expression.isStateDependent))},Ra.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ya=function(P,G,ae,de){this.binders={},this.layoutAttributes=de,this._buffers=[];var be=[];for(var Me in P.paint._values)if(!!ae(Me)){var Be=P.paint.get(Me);if(!(!(Be instanceof io)||!vi(Be.property.specification))){var tt=Hi(Me,P.type),ct=Be.value,gt=Be.property.specification.type,Dt=Be.property.useIntegerZoom,er=Be.property.specification["property-type"],Yt=er==="cross-faded"||er==="cross-faded-data-driven";if(ct.kind==="constant")this.binders[Me]=Yt?new Aa(ct.value,tt):new pa(ct.value,tt,gt),be.push("/u_"+Me);else if(ct.kind==="source"||Yt){var dr=Si(Me,gt,"source");this.binders[Me]=Yt?new Ra(ct,gt,Dt,G,dr,P.id):new _a(ct,tt,gt,dr),be.push("/a_"+Me)}else{var Or=Si(Me,gt,"composite");this.binders[Me]=new Ea(ct,tt,gt,Dt,G,Or),be.push("/z_"+Me)}}}this.cacheKey=be.sort().join("")};Ya.prototype.getMaxValue=function(P){var G=this.binders[P];return G instanceof _a||G instanceof Ea?G.maxValue:0},Ya.prototype.populatePaintArrays=function(P,G,ae,de,be){for(var Me in this.binders){var Be=this.binders[Me];(Be instanceof _a||Be instanceof Ea||Be instanceof Ra)&&Be.populatePaintArray(P,G,ae,de,be)}},Ya.prototype.setConstantPatternPositions=function(P,G){for(var ae in this.binders){var de=this.binders[ae];de instanceof Aa&&de.setConstantPatternPositions(P,G)}},Ya.prototype.updatePaintArrays=function(P,G,ae,de,be){var Me=!1;for(var Be in P)for(var tt=G.getPositions(Be),ct=0,gt=tt;ct<gt.length;ct+=1){var Dt=gt[ct],er=ae.feature(Dt.index);for(var Yt in this.binders){var dr=this.binders[Yt];if((dr instanceof _a||dr instanceof Ea||dr instanceof Ra)&&dr.expression.isStateDependent===!0){var Or=de.paint.get(Yt);dr.expression=Or.value,dr.updatePaintArray(Dt.start,Dt.end,er,P[Be],be),Me=!0}}}return Me},Ya.prototype.defines=function(){var P=[];for(var G in this.binders){var ae=this.binders[G];(ae instanceof pa||ae instanceof Aa)&&P.push.apply(P,ae.uniformNames.map(function(de){return"#define HAS_UNIFORM_"+de}))}return P},Ya.prototype.getPaintVertexBuffers=function(){return this._buffers},Ya.prototype.getUniforms=function(P,G){var ae=[];for(var de in this.binders){var be=this.binders[de];if(be instanceof pa||be instanceof Aa||be instanceof Ea)for(var Me=0,Be=be.uniformNames;Me<Be.length;Me+=1){var tt=Be[Me];if(G[tt]){var ct=be.getBinding(P,G[tt],tt);ae.push({name:tt,property:de,binding:ct})}}}return ae},Ya.prototype.setUniforms=function(P,G,ae,de){for(var be=0,Me=G;be<Me.length;be+=1){var Be=Me[be],tt=Be.name,ct=Be.property,gt=Be.binding;this.binders[ct].setUniform(gt,de,ae.get(ct),tt)}},Ya.prototype.updatePaintBuffers=function(P){this._buffers=[];for(var G in this.binders){var ae=this.binders[G];if(P&&ae instanceof Ra){var de=P.fromScale===2?ae.zoomInPaintVertexBuffer:ae.zoomOutPaintVertexBuffer;de&&this._buffers.push(de)}else(ae instanceof _a||ae instanceof Ea)&&ae.paintVertexBuffer&&this._buffers.push(ae.paintVertexBuffer)}},Ya.prototype.upload=function(P){for(var G in this.binders){var ae=this.binders[G];(ae instanceof _a||ae instanceof Ea||ae instanceof Ra)&&ae.upload(P)}this.updatePaintBuffers()},Ya.prototype.destroy=function(){for(var P in this.binders){var G=this.binders[P];(G instanceof _a||G instanceof Ea||G instanceof Ra)&&G.destroy()}};var ui=function(P,G,ae,de){de===void 0&&(de=function(){return!0}),this.programConfigurations={};for(var be=0,Me=G;be<Me.length;be+=1){var Be=Me[be];this.programConfigurations[Be.id]=new Ya(Be,ae,de,P)}this.needsUpload=!1,this._featureMap=new Mt,this._bufferOffset=0};ui.prototype.populatePaintArrays=function(P,G,ae,de,be,Me){for(var Be in this.programConfigurations)this.programConfigurations[Be].populatePaintArrays(P,G,de,be,Me);G.id!==void 0&&this._featureMap.add(G.id,ae,this._bufferOffset,P),this._bufferOffset=P,this.needsUpload=!0},ui.prototype.updatePaintArrays=function(P,G,ae,de){for(var be=0,Me=ae;be<Me.length;be+=1){var Be=Me[be];this.needsUpload=this.programConfigurations[Be.id].updatePaintArrays(P,this._featureMap,G,Be,de)||this.needsUpload}},ui.prototype.get=function(P){return this.programConfigurations[P]},ui.prototype.upload=function(P){if(!!this.needsUpload){for(var G in this.programConfigurations)this.programConfigurations[G].upload(P);this.needsUpload=!1}},ui.prototype.destroy=function(){for(var P in this.programConfigurations)this.programConfigurations[P].destroy()};function Hi(k,P){var G={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return G[k]||[k.replace(P+"-","").replace(/-/g,"_")]}function di(k){var P={"line-pattern":{source:Al,composite:Al},"fill-pattern":{source:Al,composite:Al},"fill-extrusion-pattern":{source:Al,composite:Al}};return P[k]}function Si(k,P,G){var ae={color:{source:_c,composite:Md},number:{source:ch,composite:_c}},de=di(k);return de&&de[G]||ae[P][G]}Ue("ConstantBinder",pa),Ue("CrossFadedConstantBinder",Aa),Ue("SourceExpressionBinder",_a),Ue("CrossFadedCompositeBinder",Ra),Ue("CompositeExpressionBinder",Ea),Ue("ProgramConfiguration",Ya,{omit:["_buffers"]}),Ue("ProgramConfigurationSet",ui);var $a=8192;function Gi(k){return{min:-1*Math.pow(2,k-1),max:Math.pow(2,k-1)-1}}var Zi=Gi(15);function eo(k){for(var P=$a/k.extent,G=k.loadGeometry(),ae=0;ae<G.length;ae++)for(var de=G[ae],be=0;be<de.length;be++){var Me=de[be];Me.x=Math.round(Me.x*P),Me.y=Math.round(Me.y*P),(Me.x<Zi.min||Me.x>Zi.max||Me.y<Zi.min||Me.y>Zi.max)&&(H("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Me.x=g(Me.x,Zi.min,Zi.max),Me.y=g(Me.y,Zi.min,Zi.max))}return G}function Ii(k,P,G,ae,de){k.emplaceBack(P*2+(ae+1)/2,G*2+(de+1)/2)}var fo=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(G){return G.id}),this.index=P.index,this.hasPattern=!1,this.layoutVertexArray=new tv,this.indexArray=new $f,this.segments=new Y,this.programConfigurations=new ui(ve,P.layers,P.zoom),this.stateDependentLayerIds=this.layers.filter(function(G){return G.isStateDependent()}).map(function(G){return G.id})};fo.prototype.populate=function(P,G,ae){var de=this.layers[0],be=[],Me=null;de.type==="circle"&&(Me=de.layout.get("circle-sort-key"));for(var Be=0,tt=P;Be<tt.length;Be+=1){var ct=tt[Be],gt=ct.feature,Dt=ct.id,er=ct.index,Yt=ct.sourceLayerIndex,dr=this.layers[0]._featureFilter.needGeometry,Or={type:gt.type,id:Dt,properties:gt.properties,geometry:dr?eo(gt):[]};if(!!this.layers[0]._featureFilter.filter(new pi(this.zoom),Or,ae)){dr||(Or.geometry=eo(gt));var sn=Me?Me.evaluate(Or,{},ae):void 0,en={id:Dt,properties:gt.properties,type:gt.type,sourceLayerIndex:Yt,index:er,geometry:Or.geometry,patterns:{},sortKey:sn};be.push(en)}}Me&&be.sort(function(Ma,Ca){return Ma.sortKey-Ca.sortKey});for(var In=0,wn=be;In<wn.length;In+=1){var Pn=wn[In],Bn=Pn,Yn=Bn.geometry,fa=Bn.index,ia=Bn.sourceLayerIndex,Ba=P[fa].feature;this.addFeature(Pn,Yn,fa,ae),G.featureIndex.insert(Ba,Yn,fa,ia,this.index)}},fo.prototype.update=function(P,G,ae){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,G,this.stateDependentLayers,ae)},fo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},fo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fo.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,ve),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},fo.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},fo.prototype.addFeature=function(P,G,ae,de){for(var be=0,Me=G;be<Me.length;be+=1)for(var Be=Me[be],tt=0,ct=Be;tt<ct.length;tt+=1){var gt=ct[tt],Dt=gt.x,er=gt.y;if(!(Dt<0||Dt>=$a||er<0||er>=$a)){var Yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,P.sortKey),dr=Yt.vertexLength;Ii(this.layoutVertexArray,Dt,er,-1,-1),Ii(this.layoutVertexArray,Dt,er,1,-1),Ii(this.layoutVertexArray,Dt,er,1,1),Ii(this.layoutVertexArray,Dt,er,-1,1),this.indexArray.emplaceBack(dr,dr+1,dr+2),this.indexArray.emplaceBack(dr,dr+3,dr+2),Yt.vertexLength+=4,Yt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,ae,{},de)},Ue("CircleBucket",fo,{omit:["layers"]});function hi(k,P){for(var G=0;G<k.length;G++)if(Sl(P,k[G]))return!0;for(var ae=0;ae<P.length;ae++)if(Sl(k,P[ae]))return!0;return!!Au(k,P)}function Di(k,P,G){return!!(Sl(k,P)||cf(P,k,G))}function $o(k,P){if(k.length===1)return hf(P,k[0]);for(var G=0;G<P.length;G++)for(var ae=P[G],de=0;de<ae.length;de++)if(Sl(k,ae[de]))return!0;for(var be=0;be<k.length;be++)if(hf(P,k[be]))return!0;for(var Me=0;Me<P.length;Me++)if(Au(k,P[Me]))return!0;return!1}function hs(k,P,G){for(var ae=0;ae<P.length;ae++){var de=P[ae];if(k.length>=3){for(var be=0;be<de.length;be++)if(Sl(k,de[be]))return!0}if(Tu(k,de,G))return!0}return!1}function Tu(k,P,G){if(k.length>1){if(Au(k,P))return!0;for(var ae=0;ae<P.length;ae++)if(cf(P[ae],k,G))return!0}for(var de=0;de<k.length;de++)if(cf(k[de],P,G))return!0;return!1}function Au(k,P){if(k.length===0||P.length===0)return!1;for(var G=0;G<k.length-1;G++)for(var ae=k[G],de=k[G+1],be=0;be<P.length-1;be++){var Me=P[be],Be=P[be+1];if(ff(ae,de,Me,Be))return!0}return!1}function ff(k,P,G,ae){return B(k,G,ae)!==B(P,G,ae)&&B(k,P,G)!==B(k,P,ae)}function cf(k,P,G){var ae=G*G;if(P.length===1)return k.distSqr(P[0])<ae;for(var de=1;de<P.length;de++){var be=P[de-1],Me=P[de];if(Wf(k,be,Me)<ae)return!0}return!1}function Wf(k,P,G){var ae=P.distSqr(G);if(ae===0)return k.distSqr(P);var de=((k.x-P.x)*(G.x-P.x)+(k.y-P.y)*(G.y-P.y))/ae;return de<0?k.distSqr(P):de>1?k.distSqr(G):k.distSqr(G.sub(P)._mult(de)._add(P))}function hf(k,P){for(var G=!1,ae,de,be,Me=0;Me<k.length;Me++){ae=k[Me];for(var Be=0,tt=ae.length-1;Be<ae.length;tt=Be++)de=ae[Be],be=ae[tt],de.y>P.y!=be.y>P.y&&P.x<(be.x-de.x)*(P.y-de.y)/(be.y-de.y)+de.x&&(G=!G)}return G}function Sl(k,P){for(var G=!1,ae=0,de=k.length-1;ae<k.length;de=ae++){var be=k[ae],Me=k[de];be.y>P.y!=Me.y>P.y&&P.x<(Me.x-be.x)*(P.y-be.y)/(Me.y-be.y)+be.x&&(G=!G)}return G}function Tc(k,P,G,ae,de){for(var be=0,Me=k;be<Me.length;be+=1){var Be=Me[be];if(P<=Be.x&&G<=Be.y&&ae>=Be.x&&de>=Be.y)return!0}var tt=[new f(P,G),new f(P,de),new f(ae,de),new f(ae,G)];if(k.length>2)for(var ct=0,gt=tt;ct<gt.length;ct+=1){var Dt=gt[ct];if(Sl(k,Dt))return!0}for(var er=0;er<k.length-1;er++){var Yt=k[er],dr=k[er+1];if(Qs(Yt,dr,tt))return!0}return!1}function Qs(k,P,G){var ae=G[0],de=G[2];if(k.x<ae.x&&P.x<ae.x||k.x>de.x&&P.x>de.x||k.y<ae.y&&P.y<ae.y||k.y>de.y&&P.y>de.y)return!1;var be=B(k,P,G[0]);return be!==B(k,P,G[1])||be!==B(k,P,G[2])||be!==B(k,P,G[3])}function au(k,P,G){var ae=P.paint.get(k).value;return ae.kind==="constant"?ae.value:G.programConfigurations.get(P.id).getMaxValue(k)}function vf(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])}function $u(k,P,G,ae,de){if(!P[0]&&!P[1])return k;var be=f.convert(P)._mult(de);G==="viewport"&&be._rotate(-ae);for(var Me=[],Be=0;Be<k.length;Be++){var tt=k[Be];Me.push(tt.sub(be))}return Me}var pf=new lo({"circle-sort-key":new Qa(Nt.layout_circle["circle-sort-key"])}),tp=new lo({"circle-radius":new Qa(Nt.paint_circle["circle-radius"]),"circle-color":new Qa(Nt.paint_circle["circle-color"]),"circle-blur":new Qa(Nt.paint_circle["circle-blur"]),"circle-opacity":new Qa(Nt.paint_circle["circle-opacity"]),"circle-translate":new Ua(Nt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ua(Nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ua(Nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ua(Nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qa(Nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qa(Nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qa(Nt.paint_circle["circle-stroke-opacity"])}),Gc={paint:tp,layout:pf},Vs=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var k=arguments,P=0,G=arguments.length;G--;)P+=k[G]*k[G];return Math.sqrt(P)});function iv(){var k=new Vs(4);return Vs!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k}function fl(k,P,G){var ae=P[0],de=P[1],be=P[2],Me=P[3],Be=Math.sin(G),tt=Math.cos(G);return k[0]=ae*tt+be*Be,k[1]=de*tt+Me*Be,k[2]=ae*-Be+be*tt,k[3]=de*-Be+Me*tt,k}function ov(){var k=new Vs(9);return Vs!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function rp(k,P){var G=Math.sin(P),ae=Math.cos(P);return k[0]=ae,k[1]=G,k[2]=0,k[3]=-G,k[4]=ae,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function np(){var k=new Vs(16);return Vs!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=0,k[12]=0,k[13]=0,k[14]=0),k[0]=1,k[5]=1,k[10]=1,k[15]=1,k}function mg(k){var P=new Vs(16);return P[0]=k[0],P[1]=k[1],P[2]=k[2],P[3]=k[3],P[4]=k[4],P[5]=k[5],P[6]=k[6],P[7]=k[7],P[8]=k[8],P[9]=k[9],P[10]=k[10],P[11]=k[11],P[12]=k[12],P[13]=k[13],P[14]=k[14],P[15]=k[15],P}function ap(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}function ph(k,P){var G=P[0],ae=P[1],de=P[2],be=P[3],Me=P[4],Be=P[5],tt=P[6],ct=P[7],gt=P[8],Dt=P[9],er=P[10],Yt=P[11],dr=P[12],Or=P[13],sn=P[14],en=P[15],In=G*Be-ae*Me,wn=G*tt-de*Me,Pn=G*ct-be*Me,Bn=ae*tt-de*Be,Yn=ae*ct-be*Be,fa=de*ct-be*tt,ia=gt*Or-Dt*dr,Ba=gt*sn-er*dr,Ma=gt*en-Yt*dr,Ca=Dt*sn-er*Or,si=Dt*en-Yt*Or,Da=er*en-Yt*sn,Na=In*Da-wn*si+Pn*Ca+Bn*Ma-Yn*Ba+fa*ia;return Na?(Na=1/Na,k[0]=(Be*Da-tt*si+ct*Ca)*Na,k[1]=(de*si-ae*Da-be*Ca)*Na,k[2]=(Or*fa-sn*Yn+en*Bn)*Na,k[3]=(er*Yn-Dt*fa-Yt*Bn)*Na,k[4]=(tt*Ma-Me*Da-ct*Ba)*Na,k[5]=(G*Da-de*Ma+be*Ba)*Na,k[6]=(sn*Pn-dr*fa-en*wn)*Na,k[7]=(gt*fa-er*Pn+Yt*wn)*Na,k[8]=(Me*si-Be*Ma+ct*ia)*Na,k[9]=(ae*Ma-G*si-be*ia)*Na,k[10]=(dr*Yn-Or*Pn+en*In)*Na,k[11]=(Dt*Pn-gt*Yn-Yt*In)*Na,k[12]=(Be*Ba-Me*Ca-tt*ia)*Na,k[13]=(G*Ca-ae*Ba+de*ia)*Na,k[14]=(Or*wn-dr*Bn-sn*In)*Na,k[15]=(gt*Bn-Dt*wn+er*In)*Na,k):null}function dh(k,P,G){var ae=P[0],de=P[1],be=P[2],Me=P[3],Be=P[4],tt=P[5],ct=P[6],gt=P[7],Dt=P[8],er=P[9],Yt=P[10],dr=P[11],Or=P[12],sn=P[13],en=P[14],In=P[15],wn=G[0],Pn=G[1],Bn=G[2],Yn=G[3];return k[0]=wn*ae+Pn*Be+Bn*Dt+Yn*Or,k[1]=wn*de+Pn*tt+Bn*er+Yn*sn,k[2]=wn*be+Pn*ct+Bn*Yt+Yn*en,k[3]=wn*Me+Pn*gt+Bn*dr+Yn*In,wn=G[4],Pn=G[5],Bn=G[6],Yn=G[7],k[4]=wn*ae+Pn*Be+Bn*Dt+Yn*Or,k[5]=wn*de+Pn*tt+Bn*er+Yn*sn,k[6]=wn*be+Pn*ct+Bn*Yt+Yn*en,k[7]=wn*Me+Pn*gt+Bn*dr+Yn*In,wn=G[8],Pn=G[9],Bn=G[10],Yn=G[11],k[8]=wn*ae+Pn*Be+Bn*Dt+Yn*Or,k[9]=wn*de+Pn*tt+Bn*er+Yn*sn,k[10]=wn*be+Pn*ct+Bn*Yt+Yn*en,k[11]=wn*Me+Pn*gt+Bn*dr+Yn*In,wn=G[12],Pn=G[13],Bn=G[14],Yn=G[15],k[12]=wn*ae+Pn*Be+Bn*Dt+Yn*Or,k[13]=wn*de+Pn*tt+Bn*er+Yn*sn,k[14]=wn*be+Pn*ct+Bn*Yt+Yn*en,k[15]=wn*Me+Pn*gt+Bn*dr+Yn*In,k}function Qo(k,P,G){var ae=G[0],de=G[1],be=G[2],Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or,sn,en;return P===k?(k[12]=P[0]*ae+P[4]*de+P[8]*be+P[12],k[13]=P[1]*ae+P[5]*de+P[9]*be+P[13],k[14]=P[2]*ae+P[6]*de+P[10]*be+P[14],k[15]=P[3]*ae+P[7]*de+P[11]*be+P[15]):(Me=P[0],Be=P[1],tt=P[2],ct=P[3],gt=P[4],Dt=P[5],er=P[6],Yt=P[7],dr=P[8],Or=P[9],sn=P[10],en=P[11],k[0]=Me,k[1]=Be,k[2]=tt,k[3]=ct,k[4]=gt,k[5]=Dt,k[6]=er,k[7]=Yt,k[8]=dr,k[9]=Or,k[10]=sn,k[11]=en,k[12]=Me*ae+gt*de+dr*be+P[12],k[13]=Be*ae+Dt*de+Or*be+P[13],k[14]=tt*ae+er*de+sn*be+P[14],k[15]=ct*ae+Yt*de+en*be+P[15]),k}function Wl(k,P,G){var ae=G[0],de=G[1],be=G[2];return k[0]=P[0]*ae,k[1]=P[1]*ae,k[2]=P[2]*ae,k[3]=P[3]*ae,k[4]=P[4]*de,k[5]=P[5]*de,k[6]=P[6]*de,k[7]=P[7]*de,k[8]=P[8]*be,k[9]=P[9]*be,k[10]=P[10]*be,k[11]=P[11]*be,k[12]=P[12],k[13]=P[13],k[14]=P[14],k[15]=P[15],k}function Yl(k,P,G){var ae=Math.sin(G),de=Math.cos(G),be=P[4],Me=P[5],Be=P[6],tt=P[7],ct=P[8],gt=P[9],Dt=P[10],er=P[11];return P!==k&&(k[0]=P[0],k[1]=P[1],k[2]=P[2],k[3]=P[3],k[12]=P[12],k[13]=P[13],k[14]=P[14],k[15]=P[15]),k[4]=be*de+ct*ae,k[5]=Me*de+gt*ae,k[6]=Be*de+Dt*ae,k[7]=tt*de+er*ae,k[8]=ct*de-be*ae,k[9]=gt*de-Me*ae,k[10]=Dt*de-Be*ae,k[11]=er*de-tt*ae,k}function ip(k,P,G){var ae=Math.sin(G),de=Math.cos(G),be=P[0],Me=P[1],Be=P[2],tt=P[3],ct=P[4],gt=P[5],Dt=P[6],er=P[7];return P!==k&&(k[8]=P[8],k[9]=P[9],k[10]=P[10],k[11]=P[11],k[12]=P[12],k[13]=P[13],k[14]=P[14],k[15]=P[15]),k[0]=be*de+ct*ae,k[1]=Me*de+gt*ae,k[2]=Be*de+Dt*ae,k[3]=tt*de+er*ae,k[4]=ct*de-be*ae,k[5]=gt*de-Me*ae,k[6]=Dt*de-Be*ae,k[7]=er*de-tt*ae,k}function Cd(k,P,G,ae,de){var be=1/Math.tan(P/2),Me;return k[0]=be/G,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=be,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=-1,k[12]=0,k[13]=0,k[15]=0,de!=null&&de!==1/0?(Me=1/(ae-de),k[10]=(de+ae)*Me,k[14]=2*de*ae*Me):(k[10]=-1,k[14]=-2*ae),k}function a1(k,P,G,ae,de,be,Me){var Be=1/(P-G),tt=1/(ae-de),ct=1/(be-Me);return k[0]=-2*Be,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=-2*tt,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=2*ct,k[11]=0,k[12]=(P+G)*Be,k[13]=(de+ae)*tt,k[14]=(Me+be)*ct,k[15]=1,k}var i1=dh;function sv(){var k=new Vs(3);return Vs!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),k}function o1(k){var P=new Vs(3);return P[0]=k[0],P[1]=k[1],P[2]=k[2],P}function op(k,P,G){return k[0]=P[0]+G[0],k[1]=P[1]+G[1],k[2]=P[2]+G[2],k}function s1(k,P,G){return k[0]=P[0]-G[0],k[1]=P[1]-G[1],k[2]=P[2]-G[2],k}function l1(k,P,G){return k[0]=P[0]*G,k[1]=P[1]*G,k[2]=P[2]*G,k}function Ld(k,P){var G=P[0],ae=P[1],de=P[2],be=G*G+ae*ae+de*de;return be>0&&(be=1/Math.sqrt(be)),k[0]=P[0]*be,k[1]=P[1]*be,k[2]=P[2]*be,k}function v6(k,P){return k[0]*P[0]+k[1]*P[1]+k[2]*P[2]}function p6(k,P,G){var ae=P[0],de=P[1],be=P[2],Me=G[0],Be=G[1],tt=G[2];return k[0]=de*tt-be*Be,k[1]=be*Me-ae*tt,k[2]=ae*Be-de*Me,k}function d6(k,P,G){var ae=P[0],de=P[1],be=P[2];return k[0]=ae*G[0]+de*G[3]+be*G[6],k[1]=ae*G[1]+de*G[4]+be*G[7],k[2]=ae*G[2]+de*G[5]+be*G[8],k}var g6=s1;(function(){var k=sv();return function(P,G,ae,de,be,Me){var Be,tt;for(G||(G=3),ae||(ae=0),de?tt=Math.min(de*G+ae,P.length):tt=P.length,Be=ae;Be<tt;Be+=G)k[0]=P[Be],k[1]=P[Be+1],k[2]=P[Be+2],be(k,k,Me),P[Be]=k[0],P[Be+1]=k[1],P[Be+2]=k[2];return P}})();function y6(){var k=new Vs(4);return Vs!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0,k[3]=0),k}function m6(k,P,G){return k[0]=P[0]*G,k[1]=P[1]*G,k[2]=P[2]*G,k[3]=P[3]*G,k}function x6(k,P){return k[0]*P[0]+k[1]*P[1]+k[2]*P[2]+k[3]*P[3]}function xg(k,P,G){var ae=P[0],de=P[1],be=P[2],Me=P[3];return k[0]=G[0]*ae+G[4]*de+G[8]*be+G[12]*Me,k[1]=G[1]*ae+G[5]*de+G[9]*be+G[13]*Me,k[2]=G[2]*ae+G[6]*de+G[10]*be+G[14]*Me,k[3]=G[3]*ae+G[7]*de+G[11]*be+G[15]*Me,k}(function(){var k=y6();return function(P,G,ae,de,be,Me){var Be,tt;for(G||(G=4),ae||(ae=0),de?tt=Math.min(de*G+ae,P.length):tt=P.length,Be=ae;Be<tt;Be+=G)k[0]=P[Be],k[1]=P[Be+1],k[2]=P[Be+2],k[3]=P[Be+3],be(k,k,Me),P[Be]=k[0],P[Be+1]=k[1],P[Be+2]=k[2],P[Be+3]=k[3];return P}})();function b6(){var k=new Vs(2);return Vs!=Float32Array&&(k[0]=0,k[1]=0),k}function _6(k){var P=k[0],G=k[1];return P*P+G*G}var w6=_6;(function(){var k=b6();return function(P,G,ae,de,be,Me){var Be,tt;for(G||(G=2),ae||(ae=0),de?tt=Math.min(de*G+ae,P.length):tt=P.length,Be=ae;Be<tt;Be+=G)k[0]=P[Be],k[1]=P[Be+1],be(k,k,Me),P[Be]=k[0],P[Be+1]=k[1];return P}})();var T6=function(k){function P(G){k.call(this,G,Gc)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.createBucket=function(ae){return new fo(ae)},P.prototype.queryRadius=function(ae){var de=ae;return au("circle-radius",this,de)+au("circle-stroke-width",this,de)+vf(this.paint.get("circle-translate"))},P.prototype.queryIntersectsFeature=function(ae,de,be,Me,Be,tt,ct,gt){for(var Dt=$u(ae,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),tt.angle,ct),er=this.paint.get("circle-radius").evaluate(de,be),Yt=this.paint.get("circle-stroke-width").evaluate(de,be),dr=er+Yt,Or=this.paint.get("circle-pitch-alignment")==="map",sn=Or?Dt:A6(Dt,gt),en=Or?dr*ct:dr,In=0,wn=Me;In<wn.length;In+=1)for(var Pn=wn[In],Bn=0,Yn=Pn;Bn<Yn.length;Bn+=1){var fa=Yn[Bn],ia=Or?fa:cw(fa,gt),Ba=en,Ma=xg([],[fa.x,fa.y,0,1],gt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ba*=Ma[3]/tt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ba*=tt.cameraToCenterDistance/Ma[3]),Di(sn,ia,Ba))return!0}return!1},P}(Js);function cw(k,P){var G=xg([],[k.x,k.y,0,1],P);return new f(G[0]/G[3],G[1]/G[3])}function A6(k,P){return k.map(function(G){return cw(G,P)})}var hw=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P}(fo);Ue("HeatmapBucket",hw,{omit:["layers"]});function u1(k,P,G,ae){var de=P.width,be=P.height;if(!ae)ae=new Uint8Array(de*be*G);else if(ae instanceof Uint8ClampedArray)ae=new Uint8Array(ae.buffer);else if(ae.length!==de*be*G)throw new RangeError("mismatched image size");return k.width=de,k.height=be,k.data=ae,k}function vw(k,P,G){var ae=P.width,de=P.height;if(!(ae===k.width&&de===k.height)){var be=u1({},{width:ae,height:de},G);f1(k,be,{x:0,y:0},{x:0,y:0},{width:Math.min(k.width,ae),height:Math.min(k.height,de)},G),k.width=ae,k.height=de,k.data=be.data}}function f1(k,P,G,ae,de,be){if(de.width===0||de.height===0)return P;if(de.width>k.width||de.height>k.height||G.x>k.width-de.width||G.y>k.height-de.height)throw new RangeError("out of range source coordinates for image copy");if(de.width>P.width||de.height>P.height||ae.x>P.width-de.width||ae.y>P.height-de.height)throw new RangeError("out of range destination coordinates for image copy");for(var Me=k.data,Be=P.data,tt=0;tt<de.height;tt++)for(var ct=((G.y+tt)*k.width+G.x)*be,gt=((ae.y+tt)*P.width+ae.x)*be,Dt=0;Dt<de.width*be;Dt++)Be[gt+Dt]=Me[ct+Dt];return P}var lv=function(P,G){u1(this,P,1,G)};lv.prototype.resize=function(P){vw(this,P,1)},lv.prototype.clone=function(){return new lv({width:this.width,height:this.height},new Uint8Array(this.data))},lv.copy=function(P,G,ae,de,be){f1(P,G,ae,de,be,1)};var Xl=function(P,G){u1(this,P,4,G)};Xl.prototype.resize=function(P){vw(this,P,4)},Xl.prototype.replace=function(P,G){G?this.data.set(P):P instanceof Uint8ClampedArray?this.data=new Uint8Array(P.buffer):this.data=P},Xl.prototype.clone=function(){return new Xl({width:this.width,height:this.height},new Uint8Array(this.data))},Xl.copy=function(P,G,ae,de,be){f1(P,G,ae,de,be,4)},Ue("AlphaImage",lv),Ue("RGBAImage",Xl);var S6=new lo({"heatmap-radius":new Qa(Nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qa(Nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ua(Nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rs(Nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ua(Nt.paint_heatmap["heatmap-opacity"])}),M6={paint:S6};function pw(k,P){for(var G=new Uint8Array(1024),ae={},de=0,be=0;de<256;de++,be+=4){ae[P]=de/255;var Me=k.evaluate(ae);G[be+0]=Math.floor(Me.r*255/Me.a),G[be+1]=Math.floor(Me.g*255/Me.a),G[be+2]=Math.floor(Me.b*255/Me.a),G[be+3]=Math.floor(Me.a*255)}return new Xl({width:256,height:1},G)}var E6=function(k){function P(G){k.call(this,G,M6),this._updateColorRamp()}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.createBucket=function(ae){return new hw(ae)},P.prototype._handleSpecialPaintPropertyUpdate=function(ae){ae==="heatmap-color"&&this._updateColorRamp()},P.prototype._updateColorRamp=function(){var ae=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=pw(ae,"heatmapDensity"),this.colorRampTexture=null},P.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},P}(Js),k6=new lo({"hillshade-illumination-direction":new Ua(Nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ua(Nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ua(Nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ua(Nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ua(Nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ua(Nt.paint_hillshade["hillshade-accent-color"])}),C6={paint:k6},L6=function(k){function P(G){k.call(this,G,C6)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},P}(Js),P6=ns([{name:"a_pos",components:2,type:"Int16"}],4),dw=P6.members,c1=bg,I6=bg;function bg(k,P,G){G=G||2;var ae=P&&P.length,de=ae?P[0]*G:k.length,be=gw(k,0,de,G,!0),Me=[];if(!be||be.next===be.prev)return Me;var Be,tt,ct,gt,Dt,er,Yt;if(ae&&(be=z6(k,P,be,G)),k.length>80*G){Be=ct=k[0],tt=gt=k[1];for(var dr=G;dr<de;dr+=G)Dt=k[dr],er=k[dr+1],Dt<Be&&(Be=Dt),er<tt&&(tt=er),Dt>ct&&(ct=Dt),er>gt&&(gt=er);Yt=Math.max(ct-Be,gt-tt),Yt=Yt!==0?1/Yt:0}return Pd(be,Me,G,Be,tt,Yt),Me}function gw(k,P,G,ae,de){var be,Me;if(de===p1(k,P,G,ae)>0)for(be=P;be<G;be+=ae)Me=xw(be,k[be],k[be+1],Me);else for(be=G-ae;be>=P;be-=ae)Me=xw(be,k[be],k[be+1],Me);return Me&&_g(Me,Me.next)&&(Rd(Me),Me=Me.next),Me}function gh(k,P){if(!k)return k;P||(P=k);var G=k,ae;do if(ae=!1,!G.steiner&&(_g(G,G.next)||vs(G.prev,G,G.next)===0)){if(Rd(G),G=P=G.prev,G===G.next)break;ae=!0}else G=G.next;while(ae||G!==P);return P}function Pd(k,P,G,ae,de,be,Me){if(!!k){!Me&&be&&H6(k,ae,de,be);for(var Be=k,tt,ct;k.prev!==k.next;){if(tt=k.prev,ct=k.next,be?D6(k,ae,de,be):R6(k)){P.push(tt.i/G),P.push(k.i/G),P.push(ct.i/G),Rd(k),k=ct.next,Be=ct.next;continue}if(k=ct,k===Be){Me?Me===1?(k=F6(gh(k),P,G),Pd(k,P,G,ae,de,be,2)):Me===2&&O6(k,P,G,ae,de,be):Pd(gh(k),P,G,ae,de,be,1);break}}}}function R6(k){var P=k.prev,G=k,ae=k.next;if(vs(P,G,ae)>=0)return!1;for(var de=k.next.next;de!==k.prev;){if(sp(P.x,P.y,G.x,G.y,ae.x,ae.y,de.x,de.y)&&vs(de.prev,de,de.next)>=0)return!1;de=de.next}return!0}function D6(k,P,G,ae){var de=k.prev,be=k,Me=k.next;if(vs(de,be,Me)>=0)return!1;for(var Be=de.x<be.x?de.x<Me.x?de.x:Me.x:be.x<Me.x?be.x:Me.x,tt=de.y<be.y?de.y<Me.y?de.y:Me.y:be.y<Me.y?be.y:Me.y,ct=de.x>be.x?de.x>Me.x?de.x:Me.x:be.x>Me.x?be.x:Me.x,gt=de.y>be.y?de.y>Me.y?de.y:Me.y:be.y>Me.y?be.y:Me.y,Dt=h1(Be,tt,P,G,ae),er=h1(ct,gt,P,G,ae),Yt=k.prevZ,dr=k.nextZ;Yt&&Yt.z>=Dt&&dr&&dr.z<=er;){if(Yt!==k.prev&&Yt!==k.next&&sp(de.x,de.y,be.x,be.y,Me.x,Me.y,Yt.x,Yt.y)&&vs(Yt.prev,Yt,Yt.next)>=0||(Yt=Yt.prevZ,dr!==k.prev&&dr!==k.next&&sp(de.x,de.y,be.x,be.y,Me.x,Me.y,dr.x,dr.y)&&vs(dr.prev,dr,dr.next)>=0))return!1;dr=dr.nextZ}for(;Yt&&Yt.z>=Dt;){if(Yt!==k.prev&&Yt!==k.next&&sp(de.x,de.y,be.x,be.y,Me.x,Me.y,Yt.x,Yt.y)&&vs(Yt.prev,Yt,Yt.next)>=0)return!1;Yt=Yt.prevZ}for(;dr&&dr.z<=er;){if(dr!==k.prev&&dr!==k.next&&sp(de.x,de.y,be.x,be.y,Me.x,Me.y,dr.x,dr.y)&&vs(dr.prev,dr,dr.next)>=0)return!1;dr=dr.nextZ}return!0}function F6(k,P,G){var ae=k;do{var de=ae.prev,be=ae.next.next;!_g(de,be)&&yw(de,ae,ae.next,be)&&Id(de,be)&&Id(be,de)&&(P.push(de.i/G),P.push(ae.i/G),P.push(be.i/G),Rd(ae),Rd(ae.next),ae=k=be),ae=ae.next}while(ae!==k);return gh(ae)}function O6(k,P,G,ae,de,be){var Me=k;do{for(var Be=Me.next.next;Be!==Me.prev;){if(Me.i!==Be.i&&$6(Me,Be)){var tt=mw(Me,Be);Me=gh(Me,Me.next),tt=gh(tt,tt.next),Pd(Me,P,G,ae,de,be),Pd(tt,P,G,ae,de,be);return}Be=Be.next}Me=Me.next}while(Me!==k)}function z6(k,P,G,ae){var de=[],be,Me,Be,tt,ct;for(be=0,Me=P.length;be<Me;be++)Be=P[be]*ae,tt=be<Me-1?P[be+1]*ae:k.length,ct=gw(k,Be,tt,ae,!1),ct===ct.next&&(ct.steiner=!0),de.push(j6(ct));for(de.sort(N6),be=0;be<de.length;be++)B6(de[be],G),G=gh(G,G.next);return G}function N6(k,P){return k.x-P.x}function B6(k,P){if(P=U6(k,P),P){var G=mw(P,k);gh(P,P.next),gh(G,G.next)}}function U6(k,P){var G=P,ae=k.x,de=k.y,be=-1/0,Me;do{if(de<=G.y&&de>=G.next.y&&G.next.y!==G.y){var Be=G.x+(de-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(Be<=ae&&Be>be){if(be=Be,Be===ae){if(de===G.y)return G;if(de===G.next.y)return G.next}Me=G.x<G.next.x?G:G.next}}G=G.next}while(G!==P);if(!Me)return null;if(ae===be)return Me;var tt=Me,ct=Me.x,gt=Me.y,Dt=1/0,er;G=Me;do ae>=G.x&&G.x>=ct&&ae!==G.x&&sp(de<gt?ae:be,de,ct,gt,de<gt?be:ae,de,G.x,G.y)&&(er=Math.abs(de-G.y)/(ae-G.x),Id(G,k)&&(er<Dt||er===Dt&&(G.x>Me.x||G.x===Me.x&&V6(Me,G)))&&(Me=G,Dt=er)),G=G.next;while(G!==tt);return Me}function V6(k,P){return vs(k.prev,k,P.prev)<0&&vs(P.next,k,k.next)<0}function H6(k,P,G,ae){var de=k;do de.z===null&&(de.z=h1(de.x,de.y,P,G,ae)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next;while(de!==k);de.prevZ.nextZ=null,de.prevZ=null,G6(de)}function G6(k){var P,G,ae,de,be,Me,Be,tt,ct=1;do{for(G=k,k=null,be=null,Me=0;G;){for(Me++,ae=G,Be=0,P=0;P<ct&&(Be++,ae=ae.nextZ,!!ae);P++);for(tt=ct;Be>0||tt>0&&ae;)Be!==0&&(tt===0||!ae||G.z<=ae.z)?(de=G,G=G.nextZ,Be--):(de=ae,ae=ae.nextZ,tt--),be?be.nextZ=de:k=de,de.prevZ=be,be=de;G=ae}be.nextZ=null,ct*=2}while(Me>1);return k}function h1(k,P,G,ae,de){return k=32767*(k-G)*de,P=32767*(P-ae)*de,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,k|P<<1}function j6(k){var P=k,G=k;do(P.x<G.x||P.x===G.x&&P.y<G.y)&&(G=P),P=P.next;while(P!==k);return G}function sp(k,P,G,ae,de,be,Me,Be){return(de-Me)*(P-Be)-(k-Me)*(be-Be)>=0&&(k-Me)*(ae-Be)-(G-Me)*(P-Be)>=0&&(G-Me)*(be-Be)-(de-Me)*(ae-Be)>=0}function $6(k,P){return k.next.i!==P.i&&k.prev.i!==P.i&&!W6(k,P)&&(Id(k,P)&&Id(P,k)&&Y6(k,P)&&(vs(k.prev,k,P.prev)||vs(k,P.prev,P))||_g(k,P)&&vs(k.prev,k,k.next)>0&&vs(P.prev,P,P.next)>0)}function vs(k,P,G){return(P.y-k.y)*(G.x-P.x)-(P.x-k.x)*(G.y-P.y)}function _g(k,P){return k.x===P.x&&k.y===P.y}function yw(k,P,G,ae){var de=Tg(vs(k,P,G)),be=Tg(vs(k,P,ae)),Me=Tg(vs(G,ae,k)),Be=Tg(vs(G,ae,P));return!!(de!==be&&Me!==Be||de===0&&wg(k,G,P)||be===0&&wg(k,ae,P)||Me===0&&wg(G,k,ae)||Be===0&&wg(G,P,ae))}function wg(k,P,G){return P.x<=Math.max(k.x,G.x)&&P.x>=Math.min(k.x,G.x)&&P.y<=Math.max(k.y,G.y)&&P.y>=Math.min(k.y,G.y)}function Tg(k){return k>0?1:k<0?-1:0}function W6(k,P){var G=k;do{if(G.i!==k.i&&G.next.i!==k.i&&G.i!==P.i&&G.next.i!==P.i&&yw(G,G.next,k,P))return!0;G=G.next}while(G!==k);return!1}function Id(k,P){return vs(k.prev,k,k.next)<0?vs(k,P,k.next)>=0&&vs(k,k.prev,P)>=0:vs(k,P,k.prev)<0||vs(k,k.next,P)<0}function Y6(k,P){var G=k,ae=!1,de=(k.x+P.x)/2,be=(k.y+P.y)/2;do G.y>be!=G.next.y>be&&G.next.y!==G.y&&de<(G.next.x-G.x)*(be-G.y)/(G.next.y-G.y)+G.x&&(ae=!ae),G=G.next;while(G!==k);return ae}function mw(k,P){var G=new v1(k.i,k.x,k.y),ae=new v1(P.i,P.x,P.y),de=k.next,be=P.prev;return k.next=P,P.prev=k,G.next=de,de.prev=G,ae.next=G,G.prev=ae,be.next=ae,ae.prev=be,ae}function xw(k,P,G,ae){var de=new v1(k,P,G);return ae?(de.next=ae.next,de.prev=ae,ae.next.prev=de,ae.next=de):(de.prev=de,de.next=de),de}function Rd(k){k.next.prev=k.prev,k.prev.next=k.next,k.prevZ&&(k.prevZ.nextZ=k.nextZ),k.nextZ&&(k.nextZ.prevZ=k.prevZ)}function v1(k,P,G){this.i=k,this.x=P,this.y=G,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}bg.deviation=function(k,P,G,ae){var de=P&&P.length,be=de?P[0]*G:k.length,Me=Math.abs(p1(k,0,be,G));if(de)for(var Be=0,tt=P.length;Be<tt;Be++){var ct=P[Be]*G,gt=Be<tt-1?P[Be+1]*G:k.length;Me-=Math.abs(p1(k,ct,gt,G))}var Dt=0;for(Be=0;Be<ae.length;Be+=3){var er=ae[Be]*G,Yt=ae[Be+1]*G,dr=ae[Be+2]*G;Dt+=Math.abs((k[er]-k[dr])*(k[Yt+1]-k[er+1])-(k[er]-k[Yt])*(k[dr+1]-k[er+1]))}return Me===0&&Dt===0?0:Math.abs((Dt-Me)/Me)};function p1(k,P,G,ae){for(var de=0,be=P,Me=G-ae;be<G;be+=ae)de+=(k[Me]-k[be])*(k[be+1]+k[Me+1]),Me=be;return de}bg.flatten=function(k){for(var P=k[0][0].length,G={vertices:[],holes:[],dimensions:P},ae=0,de=0;de<k.length;de++){for(var be=0;be<k[de].length;be++)for(var Me=0;Me<P;Me++)G.vertices.push(k[de][be][Me]);de>0&&(ae+=k[de-1].length,G.holes.push(ae))}return G},c1.default=I6;function X6(k,P,G,ae,de){bw(k,P,G||0,ae||k.length-1,de||Z6)}function bw(k,P,G,ae,de){for(;ae>G;){if(ae-G>600){var be=ae-G+1,Me=P-G+1,Be=Math.log(be),tt=.5*Math.exp(2*Be/3),ct=.5*Math.sqrt(Be*tt*(be-tt)/be)*(Me-be/2<0?-1:1),gt=Math.max(G,Math.floor(P-Me*tt/be+ct)),Dt=Math.min(ae,Math.floor(P+(be-Me)*tt/be+ct));bw(k,P,gt,Dt,de)}var er=k[P],Yt=G,dr=ae;for(Dd(k,G,P),de(k[ae],er)>0&&Dd(k,G,ae);Yt<dr;){for(Dd(k,Yt,dr),Yt++,dr--;de(k[Yt],er)<0;)Yt++;for(;de(k[dr],er)>0;)dr--}de(k[G],er)===0?Dd(k,G,dr):(dr++,Dd(k,dr,ae)),dr<=P&&(G=dr+1),P<=dr&&(ae=dr-1)}}function Dd(k,P,G){var ae=k[P];k[P]=k[G],k[G]=ae}function Z6(k,P){return k<P?-1:k>P?1:0}function d1(k,P){var G=k.length;if(G<=1)return[k];for(var ae=[],de,be,Me=0;Me<G;Me++){var Be=$(k[Me]);Be!==0&&(k[Me].area=Math.abs(Be),be===void 0&&(be=Be<0),be===Be<0?(de&&ae.push(de),de=[k[Me]]):de.push(k[Me]))}if(de&&ae.push(de),P>1)for(var tt=0;tt<ae.length;tt++)ae[tt].length<=P||(X6(ae[tt],P,1,ae[tt].length-1,K6),ae[tt]=ae[tt].slice(0,P));return ae}function K6(k,P){return P.area-k.area}function g1(k,P,G){for(var ae=G.patternDependencies,de=!1,be=0,Me=P;be<Me.length;be+=1){var Be=Me[be],tt=Be.paint.get(k+"-pattern");tt.isConstant()||(de=!0);var ct=tt.constantOr(null);ct&&(de=!0,ae[ct.to]=!0,ae[ct.from]=!0)}return de}function y1(k,P,G,ae,de){for(var be=de.patternDependencies,Me=0,Be=P;Me<Be.length;Me+=1){var tt=Be[Me],ct=tt.paint.get(k+"-pattern"),gt=ct.value;if(gt.kind!=="constant"){var Dt=gt.evaluate({zoom:ae-1},G,{},de.availableImages),er=gt.evaluate({zoom:ae},G,{},de.availableImages),Yt=gt.evaluate({zoom:ae+1},G,{},de.availableImages);Dt=Dt&&Dt.name?Dt.name:Dt,er=er&&er.name?er.name:er,Yt=Yt&&Yt.name?Yt.name:Yt,be[Dt]=!0,be[er]=!0,be[Yt]=!0,G.patterns[tt.id]={min:Dt,mid:er,max:Yt}}}return G}var J6=500,Yf=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(G){return G.id}),this.index=P.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tv,this.indexArray=new $f,this.indexArray2=new av,this.programConfigurations=new ui(dw,P.layers,P.zoom),this.segments=new Y,this.segments2=new Y,this.stateDependentLayerIds=this.layers.filter(function(G){return G.isStateDependent()}).map(function(G){return G.id})};Yf.prototype.populate=function(P,G,ae){this.hasPattern=g1("fill",this.layers,G);for(var de=this.layers[0].layout.get("fill-sort-key"),be=[],Me=0,Be=P;Me<Be.length;Me+=1){var tt=Be[Me],ct=tt.feature,gt=tt.id,Dt=tt.index,er=tt.sourceLayerIndex,Yt=this.layers[0]._featureFilter.needGeometry,dr={type:ct.type,id:gt,properties:ct.properties,geometry:Yt?eo(ct):[]};if(!!this.layers[0]._featureFilter.filter(new pi(this.zoom),dr,ae)){Yt||(dr.geometry=eo(ct));var Or=de?de.evaluate(dr,{},ae,G.availableImages):void 0,sn={id:gt,properties:ct.properties,type:ct.type,sourceLayerIndex:er,index:Dt,geometry:dr.geometry,patterns:{},sortKey:Or};be.push(sn)}}de&&be.sort(function(Ma,Ca){return Ma.sortKey-Ca.sortKey});for(var en=0,In=be;en<In.length;en+=1){var wn=In[en],Pn=wn,Bn=Pn.geometry,Yn=Pn.index,fa=Pn.sourceLayerIndex;if(this.hasPattern){var ia=y1("fill",this.layers,wn,this.zoom,G);this.patternFeatures.push(ia)}else this.addFeature(wn,Bn,Yn,ae,{});var Ba=P[Yn].feature;G.featureIndex.insert(Ba,Bn,Yn,fa,this.index)}},Yf.prototype.update=function(P,G,ae){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,G,this.stateDependentLayers,ae)},Yf.prototype.addFeatures=function(P,G,ae){for(var de=0,be=this.patternFeatures;de<be.length;de+=1){var Me=be[de];this.addFeature(Me,Me.geometry,Me.index,G,ae)}},Yf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Yf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yf.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,dw),this.indexBuffer=P.createIndexBuffer(this.indexArray),this.indexBuffer2=P.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(P),this.uploaded=!0},Yf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Yf.prototype.addFeature=function(P,G,ae,de,be){for(var Me=0,Be=d1(G,J6);Me<Be.length;Me+=1){for(var tt=Be[Me],ct=0,gt=0,Dt=tt;gt<Dt.length;gt+=1){var er=Dt[gt];ct+=er.length}for(var Yt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),dr=Yt.vertexLength,Or=[],sn=[],en=0,In=tt;en<In.length;en+=1){var wn=In[en];if(wn.length!==0){wn!==tt[0]&&sn.push(Or.length/2);var Pn=this.segments2.prepareSegment(wn.length,this.layoutVertexArray,this.indexArray2),Bn=Pn.vertexLength;this.layoutVertexArray.emplaceBack(wn[0].x,wn[0].y),this.indexArray2.emplaceBack(Bn+wn.length-1,Bn),Or.push(wn[0].x),Or.push(wn[0].y);for(var Yn=1;Yn<wn.length;Yn++)this.layoutVertexArray.emplaceBack(wn[Yn].x,wn[Yn].y),this.indexArray2.emplaceBack(Bn+Yn-1,Bn+Yn),Or.push(wn[Yn].x),Or.push(wn[Yn].y);Pn.vertexLength+=wn.length,Pn.primitiveLength+=wn.length}}for(var fa=c1(Or,sn),ia=0;ia<fa.length;ia+=3)this.indexArray.emplaceBack(dr+fa[ia],dr+fa[ia+1],dr+fa[ia+2]);Yt.vertexLength+=ct,Yt.primitiveLength+=fa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,ae,be,de)},Ue("FillBucket",Yf,{omit:["layers","patternFeatures"]});var Q6=new lo({"fill-sort-key":new Qa(Nt.layout_fill["fill-sort-key"])}),q6=new lo({"fill-antialias":new Ua(Nt.paint_fill["fill-antialias"]),"fill-opacity":new Qa(Nt.paint_fill["fill-opacity"]),"fill-color":new Qa(Nt.paint_fill["fill-color"]),"fill-outline-color":new Qa(Nt.paint_fill["fill-outline-color"]),"fill-translate":new Ua(Nt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ua(Nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ho(Nt.paint_fill["fill-pattern"])}),eL={paint:q6,layout:Q6},tL=function(k){function P(G){k.call(this,G,eL)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.recalculate=function(ae,de){k.prototype.recalculate.call(this,ae,de);var be=this.paint._values["fill-outline-color"];be.value.kind==="constant"&&be.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},P.prototype.createBucket=function(ae){return new Yf(ae)},P.prototype.queryRadius=function(){return vf(this.paint.get("fill-translate"))},P.prototype.queryIntersectsFeature=function(ae,de,be,Me,Be,tt,ct){var gt=$u(ae,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),tt.angle,ct);return $o(gt,Me)},P.prototype.isTileClipped=function(){return!0},P}(Js),rL=ns([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),_w=rL.members,ww=lp;function lp(k,P,G,ae,de){this.properties={},this.extent=G,this.type=0,this._pbf=k,this._geometry=-1,this._keys=ae,this._values=de,k.readFields(nL,this,P)}function nL(k,P,G){k==1?P.id=G.readVarint():k==2?aL(G,P):k==3?P.type=G.readVarint():k==4&&(P._geometry=G.pos)}function aL(k,P){for(var G=k.readVarint()+k.pos;k.pos<G;){var ae=P._keys[k.readVarint()],de=P._values[k.readVarint()];P.properties[ae]=de}}lp.types=["Unknown","Point","LineString","Polygon"],lp.prototype.loadGeometry=function(){var k=this._pbf;k.pos=this._geometry;for(var P=k.readVarint()+k.pos,G=1,ae=0,de=0,be=0,Me=[],Be;k.pos<P;){if(ae<=0){var tt=k.readVarint();G=tt&7,ae=tt>>3}if(ae--,G===1||G===2)de+=k.readSVarint(),be+=k.readSVarint(),G===1&&(Be&&Me.push(Be),Be=[]),Be.push(new f(de,be));else if(G===7)Be&&Be.push(Be[0].clone());else throw new Error("unknown command "+G)}return Be&&Me.push(Be),Me},lp.prototype.bbox=function(){var k=this._pbf;k.pos=this._geometry;for(var P=k.readVarint()+k.pos,G=1,ae=0,de=0,be=0,Me=1/0,Be=-1/0,tt=1/0,ct=-1/0;k.pos<P;){if(ae<=0){var gt=k.readVarint();G=gt&7,ae=gt>>3}if(ae--,G===1||G===2)de+=k.readSVarint(),be+=k.readSVarint(),de<Me&&(Me=de),de>Be&&(Be=de),be<tt&&(tt=be),be>ct&&(ct=be);else if(G!==7)throw new Error("unknown command "+G)}return[Me,tt,Be,ct]},lp.prototype.toGeoJSON=function(k,P,G){var ae=this.extent*Math.pow(2,G),de=this.extent*k,be=this.extent*P,Me=this.loadGeometry(),Be=lp.types[this.type],tt,ct;function gt(Yt){for(var dr=0;dr<Yt.length;dr++){var Or=Yt[dr],sn=180-(Or.y+be)*360/ae;Yt[dr]=[(Or.x+de)*360/ae-180,360/Math.PI*Math.atan(Math.exp(sn*Math.PI/180))-90]}}switch(this.type){case 1:var Dt=[];for(tt=0;tt<Me.length;tt++)Dt[tt]=Me[tt][0];Me=Dt,gt(Me);break;case 2:for(tt=0;tt<Me.length;tt++)gt(Me[tt]);break;case 3:for(Me=iL(Me),tt=0;tt<Me.length;tt++)for(ct=0;ct<Me[tt].length;ct++)gt(Me[tt][ct]);break}Me.length===1?Me=Me[0]:Be="Multi"+Be;var er={type:"Feature",geometry:{type:Be,coordinates:Me},properties:this.properties};return"id"in this&&(er.id=this.id),er};function iL(k){var P=k.length;if(P<=1)return[k];for(var G=[],ae,de,be=0;be<P;be++){var Me=oL(k[be]);Me!==0&&(de===void 0&&(de=Me<0),de===Me<0?(ae&&G.push(ae),ae=[k[be]]):ae.push(k[be]))}return ae&&G.push(ae),G}function oL(k){for(var P=0,G=0,ae=k.length,de=ae-1,be,Me;G<ae;de=G++)be=k[G],Me=k[de],P+=(Me.x-be.x)*(be.y+Me.y);return P}var Tw=Aw;function Aw(k,P){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=k,this._keys=[],this._values=[],this._features=[],k.readFields(sL,this,P),this.length=this._features.length}function sL(k,P,G){k===15?P.version=G.readVarint():k===1?P.name=G.readString():k===5?P.extent=G.readVarint():k===2?P._features.push(G.pos):k===3?P._keys.push(G.readString()):k===4&&P._values.push(lL(G))}function lL(k){for(var P=null,G=k.readVarint()+k.pos;k.pos<G;){var ae=k.readVarint()>>3;P=ae===1?k.readString():ae===2?k.readFloat():ae===3?k.readDouble():ae===4?k.readVarint64():ae===5?k.readVarint():ae===6?k.readSVarint():ae===7?k.readBoolean():null}return P}Aw.prototype.feature=function(k){if(k<0||k>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[k];var P=this._pbf.readVarint()+this._pbf.pos;return new ww(this._pbf,P,this.extent,this._keys,this._values)};var uL=fL;function fL(k,P){this.layers=k.readFields(cL,{},P)}function cL(k,P,G){if(k===3){var ae=new Tw(G,G.readVarint()+G.pos);ae.length&&(P[ae.name]=ae)}}var hL=uL,vL=ww,pL=Tw,up={VectorTile:hL,VectorTileFeature:vL,VectorTileLayer:pL},dL=up.VectorTileFeature.types,gL=500,m1=Math.pow(2,13);function Fd(k,P,G,ae,de,be,Me,Be){k.emplaceBack(P,G,Math.floor(ae*m1)*2+Me,de*m1*2,be*m1*2,Math.round(Be))}var Xf=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(G){return G.id}),this.index=P.index,this.hasPattern=!1,this.layoutVertexArray=new fh,this.indexArray=new $f,this.programConfigurations=new ui(_w,P.layers,P.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(G){return G.isStateDependent()}).map(function(G){return G.id})};Xf.prototype.populate=function(P,G,ae){this.features=[],this.hasPattern=g1("fill-extrusion",this.layers,G);for(var de=0,be=P;de<be.length;de+=1){var Me=be[de],Be=Me.feature,tt=Me.id,ct=Me.index,gt=Me.sourceLayerIndex,Dt=this.layers[0]._featureFilter.needGeometry,er={type:Be.type,id:tt,properties:Be.properties,geometry:Dt?eo(Be):[]};if(!!this.layers[0]._featureFilter.filter(new pi(this.zoom),er,ae)){var Yt={id:tt,sourceLayerIndex:gt,index:ct,geometry:Dt?er.geometry:eo(Be),properties:Be.properties,type:Be.type,patterns:{}};typeof Be.id!="undefined"&&(Yt.id=Be.id),this.hasPattern?this.features.push(y1("fill-extrusion",this.layers,Yt,this.zoom,G)):this.addFeature(Yt,Yt.geometry,ct,ae,{}),G.featureIndex.insert(Be,Yt.geometry,ct,gt,this.index,!0)}}},Xf.prototype.addFeatures=function(P,G,ae){for(var de=0,be=this.features;de<be.length;de+=1){var Me=be[de],Be=Me.geometry;this.addFeature(Me,Be,Me.index,G,ae)}},Xf.prototype.update=function(P,G,ae){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,G,this.stateDependentLayers,ae)},Xf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Xf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xf.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,_w),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},Xf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xf.prototype.addFeature=function(P,G,ae,de,be){for(var Me=0,Be=d1(G,gL);Me<Be.length;Me+=1){for(var tt=Be[Me],ct=0,gt=0,Dt=tt;gt<Dt.length;gt+=1){var er=Dt[gt];ct+=er.length}for(var Yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),dr=0,Or=tt;dr<Or.length;dr+=1){var sn=Or[dr];if(sn.length!==0&&!mL(sn))for(var en=0,In=0;In<sn.length;In++){var wn=sn[In];if(In>=1){var Pn=sn[In-1];if(!yL(wn,Pn)){Yt.vertexLength+4>Y.MAX_VERTEX_ARRAY_LENGTH&&(Yt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Bn=wn.sub(Pn)._perp()._unit(),Yn=Pn.dist(wn);en+Yn>32768&&(en=0),Fd(this.layoutVertexArray,wn.x,wn.y,Bn.x,Bn.y,0,0,en),Fd(this.layoutVertexArray,wn.x,wn.y,Bn.x,Bn.y,0,1,en),en+=Yn,Fd(this.layoutVertexArray,Pn.x,Pn.y,Bn.x,Bn.y,0,0,en),Fd(this.layoutVertexArray,Pn.x,Pn.y,Bn.x,Bn.y,0,1,en);var fa=Yt.vertexLength;this.indexArray.emplaceBack(fa,fa+2,fa+1),this.indexArray.emplaceBack(fa+1,fa+2,fa+3),Yt.vertexLength+=4,Yt.primitiveLength+=2}}}}if(Yt.vertexLength+ct>Y.MAX_VERTEX_ARRAY_LENGTH&&(Yt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),dL[P.type]==="Polygon"){for(var ia=[],Ba=[],Ma=Yt.vertexLength,Ca=0,si=tt;Ca<si.length;Ca+=1){var Da=si[Ca];if(Da.length!==0){Da!==tt[0]&&Ba.push(ia.length/2);for(var Na=0;Na<Da.length;Na++){var gi=Da[Na];Fd(this.layoutVertexArray,gi.x,gi.y,0,0,1,1,0),ia.push(gi.x),ia.push(gi.y)}}}for(var ii=c1(ia,Ba),Bi=0;Bi<ii.length;Bi+=3)this.indexArray.emplaceBack(Ma+ii[Bi],Ma+ii[Bi+2],Ma+ii[Bi+1]);Yt.primitiveLength+=ii.length/3,Yt.vertexLength+=ct}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,ae,be,de)},Ue("FillExtrusionBucket",Xf,{omit:["layers","features"]});function yL(k,P){return k.x===P.x&&(k.x<0||k.x>$a)||k.y===P.y&&(k.y<0||k.y>$a)}function mL(k){return k.every(function(P){return P.x<0})||k.every(function(P){return P.x>$a})||k.every(function(P){return P.y<0})||k.every(function(P){return P.y>$a})}var xL=new lo({"fill-extrusion-opacity":new Ua(Nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qa(Nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ua(Nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ua(Nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ho(Nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qa(Nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qa(Nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ua(Nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),bL={paint:xL},_L=function(k){function P(G){k.call(this,G,bL)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.createBucket=function(ae){return new Xf(ae)},P.prototype.queryRadius=function(){return vf(this.paint.get("fill-extrusion-translate"))},P.prototype.is3D=function(){return!0},P.prototype.queryIntersectsFeature=function(ae,de,be,Me,Be,tt,ct,gt){var Dt=$u(ae,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),tt.angle,ct),er=this.paint.get("fill-extrusion-height").evaluate(de,be),Yt=this.paint.get("fill-extrusion-base").evaluate(de,be),dr=AL(Dt,gt,tt,0),Or=TL(Me,Yt,er,gt),sn=Or[0],en=Or[1];return wL(sn,en,dr)},P}(Js);function Od(k,P){return k.x*P.x+k.y*P.y}function Sw(k,P){if(k.length===1){for(var G=0,ae=P[G++],de;!de||ae.equals(de);)if(de=P[G++],!de)return 1/0;for(;G<P.length;G++){var be=P[G],Me=k[0],Be=de.sub(ae),tt=be.sub(ae),ct=Me.sub(ae),gt=Od(Be,Be),Dt=Od(Be,tt),er=Od(tt,tt),Yt=Od(ct,Be),dr=Od(ct,tt),Or=gt*er-Dt*Dt,sn=(er*Yt-Dt*dr)/Or,en=(gt*dr-Dt*Yt)/Or,In=1-sn-en,wn=ae.z*In+de.z*sn+be.z*en;if(isFinite(wn))return wn}return 1/0}else{for(var Pn=1/0,Bn=0,Yn=P;Bn<Yn.length;Bn+=1){var fa=Yn[Bn];Pn=Math.min(Pn,fa.z)}return Pn}}function wL(k,P,G){var ae=1/0;$o(G,P)&&(ae=Sw(G,P[0]));for(var de=0;de<P.length;de++)for(var be=P[de],Me=k[de],Be=0;Be<be.length-1;Be++){var tt=be[Be],ct=be[Be+1],gt=Me[Be],Dt=Me[Be+1],er=[tt,ct,Dt,gt,tt];hi(G,er)&&(ae=Math.min(ae,Sw(G,er)))}return ae===1/0?!1:ae}function TL(k,P,G,ae){for(var de=[],be=[],Me=ae[8]*P,Be=ae[9]*P,tt=ae[10]*P,ct=ae[11]*P,gt=ae[8]*G,Dt=ae[9]*G,er=ae[10]*G,Yt=ae[11]*G,dr=0,Or=k;dr<Or.length;dr+=1){for(var sn=Or[dr],en=[],In=[],wn=0,Pn=sn;wn<Pn.length;wn+=1){var Bn=Pn[wn],Yn=Bn.x,fa=Bn.y,ia=ae[0]*Yn+ae[4]*fa+ae[12],Ba=ae[1]*Yn+ae[5]*fa+ae[13],Ma=ae[2]*Yn+ae[6]*fa+ae[14],Ca=ae[3]*Yn+ae[7]*fa+ae[15],si=ia+Me,Da=Ba+Be,Na=Ma+tt,gi=Ca+ct,ii=ia+gt,Bi=Ba+Dt,so=Ma+er,Ui=Ca+Yt,Vi=new f(si/gi,Da/gi);Vi.z=Na/gi,en.push(Vi);var Fi=new f(ii/Ui,Bi/Ui);Fi.z=so/Ui,In.push(Fi)}de.push(en),be.push(In)}return[de,be]}function AL(k,P,G,ae){for(var de=[],be=0,Me=k;be<Me.length;be+=1){var Be=Me[be],tt=[Be.x,Be.y,ae,1];xg(tt,tt,P),de.push(new f(tt[0]/tt[3],tt[1]/tt[3]))}return de}var SL=ns([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Mw=SL.members,ML=up.VectorTileFeature.types,Ew=63,EL=Math.cos(75/2*(Math.PI/180)),kL=15,CL=20,LL=15,kw=1/2,Cw=Math.pow(2,LL-1)/kw,Zl=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(G){return G.id}),this.index=P.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qv,this.indexArray=new $f,this.programConfigurations=new ui(Mw,P.layers,P.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(G){return G.isStateDependent()}).map(function(G){return G.id})};Zl.prototype.populate=function(P,G,ae){this.hasPattern=g1("line",this.layers,G);for(var de=this.layers[0].layout.get("line-sort-key"),be=[],Me=0,Be=P;Me<Be.length;Me+=1){var tt=Be[Me],ct=tt.feature,gt=tt.id,Dt=tt.index,er=tt.sourceLayerIndex,Yt=this.layers[0]._featureFilter.needGeometry,dr={type:ct.type,id:gt,properties:ct.properties,geometry:Yt?eo(ct):[]};if(!!this.layers[0]._featureFilter.filter(new pi(this.zoom),dr,ae)){Yt||(dr.geometry=eo(ct));var Or=de?de.evaluate(dr,{},ae):void 0,sn={id:gt,properties:ct.properties,type:ct.type,sourceLayerIndex:er,index:Dt,geometry:dr.geometry,patterns:{},sortKey:Or};be.push(sn)}}de&&be.sort(function(Ma,Ca){return Ma.sortKey-Ca.sortKey});for(var en=0,In=be;en<In.length;en+=1){var wn=In[en],Pn=wn,Bn=Pn.geometry,Yn=Pn.index,fa=Pn.sourceLayerIndex;if(this.hasPattern){var ia=y1("line",this.layers,wn,this.zoom,G);this.patternFeatures.push(ia)}else this.addFeature(wn,Bn,Yn,ae,{});var Ba=P[Yn].feature;G.featureIndex.insert(Ba,Bn,Yn,fa,this.index)}},Zl.prototype.update=function(P,G,ae){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,G,this.stateDependentLayers,ae)},Zl.prototype.addFeatures=function(P,G,ae){for(var de=0,be=this.patternFeatures;de<be.length;de+=1){var Me=be[de];this.addFeature(Me,Me.geometry,Me.index,G,ae)}},Zl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zl.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,Mw),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},Zl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Zl.prototype.addFeature=function(P,G,ae,de,be){for(var Me=this.layers[0].layout,Be=Me.get("line-join").evaluate(P,{}),tt=Me.get("line-cap"),ct=Me.get("line-miter-limit"),gt=Me.get("line-round-limit"),Dt=0,er=G;Dt<er.length;Dt+=1){var Yt=er[Dt];this.addLine(Yt,P,Be,tt,ct,gt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,ae,be,de)},Zl.prototype.addLine=function(P,G,ae,de,be,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!G.properties&&G.properties.hasOwnProperty("mapbox_clip_start")&&G.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+G.properties.mapbox_clip_start,this.clipEnd=+G.properties.mapbox_clip_end;for(var Be=0;Be<P.length-1;Be++)this.totalDistance+=P[Be].dist(P[Be+1]);this.updateScaledDistance()}for(var tt=ML[G.type]==="Polygon",ct=P.length;ct>=2&&P[ct-1].equals(P[ct-2]);)ct--;for(var gt=0;gt<ct-1&&P[gt].equals(P[gt+1]);)gt++;if(!(ct<(tt?3:2))){ae==="bevel"&&(be=1.05);var Dt=this.overscaling<=16?kL*$a/(512*this.overscaling):0,er=this.segments.prepareSegment(ct*10,this.layoutVertexArray,this.indexArray),Yt,dr=void 0,Or=void 0,sn=void 0,en=void 0;this.e1=this.e2=-1,tt&&(Yt=P[ct-2],en=P[gt].sub(Yt)._unit()._perp());for(var In=gt;In<ct;In++)if(Or=In===ct-1?tt?P[gt+1]:void 0:P[In+1],!(Or&&P[In].equals(Or))){en&&(sn=en),Yt&&(dr=Yt),Yt=P[In],en=Or?Or.sub(Yt)._unit()._perp():sn,sn=sn||en;var wn=sn.add(en);(wn.x!==0||wn.y!==0)&&wn._unit();var Pn=sn.x*en.x+sn.y*en.y,Bn=wn.x*en.x+wn.y*en.y,Yn=Bn!==0?1/Bn:1/0,fa=2*Math.sqrt(2-2*Bn),ia=Bn<EL&&dr&&Or,Ba=sn.x*en.y-sn.y*en.x>0;if(ia&&In>gt){var Ma=Yt.dist(dr);if(Ma>2*Dt){var Ca=Yt.sub(Yt.sub(dr)._mult(Dt/Ma)._round());this.updateDistance(dr,Ca),this.addCurrentVertex(Ca,sn,0,0,er),dr=Ca}}var si=dr&&Or,Da=si?ae:tt?"butt":de;if(si&&Da==="round"&&(Yn<Me?Da="miter":Yn<=2&&(Da="fakeround")),Da==="miter"&&Yn>be&&(Da="bevel"),Da==="bevel"&&(Yn>2&&(Da="flipbevel"),Yn<be&&(Da="miter")),dr&&this.updateDistance(dr,Yt),Da==="miter")wn._mult(Yn),this.addCurrentVertex(Yt,wn,0,0,er);else if(Da==="flipbevel"){if(Yn>100)wn=en.mult(-1);else{var Na=Yn*sn.add(en).mag()/sn.sub(en).mag();wn._perp()._mult(Na*(Ba?-1:1))}this.addCurrentVertex(Yt,wn,0,0,er),this.addCurrentVertex(Yt,wn.mult(-1),0,0,er)}else if(Da==="bevel"||Da==="fakeround"){var gi=-Math.sqrt(Yn*Yn-1),ii=Ba?gi:0,Bi=Ba?0:gi;if(dr&&this.addCurrentVertex(Yt,sn,ii,Bi,er),Da==="fakeround")for(var so=Math.round(fa*180/Math.PI/CL),Ui=1;Ui<so;Ui++){var Vi=Ui/so;if(Vi!==.5){var Fi=Vi-.5,go=1.0904+Pn*(-3.2452+Pn*(3.55645-Pn*1.43519)),wo=.848013+Pn*(-1.06021+Pn*.215638);Vi=Vi+Vi*Fi*(Vi-1)*(go*Fi*Fi+wo)}var Wo=en.sub(sn)._mult(Vi)._add(sn)._unit()._mult(Ba?-1:1);this.addHalfVertex(Yt,Wo.x,Wo.y,!1,Ba,0,er)}Or&&this.addCurrentVertex(Yt,en,-ii,-Bi,er)}else if(Da==="butt")this.addCurrentVertex(Yt,wn,0,0,er);else if(Da==="square"){var qo=dr?1:-1;this.addCurrentVertex(Yt,wn,qo,qo,er)}else Da==="round"&&(dr&&(this.addCurrentVertex(Yt,sn,0,0,er),this.addCurrentVertex(Yt,sn,1,1,er,!0)),Or&&(this.addCurrentVertex(Yt,en,-1,-1,er,!0),this.addCurrentVertex(Yt,en,0,0,er)));if(ia&&In<ct-1){var ks=Yt.dist(Or);if(ks>2*Dt){var gs=Yt.add(Or.sub(Yt)._mult(Dt/ks)._round());this.updateDistance(Yt,gs),this.addCurrentVertex(gs,en,0,0,er),Yt=gs}}}}},Zl.prototype.addCurrentVertex=function(P,G,ae,de,be,Me){Me===void 0&&(Me=!1);var Be=G.x+G.y*ae,tt=G.y-G.x*ae,ct=-G.x+G.y*de,gt=-G.y-G.x*de;this.addHalfVertex(P,Be,tt,Me,!1,ae,be),this.addHalfVertex(P,ct,gt,Me,!0,-de,be),this.distance>Cw/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(P,G,ae,de,be,Me))},Zl.prototype.addHalfVertex=function(P,G,ae,de,be,Me,Be){var tt=P.x,ct=P.y,gt=this.scaledDistance*kw;this.layoutVertexArray.emplaceBack((tt<<1)+(de?1:0),(ct<<1)+(be?1:0),Math.round(Ew*G)+128,Math.round(Ew*ae)+128,(Me===0?0:Me<0?-1:1)+1|(gt&63)<<2,gt>>6);var Dt=Be.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Dt),Be.primitiveLength++),be?this.e2=Dt:this.e1=Dt},Zl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Cw-1):this.distance},Zl.prototype.updateDistance=function(P,G){this.distance+=P.dist(G),this.updateScaledDistance()},Ue("LineBucket",Zl,{omit:["layers","patternFeatures"]});var PL=new lo({"line-cap":new Ua(Nt.layout_line["line-cap"]),"line-join":new Qa(Nt.layout_line["line-join"]),"line-miter-limit":new Ua(Nt.layout_line["line-miter-limit"]),"line-round-limit":new Ua(Nt.layout_line["line-round-limit"]),"line-sort-key":new Qa(Nt.layout_line["line-sort-key"])}),IL=new lo({"line-opacity":new Qa(Nt.paint_line["line-opacity"]),"line-color":new Qa(Nt.paint_line["line-color"]),"line-translate":new Ua(Nt.paint_line["line-translate"]),"line-translate-anchor":new Ua(Nt.paint_line["line-translate-anchor"]),"line-width":new Qa(Nt.paint_line["line-width"]),"line-gap-width":new Qa(Nt.paint_line["line-gap-width"]),"line-offset":new Qa(Nt.paint_line["line-offset"]),"line-blur":new Qa(Nt.paint_line["line-blur"]),"line-dasharray":new bo(Nt.paint_line["line-dasharray"]),"line-pattern":new Ho(Nt.paint_line["line-pattern"]),"line-gradient":new rs(Nt.paint_line["line-gradient"])}),Lw={paint:IL,layout:PL},RL=function(k){function P(){k.apply(this,arguments)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.possiblyEvaluate=function(ae,de){return de=new pi(Math.floor(de.zoom),{now:de.now,fadeDuration:de.fadeDuration,zoomHistory:de.zoomHistory,transition:de.transition}),k.prototype.possiblyEvaluate.call(this,ae,de)},P.prototype.evaluate=function(ae,de,be,Me){return de=S({},de,{zoom:Math.floor(de.zoom)}),k.prototype.evaluate.call(this,ae,de,be,Me)},P}(Qa),Pw=new RL(Lw.paint.properties["line-width"].specification);Pw.useIntegerZoom=!0;var DL=function(k){function P(G){k.call(this,G,Lw)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype._handleSpecialPaintPropertyUpdate=function(ae){ae==="line-gradient"&&this._updateGradient()},P.prototype._updateGradient=function(){var ae=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=pw(ae,"lineProgress"),this.gradientTexture=null},P.prototype.recalculate=function(ae,de){k.prototype.recalculate.call(this,ae,de),this.paint._values["line-floorwidth"]=Pw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,ae)},P.prototype.createBucket=function(ae){return new Zl(ae)},P.prototype.queryRadius=function(ae){var de=ae,be=Iw(au("line-width",this,de),au("line-gap-width",this,de)),Me=au("line-offset",this,de);return be/2+Math.abs(Me)+vf(this.paint.get("line-translate"))},P.prototype.queryIntersectsFeature=function(ae,de,be,Me,Be,tt,ct){var gt=$u(ae,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),tt.angle,ct),Dt=ct/2*Iw(this.paint.get("line-width").evaluate(de,be),this.paint.get("line-gap-width").evaluate(de,be)),er=this.paint.get("line-offset").evaluate(de,be);return er&&(Me=FL(Me,er*ct)),hs(gt,Me,Dt)},P.prototype.isTileClipped=function(){return!0},P}(Js);function Iw(k,P){return P>0?P+2*k:k}function FL(k,P){for(var G=[],ae=new f(0,0),de=0;de<k.length;de++){for(var be=k[de],Me=[],Be=0;Be<be.length;Be++){var tt=be[Be-1],ct=be[Be],gt=be[Be+1],Dt=Be===0?ae:ct.sub(tt)._unit()._perp(),er=Be===be.length-1?ae:gt.sub(ct)._unit()._perp(),Yt=Dt._add(er)._unit(),dr=Yt.x*er.x+Yt.y*er.y;Yt._mult(1/dr),Me.push(Yt._mult(P)._add(ct))}G.push(Me)}return G}var x1=ns([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),OL=ns([{name:"a_projected_pos",components:3,type:"Float32"}],4);ns([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var zL=ns([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ns([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Rw=ns([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),NL=ns([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ns([{name:"triangle",components:3,type:"Uint16"}]),ns([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ns([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ns([{type:"Float32",name:"offsetX"}]),ns([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function BL(k,P,G){var ae=P.layout.get("text-transform").evaluate(G,{});return ae==="uppercase"?k=k.toLocaleUpperCase():ae==="lowercase"&&(k=k.toLocaleLowerCase()),Ja.applyArabicShaping&&(k=Ja.applyArabicShaping(k)),k}function UL(k,P,G){return k.sections.forEach(function(ae){ae.text=BL(ae.text,P,G)}),k}function VL(k){var P={},G={},ae=[],de=0;function be(en){ae.push(k[en]),de++}function Me(en,In,wn){var Pn=G[en];return delete G[en],G[In]=Pn,ae[Pn].geometry[0].pop(),ae[Pn].geometry[0]=ae[Pn].geometry[0].concat(wn[0]),Pn}function Be(en,In,wn){var Pn=P[In];return delete P[In],P[en]=Pn,ae[Pn].geometry[0].shift(),ae[Pn].geometry[0]=wn[0].concat(ae[Pn].geometry[0]),Pn}function tt(en,In,wn){var Pn=wn?In[0][In[0].length-1]:In[0][0];return en+":"+Pn.x+":"+Pn.y}for(var ct=0;ct<k.length;ct++){var gt=k[ct],Dt=gt.geometry,er=gt.text?gt.text.toString():null;if(!er){be(ct);continue}var Yt=tt(er,Dt),dr=tt(er,Dt,!0);if(Yt in G&&dr in P&&G[Yt]!==P[dr]){var Or=Be(Yt,dr,Dt),sn=Me(Yt,dr,ae[Or].geometry);delete P[Yt],delete G[dr],G[tt(er,ae[sn].geometry,!0)]=sn,ae[Or].geometry=null}else Yt in G?Me(Yt,dr,Dt):dr in P?Be(Yt,dr,Dt):(be(ct),P[Yt]=de-1,G[dr]=de-1)}return ae.filter(function(en){return en.geometry})}var zd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function HL(k){for(var P="",G=0;G<k.length;G++){var ae=k.charCodeAt(G+1)||null,de=k.charCodeAt(G-1)||null,be=(!ae||!on(ae)||zd[k[G+1]])&&(!de||!on(de)||zd[k[G-1]]);be&&zd[k[G]]?P+=zd[k[G]]:P+=k[G]}return P}var Hs=24,GL=function(k,P,G,ae,de){var be,Me,Be=de*8-ae-1,tt=(1<<Be)-1,ct=tt>>1,gt=-7,Dt=G?de-1:0,er=G?-1:1,Yt=k[P+Dt];for(Dt+=er,be=Yt&(1<<-gt)-1,Yt>>=-gt,gt+=Be;gt>0;be=be*256+k[P+Dt],Dt+=er,gt-=8);for(Me=be&(1<<-gt)-1,be>>=-gt,gt+=ae;gt>0;Me=Me*256+k[P+Dt],Dt+=er,gt-=8);if(be===0)be=1-ct;else{if(be===tt)return Me?NaN:(Yt?-1:1)*(1/0);Me=Me+Math.pow(2,ae),be=be-ct}return(Yt?-1:1)*Me*Math.pow(2,be-ae)},jL=function(k,P,G,ae,de,be){var Me,Be,tt,ct=be*8-de-1,gt=(1<<ct)-1,Dt=gt>>1,er=de===23?Math.pow(2,-24)-Math.pow(2,-77):0,Yt=ae?0:be-1,dr=ae?1:-1,Or=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(Be=isNaN(P)?1:0,Me=gt):(Me=Math.floor(Math.log(P)/Math.LN2),P*(tt=Math.pow(2,-Me))<1&&(Me--,tt*=2),Me+Dt>=1?P+=er/tt:P+=er*Math.pow(2,1-Dt),P*tt>=2&&(Me++,tt/=2),Me+Dt>=gt?(Be=0,Me=gt):Me+Dt>=1?(Be=(P*tt-1)*Math.pow(2,de),Me=Me+Dt):(Be=P*Math.pow(2,Dt-1)*Math.pow(2,de),Me=0));de>=8;k[G+Yt]=Be&255,Yt+=dr,Be/=256,de-=8);for(Me=Me<<de|Be,ct+=de;ct>0;k[G+Yt]=Me&255,Yt+=dr,Me/=256,ct-=8);k[G+Yt-dr]|=Or*128},Ag={read:GL,write:jL},Sg=_o;function _o(k){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(k)?k:new Uint8Array(k||0),this.pos=0,this.type=0,this.length=this.buf.length}_o.Varint=0,_o.Fixed64=1,_o.Bytes=2,_o.Fixed32=5;var b1=(1<<16)*(1<<16),Dw=1/b1,$L=12,Fw=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");_o.prototype={destroy:function(){this.buf=null},readFields:function(k,P,G){for(G=G||this.length;this.pos<G;){var ae=this.readVarint(),de=ae>>3,be=this.pos;this.type=ae&7,k(de,P,this),this.pos===be&&this.skip(ae)}return P},readMessage:function(k,P){return this.readFields(k,P,this.readVarint()+this.pos)},readFixed32:function(){var k=Mg(this.buf,this.pos);return this.pos+=4,k},readSFixed32:function(){var k=zw(this.buf,this.pos);return this.pos+=4,k},readFixed64:function(){var k=Mg(this.buf,this.pos)+Mg(this.buf,this.pos+4)*b1;return this.pos+=8,k},readSFixed64:function(){var k=Mg(this.buf,this.pos)+zw(this.buf,this.pos+4)*b1;return this.pos+=8,k},readFloat:function(){var k=Ag.read(this.buf,this.pos,!0,23,4);return this.pos+=4,k},readDouble:function(){var k=Ag.read(this.buf,this.pos,!0,52,8);return this.pos+=8,k},readVarint:function(k){var P=this.buf,G,ae;return ae=P[this.pos++],G=ae&127,ae<128||(ae=P[this.pos++],G|=(ae&127)<<7,ae<128)||(ae=P[this.pos++],G|=(ae&127)<<14,ae<128)||(ae=P[this.pos++],G|=(ae&127)<<21,ae<128)?G:(ae=P[this.pos],G|=(ae&15)<<28,WL(G,k,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var k=this.readVarint();return k%2===1?(k+1)/-2:k/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var k=this.readVarint()+this.pos,P=this.pos;return this.pos=k,k-P>=$L&&Fw?oP(this.buf,P,k):iP(this.buf,P,k)},readBytes:function(){var k=this.readVarint()+this.pos,P=this.buf.subarray(this.pos,k);return this.pos=k,P},readPackedVarint:function(k,P){if(this.type!==_o.Bytes)return k.push(this.readVarint(P));var G=jc(this);for(k=k||[];this.pos<G;)k.push(this.readVarint(P));return k},readPackedSVarint:function(k){if(this.type!==_o.Bytes)return k.push(this.readSVarint());var P=jc(this);for(k=k||[];this.pos<P;)k.push(this.readSVarint());return k},readPackedBoolean:function(k){if(this.type!==_o.Bytes)return k.push(this.readBoolean());var P=jc(this);for(k=k||[];this.pos<P;)k.push(this.readBoolean());return k},readPackedFloat:function(k){if(this.type!==_o.Bytes)return k.push(this.readFloat());var P=jc(this);for(k=k||[];this.pos<P;)k.push(this.readFloat());return k},readPackedDouble:function(k){if(this.type!==_o.Bytes)return k.push(this.readDouble());var P=jc(this);for(k=k||[];this.pos<P;)k.push(this.readDouble());return k},readPackedFixed32:function(k){if(this.type!==_o.Bytes)return k.push(this.readFixed32());var P=jc(this);for(k=k||[];this.pos<P;)k.push(this.readFixed32());return k},readPackedSFixed32:function(k){if(this.type!==_o.Bytes)return k.push(this.readSFixed32());var P=jc(this);for(k=k||[];this.pos<P;)k.push(this.readSFixed32());return k},readPackedFixed64:function(k){if(this.type!==_o.Bytes)return k.push(this.readFixed64());var P=jc(this);for(k=k||[];this.pos<P;)k.push(this.readFixed64());return k},readPackedSFixed64:function(k){if(this.type!==_o.Bytes)return k.push(this.readSFixed64());var P=jc(this);for(k=k||[];this.pos<P;)k.push(this.readSFixed64());return k},skip:function(k){var P=k&7;if(P===_o.Varint)for(;this.buf[this.pos++]>127;);else if(P===_o.Bytes)this.pos=this.readVarint()+this.pos;else if(P===_o.Fixed32)this.pos+=4;else if(P===_o.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+P)},writeTag:function(k,P){this.writeVarint(k<<3|P)},realloc:function(k){for(var P=this.length||16;P<this.pos+k;)P*=2;if(P!==this.length){var G=new Uint8Array(P);G.set(this.buf),this.buf=G,this.length=P}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(k){this.realloc(4),cp(this.buf,k,this.pos),this.pos+=4},writeSFixed32:function(k){this.realloc(4),cp(this.buf,k,this.pos),this.pos+=4},writeFixed64:function(k){this.realloc(8),cp(this.buf,k&-1,this.pos),cp(this.buf,Math.floor(k*Dw),this.pos+4),this.pos+=8},writeSFixed64:function(k){this.realloc(8),cp(this.buf,k&-1,this.pos),cp(this.buf,Math.floor(k*Dw),this.pos+4),this.pos+=8},writeVarint:function(k){if(k=+k||0,k>268435455||k<0){YL(k,this);return}this.realloc(4),this.buf[this.pos++]=k&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=(k>>>=7)&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=(k>>>=7)&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=k>>>7&127)))},writeSVarint:function(k){this.writeVarint(k<0?-k*2-1:k*2)},writeBoolean:function(k){this.writeVarint(Boolean(k))},writeString:function(k){k=String(k),this.realloc(k.length*4),this.pos++;var P=this.pos;this.pos=sP(this.buf,k,this.pos);var G=this.pos-P;G>=128&&Ow(P,G,this),this.pos=P-1,this.writeVarint(G),this.pos+=G},writeFloat:function(k){this.realloc(4),Ag.write(this.buf,k,this.pos,!0,23,4),this.pos+=4},writeDouble:function(k){this.realloc(8),Ag.write(this.buf,k,this.pos,!0,52,8),this.pos+=8},writeBytes:function(k){var P=k.length;this.writeVarint(P),this.realloc(P);for(var G=0;G<P;G++)this.buf[this.pos++]=k[G]},writeRawMessage:function(k,P){this.pos++;var G=this.pos;k(P,this);var ae=this.pos-G;ae>=128&&Ow(G,ae,this),this.pos=G-1,this.writeVarint(ae),this.pos+=ae},writeMessage:function(k,P,G){this.writeTag(k,_o.Bytes),this.writeRawMessage(P,G)},writePackedVarint:function(k,P){P.length&&this.writeMessage(k,KL,P)},writePackedSVarint:function(k,P){P.length&&this.writeMessage(k,JL,P)},writePackedBoolean:function(k,P){P.length&&this.writeMessage(k,eP,P)},writePackedFloat:function(k,P){P.length&&this.writeMessage(k,QL,P)},writePackedDouble:function(k,P){P.length&&this.writeMessage(k,qL,P)},writePackedFixed32:function(k,P){P.length&&this.writeMessage(k,tP,P)},writePackedSFixed32:function(k,P){P.length&&this.writeMessage(k,rP,P)},writePackedFixed64:function(k,P){P.length&&this.writeMessage(k,nP,P)},writePackedSFixed64:function(k,P){P.length&&this.writeMessage(k,aP,P)},writeBytesField:function(k,P){this.writeTag(k,_o.Bytes),this.writeBytes(P)},writeFixed32Field:function(k,P){this.writeTag(k,_o.Fixed32),this.writeFixed32(P)},writeSFixed32Field:function(k,P){this.writeTag(k,_o.Fixed32),this.writeSFixed32(P)},writeFixed64Field:function(k,P){this.writeTag(k,_o.Fixed64),this.writeFixed64(P)},writeSFixed64Field:function(k,P){this.writeTag(k,_o.Fixed64),this.writeSFixed64(P)},writeVarintField:function(k,P){this.writeTag(k,_o.Varint),this.writeVarint(P)},writeSVarintField:function(k,P){this.writeTag(k,_o.Varint),this.writeSVarint(P)},writeStringField:function(k,P){this.writeTag(k,_o.Bytes),this.writeString(P)},writeFloatField:function(k,P){this.writeTag(k,_o.Fixed32),this.writeFloat(P)},writeDoubleField:function(k,P){this.writeTag(k,_o.Fixed64),this.writeDouble(P)},writeBooleanField:function(k,P){this.writeVarintField(k,Boolean(P))}};function WL(k,P,G){var ae=G.buf,de,be;if(be=ae[G.pos++],de=(be&112)>>4,be<128||(be=ae[G.pos++],de|=(be&127)<<3,be<128)||(be=ae[G.pos++],de|=(be&127)<<10,be<128)||(be=ae[G.pos++],de|=(be&127)<<17,be<128)||(be=ae[G.pos++],de|=(be&127)<<24,be<128)||(be=ae[G.pos++],de|=(be&1)<<31,be<128))return fp(k,de,P);throw new Error("Expected varint not more than 10 bytes")}function jc(k){return k.type===_o.Bytes?k.readVarint()+k.pos:k.pos+1}function fp(k,P,G){return G?P*4294967296+(k>>>0):(P>>>0)*4294967296+(k>>>0)}function YL(k,P){var G,ae;if(k>=0?(G=k%4294967296|0,ae=k/4294967296|0):(G=~(-k%4294967296),ae=~(-k/4294967296),G^4294967295?G=G+1|0:(G=0,ae=ae+1|0)),k>=18446744073709552e3||k<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");P.realloc(10),XL(G,ae,P),ZL(ae,P)}function XL(k,P,G){G.buf[G.pos++]=k&127|128,k>>>=7,G.buf[G.pos++]=k&127|128,k>>>=7,G.buf[G.pos++]=k&127|128,k>>>=7,G.buf[G.pos++]=k&127|128,k>>>=7,G.buf[G.pos]=k&127}function ZL(k,P){var G=(k&7)<<4;P.buf[P.pos++]|=G|((k>>>=3)?128:0),k&&(P.buf[P.pos++]=k&127|((k>>>=7)?128:0),k&&(P.buf[P.pos++]=k&127|((k>>>=7)?128:0),k&&(P.buf[P.pos++]=k&127|((k>>>=7)?128:0),k&&(P.buf[P.pos++]=k&127|((k>>>=7)?128:0),k&&(P.buf[P.pos++]=k&127)))))}function Ow(k,P,G){var ae=P<=16383?1:P<=2097151?2:P<=268435455?3:Math.floor(Math.log(P)/(Math.LN2*7));G.realloc(ae);for(var de=G.pos-1;de>=k;de--)G.buf[de+ae]=G.buf[de]}function KL(k,P){for(var G=0;G<k.length;G++)P.writeVarint(k[G])}function JL(k,P){for(var G=0;G<k.length;G++)P.writeSVarint(k[G])}function QL(k,P){for(var G=0;G<k.length;G++)P.writeFloat(k[G])}function qL(k,P){for(var G=0;G<k.length;G++)P.writeDouble(k[G])}function eP(k,P){for(var G=0;G<k.length;G++)P.writeBoolean(k[G])}function tP(k,P){for(var G=0;G<k.length;G++)P.writeFixed32(k[G])}function rP(k,P){for(var G=0;G<k.length;G++)P.writeSFixed32(k[G])}function nP(k,P){for(var G=0;G<k.length;G++)P.writeFixed64(k[G])}function aP(k,P){for(var G=0;G<k.length;G++)P.writeSFixed64(k[G])}function Mg(k,P){return(k[P]|k[P+1]<<8|k[P+2]<<16)+k[P+3]*16777216}function cp(k,P,G){k[G]=P,k[G+1]=P>>>8,k[G+2]=P>>>16,k[G+3]=P>>>24}function zw(k,P){return(k[P]|k[P+1]<<8|k[P+2]<<16)+(k[P+3]<<24)}function iP(k,P,G){for(var ae="",de=P;de<G;){var be=k[de],Me=null,Be=be>239?4:be>223?3:be>191?2:1;if(de+Be>G)break;var tt,ct,gt;Be===1?be<128&&(Me=be):Be===2?(tt=k[de+1],(tt&192)===128&&(Me=(be&31)<<6|tt&63,Me<=127&&(Me=null))):Be===3?(tt=k[de+1],ct=k[de+2],(tt&192)===128&&(ct&192)===128&&(Me=(be&15)<<12|(tt&63)<<6|ct&63,(Me<=2047||Me>=55296&&Me<=57343)&&(Me=null))):Be===4&&(tt=k[de+1],ct=k[de+2],gt=k[de+3],(tt&192)===128&&(ct&192)===128&&(gt&192)===128&&(Me=(be&15)<<18|(tt&63)<<12|(ct&63)<<6|gt&63,(Me<=65535||Me>=1114112)&&(Me=null))),Me===null?(Me=65533,Be=1):Me>65535&&(Me-=65536,ae+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|Me&1023),ae+=String.fromCharCode(Me),de+=Be}return ae}function oP(k,P,G){return Fw.decode(k.subarray(P,G))}function sP(k,P,G){for(var ae=0,de,be;ae<P.length;ae++){if(de=P.charCodeAt(ae),de>55295&&de<57344)if(be)if(de<56320){k[G++]=239,k[G++]=191,k[G++]=189,be=de;continue}else de=be-55296<<10|de-56320|65536,be=null;else{de>56319||ae+1===P.length?(k[G++]=239,k[G++]=191,k[G++]=189):be=de;continue}else be&&(k[G++]=239,k[G++]=191,k[G++]=189,be=null);de<128?k[G++]=de:(de<2048?k[G++]=de>>6|192:(de<65536?k[G++]=de>>12|224:(k[G++]=de>>18|240,k[G++]=de>>12&63|128),k[G++]=de>>6&63|128),k[G++]=de&63|128)}return G}var _1=3;function lP(k,P,G){k===1&&G.readMessage(uP,P)}function uP(k,P,G){if(k===3){var ae=G.readMessage(fP,{}),de=ae.id,be=ae.bitmap,Me=ae.width,Be=ae.height,tt=ae.left,ct=ae.top,gt=ae.advance;P.push({id:de,bitmap:new lv({width:Me+2*_1,height:Be+2*_1},be),metrics:{width:Me,height:Be,left:tt,top:ct,advance:gt}})}}function fP(k,P,G){k===1?P.id=G.readVarint():k===2?P.bitmap=G.readBytes():k===3?P.width=G.readVarint():k===4?P.height=G.readVarint():k===5?P.left=G.readSVarint():k===6?P.top=G.readSVarint():k===7&&(P.advance=G.readVarint())}function cP(k){return new Sg(k).readFields(lP,[])}var Nw=_1;function Bw(k){for(var P=0,G=0,ae=0,de=k;ae<de.length;ae+=1){var be=de[ae];P+=be.w*be.h,G=Math.max(G,be.w)}k.sort(function(sn,en){return en.h-sn.h});for(var Me=Math.max(Math.ceil(Math.sqrt(P/.95)),G),Be=[{x:0,y:0,w:Me,h:1/0}],tt=0,ct=0,gt=0,Dt=k;gt<Dt.length;gt+=1)for(var er=Dt[gt],Yt=Be.length-1;Yt>=0;Yt--){var dr=Be[Yt];if(!(er.w>dr.w||er.h>dr.h)){if(er.x=dr.x,er.y=dr.y,ct=Math.max(ct,er.y+er.h),tt=Math.max(tt,er.x+er.w),er.w===dr.w&&er.h===dr.h){var Or=Be.pop();Yt<Be.length&&(Be[Yt]=Or)}else er.h===dr.h?(dr.x+=er.w,dr.w-=er.w):er.w===dr.w?(dr.y+=er.h,dr.h-=er.h):(Be.push({x:dr.x+er.w,y:dr.y,w:dr.w-er.w,h:er.h}),dr.y+=er.h,dr.h-=er.h);break}}return{w:tt,h:ct,fill:P/(tt*ct)||0}}var iu=1,Eg=function(P,G){var ae=G.pixelRatio,de=G.version,be=G.stretchX,Me=G.stretchY,Be=G.content;this.paddedRect=P,this.pixelRatio=ae,this.stretchX=be,this.stretchY=Me,this.content=Be,this.version=de},Nd={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Nd.tl.get=function(){return[this.paddedRect.x+iu,this.paddedRect.y+iu]},Nd.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-iu,this.paddedRect.y+this.paddedRect.h-iu]},Nd.tlbr.get=function(){return this.tl.concat(this.br)},Nd.displaySize.get=function(){return[(this.paddedRect.w-iu*2)/this.pixelRatio,(this.paddedRect.h-iu*2)/this.pixelRatio]},Object.defineProperties(Eg.prototype,Nd);var Bd=function(P,G){var ae={},de={};this.haveRenderCallbacks=[];var be=[];this.addImages(P,ae,be),this.addImages(G,de,be);var Me=Bw(be),Be=Me.w,tt=Me.h,ct=new Xl({width:Be||1,height:tt||1});for(var gt in P){var Dt=P[gt],er=ae[gt].paddedRect;Xl.copy(Dt.data,ct,{x:0,y:0},{x:er.x+iu,y:er.y+iu},Dt.data)}for(var Yt in G){var dr=G[Yt],Or=de[Yt].paddedRect,sn=Or.x+iu,en=Or.y+iu,In=dr.data.width,wn=dr.data.height;Xl.copy(dr.data,ct,{x:0,y:0},{x:sn,y:en},dr.data),Xl.copy(dr.data,ct,{x:0,y:wn-1},{x:sn,y:en-1},{width:In,height:1}),Xl.copy(dr.data,ct,{x:0,y:0},{x:sn,y:en+wn},{width:In,height:1}),Xl.copy(dr.data,ct,{x:In-1,y:0},{x:sn-1,y:en},{width:1,height:wn}),Xl.copy(dr.data,ct,{x:0,y:0},{x:sn+In,y:en},{width:1,height:wn})}this.image=ct,this.iconPositions=ae,this.patternPositions=de};Bd.prototype.addImages=function(P,G,ae){for(var de in P){var be=P[de],Me={x:0,y:0,w:be.data.width+2*iu,h:be.data.height+2*iu};ae.push(Me),G[de]=new Eg(Me,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(de)}},Bd.prototype.patchUpdatedImages=function(P,G){P.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var ae in P.updatedImages)this.patchUpdatedImage(this.iconPositions[ae],P.getImage(ae),G),this.patchUpdatedImage(this.patternPositions[ae],P.getImage(ae),G)},Bd.prototype.patchUpdatedImage=function(P,G,ae){if(!(!P||!G)&&P.version!==G.version){P.version=G.version;var de=P.tl,be=de[0],Me=de[1];ae.update(G.data,void 0,{x:be,y:Me})}},Ue("ImagePosition",Eg),Ue("ImageAtlas",Bd);var Su={horizontal:1,vertical:2,horizontalOnly:3},Ud=-17;function hP(k){for(var P=0,G=k;P<G.length;P+=1){var ae=G[P];if(ae.positionedGlyphs.length!==0)return!1}return!0}var Uw=57344,Vw=63743,hp=function(){this.scale=1,this.fontStack="",this.imageName=null};hp.forText=function(P,G){var ae=new hp;return ae.scale=P||1,ae.fontStack=G,ae},hp.forImage=function(P){var G=new hp;return G.imageName=P,G};var cl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};cl.fromFeature=function(P,G){for(var ae=new cl,de=0;de<P.sections.length;de++){var be=P.sections[de];be.image?ae.addImageSection(be):ae.addTextSection(be,G)}return ae},cl.prototype.length=function(){return this.text.length},cl.prototype.getSection=function(P){return this.sections[this.sectionIndex[P]]},cl.prototype.getSectionIndex=function(P){return this.sectionIndex[P]},cl.prototype.getCharCode=function(P){return this.text.charCodeAt(P)},cl.prototype.verticalizePunctuation=function(){this.text=HL(this.text)},cl.prototype.trim=function(){for(var P=0,G=0;G<this.text.length&&Ac[this.text.charCodeAt(G)];G++)P++;for(var ae=this.text.length,de=this.text.length-1;de>=0&&de>=P&&Ac[this.text.charCodeAt(de)];de--)ae--;this.text=this.text.substring(P,ae),this.sectionIndex=this.sectionIndex.slice(P,ae)},cl.prototype.substring=function(P,G){var ae=new cl;return ae.text=this.text.substring(P,G),ae.sectionIndex=this.sectionIndex.slice(P,G),ae.sections=this.sections,ae},cl.prototype.toString=function(){return this.text},cl.prototype.getMaxScale=function(){var P=this;return this.sectionIndex.reduce(function(G,ae){return Math.max(G,P.sections[ae].scale)},0)},cl.prototype.addTextSection=function(P,G){this.text+=P.text,this.sections.push(hp.forText(P.scale,P.fontStack||G));for(var ae=this.sections.length-1,de=0;de<P.text.length;++de)this.sectionIndex.push(ae)},cl.prototype.addImageSection=function(P){var G=P.image?P.image.name:"";if(G.length===0){H("Can't add FormattedSection with an empty image.");return}var ae=this.getNextImageSectionCharCode();if(!ae){H("Reached maximum number of images "+(Vw-Uw+2));return}this.text+=String.fromCharCode(ae),this.sections.push(hp.forImage(G)),this.sectionIndex.push(this.sections.length-1)},cl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=Vw?null:++this.imageSectionID:(this.imageSectionID=Uw,this.imageSectionID)};function vP(k,P){for(var G=[],ae=k.text,de=0,be=0,Me=P;be<Me.length;be+=1){var Be=Me[be];G.push(k.substring(de,Be)),de=Be}return de<ae.length&&G.push(k.substring(de,ae.length)),G}function kg(k,P,G,ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or){var sn=cl.fromFeature(k,de);Dt===Su.vertical&&sn.verticalizePunctuation();var en,In=Ja.processBidirectionalText,wn=Ja.processStyledBidirectionalText;if(In&&sn.sections.length===1){en=[];for(var Pn=In(sn.toString(),w1(sn,ct,be,P,ae,Yt,dr)),Bn=0,Yn=Pn;Bn<Yn.length;Bn+=1){var fa=Yn[Bn],ia=new cl;ia.text=fa,ia.sections=sn.sections;for(var Ba=0;Ba<fa.length;Ba++)ia.sectionIndex.push(0);en.push(ia)}}else if(wn){en=[];for(var Ma=wn(sn.text,sn.sectionIndex,w1(sn,ct,be,P,ae,Yt,dr)),Ca=0,si=Ma;Ca<si.length;Ca+=1){var Da=si[Ca],Na=new cl;Na.text=Da[0],Na.sectionIndex=Da[1],Na.sections=sn.sections,en.push(Na)}}else en=vP(sn,w1(sn,ct,be,P,ae,Yt,dr));var gi=[],ii={positionedLines:gi,text:sn.toString(),top:gt[1],bottom:gt[1],left:gt[0],right:gt[0],writingMode:Dt,iconsInText:!1,verticalizable:!1};return gP(ii,P,G,ae,en,Me,Be,tt,Dt,ct,er,Or),hP(gi)?!1:ii}var Ac={};Ac[9]=!0,Ac[10]=!0,Ac[11]=!0,Ac[12]=!0,Ac[13]=!0,Ac[32]=!0;var ou={};ou[10]=!0,ou[32]=!0,ou[38]=!0,ou[40]=!0,ou[41]=!0,ou[43]=!0,ou[45]=!0,ou[47]=!0,ou[173]=!0,ou[183]=!0,ou[8203]=!0,ou[8208]=!0,ou[8211]=!0,ou[8231]=!0;function Hw(k,P,G,ae,de,be){if(P.imageName){var tt=ae[P.imageName];return tt?tt.displaySize[0]*P.scale*Hs/be+de:0}else{var Me=G[P.fontStack],Be=Me&&Me[k];return Be?Be.metrics.advance*P.scale+de:0}}function pP(k,P,G,ae,de,be){for(var Me=0,Be=0;Be<k.length();Be++){var tt=k.getSection(Be);Me+=Hw(k.getCharCode(Be),tt,ae,de,P,be)}var ct=Math.max(1,Math.ceil(Me/G));return Me/ct}function Gw(k,P,G,ae){var de=Math.pow(k-P,2);return ae?k<P?de/2:de*2:de+Math.abs(G)*G}function dP(k,P,G){var ae=0;return k===10&&(ae-=1e4),G&&(ae+=150),(k===40||k===65288)&&(ae+=50),(P===41||P===65289)&&(ae+=50),ae}function jw(k,P,G,ae,de,be){for(var Me=null,Be=Gw(P,G,de,be),tt=0,ct=ae;tt<ct.length;tt+=1){var gt=ct[tt],Dt=P-gt.x,er=Gw(Dt,G,de,be)+gt.badness;er<=Be&&(Me=gt,Be=er)}return{index:k,x:P,priorBreak:Me,badness:Be}}function $w(k){return k?$w(k.priorBreak).concat(k.index):[]}function w1(k,P,G,ae,de,be,Me){if(be!=="point")return[];if(!k)return[];for(var Be=[],tt=pP(k,P,G,ae,de,Me),ct=k.text.indexOf("\u200B")>=0,gt=0,Dt=0;Dt<k.length();Dt++){var er=k.getSection(Dt),Yt=k.getCharCode(Dt);if(Ac[Yt]||(gt+=Hw(Yt,er,ae,de,P,Me)),Dt<k.length()-1){var dr=kr(Yt);(ou[Yt]||dr||er.imageName)&&Be.push(jw(Dt+1,gt,tt,Be,dP(Yt,k.getCharCode(Dt+1),dr&&ct),!1))}}return $w(jw(k.length(),gt,tt,Be,0,!0))}function T1(k){var P=.5,G=.5;switch(k){case"right":case"top-right":case"bottom-right":P=1;break;case"left":case"top-left":case"bottom-left":P=0;break}switch(k){case"bottom":case"bottom-right":case"bottom-left":G=1;break;case"top":case"top-right":case"top-left":G=0;break}return{horizontalAlign:P,verticalAlign:G}}function gP(k,P,G,ae,de,be,Me,Be,tt,ct,gt,Dt){for(var er=0,Yt=Ud,dr=0,Or=0,sn=Be==="right"?1:Be==="left"?0:.5,en=0,In=0,wn=de;In<wn.length;In+=1){var Pn=wn[In];Pn.trim();var Bn=Pn.getMaxScale(),Yn=(Bn-1)*Hs,fa={positionedGlyphs:[],lineOffset:0};k.positionedLines[en]=fa;var ia=fa.positionedGlyphs,Ba=0;if(!Pn.length()){Yt+=be,++en;continue}for(var Ma=0;Ma<Pn.length();Ma++){var Ca=Pn.getSection(Ma),si=Pn.getSectionIndex(Ma),Da=Pn.getCharCode(Ma),Na=0,gi=null,ii=null,Bi=null,so=Hs,Ui=!(tt===Su.horizontal||!gt&&!Vr(Da)||gt&&(Ac[Da]||ln(Da)));if(Ca.imageName){var Wo=ae[Ca.imageName];if(!Wo)continue;Bi=Ca.imageName,k.iconsInText=k.iconsInText||!0,ii=Wo.paddedRect;var qo=Wo.displaySize;Ca.scale=Ca.scale*Hs/Dt,gi={width:qo[0],height:qo[1],left:iu,top:-Nw,advance:Ui?qo[1]:qo[0]};var ks=Hs-qo[1]*Ca.scale;Na=Yn+ks,so=gi.advance;var gs=Ui?qo[0]*Ca.scale-Hs*Bn:qo[1]*Ca.scale-Hs*Bn;gs>0&&gs>Ba&&(Ba=gs)}else{var Vi=G[Ca.fontStack],Fi=Vi&&Vi[Da];if(Fi&&Fi.rect)ii=Fi.rect,gi=Fi.metrics;else{var go=P[Ca.fontStack],wo=go&&go[Da];if(!wo)continue;gi=wo.metrics}Na=(Bn-Ca.scale)*Hs}Ui?(k.verticalizable=!0,ia.push({glyph:Da,imageName:Bi,x:er,y:Yt+Na,vertical:Ui,scale:Ca.scale,fontStack:Ca.fontStack,sectionIndex:si,metrics:gi,rect:ii}),er+=so*Ca.scale+ct):(ia.push({glyph:Da,imageName:Bi,x:er,y:Yt+Na,vertical:Ui,scale:Ca.scale,fontStack:Ca.fontStack,sectionIndex:si,metrics:gi,rect:ii}),er+=gi.advance*Ca.scale+ct)}if(ia.length!==0){var hl=er-ct;dr=Math.max(hl,dr),yP(ia,0,ia.length-1,sn,Ba)}er=0;var vl=be*Bn+Ba;fa.lineOffset=Math.max(Ba,Yn),Yt+=vl,Or=Math.max(vl,Or),++en}var Cs=Yt-Ud,Ml=T1(Me),El=Ml.horizontalAlign,_s=Ml.verticalAlign;mP(k.positionedLines,sn,El,_s,dr,Or,be,Cs,de.length),k.top+=-_s*Cs,k.bottom=k.top+Cs,k.left+=-El*dr,k.right=k.left+dr}function yP(k,P,G,ae,de){if(!(!ae&&!de))for(var be=k[G],Me=be.metrics.advance*be.scale,Be=(k[G].x+Me)*ae,tt=P;tt<=G;tt++)k[tt].x-=Be,k[tt].y+=de}function mP(k,P,G,ae,de,be,Me,Be,tt){var ct=(P-G)*de,gt=0;be!==Me?gt=-Be*ae-Ud:gt=(-ae*tt+.5)*Me;for(var Dt=0,er=k;Dt<er.length;Dt+=1)for(var Yt=er[Dt],dr=0,Or=Yt.positionedGlyphs;dr<Or.length;dr+=1){var sn=Or[dr];sn.x+=ct,sn.y+=gt}}function xP(k,P,G){var ae=T1(G),de=ae.horizontalAlign,be=ae.verticalAlign,Me=P[0],Be=P[1],tt=Me-k.displaySize[0]*de,ct=tt+k.displaySize[0],gt=Be-k.displaySize[1]*be,Dt=gt+k.displaySize[1];return{image:k,top:gt,bottom:Dt,left:tt,right:ct}}function Ww(k,P,G,ae,de,be){var Me=k.image,Be;if(Me.content){var tt=Me.content,ct=Me.pixelRatio||1;Be=[tt[0]/ct,tt[1]/ct,Me.displaySize[0]-tt[2]/ct,Me.displaySize[1]-tt[3]/ct]}var gt=P.left*be,Dt=P.right*be,er,Yt,dr,Or;G==="width"||G==="both"?(Or=de[0]+gt-ae[3],Yt=de[0]+Dt+ae[1]):(Or=de[0]+(gt+Dt-Me.displaySize[0])/2,Yt=Or+Me.displaySize[0]);var sn=P.top*be,en=P.bottom*be;return G==="height"||G==="both"?(er=de[1]+sn-ae[0],dr=de[1]+en+ae[2]):(er=de[1]+(sn+en-Me.displaySize[1])/2,dr=er+Me.displaySize[1]),{image:Me,top:er,right:Yt,bottom:dr,left:Or,collisionPadding:Be}}var vp=function(k){function P(G,ae,de,be){k.call(this,G,ae),this.angle=de,be!==void 0&&(this.segment=be)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.clone=function(){return new P(this.x,this.y,this.angle,this.segment)},P}(f);Ue("Anchor",vp);var Zf=128;function A1(k,P){var G=P.expression;if(G.kind==="constant"){var ae=G.evaluate(new pi(k+1));return{kind:"constant",layoutSize:ae}}else{if(G.kind==="source")return{kind:"source"};for(var de=G.zoomStops,be=G.interpolationType,Me=0;Me<de.length&&de[Me]<=k;)Me++;Me=Math.max(0,Me-1);for(var Be=Me;Be<de.length&&de[Be]<k+1;)Be++;Be=Math.min(de.length-1,Be);var tt=de[Me],ct=de[Be];if(G.kind==="composite")return{kind:"composite",minZoom:tt,maxZoom:ct,interpolationType:be};var gt=G.evaluate(new pi(tt)),Dt=G.evaluate(new pi(ct));return{kind:"camera",minZoom:tt,maxZoom:ct,minSize:gt,maxSize:Dt,interpolationType:be}}}function Yw(k,P,G){var ae=P.uSize,de=P.uSizeT,be=G.lowerSize,Me=G.upperSize;return k.kind==="source"?be/Zf:k.kind==="composite"?Eo(be/Zf,Me/Zf,de):ae}function Xw(k,P){var G=0,ae=0;if(k.kind==="constant")ae=k.layoutSize;else if(k.kind!=="source"){var de=k.interpolationType,be=k.minZoom,Me=k.maxZoom,Be=de?g(ko.interpolationFactor(de,P,be,Me),0,1):0;k.kind==="camera"?ae=Eo(k.minSize,k.maxSize,Be):G=Be}return{uSizeT:G,uSize:ae}}var bP=Object.freeze({__proto__:null,getSizeData:A1,evaluateSizeForFeature:Yw,evaluateSizeForZoom:Xw,SIZE_PACK_FACTOR:Zf});function Zw(k,P,G,ae,de){if(P.segment===void 0)return!0;for(var be=P,Me=P.segment+1,Be=0;Be>-G/2;){if(Me--,Me<0)return!1;Be-=k[Me].dist(be),be=k[Me]}Be+=k[Me].dist(k[Me+1]),Me++;for(var tt=[],ct=0;Be<G/2;){var gt=k[Me-1],Dt=k[Me],er=k[Me+1];if(!er)return!1;var Yt=gt.angleTo(Dt)-Dt.angleTo(er);for(Yt=Math.abs((Yt+3*Math.PI)%(Math.PI*2)-Math.PI),tt.push({distance:Be,angleDelta:Yt}),ct+=Yt;Be-tt[0].distance>ae;)ct-=tt.shift().angleDelta;if(ct>de)return!1;Me++,Be+=Dt.dist(er)}return!0}function Kw(k){for(var P=0,G=0;G<k.length-1;G++)P+=k[G].dist(k[G+1]);return P}function Jw(k,P,G){return k?3/5*P*G:0}function Qw(k,P){return Math.max(k?k.right-k.left:0,P?P.right-P.left:0)}function _P(k,P,G,ae,de,be){for(var Me=Jw(G,de,be),Be=Qw(G,ae)*be,tt=0,ct=Kw(k)/2,gt=0;gt<k.length-1;gt++){var Dt=k[gt],er=k[gt+1],Yt=Dt.dist(er);if(tt+Yt>ct){var dr=(ct-tt)/Yt,Or=Eo(Dt.x,er.x,dr),sn=Eo(Dt.y,er.y,dr),en=new vp(Or,sn,er.angleTo(Dt),gt);return en._round(),!Me||Zw(k,en,Be,Me,P)?en:void 0}tt+=Yt}}function wP(k,P,G,ae,de,be,Me,Be,tt){var ct=Jw(ae,be,Me),gt=Qw(ae,de),Dt=gt*Me,er=k[0].x===0||k[0].x===tt||k[0].y===0||k[0].y===tt;P-Dt<P/4&&(P=Dt+P/4);var Yt=be*2,dr=er?P/2*Be%P:(gt/2+Yt)*Me*Be%P;return qw(k,dr,P,ct,G,Dt,er,!1,tt)}function qw(k,P,G,ae,de,be,Me,Be,tt){for(var ct=be/2,gt=Kw(k),Dt=0,er=P-G,Yt=[],dr=0;dr<k.length-1;dr++){for(var Or=k[dr],sn=k[dr+1],en=Or.dist(sn),In=sn.angleTo(Or);er+G<Dt+en;){er+=G;var wn=(er-Dt)/en,Pn=Eo(Or.x,sn.x,wn),Bn=Eo(Or.y,sn.y,wn);if(Pn>=0&&Pn<tt&&Bn>=0&&Bn<tt&&er-ct>=0&&er+ct<=gt){var Yn=new vp(Pn,Bn,In,dr);Yn._round(),(!ae||Zw(k,Yn,be,ae,de))&&Yt.push(Yn)}}Dt+=en}return!Be&&!Yt.length&&!Me&&(Yt=qw(k,Dt/2,G,ae,de,be,Me,!0,tt)),Yt}function e3(k,P,G,ae,de){for(var be=[],Me=0;Me<k.length;Me++)for(var Be=k[Me],tt=void 0,ct=0;ct<Be.length-1;ct++){var gt=Be[ct],Dt=Be[ct+1];gt.x<P&&Dt.x<P||(gt.x<P?gt=new f(P,gt.y+(Dt.y-gt.y)*((P-gt.x)/(Dt.x-gt.x)))._round():Dt.x<P&&(Dt=new f(P,gt.y+(Dt.y-gt.y)*((P-gt.x)/(Dt.x-gt.x)))._round()),!(gt.y<G&&Dt.y<G)&&(gt.y<G?gt=new f(gt.x+(Dt.x-gt.x)*((G-gt.y)/(Dt.y-gt.y)),G)._round():Dt.y<G&&(Dt=new f(gt.x+(Dt.x-gt.x)*((G-gt.y)/(Dt.y-gt.y)),G)._round()),!(gt.x>=ae&&Dt.x>=ae)&&(gt.x>=ae?gt=new f(ae,gt.y+(Dt.y-gt.y)*((ae-gt.x)/(Dt.x-gt.x)))._round():Dt.x>=ae&&(Dt=new f(ae,gt.y+(Dt.y-gt.y)*((ae-gt.x)/(Dt.x-gt.x)))._round()),!(gt.y>=de&&Dt.y>=de)&&(gt.y>=de?gt=new f(gt.x+(Dt.x-gt.x)*((de-gt.y)/(Dt.y-gt.y)),de)._round():Dt.y>=de&&(Dt=new f(gt.x+(Dt.x-gt.x)*((de-gt.y)/(Dt.y-gt.y)),de)._round()),(!tt||!gt.equals(tt[tt.length-1]))&&(tt=[gt],be.push(tt)),tt.push(Dt)))))}return be}var pp=iu;function t3(k,P,G,ae){var de=[],be=k.image,Me=be.pixelRatio,Be=be.paddedRect.w-2*pp,tt=be.paddedRect.h-2*pp,ct=k.right-k.left,gt=k.bottom-k.top,Dt=be.stretchX||[[0,Be]],er=be.stretchY||[[0,tt]],Yt=function(Vi,Fi){return Vi+Fi[1]-Fi[0]},dr=Dt.reduce(Yt,0),Or=er.reduce(Yt,0),sn=Be-dr,en=tt-Or,In=0,wn=dr,Pn=0,Bn=Or,Yn=0,fa=sn,ia=0,Ba=en;if(be.content&&ae){var Ma=be.content;In=Cg(Dt,0,Ma[0]),Pn=Cg(er,0,Ma[1]),wn=Cg(Dt,Ma[0],Ma[2]),Bn=Cg(er,Ma[1],Ma[3]),Yn=Ma[0]-In,ia=Ma[1]-Pn,fa=Ma[2]-Ma[0]-wn,Ba=Ma[3]-Ma[1]-Bn}var Ca=function(Vi,Fi,go,wo){var Wo=Lg(Vi.stretch-In,wn,ct,k.left),qo=Pg(Vi.fixed-Yn,fa,Vi.stretch,dr),ks=Lg(Fi.stretch-Pn,Bn,gt,k.top),gs=Pg(Fi.fixed-ia,Ba,Fi.stretch,Or),hl=Lg(go.stretch-In,wn,ct,k.left),vl=Pg(go.fixed-Yn,fa,go.stretch,dr),Cs=Lg(wo.stretch-Pn,Bn,gt,k.top),Ml=Pg(wo.fixed-ia,Ba,wo.stretch,Or),El=new f(Wo,ks),_s=new f(hl,ks),kl=new f(hl,Cs),Mu=new f(Wo,Cs),Yc=new f(qo/Me,gs/Me),xh=new f(vl/Me,Ml/Me),bh=P*Math.PI/180;if(bh){var _h=Math.sin(bh),wp=Math.cos(bh),df=[wp,-_h,_h,wp];El._matMult(df),_s._matMult(df),Mu._matMult(df),kl._matMult(df)}var zg=Vi.stretch+Vi.fixed,I1=go.stretch+go.fixed,Ng=Fi.stretch+Fi.fixed,R1=wo.stretch+wo.fixed,Wu={x:be.paddedRect.x+pp+zg,y:be.paddedRect.y+pp+Ng,w:I1-zg,h:R1-Ng},Tp=fa/Me/ct,Bg=Ba/Me/gt;return{tl:El,tr:_s,bl:Mu,br:kl,tex:Wu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yc,pixelOffsetBR:xh,minFontScaleX:Tp,minFontScaleY:Bg,isSDF:G}};if(!ae||!be.stretchX&&!be.stretchY)de.push(Ca({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Be+1},{fixed:0,stretch:tt+1}));else for(var si=r3(Dt,sn,dr),Da=r3(er,en,Or),Na=0;Na<si.length-1;Na++)for(var gi=si[Na],ii=si[Na+1],Bi=0;Bi<Da.length-1;Bi++){var so=Da[Bi],Ui=Da[Bi+1];de.push(Ca(gi,so,ii,Ui))}return de}function Cg(k,P,G){for(var ae=0,de=0,be=k;de<be.length;de+=1){var Me=be[de];ae+=Math.max(P,Math.min(G,Me[1]))-Math.max(P,Math.min(G,Me[0]))}return ae}function r3(k,P,G){for(var ae=[{fixed:-pp,stretch:0}],de=0,be=k;de<be.length;de+=1){var Me=be[de],Be=Me[0],tt=Me[1],ct=ae[ae.length-1];ae.push({fixed:Be-ct.stretch,stretch:ct.stretch}),ae.push({fixed:Be-ct.stretch,stretch:ct.stretch+(tt-Be)})}return ae.push({fixed:P+pp,stretch:G}),ae}function Lg(k,P,G,ae){return k/P*G+ae}function Pg(k,P,G,ae){return k-P*G/ae}function TP(k,P,G,ae,de,be,Me,Be){for(var tt=ae.layout.get("text-rotate").evaluate(be,{})*Math.PI/180,ct=[],gt=0,Dt=P.positionedLines;gt<Dt.length;gt+=1)for(var er=Dt[gt],Yt=0,dr=er.positionedGlyphs;Yt<dr.length;Yt+=1){var Or=dr[Yt];if(!!Or.rect){var sn=Or.rect||{},en=1,In=Nw+en,wn=!0,Pn=1,Bn=0,Yn=(de||Be)&&Or.vertical,fa=Or.metrics.advance*Or.scale/2;if(Be&&P.verticalizable){var ia=(Or.scale-1)*Hs,Ba=(Hs-Or.metrics.width*Or.scale)/2;Bn=er.lineOffset/2-(Or.imageName?-Ba:ia)}if(Or.imageName){var Ma=Me[Or.imageName];wn=Ma.sdf,Pn=Ma.pixelRatio,In=iu/Pn}var Ca=de?[Or.x+fa,Or.y]:[0,0],si=de?[0,0]:[Or.x+fa+G[0],Or.y+G[1]-Bn],Da=[0,0];Yn&&(Da=si,si=[0,0]);var Na=(Or.metrics.left-In)*Or.scale-fa+si[0],gi=(-Or.metrics.top-In)*Or.scale+si[1],ii=Na+sn.w*Or.scale/Pn,Bi=gi+sn.h*Or.scale/Pn,so=new f(Na,gi),Ui=new f(ii,gi),Vi=new f(Na,Bi),Fi=new f(ii,Bi);if(Yn){var go=new f(-fa,fa-Ud),wo=-Math.PI/2,Wo=Hs/2-fa,qo=Or.imageName?Wo:0,ks=new f(5-Ud-Wo,-qo),gs=new(Function.prototype.bind.apply(f,[null].concat(Da)));so._rotateAround(wo,go)._add(ks)._add(gs),Ui._rotateAround(wo,go)._add(ks)._add(gs),Vi._rotateAround(wo,go)._add(ks)._add(gs),Fi._rotateAround(wo,go)._add(ks)._add(gs)}if(tt){var hl=Math.sin(tt),vl=Math.cos(tt),Cs=[vl,-hl,hl,vl];so._matMult(Cs),Ui._matMult(Cs),Vi._matMult(Cs),Fi._matMult(Cs)}var Ml=new f(0,0),El=new f(0,0),_s=0,kl=0;ct.push({tl:so,tr:Ui,bl:Vi,br:Fi,tex:sn,writingMode:P.writingMode,glyphOffset:Ca,sectionIndex:Or.sectionIndex,isSDF:wn,pixelOffsetTL:Ml,pixelOffsetBR:El,minFontScaleX:_s,minFontScaleY:kl})}}return ct}var Ig=function(P,G,ae,de,be,Me,Be,tt,ct,gt){if(this.boxStartIndex=P.length,ct){var Dt=Me.top,er=Me.bottom,Yt=Me.collisionPadding;Yt&&(Dt-=Yt[1],er+=Yt[3]);var dr=er-Dt;dr>0&&(dr=Math.max(10,dr),this.circleDiameter=dr)}else{var Or=Me.top*Be-tt,sn=Me.bottom*Be+tt,en=Me.left*Be-tt,In=Me.right*Be+tt,wn=Me.collisionPadding;if(wn&&(en-=wn[0]*Be,Or-=wn[1]*Be,In+=wn[2]*Be,sn+=wn[3]*Be),gt){var Pn=new f(en,Or),Bn=new f(In,Or),Yn=new f(en,sn),fa=new f(In,sn),ia=gt*Math.PI/180;Pn._rotate(ia),Bn._rotate(ia),Yn._rotate(ia),fa._rotate(ia),en=Math.min(Pn.x,Bn.x,Yn.x,fa.x),In=Math.max(Pn.x,Bn.x,Yn.x,fa.x),Or=Math.min(Pn.y,Bn.y,Yn.y,fa.y),sn=Math.max(Pn.y,Bn.y,Yn.y,fa.y)}P.emplaceBack(G.x,G.y,en,Or,In,sn,ae,de,be)}this.boxEndIndex=P.length},dp=function(P,G){if(P===void 0&&(P=[]),G===void 0&&(G=AP),this.data=P,this.length=this.data.length,this.compare=G,this.length>0)for(var ae=(this.length>>1)-1;ae>=0;ae--)this._down(ae)};dp.prototype.push=function(P){this.data.push(P),this.length++,this._up(this.length-1)},dp.prototype.pop=function(){if(this.length!==0){var P=this.data[0],G=this.data.pop();return this.length--,this.length>0&&(this.data[0]=G,this._down(0)),P}},dp.prototype.peek=function(){return this.data[0]},dp.prototype._up=function(P){for(var G=this,ae=G.data,de=G.compare,be=ae[P];P>0;){var Me=P-1>>1,Be=ae[Me];if(de(be,Be)>=0)break;ae[P]=Be,P=Me}ae[P]=be},dp.prototype._down=function(P){for(var G=this,ae=G.data,de=G.compare,be=this.length>>1,Me=ae[P];P<be;){var Be=(P<<1)+1,tt=ae[Be],ct=Be+1;if(ct<this.length&&de(ae[ct],tt)<0&&(Be=ct,tt=ae[ct]),de(tt,Me)>=0)break;ae[P]=tt,P=Be}ae[P]=Me};function AP(k,P){return k<P?-1:k>P?1:0}function SP(k,P,G){P===void 0&&(P=1),G===void 0&&(G=!1);for(var ae=1/0,de=1/0,be=-1/0,Me=-1/0,Be=k[0],tt=0;tt<Be.length;tt++){var ct=Be[tt];(!tt||ct.x<ae)&&(ae=ct.x),(!tt||ct.y<de)&&(de=ct.y),(!tt||ct.x>be)&&(be=ct.x),(!tt||ct.y>Me)&&(Me=ct.y)}var gt=be-ae,Dt=Me-de,er=Math.min(gt,Dt),Yt=er/2,dr=new dp([],MP);if(er===0)return new f(ae,de);for(var Or=ae;Or<be;Or+=er)for(var sn=de;sn<Me;sn+=er)dr.push(new gp(Or+Yt,sn+Yt,Yt,k));for(var en=kP(k),In=dr.length;dr.length;){var wn=dr.pop();(wn.d>en.d||!en.d)&&(en=wn,G&&console.log("found best %d after %d probes",Math.round(1e4*wn.d)/1e4,In)),!(wn.max-en.d<=P)&&(Yt=wn.h/2,dr.push(new gp(wn.p.x-Yt,wn.p.y-Yt,Yt,k)),dr.push(new gp(wn.p.x+Yt,wn.p.y-Yt,Yt,k)),dr.push(new gp(wn.p.x-Yt,wn.p.y+Yt,Yt,k)),dr.push(new gp(wn.p.x+Yt,wn.p.y+Yt,Yt,k)),In+=4)}return G&&(console.log("num probes: "+In),console.log("best distance: "+en.d)),en.p}function MP(k,P){return P.max-k.max}function gp(k,P,G,ae){this.p=new f(k,P),this.h=G,this.d=EP(this.p,ae),this.max=this.d+this.h*Math.SQRT2}function EP(k,P){for(var G=!1,ae=1/0,de=0;de<P.length;de++)for(var be=P[de],Me=0,Be=be.length,tt=Be-1;Me<Be;tt=Me++){var ct=be[Me],gt=be[tt];ct.y>k.y!=gt.y>k.y&&k.x<(gt.x-ct.x)*(k.y-ct.y)/(gt.y-ct.y)+ct.x&&(G=!G),ae=Math.min(ae,Wf(k,ct,gt))}return(G?1:-1)*Math.sqrt(ae)}function kP(k){for(var P=0,G=0,ae=0,de=k[0],be=0,Me=de.length,Be=Me-1;be<Me;Be=be++){var tt=de[be],ct=de[Be],gt=tt.x*ct.y-ct.x*tt.y;G+=(tt.x+ct.x)*gt,ae+=(tt.y+ct.y)*gt,P+=gt*3}return new gp(G/P,ae/P,0,k)}var yp=7,S1=Number.POSITIVE_INFINITY;function n3(k,P){function G(de,be){var Me=0,Be=0;be<0&&(be=0);var tt=be/Math.sqrt(2);switch(de){case"top-right":case"top-left":Be=tt-yp;break;case"bottom-right":case"bottom-left":Be=-tt+yp;break;case"bottom":Be=-be+yp;break;case"top":Be=be-yp;break}switch(de){case"top-right":case"bottom-right":Me=-tt;break;case"top-left":case"bottom-left":Me=tt;break;case"left":Me=be;break;case"right":Me=-be;break}return[Me,Be]}function ae(de,be,Me){var Be=0,tt=0;switch(be=Math.abs(be),Me=Math.abs(Me),de){case"top-right":case"top-left":case"top":tt=Me-yp;break;case"bottom-right":case"bottom-left":case"bottom":tt=-Me+yp;break}switch(de){case"top-right":case"bottom-right":case"right":Be=-be;break;case"top-left":case"bottom-left":case"left":Be=be;break}return[Be,tt]}return P[1]!==S1?ae(k,P[0],P[1]):G(k,P[0])}function CP(k,P,G,ae,de,be,Me){k.createArrays();var Be=512*k.overscaling;k.tilePixelRatio=$a/Be,k.compareText={},k.iconsNeedLinear=!1;var tt=k.layers[0].layout,ct=k.layers[0]._unevaluatedLayout._values,gt={};if(k.textSizeData.kind==="composite"){var Dt=k.textSizeData,er=Dt.minZoom,Yt=Dt.maxZoom;gt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new pi(er),Me),ct["text-size"].possiblyEvaluate(new pi(Yt),Me)]}if(k.iconSizeData.kind==="composite"){var dr=k.iconSizeData,Or=dr.minZoom,sn=dr.maxZoom;gt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new pi(Or),Me),ct["icon-size"].possiblyEvaluate(new pi(sn),Me)]}gt.layoutTextSize=ct["text-size"].possiblyEvaluate(new pi(k.zoom+1),Me),gt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new pi(k.zoom+1),Me),gt.textMaxSize=ct["text-size"].possiblyEvaluate(new pi(18));for(var en=tt.get("text-line-height")*Hs,In=tt.get("text-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",wn=tt.get("text-keep-upright"),Pn=tt.get("text-size"),Bn=function(){var ia=fa[Yn],Ba=tt.get("text-font").evaluate(ia,{},Me).join(","),Ma=Pn.evaluate(ia,{},Me),Ca=gt.layoutTextSize.evaluate(ia,{},Me),si=gt.layoutIconSize.evaluate(ia,{},Me),Da={horizontal:{},vertical:void 0},Na=ia.text,gi=[0,0];if(Na){var ii=Na.toString(),Bi=tt.get("text-letter-spacing").evaluate(ia,{},Me)*Hs,so=qr(ii)?Bi:0,Ui=tt.get("text-anchor").evaluate(ia,{},Me),Vi=tt.get("text-variable-anchor");if(!Vi){var Fi=tt.get("text-radial-offset").evaluate(ia,{},Me);Fi?gi=n3(Ui,[Fi*Hs,S1]):gi=tt.get("text-offset").evaluate(ia,{},Me).map(function(Yc){return Yc*Hs})}var go=In?"center":tt.get("text-justify").evaluate(ia,{},Me),wo=tt.get("symbol-placement"),Wo=wo==="point"?tt.get("text-max-width").evaluate(ia,{},Me)*Hs:0,qo=function(){k.allowVerticalPlacement&&Sr(ii)&&(Da.vertical=kg(Na,P,G,de,Ba,Wo,en,Ui,"left",so,gi,Su.vertical,!0,wo,Ca,Ma))};if(!In&&Vi){for(var ks=go==="auto"?Vi.map(function(Yc){return M1(Yc)}):[go],gs=!1,hl=0;hl<ks.length;hl++){var vl=ks[hl];if(!Da.horizontal[vl])if(gs)Da.horizontal[vl]=Da.horizontal[0];else{var Cs=kg(Na,P,G,de,Ba,Wo,en,"center",vl,so,gi,Su.horizontal,!1,wo,Ca,Ma);Cs&&(Da.horizontal[vl]=Cs,gs=Cs.positionedLines.length===1)}}qo()}else{go==="auto"&&(go=M1(Ui));var Ml=kg(Na,P,G,de,Ba,Wo,en,Ui,go,so,gi,Su.horizontal,!1,wo,Ca,Ma);Ml&&(Da.horizontal[go]=Ml),qo(),Sr(ii)&&In&&wn&&(Da.vertical=kg(Na,P,G,de,Ba,Wo,en,Ui,go,so,gi,Su.vertical,!1,wo,Ca,Ma))}}var El=void 0,_s=!1;if(ia.icon&&ia.icon.name){var kl=ae[ia.icon.name];kl&&(El=xP(de[ia.icon.name],tt.get("icon-offset").evaluate(ia,{},Me),tt.get("icon-anchor").evaluate(ia,{},Me)),_s=kl.sdf,k.sdfIcons===void 0?k.sdfIcons=kl.sdf:k.sdfIcons!==kl.sdf&&H("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(kl.pixelRatio!==k.pixelRatio||tt.get("icon-rotate").constantOr(1)!==0)&&(k.iconsNeedLinear=!0))}var Mu=i3(Da.horizontal)||Da.vertical;k.iconsInText=Mu?Mu.iconsInText:!1,(Mu||El)&&LP(k,ia,Da,El,ae,gt,Ca,si,gi,_s,Me)},Yn=0,fa=k.features;Yn<fa.length;Yn+=1)Bn();be&&k.generateCollisionDebugBuffers()}function M1(k){switch(k){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function LP(k,P,G,ae,de,be,Me,Be,tt,ct,gt){var Dt=be.textMaxSize.evaluate(P,{});Dt===void 0&&(Dt=Me);var er=k.layers[0].layout,Yt=er.get("icon-offset").evaluate(P,{},gt),dr=i3(G.horizontal),Or=24,sn=Me/Or,en=k.tilePixelRatio*sn,In=k.tilePixelRatio*Dt/Or,wn=k.tilePixelRatio*Be,Pn=k.tilePixelRatio*er.get("symbol-spacing"),Bn=er.get("text-padding")*k.tilePixelRatio,Yn=er.get("icon-padding")*k.tilePixelRatio,fa=er.get("text-max-angle")/180*Math.PI,ia=er.get("text-rotation-alignment")==="map"&&er.get("symbol-placement")!=="point",Ba=er.get("icon-rotation-alignment")==="map"&&er.get("symbol-placement")!=="point",Ma=er.get("symbol-placement"),Ca=Pn/2,si=er.get("icon-text-fit"),Da;ae&&si!=="none"&&(k.allowVerticalPlacement&&G.vertical&&(Da=Ww(ae,G.vertical,si,er.get("icon-text-fit-padding"),Yt,sn)),dr&&(ae=Ww(ae,dr,si,er.get("icon-text-fit-padding"),Yt,sn)));var Na=function(wp,df){df.x<0||df.x>=$a||df.y<0||df.y>=$a||PP(k,df,wp,G,ae,de,Da,k.layers[0],k.collisionBoxArray,P.index,P.sourceLayerIndex,k.index,en,Bn,ia,tt,wn,Yn,Ba,Yt,P,be,ct,gt,Me)};if(Ma==="line")for(var gi=0,ii=e3(P.geometry,0,0,$a,$a);gi<ii.length;gi+=1)for(var Bi=ii[gi],so=wP(Bi,Pn,fa,G.vertical||dr,ae,Or,In,k.overscaling,$a),Ui=0,Vi=so;Ui<Vi.length;Ui+=1){var Fi=Vi[Ui],go=dr;(!go||!IP(k,go.text,Ca,Fi))&&Na(Bi,Fi)}else if(Ma==="line-center")for(var wo=0,Wo=P.geometry;wo<Wo.length;wo+=1){var qo=Wo[wo];if(qo.length>1){var ks=_P(qo,fa,G.vertical||dr,ae,Or,In);ks&&Na(qo,ks)}}else if(P.type==="Polygon")for(var gs=0,hl=d1(P.geometry,0);gs<hl.length;gs+=1){var vl=hl[gs],Cs=SP(vl,16);Na(vl[0],new vp(Cs.x,Cs.y,0))}else if(P.type==="LineString")for(var Ml=0,El=P.geometry;Ml<El.length;Ml+=1){var _s=El[Ml];Na(_s,new vp(_s[0].x,_s[0].y,0))}else if(P.type==="Point")for(var kl=0,Mu=P.geometry;kl<Mu.length;kl+=1)for(var Yc=Mu[kl],xh=0,bh=Yc;xh<bh.length;xh+=1){var _h=bh[xh];Na([_h],new vp(_h.x,_h.y,0))}}var Vd=255,yh=Vd*Zf;function a3(k,P,G,ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr){var Or=TP(P,G,Be,de,be,Me,ae,k.allowVerticalPlacement),sn=k.textSizeData,en=null;sn.kind==="source"?(en=[Zf*de.layout.get("text-size").evaluate(Me,{})],en[0]>yh&&H(k.layerIds[0]+': Value for "text-size" is >= '+Vd+'. Reduce your "text-size".')):sn.kind==="composite"&&(en=[Zf*Yt.compositeTextSizes[0].evaluate(Me,{},dr),Zf*Yt.compositeTextSizes[1].evaluate(Me,{},dr)],(en[0]>yh||en[1]>yh)&&H(k.layerIds[0]+': Value for "text-size" is >= '+Vd+'. Reduce your "text-size".')),k.addSymbols(k.text,Or,en,Be,be,Me,ct,P,tt.lineStartIndex,tt.lineLength,er,dr);for(var In=0,wn=gt;In<wn.length;In+=1){var Pn=wn[In];Dt[Pn]=k.text.placedSymbolArray.length-1}return Or.length*4}function i3(k){for(var P in k)return k[P];return null}function PP(k,P,G,ae,de,be,Me,Be,tt,ct,gt,Dt,er,Yt,dr,Or,sn,en,In,wn,Pn,Bn,Yn,fa,ia){var Ba,Ma=k.addToLineVertexArray(P,G),Ca,si,Da,Na,gi=0,ii=0,Bi=0,so=0,Ui=-1,Vi=-1,Fi={},go=Fe(""),wo=0,Wo=0;if(Be._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ba=Be.layout.get("text-offset").evaluate(Pn,{},fa).map(function(jd){return jd*Hs}),wo=Ba[0],Wo=Ba[1]):(wo=Be.layout.get("text-radial-offset").evaluate(Pn,{},fa)*Hs,Wo=S1),k.allowVerticalPlacement&&ae.vertical){var qo=Be.layout.get("text-rotate").evaluate(Pn,{},fa),ks=qo+90,gs=ae.vertical;Da=new Ig(tt,P,ct,gt,Dt,gs,er,Yt,dr,ks),Me&&(Na=new Ig(tt,P,ct,gt,Dt,Me,sn,en,dr,ks))}if(de){var hl=Be.layout.get("icon-rotate").evaluate(Pn,{}),vl=Be.layout.get("icon-text-fit")!=="none",Cs=t3(de,hl,Yn,vl),Ml=Me?t3(Me,hl,Yn,vl):void 0;si=new Ig(tt,P,ct,gt,Dt,de,sn,en,!1,hl),gi=Cs.length*4;var El=k.iconSizeData,_s=null;El.kind==="source"?(_s=[Zf*Be.layout.get("icon-size").evaluate(Pn,{})],_s[0]>yh&&H(k.layerIds[0]+': Value for "icon-size" is >= '+Vd+'. Reduce your "icon-size".')):El.kind==="composite"&&(_s=[Zf*Bn.compositeIconSizes[0].evaluate(Pn,{},fa),Zf*Bn.compositeIconSizes[1].evaluate(Pn,{},fa)],(_s[0]>yh||_s[1]>yh)&&H(k.layerIds[0]+': Value for "icon-size" is >= '+Vd+'. Reduce your "icon-size".')),k.addSymbols(k.icon,Cs,_s,wn,In,Pn,!1,P,Ma.lineStartIndex,Ma.lineLength,-1,fa),Ui=k.icon.placedSymbolArray.length-1,Ml&&(ii=Ml.length*4,k.addSymbols(k.icon,Ml,_s,wn,In,Pn,Su.vertical,P,Ma.lineStartIndex,Ma.lineLength,-1,fa),Vi=k.icon.placedSymbolArray.length-1)}for(var kl in ae.horizontal){var Mu=ae.horizontal[kl];if(!Ca){go=Fe(Mu.text);var Yc=Be.layout.get("text-rotate").evaluate(Pn,{},fa);Ca=new Ig(tt,P,ct,gt,Dt,Mu,er,Yt,dr,Yc)}var xh=Mu.positionedLines.length===1;if(Bi+=a3(k,P,Mu,be,Be,dr,Pn,Or,Ma,ae.vertical?Su.horizontal:Su.horizontalOnly,xh?Object.keys(ae.horizontal):[kl],Fi,Ui,Bn,fa),xh)break}ae.vertical&&(so+=a3(k,P,ae.vertical,be,Be,dr,Pn,Or,Ma,Su.vertical,["vertical"],Fi,Vi,Bn,fa));var bh=Ca?Ca.boxStartIndex:k.collisionBoxArray.length,_h=Ca?Ca.boxEndIndex:k.collisionBoxArray.length,wp=Da?Da.boxStartIndex:k.collisionBoxArray.length,df=Da?Da.boxEndIndex:k.collisionBoxArray.length,zg=si?si.boxStartIndex:k.collisionBoxArray.length,I1=si?si.boxEndIndex:k.collisionBoxArray.length,Ng=Na?Na.boxStartIndex:k.collisionBoxArray.length,R1=Na?Na.boxEndIndex:k.collisionBoxArray.length,Wu=-1,Tp=function(jd,_3){return jd&&jd.circleDiameter?Math.max(jd.circleDiameter,_3):_3};Wu=Tp(Ca,Wu),Wu=Tp(Da,Wu),Wu=Tp(si,Wu),Wu=Tp(Na,Wu);var Bg=Wu>-1?1:0;Bg&&(Wu*=ia/Hs),k.glyphOffsetArray.length>=oo.MAX_GLYPHS&&H("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Pn.sortKey!==void 0&&k.addToSortKeyRanges(k.symbolInstances.length,Pn.sortKey),k.symbolInstances.emplaceBack(P.x,P.y,Fi.right>=0?Fi.right:-1,Fi.center>=0?Fi.center:-1,Fi.left>=0?Fi.left:-1,Fi.vertical||-1,Ui,Vi,go,bh,_h,wp,df,zg,I1,Ng,R1,ct,Bi,so,gi,ii,Bg,0,er,wo,Wo,Wu)}function IP(k,P,G,ae){var de=k.compareText;if(!(P in de))de[P]=[];else for(var be=de[P],Me=be.length-1;Me>=0;Me--)if(ae.dist(be[Me])<G)return!0;return de[P].push(ae),!1}var RP=up.VectorTileFeature.types,DP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Rg(k,P,G,ae,de,be,Me,Be,tt,ct,gt,Dt,er){var Yt=Be?Math.min(yh,Math.round(Be[0])):0,dr=Be?Math.min(yh,Math.round(Be[1])):0;k.emplaceBack(P,G,Math.round(ae*32),Math.round(de*32),be,Me,(Yt<<1)+(tt?1:0),dr,ct*16,gt*16,Dt*256,er*256)}function E1(k,P,G){k.emplaceBack(P.x,P.y,G),k.emplaceBack(P.x,P.y,G),k.emplaceBack(P.x,P.y,G),k.emplaceBack(P.x,P.y,G)}function FP(k){for(var P=0,G=k.sections;P<G.length;P+=1){var ae=G[P];if(aa(ae.text))return!0}return!1}var mp=function(P){this.layoutVertexArray=new xc,this.indexArray=new $f,this.programConfigurations=P,this.segments=new Y,this.dynamicLayoutVertexArray=new Td,this.opacityVertexArray=new Ad,this.placedSymbolArray=new vh};mp.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},mp.prototype.upload=function(P,G,ae,de){this.isEmpty()||(ae&&(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,x1.members),this.indexBuffer=P.createIndexBuffer(this.indexArray,G),this.dynamicLayoutVertexBuffer=P.createVertexBuffer(this.dynamicLayoutVertexArray,OL.members,!0),this.opacityVertexBuffer=P.createVertexBuffer(this.opacityVertexArray,DP,!0),this.opacityVertexBuffer.itemSize=1),(ae||de)&&this.programConfigurations.upload(P))},mp.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ue("SymbolBuffers",mp);var Hd=function(P,G,ae){this.layoutVertexArray=new P,this.layoutAttributes=G,this.indexArray=new ae,this.segments=new Y,this.collisionVertexArray=new $l};Hd.prototype.upload=function(P){this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=P.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=P.createVertexBuffer(this.collisionVertexArray,zL.members,!0)},Hd.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ue("CollisionBuffers",Hd);var oo=function(P){this.collisionBoxArray=P.collisionBoxArray,this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(tt){return tt.id}),this.index=P.index,this.pixelRatio=P.pixelRatio,this.sourceLayerIndex=P.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ap([]),this.placementViewportMatrix=ap([]);var G=this.layers[0],ae=G._unevaluatedLayout._values;this.textSizeData=A1(this.zoom,ae["text-size"]),this.iconSizeData=A1(this.zoom,ae["icon-size"]);var de=this.layers[0].layout,be=de.get("symbol-sort-key"),Me=de.get("symbol-z-order");this.sortFeaturesByKey=Me!=="viewport-y"&&be.constantOr(1)!==void 0;var Be=Me==="viewport-y"||Me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Be&&(de.get("text-allow-overlap")||de.get("icon-allow-overlap")||de.get("text-ignore-placement")||de.get("icon-ignore-placement")),de.get("symbol-placement")==="point"&&(this.writingModes=de.get("text-writing-mode").map(function(tt){return Su[tt]})),this.stateDependentLayerIds=this.layers.filter(function(tt){return tt.isStateDependent()}).map(function(tt){return tt.id}),this.sourceID=P.sourceID};oo.prototype.createArrays=function(){this.text=new mp(new ui(x1.members,this.layers,this.zoom,function(P){return/^text/.test(P)})),this.icon=new mp(new ui(x1.members,this.layers,this.zoom,function(P){return/^icon/.test(P)})),this.glyphOffsetArray=new ju,this.lineVertexArray=new dg,this.symbolInstances=new pg},oo.prototype.calculateGlyphDependencies=function(P,G,ae,de,be){for(var Me=0;Me<P.length;Me++)if(G[P.charCodeAt(Me)]=!0,(ae||de)&&be){var Be=zd[P.charAt(Me)];Be&&(G[Be.charCodeAt(0)]=!0)}},oo.prototype.populate=function(P,G,ae){var de=this.layers[0],be=de.layout,Me=be.get("text-font"),Be=be.get("text-field"),tt=be.get("icon-image"),ct=(Be.value.kind!=="constant"||Be.value.value instanceof to&&!Be.value.value.isEmpty()||Be.value.value.toString().length>0)&&(Me.value.kind!=="constant"||Me.value.value.length>0),gt=tt.value.kind!=="constant"||!!tt.value.value||Object.keys(tt.parameters).length>0,Dt=be.get("symbol-sort-key");if(this.features=[],!(!ct&&!gt)){for(var er=G.iconDependencies,Yt=G.glyphDependencies,dr=G.availableImages,Or=new pi(this.zoom),sn=0,en=P;sn<en.length;sn+=1){var In=en[sn],wn=In.feature,Pn=In.id,Bn=In.index,Yn=In.sourceLayerIndex,fa=de._featureFilter.needGeometry,ia={type:wn.type,id:Pn,properties:wn.properties,geometry:fa?eo(wn):[]};if(!!de._featureFilter.filter(Or,ia,ae)){fa||(ia.geometry=eo(wn));var Ba=void 0;if(ct){var Ma=de.getValueAndResolveTokens("text-field",ia,ae,dr),Ca=to.factory(Ma);FP(Ca)&&(this.hasRTLText=!0),(!this.hasRTLText||Po()==="unavailable"||this.hasRTLText&&Ja.isParsed())&&(Ba=UL(Ca,de,ia))}var si=void 0;if(gt){var Da=de.getValueAndResolveTokens("icon-image",ia,ae,dr);Da instanceof Xo?si=Da:si=Xo.fromString(Da)}if(!(!Ba&&!si)){var Na=this.sortFeaturesByKey?Dt.evaluate(ia,{},ae):void 0,gi={id:Pn,text:Ba,icon:si,index:Bn,sourceLayerIndex:Yn,geometry:eo(wn),properties:wn.properties,type:RP[wn.type],sortKey:Na};if(this.features.push(gi),si&&(er[si.name]=!0),Ba){var ii=Me.evaluate(ia,{},ae).join(","),Bi=be.get("text-rotation-alignment")==="map"&&be.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Su.vertical)>=0;for(var so=0,Ui=Ba.sections;so<Ui.length;so+=1){var Vi=Ui[so];if(Vi.image)er[Vi.image.name]=!0;else{var Fi=Sr(Ba.toString()),go=Vi.fontStack||ii,wo=Yt[go]=Yt[go]||{};this.calculateGlyphDependencies(Vi.text,wo,Bi,this.allowVerticalPlacement,Fi)}}}}}}be.get("symbol-placement")==="line"&&(this.features=VL(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Wo,qo){return Wo.sortKey-qo.sortKey})}},oo.prototype.update=function(P,G,ae){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(P,G,this.layers,ae),this.icon.programConfigurations.updatePaintArrays(P,G,this.layers,ae))},oo.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},oo.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},oo.prototype.upload=function(P){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(P),this.iconCollisionBox.upload(P)),this.text.upload(P,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(P,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},oo.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},oo.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},oo.prototype.addToLineVertexArray=function(P,G){var ae=this.lineVertexArray.length;if(P.segment!==void 0){for(var de=P.dist(G[P.segment+1]),be=P.dist(G[P.segment]),Me={},Be=P.segment+1;Be<G.length;Be++)Me[Be]={x:G[Be].x,y:G[Be].y,tileUnitDistanceFromAnchor:de},Be<G.length-1&&(de+=G[Be+1].dist(G[Be]));for(var tt=P.segment||0;tt>=0;tt--)Me[tt]={x:G[tt].x,y:G[tt].y,tileUnitDistanceFromAnchor:be},tt>0&&(be+=G[tt-1].dist(G[tt]));for(var ct=0;ct<G.length;ct++){var gt=Me[ct];this.lineVertexArray.emplaceBack(gt.x,gt.y,gt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ae,lineLength:this.lineVertexArray.length-ae}},oo.prototype.addSymbols=function(P,G,ae,de,be,Me,Be,tt,ct,gt,Dt,er){for(var Yt=P.indexArray,dr=P.layoutVertexArray,Or=P.segments.prepareSegment(4*G.length,dr,Yt,Me.sortKey),sn=this.glyphOffsetArray.length,en=Or.vertexLength,In=this.allowVerticalPlacement&&Be===Su.vertical?Math.PI/2:0,wn=Me.text&&Me.text.sections,Pn=0;Pn<G.length;Pn++){var Bn=G[Pn],Yn=Bn.tl,fa=Bn.tr,ia=Bn.bl,Ba=Bn.br,Ma=Bn.tex,Ca=Bn.pixelOffsetTL,si=Bn.pixelOffsetBR,Da=Bn.minFontScaleX,Na=Bn.minFontScaleY,gi=Bn.glyphOffset,ii=Bn.isSDF,Bi=Bn.sectionIndex,so=Or.vertexLength,Ui=gi[1];Rg(dr,tt.x,tt.y,Yn.x,Ui+Yn.y,Ma.x,Ma.y,ae,ii,Ca.x,Ca.y,Da,Na),Rg(dr,tt.x,tt.y,fa.x,Ui+fa.y,Ma.x+Ma.w,Ma.y,ae,ii,si.x,Ca.y,Da,Na),Rg(dr,tt.x,tt.y,ia.x,Ui+ia.y,Ma.x,Ma.y+Ma.h,ae,ii,Ca.x,si.y,Da,Na),Rg(dr,tt.x,tt.y,Ba.x,Ui+Ba.y,Ma.x+Ma.w,Ma.y+Ma.h,ae,ii,si.x,si.y,Da,Na),E1(P.dynamicLayoutVertexArray,tt,In),Yt.emplaceBack(so,so+1,so+2),Yt.emplaceBack(so+1,so+2,so+3),Or.vertexLength+=4,Or.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(gi[0]),(Pn===G.length-1||Bi!==G[Pn+1].sectionIndex)&&P.programConfigurations.populatePaintArrays(dr.length,Me,Me.index,{},er,wn&&wn[Bi])}P.placedSymbolArray.emplaceBack(tt.x,tt.y,sn,this.glyphOffsetArray.length-sn,en,ct,gt,tt.segment,ae?ae[0]:0,ae?ae[1]:0,de[0],de[1],Be,0,!1,0,Dt)},oo.prototype._addCollisionDebugVertex=function(P,G,ae,de,be,Me){return G.emplaceBack(0,0),P.emplaceBack(ae.x,ae.y,de,be,Math.round(Me.x),Math.round(Me.y))},oo.prototype.addCollisionDebugVertices=function(P,G,ae,de,be,Me,Be){var tt=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),ct=tt.vertexLength,gt=be.layoutVertexArray,Dt=be.collisionVertexArray,er=Be.anchorX,Yt=Be.anchorY;this._addCollisionDebugVertex(gt,Dt,Me,er,Yt,new f(P,G)),this._addCollisionDebugVertex(gt,Dt,Me,er,Yt,new f(ae,G)),this._addCollisionDebugVertex(gt,Dt,Me,er,Yt,new f(ae,de)),this._addCollisionDebugVertex(gt,Dt,Me,er,Yt,new f(P,de)),tt.vertexLength+=4;var dr=be.indexArray;dr.emplaceBack(ct,ct+1),dr.emplaceBack(ct+1,ct+2),dr.emplaceBack(ct+2,ct+3),dr.emplaceBack(ct+3,ct),tt.primitiveLength+=4},oo.prototype.addDebugCollisionBoxes=function(P,G,ae,de){for(var be=P;be<G;be++){var Me=this.collisionBoxArray.get(be),Be=Me.x1,tt=Me.y1,ct=Me.x2,gt=Me.y2;this.addCollisionDebugVertices(Be,tt,ct,gt,de?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,ae)}},oo.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hd(qv,Rw.members,av),this.iconCollisionBox=new Hd(qv,Rw.members,av);for(var P=0;P<this.symbolInstances.length;P++){var G=this.symbolInstances.get(P);this.addDebugCollisionBoxes(G.textBoxStartIndex,G.textBoxEndIndex,G,!0),this.addDebugCollisionBoxes(G.verticalTextBoxStartIndex,G.verticalTextBoxEndIndex,G,!0),this.addDebugCollisionBoxes(G.iconBoxStartIndex,G.iconBoxEndIndex,G,!1),this.addDebugCollisionBoxes(G.verticalIconBoxStartIndex,G.verticalIconBoxEndIndex,G,!1)}},oo.prototype._deserializeCollisionBoxesForSymbol=function(P,G,ae,de,be,Me,Be,tt,ct){for(var gt={},Dt=G;Dt<ae;Dt++){var er=P.get(Dt);gt.textBox={x1:er.x1,y1:er.y1,x2:er.x2,y2:er.y2,anchorPointX:er.anchorPointX,anchorPointY:er.anchorPointY},gt.textFeatureIndex=er.featureIndex;break}for(var Yt=de;Yt<be;Yt++){var dr=P.get(Yt);gt.verticalTextBox={x1:dr.x1,y1:dr.y1,x2:dr.x2,y2:dr.y2,anchorPointX:dr.anchorPointX,anchorPointY:dr.anchorPointY},gt.verticalTextFeatureIndex=dr.featureIndex;break}for(var Or=Me;Or<Be;Or++){var sn=P.get(Or);gt.iconBox={x1:sn.x1,y1:sn.y1,x2:sn.x2,y2:sn.y2,anchorPointX:sn.anchorPointX,anchorPointY:sn.anchorPointY},gt.iconFeatureIndex=sn.featureIndex;break}for(var en=tt;en<ct;en++){var In=P.get(en);gt.verticalIconBox={x1:In.x1,y1:In.y1,x2:In.x2,y2:In.y2,anchorPointX:In.anchorPointX,anchorPointY:In.anchorPointY},gt.verticalIconFeatureIndex=In.featureIndex;break}return gt},oo.prototype.deserializeCollisionBoxes=function(P){this.collisionArrays=[];for(var G=0;G<this.symbolInstances.length;G++){var ae=this.symbolInstances.get(G);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(P,ae.textBoxStartIndex,ae.textBoxEndIndex,ae.verticalTextBoxStartIndex,ae.verticalTextBoxEndIndex,ae.iconBoxStartIndex,ae.iconBoxEndIndex,ae.verticalIconBoxStartIndex,ae.verticalIconBoxEndIndex))}},oo.prototype.hasTextData=function(){return this.text.segments.get().length>0},oo.prototype.hasIconData=function(){return this.icon.segments.get().length>0},oo.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},oo.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},oo.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},oo.prototype.addIndicesForPlacedSymbol=function(P,G){for(var ae=P.placedSymbolArray.get(G),de=ae.vertexStartIndex+ae.numGlyphs*4,be=ae.vertexStartIndex;be<de;be+=4)P.indexArray.emplaceBack(be,be+1,be+2),P.indexArray.emplaceBack(be+1,be+2,be+3)},oo.prototype.getSortedSymbolIndexes=function(P){if(this.sortedAngle===P&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var G=Math.sin(P),ae=Math.cos(P),de=[],be=[],Me=[],Be=0;Be<this.symbolInstances.length;++Be){Me.push(Be);var tt=this.symbolInstances.get(Be);de.push(Math.round(G*tt.anchorX+ae*tt.anchorY)|0),be.push(tt.featureIndex)}return Me.sort(function(ct,gt){return de[ct]-de[gt]||be[gt]-be[ct]}),Me},oo.prototype.addToSortKeyRanges=function(P,G){var ae=this.sortKeyRanges[this.sortKeyRanges.length-1];ae&&ae.sortKey===G?ae.symbolInstanceEnd=P+1:this.sortKeyRanges.push({sortKey:G,symbolInstanceStart:P,symbolInstanceEnd:P+1})},oo.prototype.sortFeatures=function(P){var G=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==P&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(P),this.sortedAngle=P,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var ae=0,de=this.symbolInstanceIndexes;ae<de.length;ae+=1){var be=de[ae],Me=this.symbolInstances.get(be);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Be,tt,ct){Be>=0&&ct.indexOf(Be)===tt&&G.addIndicesForPlacedSymbol(G.text,Be)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ue("SymbolBucket",oo,{omit:["layers","collisionBoxArray","features","compareText"]}),oo.MAX_GLYPHS=65535,oo.addDynamicAttributes=E1;function OP(k,P){return P.replace(/{([^{}]+)}/g,function(G,ae){return ae in k?String(k[ae]):""})}var zP=new lo({"symbol-placement":new Ua(Nt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ua(Nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ua(Nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qa(Nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ua(Nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ua(Nt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ua(Nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ua(Nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ua(Nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qa(Nt.layout_symbol["icon-size"]),"icon-text-fit":new Ua(Nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ua(Nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qa(Nt.layout_symbol["icon-image"]),"icon-rotate":new Qa(Nt.layout_symbol["icon-rotate"]),"icon-padding":new Ua(Nt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ua(Nt.layout_symbol["icon-keep-upright"]),"icon-offset":new Qa(Nt.layout_symbol["icon-offset"]),"icon-anchor":new Qa(Nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ua(Nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ua(Nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ua(Nt.layout_symbol["text-rotation-alignment"]),"text-field":new Qa(Nt.layout_symbol["text-field"]),"text-font":new Qa(Nt.layout_symbol["text-font"]),"text-size":new Qa(Nt.layout_symbol["text-size"]),"text-max-width":new Qa(Nt.layout_symbol["text-max-width"]),"text-line-height":new Ua(Nt.layout_symbol["text-line-height"]),"text-letter-spacing":new Qa(Nt.layout_symbol["text-letter-spacing"]),"text-justify":new Qa(Nt.layout_symbol["text-justify"]),"text-radial-offset":new Qa(Nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ua(Nt.layout_symbol["text-variable-anchor"]),"text-anchor":new Qa(Nt.layout_symbol["text-anchor"]),"text-max-angle":new Ua(Nt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ua(Nt.layout_symbol["text-writing-mode"]),"text-rotate":new Qa(Nt.layout_symbol["text-rotate"]),"text-padding":new Ua(Nt.layout_symbol["text-padding"]),"text-keep-upright":new Ua(Nt.layout_symbol["text-keep-upright"]),"text-transform":new Qa(Nt.layout_symbol["text-transform"]),"text-offset":new Qa(Nt.layout_symbol["text-offset"]),"text-allow-overlap":new Ua(Nt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ua(Nt.layout_symbol["text-ignore-placement"]),"text-optional":new Ua(Nt.layout_symbol["text-optional"])}),NP=new lo({"icon-opacity":new Qa(Nt.paint_symbol["icon-opacity"]),"icon-color":new Qa(Nt.paint_symbol["icon-color"]),"icon-halo-color":new Qa(Nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qa(Nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qa(Nt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ua(Nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ua(Nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qa(Nt.paint_symbol["text-opacity"]),"text-color":new Qa(Nt.paint_symbol["text-color"],{runtimeType:Hn,getOverride:function(k){return k.textColor},hasOverride:function(k){return!!k.textColor}}),"text-halo-color":new Qa(Nt.paint_symbol["text-halo-color"]),"text-halo-width":new Qa(Nt.paint_symbol["text-halo-width"]),"text-halo-blur":new Qa(Nt.paint_symbol["text-halo-blur"]),"text-translate":new Ua(Nt.paint_symbol["text-translate"]),"text-translate-anchor":new Ua(Nt.paint_symbol["text-translate-anchor"])}),k1={paint:NP,layout:zP},xp=function(P){this.type=P.property.overrides?P.property.overrides.runtimeType:br,this.defaultValue=P};xp.prototype.evaluate=function(P){if(P.formattedSection){var G=this.defaultValue.property.overrides;if(G&&G.hasOverride(P.formattedSection))return G.getOverride(P.formattedSection)}return P.feature&&P.featureState?this.defaultValue.evaluate(P.feature,P.featureState):this.defaultValue.property.specification.default},xp.prototype.eachChild=function(P){if(!this.defaultValue.isConstant()){var G=this.defaultValue.value;P(G._styleExpression.expression)}},xp.prototype.outputDefined=function(){return!1},xp.prototype.serialize=function(){return null},Ue("FormatSectionOverride",xp,{omit:["defaultValue"]});var BP=function(k){function P(G){k.call(this,G,k1)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.recalculate=function(ae,de){if(k.prototype.recalculate.call(this,ae,de),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var be=this.layout.get("text-writing-mode");if(be){for(var Me=[],Be=0,tt=be;Be<tt.length;Be+=1){var ct=tt[Be];Me.indexOf(ct)<0&&Me.push(ct)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},P.prototype.getValueAndResolveTokens=function(ae,de,be,Me){var Be=this.layout.get(ae).evaluate(de,{},be,Me),tt=this._unevaluatedLayout._values[ae];return!tt.isDataDriven()&&!Vo(tt.value)&&Be?OP(de.properties,Be):Be},P.prototype.createBucket=function(ae){return new oo(ae)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype._setPaintOverrides=function(){for(var ae=0,de=k1.paint.overridableProperties;ae<de.length;ae+=1){var be=de[ae];if(!!P.hasPaintOverride(this.layout,be)){var Me=this.paint.get(be),Be=new xp(Me),tt=new Ns(Be,Me.property.specification),ct=null;Me.value.kind==="constant"||Me.value.kind==="source"?ct=new uf("source",tt):ct=new Bs("composite",tt,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[be]=new io(Me.property,ct,Me.parameters)}}},P.prototype._handleOverridablePaintPropertyUpdate=function(ae,de,be){return!this.layout||de.isDataDriven()||be.isDataDriven()?!1:P.hasPaintOverride(this.layout,ae)},P.hasPaintOverride=function(ae,de){var be=ae.get("text-field"),Me=k1.paint.properties[de],Be=!1,tt=function(Dt){for(var er=0,Yt=Dt;er<Yt.length;er+=1){var dr=Yt[er];if(Me.overrides&&Me.overrides.hasOverride(dr)){Be=!0;return}}};if(be.value.kind==="constant"&&be.value.value instanceof to)tt(be.value.value.sections);else if(be.value.kind==="source"){var ct=function(Dt){if(!Be)if(Dt instanceof ho&&$i(Dt.value)===ma){var er=Dt.value;tt(er.sections)}else Dt instanceof Ps?tt(Dt.sections):Dt.eachChild(ct)},gt=be.value;gt._styleExpression&&ct(gt._styleExpression.expression)}return Be},P}(Js),UP=new lo({"background-color":new Ua(Nt.paint_background["background-color"]),"background-pattern":new bo(Nt.paint_background["background-pattern"]),"background-opacity":new Ua(Nt.paint_background["background-opacity"])}),VP={paint:UP},HP=function(k){function P(G){k.call(this,G,VP)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P}(Js),GP=new lo({"raster-opacity":new Ua(Nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ua(Nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ua(Nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ua(Nt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ua(Nt.paint_raster["raster-saturation"]),"raster-contrast":new Ua(Nt.paint_raster["raster-contrast"]),"raster-resampling":new Ua(Nt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ua(Nt.paint_raster["raster-fade-duration"])}),jP={paint:GP},$P=function(k){function P(G){k.call(this,G,jP)}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P}(Js);function WP(k){var P=[],G=k.id;return G===void 0&&P.push({message:"layers."+G+': missing required property "id"'}),k.render===void 0&&P.push({message:"layers."+G+': missing required method "render"'}),k.renderingMode&&k.renderingMode!=="2d"&&k.renderingMode!=="3d"&&P.push({message:"layers."+G+': property "renderingMode" must be either "2d" or "3d"'}),P}var YP=function(k){function P(G){k.call(this,G,{}),this.implementation=G}return k&&(P.__proto__=k),P.prototype=Object.create(k&&k.prototype),P.prototype.constructor=P,P.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},P.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},P.prototype.recalculate=function(){},P.prototype.updateTransitions=function(){},P.prototype.hasTransition=function(){},P.prototype.serialize=function(){},P.prototype.onAdd=function(ae){this.implementation.onAdd&&this.implementation.onAdd(ae,ae.painter.context.gl)},P.prototype.onRemove=function(ae){this.implementation.onRemove&&this.implementation.onRemove(ae,ae.painter.context.gl)},P}(Js),XP={circle:T6,heatmap:E6,hillshade:L6,fill:tL,"fill-extrusion":_L,line:DL,symbol:BP,background:HP,raster:$P};function ZP(k){return k.type==="custom"?new YP(k):new XP[k.type](k)}var o3=self.HTMLImageElement,s3=self.HTMLCanvasElement,l3=self.HTMLVideoElement,u3=self.ImageData,Dg=self.ImageBitmap,uv=function(P,G,ae,de){this.context=P,this.format=ae,this.texture=P.gl.createTexture(),this.update(G,de)};uv.prototype.update=function(P,G,ae){var de=P.width,be=P.height,Me=(!this.size||this.size[0]!==de||this.size[1]!==be)&&!ae,Be=this,tt=Be.context,ct=tt.gl;if(this.useMipmap=Boolean(G&&G.useMipmap),ct.bindTexture(ct.TEXTURE_2D,this.texture),tt.pixelStoreUnpackFlipY.set(!1),tt.pixelStoreUnpack.set(1),tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===ct.RGBA&&(!G||G.premultiply!==!1)),Me)this.size=[de,be],P instanceof o3||P instanceof s3||P instanceof l3||P instanceof u3||Dg&&P instanceof Dg?ct.texImage2D(ct.TEXTURE_2D,0,this.format,this.format,ct.UNSIGNED_BYTE,P):ct.texImage2D(ct.TEXTURE_2D,0,this.format,de,be,0,this.format,ct.UNSIGNED_BYTE,P.data);else{var gt=ae||{x:0,y:0},Dt=gt.x,er=gt.y;P instanceof o3||P instanceof s3||P instanceof l3||P instanceof u3||Dg&&P instanceof Dg?ct.texSubImage2D(ct.TEXTURE_2D,0,Dt,er,ct.RGBA,ct.UNSIGNED_BYTE,P):ct.texSubImage2D(ct.TEXTURE_2D,0,Dt,er,de,be,ct.RGBA,ct.UNSIGNED_BYTE,P.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ct.generateMipmap(ct.TEXTURE_2D)},uv.prototype.bind=function(P,G,ae){var de=this,be=de.context,Me=be.gl;Me.bindTexture(Me.TEXTURE_2D,this.texture),ae===Me.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(ae=Me.LINEAR),P!==this.filter&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,P),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,ae||P),this.filter=P),G!==this.wrap&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,G),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,G),this.wrap=G)},uv.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},uv.prototype.destroy=function(){var P=this.context,G=P.gl;G.deleteTexture(this.texture),this.texture=null};var C1=function(P){var G=this;this._callback=P,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){G._triggered=!1,G._callback()})};C1.prototype.trigger=function(){var P=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){P._triggered=!1,P._callback()},0))},C1.prototype.remove=function(){delete this._channel,this._callback=function(){}};var bp=function(P,G,ae){this.target=P,this.parent=G,this.mapId=ae,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new C1(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=re()?P:self};bp.prototype.send=function(P,G,ae,de,be){var Me=this;be===void 0&&(be=!1);var Be=Math.round(Math.random()*1e18).toString(36).substring(0,10);ae&&(this.callbacks[Be]=ae);var tt=K(this.globalScope)?void 0:[];return this.target.postMessage({id:Be,type:P,hasCallback:!!ae,targetMapId:de,mustQueue:be,sourceMapId:this.mapId,data:Lt(G,tt)},tt),{cancel:function(){ae&&delete Me.callbacks[Be],Me.target.postMessage({id:Be,type:"<cancel>",targetMapId:de,sourceMapId:Me.mapId})}}},bp.prototype.receive=function(P){var G=P.data,ae=G.id;if(!!ae&&!(G.targetMapId&&this.mapId!==G.targetMapId))if(G.type==="<cancel>"){delete this.tasks[ae];var de=this.cancelCallbacks[ae];delete this.cancelCallbacks[ae],de&&de()}else re()||G.mustQueue?(this.tasks[ae]=G,this.taskQueue.push(ae),this.invoker.trigger()):this.processTask(ae,G)},bp.prototype.process=function(){if(!!this.taskQueue.length){var P=this.taskQueue.shift(),G=this.tasks[P];delete this.tasks[P],this.taskQueue.length&&this.invoker.trigger(),G&&this.processTask(P,G)}},bp.prototype.processTask=function(P,G){var ae=this;if(G.type==="<response>"){var de=this.callbacks[P];delete this.callbacks[P],de&&(G.error?de(jt(G.error)):de(null,jt(G.data)))}else{var be=!1,Me=K(this.globalScope)?void 0:[],Be=G.hasCallback?function(er,Yt){be=!0,delete ae.cancelCallbacks[P],ae.target.postMessage({id:P,type:"<response>",sourceMapId:ae.mapId,error:er?Lt(er):null,data:Lt(Yt,Me)},Me)}:function(er){be=!0},tt=null,ct=jt(G.data);if(this.parent[G.type])tt=this.parent[G.type](G.sourceMapId,ct,Be);else if(this.parent.getWorkerSource){var gt=G.type.split("."),Dt=this.parent.getWorkerSource(G.sourceMapId,gt[0],ct.source);tt=Dt[gt[1]](ct,Be)}else Be(new Error("Could not find function "+G.type));!be&&tt&&tt.cancel&&(this.cancelCallbacks[P]=tt.cancel)}},bp.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function KP(k,P,G){P=Math.pow(2,G)-P-1;var ae=f3(k*256,P*256,G),de=f3((k+1)*256,(P+1)*256,G);return ae[0]+","+ae[1]+","+de[0]+","+de[1]}function f3(k,P,G){var ae=2*Math.PI*6378137/256/Math.pow(2,G),de=k*ae-2*Math.PI*6378137/2,be=P*ae-2*Math.PI*6378137/2;return[de,be]}var ps=function(P,G){P&&(G?this.setSouthWest(P).setNorthEast(G):P.length===4?this.setSouthWest([P[0],P[1]]).setNorthEast([P[2],P[3]]):this.setSouthWest(P[0]).setNorthEast(P[1]))};ps.prototype.setNorthEast=function(P){return this._ne=P instanceof Io?new Io(P.lng,P.lat):Io.convert(P),this},ps.prototype.setSouthWest=function(P){return this._sw=P instanceof Io?new Io(P.lng,P.lat):Io.convert(P),this},ps.prototype.extend=function(P){var G=this._sw,ae=this._ne,de,be;if(P instanceof Io)de=P,be=P;else if(P instanceof ps){if(de=P._sw,be=P._ne,!de||!be)return this}else{if(Array.isArray(P))if(P.length===4||P.every(Array.isArray)){var Me=P;return this.extend(ps.convert(Me))}else{var Be=P;return this.extend(Io.convert(Be))}return this}return!G&&!ae?(this._sw=new Io(de.lng,de.lat),this._ne=new Io(be.lng,be.lat)):(G.lng=Math.min(de.lng,G.lng),G.lat=Math.min(de.lat,G.lat),ae.lng=Math.max(be.lng,ae.lng),ae.lat=Math.max(be.lat,ae.lat)),this},ps.prototype.getCenter=function(){return new Io((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ps.prototype.getSouthWest=function(){return this._sw},ps.prototype.getNorthEast=function(){return this._ne},ps.prototype.getNorthWest=function(){return new Io(this.getWest(),this.getNorth())},ps.prototype.getSouthEast=function(){return new Io(this.getEast(),this.getSouth())},ps.prototype.getWest=function(){return this._sw.lng},ps.prototype.getSouth=function(){return this._sw.lat},ps.prototype.getEast=function(){return this._ne.lng},ps.prototype.getNorth=function(){return this._ne.lat},ps.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ps.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ps.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ps.prototype.contains=function(P){var G=Io.convert(P),ae=G.lng,de=G.lat,be=this._sw.lat<=de&&de<=this._ne.lat,Me=this._sw.lng<=ae&&ae<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=ae&&ae>=this._ne.lng),be&&Me},ps.convert=function(P){return!P||P instanceof ps?P:new ps(P)};var c3=63710088e-1,Io=function(P,G){if(isNaN(P)||isNaN(G))throw new Error("Invalid LngLat object: ("+P+", "+G+")");if(this.lng=+P,this.lat=+G,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Io.prototype.wrap=function(){return new Io(_(this.lng,-180,180),this.lat)},Io.prototype.toArray=function(){return[this.lng,this.lat]},Io.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Io.prototype.distanceTo=function(P){var G=Math.PI/180,ae=this.lat*G,de=P.lat*G,be=Math.sin(ae)*Math.sin(de)+Math.cos(ae)*Math.cos(de)*Math.cos((P.lng-this.lng)*G),Me=c3*Math.acos(Math.min(be,1));return Me},Io.prototype.toBounds=function(P){P===void 0&&(P=0);var G=40075017,ae=360*P/G,de=ae/Math.cos(Math.PI/180*this.lat);return new ps(new Io(this.lng-de,this.lat-ae),new Io(this.lng+de,this.lat+ae))},Io.convert=function(P){if(P instanceof Io)return P;if(Array.isArray(P)&&(P.length===2||P.length===3))return new Io(Number(P[0]),Number(P[1]));if(!Array.isArray(P)&&typeof P=="object"&&P!==null)return new Io(Number("lng"in P?P.lng:P.lon),Number(P.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var h3=2*Math.PI*c3;function v3(k){return h3*Math.cos(k*Math.PI/180)}function p3(k){return(180+k)/360}function d3(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function g3(k,P){return k/v3(P)}function JP(k){return k*360-180}function L1(k){var P=180-k*360;return 360/Math.PI*Math.atan(Math.exp(P*Math.PI/180))-90}function QP(k,P){return k*v3(L1(P))}function qP(k){return 1/Math.cos(k*Math.PI/180)}var fv=function(P,G,ae){ae===void 0&&(ae=0),this.x=+P,this.y=+G,this.z=+ae};fv.fromLngLat=function(P,G){G===void 0&&(G=0);var ae=Io.convert(P);return new fv(p3(ae.lng),d3(ae.lat),g3(G,ae.lat))},fv.prototype.toLngLat=function(){return new Io(JP(this.x),L1(this.y))},fv.prototype.toAltitude=function(){return QP(this.z,this.y)},fv.prototype.meterInMercatorCoordinateUnits=function(){return 1/h3*qP(L1(this.y))};var cv=function(P,G,ae){this.z=P,this.x=G,this.y=ae,this.key=Gd(0,P,P,G,ae)};cv.prototype.equals=function(P){return this.z===P.z&&this.x===P.x&&this.y===P.y},cv.prototype.url=function(P,G){var ae=KP(this.x,this.y,this.z),de=e8(this.z,this.x,this.y);return P[(this.x+this.y)%P.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(G==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",de).replace("{bbox-epsg-3857}",ae)},cv.prototype.getTilePoint=function(P){var G=Math.pow(2,this.z);return new f((P.x*G-this.x)*$a,(P.y*G-this.y)*$a)},cv.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var y3=function(P,G){this.wrap=P,this.canonical=G,this.key=Gd(P,G.z,G.z,G.x,G.y)},ds=function(P,G,ae,de,be){this.overscaledZ=P,this.wrap=G,this.canonical=new cv(ae,+de,+be),this.key=Gd(G,P,ae,de,be)};ds.prototype.equals=function(P){return this.overscaledZ===P.overscaledZ&&this.wrap===P.wrap&&this.canonical.equals(P.canonical)},ds.prototype.scaledTo=function(P){var G=this.canonical.z-P;return P>this.canonical.z?new ds(P,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ds(P,this.wrap,P,this.canonical.x>>G,this.canonical.y>>G)},ds.prototype.calculateScaledKey=function(P,G){var ae=this.canonical.z-P;return P>this.canonical.z?Gd(this.wrap*+G,P,this.canonical.z,this.canonical.x,this.canonical.y):Gd(this.wrap*+G,P,P,this.canonical.x>>ae,this.canonical.y>>ae)},ds.prototype.isChildOf=function(P){if(P.wrap!==this.wrap)return!1;var G=this.canonical.z-P.canonical.z;return P.overscaledZ===0||P.overscaledZ<this.overscaledZ&&P.canonical.x===this.canonical.x>>G&&P.canonical.y===this.canonical.y>>G},ds.prototype.children=function(P){if(this.overscaledZ>=P)return[new ds(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var G=this.canonical.z+1,ae=this.canonical.x*2,de=this.canonical.y*2;return[new ds(G,this.wrap,G,ae,de),new ds(G,this.wrap,G,ae+1,de),new ds(G,this.wrap,G,ae,de+1),new ds(G,this.wrap,G,ae+1,de+1)]},ds.prototype.isLessThan=function(P){return this.wrap<P.wrap?!0:this.wrap>P.wrap?!1:this.overscaledZ<P.overscaledZ?!0:this.overscaledZ>P.overscaledZ?!1:this.canonical.x<P.canonical.x?!0:this.canonical.x>P.canonical.x?!1:this.canonical.y<P.canonical.y},ds.prototype.wrapped=function(){return new ds(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.unwrapTo=function(P){return new ds(this.overscaledZ,P,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ds.prototype.toUnwrapped=function(){return new y3(this.wrap,this.canonical)},ds.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ds.prototype.getTilePoint=function(P){return this.canonical.getTilePoint(new fv(P.x-this.wrap,P.y))};function Gd(k,P,G,ae,de){k*=2,k<0&&(k=k*-1-1);var be=1<<G;return(be*be*k+be*de+ae).toString(36)+G.toString(36)+P.toString(36)}function e8(k,P,G){for(var ae="",de,be=k;be>0;be--)de=1<<be-1,ae+=(P&de?1:0)+(G&de?2:0);return ae}Ue("CanonicalTileID",cv),Ue("OverscaledTileID",ds,{omit:["posMatrix"]});var $c=function(P,G,ae){if(this.uid=P,G.height!==G.width)throw new RangeError("DEM tiles must be square");if(ae&&ae!=="mapbox"&&ae!=="terrarium")return H('"'+ae+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=G.height;var de=this.dim=G.height-2;this.data=new Uint32Array(G.data.buffer),this.encoding=ae||"mapbox";for(var be=0;be<de;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(de,be)]=this.data[this._idx(de-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,de)]=this.data[this._idx(be,de-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(de,-1)]=this.data[this._idx(de-1,0)],this.data[this._idx(-1,de)]=this.data[this._idx(0,de-1)],this.data[this._idx(de,de)]=this.data[this._idx(de-1,de-1)]};$c.prototype.get=function(P,G){var ae=new Uint8Array(this.data.buffer),de=this._idx(P,G)*4,be=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return be(ae[de],ae[de+1],ae[de+2])},$c.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},$c.prototype._idx=function(P,G){if(P<-1||P>=this.dim+1||G<-1||G>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(G+1)*this.stride+(P+1)},$c.prototype._unpackMapbox=function(P,G,ae){return(P*256*256+G*256+ae)/10-1e4},$c.prototype._unpackTerrarium=function(P,G,ae){return P*256+G+ae/256-32768},$c.prototype.getPixels=function(){return new Xl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},$c.prototype.backfillBorder=function(P,G,ae){if(this.dim!==P.dim)throw new Error("dem dimension mismatch");var de=G*this.dim,be=G*this.dim+this.dim,Me=ae*this.dim,Be=ae*this.dim+this.dim;switch(G){case-1:de=be-1;break;case 1:be=de+1;break}switch(ae){case-1:Me=Be-1;break;case 1:Be=Me+1;break}for(var tt=-G*this.dim,ct=-ae*this.dim,gt=Me;gt<Be;gt++)for(var Dt=de;Dt<be;Dt++)this.data[this._idx(Dt,gt)]=P.data[this._idx(Dt+tt,gt+ct)]},Ue("DEMData",$c);function t8(k,P){var G={};if(!P)return G;for(var ae=function(){var Me=be[de],Be=Me.layerIds.map(function(Dt){return P.getLayer(Dt)}).filter(Boolean);if(Be.length!==0){Me.layers=Be,Me.stateDependentLayerIds&&(Me.stateDependentLayers=Me.stateDependentLayerIds.map(function(Dt){return Be.filter(function(er){return er.id===Dt})[0]}));for(var tt=0,ct=Be;tt<ct.length;tt+=1){var gt=ct[tt];G[gt.id]=Me}}},de=0,be=k;de<be.length;de+=1)ae();return G}var Fg=function(P){this._stringToNumber={},this._numberToString=[];for(var G=0;G<P.length;G++){var ae=P[G];this._stringToNumber[ae]=G,this._numberToString[G]=ae}};Fg.prototype.encode=function(P){return this._stringToNumber[P]},Fg.prototype.decode=function(P){return this._numberToString[P]};var Og=function(P,G,ae,de,be){this.type="Feature",this._vectorTileFeature=P,P._z=G,P._x=ae,P._y=de,this.properties=P.properties,this.id=be},P1={geometry:{configurable:!0}};P1.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},P1.geometry.set=function(k){this._geometry=k},Og.prototype.toJSON=function(){var P={geometry:this.geometry};for(var G in this)G==="_geometry"||G==="_vectorTileFeature"||(P[G]=this[G]);return P},Object.defineProperties(Og.prototype,P1);var _p=function(){this.state={},this.stateChanges={},this.deletedStates={}};_p.prototype.updateState=function(P,G,ae){var de=String(G);if(this.stateChanges[P]=this.stateChanges[P]||{},this.stateChanges[P][de]=this.stateChanges[P][de]||{},S(this.stateChanges[P][de],ae),this.deletedStates[P]===null){this.deletedStates[P]={};for(var be in this.state[P])be!==de&&(this.deletedStates[P][be]=null)}else{var Me=this.deletedStates[P]&&this.deletedStates[P][de]===null;if(Me){this.deletedStates[P][de]={};for(var Be in this.state[P][de])ae[Be]||(this.deletedStates[P][de][Be]=null)}else for(var tt in ae){var ct=this.deletedStates[P]&&this.deletedStates[P][de]&&this.deletedStates[P][de][tt]===null;ct&&delete this.deletedStates[P][de][tt]}}},_p.prototype.removeFeatureState=function(P,G,ae){var de=this.deletedStates[P]===null;if(!de){var be=String(G);if(this.deletedStates[P]=this.deletedStates[P]||{},ae&&G!==void 0)this.deletedStates[P][be]!==null&&(this.deletedStates[P][be]=this.deletedStates[P][be]||{},this.deletedStates[P][be][ae]=null);else if(G!==void 0){var Me=this.stateChanges[P]&&this.stateChanges[P][be];if(Me){this.deletedStates[P][be]={};for(ae in this.stateChanges[P][be])this.deletedStates[P][be][ae]=null}else this.deletedStates[P][be]=null}else this.deletedStates[P]=null}},_p.prototype.getState=function(P,G){var ae=String(G),de=this.state[P]||{},be=this.stateChanges[P]||{},Me=S({},de[ae],be[ae]);if(this.deletedStates[P]===null)return{};if(this.deletedStates[P]){var Be=this.deletedStates[P][G];if(Be===null)return{};for(var tt in Be)delete Me[tt]}return Me},_p.prototype.initializeTileState=function(P,G){P.setFeatureState(this.state,G)},_p.prototype.coalesceChanges=function(P,G){var ae={};for(var de in this.stateChanges){this.state[de]=this.state[de]||{};var be={};for(var Me in this.stateChanges[de])this.state[de][Me]||(this.state[de][Me]={}),S(this.state[de][Me],this.stateChanges[de][Me]),be[Me]=this.state[de][Me];ae[de]=be}for(var Be in this.deletedStates){this.state[Be]=this.state[Be]||{};var tt={};if(this.deletedStates[Be]===null)for(var ct in this.state[Be])tt[ct]={},this.state[Be][ct]={};else for(var gt in this.deletedStates[Be]){var Dt=this.deletedStates[Be][gt]===null;if(Dt)this.state[Be][gt]={};else for(var er=0,Yt=Object.keys(this.deletedStates[Be][gt]);er<Yt.length;er+=1){var dr=Yt[er];delete this.state[Be][gt][dr]}tt[gt]=this.state[Be][gt]}ae[Be]=ae[Be]||{},S(ae[Be],tt)}if(this.stateChanges={},this.deletedStates={},Object.keys(ae).length!==0)for(var Or in P){var sn=P[Or];sn.setFeatureState(ae,G)}};var Wc=function(P,G){this.tileID=P,this.x=P.canonical.x,this.y=P.canonical.y,this.z=P.canonical.z,this.grid=new ts($a,16,0),this.grid3D=new ts($a,16,0),this.featureIndexArray=new kd,this.promoteId=G};Wc.prototype.insert=function(P,G,ae,de,be,Me){var Be=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ae,de,be);for(var tt=Me?this.grid3D:this.grid,ct=0;ct<G.length;ct++){for(var gt=G[ct],Dt=[1/0,1/0,-1/0,-1/0],er=0;er<gt.length;er++){var Yt=gt[er];Dt[0]=Math.min(Dt[0],Yt.x),Dt[1]=Math.min(Dt[1],Yt.y),Dt[2]=Math.max(Dt[2],Yt.x),Dt[3]=Math.max(Dt[3],Yt.y)}Dt[0]<$a&&Dt[1]<$a&&Dt[2]>=0&&Dt[3]>=0&&tt.insert(Be,Dt[0],Dt[1],Dt[2],Dt[3])}},Wc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new up.VectorTile(new Sg(this.rawTileData)).layers,this.sourceLayerCoder=new Fg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Wc.prototype.query=function(P,G,ae,de){var be=this;this.loadVTLayers();for(var Me=P.params||{},Be=$a/P.tileSize/P.scale,tt=yc(Me.filter),ct=P.queryGeometry,gt=P.queryPadding*Be,Dt=x3(ct),er=this.grid.query(Dt.minX-gt,Dt.minY-gt,Dt.maxX+gt,Dt.maxY+gt),Yt=x3(P.cameraQueryGeometry),dr=this.grid3D.query(Yt.minX-gt,Yt.minY-gt,Yt.maxX+gt,Yt.maxY+gt,function(Yn,fa,ia,Ba){return Tc(P.cameraQueryGeometry,Yn-gt,fa-gt,ia+gt,Ba+gt)}),Or=0,sn=dr;Or<sn.length;Or+=1){var en=sn[Or];er.push(en)}er.sort(r8);for(var In={},wn,Pn=function(Yn){var fa=er[Yn];if(fa!==wn){wn=fa;var ia=be.featureIndexArray.get(fa),Ba=null;be.loadMatchingFeature(In,ia.bucketIndex,ia.sourceLayerIndex,ia.featureIndex,tt,Me.layers,Me.availableImages,G,ae,de,function(Ma,Ca,si){return Ba||(Ba=eo(Ma)),Ca.queryIntersectsFeature(ct,Ma,si,Ba,be.z,P.transform,Be,P.pixelPosMatrix)})}},Bn=0;Bn<er.length;Bn++)Pn(Bn);return In},Wc.prototype.loadMatchingFeature=function(P,G,ae,de,be,Me,Be,tt,ct,gt,Dt){var er=this.bucketLayerIDs[G];if(!(Me&&!R(Me,er))){var Yt=this.sourceLayerCoder.decode(ae),dr=this.vtLayers[Yt],Or=dr.feature(de);if(!!be.filter(new pi(this.tileID.overscaledZ),Or))for(var sn=this.getId(Or,Yt),en=0;en<er.length;en++){var In=er[en];if(!(Me&&Me.indexOf(In)<0)){var wn=tt[In];if(!!wn){var Pn={};sn!==void 0&&gt&&(Pn=gt.getState(wn.sourceLayer||"_geojsonTileLayer",sn));var Bn=ct[In];Bn.paint=m3(Bn.paint,wn.paint,Or,Pn,Be),Bn.layout=m3(Bn.layout,wn.layout,Or,Pn,Be);var Yn=!Dt||Dt(Or,wn,Pn);if(!!Yn){var fa=new Og(Or,this.z,this.x,this.y,sn);fa.layer=Bn;var ia=P[In];ia===void 0&&(ia=P[In]=[]),ia.push({featureIndex:de,feature:fa,intersectionZ:Yn})}}}}}},Wc.prototype.lookupSymbolFeatures=function(P,G,ae,de,be,Me,Be,tt){var ct={};this.loadVTLayers();for(var gt=yc(be),Dt=0,er=P;Dt<er.length;Dt+=1){var Yt=er[Dt];this.loadMatchingFeature(ct,ae,de,Yt,gt,Me,Be,tt,G)}return ct},Wc.prototype.hasLayer=function(P){for(var G=0,ae=this.bucketLayerIDs;G<ae.length;G+=1)for(var de=ae[G],be=0,Me=de;be<Me.length;be+=1){var Be=Me[be];if(P===Be)return!0}return!1},Wc.prototype.getId=function(P,G){var ae=P.id;if(this.promoteId){var de=typeof this.promoteId=="string"?this.promoteId:this.promoteId[G];ae=P.properties[de],typeof ae=="boolean"&&(ae=Number(ae))}return ae},Ue("FeatureIndex",Wc,{omit:["rawTileData","sourceLayerCoder"]});function m3(k,P,G,ae,de){return L(k,function(be,Me){var Be=P instanceof qi?P.get(Me):null;return Be&&Be.evaluate?Be.evaluate(G,ae,de):Be})}function x3(k){for(var P=1/0,G=1/0,ae=-1/0,de=-1/0,be=0,Me=k;be<Me.length;be+=1){var Be=Me[be];P=Math.min(P,Be.x),G=Math.min(G,Be.y),ae=Math.max(ae,Be.x),de=Math.max(de,Be.y)}return{minX:P,minY:G,maxX:ae,maxY:de}}function r8(k,P){return P-k}var n8=3e4,Es=function(P,G){this.tileID=P,this.uid=w(),this.uses=0,this.tileSize=G,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Es.prototype.registerFadeDuration=function(P){var G=P+this.timeAdded;G<J.now()||this.fadeEndTime&&G<this.fadeEndTime||(this.fadeEndTime=G)},Es.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Es.prototype.loadVectorData=function(P,G,ae){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!P){this.collisionBoxArray=new wc;return}P.featureIndex&&(this.latestFeatureIndex=P.featureIndex,P.rawTileData?(this.latestRawTileData=P.rawTileData,this.latestFeatureIndex.rawTileData=P.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=P.collisionBoxArray,this.buckets=t8(P.buckets,G.style),this.hasSymbolBuckets=!1;for(var de in this.buckets){var be=this.buckets[de];if(be instanceof oo)if(this.hasSymbolBuckets=!0,ae)be.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Be=this.buckets[Me];if(Be instanceof oo&&Be.hasRTLText){this.hasRTLText=!0,Ni();break}}this.queryPadding=0;for(var tt in this.buckets){var ct=this.buckets[tt];this.queryPadding=Math.max(this.queryPadding,G.style.getLayer(tt).queryRadius(ct))}P.imageAtlas&&(this.imageAtlas=P.imageAtlas),P.glyphAtlasImage&&(this.glyphAtlasImage=P.glyphAtlasImage)},Es.prototype.unloadVectorData=function(){for(var P in this.buckets)this.buckets[P].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Es.prototype.getBucket=function(P){return this.buckets[P.id]},Es.prototype.upload=function(P){for(var G in this.buckets){var ae=this.buckets[G];ae.uploadPending()&&ae.upload(P)}var de=P.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new uv(P,this.imageAtlas.image,de.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new uv(P,this.glyphAtlasImage,de.ALPHA),this.glyphAtlasImage=null)},Es.prototype.prepare=function(P){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(P,this.imageAtlasTexture)},Es.prototype.queryRenderedFeatures=function(P,G,ae,de,be,Me,Be,tt,ct,gt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:de,cameraQueryGeometry:be,scale:Me,tileSize:this.tileSize,pixelPosMatrix:gt,transform:tt,params:Be,queryPadding:this.queryPadding*ct},P,G,ae)},Es.prototype.querySourceFeatures=function(P,G){var ae=this.latestFeatureIndex;if(!(!ae||!ae.rawTileData)){var de=ae.loadVTLayers(),be=G?G.sourceLayer:"",Me=de._geojsonTileLayer||de[be];if(!!Me)for(var Be=yc(G&&G.filter),tt=this.tileID.canonical,ct=tt.z,gt=tt.x,Dt=tt.y,er={z:ct,x:gt,y:Dt},Yt=0;Yt<Me.length;Yt++){var dr=Me.feature(Yt);if(Be.filter(new pi(this.tileID.overscaledZ),dr)){var Or=ae.getId(dr,be),sn=new Og(dr,ct,gt,Dt,Or);sn.tile=er,P.push(sn)}}}},Es.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Es.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Es.prototype.setExpiryData=function(P){var G=this.expirationTime;if(P.cacheControl){var ae=Q(P.cacheControl);ae["max-age"]&&(this.expirationTime=Date.now()+ae["max-age"]*1e3)}else P.expires&&(this.expirationTime=new Date(P.expires).getTime());if(this.expirationTime){var de=Date.now(),be=!1;if(this.expirationTime>de)be=!1;else if(!G)be=!0;else if(this.expirationTime<G)be=!0;else{var Me=this.expirationTime-G;Me?this.expirationTime=de+Math.max(Me,n8):be=!0}be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Es.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Es.prototype.setFeatureState=function(P,G){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(P).length===0)){var ae=this.latestFeatureIndex.loadVTLayers();for(var de in this.buckets)if(!!G.style.hasLayer(de)){var be=this.buckets[de],Me=be.layers[0].sourceLayer||"_geojsonTileLayer",Be=ae[Me],tt=P[Me];if(!(!Be||!tt||Object.keys(tt).length===0)){be.update(tt,Be,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=G&&G.style&&G.style.getLayer(de);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(be)))}}}},Es.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Es.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<J.now()},Es.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Es.prototype.setHoldDuration=function(P){this.symbolFadeHoldUntil=J.now()+P},Es.prototype.setDependencies=function(P,G){for(var ae={},de=0,be=G;de<be.length;de+=1){var Me=be[de];ae[Me]=!0}this.dependencies[P]=ae},Es.prototype.hasDependency=function(P,G){for(var ae=0,de=P;ae<de.length;ae+=1){var be=de[ae],Me=this.dependencies[be];if(Me)for(var Be=0,tt=G;Be<tt.length;Be+=1){var ct=tt[Be];if(Me[ct])return!0}}return!1};var a8=["type","source","source-layer","minzoom","maxzoom","filter","layout"],mh=self.performance,b3=function(P){this._marks={start:[P.url,"start"].join("#"),end:[P.url,"end"].join("#"),measure:P.url.toString()},mh.mark(this._marks.start)};b3.prototype.finish=function(){mh.mark(this._marks.end);var P=mh.getEntriesByName(this._marks.measure);return P.length===0&&(mh.measure(this._marks.measure,this._marks.start,this._marks.end),P=mh.getEntriesByName(this._marks.measure),mh.clearMarks(this._marks.start),mh.clearMarks(this._marks.end),mh.clearMeasures(this._marks.measure)),P},t.Actor=bp,t.AlphaImage=lv,t.CanonicalTileID=cv,t.CollisionBoxArray=wc,t.Color=Ai,t.DEMData=$c,t.DataConstantProperty=Ua,t.DictionaryCoder=Fg,t.EXTENT=$a,t.ErrorEvent=zr,t.EvaluationParameters=pi,t.Event=un,t.Evented=$r,t.FeatureIndex=Wc,t.FillBucket=Yf,t.FillExtrusionBucket=Xf,t.ImageAtlas=Bd,t.ImagePosition=Eg,t.LineBucket=Zl,t.LngLat=Io,t.LngLatBounds=ps,t.MercatorCoordinate=fv,t.ONE_EM=Hs,t.OverscaledTileID=ds,t.Point=f,t.Point$1=f,t.Properties=lo,t.Protobuf=Sg,t.RGBAImage=Xl,t.RequestManager=Ce,t.RequestPerformance=b3,t.ResourceType=st,t.SegmentVector=Y,t.SourceFeatureState=_p,t.StructArrayLayout1ui2=hh,t.StructArrayLayout2f1f2i16=jf,t.StructArrayLayout2i4=tv,t.StructArrayLayout3ui6=$f,t.StructArrayLayout4i8=mc,t.SymbolBucket=oo,t.Texture=uv,t.Tile=Es,t.Transitionable=zo,t.Uniform1f=Hr,t.Uniform1i=Wr,t.Uniform2f=Jr,t.Uniform3f=pn,t.Uniform4f=Rn,t.UniformColor=Vn,t.UniformMatrix4f=ta,t.UnwrappedTileID=y3,t.ValidationError=yr,t.WritingMode=Su,t.ZoomHistory=Kt,t.add=op,t.addDynamicAttributes=E1,t.asyncAll=p,t.bezier=d,t.bindAll=M,t.browser=J,t.cacheEntryPossiblyAdded=ar,t.clamp=g,t.clearTileCache=cr,t.clipLine=e3,t.clone=mg,t.clone$1=O,t.clone$2=o1,t.collisionCircleLayout=NL,t.config=ie,t.create=np,t.create$1=ov,t.create$2=iv,t.createCommonjsModule=a,t.createExpression=Vu,t.createLayout=ns,t.createStyleLayer=ZP,t.cross=p6,t.deepEqual=l,t.dot=v6,t.dot$1=x6,t.ease=b,t.emitValidationErrors=Oo,t.endsWith=E,t.enforceCacheSizeLimit=nr,t.evaluateSizeForFeature=Yw,t.evaluateSizeForZoom=Xw,t.evaluateVariableOffset=n3,t.evented=ki,t.extend=S,t.featureFilter=yc,t.filterObject=z,t.fromRotation=rp,t.getAnchorAlignment=T1,t.getAnchorJustification=M1,t.getArrayBuffer=Ge,t.getImage=zt,t.getJSON=ke,t.getRTLTextPluginStatus=Po,t.getReferrer=Zt,t.getVideo=ur,t.identity=ap,t.invert=ph,t.isChar=qt,t.isMapboxURL=Ee,t.keysDifference=c,t.makeRequest=Te,t.mapObject=L,t.mercatorXfromLng=p3,t.mercatorYfromLat=d3,t.mercatorZfromAltitude=g3,t.mul=i1,t.multiply=dh,t.mvt=up,t.normalize=Ld,t.number=Eo,t.offscreenCanvasSupported=Qr,t.ortho=a1,t.parseGlyphPBF=cP,t.pbf=Sg,t.performSymbolLayout=CP,t.perspective=Cd,t.pick=T,t.plugin=Ja,t.polygonIntersectsPolygon=hi,t.postMapLoadEvent=St,t.postTurnstileEvent=Vt,t.potpack=Bw,t.refProperties=a8,t.register=Ue,t.registerForPluginStateChange=Xi,t.rotate=fl,t.rotateX=Yl,t.rotateZ=ip,t.scale=Wl,t.scale$1=m6,t.scale$2=l1,t.setCacheLimits=Kr,t.setRTLTextPlugin=va,t.sphericalToCartesian=W,t.sqrLen=w6,t.styleSpec=Nt,t.sub=g6,t.symbolSize=bP,t.transformMat3=d6,t.transformMat4=xg,t.translate=Qo,t.triggerPluginCompletionEvent=Fa,t.uniqueId=w,t.validateCustomStyleLayer=WP,t.validateLight=Pi,t.validateStyle=jo,t.values=A,t.vectorTile=up,t.version=i,t.warnOnce=H,t.webpSupported=ne,t.window=self,t.wrap=_}),y(["./shared"],function(t){function a(it){var Te=typeof it;if(Te==="number"||Te==="boolean"||Te==="string"||it===void 0||it===null)return JSON.stringify(it);if(Array.isArray(it)){for(var ke="[",Ge=0,Ye=it;Ge<Ye.length;Ge+=1){var qe=Ye[Ge];ke+=a(qe)+","}return ke+"]"}for(var at=Object.keys(it).sort(),et="{",pt=0;pt<at.length;pt++)et+=JSON.stringify(at[pt])+":"+a(it[at[pt]])+",";return et+"}"}function i(it){for(var Te="",ke=0,Ge=t.refProperties;ke<Ge.length;ke+=1){var Ye=Ge[ke];Te+="/"+a(it[Ye])}return Te}function n(it,Te){for(var ke={},Ge=0;Ge<it.length;Ge++){var Ye=Te&&Te[it[Ge].id]||i(it[Ge]);Te&&(Te[it[Ge].id]=Ye);var qe=ke[Ye];qe||(qe=ke[Ye]=[]),qe.push(it[Ge])}var at=[];for(var et in ke)at.push(ke[et]);return at}var r=function(Te){this.keyCache={},Te&&this.replace(Te)};r.prototype.replace=function(Te){this._layerConfigs={},this._layers={},this.update(Te,[])},r.prototype.update=function(Te,ke){for(var Ge=this,Ye=0,qe=Te;Ye<qe.length;Ye+=1){var at=qe[Ye];this._layerConfigs[at.id]=at;var et=this._layers[at.id]=t.createStyleLayer(at);et._featureFilter=t.featureFilter(et.filter),this.keyCache[at.id]&&delete this.keyCache[at.id]}for(var pt=0,_t=ke;pt<_t.length;pt+=1){var Pt=_t[pt];delete this.keyCache[Pt],delete this._layerConfigs[Pt],delete this._layers[Pt]}this.familiesBySource={};for(var Xt=n(t.values(this._layerConfigs),this.keyCache),zt=0,ur=Xt;zt<ur.length;zt+=1){var gr=ur[zt],Mr=gr.map(function(wr){return Ge._layers[wr.id]}),un=Mr[0];if(un.visibility!=="none"){var zr=un.source||"",$r=this.familiesBySource[zr];$r||($r=this.familiesBySource[zr]={});var hn=un.sourceLayer||"_geojsonTileLayer",Tr=$r[hn];Tr||(Tr=$r[hn]=[]),Tr.push(Mr)}}};var f=1,u=function(Te){var ke={},Ge=[];for(var Ye in Te){var qe=Te[Ye],at=ke[Ye]={};for(var et in qe){var pt=qe[+et];if(!(!pt||pt.bitmap.width===0||pt.bitmap.height===0)){var _t={x:0,y:0,w:pt.bitmap.width+2*f,h:pt.bitmap.height+2*f};Ge.push(_t),at[et]={rect:_t,metrics:pt.metrics}}}}var Pt=t.potpack(Ge),Xt=Pt.w,zt=Pt.h,ur=new t.AlphaImage({width:Xt||1,height:zt||1});for(var gr in Te){var Mr=Te[gr];for(var un in Mr){var zr=Mr[+un];if(!(!zr||zr.bitmap.width===0||zr.bitmap.height===0)){var $r=ke[gr][un].rect;t.AlphaImage.copy(zr.bitmap,ur,{x:0,y:0},{x:$r.x+f,y:$r.y+f},zr.bitmap)}}}this.image=ur,this.positions=ke};t.register("GlyphAtlas",u);var l=function(Te){this.tileID=new t.OverscaledTileID(Te.tileID.overscaledZ,Te.tileID.wrap,Te.tileID.canonical.z,Te.tileID.canonical.x,Te.tileID.canonical.y),this.uid=Te.uid,this.zoom=Te.zoom,this.pixelRatio=Te.pixelRatio,this.tileSize=Te.tileSize,this.source=Te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Te.showCollisionBoxes,this.collectResourceTiming=!!Te.collectResourceTiming,this.returnDependencies=!!Te.returnDependencies,this.promoteId=Te.promoteId};l.prototype.parse=function(Te,ke,Ge,Ye,qe){var at=this;this.status="parsing",this.data=Te,this.collisionBoxArray=new t.CollisionBoxArray;var et=new t.DictionaryCoder(Object.keys(Te.layers).sort()),pt=new t.FeatureIndex(this.tileID,this.promoteId);pt.bucketLayerIDs=[];var _t={},Pt={featureIndex:pt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ge},Xt=ke.familiesBySource[this.source];for(var zt in Xt){var ur=Te.layers[zt];if(!!ur){ur.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+zt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var gr=et.encode(zt),Mr=[],un=0;un<ur.length;un++){var zr=ur.feature(un),$r=pt.getId(zr,zt);Mr.push({feature:zr,id:$r,index:un,sourceLayerIndex:gr})}for(var hn=0,Tr=Xt[zt];hn<Tr.length;hn+=1){var wr=Tr[hn],Ur=wr[0];if(!(Ur.minzoom&&this.zoom<Math.floor(Ur.minzoom))&&!(Ur.maxzoom&&this.zoom>=Ur.maxzoom)&&Ur.visibility!=="none"){m(wr,this.zoom,Ge);var Br=_t[Ur.id]=Ur.createBucket({index:pt.bucketLayerIDs.length,layers:wr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:gr,sourceID:this.source});Br.populate(Mr,Pt,this.tileID.canonical),pt.bucketLayerIDs.push(wr.map(function(Ct){return Ct.id}))}}}}var Cr,nt,Rt,Jt,hr=t.mapObject(Pt.glyphDependencies,function(Ct){return Object.keys(Ct).map(Number)});Object.keys(hr).length?Ye.send("getGlyphs",{uid:this.uid,stacks:hr},function(Ct,tr){Cr||(Cr=Ct,nt=tr,Rr.call(at))}):nt={};var Dr=Object.keys(Pt.iconDependencies);Dr.length?Ye.send("getImages",{icons:Dr,source:this.source,tileID:this.tileID,type:"icons"},function(Ct,tr){Cr||(Cr=Ct,Rt=tr,Rr.call(at))}):Rt={};var Gr=Object.keys(Pt.patternDependencies);Gr.length?Ye.send("getImages",{icons:Gr,source:this.source,tileID:this.tileID,type:"patterns"},function(Ct,tr){Cr||(Cr=Ct,Jt=tr,Rr.call(at))}):Jt={},Rr.call(this);function Rr(){if(Cr)return qe(Cr);if(nt&&Rt&&Jt){var Ct=new u(nt),tr=new t.ImageAtlas(Rt,Jt);for(var Lr in _t){var Nr=_t[Lr];Nr instanceof t.SymbolBucket?(m(Nr.layers,this.zoom,Ge),t.performSymbolLayout(Nr,nt,Ct.positions,Rt,tr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Nr.hasPattern&&(Nr instanceof t.LineBucket||Nr instanceof t.FillBucket||Nr instanceof t.FillExtrusionBucket)&&(m(Nr.layers,this.zoom,Ge),Nr.addFeatures(Pt,this.tileID.canonical,tr.patternPositions))}this.status="done",qe(null,{buckets:t.values(_t).filter(function(Tn){return!Tn.isEmpty()}),featureIndex:pt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ct.image,imageAtlas:tr,glyphMap:this.returnDependencies?nt:null,iconMap:this.returnDependencies?Rt:null,glyphPositions:this.returnDependencies?Ct.positions:null})}}};function m(it,Te,ke){for(var Ge=new t.EvaluationParameters(Te),Ye=0,qe=it;Ye<qe.length;Ye+=1){var at=qe[Ye];at.recalculate(Ge,ke)}}function d(it,Te){var ke=t.getArrayBuffer(it.request,function(Ge,Ye,qe,at){Ge?Te(Ge):Ye&&Te(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Ye)),rawData:Ye,cacheControl:qe,expires:at})});return function(){ke.cancel(),Te()}}var b=function(Te,ke,Ge,Ye){this.actor=Te,this.layerIndex=ke,this.availableImages=Ge,this.loadVectorData=Ye||d,this.loading={},this.loaded={}};b.prototype.loadTile=function(Te,ke){var Ge=this,Ye=Te.uid;this.loading||(this.loading={});var qe=Te&&Te.request&&Te.request.collectResourceTiming?new t.RequestPerformance(Te.request):!1,at=this.loading[Ye]=new l(Te);at.abort=this.loadVectorData(Te,function(et,pt){if(delete Ge.loading[Ye],et||!pt)return at.status="done",Ge.loaded[Ye]=at,ke(et);var _t=pt.rawData,Pt={};pt.expires&&(Pt.expires=pt.expires),pt.cacheControl&&(Pt.cacheControl=pt.cacheControl);var Xt={};if(qe){var zt=qe.finish();zt&&(Xt.resourceTiming=JSON.parse(JSON.stringify(zt)))}at.vectorTile=pt.vectorTile,at.parse(pt.vectorTile,Ge.layerIndex,Ge.availableImages,Ge.actor,function(ur,gr){if(ur||!gr)return ke(ur);ke(null,t.extend({rawTileData:_t.slice(0)},gr,Pt,Xt))}),Ge.loaded=Ge.loaded||{},Ge.loaded[Ye]=at})},b.prototype.reloadTile=function(Te,ke){var Ge=this,Ye=this.loaded,qe=Te.uid,at=this;if(Ye&&Ye[qe]){var et=Ye[qe];et.showCollisionBoxes=Te.showCollisionBoxes;var pt=function(_t,Pt){var Xt=et.reloadCallback;Xt&&(delete et.reloadCallback,et.parse(et.vectorTile,at.layerIndex,Ge.availableImages,at.actor,Xt)),ke(_t,Pt)};et.status==="parsing"?et.reloadCallback=pt:et.status==="done"&&(et.vectorTile?et.parse(et.vectorTile,this.layerIndex,this.availableImages,this.actor,pt):pt())}},b.prototype.abortTile=function(Te,ke){var Ge=this.loading,Ye=Te.uid;Ge&&Ge[Ye]&&Ge[Ye].abort&&(Ge[Ye].abort(),delete Ge[Ye]),ke()},b.prototype.removeTile=function(Te,ke){var Ge=this.loaded,Ye=Te.uid;Ge&&Ge[Ye]&&delete Ge[Ye],ke()};var g=t.window.ImageBitmap,_=function(){this.loaded={}};_.prototype.loadTile=function(Te,ke){var Ge=Te.uid,Ye=Te.encoding,qe=Te.rawImageData,at=g&&qe instanceof g?this.getImageData(qe):qe,et=new t.DEMData(Ge,at,Ye);this.loaded=this.loaded||{},this.loaded[Ge]=et,ke(null,et)},_.prototype.getImageData=function(Te){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Te.width,Te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Te.width,this.offscreenCanvas.height=Te.height,this.offscreenCanvasContext.drawImage(Te,0,0,Te.width,Te.height);var ke=this.offscreenCanvasContext.getImageData(-1,-1,Te.width+2,Te.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:ke.width,height:ke.height},ke.data)},_.prototype.removeTile=function(Te){var ke=this.loaded,Ge=Te.uid;ke&&ke[Ge]&&delete ke[Ge]};var p=A;function A(it,Te){var ke=it&&it.type,Ge;if(ke==="FeatureCollection")for(Ge=0;Ge<it.features.length;Ge++)A(it.features[Ge],Te);else if(ke==="GeometryCollection")for(Ge=0;Ge<it.geometries.length;Ge++)A(it.geometries[Ge],Te);else if(ke==="Feature")A(it.geometry,Te);else if(ke==="Polygon")c(it.coordinates,Te);else if(ke==="MultiPolygon")for(Ge=0;Ge<it.coordinates.length;Ge++)c(it.coordinates[Ge],Te);return it}function c(it,Te){if(it.length!==0){S(it[0],Te);for(var ke=1;ke<it.length;ke++)S(it[ke],!Te)}}function S(it,Te){for(var ke=0,Ge=0,Ye=it.length,qe=Ye-1;Ge<Ye;qe=Ge++)ke+=(it[Ge][0]-it[qe][0])*(it[qe][1]+it[Ge][1]);ke>=0!=!!Te&&it.reverse()}var T=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,x=function(Te){this._feature=Te,this.extent=t.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))};x.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Te=[],ke=0,Ge=this._feature.geometry;ke<Ge.length;ke+=1){var Ye=Ge[ke];Te.push([new t.Point$1(Ye[0],Ye[1])])}return Te}else{for(var qe=[],at=0,et=this._feature.geometry;at<et.length;at+=1){for(var pt=et[at],_t=[],Pt=0,Xt=pt;Pt<Xt.length;Pt+=1){var zt=Xt[Pt];_t.push(new t.Point$1(zt[0],zt[1]))}qe.push(_t)}return qe}},x.prototype.toGeoJSON=function(Te,ke,Ge){return T.call(this,Te,ke,Ge)};var w=function(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Te.length,this._features=Te};w.prototype.feature=function(Te){return new x(this._features[Te])};var v=t.vectorTile.VectorTileFeature,C=M;function M(it,Te){this.options=Te||{},this.features=it,this.length=it.length}M.prototype.feature=function(it){return new E(this.features[it],this.options.extent)};function E(it,Te){this.id=typeof it.id=="number"?it.id:void 0,this.type=it.type,this.rawGeometry=it.type===1?[it.geometry]:it.geometry,this.properties=it.tags,this.extent=Te||4096}E.prototype.loadGeometry=function(){var it=this.rawGeometry;this.geometry=[];for(var Te=0;Te<it.length;Te++){for(var ke=it[Te],Ge=[],Ye=0;Ye<ke.length;Ye++)Ge.push(new t.Point$1(ke[Ye][0],ke[Ye][1]));this.geometry.push(Ge)}return this.geometry},E.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var it=this.geometry,Te=1/0,ke=-1/0,Ge=1/0,Ye=-1/0,qe=0;qe<it.length;qe++)for(var at=it[qe],et=0;et<at.length;et++){var pt=at[et];Te=Math.min(Te,pt.x),ke=Math.max(ke,pt.x),Ge=Math.min(Ge,pt.y),Ye=Math.max(Ye,pt.y)}return[Te,Ge,ke,Ye]},E.prototype.toGeoJSON=v.prototype.toGeoJSON;var L=D,z=D,O=H,R=C;function D(it){var Te=new t.pbf;return B(it,Te),Te.finish()}function H(it,Te){Te=Te||{};var ke={};for(var Ge in it)ke[Ge]=new C(it[Ge].features,Te),ke[Ge].name=Ge,ke[Ge].version=Te.version,ke[Ge].extent=Te.extent;return D({layers:ke})}function B(it,Te){for(var ke in it.layers)Te.writeMessage(3,$,it.layers[ke])}function $(it,Te){Te.writeVarintField(15,it.version||1),Te.writeStringField(1,it.name||""),Te.writeVarintField(5,it.extent||4096);var ke,Ge={keys:[],values:[],keycache:{},valuecache:{}};for(ke=0;ke<it.length;ke++)Ge.feature=it.feature(ke),Te.writeMessage(2,W,Ge);var Ye=Ge.keys;for(ke=0;ke<Ye.length;ke++)Te.writeStringField(3,Ye[ke]);var qe=Ge.values;for(ke=0;ke<qe.length;ke++)Te.writeMessage(4,le,qe[ke])}function W(it,Te){var ke=it.feature;ke.id!==void 0&&Te.writeVarintField(1,ke.id),Te.writeMessage(2,re,it),Te.writeVarintField(3,ke.type),Te.writeMessage(4,K,ke)}function re(it,Te){var ke=it.feature,Ge=it.keys,Ye=it.values,qe=it.keycache,at=it.valuecache;for(var et in ke.properties){var pt=qe[et];typeof pt=="undefined"&&(Ge.push(et),pt=Ge.length-1,qe[et]=pt),Te.writeVarint(pt);var _t=ke.properties[et],Pt=typeof _t;Pt!=="string"&&Pt!=="boolean"&&Pt!=="number"&&(_t=JSON.stringify(_t));var Xt=Pt+":"+_t,zt=at[Xt];typeof zt=="undefined"&&(Ye.push(_t),zt=Ye.length-1,at[Xt]=zt),Te.writeVarint(zt)}}function Q(it,Te){return(Te<<3)+(it&7)}function Z(it){return it<<1^it>>31}function K(it,Te){for(var ke=it.loadGeometry(),Ge=it.type,Ye=0,qe=0,at=ke.length,et=0;et<at;et++){var pt=ke[et],_t=1;Ge===1&&(_t=pt.length),Te.writeVarint(Q(1,_t));for(var Pt=Ge===3?pt.length-1:pt.length,Xt=0;Xt<Pt;Xt++){Xt===1&&Ge!==1&&Te.writeVarint(Q(2,Pt-1));var zt=pt[Xt].x-Ye,ur=pt[Xt].y-qe;Te.writeVarint(Z(zt)),Te.writeVarint(Z(ur)),Ye+=zt,qe+=ur}Ge===3&&Te.writeVarint(Q(7,1))}}function le(it,Te){var ke=typeof it;ke==="string"?Te.writeStringField(1,it):ke==="boolean"?Te.writeBooleanField(7,it):ke==="number"&&(it%1!==0?Te.writeDoubleField(3,it):it<0?Te.writeSVarintField(6,it):Te.writeVarintField(5,it))}L.fromVectorTileJs=z,L.fromGeojsonVt=O,L.GeoJSONWrapper=R;function fe(it,Te,ke,Ge,Ye,qe){if(!(Ye-Ge<=ke)){var at=Ge+Ye>>1;ue(it,Te,at,Ge,Ye,qe%2),fe(it,Te,ke,Ge,at-1,qe+1),fe(it,Te,ke,at+1,Ye,qe+1)}}function ue(it,Te,ke,Ge,Ye,qe){for(;Ye>Ge;){if(Ye-Ge>600){var at=Ye-Ge+1,et=ke-Ge+1,pt=Math.log(at),_t=.5*Math.exp(2*pt/3),Pt=.5*Math.sqrt(pt*_t*(at-_t)/at)*(et-at/2<0?-1:1),Xt=Math.max(Ge,Math.floor(ke-et*_t/at+Pt)),zt=Math.min(Ye,Math.floor(ke+(at-et)*_t/at+Pt));ue(it,Te,ke,Xt,zt,qe)}var ur=Te[2*ke+qe],gr=Ge,Mr=Ye;for(V(it,Te,Ge,ke),Te[2*Ye+qe]>ur&&V(it,Te,Ge,Ye);gr<Mr;){for(V(it,Te,gr,Mr),gr++,Mr--;Te[2*gr+qe]<ur;)gr++;for(;Te[2*Mr+qe]>ur;)Mr--}Te[2*Ge+qe]===ur?V(it,Te,Ge,Mr):(Mr++,V(it,Te,Mr,Ye)),Mr<=ke&&(Ge=Mr+1),ke<=Mr&&(Ye=Mr-1)}}function V(it,Te,ke,Ge){j(it,ke,Ge),j(Te,2*ke,2*Ge),j(Te,2*ke+1,2*Ge+1)}function j(it,Te,ke){var Ge=it[Te];it[Te]=it[ke],it[ke]=Ge}function ee(it,Te,ke,Ge,Ye,qe,at){for(var et=[0,it.length-1,0],pt=[],_t,Pt;et.length;){var Xt=et.pop(),zt=et.pop(),ur=et.pop();if(zt-ur<=at){for(var gr=ur;gr<=zt;gr++)_t=Te[2*gr],Pt=Te[2*gr+1],_t>=ke&&_t<=Ye&&Pt>=Ge&&Pt<=qe&&pt.push(it[gr]);continue}var Mr=Math.floor((ur+zt)/2);_t=Te[2*Mr],Pt=Te[2*Mr+1],_t>=ke&&_t<=Ye&&Pt>=Ge&&Pt<=qe&&pt.push(it[Mr]);var un=(Xt+1)%2;(Xt===0?ke<=_t:Ge<=Pt)&&(et.push(ur),et.push(Mr-1),et.push(un)),(Xt===0?Ye>=_t:qe>=Pt)&&(et.push(Mr+1),et.push(zt),et.push(un))}return pt}function q(it,Te,ke,Ge,Ye,qe){for(var at=[0,it.length-1,0],et=[],pt=Ye*Ye;at.length;){var _t=at.pop(),Pt=at.pop(),Xt=at.pop();if(Pt-Xt<=qe){for(var zt=Xt;zt<=Pt;zt++)X(Te[2*zt],Te[2*zt+1],ke,Ge)<=pt&&et.push(it[zt]);continue}var ur=Math.floor((Xt+Pt)/2),gr=Te[2*ur],Mr=Te[2*ur+1];X(gr,Mr,ke,Ge)<=pt&&et.push(it[ur]);var un=(_t+1)%2;(_t===0?ke-Ye<=gr:Ge-Ye<=Mr)&&(at.push(Xt),at.push(ur-1),at.push(un)),(_t===0?ke+Ye>=gr:Ge+Ye>=Mr)&&(at.push(ur+1),at.push(Pt),at.push(un))}return et}function X(it,Te,ke,Ge){var Ye=it-ke,qe=Te-Ge;return Ye*Ye+qe*qe}var J=function(it){return it[0]},ie=function(it){return it[1]},ne=function(Te,ke,Ge,Ye,qe){ke===void 0&&(ke=J),Ge===void 0&&(Ge=ie),Ye===void 0&&(Ye=64),qe===void 0&&(qe=Float64Array),this.nodeSize=Ye,this.points=Te;for(var at=Te.length<65536?Uint16Array:Uint32Array,et=this.ids=new at(Te.length),pt=this.coords=new qe(Te.length*2),_t=0;_t<Te.length;_t++)et[_t]=_t,pt[2*_t]=ke(Te[_t]),pt[2*_t+1]=Ge(Te[_t]);fe(et,pt,Ye,0,et.length-1,0)};ne.prototype.range=function(Te,ke,Ge,Ye){return ee(this.ids,this.coords,Te,ke,Ge,Ye,this.nodeSize)},ne.prototype.within=function(Te,ke,Ge){return q(this.ids,this.coords,Te,ke,Ge,this.nodeSize)};var oe={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(it){return it}},se=function(Te){this.options=Oe(Object.create(oe),Te),this.trees=new Array(this.options.maxZoom+1)};se.prototype.load=function(Te){var ke=this.options,Ge=ke.log,Ye=ke.minZoom,qe=ke.maxZoom,at=ke.nodeSize;Ge&&console.time("total time");var et="prepare "+Te.length+" points";Ge&&console.time(et),this.points=Te;for(var pt=[],_t=0;_t<Te.length;_t++)!Te[_t].geometry||pt.push(ce(Te[_t],_t));this.trees[qe+1]=new ne(pt,_e,Re,at,Float32Array),Ge&&console.timeEnd(et);for(var Pt=qe;Pt>=Ye;Pt--){var Xt=+Date.now();pt=this._cluster(pt,Pt),this.trees[Pt]=new ne(pt,_e,Re,at,Float32Array),Ge&&console.log("z%d: %d clusters in %dms",Pt,pt.length,+Date.now()-Xt)}return Ge&&console.timeEnd("total time"),this},se.prototype.getClusters=function(Te,ke){var Ge=((Te[0]+180)%360+360)%360-180,Ye=Math.max(-90,Math.min(90,Te[1])),qe=Te[2]===180?180:((Te[2]+180)%360+360)%360-180,at=Math.max(-90,Math.min(90,Te[3]));if(Te[2]-Te[0]>=360)Ge=-180,qe=180;else if(Ge>qe){var et=this.getClusters([Ge,Ye,180,at],ke),pt=this.getClusters([-180,Ye,qe,at],ke);return et.concat(pt)}for(var _t=this.trees[this._limitZoom(ke)],Pt=_t.range(Se(Ge),Ae(at),Se(qe),Ae(Ye)),Xt=[],zt=0,ur=Pt;zt<ur.length;zt+=1){var gr=ur[zt],Mr=_t.points[gr];Xt.push(Mr.numPoints?pe(Mr):this.points[Mr.index])}return Xt},se.prototype.getChildren=function(Te){var ke=this._getOriginId(Te),Ge=this._getOriginZoom(Te),Ye="No cluster with the specified id.",qe=this.trees[Ge];if(!qe)throw new Error(Ye);var at=qe.points[ke];if(!at)throw new Error(Ye);for(var et=this.options.radius/(this.options.extent*Math.pow(2,Ge-1)),pt=qe.within(at.x,at.y,et),_t=[],Pt=0,Xt=pt;Pt<Xt.length;Pt+=1){var zt=Xt[Pt],ur=qe.points[zt];ur.parentId===Te&&_t.push(ur.numPoints?pe(ur):this.points[ur.index])}if(_t.length===0)throw new Error(Ye);return _t},se.prototype.getLeaves=function(Te,ke,Ge){ke=ke||10,Ge=Ge||0;var Ye=[];return this._appendLeaves(Ye,Te,ke,Ge,0),Ye},se.prototype.getTile=function(Te,ke,Ge){var Ye=this.trees[this._limitZoom(Te)],qe=Math.pow(2,Te),at=this.options,et=at.extent,pt=at.radius,_t=pt/et,Pt=(Ge-_t)/qe,Xt=(Ge+1+_t)/qe,zt={features:[]};return this._addTileFeatures(Ye.range((ke-_t)/qe,Pt,(ke+1+_t)/qe,Xt),Ye.points,ke,Ge,qe,zt),ke===0&&this._addTileFeatures(Ye.range(1-_t/qe,Pt,1,Xt),Ye.points,qe,Ge,qe,zt),ke===qe-1&&this._addTileFeatures(Ye.range(0,Pt,_t/qe,Xt),Ye.points,-1,Ge,qe,zt),zt.features.length?zt:null},se.prototype.getClusterExpansionZoom=function(Te){for(var ke=this._getOriginZoom(Te)-1;ke<=this.options.maxZoom;){var Ge=this.getChildren(Te);if(ke++,Ge.length!==1)break;Te=Ge[0].properties.cluster_id}return ke},se.prototype._appendLeaves=function(Te,ke,Ge,Ye,qe){for(var at=this.getChildren(ke),et=0,pt=at;et<pt.length;et+=1){var _t=pt[et],Pt=_t.properties;if(Pt&&Pt.cluster?qe+Pt.point_count<=Ye?qe+=Pt.point_count:qe=this._appendLeaves(Te,Pt.cluster_id,Ge,Ye,qe):qe<Ye?qe++:Te.push(_t),Te.length===Ge)break}return qe},se.prototype._addTileFeatures=function(Te,ke,Ge,Ye,qe,at){for(var et=0,pt=Te;et<pt.length;et+=1){var _t=pt[et],Pt=ke[_t],Xt=Pt.numPoints,zt={type:1,geometry:[[Math.round(this.options.extent*(Pt.x*qe-Ge)),Math.round(this.options.extent*(Pt.y*qe-Ye))]],tags:Xt?xe(Pt):this.points[Pt.index].properties},ur=void 0;Xt?ur=Pt.id:this.options.generateId?ur=Pt.index:this.points[Pt.index].id&&(ur=this.points[Pt.index].id),ur!==void 0&&(zt.id=ur),at.features.push(zt)}},se.prototype._limitZoom=function(Te){return Math.max(this.options.minZoom,Math.min(Te,this.options.maxZoom+1))},se.prototype._cluster=function(Te,ke){for(var Ge=[],Ye=this.options,qe=Ye.radius,at=Ye.extent,et=Ye.reduce,pt=qe/(at*Math.pow(2,ke)),_t=0;_t<Te.length;_t++){var Pt=Te[_t];if(!(Pt.zoom<=ke)){Pt.zoom=ke;for(var Xt=this.trees[ke+1],zt=Xt.within(Pt.x,Pt.y,pt),ur=Pt.numPoints||1,gr=Pt.x*ur,Mr=Pt.y*ur,un=et&&ur>1?this._map(Pt,!0):null,zr=(_t<<5)+(ke+1)+this.points.length,$r=0,hn=zt;$r<hn.length;$r+=1){var Tr=hn[$r],wr=Xt.points[Tr];if(!(wr.zoom<=ke)){wr.zoom=ke;var Ur=wr.numPoints||1;gr+=wr.x*Ur,Mr+=wr.y*Ur,ur+=Ur,wr.parentId=zr,et&&(un||(un=this._map(Pt,!0)),et(un,this._map(wr)))}}ur===1?Ge.push(Pt):(Pt.parentId=zr,Ge.push(me(gr/ur,Mr/ur,zr,ur,un)))}}return Ge},se.prototype._getOriginId=function(Te){return Te-this.points.length>>5},se.prototype._getOriginZoom=function(Te){return(Te-this.points.length)%32},se.prototype._map=function(Te,ke){if(Te.numPoints)return ke?Oe({},Te.properties):Te.properties;var Ge=this.points[Te.index].properties,Ye=this.options.map(Ge);return ke&&Ye===Ge?Oe({},Ye):Ye};function me(it,Te,ke,Ge,Ye){return{x:it,y:Te,zoom:1/0,id:ke,parentId:-1,numPoints:Ge,properties:Ye}}function ce(it,Te){var ke=it.geometry.coordinates,Ge=ke[0],Ye=ke[1];return{x:Se(Ge),y:Ae(Ye),zoom:1/0,index:Te,parentId:-1}}function pe(it){return{type:"Feature",id:it.id,properties:xe(it),geometry:{type:"Point",coordinates:[Ce(it.x),Ee(it.y)]}}}function xe(it){var Te=it.numPoints,ke=Te>=1e4?Math.round(Te/1e3)+"k":Te>=1e3?Math.round(Te/100)/10+"k":Te;return Oe(Oe({},it.properties),{cluster:!0,cluster_id:it.id,point_count:Te,point_count_abbreviated:ke})}function Se(it){return it/360+.5}function Ae(it){var Te=Math.sin(it*Math.PI/180),ke=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return ke<0?0:ke>1?1:ke}function Ce(it){return(it-.5)*360}function Ee(it){var Te=(180-it*360)*Math.PI/180;return 360*Math.atan(Math.exp(Te))/Math.PI-90}function Oe(it,Te){for(var ke in Te)it[ke]=Te[ke];return it}function _e(it){return it.x}function Re(it){return it.y}function Ve(it,Te,ke,Ge){for(var Ye=Ge,qe=ke-Te>>1,at=ke-Te,et,pt=it[Te],_t=it[Te+1],Pt=it[ke],Xt=it[ke+1],zt=Te+3;zt<ke;zt+=3){var ur=Je(it[zt],it[zt+1],pt,_t,Pt,Xt);if(ur>Ye)et=zt,Ye=ur;else if(ur===Ye){var gr=Math.abs(zt-qe);gr<at&&(et=zt,at=gr)}}Ye>Ge&&(et-Te>3&&Ve(it,Te,et,Ge),it[et+2]=Ye,ke-et>3&&Ve(it,et,ke,Ge))}function Je(it,Te,ke,Ge,Ye,qe){var at=Ye-ke,et=qe-Ge;if(at!==0||et!==0){var pt=((it-ke)*at+(Te-Ge)*et)/(at*at+et*et);pt>1?(ke=Ye,Ge=qe):pt>0&&(ke+=at*pt,Ge+=et*pt)}return at=it-ke,et=Te-Ge,at*at+et*et}function ze(it,Te,ke,Ge){var Ye={id:typeof it=="undefined"?null:it,type:Te,geometry:ke,tags:Ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return De(Ye),Ye}function De(it){var Te=it.geometry,ke=it.type;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")je(it,Te);else if(ke==="Polygon"||ke==="MultiLineString")for(var Ge=0;Ge<Te.length;Ge++)je(it,Te[Ge]);else if(ke==="MultiPolygon")for(Ge=0;Ge<Te.length;Ge++)for(var Ye=0;Ye<Te[Ge].length;Ye++)je(it,Te[Ge][Ye])}function je(it,Te){for(var ke=0;ke<Te.length;ke+=3)it.minX=Math.min(it.minX,Te[ke]),it.minY=Math.min(it.minY,Te[ke+1]),it.maxX=Math.max(it.maxX,Te[ke]),it.maxY=Math.max(it.maxY,Te[ke+1])}function dt(it,Te){var ke=[];if(it.type==="FeatureCollection")for(var Ge=0;Ge<it.features.length;Ge++)Et(ke,it.features[Ge],Te,Ge);else it.type==="Feature"?Et(ke,it,Te):Et(ke,{geometry:it},Te);return ke}function Et(it,Te,ke,Ge){if(!!Te.geometry){var Ye=Te.geometry.coordinates,qe=Te.geometry.type,at=Math.pow(ke.tolerance/((1<<ke.maxZoom)*ke.extent),2),et=[],pt=Te.id;if(ke.promoteId?pt=Te.properties[ke.promoteId]:ke.generateId&&(pt=Ge||0),qe==="Point")$t(Ye,et);else if(qe==="MultiPoint")for(var _t=0;_t<Ye.length;_t++)$t(Ye[_t],et);else if(qe==="LineString")wt(Ye,et,at,!1);else if(qe==="MultiLineString")if(ke.lineMetrics){for(_t=0;_t<Ye.length;_t++)et=[],wt(Ye[_t],et,at,!1),it.push(ze(pt,"LineString",et,Te.properties));return}else Ot(Ye,et,at,!1);else if(qe==="Polygon")Ot(Ye,et,at,!0);else if(qe==="MultiPolygon")for(_t=0;_t<Ye.length;_t++){var Pt=[];Ot(Ye[_t],Pt,at,!0),et.push(Pt)}else if(qe==="GeometryCollection"){for(_t=0;_t<Te.geometry.geometries.length;_t++)Et(it,{id:pt,geometry:Te.geometry.geometries[_t],properties:Te.properties},ke,Ge);return}else throw new Error("Input data is not a valid GeoJSON object.");it.push(ze(pt,qe,et,Te.properties))}}function $t(it,Te){Te.push(Vt(it[0])),Te.push(kt(it[1])),Te.push(0)}function wt(it,Te,ke,Ge){for(var Ye,qe,at=0,et=0;et<it.length;et++){var pt=Vt(it[et][0]),_t=kt(it[et][1]);Te.push(pt),Te.push(_t),Te.push(0),et>0&&(Ge?at+=(Ye*_t-pt*qe)/2:at+=Math.sqrt(Math.pow(pt-Ye,2)+Math.pow(_t-qe,2))),Ye=pt,qe=_t}var Pt=Te.length-3;Te[2]=1,Ve(Te,0,Pt,ke),Te[Pt+2]=1,Te.size=Math.abs(at),Te.start=0,Te.end=Te.size}function Ot(it,Te,ke,Ge){for(var Ye=0;Ye<it.length;Ye++){var qe=[];wt(it[Ye],qe,ke,Ge),Te.push(qe)}}function Vt(it){return it/360+.5}function kt(it){var Te=Math.sin(it*Math.PI/180),ke=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return ke<0?0:ke>1?1:ke}function St(it,Te,ke,Ge,Ye,qe,at,et){if(ke/=Te,Ge/=Te,qe>=ke&&at<Ge)return it;if(at<ke||qe>=Ge)return null;for(var pt=[],_t=0;_t<it.length;_t++){var Pt=it[_t],Xt=Pt.geometry,zt=Pt.type,ur=Ye===0?Pt.minX:Pt.minY,gr=Ye===0?Pt.maxX:Pt.maxY;if(ur>=ke&&gr<Ge){pt.push(Pt);continue}else if(gr<ke||ur>=Ge)continue;var Mr=[];if(zt==="Point"||zt==="MultiPoint")ot(Xt,Mr,ke,Ge,Ye);else if(zt==="LineString")ht(Xt,Mr,ke,Ge,Ye,!1,et.lineMetrics);else if(zt==="MultiLineString")Pe(Xt,Mr,ke,Ge,Ye,!1);else if(zt==="Polygon")Pe(Xt,Mr,ke,Ge,Ye,!0);else if(zt==="MultiPolygon")for(var un=0;un<Xt.length;un++){var zr=[];Pe(Xt[un],zr,ke,Ge,Ye,!0),zr.length&&Mr.push(zr)}if(Mr.length){if(et.lineMetrics&&zt==="LineString"){for(un=0;un<Mr.length;un++)pt.push(ze(Pt.id,zt,Mr[un],Pt.tags));continue}(zt==="LineString"||zt==="MultiLineString")&&(Mr.length===1?(zt="LineString",Mr=Mr[0]):zt="MultiLineString"),(zt==="Point"||zt==="MultiPoint")&&(zt=Mr.length===3?"Point":"MultiPoint"),pt.push(ze(Pt.id,zt,Mr,Pt.tags))}}return pt.length?pt:null}function ot(it,Te,ke,Ge,Ye){for(var qe=0;qe<it.length;qe+=3){var at=it[qe+Ye];at>=ke&&at<=Ge&&(Te.push(it[qe]),Te.push(it[qe+1]),Te.push(it[qe+2]))}}function ht(it,Te,ke,Ge,Ye,qe,at){for(var et=Ke(it),pt=Ye===0?Qe:ut,_t=it.start,Pt,Xt,zt=0;zt<it.length-3;zt+=3){var ur=it[zt],gr=it[zt+1],Mr=it[zt+2],un=it[zt+3],zr=it[zt+4],$r=Ye===0?ur:gr,hn=Ye===0?un:zr,Tr=!1;at&&(Pt=Math.sqrt(Math.pow(ur-un,2)+Math.pow(gr-zr,2))),$r<ke?hn>ke&&(Xt=pt(et,ur,gr,un,zr,ke),at&&(et.start=_t+Pt*Xt)):$r>Ge?hn<Ge&&(Xt=pt(et,ur,gr,un,zr,Ge),at&&(et.start=_t+Pt*Xt)):We(et,ur,gr,Mr),hn<ke&&$r>=ke&&(Xt=pt(et,ur,gr,un,zr,ke),Tr=!0),hn>Ge&&$r<=Ge&&(Xt=pt(et,ur,gr,un,zr,Ge),Tr=!0),!qe&&Tr&&(at&&(et.end=_t+Pt*Xt),Te.push(et),et=Ke(it)),at&&(_t+=Pt)}var wr=it.length-3;ur=it[wr],gr=it[wr+1],Mr=it[wr+2],$r=Ye===0?ur:gr,$r>=ke&&$r<=Ge&&We(et,ur,gr,Mr),wr=et.length-3,qe&&wr>=3&&(et[wr]!==et[0]||et[wr+1]!==et[1])&&We(et,et[0],et[1],et[2]),et.length&&Te.push(et)}function Ke(it){var Te=[];return Te.size=it.size,Te.start=it.start,Te.end=it.end,Te}function Pe(it,Te,ke,Ge,Ye,qe){for(var at=0;at<it.length;at++)ht(it[at],Te,ke,Ge,Ye,qe,!1)}function We(it,Te,ke,Ge){it.push(Te),it.push(ke),it.push(Ge)}function Qe(it,Te,ke,Ge,Ye,qe){var at=(qe-Te)/(Ge-Te);return it.push(qe),it.push(ke+(Ye-ke)*at),it.push(1),at}function ut(it,Te,ke,Ge,Ye,qe){var at=(qe-ke)/(Ye-ke);return it.push(Te+(Ge-Te)*at),it.push(qe),it.push(1),at}function It(it,Te){var ke=Te.buffer/Te.extent,Ge=it,Ye=St(it,1,-1-ke,ke,0,-1,2,Te),qe=St(it,1,1-ke,2+ke,0,-1,2,Te);return(Ye||qe)&&(Ge=St(it,1,-ke,1+ke,0,-1,2,Te)||[],Ye&&(Ge=Tt(Ye,1).concat(Ge)),qe&&(Ge=Ge.concat(Tt(qe,-1)))),Ge}function Tt(it,Te){for(var ke=[],Ge=0;Ge<it.length;Ge++){var Ye=it[Ge],qe=Ye.type,at;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")at=Bt(Ye.geometry,Te);else if(qe==="MultiLineString"||qe==="Polygon"){at=[];for(var et=0;et<Ye.geometry.length;et++)at.push(Bt(Ye.geometry[et],Te))}else if(qe==="MultiPolygon")for(at=[],et=0;et<Ye.geometry.length;et++){for(var pt=[],_t=0;_t<Ye.geometry[et].length;_t++)pt.push(Bt(Ye.geometry[et][_t],Te));at.push(pt)}ke.push(ze(Ye.id,qe,at,Ye.tags))}return ke}function Bt(it,Te){var ke=[];ke.size=it.size,it.start!==void 0&&(ke.start=it.start,ke.end=it.end);for(var Ge=0;Ge<it.length;Ge+=3)ke.push(it[Ge]+Te,it[Ge+1],it[Ge+2]);return ke}function rr(it,Te){if(it.transformed)return it;var ke=1<<it.z,Ge=it.x,Ye=it.y,qe,at,et;for(qe=0;qe<it.features.length;qe++){var pt=it.features[qe],_t=pt.geometry,Pt=pt.type;if(pt.geometry=[],Pt===1)for(at=0;at<_t.length;at+=2)pt.geometry.push(Ut(_t[at],_t[at+1],Te,ke,Ge,Ye));else for(at=0;at<_t.length;at++){var Xt=[];for(et=0;et<_t[at].length;et+=2)Xt.push(Ut(_t[at][et],_t[at][et+1],Te,ke,Ge,Ye));pt.geometry.push(Xt)}}return it.transformed=!0,it}function Ut(it,Te,ke,Ge,Ye,qe){return[Math.round(ke*(it*Ge-Ye)),Math.round(ke*(Te*Ge-qe))]}function Qt(it,Te,ke,Ge,Ye){for(var qe=Te===Ye.maxZoom?0:Ye.tolerance/((1<<Te)*Ye.extent),at={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ke,y:Ge,z:Te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},et=0;et<it.length;et++){at.numFeatures++,ar(at,it[et],qe,Ye);var pt=it[et].minX,_t=it[et].minY,Pt=it[et].maxX,Xt=it[et].maxY;pt<at.minX&&(at.minX=pt),_t<at.minY&&(at.minY=_t),Pt>at.maxX&&(at.maxX=Pt),Xt>at.maxY&&(at.maxY=Xt)}return at}function ar(it,Te,ke,Ge){var Ye=Te.geometry,qe=Te.type,at=[];if(qe==="Point"||qe==="MultiPoint")for(var et=0;et<Ye.length;et+=3)at.push(Ye[et]),at.push(Ye[et+1]),it.numPoints++,it.numSimplified++;else if(qe==="LineString")nr(at,Ye,it,ke,!1,!1);else if(qe==="MultiLineString"||qe==="Polygon")for(et=0;et<Ye.length;et++)nr(at,Ye[et],it,ke,qe==="Polygon",et===0);else if(qe==="MultiPolygon")for(var pt=0;pt<Ye.length;pt++){var _t=Ye[pt];for(et=0;et<_t.length;et++)nr(at,_t[et],it,ke,!0,et===0)}if(at.length){var Pt=Te.tags||null;if(qe==="LineString"&&Ge.lineMetrics){Pt={};for(var Xt in Te.tags)Pt[Xt]=Te.tags[Xt];Pt.mapbox_clip_start=Ye.start/Ye.size,Pt.mapbox_clip_end=Ye.end/Ye.size}var zt={geometry:at,type:qe==="Polygon"||qe==="MultiPolygon"?3:qe==="LineString"||qe==="MultiLineString"?2:1,tags:Pt};Te.id!==null&&(zt.id=Te.id),it.features.push(zt)}}function nr(it,Te,ke,Ge,Ye,qe){var at=Ge*Ge;if(Ge>0&&Te.size<(Ye?at:Ge)){ke.numPoints+=Te.length/3;return}for(var et=[],pt=0;pt<Te.length;pt+=3)(Ge===0||Te[pt+2]>at)&&(ke.numSimplified++,et.push(Te[pt]),et.push(Te[pt+1])),ke.numPoints++;Ye&&cr(et,qe),it.push(et)}function cr(it,Te){for(var ke=0,Ge=0,Ye=it.length,qe=Ye-2;Ge<Ye;qe=Ge,Ge+=2)ke+=(it[Ge]-it[qe])*(it[Ge+1]+it[qe+1]);if(ke>0===Te)for(Ge=0,Ye=it.length;Ge<Ye/2;Ge+=2){var at=it[Ge],et=it[Ge+1];it[Ge]=it[Ye-2-Ge],it[Ge+1]=it[Ye-1-Ge],it[Ye-2-Ge]=at,it[Ye-1-Ge]=et}}function Kr(it,Te){return new yn(it,Te)}function yn(it,Te){Te=this.options=st(Object.create(this.options),Te);var ke=Te.debug;if(ke&&console.time("preprocess data"),Te.maxZoom<0||Te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Te.promoteId&&Te.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ge=dt(it,Te);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Te.indexMaxZoom,Te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ge=It(Ge,Te),Ge.length&&this.splitTile(Ge,0,0,0),ke&&(Ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}yn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},yn.prototype.splitTile=function(it,Te,ke,Ge,Ye,qe,at){for(var et=[it,Te,ke,Ge],pt=this.options,_t=pt.debug;et.length;){Ge=et.pop(),ke=et.pop(),Te=et.pop(),it=et.pop();var Pt=1<<Te,Xt=Qr(Te,ke,Ge),zt=this.tiles[Xt];if(!zt&&(_t>1&&console.time("creation"),zt=this.tiles[Xt]=Qt(it,Te,ke,Ge,pt),this.tileCoords.push({z:Te,x:ke,y:Ge}),_t)){_t>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Te,ke,Ge,zt.numFeatures,zt.numPoints,zt.numSimplified),console.timeEnd("creation"));var ur="z"+Te;this.stats[ur]=(this.stats[ur]||0)+1,this.total++}if(zt.source=it,Ye){if(Te===pt.maxZoom||Te===Ye)continue;var gr=1<<Ye-Te;if(ke!==Math.floor(qe/gr)||Ge!==Math.floor(at/gr))continue}else if(Te===pt.indexMaxZoom||zt.numPoints<=pt.indexMaxPoints)continue;if(zt.source=null,it.length!==0){_t>1&&console.time("clipping");var Mr=.5*pt.buffer/pt.extent,un=.5-Mr,zr=.5+Mr,$r=1+Mr,hn,Tr,wr,Ur,Br,Cr;hn=Tr=wr=Ur=null,Br=St(it,Pt,ke-Mr,ke+zr,0,zt.minX,zt.maxX,pt),Cr=St(it,Pt,ke+un,ke+$r,0,zt.minX,zt.maxX,pt),it=null,Br&&(hn=St(Br,Pt,Ge-Mr,Ge+zr,1,zt.minY,zt.maxY,pt),Tr=St(Br,Pt,Ge+un,Ge+$r,1,zt.minY,zt.maxY,pt),Br=null),Cr&&(wr=St(Cr,Pt,Ge-Mr,Ge+zr,1,zt.minY,zt.maxY,pt),Ur=St(Cr,Pt,Ge+un,Ge+$r,1,zt.minY,zt.maxY,pt),Cr=null),_t>1&&console.timeEnd("clipping"),et.push(hn||[],Te+1,ke*2,Ge*2),et.push(Tr||[],Te+1,ke*2,Ge*2+1),et.push(wr||[],Te+1,ke*2+1,Ge*2),et.push(Ur||[],Te+1,ke*2+1,Ge*2+1)}}},yn.prototype.getTile=function(it,Te,ke){var Ge=this.options,Ye=Ge.extent,qe=Ge.debug;if(it<0||it>24)return null;var at=1<<it;Te=(Te%at+at)%at;var et=Qr(it,Te,ke);if(this.tiles[et])return rr(this.tiles[et],Ye);qe>1&&console.log("drilling down to z%d-%d-%d",it,Te,ke);for(var pt=it,_t=Te,Pt=ke,Xt;!Xt&&pt>0;)pt--,_t=Math.floor(_t/2),Pt=Math.floor(Pt/2),Xt=this.tiles[Qr(pt,_t,Pt)];return!Xt||!Xt.source?null:(qe>1&&console.log("found parent tile z%d-%d-%d",pt,_t,Pt),qe>1&&console.time("drilling down"),this.splitTile(Xt.source,pt,_t,Pt,it,Te,ke),qe>1&&console.timeEnd("drilling down"),this.tiles[et]?rr(this.tiles[et],Ye):null)};function Qr(it,Te,ke){return((1<<it)*ke+Te)*32+it}function st(it,Te){for(var ke in Te)it[ke]=Te[ke];return it}function Gt(it,Te){var ke=it.tileID.canonical;if(!this._geoJSONIndex)return Te(null,null);var Ge=this._geoJSONIndex.getTile(ke.z,ke.x,ke.y);if(!Ge)return Te(null,null);var Ye=new w(Ge.features),qe=L(Ye);(qe.byteOffset!==0||qe.byteLength!==qe.buffer.byteLength)&&(qe=new Uint8Array(qe)),Te(null,{vectorTile:Ye,rawData:qe.buffer})}var Zt=function(it){function Te(ke,Ge,Ye,qe){it.call(this,ke,Ge,Ye,Gt),qe&&(this.loadGeoJSON=qe)}return it&&(Te.__proto__=it),Te.prototype=Object.create(it&&it.prototype),Te.prototype.constructor=Te,Te.prototype.loadData=function(Ge,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ye,this._pendingLoadDataParams=Ge,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Te.prototype._loadData=function(){var Ge=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ye=this._pendingCallback,qe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var at=qe&&qe.request&&qe.request.collectResourceTiming?new t.RequestPerformance(qe.request):!1;this.loadGeoJSON(qe,function(et,pt){if(et||!pt)return Ye(et);if(typeof pt!="object")return Ye(new Error("Input data given to '"+qe.source+"' is not a valid GeoJSON object."));p(pt,!0);try{Ge._geoJSONIndex=qe.cluster?new se(Ht(qe)).load(pt.features):Kr(pt,qe.geojsonVtOptions)}catch(Xt){return Ye(Xt)}Ge.loaded={};var _t={};if(at){var Pt=at.finish();Pt&&(_t.resourceTiming={},_t.resourceTiming[qe.source]=JSON.parse(JSON.stringify(Pt)))}Ye(null,_t)})}},Te.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Te.prototype.reloadTile=function(Ge,Ye){var qe=this.loaded,at=Ge.uid;return qe&&qe[at]?it.prototype.reloadTile.call(this,Ge,Ye):this.loadTile(Ge,Ye)},Te.prototype.loadGeoJSON=function(Ge,Ye){if(Ge.request)t.getJSON(Ge.request,Ye);else if(typeof Ge.data=="string")try{return Ye(null,JSON.parse(Ge.data))}catch{return Ye(new Error("Input data given to '"+Ge.source+"' is not a valid GeoJSON object."))}else return Ye(new Error("Input data given to '"+Ge.source+"' is not a valid GeoJSON object."))},Te.prototype.removeSource=function(Ge,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ye()},Te.prototype.getClusterExpansionZoom=function(Ge,Ye){try{Ye(null,this._geoJSONIndex.getClusterExpansionZoom(Ge.clusterId))}catch(qe){Ye(qe)}},Te.prototype.getClusterChildren=function(Ge,Ye){try{Ye(null,this._geoJSONIndex.getChildren(Ge.clusterId))}catch(qe){Ye(qe)}},Te.prototype.getClusterLeaves=function(Ge,Ye){try{Ye(null,this._geoJSONIndex.getLeaves(Ge.clusterId,Ge.limit,Ge.offset))}catch(qe){Ye(qe)}},Te}(b);function Ht(it){var Te=it.superclusterOptions,ke=it.clusterProperties;if(!ke||!Te)return Te;for(var Ge={},Ye={},qe={accumulated:null,zoom:0},at={properties:null},et=Object.keys(ke),pt=0,_t=et;pt<_t.length;pt+=1){var Pt=_t[pt],Xt=ke[Pt],zt=Xt[0],ur=Xt[1],gr=t.createExpression(ur),Mr=t.createExpression(typeof zt=="string"?[zt,["accumulated"],["get",Pt]]:zt);Ge[Pt]=gr.value,Ye[Pt]=Mr.value}return Te.map=function(un){at.properties=un;for(var zr={},$r=0,hn=et;$r<hn.length;$r+=1){var Tr=hn[$r];zr[Tr]=Ge[Tr].evaluate(qe,at)}return zr},Te.reduce=function(un,zr){at.properties=zr;for(var $r=0,hn=et;$r<hn.length;$r+=1){var Tr=hn[$r];qe.accumulated=un[Tr],un[Tr]=Ye[Tr].evaluate(qe,at)}},Te}var _r=function(Te){var ke=this;this.self=Te,this.actor=new t.Actor(Te,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:b,geojson:Zt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ge,Ye){if(ke.workerSourceTypes[Ge])throw new Error('Worker source with name "'+Ge+'" already registered.');ke.workerSourceTypes[Ge]=Ye},this.self.registerRTLTextPlugin=function(Ge){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=Ge.applyArabicShaping,t.plugin.processBidirectionalText=Ge.processBidirectionalText,t.plugin.processStyledBidirectionalText=Ge.processStyledBidirectionalText}};return _r.prototype.setReferrer=function(Te,ke){this.referrer=ke},_r.prototype.setImages=function(Te,ke,Ge){this.availableImages[Te]=ke;for(var Ye in this.workerSources[Te]){var qe=this.workerSources[Te][Ye];for(var at in qe)qe[at].availableImages=ke}Ge()},_r.prototype.setLayers=function(Te,ke,Ge){this.getLayerIndex(Te).replace(ke),Ge()},_r.prototype.updateLayers=function(Te,ke,Ge){this.getLayerIndex(Te).update(ke.layers,ke.removedIds),Ge()},_r.prototype.loadTile=function(Te,ke,Ge){this.getWorkerSource(Te,ke.type,ke.source).loadTile(ke,Ge)},_r.prototype.loadDEMTile=function(Te,ke,Ge){this.getDEMWorkerSource(Te,ke.source).loadTile(ke,Ge)},_r.prototype.reloadTile=function(Te,ke,Ge){this.getWorkerSource(Te,ke.type,ke.source).reloadTile(ke,Ge)},_r.prototype.abortTile=function(Te,ke,Ge){this.getWorkerSource(Te,ke.type,ke.source).abortTile(ke,Ge)},_r.prototype.removeTile=function(Te,ke,Ge){this.getWorkerSource(Te,ke.type,ke.source).removeTile(ke,Ge)},_r.prototype.removeDEMTile=function(Te,ke){this.getDEMWorkerSource(Te,ke.source).removeTile(ke)},_r.prototype.removeSource=function(Te,ke,Ge){if(!(!this.workerSources[Te]||!this.workerSources[Te][ke.type]||!this.workerSources[Te][ke.type][ke.source])){var Ye=this.workerSources[Te][ke.type][ke.source];delete this.workerSources[Te][ke.type][ke.source],Ye.removeSource!==void 0?Ye.removeSource(ke,Ge):Ge()}},_r.prototype.loadWorkerSource=function(Te,ke,Ge){try{this.self.importScripts(ke.url),Ge()}catch(Ye){Ge(Ye.toString())}},_r.prototype.syncRTLPluginState=function(Te,ke,Ge){try{t.plugin.setState(ke);var Ye=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&Ye!=null){this.self.importScripts(Ye);var qe=t.plugin.isParsed(),at=qe?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ye);Ge(at,qe)}}catch(et){Ge(et.toString())}},_r.prototype.getAvailableImages=function(Te){var ke=this.availableImages[Te];return ke||(ke=[]),ke},_r.prototype.getLayerIndex=function(Te){var ke=this.layerIndexes[Te];return ke||(ke=this.layerIndexes[Te]=new r),ke},_r.prototype.getWorkerSource=function(Te,ke,Ge){var Ye=this;if(this.workerSources[Te]||(this.workerSources[Te]={}),this.workerSources[Te][ke]||(this.workerSources[Te][ke]={}),!this.workerSources[Te][ke][Ge]){var qe={send:function(at,et,pt){Ye.actor.send(at,et,pt,Te)}};this.workerSources[Te][ke][Ge]=new this.workerSourceTypes[ke](qe,this.getLayerIndex(Te),this.getAvailableImages(Te))}return this.workerSources[Te][ke][Ge]},_r.prototype.getDEMWorkerSource=function(Te,ke){return this.demWorkerSources[Te]||(this.demWorkerSources[Te]={}),this.demWorkerSources[Te][ke]||(this.demWorkerSources[Te][ke]=new _),this.demWorkerSources[Te][ke]},_r.prototype.enforceCacheSizeLimit=function(Te,ke){t.enforceCacheSizeLimit(ke)},typeof WorkerGlobalScope!="undefined"&&typeof t.window!="undefined"&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new _r(t.window)),_r}),y(["./shared"],function(t){var a=t.createCommonjsModule(function(ve){ve.exports?ve.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=ge);function Y(Hr){return!ge(Hr)}function ge(Hr){if(!te())return"not a browser";if(!ye())return"insufficent Array support";if(!Le())return"insufficient Function support";if(!Fe())return"insufficient Object support";if(!Xe())return"insufficient JSON support";if(!ft())return"insufficient worker support";if(!Mt())return"insufficient Uint8ClampedArray support";if(!Wt())return"insufficient ArrayBuffer support";if(!sr())return"insufficient Canvas/getImageData support";if(!Er(Hr&&Hr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function te(){return typeof window!="undefined"&&typeof document!="undefined"}function ye(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Le(){return Function.prototype&&Function.prototype.bind}function Fe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Xe(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ft(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Hr=new Blob([""],{type:"text/javascript"}),Jr=URL.createObjectURL(Hr),pn,Rn;try{Rn=new Worker(Jr),pn=!0}catch{pn=!1}return Rn&&Rn.terminate(),URL.revokeObjectURL(Jr),pn}function Mt(){return"Uint8ClampedArray"in window}function Wt(){return ArrayBuffer.isView}function sr(){var Hr=document.createElement("canvas");Hr.width=Hr.height=1;var Jr=Hr.getContext("2d");if(!Jr)return!1;var pn=Jr.getImageData(0,0,1,1);return pn&&pn.width===Hr.width}var vr={};function Er(Hr){return vr[Hr]===void 0&&(vr[Hr]=Wr(Hr)),vr[Hr]}Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function jr(Hr){var Jr=document.createElement("canvas"),pn=Object.create(Y.webGLContextAttributes);return pn.failIfMajorPerformanceCaveat=Hr,Jr.probablySupportsContext?Jr.probablySupportsContext("webgl",pn)||Jr.probablySupportsContext("experimental-webgl",pn):Jr.supportsContext?Jr.supportsContext("webgl",pn)||Jr.supportsContext("experimental-webgl",pn):Jr.getContext("webgl",pn)||Jr.getContext("experimental-webgl",pn)}function Wr(Hr){var Jr=jr(Hr);if(!Jr)return!1;var pn=Jr.createShader(Jr.VERTEX_SHADER);return!pn||Jr.isContextLost()?!1:(Jr.shaderSource(pn,"void main() {}"),Jr.compileShader(pn),Jr.getShaderParameter(pn,Jr.COMPILE_STATUS)===!0)}}),i={};i.create=function(ve,Y,ge){var te=t.window.document.createElement(ve);return Y!==void 0&&(te.className=Y),ge&&ge.appendChild(te),te},i.createNS=function(ve,Y){var ge=t.window.document.createElementNS(ve,Y);return ge};var n=t.window.document.documentElement.style;function r(ve){if(!n)return ve[0];for(var Y=0;Y<ve.length;Y++)if(ve[Y]in n)return ve[Y];return ve[0]}var f=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),u;i.disableDrag=function(){n&&f&&(u=n[f],n[f]="none")},i.enableDrag=function(){n&&f&&(n[f]=u)};var l=r(["transform","WebkitTransform"]);i.setTransform=function(ve,Y){ve.style[l]=Y};var m=!1;try{var d=Object.defineProperty({},"passive",{get:function(){m=!0}});t.window.addEventListener("test",d,d),t.window.removeEventListener("test",d,d)}catch{m=!1}i.addEventListener=function(ve,Y,ge,te){te===void 0&&(te={}),"passive"in te&&m?ve.addEventListener(Y,ge,te):ve.addEventListener(Y,ge,te.capture)},i.removeEventListener=function(ve,Y,ge,te){te===void 0&&(te={}),"passive"in te&&m?ve.removeEventListener(Y,ge,te):ve.removeEventListener(Y,ge,te.capture)};var b=function(ve){ve.preventDefault(),ve.stopPropagation(),t.window.removeEventListener("click",b,!0)};i.suppressClick=function(){t.window.addEventListener("click",b,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",b,!0)},0)},i.mousePos=function(ve,Y){var ge=ve.getBoundingClientRect();return new t.Point(Y.clientX-ge.left-ve.clientLeft,Y.clientY-ge.top-ve.clientTop)},i.touchPos=function(ve,Y){for(var ge=ve.getBoundingClientRect(),te=[],ye=0;ye<Y.length;ye++)te.push(new t.Point(Y[ye].clientX-ge.left-ve.clientLeft,Y[ye].clientY-ge.top-ve.clientTop));return te},i.mouseButton=function(ve){return typeof t.window.InstallTrigger!="undefined"&&ve.button===2&&ve.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ve.button},i.remove=function(ve){ve.parentNode&&ve.parentNode.removeChild(ve)};function g(ve,Y,ge){var te,ye,Le,Fe=t.browser.devicePixelRatio>1?"@2x":"",Xe=t.getJSON(Y.transformRequest(Y.normalizeSpriteURL(ve,Fe,".json"),t.ResourceType.SpriteJSON),function(Wt,sr){Xe=null,Le||(Le=Wt,te=sr,Mt())}),ft=t.getImage(Y.transformRequest(Y.normalizeSpriteURL(ve,Fe,".png"),t.ResourceType.SpriteImage),function(Wt,sr){ft=null,Le||(Le=Wt,ye=sr,Mt())});function Mt(){if(Le)ge(Le);else if(te&&ye){var Wt=t.browser.getImageData(ye),sr={};for(var vr in te){var Er=te[vr],jr=Er.width,Wr=Er.height,Hr=Er.x,Jr=Er.y,pn=Er.sdf,Rn=Er.pixelRatio,Vn=Er.stretchX,Jn=Er.stretchY,ta=Er.content,qn=new t.RGBAImage({width:jr,height:Wr});t.RGBAImage.copy(Wt,qn,{x:Hr,y:Jr},{x:0,y:0},{width:jr,height:Wr}),sr[vr]={data:qn,pixelRatio:Rn,sdf:pn,stretchX:Vn,stretchY:Jn,content:ta}}ge(null,sr)}}return{cancel:function(){Xe&&(Xe.cancel(),Xe=null),ft&&(ft.cancel(),ft=null)}}}function _(ve){var Y=ve.userImage;if(Y&&Y.render){var ge=Y.render();if(ge)return ve.data.replace(new Uint8Array(Y.data.buffer)),!0}return!1}var p=1,A=function(ve){function Y(){ve.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(te){if(this.loaded!==te&&(this.loaded=te,te)){for(var ye=0,Le=this.requestors;ye<Le.length;ye+=1){var Fe=Le[ye],Xe=Fe.ids,ft=Fe.callback;this._notify(Xe,ft)}this.requestors=[]}},Y.prototype.getImage=function(te){return this.images[te]},Y.prototype.addImage=function(te,ye){this._validate(te,ye)&&(this.images[te]=ye)},Y.prototype._validate=function(te,ye){var Le=!0;return this._validateStretch(ye.stretchX,ye.data&&ye.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+te+'" has invalid "stretchX" value'))),Le=!1),this._validateStretch(ye.stretchY,ye.data&&ye.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+te+'" has invalid "stretchY" value'))),Le=!1),this._validateContent(ye.content,ye)||(this.fire(new t.ErrorEvent(new Error('Image "'+te+'" has invalid "content" value'))),Le=!1),Le},Y.prototype._validateStretch=function(te,ye){if(!te)return!0;for(var Le=0,Fe=0,Xe=te;Fe<Xe.length;Fe+=1){var ft=Xe[Fe];if(ft[0]<Le||ft[1]<ft[0]||ye<ft[1])return!1;Le=ft[1]}return!0},Y.prototype._validateContent=function(te,ye){return te?!(te.length!==4||te[0]<0||ye.data.width<te[0]||te[1]<0||ye.data.height<te[1]||te[2]<0||ye.data.width<te[2]||te[3]<0||ye.data.height<te[3]||te[2]<te[0]||te[3]<te[1]):!0},Y.prototype.updateImage=function(te,ye){var Le=this.images[te];ye.version=Le.version+1,this.images[te]=ye,this.updatedImages[te]=!0},Y.prototype.removeImage=function(te){var ye=this.images[te];delete this.images[te],delete this.patterns[te],ye.userImage&&ye.userImage.onRemove&&ye.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(te,ye){var Le=!0;if(!this.isLoaded())for(var Fe=0,Xe=te;Fe<Xe.length;Fe+=1){var ft=Xe[Fe];this.images[ft]||(Le=!1)}this.isLoaded()||Le?this._notify(te,ye):this.requestors.push({ids:te,callback:ye})},Y.prototype._notify=function(te,ye){for(var Le={},Fe=0,Xe=te;Fe<Xe.length;Fe+=1){var ft=Xe[Fe];this.images[ft]||this.fire(new t.Event("styleimagemissing",{id:ft}));var Mt=this.images[ft];Mt?Le[ft]={data:Mt.data.clone(),pixelRatio:Mt.pixelRatio,sdf:Mt.sdf,version:Mt.version,stretchX:Mt.stretchX,stretchY:Mt.stretchY,content:Mt.content,hasRenderCallback:Boolean(Mt.userImage&&Mt.userImage.render)}:t.warnOnce('Image "'+ft+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ye(null,Le)},Y.prototype.getPixelSize=function(){var te=this.atlasImage,ye=te.width,Le=te.height;return{width:ye,height:Le}},Y.prototype.getPattern=function(te){var ye=this.patterns[te],Le=this.getImage(te);if(!Le)return null;if(ye&&ye.position.version===Le.version)return ye.position;if(ye)ye.position.version=Le.version;else{var Fe=Le.data.width+p*2,Xe=Le.data.height+p*2,ft={w:Fe,h:Xe,x:0,y:0},Mt=new t.ImagePosition(ft,Le);this.patterns[te]={bin:ft,position:Mt}}return this._updatePatternAtlas(),this.patterns[te].position},Y.prototype.bind=function(te){var ye=te.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(te,this.atlasImage,ye.RGBA),this.atlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var te=[];for(var ye in this.patterns)te.push(this.patterns[ye].bin);var Le=t.potpack(te),Fe=Le.w,Xe=Le.h,ft=this.atlasImage;ft.resize({width:Fe||1,height:Xe||1});for(var Mt in this.patterns){var Wt=this.patterns[Mt],sr=Wt.bin,vr=sr.x+p,Er=sr.y+p,jr=this.images[Mt].data,Wr=jr.width,Hr=jr.height;t.RGBAImage.copy(jr,ft,{x:0,y:0},{x:vr,y:Er},{width:Wr,height:Hr}),t.RGBAImage.copy(jr,ft,{x:0,y:Hr-1},{x:vr,y:Er-1},{width:Wr,height:1}),t.RGBAImage.copy(jr,ft,{x:0,y:0},{x:vr,y:Er+Hr},{width:Wr,height:1}),t.RGBAImage.copy(jr,ft,{x:Wr-1,y:0},{x:vr-1,y:Er},{width:1,height:Hr}),t.RGBAImage.copy(jr,ft,{x:0,y:0},{x:vr+Wr,y:Er},{width:1,height:Hr})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(te){for(var ye=0,Le=te;ye<Le.length;ye+=1){var Fe=Le[ye];if(!this.callbackDispatchedThisFrame[Fe]){this.callbackDispatchedThisFrame[Fe]=!0;var Xe=this.images[Fe],ft=_(Xe);ft&&this.updateImage(Fe,Xe)}}},Y}(t.Evented);function c(ve,Y,ge,te,ye){var Le=Y*256,Fe=Le+255,Xe=te.transformRequest(te.normalizeGlyphsURL(ge).replace("{fontstack}",ve).replace("{range}",Le+"-"+Fe),t.ResourceType.Glyphs);t.getArrayBuffer(Xe,function(ft,Mt){if(ft)ye(ft);else if(Mt){for(var Wt={},sr=0,vr=t.parseGlyphPBF(Mt);sr<vr.length;sr+=1){var Er=vr[sr];Wt[Er.id]=Er}ye(null,Wt)}})}var S=w,T=w,x=1e20;function w(ve,Y,ge,te,ye,Le){this.fontSize=ve||24,this.buffer=Y===void 0?3:Y,this.cutoff=te||.25,this.fontFamily=ye||"sans-serif",this.fontWeight=Le||"normal",this.radius=ge||8;var Fe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Fe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Fe*Fe),this.gridInner=new Float64Array(Fe*Fe),this.f=new Float64Array(Fe),this.d=new Float64Array(Fe),this.z=new Float64Array(Fe+1),this.v=new Int16Array(Fe),this.middle=Math.round(Fe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}w.prototype.draw=function(ve){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ve,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),ge=new Uint8ClampedArray(this.size*this.size),te=0;te<this.size*this.size;te++){var ye=Y.data[te*4+3]/255;this.gridOuter[te]=ye===1?0:ye===0?x:Math.pow(Math.max(0,.5-ye),2),this.gridInner[te]=ye===1?x:ye===0?0:Math.pow(Math.max(0,ye-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),te=0;te<this.size*this.size;te++){var Le=this.gridOuter[te]-this.gridInner[te];ge[te]=Math.max(0,Math.min(255,Math.round(255-255*(Le/this.radius+this.cutoff))))}return ge};function v(ve,Y,ge,te,ye,Le,Fe){for(var Xe=0;Xe<Y;Xe++){for(var ft=0;ft<ge;ft++)te[ft]=ve[ft*Y+Xe];for(C(te,ye,Le,Fe,ge),ft=0;ft<ge;ft++)ve[ft*Y+Xe]=ye[ft]}for(ft=0;ft<ge;ft++){for(Xe=0;Xe<Y;Xe++)te[Xe]=ve[ft*Y+Xe];for(C(te,ye,Le,Fe,Y),Xe=0;Xe<Y;Xe++)ve[ft*Y+Xe]=Math.sqrt(ye[Xe])}}function C(ve,Y,ge,te,ye){ge[0]=0,te[0]=-x,te[1]=+x;for(var Le=1,Fe=0;Le<ye;Le++){for(var Xe=(ve[Le]+Le*Le-(ve[ge[Fe]]+ge[Fe]*ge[Fe]))/(2*Le-2*ge[Fe]);Xe<=te[Fe];)Fe--,Xe=(ve[Le]+Le*Le-(ve[ge[Fe]]+ge[Fe]*ge[Fe]))/(2*Le-2*ge[Fe]);Fe++,ge[Fe]=Le,te[Fe]=Xe,te[Fe+1]=+x}for(Le=0,Fe=0;Le<ye;Le++){for(;te[Fe+1]<Le;)Fe++;Y[Le]=(Le-ge[Fe])*(Le-ge[Fe])+ve[ge[Fe]]}}S.default=T;var M=function(Y,ge){this.requestManager=Y,this.localIdeographFontFamily=ge,this.entries={}};M.prototype.setURL=function(Y){this.url=Y},M.prototype.getGlyphs=function(Y,ge){var te=this,ye=[];for(var Le in Y)for(var Fe=0,Xe=Y[Le];Fe<Xe.length;Fe+=1){var ft=Xe[Fe];ye.push({stack:Le,id:ft})}t.asyncAll(ye,function(Mt,Wt){var sr=Mt.stack,vr=Mt.id,Er=te.entries[sr];Er||(Er=te.entries[sr]={glyphs:{},requests:{},ranges:{}});var jr=Er.glyphs[vr];if(jr!==void 0){Wt(null,{stack:sr,id:vr,glyph:jr});return}if(jr=te._tinySDF(Er,sr,vr),jr){Er.glyphs[vr]=jr,Wt(null,{stack:sr,id:vr,glyph:jr});return}var Wr=Math.floor(vr/256);if(Wr*256>65535){Wt(new Error("glyphs > 65535 not supported"));return}if(Er.ranges[Wr]){Wt(null,{stack:sr,id:vr,glyph:jr});return}var Hr=Er.requests[Wr];Hr||(Hr=Er.requests[Wr]=[],M.loadGlyphRange(sr,Wr,te.url,te.requestManager,function(Jr,pn){if(pn){for(var Rn in pn)te._doesCharSupportLocalGlyph(+Rn)||(Er.glyphs[+Rn]=pn[+Rn]);Er.ranges[Wr]=!0}for(var Vn=0,Jn=Hr;Vn<Jn.length;Vn+=1){var ta=Jn[Vn];ta(Jr,pn)}delete Er.requests[Wr]})),Hr.push(function(Jr,pn){Jr?Wt(Jr):pn&&Wt(null,{stack:sr,id:vr,glyph:pn[vr]||null})})},function(Mt,Wt){if(Mt)ge(Mt);else if(Wt){for(var sr={},vr=0,Er=Wt;vr<Er.length;vr+=1){var jr=Er[vr],Wr=jr.stack,Hr=jr.id,Jr=jr.glyph;(sr[Wr]||(sr[Wr]={}))[Hr]=Jr&&{id:Jr.id,bitmap:Jr.bitmap.clone(),metrics:Jr.metrics}}ge(null,sr)}})},M.prototype._doesCharSupportLocalGlyph=function(Y){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](Y)||t.isChar["Hangul Syllables"](Y)||t.isChar.Hiragana(Y)||t.isChar.Katakana(Y))},M.prototype._tinySDF=function(Y,ge,te){var ye=this.localIdeographFontFamily;if(!!ye&&!!this._doesCharSupportLocalGlyph(te)){var Le=Y.tinySDF;if(!Le){var Fe="400";/bold/i.test(ge)?Fe="900":/medium/i.test(ge)?Fe="500":/light/i.test(ge)&&(Fe="200"),Le=Y.tinySDF=new M.TinySDF(24,3,8,.25,ye,Fe)}return{id:te,bitmap:new t.AlphaImage({width:30,height:30},Le.draw(String.fromCharCode(te))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},M.loadGlyphRange=c,M.TinySDF=S;var E=function(){this.specification=t.styleSpec.light.position};E.prototype.possiblyEvaluate=function(Y,ge){return t.sphericalToCartesian(Y.expression.evaluate(ge))},E.prototype.interpolate=function(Y,ge,te){return{x:t.number(Y.x,ge.x,te),y:t.number(Y.y,ge.y,te),z:t.number(Y.z,ge.z,te)}};var L=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new E,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),z="-transition",O=function(ve){function Y(ge){ve.call(this),this._transitionable=new t.Transitionable(L),this.setLight(ge),this._transitioning=this._transitionable.untransitioned()}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(te,ye){if(ye===void 0&&(ye={}),!this._validate(t.validateLight,te,ye))for(var Le in te){var Fe=te[Le];t.endsWith(Le,z)?this._transitionable.setTransition(Le.slice(0,-z.length),Fe):this._transitionable.setValue(Le,Fe)}},Y.prototype.updateTransitions=function(te){this._transitioning=this._transitionable.transitioned(te,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(te){this.properties=this._transitioning.possiblyEvaluate(te)},Y.prototype._validate=function(te,ye,Le){return Le&&Le.validate===!1?!1:t.emitValidationErrors(this,te.call(t.validateStyle,t.extend({value:ye,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},Y}(t.Evented),R=function(Y,ge){this.width=Y,this.height=ge,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};R.prototype.getDash=function(Y,ge){var te=Y.join(",")+String(ge);return this.dashEntry[te]||(this.dashEntry[te]=this.addDash(Y,ge)),this.dashEntry[te]},R.prototype.getDashRanges=function(Y,ge,te){var ye=Y.length%2===1,Le=[],Fe=ye?-Y[Y.length-1]*te:0,Xe=Y[0]*te,ft=!0;Le.push({left:Fe,right:Xe,isDash:ft,zeroLength:Y[0]===0});for(var Mt=Y[0],Wt=1;Wt<Y.length;Wt++){ft=!ft;var sr=Y[Wt];Fe=Mt*te,Mt+=sr,Xe=Mt*te,Le.push({left:Fe,right:Xe,isDash:ft,zeroLength:sr===0})}return Le},R.prototype.addRoundDash=function(Y,ge,te){for(var ye=ge/2,Le=-te;Le<=te;Le++)for(var Fe=this.nextRow+te+Le,Xe=this.width*Fe,ft=0,Mt=Y[ft],Wt=0;Wt<this.width;Wt++){Wt/Mt.right>1&&(Mt=Y[++ft]);var sr=Math.abs(Wt-Mt.left),vr=Math.abs(Wt-Mt.right),Er=Math.min(sr,vr),jr=void 0,Wr=Le/te*(ye+1);if(Mt.isDash){var Hr=ye-Math.abs(Wr);jr=Math.sqrt(Er*Er+Hr*Hr)}else jr=ye-Math.sqrt(Er*Er+Wr*Wr);this.data[Xe+Wt]=Math.max(0,Math.min(255,jr+128))}},R.prototype.addRegularDash=function(Y){for(var ge=Y.length-1;ge>=0;--ge){var te=Y[ge],ye=Y[ge+1];te.zeroLength?Y.splice(ge,1):ye&&ye.isDash===te.isDash&&(ye.left=te.left,Y.splice(ge,1))}var Le=Y[0],Fe=Y[Y.length-1];Le.isDash===Fe.isDash&&(Le.left=Fe.left-this.width,Fe.right=Le.right+this.width);for(var Xe=this.width*this.nextRow,ft=0,Mt=Y[ft],Wt=0;Wt<this.width;Wt++){Wt/Mt.right>1&&(Mt=Y[++ft]);var sr=Math.abs(Wt-Mt.left),vr=Math.abs(Wt-Mt.right),Er=Math.min(sr,vr),jr=Mt.isDash?Er:-Er;this.data[Xe+Wt]=Math.max(0,Math.min(255,jr+128))}},R.prototype.addDash=function(Y,ge){var te=ge?7:0,ye=2*te+1;if(this.nextRow+ye>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Le=0,Fe=0;Fe<Y.length;Fe++)Le+=Y[Fe];if(Le!==0){var Xe=this.width/Le,ft=this.getDashRanges(Y,this.width,Xe);ge?this.addRoundDash(ft,Xe,te):this.addRegularDash(ft)}var Mt={y:(this.nextRow+te+.5)/this.height,height:2*te/this.height,width:Le};return this.nextRow+=ye,this.dirty=!0,Mt},R.prototype.bind=function(Y){var ge=Y.gl;this.texture?(ge.bindTexture(ge.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ge.texSubImage2D(ge.TEXTURE_2D,0,0,0,this.width,this.height,ge.ALPHA,ge.UNSIGNED_BYTE,this.data))):(this.texture=ge.createTexture(),ge.bindTexture(ge.TEXTURE_2D,this.texture),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_S,ge.REPEAT),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_T,ge.REPEAT),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MAG_FILTER,ge.LINEAR),ge.texImage2D(ge.TEXTURE_2D,0,ge.ALPHA,this.width,this.height,0,ge.ALPHA,ge.UNSIGNED_BYTE,this.data))};var D=function ve(Y,ge){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var te=this.workerPool.acquire(this.id),ye=0;ye<te.length;ye++){var Le=te[ye],Fe=new ve.Actor(Le,ge,this.id);Fe.name="Worker "+ye,this.actors.push(Fe)}};D.prototype.broadcast=function(Y,ge,te){te=te||function(){},t.asyncAll(this.actors,function(ye,Le){ye.send(Y,ge,Le)},te)},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(Y){Y.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=t.Actor;function H(ve,Y,ge){var te=function(ye,Le){if(ye)return ge(ye);if(Le){var Fe=t.pick(t.extend(Le,ve),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Le.vector_layers&&(Fe.vectorLayers=Le.vector_layers,Fe.vectorLayerIds=Fe.vectorLayers.map(function(Xe){return Xe.id})),Fe.tiles=Y.canonicalizeTileset(Fe,ve.url),ge(null,Fe)}};return ve.url?t.getJSON(Y.transformRequest(Y.normalizeSourceURL(ve.url),t.ResourceType.Source),te):t.browser.frame(function(){return te(null,ve)})}var B=function(Y,ge,te){this.bounds=t.LngLatBounds.convert(this.validateBounds(Y)),this.minzoom=ge||0,this.maxzoom=te||24};B.prototype.validateBounds=function(Y){return!Array.isArray(Y)||Y.length!==4?[-180,-90,180,90]:[Math.max(-180,Y[0]),Math.max(-90,Y[1]),Math.min(180,Y[2]),Math.min(90,Y[3])]},B.prototype.contains=function(Y){var ge=Math.pow(2,Y.z),te={minX:Math.floor(t.mercatorXfromLng(this.bounds.getWest())*ge),minY:Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*ge),maxX:Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*ge),maxY:Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*ge)},ye=Y.x>=te.minX&&Y.x<te.maxX&&Y.y>=te.minY&&Y.y<te.maxY;return ye};var $=function(ve){function Y(ge,te,ye,Le){if(ve.call(this),this.id=ge,this.dispatcher=ye,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(te,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},te),this._collectResourceTiming=te.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Le)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var te=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,function(ye,Le){te._tileJSONRequest=null,te._loaded=!0,ye?te.fire(new t.ErrorEvent(ye)):Le&&(t.extend(te,Le),Le.bounds&&(te.tileBounds=new B(Le.bounds,te.minzoom,te.maxzoom)),t.postTurnstileEvent(Le.tiles,te.map._requestManager._customAccessToken),t.postMapLoadEvent(Le.tiles,te.map._getMapId(),te.map._requestManager._skuToken,te.map._requestManager._customAccessToken),te.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),te.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(te){return!this.tileBounds||this.tileBounds.contains(te.canonical)},Y.prototype.onAdd=function(te){this.map=te,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return t.extend({},this._options)},Y.prototype.loadTile=function(te,ye){var Le=this.map._requestManager.normalizeTileURL(te.tileID.canonical.url(this.tiles,this.scheme)),Fe={request:this.map._requestManager.transformRequest(Le,t.ResourceType.Tile),uid:te.uid,tileID:te.tileID,zoom:te.tileID.overscaledZ,tileSize:this.tileSize*te.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Fe.request.collectResourceTiming=this._collectResourceTiming,!te.actor||te.state==="expired"?(te.actor=this.dispatcher.getActor(),te.request=te.actor.send("loadTile",Fe,Xe.bind(this))):te.state==="loading"?te.reloadCallback=ye:te.request=te.actor.send("reloadTile",Fe,Xe.bind(this));function Xe(ft,Mt){if(delete te.request,te.aborted)return ye(null);if(ft&&ft.status!==404)return ye(ft);Mt&&Mt.resourceTiming&&(te.resourceTiming=Mt.resourceTiming),this.map._refreshExpiredTiles&&Mt&&te.setExpiryData(Mt),te.loadVectorData(Mt,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),ye(null),te.reloadCallback&&(this.loadTile(te,te.reloadCallback),te.reloadCallback=null)}},Y.prototype.abortTile=function(te){te.request&&(te.request.cancel(),delete te.request),te.actor&&te.actor.send("abortTile",{uid:te.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(te){te.unloadVectorData(),te.actor&&te.actor.send("removeTile",{uid:te.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(t.Evented),W=function(ve){function Y(ge,te,ye,Le){ve.call(this),this.id=ge,this.dispatcher=ye,this.setEventedParent(Le),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},te),t.extend(this,t.pick(te,["url","scheme","tileSize"]))}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var te=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,function(ye,Le){te._tileJSONRequest=null,te._loaded=!0,ye?te.fire(new t.ErrorEvent(ye)):Le&&(t.extend(te,Le),Le.bounds&&(te.tileBounds=new B(Le.bounds,te.minzoom,te.maxzoom)),t.postTurnstileEvent(Le.tiles),t.postMapLoadEvent(Le.tiles,te.map._getMapId(),te.map._requestManager._skuToken),te.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),te.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(te){this.map=te,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return t.extend({},this._options)},Y.prototype.hasTile=function(te){return!this.tileBounds||this.tileBounds.contains(te.canonical)},Y.prototype.loadTile=function(te,ye){var Le=this,Fe=this.map._requestManager.normalizeTileURL(te.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);te.request=t.getImage(this.map._requestManager.transformRequest(Fe,t.ResourceType.Tile),function(Xe,ft){if(delete te.request,te.aborted)te.state="unloaded",ye(null);else if(Xe)te.state="errored",ye(Xe);else if(ft){Le.map._refreshExpiredTiles&&te.setExpiryData(ft),delete ft.cacheControl,delete ft.expires;var Mt=Le.map.painter.context,Wt=Mt.gl;te.texture=Le.map.painter.getTileTexture(ft.width),te.texture?te.texture.update(ft,{useMipmap:!0}):(te.texture=new t.Texture(Mt,ft,Wt.RGBA,{useMipmap:!0}),te.texture.bind(Wt.LINEAR,Wt.CLAMP_TO_EDGE,Wt.LINEAR_MIPMAP_NEAREST),Mt.extTextureFilterAnisotropic&&Wt.texParameterf(Wt.TEXTURE_2D,Mt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Mt.extTextureFilterAnisotropicMax)),te.state="loaded",t.cacheEntryPossiblyAdded(Le.dispatcher),ye(null)}})},Y.prototype.abortTile=function(te,ye){te.request&&(te.request.cancel(),delete te.request),ye()},Y.prototype.unloadTile=function(te,ye){te.texture&&this.map.painter.saveTileTexture(te.texture),ye()},Y.prototype.hasTransition=function(){return!1},Y}(t.Evented),re=function(ve){function Y(ge,te,ye,Le){ve.call(this,ge,te,ye,Le),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},te),this.encoding=te.encoding||"mapbox"}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(te,ye){var Le=this.map._requestManager.normalizeTileURL(te.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);te.request=t.getImage(this.map._requestManager.transformRequest(Le,t.ResourceType.Tile),Fe.bind(this)),te.neighboringTiles=this._getNeighboringTiles(te.tileID);function Fe(ft,Mt){if(delete te.request,te.aborted)te.state="unloaded",ye(null);else if(ft)te.state="errored",ye(ft);else if(Mt){this.map._refreshExpiredTiles&&te.setExpiryData(Mt),delete Mt.cacheControl,delete Mt.expires;var Wt=t.window.ImageBitmap&&Mt instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported(),sr=Wt?Mt:t.browser.getImageData(Mt,1),vr={uid:te.uid,coord:te.tileID,source:this.id,rawImageData:sr,encoding:this.encoding};(!te.actor||te.state==="expired")&&(te.actor=this.dispatcher.getActor(),te.actor.send("loadDEMTile",vr,Xe.bind(this)))}}function Xe(ft,Mt){ft&&(te.state="errored",ye(ft)),Mt&&(te.dem=Mt,te.needsHillshadePrepare=!0,te.state="loaded",ye(null))}},Y.prototype._getNeighboringTiles=function(te){var ye=te.canonical,Le=Math.pow(2,ye.z),Fe=(ye.x-1+Le)%Le,Xe=ye.x===0?te.wrap-1:te.wrap,ft=(ye.x+1+Le)%Le,Mt=ye.x+1===Le?te.wrap+1:te.wrap,Wt={};return Wt[new t.OverscaledTileID(te.overscaledZ,Xe,ye.z,Fe,ye.y).key]={backfilled:!1},Wt[new t.OverscaledTileID(te.overscaledZ,Mt,ye.z,ft,ye.y).key]={backfilled:!1},ye.y>0&&(Wt[new t.OverscaledTileID(te.overscaledZ,Xe,ye.z,Fe,ye.y-1).key]={backfilled:!1},Wt[new t.OverscaledTileID(te.overscaledZ,te.wrap,ye.z,ye.x,ye.y-1).key]={backfilled:!1},Wt[new t.OverscaledTileID(te.overscaledZ,Mt,ye.z,ft,ye.y-1).key]={backfilled:!1}),ye.y+1<Le&&(Wt[new t.OverscaledTileID(te.overscaledZ,Xe,ye.z,Fe,ye.y+1).key]={backfilled:!1},Wt[new t.OverscaledTileID(te.overscaledZ,te.wrap,ye.z,ye.x,ye.y+1).key]={backfilled:!1},Wt[new t.OverscaledTileID(te.overscaledZ,Mt,ye.z,ft,ye.y+1).key]={backfilled:!1}),Wt},Y.prototype.unloadTile=function(te){te.demTexture&&this.map.painter.saveTileTexture(te.demTexture),te.fbo&&(te.fbo.destroy(),delete te.fbo),te.dem&&delete te.dem,delete te.neighboringTiles,te.state="unloaded",te.actor&&te.actor.send("removeDEMTile",{uid:te.uid,source:this.id})},Y}(W),Q=function(ve){function Y(ge,te,ye,Le){ve.call(this),this.id=ge,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ye.getActor(),this.setEventedParent(Le),this._data=te.data,this._options=t.extend({},te),this._collectResourceTiming=te.collectResourceTiming,this._resourceTiming=[],te.maxzoom!==void 0&&(this.maxzoom=te.maxzoom),te.type&&(this.type=te.type),te.attribution&&(this.attribution=te.attribution),this.promoteId=te.promoteId;var Fe=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:te.cluster||!1,geojsonVtOptions:{buffer:(te.buffer!==void 0?te.buffer:128)*Fe,tolerance:(te.tolerance!==void 0?te.tolerance:.375)*Fe,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:te.lineMetrics||!1,generateId:te.generateId||!1},superclusterOptions:{maxZoom:te.clusterMaxZoom!==void 0?Math.min(te.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(te.clusterRadius||50)*Fe,log:!1,generateId:te.generateId||!1},clusterProperties:te.clusterProperties},te.workerOptions)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var te=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ye){if(ye){te.fire(new t.ErrorEvent(ye));return}var Le={dataType:"source",sourceDataType:"metadata"};te._collectResourceTiming&&te._resourceTiming&&te._resourceTiming.length>0&&(Le.resourceTiming=te._resourceTiming,te._resourceTiming=[]),te.fire(new t.Event("data",Le))})},Y.prototype.onAdd=function(te){this.map=te,this.load()},Y.prototype.setData=function(te){var ye=this;return this._data=te,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Le){if(Le){ye.fire(new t.ErrorEvent(Le));return}var Fe={dataType:"source",sourceDataType:"content"};ye._collectResourceTiming&&ye._resourceTiming&&ye._resourceTiming.length>0&&(Fe.resourceTiming=ye._resourceTiming,ye._resourceTiming=[]),ye.fire(new t.Event("data",Fe))}),this},Y.prototype.getClusterExpansionZoom=function(te,ye){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:te,source:this.id},ye),this},Y.prototype.getClusterChildren=function(te,ye){return this.actor.send("geojson.getClusterChildren",{clusterId:te,source:this.id},ye),this},Y.prototype.getClusterLeaves=function(te,ye,Le,Fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:te,limit:ye,offset:Le},Fe),this},Y.prototype._updateWorkerData=function(te){var ye=this;this._loaded=!1;var Le=t.extend({},this.workerOptions),Fe=this._data;typeof Fe=="string"?(Le.request=this.map._requestManager.transformRequest(t.browser.resolveURL(Fe),t.ResourceType.Source),Le.request.collectResourceTiming=this._collectResourceTiming):Le.data=JSON.stringify(Fe),this.actor.send(this.type+".loadData",Le,function(Xe,ft){ye._removed||ft&&ft.abandoned||(ye._loaded=!0,ft&&ft.resourceTiming&&ft.resourceTiming[ye.id]&&(ye._resourceTiming=ft.resourceTiming[ye.id].slice(0)),ye.actor.send(ye.type+".coalesce",{source:Le.source},null),te(Xe))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(te,ye){var Le=this,Fe=te.actor?"reloadTile":"loadTile";te.actor=this.actor;var Xe={type:this.type,uid:te.uid,tileID:te.tileID,zoom:te.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};te.request=this.actor.send(Fe,Xe,function(ft,Mt){return delete te.request,te.unloadVectorData(),te.aborted?ye(null):ft?ye(ft):(te.loadVectorData(Mt,Le.map.painter,Fe==="reloadTile"),ye(null))})},Y.prototype.abortTile=function(te){te.request&&(te.request.cancel(),delete te.request),te.aborted=!0},Y.prototype.unloadTile=function(te){te.unloadVectorData(),this.actor.send("removeTile",{uid:te.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(t.Evented),Z=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),K=function(ve){function Y(ge,te,ye,Le){ve.call(this),this.id=ge,this.dispatcher=ye,this.coordinates=te.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Le),this.options=te}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(te,ye){var Le=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(Fe,Xe){Le._loaded=!0,Fe?Le.fire(new t.ErrorEvent(Fe)):Xe&&(Le.image=Xe,te&&(Le.coordinates=te),ye&&ye(),Le._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(te){var ye=this;return!this.image||!te.url?this:(this.options.url=te.url,this.load(te.coordinates,function(){ye.texture=null}),this)},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(te){this.map=te,this.load()},Y.prototype.setCoordinates=function(te){var ye=this;this.coordinates=te;var Le=te.map(t.MercatorCoordinate.fromLngLat);this.tileID=le(Le),this.minzoom=this.maxzoom=this.tileID.z;var Fe=Le.map(function(Xe){return ye.tileID.getTilePoint(Xe)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(Fe[0].x,Fe[0].y,0,0),this._boundsArray.emplaceBack(Fe[1].x,Fe[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(Fe[3].x,Fe[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(Fe[2].x,Fe[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var te=this.map.painter.context,ye=te.gl;this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(te,this.image,ye.RGBA),this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE));for(var Le in this.tiles){var Fe=this.tiles[Le];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},Y.prototype.loadTile=function(te,ye){this.tileID&&this.tileID.equals(te.tileID.canonical)?(this.tiles[String(te.tileID.wrap)]=te,te.buckets={},ye(null)):(te.state="errored",ye(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(t.Evented);function le(ve){for(var Y=1/0,ge=1/0,te=-1/0,ye=-1/0,Le=0,Fe=ve;Le<Fe.length;Le+=1){var Xe=Fe[Le];Y=Math.min(Y,Xe.x),ge=Math.min(ge,Xe.y),te=Math.max(te,Xe.x),ye=Math.max(ye,Xe.y)}var ft=te-Y,Mt=ye-ge,Wt=Math.max(ft,Mt),sr=Math.max(0,Math.floor(-Math.log(Wt)/Math.LN2)),vr=Math.pow(2,sr);return new t.CanonicalTileID(sr,Math.floor((Y+te)/2*vr),Math.floor((ge+ye)/2*vr))}var fe=function(ve){function Y(ge,te,ye,Le){ve.call(this,ge,te,ye,Le),this.roundZoom=!0,this.type="video",this.options=te}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var te=this;this._loaded=!1;var ye=this.options;this.urls=[];for(var Le=0,Fe=ye.urls;Le<Fe.length;Le+=1){var Xe=Fe[Le];this.urls.push(this.map._requestManager.transformRequest(Xe,t.ResourceType.Source).url)}t.getVideo(this.urls,function(ft,Mt){te._loaded=!0,ft?te.fire(new t.ErrorEvent(ft)):Mt&&(te.video=Mt,te.video.loop=!0,te.video.addEventListener("playing",function(){te.map.triggerRepaint()}),te.map&&te.video.play(),te._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(te){if(this.video){var ye=this.video.seekable;te<ye.start(0)||te>ye.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ye.start(0)+" and "+ye.end(0)+"-second mark."))):this.video.currentTime=te}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(te){this.map||(this.map=te,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var te=this.map.painter.context,ye=te.gl;this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),ye.texSubImage2D(ye.TEXTURE_2D,0,0,0,ye.RGBA,ye.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(te,this.video,ye.RGBA),this.texture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE));for(var Le in this.tiles){var Fe=this.tiles[Le];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(K),ue=function(ve){function Y(ge,te,ye,Le){ve.call(this,ge,te,ye,Le),te.coordinates?(!Array.isArray(te.coordinates)||te.coordinates.length!==4||te.coordinates.some(function(Fe){return!Array.isArray(Fe)||Fe.length!==2||Fe.some(function(Xe){return typeof Xe!="number"})}))&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'missing required property "coordinates"'))),te.animate&&typeof te.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'optional "animate" property must be a boolean value'))),te.canvas?typeof te.canvas!="string"&&!(te.canvas instanceof t.window.HTMLCanvasElement)&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ge,null,'missing required property "canvas"'))),this.options=te,this.animate=te.animate!==void 0?te.animate:!0}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(te){this.map=te,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var te=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,te=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,te=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ye=this.map.painter.context,Le=ye.gl;this.boundsBuffer||(this.boundsBuffer=ye.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(te||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(ye,this.canvas,Le.RGBA,{premultiply:!0});for(var Fe in this.tiles){var Xe=this.tiles[Fe];Xe.state!=="loaded"&&(Xe.state="loaded",Xe.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var te=0,ye=[this.canvas.width,this.canvas.height];te<ye.length;te+=1){var Le=ye[te];if(isNaN(Le)||Le<=0)return!0}return!1},Y}(K),V={vector:$,raster:W,"raster-dem":re,geojson:Q,video:fe,image:K,canvas:ue},j=function(ve,Y,ge,te){var ye=new V[Y.type](ve,Y,ge,te);if(ye.id!==ve)throw new Error("Expected Source id to be "+ve+" instead of "+ye.id);return t.bindAll(["load","abort","unload","serialize","prepare"],ye),ye},ee=function(ve){return V[ve]},q=function(ve,Y){V[ve]=Y};function X(ve,Y){var ge=t.identity([]);return t.translate(ge,ge,[1,1,0]),t.scale(ge,ge,[ve.width*.5,ve.height*.5,1]),t.multiply(ge,ge,ve.calculatePosMatrix(Y.toUnwrapped()))}function J(ve,Y,ge){if(ve)for(var te=0,ye=ve;te<ye.length;te+=1){var Le=ye[te],Fe=Y[Le];if(Fe&&Fe.source===ge&&Fe.type==="fill-extrusion")return!0}else for(var Xe in Y){var ft=Y[Xe];if(ft.source===ge&&ft.type==="fill-extrusion")return!0}return!1}function ie(ve,Y,ge,te,ye,Le){var Fe=J(ye&&ye.layers,Y,ve.id),Xe=Le.maxPitchScaleFactor(),ft=ve.tilesIn(te,Xe,Fe);ft.sort(se);for(var Mt=[],Wt=0,sr=ft;Wt<sr.length;Wt+=1){var vr=sr[Wt];Mt.push({wrappedTileID:vr.tileID.wrapped().key,queryResults:vr.tile.queryRenderedFeatures(Y,ge,ve._state,vr.queryGeometry,vr.cameraQueryGeometry,vr.scale,ye,Le,Xe,X(ve.transform,vr.tileID))})}var Er=me(Mt);for(var jr in Er)Er[jr].forEach(function(Wr){var Hr=Wr.feature,Jr=ve.getFeatureState(Hr.layer["source-layer"],Hr.id);Hr.source=Hr.layer.source,Hr.layer["source-layer"]&&(Hr.sourceLayer=Hr.layer["source-layer"]),Hr.state=Jr});return Er}function ne(ve,Y,ge,te,ye,Le,Fe){for(var Xe={},ft=Le.queryRenderedSymbols(te),Mt=[],Wt=0,sr=Object.keys(ft).map(Number);Wt<sr.length;Wt+=1){var vr=sr[Wt];Mt.push(Fe[vr])}Mt.sort(se);for(var Er=function(){var pn=Wr[jr],Rn=pn.featureIndex.lookupSymbolFeatures(ft[pn.bucketInstanceId],Y,pn.bucketIndex,pn.sourceLayerIndex,ye.filter,ye.layers,ye.availableImages,ve);for(var Vn in Rn){var Jn=Xe[Vn]=Xe[Vn]||[],ta=Rn[Vn];ta.sort(function(_a,Ea){var Ra=pn.featureSortOrder;if(Ra){var Ya=Ra.indexOf(_a.featureIndex),ui=Ra.indexOf(Ea.featureIndex);return ui-Ya}else return Ea.featureIndex-_a.featureIndex});for(var qn=0,pa=ta;qn<pa.length;qn+=1){var Aa=pa[qn];Jn.push(Aa)}}},jr=0,Wr=Mt;jr<Wr.length;jr+=1)Er();var Hr=function(pn){Xe[pn].forEach(function(Rn){var Vn=Rn.feature,Jn=ve[pn],ta=ge[Jn.source],qn=ta.getFeatureState(Vn.layer["source-layer"],Vn.id);Vn.source=Vn.layer.source,Vn.layer["source-layer"]&&(Vn.sourceLayer=Vn.layer["source-layer"]),Vn.state=qn})};for(var Jr in Xe)Hr(Jr);return Xe}function oe(ve,Y){for(var ge=ve.getRenderableIds().map(function(ft){return ve.getTileByID(ft)}),te=[],ye={},Le=0;Le<ge.length;Le++){var Fe=ge[Le],Xe=Fe.tileID.canonical.key;ye[Xe]||(ye[Xe]=!0,Fe.querySourceFeatures(te,Y))}return te}function se(ve,Y){var ge=ve.tileID,te=Y.tileID;return ge.overscaledZ-te.overscaledZ||ge.canonical.y-te.canonical.y||ge.wrap-te.wrap||ge.canonical.x-te.canonical.x}function me(ve){for(var Y={},ge={},te=0,ye=ve;te<ye.length;te+=1){var Le=ye[te],Fe=Le.queryResults,Xe=Le.wrappedTileID,ft=ge[Xe]=ge[Xe]||{};for(var Mt in Fe)for(var Wt=Fe[Mt],sr=ft[Mt]=ft[Mt]||{},vr=Y[Mt]=Y[Mt]||[],Er=0,jr=Wt;Er<jr.length;Er+=1){var Wr=jr[Er];sr[Wr.featureIndex]||(sr[Wr.featureIndex]=!0,vr.push(Wr))}}return Y}var ce=function(Y,ge){this.max=Y,this.onRemove=ge,this.reset()};ce.prototype.reset=function(){for(var Y in this.data)for(var ge=0,te=this.data[Y];ge<te.length;ge+=1){var ye=te[ge];ye.timeout&&clearTimeout(ye.timeout),this.onRemove(ye.value)}return this.data={},this.order=[],this},ce.prototype.add=function(Y,ge,te){var ye=this,Le=Y.wrapped().key;this.data[Le]===void 0&&(this.data[Le]=[]);var Fe={value:ge,timeout:void 0};if(te!==void 0&&(Fe.timeout=setTimeout(function(){ye.remove(Y,Fe)},te)),this.data[Le].push(Fe),this.order.push(Le),this.order.length>this.max){var Xe=this._getAndRemoveByKey(this.order[0]);Xe&&this.onRemove(Xe)}return this},ce.prototype.has=function(Y){return Y.wrapped().key in this.data},ce.prototype.getAndRemove=function(Y){return this.has(Y)?this._getAndRemoveByKey(Y.wrapped().key):null},ce.prototype._getAndRemoveByKey=function(Y){var ge=this.data[Y].shift();return ge.timeout&&clearTimeout(ge.timeout),this.data[Y].length===0&&delete this.data[Y],this.order.splice(this.order.indexOf(Y),1),ge.value},ce.prototype.getByKey=function(Y){var ge=this.data[Y];return ge?ge[0].value:null},ce.prototype.get=function(Y){if(!this.has(Y))return null;var ge=this.data[Y.wrapped().key][0];return ge.value},ce.prototype.remove=function(Y,ge){if(!this.has(Y))return this;var te=Y.wrapped().key,ye=ge===void 0?0:this.data[te].indexOf(ge),Le=this.data[te][ye];return this.data[te].splice(ye,1),Le.timeout&&clearTimeout(Le.timeout),this.data[te].length===0&&delete this.data[te],this.onRemove(Le.value),this.order.splice(this.order.indexOf(te),1),this},ce.prototype.setMaxSize=function(Y){for(this.max=Y;this.order.length>this.max;){var ge=this._getAndRemoveByKey(this.order[0]);ge&&this.onRemove(ge)}return this},ce.prototype.filter=function(Y){var ge=[];for(var te in this.data)for(var ye=0,Le=this.data[te];ye<Le.length;ye+=1){var Fe=Le[ye];Y(Fe.value)||ge.push(Fe)}for(var Xe=0,ft=ge;Xe<ft.length;Xe+=1){var Mt=ft[Xe];this.remove(Mt.value.tileID,Mt)}};var pe=function(Y,ge,te){this.context=Y;var ye=Y.gl;this.buffer=ye.createBuffer(),this.dynamicDraw=Boolean(te),this.context.unbindVAO(),Y.bindElementBuffer.set(this.buffer),ye.bufferData(ye.ELEMENT_ARRAY_BUFFER,ge.arrayBuffer,this.dynamicDraw?ye.DYNAMIC_DRAW:ye.STATIC_DRAW),this.dynamicDraw||delete ge.arrayBuffer};pe.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},pe.prototype.updateData=function(Y){var ge=this.context.gl;this.context.unbindVAO(),this.bind(),ge.bufferSubData(ge.ELEMENT_ARRAY_BUFFER,0,Y.arrayBuffer)},pe.prototype.destroy=function(){var Y=this.context.gl;this.buffer&&(Y.deleteBuffer(this.buffer),delete this.buffer)};var xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Se=function(Y,ge,te,ye){this.length=ge.length,this.attributes=te,this.itemSize=ge.bytesPerElement,this.dynamicDraw=ye,this.context=Y;var Le=Y.gl;this.buffer=Le.createBuffer(),Y.bindVertexBuffer.set(this.buffer),Le.bufferData(Le.ARRAY_BUFFER,ge.arrayBuffer,this.dynamicDraw?Le.DYNAMIC_DRAW:Le.STATIC_DRAW),this.dynamicDraw||delete ge.arrayBuffer};Se.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Se.prototype.updateData=function(Y){var ge=this.context.gl;this.bind(),ge.bufferSubData(ge.ARRAY_BUFFER,0,Y.arrayBuffer)},Se.prototype.enableAttributes=function(Y,ge){for(var te=0;te<this.attributes.length;te++){var ye=this.attributes[te],Le=ge.attributes[ye.name];Le!==void 0&&Y.enableVertexAttribArray(Le)}},Se.prototype.setVertexAttribPointers=function(Y,ge,te){for(var ye=0;ye<this.attributes.length;ye++){var Le=this.attributes[ye],Fe=ge.attributes[Le.name];Fe!==void 0&&Y.vertexAttribPointer(Fe,Le.components,Y[xe[Le.type]],!1,this.itemSize,Le.offset+this.itemSize*(te||0))}},Se.prototype.destroy=function(){var Y=this.context.gl;this.buffer&&(Y.deleteBuffer(this.buffer),delete this.buffer)};var Ae=function(Y){this.gl=Y.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ae.prototype.get=function(){return this.current},Ae.prototype.set=function(Y){},Ae.prototype.getDefault=function(){return this.default},Ae.prototype.setDefault=function(){this.set(this.default)};var Ce=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return t.Color.transparent},Y.prototype.set=function(te){var ye=this.current;te.r===ye.r&&te.g===ye.g&&te.b===ye.b&&te.a===ye.a&&!this.dirty||(this.gl.clearColor(te.r,te.g,te.b,te.a),this.current=te,this.dirty=!1)},Y}(Ae),Ee=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.clearDepth(te),this.current=te,this.dirty=!1)},Y}(Ae),Oe=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.clearStencil(te),this.current=te,this.dirty=!1)},Y}(Ae),_e=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(te){var ye=this.current;te[0]===ye[0]&&te[1]===ye[1]&&te[2]===ye[2]&&te[3]===ye[3]&&!this.dirty||(this.gl.colorMask(te[0],te[1],te[2],te[3]),this.current=te,this.dirty=!1)},Y}(Ae),Re=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.depthMask(te),this.current=te,this.dirty=!1)},Y}(Ae),Ve=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.stencilMask(te),this.current=te,this.dirty=!1)},Y}(Ae),Je=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(te){var ye=this.current;te.func===ye.func&&te.ref===ye.ref&&te.mask===ye.mask&&!this.dirty||(this.gl.stencilFunc(te.func,te.ref,te.mask),this.current=te,this.dirty=!1)},Y}(Ae),ze=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var te=this.gl;return[te.KEEP,te.KEEP,te.KEEP]},Y.prototype.set=function(te){var ye=this.current;te[0]===ye[0]&&te[1]===ye[1]&&te[2]===ye[2]&&!this.dirty||(this.gl.stencilOp(te[0],te[1],te[2]),this.current=te,this.dirty=!1)},Y}(Ae),De=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;te?ye.enable(ye.STENCIL_TEST):ye.disable(ye.STENCIL_TEST),this.current=te,this.dirty=!1}},Y}(Ae),je=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(te){var ye=this.current;te[0]===ye[0]&&te[1]===ye[1]&&!this.dirty||(this.gl.depthRange(te[0],te[1]),this.current=te,this.dirty=!1)},Y}(Ae),dt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;te?ye.enable(ye.DEPTH_TEST):ye.disable(ye.DEPTH_TEST),this.current=te,this.dirty=!1}},Y}(Ae),Et=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.depthFunc(te),this.current=te,this.dirty=!1)},Y}(Ae),$t=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;te?ye.enable(ye.BLEND):ye.disable(ye.BLEND),this.current=te,this.dirty=!1}},Y}(Ae),wt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var te=this.gl;return[te.ONE,te.ZERO]},Y.prototype.set=function(te){var ye=this.current;te[0]===ye[0]&&te[1]===ye[1]&&!this.dirty||(this.gl.blendFunc(te[0],te[1]),this.current=te,this.dirty=!1)},Y}(Ae),Ot=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return t.Color.transparent},Y.prototype.set=function(te){var ye=this.current;te.r===ye.r&&te.g===ye.g&&te.b===ye.b&&te.a===ye.a&&!this.dirty||(this.gl.blendColor(te.r,te.g,te.b,te.a),this.current=te,this.dirty=!1)},Y}(Ae),Vt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.blendEquation(te),this.current=te,this.dirty=!1)},Y}(Ae),kt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;te?ye.enable(ye.CULL_FACE):ye.disable(ye.CULL_FACE),this.current=te,this.dirty=!1}},Y}(Ae),St=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.cullFace(te),this.current=te,this.dirty=!1)},Y}(Ae),ot=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.frontFace(te),this.current=te,this.dirty=!1)},Y}(Ae),ht=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.useProgram(te),this.current=te,this.dirty=!1)},Y}(Ae),Ke=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(te){te===this.current&&!this.dirty||(this.gl.activeTexture(te),this.current=te,this.dirty=!1)},Y}(Ae),Pe=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var te=this.gl;return[0,0,te.drawingBufferWidth,te.drawingBufferHeight]},Y.prototype.set=function(te){var ye=this.current;te[0]===ye[0]&&te[1]===ye[1]&&te[2]===ye[2]&&te[3]===ye[3]&&!this.dirty||(this.gl.viewport(te[0],te[1],te[2],te[3]),this.current=te,this.dirty=!1)},Y}(Ae),We=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;ye.bindFramebuffer(ye.FRAMEBUFFER,te),this.current=te,this.dirty=!1}},Y}(Ae),Qe=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;ye.bindRenderbuffer(ye.RENDERBUFFER,te),this.current=te,this.dirty=!1}},Y}(Ae),ut=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;ye.bindTexture(ye.TEXTURE_2D,te),this.current=te,this.dirty=!1}},Y}(Ae),It=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;ye.bindBuffer(ye.ARRAY_BUFFER,te),this.current=te,this.dirty=!1}},Y}(Ae),Tt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(te){var ye=this.gl;ye.bindBuffer(ye.ELEMENT_ARRAY_BUFFER,te),this.current=te,this.dirty=!1},Y}(Ae),Bt=function(ve){function Y(ge){ve.call(this,ge),this.vao=ge.extVertexArrayObject}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(te){!this.vao||te===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(te),this.current=te,this.dirty=!1)},Y}(Ae),rr=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_ALIGNMENT,te),this.current=te,this.dirty=!1}},Y}(Ae),Ut=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te),this.current=te,this.dirty=!1}},Y}(Ae),Qt=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){var ye=this.gl;ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,te),this.current=te,this.dirty=!1}},Y}(Ae),ar=function(ve){function Y(ge,te){ve.call(this,ge),this.context=ge,this.parent=te}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y}(Ae),nr=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ye=this.gl;ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,te,0),this.current=te,this.dirty=!1}},Y}(ar),cr=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.set=function(te){if(!(te===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ye=this.gl;ye.framebufferRenderbuffer(ye.FRAMEBUFFER,ye.DEPTH_ATTACHMENT,ye.RENDERBUFFER,te),this.current=te,this.dirty=!1}},Y}(ar),Kr=function(Y,ge,te,ye){this.context=Y,this.width=ge,this.height=te;var Le=Y.gl,Fe=this.framebuffer=Le.createFramebuffer();this.colorAttachment=new nr(Y,Fe),ye&&(this.depthAttachment=new cr(Y,Fe))};Kr.prototype.destroy=function(){var Y=this.context.gl,ge=this.colorAttachment.get();if(ge&&Y.deleteTexture(ge),this.depthAttachment){var te=this.depthAttachment.get();te&&Y.deleteRenderbuffer(te)}Y.deleteFramebuffer(this.framebuffer)};var yn=519,Qr=function(Y,ge,te){this.func=Y,this.mask=ge,this.range=te};Qr.ReadOnly=!1,Qr.ReadWrite=!0,Qr.disabled=new Qr(yn,Qr.ReadOnly,[0,1]);var st=519,Gt=7680,Zt=function(Y,ge,te,ye,Le,Fe){this.test=Y,this.ref=ge,this.mask=te,this.fail=ye,this.depthFail=Le,this.pass=Fe};Zt.disabled=new Zt({func:st,mask:0},0,0,Gt,Gt,Gt);var Ht=0,_r=1,it=771,Te=function(Y,ge,te){this.blendFunction=Y,this.blendColor=ge,this.mask=te};Te.Replace=[_r,Ht],Te.disabled=new Te(Te.Replace,t.Color.transparent,[!1,!1,!1,!1]),Te.unblended=new Te(Te.Replace,t.Color.transparent,[!0,!0,!0,!0]),Te.alphaBlended=new Te([_r,it],t.Color.transparent,[!0,!0,!0,!0]);var ke=1029,Ge=2305,Ye=function(Y,ge,te){this.enable=Y,this.mode=ge,this.frontFace=te};Ye.disabled=new Ye(!1,ke,Ge),Ye.backCCW=new Ye(!0,ke,Ge);var qe=function(Y){this.gl=Y,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ce(this),this.clearDepth=new Ee(this),this.clearStencil=new Oe(this),this.colorMask=new _e(this),this.depthMask=new Re(this),this.stencilMask=new Ve(this),this.stencilFunc=new Je(this),this.stencilOp=new ze(this),this.stencilTest=new De(this),this.depthRange=new je(this),this.depthTest=new dt(this),this.depthFunc=new Et(this),this.blend=new $t(this),this.blendFunc=new wt(this),this.blendColor=new Ot(this),this.blendEquation=new Vt(this),this.cullFace=new kt(this),this.cullFaceSide=new St(this),this.frontFace=new ot(this),this.program=new ht(this),this.activeTexture=new Ke(this),this.viewport=new Pe(this),this.bindFramebuffer=new We(this),this.bindRenderbuffer=new Qe(this),this.bindTexture=new ut(this),this.bindVertexBuffer=new It(this),this.bindElementBuffer=new Tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Bt(this),this.pixelStoreUnpack=new rr(this),this.pixelStoreUnpackPremultiplyAlpha=new Ut(this),this.pixelStoreUnpackFlipY=new Qt(this),this.extTextureFilterAnisotropic=Y.getExtension("EXT_texture_filter_anisotropic")||Y.getExtension("MOZ_EXT_texture_filter_anisotropic")||Y.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=Y.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=Y.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(Y.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Y.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=Y.getExtension("EXT_disjoint_timer_query")};qe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},qe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},qe.prototype.createIndexBuffer=function(Y,ge){return new pe(this,Y,ge)},qe.prototype.createVertexBuffer=function(Y,ge,te){return new Se(this,Y,ge,te)},qe.prototype.createRenderbuffer=function(Y,ge,te){var ye=this.gl,Le=ye.createRenderbuffer();return this.bindRenderbuffer.set(Le),ye.renderbufferStorage(ye.RENDERBUFFER,Y,ge,te),this.bindRenderbuffer.set(null),Le},qe.prototype.createFramebuffer=function(Y,ge,te){return new Kr(this,Y,ge,te)},qe.prototype.clear=function(Y){var ge=Y.color,te=Y.depth,ye=this.gl,Le=0;ge&&(Le|=ye.COLOR_BUFFER_BIT,this.clearColor.set(ge),this.colorMask.set([!0,!0,!0,!0])),typeof te!="undefined"&&(Le|=ye.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(te),this.depthMask.set(!0)),ye.clear(Le)},qe.prototype.setCullFace=function(Y){Y.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Y.mode),this.frontFace.set(Y.frontFace))},qe.prototype.setDepthMode=function(Y){Y.func===this.gl.ALWAYS&&!Y.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(Y.func),this.depthMask.set(Y.mask),this.depthRange.set(Y.range))},qe.prototype.setStencilMode=function(Y){Y.test.func===this.gl.ALWAYS&&!Y.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(Y.mask),this.stencilOp.set([Y.fail,Y.depthFail,Y.pass]),this.stencilFunc.set({func:Y.test.func,ref:Y.ref,mask:Y.test.mask}))},qe.prototype.setColorMode=function(Y){t.deepEqual(Y.blendFunction,Te.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Y.blendFunction),this.blendColor.set(Y.blendColor)),this.colorMask.set(Y.mask)},qe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var at=function(ve){function Y(ge,te,ye){var Le=this;ve.call(this),this.id=ge,this.dispatcher=ye,this.on("data",function(Fe){Fe.dataType==="source"&&Fe.sourceDataType==="metadata"&&(Le._sourceLoaded=!0),Le._sourceLoaded&&!Le._paused&&Fe.dataType==="source"&&Fe.sourceDataType==="content"&&(Le.reload(),Le.transform&&Le.update(Le.transform))}),this.on("error",function(){Le._sourceErrored=!0}),this._source=j(ge,te,ye,this),this._tiles={},this._cache=new ce(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(te){this.map=te,this._maxTileCacheSize=te?te._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(te)},Y.prototype.onRemove=function(te){this._source&&this._source.onRemove&&this._source.onRemove(te)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var te in this._tiles){var ye=this._tiles[te];if(ye.state!=="loaded"&&ye.state!=="errored")return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(!!this._paused){var te=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,te&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(te,ye){return this._source.loadTile(te,ye)},Y.prototype._unloadTile=function(te){if(this._source.unloadTile)return this._source.unloadTile(te,function(){})},Y.prototype._abortTile=function(te){if(this._source.abortTile)return this._source.abortTile(te,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(te){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ye in this._tiles){var Le=this._tiles[ye];Le.upload(te),Le.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return t.values(this._tiles).map(function(te){return te.tileID}).sort(et).map(function(te){return te.key})},Y.prototype.getRenderableIds=function(te){var ye=this,Le=[];for(var Fe in this._tiles)this._isIdRenderable(Fe,te)&&Le.push(this._tiles[Fe]);return te?Le.sort(function(Xe,ft){var Mt=Xe.tileID,Wt=ft.tileID,sr=new t.Point(Mt.canonical.x,Mt.canonical.y)._rotate(ye.transform.angle),vr=new t.Point(Wt.canonical.x,Wt.canonical.y)._rotate(ye.transform.angle);return Mt.overscaledZ-Wt.overscaledZ||vr.y-sr.y||vr.x-sr.x}).map(function(Xe){return Xe.tileID.key}):Le.map(function(Xe){return Xe.tileID}).sort(et).map(function(Xe){return Xe.key})},Y.prototype.hasRenderableParent=function(te){var ye=this.findLoadedParent(te,0);return ye?this._isIdRenderable(ye.tileID.key):!1},Y.prototype._isIdRenderable=function(te,ye){return this._tiles[te]&&this._tiles[te].hasData()&&!this._coveredTiles[te]&&(ye||!this._tiles[te].holdingForFade())},Y.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var te in this._tiles)this._tiles[te].state!=="errored"&&this._reloadTile(te,"reloading")},Y.prototype._reloadTile=function(te,ye){var Le=this._tiles[te];!Le||(Le.state!=="loading"&&(Le.state=ye),this._loadTile(Le,this._tileLoaded.bind(this,Le,te,ye)))},Y.prototype._tileLoaded=function(te,ye,Le,Fe){if(Fe){te.state="errored",Fe.status!==404?this._source.fire(new t.ErrorEvent(Fe,{tile:te})):this.update(this.transform);return}te.timeAdded=t.browser.now(),Le==="expired"&&(te.refreshedUponExpiration=!0),this._setTileReloadTimer(ye,te),this.getSource().type==="raster-dem"&&te.dem&&this._backfillDEM(te),this._state.initializeTileState(te,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:te,coord:te.tileID}))},Y.prototype._backfillDEM=function(te){for(var ye=this.getRenderableIds(),Le=0;Le<ye.length;Le++){var Fe=ye[Le];if(te.neighboringTiles&&te.neighboringTiles[Fe]){var Xe=this.getTileByID(Fe);ft(te,Xe),ft(Xe,te)}}function ft(Mt,Wt){Mt.needsHillshadePrepare=!0;var sr=Wt.tileID.canonical.x-Mt.tileID.canonical.x,vr=Wt.tileID.canonical.y-Mt.tileID.canonical.y,Er=Math.pow(2,Mt.tileID.canonical.z),jr=Wt.tileID.key;sr===0&&vr===0||Math.abs(vr)>1||(Math.abs(sr)>1&&(Math.abs(sr+Er)===1?sr+=Er:Math.abs(sr-Er)===1&&(sr-=Er)),!(!Wt.dem||!Mt.dem)&&(Mt.dem.backfillBorder(Wt.dem,sr,vr),Mt.neighboringTiles&&Mt.neighboringTiles[jr]&&(Mt.neighboringTiles[jr].backfilled=!0)))}},Y.prototype.getTile=function(te){return this.getTileByID(te.key)},Y.prototype.getTileByID=function(te){return this._tiles[te]},Y.prototype._retainLoadedChildren=function(te,ye,Le,Fe){for(var Xe in this._tiles){var ft=this._tiles[Xe];if(!(Fe[Xe]||!ft.hasData()||ft.tileID.overscaledZ<=ye||ft.tileID.overscaledZ>Le)){for(var Mt=ft.tileID;ft&&ft.tileID.overscaledZ>ye+1;){var Wt=ft.tileID.scaledTo(ft.tileID.overscaledZ-1);ft=this._tiles[Wt.key],ft&&ft.hasData()&&(Mt=Wt)}for(var sr=Mt;sr.overscaledZ>ye;)if(sr=sr.scaledTo(sr.overscaledZ-1),te[sr.key]){Fe[Mt.key]=Mt;break}}}},Y.prototype.findLoadedParent=function(te,ye){if(te.key in this._loadedParentTiles){var Le=this._loadedParentTiles[te.key];return Le&&Le.tileID.overscaledZ>=ye?Le:null}for(var Fe=te.overscaledZ-1;Fe>=ye;Fe--){var Xe=te.scaledTo(Fe),ft=this._getLoadedTile(Xe);if(ft)return ft}},Y.prototype._getLoadedTile=function(te){var ye=this._tiles[te.key];if(ye&&ye.hasData())return ye;var Le=this._cache.getByKey(te.wrapped().key);return Le},Y.prototype.updateCacheSize=function(te){var ye=Math.ceil(te.width/this._source.tileSize)+1,Le=Math.ceil(te.height/this._source.tileSize)+1,Fe=ye*Le,Xe=5,ft=Math.floor(Fe*Xe),Mt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ft):ft;this._cache.setMaxSize(Mt)},Y.prototype.handleWrapJump=function(te){var ye=this._prevLng===void 0?te:this._prevLng,Le=te-ye,Fe=Le/360,Xe=Math.round(Fe);if(this._prevLng=te,Xe){var ft={};for(var Mt in this._tiles){var Wt=this._tiles[Mt];Wt.tileID=Wt.tileID.unwrapTo(Wt.tileID.wrap+Xe),ft[Wt.tileID.key]=Wt}this._tiles=ft;for(var sr in this._timers)clearTimeout(this._timers[sr]),delete this._timers[sr];for(var vr in this._tiles){var Er=this._tiles[vr];this._setTileReloadTimer(vr,Er)}}},Y.prototype.update=function(te){var ye=this;if(this.transform=te,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(te),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Le;this.used?this._source.tileID?Le=te.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(_a){return new t.OverscaledTileID(_a.canonical.z,_a.wrap,_a.canonical.z,_a.canonical.x,_a.canonical.y)}):(Le=te.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Le=Le.filter(function(_a){return ye._source.hasTile(_a)}))):Le=[];var Fe=te.coveringZoomLevel(this._source),Xe=Math.max(Fe-Y.maxOverzooming,this._source.minzoom),ft=Math.max(Fe+Y.maxUnderzooming,this._source.minzoom),Mt=this._updateRetainedTiles(Le,Fe);if(pt(this._source.type)){for(var Wt={},sr={},vr=Object.keys(Mt),Er=0,jr=vr;Er<jr.length;Er+=1){var Wr=jr[Er],Hr=Mt[Wr],Jr=this._tiles[Wr];if(!(!Jr||Jr.fadeEndTime&&Jr.fadeEndTime<=t.browser.now())){var pn=this.findLoadedParent(Hr,Xe);pn&&(this._addTile(pn.tileID),Wt[pn.tileID.key]=pn.tileID),sr[Wr]=Hr}}this._retainLoadedChildren(sr,Fe,ft,Mt);for(var Rn in Wt)Mt[Rn]||(this._coveredTiles[Rn]=!0,Mt[Rn]=Wt[Rn])}for(var Vn in Mt)this._tiles[Vn].clearFadeHold();for(var Jn=t.keysDifference(this._tiles,Mt),ta=0,qn=Jn;ta<qn.length;ta+=1){var pa=qn[ta],Aa=this._tiles[pa];Aa.hasSymbolBuckets&&!Aa.holdingForFade()?Aa.setHoldDuration(this.map._fadeDuration):(!Aa.hasSymbolBuckets||Aa.symbolFadeFinished())&&this._removeTile(pa)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var te in this._tiles)this._tiles[te].holdingForFade()&&this._removeTile(te)},Y.prototype._updateRetainedTiles=function(te,ye){for(var Le={},Fe={},Xe=Math.max(ye-Y.maxOverzooming,this._source.minzoom),ft=Math.max(ye+Y.maxUnderzooming,this._source.minzoom),Mt={},Wt=0,sr=te;Wt<sr.length;Wt+=1){var vr=sr[Wt],Er=this._addTile(vr);Le[vr.key]=vr,!Er.hasData()&&ye<this._source.maxzoom&&(Mt[vr.key]=vr)}this._retainLoadedChildren(Mt,ye,ft,Le);for(var jr=0,Wr=te;jr<Wr.length;jr+=1){var Hr=Wr[jr],Jr=this._tiles[Hr.key];if(!Jr.hasData()){if(ye+1>this._source.maxzoom){var pn=Hr.children(this._source.maxzoom)[0],Rn=this.getTile(pn);if(!!Rn&&Rn.hasData()){Le[pn.key]=pn;continue}}else{var Vn=Hr.children(this._source.maxzoom);if(Le[Vn[0].key]&&Le[Vn[1].key]&&Le[Vn[2].key]&&Le[Vn[3].key])continue}for(var Jn=Jr.wasRequested(),ta=Hr.overscaledZ-1;ta>=Xe;--ta){var qn=Hr.scaledTo(ta);if(Fe[qn.key]||(Fe[qn.key]=!0,Jr=this.getTile(qn),!Jr&&Jn&&(Jr=this._addTile(qn)),Jr&&(Le[qn.key]=qn,Jn=Jr.wasRequested(),Jr.hasData())))break}}}return Le},Y.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var te in this._tiles){for(var ye=[],Le=void 0,Fe=this._tiles[te].tileID;Fe.overscaledZ>0;){if(Fe.key in this._loadedParentTiles){Le=this._loadedParentTiles[Fe.key];break}ye.push(Fe.key);var Xe=Fe.scaledTo(Fe.overscaledZ-1);if(Le=this._getLoadedTile(Xe),Le)break;Fe=Xe}for(var ft=0,Mt=ye;ft<Mt.length;ft+=1){var Wt=Mt[ft];this._loadedParentTiles[Wt]=Le}}},Y.prototype._addTile=function(te){var ye=this._tiles[te.key];if(ye)return ye;ye=this._cache.getAndRemove(te),ye&&(this._setTileReloadTimer(te.key,ye),ye.tileID=te,this._state.initializeTileState(ye,this.map?this.map.painter:null),this._cacheTimers[te.key]&&(clearTimeout(this._cacheTimers[te.key]),delete this._cacheTimers[te.key],this._setTileReloadTimer(te.key,ye)));var Le=Boolean(ye);return Le||(ye=new t.Tile(te,this._source.tileSize*te.overscaleFactor()),this._loadTile(ye,this._tileLoaded.bind(this,ye,te.key,ye.state))),ye?(ye.uses++,this._tiles[te.key]=ye,Le||this._source.fire(new t.Event("dataloading",{tile:ye,coord:ye.tileID,dataType:"source"})),ye):null},Y.prototype._setTileReloadTimer=function(te,ye){var Le=this;te in this._timers&&(clearTimeout(this._timers[te]),delete this._timers[te]);var Fe=ye.getExpiryTimeout();Fe&&(this._timers[te]=setTimeout(function(){Le._reloadTile(te,"expired"),delete Le._timers[te]},Fe))},Y.prototype._removeTile=function(te){var ye=this._tiles[te];!ye||(ye.uses--,delete this._tiles[te],this._timers[te]&&(clearTimeout(this._timers[te]),delete this._timers[te]),!(ye.uses>0)&&(ye.hasData()&&ye.state!=="reloading"?this._cache.add(ye.tileID,ye,ye.getExpiryTimeout()):(ye.aborted=!0,this._abortTile(ye),this._unloadTile(ye))))},Y.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var te in this._tiles)this._removeTile(te);this._cache.reset()},Y.prototype.tilesIn=function(te,ye,Le){var Fe=this,Xe=[],ft=this.transform;if(!ft)return Xe;for(var Mt=Le?ft.getCameraQueryGeometry(te):te,Wt=te.map(function(ta){return ft.pointCoordinate(ta)}),sr=Mt.map(function(ta){return ft.pointCoordinate(ta)}),vr=this.getIds(),Er=1/0,jr=1/0,Wr=-1/0,Hr=-1/0,Jr=0,pn=sr;Jr<pn.length;Jr+=1){var Rn=pn[Jr];Er=Math.min(Er,Rn.x),jr=Math.min(jr,Rn.y),Wr=Math.max(Wr,Rn.x),Hr=Math.max(Hr,Rn.y)}for(var Vn=function(ta){var qn=Fe._tiles[vr[ta]];if(!qn.holdingForFade()){var pa=qn.tileID,Aa=Math.pow(2,ft.zoom-qn.tileID.overscaledZ),_a=ye*qn.queryPadding*t.EXTENT/qn.tileSize/Aa,Ea=[pa.getTilePoint(new t.MercatorCoordinate(Er,jr)),pa.getTilePoint(new t.MercatorCoordinate(Wr,Hr))];if(Ea[0].x-_a<t.EXTENT&&Ea[0].y-_a<t.EXTENT&&Ea[1].x+_a>=0&&Ea[1].y+_a>=0){var Ra=Wt.map(function(ui){return pa.getTilePoint(ui)}),Ya=sr.map(function(ui){return pa.getTilePoint(ui)});Xe.push({tile:qn,tileID:pa,queryGeometry:Ra,cameraQueryGeometry:Ya,scale:Aa})}}},Jn=0;Jn<vr.length;Jn++)Vn(Jn);return Xe},Y.prototype.getVisibleCoordinates=function(te){for(var ye=this,Le=this.getRenderableIds(te).map(function(Mt){return ye._tiles[Mt].tileID}),Fe=0,Xe=Le;Fe<Xe.length;Fe+=1){var ft=Xe[Fe];ft.posMatrix=this.transform.calculatePosMatrix(ft.toUnwrapped())}return Le},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(pt(this._source.type))for(var te in this._tiles){var ye=this._tiles[te];if(ye.fadeEndTime!==void 0&&ye.fadeEndTime>=t.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(te,ye,Le){te=te||"_geojsonTileLayer",this._state.updateState(te,ye,Le)},Y.prototype.removeFeatureState=function(te,ye,Le){te=te||"_geojsonTileLayer",this._state.removeFeatureState(te,ye,Le)},Y.prototype.getFeatureState=function(te,ye){return te=te||"_geojsonTileLayer",this._state.getState(te,ye)},Y.prototype.setDependencies=function(te,ye,Le){var Fe=this._tiles[te];Fe&&Fe.setDependencies(ye,Le)},Y.prototype.reloadTilesForDependencies=function(te,ye){for(var Le in this._tiles){var Fe=this._tiles[Le];Fe.hasDependency(te,ye)&&this._reloadTile(Le,"reloading")}this._cache.filter(function(Xe){return!Xe.hasDependency(te,ye)})},Y}(t.Evented);at.maxOverzooming=10,at.maxUnderzooming=3;function et(ve,Y){var ge=Math.abs(ve.wrap*2)-+(ve.wrap<0),te=Math.abs(Y.wrap*2)-+(Y.wrap<0);return ve.overscaledZ-Y.overscaledZ||te-ge||Y.canonical.y-ve.canonical.y||Y.canonical.x-ve.canonical.x}function pt(ve){return ve==="raster"||ve==="image"||ve==="video"}function _t(){return new t.window.Worker(yg.workerUrl)}var Pt="mapboxgl_preloaded_worker_pool",Xt=function(){this.active={}};Xt.prototype.acquire=function(Y){if(!this.workers)for(this.workers=[];this.workers.length<Xt.workerCount;)this.workers.push(new _t);return this.active[Y]=!0,this.workers.slice()},Xt.prototype.release=function(Y){delete this.active[Y],this.numActive()===0&&(this.workers.forEach(function(ge){ge.terminate()}),this.workers=null)},Xt.prototype.isPreloaded=function(){return!!this.active[Pt]},Xt.prototype.numActive=function(){return Object.keys(this.active).length};var zt=Math.floor(t.browser.hardwareConcurrency/2);Xt.workerCount=Math.max(Math.min(zt,6),1);var ur;function gr(){return ur||(ur=new Xt),ur}function Mr(){var ve=gr();ve.acquire(Pt)}function un(){var ve=ur;ve&&(ve.isPreloaded()&&ve.numActive()===1?(ve.release(Pt),ur=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function zr(ve,Y){var ge={};for(var te in ve)te!=="ref"&&(ge[te]=ve[te]);return t.refProperties.forEach(function(ye){ye in Y&&(ge[ye]=Y[ye])}),ge}function $r(ve){ve=ve.slice();for(var Y=Object.create(null),ge=0;ge<ve.length;ge++)Y[ve[ge].id]=ve[ge];for(var te=0;te<ve.length;te++)"ref"in ve[te]&&(ve[te]=zr(ve[te],Y[ve[te].ref]));return ve}function hn(){var ve={},Y=t.styleSpec.$version;for(var ge in t.styleSpec.$root){var te=t.styleSpec.$root[ge];if(te.required){var ye=null;ge==="version"?ye=Y:te.type==="array"?ye=[]:ye={},ye!=null&&(ve[ge]=ye)}}return ve}var Tr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function wr(ve,Y,ge){ge.push({command:Tr.addSource,args:[ve,Y[ve]]})}function Ur(ve,Y,ge){Y.push({command:Tr.removeSource,args:[ve]}),ge[ve]=!0}function Br(ve,Y,ge,te){Ur(ve,ge,te),wr(ve,Y,ge)}function Cr(ve,Y,ge){var te;for(te in ve[ge])if(!!ve[ge].hasOwnProperty(te)&&te!=="data"&&!t.deepEqual(ve[ge][te],Y[ge][te]))return!1;for(te in Y[ge])if(!!Y[ge].hasOwnProperty(te)&&te!=="data"&&!t.deepEqual(ve[ge][te],Y[ge][te]))return!1;return!0}function nt(ve,Y,ge,te){ve=ve||{},Y=Y||{};var ye;for(ye in ve)!ve.hasOwnProperty(ye)||Y.hasOwnProperty(ye)||Ur(ye,ge,te);for(ye in Y)!Y.hasOwnProperty(ye)||(ve.hasOwnProperty(ye)?t.deepEqual(ve[ye],Y[ye])||(ve[ye].type==="geojson"&&Y[ye].type==="geojson"&&Cr(ve,Y,ye)?ge.push({command:Tr.setGeoJSONSourceData,args:[ye,Y[ye].data]}):Br(ye,Y,ge,te)):wr(ye,Y,ge))}function Rt(ve,Y,ge,te,ye,Le){ve=ve||{},Y=Y||{};var Fe;for(Fe in ve)!ve.hasOwnProperty(Fe)||t.deepEqual(ve[Fe],Y[Fe])||ge.push({command:Le,args:[te,Fe,Y[Fe],ye]});for(Fe in Y)!Y.hasOwnProperty(Fe)||ve.hasOwnProperty(Fe)||t.deepEqual(ve[Fe],Y[Fe])||ge.push({command:Le,args:[te,Fe,Y[Fe],ye]})}function Jt(ve){return ve.id}function hr(ve,Y){return ve[Y.id]=Y,ve}function Dr(ve,Y,ge){ve=ve||[],Y=Y||[];var te=ve.map(Jt),ye=Y.map(Jt),Le=ve.reduce(hr,{}),Fe=Y.reduce(hr,{}),Xe=te.slice(),ft=Object.create(null),Mt,Wt,sr,vr,Er,jr,Wr;for(Mt=0,Wt=0;Mt<te.length;Mt++)sr=te[Mt],Fe.hasOwnProperty(sr)?Wt++:(ge.push({command:Tr.removeLayer,args:[sr]}),Xe.splice(Xe.indexOf(sr,Wt),1));for(Mt=0,Wt=0;Mt<ye.length;Mt++)sr=ye[ye.length-1-Mt],Xe[Xe.length-1-Mt]!==sr&&(Le.hasOwnProperty(sr)?(ge.push({command:Tr.removeLayer,args:[sr]}),Xe.splice(Xe.lastIndexOf(sr,Xe.length-Wt),1)):Wt++,jr=Xe[Xe.length-Mt],ge.push({command:Tr.addLayer,args:[Fe[sr],jr]}),Xe.splice(Xe.length-Mt,0,sr),ft[sr]=!0);for(Mt=0;Mt<ye.length;Mt++)if(sr=ye[Mt],vr=Le[sr],Er=Fe[sr],!(ft[sr]||t.deepEqual(vr,Er))){if(!t.deepEqual(vr.source,Er.source)||!t.deepEqual(vr["source-layer"],Er["source-layer"])||!t.deepEqual(vr.type,Er.type)){ge.push({command:Tr.removeLayer,args:[sr]}),jr=Xe[Xe.lastIndexOf(sr)+1],ge.push({command:Tr.addLayer,args:[Er,jr]});continue}Rt(vr.layout,Er.layout,ge,sr,null,Tr.setLayoutProperty),Rt(vr.paint,Er.paint,ge,sr,null,Tr.setPaintProperty),t.deepEqual(vr.filter,Er.filter)||ge.push({command:Tr.setFilter,args:[sr,Er.filter]}),(!t.deepEqual(vr.minzoom,Er.minzoom)||!t.deepEqual(vr.maxzoom,Er.maxzoom))&&ge.push({command:Tr.setLayerZoomRange,args:[sr,Er.minzoom,Er.maxzoom]});for(Wr in vr)!vr.hasOwnProperty(Wr)||Wr==="layout"||Wr==="paint"||Wr==="filter"||Wr==="metadata"||Wr==="minzoom"||Wr==="maxzoom"||(Wr.indexOf("paint.")===0?Rt(vr[Wr],Er[Wr],ge,sr,Wr.slice(6),Tr.setPaintProperty):t.deepEqual(vr[Wr],Er[Wr])||ge.push({command:Tr.setLayerProperty,args:[sr,Wr,Er[Wr]]}));for(Wr in Er)!Er.hasOwnProperty(Wr)||vr.hasOwnProperty(Wr)||Wr==="layout"||Wr==="paint"||Wr==="filter"||Wr==="metadata"||Wr==="minzoom"||Wr==="maxzoom"||(Wr.indexOf("paint.")===0?Rt(vr[Wr],Er[Wr],ge,sr,Wr.slice(6),Tr.setPaintProperty):t.deepEqual(vr[Wr],Er[Wr])||ge.push({command:Tr.setLayerProperty,args:[sr,Wr,Er[Wr]]}))}}function Gr(ve,Y){if(!ve)return[{command:Tr.setStyle,args:[Y]}];var ge=[];try{if(!t.deepEqual(ve.version,Y.version))return[{command:Tr.setStyle,args:[Y]}];t.deepEqual(ve.center,Y.center)||ge.push({command:Tr.setCenter,args:[Y.center]}),t.deepEqual(ve.zoom,Y.zoom)||ge.push({command:Tr.setZoom,args:[Y.zoom]}),t.deepEqual(ve.bearing,Y.bearing)||ge.push({command:Tr.setBearing,args:[Y.bearing]}),t.deepEqual(ve.pitch,Y.pitch)||ge.push({command:Tr.setPitch,args:[Y.pitch]}),t.deepEqual(ve.sprite,Y.sprite)||ge.push({command:Tr.setSprite,args:[Y.sprite]}),t.deepEqual(ve.glyphs,Y.glyphs)||ge.push({command:Tr.setGlyphs,args:[Y.glyphs]}),t.deepEqual(ve.transition,Y.transition)||ge.push({command:Tr.setTransition,args:[Y.transition]}),t.deepEqual(ve.light,Y.light)||ge.push({command:Tr.setLight,args:[Y.light]});var te={},ye=[];nt(ve.sources,Y.sources,ye,te);var Le=[];ve.layers&&ve.layers.forEach(function(Fe){te[Fe.source]?ge.push({command:Tr.removeLayer,args:[Fe.id]}):Le.push(Fe)}),ge=ge.concat(ye),Dr(Le,Y.layers,ge)}catch(Fe){console.warn("Unable to compute style diff:",Fe),ge=[{command:Tr.setStyle,args:[Y]}]}return ge}var Rr=function(Y,ge){this.reset(Y,ge)};Rr.prototype.reset=function(Y,ge){this.points=Y||[],this._distances=[0];for(var te=1;te<this.points.length;te++)this._distances[te]=this._distances[te-1]+this.points[te].dist(this.points[te-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ge||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Rr.prototype.lerp=function(Y){if(this.points.length===1)return this.points[0];Y=t.clamp(Y,0,1);for(var ge=1,te=this._distances[ge],ye=Y*this.paddedLength+this.padding;te<ye&&ge<this._distances.length;)te=this._distances[++ge];var Le=ge-1,Fe=this._distances[Le],Xe=te-Fe,ft=Xe>0?(ye-Fe)/Xe:0;return this.points[Le].mult(1-ft).add(this.points[ge].mult(ft))};var Ct=function(Y,ge,te){var ye=this.boxCells=[],Le=this.circleCells=[];this.xCellCount=Math.ceil(Y/te),this.yCellCount=Math.ceil(ge/te);for(var Fe=0;Fe<this.xCellCount*this.yCellCount;Fe++)ye.push([]),Le.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=Y,this.height=ge,this.xScale=this.xCellCount/Y,this.yScale=this.yCellCount/ge,this.boxUid=0,this.circleUid=0};Ct.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ct.prototype.insert=function(Y,ge,te,ye,Le){this._forEachCell(ge,te,ye,Le,this._insertBoxCell,this.boxUid++),this.boxKeys.push(Y),this.bboxes.push(ge),this.bboxes.push(te),this.bboxes.push(ye),this.bboxes.push(Le)},Ct.prototype.insertCircle=function(Y,ge,te,ye){this._forEachCell(ge-ye,te-ye,ge+ye,te+ye,this._insertCircleCell,this.circleUid++),this.circleKeys.push(Y),this.circles.push(ge),this.circles.push(te),this.circles.push(ye)},Ct.prototype._insertBoxCell=function(Y,ge,te,ye,Le,Fe){this.boxCells[Le].push(Fe)},Ct.prototype._insertCircleCell=function(Y,ge,te,ye,Le,Fe){this.circleCells[Le].push(Fe)},Ct.prototype._query=function(Y,ge,te,ye,Le,Fe){if(te<0||Y>this.width||ye<0||ge>this.height)return Le?!1:[];var Xe=[];if(Y<=0&&ge<=0&&this.width<=te&&this.height<=ye){if(Le)return!0;for(var ft=0;ft<this.boxKeys.length;ft++)Xe.push({key:this.boxKeys[ft],x1:this.bboxes[ft*4],y1:this.bboxes[ft*4+1],x2:this.bboxes[ft*4+2],y2:this.bboxes[ft*4+3]});for(var Mt=0;Mt<this.circleKeys.length;Mt++){var Wt=this.circles[Mt*3],sr=this.circles[Mt*3+1],vr=this.circles[Mt*3+2];Xe.push({key:this.circleKeys[Mt],x1:Wt-vr,y1:sr-vr,x2:Wt+vr,y2:sr+vr})}return Fe?Xe.filter(Fe):Xe}else{var Er={hitTest:Le,seenUids:{box:{},circle:{}}};return this._forEachCell(Y,ge,te,ye,this._queryCell,Xe,Er,Fe),Le?Xe.length>0:Xe}},Ct.prototype._queryCircle=function(Y,ge,te,ye,Le){var Fe=Y-te,Xe=Y+te,ft=ge-te,Mt=ge+te;if(Xe<0||Fe>this.width||Mt<0||ft>this.height)return ye?!1:[];var Wt=[],sr={hitTest:ye,circle:{x:Y,y:ge,radius:te},seenUids:{box:{},circle:{}}};return this._forEachCell(Fe,ft,Xe,Mt,this._queryCellCircle,Wt,sr,Le),ye?Wt.length>0:Wt},Ct.prototype.query=function(Y,ge,te,ye,Le){return this._query(Y,ge,te,ye,!1,Le)},Ct.prototype.hitTest=function(Y,ge,te,ye,Le){return this._query(Y,ge,te,ye,!0,Le)},Ct.prototype.hitTestCircle=function(Y,ge,te,ye){return this._queryCircle(Y,ge,te,!0,ye)},Ct.prototype._queryCell=function(Y,ge,te,ye,Le,Fe,Xe,ft){var Mt=Xe.seenUids,Wt=this.boxCells[Le];if(Wt!==null)for(var sr=this.bboxes,vr=0,Er=Wt;vr<Er.length;vr+=1){var jr=Er[vr];if(!Mt.box[jr]){Mt.box[jr]=!0;var Wr=jr*4;if(Y<=sr[Wr+2]&&ge<=sr[Wr+3]&&te>=sr[Wr+0]&&ye>=sr[Wr+1]&&(!ft||ft(this.boxKeys[jr]))){if(Xe.hitTest)return Fe.push(!0),!0;Fe.push({key:this.boxKeys[jr],x1:sr[Wr],y1:sr[Wr+1],x2:sr[Wr+2],y2:sr[Wr+3]})}}}var Hr=this.circleCells[Le];if(Hr!==null)for(var Jr=this.circles,pn=0,Rn=Hr;pn<Rn.length;pn+=1){var Vn=Rn[pn];if(!Mt.circle[Vn]){Mt.circle[Vn]=!0;var Jn=Vn*3;if(this._circleAndRectCollide(Jr[Jn],Jr[Jn+1],Jr[Jn+2],Y,ge,te,ye)&&(!ft||ft(this.circleKeys[Vn]))){if(Xe.hitTest)return Fe.push(!0),!0;var ta=Jr[Jn],qn=Jr[Jn+1],pa=Jr[Jn+2];Fe.push({key:this.circleKeys[Vn],x1:ta-pa,y1:qn-pa,x2:ta+pa,y2:qn+pa})}}}},Ct.prototype._queryCellCircle=function(Y,ge,te,ye,Le,Fe,Xe,ft){var Mt=Xe.circle,Wt=Xe.seenUids,sr=this.boxCells[Le];if(sr!==null)for(var vr=this.bboxes,Er=0,jr=sr;Er<jr.length;Er+=1){var Wr=jr[Er];if(!Wt.box[Wr]){Wt.box[Wr]=!0;var Hr=Wr*4;if(this._circleAndRectCollide(Mt.x,Mt.y,Mt.radius,vr[Hr+0],vr[Hr+1],vr[Hr+2],vr[Hr+3])&&(!ft||ft(this.boxKeys[Wr])))return Fe.push(!0),!0}}var Jr=this.circleCells[Le];if(Jr!==null)for(var pn=this.circles,Rn=0,Vn=Jr;Rn<Vn.length;Rn+=1){var Jn=Vn[Rn];if(!Wt.circle[Jn]){Wt.circle[Jn]=!0;var ta=Jn*3;if(this._circlesCollide(pn[ta],pn[ta+1],pn[ta+2],Mt.x,Mt.y,Mt.radius)&&(!ft||ft(this.circleKeys[Jn])))return Fe.push(!0),!0}}},Ct.prototype._forEachCell=function(Y,ge,te,ye,Le,Fe,Xe,ft){for(var Mt=this._convertToXCellCoord(Y),Wt=this._convertToYCellCoord(ge),sr=this._convertToXCellCoord(te),vr=this._convertToYCellCoord(ye),Er=Mt;Er<=sr;Er++)for(var jr=Wt;jr<=vr;jr++){var Wr=this.xCellCount*jr+Er;if(Le.call(this,Y,ge,te,ye,Wr,Fe,Xe,ft))return}},Ct.prototype._convertToXCellCoord=function(Y){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Y*this.xScale)))},Ct.prototype._convertToYCellCoord=function(Y){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Y*this.yScale)))},Ct.prototype._circlesCollide=function(Y,ge,te,ye,Le,Fe){var Xe=ye-Y,ft=Le-ge,Mt=te+Fe;return Mt*Mt>Xe*Xe+ft*ft},Ct.prototype._circleAndRectCollide=function(Y,ge,te,ye,Le,Fe,Xe){var ft=(Fe-ye)/2,Mt=Math.abs(Y-(ye+ft));if(Mt>ft+te)return!1;var Wt=(Xe-Le)/2,sr=Math.abs(ge-(Le+Wt));if(sr>Wt+te)return!1;if(Mt<=ft||sr<=Wt)return!0;var vr=Mt-ft,Er=sr-Wt;return vr*vr+Er*Er<=te*te};function tr(ve,Y,ge,te,ye){var Le=t.create();return Y?(t.scale(Le,Le,[1/ye,1/ye,1]),ge||t.rotateZ(Le,Le,te.angle)):t.multiply(Le,te.labelPlaneMatrix,ve),Le}function Lr(ve,Y,ge,te,ye){if(Y){var Le=t.clone(ve);return t.scale(Le,Le,[ye,ye,1]),ge||t.rotateZ(Le,Le,-te.angle),Le}else return te.glCoordMatrix}function Nr(ve,Y){var ge=[ve.x,ve.y,0,1];Ar(ge,ge,Y);var te=ge[3];return{point:new t.Point(ge[0]/te,ge[1]/te),signedDistanceFromCamera:te}}function Tn(ve,Y){return .5+.5*(ve/Y)}function rn(ve,Y){var ge=ve[0]/ve[3],te=ve[1]/ve[3],ye=ge>=-Y[0]&&ge<=Y[0]&&te>=-Y[1]&&te<=Y[1];return ye}function kn(ve,Y,ge,te,ye,Le,Fe,Xe){var ft=te?ve.textSizeData:ve.iconSizeData,Mt=t.evaluateSizeForZoom(ft,ge.transform.zoom),Wt=[256/ge.width*2+1,256/ge.height*2+1],sr=te?ve.text.dynamicLayoutVertexArray:ve.icon.dynamicLayoutVertexArray;sr.clear();for(var vr=ve.lineVertexArray,Er=te?ve.text.placedSymbolArray:ve.icon.placedSymbolArray,jr=ge.transform.width/ge.transform.height,Wr=!1,Hr=0;Hr<Er.length;Hr++){var Jr=Er.get(Hr);if(Jr.hidden||Jr.writingMode===t.WritingMode.vertical&&!Wr){Pa(Jr.numGlyphs,sr);continue}Wr=!1;var pn=[Jr.anchorX,Jr.anchorY,0,1];if(t.transformMat4(pn,pn,Y),!rn(pn,Wt)){Pa(Jr.numGlyphs,sr);continue}var Rn=pn[3],Vn=Tn(ge.transform.cameraToCenterDistance,Rn),Jn=t.evaluateSizeForFeature(ft,Mt,Jr),ta=Fe?Jn/Vn:Jn*Vn,qn=new t.Point(Jr.anchorX,Jr.anchorY),pa=Nr(qn,ye).point,Aa={},_a=ya(Jr,ta,!1,Xe,Y,ye,Le,ve.glyphOffsetArray,vr,sr,pa,qn,Aa,jr);Wr=_a.useVertical,(_a.notEnoughRoom||Wr||_a.needsFlipping&&ya(Jr,ta,!0,Xe,Y,ye,Le,ve.glyphOffsetArray,vr,sr,pa,qn,Aa,jr).notEnoughRoom)&&Pa(Jr.numGlyphs,sr)}te?ve.text.dynamicLayoutVertexBuffer.updateData(sr):ve.icon.dynamicLayoutVertexBuffer.updateData(sr)}function Cn(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt){var sr=Xe.glyphStartIndex+Xe.numGlyphs,vr=Xe.lineStartIndex,Er=Xe.lineStartIndex+Xe.lineLength,jr=Y.getoffsetX(Xe.glyphStartIndex),Wr=Y.getoffsetX(sr-1),Hr=Xa(ve*jr,ge,te,ye,Le,Fe,Xe.segment,vr,Er,ft,Mt,Wt);if(!Hr)return null;var Jr=Xa(ve*Wr,ge,te,ye,Le,Fe,Xe.segment,vr,Er,ft,Mt,Wt);return Jr?{first:Hr,last:Jr}:null}function oa(ve,Y,ge,te){if(ve===t.WritingMode.horizontal){var ye=Math.abs(ge.y-Y.y),Le=Math.abs(ge.x-Y.x)*te;if(ye>Le)return{useVertical:!0}}return(ve===t.WritingMode.vertical?Y.y<ge.y:Y.x>ge.x)?{needsFlipping:!0}:null}function ya(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt,sr,vr,Er){var jr=Y/24,Wr=ve.lineOffsetX*jr,Hr=ve.lineOffsetY*jr,Jr;if(ve.numGlyphs>1){var pn=ve.glyphStartIndex+ve.numGlyphs,Rn=ve.lineStartIndex,Vn=ve.lineStartIndex+ve.lineLength,Jn=Cn(jr,Xe,Wr,Hr,ge,Wt,sr,ve,ft,Le,vr);if(!Jn)return{notEnoughRoom:!0};var ta=Nr(Jn.first.point,Fe).point,qn=Nr(Jn.last.point,Fe).point;if(te&&!ge){var pa=oa(ve.writingMode,ta,qn,Er);if(pa)return pa}Jr=[Jn.first];for(var Aa=ve.glyphStartIndex+1;Aa<pn-1;Aa++)Jr.push(Xa(jr*Xe.getoffsetX(Aa),Wr,Hr,ge,Wt,sr,ve.segment,Rn,Vn,ft,Le,vr));Jr.push(Jn.last)}else{if(te&&!ge){var _a=Nr(sr,ye).point,Ea=ve.lineStartIndex+ve.segment+1,Ra=new t.Point(ft.getx(Ea),ft.gety(Ea)),Ya=Nr(Ra,ye),ui=Ya.signedDistanceFromCamera>0?Ya.point:Oa(sr,Ra,_a,1,ye),Hi=oa(ve.writingMode,_a,ui,Er);if(Hi)return Hi}var di=Xa(jr*Xe.getoffsetX(ve.glyphStartIndex),Wr,Hr,ge,Wt,sr,ve.segment,ve.lineStartIndex,ve.lineStartIndex+ve.lineLength,ft,Le,vr);if(!di)return{notEnoughRoom:!0};Jr=[di]}for(var Si=0,$a=Jr;Si<$a.length;Si+=1){var Gi=$a[Si];t.addDynamicAttributes(Mt,Gi.point,Gi.angle)}return{}}function Oa(ve,Y,ge,te,ye){var Le=Nr(ve.add(ve.sub(Y)._unit()),ye).point,Fe=ge.sub(Le);return ge.add(Fe._mult(te/Fe.mag()))}function Xa(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt,sr){var vr=te?ve-Y:ve+Y,Er=vr>0?1:-1,jr=0;te&&(Er*=-1,jr=Math.PI),Er<0&&(jr+=Math.PI);for(var Wr=Er>0?Xe+Fe:Xe+Fe+1,Hr=ye,Jr=ye,pn=0,Rn=0,Vn=Math.abs(vr),Jn=[];pn+Rn<=Vn;){if(Wr+=Er,Wr<Xe||Wr>=ft)return null;if(Jr=Hr,Jn.push(Hr),Hr=sr[Wr],Hr===void 0){var ta=new t.Point(Mt.getx(Wr),Mt.gety(Wr)),qn=Nr(ta,Wt);if(qn.signedDistanceFromCamera>0)Hr=sr[Wr]=qn.point;else{var pa=Wr-Er,Aa=pn===0?Le:new t.Point(Mt.getx(pa),Mt.gety(pa));Hr=Oa(Aa,ta,Jr,Vn-pn+1,Wt)}}pn+=Rn,Rn=Jr.dist(Hr)}var _a=(Vn-pn)/Rn,Ea=Hr.sub(Jr),Ra=Ea.mult(_a)._add(Jr);Ra._add(Ea._unit()._perp()._mult(ge*Er));var Ya=jr+Math.atan2(Hr.y-Jr.y,Hr.x-Jr.x);return Jn.push(Ra),{point:Ra,angle:Ya,path:Jn}}var za=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pa(ve,Y){for(var ge=0;ge<ve;ge++){var te=Y.length;Y.resize(te+4),Y.float32.set(za,te*3)}}function Ar(ve,Y,ge){var te=Y[0],ye=Y[1];return ve[0]=ge[0]*te+ge[4]*ye+ge[12],ve[1]=ge[1]*te+ge[5]*ye+ge[13],ve[3]=ge[3]*te+ge[7]*ye+ge[15],ve}var nn=100,vn=function(Y,ge,te){ge===void 0&&(ge=new Ct(Y.width+2*nn,Y.height+2*nn,25)),te===void 0&&(te=new Ct(Y.width+2*nn,Y.height+2*nn,25)),this.transform=Y,this.grid=ge,this.ignoredGrid=te,this.pitchfactor=Math.cos(Y._pitch)*Y.cameraToCenterDistance,this.screenRightBoundary=Y.width+nn,this.screenBottomBoundary=Y.height+nn,this.gridRightBoundary=Y.width+2*nn,this.gridBottomBoundary=Y.height+2*nn};vn.prototype.placeCollisionBox=function(Y,ge,te,ye,Le){var Fe=this.projectAndGetPerspectiveRatio(ye,Y.anchorPointX,Y.anchorPointY),Xe=te*Fe.perspectiveRatio,ft=Y.x1*Xe+Fe.point.x,Mt=Y.y1*Xe+Fe.point.y,Wt=Y.x2*Xe+Fe.point.x,sr=Y.y2*Xe+Fe.point.y;return!this.isInsideGrid(ft,Mt,Wt,sr)||!ge&&this.grid.hitTest(ft,Mt,Wt,sr,Le)?{box:[],offscreen:!1}:{box:[ft,Mt,Wt,sr],offscreen:this.isOffscreen(ft,Mt,Wt,sr)}},vn.prototype.placeCollisionCircles=function(Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt,sr,vr,Er){var jr=[],Wr=new t.Point(ge.anchorX,ge.anchorY),Hr=Nr(Wr,Fe),Jr=Tn(this.transform.cameraToCenterDistance,Hr.signedDistanceFromCamera),pn=Wt?Le/Jr:Le*Jr,Rn=pn/t.ONE_EM,Vn=Nr(Wr,Xe).point,Jn={},ta=ge.lineOffsetX*Rn,qn=ge.lineOffsetY*Rn,pa=Cn(Rn,ye,ta,qn,!1,Vn,Wr,ge,te,Xe,Jn),Aa=!1,_a=!1,Ea=!0;if(pa){for(var Ra=vr*.5*Jr+Er,Ya=new t.Point(-nn,-nn),ui=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),Hi=new Rr,di=pa.first,Si=pa.last,$a=[],Gi=di.path.length-1;Gi>=1;Gi--)$a.push(di.path[Gi]);for(var Zi=1;Zi<Si.path.length;Zi++)$a.push(Si.path[Zi]);var eo=Ra*2.5;if(ft){var Ii=$a.map(function(pf){return Nr(pf,ft)});Ii.some(function(pf){return pf.signedDistanceFromCamera<=0})?$a=[]:$a=Ii.map(function(pf){return pf.point})}var fo=[];if($a.length>0){for(var hi=$a[0].clone(),Di=$a[0].clone(),$o=1;$o<$a.length;$o++)hi.x=Math.min(hi.x,$a[$o].x),hi.y=Math.min(hi.y,$a[$o].y),Di.x=Math.max(Di.x,$a[$o].x),Di.y=Math.max(Di.y,$a[$o].y);hi.x>=Ya.x&&Di.x<=ui.x&&hi.y>=Ya.y&&Di.y<=ui.y?fo=[$a]:Di.x<Ya.x||hi.x>ui.x||Di.y<Ya.y||hi.y>ui.y?fo=[]:fo=t.clipLine([$a],Ya.x,Ya.y,ui.x,ui.y)}for(var hs=0,Tu=fo;hs<Tu.length;hs+=1){var Au=Tu[hs];Hi.reset(Au,Ra*.25);var ff=0;Hi.length<=.5*Ra?ff=1:ff=Math.ceil(Hi.paddedLength/eo)+1;for(var cf=0;cf<ff;cf++){var Wf=cf/Math.max(ff-1,1),hf=Hi.lerp(Wf),Sl=hf.x+nn,Tc=hf.y+nn;jr.push(Sl,Tc,Ra,0);var Qs=Sl-Ra,au=Tc-Ra,vf=Sl+Ra,$u=Tc+Ra;if(Ea=Ea&&this.isOffscreen(Qs,au,vf,$u),_a=_a||this.isInsideGrid(Qs,au,vf,$u),!Y&&this.grid.hitTestCircle(Sl,Tc,Ra,sr)&&(Aa=!0,!Mt))return{circles:[],offscreen:!1,collisionDetected:Aa}}}}return{circles:!Mt&&Aa||!_a?[]:jr,offscreen:Ea,collisionDetected:Aa}},vn.prototype.queryRenderedSymbols=function(Y){if(Y.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ge=[],te=1/0,ye=1/0,Le=-1/0,Fe=-1/0,Xe=0,ft=Y;Xe<ft.length;Xe+=1){var Mt=ft[Xe],Wt=new t.Point(Mt.x+nn,Mt.y+nn);te=Math.min(te,Wt.x),ye=Math.min(ye,Wt.y),Le=Math.max(Le,Wt.x),Fe=Math.max(Fe,Wt.y),ge.push(Wt)}for(var sr=this.grid.query(te,ye,Le,Fe).concat(this.ignoredGrid.query(te,ye,Le,Fe)),vr={},Er={},jr=0,Wr=sr;jr<Wr.length;jr+=1){var Hr=Wr[jr],Jr=Hr.key;if(vr[Jr.bucketInstanceId]===void 0&&(vr[Jr.bucketInstanceId]={}),!vr[Jr.bucketInstanceId][Jr.featureIndex]){var pn=[new t.Point(Hr.x1,Hr.y1),new t.Point(Hr.x2,Hr.y1),new t.Point(Hr.x2,Hr.y2),new t.Point(Hr.x1,Hr.y2)];!t.polygonIntersectsPolygon(ge,pn)||(vr[Jr.bucketInstanceId][Jr.featureIndex]=!0,Er[Jr.bucketInstanceId]===void 0&&(Er[Jr.bucketInstanceId]=[]),Er[Jr.bucketInstanceId].push(Jr.featureIndex))}}return Er},vn.prototype.insertCollisionBox=function(Y,ge,te,ye,Le){var Fe=ge?this.ignoredGrid:this.grid,Xe={bucketInstanceId:te,featureIndex:ye,collisionGroupID:Le};Fe.insert(Xe,Y[0],Y[1],Y[2],Y[3])},vn.prototype.insertCollisionCircles=function(Y,ge,te,ye,Le){for(var Fe=ge?this.ignoredGrid:this.grid,Xe={bucketInstanceId:te,featureIndex:ye,collisionGroupID:Le},ft=0;ft<Y.length;ft+=4)Fe.insertCircle(Xe,Y[ft],Y[ft+1],Y[ft+2])},vn.prototype.projectAndGetPerspectiveRatio=function(Y,ge,te){var ye=[ge,te,0,1];Ar(ye,ye,Y);var Le=new t.Point((ye[0]/ye[3]+1)/2*this.transform.width+nn,(-ye[1]/ye[3]+1)/2*this.transform.height+nn);return{point:Le,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ye[3])}},vn.prototype.isOffscreen=function(Y,ge,te,ye){return te<nn||Y>=this.screenRightBoundary||ye<nn||ge>this.screenBottomBoundary},vn.prototype.isInsideGrid=function(Y,ge,te,ye){return te>=0&&Y<this.gridRightBoundary&&ye>=0&&ge<this.gridBottomBoundary},vn.prototype.getViewportMatrix=function(){var Y=t.identity([]);return t.translate(Y,Y,[-nn,-nn,0]),Y};function Mn(ve,Y,ge){return Y*(t.EXTENT/(ve.tileSize*Math.pow(2,ge-ve.tileID.overscaledZ)))}var Gn=function(Y,ge,te,ye){Y?this.opacity=Math.max(0,Math.min(1,Y.opacity+(Y.placed?ge:-ge))):this.opacity=ye&&te?1:0,this.placed=te};Gn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var la=function(Y,ge,te,ye,Le){this.text=new Gn(Y?Y.text:null,ge,te,Le),this.icon=new Gn(Y?Y.icon:null,ge,ye,Le)};la.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var na=function(Y,ge,te){this.text=Y,this.icon=ge,this.skipFade=te},Nn=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},Kn=function(Y,ge,te,ye,Le){this.bucketInstanceId=Y,this.featureIndex=ge,this.sourceLayerIndex=te,this.bucketIndex=ye,this.tileID=Le},Va=function(Y){this.crossSourceCollisions=Y,this.maxGroupID=0,this.collisionGroups={}};Va.prototype.get=function(Y){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Y]){var ge=++this.maxGroupID;this.collisionGroups[Y]={ID:ge,predicate:function(te){return te.collisionGroupID===ge}}}return this.collisionGroups[Y]};function mi(ve,Y,ge,te,ye){var Le=t.getAnchorAlignment(ve),Fe=Le.horizontalAlign,Xe=Le.verticalAlign,ft=-(Fe-.5)*Y,Mt=-(Xe-.5)*ge,Wt=t.evaluateVariableOffset(ve,te);return new t.Point(ft+Wt[0]*ye,Mt+Wt[1]*ye)}function Nt(ve,Y,ge,te,ye,Le){var Fe=ve.x1,Xe=ve.x2,ft=ve.y1,Mt=ve.y2,Wt=ve.anchorPointX,sr=ve.anchorPointY,vr=new t.Point(Y,ge);return te&&vr._rotate(ye?Le:-Le),{x1:Fe+vr.x,y1:ft+vr.y,x2:Xe+vr.x,y2:Mt+vr.y,anchorPointX:Wt,anchorPointY:sr}}var yr=function(Y,ge,te,ye){this.transform=Y.clone(),this.collisionIndex=new vn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ge,this.retainedQueryData={},this.collisionGroups=new Va(te),this.collisionCircleArrays={},this.prevPlacement=ye,ye&&(ye.prevPlacement=void 0),this.placedOrientations={}};yr.prototype.getBucketParts=function(Y,ge,te,ye){var Le=te.getBucket(ge),Fe=te.latestFeatureIndex;if(!(!Le||!Fe||ge.id!==Le.layerIds[0])){var Xe=te.collisionBoxArray,ft=Le.layers[0].layout,Mt=Math.pow(2,this.transform.zoom-te.tileID.overscaledZ),Wt=te.tileSize/t.EXTENT,sr=this.transform.calculatePosMatrix(te.tileID.toUnwrapped()),vr=ft.get("text-pitch-alignment")==="map",Er=ft.get("text-rotation-alignment")==="map",jr=Mn(te,1,this.transform.zoom),Wr=tr(sr,vr,Er,this.transform,jr),Hr=null;if(vr){var Jr=Lr(sr,vr,Er,this.transform,jr);Hr=t.multiply([],this.transform.labelPlaneMatrix,Jr)}this.retainedQueryData[Le.bucketInstanceId]=new Kn(Le.bucketInstanceId,Fe,Le.sourceLayerIndex,Le.index,te.tileID);var pn={bucket:Le,layout:ft,posMatrix:sr,textLabelPlaneMatrix:Wr,labelToScreenMatrix:Hr,scale:Mt,textPixelRatio:Wt,holdingForFade:te.holdingForFade(),collisionBoxArray:Xe,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Le.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Le.sourceID)};if(ye)for(var Rn=0,Vn=Le.sortKeyRanges;Rn<Vn.length;Rn+=1){var Jn=Vn[Rn],ta=Jn.sortKey,qn=Jn.symbolInstanceStart,pa=Jn.symbolInstanceEnd;Y.push({sortKey:ta,symbolInstanceStart:qn,symbolInstanceEnd:pa,parameters:pn})}else Y.push({symbolInstanceStart:0,symbolInstanceEnd:Le.symbolInstances.length,parameters:pn})}},yr.prototype.attemptAnchorPlacement=function(Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt,sr,vr,Er,jr,Wr){var Hr=[vr.textOffset0,vr.textOffset1],Jr=mi(Y,te,ye,Hr,Le),pn=this.collisionIndex.placeCollisionBox(Nt(ge,Jr.x,Jr.y,Fe,Xe,this.transform.angle),sr,ft,Mt,Wt.predicate);if(Wr){var Rn=this.collisionIndex.placeCollisionBox(Nt(Wr,Jr.x,Jr.y,Fe,Xe,this.transform.angle),sr,ft,Mt,Wt.predicate);if(Rn.box.length===0)return}if(pn.box.length>0){var Vn;return this.prevPlacement&&this.prevPlacement.variableOffsets[vr.crossTileID]&&this.prevPlacement.placements[vr.crossTileID]&&this.prevPlacement.placements[vr.crossTileID].text&&(Vn=this.prevPlacement.variableOffsets[vr.crossTileID].anchor),this.variableOffsets[vr.crossTileID]={textOffset:Hr,width:te,height:ye,anchor:Y,textBoxScale:Le,prevAnchor:Vn},this.markUsedJustification(Er,Y,vr,jr),Er.allowVerticalPlacement&&(this.markUsedOrientation(Er,jr,vr),this.placedOrientations[vr.crossTileID]=jr),{shift:Jr,placedGlyphBoxes:pn}}},yr.prototype.placeLayerBucketPart=function(Y,ge,te){var ye=this,Le=Y.parameters,Fe=Le.bucket,Xe=Le.layout,ft=Le.posMatrix,Mt=Le.textLabelPlaneMatrix,Wt=Le.labelToScreenMatrix,sr=Le.textPixelRatio,vr=Le.holdingForFade,Er=Le.collisionBoxArray,jr=Le.partiallyEvaluatedTextSize,Wr=Le.collisionGroup,Hr=Xe.get("text-optional"),Jr=Xe.get("icon-optional"),pn=Xe.get("text-allow-overlap"),Rn=Xe.get("icon-allow-overlap"),Vn=Xe.get("text-rotation-alignment")==="map",Jn=Xe.get("text-pitch-alignment")==="map",ta=Xe.get("icon-text-fit")!=="none",qn=Xe.get("symbol-z-order")==="viewport-y",pa=pn&&(Rn||!Fe.hasIconData()||Jr),Aa=Rn&&(pn||!Fe.hasTextData()||Hr);!Fe.collisionArrays&&Er&&Fe.deserializeCollisionBoxes(Er);var _a=function(di,Si){if(!ge[di.crossTileID]){if(vr){ye.placements[di.crossTileID]=new na(!1,!1,!1);return}var $a=!1,Gi=!1,Zi=!0,eo=null,Ii={box:null,offscreen:null},fo={box:null,offscreen:null},hi=null,Di=null,$o=null,hs=0,Tu=0,Au=0;Si.textFeatureIndex?hs=Si.textFeatureIndex:di.useRuntimeCollisionCircles&&(hs=di.featureIndex),Si.verticalTextFeatureIndex&&(Tu=Si.verticalTextFeatureIndex);var ff=Si.textBox;if(ff){var cf=function(Qo){var Wl=t.WritingMode.horizontal;if(Fe.allowVerticalPlacement&&!Qo&&ye.prevPlacement){var Yl=ye.prevPlacement.placedOrientations[di.crossTileID];Yl&&(ye.placedOrientations[di.crossTileID]=Yl,Wl=Yl,ye.markUsedOrientation(Fe,Wl,di))}return Wl},Wf=function(Qo,Wl){if(Fe.allowVerticalPlacement&&di.numVerticalGlyphVertices>0&&Si.verticalTextBox)for(var Yl=0,ip=Fe.writingModes;Yl<ip.length;Yl+=1){var Cd=ip[Yl];if(Cd===t.WritingMode.vertical?(Ii=Wl(),fo=Ii):Ii=Qo(),Ii&&Ii.box&&Ii.box.length)break}else Ii=Qo()};if(Xe.get("text-variable-anchor")){var Qs=Xe.get("text-variable-anchor");if(ye.prevPlacement&&ye.prevPlacement.variableOffsets[di.crossTileID]){var au=ye.prevPlacement.variableOffsets[di.crossTileID];Qs.indexOf(au.anchor)>0&&(Qs=Qs.filter(function(Qo){return Qo!==au.anchor}),Qs.unshift(au.anchor))}var vf=function(Qo,Wl,Yl){for(var ip=Qo.x2-Qo.x1,Cd=Qo.y2-Qo.y1,a1=di.textBoxScale,i1=ta&&!Rn?Wl:null,sv={box:[],offscreen:!1},o1=pn?Qs.length*2:Qs.length,op=0;op<o1;++op){var s1=Qs[op%Qs.length],l1=op>=Qs.length,Ld=ye.attemptAnchorPlacement(s1,Qo,ip,Cd,a1,Vn,Jn,sr,ft,Wr,l1,di,Fe,Yl,i1);if(Ld&&(sv=Ld.placedGlyphBoxes,sv&&sv.box&&sv.box.length)){$a=!0,eo=Ld.shift;break}}return sv},$u=function(){return vf(ff,Si.iconBox,t.WritingMode.horizontal)},pf=function(){var Qo=Si.verticalTextBox,Wl=Ii&&Ii.box&&Ii.box.length;return Fe.allowVerticalPlacement&&!Wl&&di.numVerticalGlyphVertices>0&&Qo?vf(Qo,Si.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}};Wf($u,pf),Ii&&($a=Ii.box,Zi=Ii.offscreen);var tp=cf(Ii&&Ii.box);if(!$a&&ye.prevPlacement){var Gc=ye.prevPlacement.variableOffsets[di.crossTileID];Gc&&(ye.variableOffsets[di.crossTileID]=Gc,ye.markUsedJustification(Fe,Gc.anchor,di,tp))}}else{var hf=function(Qo,Wl){var Yl=ye.collisionIndex.placeCollisionBox(Qo,pn,sr,ft,Wr.predicate);return Yl&&Yl.box&&Yl.box.length&&(ye.markUsedOrientation(Fe,Wl,di),ye.placedOrientations[di.crossTileID]=Wl),Yl},Sl=function(){return hf(ff,t.WritingMode.horizontal)},Tc=function(){var Qo=Si.verticalTextBox;return Fe.allowVerticalPlacement&&di.numVerticalGlyphVertices>0&&Qo?hf(Qo,t.WritingMode.vertical):{box:null,offscreen:null}};Wf(Sl,Tc),cf(Ii&&Ii.box&&Ii.box.length)}}if(hi=Ii,$a=hi&&hi.box&&hi.box.length>0,Zi=hi&&hi.offscreen,di.useRuntimeCollisionCircles){var Vs=Fe.text.placedSymbolArray.get(di.centerJustifiedTextSymbolIndex),iv=t.evaluateSizeForFeature(Fe.textSizeData,jr,Vs),fl=Xe.get("text-padding"),ov=di.collisionCircleDiameter;Di=ye.collisionIndex.placeCollisionCircles(pn,Vs,Fe.lineVertexArray,Fe.glyphOffsetArray,iv,ft,Mt,Wt,te,Jn,Wr.predicate,ov,fl),$a=pn||Di.circles.length>0&&!Di.collisionDetected,Zi=Zi&&Di.offscreen}if(Si.iconFeatureIndex&&(Au=Si.iconFeatureIndex),Si.iconBox){var rp=function(Qo){var Wl=ta&&eo?Nt(Qo,eo.x,eo.y,Vn,Jn,ye.transform.angle):Qo;return ye.collisionIndex.placeCollisionBox(Wl,Rn,sr,ft,Wr.predicate)};fo&&fo.box&&fo.box.length&&Si.verticalIconBox?($o=rp(Si.verticalIconBox),Gi=$o.box.length>0):($o=rp(Si.iconBox),Gi=$o.box.length>0),Zi=Zi&&$o.offscreen}var np=Hr||di.numHorizontalGlyphVertices===0&&di.numVerticalGlyphVertices===0,mg=Jr||di.numIconVertices===0;if(!np&&!mg?Gi=$a=Gi&&$a:mg?np||(Gi=Gi&&$a):$a=Gi&&$a,$a&&hi&&hi.box&&(fo&&fo.box&&Tu?ye.collisionIndex.insertCollisionBox(hi.box,Xe.get("text-ignore-placement"),Fe.bucketInstanceId,Tu,Wr.ID):ye.collisionIndex.insertCollisionBox(hi.box,Xe.get("text-ignore-placement"),Fe.bucketInstanceId,hs,Wr.ID)),Gi&&$o&&ye.collisionIndex.insertCollisionBox($o.box,Xe.get("icon-ignore-placement"),Fe.bucketInstanceId,Au,Wr.ID),Di&&($a&&ye.collisionIndex.insertCollisionCircles(Di.circles,Xe.get("text-ignore-placement"),Fe.bucketInstanceId,hs,Wr.ID),te)){var ap=Fe.bucketInstanceId,ph=ye.collisionCircleArrays[ap];ph===void 0&&(ph=ye.collisionCircleArrays[ap]=new Nn);for(var dh=0;dh<Di.circles.length;dh+=4)ph.circles.push(Di.circles[dh+0]),ph.circles.push(Di.circles[dh+1]),ph.circles.push(Di.circles[dh+2]),ph.circles.push(Di.collisionDetected?1:0)}ye.placements[di.crossTileID]=new na($a||pa,Gi||Aa,Zi||Fe.justReloaded),ge[di.crossTileID]=!0}};if(qn)for(var Ea=Fe.getSortedSymbolIndexes(this.transform.angle),Ra=Ea.length-1;Ra>=0;--Ra){var Ya=Ea[Ra];_a(Fe.symbolInstances.get(Ya),Fe.collisionArrays[Ya])}else for(var ui=Y.symbolInstanceStart;ui<Y.symbolInstanceEnd;ui++)_a(Fe.symbolInstances.get(ui),Fe.collisionArrays[ui]);if(te&&Fe.bucketInstanceId in this.collisionCircleArrays){var Hi=this.collisionCircleArrays[Fe.bucketInstanceId];t.invert(Hi.invProjMatrix,ft),Hi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Fe.justReloaded=!1},yr.prototype.markUsedJustification=function(Y,ge,te,ye){var Le={left:te.leftJustifiedTextSymbolIndex,center:te.centerJustifiedTextSymbolIndex,right:te.rightJustifiedTextSymbolIndex},Fe;ye===t.WritingMode.vertical?Fe=te.verticalPlacedTextSymbolIndex:Fe=Le[t.getAnchorJustification(ge)];for(var Xe=[te.leftJustifiedTextSymbolIndex,te.centerJustifiedTextSymbolIndex,te.rightJustifiedTextSymbolIndex,te.verticalPlacedTextSymbolIndex],ft=0,Mt=Xe;ft<Mt.length;ft+=1){var Wt=Mt[ft];Wt>=0&&(Fe>=0&&Wt!==Fe?Y.text.placedSymbolArray.get(Wt).crossTileID=0:Y.text.placedSymbolArray.get(Wt).crossTileID=te.crossTileID)}},yr.prototype.markUsedOrientation=function(Y,ge,te){for(var ye=ge===t.WritingMode.horizontal||ge===t.WritingMode.horizontalOnly?ge:0,Le=ge===t.WritingMode.vertical?ge:0,Fe=[te.leftJustifiedTextSymbolIndex,te.centerJustifiedTextSymbolIndex,te.rightJustifiedTextSymbolIndex],Xe=0,ft=Fe;Xe<ft.length;Xe+=1){var Mt=ft[Xe];Y.text.placedSymbolArray.get(Mt).placedOrientation=ye}te.verticalPlacedTextSymbolIndex&&(Y.text.placedSymbolArray.get(te.verticalPlacedTextSymbolIndex).placedOrientation=Le)},yr.prototype.commit=function(Y){this.commitTime=Y,this.zoomAtLastRecencyCheck=this.transform.zoom;var ge=this.prevPlacement,te=!1;this.prevZoomAdjustment=ge?ge.zoomAdjustment(this.transform.zoom):0;var ye=ge?ge.symbolFadeChange(Y):1,Le=ge?ge.opacities:{},Fe=ge?ge.variableOffsets:{},Xe=ge?ge.placedOrientations:{};for(var ft in this.placements){var Mt=this.placements[ft],Wt=Le[ft];Wt?(this.opacities[ft]=new la(Wt,ye,Mt.text,Mt.icon),te=te||Mt.text!==Wt.text.placed||Mt.icon!==Wt.icon.placed):(this.opacities[ft]=new la(null,ye,Mt.text,Mt.icon,Mt.skipFade),te=te||Mt.text||Mt.icon)}for(var sr in Le){var vr=Le[sr];if(!this.opacities[sr]){var Er=new la(vr,ye,!1,!1);Er.isHidden()||(this.opacities[sr]=Er,te=te||vr.text.placed||vr.icon.placed)}}for(var jr in Fe)!this.variableOffsets[jr]&&this.opacities[jr]&&!this.opacities[jr].isHidden()&&(this.variableOffsets[jr]=Fe[jr]);for(var Wr in Xe)!this.placedOrientations[Wr]&&this.opacities[Wr]&&!this.opacities[Wr].isHidden()&&(this.placedOrientations[Wr]=Xe[Wr]);te?this.lastPlacementChangeTime=Y:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ge?ge.lastPlacementChangeTime:Y)},yr.prototype.updateLayerOpacities=function(Y,ge){for(var te={},ye=0,Le=ge;ye<Le.length;ye+=1){var Fe=Le[ye],Xe=Fe.getBucket(Y);Xe&&Fe.latestFeatureIndex&&Y.id===Xe.layerIds[0]&&this.updateBucketOpacities(Xe,te,Fe.collisionBoxArray)}},yr.prototype.updateBucketOpacities=function(Y,ge,te){var ye=this;Y.hasTextData()&&Y.text.opacityVertexArray.clear(),Y.hasIconData()&&Y.icon.opacityVertexArray.clear(),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexArray.clear(),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexArray.clear();var Le=Y.layers[0].layout,Fe=new la(null,0,!1,!1,!0),Xe=Le.get("text-allow-overlap"),ft=Le.get("icon-allow-overlap"),Mt=Le.get("text-variable-anchor"),Wt=Le.get("text-rotation-alignment")==="map",sr=Le.get("text-pitch-alignment")==="map",vr=Le.get("icon-text-fit")!=="none",Er=new la(null,0,Xe&&(ft||!Y.hasIconData()||Le.get("icon-optional")),ft&&(Xe||!Y.hasTextData()||Le.get("text-optional")),!0);!Y.collisionArrays&&te&&(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData())&&Y.deserializeCollisionBoxes(te);for(var jr=function(pn,Rn,Vn){for(var Jn=0;Jn<Rn/4;Jn++)pn.opacityVertexArray.emplaceBack(Vn)},Wr=function(pn){var Rn=Y.symbolInstances.get(pn),Vn=Rn.numHorizontalGlyphVertices,Jn=Rn.numVerticalGlyphVertices,ta=Rn.crossTileID,qn=ge[ta],pa=ye.opacities[ta];qn?pa=Fe:pa||(pa=Er,ye.opacities[ta]=pa),ge[ta]=!0;var Aa=Vn>0||Jn>0,_a=Rn.numIconVertices>0,Ea=ye.placedOrientations[Rn.crossTileID],Ra=Ea===t.WritingMode.vertical,Ya=Ea===t.WritingMode.horizontal||Ea===t.WritingMode.horizontalOnly;if(Aa){var ui=Fr(pa.text),Hi=Ra?bn:ui;jr(Y.text,Vn,Hi);var di=Ya?bn:ui;jr(Y.text,Jn,di);var Si=pa.text.isHidden();[Rn.rightJustifiedTextSymbolIndex,Rn.centerJustifiedTextSymbolIndex,Rn.leftJustifiedTextSymbolIndex].forEach(function(Au){Au>=0&&(Y.text.placedSymbolArray.get(Au).hidden=Si||Ra?1:0)}),Rn.verticalPlacedTextSymbolIndex>=0&&(Y.text.placedSymbolArray.get(Rn.verticalPlacedTextSymbolIndex).hidden=Si||Ya?1:0);var $a=ye.variableOffsets[Rn.crossTileID];$a&&ye.markUsedJustification(Y,$a.anchor,Rn,Ea);var Gi=ye.placedOrientations[Rn.crossTileID];Gi&&(ye.markUsedJustification(Y,"left",Rn,Gi),ye.markUsedOrientation(Y,Gi,Rn))}if(_a){var Zi=Fr(pa.icon),eo=!(vr&&Rn.verticalPlacedIconSymbolIndex&&Ra);if(Rn.placedIconSymbolIndex>=0){var Ii=eo?Zi:bn;jr(Y.icon,Rn.numIconVertices,Ii),Y.icon.placedSymbolArray.get(Rn.placedIconSymbolIndex).hidden=pa.icon.isHidden()}if(Rn.verticalPlacedIconSymbolIndex>=0){var fo=eo?bn:Zi;jr(Y.icon,Rn.numVerticalIconVertices,fo),Y.icon.placedSymbolArray.get(Rn.verticalPlacedIconSymbolIndex).hidden=pa.icon.isHidden()}}if(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData()){var hi=Y.collisionArrays[pn];if(hi){var Di=new t.Point(0,0);if(hi.textBox||hi.verticalTextBox){var $o=!0;if(Mt){var hs=ye.variableOffsets[ta];hs?(Di=mi(hs.anchor,hs.width,hs.height,hs.textOffset,hs.textBoxScale),Wt&&Di._rotate(sr?ye.transform.angle:-ye.transform.angle)):$o=!1}hi.textBox&&fn(Y.textCollisionBox.collisionVertexArray,pa.text.placed,!$o||Ra,Di.x,Di.y),hi.verticalTextBox&&fn(Y.textCollisionBox.collisionVertexArray,pa.text.placed,!$o||Ya,Di.x,Di.y)}var Tu=Boolean(!Ya&&hi.verticalIconBox);hi.iconBox&&fn(Y.iconCollisionBox.collisionVertexArray,pa.icon.placed,Tu,vr?Di.x:0,vr?Di.y:0),hi.verticalIconBox&&fn(Y.iconCollisionBox.collisionVertexArray,pa.icon.placed,!Tu,vr?Di.x:0,vr?Di.y:0)}}},Hr=0;Hr<Y.symbolInstances.length;Hr++)Wr(Hr);if(Y.sortFeatures(this.transform.angle),this.retainedQueryData[Y.bucketInstanceId]&&(this.retainedQueryData[Y.bucketInstanceId].featureSortOrder=Y.featureSortOrder),Y.hasTextData()&&Y.text.opacityVertexBuffer&&Y.text.opacityVertexBuffer.updateData(Y.text.opacityVertexArray),Y.hasIconData()&&Y.icon.opacityVertexBuffer&&Y.icon.opacityVertexBuffer.updateData(Y.icon.opacityVertexArray),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexBuffer&&Y.iconCollisionBox.collisionVertexBuffer.updateData(Y.iconCollisionBox.collisionVertexArray),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexBuffer&&Y.textCollisionBox.collisionVertexBuffer.updateData(Y.textCollisionBox.collisionVertexArray),Y.bucketInstanceId in this.collisionCircleArrays){var Jr=this.collisionCircleArrays[Y.bucketInstanceId];Y.placementInvProjMatrix=Jr.invProjMatrix,Y.placementViewportMatrix=Jr.viewportMatrix,Y.collisionCircleArray=Jr.circles,delete this.collisionCircleArrays[Y.bucketInstanceId]}},yr.prototype.symbolFadeChange=function(Y){return this.fadeDuration===0?1:(Y-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},yr.prototype.zoomAdjustment=function(Y){return Math.max(0,(this.transform.zoom-Y)/1.5)},yr.prototype.hasTransitions=function(Y){return this.stale||Y-this.lastPlacementChangeTime<this.fadeDuration},yr.prototype.stillRecent=function(Y,ge){var te=this.zoomAtLastRecencyCheck===ge?1-this.zoomAdjustment(ge):1;return this.zoomAtLastRecencyCheck=ge,this.commitTime+this.fadeDuration*te>Y},yr.prototype.setStale=function(){this.stale=!0};function fn(ve,Y,ge,te,ye){ve.emplaceBack(Y?1:0,ge?1:0,te||0,ye||0),ve.emplaceBack(Y?1:0,ge?1:0,te||0,ye||0),ve.emplaceBack(Y?1:0,ge?1:0,te||0,ye||0),ve.emplaceBack(Y?1:0,ge?1:0,te||0,ye||0)}var mn=Math.pow(2,25),gn=Math.pow(2,24),Dn=Math.pow(2,17),En=Math.pow(2,16),dn=Math.pow(2,9),br=Math.pow(2,8),xr=Math.pow(2,1);function Fr(ve){if(ve.opacity===0&&!ve.placed)return 0;if(ve.opacity===1&&ve.placed)return 4294967295;var Y=ve.placed?1:0,ge=Math.floor(ve.opacity*127);return ge*mn+Y*gn+ge*Dn+Y*En+ge*dn+Y*br+ge*xr+Y}var bn=0,Hn=function(Y){this._sortAcrossTiles=Y.layout.get("symbol-z-order")!=="viewport-y"&&Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Hn.prototype.continuePlacement=function(Y,ge,te,ye,Le){for(var Fe=this._bucketParts;this._currentTileIndex<Y.length;){var Xe=Y[this._currentTileIndex];if(ge.getBucketParts(Fe,ye,Xe,this._sortAcrossTiles),this._currentTileIndex++,Le())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Fe.sort(function(Mt,Wt){return Mt.sortKey-Wt.sortKey}));this._currentPartIndex<Fe.length;){var ft=Fe[this._currentPartIndex];if(ge.placeLayerBucketPart(ft,this._seenCrossTileIDs,te),this._currentPartIndex++,Le())return!0}return!1};var ra=function(Y,ge,te,ye,Le,Fe,Xe){this.placement=new yr(Y,Le,Fe,Xe),this._currentPlacementIndex=ge.length-1,this._forceFullPlacement=te,this._showCollisionBoxes=ye,this._done=!1};ra.prototype.isDone=function(){return this._done},ra.prototype.continuePlacement=function(Y,ge,te){for(var ye=this,Le=t.browser.now(),Fe=function(){var sr=t.browser.now()-Le;return ye._forceFullPlacement?!1:sr>2};this._currentPlacementIndex>=0;){var Xe=Y[this._currentPlacementIndex],ft=ge[Xe],Mt=this.placement.collisionIndex.transform.zoom;if(ft.type==="symbol"&&(!ft.minzoom||ft.minzoom<=Mt)&&(!ft.maxzoom||ft.maxzoom>Mt)){this._inProgressLayer||(this._inProgressLayer=new Hn(ft));var Wt=this._inProgressLayer.continuePlacement(te[ft.source],this.placement,this._showCollisionBoxes,ft,Fe);if(Wt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ra.prototype.commit=function(Y){return this.placement.commit(Y),this.placement};var Sn=512/t.EXTENT/2,Zn=function(Y,ge,te){this.tileID=Y,this.indexedSymbolInstances={},this.bucketInstanceId=te;for(var ye=0;ye<ge.length;ye++){var Le=ge.get(ye),Fe=Le.key;this.indexedSymbolInstances[Fe]||(this.indexedSymbolInstances[Fe]=[]),this.indexedSymbolInstances[Fe].push({crossTileID:Le.crossTileID,coord:this.getScaledCoordinates(Le,Y)})}};Zn.prototype.getScaledCoordinates=function(Y,ge){var te=ge.canonical.z-this.tileID.canonical.z,ye=Sn/Math.pow(2,te);return{x:Math.floor((ge.canonical.x*t.EXTENT+Y.anchorX)*ye),y:Math.floor((ge.canonical.y*t.EXTENT+Y.anchorY)*ye)}},Zn.prototype.findMatches=function(Y,ge,te){for(var ye=this.tileID.canonical.z<ge.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ge.canonical.z),Le=0;Le<Y.length;Le++){var Fe=Y.get(Le);if(!Fe.crossTileID){var Xe=this.indexedSymbolInstances[Fe.key];if(!!Xe)for(var ft=this.getScaledCoordinates(Fe,ge),Mt=0,Wt=Xe;Mt<Wt.length;Mt+=1){var sr=Wt[Mt];if(Math.abs(sr.coord.x-ft.x)<=ye&&Math.abs(sr.coord.y-ft.y)<=ye&&!te[sr.crossTileID]){te[sr.crossTileID]=!0,Fe.crossTileID=sr.crossTileID;break}}}}};var sa=function(){this.maxCrossTileID=0};sa.prototype.generate=function(){return++this.maxCrossTileID};var ma=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ma.prototype.handleWrapJump=function(Y){var ge=Math.round((Y-this.lng)/360);if(ge!==0)for(var te in this.indexes){var ye=this.indexes[te],Le={};for(var Fe in ye){var Xe=ye[Fe];Xe.tileID=Xe.tileID.unwrapTo(Xe.tileID.wrap+ge),Le[Xe.tileID.key]=Xe}this.indexes[te]=Le}this.lng=Y},ma.prototype.addBucket=function(Y,ge,te){if(this.indexes[Y.overscaledZ]&&this.indexes[Y.overscaledZ][Y.key]){if(this.indexes[Y.overscaledZ][Y.key].bucketInstanceId===ge.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Y.overscaledZ,this.indexes[Y.overscaledZ][Y.key])}for(var ye=0;ye<ge.symbolInstances.length;ye++){var Le=ge.symbolInstances.get(ye);Le.crossTileID=0}this.usedCrossTileIDs[Y.overscaledZ]||(this.usedCrossTileIDs[Y.overscaledZ]={});var Fe=this.usedCrossTileIDs[Y.overscaledZ];for(var Xe in this.indexes){var ft=this.indexes[Xe];if(Number(Xe)>Y.overscaledZ)for(var Mt in ft){var Wt=ft[Mt];Wt.tileID.isChildOf(Y)&&Wt.findMatches(ge.symbolInstances,Y,Fe)}else{var sr=Y.scaledTo(Number(Xe)),vr=ft[sr.key];vr&&vr.findMatches(ge.symbolInstances,Y,Fe)}}for(var Er=0;Er<ge.symbolInstances.length;Er++){var jr=ge.symbolInstances.get(Er);jr.crossTileID||(jr.crossTileID=te.generate(),Fe[jr.crossTileID]=!0)}return this.indexes[Y.overscaledZ]===void 0&&(this.indexes[Y.overscaledZ]={}),this.indexes[Y.overscaledZ][Y.key]=new Zn(Y,ge.symbolInstances,ge.bucketInstanceId),!0},ma.prototype.removeBucketCrossTileIDs=function(Y,ge){for(var te in ge.indexedSymbolInstances)for(var ye=0,Le=ge.indexedSymbolInstances[te];ye<Le.length;ye+=1){var Fe=Le[ye];delete this.usedCrossTileIDs[Y][Fe.crossTileID]}},ma.prototype.removeStaleBuckets=function(Y){var ge=!1;for(var te in this.indexes){var ye=this.indexes[te];for(var Le in ye)Y[ye[Le].bucketInstanceId]||(this.removeBucketCrossTileIDs(te,ye[Le]),delete ye[Le],ge=!0)}return ge};var wa=function(){this.layerIndexes={},this.crossTileIDs=new sa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};wa.prototype.addLayer=function(Y,ge,te){var ye=this.layerIndexes[Y.id];ye===void 0&&(ye=this.layerIndexes[Y.id]=new ma);var Le=!1,Fe={};ye.handleWrapJump(te);for(var Xe=0,ft=ge;Xe<ft.length;Xe+=1){var Mt=ft[Xe],Wt=Mt.getBucket(Y);!Wt||Y.id!==Wt.layerIds[0]||(Wt.bucketInstanceId||(Wt.bucketInstanceId=++this.maxBucketInstanceId),ye.addBucket(Mt.tileID,Wt,this.crossTileIDs)&&(Le=!0),Fe[Wt.bucketInstanceId]=!0)}return ye.removeStaleBuckets(Fe)&&(Le=!0),Le},wa.prototype.pruneUnusedLayers=function(Y){var ge={};Y.forEach(function(ye){ge[ye]=!0});for(var te in this.layerIndexes)ge[te]||delete this.layerIndexes[te]};var ca=function(ve,Y){return t.emitValidationErrors(ve,Y&&Y.filter(function(ge){return ge.identifier!=="source.canvas"}))},ka=t.pick(Tr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Do=t.pick(Tr,["setCenter","setZoom","setBearing","setPitch"]),ls=hn(),Ts=function(ve){function Y(ge,te){var ye=this;te===void 0&&(te={}),ve.call(this),this.map=ge,this.dispatcher=new D(gr(),this),this.imageManager=new A,this.imageManager.setEventedParent(this),this.glyphManager=new M(ge._requestManager,te.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new wa,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Le=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Fe){var Xe={pluginStatus:Fe.pluginStatus,pluginURL:Fe.pluginURL};Le.dispatcher.broadcast("syncRTLPluginState",Xe,function(ft,Mt){if(t.triggerPluginCompletionEvent(ft),Mt){var Wt=Mt.every(function(vr){return vr});if(Wt)for(var sr in Le.sourceCaches)Le.sourceCaches[sr].reload()}})}),this.on("data",function(Fe){if(!(Fe.dataType!=="source"||Fe.sourceDataType!=="metadata")){var Xe=ye.sourceCaches[Fe.sourceId];if(!!Xe){var ft=Xe.getSource();if(!(!ft||!ft.vectorLayerIds))for(var Mt in ye._layers){var Wt=ye._layers[Mt];Wt.source===ft.id&&ye._validateLayer(Wt)}}}})}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.loadURL=function(te,ye){var Le=this;ye===void 0&&(ye={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var Fe=typeof ye.validate=="boolean"?ye.validate:!t.isMapboxURL(te);te=this.map._requestManager.normalizeStyleURL(te,ye.accessToken);var Xe=this.map._requestManager.transformRequest(te,t.ResourceType.Style);this._request=t.getJSON(Xe,function(ft,Mt){Le._request=null,ft?Le.fire(new t.ErrorEvent(ft)):Mt&&Le._load(Mt,Fe)})},Y.prototype.loadJSON=function(te,ye){var Le=this;ye===void 0&&(ye={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Le._request=null,Le._load(te,ye.validate!==!1)})},Y.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(ls,!1)},Y.prototype._load=function(te,ye){if(!(ye&&ca(this,t.validateStyle(te)))){this._loaded=!0,this.stylesheet=te;for(var Le in te.sources)this.addSource(Le,te.sources[Le],{validate:!1});te.sprite?this._loadSprite(te.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(te.glyphs);var Fe=$r(this.stylesheet.layers);this._order=Fe.map(function(Wt){return Wt.id}),this._layers={},this._serializedLayers={};for(var Xe=0,ft=Fe;Xe<ft.length;Xe+=1){var Mt=ft[Xe];Mt=t.createStyleLayer(Mt),Mt.setEventedParent(this,{layer:{id:Mt.id}}),this._layers[Mt.id]=Mt,this._serializedLayers[Mt.id]=Mt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},Y.prototype._loadSprite=function(te){var ye=this;this._spriteRequest=g(te,this.map._requestManager,function(Le,Fe){if(ye._spriteRequest=null,Le)ye.fire(new t.ErrorEvent(Le));else if(Fe)for(var Xe in Fe)ye.imageManager.addImage(Xe,Fe[Xe]);ye.imageManager.setLoaded(!0),ye._availableImages=ye.imageManager.listImages(),ye.dispatcher.broadcast("setImages",ye._availableImages),ye.fire(new t.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(te){var ye=this.sourceCaches[te.source];if(!!ye){var Le=te.sourceLayer;if(!!Le){var Fe=ye.getSource();(Fe.type==="geojson"||Fe.vectorLayerIds&&Fe.vectorLayerIds.indexOf(Le)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Le+'" does not exist on source "'+Fe.id+'" as specified by style layer "'+te.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var te in this.sourceCaches)if(!this.sourceCaches[te].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(te){for(var ye=[],Le=0,Fe=te;Le<Fe.length;Le+=1){var Xe=Fe[Le],ft=this._layers[Xe];ft.type!=="custom"&&ye.push(ft.serialize())}return ye},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var te in this.sourceCaches)if(this.sourceCaches[te].hasTransition())return!0;for(var ye in this._layers)if(this._layers[ye].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(te){if(!!this._loaded){var ye=this._changed;if(this._changed){var Le=Object.keys(this._updatedLayers),Fe=Object.keys(this._removedLayers);(Le.length||Fe.length)&&this._updateWorkerLayers(Le,Fe);for(var Xe in this._updatedSources){var ft=this._updatedSources[Xe];ft==="reload"?this._reloadSource(Xe):ft==="clear"&&this._clearSource(Xe)}this._updateTilesForChangedImages();for(var Mt in this._updatedPaintProps)this._layers[Mt].updateTransitions(te);this.light.updateTransitions(te),this._resetUpdates()}for(var Wt in this.sourceCaches)this.sourceCaches[Wt].used=!1;for(var sr=0,vr=this._order;sr<vr.length;sr+=1){var Er=vr[sr],jr=this._layers[Er];jr.recalculate(te,this._availableImages),!jr.isHidden(te.zoom)&&jr.source&&(this.sourceCaches[jr.source].used=!0)}this.light.recalculate(te),this.z=te.zoom,ye&&this.fire(new t.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var te=Object.keys(this._changedImages);if(te.length){for(var ye in this.sourceCaches)this.sourceCaches[ye].reloadTilesForDependencies(["icons","patterns"],te);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(te,ye){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(te),removedIds:ye})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(te){var ye=this;if(this._checkLoaded(),ca(this,t.validateStyle(te)))return!1;te=t.clone$1(te),te.layers=$r(te.layers);var Le=Gr(this.serialize(),te).filter(function(Xe){return!(Xe.command in Do)});if(Le.length===0)return!1;var Fe=Le.filter(function(Xe){return!(Xe.command in ka)});if(Fe.length>0)throw new Error("Unimplemented: "+Fe.map(function(Xe){return Xe.command}).join(", ")+".");return Le.forEach(function(Xe){Xe.command!=="setTransition"&&ye[Xe.command].apply(ye,Xe.args)}),this.stylesheet=te,!0},Y.prototype.addImage=function(te,ye){if(this.getImage(te))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(te,ye),this._availableImages=this.imageManager.listImages(),this._changedImages[te]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function(te,ye){this.imageManager.updateImage(te,ye)},Y.prototype.getImage=function(te){return this.imageManager.getImage(te)},Y.prototype.removeImage=function(te){if(!this.getImage(te))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(te),this._availableImages=this.imageManager.listImages(),this._changedImages[te]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(te,ye,Le){var Fe=this;if(Le===void 0&&(Le={}),this._checkLoaded(),this.sourceCaches[te]!==void 0)throw new Error("There is already a source with this ID");if(!ye.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ye).join(", ")+".");var Xe=["vector","raster","geojson","video","image"],ft=Xe.indexOf(ye.type)>=0;if(!(ft&&this._validate(t.validateStyle.source,"sources."+te,ye,null,Le))){this.map&&this.map._collectResourceTiming&&(ye.collectResourceTiming=!0);var Mt=this.sourceCaches[te]=new at(te,ye,this.dispatcher);Mt.style=this,Mt.setEventedParent(this,function(){return{isSourceLoaded:Fe.loaded(),source:Mt.serialize(),sourceId:te}}),Mt.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(te){if(this._checkLoaded(),this.sourceCaches[te]===void 0)throw new Error("There is no source with this ID");for(var ye in this._layers)if(this._layers[ye].source===te)return this.fire(new t.ErrorEvent(new Error('Source "'+te+'" cannot be removed while layer "'+ye+'" is using it.')));var Le=this.sourceCaches[te];delete this.sourceCaches[te],delete this._updatedSources[te],Le.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:te})),Le.setEventedParent(null),Le.clearTiles(),Le.onRemove&&Le.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(te,ye){this._checkLoaded();var Le=this.sourceCaches[te].getSource();Le.setData(ye),this._changed=!0},Y.prototype.getSource=function(te){return this.sourceCaches[te]&&this.sourceCaches[te].getSource()},Y.prototype.addLayer=function(te,ye,Le){Le===void 0&&(Le={}),this._checkLoaded();var Fe=te.id;if(this.getLayer(Fe)){this.fire(new t.ErrorEvent(new Error('Layer with id "'+Fe+'" already exists on this map')));return}var Xe;if(te.type==="custom"){if(ca(this,t.validateCustomStyleLayer(te)))return;Xe=t.createStyleLayer(te)}else{if(typeof te.source=="object"&&(this.addSource(Fe,te.source),te=t.clone$1(te),te=t.extend(te,{source:Fe})),this._validate(t.validateStyle.layer,"layers."+Fe,te,{arrayIndex:-1},Le))return;Xe=t.createStyleLayer(te),this._validateLayer(Xe),Xe.setEventedParent(this,{layer:{id:Fe}}),this._serializedLayers[Xe.id]=Xe.serialize()}var ft=ye?this._order.indexOf(ye):this._order.length;if(ye&&ft===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+ye+'" does not exist on this map.')));return}if(this._order.splice(ft,0,Fe),this._layerOrderChanged=!0,this._layers[Fe]=Xe,this._removedLayers[Fe]&&Xe.source&&Xe.type!=="custom"){var Mt=this._removedLayers[Fe];delete this._removedLayers[Fe],Mt.type!==Xe.type?this._updatedSources[Xe.source]="clear":(this._updatedSources[Xe.source]="reload",this.sourceCaches[Xe.source].pause())}this._updateLayer(Xe),Xe.onAdd&&Xe.onAdd(this.map)},Y.prototype.moveLayer=function(te,ye){this._checkLoaded(),this._changed=!0;var Le=this._layers[te];if(!Le){this.fire(new t.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be moved.")));return}if(te!==ye){var Fe=this._order.indexOf(te);this._order.splice(Fe,1);var Xe=ye?this._order.indexOf(ye):this._order.length;if(ye&&Xe===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+ye+'" does not exist on this map.')));return}this._order.splice(Xe,0,te),this._layerOrderChanged=!0}},Y.prototype.removeLayer=function(te){this._checkLoaded();var ye=this._layers[te];if(!ye){this.fire(new t.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be removed.")));return}ye.setEventedParent(null);var Le=this._order.indexOf(te);this._order.splice(Le,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[te]=ye,delete this._layers[te],delete this._serializedLayers[te],delete this._updatedLayers[te],delete this._updatedPaintProps[te],ye.onRemove&&ye.onRemove(this.map)},Y.prototype.getLayer=function(te){return this._layers[te]},Y.prototype.hasLayer=function(te){return te in this._layers},Y.prototype.setLayerZoomRange=function(te,ye,Le){this._checkLoaded();var Fe=this.getLayer(te);if(!Fe){this.fire(new t.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot have zoom extent.")));return}Fe.minzoom===ye&&Fe.maxzoom===Le||(ye!=null&&(Fe.minzoom=ye),Le!=null&&(Fe.maxzoom=Le),this._updateLayer(Fe))},Y.prototype.setFilter=function(te,ye,Le){Le===void 0&&(Le={}),this._checkLoaded();var Fe=this.getLayer(te);if(!Fe){this.fire(new t.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be filtered.")));return}if(!t.deepEqual(Fe.filter,ye)){if(ye==null){Fe.filter=void 0,this._updateLayer(Fe);return}this._validate(t.validateStyle.filter,"layers."+Fe.id+".filter",ye,null,Le)||(Fe.filter=t.clone$1(ye),this._updateLayer(Fe))}},Y.prototype.getFilter=function(te){return t.clone$1(this.getLayer(te).filter)},Y.prototype.setLayoutProperty=function(te,ye,Le,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var Xe=this.getLayer(te);if(!Xe){this.fire(new t.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be styled.")));return}t.deepEqual(Xe.getLayoutProperty(ye),Le)||(Xe.setLayoutProperty(ye,Le,Fe),this._updateLayer(Xe))},Y.prototype.getLayoutProperty=function(te,ye){var Le=this.getLayer(te);if(!Le){this.fire(new t.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style.")));return}return Le.getLayoutProperty(ye)},Y.prototype.setPaintProperty=function(te,ye,Le,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var Xe=this.getLayer(te);if(!Xe){this.fire(new t.ErrorEvent(new Error("The layer '"+te+"' does not exist in the map's style and cannot be styled.")));return}if(!t.deepEqual(Xe.getPaintProperty(ye),Le)){var ft=Xe.setPaintProperty(ye,Le,Fe);ft&&this._updateLayer(Xe),this._changed=!0,this._updatedPaintProps[te]=!0}},Y.prototype.getPaintProperty=function(te,ye){return this.getLayer(te).getPaintProperty(ye)},Y.prototype.setFeatureState=function(te,ye){this._checkLoaded();var Le=te.source,Fe=te.sourceLayer,Xe=this.sourceCaches[Le];if(Xe===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Le+"' does not exist in the map's style.")));return}var ft=Xe.getSource().type;if(ft==="geojson"&&Fe){this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ft==="vector"&&!Fe){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}te.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Xe.setFeatureState(Fe,te.id,ye)},Y.prototype.removeFeatureState=function(te,ye){this._checkLoaded();var Le=te.source,Fe=this.sourceCaches[Le];if(Fe===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Le+"' does not exist in the map's style.")));return}var Xe=Fe.getSource().type,ft=Xe==="vector"?te.sourceLayer:void 0;if(Xe==="vector"&&!ft){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ye&&typeof te.id!="string"&&typeof te.id!="number"){this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Fe.removeFeatureState(ft,te.id,ye)},Y.prototype.getFeatureState=function(te){this._checkLoaded();var ye=te.source,Le=te.sourceLayer,Fe=this.sourceCaches[ye];if(Fe===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+ye+"' does not exist in the map's style.")));return}var Xe=Fe.getSource().type;if(Xe==="vector"&&!Le){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return te.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Fe.getFeatureState(Le,te.id)},Y.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(te){return te.serialize()}),layers:this._serializeLayers(this._order)},function(te){return te!==void 0})},Y.prototype._updateLayer=function(te){this._updatedLayers[te.id]=!0,te.source&&!this._updatedSources[te.source]&&this.sourceCaches[te.source].getSource().type!=="raster"&&(this._updatedSources[te.source]="reload",this.sourceCaches[te.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(te){for(var ye=this,Le=function(Ya){return ye._layers[Ya].type==="fill-extrusion"},Fe={},Xe=[],ft=this._order.length-1;ft>=0;ft--){var Mt=this._order[ft];if(Le(Mt)){Fe[Mt]=ft;for(var Wt=0,sr=te;Wt<sr.length;Wt+=1){var vr=sr[Wt],Er=vr[Mt];if(Er)for(var jr=0,Wr=Er;jr<Wr.length;jr+=1){var Hr=Wr[jr];Xe.push(Hr)}}}}Xe.sort(function(Ya,ui){return ui.intersectionZ-Ya.intersectionZ});for(var Jr=[],pn=this._order.length-1;pn>=0;pn--){var Rn=this._order[pn];if(Le(Rn))for(var Vn=Xe.length-1;Vn>=0;Vn--){var Jn=Xe[Vn].feature;if(Fe[Jn.layer.id]<pn)break;Jr.push(Jn),Xe.pop()}else for(var ta=0,qn=te;ta<qn.length;ta+=1){var pa=qn[ta],Aa=pa[Rn];if(Aa)for(var _a=0,Ea=Aa;_a<Ea.length;_a+=1){var Ra=Ea[_a];Jr.push(Ra.feature)}}}return Jr},Y.prototype.queryRenderedFeatures=function(te,ye,Le){ye&&ye.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",ye.filter,null,ye);var Fe={};if(ye&&ye.layers){if(!Array.isArray(ye.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Xe=0,ft=ye.layers;Xe<ft.length;Xe+=1){var Mt=ft[Xe],Wt=this._layers[Mt];if(!Wt)return this.fire(new t.ErrorEvent(new Error("The layer '"+Mt+"' does not exist in the map's style and cannot be queried for features."))),[];Fe[Wt.source]=!0}}var sr=[];ye.availableImages=this._availableImages;for(var vr in this.sourceCaches)ye.layers&&!Fe[vr]||sr.push(ie(this.sourceCaches[vr],this._layers,this._serializedLayers,te,ye,Le));return this.placement&&sr.push(ne(this._layers,this._serializedLayers,this.sourceCaches,te,ye,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(sr)},Y.prototype.querySourceFeatures=function(te,ye){ye&&ye.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",ye.filter,null,ye);var Le=this.sourceCaches[te];return Le?oe(Le,ye):[]},Y.prototype.addSourceType=function(te,ye,Le){if(Y.getSourceType(te))return Le(new Error('A source type called "'+te+'" already exists.'));if(Y.setSourceType(te,ye),!ye.workerSourceURL)return Le(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:te,url:ye.workerSourceURL},Le)},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(te,ye){ye===void 0&&(ye={}),this._checkLoaded();var Le=this.light.getLight(),Fe=!1;for(var Xe in te)if(!t.deepEqual(te[Xe],Le[Xe])){Fe=!0;break}if(!!Fe){var ft={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(te,ye),this.light.updateTransitions(ft)}},Y.prototype._validate=function(te,ye,Le,Fe,Xe){return Xe===void 0&&(Xe={}),Xe&&Xe.validate===!1?!1:ca(this,te.call(t.validateStyle,t.extend({key:ye,style:this.serialize(),value:Le,styleSpec:t.styleSpec},Fe)))},Y.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var te in this._layers){var ye=this._layers[te];ye.setEventedParent(null)}for(var Le in this.sourceCaches)this.sourceCaches[Le].clearTiles(),this.sourceCaches[Le].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(te){this.sourceCaches[te].clearTiles()},Y.prototype._reloadSource=function(te){this.sourceCaches[te].resume(),this.sourceCaches[te].reload()},Y.prototype._updateSources=function(te){for(var ye in this.sourceCaches)this.sourceCaches[ye].update(te)},Y.prototype._generateCollisionBoxes=function(){for(var te in this.sourceCaches)this._reloadSource(te)},Y.prototype._updatePlacement=function(te,ye,Le,Fe,Xe){Xe===void 0&&(Xe=!1);for(var ft=!1,Mt=!1,Wt={},sr=0,vr=this._order;sr<vr.length;sr+=1){var Er=vr[sr],jr=this._layers[Er];if(jr.type==="symbol"){if(!Wt[jr.source]){var Wr=this.sourceCaches[jr.source];Wt[jr.source]=Wr.getRenderableIds(!0).map(function(ta){return Wr.getTileByID(ta)}).sort(function(ta,qn){return qn.tileID.overscaledZ-ta.tileID.overscaledZ||(ta.tileID.isLessThan(qn.tileID)?-1:1)})}var Hr=this.crossTileSymbolIndex.addLayer(jr,Wt[jr.source],te.center.lng);ft=ft||Hr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Xe=Xe||this._layerOrderChanged||Le===0,(Xe||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),te.zoom))&&(this.pauseablePlacement=new ra(te,this._order,Xe,ye,Le,Fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Wt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),Mt=!0),ft&&this.pauseablePlacement.placement.setStale()),Mt||ft)for(var Jr=0,pn=this._order;Jr<pn.length;Jr+=1){var Rn=pn[Jr],Vn=this._layers[Rn];Vn.type==="symbol"&&this.placement.updateLayerOpacities(Vn,Wt[Vn.source])}var Jn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now());return Jn},Y.prototype._releaseSymbolFadeTiles=function(){for(var te in this.sourceCaches)this.sourceCaches[te].releaseSymbolFadeTiles()},Y.prototype.getImages=function(te,ye,Le){this.imageManager.getImages(ye.icons,Le),this._updateTilesForChangedImages();var Fe=this.sourceCaches[ye.source];Fe&&Fe.setDependencies(ye.tileID.key,ye.type,ye.icons)},Y.prototype.getGlyphs=function(te,ye,Le){this.glyphManager.getGlyphs(ye.stacks,Le)},Y.prototype.getResource=function(te,ye,Le){return t.makeRequest(ye,Le)},Y}(t.Evented);Ts.getSourceType=ee,Ts.setSourceType=q,Ts.registerForPluginStateChange=t.registerForPluginStateChange;var Kl=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),hu=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,tf=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Ai=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ol="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",xl=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,to="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Xo=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vu=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,$s="void main() {gl_FragColor=vec4(1.0);}",$i="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Jl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ho=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Ji=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,Ao="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",vo="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Ps="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",zl="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Cf="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",As="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Lf="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",bl=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,oc=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_l=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,nl=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ru=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,sc=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lc=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Nl=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Du=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,al=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Ql=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nf="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Pf=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fu="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",uc=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bl=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,af=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ou=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ws=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,pu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,of=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,If=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Rf=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zu="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",fc=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Df=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,Ss=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ql=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,eu=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,sf=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Ys=Wi(hu,tf),Ko=Wi(Ai,Ol),Nu=Wi(xl,to),il=Wi(Xo,vu),ol=Wi($s,$i),Eo=Wi(Jl,ho),du=Wi(Ji,Ao),gu=Wi(vo,Ps),Ul=Wi(zl,Cf),Xs=Wi(As,Lf),yu=Wi(bl,Zo),tu=Wi(oc,_l),Bu=Wi(nl,Ru),mu=Wi(sc,lc),Vl=Wi(Nl,Du),cc=Wi(al,rf),Is=Wi(Ql,nf),Uc=Wi(Pf,Fu),lf=Wi(uc,Bl),ru=Wi(af,Ou),xu=Wi(Ws,pu),Hl=Wi(of,If),bu=Wi(Rf,zu),Ff=Wi(fc,Df),Of=Wi(Ss,ql),Vc=Wi(eu,sf);function Wi(ve,Y){var ge=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,te={};return ve=ve.replace(ge,function(ye,Le,Fe,Xe,ft){return te[ft]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
varying `+Fe+" "+Xe+" "+ft+`;
#else
uniform `+Fe+" "+Xe+" u_"+ft+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ft+`
    `+Fe+" "+Xe+" "+ft+" = u_"+ft+`;
#endif
`}),Y=Y.replace(ge,function(ye,Le,Fe,Xe,ft){var Mt=Xe==="float"?"vec2":"vec4",Wt=ft.match(/color/)?"color":Mt;return te[ft]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Fe+" "+Mt+" a_"+ft+`;
varying `+Fe+" "+Xe+" "+ft+`;
#else
uniform `+Fe+" "+Xe+" u_"+ft+`;
#endif
`:Wt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = a_"+ft+`;
#else
    `+Fe+" "+Xe+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = unpack_mix_"+Wt+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Fe+" "+Xe+" "+ft+" = u_"+ft+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Fe+" "+Mt+" a_"+ft+`;
#else
uniform `+Fe+" "+Xe+" u_"+ft+`;
#endif
`:Wt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Fe+" "+Xe+" "+ft+" = a_"+ft+`;
#else
    `+Fe+" "+Xe+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Fe+" "+Xe+" "+ft+" = unpack_mix_"+Wt+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Fe+" "+Xe+" "+ft+" = u_"+ft+`;
#endif
`}),{fragmentSource:ve,vertexSource:Y}}var nu=Object.freeze({__proto__:null,prelude:Ys,background:Ko,backgroundPattern:Nu,circle:il,clippingMask:ol,heatmap:Eo,heatmapTexture:du,collisionBox:gu,collisionCircle:Ul,debug:Xs,fill:yu,fillOutline:tu,fillOutlinePattern:Bu,fillPattern:mu,fillExtrusion:Vl,fillExtrusionPattern:cc,hillshadePrepare:Is,hillshade:Uc,line:lf,lineGradient:ru,linePattern:xu,lineSDF:Hl,raster:bu,symbolIcon:Ff,symbolSDF:Of,symbolTextAndIcon:Vc}),Gl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Gl.prototype.bind=function(Y,ge,te,ye,Le,Fe,Xe,ft){this.context=Y;for(var Mt=this.boundPaintVertexBuffers.length!==ye.length,Wt=0;!Mt&&Wt<ye.length;Wt++)this.boundPaintVertexBuffers[Wt]!==ye[Wt]&&(Mt=!0);var sr=!this.vao||this.boundProgram!==ge||this.boundLayoutVertexBuffer!==te||Mt||this.boundIndexBuffer!==Le||this.boundVertexOffset!==Fe||this.boundDynamicVertexBuffer!==Xe||this.boundDynamicVertexBuffer2!==ft;!Y.extVertexArrayObject||sr?this.freshBind(ge,te,ye,Le,Fe,Xe,ft):(Y.bindVertexArrayOES.set(this.vao),Xe&&Xe.bind(),Le&&Le.dynamicDraw&&Le.bind(),ft&&ft.bind())},Gl.prototype.freshBind=function(Y,ge,te,ye,Le,Fe,Xe){var ft,Mt=Y.numAttributes,Wt=this.context,sr=Wt.gl;if(Wt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Wt.extVertexArrayObject.createVertexArrayOES(),Wt.bindVertexArrayOES.set(this.vao),ft=0,this.boundProgram=Y,this.boundLayoutVertexBuffer=ge,this.boundPaintVertexBuffers=te,this.boundIndexBuffer=ye,this.boundVertexOffset=Le,this.boundDynamicVertexBuffer=Fe,this.boundDynamicVertexBuffer2=Xe;else{ft=Wt.currentNumAttributes||0;for(var vr=Mt;vr<ft;vr++)sr.disableVertexAttribArray(vr)}ge.enableAttributes(sr,Y);for(var Er=0,jr=te;Er<jr.length;Er+=1){var Wr=jr[Er];Wr.enableAttributes(sr,Y)}Fe&&Fe.enableAttributes(sr,Y),Xe&&Xe.enableAttributes(sr,Y),ge.bind(),ge.setVertexAttribPointers(sr,Y,Le);for(var Hr=0,Jr=te;Hr<Jr.length;Hr+=1){var pn=Jr[Hr];pn.bind(),pn.setVertexAttribPointers(sr,Y,Le)}Fe&&(Fe.bind(),Fe.setVertexAttribPointers(sr,Y,Le)),ye&&ye.bind(),Xe&&(Xe.bind(),Xe.setVertexAttribPointers(sr,Y,Le)),Wt.currentNumAttributes=Mt},Gl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ms=function(Y,ge,te,ye,Le){var Fe=Y.gl;this.program=Fe.createProgram();var Xe=te?te.defines():[];Le&&Xe.push("#define OVERDRAW_INSPECTOR;");var ft=Xe.concat(Ys.fragmentSource,ge.fragmentSource).join(`
`),Mt=Xe.concat(Ys.vertexSource,ge.vertexSource).join(`
`),Wt=Fe.createShader(Fe.FRAGMENT_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(Wt,ft),Fe.compileShader(Wt),Fe.attachShader(this.program,Wt);var sr=Fe.createShader(Fe.VERTEX_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(sr,Mt),Fe.compileShader(sr),Fe.attachShader(this.program,sr);for(var vr=te?te.layoutAttributes:[],Er=0;Er<vr.length;Er++)Fe.bindAttribLocation(this.program,Er,vr[Er].name);Fe.linkProgram(this.program),Fe.deleteShader(sr),Fe.deleteShader(Wt),this.numAttributes=Fe.getProgramParameter(this.program,Fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var jr={},Wr=0;Wr<this.numAttributes;Wr++){var Hr=Fe.getActiveAttrib(this.program,Wr);Hr&&(this.attributes[Hr.name]=Fe.getAttribLocation(this.program,Hr.name))}for(var Jr=Fe.getProgramParameter(this.program,Fe.ACTIVE_UNIFORMS),pn=0;pn<Jr;pn++){var Rn=Fe.getActiveUniform(this.program,pn);Rn&&(jr[Rn.name]=Fe.getUniformLocation(this.program,Rn.name))}this.fixedUniforms=ye(Y,jr),this.binderUniforms=te?te.getUniforms(Y,jr):[]};Ms.prototype.draw=function(Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt,sr,vr,Er,jr,Wr,Hr){var Jr,pn=Y.gl;if(!this.failedToCreate){Y.program.set(this.program),Y.setDepthMode(te),Y.setStencilMode(ye),Y.setColorMode(Le),Y.setCullFace(Fe);for(var Rn in this.fixedUniforms)this.fixedUniforms[Rn].set(Xe[Rn]);jr&&jr.setUniforms(Y,this.binderUniforms,vr,{zoom:Er});for(var Vn=(Jr={},Jr[pn.LINES]=2,Jr[pn.TRIANGLES]=3,Jr[pn.LINE_STRIP]=1,Jr)[ge],Jn=0,ta=sr.get();Jn<ta.length;Jn+=1){var qn=ta[Jn],pa=qn.vaos||(qn.vaos={}),Aa=pa[ft]||(pa[ft]=new Gl);Aa.bind(Y,this,Mt,jr?jr.getPaintVertexBuffers():[],Wt,qn.vertexOffset,Wr,Hr),pn.drawElements(ge,qn.primitiveLength*Vn,pn.UNSIGNED_SHORT,qn.primitiveOffset*Vn*2)}}};function Rs(ve,Y,ge){var te=1/Mn(ge,1,Y.transform.tileZoom),ye=Math.pow(2,ge.tileID.overscaledZ),Le=ge.tileSize*Math.pow(2,Y.transform.tileZoom)/ye,Fe=Le*(ge.tileID.canonical.x+ge.tileID.wrap*ye),Xe=Le*ge.tileID.canonical.y;return{u_image:0,u_texsize:ge.imageAtlasTexture.size,u_scale:[te,ve.fromScale,ve.toScale],u_fade:ve.t,u_pixel_coord_upper:[Fe>>16,Xe>>16],u_pixel_coord_lower:[Fe&65535,Xe&65535]}}function _u(ve,Y,ge,te){var ye=ge.imageManager.getPattern(ve.from.toString()),Le=ge.imageManager.getPattern(ve.to.toString()),Fe=ge.imageManager.getPixelSize(),Xe=Fe.width,ft=Fe.height,Mt=Math.pow(2,te.tileID.overscaledZ),Wt=te.tileSize*Math.pow(2,ge.transform.tileZoom)/Mt,sr=Wt*(te.tileID.canonical.x+te.tileID.wrap*Mt),vr=Wt*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ye.tl,u_pattern_br_a:ye.br,u_pattern_tl_b:Le.tl,u_pattern_br_b:Le.br,u_texsize:[Xe,ft],u_mix:Y.t,u_pattern_size_a:ye.displaySize,u_pattern_size_b:Le.displaySize,u_scale_a:Y.fromScale,u_scale_b:Y.toScale,u_tile_units_to_pixels:1/Mn(te,1,ge.transform.tileZoom),u_pixel_coord_upper:[sr>>16,vr>>16],u_pixel_coord_lower:[sr&65535,vr&65535]}}var ko=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_lightpos:new t.Uniform3f(ve,Y.u_lightpos),u_lightintensity:new t.Uniform1f(ve,Y.u_lightintensity),u_lightcolor:new t.Uniform3f(ve,Y.u_lightcolor),u_vertical_gradient:new t.Uniform1f(ve,Y.u_vertical_gradient),u_opacity:new t.Uniform1f(ve,Y.u_opacity)}},zf=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_lightpos:new t.Uniform3f(ve,Y.u_lightpos),u_lightintensity:new t.Uniform1f(ve,Y.u_lightintensity),u_lightcolor:new t.Uniform3f(ve,Y.u_lightcolor),u_vertical_gradient:new t.Uniform1f(ve,Y.u_vertical_gradient),u_height_factor:new t.Uniform1f(ve,Y.u_height_factor),u_image:new t.Uniform1i(ve,Y.u_image),u_texsize:new t.Uniform2f(ve,Y.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,Y.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,Y.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,Y.u_scale),u_fade:new t.Uniform1f(ve,Y.u_fade),u_opacity:new t.Uniform1f(ve,Y.u_opacity)}},Ds=function(ve,Y,ge,te){var ye=Y.style.light,Le=ye.properties.get("position"),Fe=[Le.x,Le.y,Le.z],Xe=t.create$1();ye.properties.get("anchor")==="viewport"&&t.fromRotation(Xe,-Y.transform.angle),t.transformMat3(Fe,Fe,Xe);var ft=ye.properties.get("color");return{u_matrix:ve,u_lightpos:Fe,u_lightintensity:ye.properties.get("intensity"),u_lightcolor:[ft.r,ft.g,ft.b],u_vertical_gradient:+ge,u_opacity:te}},wl=function(ve,Y,ge,te,ye,Le,Fe){return t.extend(Ds(ve,Y,ge,te),Rs(Le,Y,Fe),{u_height_factor:-Math.pow(2,ye.overscaledZ)/Fe.tileSize/8})},Tl=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix)}},sl=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_image:new t.Uniform1i(ve,Y.u_image),u_texsize:new t.Uniform2f(ve,Y.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,Y.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,Y.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,Y.u_scale),u_fade:new t.Uniform1f(ve,Y.u_fade)}},Fs=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_world:new t.Uniform2f(ve,Y.u_world)}},no=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_world:new t.Uniform2f(ve,Y.u_world),u_image:new t.Uniform1i(ve,Y.u_image),u_texsize:new t.Uniform2f(ve,Y.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,Y.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,Y.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,Y.u_scale),u_fade:new t.Uniform1f(ve,Y.u_fade)}},Jo=function(ve){return{u_matrix:ve}},Os=function(ve,Y,ge,te){return t.extend(Jo(ve),Rs(ge,Y,te))},Nf=function(ve,Y){return{u_matrix:ve,u_world:Y}},Uu=function(ve,Y,ge,te,ye){return t.extend(Os(ve,Y,ge,te),{u_world:ye})},Bf=function(ve,Y){return{u_camera_to_center_distance:new t.Uniform1f(ve,Y.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(ve,Y.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(ve,Y.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(ve,Y.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(ve,Y.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix)}},yt=function(ve,Y,ge,te){var ye=ve.transform,Le,Fe;if(te.paint.get("circle-pitch-alignment")==="map"){var Xe=Mn(ge,1,ye.zoom);Le=!0,Fe=[Xe,Xe]}else Le=!1,Fe=ye.pixelsToGLUnits;return{u_camera_to_center_distance:ye.cameraToCenterDistance,u_scale_with_map:+(te.paint.get("circle-pitch-scale")==="map"),u_matrix:ve.translatePosMatrix(Y.posMatrix,ge,te.paint.get("circle-translate"),te.paint.get("circle-translate-anchor")),u_pitch_with_map:+Le,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Fe}},Ft=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_camera_to_center_distance:new t.Uniform1f(ve,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(ve,Y.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(ve,Y.u_extrude_scale),u_overscale_factor:new t.Uniform1f(ve,Y.u_overscale_factor)}},fr=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_inv_matrix:new t.UniformMatrix4f(ve,Y.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(ve,Y.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(ve,Y.u_viewport_size)}},ir=function(ve,Y,ge){var te=Mn(ge,1,Y.zoom),ye=Math.pow(2,Y.zoom-ge.tileID.overscaledZ),Le=ge.tileID.overscaleFactor();return{u_matrix:ve,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:te,u_extrude_scale:[Y.pixelsToGLUnits[0]/(te*ye),Y.pixelsToGLUnits[1]/(te*ye)],u_overscale_factor:Le}},Ir=function(ve,Y,ge){return{u_matrix:ve,u_inv_matrix:Y,u_camera_to_center_distance:ge.cameraToCenterDistance,u_viewport_size:[ge.width,ge.height]}},an=function(ve,Y){return{u_color:new t.UniformColor(ve,Y.u_color),u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_overlay:new t.Uniform1i(ve,Y.u_overlay),u_overlay_scale:new t.Uniform1f(ve,Y.u_overlay_scale)}},xn=function(ve,Y,ge){return ge===void 0&&(ge=1),{u_matrix:ve,u_color:Y,u_overlay:0,u_overlay_scale:ge}},Ln=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix)}},Fn=function(ve){return{u_matrix:ve}},jn=function(ve,Y){return{u_extrude_scale:new t.Uniform1f(ve,Y.u_extrude_scale),u_intensity:new t.Uniform1f(ve,Y.u_intensity),u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix)}},_n=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_world:new t.Uniform2f(ve,Y.u_world),u_image:new t.Uniform1i(ve,Y.u_image),u_color_ramp:new t.Uniform1i(ve,Y.u_color_ramp),u_opacity:new t.Uniform1f(ve,Y.u_opacity)}},Un=function(ve,Y,ge,te){return{u_matrix:ve,u_extrude_scale:Mn(Y,1,ge),u_intensity:te}},On=function(ve,Y,ge,te){var ye=t.create();t.ortho(ye,0,ve.width,ve.height,0,0,1);var Le=ve.context.gl;return{u_matrix:ye,u_world:[Le.drawingBufferWidth,Le.drawingBufferHeight],u_image:ge,u_color_ramp:te,u_opacity:Y.paint.get("heatmap-opacity")}},Wn=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_image:new t.Uniform1i(ve,Y.u_image),u_latrange:new t.Uniform2f(ve,Y.u_latrange),u_light:new t.Uniform2f(ve,Y.u_light),u_shadow:new t.UniformColor(ve,Y.u_shadow),u_highlight:new t.UniformColor(ve,Y.u_highlight),u_accent:new t.UniformColor(ve,Y.u_accent)}},ea=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_image:new t.Uniform1i(ve,Y.u_image),u_dimension:new t.Uniform2f(ve,Y.u_dimension),u_zoom:new t.Uniform1f(ve,Y.u_zoom),u_maxzoom:new t.Uniform1f(ve,Y.u_maxzoom),u_unpack:new t.Uniform4f(ve,Y.u_unpack)}},Ha=function(ve,Y,ge){var te=ge.paint.get("hillshade-shadow-color"),ye=ge.paint.get("hillshade-highlight-color"),Le=ge.paint.get("hillshade-accent-color"),Fe=ge.paint.get("hillshade-illumination-direction")*(Math.PI/180);ge.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=ve.transform.angle);var Xe=!ve.options.moving;return{u_matrix:ve.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),Xe),u_image:0,u_latrange:Ga(ve,Y.tileID),u_light:[ge.paint.get("hillshade-exaggeration"),Fe],u_shadow:te,u_highlight:ye,u_accent:Le}},Ia=function(ve,Y,ge){var te=Y.stride,ye=t.create();return t.ortho(ye,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(ye,ye,[0,-t.EXTENT,0]),{u_matrix:ye,u_image:1,u_dimension:[te,te],u_zoom:ve.overscaledZ,u_maxzoom:ge,u_unpack:Y.getUnpackVector()}};function Ga(ve,Y){var ge=Math.pow(2,Y.canonical.z),te=Y.canonical.y;return[new t.MercatorCoordinate(0,te/ge).toLngLat().lat,new t.MercatorCoordinate(0,(te+1)/ge).toLngLat().lat]}var ja=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_ratio:new t.Uniform1f(ve,Y.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,Y.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,Y.u_units_to_pixels)}},Qn=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_ratio:new t.Uniform1f(ve,Y.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,Y.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,Y.u_units_to_pixels),u_image:new t.Uniform1i(ve,Y.u_image)}},da=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_texsize:new t.Uniform2f(ve,Y.u_texsize),u_ratio:new t.Uniform1f(ve,Y.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,Y.u_device_pixel_ratio),u_image:new t.Uniform1i(ve,Y.u_image),u_units_to_pixels:new t.Uniform2f(ve,Y.u_units_to_pixels),u_scale:new t.Uniform3f(ve,Y.u_scale),u_fade:new t.Uniform1f(ve,Y.u_fade)}},Za=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_ratio:new t.Uniform1f(ve,Y.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,Y.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,Y.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(ve,Y.u_patternscale_a),u_patternscale_b:new t.Uniform2f(ve,Y.u_patternscale_b),u_sdfgamma:new t.Uniform1f(ve,Y.u_sdfgamma),u_image:new t.Uniform1i(ve,Y.u_image),u_tex_y_a:new t.Uniform1f(ve,Y.u_tex_y_a),u_tex_y_b:new t.Uniform1f(ve,Y.u_tex_y_b),u_mix:new t.Uniform1f(ve,Y.u_mix)}},ni=function(ve,Y,ge){var te=ve.transform;return{u_matrix:vi(ve,Y,ge),u_ratio:1/Mn(Y,1,te.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/te.pixelsToGLUnits[0],1/te.pixelsToGLUnits[1]]}},Mi=function(ve,Y,ge){return t.extend(ni(ve,Y,ge),{u_image:0})},Ei=function(ve,Y,ge,te){var ye=ve.transform,Le=Oi(Y,ye);return{u_matrix:vi(ve,Y,ge),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/Mn(Y,1,ye.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Le,te.fromScale,te.toScale],u_fade:te.t,u_units_to_pixels:[1/ye.pixelsToGLUnits[0],1/ye.pixelsToGLUnits[1]]}},Ci=function(ve,Y,ge,te,ye){var Le=ve.transform,Fe=ve.lineAtlas,Xe=Oi(Y,Le),ft=ge.layout.get("line-cap")==="round",Mt=Fe.getDash(te.from,ft),Wt=Fe.getDash(te.to,ft),sr=Mt.width*ye.fromScale,vr=Wt.width*ye.toScale;return t.extend(ni(ve,Y,ge),{u_patternscale_a:[Xe/sr,-Mt.height/2],u_patternscale_b:[Xe/vr,-Wt.height/2],u_sdfgamma:Fe.width/(Math.min(sr,vr)*256*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Mt.y,u_tex_y_b:Wt.y,u_mix:ye.t})};function Oi(ve,Y){return 1/Mn(ve,1,Y.tileZoom)}function vi(ve,Y,ge){return ve.translatePosMatrix(Y.tileID.posMatrix,Y,ge.paint.get("line-translate"),ge.paint.get("line-translate-anchor"))}var Uo=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_tl_parent:new t.Uniform2f(ve,Y.u_tl_parent),u_scale_parent:new t.Uniform1f(ve,Y.u_scale_parent),u_buffer_scale:new t.Uniform1f(ve,Y.u_buffer_scale),u_fade_t:new t.Uniform1f(ve,Y.u_fade_t),u_opacity:new t.Uniform1f(ve,Y.u_opacity),u_image0:new t.Uniform1i(ve,Y.u_image0),u_image1:new t.Uniform1i(ve,Y.u_image1),u_brightness_low:new t.Uniform1f(ve,Y.u_brightness_low),u_brightness_high:new t.Uniform1f(ve,Y.u_brightness_high),u_saturation_factor:new t.Uniform1f(ve,Y.u_saturation_factor),u_contrast_factor:new t.Uniform1f(ve,Y.u_contrast_factor),u_spin_weights:new t.Uniform3f(ve,Y.u_spin_weights)}},xo=function(ve,Y,ge,te,ye){return{u_matrix:ve,u_tl_parent:Y,u_scale_parent:ge,u_buffer_scale:1,u_fade_t:te.mix,u_opacity:te.opacity*ye.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ye.paint.get("raster-brightness-min"),u_brightness_high:ye.paint.get("raster-brightness-max"),u_saturation_factor:Li(ye.paint.get("raster-saturation")),u_contrast_factor:ga(ye.paint.get("raster-contrast")),u_spin_weights:ri(ye.paint.get("raster-hue-rotate"))}};function ri(ve){ve*=Math.PI/180;var Y=Math.sin(ve),ge=Math.cos(ve);return[(2*ge+1)/3,(-Math.sqrt(3)*Y-ge+1)/3,(Math.sqrt(3)*Y-ge+1)/3]}function ga(ve){return ve>0?1/(1-ve):1+ve}function Li(ve){return ve>0?1-1/(1.001-ve):-ve}var Co=function(ve,Y){return{u_is_size_zoom_constant:new t.Uniform1i(ve,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,Y.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,Y.u_size_t),u_size:new t.Uniform1f(ve,Y.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,Y.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,Y.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,Y.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,Y.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,Y.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,Y.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,Y.u_coord_matrix),u_is_text:new t.Uniform1i(ve,Y.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,Y.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,Y.u_texsize),u_texture:new t.Uniform1i(ve,Y.u_texture)}},Fo=function(ve,Y){return{u_is_size_zoom_constant:new t.Uniform1i(ve,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,Y.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,Y.u_size_t),u_size:new t.Uniform1f(ve,Y.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,Y.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,Y.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,Y.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,Y.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,Y.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,Y.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,Y.u_coord_matrix),u_is_text:new t.Uniform1i(ve,Y.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,Y.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,Y.u_texsize),u_texture:new t.Uniform1i(ve,Y.u_texture),u_gamma_scale:new t.Uniform1f(ve,Y.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(ve,Y.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(ve,Y.u_is_halo)}},zs=function(ve,Y){return{u_is_size_zoom_constant:new t.Uniform1i(ve,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,Y.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,Y.u_size_t),u_size:new t.Uniform1f(ve,Y.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,Y.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,Y.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,Y.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,Y.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,Y.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,Y.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,Y.u_coord_matrix),u_is_text:new t.Uniform1i(ve,Y.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,Y.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,Y.u_texsize),u_texsize_icon:new t.Uniform2f(ve,Y.u_texsize_icon),u_texture:new t.Uniform1i(ve,Y.u_texture),u_texture_icon:new t.Uniform1i(ve,Y.u_texture_icon),u_gamma_scale:new t.Uniform1f(ve,Y.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(ve,Y.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(ve,Y.u_is_halo)}},ll=function(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt){var Wt=ye.transform;return{u_is_size_zoom_constant:+(ve==="constant"||ve==="source"),u_is_size_feature_constant:+(ve==="constant"||ve==="camera"),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:Wt.cameraToCenterDistance,u_pitch:Wt.pitch/360*2*Math.PI,u_rotate_symbol:+ge,u_aspect_ratio:Wt.width/Wt.height,u_fade_change:ye.options.fadeDuration?ye.symbolFadeChange:1,u_matrix:Le,u_label_plane_matrix:Fe,u_coord_matrix:Xe,u_is_text:+ft,u_pitch_with_map:+te,u_texsize:Mt,u_texture:0}},us=function(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt){var sr=ye.transform;return t.extend(ll(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt),{u_gamma_scale:te?Math.cos(sr._pitch)*sr.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Wt})},jl=function(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt){return t.extend(us(ve,Y,ge,te,ye,Le,Fe,Xe,!0,ft,!0),{u_texsize_icon:Mt,u_texture_icon:1})},Zs=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_opacity:new t.Uniform1f(ve,Y.u_opacity),u_color:new t.UniformColor(ve,Y.u_color)}},Ns=function(ve,Y){return{u_matrix:new t.UniformMatrix4f(ve,Y.u_matrix),u_opacity:new t.Uniform1f(ve,Y.u_opacity),u_image:new t.Uniform1i(ve,Y.u_image),u_pattern_tl_a:new t.Uniform2f(ve,Y.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(ve,Y.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(ve,Y.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(ve,Y.u_pattern_br_b),u_texsize:new t.Uniform2f(ve,Y.u_texsize),u_mix:new t.Uniform1f(ve,Y.u_mix),u_pattern_size_a:new t.Uniform2f(ve,Y.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(ve,Y.u_pattern_size_b),u_scale_a:new t.Uniform1f(ve,Y.u_scale_a),u_scale_b:new t.Uniform1f(ve,Y.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(ve,Y.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(ve,Y.u_tile_units_to_pixels)}},Vo=function(ve,Y,ge){return{u_matrix:ve,u_opacity:Y,u_color:ge}},Vu=function(ve,Y,ge,te,ye,Le){return t.extend(_u(te,Le,ge,ye),{u_matrix:ve,u_opacity:Y})},uf={fillExtrusion:ko,fillExtrusionPattern:zf,fill:Tl,fillPattern:sl,fillOutline:Fs,fillOutlinePattern:no,circle:Bf,collisionBox:Ft,collisionCircle:fr,debug:an,clippingMask:Ln,heatmap:jn,heatmapTexture:_n,hillshade:Wn,hillshadePrepare:ea,line:ja,lineGradient:Qn,linePattern:da,lineSDF:Za,raster:Uo,symbolIcon:Co,symbolSDF:Fo,symbolTextAndIcon:zs,background:Zs,backgroundPattern:Ns},Bs;function Uf(ve,Y,ge,te,ye,Le,Fe){for(var Xe=ve.context,ft=Xe.gl,Mt=ve.useProgram("collisionBox"),Wt=[],sr=0,vr=0,Er=0;Er<te.length;Er++){var jr=te[Er],Wr=Y.getTile(jr),Hr=Wr.getBucket(ge);if(!!Hr){var Jr=jr.posMatrix;(ye[0]!==0||ye[1]!==0)&&(Jr=ve.translatePosMatrix(jr.posMatrix,Wr,ye,Le));var pn=Fe?Hr.textCollisionBox:Hr.iconCollisionBox,Rn=Hr.collisionCircleArray;if(Rn.length>0){var Vn=t.create(),Jn=Jr;t.mul(Vn,Hr.placementInvProjMatrix,ve.transform.glCoordMatrix),t.mul(Vn,Vn,Hr.placementViewportMatrix),Wt.push({circleArray:Rn,circleOffset:vr,transform:Jn,invTransform:Vn}),sr+=Rn.length/4,vr=sr}!pn||Mt.draw(Xe,ft.LINES,Qr.disabled,Zt.disabled,ve.colorModeForRenderPass(),Ye.disabled,ir(Jr,ve.transform,Wr),ge.id,pn.layoutVertexBuffer,pn.indexBuffer,pn.segments,null,ve.transform.zoom,null,null,pn.collisionVertexBuffer)}}if(!(!Fe||!Wt.length)){var ta=ve.useProgram("collisionCircle"),qn=new t.StructArrayLayout2f1f2i16;qn.resize(sr*4),qn._trim();for(var pa=0,Aa=0,_a=Wt;Aa<_a.length;Aa+=1)for(var Ea=_a[Aa],Ra=0;Ra<Ea.circleArray.length/4;Ra++){var Ya=Ra*4,ui=Ea.circleArray[Ya+0],Hi=Ea.circleArray[Ya+1],di=Ea.circleArray[Ya+2],Si=Ea.circleArray[Ya+3];qn.emplace(pa++,ui,Hi,di,Si,0),qn.emplace(pa++,ui,Hi,di,Si,1),qn.emplace(pa++,ui,Hi,di,Si,2),qn.emplace(pa++,ui,Hi,di,Si,3)}(!Bs||Bs.length<sr*2)&&(Bs=Hu(sr));for(var $a=Xe.createIndexBuffer(Bs,!0),Gi=Xe.createVertexBuffer(qn,t.collisionCircleLayout.members,!0),Zi=0,eo=Wt;Zi<eo.length;Zi+=1){var Ii=eo[Zi],fo=Ir(Ii.transform,Ii.invTransform,ve.transform);ta.draw(Xe,ft.TRIANGLES,Qr.disabled,Zt.disabled,ve.colorModeForRenderPass(),Ye.disabled,fo,ge.id,Gi,$a,t.SegmentVector.simpleSegment(0,Ii.circleOffset*2,Ii.circleArray.length,Ii.circleArray.length/2),null,ve.transform.zoom,null,null,null)}Gi.destroy(),$a.destroy()}}function Hu(ve){var Y=ve*2,ge=new t.StructArrayLayout3ui6;ge.resize(Y),ge._trim();for(var te=0;te<Y;te++){var ye=te*6;ge.uint16[ye+0]=te*4+0,ge.uint16[ye+1]=te*4+1,ge.uint16[ye+2]=te*4+2,ge.uint16[ye+3]=te*4+2,ge.uint16[ye+4]=te*4+3,ge.uint16[ye+5]=te*4+0}return ge}var ev=t.identity(new Float32Array(16));function hc(ve,Y,ge,te,ye){if(ve.renderPass==="translucent"){var Le=Zt.disabled,Fe=ve.colorModeForRenderPass(),Xe=ge.layout.get("text-variable-anchor");Xe&&vc(te,ve,ge,Y,ge.layout.get("text-rotation-alignment"),ge.layout.get("text-pitch-alignment"),ye),ge.paint.get("icon-opacity").constantOr(1)!==0&&pc(ve,Y,ge,te,!1,ge.paint.get("icon-translate"),ge.paint.get("icon-translate-anchor"),ge.layout.get("icon-rotation-alignment"),ge.layout.get("icon-pitch-alignment"),ge.layout.get("icon-keep-upright"),Le,Fe),ge.paint.get("text-opacity").constantOr(1)!==0&&pc(ve,Y,ge,te,!0,ge.paint.get("text-translate"),ge.paint.get("text-translate-anchor"),ge.layout.get("text-rotation-alignment"),ge.layout.get("text-pitch-alignment"),ge.layout.get("text-keep-upright"),Le,Fe),Y.map.showCollisionBoxes&&(Uf(ve,Y,ge,te,ge.paint.get("text-translate"),ge.paint.get("text-translate-anchor"),!0),Uf(ve,Y,ge,te,ge.paint.get("icon-translate"),ge.paint.get("icon-translate-anchor"),!1))}}function Vf(ve,Y,ge,te,ye,Le){var Fe=t.getAnchorAlignment(ve),Xe=Fe.horizontalAlign,ft=Fe.verticalAlign,Mt=-(Xe-.5)*Y,Wt=-(ft-.5)*ge,sr=t.evaluateVariableOffset(ve,te);return new t.Point((Mt/ye+sr[0])*Le,(Wt/ye+sr[1])*Le)}function vc(ve,Y,ge,te,ye,Le,Fe){for(var Xe=Y.transform,ft=ye==="map",Mt=Le==="map",Wt=0,sr=ve;Wt<sr.length;Wt+=1){var vr=sr[Wt],Er=te.getTile(vr),jr=Er.getBucket(ge);if(!(!jr||!jr.text||!jr.text.segments.get().length)){var Wr=jr.textSizeData,Hr=t.evaluateSizeForZoom(Wr,Xe.zoom),Jr=Mn(Er,1,Y.transform.zoom),pn=tr(vr.posMatrix,Mt,ft,Y.transform,Jr),Rn=ge.layout.get("icon-text-fit")!=="none"&&jr.hasIconData();if(Hr){var Vn=Math.pow(2,Xe.zoom-Er.tileID.overscaledZ);ul(jr,ft,Mt,Fe,t.symbolSize,Xe,pn,vr.posMatrix,Vn,Hr,Rn)}}}}function ul(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt){var sr=ve.text.placedSymbolArray,vr=ve.text.dynamicLayoutVertexArray,Er=ve.icon.dynamicLayoutVertexArray,jr={};vr.clear();for(var Wr=0;Wr<sr.length;Wr++){var Hr=sr.get(Wr),Jr=ve.allowVerticalPlacement&&!Hr.placedOrientation,pn=!Hr.hidden&&Hr.crossTileID&&!Jr?te[Hr.crossTileID]:null;if(!pn)Pa(Hr.numGlyphs,vr);else{var Rn=new t.Point(Hr.anchorX,Hr.anchorY),Vn=Nr(Rn,ge?Xe:Fe),Jn=Tn(Le.cameraToCenterDistance,Vn.signedDistanceFromCamera),ta=ye.evaluateSizeForFeature(ve.textSizeData,Mt,Hr)*Jn/t.ONE_EM;ge&&(ta*=ve.tilePixelRatio/ft);for(var qn=pn.width,pa=pn.height,Aa=pn.anchor,_a=pn.textOffset,Ea=pn.textBoxScale,Ra=Vf(Aa,qn,pa,_a,Ea,ta),Ya=ge?Nr(Rn.add(Ra),Fe).point:Vn.point.add(Y?Ra.rotate(-Le.angle):Ra),ui=ve.allowVerticalPlacement&&Hr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Hi=0;Hi<Hr.numGlyphs;Hi++)t.addDynamicAttributes(vr,Ya,ui);Wt&&Hr.associatedIconIndex>=0&&(jr[Hr.associatedIconIndex]={shiftedAnchor:Ya,angle:ui})}}if(Wt){Er.clear();for(var di=ve.icon.placedSymbolArray,Si=0;Si<di.length;Si++){var $a=di.get(Si);if($a.hidden)Pa($a.numGlyphs,Er);else{var Gi=jr[Si];if(!Gi)Pa($a.numGlyphs,Er);else for(var Zi=0;Zi<$a.numGlyphs;Zi++)t.addDynamicAttributes(Er,Gi.shiftedAnchor,Gi.angle)}}ve.icon.dynamicLayoutVertexBuffer.updateData(Er)}ve.text.dynamicLayoutVertexBuffer.updateData(vr)}function Hc(ve,Y,ge){return ge.iconsInText&&Y?"symbolTextAndIcon":ve?"symbolSDF":"symbolIcon"}function pc(ve,Y,ge,te,ye,Le,Fe,Xe,ft,Mt,Wt,sr){for(var vr=ve.context,Er=vr.gl,jr=ve.transform,Wr=Xe==="map",Hr=ft==="map",Jr=Wr&&ge.layout.get("symbol-placement")!=="point",pn=Wr&&!Hr&&!Jr,Rn=ge.layout.get("symbol-sort-key").constantOr(1)!==void 0,Vn=ve.depthModeForSublayer(0,Qr.ReadOnly),Jn=ge.layout.get("text-variable-anchor"),ta=[],qn=0,pa=te;qn<pa.length;qn+=1){var Aa=pa[qn],_a=Y.getTile(Aa),Ea=_a.getBucket(ge);if(!!Ea){var Ra=ye?Ea.text:Ea.icon;if(!(!Ra||!Ra.segments.get().length)){var Ya=Ra.programConfigurations.get(ge.id),ui=ye||Ea.sdfIcons,Hi=ye?Ea.textSizeData:Ea.iconSizeData,di=Hr||jr.pitch!==0,Si=ve.useProgram(Hc(ui,ye,Ea),Ya),$a=t.evaluateSizeForZoom(Hi,jr.zoom),Gi=void 0,Zi=[0,0],eo=void 0,Ii=void 0,fo=null,hi=void 0;if(ye){if(eo=_a.glyphAtlasTexture,Ii=Er.LINEAR,Gi=_a.glyphAtlasTexture.size,Ea.iconsInText){Zi=_a.imageAtlasTexture.size,fo=_a.imageAtlasTexture;var Di=Hi.kind==="composite"||Hi.kind==="camera";hi=di||ve.options.rotating||ve.options.zooming||Di?Er.LINEAR:Er.NEAREST}}else{var $o=ge.layout.get("icon-size").constantOr(0)!==1||Ea.iconsNeedLinear;eo=_a.imageAtlasTexture,Ii=ui||ve.options.rotating||ve.options.zooming||$o||di?Er.LINEAR:Er.NEAREST,Gi=_a.imageAtlasTexture.size}var hs=Mn(_a,1,ve.transform.zoom),Tu=tr(Aa.posMatrix,Hr,Wr,ve.transform,hs),Au=Lr(Aa.posMatrix,Hr,Wr,ve.transform,hs),ff=Jn&&Ea.hasTextData(),cf=ge.layout.get("icon-text-fit")!=="none"&&ff&&Ea.hasIconData();Jr&&kn(Ea,Aa.posMatrix,ve,ye,Tu,Au,Hr,Mt);var Wf=ve.translatePosMatrix(Aa.posMatrix,_a,Le,Fe),hf=Jr||ye&&Jn||cf?ev:Tu,Sl=ve.translatePosMatrix(Au,_a,Le,Fe,!0),Tc=ui&&ge.paint.get(ye?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Qs=void 0;ui?Ea.iconsInText?Qs=jl(Hi.kind,$a,pn,Hr,ve,Wf,hf,Sl,Gi,Zi):Qs=us(Hi.kind,$a,pn,Hr,ve,Wf,hf,Sl,ye,Gi,!0):Qs=ll(Hi.kind,$a,pn,Hr,ve,Wf,hf,Sl,ye,Gi);var au={program:Si,buffers:Ra,uniformValues:Qs,atlasTexture:eo,atlasTextureIcon:fo,atlasInterpolation:Ii,atlasInterpolationIcon:hi,isSDF:ui,hasHalo:Tc};if(Rn)for(var vf=Ra.segments.get(),$u=0,pf=vf;$u<pf.length;$u+=1){var tp=pf[$u];ta.push({segments:new t.SegmentVector([tp]),sortKey:tp.sortKey,state:au})}else ta.push({segments:Ra.segments,sortKey:0,state:au})}}}Rn&&ta.sort(function(rp,np){return rp.sortKey-np.sortKey});for(var Gc=0,Vs=ta;Gc<Vs.length;Gc+=1){var iv=Vs[Gc],fl=iv.state;if(vr.activeTexture.set(Er.TEXTURE0),fl.atlasTexture.bind(fl.atlasInterpolation,Er.CLAMP_TO_EDGE),fl.atlasTextureIcon&&(vr.activeTexture.set(Er.TEXTURE1),fl.atlasTextureIcon&&fl.atlasTextureIcon.bind(fl.atlasInterpolationIcon,Er.CLAMP_TO_EDGE)),fl.isSDF){var ov=fl.uniformValues;fl.hasHalo&&(ov.u_is_halo=1,dc(fl.buffers,iv.segments,ge,ve,fl.program,Vn,Wt,sr,ov)),ov.u_is_halo=0}dc(fl.buffers,iv.segments,ge,ve,fl.program,Vn,Wt,sr,fl.uniformValues)}}function dc(ve,Y,ge,te,ye,Le,Fe,Xe,ft){var Mt=te.context,Wt=Mt.gl;ye.draw(Mt,Wt.TRIANGLES,Le,Fe,Xe,Ye.disabled,ft,ge.id,ve.layoutVertexBuffer,ve.indexBuffer,Y,ge.paint,te.transform.zoom,ve.programConfigurations.get(ge.id),ve.dynamicLayoutVertexBuffer,ve.opacityVertexBuffer)}function fs(ve,Y,ge,te){if(ve.renderPass==="translucent"){var ye=ge.paint.get("circle-opacity"),Le=ge.paint.get("circle-stroke-width"),Fe=ge.paint.get("circle-stroke-opacity"),Xe=ge.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ye.constantOr(1)===0&&(Le.constantOr(1)===0||Fe.constantOr(1)===0))){for(var ft=ve.context,Mt=ft.gl,Wt=ve.depthModeForSublayer(0,Qr.ReadOnly),sr=Zt.disabled,vr=ve.colorModeForRenderPass(),Er=[],jr=0;jr<te.length;jr++){var Wr=te[jr],Hr=Y.getTile(Wr),Jr=Hr.getBucket(ge);if(!!Jr){var pn=Jr.programConfigurations.get(ge.id),Rn=ve.useProgram("circle",pn),Vn=Jr.layoutVertexBuffer,Jn=Jr.indexBuffer,ta=yt(ve,Wr,Hr,ge),qn={programConfiguration:pn,program:Rn,layoutVertexBuffer:Vn,indexBuffer:Jn,uniformValues:ta};if(Xe)for(var pa=Jr.segments.get(),Aa=0,_a=pa;Aa<_a.length;Aa+=1){var Ea=_a[Aa];Er.push({segments:new t.SegmentVector([Ea]),sortKey:Ea.sortKey,state:qn})}else Er.push({segments:Jr.segments,sortKey:0,state:qn})}}Xe&&Er.sort(function(Ii,fo){return Ii.sortKey-fo.sortKey});for(var Ra=0,Ya=Er;Ra<Ya.length;Ra+=1){var ui=Ya[Ra],Hi=ui.state,di=Hi.programConfiguration,Si=Hi.program,$a=Hi.layoutVertexBuffer,Gi=Hi.indexBuffer,Zi=Hi.uniformValues,eo=ui.segments;Si.draw(ft,Mt.TRIANGLES,Wt,sr,vr,Ye.disabled,Zi,ge.id,$a,Gi,eo,ge.paint,ve.transform.zoom,di)}}}}function gc(ve,Y,ge,te){if(ge.paint.get("heatmap-opacity")!==0)if(ve.renderPass==="offscreen"){var ye=ve.context,Le=ye.gl,Fe=Zt.disabled,Xe=new Te([Le.ONE,Le.ONE],t.Color.transparent,[!0,!0,!0,!0]);lh(ye,ve,ge),ye.clear({color:t.Color.transparent});for(var ft=0;ft<te.length;ft++){var Mt=te[ft];if(!Y.hasRenderableParent(Mt)){var Wt=Y.getTile(Mt),sr=Wt.getBucket(ge);if(!!sr){var vr=sr.programConfigurations.get(ge.id),Er=ve.useProgram("heatmap",vr),jr=ve.transform,Wr=jr.zoom;Er.draw(ye,Le.TRIANGLES,Qr.disabled,Fe,Xe,Ye.disabled,Un(Mt.posMatrix,Wt,Wr,ge.paint.get("heatmap-intensity")),ge.id,sr.layoutVertexBuffer,sr.indexBuffer,sr.segments,ge.paint,ve.transform.zoom,vr)}}}ye.viewport.set([0,0,ve.width,ve.height])}else ve.renderPass==="translucent"&&(ve.context.setColorMode(ve.colorModeForRenderPass()),Hf(ve,ge))}function lh(ve,Y,ge){var te=ve.gl;ve.activeTexture.set(te.TEXTURE1),ve.viewport.set([0,0,Y.width/4,Y.height/4]);var ye=ge.heatmapFbo;if(ye)te.bindTexture(te.TEXTURE_2D,ye.colorAttachment.get()),ve.bindFramebuffer.set(ye.framebuffer);else{var Le=te.createTexture();te.bindTexture(te.TEXTURE_2D,Le),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MAG_FILTER,te.LINEAR),ye=ge.heatmapFbo=ve.createFramebuffer(Y.width/4,Y.height/4,!1),Ks(ve,Y,Le,ye)}}function Ks(ve,Y,ge,te){var ye=ve.gl,Le=ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:ye.UNSIGNED_BYTE;ye.texImage2D(ye.TEXTURE_2D,0,ye.RGBA,Y.width/4,Y.height/4,0,ye.RGBA,Le,null),te.colorAttachment.set(ge)}function Hf(ve,Y){var ge=ve.context,te=ge.gl,ye=Y.heatmapFbo;if(!!ye){ge.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,ye.colorAttachment.get()),ge.activeTexture.set(te.TEXTURE1);var Le=Y.colorRampTexture;Le||(Le=Y.colorRampTexture=new t.Texture(ge,Y.colorRamp,te.RGBA)),Le.bind(te.LINEAR,te.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(ge,te.TRIANGLES,Qr.disabled,Zt.disabled,ve.colorModeForRenderPass(),Ye.disabled,On(ve,Y,0,1),Y.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,Y.paint,ve.transform.zoom)}}function Gf(ve,Y,ge,te){if(ve.renderPass==="translucent"){var ye=ge.paint.get("line-opacity"),Le=ge.paint.get("line-width");if(!(ye.constantOr(1)===0||Le.constantOr(1)===0)){var Fe=ve.depthModeForSublayer(0,Qr.ReadOnly),Xe=ve.colorModeForRenderPass(),ft=ge.paint.get("line-dasharray"),Mt=ge.paint.get("line-pattern"),Wt=Mt.constantOr(1),sr=ge.paint.get("line-gradient"),vr=ge.getCrossfadeParameters(),Er=Wt?"linePattern":ft?"lineSDF":sr?"lineGradient":"line",jr=ve.context,Wr=jr.gl,Hr=!0;if(sr){jr.activeTexture.set(Wr.TEXTURE0);var Jr=ge.gradientTexture;if(!ge.gradient)return;Jr||(Jr=ge.gradientTexture=new t.Texture(jr,ge.gradient,Wr.RGBA)),Jr.bind(Wr.LINEAR,Wr.CLAMP_TO_EDGE)}for(var pn=0,Rn=te;pn<Rn.length;pn+=1){var Vn=Rn[pn],Jn=Y.getTile(Vn);if(!(Wt&&!Jn.patternsLoaded())){var ta=Jn.getBucket(ge);if(!!ta){var qn=ta.programConfigurations.get(ge.id),pa=ve.context.program.get(),Aa=ve.useProgram(Er,qn),_a=Hr||Aa.program!==pa,Ea=Mt.constantOr(null);if(Ea&&Jn.imageAtlas){var Ra=Jn.imageAtlas,Ya=Ra.patternPositions[Ea.to.toString()],ui=Ra.patternPositions[Ea.from.toString()];Ya&&ui&&qn.setConstantPatternPositions(Ya,ui)}var Hi=Wt?Ei(ve,Jn,ge,vr):ft?Ci(ve,Jn,ge,ft,vr):sr?Mi(ve,Jn,ge):ni(ve,Jn,ge);Wt?(jr.activeTexture.set(Wr.TEXTURE0),Jn.imageAtlasTexture.bind(Wr.LINEAR,Wr.CLAMP_TO_EDGE),qn.updatePaintBuffers(vr)):ft&&(_a||ve.lineAtlas.dirty)&&(jr.activeTexture.set(Wr.TEXTURE0),ve.lineAtlas.bind(jr)),Aa.draw(jr,Wr.TRIANGLES,Fe,ve.stencilModeForClipping(Vn),Xe,Ye.disabled,Hi,ge.id,ta.layoutVertexBuffer,ta.indexBuffer,ta.segments,ge.paint,ve.transform.zoom,qn),Hr=!1}}}}}}function yc(ve,Y,ge,te){var ye=ge.paint.get("fill-color"),Le=ge.paint.get("fill-opacity");if(Le.constantOr(1)!==0){var Fe=ve.colorModeForRenderPass(),Xe=ge.paint.get("fill-pattern"),ft=ve.opaquePassEnabledForLayer()&&!Xe.constantOr(1)&&ye.constantOr(t.Color.transparent).a===1&&Le.constantOr(0)===1?"opaque":"translucent";if(ve.renderPass===ft){var Mt=ve.depthModeForSublayer(1,ve.renderPass==="opaque"?Qr.ReadWrite:Qr.ReadOnly);Ne(ve,Y,ge,te,Mt,Fe,!1)}if(ve.renderPass==="translucent"&&ge.paint.get("fill-antialias")){var Wt=ve.depthModeForSublayer(ge.getPaintProperty("fill-outline-color")?2:0,Qr.ReadOnly);Ne(ve,Y,ge,te,Wt,Fe,!0)}}}function Ne(ve,Y,ge,te,ye,Le,Fe){var Xe=ve.context.gl,ft=ge.paint.get("fill-pattern"),Mt=ft&&ft.constantOr(1),Wt=ge.getCrossfadeParameters(),sr,vr,Er,jr,Wr;Fe?(vr=Mt&&!ge.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",sr=Xe.LINES):(vr=Mt?"fillPattern":"fill",sr=Xe.TRIANGLES);for(var Hr=0,Jr=te;Hr<Jr.length;Hr+=1){var pn=Jr[Hr],Rn=Y.getTile(pn);if(!(Mt&&!Rn.patternsLoaded())){var Vn=Rn.getBucket(ge);if(!!Vn){var Jn=Vn.programConfigurations.get(ge.id),ta=ve.useProgram(vr,Jn);Mt&&(ve.context.activeTexture.set(Xe.TEXTURE0),Rn.imageAtlasTexture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE),Jn.updatePaintBuffers(Wt));var qn=ft.constantOr(null);if(qn&&Rn.imageAtlas){var pa=Rn.imageAtlas,Aa=pa.patternPositions[qn.to.toString()],_a=pa.patternPositions[qn.from.toString()];Aa&&_a&&Jn.setConstantPatternPositions(Aa,_a)}var Ea=ve.translatePosMatrix(pn.posMatrix,Rn,ge.paint.get("fill-translate"),ge.paint.get("fill-translate-anchor"));if(!Fe)jr=Vn.indexBuffer,Wr=Vn.segments,Er=Mt?Os(Ea,ve,Wt,Rn):Jo(Ea);else{jr=Vn.indexBuffer2,Wr=Vn.segments2;var Ra=[Xe.drawingBufferWidth,Xe.drawingBufferHeight];Er=vr==="fillOutlinePattern"&&Mt?Uu(Ea,ve,Wt,Rn,Ra):Nf(Ea,Ra)}ta.draw(ve.context,sr,ye,ve.stencilModeForClipping(pn),Le,Ye.disabled,Er,ge.id,Vn.layoutVertexBuffer,jr,Wr,ge.paint,ve.transform.zoom,Jn)}}}}function $e(ve,Y,ge,te){var ye=ge.paint.get("fill-extrusion-opacity");if(ye!==0&&ve.renderPass==="translucent"){var Le=new Qr(ve.context.gl.LEQUAL,Qr.ReadWrite,ve.depthRangeFor3D);if(ye===1&&!ge.paint.get("fill-extrusion-pattern").constantOr(1)){var Fe=ve.colorModeForRenderPass();rt(ve,Y,ge,te,Le,Zt.disabled,Fe)}else rt(ve,Y,ge,te,Le,Zt.disabled,Te.disabled),rt(ve,Y,ge,te,Le,ve.stencilModeFor3D(),ve.colorModeForRenderPass())}}function rt(ve,Y,ge,te,ye,Le,Fe){for(var Xe=ve.context,ft=Xe.gl,Mt=ge.paint.get("fill-extrusion-pattern"),Wt=Mt.constantOr(1),sr=ge.getCrossfadeParameters(),vr=ge.paint.get("fill-extrusion-opacity"),Er=0,jr=te;Er<jr.length;Er+=1){var Wr=jr[Er],Hr=Y.getTile(Wr),Jr=Hr.getBucket(ge);if(!!Jr){var pn=Jr.programConfigurations.get(ge.id),Rn=ve.useProgram(Wt?"fillExtrusionPattern":"fillExtrusion",pn);Wt&&(ve.context.activeTexture.set(ft.TEXTURE0),Hr.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),pn.updatePaintBuffers(sr));var Vn=Mt.constantOr(null);if(Vn&&Hr.imageAtlas){var Jn=Hr.imageAtlas,ta=Jn.patternPositions[Vn.to.toString()],qn=Jn.patternPositions[Vn.from.toString()];ta&&qn&&pn.setConstantPatternPositions(ta,qn)}var pa=ve.translatePosMatrix(Wr.posMatrix,Hr,ge.paint.get("fill-extrusion-translate"),ge.paint.get("fill-extrusion-translate-anchor")),Aa=ge.paint.get("fill-extrusion-vertical-gradient"),_a=Wt?wl(pa,ve,Aa,vr,Wr,sr,Hr):Ds(pa,ve,Aa,vr);Rn.draw(Xe,Xe.gl.TRIANGLES,ye,Le,Fe,Ye.backCCW,_a,ge.id,Jr.layoutVertexBuffer,Jr.indexBuffer,Jr.segments,ge.paint,ve.transform.zoom,pn)}}}function lt(ve,Y,ge,te){if(!(ve.renderPass!=="offscreen"&&ve.renderPass!=="translucent")){for(var ye=ve.context,Le=Y.getSource().maxzoom,Fe=ve.depthModeForSublayer(0,Qr.ReadOnly),Xe=ve.colorModeForRenderPass(),ft=ve.renderPass==="translucent"?ve.stencilConfigForOverlap(te):[{},te],Mt=ft[0],Wt=ft[1],sr=0,vr=Wt;sr<vr.length;sr+=1){var Er=vr[sr],jr=Y.getTile(Er);jr.needsHillshadePrepare&&ve.renderPass==="offscreen"?mt(ve,jr,ge,Le,Fe,Zt.disabled,Xe):ve.renderPass==="translucent"&&bt(ve,jr,ge,Fe,Mt[Er.overscaledZ],Xe)}ye.viewport.set([0,0,ve.width,ve.height])}}function bt(ve,Y,ge,te,ye,Le){var Fe=ve.context,Xe=Fe.gl,ft=Y.fbo;if(!!ft){var Mt=ve.useProgram("hillshade");Fe.activeTexture.set(Xe.TEXTURE0),Xe.bindTexture(Xe.TEXTURE_2D,ft.colorAttachment.get());var Wt=Ha(ve,Y,ge);Mt.draw(Fe,Xe.TRIANGLES,te,ye,Le,Ye.disabled,Wt,ge.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function mt(ve,Y,ge,te,ye,Le,Fe){var Xe=ve.context,ft=Xe.gl,Mt=Y.dem;if(Mt&&Mt.data){var Wt=Mt.dim,sr=Mt.stride,vr=Mt.getPixels();if(Xe.activeTexture.set(ft.TEXTURE1),Xe.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||ve.getTileTexture(sr),Y.demTexture){var Er=Y.demTexture;Er.update(vr,{premultiply:!1}),Er.bind(ft.NEAREST,ft.CLAMP_TO_EDGE)}else Y.demTexture=new t.Texture(Xe,vr,ft.RGBA,{premultiply:!1}),Y.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE);Xe.activeTexture.set(ft.TEXTURE0);var jr=Y.fbo;if(!jr){var Wr=new t.Texture(Xe,{width:Wt,height:Wt,data:null},ft.RGBA);Wr.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),jr=Y.fbo=Xe.createFramebuffer(Wt,Wt,!0),jr.colorAttachment.set(Wr.texture)}Xe.bindFramebuffer.set(jr.framebuffer),Xe.viewport.set([0,0,Wt,Wt]),ve.useProgram("hillshadePrepare").draw(Xe,ft.TRIANGLES,ye,Le,Fe,Ye.disabled,Ia(Y.tileID,Mt,te),ge.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function At(ve,Y,ge,te){if(ve.renderPass==="translucent"&&ge.paint.get("raster-opacity")!==0&&!!te.length)for(var ye=ve.context,Le=ye.gl,Fe=Y.getSource(),Xe=ve.useProgram("raster"),ft=ve.colorModeForRenderPass(),Mt=Fe instanceof K?[{},te]:ve.stencilConfigForOverlap(te),Wt=Mt[0],sr=Mt[1],vr=sr[sr.length-1].overscaledZ,Er=!ve.options.moving,jr=0,Wr=sr;jr<Wr.length;jr+=1){var Hr=Wr[jr],Jr=ve.depthModeForSublayer(Hr.overscaledZ-vr,ge.paint.get("raster-opacity")===1?Qr.ReadWrite:Qr.ReadOnly,Le.LESS),pn=Y.getTile(Hr),Rn=ve.transform.calculatePosMatrix(Hr.toUnwrapped(),Er);pn.registerFadeDuration(ge.paint.get("raster-fade-duration"));var Vn=Y.findLoadedParent(Hr,0),Jn=lr(pn,Vn,Y,ge,ve.transform),ta=void 0,qn=void 0,pa=ge.paint.get("raster-resampling")==="nearest"?Le.NEAREST:Le.LINEAR;ye.activeTexture.set(Le.TEXTURE0),pn.texture.bind(pa,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),ye.activeTexture.set(Le.TEXTURE1),Vn?(Vn.texture.bind(pa,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),ta=Math.pow(2,Vn.tileID.overscaledZ-pn.tileID.overscaledZ),qn=[pn.tileID.canonical.x*ta%1,pn.tileID.canonical.y*ta%1]):pn.texture.bind(pa,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST);var Aa=xo(Rn,qn||[0,0],ta||1,Jn,ge);Fe instanceof K?Xe.draw(ye,Le.TRIANGLES,Jr,Zt.disabled,ft,Ye.disabled,Aa,ge.id,Fe.boundsBuffer,ve.quadTriangleIndexBuffer,Fe.boundsSegments):Xe.draw(ye,Le.TRIANGLES,Jr,Wt[Hr.overscaledZ],ft,Ye.disabled,Aa,ge.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function lr(ve,Y,ge,te,ye){var Le=te.paint.get("raster-fade-duration");if(Le>0){var Fe=t.browser.now(),Xe=(Fe-ve.timeAdded)/Le,ft=Y?(Fe-Y.timeAdded)/Le:-1,Mt=ge.getSource(),Wt=ye.coveringZoomLevel({tileSize:Mt.tileSize,roundZoom:Mt.roundZoom}),sr=!Y||Math.abs(Y.tileID.overscaledZ-Wt)>Math.abs(ve.tileID.overscaledZ-Wt),vr=sr&&ve.refreshedUponExpiration?1:t.clamp(sr?Xe:1-ft,0,1);return ve.refreshedUponExpiration&&Xe>=1&&(ve.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-vr}:{opacity:vr,mix:0}}else return{opacity:1,mix:0}}function pr(ve,Y,ge){var te=ge.paint.get("background-color"),ye=ge.paint.get("background-opacity");if(ye!==0){var Le=ve.context,Fe=Le.gl,Xe=ve.transform,ft=Xe.tileSize,Mt=ge.paint.get("background-pattern");if(!ve.isPatternMissing(Mt)){var Wt=!Mt&&te.a===1&&ye===1&&ve.opaquePassEnabledForLayer()?"opaque":"translucent";if(ve.renderPass===Wt){var sr=Zt.disabled,vr=ve.depthModeForSublayer(0,Wt==="opaque"?Qr.ReadWrite:Qr.ReadOnly),Er=ve.colorModeForRenderPass(),jr=ve.useProgram(Mt?"backgroundPattern":"background"),Wr=Xe.coveringTiles({tileSize:ft});Mt&&(Le.activeTexture.set(Fe.TEXTURE0),ve.imageManager.bind(ve.context));for(var Hr=ge.getCrossfadeParameters(),Jr=0,pn=Wr;Jr<pn.length;Jr+=1){var Rn=pn[Jr],Vn=ve.transform.calculatePosMatrix(Rn.toUnwrapped()),Jn=Mt?Vu(Vn,ye,ve,Mt,{tileID:Rn,tileSize:ft},Hr):Vo(Vn,ye,te);jr.draw(Le,Fe.TRIANGLES,vr,sr,Er,Ye.disabled,Jn,ge.id,ve.tileExtentBuffer,ve.quadTriangleIndexBuffer,ve.tileExtentSegments)}}}}}var or=new t.Color(1,0,0,1),mr=new t.Color(0,1,0,1),Pr=new t.Color(0,0,1,1),Yr=new t.Color(1,0,1,1),tn=new t.Color(0,1,1,1);function An(ve){var Y=ve.transform.padding,ge=3;Xn(ve,ve.transform.height-(Y.top||0),ge,or),Xn(ve,Y.bottom||0,ge,mr),xa(ve,Y.left||0,ge,Pr),xa(ve,ve.transform.width-(Y.right||0),ge,Yr);var te=ve.transform.centerPoint;zn(ve,te.x,ve.transform.height-te.y,tn)}function zn(ve,Y,ge,te){var ye=20,Le=2;Ta(ve,Y-Le/2,ge-ye/2,Le,ye,te),Ta(ve,Y-ye/2,ge-Le/2,ye,Le,te)}function Xn(ve,Y,ge,te){Ta(ve,0,Y+ge/2,ve.transform.width,ge,te)}function xa(ve,Y,ge,te){Ta(ve,Y-ge/2,0,ge,ve.transform.height,te)}function Ta(ve,Y,ge,te,ye,Le){var Fe=ve.context,Xe=Fe.gl;Xe.enable(Xe.SCISSOR_TEST),Xe.scissor(Y*t.browser.devicePixelRatio,ge*t.browser.devicePixelRatio,te*t.browser.devicePixelRatio,ye*t.browser.devicePixelRatio),Fe.clear({color:Le}),Xe.disable(Xe.SCISSOR_TEST)}function qa(ve,Y,ge){for(var te=0;te<ge.length;te++)Ka(ve,Y,ge[te])}function Ka(ve,Y,ge){var te=ve.context,ye=te.gl,Le=ge.posMatrix,Fe=ve.useProgram("debug"),Xe=Qr.disabled,ft=Zt.disabled,Mt=ve.colorModeForRenderPass(),Wt="$debug";te.activeTexture.set(ye.TEXTURE0),ve.emptyTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Fe.draw(te,ye.LINE_STRIP,Xe,ft,Mt,Ye.disabled,xn(Le,t.Color.red),Wt,ve.debugBuffer,ve.tileBorderIndexBuffer,ve.debugSegments);var sr=Y.getTileByID(ge.key).latestRawTileData,vr=sr&&sr.byteLength||0,Er=Math.floor(vr/1024),jr=Y.getTile(ge).tileSize,Wr=512/Math.min(jr,512)*(ge.overscaledZ/ve.transform.zoom)*.5,Hr=ge.canonical.toString();ge.overscaledZ!==ge.canonical.z&&(Hr+=" => "+ge.overscaledZ);var Jr=Hr+" "+Er+"kb";oi(ve,Jr),Fe.draw(te,ye.TRIANGLES,Xe,ft,Te.alphaBlended,Ye.disabled,xn(Le,t.Color.transparent,Wr),Wt,ve.debugBuffer,ve.quadTriangleIndexBuffer,ve.debugSegments)}function oi(ve,Y){ve.initDebugOverlayCanvas();var ge=ve.debugOverlayCanvas,te=ve.context.gl,ye=ve.debugOverlayCanvas.getContext("2d");ye.clearRect(0,0,ge.width,ge.height),ye.shadowColor="white",ye.shadowBlur=2,ye.lineWidth=1.5,ye.strokeStyle="white",ye.textBaseline="top",ye.font="bold "+36+"px Open Sans, sans-serif",ye.fillText(Y,5,5),ye.strokeText(Y,5,5),ve.debugOverlayTexture.update(ge),ve.debugOverlayTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE)}function xi(ve,Y,ge){var te=ve.context,ye=ge.implementation;if(ve.renderPass==="offscreen"){var Le=ye.prerender;Le&&(ve.setCustomLayerDefaults(),te.setColorMode(ve.colorModeForRenderPass()),Le.call(ye,te.gl,ve.transform.customLayerMatrix()),te.setDirty(),ve.setBaseState())}else if(ve.renderPass==="translucent"){ve.setCustomLayerDefaults(),te.setColorMode(ve.colorModeForRenderPass()),te.setStencilMode(Zt.disabled);var Fe=ye.renderingMode==="3d"?new Qr(ve.context.gl.LEQUAL,Qr.ReadWrite,ve.depthRangeFor3D):ve.depthModeForSublayer(0,Qr.ReadOnly);te.setDepthMode(Fe),ye.render(te.gl,ve.transform.customLayerMatrix()),te.setDirty(),ve.setBaseState(),te.bindFramebuffer.set(null)}}var So={symbol:hc,circle:fs,heatmap:gc,line:Gf,fill:yc,"fill-extrusion":$e,hillshade:lt,raster:At,background:pr,debug:qa,custom:xi},li=function(Y,ge){this.context=new qe(Y),this.transform=ge,this._tileTextures={},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wa,this.gpuTimers={}};li.prototype.resize=function(Y,ge){if(this.width=Y*t.browser.devicePixelRatio,this.height=ge*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var te=0,ye=this.style._order;te<ye.length;te+=1){var Le=ye[te];this.style._layers[Le].resize()}},li.prototype.setup=function(){var Y=this.context,ge=new t.StructArrayLayout2i4;ge.emplaceBack(0,0),ge.emplaceBack(t.EXTENT,0),ge.emplaceBack(0,t.EXTENT),ge.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=Y.createVertexBuffer(ge,Kl.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var te=new t.StructArrayLayout2i4;te.emplaceBack(0,0),te.emplaceBack(t.EXTENT,0),te.emplaceBack(0,t.EXTENT),te.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=Y.createVertexBuffer(te,Kl.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var ye=new t.StructArrayLayout4i8;ye.emplaceBack(0,0,0,0),ye.emplaceBack(t.EXTENT,0,t.EXTENT,0),ye.emplaceBack(0,t.EXTENT,0,t.EXTENT),ye.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=Y.createVertexBuffer(ye,Z.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Le=new t.StructArrayLayout2i4;Le.emplaceBack(0,0),Le.emplaceBack(1,0),Le.emplaceBack(0,1),Le.emplaceBack(1,1),this.viewportBuffer=Y.createVertexBuffer(Le,Kl.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Fe=new t.StructArrayLayout1ui2;Fe.emplaceBack(0),Fe.emplaceBack(1),Fe.emplaceBack(3),Fe.emplaceBack(2),Fe.emplaceBack(0),this.tileBorderIndexBuffer=Y.createIndexBuffer(Fe);var Xe=new t.StructArrayLayout3ui6;Xe.emplaceBack(0,1,2),Xe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=Y.createIndexBuffer(Xe),this.emptyTexture=new t.Texture(Y,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Y.gl.RGBA);var ft=this.context.gl;this.stencilClearMode=new Zt({func:ft.ALWAYS,mask:0},0,255,ft.ZERO,ft.ZERO,ft.ZERO)},li.prototype.clearStencil=function(){var Y=this.context,ge=Y.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var te=t.create();t.ortho(te,0,this.width,this.height,0,0,1),t.scale(te,te,[ge.drawingBufferWidth,ge.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(Y,ge.TRIANGLES,Qr.disabled,this.stencilClearMode,Te.disabled,Ye.disabled,Fn(te),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},li.prototype._renderTileClippingMasks=function(Y,ge){if(!(this.currentStencilSource===Y.source||!Y.isTileClipped()||!ge||!ge.length)){this.currentStencilSource=Y.source;var te=this.context,ye=te.gl;this.nextStencilID+ge.length>256&&this.clearStencil(),te.setColorMode(Te.disabled),te.setDepthMode(Qr.disabled);var Le=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Fe=0,Xe=ge;Fe<Xe.length;Fe+=1){var ft=Xe[Fe],Mt=this._tileClippingMaskIDs[ft.key]=this.nextStencilID++;Le.draw(te,ye.TRIANGLES,Qr.disabled,new Zt({func:ye.ALWAYS,mask:0},Mt,255,ye.KEEP,ye.KEEP,ye.REPLACE),Te.disabled,Ye.disabled,Fn(ft.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},li.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var Y=this.nextStencilID++,ge=this.context.gl;return new Zt({func:ge.NOTEQUAL,mask:255},Y,255,ge.KEEP,ge.KEEP,ge.REPLACE)},li.prototype.stencilModeForClipping=function(Y){var ge=this.context.gl;return new Zt({func:ge.EQUAL,mask:255},this._tileClippingMaskIDs[Y.key],0,ge.KEEP,ge.KEEP,ge.REPLACE)},li.prototype.stencilConfigForOverlap=function(Y){var ge,te=this.context.gl,ye=Y.sort(function(Mt,Wt){return Wt.overscaledZ-Mt.overscaledZ}),Le=ye[ye.length-1].overscaledZ,Fe=ye[0].overscaledZ-Le+1;if(Fe>1){this.currentStencilSource=void 0,this.nextStencilID+Fe>256&&this.clearStencil();for(var Xe={},ft=0;ft<Fe;ft++)Xe[ft+Le]=new Zt({func:te.GEQUAL,mask:255},ft+this.nextStencilID,255,te.KEEP,te.KEEP,te.REPLACE);return this.nextStencilID+=Fe,[Xe,ye]}return[(ge={},ge[Le]=Zt.disabled,ge),ye]},li.prototype.colorModeForRenderPass=function(){var Y=this.context.gl;if(this._showOverdrawInspector){var ge=8,te=1/ge;return new Te([Y.CONSTANT_COLOR,Y.ONE],new t.Color(te,te,te,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Te.unblended:Te.alphaBlended},li.prototype.depthModeForSublayer=function(Y,ge,te){if(!this.opaquePassEnabledForLayer())return Qr.disabled;var ye=1-((1+this.currentLayer)*this.numSublayers+Y)*this.depthEpsilon;return new Qr(te||this.context.gl.LEQUAL,ge,[ye,ye])},li.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},li.prototype.render=function(Y,ge){var te=this;this.style=Y,this.options=ge,this.lineAtlas=Y.lineAtlas,this.imageManager=Y.imageManager,this.glyphManager=Y.glyphManager,this.symbolFadeChange=Y.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var ye=this.style._order,Le=this.style.sourceCaches;for(var Fe in Le){var Xe=Le[Fe];Xe.used&&Xe.prepare(this.context)}var ft={},Mt={},Wt={};for(var sr in Le){var vr=Le[sr];ft[sr]=vr.getVisibleCoordinates(),Mt[sr]=ft[sr].slice().reverse(),Wt[sr]=vr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Er=0;Er<ye.length;Er++){var jr=ye[Er];if(this.style._layers[jr].is3D()){this.opaquePassCutoff=Er;break}}this.renderPass="offscreen";for(var Wr=0,Hr=ye;Wr<Hr.length;Wr+=1){var Jr=Hr[Wr],pn=this.style._layers[Jr];if(!(!pn.hasOffscreenPass()||pn.isHidden(this.transform.zoom))){var Rn=Mt[pn.source];pn.type!=="custom"&&!Rn.length||this.renderLayer(this,Le[pn.source],pn,Rn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ge.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ge.showOverdrawInspector,this.depthRangeFor3D=[0,1-(Y._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ye.length-1;this.currentLayer>=0;this.currentLayer--){var Vn=this.style._layers[ye[this.currentLayer]],Jn=Le[Vn.source],ta=ft[Vn.source];this._renderTileClippingMasks(Vn,ta),this.renderLayer(this,Jn,Vn,ta)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ye.length;this.currentLayer++){var qn=this.style._layers[ye[this.currentLayer]],pa=Le[qn.source],Aa=(qn.type==="symbol"?Wt:Mt)[qn.source];this._renderTileClippingMasks(qn,ft[qn.source]),this.renderLayer(this,pa,qn,Aa)}if(this.options.showTileBoundaries){var _a,Ea,Ra=t.values(this.style._layers);Ra.forEach(function(Ya){Ya.source&&!Ya.isHidden(te.transform.zoom)&&(Ya.source!==(Ea&&Ea.id)&&(Ea=te.style.sourceCaches[Ya.source]),(!_a||_a.getSource().maxzoom<Ea.getSource().maxzoom)&&(_a=Ea))}),_a&&So.debug(this,_a,_a.getVisibleCoordinates())}this.options.showPadding&&An(this),this.context.setDefault()},li.prototype.renderLayer=function(Y,ge,te,ye){te.isHidden(this.transform.zoom)||te.type!=="background"&&te.type!=="custom"&&!ye.length||(this.id=te.id,this.gpuTimingStart(te),So[te.type](Y,ge,te,ye,this.style.placement.variableOffsets),this.gpuTimingEnd())},li.prototype.gpuTimingStart=function(Y){if(!!this.options.gpuTiming){var ge=this.context.extTimerQuery,te=this.gpuTimers[Y.id];te||(te=this.gpuTimers[Y.id]={calls:0,cpuTime:0,query:ge.createQueryEXT()}),te.calls++,ge.beginQueryEXT(ge.TIME_ELAPSED_EXT,te.query)}},li.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var Y=this.context.extTimerQuery;Y.endQueryEXT(Y.TIME_ELAPSED_EXT)}},li.prototype.collectGpuTimers=function(){var Y=this.gpuTimers;return this.gpuTimers={},Y},li.prototype.queryGpuTimers=function(Y){var ge={};for(var te in Y){var ye=Y[te],Le=this.context.extTimerQuery,Fe=Le.getQueryObjectEXT(ye.query,Le.QUERY_RESULT_EXT)/(1e3*1e3);Le.deleteQueryEXT(ye.query),ge[te]=Fe}return ge},li.prototype.translatePosMatrix=function(Y,ge,te,ye,Le){if(!te[0]&&!te[1])return Y;var Fe=Le?ye==="map"?this.transform.angle:0:ye==="viewport"?-this.transform.angle:0;if(Fe){var Xe=Math.sin(Fe),ft=Math.cos(Fe);te=[te[0]*ft-te[1]*Xe,te[0]*Xe+te[1]*ft]}var Mt=[Le?te[0]:Mn(ge,te[0],this.transform.zoom),Le?te[1]:Mn(ge,te[1],this.transform.zoom),0],Wt=new Float32Array(16);return t.translate(Wt,Y,Mt),Wt},li.prototype.saveTileTexture=function(Y){var ge=this._tileTextures[Y.size[0]];ge?ge.push(Y):this._tileTextures[Y.size[0]]=[Y]},li.prototype.getTileTexture=function(Y){var ge=this._tileTextures[Y];return ge&&ge.length>0?ge.pop():null},li.prototype.isPatternMissing=function(Y){if(!Y)return!1;if(!Y.from||!Y.to)return!0;var ge=this.imageManager.getPattern(Y.from.toString()),te=this.imageManager.getPattern(Y.to.toString());return!ge||!te},li.prototype.useProgram=function(Y,ge){this.cache=this.cache||{};var te=""+Y+(ge?ge.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[te]||(this.cache[te]=new Ms(this.context,nu[Y],ge,uf[Y],this._showOverdrawInspector)),this.cache[te]},li.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},li.prototype.setBaseState=function(){var Y=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(Y.FUNC_ADD)},li.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var Y=this.context.gl;this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,Y.RGBA)}},li.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ao=function(Y,ge){this.points=Y,this.planes=ge};ao.fromInvProjectionMatrix=function(Y,ge,te){var ye=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Le=Math.pow(2,te),Fe=ye.map(function(Mt){return t.transformMat4([],Mt,Y)}).map(function(Mt){return t.scale$1([],Mt,1/Mt[3]/ge*Le)}),Xe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ft=Xe.map(function(Mt){var Wt=t.sub([],Fe[Mt[0]],Fe[Mt[1]]),sr=t.sub([],Fe[Mt[2]],Fe[Mt[1]]),vr=t.normalize([],t.cross([],Wt,sr)),Er=-t.dot(vr,Fe[Mt[1]]);return vr.concat(Er)});return new ao(Fe,ft)};var Lo=function(Y,ge){this.min=Y,this.max=ge,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};Lo.prototype.quadrant=function(Y){for(var ge=[Y%2===0,Y<2],te=t.clone$2(this.min),ye=t.clone$2(this.max),Le=0;Le<ge.length;Le++)te[Le]=ge[Le]?this.min[Le]:this.center[Le],ye[Le]=ge[Le]?this.center[Le]:this.max[Le];return ye[2]=this.max[2],new Lo(te,ye)},Lo.prototype.distanceX=function(Y){var ge=Math.max(Math.min(this.max[0],Y[0]),this.min[0]);return ge-Y[0]},Lo.prototype.distanceY=function(Y){var ge=Math.max(Math.min(this.max[1],Y[1]),this.min[1]);return ge-Y[1]},Lo.prototype.intersects=function(Y){for(var ge=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],te=!0,ye=0;ye<Y.planes.length;ye++){for(var Le=Y.planes[ye],Fe=0,Xe=0;Xe<ge.length;Xe++)Fe+=t.dot$1(Le,ge[Xe])>=0;if(Fe===0)return 0;Fe!==ge.length&&(te=!1)}if(te)return 2;for(var ft=0;ft<3;ft++){for(var Mt=Number.MAX_VALUE,Wt=-Number.MAX_VALUE,sr=0;sr<Y.points.length;sr++){var vr=Y.points[sr][ft]-this.min[ft];Mt=Math.min(Mt,vr),Wt=Math.max(Wt,vr)}if(Wt<0||Mt>this.max[ft]-this.min[ft])return 0}return 1};var jo=function(Y,ge,te,ye){if(Y===void 0&&(Y=0),ge===void 0&&(ge=0),te===void 0&&(te=0),ye===void 0&&(ye=0),isNaN(Y)||Y<0||isNaN(ge)||ge<0||isNaN(te)||te<0||isNaN(ye)||ye<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Y,this.bottom=ge,this.left=te,this.right=ye};jo.prototype.interpolate=function(Y,ge,te){return ge.top!=null&&Y.top!=null&&(this.top=t.number(Y.top,ge.top,te)),ge.bottom!=null&&Y.bottom!=null&&(this.bottom=t.number(Y.bottom,ge.bottom,te)),ge.left!=null&&Y.left!=null&&(this.left=t.number(Y.left,ge.left,te)),ge.right!=null&&Y.right!=null&&(this.right=t.number(Y.right,ge.right,te)),this},jo.prototype.getCenter=function(Y,ge){var te=t.clamp((this.left+Y-this.right)/2,0,Y),ye=t.clamp((this.top+ge-this.bottom)/2,0,ge);return new t.Point(te,ye)},jo.prototype.equals=function(Y){return this.top===Y.top&&this.bottom===Y.bottom&&this.left===Y.left&&this.right===Y.right},jo.prototype.clone=function(){return new jo(this.top,this.bottom,this.left,this.right)},jo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Pi=function(Y,ge,te,ye,Le){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Le===void 0?!0:Le,this._minZoom=Y||0,this._maxZoom=ge||22,this._minPitch=te==null?0:te,this._maxPitch=ye==null?60:ye,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new jo,this._posMatrixCache={},this._alignedPosMatrixCache={}},zi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Pi.prototype.clone=function(){var Y=new Pi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Y.tileSize=this.tileSize,Y.latRange=this.latRange,Y.width=this.width,Y.height=this.height,Y._center=this._center,Y.zoom=this.zoom,Y.angle=this.angle,Y._fov=this._fov,Y._pitch=this._pitch,Y._unmodified=this._unmodified,Y._edgeInsets=this._edgeInsets.clone(),Y._calcMatrices(),Y},zi.minZoom.get=function(){return this._minZoom},zi.minZoom.set=function(ve){this._minZoom!==ve&&(this._minZoom=ve,this.zoom=Math.max(this.zoom,ve))},zi.maxZoom.get=function(){return this._maxZoom},zi.maxZoom.set=function(ve){this._maxZoom!==ve&&(this._maxZoom=ve,this.zoom=Math.min(this.zoom,ve))},zi.minPitch.get=function(){return this._minPitch},zi.minPitch.set=function(ve){this._minPitch!==ve&&(this._minPitch=ve,this.pitch=Math.max(this.pitch,ve))},zi.maxPitch.get=function(){return this._maxPitch},zi.maxPitch.set=function(ve){this._maxPitch!==ve&&(this._maxPitch=ve,this.pitch=Math.min(this.pitch,ve))},zi.renderWorldCopies.get=function(){return this._renderWorldCopies},zi.renderWorldCopies.set=function(ve){ve===void 0?ve=!0:ve===null&&(ve=!1),this._renderWorldCopies=ve},zi.worldSize.get=function(){return this.tileSize*this.scale},zi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},zi.size.get=function(){return new t.Point(this.width,this.height)},zi.bearing.get=function(){return-this.angle/Math.PI*180},zi.bearing.set=function(ve){var Y=-t.wrap(ve,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},zi.pitch.get=function(){return this._pitch/Math.PI*180},zi.pitch.set=function(ve){var Y=t.clamp(ve,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},zi.fov.get=function(){return this._fov/Math.PI*180},zi.fov.set=function(ve){ve=Math.max(.01,Math.min(60,ve)),this._fov!==ve&&(this._unmodified=!1,this._fov=ve/180*Math.PI,this._calcMatrices())},zi.zoom.get=function(){return this._zoom},zi.zoom.set=function(ve){var Y=Math.min(Math.max(ve,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},zi.center.get=function(){return this._center},zi.center.set=function(ve){ve.lat===this._center.lat&&ve.lng===this._center.lng||(this._unmodified=!1,this._center=ve,this._constrain(),this._calcMatrices())},zi.padding.get=function(){return this._edgeInsets.toJSON()},zi.padding.set=function(ve){this._edgeInsets.equals(ve)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ve,1),this._calcMatrices())},zi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Pi.prototype.isPaddingEqual=function(Y){return this._edgeInsets.equals(Y)},Pi.prototype.interpolatePadding=function(Y,ge,te){this._unmodified=!1,this._edgeInsets.interpolate(Y,ge,te),this._constrain(),this._calcMatrices()},Pi.prototype.coveringZoomLevel=function(Y){var ge=(Y.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Y.tileSize));return Math.max(0,ge)},Pi.prototype.getVisibleUnwrappedCoordinates=function(Y){var ge=[new t.UnwrappedTileID(0,Y)];if(this._renderWorldCopies)for(var te=this.pointCoordinate(new t.Point(0,0)),ye=this.pointCoordinate(new t.Point(this.width,0)),Le=this.pointCoordinate(new t.Point(this.width,this.height)),Fe=this.pointCoordinate(new t.Point(0,this.height)),Xe=Math.floor(Math.min(te.x,ye.x,Le.x,Fe.x)),ft=Math.floor(Math.max(te.x,ye.x,Le.x,Fe.x)),Mt=1,Wt=Xe-Mt;Wt<=ft+Mt;Wt++)Wt!==0&&ge.push(new t.UnwrappedTileID(Wt,Y));return ge},Pi.prototype.coveringTiles=function(Y){var ge=this.coveringZoomLevel(Y),te=ge;if(Y.minzoom!==void 0&&ge<Y.minzoom)return[];Y.maxzoom!==void 0&&ge>Y.maxzoom&&(ge=Y.maxzoom);var ye=t.MercatorCoordinate.fromLngLat(this.center),Le=Math.pow(2,ge),Fe=[Le*ye.x,Le*ye.y,0],Xe=ao.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ge),ft=Y.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ft=ge);var Mt=3,Wt=function(Ra){return{aabb:new Lo([Ra*Le,0,0],[(Ra+1)*Le,Le,0]),zoom:0,x:0,y:0,wrap:Ra,fullyVisible:!1}},sr=[],vr=[],Er=ge,jr=Y.reparseOverscaled?te:ge;if(this._renderWorldCopies)for(var Wr=1;Wr<=3;Wr++)sr.push(Wt(-Wr)),sr.push(Wt(Wr));for(sr.push(Wt(0));sr.length>0;){var Hr=sr.pop(),Jr=Hr.x,pn=Hr.y,Rn=Hr.fullyVisible;if(!Rn){var Vn=Hr.aabb.intersects(Xe);if(Vn===0)continue;Rn=Vn===2}var Jn=Hr.aabb.distanceX(Fe),ta=Hr.aabb.distanceY(Fe),qn=Math.max(Math.abs(Jn),Math.abs(ta)),pa=Mt+(1<<Er-Hr.zoom)-2;if(Hr.zoom===Er||qn>pa&&Hr.zoom>=ft){vr.push({tileID:new t.OverscaledTileID(Hr.zoom===Er?jr:Hr.zoom,Hr.wrap,Hr.zoom,Jr,pn),distanceSq:t.sqrLen([Fe[0]-.5-Jr,Fe[1]-.5-pn])});continue}for(var Aa=0;Aa<4;Aa++){var _a=(Jr<<1)+Aa%2,Ea=(pn<<1)+(Aa>>1);sr.push({aabb:Hr.aabb.quadrant(Aa),zoom:Hr.zoom+1,x:_a,y:Ea,wrap:Hr.wrap,fullyVisible:Rn})}}return vr.sort(function(Ra,Ya){return Ra.distanceSq-Ya.distanceSq}).map(function(Ra){return Ra.tileID})},Pi.prototype.resize=function(Y,ge){this.width=Y,this.height=ge,this.pixelsToGLUnits=[2/Y,-2/ge],this._constrain(),this._calcMatrices()},zi.unmodified.get=function(){return this._unmodified},Pi.prototype.zoomScale=function(Y){return Math.pow(2,Y)},Pi.prototype.scaleZoom=function(Y){return Math.log(Y)/Math.LN2},Pi.prototype.project=function(Y){var ge=t.clamp(Y.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(Y.lng)*this.worldSize,t.mercatorYfromLat(ge)*this.worldSize)},Pi.prototype.unproject=function(Y){return new t.MercatorCoordinate(Y.x/this.worldSize,Y.y/this.worldSize).toLngLat()},zi.point.get=function(){return this.project(this.center)},Pi.prototype.setLocationAtPoint=function(Y,ge){var te=this.pointCoordinate(ge),ye=this.pointCoordinate(this.centerPoint),Le=this.locationCoordinate(Y),Fe=new t.MercatorCoordinate(Le.x-(te.x-ye.x),Le.y-(te.y-ye.y));this.center=this.coordinateLocation(Fe),this._renderWorldCopies&&(this.center=this.center.wrap())},Pi.prototype.locationPoint=function(Y){return this.coordinatePoint(this.locationCoordinate(Y))},Pi.prototype.pointLocation=function(Y){return this.coordinateLocation(this.pointCoordinate(Y))},Pi.prototype.locationCoordinate=function(Y){return t.MercatorCoordinate.fromLngLat(Y)},Pi.prototype.coordinateLocation=function(Y){return Y.toLngLat()},Pi.prototype.pointCoordinate=function(Y){var ge=0,te=[Y.x,Y.y,0,1],ye=[Y.x,Y.y,1,1];t.transformMat4(te,te,this.pixelMatrixInverse),t.transformMat4(ye,ye,this.pixelMatrixInverse);var Le=te[3],Fe=ye[3],Xe=te[0]/Le,ft=ye[0]/Fe,Mt=te[1]/Le,Wt=ye[1]/Fe,sr=te[2]/Le,vr=ye[2]/Fe,Er=sr===vr?0:(ge-sr)/(vr-sr);return new t.MercatorCoordinate(t.number(Xe,ft,Er)/this.worldSize,t.number(Mt,Wt,Er)/this.worldSize)},Pi.prototype.coordinatePoint=function(Y){var ge=[Y.x*this.worldSize,Y.y*this.worldSize,0,1];return t.transformMat4(ge,ge,this.pixelMatrix),new t.Point(ge[0]/ge[3],ge[1]/ge[3])},Pi.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Pi.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},Pi.prototype.setMaxBounds=function(Y){Y?(this.lngRange=[Y.getWest(),Y.getEast()],this.latRange=[Y.getSouth(),Y.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Pi.prototype.calculatePosMatrix=function(Y,ge){ge===void 0&&(ge=!1);var te=Y.key,ye=ge?this._alignedPosMatrixCache:this._posMatrixCache;if(ye[te])return ye[te];var Le=Y.canonical,Fe=this.worldSize/this.zoomScale(Le.z),Xe=Le.x+Math.pow(2,Le.z)*Y.wrap,ft=t.identity(new Float64Array(16));return t.translate(ft,ft,[Xe*Fe,Le.y*Fe,0]),t.scale(ft,ft,[Fe/t.EXTENT,Fe/t.EXTENT,1]),t.multiply(ft,ge?this.alignedProjMatrix:this.projMatrix,ft),ye[te]=new Float32Array(ft),ye[te]},Pi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Pi.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var Y=-90,ge=90,te=-180,ye=180,Le,Fe,Xe,ft,Mt=this.size,Wt=this._unmodified;if(this.latRange){var sr=this.latRange;Y=t.mercatorYfromLat(sr[1])*this.worldSize,ge=t.mercatorYfromLat(sr[0])*this.worldSize,Le=ge-Y<Mt.y?Mt.y/(ge-Y):0}if(this.lngRange){var vr=this.lngRange;te=t.mercatorXfromLng(vr[0])*this.worldSize,ye=t.mercatorXfromLng(vr[1])*this.worldSize,Fe=ye-te<Mt.x?Mt.x/(ye-te):0}var Er=this.point,jr=Math.max(Fe||0,Le||0);if(jr){this.center=this.unproject(new t.Point(Fe?(ye+te)/2:Er.x,Le?(ge+Y)/2:Er.y)),this.zoom+=this.scaleZoom(jr),this._unmodified=Wt,this._constraining=!1;return}if(this.latRange){var Wr=Er.y,Hr=Mt.y/2;Wr-Hr<Y&&(ft=Y+Hr),Wr+Hr>ge&&(ft=ge-Hr)}if(this.lngRange){var Jr=Er.x,pn=Mt.x/2;Jr-pn<te&&(Xe=te+pn),Jr+pn>ye&&(Xe=ye-pn)}(Xe!==void 0||ft!==void 0)&&(this.center=this.unproject(new t.Point(Xe!==void 0?Xe:Er.x,ft!==void 0?ft:Er.y))),this._unmodified=Wt,this._constraining=!1}},Pi.prototype._calcMatrices=function(){if(!!this.height){var Y=this._fov/2,ge=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(Y)*this.height;var te=Math.PI/2+this._pitch,ye=this._fov*(.5+ge.y/this.height),Le=Math.sin(ye)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-te-ye,.01,Math.PI-.01)),Fe=this.point,Xe=Fe.x,ft=Fe.y,Mt=Math.cos(Math.PI/2-this._pitch)*Le+this.cameraToCenterDistance,Wt=Mt*1.01,sr=this.height/50,vr=new Float64Array(16);t.perspective(vr,this._fov,this.width/this.height,sr,Wt),vr[8]=-ge.x*2/this.width,vr[9]=ge.y*2/this.height,t.scale(vr,vr,[1,-1,1]),t.translate(vr,vr,[0,0,-this.cameraToCenterDistance]),t.rotateX(vr,vr,this._pitch),t.rotateZ(vr,vr,this.angle),t.translate(vr,vr,[-Xe,-ft,0]),this.mercatorMatrix=t.scale([],vr,[this.worldSize,this.worldSize,this.worldSize]),t.scale(vr,vr,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=vr,this.invProjMatrix=t.invert([],this.projMatrix);var Er=this.width%2/2,jr=this.height%2/2,Wr=Math.cos(this.angle),Hr=Math.sin(this.angle),Jr=Xe-Math.round(Xe)+Wr*Er+Hr*jr,pn=ft-Math.round(ft)+Wr*jr+Hr*Er,Rn=new Float64Array(vr);if(t.translate(Rn,Rn,[Jr>.5?Jr-1:Jr,pn>.5?pn-1:pn,0]),this.alignedProjMatrix=Rn,vr=t.create(),t.scale(vr,vr,[this.width/2,-this.height/2,1]),t.translate(vr,vr,[1,-1,0]),this.labelPlaneMatrix=vr,vr=t.create(),t.scale(vr,vr,[1,-1,1]),t.translate(vr,vr,[-1,-1,0]),t.scale(vr,vr,[2/this.width,2/this.height,1]),this.glCoordMatrix=vr,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),vr=t.invert(new Float64Array(16),this.pixelMatrix),!vr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=vr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Pi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var Y=this.pointCoordinate(new t.Point(0,0)),ge=[Y.x*this.worldSize,Y.y*this.worldSize,0,1],te=t.transformMat4(ge,ge,this.pixelMatrix);return te[3]/this.cameraToCenterDistance},Pi.prototype.getCameraPoint=function(){var Y=this._pitch,ge=Math.tan(Y)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,ge))},Pi.prototype.getCameraQueryGeometry=function(Y){var ge=this.getCameraPoint();if(Y.length===1)return[Y[0],ge];for(var te=ge.x,ye=ge.y,Le=ge.x,Fe=ge.y,Xe=0,ft=Y;Xe<ft.length;Xe+=1){var Mt=ft[Xe];te=Math.min(te,Mt.x),ye=Math.min(ye,Mt.y),Le=Math.max(Le,Mt.x),Fe=Math.max(Fe,Mt.y)}return[new t.Point(te,ye),new t.Point(Le,ye),new t.Point(Le,Fe),new t.Point(te,Fe),new t.Point(te,ye)]},Object.defineProperties(Pi.prototype,zi);function Us(ve,Y){var ge=!1,te=null,ye=function(){te=null,ge&&(ve(),te=setTimeout(ye,Y),ge=!1)};return function(){return ge=!0,te||ye(),te}}var Oo=function(Y){this._hashName=Y&&encodeURIComponent(Y),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Us(this._updateHashUnthrottled.bind(this),30*1e3/100)};Oo.prototype.addTo=function(Y){return this._map=Y,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Oo.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Oo.prototype.getHashString=function(Y){var ge=this._map.getCenter(),te=Math.round(this._map.getZoom()*100)/100,ye=Math.ceil((te*Math.LN2+Math.log(512/360/.5))/Math.LN10),Le=Math.pow(10,ye),Fe=Math.round(ge.lng*Le)/Le,Xe=Math.round(ge.lat*Le)/Le,ft=this._map.getBearing(),Mt=this._map.getPitch(),Wt="";if(Y?Wt+="/"+Fe+"/"+Xe+"/"+te:Wt+=te+"/"+Xe+"/"+Fe,(ft||Mt)&&(Wt+="/"+Math.round(ft*10)/10),Mt&&(Wt+="/"+Math.round(Mt)),this._hashName){var sr=this._hashName,vr=!1,Er=t.window.location.hash.slice(1).split("&").map(function(jr){var Wr=jr.split("=")[0];return Wr===sr?(vr=!0,Wr+"="+Wt):jr}).filter(function(jr){return jr});return vr||Er.push(sr+"="+Wt),"#"+Er.join("&")}return"#"+Wt},Oo.prototype._getCurrentHash=function(){var Y=this,ge=t.window.location.hash.replace("#","");if(this._hashName){var te;return ge.split("&").map(function(ye){return ye.split("=")}).forEach(function(ye){ye[0]===Y._hashName&&(te=ye)}),(te&&te[1]||"").split("/")}return ge.split("/")},Oo.prototype._onHashChange=function(){var Y=this._getCurrentHash();if(Y.length>=3&&!Y.some(function(te){return isNaN(te)})){var ge=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Y[2],+Y[1]],zoom:+Y[0],bearing:ge,pitch:+(Y[4]||0)}),!0}return!1},Oo.prototype._updateHashUnthrottled=function(){var Y=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",Y)}catch{}};var ts={linearity:.3,easing:t.bezier(0,0,.3,1)},ys=t.extend({deceleration:2500,maxSpeed:1400},ts),he=t.extend({deceleration:20,maxSpeed:1400},ts),we=t.extend({deceleration:1e3,maxSpeed:360},ts),Ie=t.extend({deceleration:1e3,maxSpeed:90},ts),He=function(Y){this._map=Y,this.clear()};He.prototype.clear=function(){this._inertiaBuffer=[]},He.prototype.record=function(Y){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:Y})},He.prototype._drainInertiaBuffer=function(){for(var Y=this._inertiaBuffer,ge=t.browser.now(),te=160;Y.length>0&&ge-Y[0].time>te;)Y.shift()},He.prototype._onMoveEnd=function(Y){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ge={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},te=0,ye=this._inertiaBuffer;te<ye.length;te+=1){var Le=ye[te],Fe=Le.settings;ge.zoom+=Fe.zoomDelta||0,ge.bearing+=Fe.bearingDelta||0,ge.pitch+=Fe.pitchDelta||0,Fe.panDelta&&ge.pan._add(Fe.panDelta),Fe.around&&(ge.around=Fe.around),Fe.pinchAround&&(ge.pinchAround=Fe.pinchAround)}var Xe=this._inertiaBuffer[this._inertiaBuffer.length-1],ft=Xe.time-this._inertiaBuffer[0].time,Mt={};if(ge.pan.mag()){var Wt=Ze(ge.pan.mag(),ft,t.extend({},ys,Y||{}));Mt.offset=ge.pan.mult(Wt.amount/ge.pan.mag()),Mt.center=this._map.transform.center,Ue(Mt,Wt)}if(ge.zoom){var sr=Ze(ge.zoom,ft,he);Mt.zoom=this._map.transform.zoom+sr.amount,Ue(Mt,sr)}if(ge.bearing){var vr=Ze(ge.bearing,ft,we);Mt.bearing=this._map.transform.bearing+t.clamp(vr.amount,-179,179),Ue(Mt,vr)}if(ge.pitch){var Er=Ze(ge.pitch,ft,Ie);Mt.pitch=this._map.transform.pitch+Er.amount,Ue(Mt,Er)}if(Mt.zoom||Mt.bearing){var jr=ge.pinchAround===void 0?ge.around:ge.pinchAround;Mt.around=jr?this._map.unproject(jr):this._map.getCenter()}return this.clear(),t.extend(Mt,{noMoveStart:!0})}};function Ue(ve,Y){(!ve.duration||ve.duration<Y.duration)&&(ve.duration=Y.duration,ve.easing=Y.easing)}function Ze(ve,Y,ge){var te=ge.maxSpeed,ye=ge.linearity,Le=ge.deceleration,Fe=t.clamp(ve*ye/(Y/1e3),-te,te),Xe=Math.abs(Fe)/(Le*ye);return{easing:ge.easing,duration:Xe*1e3,amount:Fe*(Xe/2)}}var xt=function(ve){function Y(te,ye,Le,Fe){Fe===void 0&&(Fe={});var Xe=i.mousePos(ye.getCanvasContainer(),Le),ft=ye.unproject(Xe);ve.call(this,te,t.extend({point:Xe,lngLat:ft,originalEvent:Le},Fe)),this._defaultPrevented=!1,this.target=ye}ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y;var ge={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ge.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ge),Y}(t.Event),vt=function(ve){function Y(te,ye,Le){var Fe=te==="touchend"?Le.changedTouches:Le.touches,Xe=i.touchPos(ye.getCanvasContainer(),Fe),ft=Xe.map(function(sr){return ye.unproject(sr)}),Mt=Xe.reduce(function(sr,vr,Er,jr){return sr.add(vr.div(jr.length))},new t.Point(0,0)),Wt=ye.unproject(Mt);ve.call(this,te,{points:Xe,point:Mt,lngLats:ft,lngLat:Wt,originalEvent:Le}),this._defaultPrevented=!1}ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y;var ge={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ge.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ge),Y}(t.Event),Lt=function(ve){function Y(te,ye,Le){ve.call(this,te,{originalEvent:Le}),this._defaultPrevented=!1}ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y;var ge={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ge.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ge),Y}(t.Event),jt=function(Y,ge){this._map=Y,this._clickTolerance=ge.clickTolerance};jt.prototype.reset=function(){delete this._mousedownPos},jt.prototype.wheel=function(Y){return this._firePreventable(new Lt(Y.type,this._map,Y))},jt.prototype.mousedown=function(Y,ge){return this._mousedownPos=ge,this._firePreventable(new xt(Y.type,this._map,Y))},jt.prototype.mouseup=function(Y){this._map.fire(new xt(Y.type,this._map,Y))},jt.prototype.click=function(Y,ge){this._mousedownPos&&this._mousedownPos.dist(ge)>=this._clickTolerance||this._map.fire(new xt(Y.type,this._map,Y))},jt.prototype.dblclick=function(Y){return this._firePreventable(new xt(Y.type,this._map,Y))},jt.prototype.mouseover=function(Y){this._map.fire(new xt(Y.type,this._map,Y))},jt.prototype.mouseout=function(Y){this._map.fire(new xt(Y.type,this._map,Y))},jt.prototype.touchstart=function(Y){return this._firePreventable(new vt(Y.type,this._map,Y))},jt.prototype.touchmove=function(Y){this._map.fire(new vt(Y.type,this._map,Y))},jt.prototype.touchend=function(Y){this._map.fire(new vt(Y.type,this._map,Y))},jt.prototype.touchcancel=function(Y){this._map.fire(new vt(Y.type,this._map,Y))},jt.prototype._firePreventable=function(Y){if(this._map.fire(Y),Y.defaultPrevented)return{}},jt.prototype.isEnabled=function(){return!0},jt.prototype.isActive=function(){return!1},jt.prototype.enable=function(){},jt.prototype.disable=function(){};var Kt=function(Y){this._map=Y};Kt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Kt.prototype.mousemove=function(Y){this._map.fire(new xt(Y.type,this._map,Y))},Kt.prototype.mousedown=function(){this._delayContextMenu=!0},Kt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Kt.prototype.contextmenu=function(Y){this._delayContextMenu?this._contextMenuEvent=Y:this._map.fire(new xt(Y.type,this._map,Y)),this._map.listens("contextmenu")&&Y.preventDefault()},Kt.prototype.isEnabled=function(){return!0},Kt.prototype.isActive=function(){return!1},Kt.prototype.enable=function(){},Kt.prototype.disable=function(){};var qt=function(Y,ge){this._map=Y,this._el=Y.getCanvasContainer(),this._container=Y.getContainer(),this._clickTolerance=ge.clickTolerance||1};qt.prototype.isEnabled=function(){return!!this._enabled},qt.prototype.isActive=function(){return!!this._active},qt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},qt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},qt.prototype.mousedown=function(Y,ge){!this.isEnabled()||!(Y.shiftKey&&Y.button===0)||(i.disableDrag(),this._startPos=this._lastPos=ge,this._active=!0)},qt.prototype.mousemoveWindow=function(Y,ge){if(!!this._active){var te=ge;if(!(this._lastPos.equals(te)||!this._box&&te.dist(this._startPos)<this._clickTolerance)){var ye=this._startPos;this._lastPos=te,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",Y));var Le=Math.min(ye.x,te.x),Fe=Math.max(ye.x,te.x),Xe=Math.min(ye.y,te.y),ft=Math.max(ye.y,te.y);i.setTransform(this._box,"translate("+Le+"px,"+Xe+"px)"),this._box.style.width=Fe-Le+"px",this._box.style.height=ft-Xe+"px"}}},qt.prototype.mouseupWindow=function(Y,ge){var te=this;if(!!this._active&&Y.button===0){var ye=this._startPos,Le=ge;if(this.reset(),i.suppressClick(),ye.x===Le.x&&ye.y===Le.y)this._fireEvent("boxzoomcancel",Y);else return this._map.fire(new t.Event("boxzoomend",{originalEvent:Y})),{cameraAnimation:function(Fe){return Fe.fitScreenCoordinates(ye,Le,te._map.getBearing(),{linear:!0})}}}},qt.prototype.keydown=function(Y){!this._active||Y.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",Y))},qt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},qt.prototype._fireEvent=function(Y,ge){return this._map.fire(new t.Event(Y,{originalEvent:ge}))};function Sr(ve,Y){for(var ge={},te=0;te<ve.length;te++)ge[ve[te].identifier]=Y[te];return ge}function qr(ve){for(var Y=new t.Point(0,0),ge=0,te=ve;ge<te.length;ge+=1){var ye=te[ge];Y._add(ye)}return Y.div(ve.length)}var cn=500,kr=500,Vr=30,Xr=function(Y){this.reset(),this.numTouches=Y.numTouches};Xr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Xr.prototype.touchstart=function(Y,ge,te){(this.centroid||te.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=Y.timeStamp),te.length===this.numTouches&&(this.centroid=qr(ge),this.touches=Sr(te,ge)))},Xr.prototype.touchmove=function(Y,ge,te){if(!(this.aborted||!this.centroid)){var ye=Sr(te,ge);for(var Le in this.touches){var Fe=this.touches[Le],Xe=ye[Le];(!Xe||Xe.dist(Fe)>Vr)&&(this.aborted=!0)}}},Xr.prototype.touchend=function(Y,ge,te){if((!this.centroid||Y.timeStamp-this.startTime>kr)&&(this.aborted=!0),te.length===0){var ye=!this.aborted&&this.centroid;if(this.reset(),ye)return ye}};var on=function(Y){this.singleTap=new Xr(Y),this.numTaps=Y.numTaps,this.reset()};on.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},on.prototype.touchstart=function(Y,ge,te){this.singleTap.touchstart(Y,ge,te)},on.prototype.touchmove=function(Y,ge,te){this.singleTap.touchmove(Y,ge,te)},on.prototype.touchend=function(Y,ge,te){var ye=this.singleTap.touchend(Y,ge,te);if(ye){var Le=Y.timeStamp-this.lastTime<cn,Fe=!this.lastTap||this.lastTap.dist(ye)<Vr;if((!Le||!Fe)&&this.reset(),this.count++,this.lastTime=Y.timeStamp,this.lastTap=ye,this.count===this.numTaps)return this.reset(),ye}};var ln=function(){this._zoomIn=new on({numTouches:1,numTaps:2}),this._zoomOut=new on({numTouches:2,numTaps:1}),this.reset()};ln.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ln.prototype.touchstart=function(Y,ge,te){this._zoomIn.touchstart(Y,ge,te),this._zoomOut.touchstart(Y,ge,te)},ln.prototype.touchmove=function(Y,ge,te){this._zoomIn.touchmove(Y,ge,te),this._zoomOut.touchmove(Y,ge,te)},ln.prototype.touchend=function(Y,ge,te){var ye=this,Le=this._zoomIn.touchend(Y,ge,te),Fe=this._zoomOut.touchend(Y,ge,te);if(Le)return this._active=!0,Y.preventDefault(),setTimeout(function(){return ye.reset()},0),{cameraAnimation:function(Xe){return Xe.easeTo({duration:300,zoom:Xe.getZoom()+1,around:Xe.unproject(Le)},{originalEvent:Y})}};if(Fe)return this._active=!0,Y.preventDefault(),setTimeout(function(){return ye.reset()},0),{cameraAnimation:function(Xe){return Xe.easeTo({duration:300,zoom:Xe.getZoom()-1,around:Xe.unproject(Fe)},{originalEvent:Y})}}},ln.prototype.touchcancel=function(){this.reset()},ln.prototype.enable=function(){this._enabled=!0},ln.prototype.disable=function(){this._enabled=!1,this.reset()},ln.prototype.isEnabled=function(){return this._enabled},ln.prototype.isActive=function(){return this._active};var Zr=0,$n=2,aa=function(Y){this.reset(),this._clickTolerance=Y.clickTolerance||1};aa.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},aa.prototype._correctButton=function(Y,ge){return!1},aa.prototype._move=function(Y,ge){return{}},aa.prototype.mousedown=function(Y,ge){if(!this._lastPoint){var te=i.mouseButton(Y);!this._correctButton(Y,te)||(this._lastPoint=ge,this._eventButton=te)}},aa.prototype.mousemoveWindow=function(Y,ge){var te=this._lastPoint;if(!!te&&(Y.preventDefault(),!(!this._moved&&ge.dist(te)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ge,this._move(te,ge)},aa.prototype.mouseupWindow=function(Y){var ge=i.mouseButton(Y);ge===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var Sa=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.mousedown=function(te,ye){ve.prototype.mousedown.call(this,te,ye),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(te,ye){return ye===Zr&&!te.ctrlKey},Y.prototype._move=function(te,ye){return{around:ye,panDelta:ye.sub(te)}},Y}(aa),ua=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(te,ye){return ye===Zr&&te.ctrlKey||ye===$n},Y.prototype._move=function(te,ye){var Le=.8,Fe=(ye.x-te.x)*Le;if(Fe)return this._active=!0,{bearingDelta:Fe}},Y.prototype.contextmenu=function(te){te.preventDefault()},Y}(aa),La=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(te,ye){return ye===Zr&&te.ctrlKey||ye===$n},Y.prototype._move=function(te,ye){var Le=-.5,Fe=(ye.y-te.y)*Le;if(Fe)return this._active=!0,{pitchDelta:Fe}},Y.prototype.contextmenu=function(te){te.preventDefault()},Y}(aa),ha=function(Y){this._minTouches=1,this._clickTolerance=Y.clickTolerance||1,this.reset()};ha.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},ha.prototype.touchstart=function(Y,ge,te){return this._calculateTransform(Y,ge,te)},ha.prototype.touchmove=function(Y,ge,te){if(!!this._active)return Y.preventDefault(),this._calculateTransform(Y,ge,te)},ha.prototype.touchend=function(Y,ge,te){this._calculateTransform(Y,ge,te),this._active&&te.length<this._minTouches&&this.reset()},ha.prototype.touchcancel=function(){this.reset()},ha.prototype._calculateTransform=function(Y,ge,te){te.length>0&&(this._active=!0);var ye=Sr(te,ge),Le=new t.Point(0,0),Fe=new t.Point(0,0),Xe=0;for(var ft in ye){var Mt=ye[ft],Wt=this._touches[ft];Wt&&(Le._add(Mt),Fe._add(Mt.sub(Wt)),Xe++,ye[ft]=Mt)}if(this._touches=ye,!(Xe<this._minTouches||!Fe.mag())){var sr=Fe.div(Xe);if(this._sum._add(sr),!(this._sum.mag()<this._clickTolerance)){var vr=Le.div(Xe);return{around:vr,panDelta:sr}}}},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var Wa=function(){this.reset()};Wa.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Wa.prototype._start=function(Y){},Wa.prototype._move=function(Y,ge,te){return{}},Wa.prototype.touchstart=function(Y,ge,te){this._firstTwoTouches||te.length<2||(this._firstTwoTouches=[te[0].identifier,te[1].identifier],this._start([ge[0],ge[1]]))},Wa.prototype.touchmove=function(Y,ge,te){if(!!this._firstTwoTouches){Y.preventDefault();var ye=this._firstTwoTouches,Le=ye[0],Fe=ye[1],Xe=Fa(te,ge,Le),ft=Fa(te,ge,Fe);if(!(!Xe||!ft)){var Mt=this._aroundCenter?null:Xe.add(ft).div(2);return this._move([Xe,ft],Mt,Y)}}},Wa.prototype.touchend=function(Y,ge,te){if(!!this._firstTwoTouches){var ye=this._firstTwoTouches,Le=ye[0],Fe=ye[1],Xe=Fa(te,ge,Le),ft=Fa(te,ge,Fe);Xe&&ft||(this._active&&i.suppressClick(),this.reset())}},Wa.prototype.touchcancel=function(){this.reset()},Wa.prototype.enable=function(Y){this._enabled=!0,this._aroundCenter=!!Y&&Y.around==="center"},Wa.prototype.disable=function(){this._enabled=!1,this.reset()},Wa.prototype.isEnabled=function(){return this._enabled},Wa.prototype.isActive=function(){return this._active};function Fa(ve,Y,ge){for(var te=0;te<ve.length;te++)if(ve[te].identifier===ge)return Y[te]}var ai=.1;function ki(ve,Y){return Math.log(ve/Y)/Math.LN2}var Po=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ve.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(te){this._startDistance=this._distance=te[0].dist(te[1])},Y.prototype._move=function(te,ye){var Le=this._distance;if(this._distance=te[0].dist(te[1]),!(!this._active&&Math.abs(ki(this._distance,this._startDistance))<ai))return this._active=!0,{zoomDelta:ki(this._distance,Le),pinchAround:ye}},Y}(Wa),Xi=25;function va(ve,Y){return ve.angleWith(Y)*180/Math.PI}var ci=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ve.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(te){this._startVector=this._vector=te[0].sub(te[1]),this._minDiameter=te[0].dist(te[1])},Y.prototype._move=function(te,ye){var Le=this._vector;if(this._vector=te[0].sub(te[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:va(this._vector,Le),pinchAround:ye}},Y.prototype._isBelowThreshold=function(te){this._minDiameter=Math.min(this._minDiameter,te.mag());var ye=Math.PI*this._minDiameter,Le=Xi/ye*360,Fe=va(te,this._startVector);return Math.abs(Fe)<Le},Y}(Wa);function Ja(ve){return Math.abs(ve.y)>Math.abs(ve.x)}var Ni=100,pi=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ve.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(te){this._lastPoints=te,Ja(te[0].sub(te[1]))&&(this._valid=!1)},Y.prototype._move=function(te,ye,Le){var Fe=te[0].sub(this._lastPoints[0]),Xe=te[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Fe,Xe,Le.timeStamp),!!this._valid){this._lastPoints=te,this._active=!0;var ft=(Fe.y+Xe.y)/2,Mt=-.5;return{pitchDelta:ft*Mt}}},Y.prototype.gestureBeginsVertically=function(te,ye,Le){if(this._valid!==void 0)return this._valid;var Fe=2,Xe=te.mag()>=Fe,ft=ye.mag()>=Fe;if(!(!Xe&&!ft)){if(!Xe||!ft)return this._firstMove===void 0&&(this._firstMove=Le),Le-this._firstMove<Ni?void 0:!1;var Mt=te.y>0==ye.y>0;return Ja(te)&&Ja(ye)&&Mt}},Y}(Wa),Mo={panStep:100,bearingStep:15,pitchStep:10},po=function(){var Y=Mo;this._panStep=Y.panStep,this._bearingStep=Y.bearingStep,this._pitchStep=Y.pitchStep};po.prototype.reset=function(){this._active=!1},po.prototype.keydown=function(Y){var ge=this;if(!(Y.altKey||Y.ctrlKey||Y.metaKey)){var te=0,ye=0,Le=0,Fe=0,Xe=0;switch(Y.keyCode){case 61:case 107:case 171:case 187:te=1;break;case 189:case 109:case 173:te=-1;break;case 37:Y.shiftKey?ye=-1:(Y.preventDefault(),Fe=-1);break;case 39:Y.shiftKey?ye=1:(Y.preventDefault(),Fe=1);break;case 38:Y.shiftKey?Le=1:(Y.preventDefault(),Xe=-1);break;case 40:Y.shiftKey?Le=-1:(Y.preventDefault(),Xe=1);break;default:return}return{cameraAnimation:function(ft){var Mt=ft.getZoom();ft.easeTo({duration:300,easeId:"keyboardHandler",easing:zo,zoom:te?Math.round(Mt)+te*(Y.shiftKey?2:1):Mt,bearing:ft.getBearing()+ye*ge._bearingStep,pitch:ft.getPitch()+Le*ge._pitchStep,offset:[-Fe*ge._panStep,-Xe*ge._panStep],center:ft.getCenter()},{originalEvent:Y})}}}},po.prototype.enable=function(){this._enabled=!0},po.prototype.disable=function(){this._enabled=!1,this.reset()},po.prototype.isEnabled=function(){return this._enabled},po.prototype.isActive=function(){return this._active};function zo(ve){return ve*(2-ve)}var ms=4.000244140625,cs=1/100,xs=1/450,io=2,qi=function(Y,ge){this._map=Y,this._el=Y.getCanvasContainer(),this._handler=ge,this._delta=0,this._defaultZoomRate=cs,this._wheelZoomRate=xs,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};qi.prototype.setZoomRate=function(Y){this._defaultZoomRate=Y},qi.prototype.setWheelZoomRate=function(Y){this._wheelZoomRate=Y},qi.prototype.isEnabled=function(){return!!this._enabled},qi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},qi.prototype.isZooming=function(){return!!this._zooming},qi.prototype.enable=function(Y){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Y&&Y.around==="center")},qi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},qi.prototype.wheel=function(Y){if(!!this.isEnabled()){var ge=Y.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?Y.deltaY*40:Y.deltaY,te=t.browser.now(),ye=te-(this._lastWheelEventTime||0);this._lastWheelEventTime=te,ge!==0&&ge%ms===0?this._type="wheel":ge!==0&&Math.abs(ge)<4?this._type="trackpad":ye>400?(this._type=null,this._lastValue=ge,this._timeout=setTimeout(this._onTimeout,40,Y)):this._type||(this._type=Math.abs(ye*ge)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ge+=this._lastValue)),Y.shiftKey&&ge&&(ge=ge/4),this._type&&(this._lastWheelEvent=Y,this._delta-=ge,this._active||this._start(Y)),Y.preventDefault()}},qi.prototype._onTimeout=function(Y){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(Y)},qi.prototype._start=function(Y){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ge=i.mousePos(this._el,Y);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ge)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},qi.prototype.renderFrame=function(){return this._onScrollFrame()},qi.prototype._onScrollFrame=function(){var Y=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var ge=this._map.transform;if(this._delta!==0){var te=this._type==="wheel"&&Math.abs(this._delta)>ms?this._wheelZoomRate:this._defaultZoomRate,ye=io/(1+Math.exp(-Math.abs(this._delta*te)));this._delta<0&&ye!==0&&(ye=1/ye);var Le=typeof this._targetZoom=="number"?ge.zoomScale(this._targetZoom):ge.scale;this._targetZoom=Math.min(ge.maxZoom,Math.max(ge.minZoom,ge.scaleZoom(Le*ye))),this._type==="wheel"&&(this._startZoom=ge.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Fe=typeof this._targetZoom=="number"?this._targetZoom:ge.zoom,Xe=this._startZoom,ft=this._easing,Mt=!1,Wt;if(this._type==="wheel"&&Xe&&ft){var sr=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),vr=ft(sr);Wt=t.number(Xe,Fe,vr),sr<1?this._frameId||(this._frameId=!0):Mt=!0}else Wt=Fe,Mt=!0;return this._active=!0,Mt&&(this._active=!1,this._finishTimeout=setTimeout(function(){Y._zooming=!1,Y._handler._triggerRenderFrame(),delete Y._targetZoom,delete Y._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Mt,zoomDelta:Wt-ge.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},qi.prototype._smoothOutEasing=function(Y){var ge=t.ease;if(this._prevEase){var te=this._prevEase,ye=(t.browser.now()-te.start)/te.duration,Le=te.easing(ye+.01)-te.easing(ye),Fe=.27/Math.sqrt(Le*Le+1e-4)*.01,Xe=Math.sqrt(.27*.27-Fe*Fe);ge=t.bezier(Fe,Xe,.25,1)}return this._prevEase={start:t.browser.now(),duration:Y,easing:ge},ge},qi.prototype.reset=function(){this._active=!1};var Ua=function(Y,ge){this._clickZoom=Y,this._tapZoom=ge};Ua.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ua.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ua.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ua.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Qa=function(){this.reset()};Qa.prototype.reset=function(){this._active=!1},Qa.prototype.dblclick=function(Y,ge){return Y.preventDefault(),{cameraAnimation:function(te){te.easeTo({duration:300,zoom:te.getZoom()+(Y.shiftKey?-1:1),around:te.unproject(ge)},{originalEvent:Y})}}},Qa.prototype.enable=function(){this._enabled=!0},Qa.prototype.disable=function(){this._enabled=!1,this.reset()},Qa.prototype.isEnabled=function(){return this._enabled},Qa.prototype.isActive=function(){return this._active};var Ho=function(){this._tap=new on({numTouches:1,numTaps:1}),this.reset()};Ho.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ho.prototype.touchstart=function(Y,ge,te){this._swipePoint||(this._tapTime&&Y.timeStamp-this._tapTime>cn&&this.reset(),this._tapTime?te.length>0&&(this._swipePoint=ge[0],this._swipeTouch=te[0].identifier):this._tap.touchstart(Y,ge,te))},Ho.prototype.touchmove=function(Y,ge,te){if(!this._tapTime)this._tap.touchmove(Y,ge,te);else if(this._swipePoint){if(te[0].identifier!==this._swipeTouch)return;var ye=ge[0],Le=ye.y-this._swipePoint.y;return this._swipePoint=ye,Y.preventDefault(),this._active=!0,{zoomDelta:Le/128}}},Ho.prototype.touchend=function(Y,ge,te){if(this._tapTime)this._swipePoint&&te.length===0&&this.reset();else{var ye=this._tap.touchend(Y,ge,te);ye&&(this._tapTime=Y.timeStamp)}},Ho.prototype.touchcancel=function(){this.reset()},Ho.prototype.enable=function(){this._enabled=!0},Ho.prototype.disable=function(){this._enabled=!1,this.reset()},Ho.prototype.isEnabled=function(){return this._enabled},Ho.prototype.isActive=function(){return this._active};var bo=function(Y,ge,te){this._el=Y,this._mousePan=ge,this._touchPan=te};bo.prototype.enable=function(Y){this._inertiaOptions=Y||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},bo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},bo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},bo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var rs=function(Y,ge,te){this._pitchWithRotate=Y.pitchWithRotate,this._mouseRotate=ge,this._mousePitch=te};rs.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},rs.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},rs.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},rs.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var lo=function(Y,ge,te,ye){this._el=Y,this._touchZoom=ge,this._touchRotate=te,this._tapDragZoom=ye,this._rotationDisabled=!1,this._enabled=!0};lo.prototype.enable=function(Y){this._touchZoom.enable(Y),this._rotationDisabled||this._touchRotate.enable(Y),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},lo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},lo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},lo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},lo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},lo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var bs=function(ve){return ve.zoom||ve.drag||ve.pitch||ve.rotate},Js=function(ve){function Y(){ve.apply(this,arguments)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y}(t.Event);function Gu(ve){return ve.panDelta&&ve.panDelta.mag()||ve.zoomDelta||ve.bearingDelta||ve.pitchDelta}var uo=function(Y,ge){this._map=Y,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new He(Y),this._bearingSnap=ge.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ge),t.bindAll(["handleEvent","handleWindowEvent"],this);var te=this._el;this._listeners=[[te,"touchstart",{passive:!1}],[te,"touchmove",{passive:!1}],[te,"touchend",void 0],[te,"touchcancel",void 0],[te,"mousedown",void 0],[te,"mousemove",void 0],[te,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[te,"mouseover",void 0],[te,"mouseout",void 0],[te,"dblclick",void 0],[te,"click",void 0],[te,"keydown",{capture:!1}],[te,"keyup",void 0],[te,"wheel",{passive:!1}],[te,"contextmenu",void 0],[t.window,"blur",void 0]];for(var ye=0,Le=this._listeners;ye<Le.length;ye+=1){var Fe=Le[ye],Xe=Fe[0],ft=Fe[1],Mt=Fe[2];i.addEventListener(Xe,ft,Xe===t.window.document?this.handleWindowEvent:this.handleEvent,Mt)}};uo.prototype.destroy=function(){for(var Y=0,ge=this._listeners;Y<ge.length;Y+=1){var te=ge[Y],ye=te[0],Le=te[1],Fe=te[2];i.removeEventListener(ye,Le,ye===t.window.document?this.handleWindowEvent:this.handleEvent,Fe)}},uo.prototype._addDefaultHandlers=function(Y){var ge=this._map,te=ge.getCanvasContainer();this._add("mapEvent",new jt(ge,Y));var ye=ge.boxZoom=new qt(ge,Y);this._add("boxZoom",ye);var Le=new ln,Fe=new Qa;ge.doubleClickZoom=new Ua(Fe,Le),this._add("tapZoom",Le),this._add("clickZoom",Fe);var Xe=new Ho;this._add("tapDragZoom",Xe);var ft=ge.touchPitch=new pi;this._add("touchPitch",ft);var Mt=new ua(Y),Wt=new La(Y);ge.dragRotate=new rs(Y,Mt,Wt),this._add("mouseRotate",Mt,["mousePitch"]),this._add("mousePitch",Wt,["mouseRotate"]);var sr=new Sa(Y),vr=new ha(Y);ge.dragPan=new bo(te,sr,vr),this._add("mousePan",sr),this._add("touchPan",vr,["touchZoom","touchRotate"]);var Er=new ci,jr=new Po;ge.touchZoomRotate=new lo(te,jr,Er,Xe),this._add("touchRotate",Er,["touchPan","touchZoom"]),this._add("touchZoom",jr,["touchPan","touchRotate"]);var Wr=ge.scrollZoom=new qi(ge,this);this._add("scrollZoom",Wr,["mousePan"]);var Hr=ge.keyboard=new po;this._add("keyboard",Hr),this._add("blockableMapEvent",new Kt(ge));for(var Jr=0,pn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Jr<pn.length;Jr+=1){var Rn=pn[Jr];Y.interactive&&Y[Rn]&&ge[Rn].enable(Y[Rn])}},uo.prototype._add=function(Y,ge,te){this._handlers.push({handlerName:Y,handler:ge,allowed:te}),this._handlersById[Y]=ge},uo.prototype.stop=function(){if(!this._updatingCamera){for(var Y=0,ge=this._handlers;Y<ge.length;Y+=1){var te=ge[Y],ye=te.handler;ye.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},uo.prototype.isActive=function(){for(var Y=0,ge=this._handlers;Y<ge.length;Y+=1){var te=ge[Y],ye=te.handler;if(ye.isActive())return!0}return!1},uo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},uo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},uo.prototype.isMoving=function(){return Boolean(bs(this._eventsInProgress))||this.isZooming()},uo.prototype._blockedByActive=function(Y,ge,te){for(var ye in Y)if(ye!==te&&(!ge||ge.indexOf(ye)<0))return!0;return!1},uo.prototype.handleWindowEvent=function(Y){this.handleEvent(Y,Y.type+"Window")},uo.prototype._getMapTouches=function(Y){for(var ge=[],te=0,ye=Y;te<ye.length;te+=1){var Le=ye[te],Fe=Le.target;this._el.contains(Fe)&&ge.push(Le)}return ge},uo.prototype.handleEvent=function(Y,ge){if(Y.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var te=Y.type==="renderFrame"?void 0:Y,ye={needsRenderFrame:!1},Le={},Fe={},Xe=Y.touches?this._getMapTouches(Y.touches):void 0,ft=Xe?i.touchPos(this._el,Xe):i.mousePos(this._el,Y),Mt=0,Wt=this._handlers;Mt<Wt.length;Mt+=1){var sr=Wt[Mt],vr=sr.handlerName,Er=sr.handler,jr=sr.allowed;if(!!Er.isEnabled()){var Wr=void 0;this._blockedByActive(Fe,jr,vr)?Er.reset():Er[ge||Y.type]&&(Wr=Er[ge||Y.type](Y,ft,Xe),this.mergeHandlerResult(ye,Le,Wr,vr,te),Wr&&Wr.needsRenderFrame&&this._triggerRenderFrame()),(Wr||Er.isActive())&&(Fe[vr]=Er)}}var Hr={};for(var Jr in this._previousActiveHandlers)Fe[Jr]||(Hr[Jr]=te);this._previousActiveHandlers=Fe,(Object.keys(Hr).length||Gu(ye))&&(this._changes.push([ye,Le,Hr]),this._triggerRenderFrame()),(Object.keys(Fe).length||Gu(ye))&&this._map._stop(!0),this._updatingCamera=!1;var pn=ye.cameraAnimation;pn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],pn(this._map))},uo.prototype.mergeHandlerResult=function(Y,ge,te,ye,Le){if(!!te){t.extend(Y,te);var Fe={handlerName:ye,originalEvent:te.originalEvent||Le};te.zoomDelta!==void 0&&(ge.zoom=Fe),te.panDelta!==void 0&&(ge.drag=Fe),te.pitchDelta!==void 0&&(ge.pitch=Fe),te.bearingDelta!==void 0&&(ge.rotate=Fe)}},uo.prototype._applyChanges=function(){for(var Y={},ge={},te={},ye=0,Le=this._changes;ye<Le.length;ye+=1){var Fe=Le[ye],Xe=Fe[0],ft=Fe[1],Mt=Fe[2];Xe.panDelta&&(Y.panDelta=(Y.panDelta||new t.Point(0,0))._add(Xe.panDelta)),Xe.zoomDelta&&(Y.zoomDelta=(Y.zoomDelta||0)+Xe.zoomDelta),Xe.bearingDelta&&(Y.bearingDelta=(Y.bearingDelta||0)+Xe.bearingDelta),Xe.pitchDelta&&(Y.pitchDelta=(Y.pitchDelta||0)+Xe.pitchDelta),Xe.around!==void 0&&(Y.around=Xe.around),Xe.pinchAround!==void 0&&(Y.pinchAround=Xe.pinchAround),Xe.noInertia&&(Y.noInertia=Xe.noInertia),t.extend(ge,ft),t.extend(te,Mt)}this._updateMapTransform(Y,ge,te),this._changes=[]},uo.prototype._updateMapTransform=function(Y,ge,te){var ye=this._map,Le=ye.transform;if(!Gu(Y))return this._fireEvents(ge,te);var Fe=Y.panDelta,Xe=Y.zoomDelta,ft=Y.bearingDelta,Mt=Y.pitchDelta,Wt=Y.around,sr=Y.pinchAround;sr!==void 0&&(Wt=sr),ye._stop(!0),Wt=Wt||ye.transform.centerPoint;var vr=Le.pointLocation(Fe?Wt.sub(Fe):Wt);ft&&(Le.bearing+=ft),Mt&&(Le.pitch+=Mt),Xe&&(Le.zoom+=Xe),Le.setLocationAtPoint(vr,Wt),this._map._update(),Y.noInertia||this._inertia.record(Y),this._fireEvents(ge,te)},uo.prototype._fireEvents=function(Y,ge){var te=this,ye=bs(this._eventsInProgress),Le=bs(Y),Fe={};for(var Xe in Y){var ft=Y[Xe],Mt=ft.originalEvent;this._eventsInProgress[Xe]||(Fe[Xe+"start"]=Mt),this._eventsInProgress[Xe]=Y[Xe]}!ye&&Le&&this._fireEvent("movestart",Le.originalEvent);for(var Wt in Fe)this._fireEvent(Wt,Fe[Wt]);Y.rotate&&(this._bearingChanged=!0),Le&&this._fireEvent("move",Le.originalEvent);for(var sr in Y){var vr=Y[sr],Er=vr.originalEvent;this._fireEvent(sr,Er)}var jr={},Wr;for(var Hr in this._eventsInProgress){var Jr=this._eventsInProgress[Hr],pn=Jr.handlerName,Rn=Jr.originalEvent;this._handlersById[pn].isActive()||(delete this._eventsInProgress[Hr],Wr=ge[pn]||Rn,jr[Hr+"end"]=Wr)}for(var Vn in jr)this._fireEvent(Vn,jr[Vn]);var Jn=bs(this._eventsInProgress);if((ye||Le)&&!Jn){this._updatingCamera=!0;var ta=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),qn=function(pa){return pa!==0&&-te._bearingSnap<pa&&pa<te._bearingSnap};ta?(qn(ta.bearing||this._map.getBearing())&&(ta.bearing=0),this._map.easeTo(ta,{originalEvent:Wr})):(this._map.fire(new t.Event("moveend",{originalEvent:Wr})),qn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},uo.prototype._fireEvent=function(Y,ge){this._map.fire(new t.Event(Y,ge?{originalEvent:ge}:{}))},uo.prototype._triggerRenderFrame=function(){var Y=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ge){delete Y._frameId,Y.handleEvent(new Js("renderFrame",{timeStamp:ge})),Y._applyChanges()}))};var uh=function(ve){function Y(ge,te){ve.call(this),this._moving=!1,this._zooming=!1,this.transform=ge,this._bearingSnap=te.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(te,ye){return this.jumpTo({center:te},ye)},Y.prototype.panBy=function(te,ye,Le){return te=t.Point.convert(te).mult(-1),this.panTo(this.transform.center,t.extend({offset:te},ye),Le)},Y.prototype.panTo=function(te,ye,Le){return this.easeTo(t.extend({center:te},ye),Le)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(te,ye){return this.jumpTo({zoom:te},ye),this},Y.prototype.zoomTo=function(te,ye,Le){return this.easeTo(t.extend({zoom:te},ye),Le)},Y.prototype.zoomIn=function(te,ye){return this.zoomTo(this.getZoom()+1,te,ye),this},Y.prototype.zoomOut=function(te,ye){return this.zoomTo(this.getZoom()-1,te,ye),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(te,ye){return this.jumpTo({bearing:te},ye),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(te,ye){return this.jumpTo({padding:te},ye),this},Y.prototype.rotateTo=function(te,ye,Le){return this.easeTo(t.extend({bearing:te},ye),Le)},Y.prototype.resetNorth=function(te,ye){return this.rotateTo(0,t.extend({duration:1e3},te),ye),this},Y.prototype.resetNorthPitch=function(te,ye){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},te),ye),this},Y.prototype.snapToNorth=function(te,ye){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(te,ye):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(te,ye){return this.jumpTo({pitch:te},ye),this},Y.prototype.cameraForBounds=function(te,ye){return te=t.LngLatBounds.convert(te),this._cameraForBoxAndBearing(te.getNorthWest(),te.getSouthEast(),0,ye)},Y.prototype._cameraForBoxAndBearing=function(te,ye,Le,Fe){var Xe={top:0,bottom:0,right:0,left:0};if(Fe=t.extend({padding:Xe,offset:[0,0],maxZoom:this.transform.maxZoom},Fe),typeof Fe.padding=="number"){var ft=Fe.padding;Fe.padding={top:ft,bottom:ft,right:ft,left:ft}}Fe.padding=t.extend(Xe,Fe.padding);var Mt=this.transform,Wt=Mt.padding,sr=Mt.project(t.LngLat.convert(te)),vr=Mt.project(t.LngLat.convert(ye)),Er=sr.rotate(-Le*Math.PI/180),jr=vr.rotate(-Le*Math.PI/180),Wr=new t.Point(Math.max(Er.x,jr.x),Math.max(Er.y,jr.y)),Hr=new t.Point(Math.min(Er.x,jr.x),Math.min(Er.y,jr.y)),Jr=Wr.sub(Hr),pn=(Mt.width-(Wt.left+Wt.right+Fe.padding.left+Fe.padding.right))/Jr.x,Rn=(Mt.height-(Wt.top+Wt.bottom+Fe.padding.top+Fe.padding.bottom))/Jr.y;if(Rn<0||pn<0){t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Vn=Math.min(Mt.scaleZoom(Mt.scale*Math.min(pn,Rn)),Fe.maxZoom),Jn=t.Point.convert(Fe.offset),ta=(Fe.padding.left-Fe.padding.right)/2,qn=(Fe.padding.top-Fe.padding.bottom)/2,pa=new t.Point(Jn.x+ta,Jn.y+qn),Aa=pa.mult(Mt.scale/Mt.zoomScale(Vn)),_a=Mt.unproject(sr.add(vr).div(2).sub(Aa));return{center:_a,zoom:Vn,bearing:Le}},Y.prototype.fitBounds=function(te,ye,Le){return this._fitInternal(this.cameraForBounds(te,ye),ye,Le)},Y.prototype.fitScreenCoordinates=function(te,ye,Le,Fe,Xe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(te)),this.transform.pointLocation(t.Point.convert(ye)),Le,Fe),Fe,Xe)},Y.prototype._fitInternal=function(te,ye,Le){return te?(ye=t.extend(te,ye),delete ye.padding,ye.linear?this.easeTo(ye,Le):this.flyTo(ye,Le)):this},Y.prototype.jumpTo=function(te,ye){this.stop();var Le=this.transform,Fe=!1,Xe=!1,ft=!1;return"zoom"in te&&Le.zoom!==+te.zoom&&(Fe=!0,Le.zoom=+te.zoom),te.center!==void 0&&(Le.center=t.LngLat.convert(te.center)),"bearing"in te&&Le.bearing!==+te.bearing&&(Xe=!0,Le.bearing=+te.bearing),"pitch"in te&&Le.pitch!==+te.pitch&&(ft=!0,Le.pitch=+te.pitch),te.padding!=null&&!Le.isPaddingEqual(te.padding)&&(Le.padding=te.padding),this.fire(new t.Event("movestart",ye)).fire(new t.Event("move",ye)),Fe&&this.fire(new t.Event("zoomstart",ye)).fire(new t.Event("zoom",ye)).fire(new t.Event("zoomend",ye)),Xe&&this.fire(new t.Event("rotatestart",ye)).fire(new t.Event("rotate",ye)).fire(new t.Event("rotateend",ye)),ft&&this.fire(new t.Event("pitchstart",ye)).fire(new t.Event("pitch",ye)).fire(new t.Event("pitchend",ye)),this.fire(new t.Event("moveend",ye))},Y.prototype.easeTo=function(te,ye){var Le=this;this._stop(!1,te.easeId),te=t.extend({offset:[0,0],duration:500,easing:t.ease},te),(te.animate===!1||!te.essential&&t.browser.prefersReducedMotion)&&(te.duration=0);var Fe=this.transform,Xe=this.getZoom(),ft=this.getBearing(),Mt=this.getPitch(),Wt=this.getPadding(),sr="zoom"in te?+te.zoom:Xe,vr="bearing"in te?this._normalizeBearing(te.bearing,ft):ft,Er="pitch"in te?+te.pitch:Mt,jr="padding"in te?te.padding:Fe.padding,Wr=t.Point.convert(te.offset),Hr=Fe.centerPoint.add(Wr),Jr=Fe.pointLocation(Hr),pn=t.LngLat.convert(te.center||Jr);this._normalizeCenter(pn);var Rn=Fe.project(Jr),Vn=Fe.project(pn).sub(Rn),Jn=Fe.zoomScale(sr-Xe),ta,qn;te.around&&(ta=t.LngLat.convert(te.around),qn=Fe.locationPoint(ta));var pa={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||sr!==Xe,this._rotating=this._rotating||ft!==vr,this._pitching=this._pitching||Er!==Mt,this._padding=!Fe.isPaddingEqual(jr),this._easeId=te.easeId,this._prepareEase(ye,te.noMoveStart,pa),clearTimeout(this._easeEndTimeoutID),this._ease(function(Aa){if(Le._zooming&&(Fe.zoom=t.number(Xe,sr,Aa)),Le._rotating&&(Fe.bearing=t.number(ft,vr,Aa)),Le._pitching&&(Fe.pitch=t.number(Mt,Er,Aa)),Le._padding&&(Fe.interpolatePadding(Wt,jr,Aa),Hr=Fe.centerPoint.add(Wr)),ta)Fe.setLocationAtPoint(ta,qn);else{var _a=Fe.zoomScale(Fe.zoom-Xe),Ea=sr>Xe?Math.min(2,Jn):Math.max(.5,Jn),Ra=Math.pow(Ea,1-Aa),Ya=Fe.unproject(Rn.add(Vn.mult(Aa*Ra)).mult(_a));Fe.setLocationAtPoint(Fe.renderWorldCopies?Ya.wrap():Ya,Hr)}Le._fireMoveEvents(ye)},function(Aa){Le._afterEase(ye,Aa)},te),this},Y.prototype._prepareEase=function(te,ye,Le){Le===void 0&&(Le={}),this._moving=!0,!ye&&!Le.moving&&this.fire(new t.Event("movestart",te)),this._zooming&&!Le.zooming&&this.fire(new t.Event("zoomstart",te)),this._rotating&&!Le.rotating&&this.fire(new t.Event("rotatestart",te)),this._pitching&&!Le.pitching&&this.fire(new t.Event("pitchstart",te))},Y.prototype._fireMoveEvents=function(te){this.fire(new t.Event("move",te)),this._zooming&&this.fire(new t.Event("zoom",te)),this._rotating&&this.fire(new t.Event("rotate",te)),this._pitching&&this.fire(new t.Event("pitch",te))},Y.prototype._afterEase=function(te,ye){if(!(this._easeId&&ye&&this._easeId===ye)){delete this._easeId;var Le=this._zooming,Fe=this._rotating,Xe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Le&&this.fire(new t.Event("zoomend",te)),Fe&&this.fire(new t.Event("rotateend",te)),Xe&&this.fire(new t.Event("pitchend",te)),this.fire(new t.Event("moveend",te))}},Y.prototype.flyTo=function(te,ye){var Le=this;if(!te.essential&&t.browser.prefersReducedMotion){var Fe=t.pick(te,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Fe,ye)}this.stop(),te=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},te);var Xe=this.transform,ft=this.getZoom(),Mt=this.getBearing(),Wt=this.getPitch(),sr=this.getPadding(),vr="zoom"in te?t.clamp(+te.zoom,Xe.minZoom,Xe.maxZoom):ft,Er="bearing"in te?this._normalizeBearing(te.bearing,Mt):Mt,jr="pitch"in te?+te.pitch:Wt,Wr="padding"in te?te.padding:Xe.padding,Hr=Xe.zoomScale(vr-ft),Jr=t.Point.convert(te.offset),pn=Xe.centerPoint.add(Jr),Rn=Xe.pointLocation(pn),Vn=t.LngLat.convert(te.center||Rn);this._normalizeCenter(Vn);var Jn=Xe.project(Rn),ta=Xe.project(Vn).sub(Jn),qn=te.curve,pa=Math.max(Xe.width,Xe.height),Aa=pa/Hr,_a=ta.mag();if("minZoom"in te){var Ea=t.clamp(Math.min(te.minZoom,ft,vr),Xe.minZoom,Xe.maxZoom),Ra=pa/Xe.zoomScale(Ea-ft);qn=Math.sqrt(Ra/_a*2)}var Ya=qn*qn;function ui(hi){var Di=(Aa*Aa-pa*pa+(hi?-1:1)*Ya*Ya*_a*_a)/(2*(hi?Aa:pa)*Ya*_a);return Math.log(Math.sqrt(Di*Di+1)-Di)}function Hi(hi){return(Math.exp(hi)-Math.exp(-hi))/2}function di(hi){return(Math.exp(hi)+Math.exp(-hi))/2}function Si(hi){return Hi(hi)/di(hi)}var $a=ui(0),Gi=function(hi){return di($a)/di($a+qn*hi)},Zi=function(hi){return pa*((di($a)*Si($a+qn*hi)-Hi($a))/Ya)/_a},eo=(ui(1)-$a)/qn;if(Math.abs(_a)<1e-6||!isFinite(eo)){if(Math.abs(pa-Aa)<1e-6)return this.easeTo(te,ye);var Ii=Aa<pa?-1:1;eo=Math.abs(Math.log(Aa/pa))/qn,Zi=function(){return 0},Gi=function(hi){return Math.exp(Ii*qn*hi)}}if("duration"in te)te.duration=+te.duration;else{var fo="screenSpeed"in te?+te.screenSpeed/qn:+te.speed;te.duration=1e3*eo/fo}return te.maxDuration&&te.duration>te.maxDuration&&(te.duration=0),this._zooming=!0,this._rotating=Mt!==Er,this._pitching=jr!==Wt,this._padding=!Xe.isPaddingEqual(Wr),this._prepareEase(ye,!1),this._ease(function(hi){var Di=hi*eo,$o=1/Gi(Di);Xe.zoom=hi===1?vr:ft+Xe.scaleZoom($o),Le._rotating&&(Xe.bearing=t.number(Mt,Er,hi)),Le._pitching&&(Xe.pitch=t.number(Wt,jr,hi)),Le._padding&&(Xe.interpolatePadding(sr,Wr,hi),pn=Xe.centerPoint.add(Jr));var hs=hi===1?Vn:Xe.unproject(Jn.add(ta.mult(Zi(Di))).mult($o));Xe.setLocationAtPoint(Xe.renderWorldCopies?hs.wrap():hs,pn),Le._fireMoveEvents(ye)},function(){return Le._afterEase(ye)},te),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(te,ye){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Le=this._onEaseEnd;delete this._onEaseEnd,Le.call(this,ye)}if(!te){var Fe=this.handlers;Fe&&Fe.stop()}return this},Y.prototype._ease=function(te,ye,Le){Le.animate===!1||Le.duration===0?(te(1),ye()):(this._easeStart=t.browser.now(),this._easeOptions=Le,this._onEaseFrame=te,this._onEaseEnd=ye,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var te=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(te)),te<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(te,ye){te=t.wrap(te,-180,180);var Le=Math.abs(te-ye);return Math.abs(te-360-ye)<Le&&(te-=360),Math.abs(te+360-ye)<Le&&(te+=360),te},Y.prototype._normalizeCenter=function(te){var ye=this.transform;if(!(!ye.renderWorldCopies||ye.lngRange)){var Le=te.lng-ye.center.lng;te.lng+=Le>180?-360:Le<-180?360:0}},Y}(t.Evented),wu=function(Y){Y===void 0&&(Y={}),this.options=Y,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};wu.prototype.getDefaultPosition=function(){return"bottom-right"},wu.prototype.onAdd=function(Y){var ge=this.options&&this.options.compact;return this._map=Y,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),ge&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ge===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},wu.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},wu.prototype._updateEditLink=function(){var Y=this._editLink;Y||(Y=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ge=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(Y){var te=ge.reduce(function(ye,Le,Fe){return Le.value&&(ye+=Le.key+"="+Le.value+(Fe<ge.length-1?"&":"")),ye},"?");Y.href=t.config.FEEDBACK_URL+"/"+te+(this._map._hash?this._map._hash.getHashString(!0):""),Y.rel="noopener nofollow"}},wu.prototype._updateData=function(Y){Y&&(Y.sourceDataType==="metadata"||Y.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},wu.prototype._updateAttributions=function(){if(!!this._map.style){var Y=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Y=Y.concat(this.options.customAttribution.map(function(ft){return typeof ft!="string"?"":ft})):typeof this.options.customAttribution=="string"&&Y.push(this.options.customAttribution)),this._map.style.stylesheet){var ge=this._map.style.stylesheet;this.styleOwner=ge.owner,this.styleId=ge.id}var te=this._map.style.sourceCaches;for(var ye in te){var Le=te[ye];if(Le.used){var Fe=Le.getSource();Fe.attribution&&Y.indexOf(Fe.attribution)<0&&Y.push(Fe.attribution)}}Y.sort(function(ft,Mt){return ft.length-Mt.length}),Y=Y.filter(function(ft,Mt){for(var Wt=Mt+1;Wt<Y.length;Wt++)if(Y[Wt].indexOf(ft)>=0)return!1;return!0});var Xe=Y.join(" | ");Xe!==this._attribHTML&&(this._attribHTML=Xe,Y.length?(this._innerContainer.innerHTML=Xe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},wu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Qi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Qi.prototype.onAdd=function(Y){this._map=Y,this._container=i.create("div","mapboxgl-ctrl");var ge=i.create("a","mapboxgl-ctrl-logo");return ge.target="_blank",ge.rel="noopener nofollow",ge.href="https://www.mapbox.com/",ge.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ge.setAttribute("rel","noopener nofollow"),this._container.appendChild(ge),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Qi.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Qi.prototype.getDefaultPosition=function(){return"bottom-left"},Qi.prototype._updateLogo=function(Y){(!Y||Y.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Qi.prototype._logoRequired=function(){if(!!this._map.style){var Y=this._map.style.sourceCaches;for(var ge in Y){var te=Y[ge].getSource();if(te.mapbox_logo)return!0}return!1}},Qi.prototype._updateCompact=function(){var Y=this._container.children;if(Y.length){var ge=Y[0];this._map.getCanvasContainer().offsetWidth<250?ge.classList.add("mapboxgl-compact"):ge.classList.remove("mapboxgl-compact")}};var ns=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ns.prototype.add=function(Y){var ge=++this._id,te=this._queue;return te.push({callback:Y,id:ge,cancelled:!1}),ge},ns.prototype.remove=function(Y){for(var ge=this._currentlyRunning,te=ge?this._queue.concat(ge):this._queue,ye=0,Le=te;ye<Le.length;ye+=1){var Fe=Le[ye];if(Fe.id===Y){Fe.cancelled=!0;return}}},ns.prototype.run=function(Y){Y===void 0&&(Y=0);var ge=this._currentlyRunning=this._queue;this._queue=[];for(var te=0,ye=ge;te<ye.length;te+=1){var Le=ye[te];if(!Le.cancelled&&(Le.callback(Y),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ns.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var n1={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Jv=t.window.HTMLImageElement,tv=t.window.HTMLElement,mc=t.window.ImageBitmap,fh=-2,Qv=22,Al=0,xc=60,Td={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:fh,maxZoom:Qv,minPitch:Al,maxPitch:xc,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ad=function(ve){function Y(te){var ye=this;if(te=t.extend({},Td,te),te.minZoom!=null&&te.maxZoom!=null&&te.minZoom>te.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(te.minPitch!=null&&te.maxPitch!=null&&te.minPitch>te.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(te.minPitch!=null&&te.minPitch<Al)throw new Error("minPitch must be greater than or equal to "+Al);if(te.maxPitch!=null&&te.maxPitch>xc)throw new Error("maxPitch must be less than or equal to "+xc);var Le=new Pi(te.minZoom,te.maxZoom,te.minPitch,te.maxPitch,te.renderWorldCopies);if(ve.call(this,Le,te),this._interactive=te.interactive,this._maxTileCacheSize=te.maxTileCacheSize,this._failIfMajorPerformanceCaveat=te.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=te.preserveDrawingBuffer,this._antialias=te.antialias,this._trackResize=te.trackResize,this._bearingSnap=te.bearingSnap,this._refreshExpiredTiles=te.refreshExpiredTiles,this._fadeDuration=te.fadeDuration,this._crossSourceCollisions=te.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=te.collectResourceTiming,this._renderTaskQueue=new ns,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},n1,te.locale),this._requestManager=new t.RequestManager(te.transformRequest,te.accessToken),typeof te.container=="string"){if(this._container=t.window.document.getElementById(te.container),!this._container)throw new Error("Container '"+te.container+"' not found.")}else if(te.container instanceof tv)this._container=te.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(te.maxBounds&&this.setMaxBounds(te.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ye._update(!1)}),this.on("moveend",function(){return ye._update(!1)}),this.on("zoom",function(){return ye._update(!0)}),typeof t.window!="undefined"&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new uo(this,te);var Fe=typeof te.hash=="string"&&te.hash||void 0;this._hash=te.hash&&new Oo(Fe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:te.center,zoom:te.zoom,bearing:te.bearing,pitch:te.pitch}),te.bounds&&(this.resize(),this.fitBounds(te.bounds,t.extend({},te.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=te.localIdeographFontFamily,te.style&&this.setStyle(te.style,{localIdeographFontFamily:te.localIdeographFontFamily}),te.attributionControl&&this.addControl(new wu({customAttribution:te.customAttribution})),this.addControl(new Qi,te.logoPosition),this.on("style.load",function(){ye.transform.unmodified&&ye.jumpTo(ye.style.stylesheet)}),this.on("data",function(Xe){ye._update(Xe.dataType==="style"),ye.fire(new t.Event(Xe.dataType+"data",Xe))}),this.on("dataloading",function(Xe){ye.fire(new t.Event(Xe.dataType+"dataloading",Xe))})}ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y;var ge={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(ye,Le){if(Le===void 0&&ye.getDefaultPosition&&(Le=ye.getDefaultPosition()),Le===void 0&&(Le="top-right"),!ye||!ye.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Fe=ye.onAdd(this);this._controls.push(ye);var Xe=this._controlPositions[Le];return Le.indexOf("bottom")!==-1?Xe.insertBefore(Fe,Xe.firstChild):Xe.appendChild(Fe),this},Y.prototype.removeControl=function(ye){if(!ye||!ye.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Le=this._controls.indexOf(ye);return Le>-1&&this._controls.splice(Le,1),ye.onRemove(this),this},Y.prototype.resize=function(ye){var Le=this._containerDimensions(),Fe=Le[0],Xe=Le[1];this._resizeCanvas(Fe,Xe),this.transform.resize(Fe,Xe),this.painter.resize(Fe,Xe);var ft=!this._moving;return ft&&(this.stop(),this.fire(new t.Event("movestart",ye)).fire(new t.Event("move",ye))),this.fire(new t.Event("resize",ye)),ft&&this.fire(new t.Event("moveend",ye)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(ye){return this.transform.setMaxBounds(t.LngLatBounds.convert(ye)),this._update()},Y.prototype.setMinZoom=function(ye){if(ye=ye==null?fh:ye,ye>=fh&&ye<=this.transform.maxZoom)return this.transform.minZoom=ye,this._update(),this.getZoom()<ye&&this.setZoom(ye),this;throw new Error("minZoom must be between "+fh+" and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(ye){if(ye=ye==null?Qv:ye,ye>=this.transform.minZoom)return this.transform.maxZoom=ye,this._update(),this.getZoom()>ye&&this.setZoom(ye),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(ye){if(ye=ye==null?Al:ye,ye<Al)throw new Error("minPitch must be greater than or equal to "+Al);if(ye>=Al&&ye<=this.transform.maxPitch)return this.transform.minPitch=ye,this._update(),this.getPitch()<ye&&this.setPitch(ye),this;throw new Error("minPitch must be between "+Al+" and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(ye){if(ye=ye==null?xc:ye,ye>xc)throw new Error("maxPitch must be less than or equal to "+xc);if(ye>=this.transform.minPitch)return this.transform.maxPitch=ye,this._update(),this.getPitch()>ye&&this.setPitch(ye),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(ye){return this.transform.renderWorldCopies=ye,this._update()},Y.prototype.project=function(ye){return this.transform.locationPoint(t.LngLat.convert(ye))},Y.prototype.unproject=function(ye){return this.transform.pointLocation(t.Point.convert(ye))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(ye,Le,Fe){var Xe=this,ft;if(ye==="mouseenter"||ye==="mouseover"){var Mt=!1,Wt=function(Hr){var Jr=Xe.getLayer(Le)?Xe.queryRenderedFeatures(Hr.point,{layers:[Le]}):[];Jr.length?Mt||(Mt=!0,Fe.call(Xe,new xt(ye,Xe,Hr.originalEvent,{features:Jr}))):Mt=!1},sr=function(){Mt=!1};return{layer:Le,listener:Fe,delegates:{mousemove:Wt,mouseout:sr}}}else if(ye==="mouseleave"||ye==="mouseout"){var vr=!1,Er=function(Hr){var Jr=Xe.getLayer(Le)?Xe.queryRenderedFeatures(Hr.point,{layers:[Le]}):[];Jr.length?vr=!0:vr&&(vr=!1,Fe.call(Xe,new xt(ye,Xe,Hr.originalEvent)))},jr=function(Hr){vr&&(vr=!1,Fe.call(Xe,new xt(ye,Xe,Hr.originalEvent)))};return{layer:Le,listener:Fe,delegates:{mousemove:Er,mouseout:jr}}}else{var Wr=function(Hr){var Jr=Xe.getLayer(Le)?Xe.queryRenderedFeatures(Hr.point,{layers:[Le]}):[];Jr.length&&(Hr.features=Jr,Fe.call(Xe,Hr),delete Hr.features)};return{layer:Le,listener:Fe,delegates:(ft={},ft[ye]=Wr,ft)}}},Y.prototype.on=function(ye,Le,Fe){if(Fe===void 0)return ve.prototype.on.call(this,ye,Le);var Xe=this._createDelegatedListener(ye,Le,Fe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ye]=this._delegatedListeners[ye]||[],this._delegatedListeners[ye].push(Xe);for(var ft in Xe.delegates)this.on(ft,Xe.delegates[ft]);return this},Y.prototype.once=function(ye,Le,Fe){if(Fe===void 0)return ve.prototype.once.call(this,ye,Le);var Xe=this._createDelegatedListener(ye,Le,Fe);for(var ft in Xe.delegates)this.once(ft,Xe.delegates[ft]);return this},Y.prototype.off=function(ye,Le,Fe){var Xe=this;if(Fe===void 0)return ve.prototype.off.call(this,ye,Le);var ft=function(Mt){for(var Wt=Mt[ye],sr=0;sr<Wt.length;sr++){var vr=Wt[sr];if(vr.layer===Le&&vr.listener===Fe){for(var Er in vr.delegates)Xe.off(Er,vr.delegates[Er]);return Wt.splice(sr,1),Xe}}};return this._delegatedListeners&&this._delegatedListeners[ye]&&ft(this._delegatedListeners),this},Y.prototype.queryRenderedFeatures=function(ye,Le){if(!this.style)return[];Le===void 0&&ye!==void 0&&!(ye instanceof t.Point)&&!Array.isArray(ye)&&(Le=ye,ye=void 0),Le=Le||{},ye=ye||[[0,0],[this.transform.width,this.transform.height]];var Fe;if(ye instanceof t.Point||typeof ye[0]=="number")Fe=[t.Point.convert(ye)];else{var Xe=t.Point.convert(ye[0]),ft=t.Point.convert(ye[1]);Fe=[Xe,new t.Point(ft.x,Xe.y),ft,new t.Point(Xe.x,ft.y),Xe]}return this.style.queryRenderedFeatures(Fe,Le,this.transform)},Y.prototype.querySourceFeatures=function(ye,Le){return this.style.querySourceFeatures(ye,Le)},Y.prototype.setStyle=function(ye,Le){return Le=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Le),Le.diff!==!1&&Le.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ye?(this._diffStyle(ye,Le),this):(this._localIdeographFontFamily=Le.localIdeographFontFamily,this._updateStyle(ye,Le))},Y.prototype._getUIString=function(ye){var Le=this._locale[ye];if(Le==null)throw new Error("Missing UI string '"+ye+"'");return Le},Y.prototype._updateStyle=function(ye,Le){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ye)this.style=new Ts(this,Le||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ye=="string"?this.style.loadURL(ye):this.style.loadJSON(ye),this},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ts(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(ye,Le){var Fe=this;if(typeof ye=="string"){var Xe=this._requestManager.normalizeStyleURL(ye),ft=this._requestManager.transformRequest(Xe,t.ResourceType.Style);t.getJSON(ft,function(Mt,Wt){Mt?Fe.fire(new t.ErrorEvent(Mt)):Wt&&Fe._updateDiff(Wt,Le)})}else typeof ye=="object"&&this._updateDiff(ye,Le)},Y.prototype._updateDiff=function(ye,Le){try{this.style.setState(ye)&&this._update(!0)}catch(Fe){t.warnOnce("Unable to perform style diff: "+(Fe.message||Fe.error||Fe)+".  Rebuilding the style from scratch."),this._updateStyle(ye,Le)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(ye,Le){return this._lazyInitEmptyStyle(),this.style.addSource(ye,Le),this._update(!0)},Y.prototype.isSourceLoaded=function(ye){var Le=this.style&&this.style.sourceCaches[ye];if(Le===void 0){this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+ye+"'")));return}return Le.loaded()},Y.prototype.areTilesLoaded=function(){var ye=this.style&&this.style.sourceCaches;for(var Le in ye){var Fe=ye[Le],Xe=Fe._tiles;for(var ft in Xe){var Mt=Xe[ft];if(!(Mt.state==="loaded"||Mt.state==="errored"))return!1}}return!0},Y.prototype.addSourceType=function(ye,Le,Fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ye,Le,Fe)},Y.prototype.removeSource=function(ye){return this.style.removeSource(ye),this._update(!0)},Y.prototype.getSource=function(ye){return this.style.getSource(ye)},Y.prototype.addImage=function(ye,Le,Fe){Fe===void 0&&(Fe={});var Xe=Fe.pixelRatio;Xe===void 0&&(Xe=1);var ft=Fe.sdf;ft===void 0&&(ft=!1);var Mt=Fe.stretchX,Wt=Fe.stretchY,sr=Fe.content;this._lazyInitEmptyStyle();var vr=0;if(Le instanceof Jv||mc&&Le instanceof mc){var Er=t.browser.getImageData(Le),jr=Er.width,Wr=Er.height,Hr=Er.data;this.style.addImage(ye,{data:new t.RGBAImage({width:jr,height:Wr},Hr),pixelRatio:Xe,stretchX:Mt,stretchY:Wt,content:sr,sdf:ft,version:vr})}else{if(Le.width===void 0||Le.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Jr=Le.width,pn=Le.height,Rn=Le.data,Vn=Le;this.style.addImage(ye,{data:new t.RGBAImage({width:Jr,height:pn},new Uint8Array(Rn)),pixelRatio:Xe,stretchX:Mt,stretchY:Wt,content:sr,sdf:ft,version:vr,userImage:Vn}),Vn.onAdd&&Vn.onAdd(this,ye)}},Y.prototype.updateImage=function(ye,Le){var Fe=this.style.getImage(ye);if(!Fe)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Xe=Le instanceof Jv||mc&&Le instanceof mc?t.browser.getImageData(Le):Le,ft=Xe.width,Mt=Xe.height,Wt=Xe.data;if(ft===void 0||Mt===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ft!==Fe.data.width||Mt!==Fe.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var sr=!(Le instanceof Jv||mc&&Le instanceof mc);Fe.data.replace(Wt,sr),this.style.updateImage(ye,Fe)},Y.prototype.hasImage=function(ye){return ye?!!this.style.getImage(ye):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(ye){this.style.removeImage(ye)},Y.prototype.loadImage=function(ye,Le){t.getImage(this._requestManager.transformRequest(ye,t.ResourceType.Image),Le)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(ye,Le){return this._lazyInitEmptyStyle(),this.style.addLayer(ye,Le),this._update(!0)},Y.prototype.moveLayer=function(ye,Le){return this.style.moveLayer(ye,Le),this._update(!0)},Y.prototype.removeLayer=function(ye){return this.style.removeLayer(ye),this._update(!0)},Y.prototype.getLayer=function(ye){return this.style.getLayer(ye)},Y.prototype.setLayerZoomRange=function(ye,Le,Fe){return this.style.setLayerZoomRange(ye,Le,Fe),this._update(!0)},Y.prototype.setFilter=function(ye,Le,Fe){return Fe===void 0&&(Fe={}),this.style.setFilter(ye,Le,Fe),this._update(!0)},Y.prototype.getFilter=function(ye){return this.style.getFilter(ye)},Y.prototype.setPaintProperty=function(ye,Le,Fe,Xe){return Xe===void 0&&(Xe={}),this.style.setPaintProperty(ye,Le,Fe,Xe),this._update(!0)},Y.prototype.getPaintProperty=function(ye,Le){return this.style.getPaintProperty(ye,Le)},Y.prototype.setLayoutProperty=function(ye,Le,Fe,Xe){return Xe===void 0&&(Xe={}),this.style.setLayoutProperty(ye,Le,Fe,Xe),this._update(!0)},Y.prototype.getLayoutProperty=function(ye,Le){return this.style.getLayoutProperty(ye,Le)},Y.prototype.setLight=function(ye,Le){return Le===void 0&&(Le={}),this._lazyInitEmptyStyle(),this.style.setLight(ye,Le),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(ye,Le){return this.style.setFeatureState(ye,Le),this._update()},Y.prototype.removeFeatureState=function(ye,Le){return this.style.removeFeatureState(ye,Le),this._update()},Y.prototype.getFeatureState=function(ye){return this.style.getFeatureState(ye)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var ye=0,Le=0;return this._container&&(ye=this._container.clientWidth||400,Le=this._container.clientHeight||300),[ye,Le]},Y.prototype._detectMissingCSS=function(){var ye=t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ye!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var ye=this._container;ye.classList.add("mapboxgl-map");var Le=this._missingCSSCanary=i.create("div","mapboxgl-canary",ye);Le.style.visibility="hidden",this._detectMissingCSS();var Fe=this._canvasContainer=i.create("div","mapboxgl-canvas-container",ye);this._interactive&&Fe.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",Fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Xe=this._containerDimensions();this._resizeCanvas(Xe[0],Xe[1]);var ft=this._controlContainer=i.create("div","mapboxgl-control-container",ye),Mt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Wt){Mt[Wt]=i.create("div","mapboxgl-ctrl-"+Wt,ft)})},Y.prototype._resizeCanvas=function(ye,Le){var Fe=t.browser.devicePixelRatio||1;this._canvas.width=Fe*ye,this._canvas.height=Fe*Le,this._canvas.style.width=ye+"px",this._canvas.style.height=Le+"px"},Y.prototype._setupPainter=function(){var ye=t.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Le=this._canvas.getContext("webgl",ye)||this._canvas.getContext("experimental-webgl",ye);if(!Le){this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new li(Le,this.transform),t.webpSupported.testSupport(Le)},Y.prototype._contextLost=function(ye){ye.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:ye}))},Y.prototype._contextRestored=function(ye){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:ye}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(ye){return this.style?(this._styleDirty=this._styleDirty||ye,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(ye){return this._update(),this._renderTaskQueue.add(ye)},Y.prototype._cancelRenderFrame=function(ye){this._renderTaskQueue.remove(ye)},Y.prototype._render=function(ye){var Le=this,Fe,Xe=0,ft=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Fe=ft.createQueryEXT(),ft.beginQueryEXT(ft.TIME_ELAPSED_EXT,Fe),Xe=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ye),!this._removed){var Mt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Wt=this.transform.zoom,sr=t.browser.now();this.style.zoomHistory.update(Wt,sr);var vr=new t.EvaluationParameters(Wt,{now:sr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Er=vr.crossFadingFactor();(Er!==1||Er!==this._crossFadingFactor)&&(Mt=!0,this._crossFadingFactor=Er),this.style.update(vr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||Mt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var jr=t.browser.now()-Xe;ft.endQueryEXT(ft.TIME_ELAPSED_EXT,Fe),setTimeout(function(){var Jr=ft.getQueryObjectEXT(Fe,ft.QUERY_RESULT_EXT)/1e6;ft.deleteQueryEXT(Fe),Le.fire(new t.Event("gpu-timing-frame",{cpuTime:jr,gpuTime:Jr}))},50)}if(this.listens("gpu-timing-layer")){var Wr=this.painter.collectGpuTimers();setTimeout(function(){var Jr=Le.painter.queryGpuTimers(Wr);Le.fire(new t.Event("gpu-timing-layer",{layerTimes:Jr}))},50)}var Hr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Hr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var ye=0,Le=this._controls;ye<Le.length;ye+=1){var Fe=Le[ye];Fe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof t.window!="undefined"&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Xe=this.painter.context.gl.getExtension("WEBGL_lose_context");Xe&&Xe.loseContext(),rv(this._canvasContainer),rv(this._controlContainer),rv(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},Y.prototype.triggerRepaint=function(){var ye=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Le){ye._frame=null,ye._render(Le)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(ye){this._trackResize&&this.resize({originalEvent:ye})._update()},ge.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ge.showTileBoundaries.set=function(te){this._showTileBoundaries!==te&&(this._showTileBoundaries=te,this._update())},ge.showPadding.get=function(){return!!this._showPadding},ge.showPadding.set=function(te){this._showPadding!==te&&(this._showPadding=te,this._update())},ge.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ge.showCollisionBoxes.set=function(te){this._showCollisionBoxes!==te&&(this._showCollisionBoxes=te,te?this.style._generateCollisionBoxes():this._update())},ge.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ge.showOverdrawInspector.set=function(te){this._showOverdrawInspector!==te&&(this._showOverdrawInspector=te,this._update())},ge.repaint.get=function(){return!!this._repaint},ge.repaint.set=function(te){this._repaint!==te&&(this._repaint=te,this.triggerRepaint())},ge.vertices.get=function(){return!!this._vertices},ge.vertices.set=function(te){this._vertices=te,this._update()},Y.prototype._setCacheLimits=function(ye,Le){t.setCacheLimits(ye,Le)},ge.version.get=function(){return t.version},Object.defineProperties(Y.prototype,ge),Y}(uh);function rv(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}var qv={showCompass:!0,showZoom:!0,visualizePitch:!1},jf=function(Y){var ge=this;this.options=t.extend({},qv,Y),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(te){return te.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(te){return ge._map.zoomIn({},{originalEvent:te})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(te){return ge._map.zoomOut({},{originalEvent:te})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(te){ge.options.visualizePitch?ge._map.resetNorthPitch({},{originalEvent:te}):ge._map.resetNorth({},{originalEvent:te})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};jf.prototype._updateZoomButtons=function(){var Y=this._map.getZoom();this._zoomInButton.disabled=Y===this._map.getMaxZoom(),this._zoomOutButton.disabled=Y===this._map.getMinZoom()},jf.prototype._rotateCompassArrow=function(){var Y=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=Y},jf.prototype.onAdd=function(Y){return this._map=Y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new $l(this._map,this._compass,this.options.visualizePitch)),this._container},jf.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},jf.prototype._createButton=function(Y,ge){var te=i.create("button",Y,this._container);return te.type="button",te.addEventListener("click",ge),te},jf.prototype._setButtonTitle=function(Y,ge){var te=this._map._getUIString("NavigationControl."+ge);Y.title=te,Y.setAttribute("aria-label",te)};var $l=function(Y,ge,te){te===void 0&&(te=!1),this._clickTolerance=10,this.element=ge,this.mouseRotate=new ua({clickTolerance:Y.dragRotate._mouseRotate._clickTolerance}),this.map=Y,te&&(this.mousePitch=new La({clickTolerance:Y.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(ge,"mousedown",this.mousedown),i.addEventListener(ge,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(ge,"touchmove",this.touchmove),i.addEventListener(ge,"touchend",this.touchend),i.addEventListener(ge,"touchcancel",this.reset)};$l.prototype.down=function(Y,ge){this.mouseRotate.mousedown(Y,ge),this.mousePitch&&this.mousePitch.mousedown(Y,ge),i.disableDrag()},$l.prototype.move=function(Y,ge){var te=this.map,ye=this.mouseRotate.mousemoveWindow(Y,ge);if(ye&&ye.bearingDelta&&te.setBearing(te.getBearing()+ye.bearingDelta),this.mousePitch){var Le=this.mousePitch.mousemoveWindow(Y,ge);Le&&Le.pitchDelta&&te.setPitch(te.getPitch()+Le.pitchDelta)}},$l.prototype.off=function(){var Y=this.element;i.removeEventListener(Y,"mousedown",this.mousedown),i.removeEventListener(Y,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(Y,"touchmove",this.touchmove),i.removeEventListener(Y,"touchend",this.touchend),i.removeEventListener(Y,"touchcancel",this.reset),this.offTemp()},$l.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(t.window,"mousemove",this.mousemove),i.removeEventListener(t.window,"mouseup",this.mouseup)},$l.prototype.mousedown=function(Y){this.down(t.extend({},Y,{ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}}),i.mousePos(this.element,Y)),i.addEventListener(t.window,"mousemove",this.mousemove),i.addEventListener(t.window,"mouseup",this.mouseup)},$l.prototype.mousemove=function(Y){this.move(Y,i.mousePos(this.element,Y))},$l.prototype.mouseup=function(Y){this.mouseRotate.mouseupWindow(Y),this.mousePitch&&this.mousePitch.mouseupWindow(Y),this.offTemp()},$l.prototype.touchstart=function(Y){Y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,Y.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}},this._startPos))},$l.prototype.touchmove=function(Y){Y.targetTouches.length!==1?this.reset():(this._lastPos=i.touchPos(this.element,Y.targetTouches)[0],this.move({preventDefault:function(){return Y.preventDefault()}},this._lastPos))},$l.prototype.touchend=function(Y){Y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},$l.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function $f(ve,Y,ge){if(ve=new t.LngLat(ve.lng,ve.lat),Y){var te=new t.LngLat(ve.lng-360,ve.lat),ye=new t.LngLat(ve.lng+360,ve.lat),Le=ge.locationPoint(ve).distSqr(Y);ge.locationPoint(te).distSqr(Y)<Le?ve=te:ge.locationPoint(ye).distSqr(Y)<Le&&(ve=ye)}for(;Math.abs(ve.lng-ge.center.lng)>180;){var Fe=ge.locationPoint(ve);if(Fe.x>=0&&Fe.y>=0&&Fe.x<=ge.width&&Fe.y<=ge.height)break;ve.lng>ge.center.lng?ve.lng-=360:ve.lng+=360}return ve}var nv={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ep(ve,Y,ge){var te=ve.classList;for(var ye in nv)te.remove("mapboxgl-"+ge+"-anchor-"+ye);te.add("mapboxgl-"+ge+"-anchor-"+Y)}var ch=function(ve){function Y(ge,te){var ye=this;if(ve.call(this),(ge instanceof t.window.HTMLElement||te)&&(ge=t.extend({element:ge},te)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ge&&ge.anchor||"center",this._color=ge&&ge.color||"#3FB1CE",this._draggable=ge&&ge.draggable||!1,this._state="inactive",this._rotation=ge&&ge.rotation||0,this._rotationAlignment=ge&&ge.rotationAlignment||"auto",this._pitchAlignment=ge&&ge.pitchAlignment&&ge.pitchAlignment!=="auto"?ge.pitchAlignment:this._rotationAlignment,!ge||!ge.element){this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var Le=i.createNS("http://www.w3.org/2000/svg","svg");Le.setAttributeNS(null,"display","block"),Le.setAttributeNS(null,"height","41px"),Le.setAttributeNS(null,"width","27px"),Le.setAttributeNS(null,"viewBox","0 0 27 41");var Fe=i.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"stroke","none"),Fe.setAttributeNS(null,"stroke-width","1"),Fe.setAttributeNS(null,"fill","none"),Fe.setAttributeNS(null,"fill-rule","evenodd");var Xe=i.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"fill-rule","nonzero");var ft=i.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ft.setAttributeNS(null,"fill","#000000");for(var Mt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Wt=0,sr=Mt;Wt<sr.length;Wt+=1){var vr=sr[Wt],Er=i.createNS("http://www.w3.org/2000/svg","ellipse");Er.setAttributeNS(null,"opacity","0.04"),Er.setAttributeNS(null,"cx","10.5"),Er.setAttributeNS(null,"cy","5.80029008"),Er.setAttributeNS(null,"rx",vr.rx),Er.setAttributeNS(null,"ry",vr.ry),ft.appendChild(Er)}var jr=i.createNS("http://www.w3.org/2000/svg","g");jr.setAttributeNS(null,"fill",this._color);var Wr=i.createNS("http://www.w3.org/2000/svg","path");Wr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),jr.appendChild(Wr);var Hr=i.createNS("http://www.w3.org/2000/svg","g");Hr.setAttributeNS(null,"opacity","0.25"),Hr.setAttributeNS(null,"fill","#000000");var Jr=i.createNS("http://www.w3.org/2000/svg","path");Jr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Hr.appendChild(Jr);var pn=i.createNS("http://www.w3.org/2000/svg","g");pn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),pn.setAttributeNS(null,"fill","#FFFFFF");var Rn=i.createNS("http://www.w3.org/2000/svg","g");Rn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Vn=i.createNS("http://www.w3.org/2000/svg","circle");Vn.setAttributeNS(null,"fill","#000000"),Vn.setAttributeNS(null,"opacity","0.25"),Vn.setAttributeNS(null,"cx","5.5"),Vn.setAttributeNS(null,"cy","5.5"),Vn.setAttributeNS(null,"r","5.4999962");var Jn=i.createNS("http://www.w3.org/2000/svg","circle");Jn.setAttributeNS(null,"fill","#FFFFFF"),Jn.setAttributeNS(null,"cx","5.5"),Jn.setAttributeNS(null,"cy","5.5"),Jn.setAttributeNS(null,"r","5.4999962"),Rn.appendChild(Vn),Rn.appendChild(Jn),Xe.appendChild(ft),Xe.appendChild(jr),Xe.appendChild(Hr),Xe.appendChild(pn),Xe.appendChild(Rn),Le.appendChild(Xe),this._element.appendChild(Le),this._offset=t.Point.convert(ge&&ge.offset||[0,-14])}else this._element=ge.element,this._offset=t.Point.convert(ge&&ge.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ta){ta.preventDefault()}),this._element.addEventListener("mousedown",function(ta){ta.preventDefault()}),this._element.addEventListener("focus",function(){var ta=ye._map.getContainer();ta.scrollTop=0,ta.scrollLeft=0}),ep(this._element,this._anchor,"marker"),this._popup=null}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(te){return this.remove(),this._map=te,te.getCanvasContainer().appendChild(this._element),te.on("move",this._update),te.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(te){return this._lngLat=t.LngLat.convert(te),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(te){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),te){if(!("offset"in te.options)){var ye=38.1,Le=13.5,Fe=Math.sqrt(Math.pow(Le,2)/2);te.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ye],"bottom-left":[Fe,(ye-Le+Fe)*-1],"bottom-right":[-Fe,(ye-Le+Fe)*-1],left:[Le,(ye-Le)*-1],right:[-Le,(ye-Le)*-1]}:this._offset}this._popup=te,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(te){var ye=te.code,Le=te.charCode||te.keyCode;(ye==="Space"||ye==="Enter"||Le===32||Le===13)&&this.togglePopup()},Y.prototype._onMapClick=function(te){var ye=te.originalEvent.target,Le=this._element;this._popup&&(ye===Le||Le.contains(ye))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var te=this._popup;if(te)te.isOpen()?te.remove():te.addTo(this._map);else return this;return this},Y.prototype._update=function(te){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=$f(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ye="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ye="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ye="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Le="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Le="rotateX(0deg)":this._pitchAlignment==="map"&&(Le="rotateX("+this._map.getPitch()+"deg)"),(!te||te.type==="moveend")&&(this._pos=this._pos.round()),i.setTransform(this._element,nv[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Le+" "+ye)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(te){return this._offset=t.Point.convert(te),this._update(),this},Y.prototype._onMove=function(te){this._pos=te.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(te){this._element.contains(te.originalEvent.target)&&(te.preventDefault(),this._positionDelta=te.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(te){return this._draggable=!!te,this._map&&(te?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(te){return this._rotation=te||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(te){return this._rotationAlignment=te||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(te){return this._pitchAlignment=te&&te!=="auto"?te:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(t.Evented),Sd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},bc;function av(ve){bc!==void 0?ve(bc):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(Y){bc=Y.state!=="denied",ve(bc)}):(bc=!!t.window.navigator.geolocation,ve(bc))}var hh=0,_c=!1,Md=function(ve){function Y(ge){ve.call(this),this.options=t.extend({},Sd,ge),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(te){return this._map=te,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),av(this._setupUI),this._container},Y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,hh=0,_c=!1},Y.prototype._isOutOfMapMaxBounds=function(te){var ye=this._map.getMaxBounds(),Le=te.coords;return ye&&(Le.longitude<ye.getWest()||Le.longitude>ye.getEast()||Le.latitude<ye.getSouth()||Le.latitude>ye.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},Y.prototype._onSuccess=function(te){if(!!this._map){if(this._isOutOfMapMaxBounds(te)){this._setErrorState(),this.fire(new t.Event("outofmaxbounds",te)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=te,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(te),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(te),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",te)),this._finish()}},Y.prototype._updateCamera=function(te){var ye=new t.LngLat(te.coords.longitude,te.coords.latitude),Le=te.coords.accuracy,Fe=this._map.getBearing(),Xe=t.extend({bearing:Fe},this.options.fitBoundsOptions);this._map.fitBounds(ye.toBounds(Le),Xe,{geolocateSource:!0})},Y.prototype._updateMarker=function(te){if(te){var ye=new t.LngLat(te.coords.longitude,te.coords.latitude);this._accuracyCircleMarker.setLngLat(ye).addTo(this._map),this._userLocationDotMarker.setLngLat(ye).addTo(this._map),this._accuracy=te.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var te=this._map._container.clientHeight/2,ye=this._map.unproject([0,te]),Le=this._map.unproject([1,te]),Fe=ye.distanceTo(Le),Xe=Math.ceil(2*this._accuracy/Fe);this._circleElement.style.width=Xe+"px",this._circleElement.style.height=Xe+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(te){if(!!this._map){if(this.options.trackUserLocation)if(te.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ye=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ye,this._geolocateButton.setAttribute("aria-label",ye),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(te.code===3&&_c)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",te)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(te){var ye=this;if(this._container.addEventListener("contextmenu",function(Xe){return Xe.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",te===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Le=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Le,this._geolocateButton.setAttribute("aria-label",Le)}else{var Fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Fe,this._geolocateButton.setAttribute("aria-label",Fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ch(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ch({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Xe){var ft=Xe.originalEvent&&Xe.originalEvent.type==="resize";!Xe.geolocateSource&&ye._watchState==="ACTIVE_LOCK"&&!ft&&(ye._watchState="BACKGROUND",ye._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ye._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ye.fire(new t.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":hh--,_c=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),hh++;var te;hh>1?(te={maximumAge:6e5,timeout:0},_c=!0):(te=this.options.positionOptions,_c=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,te)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(t.Evented),hg={maxWidth:100,unit:"metric"},wc=function(Y){this.options=t.extend({},hg,Y),t.bindAll(["_onMove","setUnit"],this)};wc.prototype.getDefaultPosition=function(){return"bottom-left"},wc.prototype._onMove=function(){Ed(this._map,this._container,this.options)},wc.prototype.onAdd=function(Y){return this._map=Y,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},wc.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},wc.prototype.setUnit=function(Y){this.options.unit=Y,Ed(this._map,this._container,this.options)};function Ed(ve,Y,ge){var te=ge&&ge.maxWidth||100,ye=ve._container.clientHeight/2,Le=ve.unproject([0,ye]),Fe=ve.unproject([te,ye]),Xe=Le.distanceTo(Fe);if(ge&&ge.unit==="imperial"){var ft=3.2808*Xe;if(ft>5280){var Mt=ft/5280;vh(Y,te,Mt,ve._getUIString("ScaleControl.Miles"))}else vh(Y,te,ft,ve._getUIString("ScaleControl.Feet"))}else if(ge&&ge.unit==="nautical"){var Wt=Xe/1852;vh(Y,te,Wt,ve._getUIString("ScaleControl.NauticalMiles"))}else Xe>=1e3?vh(Y,te,Xe/1e3,ve._getUIString("ScaleControl.Kilometers")):vh(Y,te,Xe,ve._getUIString("ScaleControl.Meters"))}function vh(ve,Y,ge,te){var ye=pg(ge),Le=ye/ge;ve.style.width=Y*Le+"px",ve.innerHTML=ye+"&nbsp;"+te}function vg(ve){var Y=Math.pow(10,Math.ceil(-Math.log(ve)/Math.LN10));return Math.round(ve*Y)/Y}function pg(ve){var Y=Math.pow(10,(""+Math.floor(ve)).length-1),ge=ve/Y;return ge=ge>=10?10:ge>=5?5:ge>=3?3:ge>=2?2:ge>=1?1:vg(ge),Y*ge}var ju=function(Y){this._fullscreen=!1,Y&&Y.container&&(Y.container instanceof t.window.HTMLElement?this._container=Y.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};ju.prototype.onAdd=function(Y){return this._map=Y,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ju.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ju.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},ju.prototype._setupUI=function(){var Y=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",Y).setAttribute("aria-hidden",!0),Y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ju.prototype._updateTitle=function(){var Y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Y),this._fullscreenButton.title=Y},ju.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ju.prototype._isFullscreen=function(){return this._fullscreen},ju.prototype._changeIcon=function(){var Y=t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement;Y===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ju.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var dg={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},gg=function(ve){function Y(ge){ve.call(this),this.options=t.extend(Object.create(dg),ge),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ve&&(Y.__proto__=ve),Y.prototype=Object.create(ve&&ve.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(te){return this._map&&this.remove(),this._map=te,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(te){return this._lngLat=t.LngLat.convert(te),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(te){return this.setDOMContent(t.window.document.createTextNode(te))},Y.prototype.setHTML=function(te){var ye=t.window.document.createDocumentFragment(),Le=t.window.document.createElement("body"),Fe;for(Le.innerHTML=te;Fe=Le.firstChild,!!Fe;)ye.appendChild(Fe);return this.setDOMContent(ye)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(te){return this.options.maxWidth=te,this._update(),this},Y.prototype.setDOMContent=function(te){return this._createContent(),this._content.appendChild(te),this._update(),this},Y.prototype.addClassName=function(te){this._container&&this._container.classList.add(te)},Y.prototype.removeClassName=function(te){this._container&&this._container.classList.remove(te)},Y.prototype.toggleClassName=function(te){if(this._container)return this._container.classList.toggle(te)},Y.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(te){this._update(te.point)},Y.prototype._onMouseMove=function(te){this._update(te.point)},Y.prototype._onDrag=function(te){this._update(te.point)},Y.prototype._update=function(te){var ye=this,Le=this._lngLat||this._trackPointer;if(!(!this._map||!Le||!this._content)&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Er){return ye._container.classList.add(Er)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=$f(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!te))){var Fe=this._pos=this._trackPointer&&te?te:this._map.project(this._lngLat),Xe=this.options.anchor,ft=kd(this.options.offset);if(!Xe){var Mt=this._container.offsetWidth,Wt=this._container.offsetHeight,sr;Fe.y+ft.bottom.y<Wt?sr=["top"]:Fe.y>this._map.transform.height-Wt?sr=["bottom"]:sr=[],Fe.x<Mt/2?sr.push("left"):Fe.x>this._map.transform.width-Mt/2&&sr.push("right"),sr.length===0?Xe="bottom":Xe=sr.join("-")}var vr=Fe.add(ft[Xe]).round();i.setTransform(this._container,nv[Xe]+" translate("+vr.x+"px,"+vr.y+"px)"),ep(this._container,Xe,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(t.Evented);function kd(ve){if(ve)if(typeof ve=="number"){var Y=Math.round(Math.sqrt(.5*Math.pow(ve,2)));return{center:new t.Point(0,0),top:new t.Point(0,ve),"top-left":new t.Point(Y,Y),"top-right":new t.Point(-Y,Y),bottom:new t.Point(0,-ve),"bottom-left":new t.Point(Y,-Y),"bottom-right":new t.Point(-Y,-Y),left:new t.Point(ve,0),right:new t.Point(-ve,0)}}else if(ve instanceof t.Point||Array.isArray(ve)){var ge=t.Point.convert(ve);return{center:ge,top:ge,"top-left":ge,"top-right":ge,bottom:ge,"bottom-left":ge,"bottom-right":ge,left:ge,right:ge}}else return{center:t.Point.convert(ve.center||[0,0]),top:t.Point.convert(ve.top||[0,0]),"top-left":t.Point.convert(ve["top-left"]||[0,0]),"top-right":t.Point.convert(ve["top-right"]||[0,0]),bottom:t.Point.convert(ve.bottom||[0,0]),"bottom-left":t.Point.convert(ve["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(ve["bottom-right"]||[0,0]),left:t.Point.convert(ve.left||[0,0]),right:t.Point.convert(ve.right||[0,0])};else return kd(new t.Point(0,0))}var yg={version:t.version,supported:a,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Ad,NavigationControl:jf,GeolocateControl:Md,AttributionControl:wu,ScaleControl:wc,FullscreenControl:ju,Popup:gg,Marker:ch,Style:Ts,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:Mr,clearPrewarmedResources:un,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(ve){t.config.ACCESS_TOKEN=ve},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(ve){t.config.API_URL=ve},get workerCount(){return Xt.workerCount},set workerCount(ve){Xt.workerCount=ve},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ve){t.config.MAX_PARALLEL_IMAGE_REQUESTS=ve},clearStorage:function(Y){t.clearTileCache(Y)},workerUrl:""};return yg}),h})},{}],240:[function(e,I,F){I.exports=Math.log2||function(s){return Math.log(s)*Math.LOG2E}},{}],241:[function(e,I,F){I.exports=o;var s=e("mouse-event");function o(h,y){y||(y=h,h=window);var t=0,a=0,i=0,n={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function f(S){var T=!1;return"altKey"in S&&(T=T||S.altKey!==n.alt,n.alt=!!S.altKey),"shiftKey"in S&&(T=T||S.shiftKey!==n.shift,n.shift=!!S.shiftKey),"ctrlKey"in S&&(T=T||S.ctrlKey!==n.control,n.control=!!S.ctrlKey),"metaKey"in S&&(T=T||S.metaKey!==n.meta,n.meta=!!S.metaKey),T}function u(S,T){var x=s.x(T),w=s.y(T);"buttons"in T&&(S=T.buttons|0),(S!==t||x!==a||w!==i||f(T))&&(t=S|0,a=x||0,i=w||0,y&&y(t,a,i,n))}function l(S){u(0,S)}function m(){(t||a||i||n.shift||n.alt||n.meta||n.control)&&(a=i=0,t=0,n.shift=n.alt=n.control=n.meta=!1,y&&y(0,0,0,n))}function d(S){f(S)&&y&&y(t,a,i,n)}function b(S){s.buttons(S)===0?u(0,S):u(t,S)}function g(S){u(t|s.buttons(S),S)}function _(S){u(t&~s.buttons(S),S)}function p(){r||(r=!0,h.addEventListener("mousemove",b),h.addEventListener("mousedown",g),h.addEventListener("mouseup",_),h.addEventListener("mouseleave",l),h.addEventListener("mouseenter",l),h.addEventListener("mouseout",l),h.addEventListener("mouseover",l),h.addEventListener("blur",m),h.addEventListener("keyup",d),h.addEventListener("keydown",d),h.addEventListener("keypress",d),h!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}function A(){!r||(r=!1,h.removeEventListener("mousemove",b),h.removeEventListener("mousedown",g),h.removeEventListener("mouseup",_),h.removeEventListener("mouseleave",l),h.removeEventListener("mouseenter",l),h.removeEventListener("mouseout",l),h.removeEventListener("mouseover",l),h.removeEventListener("blur",m),h.removeEventListener("keyup",d),h.removeEventListener("keydown",d),h.removeEventListener("keypress",d),h!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))}p();var c={element:h};return Object.defineProperties(c,{enabled:{get:function(){return r},set:function(S){S?p():A()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),c}},{"mouse-event":243}],242:[function(e,I,F){var s={left:0,top:0};I.exports=o;function o(y,t,a){t=t||y.currentTarget||y.srcElement,Array.isArray(a)||(a=[0,0]);var i=y.clientX||0,n=y.clientY||0,r=h(t);return a[0]=i-r.left,a[1]=n-r.top,a}function h(y){return y===window||y===document||y===document.body?s:y.getBoundingClientRect()}},{}],243:[function(e,I,F){function s(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var a=t.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in t){var a=t.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}F.buttons=s;function o(t){return t.target||t.srcElement||window}F.element=o;function h(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var a=o(t),i=a.getBoundingClientRect();return t.clientX-i.left}return 0}F.x=h;function y(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var a=o(t),i=a.getBoundingClientRect();return t.clientY-i.top}return 0}F.y=y},{}],244:[function(e,I,F){var s=e("to-px");I.exports=o;function o(h,y,t){typeof h=="function"&&(t=!!y,y=h,h=window);var a=s("ex",h),i=function(n){t&&n.preventDefault();var r=n.deltaX||0,f=n.deltaY||0,u=n.deltaZ||0,l=n.deltaMode,m=1;switch(l){case 1:m=a;break;case 2:m=window.innerHeight;break}if(r*=m,f*=m,u*=m,r||f||u)return y(r,f,u,n)};return h.addEventListener("wheel",i),i}},{"to-px":314}],245:[function(e,I,F){(function(s,o){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(y,t,a){t[y]=t[y]||a(),typeof I!="undefined"&&I.exports&&(I.exports=t[y])})("Promise",typeof s!="undefined"?s:this,function(){var y,t,a,i=Object.prototype.toString,n=typeof o!="undefined"?function(S){return o(S)}:setTimeout;try{Object.defineProperty({},"x",{}),y=function(S,T,x,w){return Object.defineProperty(S,T,{value:x,writable:!0,configurable:w!==!1})}}catch{y=function(T,x,w){return T[x]=w,T}}a=function(){var S,T,x;function w(v,C){this.fn=v,this.self=C,this.next=void 0}return{add:function(C,M){x=new w(C,M),T?T.next=x:S=x,T=x,x=void 0},drain:function(){var C=S;for(S=T=t=void 0;C;)C.fn.call(C.self),C=C.next}}}();function r(c,S){a.add(c,S),t||(t=n(a.drain))}function f(c){var S,T=typeof c;return c!=null&&(T=="object"||T=="function")&&(S=c.then),typeof S=="function"?S:!1}function u(){for(var c=0;c<this.chain.length;c++)l(this,this.state===1?this.chain[c].success:this.chain[c].failure,this.chain[c]);this.chain.length=0}function l(c,S,T){var x,w;try{S===!1?T.reject(c.msg):(S===!0?x=c.msg:x=S.call(void 0,c.msg),x===T.promise?T.reject(TypeError("Promise-chain cycle")):(w=f(x))?w.call(x,T.resolve,T.reject):T.resolve(x))}catch(v){T.reject(v)}}function m(c){var S,T=this;if(!T.triggered){T.triggered=!0,T.def&&(T=T.def);try{(S=f(c))?r(function(){var x=new g(T);try{S.call(c,function(){m.apply(x,arguments)},function(){d.apply(x,arguments)})}catch(w){d.call(x,w)}}):(T.msg=c,T.state=1,T.chain.length>0&&r(u,T))}catch(x){d.call(new g(T),x)}}}function d(c){var S=this;S.triggered||(S.triggered=!0,S.def&&(S=S.def),S.msg=c,S.state=2,S.chain.length>0&&r(u,S))}function b(c,S,T,x){for(var w=0;w<S.length;w++)(function(C){c.resolve(S[C]).then(function(E){T(C,E)},x)})(w)}function g(c){this.def=c,this.triggered=!1}function _(c){this.promise=c,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(c){if(typeof c!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var S=new _(this);this.then=function(x,w){var v={success:typeof x=="function"?x:!0,failure:typeof w=="function"?w:!1};return v.promise=new this.constructor(function(M,E){if(typeof M!="function"||typeof E!="function")throw TypeError("Not a function");v.resolve=M,v.reject=E}),S.chain.push(v),S.state!==0&&r(u,S),v.promise},this.catch=function(x){return this.then(void 0,x)};try{c.call(void 0,function(x){m.call(S,x)},function(x){d.call(S,x)})}catch(T){d.call(S,T)}}var A=y({},"constructor",p,!1);return p.prototype=A,y(A,"__NPO__",0,!1),y(p,"resolve",function(S){var T=this;return S&&typeof S=="object"&&S.__NPO__===1?S:new T(function(w,v){if(typeof w!="function"||typeof v!="function")throw TypeError("Not a function");w(S)})}),y(p,"reject",function(S){return new this(function(x,w){if(typeof x!="function"||typeof w!="function")throw TypeError("Not a function");w(S)})}),y(p,"all",function(S){var T=this;return i.call(S)!="[object Array]"?T.reject(TypeError("Not an array")):S.length===0?T.resolve([]):new T(function(w,v){if(typeof w!="function"||typeof v!="function")throw TypeError("Not a function");var C=S.length,M=Array(C),E=0;b(T,S,function(z,O){M[z]=O,++E===C&&w(M)},v)})}),y(p,"race",function(S){var T=this;return i.call(S)!="[object Array]"?T.reject(TypeError("Not an array")):new T(function(w,v){if(typeof w!="function"||typeof v!="function")throw TypeError("Not a function");b(T,S,function(M,E){w(E)},v)})}),p})}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{},e("timers").setImmediate)},{timers:311}],246:[function(e,I,F){var s=Math.PI,o=n(120);I.exports=h;function h(r){for(var f,u=[],l=0,m=0,d=0,b=0,g=null,_=null,p=0,A=0,c=0,S=r.length;c<S;c++){var T=r[c],x=T[0];switch(x){case"M":d=T[1],b=T[2];break;case"A":T=a(p,A,T[1],T[2],n(T[3]),T[4],T[5],T[6],T[7]),T.unshift("C"),T.length>7&&(u.push(T.splice(0,7)),T.unshift("C"));break;case"S":var w=p,v=A;(f=="C"||f=="S")&&(w+=w-l,v+=v-m),T=["C",w,v,T[1],T[2],T[3],T[4]];break;case"T":f=="Q"||f=="T"?(g=p*2-g,_=A*2-_):(g=p,_=A),T=t(p,A,g,_,T[1],T[2]);break;case"Q":g=T[1],_=T[2],T=t(p,A,T[1],T[2],T[3],T[4]);break;case"L":T=y(p,A,T[1],T[2]);break;case"H":T=y(p,A,T[1],A);break;case"V":T=y(p,A,p,T[1]);break;case"Z":T=y(p,A,d,b);break}f=x,p=T[T.length-2],A=T[T.length-1],T.length>4?(l=T[T.length-4],m=T[T.length-3]):(l=p,m=A),u.push(T)}return u}function y(r,f,u,l){return["C",r,f,u,l,u,l]}function t(r,f,u,l,m,d){return["C",r/3+2/3*u,f/3+2/3*l,m/3+2/3*u,d/3+2/3*l,m,d]}function a(r,f,u,l,m,d,b,g,_,p){if(p)E=p[0],L=p[1],C=p[2],M=p[3];else{var A=i(r,f,-m);r=A.x,f=A.y,A=i(g,_,-m),g=A.x,_=A.y;var c=(r-g)/2,S=(f-_)/2,T=c*c/(u*u)+S*S/(l*l);T>1&&(T=Math.sqrt(T),u=T*u,l=T*l);var x=u*u,w=l*l,v=(d==b?-1:1)*Math.sqrt(Math.abs((x*w-x*S*S-w*c*c)/(x*S*S+w*c*c)));v==1/0&&(v=1);var C=v*u*S/l+(r+g)/2,M=v*-l*c/u+(f+_)/2,E=Math.asin(((f-M)/l).toFixed(9)),L=Math.asin(((_-M)/l).toFixed(9));E=r<C?s-E:E,L=g<C?s-L:L,E<0&&(E=s*2+E),L<0&&(L=s*2+L),b&&E>L&&(E=E-s*2),!b&&L>E&&(L=L-s*2)}if(Math.abs(L-E)>o){var z=L,O=g,R=_;L=E+o*(b&&L>E?1:-1),g=C+u*Math.cos(L),_=M+l*Math.sin(L);var D=a(g,_,u,l,m,0,b,O,R,[L,z,C,M])}var H=Math.tan((L-E)/4),B=4/3*u*H,$=4/3*l*H,W=[2*r-(r+B*Math.sin(E)),2*f-(f-$*Math.cos(E)),g+B*Math.sin(L),_-$*Math.cos(L),g,_];if(p)return W;D&&(W=W.concat(D));for(var re=0;re<W.length;){var Q=i(W[re],W[re+1],m);W[re++]=Q.x,W[re++]=Q.y}return W}function i(r,f,u){return{x:r*Math.cos(u)-f*Math.sin(u),y:r*Math.sin(u)+f*Math.cos(u)}}function n(r){return r*(s/180)}},{}],247:[function(e,I,F){var s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;function y(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function t(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var i={},n=0;n<10;n++)i["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(i).map(function(u){return i[u]});if(r.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(u){f[u]=u}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}I.exports=t()?Object.assign:function(a,i){for(var n,r=y(a),f,u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)o.call(n,l)&&(r[l]=n[l]);if(s){f=s(n);for(var m=0;m<f.length;m++)h.call(n,f[m])&&(r[f[m]]=n[f[m]])}}return r}},{}],248:[function(e,I,F){function s(y,t){if(typeof y!="string")return[y];var a=[y];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var i=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],n=t.escape||"___",r=!!t.flat;i.forEach(function(l){var m=new RegExp(["\\",l[0],"[^\\",l[0],"\\",l[1],"]*\\",l[1]].join("")),d=[];function b(g,_,p){var A=a.push(g.slice(l[0].length,-l[1].length))-1;return d.push(A),n+A+n}a.forEach(function(g,_){for(var p,A=0;g!=p;)if(p=g,g=g.replace(m,b),A++>1e4)throw Error("References have circular dependency. Please, check them.");a[_]=g}),d=d.reverse(),a=a.map(function(g){return d.forEach(function(_){g=g.replace(new RegExp("(\\"+n+_+"\\"+n+")","g"),l[0]+"$1"+l[1])}),g})});var f=new RegExp("\\"+n+"([0-9]+)\\"+n);function u(l,m,d){for(var b=[],g,_=0;g=f.exec(l);){if(_++>1e4)throw Error("Circular references in parenthesis");b.push(l.slice(0,g.index)),b.push(u(m[g[1]],m)),l=l.slice(g.index+g[0].length)}return b.push(l),b}return r?a:u(a[0],a)}function o(y,t){if(t&&t.flat){var a=t&&t.escape||"___",i=y[0],n;if(!i)return"";for(var r=new RegExp("\\"+a+"([0-9]+)\\"+a),f=0;i!=n;){if(f++>1e4)throw Error("Circular references in "+y);n=i,i=i.replace(r,u)}return i}return y.reduce(function l(m,d){return Array.isArray(d)&&(d=d.reduce(l,"")),m+d},"");function u(l,m){if(y[m]==null)throw Error("Reference "+m+"is undefined");return y[m]}}function h(y,t){return Array.isArray(y)?o(y,t):s(y,t)}h.parse=s,h.stringify=o,I.exports=h},{}],249:[function(e,I,F){var s=e("pick-by-alias");I.exports=o;function o(h){var y;return arguments.length>1&&(h=arguments),typeof h=="string"?h=h.split(/\s/).map(parseFloat):typeof h=="number"&&(h=[h]),h.length&&typeof h[0]=="number"?h.length===1?y={width:h[0],height:h[0],x:0,y:0}:h.length===2?y={width:h[0],height:h[1],x:0,y:0}:y={x:h[0],y:h[1],width:h[2]-h[0]||0,height:h[3]-h[1]||0}:h&&(h=s(h,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),y={x:h.left||0,y:h.top||0},h.width==null?h.right?y.width=h.right-y.x:y.width=0:y.width=h.width,h.height==null?h.bottom?y.height=h.bottom-y.y:y.height=0:y.height=h.height),y}},{"pick-by-alias":253}],250:[function(e,I,F){I.exports=h;var s={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function h(a){var i=[];return a.replace(o,function(n,r,f){var u=r.toLowerCase();for(f=t(f),u=="m"&&f.length>2&&(i.push([r].concat(f.splice(0,2))),u="l",r=r=="m"?"l":"L");;){if(f.length==s[u])return f.unshift(r),i.push(f);if(f.length<s[u])throw new Error("malformed path data");i.push([r].concat(f.splice(0,s[u])))}}),i}var y=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function t(a){var i=a.match(y);return i?i.map(Number):[]}},{}],251:[function(e,I,F){I.exports=function(o,h){h||(h=[0,""]),o=String(o);var y=parseFloat(o,10);return h[0]=y,h[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",h}},{}],252:[function(e,I,F){(function(s){(function(){(function(){var o,h,y,t,a,i;typeof performance!="undefined"&&performance!==null&&performance.now?I.exports=function(){return performance.now()}:typeof s!="undefined"&&s!==null&&s.hrtime?(I.exports=function(){return(o()-a)/1e6},h=s.hrtime,o=function(){var n;return n=h(),n[0]*1e9+n[1]},t=o(),i=s.uptime()*1e9,a=t-i):Date.now?(I.exports=function(){return Date.now()-y},y=Date.now()):(I.exports=function(){return new Date().getTime()-y},y=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:277}],253:[function(e,I,F){I.exports=function(y,t,a){var i={},n,r;if(typeof t=="string"&&(t=o(t)),Array.isArray(t)){var f={};for(r=0;r<t.length;r++)f[t[r]]=!0;t=f}for(n in t)t[n]=o(t[n]);var u={};for(n in t){var l=t[n];if(Array.isArray(l))for(r=0;r<l.length;r++){var m=l[r];if(a&&(u[m]=!0),m in y){if(i[n]=y[m],a)for(var d=r;d<l.length;d++)u[l[d]]=!0;break}}else n in y&&(t[n]&&(i[n]=y[n]),a&&(u[n]=!0))}if(a)for(n in y)u[n]||(i[n]=y[n]);return i};var s={};function o(h){return s[h]?s[h]:(typeof h=="string"&&(h=s[h]=h.split(/\s*,\s*|\s+/)),h)}},{}],254:[function(e,I,F){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var s=e("./lib/build-log"),o=e("./lib/epsilon"),h=e("./lib/intersecter"),y=e("./lib/segment-chainer"),t=e("./lib/segment-selector"),a=e("./lib/geojson"),i=!1,n=o(),r;r={buildLog:function(u){return u===!0?i=s():u===!1&&(i=!1),i===!1?!1:i.list},epsilon:function(u){return n.epsilon(u)},segments:function(u){var l=h(!0,n,i);return u.regions.forEach(l.addRegion),{segments:l.calculate(u.inverted),inverted:u.inverted}},combine:function(u,l){var m=h(!1,n,i);return{combined:m.calculate(u.segments,u.inverted,l.segments,l.inverted),inverted1:u.inverted,inverted2:l.inverted}},selectUnion:function(u){return{segments:t.union(u.combined,i),inverted:u.inverted1||u.inverted2}},selectIntersect:function(u){return{segments:t.intersect(u.combined,i),inverted:u.inverted1&&u.inverted2}},selectDifference:function(u){return{segments:t.difference(u.combined,i),inverted:u.inverted1&&!u.inverted2}},selectDifferenceRev:function(u){return{segments:t.differenceRev(u.combined,i),inverted:!u.inverted1&&u.inverted2}},selectXor:function(u){return{segments:t.xor(u.combined,i),inverted:u.inverted1!==u.inverted2}},polygon:function(u){return{regions:y(u.segments,n,i),inverted:u.inverted}},polygonFromGeoJSON:function(u){return a.toPolygon(r,u)},polygonToGeoJSON:function(u){return a.fromPolygon(r,n,u)},union:function(u,l){return f(u,l,r.selectUnion)},intersect:function(u,l){return f(u,l,r.selectIntersect)},difference:function(u,l){return f(u,l,r.selectDifference)},differenceRev:function(u,l){return f(u,l,r.selectDifferenceRev)},xor:function(u,l){return f(u,l,r.selectXor)}};function f(u,l,m){var d=r.segments(u),b=r.segments(l),g=r.combine(d,b),_=m(g);return r.polygon(_)}typeof window=="object"&&(window.PolyBool=r),I.exports=r},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(e,I,F){function s(){var o,h=0,y=!1;function t(a,i){return o.list.push({type:a,data:i?JSON.parse(JSON.stringify(i)):void 0}),o}return o={list:[],segmentId:function(){return h++},checkIntersection:function(a,i){return t("check",{seg1:a,seg2:i})},segmentChop:function(a,i){return t("div_seg",{seg:a,pt:i}),t("chop",{seg:a,pt:i})},statusRemove:function(a){return t("pop_seg",{seg:a})},segmentUpdate:function(a){return t("seg_update",{seg:a})},segmentNew:function(a,i){return t("new_seg",{seg:a,primary:i})},segmentRemove:function(a){return t("rem_seg",{seg:a})},tempStatus:function(a,i,n){return t("temp_status",{seg:a,above:i,below:n})},rewind:function(a){return t("rewind",{seg:a})},status:function(a,i,n){return t("status",{seg:a,above:i,below:n})},vert:function(a){return a===y?o:(y=a,t("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),t("log",{txt:a})},reset:function(){return t("reset")},selected:function(a){return t("selected",{segs:a})},chainStart:function(a){return t("chain_start",{seg:a})},chainRemoveHead:function(a,i){return t("chain_rem_head",{index:a,pt:i})},chainRemoveTail:function(a,i){return t("chain_rem_tail",{index:a,pt:i})},chainNew:function(a,i){return t("chain_new",{pt1:a,pt2:i})},chainMatch:function(a){return t("chain_match",{index:a})},chainClose:function(a){return t("chain_close",{index:a})},chainAddHead:function(a,i){return t("chain_add_head",{index:a,pt:i})},chainAddTail:function(a,i){return t("chain_add_tail",{index:a,pt:i})},chainConnect:function(a,i){return t("chain_con",{index1:a,index2:i})},chainReverse:function(a){return t("chain_rev",{index:a})},chainJoin:function(a,i){return t("chain_join",{index1:a,index2:i})},done:function(){return t("done")}},o}I.exports=s},{}],256:[function(e,I,F){function s(o){typeof o!="number"&&(o=1e-10);var h={epsilon:function(y){return typeof y=="number"&&(o=y),o},pointAboveOrOnLine:function(y,t,a){var i=t[0],n=t[1],r=a[0],f=a[1],u=y[0],l=y[1];return(r-i)*(l-n)-(f-n)*(u-i)>=-o},pointBetween:function(y,t,a){var i=y[1]-t[1],n=a[0]-t[0],r=y[0]-t[0],f=a[1]-t[1],u=r*n+i*f;if(u<o)return!1;var l=n*n+f*f;return!(u-l>-o)},pointsSameX:function(y,t){return Math.abs(y[0]-t[0])<o},pointsSameY:function(y,t){return Math.abs(y[1]-t[1])<o},pointsSame:function(y,t){return h.pointsSameX(y,t)&&h.pointsSameY(y,t)},pointsCompare:function(y,t){return h.pointsSameX(y,t)?h.pointsSameY(y,t)?0:y[1]<t[1]?-1:1:y[0]<t[0]?-1:1},pointsCollinear:function(y,t,a){var i=y[0]-t[0],n=y[1]-t[1],r=t[0]-a[0],f=t[1]-a[1];return Math.abs(i*f-r*n)<o},linesIntersect:function(y,t,a,i){var n=t[0]-y[0],r=t[1]-y[1],f=i[0]-a[0],u=i[1]-a[1],l=n*u-r*f;if(Math.abs(l)<o)return!1;var m=y[0]-a[0],d=y[1]-a[1],b=(f*d-u*m)/l,g=(n*d-r*m)/l,_={alongA:0,alongB:0,pt:[y[0]+b*n,y[1]+b*r]};return b<=-o?_.alongA=-2:b<o?_.alongA=-1:b-1<=-o?_.alongA=0:b-1<o?_.alongA=1:_.alongA=2,g<=-o?_.alongB=-2:g<o?_.alongB=-1:g-1<=-o?_.alongB=0:g-1<o?_.alongB=1:_.alongB=2,_},pointInsideRegion:function(y,t){for(var a=y[0],i=y[1],n=t[t.length-1][0],r=t[t.length-1][1],f=!1,u=0;u<t.length;u++){var l=t[u][0],m=t[u][1];m-i>o!=r-i>o&&(n-l)*(i-m)/(r-m)+l-a>o&&(f=!f),n=l,r=m}return f}};return h}I.exports=s},{}],257:[function(e,I,F){var s={toPolygon:function(o,h){function y(i){if(i.length<=0)return o.segments({inverted:!1,regions:[]});function n(u){var l=u.slice(0,u.length-1);return o.segments({inverted:!1,regions:[l]})}for(var r=n(i[0]),f=1;f<i.length;f++)r=o.selectDifference(o.combine(r,n(i[f])));return r}if(h.type==="Polygon")return o.polygon(y(h.coordinates));if(h.type==="MultiPolygon"){for(var t=o.segments({inverted:!1,regions:[]}),a=0;a<h.coordinates.length;a++)t=o.selectUnion(o.combine(t,y(h.coordinates[a])));return o.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(o,h,y){y=o.polygon(o.segments(y));function t(b,g){return h.pointInsideRegion([(b[0][0]+b[1][0])*.5,(b[0][1]+b[1][1])*.5],g)}function a(b){return{region:b,children:[]}}var i=a(null);function n(b,g){for(var _=0;_<b.children.length;_++){var p=b.children[_];if(t(g,p.region)){n(p,g);return}}for(var A=a(g),_=0;_<b.children.length;_++){var p=b.children[_];t(p.region,g)&&(A.children.push(p),b.children.splice(_,1),_--)}b.children.push(A)}for(var r=0;r<y.regions.length;r++){var f=y.regions[r];f.length<3||n(i,f)}function u(b,g){for(var _=0,p=b[b.length-1][0],A=b[b.length-1][1],c=[],S=0;S<b.length;S++){var T=b[S][0],x=b[S][1];c.push([T,x]),_+=x*p-T*A,p=T,A=x}var w=_<0;return w!==g&&c.reverse(),c.push([c[0][0],c[0][1]]),c}var l=[];function m(b){var g=[u(b.region,!1)];l.push(g);for(var _=0;_<b.children.length;_++)g.push(d(b.children[_]))}function d(b){for(var g=0;g<b.children.length;g++)m(b.children[g]);return u(b.region,!0)}for(var r=0;r<i.children.length;r++)m(i.children[r]);return l.length<=0?{type:"Polygon",coordinates:[]}:l.length==1?{type:"Polygon",coordinates:l[0]}:{type:"MultiPolygon",coordinates:l}}};I.exports=s},{}],258:[function(e,I,F){var s=e("./linked-list");function o(h,y,t){function a(_,p){return{id:t?t.segmentId():-1,start:_,end:p,myFill:{above:null,below:null},otherFill:null}}function i(_,p,A){return{id:t?t.segmentId():-1,start:_,end:p,myFill:{above:A.myFill.above,below:A.myFill.below},otherFill:null}}var n=s.create();function r(_,p,A,c,S,T){var x=y.pointsCompare(p,S);return x!==0?x:y.pointsSame(A,T)?0:_!==c?_?1:-1:y.pointAboveOrOnLine(A,c?S:T,c?T:S)?1:-1}function f(_,p){n.insertBefore(_,function(A){var c=r(_.isStart,_.pt,p,A.isStart,A.pt,A.other.pt);return c<0})}function u(_,p){var A=s.node({isStart:!0,pt:_.start,seg:_,primary:p,other:null,status:null});return f(A,_.end),A}function l(_,p,A){var c=s.node({isStart:!1,pt:p.end,seg:p,primary:A,other:_,status:null});_.other=c,f(c,_.pt)}function m(_,p){var A=u(_,p);return l(A,_,p),A}function d(_,p){t&&t.segmentChop(_.seg,p),_.other.remove(),_.seg.end=p,_.other.pt=p,f(_.other,_.pt)}function b(_,p){var A=i(p,_.seg.end,_.seg);return d(_,p),m(A,_.primary)}function g(_,p){var A=s.create();function c(D,H){var B=D.seg.start,$=D.seg.end,W=H.seg.start,re=H.seg.end;return y.pointsCollinear(B,W,re)?y.pointsCollinear($,W,re)||y.pointAboveOrOnLine($,W,re)?1:-1:y.pointAboveOrOnLine(B,W,re)?1:-1}function S(D){return A.findTransition(function(H){var B=c(D,H.ev);return B>0})}function T(D,H){var B=D.seg,$=H.seg,W=B.start,re=B.end,Q=$.start,Z=$.end;t&&t.checkIntersection(B,$);var K=y.linesIntersect(W,re,Q,Z);if(K===!1){if(!y.pointsCollinear(W,re,Q)||y.pointsSame(W,Z)||y.pointsSame(re,Q))return!1;var le=y.pointsSame(W,Q),fe=y.pointsSame(re,Z);if(le&&fe)return H;var ue=!le&&y.pointBetween(W,Q,Z),V=!fe&&y.pointBetween(re,Q,Z);if(le)return V?b(H,re):b(D,Z),H;ue&&(fe||(V?b(H,re):b(D,Z)),b(H,W))}else K.alongA===0&&(K.alongB===-1?b(D,Q):K.alongB===0?b(D,K.pt):K.alongB===1&&b(D,Z)),K.alongB===0&&(K.alongA===-1?b(H,W):K.alongA===0?b(H,K.pt):K.alongA===1&&b(H,re));return!1}for(var x=[];!n.isEmpty();){var w=n.getHead();if(t&&t.vert(w.pt[0]),w.isStart){let D=function(){if(C){var H=T(w,C);if(H)return H}return M?T(w,M):!1};t&&t.segmentNew(w.seg,w.primary);var v=S(w),C=v.before?v.before.ev:null,M=v.after?v.after.ev:null;t&&t.tempStatus(w.seg,C?C.seg:!1,M?M.seg:!1);var E=D();if(E){if(h){var L;w.seg.myFill.below===null?L=!0:L=w.seg.myFill.above!==w.seg.myFill.below,L&&(E.seg.myFill.above=!E.seg.myFill.above)}else E.seg.otherFill=w.seg.myFill;t&&t.segmentUpdate(E.seg),w.other.remove(),w.remove()}if(n.getHead()!==w){t&&t.rewind(w.seg);continue}if(h){var L;w.seg.myFill.below===null?L=!0:L=w.seg.myFill.above!==w.seg.myFill.below,M?w.seg.myFill.below=M.seg.myFill.above:w.seg.myFill.below=_,L?w.seg.myFill.above=!w.seg.myFill.below:w.seg.myFill.above=w.seg.myFill.below}else if(w.seg.otherFill===null){var z;M?w.primary===M.primary?z=M.seg.otherFill.above:z=M.seg.myFill.above:z=w.primary?p:_,w.seg.otherFill={above:z,below:z}}t&&t.status(w.seg,C?C.seg:!1,M?M.seg:!1),w.other.status=v.insert(s.node({ev:w}))}else{var O=w.status;if(O===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(A.exists(O.prev)&&A.exists(O.next)&&T(O.prev.ev,O.next.ev),t&&t.statusRemove(O.ev.seg),O.remove(),!w.primary){var R=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=R}x.push(w.seg)}n.getHead().remove()}return t&&t.done(),x}return h?{addRegion:function(_){for(var p,A=_[_.length-1],c=0;c<_.length;c++){p=A,A=_[c];var S=y.pointsCompare(p,A);S!==0&&m(a(S<0?p:A,S<0?A:p),!0)}},calculate:function(_){return g(_,!1)}}:{calculate:function(_,p,A,c){return _.forEach(function(S){m(i(S.start,S.end,S),!0)}),A.forEach(function(S){m(i(S.start,S.end,S),!1)}),g(p,c)}}}I.exports=o},{"./linked-list":259}],259:[function(e,I,F){var s={create:function(){var o={root:{root:!0,next:null},exists:function(h){return!(h===null||h===o.root)},isEmpty:function(){return o.root.next===null},getHead:function(){return o.root.next},insertBefore:function(h,y){for(var t=o.root,a=o.root.next;a!==null;){if(y(a)){h.prev=a.prev,h.next=a,a.prev.next=h,a.prev=h;return}t=a,a=a.next}t.next=h,h.prev=t,h.next=null},findTransition:function(h){for(var y=o.root,t=o.root.next;t!==null&&!h(t);)y=t,t=t.next;return{before:y===o.root?null:y,after:t,insert:function(a){return a.prev=y,a.next=t,y.next=a,t!==null&&(t.prev=a),a}}}};return o},node:function(o){return o.prev=null,o.next=null,o.remove=function(){o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.prev=null,o.next=null},o}};I.exports=s},{}],260:[function(e,I,F){function s(o,h,y){var t=[],a=[];return o.forEach(function(i){var n=i.start,r=i.end;if(h.pointsSame(n,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}y&&y.chainStart(i);var f={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},l=f;function m(z,O,R){return l.index=z,l.matches_head=O,l.matches_pt1=R,l===f?(l=u,!1):(l=null,!0)}for(var d=0;d<t.length;d++){var b=t[d],g=b[0];b[1];var _=b[b.length-1];if(b[b.length-2],h.pointsSame(g,n)){if(m(d,!0,!0))break}else if(h.pointsSame(g,r)){if(m(d,!0,!1))break}else if(h.pointsSame(_,n)){if(m(d,!1,!0))break}else if(h.pointsSame(_,r)&&m(d,!1,!1))break}if(l===f){t.push([n,r]),y&&y.chainNew(n,r);return}if(l===u){y&&y.chainMatch(f.index);var p=f.index,A=f.matches_pt1?r:n,c=f.matches_head,b=t[p],S=c?b[0]:b[b.length-1],T=c?b[1]:b[b.length-2],x=c?b[b.length-1]:b[0],w=c?b[b.length-2]:b[1];if(h.pointsCollinear(T,S,A)&&(c?(y&&y.chainRemoveHead(f.index,A),b.shift()):(y&&y.chainRemoveTail(f.index,A),b.pop()),S=T),h.pointsSame(x,A)){t.splice(p,1),h.pointsCollinear(w,x,S)&&(c?(y&&y.chainRemoveTail(f.index,S),b.pop()):(y&&y.chainRemoveHead(f.index,S),b.shift())),y&&y.chainClose(f.index),a.push(b);return}c?(y&&y.chainAddHead(f.index,A),b.unshift(A)):(y&&y.chainAddTail(f.index,A),b.push(A));return}function v(z){y&&y.chainReverse(z),t[z].reverse()}function C(z,O){var R=t[z],D=t[O],H=R[R.length-1],B=R[R.length-2],$=D[0],W=D[1];h.pointsCollinear(B,H,$)&&(y&&y.chainRemoveTail(z,H),R.pop(),H=B),h.pointsCollinear(H,$,W)&&(y&&y.chainRemoveHead(O,$),D.shift()),y&&y.chainJoin(z,O),t[z]=R.concat(D),t.splice(O,1)}var M=f.index,E=u.index;y&&y.chainConnect(M,E);var L=t[M].length<t[E].length;f.matches_head?u.matches_head?L?(v(M),C(M,E)):(v(E),C(E,M)):C(E,M):u.matches_head?C(M,E):L?(v(M),C(E,M)):(v(E),C(M,E))}),a}I.exports=s},{}],261:[function(e,I,F){function s(h,y,t){var a=[];return h.forEach(function(i){var n=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);y[n]!==0&&a.push({id:t?t.segmentId():-1,start:i.start,end:i.end,myFill:{above:y[n]===1,below:y[n]===2},otherFill:null})}),t&&t.selected(a),a}var o={union:function(h,y){return s(h,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],y)},intersect:function(h,y){return s(h,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],y)},difference:function(h,y){return s(h,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],y)},differenceRev:function(h,y){return s(h,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],y)},xor:function(h,y){return s(h,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],y)}};I.exports=o},{}],262:[function(e,I,F){var s=e("stream").Transform,o=e("stream-parser");function h(){s.call(this,{readableObjectMode:!0})}h.prototype=Object.create(s.prototype),h.prototype.constructor=h,o(h.prototype),F.ParserStream=h,F.sliceEq=function(t,a,i){for(var n=a,r=0;r<i.length;)if(t[n++]!==i[r++])return!1;return!0},F.str2arr=function(t,a){var i=[],n=0;if(a&&a==="hex")for(;n<t.length;)i.push(parseInt(t.slice(n,n+2),16)),n+=2;else for(;n<t.length;n++)i.push(t.charCodeAt(n)&255);return i},F.readUInt16LE=function(t,a){return t[a]|t[a+1]<<8},F.readUInt16BE=function(t,a){return t[a+1]|t[a]<<8},F.readUInt32LE=function(t,a){return t[a]|t[a+1]<<8|t[a+2]<<16|t[a+3]*16777216},F.readUInt32BE=function(t,a){return t[a+3]|t[a+2]<<8|t[a+1]<<16|t[a]*16777216};function y(t,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=t,a&&(this.code=a),i&&(this.statusCode=i)}y.prototype=Object.create(Error.prototype),y.prototype.constructor=y,F.ProbeError=y},{stream:285,"stream-parser":301}],263:[function(e,I,F){function s(y,t){var a=new Error(y);return a.code=t,a}function o(y){try{return decodeURIComponent(escape(y))}catch{return y}}function h(y,t,a){this.input=y.subarray(t,a),this.start=t;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw s("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}h.prototype.each=function(y){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,y)}},h.prototype.read_uint16=function(y){var t=this.input;if(y+2>t.length)throw s("unexpected EOF","EBADDATA");return this.big_endian?t[y]*256+t[y+1]:t[y]+t[y+1]*256},h.prototype.read_uint32=function(y){var t=this.input;if(y+4>t.length)throw s("unexpected EOF","EBADDATA");return this.big_endian?t[y]*16777216+t[y+1]*65536+t[y+2]*256+t[y+3]:t[y]+t[y+1]*256+t[y+2]*65536+t[y+3]*16777216},h.prototype.is_subifd_link=function(y,t){return y===0&&t===34665||y===0&&t===34853||y===34665&&t===40965},h.prototype.exif_format_length=function(y){switch(y){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},h.prototype.exif_format_read=function(y,t){var a;switch(y){case 1:case 2:return a=this.input[t],a;case 6:return a=this.input[t],a|(a&128)*33554430;case 3:return a=this.read_uint16(t),a;case 8:return a=this.read_uint16(t),a|(a&32768)*131070;case 4:return a=this.read_uint32(t),a;case 9:return a=this.read_uint32(t),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},h.prototype.scan_ifd=function(y,t,a){var i=this.read_uint16(t);t+=2;for(var n=0;n<i;n++){var r=this.read_uint16(t),f=this.read_uint16(t+2),u=this.read_uint32(t+4),l=this.exif_format_length(f),m=u*l,d=m<=4?t+8:this.read_uint32(t+8),b=!1;if(d+m>this.input.length)throw s("unexpected EOF","EBADDATA");for(var g=[],_=d,p=0;p<u;p++,_+=l){var A=this.exif_format_read(f,_);if(A===null){g=null;break}g.push(A)}Array.isArray(g)&&f===2&&(g=o(String.fromCharCode.apply(null,g)),g&&g[g.length-1]==="\0"&&(g=g.slice(0,-1))),this.is_subifd_link(y,r)&&Array.isArray(g)&&Number.isInteger(g[0])&&g[0]>0&&(this.ifds_to_read.push({id:r,offset:g[0]}),b=!0);var c={is_big_endian:this.big_endian,ifd:y,tag:r,format:f,count:u,entry_offset:t+this.start,data_length:m,data_offset:d+this.start,value:g,is_subifd_link:b};if(a(c)===!1){this.aborted=!0;return}t+=12}y===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},I.exports.ExifParser=h,I.exports.get_orientation=function(y){var t=0;try{return new h(y,0,y.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return t=a.value[0],!1}),t}catch{return-1}}},{}],264:[function(e,I,F){var s=e("./common").readUInt16BE,o=e("./common").readUInt32BE;function h(u,l){if(u.length<4+l)return null;var m=o(u,l);return u.length<m+l||m<8?null:{boxtype:String.fromCharCode.apply(null,u.slice(l+4,l+8)),data:u.slice(l+8,l+m),end:l+m}}I.exports.unbox=h;function y(u,l){for(var m=0;;){var d=h(u,m);if(!d)break;switch(d.boxtype){case"ispe":l.sizes.push({width:o(d.data,4),height:o(d.data,8)});break;case"irot":l.transforms.push({type:"irot",value:d.data[0]&3});break;case"imir":l.transforms.push({type:"imir",value:d.data[0]&1});break}m=d.end}}function t(u,l,m){for(var d=0,b=0;b<m;b++)d=d*256+(u[l+b]||0);return d}function a(u,l){for(var m=u[4]>>4&15,d=u[4]&15,b=u[5]>>4&15,g=s(u,6),_=8,p=0;p<g;p++){var A=s(u,_);_+=2;var c=s(u,_);_+=2;var S=t(u,_,b);_+=b;var T=s(u,_);if(_+=2,c===0&&T===1){var x=t(u,_,m),w=t(u,_+m,d);l.item_loc[A]={length:w,offset:x+S}}_+=T*(m+d)}}function i(u,l){for(var m=s(u,4),d=6,b=0;b<m;b++){var g=h(u,d);if(!g)break;if(g.boxtype==="infe"){for(var _=s(g.data,4),p="",A=8;A<g.data.length&&g.data[A];A++)p+=String.fromCharCode(g.data[A]);l.item_inf[p]=_}d=g.end}}function n(u,l){for(var m=0;;){var d=h(u,m);if(!d)break;d.boxtype==="ipco"&&y(d.data,l),m=d.end}}function r(u,l){for(var m=4;;){var d=h(u,m);if(!d)break;d.boxtype==="iprp"&&n(d.data,l),d.boxtype==="iloc"&&a(d.data,l),d.boxtype==="iinf"&&i(d.data,l),m=d.end}}function f(u){var l=u.reduce(function(b,g){return b.width>g.width||b.width===g.width&&b.height>g.height?b:g}),m=u.reduce(function(b,g){return b.height>g.height||b.height===g.height&&b.width>g.width?b:g}),d;return l.width>m.height||l.width===m.height&&l.height>m.width?d=l:d=m,d}I.exports.readSizeFromMeta=function(u){var l={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(u,l),!!l.sizes.length){var m=f(l.sizes),d=1;l.transforms.forEach(function(g){var _={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},p={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(g.type==="imir"&&(g.value===0?d=p[d]:(d=p[d],d=_[d],d=_[d])),g.type==="irot")for(var A=0;A<g.value;A++)d=_[d]});var b=null;return l.item_inf.Exif&&(b=l.item_loc[l.item_inf.Exif]),{width:m.width,height:m.height,orientation:l.transforms.length?d:null,variants:l.sizes,exif_location:b}}},I.exports.getMimeType=function(u){var l=String.fromCharCode.apply(null,u.slice(0,4)),m={};m[l]=!0;for(var d=8;d<u.length;d+=4)m[String.fromCharCode.apply(null,u.slice(d,d+4))]=!0;if(!(!m.mif1&&!m.msf1&&!m.miaf))return l==="avif"||l==="avis"||l==="avio"?{type:"avif",mime:"image/avif"}:l==="heic"||l==="heix"?{type:"heic",mime:"image/heic"}:l==="hevc"||l==="hevx"?{type:"heic",mime:"image/heic-sequence"}:m.avif||m.avis?{type:"avif",mime:"image/avif"}:m.heic||m.heix||m.hevc||m.hevx||m.heis?m.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(e,I,F){var s=e("../common").str2arr,o=e("../common").sliceEq,h=e("../common").readUInt32BE,y=e("../miaf_utils"),t=e("../exif_utils"),a=s("ftyp");I.exports=function(i){if(!!o(i,4,a)){var n=y.unbox(i,0);if(!!n){var r=y.getMimeType(n.data);if(!!r){for(var f,u=n.end;;){var l=y.unbox(i,u);if(!l)break;if(u=l.end,l.boxtype==="mdat")return;if(l.boxtype==="meta"){f=l.data;break}}if(!!f){var m=y.readSizeFromMeta(f);if(!!m){var d={width:m.width,height:m.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(m.variants.length>1&&(d.variants=m.variants),m.orientation&&(d.orientation=m.orientation),m.exif_location&&m.exif_location.offset+m.exif_location.length<=i.length){var b=h(i,m.exif_location.offset),g=i.slice(m.exif_location.offset+b+4,m.exif_location.offset+m.exif_location.length),_=t.get_orientation(g);_>0&&(d.orientation=_)}return d}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(e,I,F){var s=e("../common").str2arr,o=e("../common").sliceEq,h=e("../common").readUInt16LE,y=s("BM");I.exports=function(t){if(!(t.length<26)&&!!o(t,0,y))return{width:h(t,18),height:h(t,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(e,I,F){var s=e("../common").str2arr,o=e("../common").sliceEq,h=e("../common").readUInt16LE,y=s("GIF87a"),t=s("GIF89a");I.exports=function(a){if(!(a.length<10)&&!(!o(a,0,y)&&!o(a,0,t)))return{width:h(a,6),height:h(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(e,I,F){var s=e("../common").readUInt16LE,o=0,h=1,y=16;I.exports=function(t){var a=s(t,0),i=s(t,2),n=s(t,4);if(!(a!==o||i!==h||!n)){for(var r=[],f={width:0,height:0},u=0;u<n;u++){var l=t[6+y*u]||256,m=t[6+y*u+1]||256,d={width:l,height:m};r.push(d),(l>f.width||m>f.height)&&(f=d)}return{width:f.width,height:f.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(e,I,F){var s=e("../common").readUInt16BE,o=e("../common").str2arr,h=e("../common").sliceEq,y=e("../exif_utils"),t=o("Exif\0\0");I.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var i=2;;){for(;;){if(a.length-i<2)return;if(a[i++]===255)break}for(var n=a[i++],r;n===255;)n=a[i++];if(208<=n&&n<=217||n===1)r=0;else if(192<=n&&n<=254){if(a.length-i<2)return;r=s(a,i)-2,i+=2}else return;if(n===217||n===218)return;var f;if(n===225&&r>=10&&h(a,i,t)&&(f=y.get_orientation(a.slice(i+6,i+r))),r>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(a.length-i<r)return;var u={width:s(a,i+3),height:s(a,i+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(u.orientation=f),u}i+=r}}},{"../common":262,"../exif_utils":263}],270:[function(e,I,F){var s=e("../common").str2arr,o=e("../common").sliceEq,h=e("../common").readUInt32BE,y=s(`\x89PNG\r

`),t=s("IHDR");I.exports=function(a){if(!(a.length<24)&&!!o(a,0,y)&&!!o(a,12,t))return{width:h(a,16),height:h(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(e,I,F){var s=e("../common").str2arr,o=e("../common").sliceEq,h=e("../common").readUInt32BE,y=s("8BPS\0");I.exports=function(t){if(!(t.length<6+16)&&!!o(t,0,y))return{width:h(t,6+12),height:h(t,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(e,I,F){function s(l){return l===32||l===9||l===13||l===10}function o(l){return typeof l=="number"&&isFinite(l)&&l>0}function h(l){var m=0,d=l.length;for(l[0]===239&&l[1]===187&&l[2]===191&&(m=3);m<d&&s(l[m]);)m++;return m===d?!1:l[m]===60}var y=/<[-_.:a-zA-Z0-9][^>]*>/,t=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(l){var m=l.match(a),d=l.match(i),b=l.match(n);return{width:m&&(m[1]||m[2]),height:d&&(d[1]||d[2]),viewbox:b&&(b[1]||b[2])}}function u(l){return r.test(l)?l.match(r)[0]:"px"}I.exports=function(l){if(!!h(l)){for(var m="",d=0;d<l.length;d++)m+=String.fromCharCode(l[d]);var b=(m.match(y)||[""])[0];if(!!t.test(b)){var g=f(b),_=parseFloat(g.width),p=parseFloat(g.height);if(g.width&&g.height)return!o(_)||!o(p)?void 0:{width:_,height:p,type:"svg",mime:"image/svg+xml",wUnits:u(g.width),hUnits:u(g.height)};var A=(g.viewbox||"").split(" "),c={width:A[2],height:A[3]},S=parseFloat(c.width),T=parseFloat(c.height);if(!(!o(S)||!o(T))&&u(c.width)===u(c.height)){var x=S/T;return g.width?o(_)?{width:_,height:_/x,type:"svg",mime:"image/svg+xml",wUnits:u(g.width),hUnits:u(g.width)}:void 0:g.height?o(p)?{width:p*x,height:p,type:"svg",mime:"image/svg+xml",wUnits:u(g.height),hUnits:u(g.height)}:void 0:{width:S,height:T,type:"svg",mime:"image/svg+xml",wUnits:u(c.width),hUnits:u(c.height)}}}}}},{}],273:[function(e,I,F){var s=e("../common").str2arr,o=e("../common").sliceEq,h=e("../common").readUInt16LE,y=e("../common").readUInt16BE,t=e("../common").readUInt32LE,a=e("../common").readUInt32BE,i=s("II*\0"),n=s("MM\0*");function r(l,m,d){return d?y(l,m):h(l,m)}function f(l,m,d){return d?a(l,m):t(l,m)}function u(l,m,d){var b=r(l,m+2,d),g=f(l,m+4,d);return g!==1||b!==3&&b!==4?null:b===3?r(l,m+8,d):f(l,m+8,d)}I.exports=function(l){if(!(l.length<8)&&!(!o(l,0,i)&&!o(l,0,n))){var m=l[0]===77,d=f(l,4,m)-8;if(!(d<0)){var b=d+8;if(!(l.length-b<2)){var g=r(l,b+0,m)*12;if(!(g<=0)&&(b+=2,!(l.length-b<g))){var _,p,A,c;for(_=0;_<g;_+=12)c=r(l,b+_,m),c===256?p=u(l,b+_,m):c===257&&(A=u(l,b+_,m));if(p&&A)return{width:p,height:A,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(e,I,F){var s=e("../common").str2arr,o=e("../common").sliceEq,h=e("../common").readUInt16LE,y=e("../common").readUInt32LE,t=e("../exif_utils"),a=s("RIFF"),i=s("WEBP");function n(u,l){if(!(u[l+3]!==157||u[l+4]!==1||u[l+5]!==42))return{width:h(u,l+6)&16383,height:h(u,l+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(u,l){if(u[l]===47){var m=y(u,l+1);return{width:(m&16383)+1,height:(m>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function f(u,l){return{width:(u[l+6]<<16|u[l+5]<<8|u[l+4])+1,height:(u[l+9]<<l|u[l+8]<<8|u[l+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}I.exports=function(u){if(!(u.length<16)&&!(!o(u,0,a)&&!o(u,8,i))){var l=12,m=null,d=0,b=y(u,4)+8;if(!(b>u.length)){for(;l+8<b;){if(u[l]===0){l++;continue}var g=String.fromCharCode.apply(null,u.slice(l,l+4)),_=y(u,l+4);g==="VP8 "&&_>=10?m=m||n(u,l+8):g==="VP8L"&&_>=9?m=m||r(u,l+8):g==="VP8X"&&_>=10?m=m||f(u,l+8):g==="EXIF"&&(d=t.get_orientation(u.slice(l+8,l+8+_)),l=1/0),l+=8+_}if(!!m)return d>0&&(m.orientation=d),m}}}},{"../common":262,"../exif_utils":263}],275:[function(e,I,F){I.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(e,I,F){var s=e("./lib/parsers_sync");function o(h){for(var y=Object.keys(s),t=0;t<y.length;t++){var a=s[y[t]](h);if(a)return a}return null}I.exports=function(y){return o(y)},I.exports.parsers=s},{"./lib/parsers_sync":275}],277:[function(e,I,F){var s=I.exports={},o,h;function y(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=y}catch{o=y}try{typeof clearTimeout=="function"?h=clearTimeout:h=t}catch{h=t}})();function a(g){if(o===setTimeout)return setTimeout(g,0);if((o===y||!o)&&setTimeout)return o=setTimeout,setTimeout(g,0);try{return o(g,0)}catch{try{return o.call(null,g,0)}catch{return o.call(this,g,0)}}}function i(g){if(h===clearTimeout)return clearTimeout(g);if((h===t||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(g);try{return h(g)}catch{try{return h.call(null,g)}catch{return h.call(this,g)}}}var n=[],r=!1,f,u=-1;function l(){!r||!f||(r=!1,f.length?n=f.concat(n):u=-1,n.length&&m())}function m(){if(!r){var g=a(l);r=!0;for(var _=n.length;_;){for(f=n,n=[];++u<_;)f&&f[u].run();u=-1,_=n.length}f=null,r=!1,i(g)}}s.nextTick=function(g){var _=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)_[p-1]=arguments[p];n.push(new d(g,_)),n.length===1&&!r&&a(m)};function d(g,_){this.fun=g,this.array=_}d.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function b(){}s.on=b,s.addListener=b,s.once=b,s.off=b,s.removeListener=b,s.removeAllListeners=b,s.emit=b,s.prependListener=b,s.prependOnceListener=b,s.listeners=function(g){return[]},s.binding=function(g){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(g){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],278:[function(e,I,F){(function(s){(function(){for(var o=e("performance-now"),h=typeof window=="undefined"?s:window,y=["moz","webkit"],t="AnimationFrame",a=h["request"+t],i=h["cancel"+t]||h["cancelRequest"+t],n=0;!a&&n<y.length;n++)a=h[y[n]+"Request"+t],i=h[y[n]+"Cancel"+t]||h[y[n]+"CancelRequest"+t];if(!a||!i){var r=0,f=0,u=[],l=1e3/60;a=function(m){if(u.length===0){var d=o(),b=Math.max(0,l-(d-r));r=b+d,setTimeout(function(){var g=u.slice(0);u.length=0;for(var _=0;_<g.length;_++)if(!g[_].cancelled)try{g[_].callback(r)}catch(p){setTimeout(function(){throw p},0)}},Math.round(b))}return u.push({handle:++f,callback:m,cancelled:!1}),f},i=function(m){for(var d=0;d<u.length;d++)u[d].handle===m&&(u[d].cancelled=!0)}}I.exports=function(m){return a.call(h,m)},I.exports.cancel=function(){i.apply(h,arguments)},I.exports.polyfill=function(m){m||(m=h),m.requestAnimationFrame=a,m.cancelAnimationFrame=i}}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"performance-now":252}],279:[function(e,I,F){var s=e("array-bounds"),o=e("color-normalize"),h=e("update-diff"),y=e("pick-by-alias"),t=e("object-assign"),a=e("flatten-vertex-data"),i=e("to-float32"),n=i.float32,r=i.fract32;I.exports=u;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function u(l,m){if(typeof l=="function"?(m||(m={}),m.regl=l):m=l,m.length&&(m.positions=m),l=m.regl,!l.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d=l._gl,b,g,_,p,A,c,S={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},T=[];return p=l.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),g=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),_=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),A=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=l.buffer({usage:"static",type:"float",data:f}),C(m),b=l({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:l.prop("range"),lineWidth:l.prop("lineWidth"),capSize:l.prop("capSize"),opacity:l.prop("opacity"),scale:l.prop("scale"),translate:l.prop("translate"),scaleFract:l.prop("scaleFract"),translateFract:l.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:p,offset:function(E,L){return L.offset*4},divisor:1},position:{buffer:g,offset:function(E,L){return L.offset*8},divisor:1},positionFract:{buffer:_,offset:function(E,L){return L.offset*8},divisor:1},error:{buffer:A,offset:function(E,L){return L.offset*16},divisor:1},direction:{buffer:c,stride:24,offset:0},lineOffset:{buffer:c,stride:24,offset:8},capOffset:{buffer:c,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:l.prop("viewport")},viewport:l.prop("viewport"),stencil:!1,instances:l.prop("count"),count:f.length}),t(x,{update:C,draw:w,destroy:M,regl:l,gl:d,canvas:d.canvas,groups:T}),x;function x(E){E?C(E):E===null&&M(),w()}function w(E){if(typeof E=="number")return v(E);E&&!Array.isArray(E)&&(E=[E]),l._refresh(),T.forEach(function(L,z){if(!!L){if(E&&(E[z]?L.draw=!0:L.draw=!1),!L.draw){L.draw=!0;return}v(z)}})}function v(E){typeof E=="number"&&(E=T[E]),E!=null&&(!(E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1)||(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],b(E),E.after&&E.after(E)))}function C(E){if(!!E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,z=0;if(x.groups=T=E.map(function(W,re){var Q=T[re];if(W)typeof W=="function"?W={after:W}:typeof W[0]=="number"&&(W={positions:W});else return Q;return W=y(W,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),Q||(T[re]=Q={id:re,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},W=t({},S,W)),h(Q,W,[{lineWidth:function(Z){return+Z*.5},capSize:function(Z){return+Z*.5},opacity:parseFloat,errors:function(Z){return Z=a(Z),z+=Z.length,Z},positions:function(Z,K){return Z=a(Z,"float64"),K.count=Math.floor(Z.length/2),K.bounds=s(Z,2),K.offset=L,L+=K.count,Z}},{color:function(Z,K){var le=K.count;if(Z||(Z="transparent"),!Array.isArray(Z)||typeof Z[0]=="number"){var fe=Z;Z=Array(le);for(var ue=0;ue<le;ue++)Z[ue]=fe}if(Z.length<le)throw Error("Not enough colors");for(var V=new Uint8Array(le*4),j=0;j<le;j++){var ee=o(Z[j],"uint8");V.set(ee,j*4)}return V},range:function(Z,K,le){var fe=K.bounds;return Z||(Z=fe),K.scale=[1/(Z[2]-Z[0]),1/(Z[3]-Z[1])],K.translate=[-Z[0],-Z[1]],K.scaleFract=r(K.scale),K.translateFract=r(K.translate),Z},viewport:function(Z){var K;return Array.isArray(Z)?K={x:Z[0],y:Z[1],width:Z[2]-Z[0],height:Z[3]-Z[1]}:Z?(K={x:Z.x||Z.left||0,y:Z.y||Z.top||0},Z.right?K.width=Z.right-K.x:K.width=Z.w||Z.width||0,Z.bottom?K.height=Z.bottom-K.y:K.height=Z.h||Z.height||0):K={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},K}}]),Q}),L||z){var O=T.reduce(function(W,re,Q){return W+(re?re.count:0)},0),R=new Float64Array(O*2),D=new Uint8Array(O*4),H=new Float32Array(O*4);T.forEach(function(W,re){if(!!W){var Q=W.positions,Z=W.count,K=W.offset,le=W.color,fe=W.errors;!Z||(D.set(le,K*4),H.set(fe,K*4),R.set(Q,K*2))}});var B=n(R);g(B);var $=r(R,B);_($),p(D),A(H)}}}function M(){g.destroy(),_.destroy(),p.destroy(),A.destroy(),c.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(e,I,F){var s=e("color-normalize"),o=e("array-bounds"),h=e("object-assign"),y=e("glslify"),t=e("pick-by-alias"),a=e("flatten-vertex-data"),i=e("earcut"),n=e("array-normalize"),r=e("to-float32"),f=r.float32,u=r.fract32,l=e("es6-weak-map"),m=e("parse-rect"),d=e("array-find-index");I.exports=b;function b(g,_){if(!(this instanceof b))return new b(g,_);if(typeof g=="function"?(_||(_={}),_.regl=g):_=g,_.length&&(_.positions=_),g=_.regl,!g.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=g._gl,this.regl=g,this.passes=[],this.shaders=b.shaders.has(g)?b.shaders.get(g):b.shaders.set(g,b.createShaders(g)).get(g),this.update(_)}b.dashMult=2,b.maxPatternLength=256,b.precisionThreshold=3e6,b.maxPoints=1e4,b.maxLines=2048,b.shaders=new l,b.createShaders=function(g){var _=g.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:g.prop("count"),count:4,offset:0,uniforms:{miterMode:function(T,x){return x.join==="round"?2:1},miterLimit:g.prop("miterLimit"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),thickness:g.prop("thickness"),dashTexture:g.prop("dashTexture"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),dashLength:g.prop("dashLength"),viewport:function(T,x){return[x.viewport.x,x.viewport.y,T.viewportWidth,T.viewportHeight]},depth:g.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(T,x){return!x.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport")},A=g(h({vert:y([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:y([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:_,divisor:0,stride:8,offset:0},lineTop:{buffer:_,divisor:0,stride:8,offset:4},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p)),c;try{c=g(h({cull:{enable:!0,face:"back"},vert:y([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:y([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:_,divisor:0,stride:8,offset:0},lineTop:{buffer:_,divisor:0,stride:8,offset:4},aColor:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:g.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch{c=A}var S=g({primitive:"triangle",elements:function(T,x){return x.triangles},offset:0,vert:y([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:y([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:g.prop("scale"),color:g.prop("fill"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),viewport:function(T,x){return[x.viewport.x,x.viewport.y,T.viewportWidth,T.viewportHeight]}},attributes:{position:{buffer:g.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport});return{fill:S,rect:A,miter:c}},b.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},b.prototype.render=function(){for(var g,_=[],p=arguments.length;p--;)_[p]=arguments[p];_.length&&(g=this).update.apply(g,_),this.draw()},b.prototype.draw=function(){for(var g=this,_=[],p=arguments.length;p--;)_[p]=arguments[p];return(_.length?_:this.passes).forEach(function(A,c){var S;if(A&&Array.isArray(A))return(S=g).draw.apply(S,A);typeof A=="number"&&(A=g.passes[A]),A&&A.count>1&&A.opacity&&(g.regl._refresh(),A.fill&&A.triangles&&A.triangles.length>2&&g.shaders.fill(A),A.thickness&&(A.scale[0]*A.viewport.width>b.precisionThreshold||A.scale[1]*A.viewport.height>b.precisionThreshold||A.join==="rect"||!A.join&&(A.thickness<=2||A.count>=b.maxPoints)?g.shaders.rect(A):g.shaders.miter(A)))}),this},b.prototype.update=function(g){var _=this;if(!!g){g.length!=null?typeof g[0]=="number"&&(g=[{positions:g}]):Array.isArray(g)||(g=[g]);var p=this,A=p.regl,c=p.gl;if(g.forEach(function(v,C){var M=_.passes[C];if(v!==void 0){if(v===null){_.passes[C]=null;return}if(typeof v[0]=="number"&&(v={positions:v}),v=t(v,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),M||(_.passes[C]=M={id:C,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:A.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:A.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},v=h({},b.defaults,v)),v.thickness!=null&&(M.thickness=parseFloat(v.thickness)),v.opacity!=null&&(M.opacity=parseFloat(v.opacity)),v.miterLimit!=null&&(M.miterLimit=parseFloat(v.miterLimit)),v.overlay!=null&&(M.overlay=!!v.overlay,C<b.maxLines&&(M.depth=2*(b.maxLines-1-C%b.maxLines)/b.maxLines-1)),v.join!=null&&(M.join=v.join),v.hole!=null&&(M.hole=v.hole),v.fill!=null&&(M.fill=v.fill?s(v.fill,"uint8"):null),v.viewport!=null&&(M.viewport=m(v.viewport)),M.viewport||(M.viewport=m([c.drawingBufferWidth,c.drawingBufferHeight])),v.close!=null&&(M.close=v.close),v.positions===null&&(v.positions=[]),v.positions){var E,L;if(v.positions.x&&v.positions.y){var z=v.positions.x,O=v.positions.y;L=M.count=Math.max(z.length,O.length),E=new Float64Array(L*2);for(var R=0;R<L;R++)E[R*2]=z[R],E[R*2+1]=O[R]}else E=a(v.positions,"float64"),L=M.count=Math.floor(E.length/2);var D=M.bounds=o(E,2);if(M.fill){for(var H=[],B={},$=0,W=0,re=0,Q=M.count;W<Q;W++){var Z=E[W*2],K=E[W*2+1];isNaN(Z)||isNaN(K)||Z==null||K==null?(Z=E[$*2],K=E[$*2+1],B[W]=$):$=W,H[re++]=Z,H[re++]=K}if(v.splitNull){M.count-1 in B||(B[M.count]=M.count-1);var le=Object.keys(B).map(Number).sort(function(ot,ht){return ot-ht}),fe=[],ue=0,V=M.hole!=null?M.hole[0]:null;if(V!=null){var j=d(le,function(ot){return ot>=V});le=le.slice(0,j),le.push(V)}for(var ee=function(ot){var ht=H.slice(ue*2,le[ot]*2).concat(V?H.slice(V*2):[]),Ke=(M.hole||[]).map(function(We){return We-V+(le[ot]-ue)}),Pe=i(ht,Ke);Pe=Pe.map(function(We){return We+ue+(We+ue<le[ot]?0:V-le[ot])}),fe.push.apply(fe,Pe),ue=le[ot]+1},q=0;q<le.length;q++)ee(q);for(var X=0,J=fe.length;X<J;X++)B[fe[X]]!=null&&(fe[X]=B[fe[X]]);M.triangles=fe}else{for(var ie=i(H,M.hole||[]),ne=0,oe=ie.length;ne<oe;ne++)B[ie[ne]]!=null&&(ie[ne]=B[ie[ne]]);M.triangles=ie}}var se=new Float64Array(E);n(se,2,D);var me=new Float64Array(L*2+6);M.close?E[0]===E[L*2-2]&&E[1]===E[L*2-1]?(me[0]=se[L*2-4],me[1]=se[L*2-3]):(me[0]=se[L*2-2],me[1]=se[L*2-1]):(me[0]=se[0],me[1]=se[1]),me.set(se,2),M.close?E[0]===E[L*2-2]&&E[1]===E[L*2-1]?(me[L*2+2]=se[2],me[L*2+3]=se[3],M.count-=1):(me[L*2+2]=se[0],me[L*2+3]=se[1],me[L*2+4]=se[2],me[L*2+5]=se[3]):(me[L*2+2]=se[L*2-2],me[L*2+3]=se[L*2-1],me[L*2+4]=se[L*2-2],me[L*2+5]=se[L*2-1]);var ce=f(me);M.positionBuffer(ce);var pe=u(me,ce);M.positionFractBuffer(pe)}if(v.range?M.range=v.range:M.range||(M.range=M.bounds),(v.range||v.positions)&&M.count){var xe=M.bounds,Se=xe[2]-xe[0],Ae=xe[3]-xe[1],Ce=M.range[2]-M.range[0],Ee=M.range[3]-M.range[1];M.scale=[Se/Ce,Ae/Ee],M.translate=[-M.range[0]/Ce+xe[0]/Ce||0,-M.range[1]/Ee+xe[1]/Ee||0],M.scaleFract=u(M.scale),M.translateFract=u(M.translate)}if(v.dashes){var Oe=0,_e;if(!v.dashes||v.dashes.length<2)Oe=1,_e=new Uint8Array([255,255,255,255,255,255,255,255]);else{Oe=0;for(var Re=0;Re<v.dashes.length;++Re)Oe+=v.dashes[Re];_e=new Uint8Array(Oe*b.dashMult);for(var Ve=0,Je=255,ze=0;ze<2;ze++)for(var De=0;De<v.dashes.length;++De){for(var je=0,dt=v.dashes[De]*b.dashMult*.5;je<dt;++je)_e[Ve++]=Je;Je^=255}}M.dashLength=Oe,M.dashTexture({channels:1,data:_e,width:_e.length,height:1,mag:"linear",min:"linear"},0,0)}if(v.color){var Et=M.count,$t=v.color;$t||($t="transparent");var wt=new Uint8Array(Et*4+4);if(!Array.isArray($t)||typeof $t[0]=="number")for(var Ot=s($t,"uint8"),Vt=0;Vt<Et+1;Vt++)wt.set(Ot,Vt*4);else{for(var kt=0;kt<Et;kt++){var St=s($t[kt],"uint8");wt.set(St,kt*4)}wt.set(s($t[0],"uint8"),Et*4)}M.colorBuffer({usage:"dynamic",type:"uint8",data:wt})}}}),g.length<this.passes.length){for(var S=g.length;S<this.passes.length;S++){var T=this.passes[S];!T||(T.colorBuffer.destroy(),T.positionBuffer.destroy(),T.dashTexture.destroy())}this.passes.length=g.length}for(var x=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&x.push(this.passes[w]);return this.passes=x,this}},b.prototype.destroy=function(){return this.passes.forEach(function(g){g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(e,I,F){function s(M,E){return y(M)||a(M,E)||i(M,E)||f()}function o(M){return h(M)||t(M)||i(M)||r()}function h(M){if(Array.isArray(M))return n(M)}function y(M){if(Array.isArray(M))return M}function t(M){if(typeof Symbol!="undefined"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}function a(M,E){var L=M==null?null:typeof Symbol!="undefined"&&M[Symbol.iterator]||M["@@iterator"];if(L!=null){var z=[],O=!0,R=!1,D,H;try{for(L=L.call(M);!(O=(D=L.next()).done)&&(z.push(D.value),!(E&&z.length===E));O=!0);}catch(B){R=!0,H=B}finally{try{!O&&L.return!=null&&L.return()}finally{if(R)throw H}}return z}}function i(M,E){if(!!M){if(typeof M=="string")return n(M,E);var L=Object.prototype.toString.call(M).slice(8,-1);if(L==="Object"&&M.constructor&&(L=M.constructor.name),L==="Map"||L==="Set")return Array.from(M);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return n(M,E)}}function n(M,E){(E==null||E>M.length)&&(E=M.length);for(var L=0,z=new Array(E);L<E;L++)z[L]=M[L];return z}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=e("color-normalize"),l=e("array-bounds"),m=e("color-id"),d=e("@plotly/point-cluster"),b=e("object-assign"),g=e("glslify"),_=e("pick-by-alias"),p=e("update-diff"),A=e("flatten-vertex-data"),c=e("is-iexplorer"),S=e("to-float32"),T=e("parse-rect"),x=w;function w(M,E){var L=this;if(!(this instanceof w))return new w(M,E);typeof M=="function"?(E||(E={}),E.regl=M):(E=M,M=null),E&&E.length&&(E.positions=E),M=E.regl;var z=M._gl,O,R=[],D={},H=[],B=[null],$=[null],W=255,re=100;this.tooManyColors=c,O=M.texture({data:new Uint8Array(W*4),width:W,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),b(this,{regl:M,gl:z,groups:H,markerCache:$,markerTextures:B,palette:R,paletteIds:D,paletteTexture:O,maxColors:W,maxSize:re,canvas:z.canvas}),this.update(E);var Q={uniforms:{constPointSize:!!E.constPointSize,opacity:M.prop("opacity"),paletteSize:function(fe,ue){return[L.tooManyColors?0:W,O.height]},pixelRatio:M.context("pixelRatio"),scale:M.prop("scale"),scaleFract:M.prop("scaleFract"),translate:M.prop("translate"),translateFract:M.prop("translateFract"),markerTexture:M.prop("markerTexture"),paletteTexture:O},attributes:{x:function(fe,ue){return ue.xAttr||{buffer:ue.positionBuffer,stride:8,offset:0}},y:function(fe,ue){return ue.yAttr||{buffer:ue.positionBuffer,stride:8,offset:4}},xFract:function(fe,ue){return ue.xAttr?{constant:[0,0]}:{buffer:ue.positionFractBuffer,stride:8,offset:0}},yFract:function(fe,ue){return ue.yAttr?{constant:[0,0]}:{buffer:ue.positionFractBuffer,stride:8,offset:4}},size:function(fe,ue){return ue.size.length?{buffer:ue.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(ue.size*255/L.maxSize)]}},borderSize:function(fe,ue){return ue.borderSize.length?{buffer:ue.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(ue.borderSize*255/L.maxSize)]}},colorId:function(fe,ue){return ue.color.length?{buffer:ue.colorBuffer,stride:L.tooManyColors?8:4,offset:0}:{constant:L.tooManyColors?R.slice(ue.color*4,ue.color*4+4):[ue.color]}},borderColorId:function(fe,ue){return ue.borderColor.length?{buffer:ue.colorBuffer,stride:L.tooManyColors?8:4,offset:L.tooManyColors?4:2}:{constant:L.tooManyColors?R.slice(ue.borderColor*4,ue.borderColor*4+4):[ue.borderColor]}},isActive:function(fe,ue){return ue.activation===!0?{constant:[1]}:ue.activation?ue.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:M.prop("viewport")},viewport:M.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:M.prop("elements"),count:M.prop("count"),offset:M.prop("offset"),primitive:"points"},Z=b({},Q);Z.frag=g([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),Z.vert=g([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=M(Z);var K=b({},Q);K.frag=g([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),K.vert=g([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),c&&(K.frag=K.frag.replace("smoothstep","smoothStep"),Z.frag=Z.frag.replace("smoothstep","smoothStep")),this.drawCircle=M(K)}w.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},w.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},w.prototype.draw=function(){for(var M=this,E=arguments.length,L=new Array(E),z=0;z<E;z++)L[z]=arguments[z];var O=this.groups;if(L.length===1&&Array.isArray(L[0])&&(L[0][0]===null||Array.isArray(L[0][0]))&&(L=L[0]),this.regl._refresh(),L.length)for(var R=0;R<L.length;R++)this.drawItem(R,L[R]);else O.forEach(function(D,H){M.drawItem(H)});return this},w.prototype.drawItem=function(M,E){var L=this.groups,z=L[M];if(typeof E=="number"&&(M=E,z=L[E],E=null),!!(z&&z.count&&z.opacity)){z.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,z,E));for(var O=[],R=1;R<z.activation.length;R++)!z.activation[R]||z.activation[R]!==!0&&!z.activation[R].data.length||O.push.apply(O,o(this.getMarkerDrawOptions(R,z,E)));O.length&&this.drawMarker(O)}},w.prototype.getMarkerDrawOptions=function(M,E,L){var z=E.range,O=E.tree,R=E.viewport,D=E.activation,H=E.selectionBuffer,B=E.count;if(this.regl,!O)return L?[b({},E,{markerTexture:this.markerTextures[M],activation:D[M],count:L.length,elements:L,offset:0})]:[b({},E,{markerTexture:this.markerTextures[M],activation:D[M],offset:0})];var $=[],W=O.range(z,{lod:!0,px:[(z[2]-z[0])/R.width,(z[3]-z[1])/R.height]});if(L){for(var re=D[M],Q=re.data,Z=new Uint8Array(B),K=0;K<L.length;K++){var le=L[K];Z[le]=Q?Q[le]:1}H.subdata(Z)}for(var fe=W.length;fe--;){var ue=s(W[fe],2),V=ue[0],j=ue[1];$.push(b({},E,{markerTexture:this.markerTextures[M],activation:L?H:D[M],offset:V,count:j-V}))}return $},w.prototype.update=function(){for(var M=this,E=arguments.length,L=new Array(E),z=0;z<E;z++)L[z]=arguments[z];if(!!L.length){L.length===1&&Array.isArray(L[0])&&(L=L[0]);var O=this.groups,R=this.gl,D=this.regl,H=this.maxSize,B=this.maxColors,$=this.palette;this.groups=O=L.map(function(W,re){var Q=O[re];if(W===void 0)return Q;W===null?W={positions:null}:typeof W=="function"?W={ondraw:W}:typeof W[0]=="number"&&(W={positions:W}),W=_(W,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),W.positions===null&&(W.positions=[]),W.tooManyColors!=null&&(M.tooManyColors=W.tooManyColors),Q||(O[re]=Q={id:re,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},W=b({},w.defaults,W)),W.positions&&!("marker"in W)&&(W.marker=Q.marker,delete Q.marker),W.marker&&!("positions"in W)&&(W.positions=Q.positions,delete Q.positions);var Z=0,K=0;if(p(Q,W,[{snap:!0,size:function(Ae,Ce){return Ae==null&&(Ae=w.defaults.size),Z+=Ae&&Ae.length?1:0,Ae},borderSize:function(Ae,Ce){return Ae==null&&(Ae=w.defaults.borderSize),Z+=Ae&&Ae.length?1:0,Ae},opacity:parseFloat,color:function(Ae,Ce){return Ae==null&&(Ae=w.defaults.color),Ae=M.updateColor(Ae),K++,Ae},borderColor:function(Ae,Ce){return Ae==null&&(Ae=w.defaults.borderColor),Ae=M.updateColor(Ae),K++,Ae},bounds:function(Ae,Ce,Ee){return"range"in Ee||(Ee.range=null),Ae},positions:function(Ae,Ce,Ee){var Oe=Ce.snap,_e=Ce.positionBuffer,Re=Ce.positionFractBuffer,Ve=Ce.selectionBuffer;if(Ae.x||Ae.y)return Ae.x.length?Ce.xAttr={buffer:D.buffer(Ae.x),offset:0,stride:4,count:Ae.x.length}:Ce.xAttr={buffer:Ae.x.buffer,offset:Ae.x.offset*4||0,stride:(Ae.x.stride||1)*4,count:Ae.x.count},Ae.y.length?Ce.yAttr={buffer:D.buffer(Ae.y),offset:0,stride:4,count:Ae.y.length}:Ce.yAttr={buffer:Ae.y.buffer,offset:Ae.y.offset*4||0,stride:(Ae.y.stride||1)*4,count:Ae.y.count},Ce.count=Math.max(Ce.xAttr.count,Ce.yAttr.count),Ae;Ae=A(Ae,"float64");var Je=Ce.count=Math.floor(Ae.length/2),ze=Ce.bounds=Je?l(Ae,2):null;if(!Ee.range&&!Ce.range&&(delete Ce.range,Ee.range=ze),!Ee.marker&&!Ce.marker&&(delete Ce.marker,Ee.marker=null),Oe&&(Oe===!0||Je>Oe)?Ce.tree=d(Ae,{bounds:ze}):Oe&&Oe.length&&(Ce.tree=Oe),Ce.tree){var De={primitive:"points",usage:"static",data:Ce.tree,type:"uint32"};Ce.elements?Ce.elements(De):Ce.elements=D.elements(De)}var je=S.float32(Ae);_e({data:je,usage:"dynamic"});var dt=S.fract32(Ae,je);return Re({data:dt,usage:"dynamic"}),Ve({data:new Uint8Array(Je),type:"uint8",usage:"stream"}),Ae}},{marker:function(Ae,Ce,Ee){var Oe=Ce.activation;if(Oe.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),Oe.length=0,!Ae||typeof Ae[0]=="number"){var _e=M.addMarker(Ae);Oe[_e]=!0}else{for(var Re=[],Ve=0,Je=Math.min(Ae.length,Ce.count);Ve<Je;Ve++){var ze=M.addMarker(Ae[Ve]);Re[ze]||(Re[ze]=new Uint8Array(Ce.count)),Re[ze][Ve]=1}for(var De=0;De<Re.length;De++)if(!!Re[De]){var je={data:Re[De],type:"uint8",usage:"static"};Oe[De]?Oe[De](je):Oe[De]=D.buffer(je),Oe[De].data=Re[De]}}return Ae},range:function(Ae,Ce,Ee){var Oe=Ce.bounds;if(!!Oe)return Ae||(Ae=Oe),Ce.scale=[1/(Ae[2]-Ae[0]),1/(Ae[3]-Ae[1])],Ce.translate=[-Ae[0],-Ae[1]],Ce.scaleFract=S.fract(Ce.scale),Ce.translateFract=S.fract(Ce.translate),Ae},viewport:function(Ae){var Ce=T(Ae||[R.drawingBufferWidth,R.drawingBufferHeight]);return Ce}}]),Z){var le=Q,fe=le.count,ue=le.size,V=le.borderSize,j=le.sizeBuffer,ee=new Uint8Array(fe*2);if(ue.length||V.length)for(var q=0;q<fe;q++)ee[q*2]=Math.round((ue[q]==null?ue:ue[q])*255/H),ee[q*2+1]=Math.round((V[q]==null?V:V[q])*255/H);j({data:ee,usage:"dynamic"})}if(K){var X=Q,J=X.count,ie=X.color,ne=X.borderColor,oe=X.colorBuffer,se;if(M.tooManyColors){if(ie.length||ne.length){se=new Uint8Array(J*8);for(var me=0;me<J;me++){var ce=ie[me];se[me*8]=$[ce*4],se[me*8+1]=$[ce*4+1],se[me*8+2]=$[ce*4+2],se[me*8+3]=$[ce*4+3];var pe=ne[me];se[me*8+4]=$[pe*4],se[me*8+5]=$[pe*4+1],se[me*8+6]=$[pe*4+2],se[me*8+7]=$[pe*4+3]}}}else if(ie.length||ne.length){se=new Uint8Array(J*4+2);for(var xe=0;xe<J;xe++)ie[xe]!=null&&(se[xe*4]=ie[xe]%B,se[xe*4+1]=Math.floor(ie[xe]/B)),ne[xe]!=null&&(se[xe*4+2]=ne[xe]%B,se[xe*4+3]=Math.floor(ne[xe]/B))}oe({data:se||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return Q})}},w.prototype.addMarker=function(M){var E=this.markerTextures,L=this.regl,z=this.markerCache,O=M==null?0:z.indexOf(M);if(O>=0)return O;var R;if(M instanceof Uint8Array||M instanceof Uint8ClampedArray)R=M;else{R=new Uint8Array(M.length);for(var D=0,H=M.length;D<H;D++)R[D]=M[D]*255}var B=Math.floor(Math.sqrt(R.length));return O=E.length,z.push(M),E.push(L.texture({channels:1,data:R,radius:B,mag:"linear",min:"linear"})),O},w.prototype.updateColor=function(M){var E=this.paletteIds,L=this.palette,z=this.maxColors;Array.isArray(M)||(M=[M]);var O=[];if(typeof M[0]=="number"){var R=[];if(Array.isArray(M))for(var D=0;D<M.length;D+=4)R.push(M.slice(D,D+4));else for(var H=0;H<M.length;H+=4)R.push(M.subarray(H,H+4));M=R}for(var B=0;B<M.length;B++){var $=M[B];$=u($,"uint8");var W=m($,!1);if(E[W]==null){var re=L.length;E[W]=Math.floor(re/4),L[re]=$[0],L[re+1]=$[1],L[re+2]=$[2],L[re+3]=$[3]}O[B]=E[W]}return!this.tooManyColors&&L.length>z*4&&(this.tooManyColors=!0),this.updatePalette(L),O.length===1?O[0]:O},w.prototype.updatePalette=function(M){if(!this.tooManyColors){var E=this.maxColors,L=this.paletteTexture,z=Math.ceil(M.length*.25/E);if(z>1){M=M.slice();for(var O=M.length*.25%E;O<z*E;O++)M.push(0,0,0,0)}L.height<z&&L.resize(E,z),L.subimage({width:Math.min(M.length*.25,E),height:z,data:M},0,0)}},w.prototype.destroy=function(){return this.groups.forEach(function(M){M.sizeBuffer.destroy(),M.positionBuffer.destroy(),M.positionFractBuffer.destroy(),M.colorBuffer.destroy(),M.activation.forEach(function(E){return E&&E.destroy&&E.destroy()}),M.selectionBuffer.destroy(),M.elements&&M.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(M){return M&&M.destroy&&M.destroy()}),this};var v=e("object-assign"),C=function(E,L){var z=new x(E,L),O=z.render.bind(z);return v(O,{render:O,update:z.update.bind(z),draw:z.draw.bind(z),destroy:z.destroy.bind(z),regl:z.regl,gl:z.gl,canvas:z.gl.canvas,groups:z.groups,markers:z.markerCache,palette:z.palette}),O};I.exports=C},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(e,I,F){var s=e("regl-scatter2d"),o=e("pick-by-alias"),h=e("array-bounds"),y=e("raf"),t=e("array-range"),a=e("parse-rect"),i=e("flatten-vertex-data");I.exports=n;function n(l,m){if(!(this instanceof n))return new n(l,m);this.traces=[],this.passes={},this.regl=l,this.scatter=s(l),this.canvas=this.scatter.canvas}n.prototype.render=function(){for(var l=this,m,d=[],b=arguments.length;b--;)d[b]=arguments[b];return d.length&&(m=this).update.apply(m,d),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=y(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,y(function(){l.dirty=!1})),this)},n.prototype.update=function(){for(var l,m=[],d=arguments.length;d--;)m[d]=arguments[d];if(!!m.length){for(var b=0;b<m.length;b++)this.updateItem(b,m[b]);this.traces=this.traces.filter(Boolean);for(var g=[],_=0,p=0;p<this.traces.length;p++){for(var A=this.traces[p],c=this.traces[p].passes,S=0;S<c.length;S++)g.push(this.passes[c[S]]);A.passOffset=_,_+=A.passes.length}return(l=this.scatter).update.apply(l,g),this}},n.prototype.updateItem=function(l,m){var d=this,b=d.regl;if(m===null)return this.traces[l]=null,this;if(!m)return this;var g=o(m,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),_=this.traces[l]||(this.traces[l]={id:l,buffer:b.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([b._gl.drawingBufferWidth,b._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(g.color!=null&&(_.color=g.color),g.size!=null&&(_.size=g.size),g.marker!=null&&(_.marker=g.marker),g.borderColor!=null&&(_.borderColor=g.borderColor),g.borderSize!=null&&(_.borderSize=g.borderSize),g.opacity!=null&&(_.opacity=g.opacity),g.viewport&&(_.viewport=a(g.viewport)),g.diagonal!=null&&(_.diagonal=g.diagonal),g.upper!=null&&(_.upper=g.upper),g.lower!=null&&(_.lower=g.lower),g.data){_.buffer(i(g.data)),_.columns=g.data.length,_.count=g.data[0].length,_.bounds=[];for(var p=0;p<_.columns;p++)_.bounds[p]=h(g.data[p],1)}var A;g.range&&(_.range=g.range,A=_.range&&typeof _.range[0]!="number"),g.domain&&(_.domain=g.domain);var c=!1;g.padding!=null&&(Array.isArray(g.padding)&&g.padding.length===_.columns&&typeof g.padding[g.padding.length-1]=="number"?(_.padding=g.padding.map(u),c=!0):_.padding=u(g.padding));var S=_.columns,T=_.count,x=_.viewport.width,w=_.viewport.height,v=_.viewport.x,C=_.viewport.y,M=x/S,E=w/S;_.passes=[];for(var L=0;L<S;L++)for(var z=0;z<S;z++)if(!(!_.diagonal&&z===L)&&!(!_.upper&&L>z)&&!(!_.lower&&L<z)){var O=r(_.id,L,z),R=this.passes[O]||(this.passes[O]={});if(g.data&&(g.transpose?R.positions={x:{buffer:_.buffer,offset:z,count:T,stride:S},y:{buffer:_.buffer,offset:L,count:T,stride:S}}:R.positions={x:{buffer:_.buffer,offset:z*T,count:T},y:{buffer:_.buffer,offset:L*T,count:T}},R.bounds=f(_.bounds,L,z)),g.domain||g.viewport||g.data){var D=c?f(_.padding,L,z):_.padding;if(_.domain){var H=f(_.domain,L,z),B=H[0],$=H[1],W=H[2],re=H[3];R.viewport=[v+B*x+D[0],C+$*w+D[1],v+W*x-D[2],C+re*w-D[3]]}else R.viewport=[v+z*M+M*D[0],C+L*E+E*D[1],v+(z+1)*M-M*D[2],C+(L+1)*E-E*D[3]]}g.color&&(R.color=_.color),g.size&&(R.size=_.size),g.marker&&(R.marker=_.marker),g.borderSize&&(R.borderSize=_.borderSize),g.borderColor&&(R.borderColor=_.borderColor),g.opacity&&(R.opacity=_.opacity),g.range&&(R.range=A?f(_.range,L,z):_.range||R.bounds),_.passes.push(O)}return this},n.prototype.draw=function(){for(var l,m=[],d=arguments.length;d--;)m[d]=arguments[d];if(!m.length)this.scatter.draw();else{for(var b=[],g=0;g<m.length;g++)if(typeof m[g]=="number"){var _=this.traces[m[g]],p=_.passes,A=_.passOffset;b.push.apply(b,t(A,A+p.length))}else if(m[g].length){var c=m[g],S=this.traces[g],T=S.passes,x=S.passOffset;T=T.map(function(w,v){b[x+v]=c})}(l=this.scatter).draw.apply(l,b)}return this},n.prototype.destroy=function(){return this.traces.forEach(function(l){l.buffer&&l.buffer.destroy&&l.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(l,m,d){var b=l.id!=null?l.id:l,g=m,_=d,p=b<<16|(g&255)<<8|_&255;return p}function f(l,m,d){var b,g,_,p,A=l[m],c=l[d];return A.length>2?(b=A[1],g=A[3]):A.length?(b=A[0],g=A[1]):(b=A.y,A.x+A.width,g=A.y+A.height),c.length>2?(_=c[0],p=c[2]):c.length?(_=c[0],p=c[1]):(_=c.x,p=c.x+c.width,c.y+c.height),[_,b,p,g]}function u(l){if(typeof l=="number")return[l,l,l,l];if(l.length===2)return[l[0],l[1],l[0],l[1]];var m=a(l);return[m.x,m.y,m.x+m.width,m.y+m.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?I.exports=o():s.createREGL=o()})(this,function(){function s(st,Gt){this.id=me++,this.type=st,this.data=Gt}function o(st){if(st.length===0)return[];var Gt=st.charAt(0),Zt=st.charAt(st.length-1);if(1<st.length&&Gt===Zt&&(Gt==='"'||Gt==="'"))return['"'+st.substr(1,st.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Gt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(st))return o(st.substr(0,Gt.index)).concat(o(Gt[1])).concat(o(st.substr(Gt.index+Gt[0].length)));if(Gt=st.split("."),Gt.length===1)return['"'+st.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(st=[],Zt=0;Zt<Gt.length;++Zt)st=st.concat(o(Gt[Zt]));return st}function h(st){return"["+o(st).join("][")+"]"}function y(st,Gt){if(typeof st=="function")return new s(0,st);if(typeof st=="number"||typeof st=="boolean")return new s(5,st);if(Array.isArray(st))return new s(6,st.map(function(Zt,Ht){return y(Zt)}));if(st instanceof s)return st}function t(){var st={"":0},Gt=[""];return{id:function(Zt){var Ht=st[Zt];return Ht||(Ht=st[Zt]=Gt.length,Gt.push(Zt),Ht)},str:function(Zt){return Gt[Zt]}}}function a(st,Gt,Zt){function Ht(){var Te=window.innerWidth,ke=window.innerHeight;st!==document.body&&(ke=_r.getBoundingClientRect(),Te=ke.right-ke.left,ke=ke.bottom-ke.top),_r.width=Zt*Te,_r.height=Zt*ke}var _r=document.createElement("canvas");se(_r.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),st.appendChild(_r),st===document.body&&(_r.style.position="absolute",se(st.style,{margin:0,padding:0}));var it;return st!==document.body&&typeof ResizeObserver=="function"?(it=new ResizeObserver(function(){setTimeout(Ht)}),it.observe(st)):window.addEventListener("resize",Ht,!1),Ht(),{canvas:_r,onDestroy:function(){it?it.disconnect():window.removeEventListener("resize",Ht),st.removeChild(_r)}}}function i(st,Gt){function Zt(Ht){try{return st.getContext(Ht,Gt)}catch{return null}}return Zt("webgl")||Zt("experimental-webgl")||Zt("webgl-experimental")}function n(st){return typeof st=="string"?st.split():st}function r(st){return typeof st=="string"?document.querySelector(st):st}function f(st){var Gt=st||{},Zt,Ht,_r,it;st={};var Te=[],ke=[],Ge=typeof window=="undefined"?1:window.devicePixelRatio,Ye=!1,qe={},at=function(pt){},et=function(){};if(typeof Gt=="string"?Zt=document.querySelector(Gt):typeof Gt=="object"&&(typeof Gt.nodeName=="string"&&typeof Gt.appendChild=="function"&&typeof Gt.getBoundingClientRect=="function"?Zt=Gt:typeof Gt.drawArrays=="function"||typeof Gt.drawElements=="function"?(it=Gt,_r=it.canvas):("gl"in Gt?it=Gt.gl:"canvas"in Gt?_r=r(Gt.canvas):"container"in Gt&&(Ht=r(Gt.container)),"attributes"in Gt&&(st=Gt.attributes),"extensions"in Gt&&(Te=n(Gt.extensions)),"optionalExtensions"in Gt&&(ke=n(Gt.optionalExtensions)),"onDone"in Gt&&(at=Gt.onDone),"profile"in Gt&&(Ye=!!Gt.profile),"pixelRatio"in Gt&&(Ge=+Gt.pixelRatio),"cachedCode"in Gt&&(qe=Gt.cachedCode))),Zt&&(Zt.nodeName.toLowerCase()==="canvas"?_r=Zt:Ht=Zt),!it){if(!_r){if(Zt=a(Ht||document.body,at,Ge),!Zt)return null;_r=Zt.canvas,et=Zt.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),it=i(_r,st)}return it?{gl:it,canvas:_r,container:Ht,extensions:Te,optionalExtensions:ke,pixelRatio:Ge,profile:Ye,cachedCode:qe,onDone:at,onDestroy:et}:(et(),at("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function u(st,Gt){function Zt(Te){Te=Te.toLowerCase();var ke;try{ke=Ht[Te]=st.getExtension(Te)}catch{}return!!ke}for(var Ht={},_r=0;_r<Gt.extensions.length;++_r){var it=Gt.extensions[_r];if(!Zt(it))return Gt.onDestroy(),Gt.onDone('"'+it+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Gt.optionalExtensions.forEach(Zt),{extensions:Ht,restore:function(){Object.keys(Ht).forEach(function(Te){if(Ht[Te]&&!Zt(Te))throw Error("(regl): error restoring extension "+Te)})}}}function l(st,Gt){for(var Zt=Array(st),Ht=0;Ht<st;++Ht)Zt[Ht]=Gt(Ht);return Zt}function m(st){var Gt,Zt;return Gt=(65535<st)<<4,st>>>=Gt,Zt=(255<st)<<3,st>>>=Zt,Gt|=Zt,Zt=(15<st)<<2,st>>>=Zt,Gt|=Zt,Zt=(3<st)<<1,Gt|Zt|st>>>Zt>>1}function d(){function st(Ht){e:{for(var _r=16;268435456>=_r;_r*=16)if(Ht<=_r){Ht=_r;break e}Ht=0}return _r=Zt[m(Ht)>>2],0<_r.length?_r.pop():new ArrayBuffer(Ht)}function Gt(Ht){Zt[m(Ht.byteLength)>>2].push(Ht)}var Zt=l(8,function(){return[]});return{alloc:st,free:Gt,allocType:function(Ht,_r){var it=null;switch(Ht){case 5120:it=new Int8Array(st(_r),0,_r);break;case 5121:it=new Uint8Array(st(_r),0,_r);break;case 5122:it=new Int16Array(st(2*_r),0,_r);break;case 5123:it=new Uint16Array(st(2*_r),0,_r);break;case 5124:it=new Int32Array(st(4*_r),0,_r);break;case 5125:it=new Uint32Array(st(4*_r),0,_r);break;case 5126:it=new Float32Array(st(4*_r),0,_r);break;default:return null}return it.length!==_r?it.subarray(0,_r):it},freeType:function(Ht){Gt(Ht.buffer)}}}function b(st){return!!st&&typeof st=="object"&&Array.isArray(st.shape)&&Array.isArray(st.stride)&&typeof st.offset=="number"&&st.shape.length===st.stride.length&&(Array.isArray(st.data)||Ce(st.data))}function g(st,Gt,Zt,Ht,_r,it){for(var Te=0;Te<Gt;++Te)for(var ke=st[Te],Ge=0;Ge<Zt;++Ge)for(var Ye=ke[Ge],qe=0;qe<Ht;++qe)_r[it++]=Ye[qe]}function _(st,Gt,Zt,Ht,_r){for(var it=1,Te=Zt+1;Te<Gt.length;++Te)it*=Gt[Te];var ke=Gt[Zt];if(Gt.length-Zt===4){var Ge=Gt[Zt+1],Ye=Gt[Zt+2];for(Gt=Gt[Zt+3],Te=0;Te<ke;++Te)g(st[Te],Ge,Ye,Gt,Ht,_r),_r+=it}else for(Te=0;Te<ke;++Te)_(st[Te],Gt,Zt+1,Ht,_r),_r+=it}function p(st){return _e[Object.prototype.toString.call(st)]|0}function A(st,Gt){for(var Zt=0;Zt<Gt.length;++Zt)st[Zt]=Gt[Zt]}function c(st,Gt,Zt,Ht,_r,it,Te){for(var ke=0,Ge=0;Ge<Zt;++Ge)for(var Ye=0;Ye<Ht;++Ye)st[ke++]=Gt[_r*Ge+it*Ye+Te]}function S(st,Gt,Zt,Ht){function _r(at){this.id=Ge++,this.buffer=st.createBuffer(),this.type=at,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Zt.profile&&(this.stats={size:0})}function it(at,et,pt){at.byteLength=et.byteLength,st.bufferData(at.type,et,pt)}function Te(at,et,pt,_t,Pt,Xt){if(at.usage=pt,Array.isArray(et)){if(at.dtype=_t||5126,0<et.length)if(Array.isArray(et[0])){Pt=ze(et);for(var zt=_t=1;zt<Pt.length;++zt)_t*=Pt[zt];at.dimension=_t,et=Je(et,Pt,at.dtype),it(at,et,pt),Xt?at.persistentData=et:Se.freeType(et)}else typeof et[0]=="number"?(at.dimension=Pt,Pt=Se.allocType(at.dtype,et.length),A(Pt,et),it(at,Pt,pt),Xt?at.persistentData=Pt:Se.freeType(Pt)):Ce(et[0])&&(at.dimension=et[0].length,at.dtype=_t||p(et[0])||5126,et=Je(et,[et.length,et[0].length],at.dtype),it(at,et,pt),Xt?at.persistentData=et:Se.freeType(et))}else if(Ce(et))at.dtype=_t||p(et),at.dimension=Pt,it(at,et,pt),Xt&&(at.persistentData=new Uint8Array(new Uint8Array(et.buffer)));else if(b(et)){Pt=et.shape;var ur=et.stride,zt=et.offset,gr=0,Mr=0,un=0,zr=0;Pt.length===1?(gr=Pt[0],Mr=1,un=ur[0],zr=0):Pt.length===2&&(gr=Pt[0],Mr=Pt[1],un=ur[0],zr=ur[1]),at.dtype=_t||p(et.data)||5126,at.dimension=Mr,Pt=Se.allocType(at.dtype,gr*Mr),c(Pt,et.data,gr,Mr,un,zr,zt),it(at,Pt,pt),Xt?at.persistentData=Pt:Se.freeType(Pt)}else et instanceof ArrayBuffer&&(at.dtype=5121,at.dimension=Pt,it(at,et,pt),Xt&&(at.persistentData=new Uint8Array(new Uint8Array(et))))}function ke(at){Gt.bufferCount--,Ht(at),st.deleteBuffer(at.buffer),at.buffer=null,delete Ye[at.id]}var Ge=0,Ye={};_r.prototype.bind=function(){st.bindBuffer(this.type,this.buffer)},_r.prototype.destroy=function(){ke(this)};var qe=[];return Zt.profile&&(Gt.getTotalBufferSize=function(){var at=0;return Object.keys(Ye).forEach(function(et){at+=Ye[et].stats.size}),at}),{create:function(at,et,pt,_t){function Pt(zt){var ur=35044,gr=null,Mr=0,un=0,zr=1;return Array.isArray(zt)||Ce(zt)||b(zt)||zt instanceof ArrayBuffer?gr=zt:typeof zt=="number"?Mr=zt|0:zt&&("data"in zt&&(gr=zt.data),"usage"in zt&&(ur=Ve[zt.usage]),"type"in zt&&(un=Re[zt.type]),"dimension"in zt&&(zr=zt.dimension|0),"length"in zt&&(Mr=zt.length|0)),Xt.bind(),gr?Te(Xt,gr,ur,un,zr,_t):(Mr&&st.bufferData(Xt.type,Mr,ur),Xt.dtype=un||5121,Xt.usage=ur,Xt.dimension=zr,Xt.byteLength=Mr),Zt.profile&&(Xt.stats.size=Xt.byteLength*De[Xt.dtype]),Pt}Gt.bufferCount++;var Xt=new _r(et);return Ye[Xt.id]=Xt,pt||Pt(at),Pt._reglType="buffer",Pt._buffer=Xt,Pt.subdata=function(zt,ur){var gr=(ur||0)|0,Mr;if(Xt.bind(),Ce(zt)||zt instanceof ArrayBuffer)st.bufferSubData(Xt.type,gr,zt);else if(Array.isArray(zt)){if(0<zt.length)if(typeof zt[0]=="number"){var un=Se.allocType(Xt.dtype,zt.length);A(un,zt),st.bufferSubData(Xt.type,gr,un),Se.freeType(un)}else(Array.isArray(zt[0])||Ce(zt[0]))&&(Mr=ze(zt),un=Je(zt,Mr,Xt.dtype),st.bufferSubData(Xt.type,gr,un),Se.freeType(un))}else if(b(zt)){Mr=zt.shape;var zr=zt.stride,$r=un=0,hn=0,Tr=0;Mr.length===1?(un=Mr[0],$r=1,hn=zr[0],Tr=0):Mr.length===2&&(un=Mr[0],$r=Mr[1],hn=zr[0],Tr=zr[1]),Mr=Array.isArray(zt.data)?Xt.dtype:p(zt.data),Mr=Se.allocType(Mr,un*$r),c(Mr,zt.data,un,$r,hn,Tr,zt.offset),st.bufferSubData(Xt.type,gr,Mr),Se.freeType(Mr)}return Pt},Zt.profile&&(Pt.stats=Xt.stats),Pt.destroy=function(){ke(Xt)},Pt},createStream:function(at,et){var pt=qe.pop();return pt||(pt=new _r(at)),pt.bind(),Te(pt,et,35040,0,1,!1),pt},destroyStream:function(at){qe.push(at)},clear:function(){Ee(Ye).forEach(ke),qe.forEach(ke)},getBuffer:function(at){return at&&at._buffer instanceof _r?at._buffer:null},restore:function(){Ee(Ye).forEach(function(at){at.buffer=st.createBuffer(),st.bindBuffer(at.type,at.buffer),st.bufferData(at.type,at.persistentData||at.byteLength,at.usage)})},_initBuffer:Te}}function T(st,Gt,Zt,Ht){function _r(at){this.id=Ge++,ke[this.id]=this,this.buffer=at,this.primType=4,this.type=this.vertCount=0}function it(at,et,pt,_t,Pt,Xt,zt){at.buffer.bind();var ur;if(et?((ur=zt)||Ce(et)&&(!b(et)||Ce(et.data))||(ur=Gt.oes_element_index_uint?5125:5123),Zt._initBuffer(at.buffer,et,pt,ur,3)):(st.bufferData(34963,Xt,pt),at.buffer.dtype=ur||5121,at.buffer.usage=pt,at.buffer.dimension=3,at.buffer.byteLength=Xt),ur=zt,!zt){switch(at.buffer.dtype){case 5121:case 5120:ur=5121;break;case 5123:case 5122:ur=5123;break;case 5125:case 5124:ur=5125}at.buffer.dtype=ur}at.type=ur,et=Pt,0>et&&(et=at.buffer.byteLength,ur===5123?et>>=1:ur===5125&&(et>>=2)),at.vertCount=et,et=_t,0>_t&&(et=4,_t=at.buffer.dimension,_t===1&&(et=0),_t===2&&(et=1),_t===3&&(et=4)),at.primType=et}function Te(at){Ht.elementsCount--,delete ke[at.id],at.buffer.destroy(),at.buffer=null}var ke={},Ge=0,Ye={uint8:5121,uint16:5123};Gt.oes_element_index_uint&&(Ye.uint32=5125),_r.prototype.bind=function(){this.buffer.bind()};var qe=[];return{create:function(at,et){function pt(Xt){if(Xt)if(typeof Xt=="number")_t(Xt),Pt.primType=4,Pt.vertCount=Xt|0,Pt.type=5121;else{var zt=null,ur=35044,gr=-1,Mr=-1,un=0,zr=0;Array.isArray(Xt)||Ce(Xt)||b(Xt)?zt=Xt:("data"in Xt&&(zt=Xt.data),"usage"in Xt&&(ur=Ve[Xt.usage]),"primitive"in Xt&&(gr=je[Xt.primitive]),"count"in Xt&&(Mr=Xt.count|0),"type"in Xt&&(zr=Ye[Xt.type]),"length"in Xt?un=Xt.length|0:(un=Mr,zr===5123||zr===5122?un*=2:(zr===5125||zr===5124)&&(un*=4))),it(Pt,zt,ur,gr,Mr,un,zr)}else _t(),Pt.primType=4,Pt.vertCount=0,Pt.type=5121;return pt}var _t=Zt.create(null,34963,!0),Pt=new _r(_t._buffer);return Ht.elementsCount++,pt(at),pt._reglType="elements",pt._elements=Pt,pt.subdata=function(Xt,zt){return _t.subdata(Xt,zt),pt},pt.destroy=function(){Te(Pt)},pt},createStream:function(at){var et=qe.pop();return et||(et=new _r(Zt.create(null,34963,!0,!1)._buffer)),it(et,at,35040,-1,-1,0,0),et},destroyStream:function(at){qe.push(at)},getElements:function(at){return typeof at=="function"&&at._elements instanceof _r?at._elements:null},clear:function(){Ee(ke).forEach(Te)}}}function x(st){for(var Gt=Se.allocType(5123,st.length),Zt=0;Zt<st.length;++Zt)if(isNaN(st[Zt]))Gt[Zt]=65535;else if(st[Zt]===1/0)Gt[Zt]=31744;else if(st[Zt]===-1/0)Gt[Zt]=64512;else{dt[0]=st[Zt];var it=Et[0],Ht=it>>>31<<15,_r=(it<<1>>>24)-127,it=it>>13&1023;Gt[Zt]=-24>_r?Ht:-14>_r?Ht+(it+1024>>-14-_r):15<_r?Ht+31744:Ht+(_r+15<<10)+it}return Gt}function w(st){return Array.isArray(st)||Ce(st)}function v(st){return"[object "+st+"]"}function C(st){return Array.isArray(st)&&(st.length===0||typeof st[0]=="number")}function M(st){return!!(Array.isArray(st)&&st.length!==0&&w(st[0]))}function E(st){return Object.prototype.toString.call(st)}function L(st){if(!st)return!1;var Gt=E(st);return 0<=Pe.indexOf(Gt)?!0:C(st)||M(st)||b(st)}function z(st,Gt){st.type===36193?(st.data=x(Gt),Se.freeType(Gt)):st.data=Gt}function O(st,Gt,Zt,Ht,_r,it){if(st=typeof Qe[st]!="undefined"?Qe[st]:Ot[st]*We[Gt],it&&(st*=6),_r){for(Ht=0;1<=Zt;)Ht+=st*Zt*Zt,Zt/=2;return Ht}return st*Zt*Ht}function R(st,Gt,Zt,Ht,_r,it,Te){function ke(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Ge(Ar,nn){Ar.internalformat=nn.internalformat,Ar.format=nn.format,Ar.type=nn.type,Ar.compressed=nn.compressed,Ar.premultiplyAlpha=nn.premultiplyAlpha,Ar.flipY=nn.flipY,Ar.unpackAlignment=nn.unpackAlignment,Ar.colorSpace=nn.colorSpace,Ar.width=nn.width,Ar.height=nn.height,Ar.channels=nn.channels}function Ye(Ar,nn){if(typeof nn=="object"&&nn){"premultiplyAlpha"in nn&&(Ar.premultiplyAlpha=nn.premultiplyAlpha),"flipY"in nn&&(Ar.flipY=nn.flipY),"alignment"in nn&&(Ar.unpackAlignment=nn.alignment),"colorSpace"in nn&&(Ar.colorSpace=hr[nn.colorSpace]),"type"in nn&&(Ar.type=Dr[nn.type]);var vn=Ar.width,Mn=Ar.height,Gn=Ar.channels,la=!1;"shape"in nn?(vn=nn.shape[0],Mn=nn.shape[1],nn.shape.length===3&&(Gn=nn.shape[2],la=!0)):("radius"in nn&&(vn=Mn=nn.radius),"width"in nn&&(vn=nn.width),"height"in nn&&(Mn=nn.height),"channels"in nn&&(Gn=nn.channels,la=!0)),Ar.width=vn|0,Ar.height=Mn|0,Ar.channels=Gn|0,vn=!1,"format"in nn&&(vn=nn.format,Mn=Ar.internalformat=Gr[vn],Ar.format=Cn[Mn],vn in Dr&&!("type"in nn)&&(Ar.type=Dr[vn]),vn in Rr&&(Ar.compressed=!0),vn=!0),!la&&vn?Ar.channels=Ot[Ar.format]:la&&!vn&&Ar.channels!==wt[Ar.format]&&(Ar.format=Ar.internalformat=wt[Ar.channels])}}function qe(Ar){st.pixelStorei(37440,Ar.flipY),st.pixelStorei(37441,Ar.premultiplyAlpha),st.pixelStorei(37443,Ar.colorSpace),st.pixelStorei(3317,Ar.unpackAlignment)}function at(){ke.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function et(Ar,nn){var vn=null;if(L(nn)?vn=nn:nn&&(Ye(Ar,nn),"x"in nn&&(Ar.xOffset=nn.x|0),"y"in nn&&(Ar.yOffset=nn.y|0),L(nn.data)&&(vn=nn.data)),nn.copy){var Mn=_r.viewportWidth,Gn=_r.viewportHeight;Ar.width=Ar.width||Mn-Ar.xOffset,Ar.height=Ar.height||Gn-Ar.yOffset,Ar.needsCopy=!0}else if(!vn)Ar.width=Ar.width||1,Ar.height=Ar.height||1,Ar.channels=Ar.channels||4;else if(Ce(vn))Ar.channels=Ar.channels||4,Ar.data=vn,"type"in nn||Ar.type!==5121||(Ar.type=_e[Object.prototype.toString.call(vn)]|0);else if(C(vn)){switch(Ar.channels=Ar.channels||4,Mn=vn,Gn=Mn.length,Ar.type){case 5121:case 5123:case 5125:case 5126:Gn=Se.allocType(Ar.type,Gn),Gn.set(Mn),Ar.data=Gn;break;case 36193:Ar.data=x(Mn)}Ar.alignment=1,Ar.needsFree=!0}else if(b(vn)){Mn=vn.data,Array.isArray(Mn)||Ar.type!==5121||(Ar.type=_e[Object.prototype.toString.call(Mn)]|0);var Gn=vn.shape,la=vn.stride,na,Nn,Kn,Va;Gn.length===3?(Kn=Gn[2],Va=la[2]):Va=Kn=1,na=Gn[0],Nn=Gn[1],Gn=la[0],la=la[1],Ar.alignment=1,Ar.width=na,Ar.height=Nn,Ar.channels=Kn,Ar.format=Ar.internalformat=wt[Kn],Ar.needsFree=!0,na=Va,vn=vn.offset,Kn=Ar.width,Va=Ar.height,Nn=Ar.channels;for(var mi=Se.allocType(Ar.type===36193?5126:Ar.type,Kn*Va*Nn),Nt=0,yr=0;yr<Va;++yr)for(var fn=0;fn<Kn;++fn)for(var mn=0;mn<Nn;++mn)mi[Nt++]=Mn[Gn*fn+la*yr+na*mn+vn];z(Ar,mi)}else if(E(vn)===Vt||E(vn)===kt||E(vn)===St)E(vn)===Vt||E(vn)===kt?Ar.element=vn:Ar.element=vn.canvas,Ar.width=Ar.element.width,Ar.height=Ar.element.height,Ar.channels=4;else if(E(vn)===ot)Ar.element=vn,Ar.width=vn.width,Ar.height=vn.height,Ar.channels=4;else if(E(vn)===ht)Ar.element=vn,Ar.width=vn.naturalWidth,Ar.height=vn.naturalHeight,Ar.channels=4;else if(E(vn)===Ke)Ar.element=vn,Ar.width=vn.videoWidth,Ar.height=vn.videoHeight,Ar.channels=4;else if(M(vn)){for(Mn=Ar.width||vn[0].length,Gn=Ar.height||vn.length,la=Ar.channels,la=w(vn[0][0])?la||vn[0][0].length:la||1,na=Oe.shape(vn),Kn=1,Va=0;Va<na.length;++Va)Kn*=na[Va];Kn=Se.allocType(Ar.type===36193?5126:Ar.type,Kn),Oe.flatten(vn,na,"",Kn),z(Ar,Kn),Ar.alignment=1,Ar.width=Mn,Ar.height=Gn,Ar.channels=la,Ar.format=Ar.internalformat=wt[la],Ar.needsFree=!0}}function pt(Ar,nn,vn,Mn,Gn){var la=Ar.element,na=Ar.data,Nn=Ar.internalformat,Kn=Ar.format,Va=Ar.type,mi=Ar.width,Nt=Ar.height;qe(Ar),la?st.texSubImage2D(nn,Gn,vn,Mn,Kn,Va,la):Ar.compressed?st.compressedTexSubImage2D(nn,Gn,vn,Mn,Nn,mi,Nt,na):Ar.needsCopy?(Ht(),st.copyTexSubImage2D(nn,Gn,vn,Mn,Ar.xOffset,Ar.yOffset,mi,Nt)):st.texSubImage2D(nn,Gn,vn,Mn,mi,Nt,Kn,Va,na)}function _t(){return oa.pop()||new at}function Pt(Ar){Ar.needsFree&&Se.freeType(Ar.data),at.call(Ar),oa.push(Ar)}function Xt(){ke.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function zt(Ar,nn,vn){var Mn=Ar.images[0]=_t();Ar.mipmask=1,Mn.width=Ar.width=nn,Mn.height=Ar.height=vn,Mn.channels=Ar.channels=4}function ur(Ar,nn){var vn=null;if(L(nn))vn=Ar.images[0]=_t(),Ge(vn,Ar),et(vn,nn),Ar.mipmask=1;else if(Ye(Ar,nn),Array.isArray(nn.mipmap))for(var Mn=nn.mipmap,Gn=0;Gn<Mn.length;++Gn)vn=Ar.images[Gn]=_t(),Ge(vn,Ar),vn.width>>=Gn,vn.height>>=Gn,et(vn,Mn[Gn]),Ar.mipmask|=1<<Gn;else vn=Ar.images[0]=_t(),Ge(vn,Ar),et(vn,nn),Ar.mipmask=1;Ge(Ar,Ar.images[0])}function gr(Ar,nn){for(var vn=Ar.images,Mn=0;Mn<vn.length&&vn[Mn];++Mn){var Gn=vn[Mn],la=nn,na=Mn,Nn=Gn.element,Kn=Gn.data,Va=Gn.internalformat,mi=Gn.format,Nt=Gn.type,yr=Gn.width,fn=Gn.height;qe(Gn),Nn?st.texImage2D(la,na,mi,mi,Nt,Nn):Gn.compressed?st.compressedTexImage2D(la,na,Va,yr,fn,0,Kn):Gn.needsCopy?(Ht(),st.copyTexImage2D(la,na,mi,Gn.xOffset,Gn.yOffset,yr,fn,0)):st.texImage2D(la,na,mi,yr,fn,0,mi,Nt,Kn||null)}}function Mr(){var Ar=ya.pop()||new Xt;ke.call(Ar);for(var nn=Ar.mipmask=0;16>nn;++nn)Ar.images[nn]=null;return Ar}function un(Ar){for(var nn=Ar.images,vn=0;vn<nn.length;++vn)nn[vn]&&Pt(nn[vn]),nn[vn]=null;ya.push(Ar)}function zr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function $r(Ar,nn){"min"in nn&&(Ar.minFilter=Jt[nn.min],0<=$t.indexOf(Ar.minFilter)&&!("faces"in nn)&&(Ar.genMipmaps=!0)),"mag"in nn&&(Ar.magFilter=Rt[nn.mag]);var vn=Ar.wrapS,Mn=Ar.wrapT;if("wrap"in nn){var Gn=nn.wrap;typeof Gn=="string"?vn=Mn=nt[Gn]:Array.isArray(Gn)&&(vn=nt[Gn[0]],Mn=nt[Gn[1]])}else"wrapS"in nn&&(vn=nt[nn.wrapS]),"wrapT"in nn&&(Mn=nt[nn.wrapT]);if(Ar.wrapS=vn,Ar.wrapT=Mn,"anisotropic"in nn&&(Ar.anisotropic=nn.anisotropic),"mipmap"in nn){switch(vn=!1,typeof nn.mipmap){case"string":Ar.mipmapHint=Cr[nn.mipmap],vn=Ar.genMipmaps=!0;break;case"boolean":vn=Ar.genMipmaps=nn.mipmap;break;case"object":Ar.genMipmaps=!1,vn=!0}!vn||"min"in nn||(Ar.minFilter=9984)}}function hn(Ar,nn){st.texParameteri(nn,10241,Ar.minFilter),st.texParameteri(nn,10240,Ar.magFilter),st.texParameteri(nn,10242,Ar.wrapS),st.texParameteri(nn,10243,Ar.wrapT),Gt.ext_texture_filter_anisotropic&&st.texParameteri(nn,34046,Ar.anisotropic),Ar.genMipmaps&&(st.hint(33170,Ar.mipmapHint),st.generateMipmap(nn))}function Tr(Ar){ke.call(this),this.mipmask=0,this.internalformat=6408,this.id=Oa++,this.refCount=1,this.target=Ar,this.texture=st.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new zr,Te.profile&&(this.stats={size:0})}function wr(Ar){st.activeTexture(33984),st.bindTexture(Ar.target,Ar.texture)}function Ur(){var Ar=Pa[0];Ar?st.bindTexture(Ar.target,Ar.texture):st.bindTexture(3553,null)}function Br(Ar){var nn=Ar.texture,vn=Ar.unit,Mn=Ar.target;0<=vn&&(st.activeTexture(33984+vn),st.bindTexture(Mn,null),Pa[vn]=null),st.deleteTexture(nn),Ar.texture=null,Ar.params=null,Ar.pixels=null,Ar.refCount=0,delete Xa[Ar.id],it.textureCount--}var Cr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},nt={repeat:10497,clamp:33071,mirror:33648},Rt={nearest:9728,linear:9729},Jt=se({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Rt),hr={none:0,browser:37444},Dr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Gr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Rr={};Gt.ext_srgb&&(Gr.srgb=35904,Gr.srgba=35906),Gt.oes_texture_float&&(Dr.float32=Dr.float=5126),Gt.oes_texture_half_float&&(Dr.float16=Dr["half float"]=36193),Gt.webgl_depth_texture&&(se(Gr,{depth:6402,"depth stencil":34041}),se(Dr,{uint16:5123,uint32:5125,"depth stencil":34042})),Gt.webgl_compressed_texture_s3tc&&se(Rr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Gt.webgl_compressed_texture_atc&&se(Rr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Gt.webgl_compressed_texture_pvrtc&&se(Rr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Gt.webgl_compressed_texture_etc1&&(Rr["rgb etc1"]=36196);var Ct=Array.prototype.slice.call(st.getParameter(34467));Object.keys(Rr).forEach(function(Ar){var nn=Rr[Ar];0<=Ct.indexOf(nn)&&(Gr[Ar]=nn)});var tr=Object.keys(Gr);Zt.textureFormats=tr;var Lr=[];Object.keys(Gr).forEach(function(Ar){Lr[Gr[Ar]]=Ar});var Nr=[];Object.keys(Dr).forEach(function(Ar){Nr[Dr[Ar]]=Ar});var Tn=[];Object.keys(Rt).forEach(function(Ar){Tn[Rt[Ar]]=Ar});var rn=[];Object.keys(Jt).forEach(function(Ar){rn[Jt[Ar]]=Ar});var kn=[];Object.keys(nt).forEach(function(Ar){kn[nt[Ar]]=Ar});var Cn=tr.reduce(function(Ar,nn){var vn=Gr[nn];return vn===6409||vn===6406||vn===6409||vn===6410||vn===6402||vn===34041||Gt.ext_srgb&&(vn===35904||vn===35906)?Ar[vn]=vn:vn===32855||0<=nn.indexOf("rgba")?Ar[vn]=6408:Ar[vn]=6407,Ar},{}),oa=[],ya=[],Oa=0,Xa={},za=Zt.maxTextureUnits,Pa=Array(za).map(function(){return null});return se(Tr.prototype,{bind:function(){this.bindCount+=1;var Ar=this.unit;if(0>Ar){for(var nn=0;nn<za;++nn){var vn=Pa[nn];if(vn){if(0<vn.bindCount)continue;vn.unit=-1}Pa[nn]=this,Ar=nn;break}Te.profile&&it.maxTextureUnits<Ar+1&&(it.maxTextureUnits=Ar+1),this.unit=Ar,st.activeTexture(33984+Ar),st.bindTexture(this.target,this.texture)}return Ar},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Br(this)}}),Te.profile&&(it.getTotalTextureSize=function(){var Ar=0;return Object.keys(Xa).forEach(function(nn){Ar+=Xa[nn].stats.size}),Ar}),{create2D:function(Ar,nn){function vn(Gn,la){var na=Mn.texInfo;zr.call(na);var Nn=Mr();return typeof Gn=="number"?typeof la=="number"?zt(Nn,Gn|0,la|0):zt(Nn,Gn|0,Gn|0):Gn?($r(na,Gn),ur(Nn,Gn)):zt(Nn,1,1),na.genMipmaps&&(Nn.mipmask=(Nn.width<<1)-1),Mn.mipmask=Nn.mipmask,Ge(Mn,Nn),Mn.internalformat=Nn.internalformat,vn.width=Nn.width,vn.height=Nn.height,wr(Mn),gr(Nn,3553),hn(na,3553),Ur(),un(Nn),Te.profile&&(Mn.stats.size=O(Mn.internalformat,Mn.type,Nn.width,Nn.height,na.genMipmaps,!1)),vn.format=Lr[Mn.internalformat],vn.type=Nr[Mn.type],vn.mag=Tn[na.magFilter],vn.min=rn[na.minFilter],vn.wrapS=kn[na.wrapS],vn.wrapT=kn[na.wrapT],vn}var Mn=new Tr(3553);return Xa[Mn.id]=Mn,it.textureCount++,vn(Ar,nn),vn.subimage=function(Gn,la,na,Nn){la|=0,na|=0,Nn|=0;var Kn=_t();return Ge(Kn,Mn),Kn.width=0,Kn.height=0,et(Kn,Gn),Kn.width=Kn.width||(Mn.width>>Nn)-la,Kn.height=Kn.height||(Mn.height>>Nn)-na,wr(Mn),pt(Kn,3553,la,na,Nn),Ur(),Pt(Kn),vn},vn.resize=function(Gn,la){var na=Gn|0,Nn=la|0||na;if(na===Mn.width&&Nn===Mn.height)return vn;vn.width=Mn.width=na,vn.height=Mn.height=Nn,wr(Mn);for(var Kn=0;Mn.mipmask>>Kn;++Kn){var Va=na>>Kn,mi=Nn>>Kn;if(!Va||!mi)break;st.texImage2D(3553,Kn,Mn.format,Va,mi,0,Mn.format,Mn.type,null)}return Ur(),Te.profile&&(Mn.stats.size=O(Mn.internalformat,Mn.type,na,Nn,!1,!1)),vn},vn._reglType="texture2d",vn._texture=Mn,Te.profile&&(vn.stats=Mn.stats),vn.destroy=function(){Mn.decRef()},vn},createCube:function(Ar,nn,vn,Mn,Gn,la){function na(Va,mi,Nt,yr,fn,mn){var gn,Dn=Nn.texInfo;for(zr.call(Dn),gn=0;6>gn;++gn)Kn[gn]=Mr();if(typeof Va=="number"||!Va)for(Va=Va|0||1,gn=0;6>gn;++gn)zt(Kn[gn],Va,Va);else if(typeof Va=="object")if(mi)ur(Kn[0],Va),ur(Kn[1],mi),ur(Kn[2],Nt),ur(Kn[3],yr),ur(Kn[4],fn),ur(Kn[5],mn);else if($r(Dn,Va),Ye(Nn,Va),"faces"in Va)for(Va=Va.faces,gn=0;6>gn;++gn)Ge(Kn[gn],Nn),ur(Kn[gn],Va[gn]);else for(gn=0;6>gn;++gn)ur(Kn[gn],Va);for(Ge(Nn,Kn[0]),Nn.mipmask=Dn.genMipmaps?(Kn[0].width<<1)-1:Kn[0].mipmask,Nn.internalformat=Kn[0].internalformat,na.width=Kn[0].width,na.height=Kn[0].height,wr(Nn),gn=0;6>gn;++gn)gr(Kn[gn],34069+gn);for(hn(Dn,34067),Ur(),Te.profile&&(Nn.stats.size=O(Nn.internalformat,Nn.type,na.width,na.height,Dn.genMipmaps,!0)),na.format=Lr[Nn.internalformat],na.type=Nr[Nn.type],na.mag=Tn[Dn.magFilter],na.min=rn[Dn.minFilter],na.wrapS=kn[Dn.wrapS],na.wrapT=kn[Dn.wrapT],gn=0;6>gn;++gn)un(Kn[gn]);return na}var Nn=new Tr(34067);Xa[Nn.id]=Nn,it.cubeCount++;var Kn=Array(6);return na(Ar,nn,vn,Mn,Gn,la),na.subimage=function(Va,mi,Nt,yr,fn){Nt|=0,yr|=0,fn|=0;var mn=_t();return Ge(mn,Nn),mn.width=0,mn.height=0,et(mn,mi),mn.width=mn.width||(Nn.width>>fn)-Nt,mn.height=mn.height||(Nn.height>>fn)-yr,wr(Nn),pt(mn,34069+Va,Nt,yr,fn),Ur(),Pt(mn),na},na.resize=function(Va){if(Va|=0,Va!==Nn.width){na.width=Nn.width=Va,na.height=Nn.height=Va,wr(Nn);for(var mi=0;6>mi;++mi)for(var Nt=0;Nn.mipmask>>Nt;++Nt)st.texImage2D(34069+mi,Nt,Nn.format,Va>>Nt,Va>>Nt,0,Nn.format,Nn.type,null);return Ur(),Te.profile&&(Nn.stats.size=O(Nn.internalformat,Nn.type,na.width,na.height,!1,!0)),na}},na._reglType="textureCube",na._texture=Nn,Te.profile&&(na.stats=Nn.stats),na.destroy=function(){Nn.decRef()},na},clear:function(){for(var Ar=0;Ar<za;++Ar)st.activeTexture(33984+Ar),st.bindTexture(3553,null),Pa[Ar]=null;Ee(Xa).forEach(Br),it.cubeCount=0,it.textureCount=0},getTexture:function(Ar){return null},restore:function(){for(var Ar=0;Ar<za;++Ar){var nn=Pa[Ar];nn&&(nn.bindCount=0,nn.unit=-1,Pa[Ar]=null)}Ee(Xa).forEach(function(vn){vn.texture=st.createTexture(),st.bindTexture(vn.target,vn.texture);for(var Mn=0;32>Mn;++Mn)if((vn.mipmask&1<<Mn)!==0)if(vn.target===3553)st.texImage2D(3553,Mn,vn.internalformat,vn.width>>Mn,vn.height>>Mn,0,vn.internalformat,vn.type,null);else for(var Gn=0;6>Gn;++Gn)st.texImage2D(34069+Gn,Mn,vn.internalformat,vn.width>>Mn,vn.height>>Mn,0,vn.internalformat,vn.type,null);hn(vn.texInfo,vn.target)})},refresh:function(){for(var Ar=0;Ar<za;++Ar){var nn=Pa[Ar];nn&&(nn.bindCount=0,nn.unit=-1,Pa[Ar]=null),st.activeTexture(33984+Ar),st.bindTexture(3553,null),st.bindTexture(34067,null)}}}}function D(st,Gt,Zt,Ht,_r,it){function Te(Tr,wr,Ur){this.target=Tr,this.texture=wr,this.renderbuffer=Ur;var Br=Tr=0;wr?(Tr=wr.width,Br=wr.height):Ur&&(Tr=Ur.width,Br=Ur.height),this.width=Tr,this.height=Br}function ke(Tr){Tr&&(Tr.texture&&Tr.texture._texture.decRef(),Tr.renderbuffer&&Tr.renderbuffer._renderbuffer.decRef())}function Ge(Tr,wr,Ur){Tr&&(Tr.texture?Tr.texture._texture.refCount+=1:Tr.renderbuffer._renderbuffer.refCount+=1)}function Ye(Tr,wr){wr&&(wr.texture?st.framebufferTexture2D(36160,Tr,wr.target,wr.texture._texture.texture,0):st.framebufferRenderbuffer(36160,Tr,36161,wr.renderbuffer._renderbuffer.renderbuffer))}function qe(Tr){var wr=3553,Ur=null,Br=null,Cr=Tr;return typeof Tr=="object"&&(Cr=Tr.data,"target"in Tr&&(wr=Tr.target|0)),Tr=Cr._reglType,Tr==="texture2d"||Tr==="textureCube"?Ur=Cr:Tr==="renderbuffer"&&(Br=Cr,wr=36161),new Te(wr,Ur,Br)}function at(Tr,wr,Ur,Br,Cr){return Ur?(Tr=Ht.create2D({width:Tr,height:wr,format:Br,type:Cr}),Tr._texture.refCount=0,new Te(3553,Tr,null)):(Tr=_r.create({width:Tr,height:wr,format:Br}),Tr._renderbuffer.refCount=0,new Te(36161,null,Tr))}function et(Tr){return Tr&&(Tr.texture||Tr.renderbuffer)}function pt(Tr,wr,Ur){Tr&&(Tr.texture?Tr.texture.resize(wr,Ur):Tr.renderbuffer&&Tr.renderbuffer.resize(wr,Ur),Tr.width=wr,Tr.height=Ur)}function _t(){this.id=$r++,hn[this.id]=this,this.framebuffer=st.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Pt(Tr){Tr.colorAttachments.forEach(ke),ke(Tr.depthAttachment),ke(Tr.stencilAttachment),ke(Tr.depthStencilAttachment)}function Xt(Tr){st.deleteFramebuffer(Tr.framebuffer),Tr.framebuffer=null,it.framebufferCount--,delete hn[Tr.id]}function zt(Tr){var wr;st.bindFramebuffer(36160,Tr.framebuffer);var Ur=Tr.colorAttachments;for(wr=0;wr<Ur.length;++wr)Ye(36064+wr,Ur[wr]);for(wr=Ur.length;wr<Zt.maxColorAttachments;++wr)st.framebufferTexture2D(36160,36064+wr,3553,null,0);st.framebufferTexture2D(36160,33306,3553,null,0),st.framebufferTexture2D(36160,36096,3553,null,0),st.framebufferTexture2D(36160,36128,3553,null,0),Ye(36096,Tr.depthAttachment),Ye(36128,Tr.stencilAttachment),Ye(33306,Tr.depthStencilAttachment),st.checkFramebufferStatus(36160),st.isContextLost(),st.bindFramebuffer(36160,gr.next?gr.next.framebuffer:null),gr.cur=gr.next,st.getError()}function ur(Tr,wr){function Ur(Cr,nt){var Rt,Jt=0,hr=0,Dr=!0,Gr=!0;Rt=null;var Rr=!0,Ct="rgba",tr="uint8",Lr=1,Nr=null,Tn=null,rn=null,kn=!1;typeof Cr=="number"?(Jt=Cr|0,hr=nt|0||Jt):Cr?("shape"in Cr?(hr=Cr.shape,Jt=hr[0],hr=hr[1]):("radius"in Cr&&(Jt=hr=Cr.radius),"width"in Cr&&(Jt=Cr.width),"height"in Cr&&(hr=Cr.height)),("color"in Cr||"colors"in Cr)&&(Rt=Cr.color||Cr.colors),Rt||("colorCount"in Cr&&(Lr=Cr.colorCount|0),"colorTexture"in Cr&&(Rr=!!Cr.colorTexture,Ct="rgba4"),"colorType"in Cr&&(tr=Cr.colorType,!Rr)&&(tr==="half float"||tr==="float16"?Ct="rgba16f":(tr==="float"||tr==="float32")&&(Ct="rgba32f")),"colorFormat"in Cr&&(Ct=Cr.colorFormat,0<=Mr.indexOf(Ct)?Rr=!0:0<=un.indexOf(Ct)&&(Rr=!1))),("depthTexture"in Cr||"depthStencilTexture"in Cr)&&(kn=!(!Cr.depthTexture&&!Cr.depthStencilTexture)),"depth"in Cr&&(typeof Cr.depth=="boolean"?Dr=Cr.depth:(Nr=Cr.depth,Gr=!1)),"stencil"in Cr&&(typeof Cr.stencil=="boolean"?Gr=Cr.stencil:(Tn=Cr.stencil,Dr=!1)),"depthStencil"in Cr&&(typeof Cr.depthStencil=="boolean"?Dr=Gr=Cr.depthStencil:(rn=Cr.depthStencil,Gr=Dr=!1))):Jt=hr=1;var Cn=null,oa=null,ya=null,Oa=null;if(Array.isArray(Rt))Cn=Rt.map(qe);else if(Rt)Cn=[qe(Rt)];else for(Cn=Array(Lr),Rt=0;Rt<Lr;++Rt)Cn[Rt]=at(Jt,hr,Rr,Ct,tr);for(Jt=Jt||Cn[0].width,hr=hr||Cn[0].height,Nr?oa=qe(Nr):Dr&&!Gr&&(oa=at(Jt,hr,kn,"depth","uint32")),Tn?ya=qe(Tn):Gr&&!Dr&&(ya=at(Jt,hr,!1,"stencil","uint8")),rn?Oa=qe(rn):!Nr&&!Tn&&Gr&&Dr&&(Oa=at(Jt,hr,kn,"depth stencil","depth stencil")),Dr=null,Rt=0;Rt<Cn.length;++Rt)Ge(Cn[Rt]),Cn[Rt]&&Cn[Rt].texture&&(Gr=Tt[Cn[Rt].texture._texture.format]*Bt[Cn[Rt].texture._texture.type],Dr===null&&(Dr=Gr));return Ge(oa),Ge(ya),Ge(Oa),Pt(Br),Br.width=Jt,Br.height=hr,Br.colorAttachments=Cn,Br.depthAttachment=oa,Br.stencilAttachment=ya,Br.depthStencilAttachment=Oa,Ur.color=Cn.map(et),Ur.depth=et(oa),Ur.stencil=et(ya),Ur.depthStencil=et(Oa),Ur.width=Br.width,Ur.height=Br.height,zt(Br),Ur}var Br=new _t;return it.framebufferCount++,Ur(Tr,wr),se(Ur,{resize:function(Cr,nt){var Rt=Math.max(Cr|0,1),Jt=Math.max(nt|0||Rt,1);if(Rt===Br.width&&Jt===Br.height)return Ur;for(var hr=Br.colorAttachments,Dr=0;Dr<hr.length;++Dr)pt(hr[Dr],Rt,Jt);return pt(Br.depthAttachment,Rt,Jt),pt(Br.stencilAttachment,Rt,Jt),pt(Br.depthStencilAttachment,Rt,Jt),Br.width=Ur.width=Rt,Br.height=Ur.height=Jt,zt(Br),Ur},_reglType:"framebuffer",_framebuffer:Br,destroy:function(){Xt(Br),Pt(Br)},use:function(Cr){gr.setFBO({framebuffer:Ur},Cr)}})}var gr={cur:null,next:null,dirty:!1,setFBO:null},Mr=["rgba"],un=["rgba4","rgb565","rgb5 a1"];Gt.ext_srgb&&un.push("srgba"),Gt.ext_color_buffer_half_float&&un.push("rgba16f","rgb16f"),Gt.webgl_color_buffer_float&&un.push("rgba32f");var zr=["uint8"];Gt.oes_texture_half_float&&zr.push("half float","float16"),Gt.oes_texture_float&&zr.push("float","float32");var $r=0,hn={};return se(gr,{getFramebuffer:function(Tr){return typeof Tr=="function"&&Tr._reglType==="framebuffer"&&(Tr=Tr._framebuffer,Tr instanceof _t)?Tr:null},create:ur,createCube:function(Tr){function wr(Br){var Cr,nt={color:null},Rt=0,Jt=null;Cr="rgba";var hr="uint8",Dr=1;if(typeof Br=="number"?Rt=Br|0:Br?("shape"in Br?Rt=Br.shape[0]:("radius"in Br&&(Rt=Br.radius|0),"width"in Br?Rt=Br.width|0:"height"in Br&&(Rt=Br.height|0)),("color"in Br||"colors"in Br)&&(Jt=Br.color||Br.colors),Jt||("colorCount"in Br&&(Dr=Br.colorCount|0),"colorType"in Br&&(hr=Br.colorType),"colorFormat"in Br&&(Cr=Br.colorFormat)),"depth"in Br&&(nt.depth=Br.depth),"stencil"in Br&&(nt.stencil=Br.stencil),"depthStencil"in Br&&(nt.depthStencil=Br.depthStencil)):Rt=1,Jt)if(Array.isArray(Jt))for(Br=[],Cr=0;Cr<Jt.length;++Cr)Br[Cr]=Jt[Cr];else Br=[Jt];else for(Br=Array(Dr),Jt={radius:Rt,format:Cr,type:hr},Cr=0;Cr<Dr;++Cr)Br[Cr]=Ht.createCube(Jt);for(nt.color=Array(Br.length),Cr=0;Cr<Br.length;++Cr)Dr=Br[Cr],Rt=Rt||Dr.width,nt.color[Cr]={target:34069,data:Br[Cr]};for(Cr=0;6>Cr;++Cr){for(Dr=0;Dr<Br.length;++Dr)nt.color[Dr].target=34069+Cr;0<Cr&&(nt.depth=Ur[0].depth,nt.stencil=Ur[0].stencil,nt.depthStencil=Ur[0].depthStencil),Ur[Cr]?Ur[Cr](nt):Ur[Cr]=ur(nt)}return se(wr,{width:Rt,height:Rt,color:Br})}var Ur=Array(6);return wr(Tr),se(wr,{faces:Ur,resize:function(Br){var Cr=Br|0;if(Cr===wr.width)return wr;var nt=wr.color;for(Br=0;Br<nt.length;++Br)nt[Br].resize(Cr);for(Br=0;6>Br;++Br)Ur[Br].resize(Cr);return wr.width=wr.height=Cr,wr},_reglType:"framebufferCube",destroy:function(){Ur.forEach(function(Br){Br.destroy()})}})},clear:function(){Ee(hn).forEach(Xt)},restore:function(){gr.cur=null,gr.next=null,gr.dirty=!0,Ee(hn).forEach(function(Tr){Tr.framebuffer=st.createFramebuffer(),zt(Tr)})}})}function H(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(st,Gt,Zt,Ht,_r,it,Te){function ke(zt){if(zt!==Xt.currentVAO){var ur=Gt.oes_vertex_array_object;zt?ur.bindVertexArrayOES(zt.vao):ur.bindVertexArrayOES(null),Xt.currentVAO=zt}}function Ge(zt){if(zt!==Xt.currentVAO){if(zt)zt.bindAttrs();else{for(var ur=Gt.angle_instanced_arrays,gr=0;gr<pt.length;++gr){var Mr=pt[gr];Mr.buffer?(st.enableVertexAttribArray(gr),Mr.buffer.bind(),st.vertexAttribPointer(gr,Mr.size,Mr.type,Mr.normalized,Mr.stride,Mr.offfset),ur&&Mr.divisor&&ur.vertexAttribDivisorANGLE(gr,Mr.divisor)):(st.disableVertexAttribArray(gr),st.vertexAttrib4f(gr,Mr.x,Mr.y,Mr.z,Mr.w))}Te.elements?st.bindBuffer(34963,Te.elements.buffer.buffer):st.bindBuffer(34963,null)}Xt.currentVAO=zt}}function Ye(){Ee(Pt).forEach(function(zt){zt.destroy()})}function qe(){this.id=++_t,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var zt=Gt.oes_vertex_array_object;this.vao=zt?zt.createVertexArrayOES():null,Pt[this.id]=this,this.buffers=[]}function at(){Gt.oes_vertex_array_object&&Ee(Pt).forEach(function(zt){zt.refresh()})}var et=Zt.maxAttributes,pt=Array(et);for(Zt=0;Zt<et;++Zt)pt[Zt]=new H;var _t=0,Pt={},Xt={Record:H,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:Gt.oes_vertex_array_object?at:function(){},createVAO:function(zt){function ur(Mr){var un;Array.isArray(Mr)?(un=Mr,gr.elements&&gr.ownsElements&&gr.elements.destroy(),gr.elements=null,gr.ownsElements=!1,gr.offset=0,gr.count=0,gr.instances=-1,gr.primitive=4):(Mr.elements?(un=Mr.elements,gr.ownsElements?(typeof un=="function"&&un._reglType==="elements"?gr.elements.destroy():gr.elements(un),gr.ownsElements=!1):it.getElements(Mr.elements)?(gr.elements=Mr.elements,gr.ownsElements=!1):(gr.elements=it.create(Mr.elements),gr.ownsElements=!0)):(gr.elements=null,gr.ownsElements=!1),un=Mr.attributes,gr.offset=0,gr.count=-1,gr.instances=-1,gr.primitive=4,gr.elements&&(gr.count=gr.elements._elements.vertCount,gr.primitive=gr.elements._elements.primType),"offset"in Mr&&(gr.offset=Mr.offset|0),"count"in Mr&&(gr.count=Mr.count|0),"instances"in Mr&&(gr.instances=Mr.instances|0),"primitive"in Mr&&(gr.primitive=je[Mr.primitive])),Mr={};var zr=gr.attributes;zr.length=un.length;for(var $r=0;$r<un.length;++$r){var hn=un[$r],Tr=zr[$r]=new H,wr=hn.data||hn;if(Array.isArray(wr)||Ce(wr)||b(wr)){var Ur;gr.buffers[$r]&&(Ur=gr.buffers[$r],Ce(wr)&&Ur._buffer.byteLength>=wr.byteLength?Ur.subdata(wr):(Ur.destroy(),gr.buffers[$r]=null)),gr.buffers[$r]||(Ur=gr.buffers[$r]=_r.create(hn,34962,!1,!0)),Tr.buffer=_r.getBuffer(Ur),Tr.size=Tr.buffer.dimension|0,Tr.normalized=!1,Tr.type=Tr.buffer.dtype,Tr.offset=0,Tr.stride=0,Tr.divisor=0,Tr.state=1,Mr[$r]=1}else _r.getBuffer(hn)?(Tr.buffer=_r.getBuffer(hn),Tr.size=Tr.buffer.dimension|0,Tr.normalized=!1,Tr.type=Tr.buffer.dtype,Tr.offset=0,Tr.stride=0,Tr.divisor=0,Tr.state=1):_r.getBuffer(hn.buffer)?(Tr.buffer=_r.getBuffer(hn.buffer),Tr.size=(+hn.size||Tr.buffer.dimension)|0,Tr.normalized=!!hn.normalized||!1,Tr.type="type"in hn?Re[hn.type]:Tr.buffer.dtype,Tr.offset=(hn.offset||0)|0,Tr.stride=(hn.stride||0)|0,Tr.divisor=(hn.divisor||0)|0,Tr.state=1):"x"in hn&&(Tr.x=+hn.x||0,Tr.y=+hn.y||0,Tr.z=+hn.z||0,Tr.w=+hn.w||0,Tr.state=2)}for(Ur=0;Ur<gr.buffers.length;++Ur)!Mr[Ur]&&gr.buffers[Ur]&&(gr.buffers[Ur].destroy(),gr.buffers[Ur]=null);return gr.refresh(),ur}var gr=new qe;return Ht.vaoCount+=1,ur.destroy=function(){for(var Mr=0;Mr<gr.buffers.length;++Mr)gr.buffers[Mr]&&gr.buffers[Mr].destroy();gr.buffers.length=0,gr.ownsElements&&(gr.elements.destroy(),gr.elements=null,gr.ownsElements=!1),gr.destroy()},ur._vao=gr,ur._reglType="vao",ur(zt)},getVAO:function(zt){return typeof zt=="function"&&zt._vao?zt._vao:null},destroyBuffer:function(zt){for(var ur=0;ur<pt.length;++ur){var gr=pt[ur];gr.buffer===zt&&(st.disableVertexAttribArray(ur),gr.buffer=null)}},setVAO:Gt.oes_vertex_array_object?ke:Ge,clear:Gt.oes_vertex_array_object?Ye:function(){}};return qe.prototype.bindAttrs=function(){for(var zt=Gt.angle_instanced_arrays,ur=this.attributes,gr=0;gr<ur.length;++gr){var Mr=ur[gr];Mr.buffer?(st.enableVertexAttribArray(gr),st.bindBuffer(34962,Mr.buffer.buffer),st.vertexAttribPointer(gr,Mr.size,Mr.type,Mr.normalized,Mr.stride,Mr.offset),zt&&Mr.divisor&&zt.vertexAttribDivisorANGLE(gr,Mr.divisor)):(st.disableVertexAttribArray(gr),st.vertexAttrib4f(gr,Mr.x,Mr.y,Mr.z,Mr.w))}for(zt=ur.length;zt<et;++zt)st.disableVertexAttribArray(zt);(zt=it.getElements(this.elements))?st.bindBuffer(34963,zt.buffer.buffer):st.bindBuffer(34963,null)},qe.prototype.refresh=function(){var zt=Gt.oes_vertex_array_object;zt&&(zt.bindVertexArrayOES(this.vao),this.bindAttrs(),Xt.currentVAO=null,zt.bindVertexArrayOES(null))},qe.prototype.destroy=function(){if(this.vao){var zt=Gt.oes_vertex_array_object;this===Xt.currentVAO&&(Xt.currentVAO=null,zt.bindVertexArrayOES(null)),zt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Pt[this.id]&&(delete Pt[this.id],--Ht.vaoCount)},Xt}function $(st,Gt,Zt,Ht){function _r(_t,Pt,Xt,zt){this.name=_t,this.id=Pt,this.location=Xt,this.info=zt}function it(_t,Pt){for(var Xt=0;Xt<_t.length;++Xt)if(_t[Xt].id===Pt.id){_t[Xt].location=Pt.location;return}_t.push(Pt)}function Te(_t,Pt,Xt){Xt=_t===35632?Ye:qe;var zt=Xt[Pt];if(!zt){var ur=Gt.str(Pt),zt=st.createShader(_t);st.shaderSource(zt,ur),st.compileShader(zt),Xt[Pt]=zt}return zt}function ke(_t,Pt){this.id=pt++,this.fragId=_t,this.vertId=Pt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ht.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ge(_t,Pt,Xt){var zt;zt=Te(35632,_t.fragId);var ur=Te(35633,_t.vertId);if(Pt=_t.program=st.createProgram(),st.attachShader(Pt,zt),st.attachShader(Pt,ur),Xt)for(zt=0;zt<Xt.length;++zt)ur=Xt[zt],st.bindAttribLocation(Pt,ur[0],ur[1]);st.linkProgram(Pt),ur=st.getProgramParameter(Pt,35718),Ht.profile&&(_t.stats.uniformsCount=ur);var gr=_t.uniforms;for(zt=0;zt<ur;++zt)if(Xt=st.getActiveUniform(Pt,zt))if(1<Xt.size)for(var Mr=0;Mr<Xt.size;++Mr){var un=Xt.name.replace("[0]","["+Mr+"]");it(gr,new _r(un,Gt.id(un),st.getUniformLocation(Pt,un),Xt))}else it(gr,new _r(Xt.name,Gt.id(Xt.name),st.getUniformLocation(Pt,Xt.name),Xt));for(ur=st.getProgramParameter(Pt,35721),Ht.profile&&(_t.stats.attributesCount=ur),_t=_t.attributes,zt=0;zt<ur;++zt)(Xt=st.getActiveAttrib(Pt,zt))&&it(_t,new _r(Xt.name,Gt.id(Xt.name),st.getAttribLocation(Pt,Xt.name),Xt))}var Ye={},qe={},at={},et=[],pt=0;return Ht.profile&&(Zt.getMaxUniformsCount=function(){var _t=0;return et.forEach(function(Pt){Pt.stats.uniformsCount>_t&&(_t=Pt.stats.uniformsCount)}),_t},Zt.getMaxAttributesCount=function(){var _t=0;return et.forEach(function(Pt){Pt.stats.attributesCount>_t&&(_t=Pt.stats.attributesCount)}),_t}),{clear:function(){var _t=st.deleteShader.bind(st);Ee(Ye).forEach(_t),Ye={},Ee(qe).forEach(_t),qe={},et.forEach(function(Pt){st.deleteProgram(Pt.program)}),et.length=0,at={},Zt.shaderCount=0},program:function(_t,Pt,Xt,zt){var ur=at[Pt];ur||(ur=at[Pt]={});var gr=ur[_t];if(gr&&(gr.refCount++,!zt))return gr;var Mr=new ke(Pt,_t);return Zt.shaderCount++,Ge(Mr,Xt,zt),gr||(ur[_t]=Mr),et.push(Mr),se(Mr,{destroy:function(){if(Mr.refCount--,0>=Mr.refCount){st.deleteProgram(Mr.program);var un=et.indexOf(Mr);et.splice(un,1),Zt.shaderCount--}0>=ur[Mr.vertId].refCount&&(st.deleteShader(qe[Mr.vertId]),delete qe[Mr.vertId],delete at[Mr.fragId][Mr.vertId]),Object.keys(at[Mr.fragId]).length||(st.deleteShader(Ye[Mr.fragId]),delete Ye[Mr.fragId],delete at[Mr.fragId])}})},restore:function(){Ye={},qe={};for(var _t=0;_t<et.length;++_t)Ge(et[_t],null,et[_t].attributes.map(function(Pt){return[Pt.location,Pt.name]}))},shader:Te,frag:-1,vert:-1}}function W(st,Gt,Zt,Ht,_r,it,Te){function ke(Ye){var qe;qe=Gt.next===null?5121:Gt.next.colorAttachments[0].texture._texture.type;var at=0,et=0,pt=Ht.framebufferWidth,_t=Ht.framebufferHeight,Pt=null;return Ce(Ye)?Pt=Ye:Ye&&(at=Ye.x|0,et=Ye.y|0,pt=(Ye.width||Ht.framebufferWidth-at)|0,_t=(Ye.height||Ht.framebufferHeight-et)|0,Pt=Ye.data||null),Zt(),Ye=pt*_t*4,Pt||(qe===5121?Pt=new Uint8Array(Ye):qe===5126&&(Pt=Pt||new Float32Array(Ye))),st.pixelStorei(3333,4),st.readPixels(at,et,pt,_t,6408,qe,Pt),Pt}function Ge(Ye){var qe;return Gt.setFBO({framebuffer:Ye.framebuffer},function(){qe=ke(Ye)}),qe}return function(Ye){return Ye&&"framebuffer"in Ye?Ge(Ye):ke(Ye)}}function re(st){for(var Gt=Array(st.length>>2),Ht=0;Ht<Gt.length;Ht++)Gt[Ht]=0;for(Ht=0;Ht<8*st.length;Ht+=8)Gt[Ht>>5]|=(st.charCodeAt(Ht/8)&255)<<24-Ht%32;var Zt=8*st.length;st=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var Ht=Array(64),_r,it,Te,ke,Ge,Ye,qe,at,et,pt,_t;for(Gt[Zt>>5]|=128<<24-Zt%32,Gt[(Zt+64>>9<<4)+15]=Zt,at=0;at<Gt.length;at+=16){for(Zt=st[0],_r=st[1],it=st[2],Te=st[3],ke=st[4],Ge=st[5],Ye=st[6],qe=st[7],et=0;64>et;et++){if(16>et)Ht[et]=Gt[et+at];else{pt=et,_t=Ht[et-2],_t=K(_t,17)^K(_t,19)^_t>>>10,_t=le(_t,Ht[et-7]);var Pt;Pt=Ht[et-15],Pt=K(Pt,7)^K(Pt,18)^Pt>>>3,Ht[pt]=le(le(_t,Pt),Ht[et-16])}pt=ke,pt=K(pt,6)^K(pt,11)^K(pt,25),pt=le(le(le(le(qe,pt),ke&Ge^~ke&Ye),rr[et]),Ht[et]),qe=Zt,qe=K(qe,2)^K(qe,13)^K(qe,22),_t=le(qe,Zt&_r^Zt&it^_r&it),qe=Ye,Ye=Ge,Ge=ke,ke=le(Te,pt),Te=it,it=_r,_r=Zt,Zt=le(pt,_t)}st[0]=le(Zt,st[0]),st[1]=le(_r,st[1]),st[2]=le(it,st[2]),st[3]=le(Te,st[3]),st[4]=le(ke,st[4]),st[5]=le(Ge,st[5]),st[6]=le(Ye,st[6]),st[7]=le(qe,st[7])}for(Gt="",Ht=0;Ht<32*st.length;Ht+=8)Gt+=String.fromCharCode(st[Ht>>5]>>>24-Ht%32&255);return Gt}function Q(st){for(var Gt="",Zt,Ht=0;Ht<st.length;Ht++)Zt=st.charCodeAt(Ht),Gt+="0123456789abcdef".charAt(Zt>>>4&15)+"0123456789abcdef".charAt(Zt&15);return Gt}function Z(st){for(var Gt="",Zt=-1,Ht,_r;++Zt<st.length;)Ht=st.charCodeAt(Zt),_r=Zt+1<st.length?st.charCodeAt(Zt+1):0,55296<=Ht&&56319>=Ht&&56320<=_r&&57343>=_r&&(Ht=65536+((Ht&1023)<<10)+(_r&1023),Zt++),127>=Ht?Gt+=String.fromCharCode(Ht):2047>=Ht?Gt+=String.fromCharCode(192|Ht>>>6&31,128|Ht&63):65535>=Ht?Gt+=String.fromCharCode(224|Ht>>>12&15,128|Ht>>>6&63,128|Ht&63):2097151>=Ht&&(Gt+=String.fromCharCode(240|Ht>>>18&7,128|Ht>>>12&63,128|Ht>>>6&63,128|Ht&63));return Gt}function K(st,Gt){return st>>>Gt|st<<32-Gt}function le(st,Gt){var Zt=(st&65535)+(Gt&65535);return(st>>16)+(Gt>>16)+(Zt>>16)<<16|Zt&65535}function fe(st){return Array.prototype.slice.call(st)}function ue(st){return fe(st).join("")}function V(st){function Gt(){var qe=[],at=[];return se(function(){qe.push.apply(qe,fe(arguments))},{def:function(){var et="v"+_r++;return at.push(et),0<arguments.length&&(qe.push(et,"="),qe.push.apply(qe,fe(arguments)),qe.push(";")),et},toString:function(){return ue([0<at.length?"var "+at.join(",")+";":"",ue(qe)])}})}function Zt(){function qe(Pt,Xt){et(Pt,Xt,"=",at.def(Pt,Xt),";")}var at=Gt(),et=Gt(),pt=at.toString,_t=et.toString;return se(function(){at.apply(at,fe(arguments))},{def:at.def,entry:at,exit:et,save:qe,set:function(Pt,Xt,zt){qe(Pt,Xt),at(Pt,Xt,"=",zt,";")},toString:function(){return pt()+_t()}})}var Ht=st&&st.cache,_r=0,it=[],Te=[],ke=[],Ge=Gt(),Ye={};return{global:Ge,link:function(qe,at){var et=at&&at.stable;if(!et){for(var pt=0;pt<Te.length;++pt)if(Te[pt]===qe&&!ke[pt])return it[pt]}return pt="g"+_r++,it.push(pt),Te.push(qe),ke.push(et),pt},block:Gt,proc:function(qe,at){function et(){var Xt="a"+pt.length;return pt.push(Xt),Xt}var pt=[];at=at||0;for(var _t=0;_t<at;++_t)et();var _t=Zt(),Pt=_t.toString;return Ye[qe]=se(_t,{arg:et,toString:function(){return ue(["function(",pt.join(),"){",Pt(),"}"])}})},scope:Zt,cond:function(){var qe=ue(arguments),at=Zt(),et=Zt(),pt=at.toString,_t=et.toString;return se(at,{then:function(){return at.apply(at,fe(arguments)),this},else:function(){return et.apply(et,fe(arguments)),this},toString:function(){var Pt=_t();return Pt&&(Pt="else{"+Pt+"}"),ue(["if(",qe,"){",pt(),"}",Pt])}})},compile:function(){var qe=['"use strict";',Ge,"return {"];Object.keys(Ye).forEach(function(pt){qe.push('"',pt,'":',Ye[pt].toString(),",")}),qe.push("}");var at=ue(qe).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),et;return Ht&&(et=Q(re(Z(at))),Ht[et])?Ht[et].apply(null,Te):(at=Function.apply(null,it.concat(at)),Ht&&(Ht[et]=at),at.apply(null,Te))}}}function j(st){return Array.isArray(st)||Ce(st)||b(st)}function ee(st){return st.sort(function(Gt,Zt){return Gt==="viewport"?-1:Zt==="viewport"?1:Gt<Zt?-1:1})}function q(st,Gt,Zt,Ht){this.thisDep=st,this.contextDep=Gt,this.propDep=Zt,this.append=Ht}function X(st){return st&&!(st.thisDep||st.contextDep||st.propDep)}function J(st){return new q(!1,!1,!1,st)}function ie(st,Gt){var Zt=st.type;if(Zt===0)return Zt=st.data.length,new q(!0,1<=Zt,2<=Zt,Gt);if(Zt===4)return Zt=st.data,new q(Zt.thisDep,Zt.contextDep,Zt.propDep,Gt);if(Zt===5)return new q(!1,!1,!1,Gt);if(Zt===6){for(var Ht=Zt=!1,_r=!1,it=0;it<st.data.length;++it){var Te=st.data[it];Te.type===1?_r=!0:Te.type===2?Ht=!0:Te.type===3?Zt=!0:Te.type===0?(Zt=!0,Te=Te.data,1<=Te&&(Ht=!0),2<=Te&&(_r=!0)):Te.type===4&&(Zt=Zt||Te.data.thisDep,Ht=Ht||Te.data.contextDep,_r=_r||Te.data.propDep)}return new q(Zt,Ht,_r,Gt)}return new q(Zt===3,Zt===2,Zt===1,Gt)}function ne(st,Gt,Zt,Ht,_r,it,Te,ke,Ge,Ye,qe,at,et,pt,_t,Pt){function Xt(Nt){return Nt.replace(".","_")}function zt(Nt,yr,fn){var mn=Xt(Nt);la.push(Nt),Gn[mn]=Mn[mn]=!!fn,na[mn]=yr}function ur(Nt,yr,fn){var mn=Xt(Nt);la.push(Nt),Array.isArray(fn)?(Mn[mn]=fn.slice(),Gn[mn]=fn.slice()):Mn[mn]=Gn[mn]=fn,Nn[mn]=yr}function gr(){var Nt=V({cache:_t}),yr=Nt.link,fn=Nt.global;Nt.id=mi++,Nt.batchId="0";var mn=yr(Kn),gn=Nt.shared={props:"a0"};Object.keys(Kn).forEach(function(xr){gn[xr]=fn.def(mn,".",xr)});var Dn=Nt.next={},En=Nt.current={};Object.keys(Nn).forEach(function(xr){Array.isArray(Mn[xr])&&(Dn[xr]=fn.def(gn.next,".",xr),En[xr]=fn.def(gn.current,".",xr))});var dn=Nt.constants={};Object.keys(Va).forEach(function(xr){dn[xr]=fn.def(JSON.stringify(Va[xr]))}),Nt.invoke=function(xr,Fr){switch(Fr.type){case 0:var bn=["this",gn.context,gn.props,Nt.batchId];return xr.def(yr(Fr.data),".call(",bn.slice(0,Math.max(Fr.data.length+1,4)),")");case 1:return xr.def(gn.props,Fr.data);case 2:return xr.def(gn.context,Fr.data);case 3:return xr.def("this",Fr.data);case 4:return Fr.data.append(Nt,xr),Fr.data.ref;case 5:return Fr.data.toString();case 6:return Fr.data.map(function(Hn){return Nt.invoke(xr,Hn)})}},Nt.attribCache={};var br={};return Nt.scopeAttrib=function(xr){if(xr=Gt.id(xr),xr in br)return br[xr];var Fr=Ye.scope[xr];return Fr||(Fr=Ye.scope[xr]=new za),br[xr]=yr(Fr)},Nt}function Mr(Nt){var yr=Nt.static;Nt=Nt.dynamic;var fn;if("profile"in yr){var mn=!!yr.profile;fn=J(function(Dn,En){return mn}),fn.enable=mn}else if("profile"in Nt){var gn=Nt.profile;fn=ie(gn,function(Dn,En){return Dn.invoke(En,gn)})}return fn}function un(Nt,yr){var fn=Nt.static,mn=Nt.dynamic;if("framebuffer"in fn){var gn=fn.framebuffer;return gn?(gn=ke.getFramebuffer(gn),J(function(En,dn){var br=En.link(gn),xr=En.shared;return dn.set(xr.framebuffer,".next",br),xr=xr.context,dn.set(xr,".framebufferWidth",br+".width"),dn.set(xr,".framebufferHeight",br+".height"),br})):J(function(En,dn){var br=En.shared;return dn.set(br.framebuffer,".next","null"),br=br.context,dn.set(br,".framebufferWidth",br+".drawingBufferWidth"),dn.set(br,".framebufferHeight",br+".drawingBufferHeight"),"null"})}if("framebuffer"in mn){var Dn=mn.framebuffer;return ie(Dn,function(En,dn){var Fr=En.invoke(dn,Dn),br=En.shared,xr=br.framebuffer,Fr=dn.def(xr,".getFramebuffer(",Fr,")");return dn.set(xr,".next",Fr),br=br.context,dn.set(br,".framebufferWidth",Fr+"?"+Fr+".width:"+br+".drawingBufferWidth"),dn.set(br,".framebufferHeight",Fr+"?"+Fr+".height:"+br+".drawingBufferHeight"),Fr})}return null}function zr(Nt,yr,fn){function mn(dn){if(dn in gn){var br=gn[dn];dn=!0;var xr=br.x|0,Fr=br.y|0,bn,Hn;return"width"in br?bn=br.width|0:dn=!1,"height"in br?Hn=br.height|0:dn=!1,new q(!dn&&yr&&yr.thisDep,!dn&&yr&&yr.contextDep,!dn&&yr&&yr.propDep,function(Sn,Zn){var sa=Sn.shared.context,ma=bn;"width"in br||(ma=Zn.def(sa,".","framebufferWidth","-",xr));var wa=Hn;return"height"in br||(wa=Zn.def(sa,".","framebufferHeight","-",Fr)),[xr,Fr,ma,wa]})}if(dn in Dn){var ra=Dn[dn];return dn=ie(ra,function(Sn,Zn){var ka=Sn.invoke(Zn,ra),sa=Sn.shared.context,ma=Zn.def(ka,".x|0"),wa=Zn.def(ka,".y|0"),ca=Zn.def('"width" in ',ka,"?",ka,".width|0:","(",sa,".","framebufferWidth","-",ma,")"),ka=Zn.def('"height" in ',ka,"?",ka,".height|0:","(",sa,".","framebufferHeight","-",wa,")");return[ma,wa,ca,ka]}),yr&&(dn.thisDep=dn.thisDep||yr.thisDep,dn.contextDep=dn.contextDep||yr.contextDep,dn.propDep=dn.propDep||yr.propDep),dn}return yr?new q(yr.thisDep,yr.contextDep,yr.propDep,function(Sn,Zn){var sa=Sn.shared.context;return[0,0,Zn.def(sa,".","framebufferWidth"),Zn.def(sa,".","framebufferHeight")]}):null}var gn=Nt.static,Dn=Nt.dynamic;if(Nt=mn("viewport")){var En=Nt;Nt=new q(Nt.thisDep,Nt.contextDep,Nt.propDep,function(dn,br){var xr=En.append(dn,br),Fr=dn.shared.context;return br.set(Fr,".viewportWidth",xr[2]),br.set(Fr,".viewportHeight",xr[3]),xr})}return{viewport:Nt,scissor_box:mn("scissor.box")}}function $r(Nt,yr){var fn=Nt.static;if(typeof fn.frag=="string"&&typeof fn.vert=="string"){if(0<Object.keys(yr.dynamic).length)return null;var fn=yr.static,mn=Object.keys(fn);if(0<mn.length&&typeof fn[mn[0]]=="number"){for(var gn=[],Dn=0;Dn<mn.length;++Dn)gn.push([fn[mn[Dn]]|0,mn[Dn]]);return gn}}return null}function hn(Nt,yr,fn){function mn(xr){if(xr in gn){var Fr=Gt.id(gn[xr]);return xr=J(function(){return Fr}),xr.id=Fr,xr}if(xr in Dn){var bn=Dn[xr];return ie(bn,function(Hn,ra){var Sn=Hn.invoke(ra,bn);return ra.def(Hn.shared.strings,".id(",Sn,")")})}return null}var gn=Nt.static,Dn=Nt.dynamic,En=mn("frag"),dn=mn("vert"),br=null;return X(En)&&X(dn)?(br=qe.program(dn.id,En.id,null,fn),Nt=J(function(xr,Fr){return xr.link(br)})):Nt=new q(En&&En.thisDep||dn&&dn.thisDep,En&&En.contextDep||dn&&dn.contextDep,En&&En.propDep||dn&&dn.propDep,function(xr,Fr){var bn=xr.shared.shader,Hn;Hn=En?En.append(xr,Fr):Fr.def(bn,".","frag");var ra;return ra=dn?dn.append(xr,Fr):Fr.def(bn,".","vert"),Fr.def(bn+".program("+ra+","+Hn+")")}),{frag:En,vert:dn,progVar:Nt,program:br}}function Tr(Nt,yr){function fn(Sn,Zn){if(Sn in mn){var sa=mn[Sn]|0;return Zn?Dn.offset=sa:Dn.instances=sa,J(function(wa,ca){return Zn&&(wa.OFFSET=sa),sa})}if(Sn in gn){var ma=gn[Sn];return ie(ma,function(wa,ca){var ka=wa.invoke(ca,ma);return Zn&&(wa.OFFSET=ka),ka})}if(Zn){if(br)return J(function(wa,ca){return wa.OFFSET=0});if(En)return new q(dn.thisDep,dn.contextDep,dn.propDep,function(wa,ca){return ca.def(wa.shared.vao+".currentVAO?"+wa.shared.vao+".currentVAO.offset:0")})}else if(En)return new q(dn.thisDep,dn.contextDep,dn.propDep,function(wa,ca){return ca.def(wa.shared.vao+".currentVAO?"+wa.shared.vao+".currentVAO.instances:-1")});return null}var mn=Nt.static,gn=Nt.dynamic,Dn={},En=!1,dn=function(){if("vao"in mn){var Sn=mn.vao;return Sn!==null&&Ye.getVAO(Sn)===null&&(Sn=Ye.createVAO(Sn)),En=!0,Dn.vao=Sn,J(function(sa){var ma=Ye.getVAO(Sn);return ma?sa.link(ma):"null"})}if("vao"in gn){En=!0;var Zn=gn.vao;return ie(Zn,function(sa,ma){var wa=sa.invoke(ma,Zn);return ma.def(sa.shared.vao+".getVAO("+wa+")")})}return null}(),br=!1,xr=function(){if("elements"in mn){var Sn=mn.elements;if(Dn.elements=Sn,j(Sn)){var Zn=Dn.elements=it.create(Sn,!0),Sn=it.getElements(Zn);br=!0}else Sn&&(Sn=it.getElements(Sn),br=!0);return Zn=J(function(ma,wa){if(Sn){var ca=ma.link(Sn);return ma.ELEMENTS=ca}return ma.ELEMENTS=null}),Zn.value=Sn,Zn}if("elements"in gn){br=!0;var sa=gn.elements;return ie(sa,function(ma,wa){var ca=ma.shared,Do=ca.isBufferArgs,ca=ca.elements,ls=ma.invoke(wa,sa),ka=wa.def("null"),Do=wa.def(Do,"(",ls,")"),ls=ma.cond(Do).then(ka,"=",ca,".createStream(",ls,");").else(ka,"=",ca,".getElements(",ls,");");return wa.entry(ls),wa.exit(ma.cond(Do).then(ca,".destroyStream(",ka,");")),ma.ELEMENTS=ka})}return En?new q(dn.thisDep,dn.contextDep,dn.propDep,function(ma,wa){return wa.def(ma.shared.vao+".currentVAO?"+ma.shared.elements+".getElements("+ma.shared.vao+".currentVAO.elements):null")}):null}(),Fr=fn("offset",!0),bn=function(){if("primitive"in mn){var Sn=mn.primitive;return Dn.primitive=Sn,J(function(sa,ma){return je[Sn]})}if("primitive"in gn){var Zn=gn.primitive;return ie(Zn,function(sa,ma){var wa=sa.constants.primTypes,ca=sa.invoke(ma,Zn);return ma.def(wa,"[",ca,"]")})}return br?X(xr)?xr.value?J(function(sa,ma){return ma.def(sa.ELEMENTS,".primType")}):J(function(){return 4}):new q(xr.thisDep,xr.contextDep,xr.propDep,function(sa,ma){var wa=sa.ELEMENTS;return ma.def(wa,"?",wa,".primType:",4)}):En?new q(dn.thisDep,dn.contextDep,dn.propDep,function(sa,ma){return ma.def(sa.shared.vao+".currentVAO?"+sa.shared.vao+".currentVAO.primitive:4")}):null}(),Hn=function(){if("count"in mn){var Sn=mn.count|0;return Dn.count=Sn,J(function(){return Sn})}if("count"in gn){var Zn=gn.count;return ie(Zn,function(sa,ma){return sa.invoke(ma,Zn)})}return br?X(xr)?xr?Fr?new q(Fr.thisDep,Fr.contextDep,Fr.propDep,function(sa,ma){return ma.def(sa.ELEMENTS,".vertCount-",sa.OFFSET)}):J(function(sa,ma){return ma.def(sa.ELEMENTS,".vertCount")}):J(function(){return-1}):new q(xr.thisDep||Fr.thisDep,xr.contextDep||Fr.contextDep,xr.propDep||Fr.propDep,function(sa,ma){var wa=sa.ELEMENTS;return sa.OFFSET?ma.def(wa,"?",wa,".vertCount-",sa.OFFSET,":-1"):ma.def(wa,"?",wa,".vertCount:-1")}):En?new q(dn.thisDep,dn.contextDep,dn.propDep,function(sa,ma){return ma.def(sa.shared.vao,".currentVAO?",sa.shared.vao,".currentVAO.count:-1")}):null}(),ra=fn("instances",!1);return{elements:xr,primitive:bn,count:Hn,instances:ra,offset:Fr,vao:dn,vaoActive:En,elementsActive:br,static:Dn}}function wr(Nt,yr){var fn=Nt.static,mn=Nt.dynamic,gn={};return la.forEach(function(Dn){function En(br,xr){if(Dn in fn){var Fr=br(fn[Dn]);gn[dn]=J(function(){return Fr})}else if(Dn in mn){var bn=mn[Dn];gn[dn]=ie(bn,function(Hn,ra){return xr(Hn,ra,Hn.invoke(ra,bn))})}}var dn=Xt(Dn);switch(Dn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return En(function(br){return br},function(br,xr,Fr){return Fr});case"depth.func":return En(function(br){return nr[br]},function(br,xr,Fr){return xr.def(br.constants.compareFuncs,"[",Fr,"]")});case"depth.range":return En(function(br){return br},function(br,xr,Fr){return br=xr.def("+",Fr,"[0]"),xr=xr.def("+",Fr,"[1]"),[br,xr]});case"blend.func":return En(function(br){return[ar["srcRGB"in br?br.srcRGB:br.src],ar["dstRGB"in br?br.dstRGB:br.dst],ar["srcAlpha"in br?br.srcAlpha:br.src],ar["dstAlpha"in br?br.dstAlpha:br.dst]]},function(br,xr,Fr){function bn(Zn,sa){return xr.def('"',Zn,sa,'" in ',Fr,"?",Fr,".",Zn,sa,":",Fr,".",Zn)}br=br.constants.blendFuncs;var Hn=bn("src","RGB"),Sn=bn("dst","RGB"),Hn=xr.def(br,"[",Hn,"]"),ra=xr.def(br,"[",bn("src","Alpha"),"]"),Sn=xr.def(br,"[",Sn,"]");return br=xr.def(br,"[",bn("dst","Alpha"),"]"),[Hn,Sn,ra,br]});case"blend.equation":return En(function(br){if(typeof br=="string")return[Pa[br],Pa[br]];if(typeof br=="object")return[Pa[br.rgb],Pa[br.alpha]]},function(br,xr,Fr){var bn=br.constants.blendEquations,Hn=xr.def(),ra=xr.def();return br=br.cond("typeof ",Fr,'==="string"'),br.then(Hn,"=",ra,"=",bn,"[",Fr,"];"),br.else(Hn,"=",bn,"[",Fr,".rgb];",ra,"=",bn,"[",Fr,".alpha];"),xr(br),[Hn,ra]});case"blend.color":return En(function(br){return l(4,function(xr){return+br[xr]})},function(br,xr,Fr){return l(4,function(bn){return xr.def("+",Fr,"[",bn,"]")})});case"stencil.mask":return En(function(br){return br|0},function(br,xr,Fr){return xr.def(Fr,"|0")});case"stencil.func":return En(function(br){return[nr[br.cmp||"keep"],br.ref||0,"mask"in br?br.mask:-1]},function(br,xr,Fr){br=xr.def('"cmp" in ',Fr,"?",br.constants.compareFuncs,"[",Fr,".cmp]",":",7680);var bn=xr.def(Fr,".ref|0");return xr=xr.def('"mask" in ',Fr,"?",Fr,".mask|0:-1"),[br,bn,xr]});case"stencil.opFront":case"stencil.opBack":return En(function(br){return[Dn==="stencil.opBack"?1029:1028,cr[br.fail||"keep"],cr[br.zfail||"keep"],cr[br.zpass||"keep"]]},function(br,xr,Fr){function bn(ra){return xr.def('"',ra,'" in ',Fr,"?",Hn,"[",Fr,".",ra,"]:",7680)}var Hn=br.constants.stencilOps;return[Dn==="stencil.opBack"?1029:1028,bn("fail"),bn("zfail"),bn("zpass")]});case"polygonOffset.offset":return En(function(br){return[br.factor|0,br.units|0]},function(br,xr,Fr){return br=xr.def(Fr,".factor|0"),xr=xr.def(Fr,".units|0"),[br,xr]});case"cull.face":return En(function(br){var xr=0;return br==="front"?xr=1028:br==="back"&&(xr=1029),xr},function(br,xr,Fr){return xr.def(Fr,'==="front"?',1028,":",1029)});case"lineWidth":return En(function(br){return br},function(br,xr,Fr){return Fr});case"frontFace":return En(function(br){return Kr[br]},function(br,xr,Fr){return xr.def(Fr+'==="cw"?2304:2305')});case"colorMask":return En(function(br){return br.map(function(xr){return!!xr})},function(br,xr,Fr){return l(4,function(bn){return"!!"+Fr+"["+bn+"]"})});case"sample.coverage":return En(function(br){return["value"in br?br.value:1,!!br.invert]},function(br,xr,Fr){return br=xr.def('"value" in ',Fr,"?+",Fr,".value:1"),xr=xr.def("!!",Fr,".invert"),[br,xr]})}}),gn}function Ur(Nt,yr){var fn=Nt.static,mn=Nt.dynamic,gn={};return Object.keys(fn).forEach(function(Dn){var En=fn[Dn],dn;if(typeof En=="number"||typeof En=="boolean")dn=J(function(){return En});else if(typeof En=="function"){var br=En._reglType;br==="texture2d"||br==="textureCube"?dn=J(function(xr){return xr.link(En)}):(br==="framebuffer"||br==="framebufferCube")&&(dn=J(function(xr){return xr.link(En.color[0])}))}else w(En)&&(dn=J(function(xr){return xr.global.def("[",l(En.length,function(Fr){return En[Fr]}),"]")}));dn.value=En,gn[Dn]=dn}),Object.keys(mn).forEach(function(Dn){var En=mn[Dn];gn[Dn]=ie(En,function(dn,br){return dn.invoke(br,En)})}),gn}function Br(Nt,yr){var fn=Nt.static,mn=Nt.dynamic,gn={};return Object.keys(fn).forEach(function(Dn){var En=fn[Dn],dn=Gt.id(Dn),br=new za;if(j(En))br.state=1,br.buffer=_r.getBuffer(_r.create(En,34962,!1,!0)),br.type=0;else{var xr=_r.getBuffer(En);if(xr)br.state=1,br.buffer=xr,br.type=0;else if("constant"in En){var Fr=En.constant;br.buffer="null",br.state=2,typeof Fr=="number"?br.x=Fr:Ut.forEach(function(sa,ma){ma<Fr.length&&(br[sa]=Fr[ma])})}else{var xr=j(En.buffer)?_r.getBuffer(_r.create(En.buffer,34962,!1,!0)):_r.getBuffer(En.buffer),bn=En.offset|0,Hn=En.stride|0,ra=En.size|0,Sn=!!En.normalized,Zn=0;"type"in En&&(Zn=Re[En.type]),En=En.divisor|0,br.buffer=xr,br.state=1,br.size=ra,br.normalized=Sn,br.type=Zn||xr.dtype,br.offset=bn,br.stride=Hn,br.divisor=En}}gn[Dn]=J(function(sa,ma){var wa=sa.attribCache;if(dn in wa)return wa[dn];var ca={isStream:!1};return Object.keys(br).forEach(function(ka){ca[ka]=br[ka]}),br.buffer&&(ca.buffer=sa.link(br.buffer),ca.type=ca.type||ca.buffer+".dtype"),wa[dn]=ca})}),Object.keys(mn).forEach(function(Dn){var En=mn[Dn];gn[Dn]=ie(En,function(dn,br){function xr(wa){br(Sn[wa],"=",Fr,".",wa,"|0;")}var Fr=dn.invoke(br,En),ra=dn.shared,bn=dn.constants,Hn=ra.isBufferArgs,ra=ra.buffer,Sn={isStream:br.def(!1)},Zn=new za;Zn.state=1,Object.keys(Zn).forEach(function(wa){Sn[wa]=br.def(""+Zn[wa])});var sa=Sn.buffer,ma=Sn.type;return br("if(",Hn,"(",Fr,")){",Sn.isStream,"=true;",sa,"=",ra,".createStream(",34962,",",Fr,");",ma,"=",sa,".dtype;","}else{",sa,"=",ra,".getBuffer(",Fr,");","if(",sa,"){",ma,"=",sa,".dtype;",'}else if("constant" in ',Fr,"){",Sn.state,"=",2,";","if(typeof "+Fr+'.constant === "number"){',Sn[Ut[0]],"=",Fr,".constant;",Ut.slice(1).map(function(wa){return Sn[wa]}).join("="),"=0;","}else{",Ut.map(function(wa,ca){return Sn[wa]+"="+Fr+".constant.length>"+ca+"?"+Fr+".constant["+ca+"]:0;"}).join(""),"}}else{","if(",Hn,"(",Fr,".buffer)){",sa,"=",ra,".createStream(",34962,",",Fr,".buffer);","}else{",sa,"=",ra,".getBuffer(",Fr,".buffer);","}",ma,'="type" in ',Fr,"?",bn.glTypes,"[",Fr,".type]:",sa,".dtype;",Sn.normalized,"=!!",Fr,".normalized;"),xr("size"),xr("offset"),xr("stride"),xr("divisor"),br("}}"),br.exit("if(",Sn.isStream,"){",ra,".destroyStream(",sa,");","}"),Sn})}),gn}function Cr(Nt){var yr=Nt.static,fn=Nt.dynamic,mn={};return Object.keys(yr).forEach(function(gn){var Dn=yr[gn];mn[gn]=J(function(En,dn){return typeof Dn=="number"||typeof Dn=="boolean"?""+Dn:En.link(Dn)})}),Object.keys(fn).forEach(function(gn){var Dn=fn[gn];mn[gn]=ie(Dn,function(En,dn){return En.invoke(dn,Dn)})}),mn}function nt(Nt,yr,fn,mn,gn){function Dn(Zn){var sa=dn[Zn];sa&&(xr[Zn]=sa)}var En=$r(Nt,yr),Hn=un(Nt),dn=zr(Nt,Hn),br=Tr(Nt),xr=wr(Nt),Fr=hn(Nt,gn,En);Dn("viewport"),Dn(Xt("scissor.box"));var bn=0<Object.keys(xr).length,Hn={framebuffer:Hn,draw:br,shader:Fr,state:xr,dirty:bn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Hn.profile=Mr(Nt),Hn.uniforms=Ur(fn),Hn.drawVAO=Hn.scopeVAO=br.vao,!Hn.drawVAO&&Fr.program&&!En&&Zt.angle_instanced_arrays&&br.static.elements){var ra=!0;if(Nt=Fr.program.attributes.map(function(Zn){return Zn=yr.static[Zn],ra=ra&&!!Zn,Zn}),ra&&0<Nt.length){var Sn=Ye.getVAO(Ye.createVAO({attributes:Nt,elements:br.static.elements}));Hn.drawVAO=new q(null,null,null,function(Zn,sa){return Zn.link(Sn)}),Hn.useVAO=!0}}return En?Hn.useVAO=!0:Hn.attributes=Br(yr),Hn.context=Cr(mn),Hn}function Rt(Nt,yr,fn){var mn=Nt.shared.context,gn=Nt.scope();Object.keys(fn).forEach(function(Dn){yr.save(mn,"."+Dn);var En=fn[Dn].append(Nt,yr);Array.isArray(En)?gn(mn,".",Dn,"=[",En.join(),"];"):gn(mn,".",Dn,"=",En,";")}),yr(gn)}function Jt(Nt,yr,fn,mn){var dn=Nt.shared,gn=dn.gl,Dn=dn.framebuffer,En;nn&&(En=yr.def(dn.extensions,".webgl_draw_buffers"));var br=Nt.constants,dn=br.drawBuffer,br=br.backBuffer;Nt=fn?fn.append(Nt,yr):yr.def(Dn,".next"),mn||yr("if(",Nt,"!==",Dn,".cur){"),yr("if(",Nt,"){",gn,".bindFramebuffer(",36160,",",Nt,".framebuffer);"),nn&&yr(En,".drawBuffersWEBGL(",dn,"[",Nt,".colorAttachments.length]);"),yr("}else{",gn,".bindFramebuffer(",36160,",null);"),nn&&yr(En,".drawBuffersWEBGL(",br,");"),yr("}",Dn,".cur=",Nt,";"),mn||yr("}")}function hr(Nt,yr,fn){var mn=Nt.shared,gn=mn.gl,Dn=Nt.current,En=Nt.next,dn=mn.current,br=mn.next,xr=Nt.cond(dn,".dirty");la.forEach(function(Fr){if(Fr=Xt(Fr),!(Fr in fn.state)){var bn,Hn;if(Fr in En){bn=En[Fr],Hn=Dn[Fr];var ra=l(Mn[Fr].length,function(Sn){return xr.def(bn,"[",Sn,"]")});xr(Nt.cond(ra.map(function(Sn,Zn){return Sn+"!=="+Hn+"["+Zn+"]"}).join("||")).then(gn,".",Nn[Fr],"(",ra,");",ra.map(function(Sn,Zn){return Hn+"["+Zn+"]="+Sn}).join(";"),";"))}else bn=xr.def(br,".",Fr),ra=Nt.cond(bn,"!==",dn,".",Fr),xr(ra),Fr in na?ra(Nt.cond(bn).then(gn,".enable(",na[Fr],");").else(gn,".disable(",na[Fr],");"),dn,".",Fr,"=",bn,";"):ra(gn,".",Nn[Fr],"(",bn,");",dn,".",Fr,"=",bn,";")}}),Object.keys(fn.state).length===0&&xr(dn,".dirty=false;"),yr(xr)}function Dr(Nt,yr,fn,mn){var gn=Nt.shared,Dn=Nt.current,En=gn.current,dn=gn.gl,br;ee(Object.keys(fn)).forEach(function(xr){var Fr=fn[xr];if(!mn||mn(Fr)){var bn=Fr.append(Nt,yr);if(na[xr]){var Hn=na[xr];X(Fr)?(br=Nt.link(bn,{stable:!0}),yr(Nt.cond(br).then(dn,".enable(",Hn,");").else(dn,".disable(",Hn,");")),yr(En,".",xr,"=",br,";")):(yr(Nt.cond(bn).then(dn,".enable(",Hn,");").else(dn,".disable(",Hn,");")),yr(En,".",xr,"=",bn,";"))}else if(w(bn)){var ra=Dn[xr];yr(dn,".",Nn[xr],"(",bn,");",bn.map(function(Sn,Zn){return ra+"["+Zn+"]="+Sn}).join(";"),";")}else X(Fr)?(br=Nt.link(bn,{stable:!0}),yr(dn,".",Nn[xr],"(",br,");",En,".",xr,"=",br,";")):yr(dn,".",Nn[xr],"(",bn,");",En,".",xr,"=",bn,";")}})}function Gr(Nt,yr){Ar&&(Nt.instancing=yr.def(Nt.shared.extensions,".angle_instanced_arrays"))}function Rr(Nt,yr,fn,mn,gn){function Dn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function En(Zn){ra=yr.def(),Zn(ra,"=",Dn(),";"),typeof gn=="string"?Zn(Fr,".count+=",gn,";"):Zn(Fr,".count++;"),pt&&(mn?(Sn=yr.def(),Zn(Sn,"=",Hn,".getNumPendingQueries();")):Zn(Hn,".beginQuery(",Fr,");"))}function dn(Zn){Zn(Fr,".cpuTime+=",Dn(),"-",ra,";"),pt&&(mn?Zn(Hn,".pushScopeStats(",Sn,",",Hn,".getNumPendingQueries(),",Fr,");"):Zn(Hn,".endQuery();"))}function br(Zn){var sa=yr.def(bn,".profile");yr(bn,".profile=",Zn,";"),yr.exit(bn,".profile=",sa,";")}var xr=Nt.shared,Fr=Nt.stats,bn=xr.current,Hn=xr.timer;fn=fn.profile;var ra,Sn;if(fn){if(X(fn)){fn.enable?(En(yr),dn(yr.exit),br("true")):br("false");return}fn=fn.append(Nt,yr),br(fn)}else fn=yr.def(bn,".profile");xr=Nt.block(),En(xr),yr("if(",fn,"){",xr,"}"),Nt=Nt.block(),dn(Nt),yr.exit("if(",fn,"){",Nt,"}")}function Ct(Nt,yr,fn,mn,gn){function Dn(br){switch(br){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function En(br,xr,Fr){function bn(){yr("if(!",Zn,".buffer){",ra,".enableVertexAttribArray(",Sn,");}");var ca=Fr.type,ka;ka=Fr.size?yr.def(Fr.size,"||",xr):xr,yr("if(",Zn,".type!==",ca,"||",Zn,".size!==",ka,"||",wa.map(function(Do){return Zn+"."+Do+"!=="+Fr[Do]}).join("||"),"){",ra,".bindBuffer(",34962,",",sa,".buffer);",ra,".vertexAttribPointer(",[Sn,ka,ca,Fr.normalized,Fr.stride,Fr.offset],");",Zn,".type=",ca,";",Zn,".size=",ka,";",wa.map(function(Do){return Zn+"."+Do+"="+Fr[Do]+";"}).join(""),"}"),Ar&&(ca=Fr.divisor,yr("if(",Zn,".divisor!==",ca,"){",Nt.instancing,".vertexAttribDivisorANGLE(",[Sn,ca],");",Zn,".divisor=",ca,";}"))}function Hn(){yr("if(",Zn,".buffer){",ra,".disableVertexAttribArray(",Sn,");",Zn,".buffer=null;","}if(",Ut.map(function(ca,ka){return Zn+"."+ca+"!=="+ma[ka]}).join("||"),"){",ra,".vertexAttrib4f(",Sn,",",ma,");",Ut.map(function(ca,ka){return Zn+"."+ca+"="+ma[ka]+";"}).join(""),"}")}var ra=dn.gl,Sn=yr.def(br,".location"),Zn=yr.def(dn.attributes,"[",Sn,"]");br=Fr.state;var sa=Fr.buffer,ma=[Fr.x,Fr.y,Fr.z,Fr.w],wa=["buffer","normalized","offset","stride"];br===1?bn():br===2?Hn():(yr("if(",br,"===",1,"){"),bn(),yr("}else{"),Hn(),yr("}"))}var dn=Nt.shared;mn.forEach(function(br){var xr=br.name,Fr=fn.attributes[xr],bn;if(Fr){if(!gn(Fr))return;bn=Fr.append(Nt,yr)}else{if(!gn(yn))return;var Hn=Nt.scopeAttrib(xr);bn={},Object.keys(new za).forEach(function(ra){bn[ra]=yr.def(Hn,".",ra)})}En(Nt.link(br),Dn(br.info.type),bn)})}function tr(Nt,yr,fn,mn,gn,Dn){for(var En=Nt.shared,dn=En.gl,br,xr=0;xr<mn.length;++xr){var ra=mn[xr],Fr=ra.name,bn=ra.info.type,Hn=fn.uniforms[Fr],ra=Nt.link(ra)+".location",Sn;if(Hn){if(!gn(Hn))continue;if(X(Hn)){if(Fr=Hn.value,bn===35678||bn===35680)bn=Nt.link(Fr._texture||Fr.color[0]._texture),yr(dn,".uniform1i(",ra,",",bn+".bind());"),yr.exit(bn,".unbind();");else if(bn===35674||bn===35675||bn===35676)Fr=Nt.global.def("new Float32Array(["+Array.prototype.slice.call(Fr)+"])"),Hn=2,bn===35675?Hn=3:bn===35676&&(Hn=4),yr(dn,".uniformMatrix",Hn,"fv(",ra,",false,",Fr,");");else{switch(bn){case 5126:br="1f";break;case 35664:br="2f";break;case 35665:br="3f";break;case 35666:br="4f";break;case 35670:br="1i";break;case 5124:br="1i";break;case 35671:br="2i";break;case 35667:br="2i";break;case 35672:br="3i";break;case 35668:br="3i";break;case 35673:br="4i";break;case 35669:br="4i"}yr(dn,".uniform",br,"(",ra,",",w(Fr)?Array.prototype.slice.call(Fr):Fr,");")}continue}else Sn=Hn.append(Nt,yr)}else{if(!gn(yn))continue;Sn=yr.def(En.uniforms,"[",Gt.id(Fr),"]")}switch(bn===35678?yr("if(",Sn,"&&",Sn,'._reglType==="framebuffer"){',Sn,"=",Sn,".color[0];","}"):bn===35680&&yr("if(",Sn,"&&",Sn,'._reglType==="framebufferCube"){',Sn,"=",Sn,".color[0];","}"),Fr=1,bn){case 35678:case 35680:bn=yr.def(Sn,"._texture"),yr(dn,".uniform1i(",ra,",",bn,".bind());"),yr.exit(bn,".unbind();");continue;case 5124:case 35670:br="1i";break;case 35667:case 35671:br="2i",Fr=2;break;case 35668:case 35672:br="3i",Fr=3;break;case 35669:case 35673:br="4i",Fr=4;break;case 5126:br="1f";break;case 35664:br="2f",Fr=2;break;case 35665:br="3f",Fr=3;break;case 35666:br="4f",Fr=4;break;case 35674:br="Matrix2fv";break;case 35675:br="Matrix3fv";break;case 35676:br="Matrix4fv"}if(br.charAt(0)==="M"){yr(dn,".uniform",br,"(",ra,",");var ra=Math.pow(bn-35674+2,2),Zn=Nt.global.def("new Float32Array(",ra,")");Array.isArray(Sn)?yr("false,(",l(ra,function(wa){return Zn+"["+wa+"]="+Sn[wa]}),",",Zn,")"):yr("false,(Array.isArray(",Sn,")||",Sn," instanceof Float32Array)?",Sn,":(",l(ra,function(wa){return Zn+"["+wa+"]="+Sn+"["+wa+"]"}),",",Zn,")"),yr(");")}else{if(1<Fr){for(var bn=[],sa=[],Hn=0;Hn<Fr;++Hn)Array.isArray(Sn)?sa.push(Sn[Hn]):sa.push(yr.def(Sn+"["+Hn+"]")),Dn&&bn.push(yr.def());Dn&&yr("if(!",Nt.batchId,"||",bn.map(function(ma,wa){return ma+"!=="+sa[wa]}).join("||"),"){",bn.map(function(ma,wa){return ma+"="+sa[wa]+";"}).join("")),yr(dn,".uniform",br,"(",ra,",",sa.join(","),");")}else Dn&&(bn=yr.def(),yr("if(!",Nt.batchId,"||",bn,"!==",Sn,"){",bn,"=",Sn,";")),yr(dn,".uniform",br,"(",ra,",",Sn,");");Dn&&yr("}")}}}function Lr(Nt,yr,fn,mn){function gn(ca){var ka=Fr[ca];return ka?ka.contextDep&&mn.contextDynamic||ka.propDep?ka.append(Nt,fn):ka.append(Nt,yr):yr.def(xr,".",ca)}function Dn(){function ca(){fn(sa,".drawElementsInstancedANGLE(",[Hn,Sn,ma,ra+"<<(("+ma+"-5121)>>1)",Zn],");")}function ka(){fn(sa,".drawArraysInstancedANGLE(",[Hn,ra,Sn,Zn],");")}bn&&bn!=="null"?wa?ca():(fn("if(",bn,"){"),ca(),fn("}else{"),ka(),fn("}")):ka()}function En(){function ca(){fn(br+".drawElements("+[Hn,Sn,ma,ra+"<<(("+ma+"-5121)>>1)"]+");")}function ka(){fn(br+".drawArrays("+[Hn,ra,Sn]+");")}bn&&bn!=="null"?wa?ca():(fn("if(",bn,"){"),ca(),fn("}else{"),ka(),fn("}")):ka()}var dn=Nt.shared,br=dn.gl,xr=dn.draw,Fr=mn.draw,bn=function(){var ca=Fr.elements,ka=yr;return ca?((ca.contextDep&&mn.contextDynamic||ca.propDep)&&(ka=fn),ca=ca.append(Nt,ka),Fr.elementsActive&&ka("if("+ca+")"+br+".bindBuffer(34963,"+ca+".buffer.buffer);")):(ca=ka.def(),ka(ca,"=",xr,".","elements",";","if(",ca,"){",br,".bindBuffer(",34963,",",ca,".buffer.buffer);}","else if(",dn.vao,".currentVAO){",ca,"=",Nt.shared.elements+".getElements("+dn.vao,".currentVAO.elements);",vn?"":"if("+ca+")"+br+".bindBuffer(34963,"+ca+".buffer.buffer);","}")),ca}(),Hn=gn("primitive"),ra=gn("offset"),Sn=function(){var ca=Fr.count,ka=yr;return ca?((ca.contextDep&&mn.contextDynamic||ca.propDep)&&(ka=fn),ca=ca.append(Nt,ka)):ca=ka.def(xr,".","count"),ca}();if(typeof Sn=="number"){if(Sn===0)return}else fn("if(",Sn,"){"),fn.exit("}");var Zn,sa;Ar&&(Zn=gn("instances"),sa=Nt.instancing);var ma=bn+".type",wa=Fr.elements&&X(Fr.elements)&&!Fr.vaoActive;Ar&&(typeof Zn!="number"||0<=Zn)?typeof Zn=="string"?(fn("if(",Zn,">0){"),Dn(),fn("}else if(",Zn,"<0){"),En(),fn("}")):Dn():En()}function Nr(Nt,yr,fn,mn,gn){return yr=gr(),gn=yr.proc("body",gn),Ar&&(yr.instancing=gn.def(yr.shared.extensions,".angle_instanced_arrays")),Nt(yr,gn,fn,mn),yr.compile().body}function Tn(Nt,yr,fn,mn){Gr(Nt,yr),fn.useVAO?fn.drawVAO?yr(Nt.shared.vao,".setVAO(",fn.drawVAO.append(Nt,yr),");"):yr(Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"):(yr(Nt.shared.vao,".setVAO(null);"),Ct(Nt,yr,fn,mn.attributes,function(){return!0})),tr(Nt,yr,fn,mn.uniforms,function(){return!0},!1),Lr(Nt,yr,yr,fn)}function rn(Nt,yr){var fn=Nt.proc("draw",1);Gr(Nt,fn),Rt(Nt,fn,yr.context),Jt(Nt,fn,yr.framebuffer),hr(Nt,fn,yr),Dr(Nt,fn,yr.state),Rr(Nt,fn,yr,!1,!0);var mn=yr.shader.progVar.append(Nt,fn);if(fn(Nt.shared.gl,".useProgram(",mn,".program);"),yr.shader.program)Tn(Nt,fn,yr,yr.shader.program);else{fn(Nt.shared.vao,".setVAO(null);");var gn=Nt.global.def("{}"),Dn=fn.def(mn,".id"),En=fn.def(gn,"[",Dn,"]");fn(Nt.cond(En).then(En,".call(this,a0);").else(En,"=",gn,"[",Dn,"]=",Nt.link(function(dn){return Nr(Tn,Nt,yr,dn,1)}),"(",mn,");",En,".call(this,a0);"))}0<Object.keys(yr.state).length&&fn(Nt.shared.current,".dirty=true;"),Nt.shared.vao&&fn(Nt.shared.vao,".setVAO(null);")}function kn(Nt,yr,fn,mn){function gn(){return!0}Nt.batchId="a1",Gr(Nt,yr),Ct(Nt,yr,fn,mn.attributes,gn),tr(Nt,yr,fn,mn.uniforms,gn,!1),Lr(Nt,yr,yr,fn)}function Cn(Nt,yr,fn,mn){function gn(bn){return bn.contextDep&&En||bn.propDep}function Dn(bn){return!gn(bn)}Gr(Nt,yr);var En=fn.contextDep,dn=yr.def(),br=yr.def();Nt.shared.props=br,Nt.batchId=dn;var xr=Nt.scope(),Fr=Nt.scope();yr(xr.entry,"for(",dn,"=0;",dn,"<","a1",";++",dn,"){",br,"=","a0","[",dn,"];",Fr,"}",xr.exit),fn.needsContext&&Rt(Nt,Fr,fn.context),fn.needsFramebuffer&&Jt(Nt,Fr,fn.framebuffer),Dr(Nt,Fr,fn.state,gn),fn.profile&&gn(fn.profile)&&Rr(Nt,Fr,fn,!1,!0),mn?(fn.useVAO?fn.drawVAO?gn(fn.drawVAO)?Fr(Nt.shared.vao,".setVAO(",fn.drawVAO.append(Nt,Fr),");"):xr(Nt.shared.vao,".setVAO(",fn.drawVAO.append(Nt,xr),");"):xr(Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"):(xr(Nt.shared.vao,".setVAO(null);"),Ct(Nt,xr,fn,mn.attributes,Dn),Ct(Nt,Fr,fn,mn.attributes,gn)),tr(Nt,xr,fn,mn.uniforms,Dn,!1),tr(Nt,Fr,fn,mn.uniforms,gn,!0),Lr(Nt,xr,Fr,fn)):(yr=Nt.global.def("{}"),mn=fn.shader.progVar.append(Nt,Fr),br=Fr.def(mn,".id"),xr=Fr.def(yr,"[",br,"]"),Fr(Nt.shared.gl,".useProgram(",mn,".program);","if(!",xr,"){",xr,"=",yr,"[",br,"]=",Nt.link(function(bn){return Nr(kn,Nt,fn,bn,2)}),"(",mn,");}",xr,".call(this,a0[",dn,"],",dn,");"))}function oa(Nt,yr){function fn(xr){return xr.contextDep&&gn||xr.propDep}var mn=Nt.proc("batch",2);Nt.batchId="0",Gr(Nt,mn);var gn=!1,Dn=!0;Object.keys(yr.context).forEach(function(xr){gn=gn||yr.context[xr].propDep}),gn||(Rt(Nt,mn,yr.context),Dn=!1);var En=yr.framebuffer,dn=!1;if(En?(En.propDep?gn=dn=!0:En.contextDep&&gn&&(dn=!0),dn||Jt(Nt,mn,En)):Jt(Nt,mn,null),yr.state.viewport&&yr.state.viewport.propDep&&(gn=!0),hr(Nt,mn,yr),Dr(Nt,mn,yr.state,function(xr){return!fn(xr)}),yr.profile&&fn(yr.profile)||Rr(Nt,mn,yr,!1,"a1"),yr.contextDep=gn,yr.needsContext=Dn,yr.needsFramebuffer=dn,Dn=yr.shader.progVar,Dn.contextDep&&gn||Dn.propDep)Cn(Nt,mn,yr,null);else if(Dn=Dn.append(Nt,mn),mn(Nt.shared.gl,".useProgram(",Dn,".program);"),yr.shader.program)Cn(Nt,mn,yr,yr.shader.program);else{mn(Nt.shared.vao,".setVAO(null);");var En=Nt.global.def("{}"),dn=mn.def(Dn,".id"),br=mn.def(En,"[",dn,"]");mn(Nt.cond(br).then(br,".call(this,a0,a1);").else(br,"=",En,"[",dn,"]=",Nt.link(function(bn){return Nr(Cn,Nt,yr,bn,2)}),"(",Dn,");",br,".call(this,a0,a1);"))}0<Object.keys(yr.state).length&&mn(Nt.shared.current,".dirty=true;"),Nt.shared.vao&&mn(Nt.shared.vao,".setVAO(null);")}function ya(Nt,yr){function fn(dn){var br=yr.shader[dn];br&&(br=br.append(Nt,mn),isNaN(br)?mn.set(gn.shader,"."+dn,br):mn.set(gn.shader,"."+dn,Nt.link(br,{stable:!0})))}var mn=Nt.proc("scope",3);Nt.batchId="a2";var gn=Nt.shared,Dn=gn.current;if(Rt(Nt,mn,yr.context),yr.framebuffer&&yr.framebuffer.append(Nt,mn),ee(Object.keys(yr.state)).forEach(function(dn){var br=yr.state[dn],xr=br.append(Nt,mn);w(xr)?xr.forEach(function(Fr,bn){isNaN(Fr)?mn.set(Nt.next[dn],"["+bn+"]",Fr):mn.set(Nt.next[dn],"["+bn+"]",Nt.link(Fr,{stable:!0}))}):X(br)?mn.set(gn.next,"."+dn,Nt.link(xr,{stable:!0})):mn.set(gn.next,"."+dn,xr)}),Rr(Nt,mn,yr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(dn){var br=yr.draw[dn];br&&(br=br.append(Nt,mn),isNaN(br)?mn.set(gn.draw,"."+dn,br):mn.set(gn.draw,"."+dn,Nt.link(br),{stable:!0}))}),Object.keys(yr.uniforms).forEach(function(dn){var br=yr.uniforms[dn].append(Nt,mn);Array.isArray(br)&&(br="["+br.map(function(xr){return isNaN(xr)?xr:Nt.link(xr,{stable:!0})})+"]"),mn.set(gn.uniforms,"["+Nt.link(Gt.id(dn),{stable:!0})+"]",br)}),Object.keys(yr.attributes).forEach(function(dn){var br=yr.attributes[dn].append(Nt,mn),xr=Nt.scopeAttrib(dn);Object.keys(new za).forEach(function(Fr){mn.set(xr,"."+Fr,br[Fr])})}),yr.scopeVAO){var En=yr.scopeVAO.append(Nt,mn);isNaN(En)?mn.set(gn.vao,".targetVAO",En):mn.set(gn.vao,".targetVAO",Nt.link(En,{stable:!0}))}fn("vert"),fn("frag"),0<Object.keys(yr.state).length&&(mn(Dn,".dirty=true;"),mn.exit(Dn,".dirty=true;")),mn("a1(",Nt.shared.context,",a0,",Nt.batchId,");")}function Oa(Nt){if(typeof Nt=="object"&&!w(Nt)){for(var yr=Object.keys(Nt),fn=0;fn<yr.length;++fn)if(ce.isDynamic(Nt[yr[fn]]))return!0;return!1}}function Xa(Nt,yr,fn){function mn(bn,Hn){En.forEach(function(ra){var Sn=gn[ra];ce.isDynamic(Sn)&&(Sn=bn.invoke(Hn,Sn),Hn(Fr,".",ra,"=",Sn,";"))})}var gn=yr.static[fn];if(gn&&Oa(gn)){var Dn=Nt.global,En=Object.keys(gn),dn=!1,br=!1,xr=!1,Fr=Nt.global.def("{}");En.forEach(function(bn){var Hn=gn[bn];if(ce.isDynamic(Hn))typeof Hn=="function"&&(Hn=gn[bn]=ce.unbox(Hn)),bn=ie(Hn,null),dn=dn||bn.thisDep,xr=xr||bn.propDep,br=br||bn.contextDep;else{switch(Dn(Fr,".",bn,"="),typeof Hn){case"number":Dn(Hn);break;case"string":Dn('"',Hn,'"');break;case"object":Array.isArray(Hn)&&Dn("[",Hn.join(),"]");break;default:Dn(Nt.link(Hn))}Dn(";")}}),yr.dynamic[fn]=new ce.DynamicVariable(4,{thisDep:dn,contextDep:br,propDep:xr,ref:Fr,append:mn}),delete yr.static[fn]}}var za=Ye.Record,Pa={add:32774,subtract:32778,"reverse subtract":32779};Zt.ext_blend_minmax&&(Pa.min=32775,Pa.max=32776);var Ar=Zt.angle_instanced_arrays,nn=Zt.webgl_draw_buffers,vn=Zt.oes_vertex_array_object,Mn={dirty:!0,profile:Pt.profile},Gn={},la=[],na={},Nn={};zt("dither",3024),zt("blend.enable",3042),ur("blend.color","blendColor",[0,0,0,0]),ur("blend.equation","blendEquationSeparate",[32774,32774]),ur("blend.func","blendFuncSeparate",[1,0,1,0]),zt("depth.enable",2929,!0),ur("depth.func","depthFunc",513),ur("depth.range","depthRange",[0,1]),ur("depth.mask","depthMask",!0),ur("colorMask","colorMask",[!0,!0,!0,!0]),zt("cull.enable",2884),ur("cull.face","cullFace",1029),ur("frontFace","frontFace",2305),ur("lineWidth","lineWidth",1),zt("polygonOffset.enable",32823),ur("polygonOffset.offset","polygonOffset",[0,0]),zt("sample.alpha",32926),zt("sample.enable",32928),ur("sample.coverage","sampleCoverage",[1,!1]),zt("stencil.enable",2960),ur("stencil.mask","stencilMask",-1),ur("stencil.func","stencilFunc",[519,0,-1]),ur("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),ur("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),zt("scissor.enable",3089),ur("scissor.box","scissor",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]),ur("viewport","viewport",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]);var Kn={gl:st,context:et,strings:Gt,next:Gn,current:Mn,draw:at,elements:it,buffer:_r,shader:qe,attributes:Ye.state,vao:Ye,uniforms:Ge,framebuffer:ke,extensions:Zt,timer:pt,isBufferArgs:j},Va={primTypes:je,compareFuncs:nr,blendFuncs:ar,blendEquations:Pa,stencilOps:cr,glTypes:Re,orientationType:Kr};nn&&(Va.backBuffer=[1029],Va.drawBuffer=l(Ht.maxDrawbuffers,function(Nt){return Nt===0?[0]:l(Nt,function(yr){return 36064+yr})}));var mi=0;return{next:Gn,current:Mn,procs:function(){var Nt=gr(),yr=Nt.proc("poll"),fn=Nt.proc("refresh"),mn=Nt.block();yr(mn),fn(mn);var br=Nt.shared,gn=br.gl,Dn=br.next,En=br.current;mn(En,".dirty=false;"),Jt(Nt,yr),Jt(Nt,fn,null,!0);var dn;Ar&&(dn=Nt.link(Ar)),Zt.oes_vertex_array_object&&fn(Nt.link(Zt.oes_vertex_array_object),".bindVertexArrayOES(null);");var br=fn.def(br.attributes),xr=fn.def(0),Fr=Nt.cond(xr,".buffer");Fr.then(gn,".enableVertexAttribArray(i);",gn,".bindBuffer(",34962,",",xr,".buffer.buffer);",gn,".vertexAttribPointer(i,",xr,".size,",xr,".type,",xr,".normalized,",xr,".stride,",xr,".offset);").else(gn,".disableVertexAttribArray(i);",gn,".vertexAttrib4f(i,",xr,".x,",xr,".y,",xr,".z,",xr,".w);",xr,".buffer=null;");var bn=Nt.link(Ht.maxAttributes,{stable:!0});return fn("for(var i=0;i<",bn,";++i){",xr,"=",br,"[i];",Fr,"}"),Ar&&fn("for(var i=0;i<",bn,";++i){",dn,".vertexAttribDivisorANGLE(i,",br,"[i].divisor);","}"),fn(Nt.shared.vao,".currentVAO=null;",Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"),Object.keys(na).forEach(function(Hn){var ra=na[Hn],Sn=mn.def(Dn,".",Hn),Zn=Nt.block();Zn("if(",Sn,"){",gn,".enable(",ra,")}else{",gn,".disable(",ra,")}",En,".",Hn,"=",Sn,";"),fn(Zn),yr("if(",Sn,"!==",En,".",Hn,"){",Zn,"}")}),Object.keys(Nn).forEach(function(Hn){var ra=Nn[Hn],Sn=Mn[Hn],Zn,sa,ma=Nt.block();ma(gn,".",ra,"("),w(Sn)?(ra=Sn.length,Zn=Nt.global.def(Dn,".",Hn),sa=Nt.global.def(En,".",Hn),ma(l(ra,function(wa){return Zn+"["+wa+"]"}),");",l(ra,function(wa){return sa+"["+wa+"]="+Zn+"["+wa+"];"}).join("")),yr("if(",l(ra,function(wa){return Zn+"["+wa+"]!=="+sa+"["+wa+"]"}).join("||"),"){",ma,"}")):(Zn=mn.def(Dn,".",Hn),sa=mn.def(En,".",Hn),ma(Zn,");",En,".",Hn,"=",Zn,";"),yr("if(",Zn,"!==",sa,"){",ma,"}")),fn(ma)}),Nt.compile()}(),compile:function(Nt,yr,fn,mn,gn){var Dn=gr();Dn.stats=Dn.link(gn),Object.keys(yr.static).forEach(function(dn){Xa(Dn,yr,dn)}),Qt.forEach(function(dn){Xa(Dn,Nt,dn)});var En=nt(Nt,yr,fn,mn,Dn);return En.shader.program&&(En.shader.program.attributes.sort(function(dn,br){return dn.name<br.name?-1:1}),En.shader.program.uniforms.sort(function(dn,br){return dn.name<br.name?-1:1})),rn(Dn,En),ya(Dn,En),oa(Dn,En),se(Dn.compile(),{destroy:function(){En.shader.program.destroy()}})}}}function oe(st,Gt){for(var Zt=0;Zt<st.length;++Zt)if(st[Zt]===Gt)return Zt;return-1}var se=function(st,Gt){for(var Zt=Object.keys(Gt),Ht=0;Ht<Zt.length;++Ht)st[Zt[Ht]]=Gt[Zt[Ht]];return st},me=0,ce={DynamicVariable:s,define:function(st,Gt){return new s(st,h(Gt+""))},isDynamic:function(st){return typeof st=="function"&&!st._reglType||st instanceof s},unbox:y,accessor:h},pe={next:typeof requestAnimationFrame=="function"?function(st){return requestAnimationFrame(st)}:function(st){return setTimeout(st,16)},cancel:typeof cancelAnimationFrame=="function"?function(st){return cancelAnimationFrame(st)}:clearTimeout},xe=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},Se=d();Se.zero=d();var Ae=function(st,Gt){var Zt=1;Gt.ext_texture_filter_anisotropic&&(Zt=st.getParameter(34047));var Ht=1,_r=1;Gt.webgl_draw_buffers&&(Ht=st.getParameter(34852),_r=st.getParameter(36063));var it=!!Gt.oes_texture_float;if(it){it=st.createTexture(),st.bindTexture(3553,it),st.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Te=st.createFramebuffer();if(st.bindFramebuffer(36160,Te),st.framebufferTexture2D(36160,36064,3553,it,0),st.bindTexture(3553,null),st.checkFramebufferStatus(36160)!==36053)it=!1;else{st.viewport(0,0,1,1),st.clearColor(1,0,0,1),st.clear(16384);var ke=Se.allocType(5126,4);st.readPixels(0,0,1,1,6408,5126,ke),st.getError()?it=!1:(st.deleteFramebuffer(Te),st.deleteTexture(it),it=ke[0]===1),Se.freeType(ke)}}return ke=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ke=st.createTexture(),Te=Se.allocType(5121,36),st.activeTexture(33984),st.bindTexture(34067,ke),st.texImage2D(34069,0,6408,3,3,0,6408,5121,Te),Se.freeType(Te),st.bindTexture(34067,null),st.deleteTexture(ke),ke=!st.getError()),{colorBits:[st.getParameter(3410),st.getParameter(3411),st.getParameter(3412),st.getParameter(3413)],depthBits:st.getParameter(3414),stencilBits:st.getParameter(3415),subpixelBits:st.getParameter(3408),extensions:Object.keys(Gt).filter(function(Ge){return!!Gt[Ge]}),maxAnisotropic:Zt,maxDrawbuffers:Ht,maxColorAttachments:_r,pointSizeDims:st.getParameter(33901),lineWidthDims:st.getParameter(33902),maxViewportDims:st.getParameter(3386),maxCombinedTextureUnits:st.getParameter(35661),maxCubeMapSize:st.getParameter(34076),maxRenderbufferSize:st.getParameter(34024),maxTextureUnits:st.getParameter(34930),maxTextureSize:st.getParameter(3379),maxAttributes:st.getParameter(34921),maxVertexUniforms:st.getParameter(36347),maxVertexTextureUnits:st.getParameter(35660),maxVaryingVectors:st.getParameter(36348),maxFragmentUniforms:st.getParameter(36349),glsl:st.getParameter(35724),renderer:st.getParameter(7937),vendor:st.getParameter(7936),version:st.getParameter(7938),readFloat:it,npotTextureCube:ke}},Ce=function(st){return st instanceof Uint8Array||st instanceof Uint16Array||st instanceof Uint32Array||st instanceof Int8Array||st instanceof Int16Array||st instanceof Int32Array||st instanceof Float32Array||st instanceof Float64Array||st instanceof Uint8ClampedArray},Ee=function(st){return Object.keys(st).map(function(Gt){return st[Gt]})},Oe={shape:function(st){for(var Gt=[];st.length;st=st[0])Gt.push(st.length);return Gt},flatten:function(st,Gt,Zt,Ht){var _r=1;if(Gt.length)for(var it=0;it<Gt.length;++it)_r*=Gt[it];else _r=0;switch(Zt=Ht||Se.allocType(Zt,_r),Gt.length){case 0:break;case 1:for(Ht=Gt[0],Gt=0;Gt<Ht;++Gt)Zt[Gt]=st[Gt];break;case 2:for(Ht=Gt[0],Gt=Gt[1],it=_r=0;it<Ht;++it)for(var Te=st[it],ke=0;ke<Gt;++ke)Zt[_r++]=Te[ke];break;case 3:g(st,Gt[0],Gt[1],Gt[2],Zt,0);break;default:_(st,Gt,0,Zt,0)}return Zt}},_e={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Re={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ve={dynamic:35048,stream:35040,static:35044},Je=Oe.flatten,ze=Oe.shape,De=[];De[5120]=1,De[5122]=2,De[5124]=4,De[5121]=1,De[5123]=2,De[5125]=4,De[5126]=4;var je={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},dt=new Float32Array(1),Et=new Uint32Array(dt.buffer),$t=[9984,9986,9985,9987],wt=[0,6409,6410,6407,6408],Ot={};Ot[6409]=Ot[6406]=Ot[6402]=1,Ot[34041]=Ot[6410]=2,Ot[6407]=Ot[35904]=3,Ot[6408]=Ot[35906]=4;var Vt=v("HTMLCanvasElement"),kt=v("OffscreenCanvas"),St=v("CanvasRenderingContext2D"),ot=v("ImageBitmap"),ht=v("HTMLImageElement"),Ke=v("HTMLVideoElement"),Pe=Object.keys(_e).concat([Vt,kt,St,ot,ht,Ke]),We=[];We[5121]=1,We[5126]=4,We[36193]=2,We[5123]=2,We[5125]=4;var Qe=[];Qe[32854]=2,Qe[32855]=2,Qe[36194]=2,Qe[34041]=4,Qe[33776]=.5,Qe[33777]=.5,Qe[33778]=1,Qe[33779]=1,Qe[35986]=.5,Qe[35987]=1,Qe[34798]=1,Qe[35840]=.5,Qe[35841]=.25,Qe[35842]=.5,Qe[35843]=.25,Qe[36196]=.5;var ut=[];ut[32854]=2,ut[32855]=2,ut[36194]=2,ut[33189]=2,ut[36168]=1,ut[34041]=4,ut[35907]=4,ut[34836]=16,ut[34842]=8,ut[34843]=6;var It=function(st,Gt,Zt,Ht,_r){function it(at){this.id=Ye++,this.refCount=1,this.renderbuffer=at,this.format=32854,this.height=this.width=0,_r.profile&&(this.stats={size:0})}function Te(at){var et=at.renderbuffer;st.bindRenderbuffer(36161,null),st.deleteRenderbuffer(et),at.renderbuffer=null,at.refCount=0,delete qe[at.id],Ht.renderbufferCount--}var ke={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Gt.ext_srgb&&(ke.srgba=35907),Gt.ext_color_buffer_half_float&&(ke.rgba16f=34842,ke.rgb16f=34843),Gt.webgl_color_buffer_float&&(ke.rgba32f=34836);var Ge=[];Object.keys(ke).forEach(function(at){Ge[ke[at]]=at});var Ye=0,qe={};return it.prototype.decRef=function(){0>=--this.refCount&&Te(this)},_r.profile&&(Ht.getTotalRenderbufferSize=function(){var at=0;return Object.keys(qe).forEach(function(et){at+=qe[et].stats.size}),at}),{create:function(at,et){function pt(Pt,Xt){var zt=0,ur=0,gr=32854;if(typeof Pt=="object"&&Pt?("shape"in Pt?(ur=Pt.shape,zt=ur[0]|0,ur=ur[1]|0):("radius"in Pt&&(zt=ur=Pt.radius|0),"width"in Pt&&(zt=Pt.width|0),"height"in Pt&&(ur=Pt.height|0)),"format"in Pt&&(gr=ke[Pt.format])):typeof Pt=="number"?(zt=Pt|0,ur=typeof Xt=="number"?Xt|0:zt):Pt||(zt=ur=1),zt!==_t.width||ur!==_t.height||gr!==_t.format)return pt.width=_t.width=zt,pt.height=_t.height=ur,_t.format=gr,st.bindRenderbuffer(36161,_t.renderbuffer),st.renderbufferStorage(36161,gr,zt,ur),_r.profile&&(_t.stats.size=ut[_t.format]*_t.width*_t.height),pt.format=Ge[_t.format],pt}var _t=new it(st.createRenderbuffer());return qe[_t.id]=_t,Ht.renderbufferCount++,pt(at,et),pt.resize=function(Pt,Xt){var zt=Pt|0,ur=Xt|0||zt;return zt===_t.width&&ur===_t.height||(pt.width=_t.width=zt,pt.height=_t.height=ur,st.bindRenderbuffer(36161,_t.renderbuffer),st.renderbufferStorage(36161,_t.format,zt,ur),_r.profile&&(_t.stats.size=ut[_t.format]*_t.width*_t.height)),pt},pt._reglType="renderbuffer",pt._renderbuffer=_t,_r.profile&&(pt.stats=_t.stats),pt.destroy=function(){_t.decRef()},pt},clear:function(){Ee(qe).forEach(Te)},restore:function(){Ee(qe).forEach(function(at){at.renderbuffer=st.createRenderbuffer(),st.bindRenderbuffer(36161,at.renderbuffer),st.renderbufferStorage(36161,at.format,at.width,at.height)}),st.bindRenderbuffer(36161,null)}}},Tt=[];Tt[6408]=4,Tt[6407]=3;var Bt=[];Bt[5121]=1,Bt[5126]=4,Bt[36193]=2;var rr=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Ut=["x","y","z","w"],Qt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),ar={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},nr={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},cr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Kr={cw:2304,ccw:2305},yn=new q(!1,!1,!1,function(){}),Qr=function(st,Gt){function Zt(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Ht(qe,at,et){var pt=Te.pop()||new Zt;pt.startQueryIndex=qe,pt.endQueryIndex=at,pt.sum=0,pt.stats=et,ke.push(pt)}if(!Gt.ext_disjoint_timer_query)return null;var _r=[],it=[],Te=[],ke=[],Ge=[],Ye=[];return{beginQuery:function(qe){var at=_r.pop()||Gt.ext_disjoint_timer_query.createQueryEXT();Gt.ext_disjoint_timer_query.beginQueryEXT(35007,at),it.push(at),Ht(it.length-1,it.length,qe)},endQuery:function(){Gt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Ht,update:function(){var qe,at;if(qe=it.length,qe!==0){Ye.length=Math.max(Ye.length,qe+1),Ge.length=Math.max(Ge.length,qe+1),Ge[0]=0;var et=Ye[0]=0;for(at=qe=0;at<it.length;++at){var pt=it[at];Gt.ext_disjoint_timer_query.getQueryObjectEXT(pt,34919)?(et+=Gt.ext_disjoint_timer_query.getQueryObjectEXT(pt,34918),_r.push(pt)):it[qe++]=pt,Ge[at+1]=et,Ye[at+1]=qe}for(it.length=qe,at=qe=0;at<ke.length;++at){var et=ke[at],_t=et.startQueryIndex,pt=et.endQueryIndex;et.sum+=Ge[pt]-Ge[_t],_t=Ye[_t],pt=Ye[pt],pt===_t?(et.stats.gpuTime+=et.sum/1e6,Te.push(et)):(et.startQueryIndex=_t,et.endQueryIndex=pt,ke[qe++]=et)}ke.length=qe}},getNumPendingQueries:function(){return it.length},clear:function(){_r.push.apply(_r,it);for(var qe=0;qe<_r.length;qe++)Gt.ext_disjoint_timer_query.deleteQueryEXT(_r[qe]);it.length=0,_r.length=0},restore:function(){it.length=0,_r.length=0}}};return function(st){function Gt(){if(Rr.length===0)gr&&gr.update(),Nr=null;else{Nr=pe.next(Gt),qe();for(var rn=Rr.length-1;0<=rn;--rn){var kn=Rr[rn];kn&&kn(zr,null,0)}pt.flush(),gr&&gr.update()}}function Zt(){!Nr&&0<Rr.length&&(Nr=pe.next(Gt))}function Ht(){Nr&&(pe.cancel(Gt),Nr=null)}function _r(rn){rn.preventDefault(),Ht(),Ct.forEach(function(kn){kn()})}function it(rn){pt.getError(),Pt.restore(),Br.restore(),Tr.restore(),Cr.restore(),nt.restore(),Rt.restore(),Ur.restore(),gr&&gr.restore(),Jt.procs.refresh(),Zt(),tr.forEach(function(kn){kn()})}function Te(rn){function kn(Mn,Gn){var la={},na={};return Object.keys(Mn).forEach(function(Nn){var Kn=Mn[Nn];if(ce.isDynamic(Kn))na[Nn]=ce.unbox(Kn,Nn);else{if(Gn&&Array.isArray(Kn)){for(var Va=0;Va<Kn.length;++Va)if(ce.isDynamic(Kn[Va])){na[Nn]=ce.unbox(Kn,Nn);return}}la[Nn]=Kn}}),{dynamic:na,static:la}}function Cn(Mn){for(;vn.length<Mn;)vn.push(null);return vn}var oa=kn(rn.context||{},!0),ya=kn(rn.uniforms||{},!0),Oa=kn(rn.attributes||{},!1);rn=kn(function(Mn){function Gn(na){if(na in la){var Nn=la[na];delete la[na],Object.keys(Nn).forEach(function(Kn){la[na+"."+Kn]=Nn[Kn]})}}var la=se({},Mn);return delete la.uniforms,delete la.attributes,delete la.context,delete la.vao,"stencil"in la&&la.stencil.op&&(la.stencil.opBack=la.stencil.opFront=la.stencil.op,delete la.stencil.op),Gn("blend"),Gn("depth"),Gn("cull"),Gn("stencil"),Gn("polygonOffset"),Gn("scissor"),Gn("sample"),"vao"in Mn&&(la.vao=Mn.vao),la}(rn),!1);var Xa={gpuTime:0,cpuTime:0,count:0},za=Jt.compile(rn,Oa,ya,oa,Xa),Pa=za.draw,Ar=za.batch,nn=za.scope,vn=[];return se(function(Mn,Gn){var la;if(typeof Mn=="function")return nn.call(this,null,Mn,0);if(typeof Gn=="function")if(typeof Mn=="number")for(la=0;la<Mn;++la)nn.call(this,null,Gn,la);else if(Array.isArray(Mn))for(la=0;la<Mn.length;++la)nn.call(this,Mn[la],Gn,la);else return nn.call(this,Mn,Gn,0);else if(typeof Mn=="number"){if(0<Mn)return Ar.call(this,Cn(Mn|0),Mn|0)}else if(Array.isArray(Mn)){if(Mn.length)return Ar.call(this,Mn,Mn.length)}else return Pa.call(this,Mn)},{stats:Xa,destroy:function(){za.destroy()}})}function ke(rn,kn){var Cn=0;Jt.procs.poll();var oa=kn.color;oa&&(pt.clearColor(+oa[0]||0,+oa[1]||0,+oa[2]||0,+oa[3]||0),Cn|=16384),"depth"in kn&&(pt.clearDepth(+kn.depth),Cn|=256),"stencil"in kn&&(pt.clearStencil(kn.stencil|0),Cn|=1024),pt.clear(Cn)}function Ge(rn){return Rr.push(rn),Zt(),{cancel:function(){function kn(){var oa=oe(Rr,kn);Rr[oa]=Rr[Rr.length-1],--Rr.length,0>=Rr.length&&Ht()}var Cn=oe(Rr,rn);Rr[Cn]=kn}}}function Ye(){var rn=Dr.viewport,kn=Dr.scissor_box;rn[0]=rn[1]=kn[0]=kn[1]=0,zr.viewportWidth=zr.framebufferWidth=zr.drawingBufferWidth=rn[2]=kn[2]=pt.drawingBufferWidth,zr.viewportHeight=zr.framebufferHeight=zr.drawingBufferHeight=rn[3]=kn[3]=pt.drawingBufferHeight}function qe(){zr.tick+=1,zr.time=et(),Ye(),Jt.procs.poll()}function at(){Cr.refresh(),Ye(),Jt.procs.refresh(),gr&&gr.update()}function et(){return(xe()-Mr)/1e3}if(st=f(st),!st)return null;var pt=st.gl,_t=pt.getContextAttributes();pt.isContextLost();var Pt=u(pt,st);if(!Pt)return null;var hr=t(),Xt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},zt=st.cachedCode||{},ur=Pt.extensions,gr=Qr(pt,ur),Mr=xe(),$r=pt.drawingBufferWidth,un=pt.drawingBufferHeight,zr={tick:0,time:0,viewportWidth:$r,viewportHeight:un,framebufferWidth:$r,framebufferHeight:un,drawingBufferWidth:$r,drawingBufferHeight:un,pixelRatio:st.pixelRatio},$r={elements:null,primitive:4,count:-1,offset:0,instances:-1},hn=Ae(pt,ur),Tr=S(pt,Xt,st,function(rn){return Ur.destroyBuffer(rn)}),wr=T(pt,ur,Tr,Xt),Ur=B(pt,ur,hn,Xt,Tr,wr,$r),Br=$(pt,hr,Xt,st),Cr=R(pt,ur,hn,function(){Jt.procs.poll()},zr,Xt,st),nt=It(pt,ur,hn,Xt,st),Rt=D(pt,ur,hn,Cr,nt,Xt),Jt=ne(pt,hr,ur,hn,Tr,wr,Cr,Rt,{},Ur,Br,$r,zr,gr,zt,st),hr=W(pt,Rt,Jt.procs.poll,zr),Dr=Jt.next,Gr=pt.canvas,Rr=[],Ct=[],tr=[],Lr=[st.onDestroy],Nr=null;Gr&&(Gr.addEventListener("webglcontextlost",_r,!1),Gr.addEventListener("webglcontextrestored",it,!1));var Tn=Rt.setFBO=Te({framebuffer:ce.define.call(null,1,"framebuffer")});return at(),_t=se(Te,{clear:function(rn){if("framebuffer"in rn)if(rn.framebuffer&&rn.framebuffer_reglType==="framebufferCube")for(var kn=0;6>kn;++kn)Tn(se({framebuffer:rn.framebuffer.faces[kn]},rn),ke);else Tn(rn,ke);else ke(null,rn)},prop:ce.define.bind(null,1),context:ce.define.bind(null,2),this:ce.define.bind(null,3),draw:Te({}),buffer:function(rn){return Tr.create(rn,34962,!1,!1)},elements:function(rn){return wr.create(rn,!1)},texture:Cr.create2D,cube:Cr.createCube,renderbuffer:nt.create,framebuffer:Rt.create,framebufferCube:Rt.createCube,vao:Ur.createVAO,attributes:_t,frame:Ge,on:function(rn,kn){var Cn;switch(rn){case"frame":return Ge(kn);case"lost":Cn=Ct;break;case"restore":Cn=tr;break;case"destroy":Cn=Lr}return Cn.push(kn),{cancel:function(){for(var oa=0;oa<Cn.length;++oa)if(Cn[oa]===kn){Cn[oa]=Cn[Cn.length-1],Cn.pop();break}}}},limits:hn,hasExtension:function(rn){return 0<=hn.extensions.indexOf(rn.toLowerCase())},read:hr,destroy:function(){Rr.length=0,Ht(),Gr&&(Gr.removeEventListener("webglcontextlost",_r),Gr.removeEventListener("webglcontextrestored",it)),Br.clear(),Rt.clear(),nt.clear(),Ur.clear(),Cr.clear(),wr.clear(),Tr.clear(),gr&&gr.clear(),Lr.forEach(function(rn){rn()})},_gl:pt,_refresh:at,poll:function(){qe(),gr&&gr.update()},now:et,stats:Xt,getCachedCode:function(){return zt},preloadCachedCode:function(rn){Object.entries(rn).forEach(function(kn){zt[kn[0]]=kn[1]})}}),st.onDone(null,_t),_t}})},{}],284:[function(e,I,F){var s=e("buffer"),o=s.Buffer;function h(t,a){for(var i in t)a[i]=t[i]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?I.exports=s:(h(s,F),F.Buffer=y);function y(t,a,i){return o(t,a,i)}y.prototype=Object.create(o.prototype),h(o,y),y.from=function(t,a,i){if(typeof t=="number")throw new TypeError("Argument must not be a number");return o(t,a,i)},y.alloc=function(t,a,i){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=o(t);return a!==void 0?typeof i=="string"?n.fill(a,i):n.fill(a):n.fill(0),n},y.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return o(t)},y.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(t)}},{buffer:85}],285:[function(e,I,F){I.exports=h;var s=e("events").EventEmitter,o=e("inherits");o(h,s),h.Readable=e("readable-stream/lib/_stream_readable.js"),h.Writable=e("readable-stream/lib/_stream_writable.js"),h.Duplex=e("readable-stream/lib/_stream_duplex.js"),h.Transform=e("readable-stream/lib/_stream_transform.js"),h.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),h.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),h.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),h.Stream=h;function h(){s.call(this)}h.prototype.pipe=function(y,t){var a=this;function i(d){y.writable&&y.write(d)===!1&&a.pause&&a.pause()}a.on("data",i);function n(){a.readable&&a.resume&&a.resume()}y.on("drain",n),!y._isStdio&&(!t||t.end!==!1)&&(a.on("end",f),a.on("close",u));var r=!1;function f(){r||(r=!0,y.end())}function u(){r||(r=!0,typeof y.destroy=="function"&&y.destroy())}function l(d){if(m(),s.listenerCount(this,"error")===0)throw d}a.on("error",l),y.on("error",l);function m(){a.removeListener("data",i),y.removeListener("drain",n),a.removeListener("end",f),a.removeListener("close",u),a.removeListener("error",l),y.removeListener("error",l),a.removeListener("end",m),a.removeListener("close",m),y.removeListener("close",m)}return a.on("end",m),a.on("close",m),y.on("close",m),y.emit("pipe",a),y}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(e,I,F){function s(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var o={};function h(n,r,f){f||(f=Error);function u(m,d,b){return typeof r=="string"?r:r(m,d,b)}var l=function(m){s(d,m);function d(b,g,_){return m.call(this,u(b,g,_))||this}return d}(f);l.prototype.name=f.name,l.prototype.code=n,o[n]=l}function y(n,r){if(Array.isArray(n)){var f=n.length;return n=n.map(function(u){return String(u)}),f>2?"one of ".concat(r," ").concat(n.slice(0,f-1).join(", "),", or ")+n[f-1]:f===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}else return"of ".concat(r," ").concat(String(n))}function t(n,r,f){return n.substr(!f||f<0?0:+f,r.length)===r}function a(n,r,f){return(f===void 0||f>n.length)&&(f=n.length),n.substring(f-r.length,f)===r}function i(n,r,f){return typeof f!="number"&&(f=0),f+r.length>n.length?!1:n.indexOf(r,f)!==-1}h("ERR_INVALID_OPT_VALUE",function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'},TypeError),h("ERR_INVALID_ARG_TYPE",function(n,r,f){var u;typeof r=="string"&&t(r,"not ")?(u="must not be",r=r.replace(/^not /,"")):u="must be";var l;if(a(n," argument"))l="The ".concat(n," ").concat(u," ").concat(y(r,"type"));else{var m=i(n,".")?"property":"argument";l='The "'.concat(n,'" ').concat(m," ").concat(u," ").concat(y(r,"type"))}return l+=". Received type ".concat(typeof f),l},TypeError),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),h("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"}),h("ERR_STREAM_PREMATURE_CLOSE","Premature close"),h("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"}),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),h("ERR_STREAM_WRITE_AFTER_END","write after end"),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),I.exports.codes=o},{}],287:[function(e,I,F){(function(s){(function(){var o=Object.keys||function(u){var l=[];for(var m in u)l.push(m);return l};I.exports=n;var h=e("./_stream_readable"),y=e("./_stream_writable");e("inherits")(n,h);for(var t=o(y.prototype),a=0;a<t.length;a++){var i=t[a];n.prototype[i]||(n.prototype[i]=y.prototype[i])}function n(u){if(!(this instanceof n))return new n(u);h.call(this,u),y.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||s.nextTick(f,this)}function f(u){u.end()}Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=l,this._writableState.destroyed=l)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(e,I,F){I.exports=o;var s=e("./_stream_transform");e("inherits")(o,s);function o(h){if(!(this instanceof o))return new o(h);s.call(this,h)}o.prototype._transform=function(h,y,t){t(null,h)}},{"./_stream_transform":290,inherits:231}],289:[function(e,I,F){(function(s,o){(function(){I.exports=E;var h;E.ReadableState=M,e("events").EventEmitter;var y=function(ie,ne){return ie.listeners(ne).length},t=e("./internal/streams/stream"),a=e("buffer").Buffer,i=o.Uint8Array||function(){};function n(J){return a.from(J)}function r(J){return a.isBuffer(J)||J instanceof i}var f=e("util"),u;f&&f.debuglog?u=f.debuglog("stream"):u=function(){};var l=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),d=e("./internal/streams/state"),b=d.getHighWaterMark,g=e("../errors").codes,_=g.ERR_INVALID_ARG_TYPE,p=g.ERR_STREAM_PUSH_AFTER_EOF,A=g.ERR_METHOD_NOT_IMPLEMENTED,c=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,T,x;e("inherits")(E,t);var w=m.errorOrDestroy,v=["error","close","destroy","pause","resume"];function C(J,ie,ne){if(typeof J.prependListener=="function")return J.prependListener(ie,ne);!J._events||!J._events[ie]?J.on(ie,ne):Array.isArray(J._events[ie])?J._events[ie].unshift(ne):J._events[ie]=[ne,J._events[ie]]}function M(J,ie,ne){h=h||e("./_stream_duplex"),J=J||{},typeof ne!="boolean"&&(ne=ie instanceof h),this.objectMode=!!J.objectMode,ne&&(this.objectMode=this.objectMode||!!J.readableObjectMode),this.highWaterMark=b(this,J,"readableHighWaterMark",ne),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=J.emitClose!==!1,this.autoDestroy=!!J.autoDestroy,this.destroyed=!1,this.defaultEncoding=J.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,J.encoding&&(S||(S=e("string_decoder/").StringDecoder),this.decoder=new S(J.encoding),this.encoding=J.encoding)}function E(J){if(h=h||e("./_stream_duplex"),!(this instanceof E))return new E(J);var ie=this instanceof h;this._readableState=new M(J,this,ie),this.readable=!0,J&&(typeof J.read=="function"&&(this._read=J.read),typeof J.destroy=="function"&&(this._destroy=J.destroy)),t.call(this)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ie){!this._readableState||(this._readableState.destroyed=ie)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(J,ie){ie(J)},E.prototype.push=function(J,ie){var ne=this._readableState,oe;return ne.objectMode?oe=!0:typeof J=="string"&&(ie=ie||ne.defaultEncoding,ie!==ne.encoding&&(J=a.from(J,ie),ie=""),oe=!0),L(this,J,ie,!1,oe)},E.prototype.unshift=function(J){return L(this,J,null,!0,!1)};function L(J,ie,ne,oe,se){u("readableAddChunk",ie);var me=J._readableState;if(ie===null)me.reading=!1,B(J,me);else{var ce;if(se||(ce=O(me,ie)),ce)w(J,ce);else if(me.objectMode||ie&&ie.length>0)if(typeof ie!="string"&&!me.objectMode&&Object.getPrototypeOf(ie)!==a.prototype&&(ie=n(ie)),oe)me.endEmitted?w(J,new c):z(J,me,ie,!0);else if(me.ended)w(J,new p);else{if(me.destroyed)return!1;me.reading=!1,me.decoder&&!ne?(ie=me.decoder.write(ie),me.objectMode||ie.length!==0?z(J,me,ie,!1):re(J,me)):z(J,me,ie,!1)}else oe||(me.reading=!1,re(J,me))}return!me.ended&&(me.length<me.highWaterMark||me.length===0)}function z(J,ie,ne,oe){ie.flowing&&ie.length===0&&!ie.sync?(ie.awaitDrain=0,J.emit("data",ne)):(ie.length+=ie.objectMode?1:ne.length,oe?ie.buffer.unshift(ne):ie.buffer.push(ne),ie.needReadable&&$(J)),re(J,ie)}function O(J,ie){var ne;return!r(ie)&&typeof ie!="string"&&ie!==void 0&&!J.objectMode&&(ne=new _("chunk",["string","Buffer","Uint8Array"],ie)),ne}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function(J){S||(S=e("string_decoder/").StringDecoder);var ie=new S(J);this._readableState.decoder=ie,this._readableState.encoding=this._readableState.decoder.encoding;for(var ne=this._readableState.buffer.head,oe="";ne!==null;)oe+=ie.write(ne.data),ne=ne.next;return this._readableState.buffer.clear(),oe!==""&&this._readableState.buffer.push(oe),this._readableState.length=oe.length,this};var R=1073741824;function D(J){return J>=R?J=R:(J--,J|=J>>>1,J|=J>>>2,J|=J>>>4,J|=J>>>8,J|=J>>>16,J++),J}function H(J,ie){return J<=0||ie.length===0&&ie.ended?0:ie.objectMode?1:J!==J?ie.flowing&&ie.length?ie.buffer.head.data.length:ie.length:(J>ie.highWaterMark&&(ie.highWaterMark=D(J)),J<=ie.length?J:ie.ended?ie.length:(ie.needReadable=!0,0))}E.prototype.read=function(J){u("read",J),J=parseInt(J,10);var ie=this._readableState,ne=J;if(J!==0&&(ie.emittedReadable=!1),J===0&&ie.needReadable&&((ie.highWaterMark!==0?ie.length>=ie.highWaterMark:ie.length>0)||ie.ended))return u("read: emitReadable",ie.length,ie.ended),ie.length===0&&ie.ended?ee(this):$(this),null;if(J=H(J,ie),J===0&&ie.ended)return ie.length===0&&ee(this),null;var oe=ie.needReadable;u("need readable",oe),(ie.length===0||ie.length-J<ie.highWaterMark)&&(oe=!0,u("length less than watermark",oe)),ie.ended||ie.reading?(oe=!1,u("reading or ended",oe)):oe&&(u("do read"),ie.reading=!0,ie.sync=!0,ie.length===0&&(ie.needReadable=!0),this._read(ie.highWaterMark),ie.sync=!1,ie.reading||(J=H(ne,ie)));var se;return J>0?se=j(J,ie):se=null,se===null?(ie.needReadable=ie.length<=ie.highWaterMark,J=0):(ie.length-=J,ie.awaitDrain=0),ie.length===0&&(ie.ended||(ie.needReadable=!0),ne!==J&&ie.ended&&ee(this)),se!==null&&this.emit("data",se),se};function B(J,ie){if(u("onEofChunk"),!ie.ended){if(ie.decoder){var ne=ie.decoder.end();ne&&ne.length&&(ie.buffer.push(ne),ie.length+=ie.objectMode?1:ne.length)}ie.ended=!0,ie.sync?$(J):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,W(J)))}}function $(J){var ie=J._readableState;u("emitReadable",ie.needReadable,ie.emittedReadable),ie.needReadable=!1,ie.emittedReadable||(u("emitReadable",ie.flowing),ie.emittedReadable=!0,s.nextTick(W,J))}function W(J){var ie=J._readableState;u("emitReadable_",ie.destroyed,ie.length,ie.ended),!ie.destroyed&&(ie.length||ie.ended)&&(J.emit("readable"),ie.emittedReadable=!1),ie.needReadable=!ie.flowing&&!ie.ended&&ie.length<=ie.highWaterMark,V(J)}function re(J,ie){ie.readingMore||(ie.readingMore=!0,s.nextTick(Q,J,ie))}function Q(J,ie){for(;!ie.reading&&!ie.ended&&(ie.length<ie.highWaterMark||ie.flowing&&ie.length===0);){var ne=ie.length;if(u("maybeReadMore read 0"),J.read(0),ne===ie.length)break}ie.readingMore=!1}E.prototype._read=function(J){w(this,new A("_read()"))},E.prototype.pipe=function(J,ie){var ne=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=J;break;case 1:oe.pipes=[oe.pipes,J];break;default:oe.pipes.push(J);break}oe.pipesCount+=1,u("pipe count=%d opts=%j",oe.pipesCount,ie);var se=(!ie||ie.end!==!1)&&J!==s.stdout&&J!==s.stderr,me=se?pe:Re;oe.endEmitted?s.nextTick(me):ne.once("end",me),J.on("unpipe",ce);function ce(Ve,Je){u("onunpipe"),Ve===ne&&Je&&Je.hasUnpiped===!1&&(Je.hasUnpiped=!0,Ae())}function pe(){u("onend"),J.end()}var xe=Z(ne);J.on("drain",xe);var Se=!1;function Ae(){u("cleanup"),J.removeListener("close",Oe),J.removeListener("finish",_e),J.removeListener("drain",xe),J.removeListener("error",Ee),J.removeListener("unpipe",ce),ne.removeListener("end",pe),ne.removeListener("end",Re),ne.removeListener("data",Ce),Se=!0,oe.awaitDrain&&(!J._writableState||J._writableState.needDrain)&&xe()}ne.on("data",Ce);function Ce(Ve){u("ondata");var Je=J.write(Ve);u("dest.write",Je),Je===!1&&((oe.pipesCount===1&&oe.pipes===J||oe.pipesCount>1&&X(oe.pipes,J)!==-1)&&!Se&&(u("false write response, pause",oe.awaitDrain),oe.awaitDrain++),ne.pause())}function Ee(Ve){u("onerror",Ve),Re(),J.removeListener("error",Ee),y(J,"error")===0&&w(J,Ve)}C(J,"error",Ee);function Oe(){J.removeListener("finish",_e),Re()}J.once("close",Oe);function _e(){u("onfinish"),J.removeListener("close",Oe),Re()}J.once("finish",_e);function Re(){u("unpipe"),ne.unpipe(J)}return J.emit("pipe",ne),oe.flowing||(u("pipe resume"),ne.resume()),J};function Z(J){return function(){var ne=J._readableState;u("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&y(J,"data")&&(ne.flowing=!0,V(J))}}E.prototype.unpipe=function(J){var ie=this._readableState,ne={hasUnpiped:!1};if(ie.pipesCount===0)return this;if(ie.pipesCount===1)return J&&J!==ie.pipes?this:(J||(J=ie.pipes),ie.pipes=null,ie.pipesCount=0,ie.flowing=!1,J&&J.emit("unpipe",this,ne),this);if(!J){var oe=ie.pipes,se=ie.pipesCount;ie.pipes=null,ie.pipesCount=0,ie.flowing=!1;for(var me=0;me<se;me++)oe[me].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=X(ie.pipes,J);return ce===-1?this:(ie.pipes.splice(ce,1),ie.pipesCount-=1,ie.pipesCount===1&&(ie.pipes=ie.pipes[0]),J.emit("unpipe",this,ne),this)},E.prototype.on=function(J,ie){var ne=t.prototype.on.call(this,J,ie),oe=this._readableState;return J==="data"?(oe.readableListening=this.listenerCount("readable")>0,oe.flowing!==!1&&this.resume()):J==="readable"&&!oe.endEmitted&&!oe.readableListening&&(oe.readableListening=oe.needReadable=!0,oe.flowing=!1,oe.emittedReadable=!1,u("on readable",oe.length,oe.reading),oe.length?$(this):oe.reading||s.nextTick(le,this)),ne},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(J,ie){var ne=t.prototype.removeListener.call(this,J,ie);return J==="readable"&&s.nextTick(K,this),ne},E.prototype.removeAllListeners=function(J){var ie=t.prototype.removeAllListeners.apply(this,arguments);return(J==="readable"||J===void 0)&&s.nextTick(K,this),ie};function K(J){var ie=J._readableState;ie.readableListening=J.listenerCount("readable")>0,ie.resumeScheduled&&!ie.paused?ie.flowing=!0:J.listenerCount("data")>0&&J.resume()}function le(J){u("readable nexttick read 0"),J.read(0)}E.prototype.resume=function(){var J=this._readableState;return J.flowing||(u("resume"),J.flowing=!J.readableListening,fe(this,J)),J.paused=!1,this};function fe(J,ie){ie.resumeScheduled||(ie.resumeScheduled=!0,s.nextTick(ue,J,ie))}function ue(J,ie){u("resume",ie.reading),ie.reading||J.read(0),ie.resumeScheduled=!1,J.emit("resume"),V(J),ie.flowing&&!ie.reading&&J.read(0)}E.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function V(J){var ie=J._readableState;for(u("flow",ie.flowing);ie.flowing&&J.read()!==null;);}E.prototype.wrap=function(J){var ie=this,ne=this._readableState,oe=!1;J.on("end",function(){if(u("wrapped end"),ne.decoder&&!ne.ended){var ce=ne.decoder.end();ce&&ce.length&&ie.push(ce)}ie.push(null)}),J.on("data",function(ce){if(u("wrapped data"),ne.decoder&&(ce=ne.decoder.write(ce)),!(ne.objectMode&&ce==null)&&!(!ne.objectMode&&(!ce||!ce.length))){var pe=ie.push(ce);pe||(oe=!0,J.pause())}});for(var se in J)this[se]===void 0&&typeof J[se]=="function"&&(this[se]=function(pe){return function(){return J[pe].apply(J,arguments)}}(se));for(var me=0;me<v.length;me++)J.on(v[me],this.emit.bind(this,v[me]));return this._read=function(ce){u("wrapped _read",ce),oe&&(oe=!1,J.resume())},this},typeof Symbol=="function"&&(E.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=e("./internal/streams/async_iterator")),T(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ie){this._readableState&&(this._readableState.flowing=ie)}}),E._fromList=j,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function j(J,ie){if(ie.length===0)return null;var ne;return ie.objectMode?ne=ie.buffer.shift():!J||J>=ie.length?(ie.decoder?ne=ie.buffer.join(""):ie.buffer.length===1?ne=ie.buffer.first():ne=ie.buffer.concat(ie.length),ie.buffer.clear()):ne=ie.buffer.consume(J,ie.decoder),ne}function ee(J){var ie=J._readableState;u("endReadable",ie.endEmitted),ie.endEmitted||(ie.ended=!0,s.nextTick(q,ie,J))}function q(J,ie){if(u("endReadableNT",J.endEmitted,J.length),!J.endEmitted&&J.length===0&&(J.endEmitted=!0,ie.readable=!1,ie.emit("end"),J.autoDestroy)){var ne=ie._writableState;(!ne||ne.autoDestroy&&ne.finished)&&ie.destroy()}}typeof Symbol=="function"&&(E.from=function(J,ie){return x===void 0&&(x=e("./internal/streams/from")),x(E,J,ie)});function X(J,ie){for(var ne=0,oe=J.length;ne<oe;ne++)if(J[ne]===ie)return ne;return-1}}).call(this)}).call(this,e("_process"),typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(e,I,F){I.exports=n;var s=e("../errors").codes,o=s.ERR_METHOD_NOT_IMPLEMENTED,h=s.ERR_MULTIPLE_CALLBACK,y=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,t=s.ERR_TRANSFORM_WITH_LENGTH_0,a=e("./_stream_duplex");e("inherits")(n,a);function i(u,l){var m=this._transformState;m.transforming=!1;var d=m.writecb;if(d===null)return this.emit("error",new h);m.writechunk=null,m.writecb=null,l!=null&&this.push(l),d(u);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function n(u){if(!(this instanceof n))return new n(u);a.call(this,u),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",r)}function r(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(l,m){f(u,l,m)}):f(this,null,null)}n.prototype.push=function(u,l){return this._transformState.needTransform=!1,a.prototype.push.call(this,u,l)},n.prototype._transform=function(u,l,m){m(new o("_transform()"))},n.prototype._write=function(u,l,m){var d=this._transformState;if(d.writecb=m,d.writechunk=u,d.writeencoding=l,!d.transforming){var b=this._readableState;(d.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},n.prototype._read=function(u){var l=this._transformState;l.writechunk!==null&&!l.transforming?(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform)):l.needTransform=!0},n.prototype._destroy=function(u,l){a.prototype._destroy.call(this,u,function(m){l(m)})};function f(u,l,m){if(l)return u.emit("error",l);if(m!=null&&u.push(m),u._writableState.length)throw new t;if(u._transformState.transforming)throw new y;return u.push(null)}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(e,I,F){(function(s,o){(function(){I.exports=M;function h(V){var j=this;this.next=null,this.entry=null,this.finish=function(){ue(j,V)}}var y;M.WritableState=v;var t={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),i=e("buffer").Buffer,n=o.Uint8Array||function(){};function r(V){return i.from(V)}function f(V){return i.isBuffer(V)||V instanceof n}var u=e("./internal/streams/destroy"),l=e("./internal/streams/state"),m=l.getHighWaterMark,d=e("../errors").codes,b=d.ERR_INVALID_ARG_TYPE,g=d.ERR_METHOD_NOT_IMPLEMENTED,_=d.ERR_MULTIPLE_CALLBACK,p=d.ERR_STREAM_CANNOT_PIPE,A=d.ERR_STREAM_DESTROYED,c=d.ERR_STREAM_NULL_VALUES,S=d.ERR_STREAM_WRITE_AFTER_END,T=d.ERR_UNKNOWN_ENCODING,x=u.errorOrDestroy;e("inherits")(M,a);function w(){}function v(V,j,ee){y=y||e("./_stream_duplex"),V=V||{},typeof ee!="boolean"&&(ee=j instanceof y),this.objectMode=!!V.objectMode,ee&&(this.objectMode=this.objectMode||!!V.writableObjectMode),this.highWaterMark=m(this,V,"writableHighWaterMark",ee),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=V.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){B(j,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}v.prototype.getBuffer=function(){for(var j=this.bufferedRequest,ee=[];j;)ee.push(j),j=j.next;return ee},function(){try{Object.defineProperty(v.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var C;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(j){return C.call(this,j)?!0:this!==M?!1:j&&j._writableState instanceof v}})):C=function(j){return j instanceof this};function M(V){y=y||e("./_stream_duplex");var j=this instanceof y;if(!j&&!C.call(M,this))return new M(V);this._writableState=new v(V,this,j),this.writable=!0,V&&(typeof V.write=="function"&&(this._write=V.write),typeof V.writev=="function"&&(this._writev=V.writev),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.final=="function"&&(this._final=V.final)),a.call(this)}M.prototype.pipe=function(){x(this,new p)};function E(V,j){var ee=new S;x(V,ee),s.nextTick(j,ee)}function L(V,j,ee,q){var X;return ee===null?X=new c:typeof ee!="string"&&!j.objectMode&&(X=new b("chunk",["string","Buffer"],ee)),X?(x(V,X),s.nextTick(q,X),!1):!0}M.prototype.write=function(V,j,ee){var q=this._writableState,X=!1,J=!q.objectMode&&f(V);return J&&!i.isBuffer(V)&&(V=r(V)),typeof j=="function"&&(ee=j,j=null),J?j="buffer":j||(j=q.defaultEncoding),typeof ee!="function"&&(ee=w),q.ending?E(this,ee):(J||L(this,q,V,ee))&&(q.pendingcb++,X=O(this,q,J,V,j,ee)),X},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var V=this._writableState;V.corked&&(V.corked--,!V.writing&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&re(this,V))},M.prototype.setDefaultEncoding=function(j){if(typeof j=="string"&&(j=j.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((j+"").toLowerCase())>-1))throw new T(j);return this._writableState.defaultEncoding=j,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function z(V,j,ee){return!V.objectMode&&V.decodeStrings!==!1&&typeof j=="string"&&(j=i.from(j,ee)),j}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O(V,j,ee,q,X,J){if(!ee){var ie=z(j,q,X);q!==ie&&(ee=!0,X="buffer",q=ie)}var ne=j.objectMode?1:q.length;j.length+=ne;var oe=j.length<j.highWaterMark;if(oe||(j.needDrain=!0),j.writing||j.corked){var se=j.lastBufferedRequest;j.lastBufferedRequest={chunk:q,encoding:X,isBuf:ee,callback:J,next:null},se?se.next=j.lastBufferedRequest:j.bufferedRequest=j.lastBufferedRequest,j.bufferedRequestCount+=1}else R(V,j,!1,ne,q,X,J);return oe}function R(V,j,ee,q,X,J,ie){j.writelen=q,j.writecb=ie,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new A("write")):ee?V._writev(X,j.onwrite):V._write(X,J,j.onwrite),j.sync=!1}function D(V,j,ee,q,X){--j.pendingcb,ee?(s.nextTick(X,q),s.nextTick(le,V,j),V._writableState.errorEmitted=!0,x(V,q)):(X(q),V._writableState.errorEmitted=!0,x(V,q),le(V,j))}function H(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}function B(V,j){var ee=V._writableState,q=ee.sync,X=ee.writecb;if(typeof X!="function")throw new _;if(H(ee),j)D(V,ee,q,j,X);else{var J=Q(ee)||V.destroyed;!J&&!ee.corked&&!ee.bufferProcessing&&ee.bufferedRequest&&re(V,ee),q?s.nextTick($,V,ee,J,X):$(V,ee,J,X)}}function $(V,j,ee,q){ee||W(V,j),j.pendingcb--,q(),le(V,j)}function W(V,j){j.length===0&&j.needDrain&&(j.needDrain=!1,V.emit("drain"))}function re(V,j){j.bufferProcessing=!0;var ee=j.bufferedRequest;if(V._writev&&ee&&ee.next){var q=j.bufferedRequestCount,X=new Array(q),J=j.corkedRequestsFree;J.entry=ee;for(var ie=0,ne=!0;ee;)X[ie]=ee,ee.isBuf||(ne=!1),ee=ee.next,ie+=1;X.allBuffers=ne,R(V,j,!0,j.length,X,"",J.finish),j.pendingcb++,j.lastBufferedRequest=null,J.next?(j.corkedRequestsFree=J.next,J.next=null):j.corkedRequestsFree=new h(j),j.bufferedRequestCount=0}else{for(;ee;){var oe=ee.chunk,se=ee.encoding,me=ee.callback,ce=j.objectMode?1:oe.length;if(R(V,j,!1,ce,oe,se,me),ee=ee.next,j.bufferedRequestCount--,j.writing)break}ee===null&&(j.lastBufferedRequest=null)}j.bufferedRequest=ee,j.bufferProcessing=!1}M.prototype._write=function(V,j,ee){ee(new g("_write()"))},M.prototype._writev=null,M.prototype.end=function(V,j,ee){var q=this._writableState;return typeof V=="function"?(ee=V,V=null,j=null):typeof j=="function"&&(ee=j,j=null),V!=null&&this.write(V,j),q.corked&&(q.corked=1,this.uncork()),q.ending||fe(this,q,ee),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Q(V){return V.ending&&V.length===0&&V.bufferedRequest===null&&!V.finished&&!V.writing}function Z(V,j){V._final(function(ee){j.pendingcb--,ee&&x(V,ee),j.prefinished=!0,V.emit("prefinish"),le(V,j)})}function K(V,j){!j.prefinished&&!j.finalCalled&&(typeof V._final=="function"&&!j.destroyed?(j.pendingcb++,j.finalCalled=!0,s.nextTick(Z,V,j)):(j.prefinished=!0,V.emit("prefinish")))}function le(V,j){var ee=Q(j);if(ee&&(K(V,j),j.pendingcb===0&&(j.finished=!0,V.emit("finish"),j.autoDestroy))){var q=V._readableState;(!q||q.autoDestroy&&q.endEmitted)&&V.destroy()}return ee}function fe(V,j,ee){j.ending=!0,le(V,j),ee&&(j.finished?s.nextTick(ee):V.once("finish",ee)),j.ended=!0,V.writable=!1}function ue(V,j,ee){var q=V.entry;for(V.entry=null;q;){var X=q.callback;j.pendingcb--,X(ee),q=q.next}j.corkedRequestsFree.next=V}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(j){!this._writableState||(this._writableState.destroyed=j)}}),M.prototype.destroy=u.destroy,M.prototype._undestroy=u.undestroy,M.prototype._destroy=function(V,j){j(V)}}).call(this)}).call(this,e("_process"),typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(e,I,F){(function(s){(function(){var o;function h(A,c,S){return c in A?Object.defineProperty(A,c,{value:S,enumerable:!0,configurable:!0,writable:!0}):A[c]=S,A}var y=e("./end-of-stream"),t=Symbol("lastResolve"),a=Symbol("lastReject"),i=Symbol("error"),n=Symbol("ended"),r=Symbol("lastPromise"),f=Symbol("handlePromise"),u=Symbol("stream");function l(A,c){return{value:A,done:c}}function m(A){var c=A[t];if(c!==null){var S=A[u].read();S!==null&&(A[r]=null,A[t]=null,A[a]=null,c(l(S,!1)))}}function d(A){s.nextTick(m,A)}function b(A,c){return function(S,T){A.then(function(){if(c[n]){S(l(void 0,!0));return}c[f](S,T)},T)}}var g=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((o={get stream(){return this[u]},next:function(){var c=this,S=this[i];if(S!==null)return Promise.reject(S);if(this[n])return Promise.resolve(l(void 0,!0));if(this[u].destroyed)return new Promise(function(v,C){s.nextTick(function(){c[i]?C(c[i]):v(l(void 0,!0))})});var T=this[r],x;if(T)x=new Promise(b(T,this));else{var w=this[u].read();if(w!==null)return Promise.resolve(l(w,!1));x=new Promise(this[f])}return this[r]=x,x}},h(o,Symbol.asyncIterator,function(){return this}),h(o,"return",function(){var c=this;return new Promise(function(S,T){c[u].destroy(null,function(x){if(x){T(x);return}S(l(void 0,!0))})})}),o),g),p=function(c){var S,T=Object.create(_,(S={},h(S,u,{value:c,writable:!0}),h(S,t,{value:null,writable:!0}),h(S,a,{value:null,writable:!0}),h(S,i,{value:null,writable:!0}),h(S,n,{value:c._readableState.endEmitted,writable:!0}),h(S,f,{value:function(w,v){var C=T[u].read();C?(T[r]=null,T[t]=null,T[a]=null,w(l(C,!1))):(T[t]=w,T[a]=v)},writable:!0}),S));return T[r]=null,y(c,function(x){if(x&&x.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=T[a];w!==null&&(T[r]=null,T[t]=null,T[a]=null,w(x)),T[i]=x;return}var v=T[t];v!==null&&(T[r]=null,T[t]=null,T[a]=null,v(l(void 0,!0))),T[n]=!0}),c.on("readable",d.bind(null,T)),T};I.exports=p}).call(this)}).call(this,e("_process"))},{"./end-of-stream":295,_process:277}],293:[function(e,I,F){function s(m,d){var b=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);d&&(g=g.filter(function(_){return Object.getOwnPropertyDescriptor(m,_).enumerable})),b.push.apply(b,g)}return b}function o(m){for(var d=1;d<arguments.length;d++){var b=arguments[d]!=null?arguments[d]:{};d%2?s(Object(b),!0).forEach(function(g){h(m,g,b[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(b)):s(Object(b)).forEach(function(g){Object.defineProperty(m,g,Object.getOwnPropertyDescriptor(b,g))})}return m}function h(m,d,b){return d in m?Object.defineProperty(m,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[d]=b,m}function y(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function t(m,d){for(var b=0;b<d.length;b++){var g=d[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}function a(m,d,b){return d&&t(m.prototype,d),b&&t(m,b),m}var i=e("buffer"),n=i.Buffer,r=e("util"),f=r.inspect,u=f&&f.custom||"inspect";function l(m,d,b){n.prototype.copy.call(m,d,b)}I.exports=function(){function m(){y(this,m),this.head=null,this.tail=null,this.length=0}return a(m,[{key:"push",value:function(b){var g={data:b,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(b){var g={data:b,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var g=this.head,_=""+g.data;g=g.next;)_+=b+g.data;return _}},{key:"concat",value:function(b){if(this.length===0)return n.alloc(0);for(var g=n.allocUnsafe(b>>>0),_=this.head,p=0;_;)l(_.data,g,p),p+=_.data.length,_=_.next;return g}},{key:"consume",value:function(b,g){var _;return b<this.head.data.length?(_=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):b===this.head.data.length?_=this.shift():_=g?this._getString(b):this._getBuffer(b),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var g=this.head,_=1,p=g.data;for(b-=p.length;g=g.next;){var A=g.data,c=b>A.length?A.length:b;if(c===A.length?p+=A:p+=A.slice(0,b),b-=c,b===0){c===A.length?(++_,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=A.slice(c));break}++_}return this.length-=_,p}},{key:"_getBuffer",value:function(b){var g=n.allocUnsafe(b),_=this.head,p=1;for(_.data.copy(g),b-=_.data.length;_=_.next;){var A=_.data,c=b>A.length?A.length:b;if(A.copy(g,g.length-b,0,c),b-=c,b===0){c===A.length?(++p,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=A.slice(c));break}++p}return this.length-=p,g}},{key:u,value:function(b,g){return f(this,o({},g,{depth:0,customInspect:!1}))}}]),m}()},{buffer:85,util:83}],294:[function(e,I,F){(function(s){(function(){function o(n,r){var f=this,u=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return u||l?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,s.nextTick(a,this,n)):s.nextTick(a,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(m){!r&&m?f._writableState?f._writableState.errorEmitted?s.nextTick(y,f):(f._writableState.errorEmitted=!0,s.nextTick(h,f,m)):s.nextTick(h,f,m):r?(s.nextTick(y,f),r(m)):s.nextTick(y,f)}),this)}function h(n,r){a(n,r),y(n)}function y(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(n,r){n.emit("error",r)}function i(n,r){var f=n._readableState,u=n._writableState;f&&f.autoDestroy||u&&u.autoDestroy?n.destroy(r):n.emit("error",r)}I.exports={destroy:o,undestroy:t,errorOrDestroy:i}}).call(this)}).call(this,e("_process"))},{_process:277}],295:[function(e,I,F){var s=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(a){var i=!1;return function(){if(!i){i=!0;for(var n=arguments.length,r=new Array(n),f=0;f<n;f++)r[f]=arguments[f];a.apply(this,r)}}}function h(){}function y(a){return a.setHeader&&typeof a.abort=="function"}function t(a,i,n){if(typeof i=="function")return t(a,null,i);i||(i={}),n=o(n||h);var r=i.readable||i.readable!==!1&&a.readable,f=i.writable||i.writable!==!1&&a.writable,u=function(){a.writable||m()},l=a._writableState&&a._writableState.finished,m=function(){f=!1,l=!0,r||n.call(a)},d=a._readableState&&a._readableState.endEmitted,b=function(){r=!1,d=!0,f||n.call(a)},g=function(c){n.call(a,c)},_=function(){var c;if(r&&!d)return(!a._readableState||!a._readableState.ended)&&(c=new s),n.call(a,c);if(f&&!l)return(!a._writableState||!a._writableState.ended)&&(c=new s),n.call(a,c)},p=function(){a.req.on("finish",m)};return y(a)?(a.on("complete",m),a.on("abort",_),a.req?p():a.on("request",p)):f&&!a._writableState&&(a.on("end",u),a.on("close",u)),a.on("end",b),a.on("finish",m),i.error!==!1&&a.on("error",g),a.on("close",_),function(){a.removeListener("complete",m),a.removeListener("abort",_),a.removeListener("request",p),a.req&&a.req.removeListener("finish",m),a.removeListener("end",u),a.removeListener("close",u),a.removeListener("finish",m),a.removeListener("end",b),a.removeListener("error",g),a.removeListener("close",_)}}I.exports=t},{"../../../errors":286}],296:[function(e,I,F){I.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(e,I,F){var s;function o(m){var d=!1;return function(){d||(d=!0,m.apply(void 0,arguments))}}var h=e("../../../errors").codes,y=h.ERR_MISSING_ARGS,t=h.ERR_STREAM_DESTROYED;function a(m){if(m)throw m}function i(m){return m.setHeader&&typeof m.abort=="function"}function n(m,d,b,g){g=o(g);var _=!1;m.on("close",function(){_=!0}),s===void 0&&(s=e("./end-of-stream")),s(m,{readable:d,writable:b},function(A){if(A)return g(A);_=!0,g()});var p=!1;return function(A){if(!_&&!p){if(p=!0,i(m))return m.abort();if(typeof m.destroy=="function")return m.destroy();g(A||new t("pipe"))}}}function r(m){m()}function f(m,d){return m.pipe(d)}function u(m){return!m.length||typeof m[m.length-1]!="function"?a:m.pop()}function l(){for(var m=arguments.length,d=new Array(m),b=0;b<m;b++)d[b]=arguments[b];var g=u(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new y("streams");var _,p=d.map(function(A,c){var S=c<d.length-1,T=c>0;return n(A,S,T,function(x){_||(_=x),x&&p.forEach(r),!S&&(p.forEach(r),g(_))})});return d.reduce(f)}I.exports=l},{"../../../errors":286,"./end-of-stream":295}],298:[function(e,I,F){var s=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function o(y,t,a){return y.highWaterMark!=null?y.highWaterMark:t?y[a]:null}function h(y,t,a,i){var n=o(t,i,a);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var r=i?a:"highWaterMark";throw new s(r,n)}return Math.floor(n)}return y.objectMode?16:16*1024}I.exports={getHighWaterMark:h}},{"../../../errors":286}],299:[function(e,I,F){I.exports=e("events").EventEmitter},{events:84}],300:[function(e,I,F){var s=e("safe-buffer").Buffer,o=s.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function h(p){if(!p)return"utf8";for(var A;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(A)return;p=(""+p).toLowerCase(),A=!0}}function y(p){var A=h(p);if(typeof A!="string"&&(s.isEncoding===o||!o(p)))throw new Error("Unknown encoding: "+p);return A||p}F.StringDecoder=t;function t(p){this.encoding=y(p);var A;switch(this.encoding){case"utf16le":this.text=l,this.end=m,A=4;break;case"utf8":this.fillLast=r,A=4;break;case"base64":this.text=d,this.end=b,A=3;break;default:this.write=g,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(A)}t.prototype.write=function(p){if(p.length===0)return"";var A,c;if(this.lastNeed){if(A=this.fillLast(p),A===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<p.length?A?A+this.text(p,c):this.text(p,c):A||""},t.prototype.end=u,t.prototype.text=f,t.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function a(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function i(p,A,c){var S=A.length-1;if(S<c)return 0;var T=a(A[S]);return T>=0?(T>0&&(p.lastNeed=T-1),T):--S<c||T===-2?0:(T=a(A[S]),T>=0?(T>0&&(p.lastNeed=T-2),T):--S<c||T===-2?0:(T=a(A[S]),T>=0?(T>0&&(T===2?T=0:p.lastNeed=T-3),T):0))}function n(p,A,c){if((A[0]&192)!==128)return p.lastNeed=0,"\uFFFD";if(p.lastNeed>1&&A.length>1){if((A[1]&192)!==128)return p.lastNeed=1,"\uFFFD";if(p.lastNeed>2&&A.length>2&&(A[2]&192)!==128)return p.lastNeed=2,"\uFFFD"}}function r(p){var A=this.lastTotal-this.lastNeed,c=n(this,p);if(c!==void 0)return c;if(this.lastNeed<=p.length)return p.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,A,0,p.length),this.lastNeed-=p.length}function f(p,A){var c=i(this,p,A);if(!this.lastNeed)return p.toString("utf8",A);this.lastTotal=c;var S=p.length-(c-this.lastNeed);return p.copy(this.lastChar,0,S),p.toString("utf8",A,S)}function u(p){var A=p&&p.length?this.write(p):"";return this.lastNeed?A+"\uFFFD":A}function l(p,A){if((p.length-A)%2===0){var c=p.toString("utf16le",A);if(c){var S=c.charCodeAt(c.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",A,p.length-1)}function m(p){var A=p&&p.length?this.write(p):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,c)}return A}function d(p,A){var c=(p.length-A)%3;return c===0?p.toString("base64",A):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",A,p.length-c))}function b(p){var A=p&&p.length?this.write(p):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function g(p){return p.toString(this.encoding)}function _(p){return p&&p.length?this.write(p):""}},{"safe-buffer":284}],301:[function(e,I,F){(function(s,o){(function(){var h=e("assert"),y=e("debug")("stream-parser");I.exports=r;var t=-1,a=0,i=1,n=2;function r(c){var S=c&&typeof c._transform=="function",T=c&&typeof c._write=="function";if(!S&&!T)throw new Error("must pass a Writable or Transform stream in");y("extending Parser into stream"),c._bytes=u,c._skipBytes=l,S&&(c._passthrough=m),S?c._transform=b:c._write=d}function f(c){y("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=t,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function u(c,S){h(!this._parserCallback,'there is already a "callback" set!'),h(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||f(this),y("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=S,this._parserState=a}function l(c,S){h(!this._parserCallback,'there is already a "callback" set!'),h(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||f(this),y("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=S,this._parserState=i}function m(c,S){h(!this._parserCallback,'There is already a "callback" set!'),h(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||f(this),y("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=S,this._parserState=n}function d(c,S,T){this._parserInit||f(this),y("write(%o bytes)",c.length),typeof S=="function"&&(T=S),p(this,c,null,T)}function b(c,S,T){this._parserInit||f(this),y("transform(%o bytes)",c.length),typeof S!="function"&&(S=this._parserOutput),p(this,c,S,T)}function g(c,S,T,x){return c._parserBytesLeft<=0?x(new Error("got data but not currently parsing anything")):S.length<=c._parserBytesLeft?function(){return _(c,S,T,x)}:function(){var w=S.slice(0,c._parserBytesLeft);return _(c,w,T,function(v){if(v)return x(v);if(S.length>w.length)return function(){return g(c,S.slice(w.length),T,x)}})}}function _(c,S,T,x){if(c._parserBytesLeft-=S.length,y("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===a?(c._parserBuffers.push(S),c._parserBuffered+=S.length):c._parserState===n&&T(S),c._parserBytesLeft===0){var w=c._parserCallback;if(w&&c._parserState===a&&c._parserBuffers.length>1&&(S=o.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==a&&(S=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=t,c._parserBuffers.splice(0),w){var v=[];S&&v.push(S),T&&v.push(T);var C=w.length>v.length;C&&v.push(A(x));var M=w.apply(c,v);if(!C||x===M)return x}}else return x}var p=A(g);function A(c){return function(){for(var S=c.apply(this,arguments);typeof S=="function";)S=S();return S}}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(e,I,F){(function(s){(function(){F=I.exports=e("./debug"),F.log=y,F.formatArgs=h,F.save=t,F.load=a,F.useColors=o,F.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:i(),F.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function o(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}F.formatters.j=function(n){try{return JSON.stringify(n)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function h(n){var r=this.useColors;if(n[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+n[0]+(r?"%c ":" ")+"+"+F.humanize(this.diff),!!r){var f="color: "+this.color;n.splice(1,0,f,"color: inherit");var u=0,l=0;n[0].replace(/%[a-zA-Z%]/g,function(m){m!=="%%"&&(u++,m==="%c"&&(l=u))}),n.splice(l,0,f)}}function y(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function t(n){try{n==null?F.storage.removeItem("debug"):F.storage.debug=n}catch{}}function a(){var n;try{n=F.storage.debug}catch{}return!n&&typeof s!="undefined"&&"env"in s&&(n={}.DEBUG),n}F.enable(a());function i(){try{return window.localStorage}catch{}}}).call(this)}).call(this,e("_process"))},{"./debug":303,_process:277}],303:[function(e,I,F){F=I.exports=h.debug=h.default=h,F.coerce=i,F.disable=t,F.enable=y,F.enabled=a,F.humanize=e("ms"),F.names=[],F.skips=[],F.formatters={};var s;function o(n){var r=0,f;for(f in n)r=(r<<5)-r+n.charCodeAt(f),r|=0;return F.colors[Math.abs(r)%F.colors.length]}function h(n){function r(){if(!!r.enabled){var f=r,u=+new Date,l=u-(s||u);f.diff=l,f.prev=s,f.curr=u,s=u;for(var m=new Array(arguments.length),d=0;d<m.length;d++)m[d]=arguments[d];m[0]=F.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");var b=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(_,p){if(_==="%%")return _;b++;var A=F.formatters[p];if(typeof A=="function"){var c=m[b];_=A.call(f,c),m.splice(b,1),b--}return _}),F.formatArgs.call(f,m);var g=r.log||F.log||console.log.bind(console);g.apply(f,m)}}return r.namespace=n,r.enabled=F.enabled(n),r.useColors=F.useColors(),r.color=o(n),typeof F.init=="function"&&F.init(r),r}function y(n){F.save(n),F.names=[],F.skips=[];for(var r=(typeof n=="string"?n:"").split(/[\s,]+/),f=r.length,u=0;u<f;u++)!r[u]||(n=r[u].replace(/\*/g,".*?"),n[0]==="-"?F.skips.push(new RegExp("^"+n.substr(1)+"$")):F.names.push(new RegExp("^"+n+"$")))}function t(){F.enable("")}function a(n){var r,f;for(r=0,f=F.skips.length;r<f;r++)if(F.skips[r].test(n))return!1;for(r=0,f=F.names.length;r<f;r++)if(F.names[r].test(n))return!0;return!1}function i(n){return n instanceof Error?n.stack||n.message:n}},{ms:304}],304:[function(e,I,F){var s=1e3,o=s*60,h=o*60,y=h*24,t=y*365.25;I.exports=function(f,u){u=u||{};var l=typeof f;if(l==="string"&&f.length>0)return a(f);if(l==="number"&&isNaN(f)===!1)return u.long?n(f):i(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function a(f){if(f=String(f),!(f.length>100)){var u=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(!!u){var l=parseFloat(u[1]),m=(u[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return l*t;case"days":case"day":case"d":return l*y;case"hours":case"hour":case"hrs":case"hr":case"h":return l*h;case"minutes":case"minute":case"mins":case"min":case"m":return l*o;case"seconds":case"second":case"secs":case"sec":case"s":return l*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function i(f){return f>=y?Math.round(f/y)+"d":f>=h?Math.round(f/h)+"h":f>=o?Math.round(f/o)+"m":f>=s?Math.round(f/s)+"s":f+"ms"}function n(f){return r(f,y,"day")||r(f,h,"hour")||r(f,o,"minute")||r(f,s,"second")||f+" ms"}function r(f,u,l){if(!(f<u))return f<u*1.5?Math.floor(f/u)+" "+l:Math.ceil(f/u)+" "+l+"s"}},{}],305:[function(e,I,F){var s=e("parenthesis");I.exports=function(h,y,t){if(h==null)throw Error("First argument should be a string");if(y==null)throw Error("Separator should be a string or a RegExp");t?(typeof t=="string"||Array.isArray(t))&&(t={ignore:t}):t={},t.escape==null&&(t.escape=!0),t.ignore==null?t.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof t.ignore=="string"&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(m){return m.length===1&&(m=m+m),m}));var a=s.parse(h,{flat:!0,brackets:t.ignore}),i=a[0],n=i.split(y);if(t.escape){for(var r=[],f=0;f<n.length;f++){var u=n[f],l=n[f+1];u[u.length-1]==="\\"&&u[u.length-2]!=="\\"?(r.push(u+y+l),f++):r.push(u)}n=r}for(var f=0;f<n.length;f++)a[0]=n[f],n[f]=s.stringify(a,{flat:!0});return n}},{parenthesis:248}],306:[function(e,I,F){I.exports=s;function s(o){for(var h=o.length,y=new Array(h),t=new Array(h),a=new Array(h),i=new Array(h),n=new Array(h),r=new Array(h),f=0;f<h;++f)y[f]=-1,t[f]=0,a[f]=!1,i[f]=0,n[f]=-1,r[f]=[];var u=0,l=[],m=[];function d(p){var A=[p],c=[p];for(y[p]=t[p]=u,a[p]=!0,u+=1;c.length>0;){p=c[c.length-1];var S=o[p];if(i[p]<S.length){for(var T=i[p];T<S.length;++T){var x=S[T];if(y[x]<0){y[x]=t[x]=u,a[x]=!0,u+=1,A.push(x),c.push(x);break}else a[x]&&(t[p]=Math.min(t[p],t[x])|0);n[x]>=0&&r[p].push(n[x])}i[p]=T}else{if(t[p]===y[p]){for(var w=[],v=[],C=0,T=A.length-1;T>=0;--T){var M=A[T];if(a[M]=!1,w.push(M),v.push(r[M]),C+=r[M].length,n[M]=l.length,M===p){A.length=T;break}}l.push(w);for(var E=new Array(C),T=0;T<v.length;T++)for(var L=0;L<v[T].length;L++)E[--C]=v[T][L];m.push(E)}c.pop()}}}for(var f=0;f<h;++f)y[f]<0&&d(f);for(var b,f=0;f<m.length;f++){var g=m[f];if(g.length!==0){g.sort(function(A,c){return A-c}),b=[g[0]];for(var _=1;_<g.length;_++)g[_]!==g[_-1]&&b.push(g[_]);m[f]=b}}return{components:l,adjacencyList:m}}},{}],307:[function(e,I,F){Object.defineProperty(F,"__esModule",{value:!0});var s=function(){function n(r,f){var u=[],l=!0,m=!1,d=void 0;try{for(var b=r[Symbol.iterator](),g;!(l=(g=b.next()).done)&&(u.push(g.value),!(f&&u.length===f));l=!0);}catch(_){m=!0,d=_}finally{try{!l&&b.return&&b.return()}finally{if(m)throw d}}return u}return function(r,f){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return n(r,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Math.PI*2,h=function(r,f,u,l,m,d,b){var g=r.x,_=r.y;g*=f,_*=u;var p=l*g-m*_,A=m*g+l*_;return{x:p+d,y:A+b}},y=function(r,f){var u=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(f/4),l=Math.cos(r),m=Math.sin(r),d=Math.cos(r+f),b=Math.sin(r+f);return[{x:l-m*u,y:m+l*u},{x:d+b*u,y:b-d*u},{x:d,y:b}]},t=function(r,f,u,l){var m=r*l-f*u<0?-1:1,d=r*u+f*l;return d>1&&(d=1),d<-1&&(d=-1),m*Math.acos(d)},a=function(r,f,u,l,m,d,b,g,_,p,A,c){var S=Math.pow(m,2),T=Math.pow(d,2),x=Math.pow(A,2),w=Math.pow(c,2),v=S*T-S*w-T*x;v<0&&(v=0),v/=S*w+T*x,v=Math.sqrt(v)*(b===g?-1:1);var C=v*m/d*c,M=v*-d/m*A,E=p*C-_*M+(r+u)/2,L=_*C+p*M+(f+l)/2,z=(A-C)/m,O=(c-M)/d,R=(-A-C)/m,D=(-c-M)/d,H=t(1,0,z,O),B=t(z,O,R,D);return g===0&&B>0&&(B-=o),g===1&&B<0&&(B+=o),[E,L,H,B]},i=function(r){var f=r.px,u=r.py,l=r.cx,m=r.cy,d=r.rx,b=r.ry,g=r.xAxisRotation,_=g===void 0?0:g,p=r.largeArcFlag,A=p===void 0?0:p,c=r.sweepFlag,S=c===void 0?0:c,T=[];if(d===0||b===0)return[];var x=Math.sin(_*o/360),w=Math.cos(_*o/360),v=w*(f-l)/2+x*(u-m)/2,C=-x*(f-l)/2+w*(u-m)/2;if(v===0&&C===0)return[];d=Math.abs(d),b=Math.abs(b);var M=Math.pow(v,2)/Math.pow(d,2)+Math.pow(C,2)/Math.pow(b,2);M>1&&(d*=Math.sqrt(M),b*=Math.sqrt(M));var E=a(f,u,l,m,d,b,A,S,x,w,v,C),L=s(E,4),z=L[0],O=L[1],R=L[2],D=L[3],H=Math.abs(D)/(o/4);Math.abs(1-H)<1e-7&&(H=1);var B=Math.max(Math.ceil(H),1);D/=B;for(var $=0;$<B;$++)T.push(y(R,D)),R+=D;return T.map(function(W){var re=h(W[0],d,b,w,x,z,O),Q=re.x,Z=re.y,K=h(W[1],d,b,w,x,z,O),le=K.x,fe=K.y,ue=h(W[2],d,b,w,x,z,O),V=ue.x,j=ue.y;return{x1:Q,y1:Z,x2:le,y2:fe,x:V,y:j}})};F.default=i,I.exports=F.default},{}],308:[function(e,I,F){var s=e("parse-svg-path"),o=e("abs-svg-path"),h=e("normalize-svg-path"),y=e("is-svg-path"),t=e("assert");I.exports=a;function a(i){if(Array.isArray(i)&&i.length===1&&typeof i[0]=="string"&&(i=i[0]),typeof i=="string"&&(t(y(i),"String is not an SVG path."),i=s(i)),t(Array.isArray(i),"Argument should be a string or an array of path segments."),i=o(i),i=h(i),!i.length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],r=0,f=i.length;r<f;r++)for(var u=i[r].slice(1),l=0;l<u.length;l+=2)u[l+0]<n[0]&&(n[0]=u[l+0]),u[l+1]<n[1]&&(n[1]=u[l+1]),u[l+0]>n[2]&&(n[2]=u[l+0]),u[l+1]>n[3]&&(n[3]=u[l+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(e,I,F){I.exports=o;var s=e("svg-arc-to-cubic-bezier");function o(t){for(var a,i=[],n=0,r=0,f=0,u=0,l=null,m=null,d=0,b=0,g=0,_=t.length;g<_;g++){var p=t[g],A=p[0];switch(A){case"M":f=p[1],u=p[2];break;case"A":var c=s({px:d,py:b,cx:p[6],cy:p[7],rx:p[1],ry:p[2],xAxisRotation:p[3],largeArcFlag:p[4],sweepFlag:p[5]});if(!c.length)continue;for(var S=0,T;S<c.length;S++)T=c[S],p=["C",T.x1,T.y1,T.x2,T.y2,T.x,T.y],S<c.length-1&&i.push(p);break;case"S":var x=d,w=b;(a=="C"||a=="S")&&(x+=x-n,w+=w-r),p=["C",x,w,p[1],p[2],p[3],p[4]];break;case"T":a=="Q"||a=="T"?(l=d*2-l,m=b*2-m):(l=d,m=b),p=y(d,b,l,m,p[1],p[2]);break;case"Q":l=p[1],m=p[2],p=y(d,b,p[1],p[2],p[3],p[4]);break;case"L":p=h(d,b,p[1],p[2]);break;case"H":p=h(d,b,p[1],b);break;case"V":p=h(d,b,d,p[1]);break;case"Z":p=h(d,b,f,u);break}a=A,d=p[p.length-2],b=p[p.length-1],p.length>4?(n=p[p.length-4],r=p[p.length-3]):(n=d,r=b),i.push(p)}return i}function h(t,a,i,n){return["C",t,a,i,n,i,n]}function y(t,a,i,n,r,f){return["C",t/3+2/3*i,a/3+2/3*n,r/3+2/3*i,f/3+2/3*n,r,f]}},{"svg-arc-to-cubic-bezier":307}],310:[function(e,I,F){var s=e("svg-path-bounds"),o=e("parse-svg-path"),h=e("draw-svg-path"),y=e("is-svg-path"),t=e("bitmap-sdf"),a=document.createElement("canvas"),i=a.getContext("2d");I.exports=n;function n(u,l){if(!y(u))throw Error("Argument should be valid svg path string");l||(l={});var m,d;l.shape?(m=l.shape[0],d=l.shape[1]):(m=a.width=l.w||l.width||200,d=a.height=l.h||l.height||200);var b=Math.min(m,d),g=l.stroke||0,_=l.viewbox||l.viewBox||s(u),p=[m/(_[2]-_[0]),d/(_[3]-_[1])],A=Math.min(p[0]||0,p[1]||0)/2;if(i.fillStyle="black",i.fillRect(0,0,m,d),i.fillStyle="white",g&&(typeof g!="number"&&(g=1),g>0?i.strokeStyle="white":i.strokeStyle="black",i.lineWidth=Math.abs(g)),i.translate(m*.5,d*.5),i.scale(A,A),f()){var c=new Path2D(u);i.fill(c),g&&i.stroke(c)}else{var S=o(u);h(i,S),i.fill(),g&&i.stroke()}i.setTransform(1,0,0,1,0,0);var T=t(i,{cutoff:l.cutoff!=null?l.cutoff:.5,radius:l.radius!=null?l.radius:b*.5});return T}var r;function f(){if(r!=null)return r;var u=document.createElement("canvas").getContext("2d");if(u.canvas.width=u.canvas.height=1,!window.Path2D)return r=!1;var l=new Path2D("M0,0h1v1h-1v-1Z");u.fillStyle="black",u.fill(l);var m=u.getImageData(0,0,1,1);return r=m&&m.data&&m.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(e,I,F){(function(s,o){(function(){var h=e("process/browser.js").nextTick,y=Function.prototype.apply,t=Array.prototype.slice,a={},i=0;F.setTimeout=function(){return new n(y.call(setTimeout,window,arguments),clearTimeout)},F.setInterval=function(){return new n(y.call(setInterval,window,arguments),clearInterval)},F.clearTimeout=F.clearInterval=function(r){r.close()};function n(r,f){this._id=r,this._clearFn=f}n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},F.enroll=function(r,f){clearTimeout(r._idleTimeoutId),r._idleTimeout=f},F.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},F._unrefActive=F.active=function(r){clearTimeout(r._idleTimeoutId);var f=r._idleTimeout;f>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},f))},F.setImmediate=typeof s=="function"?s:function(r){var f=i++,u=arguments.length<2?!1:t.call(arguments,1);return a[f]=!0,h(function(){a[f]&&(u?r.apply(null,u):r.call(null),F.clearImmediate(f))}),f},F.clearImmediate=typeof o=="function"?o:function(r){delete a[r]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(e,I,F){(function(s){var o=/^\s+/,h=/\s+$/,y=0,t=s.round,a=s.min,i=s.max,n=s.random;function r(X,J){if(X=X||"",J=J||{},X instanceof r)return X;if(!(this instanceof r))return new r(X,J);var ie=f(X);this._originalInput=X,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=t(100*this._a)/100,this._format=J.format||ie.format,this._gradientType=J.gradientType,this._r<1&&(this._r=t(this._r)),this._g<1&&(this._g=t(this._g)),this._b<1&&(this._b=t(this._b)),this._ok=ie.ok,this._tc_id=y++}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var X=this.toRgb();return(X.r*299+X.g*587+X.b*114)/1e3},getLuminance:function(){var X=this.toRgb(),J,ie,ne,oe,se,me;return J=X.r/255,ie=X.g/255,ne=X.b/255,J<=.03928?oe=J/12.92:oe=s.pow((J+.055)/1.055,2.4),ie<=.03928?se=ie/12.92:se=s.pow((ie+.055)/1.055,2.4),ne<=.03928?me=ne/12.92:me=s.pow((ne+.055)/1.055,2.4),.2126*oe+.7152*se+.0722*me},setAlpha:function(X){return this._a=B(X),this._roundA=t(100*this._a)/100,this},toHsv:function(){var X=d(this._r,this._g,this._b);return{h:X.h*360,s:X.s,v:X.v,a:this._a}},toHsvString:function(){var X=d(this._r,this._g,this._b),J=t(X.h*360),ie=t(X.s*100),ne=t(X.v*100);return this._a==1?"hsv("+J+", "+ie+"%, "+ne+"%)":"hsva("+J+", "+ie+"%, "+ne+"%, "+this._roundA+")"},toHsl:function(){var X=l(this._r,this._g,this._b);return{h:X.h*360,s:X.s,l:X.l,a:this._a}},toHslString:function(){var X=l(this._r,this._g,this._b),J=t(X.h*360),ie=t(X.s*100),ne=t(X.l*100);return this._a==1?"hsl("+J+", "+ie+"%, "+ne+"%)":"hsla("+J+", "+ie+"%, "+ne+"%, "+this._roundA+")"},toHex:function(X){return g(this._r,this._g,this._b,X)},toHexString:function(X){return"#"+this.toHex(X)},toHex8:function(X){return _(this._r,this._g,this._b,this._a,X)},toHex8String:function(X){return"#"+this.toHex8(X)},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t($(this._r,255)*100)+"%",g:t($(this._g,255)*100)+"%",b:t($(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t($(this._r,255)*100)+"%, "+t($(this._g,255)*100)+"%, "+t($(this._b,255)*100)+"%)":"rgba("+t($(this._r,255)*100)+"%, "+t($(this._g,255)*100)+"%, "+t($(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:D[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(X){var J="#"+p(this._r,this._g,this._b,this._a),ie=J,ne=this._gradientType?"GradientType = 1, ":"";if(X){var oe=r(X);ie="#"+p(oe._r,oe._g,oe._b,oe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ne+"startColorstr="+J+",endColorstr="+ie+")"},toString:function(X){var J=!!X;X=X||this._format;var ie=!1,ne=this._a<1&&this._a>=0,oe=!J&&ne&&(X==="hex"||X==="hex6"||X==="hex3"||X==="hex4"||X==="hex8"||X==="name");return oe?X==="name"&&this._a===0?this.toName():this.toRgbString():(X==="rgb"&&(ie=this.toRgbString()),X==="prgb"&&(ie=this.toPercentageRgbString()),(X==="hex"||X==="hex6")&&(ie=this.toHexString()),X==="hex3"&&(ie=this.toHexString(!0)),X==="hex4"&&(ie=this.toHex8String(!0)),X==="hex8"&&(ie=this.toHex8String()),X==="name"&&(ie=this.toName()),X==="hsl"&&(ie=this.toHslString()),X==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(X,J){var ie=X.apply(null,[this].concat([].slice.call(J)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(T,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(S,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(X,J){return X.apply(null,[this].concat([].slice.call(J)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(L,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},r.fromRatio=function(X,J){if(typeof X=="object"){var ie={};for(var ne in X)X.hasOwnProperty(ne)&&(ne==="a"?ie[ne]=X[ne]:ie[ne]=le(X[ne]));X=ie}return r(X,J)};function f(X){var J={r:0,g:0,b:0},ie=1,ne=null,oe=null,se=null,me=!1,ce=!1;return typeof X=="string"&&(X=ee(X)),typeof X=="object"&&(j(X.r)&&j(X.g)&&j(X.b)?(J=u(X.r,X.g,X.b),me=!0,ce=String(X.r).substr(-1)==="%"?"prgb":"rgb"):j(X.h)&&j(X.s)&&j(X.v)?(ne=le(X.s),oe=le(X.v),J=b(X.h,ne,oe),me=!0,ce="hsv"):j(X.h)&&j(X.s)&&j(X.l)&&(ne=le(X.s),se=le(X.l),J=m(X.h,ne,se),me=!0,ce="hsl"),X.hasOwnProperty("a")&&(ie=X.a)),ie=B(ie),{ok:me,format:X.format||ce,r:a(255,i(J.r,0)),g:a(255,i(J.g,0)),b:a(255,i(J.b,0)),a:ie}}function u(X,J,ie){return{r:$(X,255)*255,g:$(J,255)*255,b:$(ie,255)*255}}function l(X,J,ie){X=$(X,255),J=$(J,255),ie=$(ie,255);var ne=i(X,J,ie),oe=a(X,J,ie),se,me,ce=(ne+oe)/2;if(ne==oe)se=me=0;else{var pe=ne-oe;switch(me=ce>.5?pe/(2-ne-oe):pe/(ne+oe),ne){case X:se=(J-ie)/pe+(J<ie?6:0);break;case J:se=(ie-X)/pe+2;break;case ie:se=(X-J)/pe+4;break}se/=6}return{h:se,s:me,l:ce}}function m(X,J,ie){var ne,oe,se;X=$(X,360),J=$(J,100),ie=$(ie,100);function me(xe,Se,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?xe+(Se-xe)*6*Ae:Ae<1/2?Se:Ae<2/3?xe+(Se-xe)*(2/3-Ae)*6:xe}if(J===0)ne=oe=se=ie;else{var ce=ie<.5?ie*(1+J):ie+J-ie*J,pe=2*ie-ce;ne=me(pe,ce,X+1/3),oe=me(pe,ce,X),se=me(pe,ce,X-1/3)}return{r:ne*255,g:oe*255,b:se*255}}function d(X,J,ie){X=$(X,255),J=$(J,255),ie=$(ie,255);var ne=i(X,J,ie),oe=a(X,J,ie),se,me,ce=ne,pe=ne-oe;if(me=ne===0?0:pe/ne,ne==oe)se=0;else{switch(ne){case X:se=(J-ie)/pe+(J<ie?6:0);break;case J:se=(ie-X)/pe+2;break;case ie:se=(X-J)/pe+4;break}se/=6}return{h:se,s:me,v:ce}}function b(X,J,ie){X=$(X,360)*6,J=$(J,100),ie=$(ie,100);var ne=s.floor(X),oe=X-ne,se=ie*(1-J),me=ie*(1-oe*J),ce=ie*(1-(1-oe)*J),pe=ne%6,xe=[ie,me,se,se,ce,ie][pe],Se=[ce,ie,ie,me,se,se][pe],Ae=[se,se,ce,ie,ie,me][pe];return{r:xe*255,g:Se*255,b:Ae*255}}function g(X,J,ie,ne){var oe=[K(t(X).toString(16)),K(t(J).toString(16)),K(t(ie).toString(16))];return ne&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0):oe.join("")}function _(X,J,ie,ne,oe){var se=[K(t(X).toString(16)),K(t(J).toString(16)),K(t(ie).toString(16)),K(fe(ne))];return oe&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)&&se[3].charAt(0)==se[3].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0)+se[3].charAt(0):se.join("")}function p(X,J,ie,ne){var oe=[K(fe(ne)),K(t(X).toString(16)),K(t(J).toString(16)),K(t(ie).toString(16))];return oe.join("")}r.equals=function(X,J){return!X||!J?!1:r(X).toRgbString()==r(J).toRgbString()},r.random=function(){return r.fromRatio({r:n(),g:n(),b:n()})};function A(X,J){J=J===0?0:J||10;var ie=r(X).toHsl();return ie.s-=J/100,ie.s=W(ie.s),r(ie)}function c(X,J){J=J===0?0:J||10;var ie=r(X).toHsl();return ie.s+=J/100,ie.s=W(ie.s),r(ie)}function S(X){return r(X).desaturate(100)}function T(X,J){J=J===0?0:J||10;var ie=r(X).toHsl();return ie.l+=J/100,ie.l=W(ie.l),r(ie)}function x(X,J){J=J===0?0:J||10;var ie=r(X).toRgb();return ie.r=i(0,a(255,ie.r-t(255*-(J/100)))),ie.g=i(0,a(255,ie.g-t(255*-(J/100)))),ie.b=i(0,a(255,ie.b-t(255*-(J/100)))),r(ie)}function w(X,J){J=J===0?0:J||10;var ie=r(X).toHsl();return ie.l-=J/100,ie.l=W(ie.l),r(ie)}function v(X,J){var ie=r(X).toHsl(),ne=(ie.h+J)%360;return ie.h=ne<0?360+ne:ne,r(ie)}function C(X){var J=r(X).toHsl();return J.h=(J.h+180)%360,r(J)}function M(X){var J=r(X).toHsl(),ie=J.h;return[r(X),r({h:(ie+120)%360,s:J.s,l:J.l}),r({h:(ie+240)%360,s:J.s,l:J.l})]}function E(X){var J=r(X).toHsl(),ie=J.h;return[r(X),r({h:(ie+90)%360,s:J.s,l:J.l}),r({h:(ie+180)%360,s:J.s,l:J.l}),r({h:(ie+270)%360,s:J.s,l:J.l})]}function L(X){var J=r(X).toHsl(),ie=J.h;return[r(X),r({h:(ie+72)%360,s:J.s,l:J.l}),r({h:(ie+216)%360,s:J.s,l:J.l})]}function z(X,J,ie){J=J||6,ie=ie||30;var ne=r(X).toHsl(),oe=360/ie,se=[r(X)];for(ne.h=(ne.h-(oe*J>>1)+720)%360;--J;)ne.h=(ne.h+oe)%360,se.push(r(ne));return se}function O(X,J){J=J||6;for(var ie=r(X).toHsv(),ne=ie.h,oe=ie.s,se=ie.v,me=[],ce=1/J;J--;)me.push(r({h:ne,s:oe,v:se})),se=(se+ce)%1;return me}r.mix=function(X,J,ie){ie=ie===0?0:ie||50;var ne=r(X).toRgb(),oe=r(J).toRgb(),se=ie/100,me={r:(oe.r-ne.r)*se+ne.r,g:(oe.g-ne.g)*se+ne.g,b:(oe.b-ne.b)*se+ne.b,a:(oe.a-ne.a)*se+ne.a};return r(me)},r.readability=function(X,J){var ie=r(X),ne=r(J);return(s.max(ie.getLuminance(),ne.getLuminance())+.05)/(s.min(ie.getLuminance(),ne.getLuminance())+.05)},r.isReadable=function(X,J,ie){var ne=r.readability(X,J),oe,se;switch(se=!1,oe=q(ie),oe.level+oe.size){case"AAsmall":case"AAAlarge":se=ne>=4.5;break;case"AAlarge":se=ne>=3;break;case"AAAsmall":se=ne>=7;break}return se},r.mostReadable=function(X,J,ie){var ne=null,oe=0,se,me,ce,pe;ie=ie||{},me=ie.includeFallbackColors,ce=ie.level,pe=ie.size;for(var xe=0;xe<J.length;xe++)se=r.readability(X,J[xe]),se>oe&&(oe=se,ne=r(J[xe]));return r.isReadable(X,ne,{level:ce,size:pe})||!me?ne:(ie.includeFallbackColors=!1,r.mostReadable(X,["#fff","#000"],ie))};var R=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=r.hexNames=H(R);function H(X){var J={};for(var ie in X)X.hasOwnProperty(ie)&&(J[X[ie]]=ie);return J}function B(X){return X=parseFloat(X),(isNaN(X)||X<0||X>1)&&(X=1),X}function $(X,J){Q(X)&&(X="100%");var ie=Z(X);return X=a(J,i(0,parseFloat(X))),ie&&(X=parseInt(X*J,10)/100),s.abs(X-J)<1e-6?1:X%J/parseFloat(J)}function W(X){return a(1,i(0,X))}function re(X){return parseInt(X,16)}function Q(X){return typeof X=="string"&&X.indexOf(".")!=-1&&parseFloat(X)===1}function Z(X){return typeof X=="string"&&X.indexOf("%")!=-1}function K(X){return X.length==1?"0"+X:""+X}function le(X){return X<=1&&(X=X*100+"%"),X}function fe(X){return s.round(parseFloat(X)*255).toString(16)}function ue(X){return re(X)/255}var V=function(){var X="[-\\+]?\\d+%?",J="[-\\+]?\\d*\\.\\d+%?",ie="(?:"+J+")|(?:"+X+")",ne="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",oe="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?";return{CSS_UNIT:new RegExp(ie),rgb:new RegExp("rgb"+ne),rgba:new RegExp("rgba"+oe),hsl:new RegExp("hsl"+ne),hsla:new RegExp("hsla"+oe),hsv:new RegExp("hsv"+ne),hsva:new RegExp("hsva"+oe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function j(X){return!!V.CSS_UNIT.exec(X)}function ee(X){X=X.replace(o,"").replace(h,"").toLowerCase();var J=!1;if(R[X])X=R[X],J=!0;else if(X=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ie;return(ie=V.rgb.exec(X))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=V.rgba.exec(X))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=V.hsl.exec(X))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=V.hsla.exec(X))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=V.hsv.exec(X))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=V.hsva.exec(X))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=V.hex8.exec(X))?{r:re(ie[1]),g:re(ie[2]),b:re(ie[3]),a:ue(ie[4]),format:J?"name":"hex8"}:(ie=V.hex6.exec(X))?{r:re(ie[1]),g:re(ie[2]),b:re(ie[3]),format:J?"name":"hex"}:(ie=V.hex4.exec(X))?{r:re(ie[1]+""+ie[1]),g:re(ie[2]+""+ie[2]),b:re(ie[3]+""+ie[3]),a:ue(ie[4]+""+ie[4]),format:J?"name":"hex8"}:(ie=V.hex3.exec(X))?{r:re(ie[1]+""+ie[1]),g:re(ie[2]+""+ie[2]),b:re(ie[3]+""+ie[3]),format:J?"name":"hex"}:!1}function q(X){var J,ie;return X=X||{level:"AA",size:"small"},J=(X.level||"AA").toUpperCase(),ie=(X.size||"small").toLowerCase(),J!=="AA"&&J!=="AAA"&&(J="AA"),ie!=="small"&&ie!=="large"&&(ie="small"),{level:J,size:ie}}typeof I!="undefined"&&I.exports?I.exports=r:window.tinycolor=r})(Math)},{}],313:[function(e,I,F){I.exports=h,I.exports.float32=I.exports.float=h,I.exports.fract32=I.exports.fract=o;var s=new Float32Array(1);function o(y,t){if(y.length){if(y instanceof Float32Array)return new Float32Array(y.length);t instanceof Float32Array||(t=h(y));for(var a=0,i=t.length;a<i;a++)t[a]=y[a]-t[a];return t}return h(y-h(y))}function h(y){return y.length?y instanceof Float32Array?y:new Float32Array(y):(s[0]=y,s[0])}},{}],314:[function(e,I,F){var s=e("parse-unit");I.exports=t;var o=96;function h(a,i){var n=s(getComputedStyle(a).getPropertyValue(i));return n[0]*t(n[1],a)}function y(a,i){var n=document.createElement("div");n.style["font-size"]="128"+a,i.appendChild(n);var r=h(n,"font-size")/128;return i.removeChild(n),r}function t(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),(i===window||i===document)&&(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return y(a,i);case"em":return h(i,"font-size");case"rem":return h(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return o;case"cm":return o/2.54;case"mm":return o/25.4;case"pt":return o/72;case"pc":return o/6}return 1}},{"parse-unit":251}],315:[function(e,I,F){(function(s,o){typeof F=="object"&&typeof I!="undefined"?o(F):(s=s||self,o(s.topojson=s.topojson||{}))})(this,function(s){function o(c){return c}function h(c){if(c==null)return o;var S,T,x=c.scale[0],w=c.scale[1],v=c.translate[0],C=c.translate[1];return function(M,E){E||(S=T=0);var L=2,z=M.length,O=new Array(z);for(O[0]=(S+=M[0])*x+v,O[1]=(T+=M[1])*w+C;L<z;)O[L]=M[L],++L;return O}}function y(c){var S=h(c.transform),T,x=1/0,w=x,v=-x,C=-x;function M(L){L=S(L),L[0]<x&&(x=L[0]),L[0]>v&&(v=L[0]),L[1]<w&&(w=L[1]),L[1]>C&&(C=L[1])}function E(L){switch(L.type){case"GeometryCollection":L.geometries.forEach(E);break;case"Point":M(L.coordinates);break;case"MultiPoint":L.coordinates.forEach(M);break}}c.arcs.forEach(function(L){for(var z=-1,O=L.length,R;++z<O;)R=S(L[z],z),R[0]<x&&(x=R[0]),R[0]>v&&(v=R[0]),R[1]<w&&(w=R[1]),R[1]>C&&(C=R[1])});for(T in c.objects)E(c.objects[T]);return[x,w,v,C]}function t(c,S){for(var T,x=c.length,w=x-S;w<--x;)T=c[w],c[w++]=c[x],c[x]=T}function a(c,S){return typeof S=="string"&&(S=c.objects[S]),S.type==="GeometryCollection"?{type:"FeatureCollection",features:S.geometries.map(function(T){return i(c,T)})}:i(c,S)}function i(c,S){var T=S.id,x=S.bbox,w=S.properties==null?{}:S.properties,v=n(c,S);return T==null&&x==null?{type:"Feature",properties:w,geometry:v}:x==null?{type:"Feature",id:T,properties:w,geometry:v}:{type:"Feature",id:T,bbox:x,properties:w,geometry:v}}function n(c,S){var T=h(c.transform),x=c.arcs;function w(z,O){O.length&&O.pop();for(var R=x[z<0?~z:z],D=0,H=R.length;D<H;++D)O.push(T(R[D],D));z<0&&t(O,H)}function v(z){return T(z)}function C(z){for(var O=[],R=0,D=z.length;R<D;++R)w(z[R],O);return O.length<2&&O.push(O[0]),O}function M(z){for(var O=C(z);O.length<4;)O.push(O[0]);return O}function E(z){return z.map(M)}function L(z){var O=z.type,R;switch(O){case"GeometryCollection":return{type:O,geometries:z.geometries.map(L)};case"Point":R=v(z.coordinates);break;case"MultiPoint":R=z.coordinates.map(v);break;case"LineString":R=C(z.arcs);break;case"MultiLineString":R=z.arcs.map(C);break;case"Polygon":R=E(z.arcs);break;case"MultiPolygon":R=z.arcs.map(E);break;default:return null}return{type:O,coordinates:R}}return L(S)}function r(c,S){var T={},x={},w={},v=[],C=-1;S.forEach(function(L,z){var O=c.arcs[L<0?~L:L],R;O.length<3&&!O[1][0]&&!O[1][1]&&(R=S[++C],S[C]=L,S[z]=R)}),S.forEach(function(L){var z=M(L),O=z[0],R=z[1],D,H;if(D=w[O])if(delete w[D.end],D.push(L),D.end=R,H=x[R]){delete x[H.start];var B=H===D?D:D.concat(H);x[B.start=D.start]=w[B.end=H.end]=B}else x[D.start]=w[D.end]=D;else if(D=x[R])if(delete x[D.start],D.unshift(L),D.start=O,H=w[O]){delete w[H.end];var $=H===D?D:H.concat(D);x[$.start=H.start]=w[$.end=D.end]=$}else x[D.start]=w[D.end]=D;else D=[L],x[D.start=O]=w[D.end=R]=D});function M(L){var z=c.arcs[L<0?~L:L],O=z[0],R;return c.transform?(R=[0,0],z.forEach(function(D){R[0]+=D[0],R[1]+=D[1]})):R=z[z.length-1],L<0?[R,O]:[O,R]}function E(L,z){for(var O in L){var R=L[O];delete z[R.start],delete R.start,delete R.end,R.forEach(function(D){T[D<0?~D:D]=1}),v.push(R)}}return E(w,x),E(x,w),S.forEach(function(L){T[L<0?~L:L]||v.push([L])}),v}function f(c){return n(c,u.apply(this,arguments))}function u(c,S,T){var x,w,v;if(arguments.length>1)x=l(c,S,T);else for(w=0,x=new Array(v=c.arcs.length);w<v;++w)x[w]=w;return{type:"MultiLineString",arcs:r(c,x)}}function l(c,S,T){var x=[],w=[],v;function C(O){var R=O<0?~O:O;(w[R]||(w[R]=[])).push({i:O,g:v})}function M(O){O.forEach(C)}function E(O){O.forEach(M)}function L(O){O.forEach(E)}function z(O){switch(v=O,O.type){case"GeometryCollection":O.geometries.forEach(z);break;case"LineString":M(O.arcs);break;case"MultiLineString":case"Polygon":E(O.arcs);break;case"MultiPolygon":L(O.arcs);break}}return z(S),w.forEach(T==null?function(O){x.push(O[0].i)}:function(O){T(O[0].g,O[O.length-1].g)&&x.push(O[0].i)}),x}function m(c){for(var S=-1,T=c.length,x,w=c[T-1],v=0;++S<T;)x=w,w=c[S],v+=x[0]*w[1]-x[1]*w[0];return Math.abs(v)}function d(c){return n(c,b.apply(this,arguments))}function b(c,S){var T={},x=[],w=[];S.forEach(v);function v(E){switch(E.type){case"GeometryCollection":E.geometries.forEach(v);break;case"Polygon":C(E.arcs);break;case"MultiPolygon":E.arcs.forEach(C);break}}function C(E){E.forEach(function(L){L.forEach(function(z){(T[z=z<0?~z:z]||(T[z]=[])).push(E)})}),x.push(E)}function M(E){return m(n(c,{type:"Polygon",arcs:[E]}).coordinates[0])}return x.forEach(function(E){if(!E._){var L=[],z=[E];for(E._=1,w.push(L);E=z.pop();)L.push(E),E.forEach(function(O){O.forEach(function(R){T[R<0?~R:R].forEach(function(D){D._||(D._=1,z.push(D))})})})}}),x.forEach(function(E){delete E._}),{type:"MultiPolygon",arcs:w.map(function(E){var L=[],z;if(E.forEach(function(B){B.forEach(function($){$.forEach(function(W){T[W<0?~W:W].length<2&&L.push(W)})})}),L=r(c,L),(z=L.length)>1)for(var O=1,R=M(L[0]),D,H;O<z;++O)(D=M(L[O]))>R&&(H=L[0],L[0]=L[O],L[O]=H,R=D);return L}).filter(function(E){return E.length>0})}}function g(c,S){for(var T=0,x=c.length;T<x;){var w=T+x>>>1;c[w]<S?T=w+1:x=w}return T}function _(c){var S={},T=c.map(function(){return[]});function x(B,$){B.forEach(function(W){W<0&&(W=~W);var re=S[W];re?re.push($):S[W]=[$]})}function w(B,$){B.forEach(function(W){x(W,$)})}function v(B,$){B.type==="GeometryCollection"?B.geometries.forEach(function(W){v(W,$)}):B.type in C&&C[B.type](B.arcs,$)}var C={LineString:x,MultiLineString:w,Polygon:w,MultiPolygon:function(B,$){B.forEach(function(W){w(W,$)})}};c.forEach(v);for(var M in S)for(var E=S[M],L=E.length,z=0;z<L;++z)for(var O=z+1;O<L;++O){var R=E[z],D=E[O],H;(H=T[R])[M=g(H,D)]!==D&&H.splice(M,0,D),(H=T[D])[M=g(H,R)]!==R&&H.splice(M,0,R)}return T}function p(c){if(c==null)return o;var S,T,x=c.scale[0],w=c.scale[1],v=c.translate[0],C=c.translate[1];return function(M,E){E||(S=T=0);var L=2,z=M.length,O=new Array(z),R=Math.round((M[0]-v)/x),D=Math.round((M[1]-C)/w);for(O[0]=R-S,S=R,O[1]=D-T,T=D;L<z;)O[L]=M[L],++L;return O}}function A(c,S){if(c.transform)throw new Error("already quantized");if(!S||!S.scale){if(!((C=Math.floor(S))>=2))throw new Error("n must be \u22652");E=c.bbox||y(c);var T=E[0],x=E[1],w=E[2],v=E[3],C;S={scale:[w-T?(w-T)/(C-1):1,v-x?(v-x)/(C-1):1],translate:[T,x]}}else E=c.bbox;var M=p(S),E,L,z=c.objects,O={};function R(B){return M(B)}function D(B){var $;switch(B.type){case"GeometryCollection":$={type:"GeometryCollection",geometries:B.geometries.map(D)};break;case"Point":$={type:"Point",coordinates:R(B.coordinates)};break;case"MultiPoint":$={type:"MultiPoint",coordinates:B.coordinates.map(R)};break;default:return B}return B.id!=null&&($.id=B.id),B.bbox!=null&&($.bbox=B.bbox),B.properties!=null&&($.properties=B.properties),$}function H(B){var $=0,W=1,re=B.length,Q,Z=new Array(re);for(Z[0]=M(B[0],0);++$<re;)((Q=M(B[$],$))[0]||Q[1])&&(Z[W++]=Q);return W===1&&(Z[W++]=[0,0]),Z.length=W,Z}for(L in z)O[L]=D(z[L]);return{type:"Topology",bbox:E,transform:S,objects:O,arcs:c.arcs.map(H)}}s.bbox=y,s.feature=a,s.merge=d,s.mergeArcs=b,s.mesh=f,s.meshArcs=u,s.neighbors=_,s.quantize=A,s.transform=h,s.untransform=p,Object.defineProperty(s,"__esModule",{value:!0})})},{}],316:[function(e,I,F){var s=e("../prototype/is");I.exports=function(o){if(typeof o!="function"||!hasOwnProperty.call(o,"length"))return!1;try{if(typeof o.length!="number"||typeof o.call!="function"||typeof o.apply!="function")return!1}catch{return!1}return!s(o)}},{"../prototype/is":323}],317:[function(e,I,F){var s=e("../value/is"),o=e("../object/is"),h=e("../string/coerce"),y=e("./to-short-string"),t=function(a,i){return a.replace("%v",y(i))};I.exports=function(a,i,n){if(!o(n))throw new TypeError(t(i,a));if(!s(a)){if("default"in n)return n.default;if(n.isOptional)return null}var r=h(n.errorMessage);throw s(r)||(r=i),new TypeError(t(r,a))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(e,I,F){I.exports=function(s){try{return s.toString()}catch{try{return String(s)}catch{return null}}}},{}],319:[function(e,I,F){var s=e("./safe-to-string"),o=/[\n\r\u2028\u2029]/g;I.exports=function(h){var y=s(h);return y===null?"<Non-coercible to string value>":(y.length>100&&(y=y.slice(0,99)+"\u2026"),y=y.replace(o,function(t){switch(t){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),y)}},{"./safe-to-string":318}],320:[function(e,I,F){var s=e("../value/is"),o={object:!0,function:!0,undefined:!0};I.exports=function(h){return s(h)?hasOwnProperty.call(o,typeof h):!1}},{"../value/is":326}],321:[function(e,I,F){var s=e("../lib/resolve-exception"),o=e("./is");I.exports=function(h){return o(h)?h:s(h,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(e,I,F){var s=e("../function/is"),o=/^\s*class[\s{/}]/,h=Function.prototype.toString;I.exports=function(y){return!(!s(y)||o.test(h.call(y)))}},{"../function/is":316}],323:[function(e,I,F){var s=e("../object/is");I.exports=function(o){if(!s(o))return!1;try{return o.constructor?o.constructor.prototype===o:!1}catch{return!1}}},{"../object/is":320}],324:[function(e,I,F){var s=e("../value/is"),o=e("../object/is"),h=Object.prototype.toString;I.exports=function(y){if(!s(y))return null;if(o(y)){var t=y.toString;if(typeof t!="function"||t===h)return null}try{return""+y}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(e,I,F){var s=e("../lib/resolve-exception"),o=e("./is");I.exports=function(h){return o(h)?h:s(h,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(e,I,F){var s=void 0;I.exports=function(o){return o!==s&&o!==null}},{}],327:[function(e,I,F){(function(s){(function(){var o=e("bit-twiddle"),h=e("dup"),y=e("buffer").Buffer;s.__TYPEDARRAY_POOL||(s.__TYPEDARRAY_POOL={UINT8:h([32,0]),UINT16:h([32,0]),UINT32:h([32,0]),BIGUINT64:h([32,0]),INT8:h([32,0]),INT16:h([32,0]),INT32:h([32,0]),BIGINT64:h([32,0]),FLOAT:h([32,0]),DOUBLE:h([32,0]),DATA:h([32,0]),UINT8C:h([32,0]),BUFFER:h([32,0])});var t=typeof Uint8ClampedArray!="undefined",a=typeof BigUint64Array!="undefined",i=typeof BigInt64Array!="undefined",n=s.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=h([32,0])),n.BIGUINT64||(n.BIGUINT64=h([32,0])),n.BIGINT64||(n.BIGINT64=h([32,0])),n.BUFFER||(n.BUFFER=h([32,0]));var r=n.DATA,f=n.BUFFER;F.free=function(E){if(y.isBuffer(E))f[o.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var L=E.length||E.byteLength,z=o.log2(L)|0;r[z].push(E)}};function u(M){if(!!M){var E=M.length||M.byteLength,L=o.log2(E);r[L].push(M)}}function l(M){u(M.buffer)}F.freeUint8=F.freeUint16=F.freeUint32=F.freeBigUint64=F.freeInt8=F.freeInt16=F.freeInt32=F.freeBigInt64=F.freeFloat32=F.freeFloat=F.freeFloat64=F.freeDouble=F.freeUint8Clamped=F.freeDataView=l,F.freeArrayBuffer=u,F.freeBuffer=function(E){f[o.log2(E.length)].push(E)},F.malloc=function(E,L){if(L===void 0||L==="arraybuffer")return m(E);switch(L){case"uint8":return d(E);case"uint16":return b(E);case"uint32":return g(E);case"int8":return _(E);case"int16":return p(E);case"int32":return A(E);case"float":case"float32":return c(E);case"double":case"float64":return S(E);case"uint8_clamped":return T(E);case"bigint64":return w(E);case"biguint64":return x(E);case"buffer":return C(E);case"data":case"dataview":return v(E);default:return null}return null};function m(E){var E=o.nextPow2(E),L=o.log2(E),z=r[L];return z.length>0?z.pop():new ArrayBuffer(E)}F.mallocArrayBuffer=m;function d(M){return new Uint8Array(m(M),0,M)}F.mallocUint8=d;function b(M){return new Uint16Array(m(2*M),0,M)}F.mallocUint16=b;function g(M){return new Uint32Array(m(4*M),0,M)}F.mallocUint32=g;function _(M){return new Int8Array(m(M),0,M)}F.mallocInt8=_;function p(M){return new Int16Array(m(2*M),0,M)}F.mallocInt16=p;function A(M){return new Int32Array(m(4*M),0,M)}F.mallocInt32=A;function c(M){return new Float32Array(m(4*M),0,M)}F.mallocFloat32=F.mallocFloat=c;function S(M){return new Float64Array(m(8*M),0,M)}F.mallocFloat64=F.mallocDouble=S;function T(M){return t?new Uint8ClampedArray(m(M),0,M):d(M)}F.mallocUint8Clamped=T;function x(M){return a?new BigUint64Array(m(8*M),0,M):null}F.mallocBigUint64=x;function w(M){return i?new BigInt64Array(m(8*M),0,M):null}F.mallocBigInt64=w;function v(M){return new DataView(m(M),0,M)}F.mallocDataView=v;function C(M){M=o.nextPow2(M);var E=o.log2(M),L=f[E];return L.length>0?L.pop():new y(M)}F.mallocBuffer=C,F.clearCache=function(){for(var E=0;E<32;++E)n.UINT8[E].length=0,n.UINT16[E].length=0,n.UINT32[E].length=0,n.INT8[E].length=0,n.INT16[E].length=0,n.INT32[E].length=0,n.FLOAT[E].length=0,n.DOUBLE[E].length=0,n.BIGUINT64[E].length=0,n.BIGINT64[E].length=0,n.UINT8C[E].length=0,r[E].length=0,f[E].length=0}}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(e,I,F){var s=/[\'\"]/;I.exports=function(h){return h?(s.test(h.charAt(0))&&(h=h.substr(1)),s.test(h.charAt(h.length-1))&&(h=h.substr(0,h.length-1)),h):""}},{}],329:[function(e,I,F){I.exports=function(o,h,y){Array.isArray(y)||(y=[].slice.call(arguments,2));for(var t=0,a=y.length;t<a;t++){var i=y[t];for(var n in i)if(!(h[n]!==void 0&&!Array.isArray(h[n])&&o[n]===h[n])&&n in h){var r;if(i[n]===!0)r=h[n];else{if(i[n]===!1)continue;if(typeof i[n]=="function"&&(r=i[n](h[n],o,h),r===void 0))continue}o[n]=r}}return o}},{}],330:[function(e,I,F){(function(s){(function(){I.exports=o;function o(y,t){if(h("noDeprecation"))return y;var a=!1;function i(){if(!a){if(h("throwDeprecation"))throw new Error(t);h("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return y.apply(this,arguments)}return i}function h(y){try{if(!s.localStorage)return!1}catch{return!1}var t=s.localStorage[y];return t==null?!1:String(t).toLowerCase()==="true"}}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],331:[function(e,I,F){var s=e("get-canvas-context");I.exports=function(h){return s("webgl",h)}},{"get-canvas-context":194}],332:[function(e,I,F){var s=e("../main"),o=e("object-assign"),h=s.instance();function y(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}y.prototype=new s.baseCalendar,o(y.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(m,d){if(typeof m=="string"){var b=m.match(a);return b?b[0]:""}var g=this._validateYear(m),_=m.month(),p=""+this.toChineseMonth(g,_);return d&&p.length<2&&(p="0"+p),this.isIntercalaryMonth(g,_)&&(p+="i"),p},monthNames:function(m){if(typeof m=="string"){var d=m.match(i);return d?d[0]:""}var b=this._validateYear(m),g=m.month(),_=this.toChineseMonth(b,g),p=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][_-1];return this.isIntercalaryMonth(b,g)&&(p="\u95F0"+p),p},monthNamesShort:function(m){if(typeof m=="string"){var d=m.match(n);return d?d[0]:""}var b=this._validateYear(m),g=m.month(),_=this.toChineseMonth(b,g),p=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][_-1];return this.isIntercalaryMonth(b,g)&&(p="\u95F0"+p),p},parseMonth:function(m,d){m=this._validateYear(m);var b=parseInt(d),g;if(isNaN(b))d[0]==="\u95F0"&&(g=!0,d=d.substring(1)),d[d.length-1]==="\u6708"&&(d=d.substring(0,d.length-1)),b=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(d);else{var _=d[d.length-1];g=_==="i"||_==="I"}var p=this.toMonthIndex(m,b,g);return p},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(m,d){if(m.year&&(m=m.year()),typeof m!="number"||m<1888||m>2111)throw d.replace(/\{0\}/,this.local.name);return m},toMonthIndex:function(m,d,b){var g=this.intercalaryMonth(m),_=b&&d!==g;if(_||d<1||d>12)throw s.local.invalidMonth.replace(/\{0\}/,this.local.name);var p;return g?!b&&d<=g?p=d-1:p=d:p=d-1,p},toChineseMonth:function(m,d){m.year&&(m=m.year(),d=m.month());var b=this.intercalaryMonth(m),g=b?12:11;if(d<0||d>g)throw s.local.invalidMonth.replace(/\{0\}/,this.local.name);var _;return b?d<b?_=d+1:_=d:_=d+1,_},intercalaryMonth:function(m){m=this._validateYear(m);var d=r[m-r[0]],b=d>>13;return b},isIntercalaryMonth:function(m,d){m.year&&(m=m.year(),d=m.month());var b=this.intercalaryMonth(m);return!!b&&b===d},leapYear:function(m){return this.intercalaryMonth(m)!==0},weekOfYear:function(m,d,b){var g=this._validateYear(m,s.local.invalidyear),_=f[g-f[0]],p=_>>9&4095,A=_>>5&15,c=_&31,S;S=h.newDate(p,A,c),S.add(4-(S.dayOfWeek()||7),"d");var T=this.toJD(m,d,b)-S.toJD();return 1+Math.floor(T/7)},monthsInYear:function(m){return this.leapYear(m)?13:12},daysInMonth:function(m,d){m.year&&(d=m.month(),m=m.year()),m=this._validateYear(m);var b=r[m-r[0]],g=b>>13,_=g?12:11;if(d>_)throw s.local.invalidMonth.replace(/\{0\}/,this.local.name);var p=b&1<<12-d?30:29;return p},weekDay:function(m,d,b){return(this.dayOfWeek(m,d,b)||7)<6},toJD:function(m,d,b){var g=this._validate(m,p,b,s.local.invalidDate);m=this._validateYear(g.year()),d=g.month(),b=g.day();var _=this.isIntercalaryMonth(m,d),p=this.toChineseMonth(m,d),A=l(m,p,b,_);return h.toJD(A.year,A.month,A.day)},fromJD:function(m){var d=h.fromJD(m),b=u(d.year(),d.month(),d.day()),g=this.toMonthIndex(b.year,b.month,b.isIntercalary);return this.newDate(b.year,g,b.day)},fromString:function(m){var d=m.match(t),b=this._validateYear(+d[1]),g=+d[2],_=!!d[3],p=this.toMonthIndex(b,g,_),A=+d[4];return this.newDate(b,p,A)},add:function(m,d,b){var g=m.year(),_=m.month(),p=this.isIntercalaryMonth(g,_),A=this.toChineseMonth(g,_),c=Object.getPrototypeOf(y.prototype).add.call(this,m,d,b);if(b==="y"){var S=c.year(),T=c.month(),x=this.isIntercalaryMonth(S,A),w=p&&x?this.toMonthIndex(S,A,!0):this.toMonthIndex(S,A,!1);w!==T&&c.month(w)}return c}});var t=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,i=/^闰?十?[一二三四五六七八九]?月/m,n=/^闰?十?[一二三四五六七八九]?/m;s.calendars.chinese=y;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function u(m,d,b,g){var _,p;if(typeof m=="object")_=m,p=d||{};else{var A=typeof m=="number"&&m>=1888&&m<=2111;if(!A)throw new Error("Solar year outside range 1888-2111");var c=typeof d=="number"&&d>=1&&d<=12;if(!c)throw new Error("Solar month outside range 1 - 12");var S=typeof b=="number"&&b>=1&&b<=31;if(!S)throw new Error("Solar day outside range 1 - 31");_={year:m,month:d,day:b},p=g||{}}var T=f[_.year-f[0]],x=_.year<<9|_.month<<5|_.day;p.year=x>=T?_.year:_.year-1,T=f[p.year-f[0]];var w=T>>9&4095,v=T>>5&15,C=T&31,M,E=new Date(w,v-1,C),L=new Date(_.year,_.month-1,_.day);M=Math.round((L-E)/(24*3600*1e3));var z=r[p.year-r[0]],O;for(O=0;O<13;O++){var R=z&1<<12-O?30:29;if(M<R)break;M-=R}var D=z>>13;return!D||O<D?(p.isIntercalary=!1,p.month=1+O):O===D?(p.isIntercalary=!0,p.month=O):(p.isIntercalary=!1,p.month=O),p.day=1+M,p}function l(m,d,b,g,_){var p,A;if(typeof m=="object")A=m,p=d||{};else{var c=typeof m=="number"&&m>=1888&&m<=2111;if(!c)throw new Error("Lunar year outside range 1888-2111");var S=typeof d=="number"&&d>=1&&d<=12;if(!S)throw new Error("Lunar month outside range 1 - 12");var T=typeof b=="number"&&b>=1&&b<=30;if(!T)throw new Error("Lunar day outside range 1 - 30");var x;typeof g=="object"?(x=!1,p=g):(x=!!g,p=_||{}),A={year:m,month:d,day:b,isIntercalary:x}}var w;w=A.day-1;var v=r[A.year-r[0]],C=v>>13,M;C&&(A.month>C||A.isIntercalary)?M=A.month:M=A.month-1;for(var E=0;E<M;E++){var L=v&1<<12-E?30:29;w+=L}var z=f[A.year-f[0]],O=z>>9&4095,R=z>>5&15,D=z&31,H=new Date(O,R-1,D+w);return p.year=H.getFullYear(),p.month=1+H.getMonth(),p.day=H.getDate(),p}},{"../main":346,"object-assign":247}],333:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,s.local.invalidYear),a=t.year()+(t.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),13},weekOfYear:function(y,t,a){var i=this.newDate(y,t,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(y,t){var a=this._validate(y,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(y,t,a){return(this.dayOfWeek(y,t,a)||7)<6},toJD:function(y,t,a){var i=this._validate(y,t,a,s.local.invalidDate);return y=i.year(),y<0&&y++,i.day()+(i.month()-1)*30+(y-1)*365+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var t=Math.floor(y)+.5-this.jdEpoch,a=Math.floor((t-Math.floor((t+366)/1461))/365)+1;a<=0&&a--,t=Math.floor(y)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(t/30)+1,n=t-(i-1)*30+1;return this.newDate(a,i,n)}}),s.calendars.coptic=h},{"../main":346,"object-assign":247}],334:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear),!1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear),13},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear),400},weekOfYear:function(t,a,i){var n=this.newDate(t,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,s.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(t,a,i){var n=this._validate(t,a,i,s.local.invalidDate);return(n.day()+1)%8},weekDay:function(t,a,i){var n=this.dayOfWeek(t,a,i);return n>=2&&n<=6},extraInfo:function(t,a,i){var n=this._validate(t,a,i,s.local.invalidDate);return{century:y[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(t,a,i){var n=this._validate(t,a,i,s.local.invalidDate);return t=n.year()+(n.year()<0?1:0),a=n.month(),i=n.day(),i+(a>1?16:0)+(a>2?(a-2)*32:0)+(t-1)*400+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(t/400)+1;t-=(a-1)*400,t+=t>15?16:0;var i=Math.floor(t/32)+1,n=t-(i-1)*32+1;return this.newDate(a<=0?a-1:a,i,n)}});var y={20:"Fruitbat",21:"Anchovy"};s.calendars.discworld=h},{"../main":346,"object-assign":247}],335:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,s.local.invalidYear),a=t.year()+(t.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),13},weekOfYear:function(y,t,a){var i=this.newDate(y,t,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(y,t){var a=this._validate(y,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(y,t,a){return(this.dayOfWeek(y,t,a)||7)<6},toJD:function(y,t,a){var i=this._validate(y,t,a,s.local.invalidDate);return y=i.year(),y<0&&y++,i.day()+(i.month()-1)*30+(y-1)*365+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var t=Math.floor(y)+.5-this.jdEpoch,a=Math.floor((t-Math.floor((t+366)/1461))/365)+1;a<=0&&a--,t=Math.floor(y)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(t/30)+1,n=t-(i-1)*30+1;return this.newDate(a,i,n)}}),s.calendars.ethiopian=h},{"../main":346,"object-assign":247}],336:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(t){return t=t<0?t+1:t,y(t*7+1,19)<7},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear),this._leapYear(t.year?t.year():t)?13:12},weekOfYear:function(t,a,i){var n=this.newDate(t,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear);return t=a.year(),this.toJD(t===-1?1:t+1,7,1)-this.toJD(t,7,1)},daysInMonth:function(t,a){return t.year&&(a=t.month(),t=t.year()),this._validate(t,a,this.minDay,s.local.invalidMonth),a===12&&this.leapYear(t)||a===8&&y(this.daysInYear(t),10)===5?30:a===9&&y(this.daysInYear(t),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(t,a,i){return this.dayOfWeek(t,a,i)!==6},extraInfo:function(t,a,i){var n=this._validate(t,a,i,s.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(t,a,i){var n=this._validate(t,a,i,s.local.invalidDate);t=n.year(),a=n.month(),i=n.day();var r=t<=0?t+1:t,f=this.jdEpoch+this._delay1(r)+this._delay2(r)+i+1;if(a<7){for(var u=7;u<=this.monthsInYear(t);u++)f+=this.daysInMonth(t,u);for(var u=1;u<a;u++)f+=this.daysInMonth(t,u)}else for(var u=7;u<a;u++)f+=this.daysInMonth(t,u);return f},_delay1:function(t){var a=Math.floor((235*t-234)/19),i=12084+13753*a,n=a*29+Math.floor(i/25920);return y(3*(n+1),7)<3&&n++,n},_delay2:function(t){var a=this._delay1(t-1),i=this._delay1(t),n=this._delay1(t+1);return n-i===356?2:i-a===382?1:0},fromJD:function(t){t=Math.floor(t)+.5;for(var a=Math.floor((t-this.jdEpoch)*98496/35975351)-1;t>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var i=t<this.toJD(a,1,1)?7:1;t>this.toJD(a,i,this.daysInMonth(a,i));)i++;var n=t-this.toJD(a,i,1)+1;return this.newDate(a,i,n)}});function y(t,a){return t-a*Math.floor(t/a)}s.calendars.hebrew=h},{"../main":346,"object-assign":247}],337:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(y){var t=this._validate(y,this.minMonth,this.minDay,s.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(y,t,a){var i=this.newDate(y,t,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(y){return this.leapYear(y)?355:354},daysInMonth:function(y,t){var a=this._validate(y,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(y,t,a){return this.dayOfWeek(y,t,a)!==5},toJD:function(y,t,a){var i=this._validate(y,t,a,s.local.invalidDate);return y=i.year(),t=i.month(),a=i.day(),y=y<=0?y+1:y,a+Math.ceil(29.5*(t-1))+(y-1)*354+Math.floor((3+11*y)/30)+this.jdEpoch-1},fromJD:function(y){y=Math.floor(y)+.5;var t=Math.floor((30*(y-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var a=Math.min(12,Math.ceil((y-29-this.toJD(t,1,1))/29.5)+1),i=y-this.toJD(t,a,1)+1;return this.newDate(t,a,i)}}),s.calendars.islamic=h},{"../main":346,"object-assign":247}],338:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,s.local.invalidYear),a=t.year()<0?t.year()+1:t.year();return a%4===0},weekOfYear:function(y,t,a){var i=this.newDate(y,t,a);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(y,t){var a=this._validate(y,t,this.minDay,s.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(y,t,a){return(this.dayOfWeek(y,t,a)||7)<6},toJD:function(y,t,a){var i=this._validate(y,t,a,s.local.invalidDate);return y=i.year(),t=i.month(),a=i.day(),y<0&&y++,t<=2&&(y--,t+=12),Math.floor(365.25*(y+4716))+Math.floor(30.6001*(t+1))+a-1524.5},fromJD:function(y){var t=Math.floor(y+.5),a=t+1524,i=Math.floor((a-122.1)/365.25),n=Math.floor(365.25*i),r=Math.floor((a-n)/30.6001),f=r-Math.floor(r<14?1:13),u=i-Math.floor(f>2?4716:4715),l=a-n-Math.floor(30.6001*r);return u<=0&&u--,this.newDate(u,f,l)}}),s.calendars.julian=h},{"../main":346,"object-assign":247}],339:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,s.local.invalidYear),!1},formatYear:function(a){var i=this._validate(a,this.minMonth,this.minDay,s.local.invalidYear);a=i.year();var n=Math.floor(a/400);a=a%400,a+=a<0?400:0;var r=Math.floor(a/20);return n+"."+r+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var i=0,n=0;n<a.length;n++){var r=parseInt(a[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";i=i*20+r}return i},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,s.local.invalidYear),18},weekOfYear:function(a,i,n){return this._validate(a,i,n,s.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,s.local.invalidYear),360},daysInMonth:function(a,i){return this._validate(a,i,this.minDay,s.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,i,n){var r=this._validate(a,i,n,s.local.invalidDate);return r.day()},weekDay:function(a,i,n){return this._validate(a,i,n,s.local.invalidDate),!0},extraInfo:function(a,i,n){var r=this._validate(a,i,n,s.local.invalidDate),f=r.toJD(),u=this._toHaab(f),l=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[u[0]-1],haabMonth:u[0],haabDay:u[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(a){a-=this.jdEpoch;var i=y(a+8+(18-1)*20,365);return[Math.floor(i/20)+1,y(i,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[t(a+20,20),t(a+4,13)]},toJD:function(a,i,n){var r=this._validate(a,i,n,s.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var i=Math.floor(a/360);a=a%360,a+=a<0?360:0;var n=Math.floor(a/20),r=a%20;return this.newDate(i,n,r)}});function y(a,i){return a-i*Math.floor(a/i)}function t(a,i){return y(a-1,i)+1}s.calendars.mayan=h},{"../main":346,"object-assign":247}],340:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar;var y=s.instance("gregorian");o(h.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return y.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(t,a,i){var n=this.newDate(t,a,i);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,s.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(t,a,i){return(this.dayOfWeek(t,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,s.local.invalidMonth),r=n.year();r<0&&r++;for(var f=n.day(),u=1;u<n.month();u++)f+=this.daysPerMonth[u-1];return f+y.toJD(r+1468,3,13)},fromJD:function(t){t=Math.floor(t+.5);for(var a=Math.floor((t-(this.jdEpoch-1))/366);t>=this.toJD(a+1,1,1);)a++;for(var i=t-Math.floor(this.toJD(a,1,1)+.5)+1,n=1;i>this.daysInMonth(a,n);)i-=this.daysInMonth(a,n),n++;return this.newDate(a,n,i)}}),s.calendars.nanakshahi=h},{"../main":346,"object-assign":247}],341:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(y){return this.daysInYear(y)!==this.daysPerYear},weekOfYear:function(y,t,a){var i=this.newDate(y,t,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(y){var t=this._validate(y,this.minMonth,this.minDay,s.local.invalidYear);if(y=t.year(),typeof this.NEPALI_CALENDAR_DATA[y]=="undefined")return this.daysPerYear;for(var a=0,i=this.minMonth;i<=12;i++)a+=this.NEPALI_CALENDAR_DATA[y][i];return a},daysInMonth:function(y,t){return y.year&&(t=y.month(),y=y.year()),this._validate(y,t,this.minDay,s.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[y]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[y][t]},weekDay:function(y,t,a){return this.dayOfWeek(y,t,a)!==6},toJD:function(y,t,a){var i=this._validate(y,t,a,s.local.invalidDate);y=i.year(),t=i.month(),a=i.day();var n=s.instance(),r=0,f=t,u=y;this._createMissingCalendarData(y);var l=y-(f>9||f===9&&a>=this.NEPALI_CALENDAR_DATA[u][0]?56:57);for(t!==9&&(r=a,f--);f!==9;)f<=0&&(f=12,u--),r+=this.NEPALI_CALENDAR_DATA[u][f],f--;return t===9?(r+=a-this.NEPALI_CALENDAR_DATA[u][0],r<0&&(r+=n.daysInYear(l))):r+=this.NEPALI_CALENDAR_DATA[u][9]-this.NEPALI_CALENDAR_DATA[u][0],n.newDate(l,1,1).add(r,"d").toJD()},fromJD:function(y){var t=s.instance(),a=t.fromJD(y),i=a.year(),n=a.dayOfYear(),r=i+56;this._createMissingCalendarData(r);for(var f=9,u=this.NEPALI_CALENDAR_DATA[r][0],l=this.NEPALI_CALENDAR_DATA[r][f]-u+1;n>l;)f++,f>12&&(f=1,r++),l+=this.NEPALI_CALENDAR_DATA[r][f];var m=this.NEPALI_CALENDAR_DATA[r][f]-(l-n);return this.newDate(r,f,m)},_createMissingCalendarData:function(y){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var a=y-1;a<y+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]=="undefined"&&(this.NEPALI_CALENDAR_DATA[a]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),s.calendars.nepali=h},{"../main":346,"object-assign":247}],342:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(t,a,i){var n=this.newDate(t,a,i);return n.add(-((n.dayOfWeek()+1)%7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,s.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(t,a,i){return this.dayOfWeek(t,a,i)!==5},toJD:function(t,a,i){var n=this._validate(t,a,i,s.local.invalidDate);t=n.year(),a=n.month(),i=n.day();var r=t-(t>=0?474:473),f=474+y(r,2820);return i+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((f*682-110)/2816)+(f-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var a=t-this.toJD(475,1,1),i=Math.floor(a/1029983),n=y(a,1029983),r=2820;if(n!==1029982){var f=Math.floor(n/366),u=y(n,366);r=Math.floor((2134*f+2816*u+2815)/1028522)+f+1}var l=r+2820*i+474;l=l<=0?l-1:l;var m=t-this.toJD(l,1,1)+1,d=m<=186?Math.ceil(m/31):Math.ceil((m-6)/30),b=t-this.toJD(l,d,1)+1;return this.newDate(l,d,b)}});function y(t,a){return t-a*Math.floor(t/a)}s.calendars.persian=h,s.calendars.jalali=h},{"../main":346,"object-assign":247}],343:[function(e,I,F){var s=e("../main"),o=e("object-assign"),h=s.instance();function y(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}y.prototype=new s.baseCalendar,o(y.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,s.local.invalidYear),i=this._t2gYear(a.year());return h.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,s.local.invalidYear),r=this._t2gYear(n.year());return h.weekOfYear(r,n.month(),n.day())},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,s.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(t,a,i){return(this.dayOfWeek(t,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,s.local.invalidDate),r=this._t2gYear(n.year());return h.toJD(r,n.month(),n.day())},fromJD:function(t){var a=h.fromJD(t),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)},_g2tYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)}}),s.calendars.taiwan=y},{"../main":346,"object-assign":247}],344:[function(e,I,F){var s=e("../main"),o=e("object-assign"),h=s.instance();function y(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}y.prototype=new s.baseCalendar,o(y.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,s.local.invalidYear),i=this._t2gYear(a.year());return h.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,s.local.invalidYear),r=this._t2gYear(n.year());return h.weekOfYear(r,n.month(),n.day())},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,s.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(t,a,i){return(this.dayOfWeek(t,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,s.local.invalidDate),r=this._t2gYear(n.year());return h.toJD(r,n.month(),n.day())},fromJD:function(t){var a=h.fromJD(t),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)},_g2tYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)}}),s.calendars.thai=y},{"../main":346,"object-assign":247}],345:[function(e,I,F){var s=e("../main"),o=e("object-assign");function h(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}h.prototype=new s.baseCalendar,o(h.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(t,a,i){var n=this.newDate(t,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(t){for(var a=0,i=1;i<=12;i++)a+=this.daysInMonth(t,i);return a},daysInMonth:function(t,a){for(var i=this._validate(t,a,this.minDay,s.local.invalidMonth),n=i.toJD()-24e5+.5,r=0,f=0;f<y.length;f++){if(y[f]>n)return y[r]-y[r-1];r++}return 30},weekDay:function(t,a,i){return this.dayOfWeek(t,a,i)!==5},toJD:function(t,a,i){var n=this._validate(t,a,i,s.local.invalidDate),r=12*(n.year()-1)+n.month()-15292,f=n.day()+y[r-1]-1;return f+24e5-.5},fromJD:function(t){for(var a=t-24e5+.5,i=0,n=0;n<y.length&&!(y[n]>a);n++)i++;var r=i+15292,f=Math.floor((r-1)/12),u=f+1,l=r-12*f,m=a-y[i-1]+1;return this.newDate(u,l,m)},isValid:function(t,a,i){var n=s.baseCalendar.prototype.isValid.apply(this,arguments);return n&&(t=t.year!=null?t.year:t,n=t>=1276&&t<=1500),n},_validate:function(t,a,i,n){var r=s.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw n.replace(/\{0\}/,this.local.name);return r}}),s.calendars.ummalqura=h;var y=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(e,I,F){var s=e("object-assign");function o(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}s(o.prototype,{instance:function(n,r){n=(n||"gregorian").toLowerCase(),r=r||"";var f=this._localCals[n+"-"+r];if(!f&&this.calendars[n]&&(f=new this.calendars[n](r),this._localCals[n+"-"+r]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,n);return f},newDate:function(n,r,f,u,l){return u=(n!=null&&n.year?n.calendar():typeof u=="string"?this.instance(u,l):u)||this.instance(),u.newDate(n,r,f)},substituteDigits:function(n){return function(r){return(r+"").replace(/[0-9]/g,function(f){return n[f]})}},substituteChineseDigits:function(n,r){return function(f){for(var u="",l=0;f>0;){var m=f%10;u=(m===0?"":n[m]+r[l])+u,l++,f=Math.floor(f/10)}return u.indexOf(n[1]+r[1])===0&&(u=u.substr(1)),u||n[0]}}});function h(n,r,f,u){if(this._calendar=n,this._year=r,this._month=f,this._day=u,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function y(n,r){return n=""+n,"000000".substring(0,r-n.length)+n}s(h.prototype,{newDate:function(n,r,f){return this._calendar.newDate(n==null?this:n,r,f)},year:function(n){return arguments.length===0?this._year:this.set(n,"y")},month:function(n){return arguments.length===0?this._month:this.set(n,"m")},day:function(n){return arguments.length===0?this._day:this.set(n,"d")},date:function(n,r,f){if(!this._calendar.isValid(n,r,f))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=n,this._month=r,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(n,r){return this._calendar.add(this,n,r)},set:function(n,r){return this._calendar.set(this,n,r)},compareTo:function(n){if(this._calendar.name!==n._calendar.name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,n._calendar.local.name);var r=this._year!==n._year?this._year-n._year:this._month!==n._month?this.monthOfYear()-n.monthOfYear():this._day-n._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(n){return this._calendar.fromJD(n)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(n){return this._calendar.fromJSDate(n)},toString:function(){return(this.year()<0?"-":"")+y(Math.abs(this.year()),4)+"-"+y(this.month(),2)+"-"+y(this.day(),2)}});function t(){this.shortYearCutoff="+10"}s(t.prototype,{_validateLevel:0,newDate:function(n,r,f){return n==null?this.today():(n.year&&(this._validate(n,r,f,i.local.invalidDate||i.regionalOptions[""].invalidDate),f=n.day(),r=n.month(),n=n.year()),new h(this,n,r,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+y(Math.abs(r.year()),4)},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),12},monthOfYear:function(n,r){var f=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(n,r){var f=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(n)+this.minMonth;return this._validate(n,f,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth),f},daysInYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(n,r,f){var u=this._validate(n,r,f,i.local.invalidDate||i.regionalOptions[""].invalidDate);return u.toJD()-this.newDate(u.year(),this.fromMonthOfYear(u.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(n,r,f){var u=this._validate(n,r,f,i.local.invalidDate||i.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(u))+2)%this.daysInWeek()},extraInfo:function(n,r,f){return this._validate(n,r,f,i.local.invalidDate||i.regionalOptions[""].invalidDate),{}},add:function(n,r,f){return this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate),this._correctAdd(n,this._add(n,r,f),r,f)},_add:function(n,r,f){if(this._validateLevel++,f==="d"||f==="w"){var u=n.toJD()+r*(f==="w"?this.daysInWeek():1),l=n.calendar().fromJD(u);return this._validateLevel--,[l.year(),l.month(),l.day()]}try{var m=n.year()+(f==="y"?r:0),d=n.monthOfYear()+(f==="m"?r:0),l=n.day(),b=function(p){for(;d<p.minMonth;)m--,d+=p.monthsInYear(m);for(var A=p.monthsInYear(m);d>A-1+p.minMonth;)m++,d-=A,A=p.monthsInYear(m)};f==="y"?(n.month()!==this.fromMonthOfYear(m,d)&&(d=this.newDate(m,n.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(m)),l=Math.min(l,this.daysInMonth(m,this.fromMonthOfYear(m,d)))):f==="m"&&(b(this),l=Math.min(l,this.daysInMonth(m,this.fromMonthOfYear(m,d))));var g=[m,this.fromMonthOfYear(m,d),l];return this._validateLevel--,g}catch(_){throw this._validateLevel--,_}},_correctAdd:function(n,r,f,u){if(!this.hasYearZero&&(u==="y"||u==="m")&&(r[0]===0||n.year()>0!=r[0]>0)){var l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[u],m=f<0?-1:1;r=this._add(n,f*l[0]+m*l[1],l[2])}return n.date(r[0],r[1],r[2])},set:function(n,r,f){this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate);var u=f==="y"?r:n.year(),l=f==="m"?r:n.month(),m=f==="d"?r:n.day();return(f==="y"||f==="m")&&(m=Math.min(m,this.daysInMonth(u,l))),n.date(u,l,m)},isValid:function(n,r,f){this._validateLevel++;var u=this.hasYearZero||n!==0;if(u){var l=this.newDate(n,r,this.minDay);u=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(l)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(l)}return this._validateLevel--,u},toJSDate:function(n,r,f){var u=this._validate(n,r,f,i.local.invalidDate||i.regionalOptions[""].invalidDate);return i.instance().fromJD(this.toJD(u)).toJSDate()},fromJSDate:function(n){return this.fromJD(i.instance().fromJSDate(n).toJD())},_validate:function(n,r,f,u){if(n.year){if(this._validateLevel===0&&this.name!==n.calendar().name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,n.calendar().local.name);return n}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(n,r,f))throw u.replace(/\{0\}/,this.local.name);var l=this.newDate(n,r,f);return this._validateLevel--,l}catch(m){throw this._validateLevel--,m}}});function a(n){this.local=this.regionalOptions[n]||this.regionalOptions[""]}a.prototype=new t,s(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var r=this._validate(f,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),f=r.year()+(r.year()<0?1:0);return f%4===0&&(f%100!==0||f%400===0)},weekOfYear:function(n,r,f){var u=this.newDate(n,r,f);return u.add(4-(u.dayOfWeek()||7),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInMonth:function(n,r){var f=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(n,r,f){return(this.dayOfWeek(n,r,f)||7)<6},toJD:function(n,r,f){var u=this._validate(n,r,f,i.local.invalidDate||i.regionalOptions[""].invalidDate);n=u.year(),r=u.month(),f=u.day(),n<0&&n++,r<3&&(r+=12,n--);var l=Math.floor(n/100),m=2-l+Math.floor(l/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(r+1))+f+m-1524.5},fromJD:function(n){var r=Math.floor(n+.5),f=Math.floor((r-186721625e-2)/36524.25);f=r+1+f-Math.floor(f/4);var u=f+1524,l=Math.floor((u-122.1)/365.25),m=Math.floor(365.25*l),d=Math.floor((u-m)/30.6001),b=u-m-Math.floor(d*30.6001),g=d-(d>13.5?13:1),_=l-(g>2.5?4716:4715);return _<=0&&_--,this.newDate(_,g,b)},toJSDate:function(n,r,f){var u=this._validate(n,r,f,i.local.invalidDate||i.regionalOptions[""].invalidDate),l=new Date(u.year(),u.month()-1,u.day());return l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),l.setHours(l.getHours()>12?l.getHours()+2:0),l},fromJSDate:function(n){return this.newDate(n.getFullYear(),n.getMonth()+1,n.getDate())}});var i=I.exports=new o;i.cdate=h,i.baseCalendar=t,i.calendars.gregorian=a},{"object-assign":247}],347:[function(e,I,F){var s=e("object-assign"),o=e("./main");s(o.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),o.local=o.regionalOptions[""],s(o.cdate.prototype,{formatDate:function(h,y){return typeof h!="string"&&(y=h,h=""),this._calendar.formatDate(h||"",this,y)}}),s(o.baseCalendar.prototype,{UNIX_EPOCH:o.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:o.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(h,y,t){if(typeof h!="string"&&(t=y,y=h,h=""),!y)return"";if(y.calendar()!==this)throw o.local.invalidFormat||o.regionalOptions[""].invalidFormat;h=h||this.local.dateFormat,t=t||{};var a=t.dayNamesShort||this.local.dayNamesShort,i=t.dayNames||this.local.dayNames,n=t.monthNumbers||this.local.monthNumbers,r=t.monthNamesShort||this.local.monthNamesShort,f=t.monthNames||this.local.monthNames;t.calculateWeek||this.local.calculateWeek;for(var u=function(T,x){for(var w=1;S+w<h.length&&h.charAt(S+w)===T;)w++;return S+=w-1,Math.floor(w/(x||1))>1},l=function(T,x,w,v){var C=""+x;if(u(T,v))for(;C.length<w;)C="0"+C;return C},m=function(T,x,w,v){return u(T)?v[x]:w[x]},d=this,b=function(T){return typeof n=="function"?n.call(d,T,u("m")):p(l("m",T.month(),2))},g=function(T,x){return x?typeof f=="function"?f.call(d,T):f[T.month()-d.minMonth]:typeof r=="function"?r.call(d,T):r[T.month()-d.minMonth]},_=this.local.digits,p=function(T){return t.localNumbers&&_?_(T):T},A="",c=!1,S=0;S<h.length;S++)if(c)h.charAt(S)==="'"&&!u("'")?c=!1:A+=h.charAt(S);else switch(h.charAt(S)){case"d":A+=p(l("d",y.day(),2));break;case"D":A+=m("D",y.dayOfWeek(),a,i);break;case"o":A+=l("o",y.dayOfYear(),3);break;case"w":A+=l("w",y.weekOfYear(),2);break;case"m":A+=b(y);break;case"M":A+=g(y,u("M"));break;case"y":A+=u("y",2)?y.year():(y.year()%100<10?"0":"")+y.year()%100;break;case"Y":u("Y",2),A+=y.formatYear();break;case"J":A+=y.toJD();break;case"@":A+=(y.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":A+=(y.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?A+="'":c=!0;break;default:A+=h.charAt(S)}return A},parseDate:function(h,y,t){if(y==null)throw o.local.invalidArguments||o.regionalOptions[""].invalidArguments;if(y=typeof y=="object"?y.toString():y+"",y==="")return null;h=h||this.local.dateFormat,t=t||{};var a=t.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var i=t.dayNamesShort||this.local.dayNamesShort,n=t.dayNames||this.local.dayNames,r=t.parseMonth||this.local.parseMonth,f=t.monthNumbers||this.local.monthNumbers,u=t.monthNamesShort||this.local.monthNamesShort,l=t.monthNames||this.local.monthNames,m=-1,d=-1,b=-1,g=-1,_=-1,p=!1,A=!1,c=function(O,R){for(var D=1;E+D<h.length&&h.charAt(E+D)===O;)D++;return E+=D-1,Math.floor(D/(R||1))>1},S=function(O,R){var D=c(O,R),H=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(O)+1],B=new RegExp("^-?\\d{1,"+H+"}"),$=y.substring(M).match(B);if(!$)throw(o.local.missingNumberAt||o.regionalOptions[""].missingNumberAt).replace(/\{0\}/,M);return M+=$[0].length,parseInt($[0],10)},T=this,x=function(){if(typeof f=="function"){c("m");var O=f.call(T,y.substring(M));return M+=O.length,O}return S("m")},w=function(O,R,D,H){for(var B=c(O,H)?D:R,$=0;$<B.length;$++)if(y.substr(M,B[$].length).toLowerCase()===B[$].toLowerCase())return M+=B[$].length,$+T.minMonth;throw(o.local.unknownNameAt||o.regionalOptions[""].unknownNameAt).replace(/\{0\}/,M)},v=function(){if(typeof l=="function"){var O=c("M")?l.call(T,y.substring(M)):u.call(T,y.substring(M));return M+=O.length,O}return w("M",u,l)},C=function(){if(y.charAt(M)!==h.charAt(E))throw(o.local.unexpectedLiteralAt||o.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,M);M++},M=0,E=0;E<h.length;E++)if(A)h.charAt(E)==="'"&&!c("'")?A=!1:C();else switch(h.charAt(E)){case"d":g=S("d");break;case"D":w("D",i,n);break;case"o":_=S("o");break;case"w":S("w");break;case"m":b=x();break;case"M":b=v();break;case"y":var L=E;p=!c("y",2),E=L,d=S("y",2);break;case"Y":d=S("Y",2);break;case"J":m=S("J")+.5,y.charAt(M)==="."&&(M++,S("J"));break;case"@":m=S("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":m=S("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":M=y.length;break;case"'":c("'")?C():A=!0;break;default:C()}if(M<y.length)throw o.local.unexpectedText||o.regionalOptions[""].unexpectedText;if(d===-1?d=this.today().year():d<100&&p&&(d+=a===-1?1900:this.today().year()-this.today().year()%100-(d<=a?0:100)),typeof b=="string"&&(b=r.call(this,d,b)),_>-1){b=1,g=_;for(var z=this.daysInMonth(d,b);g>z;z=this.daysInMonth(d,b))b++,g-=z}return m>-1?this.fromJD(m):this.newDate(d,b,g)},determineDate:function(h,y,t,a,i){t&&typeof t!="object"&&(i=a,a=t,t=null),typeof a!="string"&&(i=a,a="");var n=this,r=function(f){try{return n.parseDate(a,f,i)}catch{}f=f.toLowerCase();for(var u=(f.match(/^c/)&&t?t.newDate():null)||n.today(),l=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,m=l.exec(f);m;)u.add(parseInt(m[1],10),m[2]||"d"),m=l.exec(f);return u};return y=y?y.newDate():null,h=h==null?y:typeof h=="string"?r(h):typeof h=="number"?isNaN(h)||h===1/0||h===-1/0?y:n.today().add(h,"d"):n.newDate(h),h}})},{"./main":346,"object-assign":247}],348:[function(e,I,F){I.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(e,I,F){var s=e("./arrow_paths"),o=e("../../plots/font_attributes"),h=e("../../plots/cartesian/constants"),y=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),I.exports=y("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:o({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:s.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:s.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",h.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",h.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",h.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",h.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:o({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("./draw").draw;I.exports=function(i){var n=i._fullLayout,r=s.filterVisible(n.annotations);if(r.length&&i._fullData.length)return s.syncOrAsync([h,y],i)};function y(a){var i=a._fullLayout;s.filterVisible(i.annotations).forEach(function(n){var r=o.getFromId(a,n.xref),f=o.getFromId(a,n.yref),u=o.getRefType(n.xref),l=o.getRefType(n.yref);n._extremes={},u==="range"&&t(n,r),l==="range"&&t(n,f)})}function t(a,i){var n=i._id,r=n.charAt(0),f=a[r],u=a["a"+r],l=a[r+"ref"],m=a["a"+r+"ref"],d=a["_"+r+"padplus"],b=a["_"+r+"padminus"],g={x:1,y:-1}[r]*a[r+"shift"],_=3*a.arrowsize*a.arrowwidth||0,p=_+g,A=_-g,c=3*a.startarrowsize*a.arrowwidth||0,S=c+g,T=c-g,x;if(m===l){var w=o.findExtremes(i,[i.r2c(f)],{ppadplus:p,ppadminus:A}),v=o.findExtremes(i,[i.r2c(u)],{ppadplus:Math.max(d,S),ppadminus:Math.max(b,T)});x={min:[w.min[0],v.min[0]],max:[w.max[0],v.max[0]]}}else S=u?S+u:S,T=u?T-u:T,x=o.findExtremes(i,[i.r2c(f)],{ppadplus:Math.max(d,p,S),ppadminus:Math.max(b,A,T)});a._extremes[n]=x}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(e,I,F){var s=e("../../lib"),o=e("../../registry"),h=e("../../plot_api/plot_template").arrayEditor;I.exports={hasClickToShow:y,onClick:t};function y(n,r){var f=a(n,r);return f.on.length>0||f.explicitOff.length>0}function t(n,r){var f=a(n,r),u=f.on,l=f.off.concat(f.explicitOff),m={},d=n._fullLayout.annotations,b,g;if(!!(u.length||l.length)){for(b=0;b<u.length;b++)g=h(n.layout,"annotations",d[u[b]]),g.modifyItem("visible",!0),s.extendFlat(m,g.getUpdateObj());for(b=0;b<l.length;b++)g=h(n.layout,"annotations",d[l[b]]),g.modifyItem("visible",!1),s.extendFlat(m,g.getUpdateObj());return o.call("update",n,{},m)}}function a(n,r){var f=n._fullLayout.annotations,u=[],l=[],m=[],d=(r||[]).length,b,g,_,p,A,c,S,T;for(b=0;b<f.length;b++)if(_=f[b],p=_.clicktoshow,p){for(g=0;g<d;g++)if(A=r[g],c=A.xaxis,S=A.yaxis,c._id===_.xref&&S._id===_.yref&&c.d2r(A.x)===i(_._xclick,c)&&S.d2r(A.y)===i(_._yclick,S)){_.visible?p==="onout"?T=l:T=m:T=u,T.push(b);break}g===d&&_.visible&&p==="onout"&&l.push(b)}return{on:u,off:l,explicitOff:m}}function i(n,r){return r.type==="log"?r.l2r(n):r.d2r(n)}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(e,I,F){var s=e("../../lib"),o=e("../color");I.exports=function(y,t,a,i){i("opacity");var n=i("bgcolor"),r=i("bordercolor"),f=o.opacity(r);i("borderpad");var u=i("borderwidth"),l=i("showarrow");i("text",l?" ":a._dfltTitle.annotation),i("textangle"),s.coerceFont(i,"font",a.font),i("width"),i("align");var m=i("height");if(m&&i("valign"),l){var d=i("arrowside"),b,g;d.indexOf("end")!==-1&&(b=i("arrowhead"),g=i("arrowsize")),d.indexOf("start")!==-1&&(i("startarrowhead",b),i("startarrowsize",g)),i("arrowcolor",f?t.bordercolor:o.defaultLine),i("arrowwidth",(f&&u||1)*2),i("standoff"),i("startstandoff")}var _=i("hovertext"),p=a.hoverlabel||{};if(_){var A=i("hoverlabel.bgcolor",p.bgcolor||(o.opacity(n)?o.rgb(n):o.defaultLine)),c=i("hoverlabel.bordercolor",p.bordercolor||o.contrast(A));s.coerceFont(i,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||c})}i("captureevents",!!_)}},{"../../lib":503,"../color":366}],353:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib/to_log_range");I.exports=function(y,t,a,i){t=t||{};var n=a==="log"&&t.type==="linear",r=a==="linear"&&t.type==="log";if(!(n||r))return;var f=y._fullLayout.annotations,u=t._id.charAt(0),l,m;function d(g){var _=l[g],p=null;n?p=o(_,t.range):p=Math.pow(10,_),s(p)||(p=null),i(m+g,p)}for(var b=0;b<f.length;b++)l=f[b],m="annotations["+b+"].",l[u+"ref"]===t._id&&d(u),l["a"+u+"ref"]===t._id&&d("a"+u)}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("../../plots/array_container_defaults"),y=e("./common_defaults"),t=e("./attributes");I.exports=function(n,r){h(n,r,{name:"annotations",handleItemDefaults:a})};function a(i,n,r){function f(C,M){return s.coerce(i,n,t,C,M)}var u=f("visible"),l=f("clicktoshow");if(!!(u||l)){y(i,n,r,f);for(var m=n.showarrow,d=["x","y"],b=[-10,-30],g={_fullLayout:r},_=0;_<2;_++){var p=d[_],A=o.coerceRef(i,n,g,p,"","paper");if(A!=="paper"){var c=o.getFromId(g,A);c._annIndices.push(n._index)}if(o.coercePosition(n,g,f,A,p,.5),m){var S="a"+p,T=o.coerceRef(i,n,g,S,"pixel",["pixel","paper"]);T!=="pixel"&&T!==A&&(T=n[S]="pixel");var x=T==="pixel"?b[_]:.4;o.coercePosition(n,g,f,T,S,x)}f(p+"anchor"),f(p+"shift")}if(s.noneOrAll(i,n,["x","y"]),m&&s.noneOrAll(i,n,["ax","ay"]),l){var w=f("xclick"),v=f("yclick");n._xclick=w===void 0?n.x:o.cleanPosition(w,g,n.xref),n._yclick=v===void 0?n.y:o.cleanPosition(v,g,n.yref)}}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../registry"),h=e("../../plots/plots"),y=e("../../lib"),t=y.strTranslate,a=e("../../plots/cartesian/axes"),i=e("../color"),n=e("../drawing"),r=e("../fx"),f=e("../../lib/svg_text_utils"),u=e("../../lib/setcursor"),l=e("../dragelement"),m=e("../../plot_api/plot_template").arrayEditor,d=e("./draw_arrow_head");I.exports={draw:b,drawOne:g,drawRaw:p};function b(A){var c=A._fullLayout;c._infolayer.selectAll(".annotation").remove();for(var S=0;S<c.annotations.length;S++)c.annotations[S].visible&&g(A,S);return h.previousPromises(A)}function g(A,c){var S=A._fullLayout,T=S.annotations[c]||{},x=a.getFromId(A,T.xref),w=a.getFromId(A,T.yref);x&&x.setScale(),w&&w.setScale(),p(A,T,c,!1,x,w)}function _(A,c,S,T,x){var w=x[S],v=x[S+"ref"],C=S.indexOf("y")!==-1,M=a.getRefType(v)==="domain",E=C?T.h:T.w;return A?M?w+(C?-c:c)/A._length:A.p2r(A.r2p(w)+c):w+(C?-c:c)/E}function p(A,c,S,T,x,w){var v=A._fullLayout,C=A._fullLayout._size,M=A._context.edits,E,L;T?(E="annotation-"+T,L=T+".annotations"):(E="annotation",L="annotations");var z=m(A.layout,L,c),O=z.modifyBase,R=z.modifyItem,D=z.getUpdateObj;v._infolayer.selectAll("."+E+'[data-index="'+S+'"]').remove();var H="clip"+v._uid+"_ann"+S;if(!c._input||c.visible===!1){s.selectAll("#"+H).remove();return}var B={x:{},y:{}},$=+c.textangle||0,W=v._infolayer.append("g").classed(E,!0).attr("data-index",String(S)).style("opacity",c.opacity),re=W.append("g").classed("annotation-text-g",!0),Q=M[c.showarrow?"annotationTail":"annotationPosition"],Z=c.captureevents||M.annotationText||Q;function K(se){var me={index:S,annotation:c._input,fullAnnotation:c,event:se};return T&&(me.subplotId=T),me}var le=re.append("g").style("pointer-events",Z?"all":null).call(u,"pointer").on("click",function(){A._dragging=!1,A.emit("plotly_clickannotation",K(s.event))});c.hovertext&&le.on("mouseover",function(){var se=c.hoverlabel,me=se.font,ce=this.getBoundingClientRect(),pe=A.getBoundingClientRect();r.loneHover({x0:ce.left-pe.left,x1:ce.right-pe.left,y:(ce.top+ce.bottom)/2-pe.top,text:c.hovertext,color:se.bgcolor,borderColor:se.bordercolor,fontFamily:me.family,fontSize:me.size,fontColor:me.color},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:A})}).on("mouseout",function(){r.loneUnhover(v._hoverlayer.node())});var fe=c.borderwidth,ue=c.borderpad,V=fe+ue,j=le.append("rect").attr("class","bg").style("stroke-width",fe+"px").call(i.stroke,c.bordercolor).call(i.fill,c.bgcolor),ee=c.width||c.height,q=v._topclips.selectAll("#"+H).data(ee?[0]:[]);q.enter().append("clipPath").classed("annclip",!0).attr("id",H).append("rect"),q.exit().remove();var X=c.font,J=v._meta?y.templateString(c.text,v._meta):c.text,ie=le.append("text").classed("annotation-text",!0).text(J);function ne(se){return se.call(n.font,X).attr({"text-anchor":{left:"start",right:"end"}[c.align]||"middle"}),f.convertToTspans(se,A,oe),se}function oe(){var se=ie.selectAll("a");if(se.size()===1&&se.text()===ie.text()){var me=le.insert("a",":first-child").attr({"xlink:xlink:href":se.attr("xlink:href"),"xlink:xlink:show":se.attr("xlink:show")}).style({cursor:"pointer"});me.node().appendChild(j.node())}var ce=le.select(".annotation-text-math-group"),pe=!ce.empty(),xe=n.bBox((pe?ce:ie).node()),Se=xe.width,Ae=xe.height,Ce=c.width||Se,Ee=c.height||Ae,Oe=Math.round(Ce+2*V),_e=Math.round(Ee+2*V);function Re(Gt,Zt){return Zt==="auto"&&(Gt<1/3?Zt="left":Gt>2/3?Zt="right":Zt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Zt]}for(var Ve=!1,Je=["x","y"],ze=0;ze<Je.length;ze++){var De=Je[ze],je=c[De+"ref"]||De,dt=c["a"+De+"ref"],Et={x,y:w}[De],$t=($+(De==="x"?0:-90))*Math.PI/180,wt=Oe*Math.cos($t),Ot=_e*Math.sin($t),Vt=Math.abs(wt)+Math.abs(Ot),kt=c[De+"anchor"],St=c[De+"shift"]*(De==="x"?1:-1),ot=B[De],ht,Ke,Pe,We,Qe,ut=a.getRefType(je);if(Et&&ut!=="domain"){var It=Et.r2fraction(c[De]);(It<0||It>1)&&(dt===je?(It=Et.r2fraction(c["a"+De]),(It<0||It>1)&&(Ve=!0)):Ve=!0),ht=Et._offset+Et.r2p(c[De]),We=.5}else{var Tt=ut==="domain";De==="x"?(Pe=c[De],ht=Tt?Et._offset+Et._length*Pe:ht=C.l+C.w*Pe):(Pe=1-c[De],ht=Tt?Et._offset+Et._length*Pe:ht=C.t+C.h*Pe),We=c.showarrow?.5:Pe}if(c.showarrow){ot.head=ht;var Bt=c["a"+De];if(Qe=wt*Re(.5,c.xanchor)-Ot*Re(.5,c.yanchor),dt===je){var rr=a.getRefType(dt);rr==="domain"?(De==="y"&&(Bt=1-Bt),ot.tail=Et._offset+Et._length*Bt):rr==="paper"?De==="y"?(Bt=1-Bt,ot.tail=C.t+C.h*Bt):ot.tail=C.l+C.w*Bt:ot.tail=Et._offset+Et.r2p(Bt),Ke=Qe}else ot.tail=ht+Bt,Ke=Qe+Bt;ot.text=ot.tail+Qe;var Ut=v[De==="x"?"width":"height"];if(je==="paper"&&(ot.head=y.constrain(ot.head,1,Ut-1)),dt==="pixel"){var Qt=-Math.max(ot.tail-3,ot.text),ar=Math.min(ot.tail+3,ot.text)-Ut;Qt>0?(ot.tail+=Qt,ot.text+=Qt):ar>0&&(ot.tail-=ar,ot.text-=ar)}ot.tail+=St,ot.head+=St}else Qe=Vt*Re(We,kt),Ke=Qe,ot.text=ht+Qe;ot.text+=St,Qe+=St,Ke+=St,c["_"+De+"padplus"]=Vt/2+Ke,c["_"+De+"padminus"]=Vt/2-Ke,c["_"+De+"size"]=Vt,c["_"+De+"shift"]=Qe}if(Ve){le.remove();return}var nr=0,cr=0;if(c.align!=="left"&&(nr=(Ce-Se)*(c.align==="center"?.5:1)),c.valign!=="top"&&(cr=(Ee-Ae)*(c.valign==="middle"?.5:1)),pe)ce.select("svg").attr({x:V+nr-1,y:V+cr}).call(n.setClipUrl,ee?H:null,A);else{var Kr=V+cr-xe.top,yn=V+nr-xe.left;ie.call(f.positionText,yn,Kr).call(n.setClipUrl,ee?H:null,A)}q.select("rect").call(n.setRect,V,V,Ce,Ee),j.call(n.setRect,fe/2,fe/2,Oe-fe,_e-fe),le.call(n.setTranslate,Math.round(B.x.text-Oe/2),Math.round(B.y.text-_e/2)),re.attr({transform:"rotate("+$+","+B.x.text+","+B.y.text+")"});var Qr=function(Gt,Zt){W.selectAll(".annotation-arrow-g").remove();var Ht=B.x.head,_r=B.y.head,it=B.x.tail+Gt,Te=B.y.tail+Zt,ke=B.x.text+Gt,Ge=B.y.text+Zt,Ye=y.rotationXYMatrix($,ke,Ge),qe=y.apply2DTransform(Ye),at=y.apply2DTransform2(Ye),et=+j.attr("width"),pt=+j.attr("height"),_t=ke-.5*et,Pt=_t+et,Xt=Ge-.5*pt,zt=Xt+pt,ur=[[_t,Xt,_t,zt],[_t,zt,Pt,zt],[Pt,zt,Pt,Xt],[Pt,Xt,_t,Xt]].map(at);if(!ur.reduce(function(nt,Rt){return nt^!!y.segmentsIntersect(Ht,_r,Ht+1e6,_r+1e6,Rt[0],Rt[1],Rt[2],Rt[3])},!1)){ur.forEach(function(nt){var Rt=y.segmentsIntersect(it,Te,Ht,_r,nt[0],nt[1],nt[2],nt[3]);Rt&&(it=Rt.x,Te=Rt.y)});var gr=c.arrowwidth,Mr=c.arrowcolor,un=c.arrowside,zr=W.append("g").style({opacity:i.opacity(Mr)}).classed("annotation-arrow-g",!0),$r=zr.append("path").attr("d","M"+it+","+Te+"L"+Ht+","+_r).style("stroke-width",gr+"px").call(i.stroke,i.rgb(Mr));if(d($r,un,c),M.annotationPosition&&$r.node().parentNode&&!T){var hn=Ht,Tr=_r;if(c.standoff){var wr=Math.sqrt(Math.pow(Ht-it,2)+Math.pow(_r-Te,2));hn+=c.standoff*(it-Ht)/wr,Tr+=c.standoff*(Te-_r)/wr}var Ur=zr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(it-hn)+","+(Te-Tr),transform:t(hn,Tr)}).style("stroke-width",gr+6+"px").call(i.stroke,"rgba(0,0,0,0)").call(i.fill,"rgba(0,0,0,0)"),Br,Cr;l.init({element:Ur.node(),gd:A,prepFn:function(){var nt=n.getTranslate(le);Br=nt.x,Cr=nt.y,x&&x.autorange&&O(x._name+".autorange",!0),w&&w.autorange&&O(w._name+".autorange",!0)},moveFn:function(nt,Rt){var Jt=qe(Br,Cr),hr=Jt[0]+nt,Dr=Jt[1]+Rt;le.call(n.setTranslate,hr,Dr),R("x",_(x,nt,"x",C,c)),R("y",_(w,Rt,"y",C,c)),c.axref===c.xref&&R("ax",_(x,nt,"ax",C,c)),c.ayref===c.yref&&R("ay",_(w,Rt,"ay",C,c)),zr.attr("transform",t(nt,Rt)),re.attr({transform:"rotate("+$+","+hr+","+Dr+")"})},doneFn:function(){o.call("_guiRelayout",A,D());var nt=document.querySelector(".js-notes-box-panel");nt&&nt.redraw(nt.selectedObj)}})}}};if(c.showarrow&&Qr(0,0),Q){var st;l.init({element:le.node(),gd:A,prepFn:function(){st=re.attr("transform")},moveFn:function(Gt,Zt){var Ht="pointer";if(c.showarrow)c.axref===c.xref?R("ax",_(x,Gt,"ax",C,c)):R("ax",c.ax+Gt),c.ayref===c.yref?R("ay",_(w,Zt,"ay",C.w,c)):R("ay",c.ay+Zt),Qr(Gt,Zt);else{if(T)return;var _r,it;if(x)_r=_(x,Gt,"x",C,c);else{var Te=c._xsize/C.w,ke=c.x+(c._xshift-c.xshift)/C.w-Te/2;_r=l.align(ke+Gt/C.w,Te,0,1,c.xanchor)}if(w)it=_(w,Zt,"y",C,c);else{var Ge=c._ysize/C.h,Ye=c.y-(c._yshift+c.yshift)/C.h-Ge/2;it=l.align(Ye-Zt/C.h,Ge,0,1,c.yanchor)}R("x",_r),R("y",it),(!x||!w)&&(Ht=l.getCursor(x?.5:_r,w?.5:it,c.xanchor,c.yanchor))}re.attr({transform:t(Gt,Zt)+st}),u(le,Ht)},clickFn:function(Gt,Zt){c.captureevents&&A.emit("plotly_clickannotation",K(Zt))},doneFn:function(){u(le),o.call("_guiRelayout",A,D());var Gt=document.querySelector(".js-notes-box-panel");Gt&&Gt.redraw(Gt.selectedObj)}})}}M.annotationText?ie.call(f.makeEditable,{delegate:le,gd:A}).call(ne).on("edit",function(se){c.text=se,this.call(ne),R("text",se),x&&x.autorange&&O(x._name+".autorange",!0),w&&w.autorange&&O(w._name+".autorange",!0),o.call("_guiRelayout",A,D())}):ie.call(ne)}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(e,I,F){var s=e("@plotly/d3"),o=e("../color"),h=e("./arrow_paths"),y=e("../../lib"),t=y.strScale,a=y.strRotate,i=y.strTranslate;I.exports=function(r,f,u){var l=r.node(),m=h[u.arrowhead||0],d=h[u.startarrowhead||0],b=(u.arrowwidth||1)*(u.arrowsize||1),g=(u.arrowwidth||1)*(u.startarrowsize||1),_=f.indexOf("start")>=0,p=f.indexOf("end")>=0,A=m.backoff*b+u.standoff,c=d.backoff*g+u.startstandoff,S,T,x,w;if(l.nodeName==="line"){S={x:+r.attr("x1"),y:+r.attr("y1")},T={x:+r.attr("x2"),y:+r.attr("y2")};var v=S.x-T.x,C=S.y-T.y;if(x=Math.atan2(C,v),w=x+Math.PI,A&&c&&A+c>Math.sqrt(v*v+C*C)){re();return}if(A){if(A*A>v*v+C*C){re();return}var M=A*Math.cos(x),E=A*Math.sin(x);T.x+=M,T.y+=E,r.attr({x2:T.x,y2:T.y})}if(c){if(c*c>v*v+C*C){re();return}var L=c*Math.cos(x),z=c*Math.sin(x);S.x-=L,S.y-=z,r.attr({x1:S.x,y1:S.y})}}else if(l.nodeName==="path"){var O=l.getTotalLength(),R="";if(O<A+c){re();return}var D=l.getPointAtLength(0),H=l.getPointAtLength(.1);x=Math.atan2(D.y-H.y,D.x-H.x),S=l.getPointAtLength(Math.min(c,O)),R="0px,"+c+"px,";var B=l.getPointAtLength(O),$=l.getPointAtLength(O-.1);w=Math.atan2(B.y-$.y,B.x-$.x),T=l.getPointAtLength(Math.max(0,O-A));var W=R?c+A:A;R+=O-W+"px,"+O+"px",r.style("stroke-dasharray",R)}function re(){r.style("stroke-dasharray","0px,100px")}function Q(Z,K,le,fe){!Z.path||(Z.noRotate&&(le=0),s.select(l.parentNode).append("path").attr({class:r.attr("class"),d:Z.path,transform:i(K.x,K.y)+a(le*180/Math.PI)+t(fe)}).style({fill:o.rgb(u.arrowcolor),"stroke-width":0}))}_&&Q(d,S,x,g),p&&Q(m,T,w,b)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(e,I,F){var s=e("./draw"),o=e("./click");I.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:s.draw,drawOne:s.drawOne,drawRaw:s.drawRaw,hasClickToShow:o.hasClickToShow,onClick:o.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(e,I,F){var s=e("../annotations/attributes"),o=e("../../plot_api/edit_types").overrideAll,h=e("../../plot_api/plot_template").templatedArray;I.exports=o(h("annotation",{visible:s.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:s.xanchor,xshift:s.xshift,yanchor:s.yanchor,yshift:s.yshift,text:s.text,textangle:s.textangle,font:s.font,width:s.width,height:s.height,opacity:s.opacity,align:s.align,valign:s.valign,bgcolor:s.bgcolor,bordercolor:s.bordercolor,borderpad:s.borderpad,borderwidth:s.borderwidth,showarrow:s.showarrow,arrowcolor:s.arrowcolor,arrowhead:s.arrowhead,startarrowhead:s.startarrowhead,arrowside:s.arrowside,arrowsize:s.arrowsize,startarrowsize:s.startarrowsize,arrowwidth:s.arrowwidth,standoff:s.standoff,startstandoff:s.startstandoff,hovertext:s.hovertext,hoverlabel:s.hoverlabel,captureevents:s.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes");I.exports=function(t){for(var a=t.fullSceneLayout,i=a.annotations,n=0;n<i.length;n++)h(i[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function h(y,t){var a=t.fullSceneLayout,i=a.domain,n=t.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};y._xa={},s.extendFlat(y._xa,r),o.setConvert(y._xa),y._xa._offset=n.l+i.x[0]*n.w,y._xa.l2p=function(){return .5*(1+y._pdata[0]/y._pdata[3])*n.w*(i.x[1]-i.x[0])},y._ya={},s.extendFlat(y._ya,r),o.setConvert(y._ya),y._ya._offset=n.t+(1-i.y[1])*n.h,y._ya.l2p=function(){return .5*(1-y._pdata[1]/y._pdata[3])*n.h*(i.y[1]-i.y[0])}}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("../../plots/array_container_defaults"),y=e("../annotations/common_defaults"),t=e("./attributes");I.exports=function(n,r,f){h(n,r,{name:"annotations",handleItemDefaults:a,fullLayout:f.fullLayout})};function a(i,n,r,f){function u(d,b){return s.coerce(i,n,t,d,b)}function l(d){var b=d+"axis",g={_fullLayout:{}};return g._fullLayout[b]=r[b],o.coercePosition(n,g,u,d,d,.5)}var m=u("visible");!m||(y(i,n,f.fullLayout,u),l("x"),l("y"),l("z"),s.noneOrAll(i,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",u("xanchor"),u("yanchor"),u("xshift"),u("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",u("ax",-10),u("ay",-30),s.noneOrAll(i,n,["ax","ay"])))}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(e,I,F){var s=e("../annotations/draw").drawRaw,o=e("../../plots/gl3d/project"),h=["x","y","z"];I.exports=function(t){for(var a=t.fullSceneLayout,i=t.dataScale,n=a.annotations,r=0;r<n.length;r++){for(var f=n[r],u=!1,l=0;l<3;l++){var m=h[l],d=f[m],b=a[m+"axis"],g=b.r2fraction(d);if(g<0||g>1){u=!0;break}}u?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+r+'"]').remove():(f._pdata=o(t.glplot.cameraParams,[a.xaxis.r2l(f.x)*i[0],a.yaxis.r2l(f.y)*i[1],a.zaxis.r2l(f.z)*i[2]]),s(t.graphDiv,f,r,t.id,f._xa,f._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(e,I,F){var s=e("../../registry"),o=e("../../lib");I.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:h,convert:e("./convert"),draw:e("./draw")};function h(y,t){var a=s.subplotsRegistry.gl3d;if(!!a)for(var i=a.attrRegex,n=Object.keys(y),r=0;r<n.length;r++){var f=n[r];i.test(f)&&(y[f].annotations||[]).length&&(o.pushUnique(t._basePlotModules,a),o.pushUnique(t._subplots.gl3d,f))}}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(e,I,F){I.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(e,I,F){var s=e("./calendars"),o=e("../../lib"),h=e("../../constants/numerical"),y=h.EPOCHJD,t=h.ONEDAY,a={valType:"enumerated",values:o.sortObjectKeys(s.calendars),editType:"calc",dflt:"gregorian"},i=function(x,w,v,C){var M={};return M[v]=a,o.coerce(x,w,M,v,C)},n=function(x,w,v,C){for(var M=0;M<v.length;M++)i(x,w,v[M]+"calendar",C.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},f={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},u={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},l="##",m={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:l,w:l,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function d(x,w,v){for(var C=Math.floor((w+.05)/t)+y,M=g(v).fromJD(C),E=0,L,z,O,R,D;(E=x.indexOf("%",E))!==-1;)L=x.charAt(E+1),L==="0"||L==="-"||L==="_"?(O=3,z=x.charAt(E+2),L==="_"&&(L="-")):(z=L,L="0",O=2),R=m[z],R?(R===l?D=l:D=M.formatDate(R[L]),x=x.substr(0,E)+D+x.substr(E+O),E+=D.length):E+=O;return x}var b={};function g(x){var w=b[x];return w||(w=b[x]=s.instance(x),w)}function _(x){return o.extendFlat({},a,{description:x})}function p(x){return"Sets the calendar system to use with `"+x+"` date data."}var A={xcalendar:_(p("x"))},c=o.extendFlat({},A,{ycalendar:_(p("y"))}),S=o.extendFlat({},c,{zcalendar:_(p("z"))}),T=_(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));I.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:c,bar:c,box:c,heatmap:c,contour:c,histogram:c,histogram2d:c,histogram2dcontour:c,scatter3d:S,surface:S,mesh3d:S,scattergl:c,ohlc:A,candlestick:A},layout:{calendar:_(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:T},yaxis:{calendar:T},scene:{xaxis:{calendar:T},yaxis:{calendar:T},zaxis:{calendar:T}},polar:{radialaxis:{calendar:T}}},transforms:{filter:{valuecalendar:_(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:_(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:i,handleTraceDefaults:n,CANONICAL_SUNDAY:f,CANONICAL_TICK:r,DFLTRANGE:u,getCal:g,worldCalFmt:d}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(e,I,F){F.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],F.defaultLine="#444",F.lightLine="#eee",F.background="#fff",F.borderLine="#BEC8D9",F.lightFraction=100*(14-4)/(15-4)},{}],366:[function(e,I,F){var s=e("tinycolor2"),o=e("fast-isnumeric"),h=e("../../lib/array").isTypedArray,y=I.exports={},t=e("./attributes");y.defaults=t.defaults;var a=y.defaultLine=t.defaultLine;y.lightLine=t.lightLine;var i=y.background=t.background;y.tinyRGB=function(r){var f=r.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+")"},y.rgb=function(r){return y.tinyRGB(s(r))},y.opacity=function(r){return r?s(r).getAlpha():0},y.addOpacity=function(r,f){var u=s(r).toRgb();return"rgba("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+", "+f+")"},y.combine=function(r,f){var u=s(r).toRgb();if(u.a===1)return s(r).toRgbString();var l=s(f||i).toRgb(),m=l.a===1?l:{r:255*(1-l.a)+l.r*l.a,g:255*(1-l.a)+l.g*l.a,b:255*(1-l.a)+l.b*l.a},d={r:m.r*(1-u.a)+u.r*u.a,g:m.g*(1-u.a)+u.g*u.a,b:m.b*(1-u.a)+u.b*u.a};return s(d).toRgbString()},y.contrast=function(r,f,u){var l=s(r);l.getAlpha()!==1&&(l=s(y.combine(r,i)));var m=l.isDark()?f?l.lighten(f):i:u?l.darken(u):a;return m.toString()},y.stroke=function(r,f){var u=s(f);r.style({stroke:y.tinyRGB(u),"stroke-opacity":u.getAlpha()})},y.fill=function(r,f){var u=s(f);r.style({fill:y.tinyRGB(u),"fill-opacity":u.getAlpha()})},y.clean=function(r){if(!(!r||typeof r!="object")){var f=Object.keys(r),u,l,m,d;for(u=0;u<f.length;u++)if(m=f[u],d=r[m],m.substr(m.length-5)==="color")if(Array.isArray(d))for(l=0;l<d.length;l++)d[l]=n(d[l]);else r[m]=n(d);else if(m.substr(m.length-10)==="colorscale"&&Array.isArray(d))for(l=0;l<d.length;l++)Array.isArray(d[l])&&(d[l][1]=n(d[l][1]));else if(Array.isArray(d)){var b=d[0];if(!Array.isArray(b)&&b&&typeof b=="object")for(l=0;l<d.length;l++)y.clean(d[l])}else d&&typeof d=="object"&&!h(d)&&y.clean(d)}};function n(r){if(o(r)||typeof r!="string")return r;var f=r.trim();if(f.substr(0,3)!=="rgb")return r;var u=f.match(/^rgba?\s*\(([^()]*)\)$/);if(!u)return r;var l=u[1].trim().split(/\s*[\s,]\s*/),m=f.charAt(3)==="a"&&l.length===4;if(!m&&l.length!==3)return r;for(var d=0;d<l.length;d++){if(!l[d].length||(l[d]=Number(l[d]),!(l[d]>=0)))return r;if(d===3)l[d]>1&&(l[d]=1);else if(l[d]>=1)return r}var b=Math.round(l[0]*255)+", "+Math.round(l[1]*255)+", "+Math.round(l[2]*255);return m?"rgba("+b+", "+l[3]+")":"rgb("+b+")"}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(e,I,F){var s=e("../../plots/cartesian/layout_attributes"),o=e("../../plots/font_attributes"),h=e("../../lib/extend").extendFlat,y=e("../../plot_api/edit_types").overrideAll;I.exports=y({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:s.linecolor,outlinewidth:s.linewidth,bordercolor:s.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:s.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:h({},s.ticks,{dflt:""}),ticklabeloverflow:h({},s.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,tickfont:o({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,title:{text:{valType:"string"},font:o({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:o({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(e,I,F){I.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(e,I,F){var s=e("../../lib"),o=e("../../plot_api/plot_template"),h=e("../../plots/cartesian/tick_value_defaults"),y=e("../../plots/cartesian/tick_mark_defaults"),t=e("../../plots/cartesian/tick_label_defaults"),a=e("../../plots/cartesian/prefix_suffix_defaults"),i=e("./attributes");I.exports=function(r,f,u){var l=o.newContainer(f,"colorbar"),m=r.colorbar||{};function d(M,E){return s.coerce(m,l,i,M,E)}var b=u.margin||{t:0,b:0,l:0,r:0},g=u.width-b.l-b.r,_=u.height-b.t-b.b,p=d("orientation"),A=p==="v",c=d("thicknessmode");d("thickness",c==="fraction"?30/(A?g:_):30);var S=d("lenmode");d("len",S==="fraction"?1:A?_:g),d("x",A?1.02:.5),d("xanchor",A?"left":"center"),d("xpad"),d("y",A?.5:1.02),d("yanchor",A?"middle":"bottom"),d("ypad"),s.noneOrAll(m,l,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var T=s.coerce(m,l,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:A?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",T.indexOf("inside")!==-1?"hide past domain":"hide past div"),h(m,l,d,"linear");var x=u.font,w={outerTicks:!1,font:x};T.indexOf("inside")!==-1&&(w.bgColor="black"),a(m,l,d,"linear",w),t(m,l,d,"linear",w),y(m,l,d,"linear",w),d("title.text",u._dfltTitle.colorbar);var v=l.tickfont,C=s.extendFlat({},v,{color:x.color,size:s.bigFont(v.size)});s.coerceFont(d,"title.font",C),d("title.side",A?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(e,I,F){var s=e("@plotly/d3"),o=e("tinycolor2"),h=e("../../plots/plots"),y=e("../../registry"),t=e("../../plots/cartesian/axes"),a=e("../dragelement"),i=e("../../lib"),n=i.strTranslate,r=e("../../lib/extend").extendFlat,f=e("../../lib/setcursor"),u=e("../drawing"),l=e("../color"),m=e("../titles"),d=e("../../lib/svg_text_utils"),b=e("../colorscale/helpers").flipScale,g=e("../../plots/cartesian/axis_defaults"),_=e("../../plots/cartesian/position_defaults"),p=e("../../plots/cartesian/layout_attributes"),A=e("../../constants/alignment"),c=A.LINE_SPACING,S=A.FROM_TL,T=A.FROM_BR,x=e("./constants").cn;function w(z){var O=z._fullLayout,R=O._infolayer.selectAll("g."+x.colorbar).data(v(z),function(D){return D._id});R.enter().append("g").attr("class",function(D){return D._id}).classed(x.colorbar,!0),R.each(function(D){var H=s.select(this);i.ensureSingle(H,"rect",x.cbbg),i.ensureSingle(H,"g",x.cbfills),i.ensureSingle(H,"g",x.cblines),i.ensureSingle(H,"g",x.cbaxis,function($){$.classed(x.crisp,!0)}),i.ensureSingle(H,"g",x.cbtitleunshift,function($){$.append("g").classed(x.cbtitle,!0)}),i.ensureSingle(H,"rect",x.cboutline);var B=C(H,D,z);B&&B.then&&(z._promises||[]).push(B),z._context.edits.colorbarPosition&&M(H,D,z)}),R.exit().each(function(D){h.autoMargin(z,D._id)}).remove(),R.order()}function v(z){var O=z._fullLayout,R=z.calcdata,D=[],H,B,$,W;function re(X){return r(X,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Q(){typeof W.calc=="function"?W.calc(z,$,H):(H._fillgradient=B.reversescale?b(B.colorscale):B.colorscale,H._zrange=[B[W.min],B[W.max]])}for(var Z=0;Z<R.length;Z++){var K=R[Z];$=K[0].trace;var le=$._module.colorbar;if($.visible===!0&&le)for(var fe=Array.isArray(le),ue=fe?le:[le],V=0;V<ue.length;V++){W=ue[V];var j=W.container;B=j?$[j]:$,B&&B.showscale&&(H=re(B.colorbar),H._id="cb"+$.uid+(fe&&j?"-"+j:""),H._traceIndex=$.index,H._propPrefix=(j?j+".":"")+"colorbar.",H._meta=$._meta,Q(),D.push(H))}}for(var ee in O._colorAxes)if(B=O[ee],B.showscale){var q=O._colorAxes[ee];H=re(B.colorbar),H._id="cb"+ee,H._propPrefix=ee+".colorbar.",H._meta=O._meta,W={min:"cmin",max:"cmax"},q[0]!=="heatmap"&&($=q[1],W.calc=$._module.colorbar.calc),Q(),D.push(H)}return D}function C(z,O,R){var D=O.orientation==="v",H=O.len,B=O.lenmode,$=O.thickness,W=O.thicknessmode,re=O.outlinewidth,Q=O.borderwidth,Z=O.bgcolor,K=O.xanchor,le=O.yanchor,fe=O.xpad,ue=O.ypad,V=O.x,j=D?O.y:1-O.y,ee=R._fullLayout,q=ee._size,X=O._fillcolor,J=O._line,ie=O.title,ne=ie.side,oe=O._zrange||s.extent((typeof X=="function"?X:J.color).domain()),se=typeof J.color=="function"?J.color:function(){return J.color},me=typeof X=="function"?X:function(){return X},ce=O._levels,pe=E(R,O,oe),xe=pe.fill,Se=pe.line,Ae=Math.round($*(W==="fraction"?D?q.w:q.h:1)),Ce=Ae/(D?q.w:q.h),Ee=Math.round(H*(B==="fraction"?D?q.h:q.w:1)),Oe=Ee/(D?q.h:q.w),_e=Math.round(D?V*q.w+fe:j*q.h+ue),Re={center:.5,right:1}[K]||0,Ve={top:1,middle:.5}[le]||0,Je=D?V-Re*Ce:j-Ve*Ce,ze=D?j-Ve*Oe:V-Re*Oe,De=Math.round(D?q.h*(1-ze):q.w*ze);O._lenFrac=Oe,O._thickFrac=Ce,O._uFrac=Je,O._vFrac=ze;var je=O._axis=L(R,O,oe);je.position=Ce+(D?V+fe/q.w:j+ue/q.h);var dt=["top","bottom"].indexOf(ne)!==-1;if(D&&dt&&(je.title.side=ne,je.titlex=V+fe/q.w,je.titley=ze+(ie.side==="top"?Oe-ue/q.h:ue/q.h)),!D&&!dt&&(je.title.side=ne,je.titley=j+ue/q.h,je.titlex=ze+fe/q.w),J.color&&O.tickmode==="auto"){je.tickmode="linear",je.tick0=ce.start;var Et=ce.size,$t=i.constrain(Ee/50,4,15)+1,wt=(oe[1]-oe[0])/((O.nticks||$t)*Et);if(wt>1){var Ot=Math.pow(10,Math.floor(Math.log(wt)/Math.LN10));Et*=Ot*i.roundUp(wt/Ot,[2,5,10]),(Math.abs(ce.start)/ce.size+1e-6)%1<2e-6&&(je.tick0=0)}je.dtick=Et}je.domain=D?[ze+ue/q.h,ze+Oe-ue/q.h]:[ze+fe/q.w,ze+Oe-fe/q.w],je.setScale(),z.attr("transform",n(Math.round(q.l),Math.round(q.t)));var Vt=z.select("."+x.cbtitleunshift).attr("transform",n(-Math.round(q.l),-Math.round(q.t))),kt=je.ticklabelposition,St=je.title.font.size,ot=z.select("."+x.cbaxis),ht,Ke=0,Pe=0;function We(Bt,rr){var Ut={propContainer:je,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:ee._dfltTitle.colorbar,containerGroup:z.select("."+x.cbtitle)},Qt=Bt.charAt(0)==="h"?Bt.substr(1):"h"+Bt;z.selectAll("."+Qt+",."+Qt+"-math-group").remove(),m.draw(R,Bt,r(Ut,rr||{}))}function Qe(){if(D&&dt||!D&&!dt){var Bt,rr;ne==="top"&&(Bt=fe+q.l+q.w*V,rr=ue+q.t+q.h*(1-ze-Oe)+3+St*.75),ne==="bottom"&&(Bt=fe+q.l+q.w*V,rr=ue+q.t+q.h*(1-ze)-3-St*.25),ne==="right"&&(rr=ue+q.t+q.h*j+3+St*.75,Bt=fe+q.l+q.w*ze),We(je._id+"title",{attributes:{x:Bt,y:rr,"text-anchor":D?"start":"middle"}})}}function ut(){if(D&&!dt||!D&&dt){var Bt=je.position||0,rr=je._offset+je._length/2,Ut,Qt;if(ne==="right")Qt=rr,Ut=q.l+q.w*Bt+10+St*(je.showticklabels?1:.5);else if(Ut=rr,ne==="bottom"&&(Qt=q.t+q.h*Bt+10+(kt.indexOf("inside")===-1?je.tickfont.size:0)+(je.ticks!=="intside"&&O.ticklen||0)),ne==="top"){var ar=ie.text.split("<br>").length;Qt=q.t+q.h*Bt+10-Ae-c*St*ar}We((D?"h":"v")+je._id+"title",{avoid:{selection:s.select(R).selectAll("g."+je._id+"tick"),side:ne,offsetTop:D?0:q.t,offsetLeft:D?q.l:0,maxShift:D?ee.width:ee.height},attributes:{x:Ut,y:Qt,"text-anchor":"middle"},transform:{rotate:D?-90:0,offset:0}})}}function It(){if(!D&&!dt||D&&dt){var Bt=z.select("."+x.cbtitle),rr=Bt.select("text"),Ut=[-re/2,re/2],Qt=Bt.select(".h"+je._id+"title-math-group").node(),ar=15.6;rr.node()&&(ar=parseInt(rr.node().style.fontSize,10)*c);var nr;if(Qt?(nr=u.bBox(Qt),Pe=nr.width,Ke=nr.height,Ke>ar&&(Ut[1]-=(Ke-ar)/2)):rr.node()&&!rr.classed(x.jsPlaceholder)&&(nr=u.bBox(rr.node()),Pe=nr.width,Ke=nr.height),D){if(Ke){if(Ke+=5,ne==="top")je.domain[1]-=Ke/q.h,Ut[1]*=-1;else{je.domain[0]+=Ke/q.h;var cr=d.lineCount(rr);Ut[1]+=(1-cr)*ar}Bt.attr("transform",n(Ut[0],Ut[1])),je.setScale()}}else Pe&&(ne==="right"&&(je.domain[0]+=(Pe+St/2)/q.w),Bt.attr("transform",n(Ut[0],Ut[1])),je.setScale())}z.selectAll("."+x.cbfills+",."+x.cblines).attr("transform",D?n(0,Math.round(q.h*(1-je.domain[1]))):n(Math.round(q.w*je.domain[0]),0)),ot.attr("transform",D?n(0,Math.round(-q.t)):n(Math.round(-q.l),0));var Kr=z.select("."+x.cbfills).selectAll("rect."+x.cbfill).attr("style","").data(xe);Kr.enter().append("rect").classed(x.cbfill,!0).style("stroke","none"),Kr.exit().remove();var yn=oe.map(je.c2p).map(Math.round).sort(function(Ht,_r){return Ht-_r});Kr.each(function(Ht,_r){var it=[_r===0?oe[0]:(xe[_r]+xe[_r-1])/2,_r===xe.length-1?oe[1]:(xe[_r]+xe[_r+1])/2].map(je.c2p).map(Math.round);D&&(it[1]=i.constrain(it[1]+(it[1]>it[0])?1:-1,yn[0],yn[1]));var Te=s.select(this).attr(D?"x":"y",_e).attr(D?"y":"x",s.min(it)).attr(D?"width":"height",Math.max(Ae,2)).attr(D?"height":"width",Math.max(s.max(it)-s.min(it),2));if(O._fillgradient)u.gradient(Te,R,O._id,D?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var ke=me(Ht).replace("e-","");Te.attr("fill",o(ke).toHexString())}});var Qr=z.select("."+x.cblines).selectAll("path."+x.cbline).data(J.color&&J.width?Se:[]);Qr.enter().append("path").classed(x.cbline,!0),Qr.exit().remove(),Qr.each(function(Ht){var _r=_e,it=Math.round(je.c2p(Ht))+J.width/2%1;s.select(this).attr("d","M"+(D?_r+","+it:it+","+_r)+(D?"h":"v")+Ae).call(u.lineGroupStyle,J.width,se(Ht),J.dash)}),ot.selectAll("g."+je._id+"tick,path").remove();var st=_e+Ae+(re||0)/2-(O.ticks==="outside"?1:0),Gt=t.calcTicks(je),Zt=t.getTickSigns(je)[2];return t.drawTicks(R,je,{vals:je.ticks==="inside"?t.clipEnds(je,Gt):Gt,layer:ot,path:t.makeTickPath(je,st,Zt),transFn:t.makeTransTickFn(je)}),t.drawLabels(R,je,{vals:Gt,layer:ot,transFn:t.makeTransTickLabelFn(je),labelFns:t.makeLabelFns(je,st)})}function Tt(){var Bt,rr=Ae+re/2;kt.indexOf("inside")===-1&&(Bt=u.bBox(ot.node()),rr+=D?Bt.width:Bt.height),ht=Vt.select("text");var Ut=0,Qt=D&&ne==="top",ar=!D&&ne==="right",nr=0;if(ht.node()&&!ht.classed(x.jsPlaceholder)){var cr,Kr=Vt.select(".h"+je._id+"title-math-group").node();Kr&&(D&&dt||!D&&!dt)?(Bt=u.bBox(Kr),Ut=Bt.width,cr=Bt.height):(Bt=u.bBox(Vt.node()),Ut=Bt.right-q.l-(D?_e:De),cr=Bt.bottom-q.t-(D?De:_e),!D&&ne==="top"&&(rr+=Bt.height,nr=Bt.height)),ar&&(ht.attr("transform",n(Ut/2+St/2,0)),Ut*=2),rr=Math.max(rr,D?Ut:cr)}var yn=(D?fe:ue)*2+rr+Q+re/2,Qr=0;!D&&ie.text&&le==="bottom"&&j<=0&&(Qr=yn/2,yn+=Qr,nr+=Qr),ee._hColorbarMoveTitle=Qr,ee._hColorbarMoveCBTitle=nr;var st=Q+re;z.select("."+x.cbbg).attr("x",(D?_e:De)-st/2-(D?fe:0)).attr("y",(D?De:_e)-(D?Ee:ue+nr-Qr)).attr(D?"width":"height",Math.max(yn-Qr,2)).attr(D?"height":"width",Math.max(Ee+st,2)).call(l.fill,Z).call(l.stroke,O.bordercolor).style("stroke-width",Q);var Gt=ar?Math.max(Ut-10,0):0;if(z.selectAll("."+x.cboutline).attr("x",(D?_e:De+fe)+Gt).attr("y",(D?De+ue-Ee:_e)+(Qt?Ke:0)).attr(D?"width":"height",Math.max(Ae,2)).attr(D?"height":"width",Math.max(Ee-(D?2*ue+Ke:2*fe+Gt),2)).call(l.stroke,O.outlinecolor).style({fill:"none","stroke-width":re}),z.attr("transform",n(q.l-(D?Re*yn:0),q.t-(D?0:(1-Ve)*yn-nr))),!D&&(Q||o(Z).getAlpha()&&!o.equals(ee.paper_bgcolor,Z))){var Zt=ot.selectAll("text"),Ht=Zt[0].length,_r=z.select("."+x.cbbg).node(),it=u.bBox(_r),Te=u.getTranslate(z),ke=2;Zt.each(function(_t,Pt){var Xt=0,zt=Ht-1;if(Pt===Xt||Pt===zt){var ur=u.bBox(this),gr=u.getTranslate(this),Mr;if(Pt===zt){var un=ur.right+gr.x,zr=it.right+Te.x+De-Q-ke+V;Mr=zr-un,Mr>0&&(Mr=0)}else if(Pt===Xt){var $r=ur.left+gr.x,hn=it.left+Te.x+De+Q+ke;Mr=hn-$r,Mr<0&&(Mr=0)}Mr&&(Ht<3?this.setAttribute("transform","translate("+Mr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ge={},Ye=S[K],qe=T[K],at=S[le],et=T[le],pt=yn-Ae;D?(B==="pixels"?(Ge.y=j,Ge.t=Ee*at,Ge.b=Ee*et):(Ge.t=Ge.b=0,Ge.yt=j+H*at,Ge.yb=j-H*et),W==="pixels"?(Ge.x=V,Ge.l=yn*Ye,Ge.r=yn*qe):(Ge.l=pt*Ye,Ge.r=pt*qe,Ge.xl=V-$*Ye,Ge.xr=V+$*qe)):(B==="pixels"?(Ge.x=V,Ge.l=Ee*Ye,Ge.r=Ee*qe):(Ge.l=Ge.r=0,Ge.xl=V+H*Ye,Ge.xr=V-H*qe),W==="pixels"?(Ge.y=1-j,Ge.t=yn*at,Ge.b=yn*et):(Ge.t=pt*at,Ge.b=pt*et,Ge.yt=j-$*at,Ge.yb=j+$*et)),h.autoMargin(R,O._id,Ge)}return i.syncOrAsync([h.previousPromises,Qe,It,ut,h.previousPromises,Tt],R)}function M(z,O,R){var D=O.orientation==="v",H=R._fullLayout,B=H._size,$,W,re;a.init({element:z.node(),gd:R,prepFn:function(){$=z.attr("transform"),f(z)},moveFn:function(Q,Z){z.attr("transform",$+n(Q,Z)),W=a.align((D?O._uFrac:O._vFrac)+Q/B.w,D?O._thickFrac:O._lenFrac,0,1,O.xanchor),re=a.align((D?O._vFrac:1-O._uFrac)-Z/B.h,D?O._lenFrac:O._thickFrac,0,1,O.yanchor);var K=a.getCursor(W,re,O.xanchor,O.yanchor);f(z,K)},doneFn:function(){if(f(z),W!==void 0&&re!==void 0){var Q={};Q[O._propPrefix+"x"]=W,Q[O._propPrefix+"y"]=re,O._traceIndex!==void 0?y.call("_guiRestyle",R,Q,O._traceIndex):y.call("_guiRelayout",R,Q)}}})}function E(z,O,R){var D=O._levels,H=[],B=[],$,W,re=D.end+D.size/100,Q=D.size,Z=1.001*R[0]-.001*R[1],K=1.001*R[1]-.001*R[0];for(W=0;W<1e5&&($=D.start+W*Q,!(Q>0?$>=re:$<=re));W++)$>Z&&$<K&&H.push($);if(O._fillgradient)B=[0];else if(typeof O._fillcolor=="function"){var le=O._filllevels;if(le)for(re=le.end+le.size/100,Q=le.size,W=0;W<1e5&&($=le.start+W*Q,!(Q>0?$>=re:$<=re));W++)$>R[0]&&$<R[1]&&B.push($);else B=H.map(function(fe){return fe-D.size/2}),B.push(B[B.length-1]+D.size)}else O._fillcolor&&typeof O._fillcolor=="string"&&(B=[0]);return D.size<0&&(H.reverse(),B.reverse()),{line:H,fill:B}}function L(z,O,R){var D=z._fullLayout,H=O.orientation==="v",B={type:"linear",range:R,tickmode:O.tickmode,nticks:O.nticks,tick0:O.tick0,dtick:O.dtick,tickvals:O.tickvals,ticktext:O.ticktext,ticks:O.ticks,ticklen:O.ticklen,tickwidth:O.tickwidth,tickcolor:O.tickcolor,showticklabels:O.showticklabels,ticklabelposition:O.ticklabelposition,ticklabeloverflow:O.ticklabeloverflow,ticklabelstep:O.ticklabelstep,tickfont:O.tickfont,tickangle:O.tickangle,tickformat:O.tickformat,exponentformat:O.exponentformat,minexponent:O.minexponent,separatethousands:O.separatethousands,showexponent:O.showexponent,showtickprefix:O.showtickprefix,tickprefix:O.tickprefix,showticksuffix:O.showticksuffix,ticksuffix:O.ticksuffix,title:O.title,showline:!0,anchor:"free",side:H?"right":"bottom",position:1},$=H?"y":"x",W={type:"linear",_id:$+O._id},re={letter:$,font:D.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:D.calendar};function Q(Z,K){return i.coerce(B,W,p,Z,K)}return g(B,W,Q,re,D),_(B,W,Q,re),W}I.exports={draw:w}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(e,I,F){var s=e("../../lib");I.exports=function(h){return s.isPlainObject(h.colorbar)}},{"../../lib":503}],372:[function(e,I,F){I.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(e,I,F){var s=e("../colorbar/attributes"),o=e("../../lib/regex").counter,h=e("../../lib/sort_object_keys"),y=e("./scales.js").scales;h(y),I.exports=function(a,i){a=a||"",i=i||{};var n=i.cLetter||"c";"onlyIfNumerical"in i?i.onlyIfNumerical:Boolean(a);var r="noScale"in i?i.noScale:a==="marker.line",f="showScaleDflt"in i?i.showScaleDflt:n==="z",u=typeof i.colorscaleDflt=="string"?y[i.colorscaleDflt]:null,l=i.editTypeOverride||"",m;"colorAttr"in i?m=i.colorAttr:m={z:"z",c:"color"}[n];var d=n+"auto",b=n+"min",g=n+"max",_=n+"mid",p={};p[b]=p[g]=void 0;var A={};A[d]=!1;var c={};return m==="color"&&(c.color={valType:"color",arrayOk:!0,editType:l||"style"},i.anim&&(c.color.anim=!0)),c[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:p},c[b]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:A},c[g]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:A},c[_]={valType:"number",dflt:null,editType:"calc",impliedEdits:p},c.colorscale={valType:"colorscale",editType:"calc",dflt:u,impliedEdits:{autocolorscale:!1}},c.autocolorscale={valType:"boolean",dflt:i.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},c.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(c.showscale={valType:"boolean",dflt:f,editType:"calc"},c.colorbar=s),i.noColorAxis||(c.coloraxis={valType:"subplotid",regex:o("coloraxis"),dflt:null,editType:"calc"}),c}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("./helpers").extractOpts;I.exports=function(t,a,i){var n=t._fullLayout,r=i.vals,f=i.containerStr,u=f?o.nestedProperty(a,f).get():a,l=h(u),m=l.auto!==!1,d=l.min,b=l.max,g=l.mid,_=function(){return o.aggNums(Math.min,null,r)},p=function(){return o.aggNums(Math.max,null,r)};if(d===void 0?d=_():m&&(u._colorAx&&s(d)?d=Math.min(d,_()):d=_()),b===void 0?b=p():m&&(u._colorAx&&s(b)?b=Math.max(b,p()):b=p()),m&&g!==void 0&&(b-g>g-d?d=g-(b-g):b-g<g-d&&(b=g+(g-d))),d===b&&(d-=.5,b+=.5),l._sync("min",d),l._sync("max",b),l.autocolorscale){var A;d*b<0?A=n.colorscale.diverging:d>=0?A=n.colorscale.sequential:A=n.colorscale.sequentialminus,l._sync("colorscale",A)}}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(e,I,F){var s=e("../../lib"),o=e("./helpers").hasColorscale,h=e("./helpers").extractOpts;I.exports=function(t,a){function i(d,b){var g=d["_"+b];g!==void 0&&(d[b]=g)}function n(d,b){var g=b.container?s.nestedProperty(d,b.container).get():d;if(g)if(g.coloraxis)g._colorAx=a[g.coloraxis];else{var _=h(g),p=_.auto;(p||_.min===void 0)&&i(g,b.min),(p||_.max===void 0)&&i(g,b.max),_.autocolorscale&&i(g,"colorscale")}}for(var r=0;r<t.length;r++){var f=t[r],u=f._module.colorbar;if(u)if(Array.isArray(u))for(var l=0;l<u.length;l++)n(f,u[l]);else n(f,u);o(f,"marker.line")&&n(f,{container:"marker.line",min:"cmin",max:"cmax"})}for(var m in a._colorAxes)n(a[m],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../colorbar/has_colorbar"),y=e("../colorbar/defaults"),t=e("./scales").isValid,a=e("../../registry").traceIs;function i(n,r){var f=r.slice(0,r.length-1);return r?o.nestedProperty(n,f).get()||{}:n}I.exports=function n(r,f,u,l,m){var d=m.prefix,b=m.cLetter,g="_module"in f,_=i(r,d),p=i(f,d),A=i(f._template||{},d)||{},c=function(){return delete r.coloraxis,delete f.coloraxis,n(r,f,u,l,m)};if(g){var S=u._colorAxes||{},T=l(d+"coloraxis");if(T){var x=a(f,"contour")&&o.nestedProperty(f,"contours.coloring").get()||"heatmap",w=S[T];w?(w[2].push(c),w[0]!==x&&(w[0]=!1,o.warn(["Ignoring coloraxis:",T,"setting","as it is linked to incompatible colorscales."].join(" ")))):S[T]=[x,f,[c]];return}}var v=_[b+"min"],C=_[b+"max"],M=s(v)&&s(C)&&v<C,E=l(d+b+"auto",!M);E?l(d+b+"mid"):(l(d+b+"min"),l(d+b+"max"));var L=_.colorscale,z=A.colorscale,O;if(L!==void 0&&(O=!t(L)),z!==void 0&&(O=!t(z)),l(d+"autocolorscale",O),l(d+"colorscale"),l(d+"reversescale"),d!=="marker.line."){var R;d&&g&&(R=h(_));var D=l(d+"showscale",R);D&&(d&&A&&(p._template=A),y(_,p,u))}}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(e,I,F){var s=e("@plotly/d3"),o=e("tinycolor2"),h=e("fast-isnumeric"),y=e("../../lib"),t=e("../color"),a=e("./scales").isValid;function i(g,_,p){var A=_?y.nestedProperty(g,_).get()||{}:g,c=A[p||"color"],S=!1;if(y.isArrayOrTypedArray(c)){for(var T=0;T<c.length;T++)if(h(c[T])){S=!0;break}}return y.isPlainObject(A)&&(S||A.showscale===!0||h(A.cmin)&&h(A.cmax)||a(A.colorscale)||y.isPlainObject(A.colorbar))}var n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function f(g){var _=g._colorAx,p=_||g,A={},c,S,T;for(S=0;S<n.length;S++)T=n[S],A[T]=p[T];if(_)for(c="c",S=0;S<r.length;S++)T=r[S],A[T]=p["c"+T];else{var x;for(S=0;S<r.length;S++){if(T=r[S],x="c"+T,x in p){A[T]=p[x];continue}x="z"+T,x in p&&(A[T]=p[x])}c=x.charAt(0)}return A._sync=function(w,v){var C=r.indexOf(w)!==-1?c+w:w;p[C]=p["_"+C]=v},A}function u(g){for(var _=f(g),p=_.min,A=_.max,c=_.reversescale?l(_.colorscale):_.colorscale,S=c.length,T=new Array(S),x=new Array(S),w=0;w<S;w++){var v=c[w];T[w]=p+v[0]*(A-p),x[w]=v[1]}return{domain:T,range:x}}function l(g){for(var _=g.length,p=new Array(_),A=_-1,c=0;A>=0;A--,c++){var S=g[A];p[c]=[1-S[0],S[1]]}return p}function m(g,_){_=_||{};for(var p=g.domain,A=g.range,c=A.length,S=new Array(c),T=0;T<c;T++){var x=o(A[T]).toRgb();S[T]=[x.r,x.g,x.b,x.a]}var w=s.scale.linear().domain(p).range(S).clamp(!0),v=_.noNumericCheck,C=_.returnArray,M;return v&&C?M=w:v?M=function(E){return b(w(E))}:C?M=function(E){return h(E)?w(E):o(E).isValid()?E:t.defaultLine}:M=function(E){return h(E)?b(w(E)):o(E).isValid()?E:t.defaultLine},M.domain=w.domain,M.range=function(){return A},M}function d(g,_){return m(u(g),_)}function b(g){var _={r:g[0],g:g[1],b:g[2],a:g[3]};return o(_).toRgbString()}I.exports={hasColorscale:i,extractOpts:f,extractScale:u,flipScale:l,makeColorScaleFunc:m,makeColorScaleFuncFromTrace:d}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(e,I,F){var s=e("./scales"),o=e("./helpers");I.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:s.scales,defaultScale:s.defaultScale,getScale:s.get,isValidScale:s.isValid,hasColorscale:o.hasColorscale,extractOpts:o.extractOpts,extractScale:o.extractScale,flipScale:o.flipScale,makeColorScaleFunc:o.makeColorScaleFunc,makeColorScaleFuncFromTrace:o.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(e,I,F){var s=e("../../lib/extend").extendFlat,o=e("./attributes"),h=e("./scales").scales;I.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:h.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:h.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:h.RdBu,editType:"calc"}},coloraxis:s({_isSubplotObj:!0,editType:"calc"},o("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(e,I,F){var s=e("../../lib"),o=e("../../plot_api/plot_template"),h=e("./layout_attributes"),y=e("./defaults");I.exports=function(a,i){function n(g,_){return s.coerce(a,i,h,g,_)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var r=i._colorAxes,f,u;function l(g,_){return s.coerce(f,u,h.coloraxis,g,_)}for(var m in r){var d=r[m];if(d[0])f=a[m]||{},u=o.newContainer(i,m,"coloraxis"),u._name=m,y(f,u,i,l,{prefix:"",cLetter:"c"});else{for(var b=0;b<d[2].length;b++)d[2][b]();delete i._colorAxes[m]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(e,I,F){var s=e("tinycolor2"),o={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},h=o.RdBu;function y(i,n){if(n||(n=h),!i)return n;function r(){try{i=o[i]||JSON.parse(i)}catch{i=n}}return typeof i=="string"&&(r(),typeof i=="string"&&r()),t(i)?i:n}function t(i){var n=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var r=0;r<i.length;r++){var f=i[r];if(f.length!==2||+f[0]<n||!s(f[1]).isValid())return!1;n=+f[0]}return!0}function a(i){return o[i]!==void 0?!0:t(i)}I.exports={scales:o,defaultScale:h,get:y,isValid:a}},{tinycolor2:312}],382:[function(e,I,F){I.exports=function(o,h,y,t,a){var i=(o-y)/(t-y),n=i+h/(t-y),r=(i+n)/2;return a==="left"||a==="bottom"?i:a==="center"||a==="middle"?r:a==="right"||a==="top"?n:i<2/3-r?i:n>4/3-r?n:r}},{}],383:[function(e,I,F){var s=e("../../lib"),o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];I.exports=function(y,t,a,i){return a==="left"?y=0:a==="center"?y=1:a==="right"?y=2:y=s.constrain(Math.floor(y*3),0,2),i==="bottom"?t=0:i==="middle"?t=1:i==="top"?t=2:t=s.constrain(Math.floor(t*3),0,2),o[t][y]}},{"../../lib":503}],384:[function(e,I,F){F.selectMode=function(s){return s==="lasso"||s==="select"},F.drawMode=function(s){return s==="drawclosedpath"||s==="drawopenpath"||s==="drawline"||s==="drawrect"||s==="drawcircle"},F.openMode=function(s){return s==="drawline"||s==="drawopenpath"},F.rectMode=function(s){return s==="select"||s==="drawline"||s==="drawrect"||s==="drawcircle"},F.freeMode=function(s){return s==="lasso"||s==="drawclosedpath"||s==="drawopenpath"},F.selectingOrDrawing=function(s){return F.freeMode(s)||F.rectMode(s)}},{}],385:[function(e,I,F){var s=e("mouse-event-offset"),o=e("has-hover"),h=e("has-passive-events"),y=e("../../lib").removeElement,t=e("../../plots/cartesian/constants"),a=I.exports={};a.align=e("./align"),a.getCursor=e("./cursor");var i=e("./unhover");a.unhover=i.wrapped,a.unhoverRaw=i.raw,a.init=function(u){var l=u.gd,m=1,d=l._context.doubleClickDelay,b=u.element,g,_,p,A,c,S,T,x;l._mouseDownTime||(l._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=C,h?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=C,b.addEventListener("touchstart",C,{passive:!1})):b.ontouchstart=C;function w(L,z,O){return Math.abs(L)<O&&(L=0),Math.abs(z)<O&&(z=0),[L,z]}var v=u.clampFn||w;function C(L){l._dragged=!1,l._dragging=!0;var z=r(L);g=z[0],_=z[1],T=L.target,S=L,x=L.buttons===2||L.ctrlKey,typeof L.clientX=="undefined"&&typeof L.clientY=="undefined"&&(L.clientX=g,L.clientY=_),p=new Date().getTime(),p-l._mouseDownTime<d?m+=1:(m=1,l._mouseDownTime=p),u.prepFn&&u.prepFn(L,g,_),o&&!x?(c=n(),c.style.cursor=window.getComputedStyle(b).cursor):o||(c=document,A=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),u.dragmode!==!1&&(L.preventDefault(),document.addEventListener("mousemove",M),document.addEventListener("touchmove",M,{passive:!1}))}function M(L){L.preventDefault();var z=r(L),O=u.minDrag||t.MINDRAG,R=v(z[0]-g,z[1]-_,O),D=R[0],H=R[1];(D||H)&&(l._dragged=!0,a.unhover(l,L)),l._dragged&&u.moveFn&&!x&&(l._dragdata={element:b,dx:D,dy:H},u.moveFn(D,H))}function E(L){if(delete l._dragdata,u.dragmode!==!1&&(L.preventDefault(),document.removeEventListener("mousemove",M),document.removeEventListener("touchmove",M)),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),o?y(c):A&&(c.documentElement.style.cursor=A,A=null),!l._dragging){l._dragged=!1;return}if(l._dragging=!1,new Date().getTime()-l._mouseDownTime>d&&(m=Math.max(m-1,1)),l._dragged)u.doneFn&&u.doneFn();else if(u.clickFn&&u.clickFn(m,S),!x){var z;try{z=new MouseEvent("click",L)}catch{var O=r(L);z=document.createEvent("MouseEvents"),z.initMouseEvent("click",L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,O[0],O[1],L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}T.dispatchEvent(z)}l._dragging=!1,l._dragged=!1}};function n(){var f=document.createElement("div");f.className="dragcover";var u=f.style;return u.position="fixed",u.left=0,u.right=0,u.top=0,u.bottom=0,u.zIndex=999999999,u.background="none",document.body.appendChild(f),f}a.coverSlip=n;function r(f){return s(f.changedTouches?f.changedTouches[0]:f,document.body)}},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(e,I,F){var s=e("../../lib/events"),o=e("../../lib/throttle"),h=e("../../lib/dom").getGraphDiv,y=e("../fx/constants"),t=I.exports={};t.wrapped=function(a,i,n){a=h(a),a._fullLayout&&o.clear(a._fullLayout._uid+y.HOVERID),t.raw(a,i,n)},t.raw=function(i,n){var r=i._fullLayout,f=i._hoverdata;n||(n={}),!(n.target&&!i._dragged&&s.triggerHandler(i,"plotly_beforehover",n)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,n.target&&f&&i.emit("plotly_unhover",{event:n,points:f}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(e,I,F){F.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},F.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=o.numberFormat,y=e("fast-isnumeric"),t=e("tinycolor2"),a=e("../../registry"),i=e("../color"),n=e("../colorscale"),r=o.strTranslate,f=e("../../lib/svg_text_utils"),u=e("../../constants/xmlns_namespaces"),l=e("../../constants/alignment"),m=l.LINE_SPACING,d=e("../../constants/interactions").DESELECTDIM,b=e("../../traces/scatter/subtypes"),g=e("../../traces/scatter/make_bubble_size_func"),_=e("../../components/fx/helpers").appendArrayPointValue,p=I.exports={};p.font=function(K,le,fe,ue){o.isPlainObject(le)&&(ue=le.color,fe=le.size,le=le.family),le&&K.style("font-family",le),fe+1&&K.style("font-size",fe+"px"),ue&&K.call(i.fill,ue)},p.setPosition=function(K,le,fe){K.attr("x",le).attr("y",fe)},p.setSize=function(K,le,fe){K.attr("width",le).attr("height",fe)},p.setRect=function(K,le,fe,ue,V){K.call(p.setPosition,le,fe).call(p.setSize,ue,V)},p.translatePoint=function(K,le,fe,ue){var V=fe.c2p(K.x),j=ue.c2p(K.y);if(y(V)&&y(j)&&le.node())le.node().nodeName==="text"?le.attr("x",V).attr("y",j):le.attr("transform",r(V,j));else return!1;return!0},p.translatePoints=function(K,le,fe){K.each(function(ue){var V=s.select(this);p.translatePoint(ue,V,le,fe)})},p.hideOutsideRangePoint=function(K,le,fe,ue,V,j){le.attr("display",fe.isPtWithinRange(K,V)&&ue.isPtWithinRange(K,j)?null:"none")},p.hideOutsideRangePoints=function(K,le){if(!!le._hasClipOnAxisFalse){var fe=le.xaxis,ue=le.yaxis;K.each(function(V){var j=V[0].trace,ee=j.xcalendar,q=j.ycalendar,X=a.traceIs(j,"bar-like")?".bartext":".point,.textpoint";K.selectAll(X).each(function(J){p.hideOutsideRangePoint(J,s.select(this),fe,ue,ee,q)})})}},p.crispRound=function(K,le,fe){return!le||!y(le)?fe||0:K._context.staticPlot?le:le<1?1:Math.round(le)},p.singleLineStyle=function(K,le,fe,ue,V){le.style("fill","none");var j=(((K||[])[0]||{}).trace||{}).line||{},ee=fe||j.width||0,q=V||j.dash||"";i.stroke(le,ue||j.color),p.dashLine(le,q,ee)},p.lineGroupStyle=function(K,le,fe,ue){K.style("fill","none").each(function(V){var j=(((V||[])[0]||{}).trace||{}).line||{},ee=le||j.width||0,q=ue||j.dash||"";s.select(this).call(i.stroke,fe||j.color).call(p.dashLine,q,ee)})},p.dashLine=function(K,le,fe){fe=+fe||0,le=p.dashStyle(le,fe),K.style({"stroke-dasharray":le,"stroke-width":fe+"px"})},p.dashStyle=function(K,le){le=+le||1;var fe=Math.max(le,3);return K==="solid"?K="":K==="dot"?K=fe+"px,"+fe+"px":K==="dash"?K=3*fe+"px,"+3*fe+"px":K==="longdash"?K=5*fe+"px,"+5*fe+"px":K==="dashdot"?K=3*fe+"px,"+fe+"px,"+fe+"px,"+fe+"px":K==="longdashdot"&&(K=5*fe+"px,"+2*fe+"px,"+fe+"px,"+2*fe+"px"),K};function A(K,le,fe){var ue=le.fillpattern,V=ue&&p.getPatternAttr(ue.shape,0,"");if(V){var j=p.getPatternAttr(ue.bgcolor,0,null),ee=p.getPatternAttr(ue.fgcolor,0,null),q=ue.fgopacity,X=p.getPatternAttr(ue.size,0,8),J=p.getPatternAttr(ue.solidity,0,.3),ie=le.uid;p.pattern(K,"point",fe,ie,V,X,J,void 0,ue.fillmode,j,ee,q)}else le.fillcolor&&K.call(i.fill,le.fillcolor)}p.singleFillStyle=function(K,le){var fe=s.select(K.node()),ue=fe.data(),V=((ue[0]||[])[0]||{}).trace||{};A(K,V,le)},p.fillGroupStyle=function(K,le){K.style("stroke-width",0).each(function(fe){var ue=s.select(this);fe[0].trace&&A(ue,fe[0].trace,le)})};var c=e("./symbol_defs");p.symbolNames=[],p.symbolFuncs=[],p.symbolNeedLines={},p.symbolNoDot={},p.symbolNoFill={},p.symbolList=[],Object.keys(c).forEach(function(K){var le=c[K],fe=le.n;p.symbolList.push(fe,String(fe),K,fe+100,String(fe+100),K+"-open"),p.symbolNames[fe]=K,p.symbolFuncs[fe]=le.f,le.needLine&&(p.symbolNeedLines[fe]=!0),le.noDot?p.symbolNoDot[fe]=!0:p.symbolList.push(fe+200,String(fe+200),K+"-dot",fe+300,String(fe+300),K+"-open-dot"),le.noFill&&(p.symbolNoFill[fe]=!0)});var S=p.symbolNames.length,T="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";p.symbolNumber=function(K){if(y(K))K=+K;else if(typeof K=="string"){var le=0;K.indexOf("-open")>0&&(le=100,K=K.replace("-open","")),K.indexOf("-dot")>0&&(le+=200,K=K.replace("-dot","")),K=p.symbolNames.indexOf(K),K>=0&&(K+=le)}return K%100>=S||K>=400?0:Math.floor(Math.max(K,0))};function x(K,le){var fe=K%100;return p.symbolFuncs[fe](le)+(K>=200?T:"")}var w={x1:1,x2:0,y1:0,y2:0},v={x1:0,x2:0,y1:1,y2:0},C=h("~f"),M={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:v},verticalreversed:{node:"linearGradient",attrs:v,reversed:!0}};p.gradient=function(K,le,fe,ue,V,j){for(var ee=V.length,q=M[ue],X=new Array(ee),J=0;J<ee;J++)q.reversed?X[ee-1-J]=[C((1-V[J][0])*100),V[J][1]]:X[J]=[C(V[J][0]*100),V[J][1]];var ie=le._fullLayout,ne="g"+ie._uid+"-"+fe,oe=ie._defs.select(".gradients").selectAll("#"+ne).data([ue+X.join(";")],o.identity);oe.exit().remove(),oe.enter().append(q.node).each(function(){var se=s.select(this);q.attrs&&se.attr(q.attrs),se.attr("id",ne);var me=se.selectAll("stop").data(X);me.exit().remove(),me.enter().append("stop"),me.each(function(ce){var pe=t(ce[1]);s.select(this).attr({offset:ce[0]+"%","stop-color":i.tinyRGB(pe),"stop-opacity":pe.getAlpha()})})}),K.style(j,re(ne,le)).style(j+"-opacity",null),K.classed("gradient_filled",!0)},p.pattern=function(K,le,fe,ue,V,j,ee,q,X,J,ie,ne){var oe=le==="legend";q&&(X==="overlay"?(J=q,ie=i.contrast(J)):(J=void 0,ie=q));var se=fe._fullLayout,me="p"+se._uid+"-"+ue,ce,pe,xe=function(Ve,Je,ze,De,je){return De+(je-De)*(Ve-Je)/(ze-Je)},Se,Ae,Ce,Ee,Oe={};switch(V){case"/":ce=j*Math.sqrt(2),pe=j*Math.sqrt(2),Se="M-"+ce/4+","+pe/4+"l"+ce/2+",-"+pe/2+"M0,"+pe+"L"+ce+",0M"+ce/4*3+","+pe/4*5+"l"+ce/2+",-"+pe/2,Ae=ee*j,Ee="path",Oe={d:Se,opacity:ne,stroke:ie,"stroke-width":Ae+"px"};break;case"\\":ce=j*Math.sqrt(2),pe=j*Math.sqrt(2),Se="M"+ce/4*3+",-"+pe/4+"l"+ce/2+","+pe/2+"M0,0L"+ce+","+pe+"M-"+ce/4+","+pe/4*3+"l"+ce/2+","+pe/2,Ae=ee*j,Ee="path",Oe={d:Se,opacity:ne,stroke:ie,"stroke-width":Ae+"px"};break;case"x":ce=j*Math.sqrt(2),pe=j*Math.sqrt(2),Se="M-"+ce/4+","+pe/4+"l"+ce/2+",-"+pe/2+"M0,"+pe+"L"+ce+",0M"+ce/4*3+","+pe/4*5+"l"+ce/2+",-"+pe/2+"M"+ce/4*3+",-"+pe/4+"l"+ce/2+","+pe/2+"M0,0L"+ce+","+pe+"M-"+ce/4+","+pe/4*3+"l"+ce/2+","+pe/2,Ae=j-j*Math.sqrt(1-ee),Ee="path",Oe={d:Se,opacity:ne,stroke:ie,"stroke-width":Ae+"px"};break;case"|":ce=j,pe=j,Ee="path",Se="M"+ce/2+",0L"+ce/2+","+pe,Ae=ee*j,Ee="path",Oe={d:Se,opacity:ne,stroke:ie,"stroke-width":Ae+"px"};break;case"-":ce=j,pe=j,Ee="path",Se="M0,"+pe/2+"L"+ce+","+pe/2,Ae=ee*j,Ee="path",Oe={d:Se,opacity:ne,stroke:ie,"stroke-width":Ae+"px"};break;case"+":ce=j,pe=j,Ee="path",Se="M"+ce/2+",0L"+ce/2+","+pe+"M0,"+pe/2+"L"+ce+","+pe/2,Ae=j-j*Math.sqrt(1-ee),Ee="path",Oe={d:Se,opacity:ne,stroke:ie,"stroke-width":Ae+"px"};break;case".":ce=j,pe=j,ee<Math.PI/4?Ce=Math.sqrt(ee*j*j/Math.PI):Ce=xe(ee,Math.PI/4,1,j/2,j/Math.sqrt(2)),Ee="circle",Oe={cx:ce/2,cy:pe/2,r:Ce,opacity:ne,fill:ie};break}var _e=[V||"noSh",J||"noBg",ie||"noFg",j,ee].join(";"),Re=se._defs.select(".patterns").selectAll("#"+me).data([_e],o.identity);Re.exit().remove(),Re.enter().append("pattern").each(function(){var Ve=s.select(this);if(Ve.attr({id:me,width:ce+"px",height:pe+"px",patternUnits:"userSpaceOnUse",patternTransform:oe?"scale(0.8)":""}),J){var Je=Ve.selectAll("rect").data([0]);Je.exit().remove(),Je.enter().append("rect").attr({width:ce+"px",height:pe+"px",fill:J})}var ze=Ve.selectAll(Ee).data([0]);ze.exit().remove(),ze.enter().append(Ee).attr(Oe)}),K.style("fill",re(me,fe)).style("fill-opacity",null),K.classed("pattern_filled",!0)},p.initGradients=function(K){var le=K._fullLayout,fe=o.ensureSingle(le._defs,"g","gradients");fe.selectAll("linearGradient,radialGradient").remove(),s.select(K).selectAll(".gradient_filled").classed("gradient_filled",!1)},p.initPatterns=function(K){var le=K._fullLayout,fe=o.ensureSingle(le._defs,"g","patterns");fe.selectAll("pattern").remove(),s.select(K).selectAll(".pattern_filled").classed("pattern_filled",!1)},p.getPatternAttr=function(K,le,fe){return K&&o.isArrayOrTypedArray(K)?le<K.length?K[le]:fe:K},p.pointStyle=function(K,le,fe){if(!!K.size()){var ue=p.makePointStyleFns(le);K.each(function(V){p.singlePointStyle(V,s.select(this),le,ue,fe)})}},p.singlePointStyle=function(K,le,fe,ue,V){var j=fe.marker,ee=j.line;if(le.style("opacity",ue.selectedOpacityFn?ue.selectedOpacityFn(K):K.mo===void 0?j.opacity:K.mo),ue.ms2mrc){var q;K.ms==="various"||j.size==="various"?q=3:q=ue.ms2mrc(K.ms),K.mrc=q,ue.selectedSizeFn&&(q=K.mrc=ue.selectedSizeFn(K));var X=p.symbolNumber(K.mx||j.symbol)||0;K.om=X%200>=100,le.attr("d",x(X,q))}var J=!1,ie,ne,oe;if(K.so)oe=ee.outlierwidth,ne=ee.outliercolor,ie=j.outliercolor;else{var se=(ee||{}).width;oe=(K.mlw+1||se+1||(K.trace?(K.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in K?ne=K.mlcc=ue.lineScale(K.mlc):o.isArrayOrTypedArray(ee.color)?ne=i.defaultLine:ne=ee.color,o.isArrayOrTypedArray(j.color)&&(ie=i.defaultLine,J=!0),"mc"in K?ie=K.mcc=ue.markerScale(K.mc):ie=j.color||"rgba(0,0,0,0)",ue.selectedColorFn&&(ie=ue.selectedColorFn(K))}if(K.om)le.call(i.stroke,ie).style({"stroke-width":(oe||1)+"px",fill:"none"});else{le.style("stroke-width",(K.isBlank?0:oe)+"px");var me=j.gradient,ce=K.mgt;ce?J=!0:ce=me&&me.type,o.isArrayOrTypedArray(ce)&&(ce=ce[0],M[ce]||(ce=0));var pe=j.pattern,xe=pe&&p.getPatternAttr(pe.shape,K.i,"");if(ce&&ce!=="none"){var Se=K.mgc;Se?J=!0:Se=me.color;var Ae=fe.uid;J&&(Ae+="-"+K.i),p.gradient(le,V,Ae,ce,[[0,Se],[1,ie]],"fill")}else if(xe){var Ce=p.getPatternAttr(pe.bgcolor,K.i,null),Ee=p.getPatternAttr(pe.fgcolor,K.i,null),Oe=pe.fgopacity,_e=p.getPatternAttr(pe.size,K.i,8),Re=p.getPatternAttr(pe.solidity,K.i,.3),Ve=K.mcc||o.isArrayOrTypedArray(pe.shape)||o.isArrayOrTypedArray(pe.bgcolor)||o.isArrayOrTypedArray(pe.size)||o.isArrayOrTypedArray(pe.solidity),Je=fe.uid;Ve&&(Je+="-"+K.i),p.pattern(le,"point",V,Je,xe,_e,Re,K.mcc,pe.fillmode,Ce,Ee,Oe)}else i.fill(le,ie);oe&&i.stroke(le,ne)}},p.makePointStyleFns=function(K){var le={},fe=K.marker;return le.markerScale=p.tryColorscale(fe,""),le.lineScale=p.tryColorscale(fe,"line"),a.traceIs(K,"symbols")&&(le.ms2mrc=b.isBubble(K)?g(K):function(){return(fe.size||6)/2}),K.selectedpoints&&o.extendFlat(le,p.makeSelectedPointStyleFns(K)),le},p.makeSelectedPointStyleFns=function(K){var le={},fe=K.selected||{},ue=K.unselected||{},V=K.marker||{},j=fe.marker||{},ee=ue.marker||{},q=V.opacity,X=j.opacity,J=ee.opacity,ie=X!==void 0,ne=J!==void 0;(o.isArrayOrTypedArray(q)||ie||ne)&&(le.selectedOpacityFn=function(Ce){var Ee=Ce.mo===void 0?V.opacity:Ce.mo;return Ce.selected?ie?X:Ee:ne?J:d*Ee});var oe=V.color,se=j.color,me=ee.color;(se||me)&&(le.selectedColorFn=function(Ce){var Ee=Ce.mcc||oe;return Ce.selected?se||Ee:me||Ee});var ce=V.size,pe=j.size,xe=ee.size,Se=pe!==void 0,Ae=xe!==void 0;return a.traceIs(K,"symbols")&&(Se||Ae)&&(le.selectedSizeFn=function(Ce){var Ee=Ce.mrc||ce/2;return Ce.selected?Se?pe/2:Ee:Ae?xe/2:Ee}),le},p.makeSelectedTextStyleFns=function(K){var le={},fe=K.selected||{},ue=K.unselected||{},V=K.textfont||{},j=fe.textfont||{},ee=ue.textfont||{},q=V.color,X=j.color,J=ee.color;return le.selectedTextColorFn=function(ie){var ne=ie.tc||q;return ie.selected?X||ne:J||(X?ne:i.addOpacity(ne,d))},le},p.selectedPointStyle=function(K,le){if(!(!K.size()||!le.selectedpoints)){var fe=p.makeSelectedPointStyleFns(le),ue=le.marker||{},V=[];fe.selectedOpacityFn&&V.push(function(j,ee){j.style("opacity",fe.selectedOpacityFn(ee))}),fe.selectedColorFn&&V.push(function(j,ee){i.fill(j,fe.selectedColorFn(ee))}),fe.selectedSizeFn&&V.push(function(j,ee){var q=ee.mx||ue.symbol||0,X=fe.selectedSizeFn(ee);j.attr("d",x(p.symbolNumber(q),X)),ee.mrc2=X}),V.length&&K.each(function(j){for(var ee=s.select(this),q=0;q<V.length;q++)V[q](ee,j)})}},p.tryColorscale=function(K,le){var fe=le?o.nestedProperty(K,le).get():K;if(fe){var ue=fe.color;if((fe.colorscale||fe._colorAx)&&o.isArrayOrTypedArray(ue))return n.makeColorScaleFuncFromTrace(fe)}return o.identity};var E={start:1,end:-1,middle:0,bottom:1,top:-1};function L(K,le,fe,ue,V){var j=s.select(K.node().parentNode),ee=le.indexOf("top")!==-1?"top":le.indexOf("bottom")!==-1?"bottom":"middle",q=le.indexOf("left")!==-1?"end":le.indexOf("right")!==-1?"start":"middle",X=ue?ue/.8+1:0,J=(f.lineCount(K)-1)*m+1,ie=E[q]*X,ne=fe*.75+E[ee]*X+(E[ee]-1)*J*fe/2;K.attr("text-anchor",q),V||j.attr("transform",r(ie,ne))}function z(K,le){var fe=K.ts||le.textfont.size;return y(fe)&&fe>0?fe:0}p.textPointStyle=function(K,le,fe){if(!!K.size()){var ue;if(le.selectedpoints){var V=p.makeSelectedTextStyleFns(le);ue=V.selectedTextColorFn}var j=le.texttemplate,ee=fe._fullLayout;K.each(function(q){var X=s.select(this),J=j?o.extractOption(q,le,"txt","texttemplate"):o.extractOption(q,le,"tx","text");if(!J&&J!==0){X.remove();return}if(j){var ie=le._module.formatLabels,ne=ie?ie(q,le,ee):{},oe={};_(oe,le,q.i);var se=le._meta||{};J=o.texttemplateString(J,ne,ee._d3locale,oe,q,se)}var me=q.tp||le.textposition,ce=z(q,le),pe=ue?ue(q):q.tc||le.textfont.color;X.call(p.font,q.tf||le.textfont.family,ce,pe).text(J).call(f.convertToTspans,fe).call(L,me,ce,q.mrc)})}},p.selectedTextStyle=function(K,le){if(!(!K.size()||!le.selectedpoints)){var fe=p.makeSelectedTextStyleFns(le);K.each(function(ue){var V=s.select(this),j=fe.selectedTextColorFn(ue),ee=ue.tp||le.textposition,q=z(ue,le);i.fill(V,j);var X=a.traceIs(le,"bar-like");L(V,ee,q,ue.mrc2||ue.mrc,X)})}};var O=.5;p.smoothopen=function(K,le){if(K.length<3)return"M"+K.join("L");var fe="M"+K[0],ue=[],V;for(V=1;V<K.length-1;V++)ue.push(R(K[V-1],K[V],K[V+1],le));for(fe+="Q"+ue[0][0]+" "+K[1],V=2;V<K.length-1;V++)fe+="C"+ue[V-2][1]+" "+ue[V-1][0]+" "+K[V];return fe+="Q"+ue[K.length-3][1]+" "+K[K.length-1],fe},p.smoothclosed=function(K,le){if(K.length<3)return"M"+K.join("L")+"Z";var fe="M"+K[0],ue=K.length-1,V=[R(K[ue],K[0],K[1],le)],j;for(j=1;j<ue;j++)V.push(R(K[j-1],K[j],K[j+1],le));for(V.push(R(K[ue-1],K[ue],K[0],le)),j=1;j<=ue;j++)fe+="C"+V[j-1][1]+" "+V[j][0]+" "+K[j];return fe+="C"+V[ue][1]+" "+V[0][0]+" "+K[0]+"Z",fe};function R(K,le,fe,ue){var V=K[0]-le[0],j=K[1]-le[1],ee=fe[0]-le[0],q=fe[1]-le[1],X=Math.pow(V*V+j*j,O/2),J=Math.pow(ee*ee+q*q,O/2),ie=(J*J*V-X*X*ee)*ue,ne=(J*J*j-X*X*q)*ue,oe=3*J*(X+J),se=3*X*(X+J);return[[s.round(le[0]+(oe&&ie/oe),2),s.round(le[1]+(oe&&ne/oe),2)],[s.round(le[0]-(se&&ie/se),2),s.round(le[1]-(se&&ne/se),2)]]}var D={hv:function(K,le){return"H"+s.round(le[0],2)+"V"+s.round(le[1],2)},vh:function(K,le){return"V"+s.round(le[1],2)+"H"+s.round(le[0],2)},hvh:function(K,le){return"H"+s.round((K[0]+le[0])/2,2)+"V"+s.round(le[1],2)+"H"+s.round(le[0],2)},vhv:function(K,le){return"V"+s.round((K[1]+le[1])/2,2)+"H"+s.round(le[0],2)+"V"+s.round(le[1],2)}},H=function(K,le){return"L"+s.round(le[0],2)+","+s.round(le[1],2)};p.steps=function(K){var le=D[K]||H;return function(fe){for(var ue="M"+s.round(fe[0][0],2)+","+s.round(fe[0][1],2),V=1;V<fe.length;V++)ue+=le(fe[V-1],fe[V]);return ue}},p.makeTester=function(){var K=o.ensureSingleById(s.select("body"),"svg","js-plotly-tester",function(fe){fe.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),le=o.ensureSingle(K,"path","js-reference-point",function(fe){fe.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});p.tester=K,p.testref=le},p.savedBBoxes={};var B=0,$=1e4;p.bBox=function(K,le,fe){fe||(fe=W(K));var ue;if(fe){if(ue=p.savedBBoxes[fe],ue)return o.extendFlat({},ue)}else if(K.childNodes.length===1){var V=K.childNodes[0];if(fe=W(V),fe){var j=+V.getAttribute("x")||0,ee=+V.getAttribute("y")||0,q=V.getAttribute("transform");if(!q){var X=p.bBox(V,!1,fe);return j&&(X.left+=j,X.right+=j),ee&&(X.top+=ee,X.bottom+=ee),X}if(fe+="~"+j+"~"+ee+"~"+q,ue=p.savedBBoxes[fe],ue)return o.extendFlat({},ue)}}var J,ie;le?J=K:(ie=p.tester.node(),J=K.cloneNode(!0),ie.appendChild(J)),s.select(J).attr("transform",null).call(f.positionText,0,0);var ne=J.getBoundingClientRect(),oe=p.testref.node().getBoundingClientRect();le||ie.removeChild(J);var se={height:ne.height,width:ne.width,left:ne.left-oe.left,top:ne.top-oe.top,right:ne.right-oe.left,bottom:ne.bottom-oe.top};return B>=$&&(p.savedBBoxes={},B=0),fe&&(p.savedBBoxes[fe]=se),B++,o.extendFlat({},se)};function W(K){var le=K.getAttribute("data-unformatted");if(le!==null)return le+K.getAttribute("data-math")+K.getAttribute("text-anchor")+K.getAttribute("style")}p.setClipUrl=function(K,le,fe){K.attr("clip-path",re(le,fe))};function re(K,le){if(!K)return null;var fe=le._context,ue=fe._exportedPlot?"":fe._baseUrl||"";return ue?"url('"+ue+"#"+K+"')":"url(#"+K+")"}p.getTranslate=function(K){var le=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,fe=K.attr?"attr":"getAttribute",ue=K[fe]("transform")||"",V=ue.replace(le,function(j,ee,q){return[ee,q].join(" ")}).split(" ");return{x:+V[0]||0,y:+V[1]||0}},p.setTranslate=function(K,le,fe){var ue=/(\btranslate\(.*?\);?)/,V=K.attr?"attr":"getAttribute",j=K.attr?"attr":"setAttribute",ee=K[V]("transform")||"";return le=le||0,fe=fe||0,ee=ee.replace(ue,"").trim(),ee+=r(le,fe),ee=ee.trim(),K[j]("transform",ee),ee},p.getScale=function(K){var le=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,fe=K.attr?"attr":"getAttribute",ue=K[fe]("transform")||"",V=ue.replace(le,function(j,ee,q){return[ee,q].join(" ")}).split(" ");return{x:+V[0]||1,y:+V[1]||1}},p.setScale=function(K,le,fe){var ue=/(\bscale\(.*?\);?)/,V=K.attr?"attr":"getAttribute",j=K.attr?"attr":"setAttribute",ee=K[V]("transform")||"";return le=le||1,fe=fe||1,ee=ee.replace(ue,"").trim(),ee+="scale("+le+","+fe+")",ee=ee.trim(),K[j]("transform",ee),ee};var Q=/\s*sc.*/;p.setPointGroupScale=function(K,le,fe){if(le=le||1,fe=fe||1,!!K){var ue=le===1&&fe===1?"":"scale("+le+","+fe+")";K.each(function(){var V=(this.getAttribute("transform")||"").replace(Q,"");V+=ue,V=V.trim(),this.setAttribute("transform",V)})}};var Z=/translate\([^)]*\)\s*$/;p.setTextPointsScale=function(K,le,fe){!K||K.each(function(){var ue,V=s.select(this),j=V.select("text");if(!!j.node()){var ee=parseFloat(j.attr("x")||0),q=parseFloat(j.attr("y")||0),X=(V.attr("transform")||"").match(Z);le===1&&fe===1?ue=[]:ue=[r(ee,q),"scale("+le+","+fe+")",r(-ee,-q)],X&&ue.push(X),V.attr("transform",ue.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":944,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(e,I,F){var s=e("@plotly/d3");I.exports={circle:{n:0,f:function(o){var h=s.round(o,2);return"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z"}},square:{n:1,f:function(o){var h=s.round(o,2);return"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z"}},diamond:{n:2,f:function(o){var h=s.round(o*1.3,2);return"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"Z"}},cross:{n:3,f:function(o){var h=s.round(o*.4,2),y=s.round(o*1.2,2);return"M"+y+","+h+"H"+h+"V"+y+"H-"+h+"V"+h+"H-"+y+"V-"+h+"H-"+h+"V-"+y+"H"+h+"V-"+h+"H"+y+"Z"}},x:{n:4,f:function(o){var h=s.round(o*.8/Math.sqrt(2),2),y="l"+h+","+h,t="l"+h+",-"+h,a="l-"+h+",-"+h,i="l-"+h+","+h;return"M0,"+h+y+t+a+t+a+i+a+i+y+i+y+"Z"}},"triangle-up":{n:5,f:function(o){var h=s.round(o*2/Math.sqrt(3),2),y=s.round(o/2,2),t=s.round(o,2);return"M-"+h+","+y+"H"+h+"L0,-"+t+"Z"}},"triangle-down":{n:6,f:function(o){var h=s.round(o*2/Math.sqrt(3),2),y=s.round(o/2,2),t=s.round(o,2);return"M-"+h+",-"+y+"H"+h+"L0,"+t+"Z"}},"triangle-left":{n:7,f:function(o){var h=s.round(o*2/Math.sqrt(3),2),y=s.round(o/2,2),t=s.round(o,2);return"M"+y+",-"+h+"V"+h+"L-"+t+",0Z"}},"triangle-right":{n:8,f:function(o){var h=s.round(o*2/Math.sqrt(3),2),y=s.round(o/2,2),t=s.round(o,2);return"M-"+y+",-"+h+"V"+h+"L"+t+",0Z"}},"triangle-ne":{n:9,f:function(o){var h=s.round(o*.6,2),y=s.round(o*1.2,2);return"M-"+y+",-"+h+"H"+h+"V"+y+"Z"}},"triangle-se":{n:10,f:function(o){var h=s.round(o*.6,2),y=s.round(o*1.2,2);return"M"+h+",-"+y+"V"+h+"H-"+y+"Z"}},"triangle-sw":{n:11,f:function(o){var h=s.round(o*.6,2),y=s.round(o*1.2,2);return"M"+y+","+h+"H-"+h+"V-"+y+"Z"}},"triangle-nw":{n:12,f:function(o){var h=s.round(o*.6,2),y=s.round(o*1.2,2);return"M-"+h+","+y+"V-"+h+"H"+y+"Z"}},pentagon:{n:13,f:function(o){var h=s.round(o*.951,2),y=s.round(o*.588,2),t=s.round(-o,2),a=s.round(o*-.309,2),i=s.round(o*.809,2);return"M"+h+","+a+"L"+y+","+i+"H-"+y+"L-"+h+","+a+"L0,"+t+"Z"}},hexagon:{n:14,f:function(o){var h=s.round(o,2),y=s.round(o/2,2),t=s.round(o*Math.sqrt(3)/2,2);return"M"+t+",-"+y+"V"+y+"L0,"+h+"L-"+t+","+y+"V-"+y+"L0,-"+h+"Z"}},hexagon2:{n:15,f:function(o){var h=s.round(o,2),y=s.round(o/2,2),t=s.round(o*Math.sqrt(3)/2,2);return"M-"+y+","+t+"H"+y+"L"+h+",0L"+y+",-"+t+"H-"+y+"L-"+h+",0Z"}},octagon:{n:16,f:function(o){var h=s.round(o*.924,2),y=s.round(o*.383,2);return"M-"+y+",-"+h+"H"+y+"L"+h+",-"+y+"V"+y+"L"+y+","+h+"H-"+y+"L-"+h+","+y+"V-"+y+"Z"}},star:{n:17,f:function(o){var h=o*1.4,y=s.round(h*.225,2),t=s.round(h*.951,2),a=s.round(h*.363,2),i=s.round(h*.588,2),n=s.round(-h,2),r=s.round(h*-.309,2),f=s.round(h*.118,2),u=s.round(h*.809,2),l=s.round(h*.382,2);return"M"+y+","+r+"H"+t+"L"+a+","+f+"L"+i+","+u+"L0,"+l+"L-"+i+","+u+"L-"+a+","+f+"L-"+t+","+r+"H-"+y+"L0,"+n+"Z"}},hexagram:{n:18,f:function(o){var h=s.round(o*.66,2),y=s.round(o*.38,2),t=s.round(o*.76,2);return"M-"+t+",0l-"+y+",-"+h+"h"+t+"l"+y+",-"+h+"l"+y+","+h+"h"+t+"l-"+y+","+h+"l"+y+","+h+"h-"+t+"l-"+y+","+h+"l-"+y+",-"+h+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(o){var h=s.round(o*Math.sqrt(3)*.8,2),y=s.round(o*.8,2),t=s.round(o*1.6,2),a=s.round(o*4,2),i="A "+a+","+a+" 0 0 1 ";return"M-"+h+","+y+i+h+","+y+i+"0,-"+t+i+"-"+h+","+y+"Z"}},"star-triangle-down":{n:20,f:function(o){var h=s.round(o*Math.sqrt(3)*.8,2),y=s.round(o*.8,2),t=s.round(o*1.6,2),a=s.round(o*4,2),i="A "+a+","+a+" 0 0 1 ";return"M"+h+",-"+y+i+"-"+h+",-"+y+i+"0,"+t+i+h+",-"+y+"Z"}},"star-square":{n:21,f:function(o){var h=s.round(o*1.1,2),y=s.round(o*2,2),t="A "+y+","+y+" 0 0 1 ";return"M-"+h+",-"+h+t+"-"+h+","+h+t+h+","+h+t+h+",-"+h+t+"-"+h+",-"+h+"Z"}},"star-diamond":{n:22,f:function(o){var h=s.round(o*1.4,2),y=s.round(o*1.9,2),t="A "+y+","+y+" 0 0 1 ";return"M-"+h+",0"+t+"0,"+h+t+h+",0"+t+"0,-"+h+t+"-"+h+",0Z"}},"diamond-tall":{n:23,f:function(o){var h=s.round(o*.7,2),y=s.round(o*1.4,2);return"M0,"+y+"L"+h+",0L0,-"+y+"L-"+h+",0Z"}},"diamond-wide":{n:24,f:function(o){var h=s.round(o*1.4,2),y=s.round(o*.7,2);return"M0,"+y+"L"+h+",0L0,-"+y+"L-"+h+",0Z"}},hourglass:{n:25,f:function(o){var h=s.round(o,2);return"M"+h+","+h+"H-"+h+"L"+h+",-"+h+"H-"+h+"Z"},noDot:!0},bowtie:{n:26,f:function(o){var h=s.round(o,2);return"M"+h+","+h+"V-"+h+"L-"+h+","+h+"V-"+h+"Z"},noDot:!0},"circle-cross":{n:27,f:function(o){var h=s.round(o,2);return"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(o){var h=s.round(o,2),y=s.round(o/Math.sqrt(2),2);return"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(o){var h=s.round(o,2);return"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(o){var h=s.round(o,2);return"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h+"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(o){var h=s.round(o*1.3,2);return"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"ZM0,-"+h+"V"+h+"M-"+h+",0H"+h},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(o){var h=s.round(o*1.3,2),y=s.round(o*.65,2);return"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"ZM-"+y+",-"+y+"L"+y+","+y+"M-"+y+","+y+"L"+y+",-"+y},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(o){var h=s.round(o*1.4,2);return"M0,"+h+"V-"+h+"M"+h+",0H-"+h},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(o){var h=s.round(o,2);return"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(o){var h=s.round(o*1.2,2),y=s.round(o*.85,2);return"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(o){var h=s.round(o/2,2),y=s.round(o,2);return"M"+h+","+y+"V-"+y+"m-"+y+",0V"+y+"M"+y+","+h+"H-"+y+"m0,-"+y+"H"+y},needLine:!0,noFill:!0},"y-up":{n:37,f:function(o){var h=s.round(o*1.2,2),y=s.round(o*1.6,2),t=s.round(o*.8,2);return"M-"+h+","+t+"L0,0M"+h+","+t+"L0,0M0,-"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(o){var h=s.round(o*1.2,2),y=s.round(o*1.6,2),t=s.round(o*.8,2);return"M-"+h+",-"+t+"L0,0M"+h+",-"+t+"L0,0M0,"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(o){var h=s.round(o*1.2,2),y=s.round(o*1.6,2),t=s.round(o*.8,2);return"M"+t+","+h+"L0,0M"+t+",-"+h+"L0,0M-"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(o){var h=s.round(o*1.2,2),y=s.round(o*1.6,2),t=s.round(o*.8,2);return"M-"+t+","+h+"L0,0M-"+t+",-"+h+"L0,0M"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(o){var h=s.round(o*1.4,2);return"M"+h+",0H-"+h},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(o){var h=s.round(o*1.4,2);return"M0,"+h+"V-"+h},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(o){var h=s.round(o,2);return"M"+h+",-"+h+"L-"+h+","+h},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(o){var h=s.round(o,2);return"M"+h+","+h+"L-"+h+",-"+h},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(o){var h=s.round(o,2),y=s.round(o*2,2);return"M0,0L-"+h+","+y+"H"+h+"Z"},noDot:!0},"arrow-down":{n:46,f:function(o){var h=s.round(o,2),y=s.round(o*2,2);return"M0,0L-"+h+",-"+y+"H"+h+"Z"},noDot:!0},"arrow-left":{n:47,f:function(o){var h=s.round(o*2,2),y=s.round(o,2);return"M0,0L"+h+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-right":{n:48,f:function(o){var h=s.round(o*2,2),y=s.round(o,2);return"M0,0L-"+h+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(o){var h=s.round(o,2),y=s.round(o*2,2);return"M-"+h+",0H"+h+"M0,0L-"+h+","+y+"H"+h+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(o){var h=s.round(o,2),y=s.round(o*2,2);return"M-"+h+",0H"+h+"M0,0L-"+h+",-"+y+"H"+h+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(o){var h=s.round(o*2,2),y=s.round(o,2);return"M0,-"+y+"V"+y+"M0,0L"+h+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(o){var h=s.round(o*2,2),y=s.round(o,2);return"M0,-"+y+"V"+y+"M0,0L-"+h+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(e,I,F){I.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../registry"),h=e("../../plots/cartesian/axes"),y=e("../../lib"),t=e("./compute_error");I.exports=function(n){for(var r=n.calcdata,f=0;f<r.length;f++){var u=r[f],l=u[0].trace;if(l.visible===!0&&o.traceIs(l,"errorBarsOK")){var m=h.getFromId(n,l.xaxis),d=h.getFromId(n,l.yaxis);a(u,l,m,"x"),a(u,l,d,"y")}}};function a(i,n,r,f){var u=n["error_"+f]||{},l=u.visible&&["linear","log"].indexOf(r.type)!==-1,m=[];if(!!l){for(var d=t(u),b=0;b<i.length;b++){var g=i[b],_=g.i;if(_===void 0)_=b;else if(_===null)continue;var p=g[f];if(!!s(r.c2l(p))){var A=d(p,_);if(s(A[0])&&s(A[1])){var c=g[f+"s"]=p-A[0],S=g[f+"h"]=p+A[1];m.push(c,S)}}}var T=r._id,x=n._extremes[T],w=h.findExtremes(r,m,y.extendFlat({tozero:x.opts.tozero},{padded:!0}));x.min=x.min.concat(w.min),x.max=x.max.concat(w.max)}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(e,I,F){I.exports=function(h){var y=h.type,t=h.symmetric;if(y==="data"){var a=h.array||[];if(t)return function(u,l){var m=+a[l];return[m,m]};var i=h.arrayminus||[];return function(u,l){var m=+a[l],d=+i[l];return!isNaN(m)||!isNaN(d)?[d||0,m||0]:[NaN,NaN]}}else{var n=s(y,h.value),r=s(y,h.valueminus);return t||h.valueminus===void 0?function(u){var l=n(u);return[l,l]}:function(u){return[r(u),n(u)]}}};function s(o,h){if(o==="percent")return function(y){return Math.abs(y*h/100)};if(o==="constant")return function(){return Math.abs(h)};if(o==="sqrt")return function(y){return Math.sqrt(Math.abs(y))}}},{}],393:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../registry"),h=e("../../lib"),y=e("../../plot_api/plot_template"),t=e("./attributes");I.exports=function(a,i,n,r){var f="error_"+r.axis,u=y.newContainer(i,f),l=a[f]||{};function m(c,S){return h.coerce(l,u,t,c,S)}var d=l.array!==void 0||l.value!==void 0||l.type==="sqrt",b=m("visible",d);if(b!==!1){var g=m("type","array"in l?"data":"percent"),_=!0;g!=="sqrt"&&(_=m("symmetric",!((g==="data"?"arrayminus":"valueminus")in l))),g==="data"?(m("array"),m("traceref"),_||(m("arrayminus"),m("tracerefminus"))):(g==="percent"||g==="constant")&&(m("value"),_||m("valueminus"));var p="copy_"+r.inherit+"style";if(r.inherit){var A=i["error_"+r.inherit];(A||{}).visible&&m(p,!(l.color||s(l.thickness)||s(l.width)))}(!r.inherit||!u[p])&&(m("color",n),m("thickness"),m("width",o.traceIs(i,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(e,I,F){var s=e("../../lib"),o=e("../../plot_api/edit_types").overrideAll,h=e("./attributes"),y={error_x:s.extendFlat({},h),error_y:s.extendFlat({},h)};delete y.error_x.copy_zstyle,delete y.error_y.copy_zstyle,delete y.error_y.copy_ystyle;var t={error_x:s.extendFlat({},h),error_y:s.extendFlat({},h),error_z:s.extendFlat({},h)};delete t.error_x.copy_ystyle,delete t.error_y.copy_ystyle,delete t.error_z.copy_ystyle,delete t.error_z.copy_zstyle,I.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:y,bar:y,histogram:y,scatter3d:o(t,"calc","nested"),scattergl:o(y,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:a};function a(i,n,r){(n.error_y||{}).visible&&(r.yerr=i.yh-i.y,n.error_y.symmetric||(r.yerrneg=i.y-i.ys)),(n.error_x||{}).visible&&(r.xerr=i.xh-i.x,n.error_x.symmetric||(r.xerrneg=i.x-i.xs))}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("../drawing"),y=e("../../traces/scatter/subtypes");I.exports=function(i,n,r,f){var u,l=r.xaxis,m=r.yaxis,d=f&&f.duration>0;n.each(function(b){var g=b[0].trace,_=g.error_x||{},p=g.error_y||{},A;g.ids&&(A=function(x){return x.id});var c=y.hasMarkers(g)&&g.marker.maxdisplayed>0;!p.visible&&!_.visible&&(b=[]);var S=s.select(this).selectAll("g.errorbar").data(b,A);if(S.exit().remove(),!!b.length){_.visible||S.selectAll("path.xerror").remove(),p.visible||S.selectAll("path.yerror").remove(),S.style("opacity",1);var T=S.enter().append("g").classed("errorbar",!0);d&&T.style("opacity",0).transition().duration(f.duration).style("opacity",1),h.setClipUrl(S,r.layerClipId,i),S.each(function(x){var w=s.select(this),v=t(x,l,m);if(!(c&&!x.vis)){var C,M=w.select("path.yerror");if(p.visible&&o(v.x)&&o(v.yh)&&o(v.ys)){var E=p.width;C="M"+(v.x-E)+","+v.yh+"h"+2*E+"m-"+E+",0V"+v.ys,v.noYS||(C+="m-"+E+",0h"+2*E),u=!M.size(),u?M=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(M=M.transition().duration(f.duration).ease(f.easing)),M.attr("d",C)}else M.remove();var L=w.select("path.xerror");if(_.visible&&o(v.y)&&o(v.xh)&&o(v.xs)){var z=(_.copy_ystyle?p:_).width;C="M"+v.xh+","+(v.y-z)+"v"+2*z+"m0,-"+z+"H"+v.xs,v.noXS||(C+="m0,-"+z+"v"+2*z),u=!L.size(),u?L=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(L=L.transition().duration(f.duration).ease(f.easing)),L.attr("d",C)}else L.remove()}})}})};function t(a,i,n){var r={x:i.c2p(a.x),y:n.c2p(a.y)};return a.yh!==void 0&&(r.yh=n.c2p(a.yh),r.ys=n.c2p(a.ys),o(r.ys)||(r.noYS=!0,r.ys=n.c2p(a.ys,!0))),a.xh!==void 0&&(r.xh=i.c2p(a.xh),r.xs=i.c2p(a.xs),o(r.xs)||(r.noXS=!0,r.xs=i.c2p(a.xs,!0))),r}},{"../../traces/scatter/subtypes":952,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(e,I,F){var s=e("@plotly/d3"),o=e("../color");I.exports=function(y){y.each(function(t){var a=t[0].trace,i=a.error_y||{},n=a.error_x||{},r=s.select(this);r.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(o.stroke,i.color),n.copy_ystyle&&(n=i),r.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(o.stroke,n.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(e,I,F){var s=e("../../plots/font_attributes"),o=e("./layout_attributes").hoverlabel,h=e("../../lib/extend").extendFlat;I.exports={hoverlabel:{bgcolor:h({},o.bgcolor,{arrayOk:!0}),bordercolor:h({},o.bordercolor,{arrayOk:!0}),font:s({arrayOk:!0,editType:"none"}),align:h({},o.align,{arrayOk:!0}),namelength:h({},o.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(e,I,F){var s=e("../../lib"),o=e("../../registry");I.exports=function(t){var a=t.calcdata,i=t._fullLayout;function n(m){return function(d){return s.coerceHoverinfo({hoverinfo:d},{_module:m._module},i)}}for(var r=0;r<a.length;r++){var f=a[r],u=f[0].trace;if(!o.traceIs(u,"pie-like")){var l=o.traceIs(u,"2dMap")?h:s.fillArray;l(u.hoverinfo,f,"hi",n(u)),u.hovertemplate&&l(u.hovertemplate,f,"ht"),u.hoverlabel&&(l(u.hoverlabel.bgcolor,f,"hbg"),l(u.hoverlabel.bordercolor,f,"hbc"),l(u.hoverlabel.font.size,f,"hts"),l(u.hoverlabel.font.color,f,"htc"),l(u.hoverlabel.font.family,f,"htf"),l(u.hoverlabel.namelength,f,"hnl"),l(u.hoverlabel.align,f,"hta"))}}};function h(y,t,a,i){i=i||s.identity,Array.isArray(y)&&(t[0][a]=i(y))}},{"../../lib":503,"../../registry":638}],399:[function(e,I,F){var s=e("../../registry"),o=e("./hover").hover;I.exports=function(y,t,a){var i=s.getComponentMethod("annotations","onClick")(y,y._hoverdata);a!==void 0&&o(y,t,a,!0);function n(){y.emit("plotly_click",{points:y._hoverdata,event:t})}y._hoverdata&&t&&t.target&&(i&&i.then?i.then(n):n(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(e,I,F){I.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("./hoverlabel_defaults");I.exports=function(t,a,i,n){function r(u,l){return s.coerce(t,a,o,u,l)}var f=s.extendFlat({},n.hoverlabel);a.hovertemplate&&(f.namelength=-1),h(t,a,r,f)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(e,I,F){var s=e("../../lib");F.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},F.isTraceInSubplots=function(i,n){if(i.type==="splom"){for(var r=i.xaxes||[],f=i.yaxes||[],u=0;u<r.length;u++)for(var l=0;l<f.length;l++)if(n.indexOf(r[u]+f[l])!==-1)return!0;return!1}return n.indexOf(F.getSubplot(i))!==-1},F.flat=function(i,n){for(var r=new Array(i.length),f=0;f<i.length;f++)r[f]=n;return r},F.p2c=function(i,n){for(var r=new Array(i.length),f=0;f<i.length;f++)r[f]=i[f].p2c(n);return r},F.getDistanceFunction=function(i,n,r,f){return i==="closest"?f||F.quadrature(n,r):i.charAt(0)==="x"?n:r},F.getClosest=function(i,n,r){if(r.index!==!1)r.index>=0&&r.index<i.length?r.distance=0:r.index=!1;else for(var f=0;f<i.length;f++){var u=n(i[f]);u<=r.distance&&(r.index=f,r.distance=u)}return r},F.inbox=function(i,n,r){return i*n<0||i===0?r:1/0},F.quadrature=function(i,n){return function(r){var f=i(r),u=n(r);return Math.sqrt(f*f+u*u)}},F.makeEventData=function(i,n,r){var f="index"in i?i.index:i.pointNumber,u={data:n._input,fullData:n,curveNumber:n.index,pointNumber:f};if(n._indexToPoints){var l=n._indexToPoints[f];l.length===1?u.pointIndex=l[0]:u.pointIndices=l}else u.pointIndex=f;return n._module.eventData?u=n._module.eventData(u,i,n,r,f):("xVal"in i?u.x=i.xVal:"x"in i&&(u.x=i.x),"yVal"in i?u.y=i.yVal:"y"in i&&(u.y=i.y),i.xa&&(u.xaxis=i.xa),i.ya&&(u.yaxis=i.ya),i.zLabelVal!==void 0&&(u.z=i.zLabelVal)),F.appendArrayPointValue(u,n,f),u},F.appendArrayPointValue=function(i,n,r){var f=n._arrayAttrs;if(!!f)for(var u=0;u<f.length;u++){var l=f[u],m=h(l);if(i[m]===void 0){var d=s.nestedProperty(n,l).get(),b=y(d,r);b!==void 0&&(i[m]=b)}}},F.appendArrayMultiPointValues=function(i,n,r){var f=n._arrayAttrs;if(!!f)for(var u=0;u<f.length;u++){var l=f[u],m=h(l);if(i[m]===void 0){for(var d=s.nestedProperty(n,l).get(),b=new Array(r.length),g=0;g<r.length;g++)b[g]=y(d,r[g]);i[m]=b}}};var o={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function h(i){return o[i]||i}function y(i,n){if(Array.isArray(n)){if(Array.isArray(i)&&Array.isArray(i[n[0]]))return i[n[0]][n[1]]}else return i[n]}var t={x:!0,y:!0},a={"x unified":!0,"y unified":!0};F.isUnifiedHover=function(i){return typeof i!="string"?!1:!!a[i]},F.isXYhover=function(i){return typeof i!="string"?!1:!!t[i]}},{"../../lib":503}],403:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("tinycolor2"),y=e("../../lib"),t=y.strTranslate,a=y.strRotate,i=e("../../lib/events"),n=e("../../lib/svg_text_utils"),r=e("../../lib/override_cursor"),f=e("../drawing"),u=e("../color"),l=e("../dragelement"),m=e("../../plots/cartesian/axes"),d=e("../../registry"),b=e("./helpers"),g=e("./constants"),_=e("../legend/defaults"),p=e("../legend/draw"),A=g.YANGLE,c=Math.PI*A/180,S=1/Math.sin(c),T=Math.cos(c),x=Math.sin(c),w=g.HOVERARROWSIZE,v=g.HOVERTEXTPAD,C={box:!0,ohlc:!0,violin:!0,candlestick:!0},M={scatter:!0,scattergl:!0,splom:!0};F.hover=function(j,ee,q,X){j=y.getGraphDiv(j);var J=ee.target;y.throttle(j._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){E(j,ee,q,X,J)})},F.loneHover=function(j,ee){var q=!0;Array.isArray(j)||(q=!1,j=[j]);var X=ee.gd,J=le(X),ie=fe(X),ne=j.map(function(Ae){var Ce=Ae._x0||Ae.x0||Ae.x||0,Ee=Ae._x1||Ae.x1||Ae.x||0,Oe=Ae._y0||Ae.y0||Ae.y||0,_e=Ae._y1||Ae.y1||Ae.y||0,Re=Ae.eventData;if(Re){var Ve=Math.min(Ce,Ee),Je=Math.max(Ce,Ee),ze=Math.min(Oe,_e),De=Math.max(Oe,_e),je=Ae.trace;if(d.traceIs(je,"gl3d")){var dt=X._fullLayout[je.scene]._scene.container,Et=dt.offsetLeft,$t=dt.offsetTop;Ve+=Et,Je+=Et,ze+=$t,De+=$t}Re.bbox={x0:Ve+ie,x1:Je+ie,y0:ze+J,y1:De+J},ee.inOut_bbox&&ee.inOut_bbox.push(Re.bbox)}else Re=!1;return{color:Ae.color||u.defaultLine,x0:Ae.x0||Ae.x||0,x1:Ae.x1||Ae.x||0,y0:Ae.y0||Ae.y||0,y1:Ae.y1||Ae.y||0,xLabel:Ae.xLabel,yLabel:Ae.yLabel,zLabel:Ae.zLabel,text:Ae.text,name:Ae.name,idealAlign:Ae.idealAlign,borderColor:Ae.borderColor,fontFamily:Ae.fontFamily,fontSize:Ae.fontSize,fontColor:Ae.fontColor,nameLength:Ae.nameLength,textAlign:Ae.textAlign,trace:Ae.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Ae.hovertemplate||!1,hovertemplateLabels:Ae.hovertemplateLabels||!1,eventData:Re}}),oe=!1,se=O(ne,{gd:X,hovermode:"closest",rotateLabels:oe,bgColor:ee.bgColor||u.background,container:s.select(ee.container),outerContainer:ee.outerContainer||ee.container}),me=5,ce=0,pe=0;se.sort(function(Ae,Ce){return Ae.y0-Ce.y0}).each(function(Ae,Ce){var Ee=Ae.y0-Ae.by/2;Ee-me<ce?Ae.offset=ce-Ee+me:Ae.offset=0,ce=Ee+Ae.by+Ae.offset,Ce===ee.anchorIndex&&(pe=Ae.offset)}).each(function(Ae){Ae.offset-=pe});var xe=X._fullLayout._invScaleX,Se=X._fullLayout._invScaleY;return H(se,oe,xe,Se),q?se:se.node()};function E(V,j,ee,q,X){ee||(ee="xy");var J=Array.isArray(ee)?ee:[ee],ie=V._fullLayout,ne=ie._plots||[],oe=ne[ee],se=ie._has("cartesian");if(oe){var me=oe.overlays.map(function(hr){return hr.id});J=J.concat(me)}for(var ce=J.length,pe=new Array(ce),xe=new Array(ce),Se=!1,Ae=0;Ae<ce;Ae++){var Ce=J[Ae];if(ne[Ce])Se=!0,pe[Ae]=ne[Ce].xaxis,xe[Ae]=ne[Ce].yaxis;else if(ie[Ce]&&ie[Ce]._subplot){var Ee=ie[Ce]._subplot;pe[Ae]=Ee.xaxis,xe[Ae]=Ee.yaxis}else{y.warn("Unrecognized subplot: "+Ce);return}}var Oe=j.hovermode||ie.hovermode;if(Oe&&!Se&&(Oe="closest"),["x","y","closest","x unified","y unified"].indexOf(Oe)===-1||!V.calcdata||V.querySelector(".zoombox")||V._dragging)return l.unhoverRaw(V,j);var _e=ie.hoverdistance;_e===-1&&(_e=1/0);var Re=ie.spikedistance;Re===-1&&(Re=1/0);var Ve=[],Je=[],ze,De,je,dt,Et,$t,wt,Ot,Vt,kt,St,ot,ht,Ke={hLinePoint:null,vLinePoint:null},Pe=!1;if(Array.isArray(j))for(Oe="array",je=0;je<j.length;je++)Et=V.calcdata[j[je].curveNumber||0],Et&&($t=Et[0].trace,Et[0].trace.hoverinfo!=="skip"&&(Je.push(Et),$t.orientation==="h"&&(Pe=!0)));else{for(dt=0;dt<V.calcdata.length;dt++)Et=V.calcdata[dt],$t=Et[0].trace,$t.hoverinfo!=="skip"&&b.isTraceInSubplots($t,J)&&(Je.push(Et),$t.orientation==="h"&&(Pe=!0));var We=!X,Qe,ut;if(We)"xpx"in j?Qe=j.xpx:Qe=pe[0]._length/2,"ypx"in j?ut=j.ypx:ut=xe[0]._length/2;else{if(i.triggerHandler(V,"plotly_beforehover",j)===!1)return;var It=X.getBoundingClientRect();Qe=j.clientX-It.left,ut=j.clientY-It.top,ie._calcInverseTransform(V);var Tt=y.apply3DTransform(ie._invTransform)(Qe,ut);if(Qe=Tt[0],ut=Tt[1],Qe<0||Qe>pe[0]._length||ut<0||ut>xe[0]._length)return l.unhoverRaw(V,j)}if(j.pointerX=Qe+pe[0]._offset,j.pointerY=ut+xe[0]._offset,"xval"in j?ze=b.flat(J,j.xval):ze=b.p2c(pe,Qe),"yval"in j?De=b.flat(J,j.yval):De=b.p2c(xe,ut),!o(ze[0])||!o(De[0]))return y.warn("Fx.hover failed",j,V),l.unhoverRaw(V,j)}var Bt=1/0;function rr(hr,Dr){for(dt=0;dt<Je.length;dt++)if(Et=Je[dt],!(!Et||!Et[0]||!Et[0].trace)&&($t=Et[0].trace,!($t.visible!==!0||$t._length===0)&&["carpet","contourcarpet"].indexOf($t._module.name)===-1)){if($t.type==="splom"?(Ot=0,wt=J[Ot]):(wt=b.getSubplot($t),Ot=J.indexOf(wt)),Vt=Oe,b.isUnifiedHover(Vt)&&(Vt=Vt.charAt(0)),ot={cd:Et,trace:$t,xa:pe[Ot],ya:xe[Ot],maxHoverDistance:_e,maxSpikeDistance:Re,index:!1,distance:Math.min(Bt,_e),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:u.defaultLine,name:$t.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[wt]&&(ot.subplot=ie[wt]._subplot),ie._splomScenes&&ie._splomScenes[$t.uid]&&(ot.scene=ie._splomScenes[$t.uid]),ht=Ve.length,Vt==="array"){var Gr=j[dt];"pointNumber"in Gr?(ot.index=Gr.pointNumber,Vt="closest"):(Vt="","xval"in Gr&&(kt=Gr.xval,Vt="x"),"yval"in Gr&&(St=Gr.yval,Vt=Vt?"closest":"y"))}else hr!==void 0&&Dr!==void 0?(kt=hr,St=Dr):(kt=ze[Ot],St=De[Ot]);if(_e!==0)if($t._module&&$t._module.hoverPoints){var Rr=$t._module.hoverPoints(ot,kt,St,Vt,{finiteRange:!0,hoverLayer:ie._hoverlayer});if(Rr)for(var Ct,tr=0;tr<Rr.length;tr++)Ct=Rr[tr],o(Ct.x0)&&o(Ct.y0)&&Ve.push(B(Ct,Oe))}else y.log("Unrecognized trace type in hover:",$t);if(Oe==="closest"&&Ve.length>ht&&(Ve.splice(0,ht),Bt=Ve[0].distance),se&&Re!==0&&Ve.length===0){ot.distance=Re,ot.index=!1;var Lr=$t._module.hoverPoints(ot,kt,St,"closest",{hoverLayer:ie._hoverlayer});if(Lr&&(Lr=Lr.filter(function(oa){return oa.spikeDistance<=Re})),Lr&&Lr.length){var Nr,Tn=Lr.filter(function(oa){return oa.xa.showspikes&&oa.xa.spikesnap!=="hovered data"});if(Tn.length){var rn=Tn[0];o(rn.x0)&&o(rn.y0)&&(Nr=Qt(rn),(!Ke.vLinePoint||Ke.vLinePoint.spikeDistance>Nr.spikeDistance)&&(Ke.vLinePoint=Nr))}var kn=Lr.filter(function(oa){return oa.ya.showspikes&&oa.ya.spikesnap!=="hovered data"});if(kn.length){var Cn=kn[0];o(Cn.x0)&&o(Cn.y0)&&(Nr=Qt(Cn),(!Ke.hLinePoint||Ke.hLinePoint.spikeDistance>Nr.spikeDistance)&&(Ke.hLinePoint=Nr))}}}}}rr();function Ut(hr,Dr,Gr){for(var Rr=null,Ct=1/0,tr,Lr=0;Lr<hr.length;Lr++)tr=hr[Lr].spikeDistance,Gr&&Lr===0&&(tr=-1/0),tr<=Ct&&tr<=Dr&&(Rr=hr[Lr],Ct=tr);return Rr}function Qt(hr){return hr?{xa:hr.xa,ya:hr.ya,x:hr.xSpike!==void 0?hr.xSpike:(hr.x0+hr.x1)/2,y:hr.ySpike!==void 0?hr.ySpike:(hr.y0+hr.y1)/2,distance:hr.distance,spikeDistance:hr.spikeDistance,curveNumber:hr.trace.index,color:hr.color,pointNumber:hr.index}:null}var ar={fullLayout:ie,container:ie._hoverlayer,event:j},nr=V._spikepoints,cr={vLinePoint:Ke.vLinePoint,hLinePoint:Ke.hLinePoint};V._spikepoints=cr;var Kr=function(){Ve.sort(function(hr,Dr){return hr.distance-Dr.distance}),Ve=Z(Ve,Oe)};Kr();var yn=Oe.charAt(0),Qr=(yn==="x"||yn==="y")&&Ve[0]&&M[Ve[0].trace.type];if(se&&Re!==0&&Ve.length!==0){var st=Ve.filter(function(hr){return hr.ya.showspikes}),Gt=Ut(st,Re,Qr);Ke.hLinePoint=Qt(Gt);var Zt=Ve.filter(function(hr){return hr.xa.showspikes}),Ht=Ut(Zt,Re,Qr);Ke.vLinePoint=Qt(Ht)}if(Ve.length===0){var _r=l.unhoverRaw(V,j);return se&&(Ke.hLinePoint!==null||Ke.vLinePoint!==null)&&re(nr)&&$(V,Ke,ar),_r}if(se&&re(nr)&&$(V,Ke,ar),b.isXYhover(Vt)&&Ve[0].length!==0&&Ve[0].trace.type!=="splom"){var it=Ve[0];C[it.trace.type]?Ve=Ve.filter(function(hr){return hr.trace.index===it.trace.index}):Ve=[it];var Te=Ve.length,ke=K("x",it,ie),Ge=K("y",it,ie);rr(ke,Ge);var Ye=[],qe={},at=0,et=function(hr){var Dr=C[hr.trace.type]?L(hr):hr.trace.index;if(!qe[Dr])at++,qe[Dr]=at,Ye.push(hr);else{var Gr=qe[Dr]-1,Rr=Ye[Gr];Gr>0&&Math.abs(hr.distance)<Math.abs(Rr.distance)&&(Ye[Gr]=hr)}},pt;for(pt=0;pt<Te;pt++)et(Ve[pt]);for(pt=Ve.length-1;pt>Te-1;pt--)et(Ve[pt]);Ve=Ye,Kr()}var _t=V._hoverdata,Pt=[],Xt=le(V),zt=fe(V);for(je=0;je<Ve.length;je++){var ur=Ve[je],gr=b.makeEventData(ur,ur.trace,ur.cd);if(ur.hovertemplate!==!1){var Mr=!1;ur.cd[ur.index]&&ur.cd[ur.index].ht&&(Mr=ur.cd[ur.index].ht),ur.hovertemplate=Mr||ur.trace.hovertemplate||!1}if(ur.xa&&ur.ya){var un=ur.x0+ur.xa._offset,zr=ur.x1+ur.xa._offset,$r=ur.y0+ur.ya._offset,hn=ur.y1+ur.ya._offset,Tr=Math.min(un,zr),wr=Math.max(un,zr),Ur=Math.min($r,hn),Br=Math.max($r,hn);gr.bbox={x0:Tr+zt,x1:wr+zt,y0:Ur+Xt,y1:Br+Xt}}ur.eventData=[gr],Pt.push(gr)}V._hoverdata=Pt;var Cr=Oe==="y"&&(Je.length>1||Ve.length>1)||Oe==="closest"&&Pe&&Ve.length>1,nt=u.combine(ie.plot_bgcolor||u.background,ie.paper_bgcolor),Rt=O(Ve,{gd:V,hovermode:Oe,rotateLabels:Cr,bgColor:nt,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance});if(b.isUnifiedHover(Oe)||(D(Rt,Cr?"xa":"ya",ie),H(Rt,Cr,ie._invScaleX,ie._invScaleY)),X&&X.tagName){var Jt=d.getComponentMethod("annotations","hasClickToShow")(V,Pt);r(s.select(X),Jt?"pointer":"")}!X||q||!W(V,j,_t)||(_t&&V.emit("plotly_unhover",{event:j,points:_t}),V.emit("plotly_hover",{event:j,points:V._hoverdata,xaxes:pe,yaxes:xe,xvals:ze,yvals:De}))}function L(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa?V.xa._id:"",V.ya?V.ya._id:""].join(",")}var z=/<extra>([\s\S]*)<\/extra>/;function O(V,j){var ee=j.gd,q=ee._fullLayout,X=j.hovermode,J=j.rotateLabels,ie=j.bgColor,ne=j.container,oe=j.outerContainer,se=j.commonLabelOpts||{};if(V.length===0)return[[]];var me=j.fontFamily||g.HOVERFONT,ce=j.fontSize||g.HOVERFONTSIZE,pe=V[0],xe=pe.xa,Se=pe.ya,Ae=X.charAt(0),Ce=pe[Ae+"Label"],Ee=ue(ee,oe),Oe=Ee.top,_e=Ee.width,Re=Ee.height,Ve=Ce!==void 0&&pe.distance<=j.hoverdistance&&(X==="x"||X==="y");if(Ve){var Je=!0,ze,De;for(ze=0;ze<V.length;ze++)if(Je&&V[ze].zLabel===void 0&&(Je=!1),De=V[ze].hoverinfo||V[ze].trace.hoverinfo,De){var je=Array.isArray(De)?De:De.split("+");if(je.indexOf("all")===-1&&je.indexOf(X)===-1){Ve=!1;break}}Je&&(Ve=!1)}var dt=ne.selectAll("g.axistext").data(Ve?[0]:[]);if(dt.enter().append("g").classed("axistext",!0),dt.exit().remove(),dt.each(function(){var Ht=s.select(this),_r=y.ensureSingle(Ht,"path","",function(hn){hn.style({"stroke-width":"1px"})}),it=y.ensureSingle(Ht,"text","",function(hn){hn.attr("data-notex",1)}),Te=se.bgcolor||u.defaultLine,ke=se.bordercolor||u.contrast(Te),Ge=u.contrast(Te),Ye={family:se.font.family||me,size:se.font.size||ce,color:se.font.color||Ge};_r.style({fill:Te,stroke:ke}),it.text(Ce).call(f.font,Ye).call(n.positionText,0,0).call(n.convertToTspans,ee),Ht.attr("transform","");var qe=ue(ee,it.node()),at,et;if(X==="x"){var pt=xe.side==="top"?"-":"";it.attr("text-anchor","middle").call(n.positionText,0,xe.side==="top"?Oe-qe.bottom-w-v:Oe-qe.top+w+v),at=xe._offset+(pe.x0+pe.x1)/2,et=Se._offset+(xe.side==="top"?0:Se._length);var _t=qe.width/2+v;at<_t?(at=_t,_r.attr("d","M-"+(_t-w)+",0L-"+(_t-w*2)+","+pt+w+"H"+(v+qe.width/2)+"v"+pt+(v*2+qe.height)+"H-"+_t+"V"+pt+w+"Z")):at>q.width-_t?(at=q.width-_t,_r.attr("d","M"+(_t-w)+",0L"+_t+","+pt+w+"v"+pt+(v*2+qe.height)+"H-"+_t+"V"+pt+w+"H"+(_t-w*2)+"Z")):_r.attr("d","M0,0L"+w+","+pt+w+"H"+(v+qe.width/2)+"v"+pt+(v*2+qe.height)+"H-"+(v+qe.width/2)+"V"+pt+w+"H-"+w+"Z")}else{var Pt,Xt,zt;Se.side==="right"?(Pt="start",Xt=1,zt="",at=xe._offset+xe._length):(Pt="end",Xt=-1,zt="-",at=xe._offset),et=Se._offset+(pe.y0+pe.y1)/2,it.attr("text-anchor",Pt),_r.attr("d","M0,0L"+zt+w+","+w+"V"+(v+qe.height/2)+"h"+zt+(v*2+qe.width)+"V-"+(v+qe.height/2)+"H"+zt+w+"V-"+w+"Z");var ur=qe.height/2,gr=Oe-qe.top-ur,Mr="clip"+q._uid+"commonlabel"+Se._id,un;if(at<qe.width+2*v+w){un="M-"+(w+v)+"-"+ur+"h-"+(qe.width-v)+"V"+ur+"h"+(qe.width-v)+"Z";var zr=qe.width-at+v;n.positionText(it,zr,gr),Pt==="end"&&it.selectAll("tspan").each(function(){var hn=s.select(this),Tr=f.tester.append("text").text(hn.text()).call(f.font,Ye),wr=ue(ee,Tr.node());Math.round(wr.width)<Math.round(qe.width)&&hn.attr("x",zr-wr.width),Tr.remove()})}else n.positionText(it,Xt*(v+w),gr),un=null;var $r=q._topclips.selectAll("#"+Mr).data(un?[0]:[]);$r.enter().append("clipPath").attr("id",Mr).append("path"),$r.exit().remove(),$r.select("path").attr("d",un),f.setClipUrl(it,un?Mr:null,ee)}Ht.attr("transform",t(at,et))}),b.isUnifiedHover(X)){ne.selectAll("g.hovertext").remove();var Et=V.filter(function(Ht){return Ht.hoverinfo!=="none"});if(Et.length===0)return;var $t=q.hoverlabel,wt=$t.font,Ot={showlegend:!0,legend:{title:{text:Ce,font:wt},font:wt,bgcolor:$t.bgcolor,bordercolor:$t.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:q.legend?q.legend.traceorder:void 0,orientation:"v"}},Vt={font:wt};_(Ot,Vt,ee._fullData);var kt=Vt.legend;kt.entries=[];for(var St=0;St<Et.length;St++){var ot=Et[St];if(ot.hoverinfo!=="none"){var ht=R(ot,!0,X,q,Ce),Ke=ht[0],Pe=ht[1];ot.name=Pe,Pe!==""?ot.text=Pe+" : "+Ke:ot.text=Ke;var We=ot.cd[ot.index];We&&(We.mc&&(ot.mc=We.mc),We.mcc&&(ot.mc=We.mcc),We.mlc&&(ot.mlc=We.mlc),We.mlcc&&(ot.mlc=We.mlcc),We.mlw&&(ot.mlw=We.mlw),We.mrc&&(ot.mrc=We.mrc),We.dir&&(ot.dir=We.dir)),ot._distinct=!0,kt.entries.push([ot])}}kt.entries.sort(function(Ht,_r){return Ht[0].trace.index-_r[0].trace.index}),kt.layer=ne,kt._inHover=!0,kt._groupTitleFont=$t.grouptitlefont,p(ee,kt);var Qe=ne.select("g.legend"),ut=ue(ee,Qe.node()),It=ut.width+2*v,Tt=ut.height+2*v,Bt=Et[0],rr=(Bt.x0+Bt.x1)/2,Ut=(Bt.y0+Bt.y1)/2,Qt=!(d.traceIs(Bt.trace,"bar-like")||d.traceIs(Bt.trace,"box-violin")),ar,nr;Ae==="y"?Qt?(nr=Ut-v,ar=Ut+v):(nr=Math.min.apply(null,Et.map(function(Ht){return Math.min(Ht.y0,Ht.y1)})),ar=Math.max.apply(null,Et.map(function(Ht){return Math.max(Ht.y0,Ht.y1)}))):nr=ar=y.mean(Et.map(function(Ht){return(Ht.y0+Ht.y1)/2}))-Tt/2;var cr,Kr;Ae==="x"?Qt?(cr=rr+v,Kr=rr-v):(cr=Math.max.apply(null,Et.map(function(Ht){return Math.max(Ht.x0,Ht.x1)})),Kr=Math.min.apply(null,Et.map(function(Ht){return Math.min(Ht.x0,Ht.x1)}))):cr=Kr=y.mean(Et.map(function(Ht){return(Ht.x0+Ht.x1)/2}))-It/2;var yn=xe._offset,Qr=Se._offset;ar+=Qr,cr+=yn,Kr+=yn-It,nr+=Qr-Tt;var st,Gt;return cr+It<_e&&cr>=0?st=cr:Kr+It<_e&&Kr>=0?st=Kr:yn+It<_e?st=yn:cr-rr<rr-Kr+It?st=_e-It:st=0,st+=v,ar+Tt<Re&&ar>=0?Gt=ar:nr+Tt<Re&&nr>=0?Gt=nr:Qr+Tt<Re?Gt=Qr:ar-Ut<Ut-nr+Tt?Gt=Re-Tt:Gt=0,Gt+=v,Qe.attr("transform",t(st-1,Gt-1)),Qe}var Zt=ne.selectAll("g.hovertext").data(V,function(Ht){return L(Ht)});return Zt.enter().append("g").classed("hovertext",!0).each(function(){var Ht=s.select(this);Ht.append("rect").call(u.fill,u.addOpacity(ie,.8)),Ht.append("text").classed("name",!0),Ht.append("path").style("stroke-width","1px"),Ht.append("text").classed("nums",!0).call(f.font,me,ce)}),Zt.exit().remove(),Zt.each(function(Ht){var _r=s.select(this).attr("transform",""),it=Ht.color;Array.isArray(it)&&(it=it[Ht.eventData[0].pointNumber]);var Te=Ht.bgcolor||it,ke=u.combine(u.opacity(Te)?Te:u.defaultLine,ie),Ge=u.combine(u.opacity(it)?it:u.defaultLine,ie),Ye=Ht.borderColor||u.contrast(ke),qe=R(Ht,Ve,X,q,Ce,_r),at=qe[0],et=qe[1],pt=_r.select("text.nums").call(f.font,Ht.fontFamily||me,Ht.fontSize||ce,Ht.fontColor||Ye).text(at).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,ee),_t=_r.select("text.name"),Pt=0,Xt=0;if(et&&et!==at){_t.call(f.font,Ht.fontFamily||me,Ht.fontSize||ce,Ge).text(et).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,ee);var zt=ue(ee,_t.node());Pt=zt.width+2*v,Xt=zt.height+2*v}else _t.remove(),_r.select("rect").remove();_r.select("path").style({fill:ke,stroke:Ye});var ur=Ht.xa._offset+(Ht.x0+Ht.x1)/2,gr=Ht.ya._offset+(Ht.y0+Ht.y1)/2,Mr=Math.abs(Ht.x1-Ht.x0),un=Math.abs(Ht.y1-Ht.y0),zr=ue(ee,pt.node()),$r=zr.width/q._invScaleX,hn=zr.height/q._invScaleY;Ht.ty0=(Oe-zr.top)/q._invScaleY,Ht.bx=$r+2*v,Ht.by=Math.max(hn+2*v,Xt),Ht.anchor="start",Ht.txwidth=$r,Ht.tx2width=Pt,Ht.offset=0;var Tr=($r+w+v+Pt)*q._invScaleX,wr,Ur;if(J)Ht.pos=ur,wr=gr+un/2+Tr<=Re,Ur=gr-un/2-Tr>=0,(Ht.idealAlign==="top"||!wr)&&Ur?(gr-=un/2,Ht.anchor="end"):wr?(gr+=un/2,Ht.anchor="start"):Ht.anchor="middle";else if(Ht.pos=gr,wr=ur+Mr/2+Tr<=_e,Ur=ur-Mr/2-Tr>=0,(Ht.idealAlign==="left"||!wr)&&Ur)ur-=Mr/2,Ht.anchor="end";else if(wr)ur+=Mr/2,Ht.anchor="start";else{Ht.anchor="middle";var Br=Tr/2,Cr=ur+Br-_e,nt=ur-Br;Cr>0&&(ur-=Cr),nt<0&&(ur+=-nt)}pt.attr("text-anchor",Ht.anchor),Pt&&_t.attr("text-anchor",Ht.anchor),_r.attr("transform",t(ur,gr)+(J?a(A):""))}),Zt}function R(V,j,ee,q,X,J){var ie="",ne="";V.nameOverride!==void 0&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=y.templateString(V.name,V.trace._meta)),ie=Q(V.name,V.nameLength));var oe=ee.charAt(0),se=oe==="x"?"y":"x";V.zLabel!==void 0?(V.xLabel!==void 0&&(ne+="x: "+V.xLabel+"<br>"),V.yLabel!==void 0&&(ne+="y: "+V.yLabel+"<br>"),V.trace.type!=="choropleth"&&V.trace.type!=="choroplethmapbox"&&(ne+=(ne?"z: ":"")+V.zLabel)):j&&V[oe+"Label"]===X?ne=V[se+"Label"]||"":V.xLabel===void 0?V.yLabel!==void 0&&V.trace.type!=="scattercarpet"&&(ne=V.yLabel):V.yLabel===void 0?ne=V.xLabel:ne="("+V.xLabel+", "+V.yLabel+")",(V.text||V.text===0)&&!Array.isArray(V.text)&&(ne+=(ne?"<br>":"")+V.text),V.extraText!==void 0&&(ne+=(ne?"<br>":"")+V.extraText),J&&ne===""&&!V.hovertemplate&&(ie===""&&J.remove(),ne=ie);var me=V.hovertemplate||!1;if(me){var ce=V.hovertemplateLabels||V;V[oe+"Label"]!==X&&(ce[oe+"other"]=ce[oe+"Val"],ce[oe+"otherLabel"]=ce[oe+"Label"]),ne=y.hovertemplateString(me,ce,q._d3locale,V.eventData[0]||{},V.trace._meta),ne=ne.replace(z,function(pe,xe){return ie=Q(xe,V.nameLength),""})}return[ne,ie]}function D(V,j,ee){var q=0,X=1,J=V.size(),ie=new Array(J),ne=0;V.each(function(ze){var De=ze[j],je=De._id.charAt(0)==="x",dt=De.range;ne===0&&dt&&dt[0]>dt[1]!==je&&(X=-1),ie[ne++]=[{datum:ze,traceIndex:ze.trace.index,dp:0,pos:ze.pos,posref:ze.posref,size:ze.by*(je?S:1)/2,pmin:0,pmax:je?ee.width:ee.height}]}),ie.sort(function(ze,De){return ze[0].posref-De[0].posref||X*(De[0].traceIndex-ze[0].traceIndex)});var oe,se,me,ce,pe,xe,Se;function Ae(ze){var De=ze[0],je=ze[ze.length-1];if(se=De.pmin-De.pos-De.dp+De.size,me=je.pos+je.dp+je.size-De.pmax,se>.01){for(pe=ze.length-1;pe>=0;pe--)ze[pe].dp+=se;oe=!1}if(!(me<.01)){if(se<-.01){for(pe=ze.length-1;pe>=0;pe--)ze[pe].dp-=me;oe=!1}if(!!oe){var dt=0;for(ce=0;ce<ze.length;ce++)xe=ze[ce],xe.pos+xe.dp+xe.size>De.pmax&&dt++;for(ce=ze.length-1;ce>=0&&!(dt<=0);ce--)xe=ze[ce],xe.pos>De.pmax-1&&(xe.del=!0,dt--);for(ce=0;ce<ze.length&&!(dt<=0);ce++)if(xe=ze[ce],xe.pos<De.pmin+1)for(xe.del=!0,dt--,me=xe.size*2,pe=ze.length-1;pe>=0;pe--)ze[pe].dp-=me;for(ce=ze.length-1;ce>=0&&!(dt<=0);ce--)xe=ze[ce],xe.pos+xe.dp+xe.size>De.pmax&&(xe.del=!0,dt--)}}}for(;!oe&&q<=J;){for(q++,oe=!0,ce=0;ce<ie.length-1;){var Ce=ie[ce],Ee=ie[ce+1],Oe=Ce[Ce.length-1],_e=Ee[0];if(se=Oe.pos+Oe.dp+Oe.size-_e.pos-_e.dp+_e.size,se>.01&&Oe.pmin===_e.pmin&&Oe.pmax===_e.pmax){for(pe=Ee.length-1;pe>=0;pe--)Ee[pe].dp+=se;for(Ce.push.apply(Ce,Ee),ie.splice(ce+1,1),Se=0,pe=Ce.length-1;pe>=0;pe--)Se+=Ce[pe].dp;for(me=Se/Ce.length,pe=Ce.length-1;pe>=0;pe--)Ce[pe].dp-=me;oe=!1}else ce++}ie.forEach(Ae)}for(ce=ie.length-1;ce>=0;ce--){var Re=ie[ce];for(pe=Re.length-1;pe>=0;pe--){var Ve=Re[pe],Je=Ve.datum;Je.offset=Ve.dp,Je.del=Ve.del}}}function H(V,j,ee,q){var X=function(ie){return ie*ee},J=function(ie){return ie*q};V.each(function(ie){var ne=s.select(this);if(ie.del)return ne.remove();var oe=ne.select("text.nums"),se=ie.anchor,me=se==="end"?-1:1,ce={start:1,end:-1,middle:0}[se],pe=ce*(w+v),xe=pe+ce*(ie.txwidth+v),Se=0,Ae=ie.offset,Ce=se==="middle";Ce&&(pe-=ie.tx2width/2,xe+=ie.txwidth/2+v),j&&(Ae*=-x,Se=ie.offset*T),ne.select("path").attr("d",Ce?"M-"+X(ie.bx/2+ie.tx2width/2)+","+J(Ae-ie.by/2)+"h"+X(ie.bx)+"v"+J(ie.by)+"h-"+X(ie.bx)+"Z":"M0,0L"+X(me*w+Se)+","+J(w+Ae)+"v"+J(ie.by/2-w)+"h"+X(me*ie.bx)+"v-"+J(ie.by)+"H"+X(me*w+Se)+"V"+J(Ae-w)+"Z");var Ee=Se+pe,Oe=Ae+ie.ty0-ie.by/2+v,_e=ie.textAlign||"auto";_e!=="auto"&&(_e==="left"&&se!=="start"?(oe.attr("text-anchor","start"),Ee=Ce?-ie.bx/2-ie.tx2width/2+v:-ie.bx-v):_e==="right"&&se!=="end"&&(oe.attr("text-anchor","end"),Ee=Ce?ie.bx/2-ie.tx2width/2-v:ie.bx+v)),oe.call(n.positionText,X(Ee),J(Oe)),ie.tx2width&&(ne.select("text.name").call(n.positionText,X(xe+ce*v+Se),J(Ae+ie.ty0-ie.by/2+v)),ne.select("rect").call(f.setRect,X(xe+(ce-1)*ie.tx2width/2+Se),J(Ae-ie.by/2-1),X(ie.tx2width),J(ie.by+2)))})}function B(V,j){var ee=V.index,q=V.trace||{},X=V.cd[0],J=V.cd[ee]||{};function ie(pe){return pe||o(pe)&&pe===0}var ne=Array.isArray(ee)?function(pe,xe){var Se=y.castOption(X,ee,pe);return ie(Se)?Se:y.extractOption({},q,"",xe)}:function(pe,xe){return y.extractOption(J,q,pe,xe)};function oe(pe,xe,Se){var Ae=ne(xe,Se);ie(Ae)&&(V[pe]=Ae)}if(oe("hoverinfo","hi","hoverinfo"),oe("bgcolor","hbg","hoverlabel.bgcolor"),oe("borderColor","hbc","hoverlabel.bordercolor"),oe("fontFamily","htf","hoverlabel.font.family"),oe("fontSize","hts","hoverlabel.font.size"),oe("fontColor","htc","hoverlabel.font.color"),oe("nameLength","hnl","hoverlabel.namelength"),oe("textAlign","hta","hoverlabel.align"),V.posref=j==="y"||j==="closest"&&q.orientation==="h"?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=y.constrain(V.x0,0,V.xa._length),V.x1=y.constrain(V.x1,0,V.xa._length),V.y0=y.constrain(V.y0,0,V.ya._length),V.y1=y.constrain(V.y1,0,V.ya._length),V.xLabelVal!==void 0&&(V.xLabel="xLabel"in V?V.xLabel:m.hoverLabelText(V.xa,V.xLabelVal,q.xhoverformat),V.xVal=V.xa.c2d(V.xLabelVal)),V.yLabelVal!==void 0&&(V.yLabel="yLabel"in V?V.yLabel:m.hoverLabelText(V.ya,V.yLabelVal,q.yhoverformat),V.yVal=V.ya.c2d(V.yLabelVal)),V.zLabelVal!==void 0&&V.zLabel===void 0&&(V.zLabel=String(V.zLabelVal)),!isNaN(V.xerr)&&!(V.xa.type==="log"&&V.xerr<=0)){var se=m.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xerrneg!==void 0?V.xLabel+=" +"+se+" / -"+m.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:V.xLabel+=" \xB1 "+se,j==="x"&&(V.distance+=1)}if(!isNaN(V.yerr)&&!(V.ya.type==="log"&&V.yerr<=0)){var me=m.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yerrneg!==void 0?V.yLabel+=" +"+me+" / -"+m.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:V.yLabel+=" \xB1 "+me,j==="y"&&(V.distance+=1)}var ce=V.hoverinfo||V.trace.hoverinfo;return ce&&ce!=="all"&&(ce=Array.isArray(ce)?ce:ce.split("+"),ce.indexOf("x")===-1&&(V.xLabel=void 0),ce.indexOf("y")===-1&&(V.yLabel=void 0),ce.indexOf("z")===-1&&(V.zLabel=void 0),ce.indexOf("text")===-1&&(V.text=void 0),ce.indexOf("name")===-1&&(V.name=void 0)),V}function $(V,j,ee){var q=ee.container,X=ee.fullLayout,J=X._size,ie=ee.event,ne=!!j.hLinePoint,oe=!!j.vLinePoint,se,me;if(q.selectAll(".spikeline").remove(),!!(oe||ne)){var ce=u.combine(X.plot_bgcolor,X.paper_bgcolor);if(ne){var pe=j.hLinePoint,xe,Se;se=pe&&pe.xa,me=pe&&pe.ya;var Ae=me.spikesnap;Ae==="cursor"?(xe=ie.pointerX,Se=ie.pointerY):(xe=se._offset+pe.x,Se=me._offset+pe.y);var Ce=h.readability(pe.color,ce)<1.5?u.contrast(ce):pe.color,Ee=me.spikemode,Oe=me.spikethickness,_e=me.spikecolor||Ce,Re=m.getPxPosition(V,me),Ve,Je;if(Ee.indexOf("toaxis")!==-1||Ee.indexOf("across")!==-1){if(Ee.indexOf("toaxis")!==-1&&(Ve=Re,Je=xe),Ee.indexOf("across")!==-1){var ze=me._counterDomainMin,De=me._counterDomainMax;me.anchor==="free"&&(ze=Math.min(ze,me.position),De=Math.max(De,me.position)),Ve=J.l+ze*J.w,Je=J.l+De*J.w}q.insert("line",":first-child").attr({x1:Ve,x2:Je,y1:Se,y2:Se,"stroke-width":Oe,stroke:_e,"stroke-dasharray":f.dashStyle(me.spikedash,Oe)}).classed("spikeline",!0).classed("crisp",!0),q.insert("line",":first-child").attr({x1:Ve,x2:Je,y1:Se,y2:Se,"stroke-width":Oe+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}Ee.indexOf("marker")!==-1&&q.insert("circle",":first-child").attr({cx:Re+(me.side!=="right"?Oe:-Oe),cy:Se,r:Oe,fill:_e}).classed("spikeline",!0)}if(oe){var je=j.vLinePoint,dt,Et;se=je&&je.xa,me=je&&je.ya;var $t=se.spikesnap;$t==="cursor"?(dt=ie.pointerX,Et=ie.pointerY):(dt=se._offset+je.x,Et=me._offset+je.y);var wt=h.readability(je.color,ce)<1.5?u.contrast(ce):je.color,Ot=se.spikemode,Vt=se.spikethickness,kt=se.spikecolor||wt,St=m.getPxPosition(V,se),ot,ht;if(Ot.indexOf("toaxis")!==-1||Ot.indexOf("across")!==-1){if(Ot.indexOf("toaxis")!==-1&&(ot=St,ht=Et),Ot.indexOf("across")!==-1){var Ke=se._counterDomainMin,Pe=se._counterDomainMax;se.anchor==="free"&&(Ke=Math.min(Ke,se.position),Pe=Math.max(Pe,se.position)),ot=J.t+(1-Pe)*J.h,ht=J.t+(1-Ke)*J.h}q.insert("line",":first-child").attr({x1:dt,x2:dt,y1:ot,y2:ht,"stroke-width":Vt,stroke:kt,"stroke-dasharray":f.dashStyle(se.spikedash,Vt)}).classed("spikeline",!0).classed("crisp",!0),q.insert("line",":first-child").attr({x1:dt,x2:dt,y1:ot,y2:ht,"stroke-width":Vt+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}Ot.indexOf("marker")!==-1&&q.insert("circle",":first-child").attr({cx:dt,cy:St-(se.side!=="top"?Vt:-Vt),r:Vt,fill:kt}).classed("spikeline",!0)}}}function W(V,j,ee){if(!ee||ee.length!==V._hoverdata.length)return!0;for(var q=ee.length-1;q>=0;q--){var X=ee[q],J=V._hoverdata[q];if(X.curveNumber!==J.curveNumber||String(X.pointNumber)!==String(J.pointNumber)||String(X.pointNumbers)!==String(J.pointNumbers))return!0}return!1}function re(V,j){return!j||j.vLinePoint!==V._spikepoints.vLinePoint||j.hLinePoint!==V._spikepoints.hLinePoint}function Q(V,j){return n.plainText(V||"",{len:j,allowedTags:["br","sub","sup","b","i","em"]})}function Z(V,j){for(var ee=j.charAt(0),q=[],X=[],J=[],ie=0;ie<V.length;ie++){var ne=V[ie];d.traceIs(ne.trace,"bar-like")||d.traceIs(ne.trace,"box-violin")?J.push(ne):ne.trace[ee+"period"]?X.push(ne):q.push(ne)}return q.concat(X).concat(J)}function K(V,j,ee){var q=j[V+"a"],X=j[V+"Val"],J=j.cd[0];if(q.type==="category")X=q._categoriesMap[X];else if(q.type==="date"){var ie=j.trace[V+"periodalignment"];if(ie){var ne=j.cd[j.index],oe=ne[V+"Start"];oe===void 0&&(oe=ne[V]);var se=ne[V+"End"];se===void 0&&(se=ne[V]);var me=se-oe;ie==="end"?X+=me:ie==="middle"&&(X+=me/2)}X=q.d2c(X)}return J&&J.t&&J.t.posLetter===q._id&&(ee.boxmode==="group"||ee.violinmode==="group")&&(X+=J.t.dPos),X}function le(V){return V.offsetTop+V.clientTop}function fe(V){return V.offsetLeft+V.clientLeft}function ue(V,j){var ee=V._fullLayout,q=j.getBoundingClientRect(),X=q.x,J=q.y,ie=X+q.width,ne=J+q.height,oe=y.apply3DTransform(ee._invTransform)(X,J),se=y.apply3DTransform(ee._invTransform)(ie,ne),me=oe[0],ce=oe[1],pe=se[0],xe=se[1];return{x:me,y:ce,width:pe-me,height:xe-ce,top:Math.min(ce,xe),left:Math.min(me,pe),right:Math.max(me,pe),bottom:Math.max(ce,xe)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(e,I,F){var s=e("../../lib"),o=e("../color"),h=e("./helpers").isUnifiedHover;I.exports=function(t,a,i,n){n=n||{};var r=a.legend;function f(u){n.font[u]||(n.font[u]=r?a.legend.font[u]:a.font[u])}a&&h(a.hovermode)&&(n.font||(n.font={}),f("size"),f("family"),f("color"),r?(n.bgcolor||(n.bgcolor=o.combine(a.legend.bgcolor,a.paper_bgcolor)),n.bordercolor||(n.bordercolor=a.legend.bordercolor)):n.bgcolor||(n.bgcolor=a.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),s.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(y,t){function a(i,n){return t[i]!==void 0?t[i]:s.coerce(y,t,o,i,n)}return a("clickmode"),a("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../dragelement"),y=e("./helpers"),t=e("./layout_attributes"),a=e("./hover");I.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:t},attributes:e("./attributes"),layoutAttributes:t,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:y.getDistanceFunction,getClosest:y.getClosest,inbox:y.inbox,quadrature:y.quadrature,appendArrayPointValue:y.appendArrayPointValue,castHoverOption:n,castHoverinfo:r,hover:a.hover,unhover:h.unhover,loneHover:a.loneHover,loneUnhover:i,click:e("./click")};function i(f){var u=o.isD3Selection(f)?f:s.select(f);u.selectAll("g.hovertext").remove(),u.selectAll(".spikeline").remove()}function n(f,u,l){return o.castOption(f,u,"hoverlabel."+l)}function r(f,u,l){function m(d){return o.coerceHoverinfo({hoverinfo:d},{_module:f._module},u)}return o.castOption(f,l,"hoverinfo",m)}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(e,I,F){var s=e("./constants"),o=e("../../plots/font_attributes"),h=o({editType:"none"});h.family.dflt=s.HOVERFONT,h.size.dflt=s.HOVERFONTSIZE,I.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:h,grouptitlefont:o({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes"),h=e("./hovermode_defaults"),y=e("./hoverlabel_defaults");I.exports=function(a,i){function n(d,b){return s.coerce(a,i,o,d,b)}var r=h(a,i);r&&(n("hoverdistance"),n("spikedistance"));var f=n("dragmode");f==="select"&&n("selectdirection");var u=i._has("mapbox"),l=i._has("geo"),m=i._basePlotModules.length;i.dragmode==="zoom"&&((u||l)&&m===1||u&&l&&m===2)&&(i.dragmode="pan"),y(a,i,n),s.coerceFont(n,"hoverlabel.grouptitlefont",i.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(e,I,F){var s=e("../../lib"),o=e("./hoverlabel_defaults"),h=e("./layout_attributes");I.exports=function(t,a){function i(n,r){return s.coerce(t,a,h,n,r)}o(t,a,i)}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(e,I,F){var s=e("../../lib"),o=e("../../lib/regex").counter,h=e("../../plots/domain").attributes,y=e("../../plots/cartesian/constants").idRegex,t=e("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[o("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:h({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function i(l,m,d){var b=m[d+"axes"],g=Object.keys((l._splomAxes||{})[d]||{});if(Array.isArray(b))return b;if(g.length)return g}function n(l,m){var d=l.grid||{},b=i(m,d,"x"),g=i(m,d,"y");if(!l.grid&&!b&&!g)return;var _=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]),p=Array.isArray(b),A=Array.isArray(g),c=p&&b!==d.xaxes&&A&&g!==d.yaxes,S,T;_?(S=d.subplots.length,T=d.subplots[0].length):(A&&(S=g.length),p&&(T=b.length));var x=t.newContainer(m,"grid");function w(H,B){return s.coerce(d,x,a,H,B)}var v=w("rows",S),C=w("columns",T);if(!(v*C>1)){delete m.grid;return}if(!_&&!p&&!A){var M=w("pattern")==="independent";M&&(_=!0)}x._hasSubplotGrid=_;var E=w("roworder"),L=E==="top to bottom",z=_?.2:.1,O=_?.3:.1,R,D;c&&m._splomGridDflt&&(R=m._splomGridDflt.xside,D=m._splomGridDflt.yside),x._domains={x:r("x",w,z,R,C),y:r("y",w,O,D,v,L)}}function r(l,m,d,b,g,_){var p=m(l+"gap",d),A=m("domain."+l);m(l+"side",b);for(var c=new Array(g),S=A[0],T=(A[1]-S)/(g-p),x=T*(1-p),w=0;w<g;w++){var v=S+T*w;c[_?g-1-w:w]=[v,v+x]}return c}function f(l,m){var d=m.grid;if(!(!d||!d._domains)){var b=l.grid||{},g=m._subplots,_=d._hasSubplotGrid,p=d.rows,A=d.columns,c=d.pattern==="independent",S,T,x,w,v,C,M,E=d._axisMap={};if(_){var L=b.subplots||[];C=d.subplots=new Array(p);var z=1;for(S=0;S<p;S++){var O=C[S]=new Array(A),R=L[S]||[];for(T=0;T<A;T++)if(c?(v=z===1?"xy":"x"+z+"y"+z,z++):v=R[T],O[T]="",g.cartesian.indexOf(v)!==-1){if(M=v.indexOf("y"),x=v.slice(0,M),w=v.slice(M),E[x]!==void 0&&E[x]!==T||E[w]!==void 0&&E[w]!==S)continue;O[T]=v,E[x]=T,E[w]=S}}}else{var D=i(m,b,"x"),H=i(m,b,"y");d.xaxes=u(D,g.xaxis,A,E,"x"),d.yaxes=u(H,g.yaxis,p,E,"y")}var B=d._anchors={},$=d.roworder==="top to bottom";for(var W in E){var re=W.charAt(0),Q=d[re+"side"],Z,K,le;if(Q.length<8)B[W]="free";else if(re==="x"){if(Q.charAt(0)==="t"===$?(Z=0,K=1,le=p):(Z=p-1,K=-1,le=-1),_){var fe=E[W];for(S=Z;S!==le;S+=K)if(v=C[S][fe],!!v&&(M=v.indexOf("y"),v.slice(0,M)===W)){B[W]=v.slice(M);break}}else for(S=Z;S!==le;S+=K)if(w=d.yaxes[S],g.cartesian.indexOf(W+w)!==-1){B[W]=w;break}}else if(Q.charAt(0)==="l"?(Z=0,K=1,le=A):(Z=A-1,K=-1,le=-1),_){var ue=E[W];for(S=Z;S!==le;S+=K)if(v=C[ue][S],!!v&&(M=v.indexOf("y"),v.slice(M)===W)){B[W]=v.slice(0,M);break}}else for(S=Z;S!==le;S+=K)if(x=d.xaxes[S],g.cartesian.indexOf(x+W)!==-1){B[W]=x;break}}}}function u(l,m,d,b,g){var _=new Array(d),p;function A(c,S){m.indexOf(S)!==-1&&b[S]===void 0?(_[c]=S,b[S]=c):_[c]=""}if(Array.isArray(l))for(p=0;p<d;p++)A(p,l[p]);else for(A(0,g),p=1;p<d;p++)A(p,g+(p+1));return _}I.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:n,contentDefaults:f}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(e,I,F){var s=e("../../plots/cartesian/constants"),o=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),I.exports=o("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",s.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",s.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib/to_log_range");I.exports=function(y,t,a,i){t=t||{};var n=a==="log"&&t.type==="linear",r=a==="linear"&&t.type==="log";if(!!(n||r)){for(var f=y._fullLayout.images,u=t._id.charAt(0),l,m,d=0;d<f.length;d++)if(l=f[d],m="images["+d+"].",l[u+"ref"]===t._id){var b=l[u],g=l["size"+u],_=null,p=null;if(n){_=o(b,t.range);var A=g/Math.pow(10,_)/2;p=2*Math.log(A+Math.sqrt(1+A*A))/Math.LN10}else _=Math.pow(10,b),p=_*(Math.pow(10,g/2)-Math.pow(10,-g/2));s(_)?s(p)||(p=null):(_=null,p=null),i(m+u,_),i(m+"size"+u,p)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("../../plots/array_container_defaults"),y=e("./attributes"),t="images";I.exports=function(n,r){var f={name:t,handleItemDefaults:a};h(n,r,f)};function a(i,n,r){function f(A,c){return s.coerce(i,n,y,A,c)}var u=f("source"),l=f("visible",!!u);if(!l)return n;f("layer"),f("xanchor"),f("yanchor"),f("sizex"),f("sizey"),f("sizing"),f("opacity");for(var m={_fullLayout:r},d=["x","y"],b=0;b<2;b++){var g=d[b],_=o.coerceRef(i,n,m,g,"paper",void 0);if(_!=="paper"){var p=o.getFromId(m,_);p._imgIndices.push(n._index)}o.coercePosition(n,m,f,_,g,0)}return n}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(e,I,F){var s=e("@plotly/d3"),o=e("../drawing"),h=e("../../plots/cartesian/axes"),y=e("../../plots/cartesian/axis_ids"),t=e("../../constants/xmlns_namespaces");I.exports=function(i){var n=i._fullLayout,r=[],f={},u=[],l,m;for(m=0;m<n.images.length;m++){var d=n.images[m];if(d.visible)if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){l=y.ref2id(d.xref)+y.ref2id(d.yref);var b=n._plots[l];if(!b){u.push(d);continue}b.mainplot&&(l=b.mainplot.id),f[l]||(f[l]=[]),f[l].push(d)}else d.layer==="above"?r.push(d):u.push(d)}var g={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function _(w){var v=s.select(this);if(this._imgSrc!==w.source)if(v.attr("xmlns",t.svg),w.source&&w.source.slice(0,5)==="data:")v.attr("xlink:href",w.source),this._imgSrc=w.source;else{var C=new Promise(function(M){var E=new Image;this.img=E,E.setAttribute("crossOrigin","anonymous"),E.onerror=L,E.onload=function(){var z=document.createElement("canvas");z.width=this.width,z.height=this.height;var O=z.getContext("2d");O.drawImage(this,0,0);var R=z.toDataURL("image/png");v.attr("xlink:href",R),M()},v.on("error",L),E.src=w.source,this._imgSrc=w.source;function L(){v.remove(),M()}}.bind(this));i._promises.push(C)}}function p(w){var v=s.select(this),C=h.getFromId(i,w.xref),M=h.getFromId(i,w.yref),E=h.getRefType(w.xref)==="domain",L=h.getRefType(w.yref)==="domain",z=n._size,O,R;C!==void 0?O=typeof w.xref=="string"&&E?C._length*w.sizex:Math.abs(C.l2p(w.sizex)-C.l2p(0)):O=w.sizex*z.w,M!==void 0?R=typeof w.yref=="string"&&L?M._length*w.sizey:Math.abs(M.l2p(w.sizey)-M.l2p(0)):R=w.sizey*z.h;var D=O*g.x[w.xanchor].offset,H=R*g.y[w.yanchor].offset,B=g.x[w.xanchor].sizing+g.y[w.yanchor].sizing,$,W;switch(C!==void 0?$=typeof w.xref=="string"&&E?C._length*w.x+C._offset:C.r2p(w.x)+C._offset:$=w.x*z.w+z.l,$+=D,M!==void 0?W=typeof w.yref=="string"&&L?M._length*(1-w.y)+M._offset:M.r2p(w.y)+M._offset:W=z.h-w.y*z.h+z.t,W+=H,w.sizing){case"fill":B+=" slice";break;case"stretch":B="none";break}v.attr({x:$,y:W,width:O,height:R,preserveAspectRatio:B,opacity:w.opacity});var re=C&&h.getRefType(w.xref)!=="domain"?C._id:"",Q=M&&h.getRefType(w.yref)!=="domain"?M._id:"",Z=re+Q;o.setClipUrl(v,Z?"clip"+n._uid+Z:null,i)}var A=n._imageLowerLayer.selectAll("image").data(u),c=n._imageUpperLayer.selectAll("image").data(r);A.enter().append("image"),c.enter().append("image"),A.exit().remove(),c.exit().remove(),A.each(function(w){_.bind(this)(w),p.bind(this)(w)}),c.each(function(w){_.bind(this)(w),p.bind(this)(w)});var S=Object.keys(n._plots);for(m=0;m<S.length;m++){l=S[m];var T=n._plots[l];if(!!T.imagelayer){var x=T.imagelayer.selectAll("image").data(f[l]||[]);x.enter().append("image"),x.exit().remove(),x.each(function(w){_.bind(this)(w),p.bind(this)(w)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(e,I,F){I.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(e,I,F){var s=e("../../plots/font_attributes"),o=e("../color/attributes");I.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:s({editType:"legend"}),grouptitlefont:s({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:s({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(e,I,F){I.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("../../plot_api/plot_template"),y=e("../../plots/attributes"),t=e("./attributes"),a=e("../../plots/layout_attributes"),i=e("./helpers");I.exports=function(r,f,u){var l=r.legend||{},m=h.newContainer(f,"legend");function d(R,D){return o.coerce(l,m,t,R,D)}for(var b,g=function(R,D){var H=b._input,B=b;return o.coerce(H,B,y,R,D)},_=f.font||{},p=o.coerceFont(d,"grouptitlefont",o.extendFlat({},_,{size:Math.round(_.size*1.1)})),A=0,c=!1,S="normal",T=0;T<u.length;T++)b=u[T],b.visible&&((b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(A++,b.showlegend&&(c=!0,(s.traceIs(b,"pie-like")||b._input.showlegend===!0)&&A++),o.coerceFont(g,"legendgrouptitle.font",p)),(s.traceIs(b,"bar")&&f.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(S=i.isGrouped({traceorder:S})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(S=i.isReversed({traceorder:S})?"reversed+grouped":"grouped"));var x=o.coerce(r,f,a,"showlegend",c&&A>1);if(x===!1&&(f.legend=void 0),!(x===!1&&!l.uirevision)&&(d("uirevision",f.uirevision),x!==!1)){d("bgcolor",f.paper_bgcolor),d("bordercolor"),d("borderwidth");var w=o.coerceFont(d,"font",f.font),v=d("orientation"),C=v==="h",M,E,L;C?(M=0,s.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(E=1.1,L="bottom"):(E=-.1,L="top")):(M=1.02,E=1,L="auto"),d("traceorder",S),i.isGrouped(f.legend)&&d("tracegroupgap"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("x",M),d("xanchor"),d("y",E),d("yanchor",L),d("valign"),o.noneOrAll(l,m,["x","y"]);var z=d("title.text");if(z){d("title.side",C?"left":"top");var O=o.extendFlat({},w,{size:o.bigFont(w.size)});o.coerceFont(d,"title.font",O)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../plots/plots"),y=e("../../registry"),t=e("../../lib/events"),a=e("../dragelement"),i=e("../drawing"),n=e("../color"),r=e("../../lib/svg_text_utils"),f=e("./handle_click"),u=e("./constants"),l=e("../../constants/alignment"),m=l.LINE_SPACING,d=l.FROM_TL,b=l.FROM_BR,g=e("./get_legend_data"),_=e("./style"),p=e("./helpers"),A=1;I.exports=function(D,H){return H||(H=D._fullLayout.legend||{}),c(D,H)};function c(R,D){var H=R._fullLayout,B="legend"+H._uid,$,W=D._inHover;if(W?($=D.layer,B+="-hover"):$=H._infolayer,!!$){R._legendMouseDownTime||(R._legendMouseDownTime=0);var re;if(W){if(!D.entries)return;re=g(D.entries,D)}else{if(!R.calcdata)return;re=H.showlegend&&g(R.calcdata,D)}var Q=H.hiddenlabels||[];if(!W&&(!H.showlegend||!re.length))return $.selectAll(".legend").remove(),H._topdefs.select("#"+B).remove(),h.autoMargin(R,"legend");var Z=o.ensureSingle($,"g","legend",function(X){W||X.attr("pointer-events","all")}),K=o.ensureSingleById(H._topdefs,"clipPath",B,function(X){X.append("rect")}),le=o.ensureSingle(Z,"rect","bg",function(X){X.attr("shape-rendering","crispEdges")});le.call(n.stroke,D.bordercolor).call(n.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px");var fe=o.ensureSingle(Z,"g","scrollbox"),ue=D.title;if(D._titleWidth=0,D._titleHeight=0,ue.text){var V=o.ensureSingle(fe,"text","legendtitletext");V.attr("text-anchor","start").call(i.font,ue.font).text(ue.text),v(V,fe,R,D,A)}else fe.selectAll(".legendtitletext").remove();var j=o.ensureSingle(Z,"rect","scrollbar",function(X){X.attr(u.scrollBarEnterAttrs).call(n.fill,u.scrollBarColor)}),ee=fe.selectAll("g.groups").data(re);ee.enter().append("g").attr("class","groups"),ee.exit().remove();var q=ee.selectAll("g.traces").data(o.identity);q.enter().append("g").attr("class","traces"),q.exit().remove(),q.style("opacity",function(X){var J=X[0].trace;return y.traceIs(J,"pie-like")?Q.indexOf(X[0].label)!==-1?.5:1:J.visible==="legendonly"?.5:1}).each(function(){s.select(this).call(T,R,D)}).call(_,R,D).each(function(){W||s.select(this).call(w,R)}),o.syncOrAsync([h.previousPromises,function(){return E(R,ee,q,D)},function(){var X=H._size,J=D.borderwidth;if(!W){var ie=L(R);if(ie)return;var ne=X.l+X.w*D.x-d[z(D)]*D._width,oe=X.t+X.h*(1-D.y)-d[O(D)]*D._effHeight;if(H.margin.autoexpand){var se=ne,me=oe;ne=o.constrain(ne,0,H.width-D._width),oe=o.constrain(oe,0,H.height-D._effHeight),ne!==se&&o.log("Constrain legend.x to make legend fit inside graph"),oe!==me&&o.log("Constrain legend.y to make legend fit inside graph")}i.setTranslate(Z,ne,oe)}if(j.on(".drag",null),Z.on("wheel",null),W||D._height<=D._maxHeight||R._context.staticPlot){var ce=D._effHeight;W&&(ce=D._height),le.attr({width:D._width-J,height:ce-J,x:J/2,y:J/2}),i.setTranslate(fe,0,0),K.select("rect").attr({width:D._width-2*J,height:ce-2*J,x:J,y:J}),i.setClipUrl(fe,B,R),i.setRect(j,0,0,0,0),delete D._scrollY}else{var pe=Math.max(u.scrollBarMinHeight,D._effHeight*D._effHeight/D._height),xe=D._effHeight-pe-2*u.scrollBarMargin,Se=D._height-D._effHeight,Ae=xe/Se,Ce=Math.min(D._scrollY||0,Se);le.attr({width:D._width-2*J+u.scrollBarWidth+u.scrollBarMargin,height:D._effHeight-J,x:J/2,y:J/2}),K.select("rect").attr({width:D._width-2*J+u.scrollBarWidth+u.scrollBarMargin,height:D._effHeight-2*J,x:J,y:J+Ce}),i.setClipUrl(fe,B,R),De(Ce,pe,Ae),Z.on("wheel",function(){Ce=o.constrain(D._scrollY+s.event.deltaY/xe*Se,0,Se),De(Ce,pe,Ae),Ce!==0&&Ce!==Se&&s.event.preventDefault()});var Ee,Oe,_e,Re=function(wt,Ot,Vt){var kt=(Vt-Ot)/Ae+wt;return o.constrain(kt,0,Se)},Ve=function(wt,Ot,Vt){var kt=(Ot-Vt)/Ae+wt;return o.constrain(kt,0,Se)},Je=s.behavior.drag().on("dragstart",function(){var wt=s.event.sourceEvent;wt.type==="touchstart"?Ee=wt.changedTouches[0].clientY:Ee=wt.clientY,_e=Ce}).on("drag",function(){var wt=s.event.sourceEvent;wt.buttons===2||wt.ctrlKey||(wt.type==="touchmove"?Oe=wt.changedTouches[0].clientY:Oe=wt.clientY,Ce=Re(_e,Ee,Oe),De(Ce,pe,Ae))});j.call(Je);var ze=s.behavior.drag().on("dragstart",function(){var wt=s.event.sourceEvent;wt.type==="touchstart"&&(Ee=wt.changedTouches[0].clientY,_e=Ce)}).on("drag",function(){var wt=s.event.sourceEvent;wt.type==="touchmove"&&(Oe=wt.changedTouches[0].clientY,Ce=Ve(_e,Ee,Oe),De(Ce,pe,Ae))});fe.call(ze)}function De(wt,Ot,Vt){D._scrollY=R._fullLayout.legend._scrollY=wt,i.setTranslate(fe,0,-wt),i.setRect(j,D._width,u.scrollBarMargin+wt*Vt,u.scrollBarWidth,Ot),K.select("rect").attr("y",J+wt)}if(R._context.edits.legendPosition){var je,dt,Et,$t;Z.classed("cursor-move",!0),a.init({element:Z.node(),gd:R,prepFn:function(){var wt=i.getTranslate(Z);Et=wt.x,$t=wt.y},moveFn:function(wt,Ot){var Vt=Et+wt,kt=$t+Ot;i.setTranslate(Z,Vt,kt),je=a.align(Vt,0,X.l,X.l+X.w,D.xanchor),dt=a.align(kt,0,X.t+X.h,X.t,D.yanchor)},doneFn:function(){je!==void 0&&dt!==void 0&&y.call("_guiRelayout",R,{"legend.x":je,"legend.y":dt})},clickFn:function(wt,Ot){var Vt=$.selectAll("g.traces").filter(function(){var kt=this.getBoundingClientRect();return Ot.clientX>=kt.left&&Ot.clientX<=kt.right&&Ot.clientY>=kt.top&&Ot.clientY<=kt.bottom});Vt.size()>0&&S(R,Z,Vt,wt,Ot)}})}}],R)}}function S(R,D,H,B,$){var W=H.data()[0][0].trace,re={event:$,node:H.node(),curveNumber:W.index,expandedIndex:W._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};W._group&&(re.group=W._group),y.traceIs(W,"pie-like")&&(re.label=H.datum()[0].label);var Q=t.triggerHandler(R,"plotly_legendclick",re);if(Q!==!1){if(B===1)D._clickTimeout=setTimeout(function(){!R._fullLayout||f(H,R,B)},R._context.doubleClickDelay);else if(B===2){D._clickTimeout&&clearTimeout(D._clickTimeout),R._legendMouseDownTime=0;var Z=t.triggerHandler(R,"plotly_legenddoubleclick",re);Z!==!1&&f(H,R,B)}}}function T(R,D,H){var B=R.data()[0][0],$=B.trace,W=y.traceIs($,"pie-like"),re=!H._inHover&&D._context.edits.legendText&&!W,Q=H._maxNameLength,Z,K;B.groupTitle?(Z=B.groupTitle.text,K=B.groupTitle.font):(K=H.font,H.entries?Z=B.text:(Z=W?B.label:$.name,$._meta&&(Z=o.templateString(Z,$._meta))));var le=o.ensureSingle(R,"text","legendtext");le.attr("text-anchor","start").call(i.font,K).text(re?x(Z,Q):Z);var fe=H.itemwidth+u.itemGap*2;r.positionText(le,fe,0),re?le.call(r.makeEditable,{gd:D,text:Z}).call(v,R,D,H).on("edit",function(ue){this.text(x(ue,Q)).call(v,R,D,H);var V=B.trace._fullInput||{},j={};if(y.hasTransform(V,"groupby")){var ee=y.getTransformIndices(V,"groupby"),q=ee[ee.length-1],X=o.keyedContainer(V,"transforms["+q+"].styles","target","value.name");X.set(B.trace._group,ue),j=X.constructUpdate()}else j.name=ue;return y.call("_guiRestyle",D,j,$.index)}):v(le,R,D,H)}function x(R,D){var H=Math.max(4,D);if(R&&R.trim().length>=H/2)return R;R=R||"";for(var B=H-R.length;B>0;B--)R+=" ";return R}function w(R,D){var H=D._context.doubleClickDelay,B,$=1,W=o.ensureSingle(R,"rect","legendtoggle",function(re){D._context.staticPlot||re.style("cursor","pointer").attr("pointer-events","all"),re.call(n.fill,"rgba(0,0,0,0)")});D._context.staticPlot||(W.on("mousedown",function(){B=new Date().getTime(),B-D._legendMouseDownTime<H?$+=1:($=1,D._legendMouseDownTime=B)}),W.on("mouseup",function(){if(!(D._dragged||D._editing)){var re=D._fullLayout.legend;new Date().getTime()-D._legendMouseDownTime>H&&($=Math.max($-1,1)),S(D,re,R,$,s.event)}}))}function v(R,D,H,B,$){B._inHover&&R.attr("data-notex",!0),r.convertToTspans(R,H,function(){C(D,H,B,$)})}function C(R,D,H,B){var $=R.data()[0][0];if(!H._inHover&&$&&!$.trace.showlegend){R.remove();return}var W=R.select("g[class*=math-group]"),re=W.node();H||(H=D._fullLayout.legend);var Q=H.borderwidth,Z;B===A?Z=H.title.font:$.groupTitle?Z=$.groupTitle.font:Z=H.font;var K=Z.size*m,le,fe;if(re){var ue=i.bBox(re);le=ue.height,fe=ue.width,B===A?i.setTranslate(W,Q,Q+le*.75):i.setTranslate(W,0,le*.25)}else{var V=R.select(B===A?".legendtitletext":".legendtext"),j=r.lineCount(V),ee=V.node();if(le=K*j,fe=ee?i.bBox(ee).width:0,B===A)H.title.side==="left"&&(fe+=u.itemGap*2),r.positionText(V,Q+u.titlePad,Q+K);else{var q=u.itemGap*2+H.itemwidth;$.groupTitle&&(q=u.itemGap,fe-=H.itemwidth),r.positionText(V,q,-K*((j-1)/2-.3))}}B===A?(H._titleWidth=fe,H._titleHeight=le):($.lineHeight=K,$.height=Math.max(le,16)+3,$.width=fe)}function M(R){var D=0,H=0,B=R.title.side;return B&&(B.indexOf("left")!==-1&&(D=R._titleWidth),B.indexOf("top")!==-1&&(H=R._titleHeight)),[D,H]}function E(R,D,H,B){var $=R._fullLayout;B||(B=$.legend);var W=$._size,re=p.isVertical(B),Q=p.isGrouped(B),Z=B.borderwidth,K=2*Z,le=u.itemGap,fe=B.itemwidth+le*2,ue=2*(Z+le),V=O(B),j=B.y<0||B.y===0&&V==="top",ee=B.y>1||B.y===1&&V==="bottom",q=B.tracegroupgap;B._maxHeight=Math.max(j||ee?$.height/2:W.h,30);var X=0;B._width=0,B._height=0;var J=M(B);if(re)H.each(function(je){var dt=je[0].height;i.setTranslate(this,Z+J[0],Z+J[1]+B._height+dt/2+le),B._height+=dt,B._width=Math.max(B._width,je[0].width)}),X=fe+B._width,B._width+=le+fe+K,B._height+=ue,Q&&(D.each(function(je,dt){i.setTranslate(this,0,dt*B.tracegroupgap)}),B._height+=(B._lgroupsLength-1)*B.tracegroupgap);else{var ie=z(B),ne=B.x<0||B.x===0&&ie==="right",oe=B.x>1||B.x===1&&ie==="left",se=ee||j,me=$.width/2;B._maxWidth=Math.max(ne?se&&ie==="left"?W.l+W.w:me:oe?se&&ie==="right"?W.r+W.w:me:W.w,2*fe);var ce=0,pe=0;H.each(function(je){var dt=je[0].width+fe;ce=Math.max(ce,dt),pe+=dt}),X=null;var xe=0;if(Q){var Se=0,Ae=0,Ce=0;D.each(function(){var je=0,dt=0;s.select(this).selectAll("g.traces").each(function($t){var wt=$t[0].width,Ot=$t[0].height;i.setTranslate(this,J[0],J[1]+Z+le+Ot/2+dt),dt+=Ot,je=Math.max(je,fe+wt)});var Et=je+le;Ae>0&&Et+Z+Ae>B._maxWidth?(xe=Math.max(xe,Ae),Ae=0,Ce+=Se+q,Se=dt):Se=Math.max(Se,dt),i.setTranslate(this,Ae,Ce),Ae+=Et}),B._width=Math.max(xe,Ae)+Z,B._height=Ce+Se+ue}else{var Ee=H.size(),Oe=pe+K+(Ee-1)*le<B._maxWidth,_e=0,Re=0,Ve=0,Je=0;H.each(function(je){var dt=je[0].height,Et=fe+je[0].width,$t=(Oe?Et:ce)+le;$t+Z+Re-le>=B._maxWidth&&(xe=Math.max(xe,Je),Re=0,Ve+=_e,B._height+=_e,_e=0),i.setTranslate(this,J[0]+Z+Re,J[1]+Z+Ve+dt/2+le),Je=Re+Et+le,Re+=$t,_e=Math.max(_e,dt)}),Oe?(B._width=Re+K,B._height=_e+ue):(B._width=Math.max(xe,Je)+K,B._height+=_e+ue)}}B._width=Math.ceil(Math.max(B._width+J[0],B._titleWidth+2*(Z+u.titlePad))),B._height=Math.ceil(Math.max(B._height+J[1],B._titleHeight+2*(Z+u.itemGap))),B._effHeight=Math.min(B._height,B._maxHeight);var ze=R._context.edits,De=ze.legendText||ze.legendPosition;H.each(function(je){var dt=s.select(this).select(".legendtoggle"),Et=je[0].height,$t=De?fe:X||fe+je[0].width;re||($t+=le/2),i.setRect(dt,0,-Et/2,$t,Et)})}function L(R){var D=R._fullLayout,H=D.legend,B=z(H),$=O(H);return h.autoMargin(R,"legend",{x:H.x,y:H.y,l:H._width*d[B],r:H._width*b[B],b:H._effHeight*b[$],t:H._effHeight*d[$]})}function z(R){return o.isRightAnchor(R)?"right":o.isCenterAnchor(R)?"center":"left"}function O(R){return o.isBottomAnchor(R)?"bottom":o.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(e,I,F){var s=e("../../registry"),o=e("./helpers");I.exports=function(y,t){var a=t._inHover,i=o.isGrouped(t),n=o.isReversed(t),r={},f=[],u=!1,l={},m=0,d=0,b,g;function _(H,B){if(H===""||!o.isGrouped(t)){var $="~~i"+m;f.push($),r[$]=[B],m++}else f.indexOf(H)===-1?(f.push(H),u=!0,r[H]=[B]):r[H].push(B)}for(b=0;b<y.length;b++){var p=y[b],A=p[0],c=A.trace,S=c.legendgroup;if(!(!a&&(!c.visible||!c.showlegend)))if(s.traceIs(c,"pie-like"))for(l[S]||(l[S]={}),g=0;g<p.length;g++){var T=p[g].label;l[S][T]||(_(S,{label:T,color:p[g].color,i:p[g].i,trace:c,pts:p[g].pts}),l[S][T]=!0,d=Math.max(d,(T||"").length))}else _(S,A),d=Math.max(d,(c.name||"").length)}if(!f.length)return[];var x=!u||!i,w=[];for(b=0;b<f.length;b++){var v=r[f[b]];x?w.push(v[0]):w.push(v)}for(x&&(w=[w]),b=0;b<w.length;b++){var C=1/0;for(g=0;g<w[b].length;g++){var M=w[b][g].trace.legendrank;C>M&&(C=M)}w[b][0]._groupMinRank=C,w[b][0]._preGroupSort=b}var E=function(H,B){return H[0]._groupMinRank-B[0]._groupMinRank||H[0]._preGroupSort-B[0]._preGroupSort},L=function(H,B){return H.trace.legendrank-B.trace.legendrank||H._preSort-B._preSort};for(w.forEach(function(H,B){H[0]._preGroupSort=B}),w.sort(E),b=0;b<w.length;b++){w[b].forEach(function(H,B){H._preSort=B}),w[b].sort(L);var z=w[b][0].trace,O=null;for(g=0;g<w[b].length;g++){var R=w[b][g].trace.legendgrouptitle;if(R&&R.text){O=R,a&&(R.font=t._groupTitleFont);break}}if(n&&w[b].reverse(),O){var D=!1;for(g=0;g<w[b].length;g++)if(s.traceIs(w[b][g].trace,"pie-like")){D=!0;break}w[b].unshift({i:-1,groupTitle:O,noClick:D,trace:{showlegend:z.showlegend,legendgroup:z.legendgroup,visible:t.groupclick==="toggleitem"?!0:z.visible}})}for(g=0;g<w[b].length;g++)w[b][g]=[w[b][g]]}return t._lgroupsLength=w.length,t._maxNameLength=d,w}},{"../../registry":638,"./helpers":422}],421:[function(e,I,F){var s=e("../../lib"),o=e("../../registry"),h=!0;I.exports=function(t,a,i){var n=a._fullLayout;if(a._dragged||a._editing)return;var r=n.legend.itemclick,f=n.legend.itemdoubleclick,u=n.legend.groupclick;i===1&&r==="toggle"&&f==="toggleothers"&&h&&a.data&&a._context.showTips&&s.notifier(s._(a,"Double-click on legend to isolate one trace"),"long"),h=!1;var l;if(i===1?l=r:i===2&&(l=f),!l)return;var m=u==="togglegroup",d=n.hiddenlabels?n.hiddenlabels.slice():[],b=t.data()[0][0];if(b.groupTitle&&b.noClick)return;var g=a._fullData,_=b.trace,p=_.legendgroup,A,c,S,T,x,w,v={},C=[],M=[],E=[];function L(ue,V,j){var ee=C.indexOf(ue),q=v[V];return q||(q=v[V]=[]),C.indexOf(ue)===-1&&(C.push(ue),ee=C.length-1),q[ee]=j,ee}function z(ue,V){if(!(b.groupTitle&&!m)){var j=ue._fullInput;if(o.hasTransform(j,"groupby")){var ee=M[j.index];if(!ee){var q=o.getTransformIndices(j,"groupby"),X=q[q.length-1];ee=s.keyedContainer(j,"transforms["+X+"].styles","target","value.visible"),M[j.index]=ee}var J=ee.get(ue._group);J===void 0&&(J=!0),J!==!1&&ee.set(ue._group,V),E[j.index]=L(j.index,"visible",j.visible!==!1)}else{var ie=j.visible===!1?!1:V;L(j.index,"visible",ie)}}}if(o.traceIs(_,"pie-like")){var O=b.label,R=d.indexOf(O);l==="toggle"?R===-1?d.push(O):d.splice(R,1):l==="toggleothers"&&(d=[],a.calcdata[0].forEach(function(ue){O!==ue.label&&d.push(ue.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===d.length&&R===-1&&(d=[])),o.call("_guiRelayout",a,"hiddenlabels",d)}else{var D=p&&p.length,H=[],B;if(D)for(A=0;A<g.length;A++)B=g[A],!!B.visible&&B.legendgroup===p&&H.push(A);if(l==="toggle"){var $;switch(_.visible){case!0:$="legendonly";break;case!1:$=!1;break;case"legendonly":$=!0;break}if(D)if(m)for(A=0;A<g.length;A++)g[A].visible!==!1&&g[A].legendgroup===p&&z(g[A],$);else z(_,$);else z(_,$)}else if(l==="toggleothers"){var W,re,Q,Z,K=!0;for(A=0;A<g.length;A++)if(W=g[A]===_,Q=g[A].showlegend!==!0,!(W||Q)&&(re=D&&g[A].legendgroup===p,!re&&g[A].visible===!0&&!o.traceIs(g[A],"notLegendIsolatable"))){K=!1;break}for(A=0;A<g.length;A++)if(g[A].visible!==!1&&!o.traceIs(g[A],"notLegendIsolatable"))switch(_.visible){case"legendonly":z(g[A],!0);break;case!0:Z=K?!0:"legendonly",W=g[A]===_,Q=g[A].showlegend!==!0&&!g[A].legendgroup,re=W||D&&g[A].legendgroup===p,z(g[A],re||Q?!0:Z);break}}for(A=0;A<M.length;A++)if(S=M[A],!!S){var le=S.constructUpdate(),fe=Object.keys(le);for(c=0;c<fe.length;c++)T=fe[c],w=v[T]=v[T]||[],w[E[A]]=le[T]}for(x=Object.keys(v),A=0;A<x.length;A++)for(T=x[A],c=0;c<C.length;c++)v[T].hasOwnProperty(c)||(v[T][c]=void 0);o.call("_guiRestyle",a,v,C)}}},{"../../lib":503,"../../registry":638}],422:[function(e,I,F){F.isGrouped=function(o){return(o.traceorder||"").indexOf("grouped")!==-1},F.isVertical=function(o){return o.orientation!=="h"},F.isReversed=function(o){return(o.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(e,I,F){I.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../registry"),h=e("../../lib"),y=h.strTranslate,t=e("../drawing"),a=e("../color"),i=e("../colorscale/helpers").extractOpts,n=e("../../traces/scatter/subtypes"),r=e("../../traces/pie/style_one"),f=e("../../traces/pie/helpers").castOption,u=e("./constants"),l=12,m=5,d=2,b=10,g=5;I.exports=function(S,T,x){var w=T._fullLayout;x||(x=w.legend);var v=x.itemsizing==="constant",C=x.itemwidth,M=(C+u.itemGap*2)/2,E=y(M,0),L=function(fe,ue,V,j){var ee;if(fe+1)ee=fe;else if(ue&&ue.width>0)ee=ue.width;else return 0;return v?j:Math.min(ee,V)};S.each(function(fe){var ue=s.select(this),V=h.ensureSingle(ue,"g","layers");V.style("opacity",fe[0].trace.opacity);var j=x.valign,ee=fe[0].lineHeight,q=fe[0].height;if(j==="middle"||!ee||!q)V.attr("transform",null);else{var X={top:1,bottom:-1}[j],J=X*(.5*(ee-q+3));V.attr("transform",y(0,J))}var ie=V.selectAll("g.legendfill").data([fe]);ie.enter().append("g").classed("legendfill",!0);var ne=V.selectAll("g.legendlines").data([fe]);ne.enter().append("g").classed("legendlines",!0);var oe=V.selectAll("g.legendsymbols").data([fe]);oe.enter().append("g").classed("legendsymbols",!0),oe.selectAll("g.legendpoints").data([fe]).enter().append("g").classed("legendpoints",!0)}).each(le).each(R).each(H).each(D).each($).each(Z).each(Q).each(z).each(O).each(W).each(re);function z(fe){var ue=p(fe),V=ue.showFill,j=ue.showLine,ee=ue.showGradientLine,q=ue.showGradientFill,X=ue.anyFill,J=ue.anyLine,ie=fe[0],ne=ie.trace,oe,se,me=i(ne),ce=me.colorscale,pe=me.reversescale,xe=function(Re){if(Re.size())if(V)t.fillGroupStyle(Re,T);else{var Ve="legendfill-"+ne.uid;t.gradient(Re,T,Ve,_(pe),ce,"fill")}},Se=function(Re){if(Re.size()){var Ve="legendline-"+ne.uid;t.lineGroupStyle(Re),t.gradient(Re,T,Ve,_(pe),ce,"stroke")}},Ae=n.hasMarkers(ne)||!X?"M5,0":J?"M5,-2":"M5,-3",Ce=s.select(this),Ee=Ce.select(".legendfill").selectAll("path").data(V||q?[fe]:[]);if(Ee.enter().append("path").classed("js-fill",!0),Ee.exit().remove(),Ee.attr("d",Ae+"h"+C+"v6h-"+C+"z").call(xe),j||ee){var Oe=L(void 0,ne.line,b,m);se=h.minExtend(ne,{line:{width:Oe}}),oe=[h.minExtend(ie,{trace:se})]}var _e=Ce.select(".legendlines").selectAll("path").data(j||ee?[oe]:[]);_e.enter().append("path").classed("js-line",!0),_e.exit().remove(),_e.attr("d",Ae+(ee?"l"+C+",0.0001":"h"+C)).call(j?t.lineGroupStyle:Se)}function O(fe){var ue=p(fe),V=ue.anyFill,j=ue.anyLine,ee=ue.showLine,q=ue.showMarker,X=fe[0],J=X.trace,ie=!q&&!j&&!V&&n.hasText(J),ne,oe;function se(Ee,Oe,_e,Re){var Ve=h.nestedProperty(J,Ee).get(),Je=h.isArrayOrTypedArray(Ve)&&Oe?Oe(Ve):Ve;if(v&&Je&&Re!==void 0&&(Je=Re),_e){if(Je<_e[0])return _e[0];if(Je>_e[1])return _e[1]}return Je}function me(Ee){return X._distinct&&X.index&&Ee[X.index]?Ee[X.index]:Ee[0]}if(q||ie||ee){var ce={},pe={};if(q){ce.mc=se("marker.color",me),ce.mx=se("marker.symbol",me),ce.mo=se("marker.opacity",h.mean,[.2,1]),ce.mlc=se("marker.line.color",me),ce.mlw=se("marker.line.width",h.mean,[0,5],d),pe.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var xe=se("marker.size",h.mean,[2,16],l);ce.ms=xe,pe.marker.size=xe}ee&&(pe.line={width:se("line.width",me,[0,10],m)}),ie&&(ce.tx="Aa",ce.tp=se("textposition",me),ce.ts=10,ce.tc=se("textfont.color",me),ce.tf=se("textfont.family",me)),ne=[h.minExtend(X,ce)],oe=h.minExtend(J,pe),oe.selectedpoints=null,oe.texttemplate=null}var Se=s.select(this).select("g.legendpoints"),Ae=Se.selectAll("path.scatterpts").data(q?ne:[]);Ae.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E),Ae.exit().remove(),Ae.call(t.pointStyle,oe,T),q&&(ne[0].mrc=3);var Ce=Se.selectAll("g.pointtext").data(ie?ne:[]);Ce.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E),Ce.exit().remove(),Ce.selectAll("text").call(t.textPointStyle,oe,T)}function R(fe){var ue=fe[0].trace,V=ue.type==="waterfall";if(fe[0]._distinct&&V){var j=fe[0].trace[fe[0].dir].marker;return fe[0].mc=j.color,fe[0].mlw=j.line.width,fe[0].mlc=j.line.color,B(fe,this,"waterfall")}var ee=[];ue.visible&&V&&(ee=fe[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var q=s.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ee);q.enter().append("path").classed("legendwaterfall",!0).attr("transform",E).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(X){var J=s.select(this),ie=ue[X[0]].marker,ne=L(void 0,ie.line,g,d);J.attr("d",X[1]).style("stroke-width",ne+"px").call(a.fill,ie.color),ne&&J.call(a.stroke,ie.line.color)})}function D(fe){B(fe,this)}function H(fe){B(fe,this,"funnel")}function B(fe,ue,V){var j=fe[0].trace,ee=j.marker||{},q=ee.line||{},X=V?j.visible&&j.type===V:o.traceIs(j,"bar"),J=s.select(ue).select("g.legendpoints").selectAll("path.legend"+V).data(X?[fe]:[]);J.enter().append("path").classed("legend"+V,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),J.exit().remove(),J.each(function(ie){var ne=s.select(this),oe=ie[0],se=L(oe.mlw,ee.line,g,d);ne.style("stroke-width",se+"px");var me=oe.mcc;if(!x._inHover&&"mc"in oe){var ce=i(ee),pe=ce.mid;pe===void 0&&(pe=(ce.max+ce.min)/2),me=t.tryColorscale(ee,"")(pe)}var xe=me||oe.mc||ee.color,Se=ee.pattern,Ae=Se&&t.getPatternAttr(Se.shape,0,"");if(Ae){var Ce=t.getPatternAttr(Se.bgcolor,0,null),Ee=t.getPatternAttr(Se.fgcolor,0,null),Oe=Se.fgopacity,_e=A(Se.size,8,10),Re=A(Se.solidity,.5,1),Ve="legend-"+j.uid;ne.call(t.pattern,"legend",T,Ve,Ae,_e,Re,me,Se.fillmode,Ce,Ee,Oe)}else ne.call(a.fill,xe);se&&a.stroke(ne,oe.mlc||q.color)})}function $(fe){var ue=fe[0].trace,V=s.select(this).select("g.legendpoints").selectAll("path.legendbox").data(ue.visible&&o.traceIs(ue,"box-violin")?[fe]:[]);V.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),V.exit().remove(),V.each(function(){var j=s.select(this);if((ue.boxpoints==="all"||ue.points==="all")&&a.opacity(ue.fillcolor)===0&&a.opacity((ue.line||{}).color)===0){var ee=h.minExtend(ue,{marker:{size:v?l:h.constrain(ue.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});V.call(t.pointStyle,ee,T)}else{var q=L(void 0,ue.line,g,d);j.style("stroke-width",q+"px").call(a.fill,ue.fillcolor),q&&a.stroke(j,ue.line.color)}})}function W(fe){var ue=fe[0].trace,V=s.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(ue.visible&&ue.type==="candlestick"?[fe,fe]:[]);V.enter().append("path").classed("legendcandle",!0).attr("d",function(j,ee){return ee?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(j,ee){var q=s.select(this),X=ue[ee?"increasing":"decreasing"],J=L(void 0,X.line,g,d);q.style("stroke-width",J+"px").call(a.fill,X.fillcolor),J&&a.stroke(q,X.line.color)})}function re(fe){var ue=fe[0].trace,V=s.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(ue.visible&&ue.type==="ohlc"?[fe,fe]:[]);V.enter().append("path").classed("legendohlc",!0).attr("d",function(j,ee){return ee?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(j,ee){var q=s.select(this),X=ue[ee?"increasing":"decreasing"],J=L(void 0,X.line,g,d);q.style("fill","none").call(t.dashLine,X.line.dash,J),J&&a.stroke(q,X.line.color)})}function Q(fe){K(fe,this,"pie")}function Z(fe){K(fe,this,"funnelarea")}function K(fe,ue,V){var j=fe[0],ee=j.trace,q=V?ee.visible&&ee.type===V:o.traceIs(ee,V),X=s.select(ue).select("g.legendpoints").selectAll("path.legend"+V).data(q?[fe]:[]);if(X.enter().append("path").classed("legend"+V,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),X.exit().remove(),X.size()){var J=(ee.marker||{}).line,ie=L(f(J.width,j.pts),J,g,d),ne=h.minExtend(ee,{marker:{line:{width:ie}}});ne.marker.line.color=J.color;var oe=h.minExtend(j,{trace:ne});r(X,oe,ne)}}function le(fe){var ue=fe[0].trace,V,j=[];if(ue.visible)switch(ue.type){case"histogram2d":case"heatmap":j=[["M-15,-2V4H15V-2Z"]],V=!0;break;case"choropleth":case"choroplethmapbox":j=[["M-6,-6V6H6V-6Z"]],V=!0;break;case"densitymapbox":j=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],V="radial";break;case"cone":j=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],V=!1;break;case"streamtube":j=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],V=!1;break;case"surface":j=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],V=!0;break;case"mesh3d":j=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],V=!1;break;case"volume":j=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],V=!0;break;case"isosurface":j=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],V=!1;break}var ee=s.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(j);ee.enter().append("path").classed("legend3dandfriends",!0).attr("transform",E).style("stroke-miterlimit",1),ee.exit().remove(),ee.each(function(q,X){var J=s.select(this),ie=i(ue),ne=ie.colorscale,oe=ie.reversescale,se=function(xe){if(xe.size()){var Se="legendfill-"+ue.uid;t.gradient(xe,T,Se,_(oe,V==="radial"),ne,"fill")}},me;if(ne){if(!V){var pe=ne.length;me=X===0?ne[oe?pe-1:0][1]:X===1?ne[oe?0:pe-1][1]:ne[Math.floor((pe-1)/2)][1]}}else{var ce=ue.vertexcolor||ue.facecolor||ue.color;me=h.isArrayOrTypedArray(ce)?ce[X]||ce[0]:ce}J.attr("d",q[0]),me?J.call(a.fill,me):J.call(se)})}};function _(c,S){var T=S?"radial":"horizontal";return T+(c?"":"reversed")}function p(c){var S=c[0].trace,T=S.contours,x=n.hasLines(S),w=n.hasMarkers(S),v=S.visible&&S.fill&&S.fill!=="none",C=!1,M=!1;if(T){var E=T.coloring;E==="lines"?C=!0:x=E==="none"||E==="heatmap"||T.showlines,T.type==="constraint"?v=T._operation!=="=":(E==="fill"||E==="heatmap")&&(M=!0)}return{showMarker:w,showLine:x,showFill:v,showGradientLine:C,showGradientFill:M,anyLine:x||C,anyFill:v||M}}function A(c,S,T){return c&&h.isArrayOrTypedArray(c)?S:c>T?T:c}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":906,"../../traces/pie/style_one":912,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(e,I,F){e("./constants"),I.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(e,I,F){var s=e("../../registry"),o=e("../../plots/plots"),h=e("../../plots/cartesian/axis_ids"),y=e("../../fonts/ploticon"),t=e("../shapes/draw").eraseActiveShape,a=e("../../lib"),i=a._,n=I.exports={};n.toImage={name:"toImage",title:function(c){var S=c._context.toImageButtonOptions||{},T=S.format||"png";return T==="png"?i(c,"Download plot as a png"):i(c,"Download plot")},icon:y.camera,click:function(c){var S=c._context.toImageButtonOptions,T={format:S.format||"png"};a.notifier(i(c,"Taking snapshot - this may take a few seconds"),"long"),T.format!=="svg"&&a.isIE()&&(a.notifier(i(c,"IE only supports svg.  Changing format to svg."),"long"),T.format="svg"),["filename","width","height","scale"].forEach(function(x){x in S&&(T[x]=S[x])}),s.call("downloadImage",c,T).then(function(x){a.notifier(i(c,"Snapshot succeeded")+" - "+x,"long")}).catch(function(){a.notifier(i(c,"Sorry, there was a problem downloading your snapshot!"),"long")})}},n.sendDataToCloud={name:"sendDataToCloud",title:function(c){return i(c,"Edit in Chart Studio")},icon:y.disk,click:function(c){o.sendDataToCloud(c)}},n.editInChartStudio={name:"editInChartStudio",title:function(c){return i(c,"Edit in Chart Studio")},icon:y.pencil,click:function(c){o.sendDataToCloud(c)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(c){return i(c,"Zoom")},attr:"dragmode",val:"zoom",icon:y.zoombox,click:r},n.pan2d={name:"pan2d",_cat:"pan",title:function(c){return i(c,"Pan")},attr:"dragmode",val:"pan",icon:y.pan,click:r},n.select2d={name:"select2d",_cat:"select",title:function(c){return i(c,"Box Select")},attr:"dragmode",val:"select",icon:y.selectbox,click:r},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(c){return i(c,"Lasso Select")},attr:"dragmode",val:"lasso",icon:y.lasso,click:r},n.drawclosedpath={name:"drawclosedpath",title:function(c){return i(c,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:y.drawclosedpath,click:r},n.drawopenpath={name:"drawopenpath",title:function(c){return i(c,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:y.drawopenpath,click:r},n.drawline={name:"drawline",title:function(c){return i(c,"Draw line")},attr:"dragmode",val:"drawline",icon:y.drawline,click:r},n.drawrect={name:"drawrect",title:function(c){return i(c,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:y.drawrect,click:r},n.drawcircle={name:"drawcircle",title:function(c){return i(c,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:y.drawcircle,click:r},n.eraseshape={name:"eraseshape",title:function(c){return i(c,"Erase active shape")},icon:y.eraseshape,click:t},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:r},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:r},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(c){return i(c,"Autoscale")},attr:"zoom",val:"auto",icon:y.autoscale,click:r},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(c){return i(c,"Reset axes")},attr:"zoom",val:"reset",icon:y.home,click:r},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(c){return i(c,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:r},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(c){return i(c,"Compare data on hover")},attr:"hovermode",val:function(c){return c._fullLayout._isHoriz?"y":"x"},icon:y.tooltip_compare,gravity:"ne",click:r};function r(c,S){var T=S.currentTarget,x=T.getAttribute("data-attr"),w=T.getAttribute("data-val")||!0,v=c._fullLayout,C={},M=h.list(c,null,!0),E=v._cartesianSpikesEnabled,L,z;if(x==="zoom"){var O=w==="in"?.5:2,R=(1+O)/2,D=(1-O)/2,H;for(z=0;z<M.length;z++)if(L=M[z],!L.fixedrange)if(H=L._name,w==="auto")C[H+".autorange"]=!0;else if(w==="reset"){if(L._rangeInitial===void 0)C[H+".autorange"]=!0;else{var B=L._rangeInitial.slice();C[H+".range[0]"]=B[0],C[H+".range[1]"]=B[1]}L._showSpikeInitial!==void 0&&(C[H+".showspikes"]=L._showSpikeInitial,E==="on"&&!L._showSpikeInitial&&(E="off"))}else{var $=[L.r2l(L.range[0]),L.r2l(L.range[1])],W=[R*$[0]+D*$[1],R*$[1]+D*$[0]];C[H+".range[0]"]=L.l2r(W[0]),C[H+".range[1]"]=L.l2r(W[1])}}else x==="hovermode"&&(w==="x"||w==="y")&&(w=v._isHoriz?"y":"x",T.setAttribute("data-val",w)),C[x]=w;v._cartesianSpikesEnabled=E,s.call("_guiRelayout",c,C)}n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(c){return i(c,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:y.zoombox,click:f},n.pan3d={name:"pan3d",_cat:"pan",title:function(c){return i(c,"Pan")},attr:"scene.dragmode",val:"pan",icon:y.pan,click:f},n.orbitRotation={name:"orbitRotation",title:function(c){return i(c,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:y["3d_rotate"],click:f},n.tableRotation={name:"tableRotation",title:function(c){return i(c,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:y["z-axis"],click:f};function f(c,S){for(var T=S.currentTarget,x=T.getAttribute("data-attr"),w=T.getAttribute("data-val")||!0,v=c._fullLayout._subplots.gl3d||[],C={},M=x.split("."),E=0;E<v.length;E++)C[v[E]+"."+M[1]]=w;var L=w==="pan"?w:"zoom";C.dragmode=L,s.call("_guiRelayout",c,C)}n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(c){return i(c,"Reset camera to default")},attr:"resetDefault",icon:y.home,click:u},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(c){return i(c,"Reset camera to last save")},attr:"resetLastSave",icon:y.movie,click:u};function u(c,S){for(var T=S.currentTarget,x=T.getAttribute("data-attr"),w=x==="resetLastSave",v=x==="resetDefault",C=c._fullLayout,M=C._subplots.gl3d||[],E={},L=0;L<M.length;L++){var z=M[L],O=z+".camera",R=z+".aspectratio",D=z+".aspectmode",H=C[z]._scene,B;w?(E[O+".up"]=H.viewInitial.up,E[O+".eye"]=H.viewInitial.eye,E[O+".center"]=H.viewInitial.center,B=!0):v&&(E[O+".up"]=null,E[O+".eye"]=null,E[O+".center"]=null,B=!0),B&&(E[R+".x"]=H.viewInitial.aspectratio.x,E[R+".y"]=H.viewInitial.aspectratio.y,E[R+".z"]=H.viewInitial.aspectratio.z,E[D]=H.viewInitial.aspectmode)}s.call("_guiRelayout",c,E)}n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:m};function l(c,S){var T=S.currentTarget,x=T._previousVal,w=c._fullLayout,v=w._subplots.gl3d||[],C=["xaxis","yaxis","zaxis"],M={},E={};if(x)E=x,T._previousVal=null;else{for(var L=0;L<v.length;L++){var z=v[L],O=w[z],R=z+".hovermode";M[R]=O.hovermode,E[R]=!1;for(var D=0;D<3;D++){var H=C[D],B=z+"."+H+".showspikes";E[B]=!1,M[B]=O[H].showspikes}}T._previousVal=M}return E}function m(c,S){var T=l(c,S);s.call("_guiRelayout",c,T)}n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:d},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:d},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(c){return i(c,"Reset")},attr:"reset",val:null,icon:y.autoscale,click:d},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:g};function d(c,S){for(var T=S.currentTarget,x=T.getAttribute("data-attr"),w=T.getAttribute("data-val")||!0,v=c._fullLayout,C=v._subplots.geo||[],M=0;M<C.length;M++){var E=C[M],L=v[E];if(x==="zoom"){var z=L.projection.scale,O=w==="in"?2*z:.5*z;s.call("_guiRelayout",c,E+".projection.scale",O)}}x==="reset"&&A(c,"geo")}n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:g},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:g};function b(c){var S=c._fullLayout;return S.hovermode?!1:S._has("cartesian")?S._isHoriz?"y":"x":"closest"}function g(c){var S=b(c);s.call("_guiRelayout",c,"hovermode",S)}n.resetViewSankey={name:"resetSankeyGroup",title:function(c){return i(c,"Reset view")},icon:y.home,click:function(c){for(var S={"node.groups":[],"node.x":[],"node.y":[]},T=0;T<c._fullData.length;T++){var x=c._fullData[T]._viewInitial;S["node.groups"].push(x.node.groups.slice()),S["node.x"].push(x.node.x.slice()),S["node.y"].push(x.node.y.slice())}s.call("restyle",c,S)}},n.toggleHover={name:"toggleHover",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(c,S){var T=l(c,S);T.hovermode=b(c),s.call("_guiRelayout",c,T)}},n.resetViews={name:"resetViews",title:function(c){return i(c,"Reset views")},icon:y.home,click:function(c,S){var T=S.currentTarget;T.setAttribute("data-attr","zoom"),T.setAttribute("data-val","reset"),r(c,S),T.setAttribute("data-attr","resetLastSave"),u(c,S),A(c,"geo"),A(c,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(c){return i(c,"Toggle Spike Lines")},icon:y.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(c){var S=c._fullLayout,T=S._cartesianSpikesEnabled;S._cartesianSpikesEnabled=T==="on"?"off":"on",s.call("_guiRelayout",c,_(c))}};function _(c){for(var S=c._fullLayout,T=S._cartesianSpikesEnabled==="on",x=h.list(c,null,!0),w={},v=0;v<x.length;v++){var C=x[v];w[C._name+".showspikes"]=T?!0:C._showSpikeInitial}return w}n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(c){return i(c,"Reset view")},attr:"reset",icon:y.home,click:function(c){A(c,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:p},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:p};function p(c,S){for(var T=S.currentTarget,x=T.getAttribute("data-val"),w=c._fullLayout,v=w._subplots.mapbox||[],C=1.05,M={},E=0;E<v.length;E++){var L=v[E],z=w[L].zoom,O=x==="in"?C*z:z/C;M[L+".zoom"]=O}s.call("_guiRelayout",c,M)}function A(c,S){for(var T=c._fullLayout,x=T._subplots[S]||[],w={},v=0;v<x.length;v++)for(var C=x[v],M=T[C]._subplot,E=M.viewInitial,L=Object.keys(E),z=0;z<L.length;z++){var O=L[z];w[C+"."+O]=E[O]}s.call("_guiRelayout",c,w)}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(e,I,F){var s=e("./buttons"),o=Object.keys(s),h=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],y=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(h),t=[],a=function(i){if(y.indexOf(i._cat||i.name)===-1){var n=i.name,r=(i._cat||i.name).toLowerCase();t.indexOf(n)===-1&&t.push(n),t.indexOf(r)===-1&&t.push(r)}};o.forEach(function(i){a(s[i])}),t.sort(),I.exports={DRAW_MODES:h,backButtons:y,foreButtons:t}},{"./buttons":426}],428:[function(e,I,F){var s=e("../../lib"),o=e("../color"),h=e("../../plot_api/plot_template"),y=e("./attributes");I.exports=function(a,i){var n=a.modebar||{},r=h.newContainer(i,"modebar");function f(l,m){return s.coerce(n,r,y,l,m)}f("orientation"),f("bgcolor",o.addOpacity(i.paper_bgcolor,.5));var u=o.contrast(o.rgb(i.modebar.bgcolor));f("color",o.addOpacity(u,.3)),f("activecolor",o.addOpacity(u,.7)),f("uirevision",i.uirevision),f("add"),f("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(e,I,F){I.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(e,I,F){var s=e("../../plots/cartesian/axis_ids"),o=e("../../traces/scatter/subtypes"),h=e("../../registry"),y=e("../fx/helpers").isUnifiedHover,t=e("./modebar"),a=e("./buttons"),i=e("./constants").DRAW_MODES;I.exports=function(b){var g=b._fullLayout,_=b._context,p=g._modeBar;if(!_.displayModeBar&&!_.watermark){p&&(p.destroy(),delete g._modeBar);return}if(!Array.isArray(_.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(_.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var A=_.modeBarButtons,c;Array.isArray(A)&&A.length?c=m(A):!_.displayModeBar&&_.watermark?c=[]:c=n(b),p?p.update(b,c):g._modeBar=t(b,c)};function n(d){var b=d._fullLayout,g=d._fullData,_=d._context;function p(q,X){if(typeof X=="string"){if(X.toLowerCase()===q.toLowerCase())return!0}else{var J=X.name,ie=X._cat||X.name;if(J===q||ie===q.toLowerCase())return!0}return!1}var A=b.modebar.add;typeof A=="string"&&(A=[A]);var c=b.modebar.remove;typeof c=="string"&&(c=[c]);var S=_.modeBarButtonsToAdd.concat(A.filter(function(q){for(var X=0;X<_.modeBarButtonsToRemove.length;X++)if(p(q,_.modeBarButtonsToRemove[X]))return!1;return!0})),T=_.modeBarButtonsToRemove.concat(c.filter(function(q){for(var X=0;X<_.modeBarButtonsToAdd.length;X++)if(p(q,_.modeBarButtonsToAdd[X]))return!1;return!0})),x=b._has("cartesian"),w=b._has("gl3d"),v=b._has("geo"),C=b._has("pie"),M=b._has("funnelarea"),E=b._has("gl2d"),L=b._has("ternary"),z=b._has("mapbox"),O=b._has("polar"),R=b._has("smith"),D=b._has("sankey"),H=r(b),B=y(b.hovermode),$=[];function W(q){if(!!q.length){for(var X=[],J=0;J<q.length;J++){for(var ie=q[J],ne=a[ie],oe=ne.name.toLowerCase(),se=(ne._cat||ne.name).toLowerCase(),me=!1,ce=0;ce<T.length;ce++){var pe=T[ce].toLowerCase();if(pe===oe||pe===se){me=!0;break}}me||X.push(a[ie])}$.push(X)}}var re=["toImage"];_.showEditInChartStudio?re.push("editInChartStudio"):_.showSendToCloud&&re.push("sendDataToCloud"),W(re);var Q=[],Z=[],K=[],le=[];(x||E||C||M||L)+v+w+z+O+R>1?(Z=["toggleHover"],K=["resetViews"]):v?(Q=["zoomInGeo","zoomOutGeo"],Z=["hoverClosestGeo"],K=["resetGeo"]):w?(Z=["hoverClosest3d"],K=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(Q=["zoomInMapbox","zoomOutMapbox"],Z=["toggleHover"],K=["resetViewMapbox"]):E?Z=["hoverClosestGl2d"]:C?Z=["hoverClosestPie"]:D?(Z=["hoverClosestCartesian","hoverCompareCartesian"],K=["resetViewSankey"]):Z=["toggleHover"],x&&(Z=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(u(g)||B)&&(Z=[]),(x||E)&&!H&&(Q=["zoomIn2d","zoomOut2d","autoScale2d"],K[0]!=="resetViews"&&(K=["resetScale2d"])),w?le=["zoom3d","pan3d","orbitRotation","tableRotation"]:(x||E)&&!H||L?le=["zoom2d","pan2d"]:z||v?le=["pan2d"]:O&&(le=["zoom2d"]),f(g)&&le.push("select2d","lasso2d");var fe=[],ue=function(q){fe.indexOf(q)===-1&&Z.indexOf(q)!==-1&&fe.push(q)};if(Array.isArray(S)){for(var V=[],j=0;j<S.length;j++){var ee=S[j];typeof ee=="string"?(ee=ee.toLowerCase(),i.indexOf(ee)!==-1?(b._has("mapbox")||b._has("cartesian"))&&le.push(ee):ee==="togglespikelines"?ue("toggleSpikelines"):ee==="togglehover"?ue("toggleHover"):ee==="hovercompare"?ue("hoverCompareCartesian"):ee==="hoverclosest"?(ue("hoverClosestCartesian"),ue("hoverClosestGeo"),ue("hoverClosest3d"),ue("hoverClosestGl2d"),ue("hoverClosestPie")):ee==="v1hovermode"&&(ue("toggleHover"),ue("hoverClosestCartesian"),ue("hoverCompareCartesian"),ue("hoverClosestGeo"),ue("hoverClosest3d"),ue("hoverClosestGl2d"),ue("hoverClosestPie"))):V.push(ee)}S=V}return W(le),W(Q.concat(K)),W(fe),l($,S)}function r(d){for(var b=s.list({_fullLayout:d},null,!0),g=0;g<b.length;g++)if(!b[g].fixedrange)return!1;return!0}function f(d){for(var b=!1,g=0;g<d.length&&!b;g++){var _=d[g];!_._module||!_._module.selectPoints||(h.traceIs(_,"scatter-like")?(o.hasMarkers(_)||o.hasText(_))&&(b=!0):h.traceIs(_,"box-violin")?(_.boxpoints==="all"||_.points==="all")&&(b=!0):b=!0)}return b}function u(d){for(var b=0;b<d.length;b++)if(!h.traceIs(d[b],"noHover"))return!1;return!0}function l(d,b){if(b.length)if(Array.isArray(b[0]))for(var g=0;g<b.length;g++)d.push(b[g]);else d.push(b);return d}function m(d){for(var b=0;b<d.length;b++)for(var g=d[b],_=0;_<g.length;_++){var p=g[_];if(typeof p=="string")if(a[p]!==void 0)d[b][_]=a[p];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return d}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":952,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("../../lib"),y=e("../../fonts/ploticon"),t=e("../../version").version,a=new DOMParser;function i(u){this.container=u.container,this.element=document.createElement("div"),this.update(u.graphInfo,u.buttons),this.container.appendChild(this.element)}var n=i.prototype;n.update=function(u,l){this.graphInfo=u;var m=this.graphInfo._context,d=this.graphInfo._fullLayout,b="modebar-"+d._uid;this.element.setAttribute("id",b),this._uid=b,this.element.className="modebar",m.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),d.modebar.orientation==="v"&&(this.element.className+=" vertical",l=l.reverse());var g=d.modebar,_=m.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";h.deleteRelatedStyleRule(b),h.addRelatedStyleRule(b,_+"#"+b+" .modebar-group","background-color: "+g.bgcolor),h.addRelatedStyleRule(b,"#"+b+" .modebar-btn .icon path","fill: "+g.color),h.addRelatedStyleRule(b,"#"+b+" .modebar-btn:hover .icon path","fill: "+g.activecolor),h.addRelatedStyleRule(b,"#"+b+" .modebar-btn.active .icon path","fill: "+g.activecolor);var p=!this.hasButtons(l),A=this.hasLogo!==m.displaylogo,c=this.locale!==m.locale;if(this.locale=m.locale,(p||A||c)&&(this.removeAllButtons(),this.updateButtons(l),m.watermark||m.displaylogo)){var S=this.getLogo();m.watermark&&(S.className=S.className+" watermark"),d.modebar.orientation==="v"?this.element.insertBefore(S,this.element.childNodes[0]):this.element.appendChild(S),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(u){var l=this;this.buttons=u,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(m){var d=l.createGroup();m.forEach(function(b){var g=b.name;if(!g)throw new Error("must provide button 'name' in button config");if(l.buttonsNames.indexOf(g)!==-1)throw new Error("button name '"+g+"' is taken");l.buttonsNames.push(g);var _=l.createButton(b);l.buttonElements.push(_),d.appendChild(_)}),l.element.appendChild(d)})},n.createGroup=function(){var u=document.createElement("div");return u.className="modebar-group",u},n.createButton=function(u){var l=this,m=document.createElement("a");m.setAttribute("rel","tooltip"),m.className="modebar-btn";var d=u.title;d===void 0?d=u.name:typeof d=="function"&&(d=d(this.graphInfo)),(d||d===0)&&m.setAttribute("data-title",d),u.attr!==void 0&&m.setAttribute("data-attr",u.attr);var b=u.val;b!==void 0&&(typeof b=="function"&&(b=b(this.graphInfo)),m.setAttribute("data-val",b));var g=u.click;if(typeof g!="function")throw new Error("must provide button 'click' function in button config");m.addEventListener("click",function(p){u.click(l.graphInfo,p),l.updateActiveButton(p.currentTarget)}),m.setAttribute("data-toggle",u.toggle||!1),u.toggle&&s.select(m).classed("active",!0);var _=u.icon;return typeof _=="function"?m.appendChild(_()):m.appendChild(this.createIcon(_||y.question)),m.setAttribute("data-gravity",u.gravity||"n"),m},n.createIcon=function(u){var l=o(u.height)?Number(u.height):u.ascent-u.descent,m="http://www.w3.org/2000/svg",d;if(u.path){d=document.createElementNS(m,"svg"),d.setAttribute("viewBox",[0,0,u.width,l].join(" ")),d.setAttribute("class","icon");var b=document.createElementNS(m,"path");b.setAttribute("d",u.path),u.transform?b.setAttribute("transform",u.transform):u.ascent!==void 0&&b.setAttribute("transform","matrix(1 0 0 -1 0 "+u.ascent+")"),d.appendChild(b)}if(u.svg){var g=a.parseFromString(u.svg,"application/xml");d=g.childNodes[0]}return d.setAttribute("height","1em"),d.setAttribute("width","1em"),d},n.updateActiveButton=function(u){var l=this.graphInfo._fullLayout,m=u!==void 0?u.getAttribute("data-attr"):null;this.buttonElements.forEach(function(d){var b=d.getAttribute("data-val")||!0,g=d.getAttribute("data-attr"),_=d.getAttribute("data-toggle")==="true",p=s.select(d);if(_)g===m&&p.classed("active",!p.classed("active"));else{var A=g===null?g:h.nestedProperty(l,g).get();p.classed("active",A===b)}})},n.hasButtons=function(u){var l=this.buttons;if(!l||u.length!==l.length)return!1;for(var m=0;m<u.length;++m){if(u[m].length!==l[m].length)return!1;for(var d=0;d<u[m].length;d++)if(u[m][d].name!==l[m][d].name)return!1}return!0};function r(u){return u+" (v"+t+")"}n.getLogo=function(){var u=this.createGroup(),l=document.createElement("a");return l.href="https://plotly.com/",l.target="_blank",l.setAttribute("data-title",r(h._(this.graphInfo,"Produced with Plotly.js"))),l.className="modebar-btn plotlyjsicon modebar-btn--logo",l.appendChild(this.createIcon(y.newplotlylogo)),u.appendChild(l),u},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){h.removeElement(this.container.querySelector(".modebar")),h.deleteRelatedStyleRule(this._uid)};function f(u,l){var m=u._fullLayout,d=new i({graphInfo:u,container:m._modebardiv.node(),buttons:l});return m._privateplot&&s.select(d.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),d}I.exports=f},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1123,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(e,I,F){var s=e("../../plots/font_attributes"),o=e("../color/attributes"),h=e("../../plot_api/plot_template").templatedArray,y=h("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});I.exports={visible:{valType:"boolean",editType:"plot"},buttons:y,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:s({editType:"plot"}),bgcolor:{valType:"color",dflt:o.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(e,I,F){I.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(e,I,F){var s=e("../../lib"),o=e("../color"),h=e("../../plot_api/plot_template"),y=e("../../plots/array_container_defaults"),t=e("./attributes"),a=e("./constants");I.exports=function(f,u,l,m,d){var b=f.rangeselector||{},g=h.newContainer(u,"rangeselector");function _(T,x){return s.coerce(b,g,t,T,x)}var p=y(b,g,{name:"buttons",handleItemDefaults:i,calendar:d}),A=_("visible",p.length>0);if(A){var c=n(u,l,m);_("x",c[0]),_("y",c[1]),s.noneOrAll(f,u,["x","y"]),_("xanchor"),_("yanchor"),s.coerceFont(_,"font",l.font);var S=_("bgcolor");_("activecolor",o.contrast(S,a.lightAmount,a.darkAmount)),_("bordercolor"),_("borderwidth")}};function i(r,f,u,l){var m=l.calendar;function d(_,p){return s.coerce(r,f,t.buttons,_,p)}var b=d("visible");if(b){var g=d("step");g!=="all"&&(m&&m!=="gregorian"&&(g==="month"||g==="year")?f.stepmode="backward":d("stepmode"),d("count")),d("label")}}function n(r,f,u){for(var l=u.filter(function(g){return f[g].anchor===r._id}),m=0,d=0;d<l.length;d++){var b=f[l[d]].domain;b&&(m=Math.max(b[1],m))}return[r.domain[0],m+a.yPad]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../registry"),h=e("../../plots/plots"),y=e("../color"),t=e("../drawing"),a=e("../../lib"),i=a.strTranslate,n=e("../../lib/svg_text_utils"),r=e("../../plots/cartesian/axis_ids"),f=e("../../constants/alignment"),u=f.LINE_SPACING,l=f.FROM_TL,m=f.FROM_BR,d=e("./constants"),b=e("./get_update_object");I.exports=function(v){var C=v._fullLayout,M=C._infolayer.selectAll(".rangeselector").data(g(v),_);M.enter().append("g").classed("rangeselector",!0),M.exit().remove(),M.style({cursor:"pointer","pointer-events":"all"}),M.each(function(E){var L=s.select(this),z=E,O=z.rangeselector,R=L.selectAll("g.button").data(a.filterVisible(O.buttons));R.enter().append("g").classed("button",!0),R.exit().remove(),R.each(function(D){var H=s.select(this),B=b(z,D);D._isActive=p(z,D,B),H.call(A,O,D),H.call(S,O,D,v),H.on("click",function(){v._dragged||o.call("_guiRelayout",v,B)}),H.on("mouseover",function(){D._isHovered=!0,H.call(A,O,D)}),H.on("mouseout",function(){D._isHovered=!1,H.call(A,O,D)})}),x(v,R,O,z._name,L)})};function g(w){for(var v=r.list(w,"x",!0),C=[],M=0;M<v.length;M++){var E=v[M];E.rangeselector&&E.rangeselector.visible&&C.push(E)}return C}function _(w){return w._id}function p(w,v,C){if(v.step==="all")return w.autorange===!0;var M=Object.keys(C);return w.range[0]===C[M[0]]&&w.range[1]===C[M[1]]}function A(w,v,C){var M=a.ensureSingle(w,"rect","selector-rect",function(E){E.attr("shape-rendering","crispEdges")});M.attr({rx:d.rx,ry:d.ry}),M.call(y.stroke,v.bordercolor).call(y.fill,c(v,C)).style("stroke-width",v.borderwidth+"px")}function c(w,v){return v._isActive||v._isHovered?w.activecolor:w.bgcolor}function S(w,v,C,M){function E(z){n.convertToTspans(z,M)}var L=a.ensureSingle(w,"text","selector-text",function(z){z.attr("text-anchor","middle")});L.call(t.font,v.font).text(T(C,M._fullLayout._meta)).call(E)}function T(w,v){return w.label?v?a.templateString(w.label,v):w.label:w.step==="all"?"all":w.count+w.step.charAt(0)}function x(w,v,C,M,E){var L=0,z=0,O=C.borderwidth;v.each(function(){var W=s.select(this),re=W.select(".selector-text"),Q=C.font.size*u,Z=Math.max(Q*n.lineCount(re),16)+3;z=Math.max(z,Z)}),v.each(function(){var W=s.select(this),re=W.select(".selector-rect"),Q=W.select(".selector-text"),Z=Q.node()&&t.bBox(Q.node()).width,K=C.font.size*u,le=n.lineCount(Q),fe=Math.max(Z+10,d.minButtonWidth);W.attr("transform",i(O+L,O)),re.attr({x:0,y:0,width:fe,height:z}),n.positionText(Q,fe/2,z/2-(le-1)*K/2+3),L+=fe+5});var R=w._fullLayout._size,D=R.l+R.w*C.x,H=R.t+R.h*(1-C.y),B="left";a.isRightAnchor(C)&&(D-=L,B="right"),a.isCenterAnchor(C)&&(D-=L/2,B="center");var $="top";a.isBottomAnchor(C)&&(H-=z,$="bottom"),a.isMiddleAnchor(C)&&(H-=z/2,$="middle"),L=Math.ceil(L),z=Math.ceil(z),D=Math.round(D),H=Math.round(H),h.autoMargin(w,M+"-range-selector",{x:C.x,y:C.y,l:L*l[B],r:L*m[B],b:z*m[$],t:z*l[$]}),E.attr("transform",i(D,H))}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(e,I,F){var s=e("d3-time"),o=e("../../lib").titleCase;I.exports=function(t,a){var i=t._name,n={};if(a.step==="all")n[i+".autorange"]=!0;else{var r=h(t,a);n[i+".range[0]"]=r[0],n[i+".range[1]"]=r[1]}return n};function h(y,t){var a=y.range,i=new Date(y.r2l(a[1])),n=t.step,r=s["utc"+o(n)],f=t.count,u;switch(t.stepmode){case"backward":u=y.l2r(+r.offset(i,-f));break;case"todate":var l=r.offset(i,-f);u=y.l2r(+r.ceil(l));break}var m=a[1];return[u,m]}},{"../../lib":503,"d3-time":122}],437:[function(e,I,F){I.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(e,I,F){var s=e("../color/attributes");I.exports={bgcolor:{valType:"color",dflt:s.background,editType:"plot"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(e,I,F){var s=e("../../plots/cartesian/axis_ids").list,o=e("../../plots/cartesian/autorange").getAutoRange,h=e("./constants");I.exports=function(t){for(var a=s(t,"x",!0),i=0;i<a.length;i++){var n=a[i],r=n[h.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=o(t,n))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(e,I,F){I.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(e,I,F){var s=e("../../lib"),o=e("../../plot_api/plot_template"),h=e("../../plots/cartesian/axis_ids"),y=e("./attributes"),t=e("./oppaxis_attributes");I.exports=function(i,n,r){var f=i[r],u=n[r];if(!(f.rangeslider||n._requestRangeslider[u._id]))return;s.isPlainObject(f.rangeslider)||(f.rangeslider={});var l=f.rangeslider,m=o.newContainer(u,"rangeslider");function d(M,E){return s.coerce(l,m,y,M,E)}var b,g;function _(M,E){return s.coerce(b,g,t,M,E)}var p=d("visible");if(!!p){d("bgcolor",n.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!u.isValidRange(l.range)),d("range");var A=n._subplots;if(A)for(var c=A.cartesian.filter(function(M){return M.substr(0,M.indexOf("y"))===h.name2id(r)}).map(function(M){return M.substr(M.indexOf("y"),M.length)}),S=s.simpleMap(c,h.id2name),T=0;T<S.length;T++){var x=S[T];b=l[x]||{},g=o.newContainer(m,x,"yaxis");var w=n[x],v;b.range&&w.isValidRange(b.range)&&(v="fixed");var C=_("rangemode",v);C!=="match"&&_("range",w.range.slice())}m._input=l}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../registry"),h=e("../../plots/plots"),y=e("../../lib"),t=y.strTranslate,a=e("../drawing"),i=e("../color"),n=e("../titles"),r=e("../../plots/cartesian"),f=e("../../plots/cartesian/axis_ids"),u=e("../dragelement"),l=e("../../lib/setcursor"),m=e("./constants");I.exports=function(w){for(var v=w._fullLayout,C=v._rangeSliderData,M=0;M<C.length;M++){var E=C[M][m.name];E._clipId=E._id+"-"+v._uid}function L(O){return O._name}var z=v._infolayer.selectAll("g."+m.containerClassName).data(C,L);z.exit().each(function(O){var R=O[m.name];v._topdefs.select("#"+R._clipId).remove()}).remove(),C.length!==0&&(z.enter().append("g").classed(m.containerClassName,!0).attr("pointer-events","all"),z.each(function(O){var R=s.select(this),D=O[m.name],H=v[f.id2name(O.anchor)],B=D[f.id2name(O.anchor)];if(D.range){var $=y.simpleMap(D.range,O.r2l),W=y.simpleMap(O.range,O.r2l),re;W[0]<W[1]?re=[Math.min($[0],W[0]),Math.max($[1],W[1])]:re=[Math.max($[0],W[0]),Math.min($[1],W[1])],D.range=D._input.range=y.simpleMap(re,O.l2r)}O.cleanRange("rangeslider.range");var Q=v._size,Z=O.domain;D._width=Q.w*(Z[1]-Z[0]);var K=Math.round(Q.l+Q.w*Z[0]),le=Math.round(Q.t+Q.h*(1-O._counterDomainMin)+(O.side==="bottom"?O._depth:0)+D._offsetShift+m.extraPad);R.attr("transform",t(K,le)),D._rl=y.simpleMap(D.range,O.r2l);var fe=D._rl[0],ue=D._rl[1],V=ue-fe;if(D.p2d=function(me){return me/D._width*V+fe},D.d2p=function(me){return(me-fe)/V*D._width},O.rangebreaks){var j=O.locateBreaks(fe,ue);if(j.length){var ee,q,X=0;for(ee=0;ee<j.length;ee++)q=j[ee],X+=q.max-q.min;var J=D._width/(ue-fe-X),ie=[-J*fe];for(ee=0;ee<j.length;ee++)q=j[ee],ie.push(ie[ie.length-1]-J*(q.max-q.min));for(D.d2p=function(me){for(var ce=ie[0],pe=0;pe<j.length;pe++){var xe=j[pe];if(me>=xe.max)ce=ie[pe+1];else if(me<xe.min)break}return ce+J*me},ee=0;ee<j.length;ee++)q=j[ee],q.pmin=D.d2p(q.min),q.pmax=D.d2p(q.max);D.p2d=function(me){for(var ce=ie[0],pe=0;pe<j.length;pe++){var xe=j[pe];if(me>=xe.pmax)ce=ie[pe+1];else if(me<xe.pmin)break}return(me-ce)/J}}}if(B.rangemode!=="match"){var ne=H.r2l(B.range[0]),oe=H.r2l(B.range[1]),se=oe-ne;D.d2pOppAxis=function(me){return(me-ne)/se*D._height}}R.call(_,w,O,D).call(p,w,O,D).call(A,w,O,D).call(S,w,O,D,B).call(T,w,O,D).call(x,w,O,D),d(R,w,O,D),g(R,w,O,D,H,B),O.side==="bottom"&&n.draw(w,O._id+"title",{propContainer:O,propName:O._name+".title",placeholder:v._dfltTitle.x,attributes:{x:O._offset+O._length/2,y:le+D._height+D._offsetShift+10+1.5*O.title.font.size,"text-anchor":"middle"}})}))};function d(w,v,C,M){if(v._context.staticPlot)return;var E=w.select("rect."+m.slideBoxClassName).node(),L=w.select("rect."+m.grabAreaMinClassName).node(),z=w.select("rect."+m.grabAreaMaxClassName).node();function O(){var R=s.event,D=R.target,H=R.clientX||R.touches[0].clientX,B=H-w.node().getBoundingClientRect().left,$=M.d2p(C._rl[0]),W=M.d2p(C._rl[1]),re=u.coverSlip();this.addEventListener("touchmove",Q),this.addEventListener("touchend",Z),re.addEventListener("mousemove",Q),re.addEventListener("mouseup",Z);function Q(K){var le=K.clientX||K.touches[0].clientX,fe=+le-H,ue,V,j;switch(D){case E:j="ew-resize",ue=$+fe,V=W+fe;break;case L:j="col-resize",ue=$+fe,V=W;break;case z:j="col-resize",ue=$,V=W+fe;break;default:j="ew-resize",ue=B,V=B+fe;break}if(V<ue){var ee=V;V=ue,ue=ee}M._pixelMin=ue,M._pixelMax=V,l(s.select(re),j),b(w,v,C,M)}function Z(){re.removeEventListener("mousemove",Q),re.removeEventListener("mouseup",Z),this.removeEventListener("touchmove",Q),this.removeEventListener("touchend",Z),y.removeElement(re)}}w.on("mousedown",O),w.on("touchstart",O)}function b(w,v,C,M){function E(O){return C.l2r(y.constrain(O,M._rl[0],M._rl[1]))}var L=E(M.p2d(M._pixelMin)),z=E(M.p2d(M._pixelMax));window.requestAnimationFrame(function(){o.call("_guiRelayout",v,C._name+".range",[L,z])})}function g(w,v,C,M,E,L){var z=m.handleWidth/2;function O(K){return y.constrain(K,0,M._width)}function R(K){return y.constrain(K,0,M._height)}function D(K){return y.constrain(K,-z,M._width+z)}var H=O(M.d2p(C._rl[0])),B=O(M.d2p(C._rl[1]));if(w.select("rect."+m.slideBoxClassName).attr("x",H).attr("width",B-H),w.select("rect."+m.maskMinClassName).attr("width",H),w.select("rect."+m.maskMaxClassName).attr("x",B).attr("width",M._width-B),L.rangemode!=="match"){var $=M._height-R(M.d2pOppAxis(E._rl[1])),W=M._height-R(M.d2pOppAxis(E._rl[0]));w.select("rect."+m.maskMinOppAxisClassName).attr("x",H).attr("height",$).attr("width",B-H),w.select("rect."+m.maskMaxOppAxisClassName).attr("x",H).attr("y",W).attr("height",M._height-W).attr("width",B-H),w.select("rect."+m.slideBoxClassName).attr("y",$).attr("height",W-$)}var re=.5,Q=Math.round(D(H-z))-re,Z=Math.round(D(B-z))+re;w.select("g."+m.grabberMinClassName).attr("transform",t(Q,re)),w.select("g."+m.grabberMaxClassName).attr("transform",t(Z,re))}function _(w,v,C,M){var E=y.ensureSingle(w,"rect",m.bgClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),L=M.borderwidth%2===0?M.borderwidth:M.borderwidth-1,z=-M._offsetShift,O=a.crispRound(v,M.borderwidth);E.attr({width:M._width+L,height:M._height+L,transform:t(z,z),fill:M.bgcolor,stroke:M.bordercolor,"stroke-width":O})}function p(w,v,C,M){var E=v._fullLayout,L=y.ensureSingleById(E._topdefs,"clipPath",M._clipId,function(z){z.append("rect").attr({x:0,y:0})});L.select("rect").attr({width:M._width,height:M._height})}function A(w,v,C,M){var E=v.calcdata,L=w.selectAll("g."+m.rangePlotClassName).data(C._subplotsWith,y.identity);L.enter().append("g").attr("class",function(O){return m.rangePlotClassName+" "+O}).call(a.setClipUrl,M._clipId,v),L.order(),L.exit().remove();var z;L.each(function(O,R){var D=s.select(this),H=R===0,B=f.getFromId(v,O,"y"),$=B._name,W=M[$],re={data:[],layout:{xaxis:{type:C.type,domain:[0,1],range:M.range.slice(),calendar:C.calendar},width:M._width,height:M._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};C.rangebreaks&&(re.layout.xaxis.rangebreaks=C.rangebreaks),re.layout[$]={type:B.type,domain:[0,1],range:W.rangemode!=="match"?W.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(re.layout[$].rangebreaks=B.rangebreaks),h.supplyDefaults(re);var Q=re._fullLayout.xaxis,Z=re._fullLayout[$];Q.clearCalc(),Q.setScale(),Z.clearCalc(),Z.setScale();var K={id:O,plotgroup:D,xaxis:Q,yaxis:Z,isRangePlot:!0};H?z=K:(K.mainplot="xy",K.mainplotinfo=z),r.rangePlot(v,K,c(E,O))})}function c(w,v){for(var C=[],M=0;M<w.length;M++){var E=w[M],L=E[0].trace;L.xaxis+L.yaxis===v&&C.push(E)}return C}function S(w,v,C,M,E){var L=y.ensureSingle(w,"rect",m.maskMinClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})});L.attr("height",M._height).call(i.fill,m.maskColor);var z=y.ensureSingle(w,"rect",m.maskMaxClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});if(z.attr("height",M._height).call(i.fill,m.maskColor),E.rangemode!=="match"){var O=y.ensureSingle(w,"rect",m.maskMinOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});O.attr("width",M._width).call(i.fill,m.maskOppAxisColor);var R=y.ensureSingle(w,"rect",m.maskMaxOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});R.attr("width",M._width).style("border-top",m.maskOppBorder).call(i.fill,m.maskOppAxisColor)}}function T(w,v,C,M){if(!v._context.staticPlot){var E=y.ensureSingle(w,"rect",m.slideBoxClassName,function(L){L.attr({y:0,cursor:m.slideBoxCursor,"shape-rendering":"crispEdges"})});E.attr({height:M._height,fill:m.slideBoxFill})}}function x(w,v,C,M){var E=y.ensureSingle(w,"g",m.grabberMinClassName),L=y.ensureSingle(w,"g",m.grabberMaxClassName),z={x:0,width:m.handleWidth,rx:m.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":m.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(M._height/4),height:Math.round(M._height/2)},R=y.ensureSingle(E,"rect",m.handleMinClassName,function(W){W.attr(z)});R.attr(O);var D=y.ensureSingle(L,"rect",m.handleMaxClassName,function(W){W.attr(z)});D.attr(O);var H={width:m.grabAreaWidth,x:0,y:0,fill:m.grabAreaFill,cursor:v._context.staticPlot?void 0:m.grabAreaCursor},B=y.ensureSingle(E,"rect",m.grabAreaMinClassName,function(W){W.attr(H)});B.attr("height",M._height);var $=y.ensureSingle(L,"rect",m.grabAreaMaxClassName,function(W){W.attr(H)});$.attr("height",M._height)}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(e,I,F){var s=e("../../plots/cartesian/axis_ids"),o=e("../../lib/svg_text_utils"),h=e("./constants"),y=e("../../constants/alignment").LINE_SPACING,t=h.name;function a(i){var n=i&&i[t];return n&&n.visible}F.isVisible=a,F.makeData=function(i){var n=s.list({_fullLayout:i},"x",!0),r=i.margin,f=[];if(!i._has("gl2d"))for(var u=0;u<n.length;u++){var l=n[u];if(a(l)){f.push(l);var m=l[t];m._id=t+l._id,m._height=(i.height-r.b-r.t)*m.thickness,m._offsetShift=Math.floor(m.borderwidth/2)}}i._rangeSliderData=f},F.autoMarginOpts=function(i,n){var r=i._fullLayout,f=n[t],u=n._id.charAt(0),l=0,m=0;if(n.side==="bottom"&&(l=n._depth,n.title.text!==r._dfltTitle[u])){m=1.5*n.title.font.size+10+f._offsetShift;var d=(n.title.text.match(o.BR_TAG_ALL)||[]).length;m+=d*n.title.font.size*y}return{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:f._height+l+Math.max(r.margin.b,m),pad:h.extraPad+f._offsetShift*2}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("./oppaxis_attributes"),y=e("./helpers");I.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:s.extendFlat({},o,{yaxis:h})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:y.isVisible,makeData:y.makeData,autoMarginOpts:y.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(e,I,F){I.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(e,I,F){var s=e("../annotations/attributes"),o=e("../../traces/scatter/attributes").line,h=e("../drawing/attributes").dash,y=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),I.exports=t("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:y({},s.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:y({},s.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:y({},o.color,{editType:"arraydraw"}),width:y({},o.width,{editType:"calc+arraydraw"}),dash:y({},h,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("./constants"),y=e("./helpers");I.exports=function(f){var u=f._fullLayout,l=s.filterVisible(u.shapes);if(!(!l.length||!f._fullData.length))for(var m=0;m<l.length;m++){var d=l[m];d._extremes={};var b,g,_=o.getRefType(d.xref),p=o.getRefType(d.yref);if(d.xref!=="paper"&&_!=="domain"){var A=d.xsizemode==="pixel"?d.xanchor:d.x0,c=d.xsizemode==="pixel"?d.xanchor:d.x1;b=o.getFromId(f,d.xref),g=n(b,A,c,d.path,h.paramIsX),g&&(d._extremes[b._id]=o.findExtremes(b,g,t(d)))}if(d.yref!=="paper"&&p!=="domain"){var S=d.ysizemode==="pixel"?d.yanchor:d.y0,T=d.ysizemode==="pixel"?d.yanchor:d.y1;b=o.getFromId(f,d.yref),g=n(b,S,T,d.path,h.paramIsY),g&&(d._extremes[b._id]=o.findExtremes(b,g,a(d)))}}};function t(r){return i(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function a(r){return i(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function i(r,f,u,l,m,d){var b=r/2,g=d;if(f==="pixel"){var _=m?y.extractPathCoords(m,d?h.paramIsY:h.paramIsX):[u,l],p=s.aggNums(Math.max,null,_),A=s.aggNums(Math.min,null,_),c=A<0?Math.abs(A)+b:b,S=p>0?p+b:b;return{ppad:b,ppadplus:g?c:S,ppadminus:g?S:c}}else return{ppad:b}}function n(r,f,u,l,m){var d=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(f!==void 0)return[d(f),d(u)];if(!!l){var b=1/0,g=-1/0,_=l.match(h.segmentRE),p,A,c,S,T;for(r.type==="date"&&(d=y.decodeDate(d)),p=0;p<_.length;p++)A=_[p],c=m[A.charAt(0)].drawn,c!==void 0&&(S=_[p].substr(1).match(h.paramRE),!(!S||S.length<c)&&(T=d(S[c]),T<b&&(b=T),T>g&&(g=T)));if(g>=b)return[b,g]}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(e,I,F){I.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("../../plots/array_container_defaults"),y=e("./attributes"),t=e("./helpers");I.exports=function(n,r){h(n,r,{name:"shapes",handleItemDefaults:a})};function a(i,n,r){function f($,W){return s.coerce(i,n,y,$,W)}var u=f("visible");if(!!u){var l=f("path"),m=l?"path":"rect",d=f("type",m);n.type!=="path"&&delete n.path,f("editable"),f("layer"),f("opacity"),f("fillcolor"),f("fillrule");var b=f("line.width");b&&(f("line.color"),f("line.dash"));for(var g=f("xsizemode"),_=f("ysizemode"),p=["x","y"],A=0;A<2;A++){var c=p[A],S=c+"anchor",T=c==="x"?g:_,x={_fullLayout:r},w,v,C,M=o.coerceRef(i,n,x,c,void 0,"paper"),E=o.getRefType(M);if(E==="range"?(w=o.getFromId(x,M),w._shapeIndices.push(n._index),C=t.rangeToShapePosition(w),v=t.shapePositionToRange(w)):v=C=s.identity,d!=="path"){var L=.25,z=.75,O=c+"0",R=c+"1",D=i[O],H=i[R];i[O]=v(i[O],!0),i[R]=v(i[R],!0),T==="pixel"?(f(O,0),f(R,10)):(o.coercePosition(n,x,f,M,O,L),o.coercePosition(n,x,f,M,R,z)),n[O]=C(n[O]),n[R]=C(n[R]),i[O]=D,i[R]=H}if(T==="pixel"){var B=i[S];i[S]=v(i[S],!0),o.coercePosition(n,x,f,M,S,.25),n[S]=C(n[S]),i[S]=B}}d==="path"?f("path"):s.noneOrAll(i,n,["x0","x1","y0","y1"])}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("../../plots/cartesian/axes"),y=e("./draw_newshape/helpers").readPaths,t=e("./draw_newshape/display_outlines"),a=e("../../plots/cartesian/handle_outline").clearOutlineControllers,i=e("../color"),n=e("../drawing"),r=e("../../plot_api/plot_template").arrayEditor,f=e("../dragelement"),u=e("../../lib/setcursor"),l=e("./constants"),m=e("./helpers");I.exports={draw:d,drawOne:_,eraseActiveShape:v};function d(C){var M=C._fullLayout;M._shapeUpperLayer.selectAll("path").remove(),M._shapeLowerLayer.selectAll("path").remove();for(var E in M._plots){var L=M._plots[E].shapelayer;L&&L.selectAll("path").remove()}for(var z=0;z<M.shapes.length;z++)M.shapes[z].visible&&_(C,z)}function b(C){return!!C._fullLayout._drawing}function g(C){return!C._context.edits.shapePosition}function _(C,M){C._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+M+'"]').remove();var E=m.makeOptionsAndPlotinfo(C,M),L=E.options,z=E.plotinfo;if(!L._input||L.visible===!1)return;if(L.layer!=="below")R(C._fullLayout._shapeUpperLayer);else if(L.xref==="paper"||L.yref==="paper")R(C._fullLayout._shapeLowerLayer);else if(z._hadPlotinfo){var O=z.mainplotinfo||z;R(O.shapelayer)}else R(C._fullLayout._shapeLowerLayer);function R(D){var H=c(C,L),B={"data-index":M,"fill-rule":L.fillrule,d:H},$=L.opacity,W=L.fillcolor,re=L.line.width?L.line.color:"rgba(0,0,0,0)",Q=L.line.width,Z=L.line.dash;!Q&&L.editable===!0&&(Q=5,Z="solid");var K=H[H.length-1]!=="Z",le=g(C)&&L.editable&&C._fullLayout._activeShapeIndex===M;le&&(W=K?"rgba(0,0,0,0)":C._fullLayout.activeshape.fillcolor,$=C._fullLayout.activeshape.opacity);var fe=D.append("path").attr(B).style("opacity",$).call(i.stroke,re).call(i.fill,W).call(n.dashLine,Z,Q);p(fe,C,L);var ue;if((le||C._context.edits.shapePosition)&&(ue=r(C.layout,"shapes",L)),le){fe.style({cursor:"move"});var V={element:fe.node(),plotinfo:z,gd:C,editHelpers:ue,isActiveShape:!0},j=y(H,C);t(j,fe,V)}else C._context.edits.shapePosition?A(C,fe,L,M,D,ue):L.editable===!0&&fe.style("pointer-events",K||i.opacity(W)*$<=.5?"stroke":"all");fe.node().addEventListener("click",function(){return x(C,fe)})}}function p(C,M,E){var L=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(C,L?"clip"+M._fullLayout._uid+L:null,M)}function A(C,M,E,L,z,O){var R=10,D=10,H=E.xsizemode==="pixel",B=E.ysizemode==="pixel",$=E.type==="line",W=E.type==="path",re=O.modifyItem,Q,Z,K,le,fe,ue,V,j,ee,q,X,J,ie,ne,oe,se=h.getFromId(C,E.xref),me=h.getRefType(E.xref),ce=h.getFromId(C,E.yref),pe=h.getRefType(E.yref),xe=m.getDataToPixel(C,se,!1,me),Se=m.getDataToPixel(C,ce,!0,pe),Ae=m.getPixelToData(C,se,!1,me),Ce=m.getPixelToData(C,ce,!0,pe),Ee=Re(),Oe={element:Ee.node(),gd:C,prepFn:ze,doneFn:De,clickFn:je},_e;f.init(Oe),Ee.node().onmousemove=Je;function Re(){return $?Ve():M}function Ve(){var Vt=10,kt=Math.max(E.line.width,Vt),St=z.append("g").attr("data-index",L);St.append("path").attr("d",M.attr("d")).style({cursor:"move","stroke-width":kt,"stroke-opacity":"0"});var ot={"fill-opacity":"0"},ht=Math.max(kt/2,Vt);return St.append("circle").attr({"data-line-point":"start-point",cx:H?xe(E.xanchor)+E.x0:xe(E.x0),cy:B?Se(E.yanchor)-E.y0:Se(E.y0),r:ht}).style(ot).classed("cursor-grab",!0),St.append("circle").attr({"data-line-point":"end-point",cx:H?xe(E.xanchor)+E.x1:xe(E.x1),cy:B?Se(E.yanchor)-E.y1:Se(E.y1),r:ht}).style(ot).classed("cursor-grab",!0),St}function Je(Vt){if(b(C)){_e=null;return}if($)Vt.target.tagName==="path"?_e="move":_e=Vt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var kt=Oe.element.getBoundingClientRect(),St=kt.right-kt.left,ot=kt.bottom-kt.top,ht=Vt.clientX-kt.left,Ke=Vt.clientY-kt.top,Pe=!W&&St>R&&ot>D&&!Vt.shiftKey?f.getCursor(ht/St,1-Ke/ot):"move";u(M,Pe),_e=Pe.split("-")[0]}}function ze(Vt){b(C)||(H&&(fe=xe(E.xanchor)),B&&(ue=Se(E.yanchor)),E.type==="path"?oe=E.path:(Q=H?E.x0:xe(E.x0),Z=B?E.y0:Se(E.y0),K=H?E.x1:xe(E.x1),le=B?E.y1:Se(E.y1)),Q<K?(ee=Q,ie="x0",q=K,ne="x1"):(ee=K,ie="x1",q=Q,ne="x0"),!B&&Z<le||B&&Z>le?(V=Z,X="y0",j=le,J="y1"):(V=le,X="y1",j=Z,J="y0"),Je(Vt),$t(z,E),Ot(M,E,C),Oe.moveFn=_e==="move"?dt:Et,Oe.altKey=Vt.altKey)}function De(){b(C)||(u(M),wt(z),p(M,C,E),s.call("_guiRelayout",C,O.getUpdateObj()))}function je(){b(C)||wt(z)}function dt(Vt,kt){if(E.type==="path"){var St=function(Ke){return Ke},ot=St,ht=St;H?re("xanchor",E.xanchor=Ae(fe+Vt)):(ot=function(Pe){return Ae(xe(Pe)+Vt)},se&&se.type==="date"&&(ot=m.encodeDate(ot))),B?re("yanchor",E.yanchor=Ce(ue+kt)):(ht=function(Pe){return Ce(Se(Pe)+kt)},ce&&ce.type==="date"&&(ht=m.encodeDate(ht))),re("path",E.path=T(oe,ot,ht))}else H?re("xanchor",E.xanchor=Ae(fe+Vt)):(re("x0",E.x0=Ae(Q+Vt)),re("x1",E.x1=Ae(K+Vt))),B?re("yanchor",E.yanchor=Ce(ue+kt)):(re("y0",E.y0=Ce(Z+kt)),re("y1",E.y1=Ce(le+kt)));M.attr("d",c(C,E)),$t(z,E)}function Et(Vt,kt){if(W){var St=function(cr){return cr},ot=St,ht=St;H?re("xanchor",E.xanchor=Ae(fe+Vt)):(ot=function(Kr){return Ae(xe(Kr)+Vt)},se&&se.type==="date"&&(ot=m.encodeDate(ot))),B?re("yanchor",E.yanchor=Ce(ue+kt)):(ht=function(Kr){return Ce(Se(Kr)+kt)},ce&&ce.type==="date"&&(ht=m.encodeDate(ht))),re("path",E.path=T(oe,ot,ht))}else if($){if(_e==="resize-over-start-point"){var Ke=Q+Vt,Pe=B?Z-kt:Z+kt;re("x0",E.x0=H?Ke:Ae(Ke)),re("y0",E.y0=B?Pe:Ce(Pe))}else if(_e==="resize-over-end-point"){var We=K+Vt,Qe=B?le-kt:le+kt;re("x1",E.x1=H?We:Ae(We)),re("y1",E.y1=B?Qe:Ce(Qe))}}else{var ut=function(cr){return _e.indexOf(cr)!==-1},It=ut("n"),Tt=ut("s"),Bt=ut("w"),rr=ut("e"),Ut=It?V+kt:V,Qt=Tt?j+kt:j,ar=Bt?ee+Vt:ee,nr=rr?q+Vt:q;B&&(It&&(Ut=V-kt),Tt&&(Qt=j-kt)),(!B&&Qt-Ut>D||B&&Ut-Qt>D)&&(re(X,E[X]=B?Ut:Ce(Ut)),re(J,E[J]=B?Qt:Ce(Qt))),nr-ar>R&&(re(ie,E[ie]=H?ar:Ae(ar)),re(ne,E[ne]=H?nr:Ae(nr)))}M.attr("d",c(C,E)),$t(z,E)}function $t(Vt,kt){(H||B)&&St();function St(){var ot=kt.type!=="path",ht=Vt.selectAll(".visual-cue").data([0]),Ke=1;ht.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Ke}).classed("visual-cue",!0);var Pe=xe(H?kt.xanchor:o.midRange(ot?[kt.x0,kt.x1]:m.extractPathCoords(kt.path,l.paramIsX))),We=Se(B?kt.yanchor:o.midRange(ot?[kt.y0,kt.y1]:m.extractPathCoords(kt.path,l.paramIsY)));if(Pe=m.roundPositionForSharpStrokeRendering(Pe,Ke),We=m.roundPositionForSharpStrokeRendering(We,Ke),H&&B){var Qe="M"+(Pe-1-Ke)+","+(We-1-Ke)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ht.attr("d",Qe)}else if(H){var ut="M"+(Pe-1-Ke)+","+(We-9-Ke)+"v18 h2 v-18 Z";ht.attr("d",ut)}else{var It="M"+(Pe-9-Ke)+","+(We-1-Ke)+"h18 v2 h-18 Z";ht.attr("d",It)}}}function wt(Vt){Vt.selectAll(".visual-cue").remove()}function Ot(Vt,kt,St){var ot=kt.xref,ht=kt.yref,Ke=h.getFromId(St,ot),Pe=h.getFromId(St,ht),We="";ot!=="paper"&&!Ke.autorange&&(We+=ot),ht!=="paper"&&!Pe.autorange&&(We+=ht),n.setClipUrl(Vt,We?"clip"+St._fullLayout._uid+We:null,St)}}function c(C,M){var E=M.type,L=h.getRefType(M.xref),z=h.getRefType(M.yref),O=h.getFromId(C,M.xref),R=h.getFromId(C,M.yref),D=C._fullLayout._size,H,B,$,W,re,Q,Z,K;if(O?L==="domain"?B=function(ie){return O._offset+O._length*ie}:(H=m.shapePositionToRange(O),B=function(ie){return O._offset+O.r2p(H(ie,!0))}):B=function(ie){return D.l+D.w*ie},R?z==="domain"?W=function(ie){return R._offset+R._length*(1-ie)}:($=m.shapePositionToRange(R),W=function(ie){return R._offset+R.r2p($(ie,!0))}):W=function(ie){return D.t+D.h*(1-ie)},E==="path")return O&&O.type==="date"&&(B=m.decodeDate(B)),R&&R.type==="date"&&(W=m.decodeDate(W)),S(M,B,W);if(M.xsizemode==="pixel"){var le=B(M.xanchor);re=le+M.x0,Q=le+M.x1}else re=B(M.x0),Q=B(M.x1);if(M.ysizemode==="pixel"){var fe=W(M.yanchor);Z=fe-M.y0,K=fe-M.y1}else Z=W(M.y0),K=W(M.y1);if(E==="line")return"M"+re+","+Z+"L"+Q+","+K;if(E==="rect")return"M"+re+","+Z+"H"+Q+"V"+K+"H"+re+"Z";var ue=(re+Q)/2,V=(Z+K)/2,j=Math.abs(ue-re),ee=Math.abs(V-Z),q="A"+j+","+ee,X=ue+j+","+V,J=ue+","+(V-ee);return"M"+X+q+" 0 1,1 "+J+q+" 0 0,1 "+X+"Z"}function S(C,M,E){var L=C.path,z=C.xsizemode,O=C.ysizemode,R=C.xanchor,D=C.yanchor;return L.replace(l.segmentRE,function(H){var B=0,$=H.charAt(0),W=l.paramIsX[$],re=l.paramIsY[$],Q=l.numParams[$],Z=H.substr(1).replace(l.paramRE,function(K){return W[B]?z==="pixel"?K=M(R)+Number(K):K=M(K):re[B]&&(O==="pixel"?K=E(D)-Number(K):K=E(K)),B++,B>Q&&(K="X"),K});return B>Q&&(Z=Z.replace(/[\s,]*X.*/,""),o.log("Ignoring extra params in segment "+H)),$+Z})}function T(C,M,E){return C.replace(l.segmentRE,function(L){var z=0,O=L.charAt(0),R=l.paramIsX[O],D=l.paramIsY[O],H=l.numParams[O],B=L.substr(1).replace(l.paramRE,function($){return z>=H||(R[z]?$=M($):D[z]&&($=E($)),z++),$});return O+B})}function x(C,M){if(!!g(C)){var E=M.node(),L=+E.getAttribute("data-index");if(L>=0){if(L===C._fullLayout._activeShapeIndex){w(C);return}C._fullLayout._activeShapeIndex=L,C._fullLayout._deactivateShape=w,d(C)}}}function w(C){if(!!g(C)){var M=C._fullLayout._activeShapeIndex;M>=0&&(a(C),delete C._fullLayout._activeShapeIndex,d(C))}}function v(C){if(!!g(C)){a(C);var M=C._fullLayout._activeShapeIndex,E=(C.layout||{}).shapes||[];if(M<E.length){for(var L=[],z=0;z<E.length;z++)z!==M&&L.push(E[z]);delete C._fullLayout._activeShapeIndex,s.call("_guiRelayout",C,{shapes:L})}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(e,I,F){var s=e("../../drawing/attributes").dash,o=e("../../../lib/extend").extendFlat;I.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:o({},s,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(e,I,F){var s=32;I.exports={CIRCLE_SIDES:s,i000:0,i090:s/4,i180:s/2,i270:s/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(e,I,F){var s=e("../../color");I.exports=function(h,y,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity");var a=t("newshape.line.width");if(a){var i=(h||{}).plot_bgcolor||"#FFF";t("newshape.line.color",s.contrast(i)),t("newshape.line.dash")}t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":366}],454:[function(e,I,F){var s=e("../../dragelement"),o=e("../../dragelement/helpers"),h=o.drawMode,y=e("../../../registry"),t=e("./constants"),a=t.i000,i=t.i090,n=t.i180,r=t.i270,f=e("../../../plots/cartesian/handle_outline"),u=f.clearOutlineControllers,l=e("./helpers"),m=l.pointsShapeRectangle,d=l.pointsShapeEllipse,b=l.writePaths,g=e("./newshapes");I.exports=function p(A,c,S,T){T||(T=0);var x=S.gd;function w(){p(A,c,S,T++),d(A[0])&&v({redrawing:!0})}function v(q){S.isActiveShape=!1;var X=g(c,S);Object.keys(X).length&&y.call((q||{}).redrawing?"relayout":"_guiRelayout",x,X)}var C=S.isActiveShape,M=x._fullLayout,E=M._zoomlayer,L=S.dragmode,z=h(L);z?x._fullLayout._drawing=!0:x._fullLayout._activeShapeIndex>=0&&u(x),c.attr("d",b(A));var O,R,D,H,B;if(C&&!T){B=_([],A);var $=E.append("g").attr("class","outline-controllers");le($),ee()}function W(q){D=+q.srcElement.getAttribute("data-i"),H=+q.srcElement.getAttribute("data-j"),O[D][H].moveFn=re}function re(q,X){if(!!A.length){var J=B[D][H][1],ie=B[D][H][2],ne=A[D],oe=ne.length;if(m(ne)){for(var se=0;se<oe;se++)if(se!==H){var me=ne[se];me[1]===ne[H][1]&&(me[1]=J+q),me[2]===ne[H][2]&&(me[2]=ie+X)}if(ne[H][1]=J+q,ne[H][2]=ie+X,!m(ne))for(var ce=0;ce<oe;ce++)for(var pe=0;pe<ne[ce].length;pe++)ne[ce][pe]=B[D][ce][pe]}else ne[H][1]=J+q,ne[H][2]=ie+X;w()}}function Q(){v()}function Z(){if(!!A.length&&!!A[D]&&!!A[D].length){for(var q=[],X=0;X<A[D].length;X++)X!==H&&q.push(A[D][X]);q.length>1&&!(q.length===2&&q[1][0]==="Z")&&(H===0&&(q[0][0]="M"),A[D]=q,w(),v())}}function K(q,X){if(q===2){D=+X.srcElement.getAttribute("data-i"),H=+X.srcElement.getAttribute("data-j");var J=A[D];!m(J)&&!d(J)&&Z()}}function le(q){O=[];for(var X=0;X<A.length;X++){var J=A[X],ie=m(J),ne=!ie&&d(J);O[X]=[];for(var oe=0;oe<J.length;oe++)if(J[oe][0]!=="Z"&&!(ne&&oe!==a&&oe!==i&&oe!==n&&oe!==r)){var se=J[oe][1],me=J[oe][2],ce=q.append("circle").classed("cursor-grab",!0).attr("data-i",X).attr("data-j",oe).attr("cx",se).attr("cy",me).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});O[X][oe]={element:ce.node(),gd:x,prepFn:W,doneFn:Q,clickFn:K},s.init(O[X][oe])}}}function fe(q,X){if(!!A.length)for(var J=0;J<A.length;J++)for(var ie=0;ie<A[J].length;ie++)for(var ne=0;ne+2<A[J][ie].length;ne+=2)A[J][ie][ne+1]=B[J][ie][ne+1]+q,A[J][ie][ne+2]=B[J][ie][ne+2]+X}function ue(q,X){fe(q,X),w()}function V(q){D=+q.srcElement.getAttribute("data-i"),D||(D=0),R[D].moveFn=ue}function j(){v()}function ee(){if(R=[],!!A.length){var q=0;R[q]={element:c[0][0],gd:x,prepFn:V,doneFn:j},s.init(R[q])}}};function _(p,A){for(var c=0;c<A.length;c++){var S=A[c];p[c]=[];for(var T=0;T<S.length;T++){p[c][T]=[];for(var x=0;x<S[T].length;x++)p[c][T][x]=S[T][x]}}return p}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(e,I,F){var s=e("parse-svg-path"),o=e("./constants"),h=o.CIRCLE_SIDES,y=o.SQRT2,t=e("../../../plots/cartesian/helpers"),a=t.p2r,i=t.r2p,n=[0,3,4,5,6,1,2],r=[0,3,4,1,2];F.writePaths=function(l){var m=l.length;if(!m)return"M0,0Z";for(var d="",b=0;b<m;b++)for(var g=l[b].length,_=0;_<g;_++){var p=l[b][_][0];if(p==="Z")d+="Z";else for(var A=l[b][_].length,c=0;c<A;c++){var S=c;p==="Q"||p==="S"?S=r[c]:p==="C"&&(S=n[c]),d+=l[b][_][S],c>0&&c<A-1&&(d+=",")}}return d},F.readPaths=function(l,m,d,b){var g=s(l),_=[],p=-1,A=function(){p++,_[p]=[]},c,S=0,T=0,x,w,v=function(){x=S,w=T};v();for(var C=0;C<g.length;C++){var M=[],E,L,z,O,R=g[C][0],D=R;switch(R){case"M":A(),S=+g[C][1],T=+g[C][2],M.push([D,S,T]),v();break;case"Q":case"S":E=+g[C][1],z=+g[C][2],S=+g[C][3],T=+g[C][4],M.push([D,S,T,E,z]);break;case"C":E=+g[C][1],z=+g[C][2],L=+g[C][3],O=+g[C][4],S=+g[C][5],T=+g[C][6],M.push([D,S,T,E,z,L,O]);break;case"T":case"L":S=+g[C][1],T=+g[C][2],M.push([D,S,T]);break;case"H":D="L",S=+g[C][1],M.push([D,S,T]);break;case"V":D="L",T=+g[C][1],M.push([D,S,T]);break;case"A":D="L";var H=+g[C][1],B=+g[C][2];+g[C][4]||(H=-H,B=-B);var $=S-H,W=T;for(c=1;c<=h/2;c++){var re=2*Math.PI*c/h;M.push([D,$+H*Math.cos(re),W+B*Math.sin(re)])}break;case"Z":(S!==x||T!==w)&&(S=x,T=w,M.push([D,S,T]));break}for(var Q=(d||{}).domain,Z=m._fullLayout._size,K=d&&d.xsizemode==="pixel",le=d&&d.ysizemode==="pixel",fe=b===!1,ue=0;ue<M.length;ue++){for(c=0;c+2<7;c+=2){var V=M[ue][c+1],j=M[ue][c+2];V===void 0||j===void 0||(S=V,T=j,d&&(d.xaxis&&d.xaxis.p2r?(fe&&(V-=d.xaxis._offset),K?V=i(d.xaxis,d.xanchor)+V:V=a(d.xaxis,V)):(fe&&(V-=Z.l),Q?V=Q.x[0]+V/Z.w:V=V/Z.w),d.yaxis&&d.yaxis.p2r?(fe&&(j-=d.yaxis._offset),le?j=i(d.yaxis,d.yanchor)-j:j=a(d.yaxis,j)):(fe&&(j-=Z.t),Q?j=Q.y[1]-j/Z.h:j=1-j/Z.h)),M[ue][c+1]=V,M[ue][c+2]=j)}_[p].push(M[ue].slice())}}return _};function f(l,m){return Math.abs(l-m)<=1e-6}function u(l,m){var d=m[1]-l[1],b=m[2]-l[2];return Math.sqrt(d*d+b*b)}F.pointsShapeRectangle=function(l){var m=l.length;if(m!==5)return!1;for(var d=1;d<3;d++){var b=l[0][d]-l[1][d],g=l[3][d]-l[2][d];if(!f(b,g))return!1;var _=l[0][d]-l[3][d],p=l[1][d]-l[2][d];if(!f(_,p))return!1}return!f(l[0][1],l[1][1])&&!f(l[0][1],l[3][1])?!1:!!(u(l[0],l[1])*u(l[0],l[3]))},F.pointsShapeEllipse=function(l){var m=l.length;if(m!==h+1)return!1;m=h;for(var d=0;d<m;d++){var b=(m*2-d)%m,g=(m/2+b)%m,_=(m/2+d)%m;if(!f(u(l[d],l[_]),u(l[b],l[g])))return!1}return!0},F.handleEllipse=function(l,m,d){if(!l)return[m,d];var b=F.ellipseOver({x0:m[0],y0:m[1],x1:d[0],y1:d[1]}),g=(b.x1+b.x0)/2,_=(b.y1+b.y0)/2,p=(b.x1-b.x0)/2,A=(b.y1-b.y0)/2;p||(p=A=A/y),A||(A=p=p/y);for(var c=[],S=0;S<h;S++){var T=S*2*Math.PI/h;c.push([g+p*Math.cos(T),_+A*Math.sin(T)])}return c},F.ellipseOver=function(l){var m=l.x0,d=l.y0,b=l.x1,g=l.y1,_=b-m,p=g-d;m-=_,d-=p;var A=(m+b)/2,c=(d+g)/2,S=y;return _*=S,p*=S,{x0:A-_,y0:c-p,x1:A+_,y1:c+p}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(e,I,F){var s=e("../../dragelement/helpers"),o=s.drawMode,h=s.openMode,y=e("./constants"),t=y.i000,a=y.i090,i=y.i180,n=y.i270,r=y.cos45,f=y.sin45,u=e("../../../plots/cartesian/helpers"),l=u.p2r,m=u.r2p,d=e("../../../plots/cartesian/handle_outline"),b=d.clearSelect,g=e("./helpers"),_=g.readPaths,p=g.writePaths,A=g.ellipseOver;I.exports=function(T,x){if(!!T.length){var w=T[0][0];if(!!w){var v=w.getAttribute("d"),C=x.gd,M=C._fullLayout.newshape,E=x.plotinfo,L=E.xaxis,z=E.yaxis,O=!!E.domain||!E.xaxis,R=!!E.domain||!E.yaxis,D=x.isActiveShape,H=x.dragmode,B=(C.layout||{}).shapes||[];if(!o(H)&&D!==void 0){var $=C._fullLayout._activeShapeIndex;if($<B.length)switch(C._fullLayout.shapes[$].type){case"rect":H="drawrect";break;case"circle":H="drawcircle";break;case"line":H="drawline";break;case"path":var W=B[$].path||"";W[W.length-1]==="Z"?H="drawclosedpath":H="drawopenpath";break}}var re=h(H),Q=_(v,C,E,D),Z={editable:!0,xref:O?"paper":L._id,yref:R?"paper":z._id,layer:M.layer,opacity:M.opacity,line:{color:M.line.color,width:M.line.width,dash:M.line.dash}};re||(Z.fillcolor=M.fillcolor,Z.fillrule=M.fillrule);var K;if(Q.length===1&&(K=Q[0]),K&&H==="drawrect")Z.type="rect",Z.x0=K[0][1],Z.y0=K[0][2],Z.x1=K[2][1],Z.y1=K[2][2];else if(K&&H==="drawline")Z.type="line",Z.x0=K[0][1],Z.y0=K[0][2],Z.x1=K[1][1],Z.y1=K[1][2];else if(K&&H==="drawcircle"){Z.type="circle";var le=K[t][1],fe=K[a][1],ue=K[i][1],V=K[n][1],j=K[t][2],ee=K[a][2],q=K[i][2],X=K[n][2],J=E.xaxis&&(E.xaxis.type==="date"||E.xaxis.type==="log"),ie=E.yaxis&&(E.yaxis.type==="date"||E.yaxis.type==="log");J&&(le=m(E.xaxis,le),fe=m(E.xaxis,fe),ue=m(E.xaxis,ue),V=m(E.xaxis,V)),ie&&(j=m(E.yaxis,j),ee=m(E.yaxis,ee),q=m(E.yaxis,q),X=m(E.yaxis,X));var ne=(fe+V)/2,oe=(j+q)/2,se=(V-fe+ue-le)/2,me=(X-ee+q-j)/2,ce=A({x0:ne,y0:oe,x1:ne+se*r,y1:oe+me*f});J&&(ce.x0=l(E.xaxis,ce.x0),ce.x1=l(E.xaxis,ce.x1)),ie&&(ce.y0=l(E.yaxis,ce.y0),ce.y1=l(E.yaxis,ce.y1)),Z.x0=ce.x0,Z.y0=ce.y0,Z.x1=ce.x1,Z.y1=ce.y1}else Z.type="path",L&&z&&c(Q,L,z),Z.path=p(Q),K=null;b(C);for(var pe=x.editHelpers,xe=(pe||{}).modifyItem,Se=[],Ae=0;Ae<B.length;Ae++){var Ce=C._fullLayout.shapes[Ae];if(Se[Ae]=Ce._input,D!==void 0&&Ae===C._fullLayout._activeShapeIndex){var Ee=Z;switch(Ce.type){case"line":case"rect":case"circle":xe("x0",Ee.x0),xe("x1",Ee.x1),xe("y0",Ee.y0),xe("y1",Ee.y1);break;case"path":xe("path",Ee.path);break}}}return D===void 0?(Se.push(Z),Se):pe?pe.getUpdateObj():{}}}};function c(S,T,x){var w=T.type==="date",v=x.type==="date";if(!w&&!v)return S;for(var C=0;C<S.length;C++)for(var M=0;M<S[C].length;M++)for(var E=0;E+2<S[C][M].length;E+=2)w&&(S[C][M][E+1]=S[C][M][E+1].replace(" ","_")),v&&(S[C][M][E+2]=S[C][M][E+2].replace(" ","_"));return S}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(e,I,F){var s=e("./constants"),o=e("../../lib");F.rangeToShapePosition=function(h){return h.type==="log"?h.r2d:function(y){return y}},F.shapePositionToRange=function(h){return h.type==="log"?h.d2r:function(y){return y}},F.decodeDate=function(h){return function(y){return y.replace&&(y=y.replace("_"," ")),h(y)}},F.encodeDate=function(h){return function(y){return h(y).replace(" ","_")}},F.extractPathCoords=function(h,y){var t=[],a=h.match(s.segmentRE);return a.forEach(function(i){var n=y[i.charAt(0)].drawn;if(n!==void 0){var r=i.substr(1).match(s.paramRE);!r||r.length<n||t.push(o.cleanNumber(r[n]))}}),t},F.getDataToPixel=function(h,y,t,a){var i=h._fullLayout._size,n;if(y)if(a==="domain")n=function(f){return y._length*(t?1-f:f)+y._offset};else{var r=F.shapePositionToRange(y);n=function(f){return y._offset+y.r2p(r(f,!0))},y.type==="date"&&(n=F.decodeDate(n))}else t?n=function(f){return i.t+i.h*(1-f)}:n=function(f){return i.l+i.w*f};return n},F.getPixelToData=function(h,y,t,a){var i=h._fullLayout._size,n;if(y)if(a==="domain")n=function(f){var u=(f-y._offset)/y._length;return t?1-u:u};else{var r=F.rangeToShapePosition(y);n=function(f){return r(y.p2r(f-y._offset))}}else t?n=function(f){return 1-(f-i.t)/i.h}:n=function(f){return(f-i.l)/i.w};return n},F.roundPositionForSharpStrokeRendering=function(h,y){var t=Math.round(y%2)===1,a=Math.round(h);return t?a+.5:a},F.makeOptionsAndPlotinfo=function(h,y){var t=h._fullLayout.shapes[y]||{},a=h._fullLayout._plots[t.xref+t.yref],i=!!a;return i?a._hadPlotinfo=!0:(a={},t.xref&&t.xref!=="paper"&&(a.xaxis=h._fullLayout[t.xref+"axis"]),t.yref&&t.yref!=="paper"&&(a.yaxis=h._fullLayout[t.yref+"axis"])),a.xsizemode=t.xsizemode,a.ysizemode=t.ysizemode,a.xanchor=t.xanchor,a.yanchor=t.yanchor,{options:t,plotinfo:a}}},{"../../lib":503,"./constants":448}],458:[function(e,I,F){var s=e("./draw");I.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:s.draw,drawOne:s.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(e,I,F){var s=e("../../plots/font_attributes"),o=e("../../plots/pad_attributes"),h=e("../../lib/extend").extendDeepAll,y=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/animation_attributes"),a=e("../../plot_api/plot_template").templatedArray,i=e("./constants"),n=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});I.exports=y(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:n,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:h(o({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:t.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:s({})},font:s({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(e,I,F){I.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/array_container_defaults"),h=e("./attributes"),y=e("./constants"),t=y.name,a=h.steps;I.exports=function(f,u){o(f,u,{name:t,handleItemDefaults:i})};function i(r,f,u){function l(c,S){return s.coerce(r,f,h,c,S)}for(var m=o(r,f,{name:"steps",handleItemDefaults:n}),d=0,b=0;b<m.length;b++)m[b].visible&&d++;var g;if(d<2?g=f.visible=!1:g=l("visible"),!!g){f._stepCount=d;var _=f._visibleSteps=s.filterVisible(m),p=l("active");(m[p]||{}).visible||(f.active=_[0]._index),l("x"),l("y"),s.noneOrAll(r,f,["x","y"]),l("xanchor"),l("yanchor"),l("len"),l("lenmode"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),s.coerceFont(l,"font",u.font);var A=l("currentvalue.visible");A&&(l("currentvalue.xanchor"),l("currentvalue.prefix"),l("currentvalue.suffix"),l("currentvalue.offset"),s.coerceFont(l,"currentvalue.font",f.font)),l("transition.duration"),l("transition.easing"),l("bgcolor"),l("activebgcolor"),l("bordercolor"),l("borderwidth"),l("ticklen"),l("tickwidth"),l("tickcolor"),l("minorticklen")}}function n(r,f){function u(d,b){return s.coerce(r,f,a,d,b)}var l;if(r.method!=="skip"&&!Array.isArray(r.args)?l=f.visible=!1:l=u("visible"),l){u("method"),u("args");var m=u("label","step-"+f._index);u("value",m),u("execute")}}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../plots/plots"),h=e("../color"),y=e("../drawing"),t=e("../../lib"),a=t.strTranslate,i=e("../../lib/svg_text_utils"),n=e("../../plot_api/plot_template").arrayEditor,r=e("./constants"),f=e("../../constants/alignment"),u=f.LINE_SPACING,l=f.FROM_TL,m=f.FROM_BR;I.exports=function(H){var B=H._fullLayout,$=b(B,H),W=B._infolayer.selectAll("g."+r.containerClassName).data($.length>0?[0]:[]);W.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize");function re(le){le._commandObserver&&(le._commandObserver.remove(),delete le._commandObserver),o.autoMargin(H,d(le))}if(W.exit().each(function(){s.select(this).selectAll("g."+r.groupClassName).each(re)}).remove(),$.length!==0){var Q=W.selectAll("g."+r.groupClassName).data($,g);Q.enter().append("g").classed(r.groupClassName,!0),Q.exit().each(re).remove();for(var Z=0;Z<$.length;Z++){var K=$[Z];_(H,K)}Q.each(function(le){var fe=s.select(this);M(le),o.manageCommandObserver(H,le,le._visibleSteps,function(ue){var V=fe.data()[0];V.active!==ue.index&&(V._dragging||w(H,fe,V,ue.index,!1,!0))}),p(H,s.select(this),le)})}};function d(D){return r.autoMarginIdRoot+D._index}function b(D,H){for(var B=D[r.name],$=[],W=0;W<B.length;W++){var re=B[W];!re.visible||(re._gd=H,$.push(re))}return $}function g(D){return D._index}function _(D,H){var B=y.tester.selectAll("g."+r.labelGroupClass).data(H._visibleSteps);B.enter().append("g").classed(r.labelGroupClass,!0);var $=0,W=0;B.each(function(ee){var q=s.select(this),X=S(q,{step:ee},H),J=X.node();if(J){var ie=y.bBox(J);W=Math.max(W,ie.height),$=Math.max($,ie.width)}}),B.remove();var re=H._dims={};re.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var Q=D._fullLayout._size;re.lx=Q.l+Q.w*H.x,re.ly=Q.t+Q.h*(1-H.y),H.lenmode==="fraction"?re.outerLength=Math.round(Q.w*H.len):re.outerLength=H.len,re.inputAreaStart=0,re.inputAreaLength=Math.round(re.outerLength-H.pad.l-H.pad.r);var Z=re.inputAreaLength-2*r.stepInset,K=Z/(H._stepCount-1),le=$+r.labelPadding;if(re.labelStride=Math.max(1,Math.ceil(le/K)),re.labelHeight=W,re.currentValueMaxWidth=0,re.currentValueHeight=0,re.currentValueTotalHeight=0,re.currentValueMaxLines=1,H.currentvalue.visible){var fe=y.tester.append("g");B.each(function(ee){var q=A(fe,H,ee.label),X=q.node()&&y.bBox(q.node())||{width:0,height:0},J=i.lineCount(q);re.currentValueMaxWidth=Math.max(re.currentValueMaxWidth,Math.ceil(X.width)),re.currentValueHeight=Math.max(re.currentValueHeight,Math.ceil(X.height)),re.currentValueMaxLines=Math.max(re.currentValueMaxLines,J)}),re.currentValueTotalHeight=re.currentValueHeight+H.currentvalue.offset,fe.remove()}re.height=re.currentValueTotalHeight+r.tickOffset+H.ticklen+r.labelOffset+re.labelHeight+H.pad.t+H.pad.b;var ue="left";t.isRightAnchor(H)&&(re.lx-=re.outerLength,ue="right"),t.isCenterAnchor(H)&&(re.lx-=re.outerLength/2,ue="center");var V="top";t.isBottomAnchor(H)&&(re.ly-=re.height,V="bottom"),t.isMiddleAnchor(H)&&(re.ly-=re.height/2,V="middle"),re.outerLength=Math.ceil(re.outerLength),re.height=Math.ceil(re.height),re.lx=Math.round(re.lx),re.ly=Math.round(re.ly);var j={y:H.y,b:re.height*m[V],t:re.height*l[V]};H.lenmode==="fraction"?(j.l=0,j.xl=H.x-H.len*l[ue],j.r=0,j.xr=H.x+H.len*m[ue]):(j.x=H.x,j.l=re.outerLength*l[ue],j.r=re.outerLength*m[ue]),o.autoMargin(D,d(H),j)}function p(D,H,B){(B.steps[B.active]||{}).visible||(B.active=B._visibleSteps[0]._index),H.call(A,B).call(R,B).call(T,B).call(C,B).call(O,D,B).call(c,D,B);var $=B._dims;y.setTranslate(H,$.lx+B.pad.l,$.ly+B.pad.t),H.call(E,B,!1),H.call(A,B)}function A(D,H,B){if(!!H.currentvalue.visible){var $=H._dims,W,re;switch(H.currentvalue.xanchor){case"right":W=$.inputAreaLength-r.currentValueInset-$.currentValueMaxWidth,re="left";break;case"center":W=$.inputAreaLength*.5,re="middle";break;default:W=r.currentValueInset,re="left"}var Q=t.ensureSingle(D,"text",r.labelClass,function(V){V.attr({"text-anchor":re,"data-notex":1})}),Z=H.currentvalue.prefix?H.currentvalue.prefix:"";if(typeof B=="string")Z+=B;else{var K=H.steps[H.active].label,le=H._gd._fullLayout._meta;le&&(K=t.templateString(K,le)),Z+=K}H.currentvalue.suffix&&(Z+=H.currentvalue.suffix),Q.call(y.font,H.currentvalue.font).text(Z).call(i.convertToTspans,H._gd);var fe=i.lineCount(Q),ue=($.currentValueMaxLines+1-fe)*H.currentvalue.font.size*u;return i.positionText(Q,W,ue),Q}}function c(D,H,B){var $=t.ensureSingle(D,"rect",r.gripRectClass,function(W){W.call(v,H,D,B).style("pointer-events","all")});$.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(h.stroke,B.bordercolor).call(h.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px")}function S(D,H,B){var $=t.ensureSingle(D,"text",r.labelClass,function(Q){Q.attr({"text-anchor":"middle","data-notex":1})}),W=H.step.label,re=B._gd._fullLayout._meta;return re&&(W=t.templateString(W,re)),$.call(y.font,B.font).text(W).call(i.convertToTspans,B._gd),$}function T(D,H){var B=t.ensureSingle(D,"g",r.labelsClass),$=H._dims,W=B.selectAll("g."+r.labelGroupClass).data($.labelSteps);W.enter().append("g").classed(r.labelGroupClass,!0),W.exit().remove(),W.each(function(re){var Q=s.select(this);Q.call(S,re,H),y.setTranslate(Q,L(H,re.fraction),r.tickOffset+H.ticklen+H.font.size*u+r.labelOffset+$.currentValueTotalHeight)})}function x(D,H,B,$,W){var re=Math.round($*(B._stepCount-1)),Q=B._visibleSteps[re]._index;Q!==B.active&&w(D,H,B,Q,!0,W)}function w(D,H,B,$,W,re){var Q=B.active;B.active=$,n(D.layout,r.name,B).applyUpdate("active",$);var Z=B.steps[B.active];H.call(E,B,re),H.call(A,B),D.emit("plotly_sliderchange",{slider:B,step:B.steps[B.active],interaction:W,previousActive:Q}),Z&&Z.method&&W&&(H._nextMethod?(H._nextMethod.step=Z,H._nextMethod.doCallback=W,H._nextMethod.doTransition=re):(H._nextMethod={step:Z,doCallback:W,doTransition:re},H._nextMethodRaf=window.requestAnimationFrame(function(){var K=H._nextMethod.step;!K.method||(K.execute&&o.executeAPICommand(D,K.method,K.args),H._nextMethod=null,H._nextMethodRaf=null)})))}function v(D,H,B){var $=B.node(),W=s.select(H);function re(){return B.data()[0]}function Q(){var Z=re();H.emit("plotly_sliderstart",{slider:Z});var K=B.select("."+r.gripRectClass);s.event.stopPropagation(),s.event.preventDefault(),K.call(h.fill,Z.activebgcolor);var le=z(Z,s.mouse($)[0]);x(H,B,Z,le,!0),Z._dragging=!0;function fe(){var V=re(),j=z(V,s.mouse($)[0]);x(H,B,V,j,!1)}W.on("mousemove",fe),W.on("touchmove",fe);function ue(){var V=re();V._dragging=!1,K.call(h.fill,V.bgcolor),W.on("mouseup",null),W.on("mousemove",null),W.on("touchend",null),W.on("touchmove",null),H.emit("plotly_sliderend",{slider:V,step:V.steps[V.active]})}W.on("mouseup",ue),W.on("touchend",ue)}D.on("mousedown",Q),D.on("touchstart",Q)}function C(D,H){var B=D.selectAll("rect."+r.tickRectClass).data(H._visibleSteps),$=H._dims;B.enter().append("rect").classed(r.tickRectClass,!0),B.exit().remove(),B.attr({width:H.tickwidth+"px","shape-rendering":"crispEdges"}),B.each(function(W,re){var Q=re%$.labelStride===0,Z=s.select(this);Z.attr({height:Q?H.ticklen:H.minorticklen}).call(h.fill,H.tickcolor),y.setTranslate(Z,L(H,re/(H._stepCount-1))-.5*H.tickwidth,(Q?r.tickOffset:r.minorTickOffset)+$.currentValueTotalHeight)})}function M(D){var H=D._dims;H.labelSteps=[];for(var B=D._stepCount,$=0;$<B;$+=H.labelStride)H.labelSteps.push({fraction:$/(B-1),step:D._visibleSteps[$]})}function E(D,H,B){for(var $=D.select("rect."+r.gripRectClass),W=0,re=0;re<H._stepCount;re++)if(H._visibleSteps[re]._index===H.active){W=re;break}var Q=L(H,W/(H._stepCount-1));if(!H._invokingCommand){var Z=$;B&&H.transition.duration>0&&(Z=Z.transition().duration(H.transition.duration).ease(H.transition.easing)),Z.attr("transform",a(Q-r.gripWidth*.5,H._dims.currentValueTotalHeight))}}function L(D,H){var B=D._dims;return B.inputAreaStart+r.stepInset+(B.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,H))}function z(D,H){var B=D._dims;return Math.min(1,Math.max(0,(H-r.stepInset-B.inputAreaStart)/(B.inputAreaLength-2*r.stepInset-2*B.inputAreaStart)))}function O(D,H,B){var $=B._dims,W=t.ensureSingle(D,"rect",r.railTouchRectClass,function(re){re.call(v,H,D,B).style("pointer-events","all")});W.attr({width:$.inputAreaLength,height:Math.max($.inputAreaWidth,r.tickOffset+B.ticklen+$.labelHeight)}).call(h.fill,B.bgcolor).attr("opacity",0),y.setTranslate(W,0,$.currentValueTotalHeight)}function R(D,H){var B=H._dims,$=B.inputAreaLength-r.railInset*2,W=t.ensureSingle(D,"rect",r.railRectClass);W.attr({width:$,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(h.stroke,H.bordercolor).call(h.fill,H.bgcolor).style("stroke-width",H.borderwidth+"px"),y.setTranslate(W,r.railInset,(B.inputAreaWidth-r.railWidth)*.5+B.currentValueTotalHeight)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(e,I,F){var s=e("./constants");I.exports={moduleType:"component",name:s.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("../../plots/plots"),y=e("../../registry"),t=e("../../lib"),a=t.strTranslate,i=e("../drawing"),n=e("../color"),r=e("../../lib/svg_text_utils"),f=e("../../constants/interactions"),u=e("../../constants/alignment").OPPOSITE_SIDE,l=/ [XY][0-9]* /;function m(d,b,g){var _=g.propContainer,p=g.propName,A=g.placeholder,c=g.traceIndex,S=g.avoid||{},T=g.attributes,x=g.transform,w=g.containerGroup,v=d._fullLayout,C=1,M=!1,E=_.title,L=(E&&E.text?E.text:"").trim(),z=E&&E.font?E.font:{},O=z.family,R=z.size,D=z.color,H;p==="title.text"?H="titleText":p.indexOf("axis")!==-1?H="axisTitleText":p.indexOf("colorbar"!==-1)&&(H="colorbarTitleText");var B=d._context.edits[H];L===""?C=0:L.replace(l," % ")===A.replace(l," % ")&&(C=.2,M=!0,B||(L="")),g._meta?L=t.templateString(L,g._meta):v._meta&&(L=t.templateString(L,v._meta));var $=L||B,W;w||(w=t.ensureSingle(v._infolayer,"g","g-"+b),W=v._hColorbarMoveTitle);var re=w.selectAll("text").data($?[0]:[]);if(re.enter().append("text"),re.text(L).attr("class",b),re.exit().remove(),!$)return w;function Q(fe){t.syncOrAsync([Z,K],fe)}function Z(fe){var ue;return!x&&W&&(x={}),x?(ue="",x.rotate&&(ue+="rotate("+[x.rotate,T.x,T.y]+")"),(x.offset||W)&&(ue+=a(0,(x.offset||0)-(W||0)))):ue=null,fe.attr("transform",ue),fe.style({"font-family":O,"font-size":s.round(R,2)+"px",fill:n.rgb(D),opacity:C*n.opacity(D),"font-weight":h.fontWeight}).attr(T).call(r.convertToTspans,d),h.previousPromises(d)}function K(fe){var ue=s.select(fe.node().parentNode);if(S&&S.selection&&S.side&&L){ue.attr("transform",null);var V=u[S.side],j=S.side==="left"||S.side==="top"?-1:1,ee=o(S.pad)?S.pad:2,q=i.bBox(ue.node()),X={left:0,top:0,right:v.width,bottom:v.height},J=S.maxShift||j*(X[S.side]-q[S.side]),ie=0;if(J<0)ie=J;else{var ne=S.offsetLeft||0,oe=S.offsetTop||0;q.left-=ne,q.right-=ne,q.top-=oe,q.bottom-=oe,S.selection.each(function(){var me=i.bBox(this);t.bBoxIntersect(q,me,ee)&&(ie=Math.max(ie,j*(me[S.side]-q[V])+ee))}),ie=Math.min(J,ie)}if(ie>0||J<0){var se={left:[-ie,0],right:[ie,0],top:[0,-ie],bottom:[0,ie]}[S.side];ue.attr("transform",a(se[0],se[1]))}}}re.call(Q);function le(){C=0,M=!0,re.text(A).on("mouseover.opacity",function(){s.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){s.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}return B&&(L?re.on(".opacity",null):le(),re.call(r.makeEditable,{gd:d}).on("edit",function(fe){c!==void 0?y.call("_guiRestyle",d,p,fe,c):y.call("_guiRelayout",d,p,fe)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Q)}).on("input",function(fe){this.text(fe||" ").call(r.positionText,T.x,T.y)})),re.classed("js-placeholder",M),w}I.exports={draw:m}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(e,I,F){var s=e("../../plots/font_attributes"),o=e("../color/attributes"),h=e("../../lib/extend").extendFlat,y=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/pad_attributes"),a=e("../../plot_api/plot_template").templatedArray,i=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});I.exports=y(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:h(t({editType:"arraydraw"}),{}),font:s({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:o.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(e,I,F){I.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/array_container_defaults"),h=e("./attributes"),y=e("./constants"),t=y.name,a=h.buttons;I.exports=function(f,u){var l={name:t,handleItemDefaults:i};o(f,u,l)};function i(r,f,u){function l(b,g){return s.coerce(r,f,h,b,g)}var m=o(r,f,{name:"buttons",handleItemDefaults:n}),d=l("visible",m.length>0);!d||(l("active"),l("direction"),l("type"),l("showactive"),l("x"),l("y"),s.noneOrAll(r,f,["x","y"]),l("xanchor"),l("yanchor"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),s.coerceFont(l,"font",u.font),l("bgcolor",u.paper_bgcolor),l("bordercolor"),l("borderwidth"))}function n(r,f){function u(m,d){return s.coerce(r,f,a,m,d)}var l=u("visible",r.method==="skip"||Array.isArray(r.args));l&&(u("method"),u("args"),u("args2"),u("label"),u("execute"))}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../plots/plots"),h=e("../color"),y=e("../drawing"),t=e("../../lib"),a=e("../../lib/svg_text_utils"),i=e("../../plot_api/plot_template").arrayEditor,n=e("../../constants/alignment").LINE_SPACING,r=e("./constants"),f=e("./scrollbox");I.exports=function(z){var O=z._fullLayout,R=t.filterVisible(O[r.name]);function D(K){o.autoMargin(z,C(K))}var H=O._menulayer.selectAll("g."+r.containerClassName).data(R.length>0?[0]:[]);if(H.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),H.exit().each(function(){s.select(this).selectAll("g."+r.headerGroupClassName).each(D)}).remove(),R.length!==0){var B=H.selectAll("g."+r.headerGroupClassName).data(R,u);B.enter().append("g").classed(r.headerGroupClassName,!0);for(var $=t.ensureSingle(H,"g",r.dropdownButtonGroupClassName,function(K){K.style("pointer-events","all")}),W=0;W<R.length;W++){var re=R[W];v(z,re)}var Q="updatemenus"+O._uid,Z=new f(z,$,Q);B.enter().size()&&($.node().parentNode.appendChild($.node()),$.call(E)),B.exit().each(function(K){$.call(E),D(K)}).remove(),B.each(function(K){var le=s.select(this),fe=K.type==="dropdown"?$:null;o.manageCommandObserver(z,K,K.buttons,function(ue){d(z,K,K.buttons[ue.index],le,fe,Z,ue.index,!0)}),K.type==="dropdown"?(b(z,le,$,Z,K),m($,K)&&g(z,le,$,Z,K)):g(z,le,null,null,K)})}};function u(L){return L._index}function l(L){return+L.attr(r.menuIndexAttrName)==-1}function m(L,z){return+L.attr(r.menuIndexAttrName)===z._index}function d(L,z,O,R,D,H,B,$){z.active=B,i(L.layout,r.name,z).applyUpdate("active",B),z.type==="buttons"?g(L,R,null,null,z):z.type==="dropdown"&&(D.attr(r.menuIndexAttrName,"-1"),b(L,R,D,H,z),$||g(L,R,D,H,z))}function b(L,z,O,R,D){var H=t.ensureSingle(z,"g",r.headerClassName,function(K){K.style("pointer-events","all")}),B=D._dims,$=D.active,W=D.buttons[$]||r.blankHeaderOpts,re={y:D.pad.t,yPad:0,x:D.pad.l,xPad:0,index:0},Q={width:B.headerWidth,height:B.headerHeight};H.call(A,D,W,L).call(M,D,re,Q);var Z=t.ensureSingle(z,"text",r.headerArrowClassName,function(K){K.attr("text-anchor","end").call(y.font,D.font).text(r.arrowSymbol[D.direction])});Z.attr({x:B.headerWidth-r.arrowOffsetX+D.pad.l,y:B.headerHeight/2+r.textOffsetY+D.pad.t}),H.on("click",function(){O.call(E,String(m(O,D)?-1:D._index)),g(L,z,O,R,D)}),H.on("mouseover",function(){H.call(x)}),H.on("mouseout",function(){H.call(w,D)}),y.setTranslate(z,B.lx,B.ly)}function g(L,z,O,R,D){O||(O=z,O.attr("pointer-events","all"));var H=!l(O)||D.type==="buttons"?D.buttons:[],B=D.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,$=O.selectAll("g."+B).data(t.filterVisible(H)),W=$.enter().append("g").classed(B,!0),re=$.exit();D.type==="dropdown"?(W.attr("opacity","0").transition().attr("opacity","1"),re.transition().attr("opacity","0").remove()):re.remove();var Q=0,Z=0,K=D._dims,le=["up","down"].indexOf(D.direction)!==-1;D.type==="dropdown"&&(le?Z=K.headerHeight+r.gapButtonHeader:Q=K.headerWidth+r.gapButtonHeader),D.type==="dropdown"&&D.direction==="up"&&(Z=-r.gapButtonHeader+r.gapButton-K.openHeight),D.type==="dropdown"&&D.direction==="left"&&(Q=-r.gapButtonHeader+r.gapButton-K.openWidth);var fe={x:K.lx+Q+D.pad.l,y:K.ly+Z+D.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},ue={l:fe.x+D.borderwidth,t:fe.y+D.borderwidth};$.each(function(V,j){var ee=s.select(this);ee.call(A,D,V,L).call(M,D,fe),ee.on("click",function(){s.event.defaultPrevented||(V.execute&&(V.args2&&D.active===j?(d(L,D,V,z,O,R,-1),o.executeAPICommand(L,V.method,V.args2)):(d(L,D,V,z,O,R,j),o.executeAPICommand(L,V.method,V.args))),L.emit("plotly_buttonclicked",{menu:D,button:V,active:D.active}))}),ee.on("mouseover",function(){ee.call(x)}),ee.on("mouseout",function(){ee.call(w,D),$.call(T,D)})}),$.call(T,D),le?(ue.w=Math.max(K.openWidth,K.headerWidth),ue.h=fe.y-ue.t):(ue.w=fe.x-ue.l,ue.h=Math.max(K.openHeight,K.headerHeight)),ue.direction=D.direction,R&&($.size()?_(L,z,O,R,D,ue):p(R))}function _(L,z,O,R,D,H){var B=D.direction,$=B==="up"||B==="down",W=D._dims,re=D.active,Q,Z,K;if($)for(Z=0,K=0;K<re;K++)Z+=W.heights[K]+r.gapButton;else for(Q=0,K=0;K<re;K++)Q+=W.widths[K]+r.gapButton;R.enable(H,Q,Z),R.hbar&&R.hbar.attr("opacity","0").transition().attr("opacity","1"),R.vbar&&R.vbar.attr("opacity","0").transition().attr("opacity","1")}function p(L){var z=!!L.hbar,O=!!L.vbar;z&&L.hbar.transition().attr("opacity","0").each("end",function(){z=!1,O||L.disable()}),O&&L.vbar.transition().attr("opacity","0").each("end",function(){O=!1,z||L.disable()})}function A(L,z,O,R){L.call(c,z).call(S,z,O,R)}function c(L,z){var O=t.ensureSingle(L,"rect",r.itemRectClassName,function(R){R.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});O.call(h.stroke,z.bordercolor).call(h.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function S(L,z,O,R){var D=t.ensureSingle(L,"text",r.itemTextClassName,function($){$.attr({"text-anchor":"start","data-notex":1})}),H=O.label,B=R._fullLayout._meta;B&&(H=t.templateString(H,B)),D.call(y.font,z.font).text(H).call(a.convertToTspans,R)}function T(L,z){var O=z.active;L.each(function(R,D){var H=s.select(this);D===O&&z.showactive&&H.select("rect."+r.itemRectClassName).call(h.fill,r.activeColor)})}function x(L){L.select("rect."+r.itemRectClassName).call(h.fill,r.hoverColor)}function w(L,z){L.select("rect."+r.itemRectClassName).call(h.fill,z.bgcolor)}function v(L,z){var O=z._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},R=y.tester.selectAll("g."+r.dropdownButtonClassName).data(t.filterVisible(z.buttons));R.enter().append("g").classed(r.dropdownButtonClassName,!0);var D=["up","down"].indexOf(z.direction)!==-1;R.each(function(Q,Z){var K=s.select(this);K.call(A,z,Q,L);var le=K.select("."+r.itemTextClassName),fe=le.node()&&y.bBox(le.node()).width,ue=Math.max(fe+r.textPadX,r.minWidth),V=z.font.size*n,j=a.lineCount(le),ee=Math.max(V*j,r.minHeight)+r.textOffsetY;ee=Math.ceil(ee),ue=Math.ceil(ue),O.widths[Z]=ue,O.heights[Z]=ee,O.height1=Math.max(O.height1,ee),O.width1=Math.max(O.width1,ue),D?(O.totalWidth=Math.max(O.totalWidth,ue),O.openWidth=O.totalWidth,O.totalHeight+=ee+r.gapButton,O.openHeight+=ee+r.gapButton):(O.totalWidth+=ue+r.gapButton,O.openWidth+=ue+r.gapButton,O.totalHeight=Math.max(O.totalHeight,ee),O.openHeight=O.totalHeight)}),D?O.totalHeight-=r.gapButton:O.totalWidth-=r.gapButton,O.headerWidth=O.width1+r.arrowPadX,O.headerHeight=O.height1,z.type==="dropdown"&&(D?(O.width1+=r.arrowPadX,O.totalHeight=O.height1):O.totalWidth=O.width1,O.totalWidth+=r.arrowPadX),R.remove();var H=O.totalWidth+z.pad.l+z.pad.r,B=O.totalHeight+z.pad.t+z.pad.b,$=L._fullLayout._size;O.lx=$.l+$.w*z.x,O.ly=$.t+$.h*(1-z.y);var W="left";t.isRightAnchor(z)&&(O.lx-=H,W="right"),t.isCenterAnchor(z)&&(O.lx-=H/2,W="center");var re="top";t.isBottomAnchor(z)&&(O.ly-=B,re="bottom"),t.isMiddleAnchor(z)&&(O.ly-=B/2,re="middle"),O.totalWidth=Math.ceil(O.totalWidth),O.totalHeight=Math.ceil(O.totalHeight),O.lx=Math.round(O.lx),O.ly=Math.round(O.ly),o.autoMargin(L,C(z),{x:z.x,y:z.y,l:H*({right:1,center:.5}[W]||0),r:H*({left:1,center:.5}[W]||0),b:B*({top:1,middle:.5}[re]||0),t:B*({bottom:1,middle:.5}[re]||0)})}function C(L){return r.autoMarginIdRoot+L._index}function M(L,z,O,R){R=R||{};var D=L.select("."+r.itemRectClassName),H=L.select("."+r.itemTextClassName),B=z.borderwidth,$=O.index,W=z._dims;y.setTranslate(L,B+O.x,B+O.y);var re=["up","down"].indexOf(z.direction)!==-1,Q=R.height||(re?W.heights[$]:W.height1);D.attr({x:0,y:0,width:R.width||(re?W.width1:W.widths[$]),height:Q});var Z=z.font.size*n,K=a.lineCount(H),le=(K-1)*Z/2;a.positionText(H,r.textOffsetX,Q/2-le+r.textOffsetY),re?O.y+=W.heights[$]+O.yPad:O.x+=W.widths[$]+O.xPad,O.index++}function E(L,z){L.attr(r.menuIndexAttrName,z||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(e,I,F){arguments[4][463][0].apply(F,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(e,I,F){I.exports=t;var s=e("@plotly/d3"),o=e("../color"),h=e("../drawing"),y=e("../../lib");function t(a,i,n){this.gd=a,this.container=i,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.barWidth=2,t.barLength=20,t.barRadius=2,t.barPad=1,t.barColor="#808BA4",t.prototype.enable=function(i,n,r){var f=this.gd._fullLayout,u=f.width,l=f.height;this.position=i;var m=this.position.l,d=this.position.w,b=this.position.t,g=this.position.h,_=this.position.direction,p=_==="down",A=_==="left",c=_==="right",S=_==="up",T=d,x=g,w,v,C,M;!p&&!A&&!c&&!S&&(this.position.direction="down",p=!0);var E=p||S;E?(w=m,v=w+T,p?(C=b,M=Math.min(C+x,l),x=M-C):(M=b+x,C=Math.max(M-x,0),x=M-C)):(C=b,M=C+x,A?(v=m+T,w=Math.max(v-T,0),T=v-w):(w=m,v=Math.min(w+T,u),T=v-w)),this._box={l:w,t:C,w:T,h:x};var L=d>T,z=t.barLength+2*t.barPad,O=t.barWidth+2*t.barPad,R=m,D=b+g;D+O>l&&(D=l-O);var H=this.container.selectAll("rect.scrollbar-horizontal").data(L?[0]:[]);H.exit().on(".drag",null).remove(),H.enter().append("rect").classed("scrollbar-horizontal",!0).call(o.fill,t.barColor),L?(this.hbar=H.attr({rx:t.barRadius,ry:t.barRadius,x:R,y:D,width:z,height:O}),this._hbarXMin=R+z/2,this._hbarTranslateMax=T-z):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var B=g>x,$=t.barWidth+2*t.barPad,W=t.barLength+2*t.barPad,re=m+d,Q=b;re+$>u&&(re=u-$);var Z=this.container.selectAll("rect.scrollbar-vertical").data(B?[0]:[]);Z.exit().on(".drag",null).remove(),Z.enter().append("rect").classed("scrollbar-vertical",!0).call(o.fill,t.barColor),B?(this.vbar=Z.attr({rx:t.barRadius,ry:t.barRadius,x:re,y:Q,width:$,height:W}),this._vbarYMin=Q+W/2,this._vbarTranslateMax=x-W):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var K=this.id,le=w-.5,fe=B?v+$+.5:v+.5,ue=C-.5,V=L?M+O+.5:M+.5,j=f._topdefs.selectAll("#"+K).data(L||B?[0]:[]);if(j.exit().remove(),j.enter().append("clipPath").attr("id",K).append("rect"),L||B?(this._clipRect=j.select("rect").attr({x:Math.floor(le),y:Math.floor(ue),width:Math.ceil(fe)-Math.floor(le),height:Math.ceil(V)-Math.floor(ue)}),this.container.call(h.setClipUrl,K,this.gd),this.bg.attr({x:m,y:b,width:d,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect),L||B){var ee=s.behavior.drag().on("dragstart",function(){s.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ee);var q=s.behavior.drag().on("dragstart",function(){s.event.sourceEvent.preventDefault(),s.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));L&&this.hbar.on(".drag",null).call(q),B&&this.vbar.on(".drag",null).call(q)}this.setTranslate(n,r)},t.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},t.prototype._onBoxDrag=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i-=s.event.dx),this.vbar&&(n-=s.event.dy),this.setTranslate(i,n)},t.prototype._onBoxWheel=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i+=s.event.deltaY),this.vbar&&(n+=s.event.deltaY),this.setTranslate(i,n)},t.prototype._onBarDrag=function(){var i=this.translateX,n=this.translateY;if(this.hbar){var r=i+this._hbarXMin,f=r+this._hbarTranslateMax,u=y.constrain(s.event.x,r,f),l=(u-r)/(f-r),m=this.position.w-this._box.w;i=l*m}if(this.vbar){var d=n+this._vbarYMin,b=d+this._vbarTranslateMax,g=y.constrain(s.event.y,d,b),_=(g-d)/(b-d),p=this.position.h-this._box.h;n=_*p}this.setTranslate(i,n)},t.prototype.setTranslate=function(i,n){var r=this.position.w-this._box.w,f=this.position.h-this._box.h;if(i=y.constrain(i||0,0,r),n=y.constrain(n||0,0,f),this.translateX=i,this.translateY=n,this.container.call(h.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var u=i/r;this.hbar.call(h.setTranslate,i+u*this._hbarTranslateMax,n)}if(this.vbar){var l=n/f;this.vbar.call(h.setTranslate,i,n+l*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(e,I,F){I.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(e,I,F){I.exports={axisRefDescription:function(s,o,h){return["If set to a",s,"axis id (e.g. *"+s+"* or","*"+s+"2*), the `"+s+"` position refers to a",s,"coordinate. If set to *paper*, the `"+s+"`","position refers to the distance from the",o,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",o,"("+h+"). If set to a",s,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",o,"of the domain of that axis: e.g.,","*"+s+"2 domain* refers to the domain of the second",s," axis and a",s,"position of 0.5 refers to the","point between the",o,"and the",h,"of the domain of the","second",s,"axis."].join(" ")}}},{}],473:[function(e,I,F){I.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(e,I,F){I.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(e,I,F){I.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(e,I,F){I.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(e,I,F){I.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(e,I,F){I.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(e,I,F){I.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(e,I,F){F.xmlns="http://www.w3.org/2000/xmlns/",F.svg="http://www.w3.org/2000/svg",F.xlink="http://www.w3.org/1999/xlink",F.svgAttrs={xmlns:F.svg,"xmlns:xlink":F.xlink}},{}],481:[function(e,I,F){F.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var s=e("./registry"),o=F.register=s.register,h=e("./plot_api"),y=Object.keys(h),t=0;t<y.length;t++){var a=y[t];a.charAt(0)!=="_"&&(F[a]=h[a]),o({moduleType:"apiMethod",name:a,fn:h[a]})}o(e("./traces/scatter")),o([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),o([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(o(window.PlotlyLocales),delete window.PlotlyLocales),F.Icons=e("./fonts/ploticon");var i=e("./components/fx"),n=e("./plots/plots");F.Plots={resize:n.resize,graphJson:n.graphJson,sendDataToCloud:n.sendDataToCloud},F.Fx={hover:i.hover,unhover:i.unhover,loneHover:i.loneHover,loneUnhover:i.loneUnhover},F.Snapshot=e("./snapshot"),F.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":939,"./version":1123,"native-promise-only":245}],482:[function(e,I,F){I.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(e,I,F){F.isLeftAnchor=function(o){return o.xanchor==="left"||o.xanchor==="auto"&&o.x<=1/3},F.isCenterAnchor=function(o){return o.xanchor==="center"||o.xanchor==="auto"&&o.x>1/3&&o.x<2/3},F.isRightAnchor=function(o){return o.xanchor==="right"||o.xanchor==="auto"&&o.x>=2/3},F.isTopAnchor=function(o){return o.yanchor==="top"||o.yanchor==="auto"&&o.y>=2/3},F.isMiddleAnchor=function(o){return o.yanchor==="middle"||o.yanchor==="auto"&&o.y>1/3&&o.y<2/3},F.isBottomAnchor=function(o){return o.yanchor==="bottom"||o.yanchor==="auto"&&o.y<=1/3}},{}],484:[function(e,I,F){var s=e("./mod"),o=s.mod,h=s.modHalf,y=Math.PI,t=2*y;function a(_){return _/180*y}function i(_){return _/y*180}function n(_){return Math.abs(_[1]-_[0])>t-1e-14}function r(_,p){return h(p-_,t)}function f(_,p){return Math.abs(r(_,p))}function u(_,p){if(n(p))return!0;var A,c;p[0]<p[1]?(A=p[0],c=p[1]):(A=p[1],c=p[0]),A=o(A,t),c=o(c,t),A>c&&(c+=t);var S=o(_,t),T=S+t;return S>=A&&S<=c||T>=A&&T<=c}function l(_,p,A,c){if(!u(p,c))return!1;var S,T;return A[0]<A[1]?(S=A[0],T=A[1]):(S=A[1],T=A[0]),_>=S&&_<=T}function m(_,p,A,c,S,T,x){S=S||0,T=T||0;var w=n([A,c]),v,C,M,E,L;w?(v=0,C=y,M=t):A<c?(v=A,M=c):(v=c,M=A),_<p?(E=_,L=p):(E=p,L=_);function z(H,B){return[H*Math.cos(B)+S,T-H*Math.sin(B)]}var O=Math.abs(M-v)<=y?0:1;function R(H,B,$){return"A"+[H,H]+" "+[0,O,$]+" "+z(H,B)}var D;return w?E===null?D="M"+z(L,v)+R(L,C,0)+R(L,M,0)+"Z":D="M"+z(E,v)+R(E,C,0)+R(E,M,0)+"ZM"+z(L,v)+R(L,C,1)+R(L,M,1)+"Z":E===null?(D="M"+z(L,v)+R(L,M,0),x&&(D+="L0,0Z")):D="M"+z(E,v)+"L"+z(L,v)+R(L,M,0)+"L"+z(E,M)+R(E,v,1)+"Z",D}function d(_,p,A,c,S){return m(null,_,p,A,c,S,0)}function b(_,p,A,c,S){return m(null,_,p,A,c,S,1)}function g(_,p,A,c,S,T){return m(_,p,A,c,S,T,1)}I.exports={deg2rad:a,rad2deg:i,angleDelta:r,angleDist:f,isFullCircle:n,isAngleInsideSector:u,isPtInsideSector:l,pathArc:d,pathSector:b,pathAnnulus:g}},{"./mod":510}],485:[function(e,I,F){var s=Array.isArray,o=ArrayBuffer,h=DataView;function y(n){return o.isView(n)&&!(n instanceof h)}F.isTypedArray=y;function t(n){return s(n)||y(n)}F.isArrayOrTypedArray=t;function a(n){return!t(n[0])}F.isArray1D=a,F.ensureArray=function(n,r){return s(n)||(n=[]),n.length=r,n},F.concat=function(){var n=[],r=!0,f=0,u,l,m,d,b,g,_,p;for(m=0;m<arguments.length;m++)d=arguments[m],g=d.length,g&&(l?n.push(d):(l=d,b=g),s(d)?u=!1:(r=!1,f?u!==d.constructor&&(u=!1):u=d.constructor),f+=g);if(!f)return[];if(!n.length)return l;if(r)return l.concat.apply(l,n);if(u){for(_=new u(f),_.set(l),m=0;m<n.length;m++)d=n[m],_.set(d,b),b+=d.length;return _}for(_=new Array(f),p=0;p<l.length;p++)_[p]=l[p];for(m=0;m<n.length;m++){for(d=n[m],p=0;p<d.length;p++)_[b+p]=d[p];b+=p}return _},F.maxRowLength=function(n){return i(n,Math.max,0)},F.minRowLength=function(n){return i(n,Math.min,1/0)};function i(n,r,f){if(t(n))if(t(n[0])){for(var u=f,l=0;l<n.length;l++)u=r(u,n[l].length);return u}else return n.length;return 0}},{}],486:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../constants/numerical").BADNUM,h=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;I.exports=function(t){return typeof t=="string"&&(t=t.replace(h,"")),s(t)?Number(t):o}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(e,I,F){I.exports=function(o){var h=o._fullLayout;h._glcanvas&&h._glcanvas.size()&&h._glcanvas.each(function(y){y.regl&&y.regl.clear({color:!0,depth:!0})})}},{}],488:[function(e,I,F){I.exports=function(o){o._responsiveChartHandler&&(window.removeEventListener("resize",o._responsiveChartHandler),delete o._responsiveChartHandler)}},{}],489:[function(e,I,F){var s=e("fast-isnumeric"),o=e("tinycolor2"),h=e("../plots/attributes"),y=e("../components/colorscale/scales"),t=e("../components/color"),a=e("../constants/interactions").DESELECTDIM,i=e("./nested_property"),n=e("./regex").counter,r=e("./mod").modHalf,f=e("./array").isArrayOrTypedArray;F.valObjectMeta={data_array:{coerceFunction:function(l,m,d){f(l)?m.set(l):d!==void 0&&m.set(d)}},enumerated:{coerceFunction:function(l,m,d,b){b.coerceNumber&&(l=+l),b.values.indexOf(l)===-1?m.set(d):m.set(l)},validateFunction:function(l,m){m.coerceNumber&&(l=+l);for(var d=m.values,b=0;b<d.length;b++){var g=String(d[b]);if(g.charAt(0)==="/"&&g.charAt(g.length-1)==="/"){var _=new RegExp(g.substr(1,g.length-2));if(_.test(l))return!0}else if(l===d[b])return!0}return!1}},boolean:{coerceFunction:function(l,m,d){l===!0||l===!1?m.set(l):m.set(d)}},number:{coerceFunction:function(l,m,d,b){!s(l)||b.min!==void 0&&l<b.min||b.max!==void 0&&l>b.max?m.set(d):m.set(+l)}},integer:{coerceFunction:function(l,m,d,b){l%1||!s(l)||b.min!==void 0&&l<b.min||b.max!==void 0&&l>b.max?m.set(d):m.set(+l)}},string:{coerceFunction:function(l,m,d,b){if(typeof l!="string"){var g=typeof l=="number";b.strict===!0||!g?m.set(d):m.set(String(l))}else b.noBlank&&!l?m.set(d):m.set(l)}},color:{coerceFunction:function(l,m,d){o(l).isValid()?m.set(l):m.set(d)}},colorlist:{coerceFunction:function(l,m,d){function b(g){return o(g).isValid()}!Array.isArray(l)||!l.length?m.set(d):l.every(b)?m.set(l):m.set(d)}},colorscale:{coerceFunction:function(l,m,d){m.set(y.get(l,d))}},angle:{coerceFunction:function(l,m,d){l==="auto"?m.set("auto"):s(l)?m.set(r(+l,360)):m.set(d)}},subplotid:{coerceFunction:function(l,m,d,b){var g=b.regex||n(d);if(typeof l=="string"&&g.test(l)){m.set(l);return}m.set(d)},validateFunction:function(l,m){var d=m.dflt;return l===d?!0:typeof l!="string"?!1:!!n(d).test(l)}},flaglist:{coerceFunction:function(l,m,d,b){if(typeof l!="string"){m.set(d);return}if((b.extras||[]).indexOf(l)!==-1){m.set(l);return}for(var g=l.split("+"),_=0;_<g.length;){var p=g[_];b.flags.indexOf(p)===-1||g.indexOf(p)<_?g.splice(_,1):_++}g.length?m.set(g.join("+")):m.set(d)}},any:{coerceFunction:function(l,m,d){l===void 0?m.set(d):m.set(l)}},info_array:{coerceFunction:function(l,m,d,b){function g(z,O,R){var D,H={set:function(B){D=B}};return R===void 0&&(R=O.dflt),F.valObjectMeta[O.valType].coerceFunction(z,H,R,O),D}var _=b.dimensions===2||b.dimensions==="1-2"&&Array.isArray(l)&&Array.isArray(l[0]);if(!Array.isArray(l)){m.set(d);return}var p=b.items,A=[],c=Array.isArray(p),S=c&&_&&Array.isArray(p[0]),T=_&&c&&!S,x=c&&!T?p.length:l.length,w,v,C,M,E,L;if(d=Array.isArray(d)?d:[],_)for(w=0;w<x;w++)for(A[w]=[],C=Array.isArray(l[w])?l[w]:[],T?E=p.length:c?E=p[w].length:E=C.length,v=0;v<E;v++)T?M=p[v]:c?M=p[w][v]:M=p,L=g(C[v],M,(d[w]||[])[v]),L!==void 0&&(A[w][v]=L);else for(w=0;w<x;w++)L=g(l[w],c?p[w]:p,d[w]),L!==void 0&&(A[w]=L);m.set(A)},validateFunction:function(l,m){if(!Array.isArray(l))return!1;var d=m.items,b=Array.isArray(d),g=m.dimensions===2;if(!m.freeLength&&l.length!==d.length)return!1;for(var _=0;_<l.length;_++)if(g){if(!Array.isArray(l[_])||!m.freeLength&&l[_].length!==d[_].length)return!1;for(var p=0;p<l[_].length;p++)if(!u(l[_][p],b?d[_][p]:d))return!1}else if(!u(l[_],b?d[_]:d))return!1;return!0}}},F.coerce=function(l,m,d,b,g){var _=i(d,b).get(),p=i(l,b),A=i(m,b),c=p.get(),S=m._template;if(c===void 0&&S&&(c=i(S,b).get(),S=0),g===void 0&&(g=_.dflt),_.arrayOk&&f(c))return A.set(c),c;var T=F.valObjectMeta[_.valType].coerceFunction;T(c,A,g,_);var x=A.get();return S&&x===g&&!u(c,_)&&(c=i(S,b).get(),T(c,A,g,_),x=A.get()),x},F.coerce2=function(l,m,d,b,g){var _=i(l,b),p=F.coerce(l,m,d,b,g),A=_.get();return A!=null?p:!1},F.coerceFont=function(l,m,d){var b={};return d=d||{},b.family=l(m+".family",d.family),b.size=l(m+".size",d.size),b.color=l(m+".color",d.color),b},F.coercePattern=function(l,m,d,b){var g=l(m+".shape");if(g){l(m+".solidity"),l(m+".size");var _=l(m+".fillmode"),p=_==="overlay";if(!b){var A=l(m+".bgcolor",p?d:void 0);l(m+".fgcolor",p?t.contrast(A):d)}l(m+".fgopacity",p?.5:1)}},F.coerceHoverinfo=function(l,m,d){var b=m._module.attributes,g=b.hoverinfo?b:h,_=g.hoverinfo,p;if(d._dataLength===1){var A=_.dflt==="all"?_.flags.slice():_.dflt.split("+");A.splice(A.indexOf("name"),1),p=A.join("+")}return F.coerce(l,m,g,"hoverinfo",p)},F.coerceSelectionMarkerOpacity=function(l,m){if(!!l.marker){var d=l.marker.opacity;if(d!==void 0){var b,g;!f(d)&&!l.selected&&!l.unselected&&(b=d,g=a*d),m("selected.marker.opacity",b),m("unselected.marker.opacity",g)}}};function u(l,m){var d=F.valObjectMeta[m.valType];if(m.arrayOk&&f(l))return!0;if(d.validateFunction)return d.validateFunction(l,m);var b={},g=b,_={set:function(p){g=p}};return d.coerceFunction(l,_,b,m),g!==b}F.validate=u},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(e,I,F){var s=e("d3-time-format").timeFormat,o=e("fast-isnumeric"),h=e("./loggers"),y=e("./mod").mod,t=e("../constants/numerical"),a=t.BADNUM,i=t.ONEDAY,n=t.ONEHOUR,r=t.ONEMIN,f=t.ONESEC,u=t.EPOCHJD,l=e("../registry"),m=e("d3-time-format").utcFormat,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=new Date().getFullYear()-70;function _(D){return D&&l.componentsRegistry.calendars&&typeof D=="string"&&D!=="gregorian"}F.dateTick0=function(D,H){var B=p(D,!!H);if(H<2)return B;var $=F.dateTime2ms(B,D);return $+=i*(H-1),F.ms2DateTime($,0,D)};function p(D,H){return _(D)?H?l.getComponentMethod("calendars","CANONICAL_SUNDAY")[D]:l.getComponentMethod("calendars","CANONICAL_TICK")[D]:H?"2000-01-02":"2000-01-01"}F.dfltRange=function(D){return _(D)?l.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},F.isJSDate=function(D){return typeof D=="object"&&D!==null&&typeof D.getTime=="function"};var A,c;F.dateTime2ms=function(D,H){if(F.isJSDate(D)){var B=D.getTimezoneOffset()*r,$=(D.getUTCMinutes()-D.getMinutes())*r+(D.getUTCSeconds()-D.getSeconds())*f+(D.getUTCMilliseconds()-D.getMilliseconds());if($){var W=3*r;B=B-W/2+y($-B+W/2,W)}return D=Number(D)-B,D>=A&&D<=c?D:a}if(typeof D!="string"&&typeof D!="number")return a;D=String(D);var re=_(H),Q=D.charAt(0);re&&(Q==="G"||Q==="g")&&(D=D.substr(1),H="");var Z=re&&H.substr(0,7)==="chinese",K=D.match(Z?b:d);if(!K)return a;var le=K[1],fe=K[3]||"1",ue=Number(K[5]||1),V=Number(K[7]||0),j=Number(K[9]||0),ee=Number(K[11]||0);if(re){if(le.length===2)return a;le=Number(le);var q;try{var X=l.getComponentMethod("calendars","getCal")(H);if(Z){var J=fe.charAt(fe.length-1)==="i";fe=parseInt(fe,10),q=X.newDate(le,X.toMonthIndex(le,fe,J),ue)}else q=X.newDate(le,Number(fe),ue)}catch{return a}return q?(q.toJD()-u)*i+V*n+j*r+ee*f:a}le.length===2?le=(Number(le)+2e3-g)%100+g:le=Number(le),fe-=1;var ie=new Date(Date.UTC(2e3,fe,ue,V,j));return ie.setUTCFullYear(le),ie.getUTCMonth()!==fe||ie.getUTCDate()!==ue?a:ie.getTime()+ee*f},A=F.MIN_MS=F.dateTime2ms("-9999"),c=F.MAX_MS=F.dateTime2ms("9999-12-31 23:59:59.9999"),F.isDateTime=function(D,H){return F.dateTime2ms(D,H)!==a};function S(D,H){return String(D+Math.pow(10,H)).substr(1)}var T=90*i,x=3*n,w=5*r;F.ms2DateTime=function(D,H,B){if(typeof D!="number"||!(D>=A&&D<=c))return a;H||(H=0);var $=Math.floor(y(D+.05,1)*10),W=Math.round(D-$/10),re,Q,Z,K,le,fe;if(_(B)){var ue=Math.floor(W/i)+u,V=Math.floor(y(D,i));try{re=l.getComponentMethod("calendars","getCal")(B).fromJD(ue).formatDate("yyyy-mm-dd")}catch{re=m("G%Y-%m-%d")(new Date(W))}if(re.charAt(0)==="-")for(;re.length<11;)re="-0"+re.substr(1);else for(;re.length<10;)re="0"+re;Q=H<T?Math.floor(V/n):0,Z=H<T?Math.floor(V%n/r):0,K=H<x?Math.floor(V%r/f):0,le=H<w?V%f*10+$:0}else fe=new Date(W),re=m("%Y-%m-%d")(fe),Q=H<T?fe.getUTCHours():0,Z=H<T?fe.getUTCMinutes():0,K=H<x?fe.getUTCSeconds():0,le=H<w?fe.getUTCMilliseconds()*10+$:0;return v(re,Q,Z,K,le)},F.ms2DateTimeLocal=function(D){if(!(D>=A+i&&D<=c-i))return a;var H=Math.floor(y(D+.05,1)*10),B=new Date(Math.round(D-H/10)),$=s("%Y-%m-%d")(B),W=B.getHours(),re=B.getMinutes(),Q=B.getSeconds(),Z=B.getUTCMilliseconds()*10+H;return v($,W,re,Q,Z)};function v(D,H,B,$,W){if((H||B||$||W)&&(D+=" "+S(H,2)+":"+S(B,2),($||W)&&(D+=":"+S($,2),W))){for(var re=4;W%10===0;)re-=1,W/=10;D+="."+S(W,re)}return D}F.cleanDate=function(D,H,B){if(D===a)return H;if(F.isJSDate(D)||typeof D=="number"&&isFinite(D)){if(_(B))return h.error("JS Dates and milliseconds are incompatible with world calendars",D),H;if(D=F.ms2DateTimeLocal(+D),!D&&H!==void 0)return H}else if(!F.isDateTime(D,B))return h.error("unrecognized date",D),H;return D};var C=/%\d?f/g,M=/%h/g,E={"1":"1","2":"1","3":"2","4":"2"};function L(D,H,B,$){D=D.replace(C,function(re){var Q=Math.min(+re.charAt(1)||6,6),Z=(H/1e3%1+2).toFixed(Q).substr(2).replace(/0+$/,"")||"0";return Z});var W=new Date(Math.floor(H+.05));if(D=D.replace(M,function(){return E[B("%q")(W)]}),_($))try{D=l.getComponentMethod("calendars","worldCalFmt")(D,H,$)}catch{return"Invalid"}return B(D)(W)}var z=[59,59.9,59.99,59.999,59.9999];function O(D,H){var B=y(D+.05,i),$=S(Math.floor(B/n),2)+":"+S(y(Math.floor(B/r),60),2);if(H!=="M"){o(H)||(H=0);var W=Math.min(y(D/f,60),z[H]),re=(100+W).toFixed(H).substr(1);H>0&&(re=re.replace(/0+$/,"").replace(/[\.]$/,"")),$+=":"+re}return $}F.formatDate=function(D,H,B,$,W,re){if(W=_(W)&&W,!H)if(B==="y")H=re.year;else if(B==="m")H=re.month;else if(B==="d")H=re.dayMonth+`
`+re.year;else return O(D,B)+`
`+L(re.dayMonthYear,D,$,W);return L(H,D,$,W)};var R=3*i;F.incrementMonth=function(D,H,B){B=_(B)&&B;var $=y(D,i);if(D=Math.round(D-$),B)try{var W=Math.round(D/i)+u,re=l.getComponentMethod("calendars","getCal")(B),Q=re.fromJD(W);return H%12?re.add(Q,H,"m"):re.add(Q,H/12,"y"),(Q.toJD()-u)*i+$}catch{h.error("invalid ms "+D+" in calendar "+B)}var Z=new Date(D+R);return Z.setUTCMonth(Z.getUTCMonth()+H)+$-R},F.findExactDates=function(D,H){for(var B=0,$=0,W=0,re=0,Q,Z,K=_(H)&&l.getComponentMethod("calendars","getCal")(H),le=0;le<D.length;le++){if(Z=D[le],!o(Z)){re++;continue}if(!(Z%i))if(K)try{Q=K.fromJD(Z/i+u),Q.day()===1?Q.month()===1?B++:$++:W++}catch{}else Q=new Date(Z),Q.getUTCDate()===1?Q.getUTCMonth()===0?B++:$++:W++}$+=B,W+=$;var fe=D.length-re;return{exactYears:B/fe,exactMonths:$/fe,exactDays:W/fe}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(e,I,F){var s=e("@plotly/d3"),o=e("./loggers"),h=e("./matrix"),y=e("gl-mat4");function t(g){var _;if(typeof g=="string"){if(_=document.getElementById(g),_===null)throw new Error("No DOM element with id '"+g+"' exists on the page.");return _}else if(g==null)throw new Error("DOM element provided is null or undefined");return g}function a(g){var _=s.select(g);return _.node()instanceof HTMLElement&&_.size()&&_.classed("js-plotly-plot")}function i(g){var _=g&&g.parentNode;_&&_.removeChild(g)}function n(g,_){r("global",g,_)}function r(g,_,p){var A="plotly.js-style-"+g,c=document.getElementById(A);c||(c=document.createElement("style"),c.setAttribute("id",A),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var S=c.sheet;S.insertRule?S.insertRule(_+"{"+p+"}",0):S.addRule?S.addRule(_,p,0):o.warn("addStyleRule failed")}function f(g){var _="plotly.js-style-"+g,p=document.getElementById(_);p&&i(p)}function u(g){var _=m(g),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return _.forEach(function(A){var c=l(A);if(c){var S=h.convertCssMatrix(c);p=y.multiply(p,p,S)}}),p}function l(g){var _=window.getComputedStyle(g,null),p=_.getPropertyValue("-webkit-transform")||_.getPropertyValue("-moz-transform")||_.getPropertyValue("-ms-transform")||_.getPropertyValue("-o-transform")||_.getPropertyValue("transform");return p==="none"?null:p.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(A){return+A})}function m(g){for(var _=[];d(g);)_.push(g),g=g.parentNode;return _}function d(g){return g&&(g instanceof Element||g instanceof HTMLElement)}function b(g,_){return g&&_&&g.x===_.x&&g.y===_.y&&g.top===_.top&&g.left===_.left&&g.right===_.right&&g.bottom===_.bottom}I.exports={getGraphDiv:t,isPlotDiv:a,removeElement:i,addStyleRule:n,addRelatedStyleRule:r,deleteRelatedStyleRule:f,getFullTransformMatrix:u,getElementTransformMatrix:l,getElementAndAncestors:m,equalDomRects:b}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(e,I,F){var s=e("events").EventEmitter,o={init:function(h){if(h._ev instanceof s)return h;var y=new s,t=new s;return h._ev=y,h._internalEv=t,h.on=y.on.bind(y),h.once=y.once.bind(y),h.removeListener=y.removeListener.bind(y),h.removeAllListeners=y.removeAllListeners.bind(y),h._internalOn=t.on.bind(t),h._internalOnce=t.once.bind(t),h._removeInternalListener=t.removeListener.bind(t),h._removeAllInternalListeners=t.removeAllListeners.bind(t),h.emit=function(a,i){typeof jQuery!="undefined"&&jQuery(h).trigger(a,i),y.emit(a,i),t.emit(a,i)},h},triggerHandler:function(h,y,t){var a,i;typeof jQuery!="undefined"&&(a=jQuery(h).triggerHandler(y,t));var n=h._ev;if(!n)return a;var r=n._events[y];if(!r)return a;function f(l){if(l.listener){if(n.removeListener(y,l.listener),!l.fired)return l.fired=!0,l.listener.apply(n,[t])}else return l.apply(n,[t])}r=Array.isArray(r)?r:[r];var u;for(u=0;u<r.length-1;u++)f(r[u]);return i=f(r[u]),a!==void 0?a:i},purge:function(h){return delete h._ev,delete h.on,delete h.once,delete h.removeListener,delete h.removeAllListeners,delete h.emit,delete h._ev,delete h._internalEv,delete h._internalOn,delete h._internalOnce,delete h._removeInternalListener,delete h._removeAllInternalListeners,h}};I.exports=o},{events:84}],493:[function(e,I,F){var s=e("./is_plain_object.js"),o=Array.isArray;function h(t,a){var i,n;for(i=0;i<t.length;i++){if(n=t[i],n!==null&&typeof n=="object")return!1;n!==void 0&&(a[i]=n)}return!0}F.extendFlat=function(){return y(arguments,!1,!1,!1)},F.extendDeep=function(){return y(arguments,!0,!1,!1)},F.extendDeepAll=function(){return y(arguments,!0,!0,!1)},F.extendDeepNoArrays=function(){return y(arguments,!0,!1,!0)};function y(t,a,i,n){var r=t[0],f=t.length,u,l,m,d,b,g,_;if(f===2&&o(r)&&o(t[1])&&r.length===0){if(_=h(t[1],r),_)return r;r.splice(0,r.length)}for(var p=1;p<f;p++){u=t[p];for(l in u)m=r[l],d=u[l],n&&o(d)?r[l]=d:a&&d&&(s(d)||(b=o(d)))?(b?(b=!1,g=m&&o(m)?m:[]):g=m&&s(m)?m:{},r[l]=y([g,d],a,i,n)):(typeof d!="undefined"||i)&&(r[l]=d)}return r}},{"./is_plain_object.js":504}],494:[function(e,I,F){I.exports=function(o){for(var h={},y=[],t=0,a=0;a<o.length;a++){var i=o[a];h[i]!==1&&(h[i]=1,y[t++]=i)}return y}},{}],495:[function(e,I,F){I.exports=function(t){for(var a=h(t)?o:s,i=[],n=0;n<t.length;n++){var r=t[n];a(r)&&i.push(r)}return i};function s(y){return y.visible===!0}function o(y){var t=y[0].trace;return t.visible===!0&&t._length!==0}function h(y){return Array.isArray(y)&&Array.isArray(y[0])&&y[0][0]&&y[0][0].trace}},{}],496:[function(e,I,F){var s=e("@plotly/d3"),o=e("country-regex"),h=e("@turf/area"),y=e("@turf/centroid"),t=e("@turf/bbox"),a=e("./identity"),i=e("./loggers"),n=e("./is_plain_object"),r=e("./nested_property"),f=e("./polygon"),u=Object.keys(o),l={"ISO-3":a,"USA-states":a,"country names":m};function m(S){for(var T=0;T<u.length;T++){var x=u[T],w=new RegExp(o[x]);if(w.test(S.trim().toLowerCase()))return x}return i.log("Unrecognized country name: "+S+"."),!1}function d(S,T,x){if(!T||typeof T!="string")return!1;var w=l[S](T),v,C,M;if(w){if(S==="USA-states")for(v=[],M=0;M<x.length;M++)C=x[M],C.properties&&C.properties.gu&&C.properties.gu==="USA"&&v.push(C);else v=x;for(M=0;M<v.length;M++)if(C=v[M],C.id===w)return C;i.log(["Location with id",w,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function b(S){var T=S.geometry,x=T.coordinates,w=S.id,v=[],C,M,E,L;function z(O){for(var R=0;R<O.length-1;R++)if(O[R][0]>0&&O[R+1][0]<0)return R;return null}switch(w==="RUS"||w==="FJI"?C=function(O){var R;if(z(O)===null)R=O;else for(R=new Array(O.length),L=0;L<O.length;L++)R[L]=[O[L][0]<0?O[L][0]+360:O[L][0],O[L][1]];v.push(f.tester(R))}:w==="ATA"?C=function(O){var R=z(O);if(R===null)return v.push(f.tester(O));var D=new Array(O.length+1),H=0;for(L=0;L<O.length;L++)L>R?D[H++]=[O[L][0]+360,O[L][1]]:L===R?(D[H++]=O[L],D[H++]=[O[L][0],-90]):D[H++]=O[L];var B=f.tester(D);B.pts.pop(),v.push(B)}:C=function(O){v.push(f.tester(O))},T.type){case"MultiPolygon":for(M=0;M<x.length;M++)for(E=0;E<x[M].length;E++)C(x[M][E]);break;case"Polygon":for(M=0;M<x.length;M++)C(x[M]);break}return v}function g(S){var T=S.geojson,x=window.PlotlyGeoAssets||{},w=typeof T=="string"?x[T]:T;return n(w)?w:(i.error("Oops ... something went wrong when fetching "+T),!1)}function _(S){var T=S[0].trace,x=g(T);if(!x)return!1;var w={},v=[],C;for(C=0;C<T._length;C++){var M=S[C];(M.loc||M.loc===0)&&(w[M.loc]=M)}function E(O){var R=r(O,T.featureidkey||"id").get(),D=w[R];if(D){var H=O.geometry;if(H.type==="Polygon"||H.type==="MultiPolygon"){var B={type:"Feature",id:R,geometry:H,properties:{}};B.properties.ct=p(B),D.fIn=O,D.fOut=B,v.push(B)}else i.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete w[R]}switch(x.type){case"FeatureCollection":var L=x.features;for(C=0;C<L.length;C++)E(L[C]);break;case"Feature":E(x);break;default:return i.warn(["Invalid GeoJSON type",(x.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var z in w)i.log(["Location *"+z+"*","does not have a matching feature with id-key","*"+T.featureidkey+"*."].join(" "));return v}function p(S){var T=S.geometry,x;if(T.type==="MultiPolygon")for(var w=T.coordinates,v=0,C=0;C<w.length;C++){var M={type:"Polygon",coordinates:w[C]},E=h.default(M);E>v&&(v=E,x=M)}else x=T;return y.default(x).geometry.coordinates}function A(S){var T=window.PlotlyGeoAssets||{},x=[];function w(L){return new Promise(function(z,O){s.json(L,function(R,D){if(R){delete T[L];var H=R.status===404?'GeoJSON at URL "'+L+'" does not exist.':"Unexpected error while fetching from "+L;return O(new Error(H))}return T[L]=D,z(D)})})}function v(L){return new Promise(function(z,O){var R=0,D=setInterval(function(){if(T[L]&&T[L]!=="pending")return clearInterval(D),z(T[L]);if(R>100)return clearInterval(D),O("Unexpected error while fetching from "+L);R++},50)})}for(var C=0;C<S.length;C++){var M=S[C][0].trace,E=M.geojson;typeof E=="string"&&(T[E]?T[E]==="pending"&&x.push(v(E)):(T[E]="pending",x.push(w(E))))}return x}function c(S){return t.default(S)}I.exports={locationToFeature:d,feature2polygons:b,getTraceGeojson:g,extractTraceFeature:_,fetchTraceGeoData:A,computeBbox:c}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(e,I,F){var s=e("../constants/numerical").BADNUM;F.calcTraceToLineCoords=function(o){for(var h=o[0].trace,y=h.connectgaps,t=[],a=[],i=0;i<o.length;i++){var n=o[i],r=n.lonlat;r[0]!==s?a.push(r):!y&&a.length>0&&(t.push(a),a=[])}return a.length>0&&t.push(a),t},F.makeLine=function(o){return o.length===1?{type:"LineString",coordinates:o[0]}:{type:"MultiLineString",coordinates:o}},F.makePolygon=function(o){if(o.length===1)return{type:"Polygon",coordinates:o};for(var h=new Array(o.length),y=0;y<o.length;y++)h[y]=[o[y]];return{type:"MultiPolygon",coordinates:h}},F.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(e,I,F){var s=e("./mod").mod;F.segmentsIntersect=o;function o(i,n,r,f,u,l,m,d){var b=r-i,g=u-i,_=m-u,p=f-n,A=l-n,c=d-l,S=b*c-_*p;if(S===0)return null;var T=(g*c-_*A)/S,x=(g*p-b*A)/S;return x<0||x>1||T<0||T>1?null:{x:i+b*T,y:n+p*T}}F.segmentDistance=function(n,r,f,u,l,m,d,b){if(o(n,r,f,u,l,m,d,b))return 0;var g=f-n,_=u-r,p=d-l,A=b-m,c=g*g+_*_,S=p*p+A*A,T=Math.min(h(g,_,c,l-n,m-r),h(g,_,c,d-n,b-r),h(p,A,S,n-l,r-m),h(p,A,S,f-l,u-m));return Math.sqrt(T)};function h(i,n,r,f,u){var l=f*i+u*n;if(l<0)return f*f+u*u;if(l>r){var m=f-i,d=u-n;return m*m+d*d}else{var b=f*n-u*i;return b*b/r}}var y,t,a;F.getTextLocation=function(n,r,f,u){if((n!==t||u!==a)&&(y={},t=n,a=u),y[f])return y[f];var l=n.getPointAtLength(s(f-u/2,r)),m=n.getPointAtLength(s(f+u/2,r)),d=Math.atan((m.y-l.y)/(m.x-l.x)),b=n.getPointAtLength(s(f,r)),g=(b.x*4+l.x+m.x)/6,_=(b.y*4+l.y+m.y)/6,p={x:g,y:_,theta:d};return y[f]=p,p},F.clearLocationCache=function(){t=null},F.getVisibleSegment=function(n,r,f){var u=r.left,l=r.right,m=r.top,d=r.bottom,b=0,g=n.getTotalLength(),_=g,p,A;function c(T){var x=n.getPointAtLength(T);T===0?p=x:T===g&&(A=x);var w=x.x<u?u-x.x:x.x>l?x.x-l:0,v=x.y<m?m-x.y:x.y>d?x.y-d:0;return Math.sqrt(w*w+v*v)}for(var S=c(b);S;){if(b+=S+f,b>_)return;S=c(b)}for(S=c(_);S;){if(_-=S+f,b>_)return;S=c(_)}return{min:b,max:_,len:_-b,total:g,isClosed:b===0&&_===g&&Math.abs(p.x-A.x)<.1&&Math.abs(p.y-A.y)<.1}},F.findPointOnPath=function(n,r,f,u){u=u||{};for(var l=u.pathLength||n.getTotalLength(),m=u.tolerance||.001,d=u.iterationLimit||30,b=n.getPointAtLength(0)[f]>n.getPointAtLength(l)[f]?-1:1,g=0,_=0,p=l,A,c,S;g<d;){if(A=(_+p)/2,c=n.getPointAtLength(A),S=c[f]-r,Math.abs(S)<m)return c;b*S>0?p=A:_=A,g++}return c}},{"./mod":510}],499:[function(e,I,F){var s=e("fast-isnumeric"),o=e("tinycolor2"),h=e("color-normalize"),y=e("../components/colorscale"),t=e("../components/color/attributes").defaultLine,a=e("./array").isArrayOrTypedArray,i=h(t),n=1;function r(d,b){var g=d;return g[3]*=b,g}function f(d){if(s(d))return i;var b=h(d);return b.length?b:i}function u(d){return s(d)?d:n}function l(d,b,g){var _=d.color,p=a(_),A=a(b),c=y.extractOpts(d),S=[],T,x,w,v,C;if(c.colorscale!==void 0?T=y.makeColorScaleFuncFromTrace(d):T=f,p?x=function(E,L){return E[L]===void 0?i:h(T(E[L]))}:x=f,A?w=function(E,L){return E[L]===void 0?n:u(E[L])}:w=u,p||A)for(var M=0;M<g;M++)v=x(_,M),C=w(b,M),S[M]=r(v,C);else S=r(h(_),b);return S}function m(d){var b=y.extractOpts(d),g=b.colorscale;return b.reversescale&&(g=y.flipScale(b.colorscale)),g.map(function(_){var p=_[0],A=o(_[1]),c=A.toRgb();return{index:p,rgb:[c.r,c.g,c.b,c.a]}})}I.exports={formatColor:l,parseColorScale:m}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(e,I,F){var s=e("./identity");function o(h){return[h]}I.exports={keyFun:function(h){return h.key},repeat:o,descend:s,wrap:o,unwrap:function(h){return h[0]}}},{"./identity":501}],501:[function(e,I,F){I.exports=function(o){return o}},{}],502:[function(e,I,F){I.exports=function(o,h){if(!h)return o;var y=1/Math.abs(h),t=y>1?(y*o+y*h)/y:o+h,a=String(t).length;if(a>16){var i=String(h).length,n=String(o).length;if(a>=n+i){var r=parseFloat(t).toPrecision(12);r.indexOf("e+")===-1&&(t=+r)}}return t}},{}],503:[function(e,I,F){var s=e("@plotly/d3"),o=e("d3-time-format").utcFormat,h=e("d3-format").format,y=e("fast-isnumeric"),t=e("../constants/numerical"),a=t.FP_SAFE,i=-a,n=t.BADNUM,r=I.exports={};r.adjustFormat=function(fe){return!fe||/^\d[.]\df/.test(fe)||/[.]\d%/.test(fe)?fe:fe==="0.f"?"~f":/^\d%/.test(fe)?"~%":/^\ds/.test(fe)?"~s":!/^[~,.0$]/.test(fe)&&/[&fps]/.test(fe)?"~"+fe:fe};var f={};r.warnBadFormat=function(le){var fe=String(le);f[fe]||(f[fe]=1,r.warn('encountered bad format: "'+fe+'"'))},r.noFormat=function(le){return String(le)},r.numberFormat=function(le){var fe;try{fe=h(r.adjustFormat(le))}catch{return r.warnBadFormat(le),r.noFormat}return fe},r.nestedProperty=e("./nested_property"),r.keyedContainer=e("./keyed_container"),r.relativeAttr=e("./relative_attr"),r.isPlainObject=e("./is_plain_object"),r.toLogRange=e("./to_log_range"),r.relinkPrivateKeys=e("./relink_private");var u=e("./array");r.isTypedArray=u.isTypedArray,r.isArrayOrTypedArray=u.isArrayOrTypedArray,r.isArray1D=u.isArray1D,r.ensureArray=u.ensureArray,r.concat=u.concat,r.maxRowLength=u.maxRowLength,r.minRowLength=u.minRowLength;var l=e("./mod");r.mod=l.mod,r.modHalf=l.modHalf;var m=e("./coerce");r.valObjectMeta=m.valObjectMeta,r.coerce=m.coerce,r.coerce2=m.coerce2,r.coerceFont=m.coerceFont,r.coercePattern=m.coercePattern,r.coerceHoverinfo=m.coerceHoverinfo,r.coerceSelectionMarkerOpacity=m.coerceSelectionMarkerOpacity,r.validate=m.validate;var d=e("./dates");r.dateTime2ms=d.dateTime2ms,r.isDateTime=d.isDateTime,r.ms2DateTime=d.ms2DateTime,r.ms2DateTimeLocal=d.ms2DateTimeLocal,r.cleanDate=d.cleanDate,r.isJSDate=d.isJSDate,r.formatDate=d.formatDate,r.incrementMonth=d.incrementMonth,r.dateTick0=d.dateTick0,r.dfltRange=d.dfltRange,r.findExactDates=d.findExactDates,r.MIN_MS=d.MIN_MS,r.MAX_MS=d.MAX_MS;var b=e("./search");r.findBin=b.findBin,r.sorterAsc=b.sorterAsc,r.sorterDes=b.sorterDes,r.distinctVals=b.distinctVals,r.roundUp=b.roundUp,r.sort=b.sort,r.findIndexOfMin=b.findIndexOfMin,r.sortObjectKeys=e("./sort_object_keys");var g=e("./stats");r.aggNums=g.aggNums,r.len=g.len,r.mean=g.mean,r.median=g.median,r.midRange=g.midRange,r.variance=g.variance,r.stdev=g.stdev,r.interp=g.interp;var _=e("./matrix");r.init2dArray=_.init2dArray,r.transposeRagged=_.transposeRagged,r.dot=_.dot,r.translationMatrix=_.translationMatrix,r.rotationMatrix=_.rotationMatrix,r.rotationXYMatrix=_.rotationXYMatrix,r.apply3DTransform=_.apply3DTransform,r.apply2DTransform=_.apply2DTransform,r.apply2DTransform2=_.apply2DTransform2,r.convertCssMatrix=_.convertCssMatrix,r.inverseTransformMatrix=_.inverseTransformMatrix;var p=e("./angles");r.deg2rad=p.deg2rad,r.rad2deg=p.rad2deg,r.angleDelta=p.angleDelta,r.angleDist=p.angleDist,r.isFullCircle=p.isFullCircle,r.isAngleInsideSector=p.isAngleInsideSector,r.isPtInsideSector=p.isPtInsideSector,r.pathArc=p.pathArc,r.pathSector=p.pathSector,r.pathAnnulus=p.pathAnnulus;var A=e("./anchor_utils");r.isLeftAnchor=A.isLeftAnchor,r.isCenterAnchor=A.isCenterAnchor,r.isRightAnchor=A.isRightAnchor,r.isTopAnchor=A.isTopAnchor,r.isMiddleAnchor=A.isMiddleAnchor,r.isBottomAnchor=A.isBottomAnchor;var c=e("./geometry2d");r.segmentsIntersect=c.segmentsIntersect,r.segmentDistance=c.segmentDistance,r.getTextLocation=c.getTextLocation,r.clearLocationCache=c.clearLocationCache,r.getVisibleSegment=c.getVisibleSegment,r.findPointOnPath=c.findPointOnPath;var S=e("./extend");r.extendFlat=S.extendFlat,r.extendDeep=S.extendDeep,r.extendDeepAll=S.extendDeepAll,r.extendDeepNoArrays=S.extendDeepNoArrays;var T=e("./loggers");r.log=T.log,r.warn=T.warn,r.error=T.error;var x=e("./regex");r.counterRegex=x.counter;var w=e("./throttle");r.throttle=w.throttle,r.throttleDone=w.done,r.clearThrottle=w.clear;var v=e("./dom");r.getGraphDiv=v.getGraphDiv,r.isPlotDiv=v.isPlotDiv,r.removeElement=v.removeElement,r.addStyleRule=v.addStyleRule,r.addRelatedStyleRule=v.addRelatedStyleRule,r.deleteRelatedStyleRule=v.deleteRelatedStyleRule,r.getFullTransformMatrix=v.getFullTransformMatrix,r.getElementTransformMatrix=v.getElementTransformMatrix,r.getElementAndAncestors=v.getElementAndAncestors,r.equalDomRects=v.equalDomRects,r.clearResponsive=e("./clear_responsive"),r.preserveDrawingBuffer=e("./preserve_drawing_buffer"),r.makeTraceGroups=e("./make_trace_groups"),r._=e("./localize"),r.notifier=e("./notifier"),r.filterUnique=e("./filter_unique"),r.filterVisible=e("./filter_visible"),r.pushUnique=e("./push_unique"),r.increment=e("./increment"),r.cleanNumber=e("./clean_number"),r.ensureNumber=function(fe){return y(fe)?(fe=Number(fe),fe>a||fe<i?n:fe):n},r.isIndex=function(le,fe){return fe!==void 0&&le>=fe?!1:y(le)&&le>=0&&le%1===0},r.noop=e("./noop"),r.identity=e("./identity"),r.repeat=function(le,fe){for(var ue=new Array(fe),V=0;V<fe;V++)ue[V]=le;return ue},r.swapAttrs=function(le,fe,ue,V){ue||(ue="x"),V||(V="y");for(var j=0;j<fe.length;j++){var ee=fe[j],q=r.nestedProperty(le,ee.replace("?",ue)),X=r.nestedProperty(le,ee.replace("?",V)),J=q.get();q.set(X.get()),X.set(J)}},r.raiseToTop=function(fe){fe.parentNode.appendChild(fe)},r.cancelTransition=function(le){return le.transition().duration(0)},r.constrain=function(le,fe,ue){return fe>ue?Math.max(ue,Math.min(fe,le)):Math.max(fe,Math.min(ue,le))},r.bBoxIntersect=function(le,fe,ue){return ue=ue||0,le.left<=fe.right+ue&&fe.left<=le.right+ue&&le.top<=fe.bottom+ue&&fe.top<=le.bottom+ue},r.simpleMap=function(le,fe,ue,V,j){for(var ee=le.length,q=new Array(ee),X=0;X<ee;X++)q[X]=fe(le[X],ue,V,j);return q},r.randstr=function le(fe,ue,V,j){if(V||(V=16),ue===void 0&&(ue=24),ue<=0)return"0";var ee=Math.log(Math.pow(2,ue))/Math.log(V),q="",X,J,ie;for(X=2;ee===1/0;X*=2)ee=Math.log(Math.pow(2,ue/X))/Math.log(V)*X;var ne=ee-Math.floor(ee);for(X=0;X<Math.floor(ee);X++)ie=Math.floor(Math.random()*V).toString(V),q=ie+q;ne&&(J=Math.pow(V,ne),ie=Math.floor(Math.random()*J).toString(V),q=ie+q);var oe=parseInt(q,V);return fe&&fe[q]||oe!==1/0&&oe>=Math.pow(2,ue)?j>10?(r.warn("randstr failed uniqueness"),q):le(fe,ue,V,(j||0)+1):q},r.OptionControl=function(le,fe){le||(le={}),fe||(fe="opt");var ue={};return ue.optionList=[],ue._newoption=function(V){V[fe]=le,ue[V.name]=V,ue.optionList.push(V)},ue["_"+fe]=le,ue},r.smooth=function(le,fe){if(fe=Math.round(fe)||0,fe<2)return le;var ue=le.length,V=2*ue,j=2*fe-1,ee=new Array(j),q=new Array(ue),X,J,ie,ne;for(X=0;X<j;X++)ee[X]=(1-Math.cos(Math.PI*(X+1)/fe))/(2*fe);for(X=0;X<ue;X++){for(ne=0,J=0;J<j;J++)ie=X+J+1-fe,ie<-ue?ie-=V*Math.round(ie/V):ie>=V&&(ie-=V*Math.floor(ie/V)),ie<0?ie=-1-ie:ie>=ue&&(ie=V-1-ie),ne+=le[ie]*ee[J];q[X]=ne}return q},r.syncOrAsync=function(le,fe,ue){var V,j;function ee(){return r.syncOrAsync(le,fe,ue)}for(;le.length;)if(j=le.splice(0,1)[0],V=j(fe),V&&V.then)return V.then(ee);return ue&&ue(fe)},r.stripTrailingSlash=function(le){return le.substr(-1)==="/"?le.substr(0,le.length-1):le},r.noneOrAll=function(le,fe,ue){if(!!le){var V=!1,j=!0,ee,q;for(ee=0;ee<ue.length;ee++)q=le[ue[ee]],q!=null?V=!0:j=!1;if(V&&!j)for(ee=0;ee<ue.length;ee++)le[ue[ee]]=fe[ue[ee]]}},r.mergeArray=function(le,fe,ue,V){var j=typeof V=="function";if(r.isArrayOrTypedArray(le))for(var ee=Math.min(le.length,fe.length),q=0;q<ee;q++){var X=le[q];fe[q][ue]=j?V(X):X}},r.mergeArrayCastPositive=function(le,fe,ue){return r.mergeArray(le,fe,ue,function(V){var j=+V;return isFinite(j)&&j>0?j:0})},r.fillArray=function(le,fe,ue,V){if(V=V||r.identity,r.isArrayOrTypedArray(le))for(var j=0;j<fe.length;j++)fe[j][ue]=V(le[j])},r.castOption=function(le,fe,ue,V){V=V||r.identity;var j=r.nestedProperty(le,ue).get();return r.isArrayOrTypedArray(j)?Array.isArray(fe)&&r.isArrayOrTypedArray(j[fe[0]])?V(j[fe[0]][fe[1]]):V(j[fe]):j},r.extractOption=function(le,fe,ue,V){if(ue in le)return le[ue];var j=r.nestedProperty(fe,V).get();if(!Array.isArray(j))return j};function C(le){var fe={};for(var ue in le)for(var V=le[ue],j=0;j<V.length;j++)fe[V[j]]=+ue;return fe}r.tagSelected=function(le,fe,ue){var V=fe.selectedpoints,j=fe._indexToPoints,ee;j&&(ee=C(j));function q(oe){return oe!==void 0&&oe<le.length}for(var X=0;X<V.length;X++){var J=V[X];if(r.isIndex(J)||r.isArrayOrTypedArray(J)&&r.isIndex(J[0])&&r.isIndex(J[1])){var ie=ee?ee[J]:J,ne=ue?ue[ie]:ie;q(ne)&&(le[ne].selected=1)}}},r.selIndices2selPoints=function(le){var fe=le.selectedpoints,ue=le._indexToPoints;if(ue){for(var V=C(ue),j=[],ee=0;ee<fe.length;ee++){var q=fe[ee];if(r.isIndex(q)){var X=V[q];r.isIndex(X)&&j.push(X)}}return j}else return fe},r.getTargetArray=function(le,fe){var ue=fe.target;if(typeof ue=="string"&&ue){var V=r.nestedProperty(le,ue).get();return Array.isArray(V)?V:!1}else if(Array.isArray(ue))return ue;return!1},r.minExtend=function(le,fe){var ue={};typeof fe!="object"&&(fe={});var V=3,j=Object.keys(le),ee,q,X;for(ee=0;ee<j.length;ee++)q=j[ee],X=le[q],!(q.charAt(0)==="_"||typeof X=="function")&&(q==="module"?ue[q]=X:Array.isArray(X)?q==="colorscale"?ue[q]=X.slice():ue[q]=X.slice(0,V):r.isTypedArray(X)?ue[q]=X.subarray(0,V):X&&typeof X=="object"?ue[q]=r.minExtend(le[q],fe[q]):ue[q]=X);for(j=Object.keys(fe),ee=0;ee<j.length;ee++)q=j[ee],X=fe[q],(typeof X!="object"||!(q in ue)||typeof ue[q]!="object")&&(ue[q]=X);return ue},r.titleCase=function(le){return le.charAt(0).toUpperCase()+le.substr(1)},r.containsAny=function(le,fe){for(var ue=0;ue<fe.length;ue++)if(le.indexOf(fe[ue])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var M=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return M.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;r.isIOS=function(){return E.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var le=L.exec(window.navigator.userAgent);if(le&&le.length===2){var fe=parseInt(le[1]);if(!isNaN(fe))return fe}return null},r.isD3Selection=function(le){return le instanceof s.selection},r.ensureSingle=function(le,fe,ue,V){var j=le.select(fe+(ue?"."+ue:""));if(j.size())return j;var ee=le.append(fe);return ue&&ee.classed(ue,!0),V&&ee.call(V),ee},r.ensureSingleById=function(le,fe,ue,V){var j=le.select(fe+"#"+ue);if(j.size())return j;var ee=le.append(fe).attr("id",ue);return V&&ee.call(V),ee},r.objectFromPath=function(le,fe){for(var ue=le.split("."),V,j=V={},ee=0;ee<ue.length;ee++){var q=ue[ee],X=null,J=ue[ee].match(/(.*)\[([0-9]+)\]/);J?(q=J[1],X=J[2],V=V[q]=[],ee===ue.length-1?V[X]=fe:V[X]={},V=V[X]):(ee===ue.length-1?V[q]=fe:V[q]={},V=V[q])}return j};var z=/^([^\[\.]+)\.(.+)?/,O=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(le){var fe,ue,V,j,ee,q,X;if(typeof le=="object"&&!Array.isArray(le))for(ue in le)le.hasOwnProperty(ue)&&((fe=ue.match(z))?(j=le[ue],V=fe[1],delete le[ue],le[V]=r.extendDeepNoArrays(le[V]||{},r.objectFromPath(ue,r.expandObjectPaths(j))[V])):(fe=ue.match(O))?(j=le[ue],V=fe[1],ee=parseInt(fe[2]),delete le[ue],le[V]=le[V]||[],fe[3]==="."?(X=fe[4],q=le[V][ee]=le[V][ee]||{},r.extendDeepNoArrays(q,r.objectFromPath(X,r.expandObjectPaths(j)))):le[V][ee]=r.expandObjectPaths(j)):le[ue]=r.expandObjectPaths(le[ue]));return le},r.numSeparate=function(le,fe,ue){if(ue||(ue=!1),typeof fe!="string"||fe.length===0)throw new Error("Separator string required for formatting!");typeof le=="number"&&(le=String(le));var V=/(\d+)(\d{3})/,j=fe.charAt(0),ee=fe.charAt(1),q=le.split("."),X=q[0],J=q.length>1?j+q[1]:"";if(ee&&(q.length>1||X.length>4||ue))for(;V.test(X);)X=X.replace(V,"$1"+ee+"$2");return X+J},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;r.templateString=function(le,fe){var ue={};return le.replace(r.TEMPLATE_STRING_REGEX,function(V,j){var ee;return R.test(j)?ee=fe[j]:(ue[j]=ue[j]||r.nestedProperty(fe,j).get,ee=ue[j]()),r.isValidTextValue(ee)?ee:""})};var D={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return $.apply(D,arguments)};var H={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return $.apply(H,arguments)};var B=/^[:|\|]/;function $(le,fe,ue){var V=this,j=arguments;fe||(fe={});var ee={};return le.replace(r.TEMPLATE_STRING_REGEX,function(q,X,J){var ie=X==="xother"||X==="yother",ne=X==="_xother"||X==="_yother",oe=X==="_xother_"||X==="_yother_",se=X==="xother_"||X==="yother_",me=ie||ne||se||oe,ce=X;(ne||oe)&&(ce=ce.substring(1)),(se||oe)&&(ce=ce.substring(0,ce.length-1));var pe;if(me){if(pe=fe[ce],pe===void 0)return""}else{var xe,Se;for(Se=3;Se<j.length;Se++)if(xe=j[Se],!!xe){if(xe.hasOwnProperty(ce)){pe=xe[ce];break}if(R.test(ce)||(pe=r.nestedProperty(xe,ce).get(),pe=ee[ce]||r.nestedProperty(xe,ce).get(),pe&&(ee[ce]=pe)),pe!==void 0)break}}if(pe===void 0&&V)return V.count<V.max&&(r.warn("Variable '"+ce+"' in "+V.name+" could not be found!"),pe=q),V.count===V.max&&r.warn("Too many "+V.name+" warnings - additional warnings will be suppressed"),V.count++,q;if(J){var Ae;if(J[0]===":"&&(Ae=ue?ue.numberFormat:r.numberFormat,pe=Ae(J.replace(B,""))(pe)),J[0]==="|"){Ae=ue?ue.timeFormat:o;var Ce=r.dateTime2ms(pe);pe=r.formatDate(Ce,J.replace(B,""),!1,Ae)}}else{var Ee=ce+"Label";fe.hasOwnProperty(Ee)&&(pe=fe[Ee])}return me&&(pe="("+pe+")",(ne||oe)&&(pe=" "+pe),(se||oe)&&(pe=pe+" ")),pe})}var W=48,re=57;r.subplotSort=function(le,fe){for(var ue=Math.min(le.length,fe.length)+1,V=0,j=0,ee=0;ee<ue;ee++){var q=le.charCodeAt(ee)||0,X=fe.charCodeAt(ee)||0,J=q>=W&&q<=re,ie=X>=W&&X<=re;if(J&&(V=10*V+q-W),ie&&(j=10*j+X-W),!J||!ie){if(V!==j)return V-j;if(q!==X)return q-X}}return j-V};var Q=2e9;r.seedPseudoRandom=function(){Q=2e9},r.pseudoRandom=function(){var le=Q;return Q=(69069*Q+1)%4294967296,Math.abs(Q-le)<429496729?r.pseudoRandom():Q/4294967296},r.fillText=function(le,fe,ue){var V=Array.isArray(ue)?function(q){ue.push(q)}:function(q){ue.text=q},j=r.extractOption(le,fe,"htx","hovertext");if(r.isValidTextValue(j))return V(j);var ee=r.extractOption(le,fe,"tx","text");if(r.isValidTextValue(ee))return V(ee)},r.isValidTextValue=function(le){return le||le===0},r.formatPercent=function(le,fe){fe=fe||0;for(var ue=(Math.round(100*le*Math.pow(10,fe))*Math.pow(.1,fe)).toFixed(fe)+"%",V=0;V<fe;V++)ue.indexOf(".")!==-1&&(ue=ue.replace("0%","%"),ue=ue.replace(".%","%"));return ue},r.isHidden=function(le){var fe=window.getComputedStyle(le).display;return!fe||fe==="none"},r.strTranslate=function(le,fe){return le||fe?"translate("+le+","+fe+")":""},r.strRotate=function(le){return le?"rotate("+le+")":""},r.strScale=function(le){return le!==1?"scale("+le+")":""},r.getTextTransform=function(le){var fe=le.noCenter,ue=le.textX,V=le.textY,j=le.targetX,ee=le.targetY,q=le.anchorX||0,X=le.anchorY||0,J=le.rotate,ie=le.scale;return ie?ie>1&&(ie=1):ie=0,r.strTranslate(j-ie*(ue+q),ee-ie*(V+X))+r.strScale(ie)+(J?"rotate("+J+(fe?"":" "+ue+" "+V)+")":"")},r.ensureUniformFontSize=function(le,fe){var ue=r.extendFlat({},fe);return ue.size=Math.max(fe.size,le._fullLayout.uniformtext.minsize||0),ue},r.join2=function(le,fe,ue){var V=le.length;return V>1?le.slice(0,-1).join(fe)+ue+le[V-1]:le.join(fe)},r.bigFont=function(le){return Math.round(1.2*le)};var Z=r.getFirefoxVersion(),K=Z!==null&&Z<86;r.getPositionFromD3Event=function(){return K?[s.event.layerX,s.event.layerY]:[s.event.offsetX,s.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(e,I,F){I.exports=function(o){return window&&window.process&&window.process.versions?Object.prototype.toString.call(o)==="[object Object]":Object.prototype.toString.call(o)==="[object Object]"&&Object.getPrototypeOf(o).hasOwnProperty("hasOwnProperty")}},{}],505:[function(e,I,F){var s=e("./nested_property"),o=/^\w*$/,h=0,y=1,t=2,a=3,i=4;I.exports=function(r,f,u,l){u=u||"name",l=l||"value";var m,d,b,g={};f&&f.length?(b=s(r,f),d=b.get()):d=r,f=f||"";var _={};if(d)for(m=0;m<d.length;m++)_[d[m][u]]=m;var p=o.test(l),A={set:function(c,S){var T=S===null?i:h;if(!d){if(!b||T===i)return;d=[],b.set(d)}var x=_[c];if(x===void 0){if(T===i)return;T=T|a,x=d.length,_[c]=x}else S!==(p?d[x][l]:s(d[x],l).get())&&(T=T|t);var w=d[x]=d[x]||{};return w[u]=c,p?w[l]=S:s(w,l).set(S),S!==null&&(T=T&~i),g[x]=g[x]|T,A},get:function(c){if(!!d){var S=_[c];if(S!==void 0)return p?d[S][l]:s(d[S],l).get()}},rename:function(c,S){var T=_[c];return T===void 0||(g[T]=g[T]|y,_[S]=T,delete _[c],d[T][u]=S),A},remove:function(c){var S=_[c];if(S===void 0)return A;var T=d[S];if(Object.keys(T).length>2)return g[S]=g[S]|t,A.set(c,null);if(p){for(m=S;m<d.length;m++)g[m]=g[m]|a;for(m=S;m<d.length;m++)_[d[m][u]]--;d.splice(S,1),delete _[c]}else s(T,l).set(null),g[S]=g[S]|t|i;return A},constructUpdate:function(){for(var c,S,T={},x=Object.keys(g),w=0;w<x.length;w++)S=x[w],c=f+"["+S+"]",d[S]?(g[S]&y&&(T[c+"."+u]=d[S][u]),g[S]&t&&(p?T[c+"."+l]=g[S]&i?null:d[S][l]:T[c+"."+l]=g[S]&i?null:s(d[S],l).get())):T[c]=null;return T}};return A}},{"./nested_property":511}],506:[function(e,I,F){var s=e("../registry");I.exports=function(h,y){for(var t=h._context.locale,a=0;a<2;a++){for(var i=h._context.locales,n=0;n<2;n++){var r=(i[t]||{}).dictionary;if(r){var f=r[y];if(f)return f}i=s.localeRegistry}var u=t.split("-")[0];if(u===t)break;t=u}return y}},{"../registry":638}],507:[function(e,I,F){var s=e("../plot_api/plot_config").dfltConfig,o=e("./notifier"),h=I.exports={};h.log=function(){var y;if(s.logging>1){var t=["LOG:"];for(y=0;y<arguments.length;y++)t.push(arguments[y]);console.trace.apply(console,t)}if(s.notifyOnLogging>1){var a=[];for(y=0;y<arguments.length;y++)a.push(arguments[y]);o(a.join("<br>"),"long")}},h.warn=function(){var y;if(s.logging>0){var t=["WARN:"];for(y=0;y<arguments.length;y++)t.push(arguments[y]);console.trace.apply(console,t)}if(s.notifyOnLogging>0){var a=[];for(y=0;y<arguments.length;y++)a.push(arguments[y]);o(a.join("<br>"),"stick")}},h.error=function(){var y;if(s.logging>0){var t=["ERROR:"];for(y=0;y<arguments.length;y++)t.push(arguments[y]);console.error.apply(console,t)}if(s.notifyOnLogging>0){var a=[];for(y=0;y<arguments.length;y++)a.push(arguments[y]);o(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(e,I,F){var s=e("@plotly/d3");I.exports=function(h,y,t){var a=h.selectAll("g."+t.replace(/\s/g,".")).data(y,function(n){return n[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",t),a.order();var i=h.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(n){n[0][i]=s.select(this)}),a}},{"@plotly/d3":58}],509:[function(e,I,F){var s=e("gl-mat4");F.init2dArray=function(o,h){for(var y=new Array(o),t=0;t<o;t++)y[t]=new Array(h);return y},F.transposeRagged=function(o){var h=0,y=o.length,t,a;for(t=0;t<y;t++)h=Math.max(h,o[t].length);var i=new Array(h);for(t=0;t<h;t++)for(i[t]=new Array(y),a=0;a<y;a++)i[t][a]=o[a][t];return i},F.dot=function(o,h){if(!(o.length&&h.length)||o.length!==h.length)return null;var y=o.length,t,a;if(o[0].length)for(t=new Array(y),a=0;a<y;a++)t[a]=F.dot(o[a],h);else if(h[0].length){var i=F.transposeRagged(h);for(t=new Array(i.length),a=0;a<i.length;a++)t[a]=F.dot(o,i[a])}else for(t=0,a=0;a<y;a++)t+=o[a]*h[a];return t},F.translationMatrix=function(o,h){return[[1,0,o],[0,1,h],[0,0,1]]},F.rotationMatrix=function(o){var h=o*Math.PI/180;return[[Math.cos(h),-Math.sin(h),0],[Math.sin(h),Math.cos(h),0],[0,0,1]]},F.rotationXYMatrix=function(o,h,y){return F.dot(F.dot(F.translationMatrix(h,y),F.rotationMatrix(o)),F.translationMatrix(-h,-y))},F.apply3DTransform=function(o){return function(){var h=arguments,y=arguments.length===1?h[0]:[h[0],h[1],h[2]||0];return F.dot(o,[y[0],y[1],y[2],1]).slice(0,3)}},F.apply2DTransform=function(o){return function(){var h=arguments;h.length===3&&(h=h[0]);var y=arguments.length===1?h[0]:[h[0],h[1]];return F.dot(o,[y[0],y[1],1]).slice(0,2)}},F.apply2DTransform2=function(o){var h=F.apply2DTransform(o);return function(y){return h(y.slice(0,2)).concat(h(y.slice(2,4)))}},F.convertCssMatrix=function(o){if(o){var h=o.length;if(h===16)return o;if(h===6)return[o[0],o[1],0,0,o[2],o[3],0,0,0,0,1,0,o[4],o[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},F.inverseTransformMatrix=function(o){var h=[];return s.invert(h,o),[[h[0],h[1],h[2],h[3]],[h[4],h[5],h[6],h[7]],[h[8],h[9],h[10],h[11]],[h[12],h[13],h[14],h[15]]]}},{"gl-mat4":210}],510:[function(e,I,F){function s(h,y){var t=h%y;return t<0?t+y:t}function o(h,y){return Math.abs(h)>y/2?h-Math.round(h/y)*y:h}I.exports={mod:s,modHalf:o}},{}],511:[function(e,I,F){var s=e("fast-isnumeric"),o=e("./array").isArrayOrTypedArray;I.exports=function(l,m){if(s(m))m=String(m);else if(typeof m!="string"||m.substr(m.length-4)==="[-1]")throw"bad property string";for(var d=0,b=m.split("."),g,_,p;d<b.length;){if(g=String(b[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),g){if(g[1])b[d]=g[1];else if(d===0)b.splice(0,1);else throw"bad property string";for(_=g[2].substr(1,g[2].length-2).split("]["),p=0;p<_.length;p++)d++,b.splice(d,0,Number(_[p]))}d++}return typeof l!="object"?f(l,m,b):{set:a(l,b,m),get:h(l,b),astr:m,parts:b,obj:l}};function h(u,l){return function(){var m=u,d,b,g,_,p;for(_=0;_<l.length-1;_++){if(d=l[_],d===-1){for(b=!0,g=[],p=0;p<m.length;p++)g[p]=h(m[p],l.slice(_+1))(),g[p]!==g[0]&&(b=!1);return b?g[0]:g}if(typeof d=="number"&&!o(m)||(m=m[d],typeof m!="object"||m===null))return}if(!(typeof m!="object"||m===null)&&(g=m[l[_]],g!==null))return g}}var y=/(^|\.)args\[/;function t(u,l){return u===void 0||u===null&&!l.match(y)}function a(u,l,m){return function(d){var b=u,g="",_=t(d,m),p,A;for(A=0;A<l.length-1;A++){if(p=l[A],typeof p=="number"&&!o(b))throw"array index but container is not an array";if(p===-1){if(_=!n(b,l.slice(A+1),d,m),_)break;return}if(!r(b,p,l[A+1],_))break;if(b=b[p],typeof b!="object"||b===null)throw"container is not an object";g=i(g,p)}if(_){if(A===l.length-1&&(delete b[l[A]],Array.isArray(b)&&+l[A]===b.length-1))for(;b.length&&b[b.length-1]===void 0;)b.pop()}else b[l[A]]=d}}function i(u,l){var m=l;return s(l)?m="["+l+"]":u&&(m="."+l),u+m}function n(u,l,m,d){var b=o(m),g=!0,_=m,p=d.replace("-1",0),A=b?!1:t(m,p),c=l[0],S;for(S=0;S<u.length;S++)p=d.replace("-1",S),b&&(_=m[S%m.length],A=t(_,p)),A&&(g=!1),r(u,S,c,A)&&a(u[S],l,d.replace("-1",S))(_);return g}function r(u,l,m,d){if(u[l]===void 0){if(d)return!1;typeof m=="number"?u[l]=[]:u[l]={}}return!0}function f(u,l,m){return{set:function(){throw"bad container"},get:function(){},astr:l,parts:m,obj:u}}},{"./array":485,"fast-isnumeric":190}],512:[function(e,I,F){I.exports=function(){}},{}],513:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=[];I.exports=function(y,t){if(h.indexOf(y)!==-1)return;h.push(y);var a=1e3;o(t)?a=t:t==="long"&&(a=3e3);var i=s.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var n=i.selectAll(".notifier-note").data(h);function r(f){f.duration(700).style("opacity",0).each("end",function(u){var l=h.indexOf(u);l!==-1&&h.splice(l,1),s.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(f){var u=s.select(this);u.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){u.transition().call(r)});for(var l=u.append("p"),m=f.split(/<br\s*\/?>/g),d=0;d<m.length;d++)d&&l.append("br"),l.append("span").text(m[d]);t==="stick"?u.transition().duration(350).style("opacity",1):u.transition().duration(700).style("opacity",1).transition().delay(a).call(r)})}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(e,I,F){var s=e("./setcursor"),o="data-savedcursor",h="!!";I.exports=function(t,a){var i=t.attr(o);if(a){if(!i){for(var n=(t.attr("class")||"").split(" "),r=0;r<n.length;r++){var f=n[r];f.indexOf("cursor-")===0&&t.attr(o,f.substr(7)).classed(f,!1)}t.attr(o)||t.attr(o,h)}s(t,a)}else i&&(t.attr(o,null),i===h?s(t):s(t,i))}},{"./setcursor":524}],515:[function(e,I,F){var s=e("./matrix").dot,o=e("../constants/numerical").BADNUM,h=I.exports={};h.tester=function(t){var a=t.slice(),i=a[0][0],n=i,r=a[0][1],f=r,u;for(a.push(a[0]),u=1;u<a.length;u++)i=Math.min(i,a[u][0]),n=Math.max(n,a[u][0]),r=Math.min(r,a[u][1]),f=Math.max(f,a[u][1]);var l=!1,m;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(l=!0,m=function(p){return p[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(l=!0,m=function(p){return p[1]===a[0][1]}));function d(p,A){var c=p[0],S=p[1];return!(c===o||c<i||c>n||S===o||S<r||S>f||A&&m(p))}function b(p,A){var c=p[0],S=p[1];if(c===o||c<i||c>n||S===o||S<r||S>f)return!1;var T=a.length,x=a[0][0],w=a[0][1],v=0,C,M,E,L,z;for(C=1;C<T;C++)if(M=x,E=w,x=a[C][0],w=a[C][1],L=Math.min(M,x),!(c<L||c>Math.max(M,x)||S>Math.max(E,w)))if(S<Math.min(E,w))c!==L&&v++;else{if(x===M?z=S:z=E+(c-M)*(w-E)/(x-M),S===z)return!(C===1&&A);S<=z&&c!==L&&v++}return v%2===1}var g=!0,_=a[0];for(u=1;u<a.length;u++)if(_[0]!==a[u][0]||_[1]!==a[u][1]){g=!1;break}return{xmin:i,xmax:n,ymin:r,ymax:f,pts:a,contains:l?d:b,isRect:l,degenerate:g}},h.isSegmentBent=function(t,a,i,n){var r=t[a],f=[t[i][0]-r[0],t[i][1]-r[1]],u=s(f,f),l=Math.sqrt(u),m=[-f[1]/l,f[0]/l],d,b,g;for(d=a+1;d<i;d++)if(b=[t[d][0]-r[0],t[d][1]-r[1]],g=s(b,f),g<0||g>u||Math.abs(s(b,m))>n)return!0;return!1},h.filter=function(t,a){var i=[t[0]],n=0,r=0;function f(l){t.push(l);var m=i.length,d=n;i.splice(r+1);for(var b=d+1;b<t.length;b++)(b===t.length-1||h.isSegmentBent(t,d,b+1,a))&&(i.push(t[b]),i.length<m-2&&(n=b,r=i.length-1),d=b)}if(t.length>1){var u=t.pop();f(u)}return{addPt:f,raw:t,filtered:i}}},{"../constants/numerical":479,"./matrix":509}],516:[function(e,I,F){(function(s){(function(){var o=e("./show_no_webgl_msg"),h=e("regl");I.exports=function(t,a,i){var n=t._fullLayout,r=!0;return n._glcanvas.each(function(f){if(f.regl){f.regl.preloadCachedCode(i);return}if(!(f.pick&&!n._has("parcoords"))){try{f.regl=h({canvas:this,attributes:{antialias:!f.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||s.devicePixelRatio,extensions:a||[],cachedCode:i||{}})}catch{r=!1}f.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(u){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:u,layer:f.key})},!1)}}),r||o({container:n._glcontainer.node()}),r}}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(e,I,F){var s=e("fast-isnumeric"),o=e("is-mobile");I.exports=function(t){var a;if(t&&t.hasOwnProperty("userAgent")?a=t.userAgent:a=h(),typeof a!="string")return!0;var i=o({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!i)for(var n=a.split(" "),r=1;r<n.length;r++){var f=n[r];if(f.indexOf("Safari")!==-1)for(var u=r-1;u>-1;u--){var l=n[u];if(l.substr(0,8)==="Version/"){var m=l.substr(8).split(".")[0];if(s(m)&&(m=+m),m>=13)return!0}}}return i};function h(){var y;return typeof navigator!="undefined"&&(y=navigator.userAgent),y&&y.headers&&typeof y.headers["user-agent"]=="string"&&(y=y.headers["user-agent"]),y}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(e,I,F){I.exports=function(o,h){if(h instanceof RegExp){for(var y=h.toString(),t=0;t<o.length;t++)if(o[t]instanceof RegExp&&o[t].toString()===y)return o;o.push(h)}else(h||h===0)&&o.indexOf(h)===-1&&o.push(h);return o}},{}],519:[function(e,I,F){var s=e("../lib"),o=e("../plot_api/plot_config").dfltConfig;function h(t,a){for(var i=[],n,r=0;r<a.length;r++)n=a[r],n===t?i[r]=n:typeof n=="object"?i[r]=Array.isArray(n)?s.extendDeep([],n):s.extendDeepAll({},n):i[r]=n;return i}var y={};y.add=function(t,a,i,n,r){var f,u;if(t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},u=t.undoQueue.index,t.autoplay){t.undoQueue.inSequence||(t.autoplay=!1);return}!t.undoQueue.sequence||t.undoQueue.beginSequence?(f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(u,t.undoQueue.queue.length-u,f),t.undoQueue.index+=1):f=t.undoQueue.queue[u-1],t.undoQueue.beginSequence=!1,f&&(f.undo.calls.unshift(a),f.undo.args.unshift(i),f.redo.calls.push(n),f.redo.args.push(r)),t.undoQueue.queue.length>o.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--)},y.startSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},y.stopSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},y.undo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.undo.calls.length;n++)y.plotDo(a,i.undo.calls[n],i.undo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1}},y.redo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.redo.calls.length;n++)y.plotDo(a,i.redo.calls[n],i.redo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},y.plotDo=function(t,a,i){t.autoplay=!0,i=h(t,i),a.apply(null,i)},I.exports=y},{"../lib":503,"../plot_api/plot_config":541}],520:[function(e,I,F){F.counter=function(s,o,h,y){var t=(o||"")+(h?"":"$"),a=y===!1?"":"^";return s==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(a+s+"([2-9]|[1-9][0-9]+)?"+t)}},{}],521:[function(e,I,F){var s=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,o=/^[^\.\[\]]+$/;I.exports=function(h,y){for(;y;){var t=h.match(s);if(t)h=t[1];else if(h.match(o))h="";else throw new Error("bad relativeAttr call:"+[h,y]);if(y.charAt(0)==="^")y=y.slice(1);else break}return h&&y.charAt(0)!=="["?h+"."+y:h+y}},{}],522:[function(e,I,F){var s=e("./array").isArrayOrTypedArray,o=e("./is_plain_object");I.exports=function h(y,t){for(var a in t){var i=t[a],n=y[a];if(n!==i)if(a.charAt(0)==="_"||typeof i=="function"){if(a in y)continue;y[a]=i}else if(s(i)&&s(n)&&o(i[0])){if(a==="customdata"||a==="ids")continue;for(var r=Math.min(i.length,n.length),f=0;f<r;f++)n[f]!==i[f]&&o(i[f])&&o(n[f])&&h(n[f],i[f])}else o(i)&&o(n)&&(h(n,i),Object.keys(n).length||delete y[a])}}},{"./array":485,"./is_plain_object":504}],523:[function(e,I,F){var s=e("fast-isnumeric"),o=e("./loggers"),h=e("./identity"),y=e("../constants/numerical").BADNUM,t=1e-9;F.findBin=function(f,u,l){if(s(u.start))return l?Math.ceil((f-u.start)/u.size-t)-1:Math.floor((f-u.start)/u.size+t);var m=0,d=u.length,b=0,g=d>1?(u[d-1]-u[0])/(d-1):1,_,p;for(g>=0?p=l?a:i:p=l?r:n,f+=g*t*(l?-1:1)*(g>=0?1:-1);m<d&&b++<100;)_=Math.floor((m+d)/2),p(u[_],f)?m=_+1:d=_;return b>90&&o.log("Long binary search..."),m-1};function a(f,u){return f<u}function i(f,u){return f<=u}function n(f,u){return f>u}function r(f,u){return f>=u}F.sorterAsc=function(f,u){return f-u},F.sorterDes=function(f,u){return u-f},F.distinctVals=function(f){var u=f.slice();u.sort(F.sorterAsc);var l;for(l=u.length-1;l>-1&&u[l]===y;l--);for(var m=u[l]-u[0]||1,d=m/(l||1)/1e4,b=[],g,_=0;_<=l;_++){var p=u[_],A=p-g;g===void 0?(b.push(p),g=p):A>d&&(m=Math.min(m,A),b.push(p),g=p)}return{vals:b,minDiff:m}},F.roundUp=function(f,u,l){for(var m=0,d=u.length-1,b,g=0,_=l?0:1,p=l?1:0,A=l?Math.ceil:Math.floor;m<d&&g++<100;)b=A((m+d)/2),u[b]<=f?m=b+_:d=b-p;return u[m]},F.sort=function(f,u){for(var l=0,m=0,d=1;d<f.length;d++){var b=u(f[d],f[d-1]);if(b<0?l=1:b>0&&(m=1),l&&m)return f.sort(u)}return m?f:f.reverse()},F.findIndexOfMin=function(f,u){u=u||h;for(var l=1/0,m,d=0;d<f.length;d++){var b=u(f[d]);b<l&&(l=b,m=d)}return m}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(e,I,F){I.exports=function(o,h){(o.attr("class")||"").split(" ").forEach(function(y){y.indexOf("cursor-")===0&&o.classed(y,!1)}),h&&o.classed("cursor-"+h,!0)}},{}],525:[function(e,I,F){var s=e("../components/color"),o=function(){};I.exports=function(y){for(var t in y)typeof y[t]=="function"&&(y[t]=o);y.destroy=function(){y.container.parentNode.removeChild(y.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=s.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=s.lightLine,a.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",a.appendChild(i),y.container.appendChild(a),y.container.style.background="#FFFFFF",y.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(e,I,F){I.exports=function(o){return Object.keys(o).sort()}},{}],527:[function(e,I,F){var s=e("fast-isnumeric"),o=e("./array").isArrayOrTypedArray;F.aggNums=function(h,y,t,a){var i,n;if((!a||a>t.length)&&(a=t.length),s(y)||(y=!1),o(t[0])){for(n=new Array(a),i=0;i<a;i++)n[i]=F.aggNums(h,y,t[i]);t=n}for(i=0;i<a;i++)s(y)?s(t[i])&&(y=h(+y,+t[i])):y=t[i];return y},F.len=function(h){return F.aggNums(function(y){return y+1},0,h)},F.mean=function(h,y){return y||(y=F.len(h)),F.aggNums(function(t,a){return t+a},0,h)/y},F.midRange=function(h){if(!(h===void 0||h.length===0))return(F.aggNums(Math.max,null,h)+F.aggNums(Math.min,null,h))/2},F.variance=function(h,y,t){return y||(y=F.len(h)),s(t)||(t=F.mean(h,y)),F.aggNums(function(a,i){return a+Math.pow(i-t,2)},0,h)/y},F.stdev=function(h,y,t){return Math.sqrt(F.variance(h,y,t))},F.median=function(h){var y=h.slice().sort();return F.interp(y,.5)},F.interp=function(h,y){if(!s(y))throw"n should be a finite number";if(y=y*h.length-.5,y<0)return h[0];if(y>h.length-1)return h[h.length-1];var t=y%1;return t*h[Math.ceil(y)]+(1-t)*h[Math.floor(y)]}},{"./array":485,"fast-isnumeric":190}],528:[function(e,I,F){var s=e("color-normalize");function o(h){return h?s(h):[0,0,0,1]}I.exports=o},{"color-normalize":89}],529:[function(e,I,F){var s=e("@plotly/d3"),o=e("../lib"),h=o.strTranslate,y=e("../constants/xmlns_namespaces"),t=e("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;F.convertToTspans=function(B,$,W){var re=B.text(),Q=!B.attr("data-notex")&&$&&$._context.typesetMath&&typeof MathJax!="undefined"&&re.match(a),Z=s.select(B.node().parentNode);if(Z.empty())return;var K=B.attr("class")?B.attr("class").split(" ")[0]:"text";K+="-math",Z.selectAll("svg."+K).remove(),Z.selectAll("g."+K+"-group").remove(),B.style("display",null).attr({"data-unformatted":re,"data-math":"N"});function le(){Z.empty()||(K=B.attr("class")+"-math",Z.select("svg."+K).remove()),B.text("").style("white-space","pre");var fe=O(B.node(),re);fe&&B.style("pointer-events","all"),F.positionText(B),W&&W.call(B)}return Q?($&&$._promises||[]).push(new Promise(function(fe){B.style("display","none");var ue=parseInt(B.node().style.fontSize,10),V={fontSize:ue};u(Q[2],V,function(j,ee,q){Z.selectAll("svg."+K).remove(),Z.selectAll("g."+K+"-group").remove();var X=j&&j.select("svg");if(!X||!X.node()){le(),fe();return}var J=Z.append("g").classed(K+"-group",!0).attr({"pointer-events":"none","data-unformatted":re,"data-math":"Y"});J.node().appendChild(X.node()),ee&&ee.node()&&X.node().insertBefore(ee.node().cloneNode(!0),X.node().firstChild);var ie=q.width,ne=q.height;X.attr({class:K,height:ne,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var oe=B.node().style.fill||"black",se=X.select("g");se.attr({fill:oe,stroke:oe});var me=se.node().getBoundingClientRect(),ce=me.width,pe=me.height;(ce>ie||pe>ne)&&(X.style("overflow","hidden"),me=X.node().getBoundingClientRect(),ce=me.width,pe=me.height);var xe=+B.attr("x"),Se=+B.attr("y"),Ae=ue||B.node().getBoundingClientRect().height,Ce=-Ae/4;if(K[0]==="y")J.attr({transform:"rotate("+[-90,xe,Se]+")"+h(-ce/2,Ce-pe/2)});else if(K[0]==="l")Se=Ce-pe/2;else if(K[0]==="a"&&K.indexOf("atitle")!==0)xe=0,Se=Ce;else{var Ee=B.attr("text-anchor");xe=xe-ce*(Ee==="middle"?.5:Ee==="end"?1:0),Se=Se+Ce-pe/2}X.attr({x:xe,y:Se}),W&&W.call(B,J),fe(J)})})):le(),B};var i=/(<|&lt;|&#60;)/g,n=/(>|&gt;|&#62;)/g;function r(B){return B.replace(i,"\\lt ").replace(n,"\\gt ")}var f=[["$","$"],["\\(","\\)"]];function u(B,$,W){var re=parseInt((MathJax.version||"").split(".")[0]);if(re!==2&&re!==3){o.warn("No MathJax version:",MathJax.version);return}var Q,Z,K,le,fe=function(){return Z=o.extendDeepAll({},MathJax.Hub.config),K=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:f},displayAlign:"left"})},ue=function(){Z=o.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=f},V=function(){if(Q=MathJax.Hub.config.menuSettings.renderer,Q!=="SVG")return MathJax.Hub.setRenderer("SVG")},j=function(){Q=MathJax.config.startup.output,Q!=="svg"&&(MathJax.config.startup.output="svg")},ee=function(){var oe="math-output-"+o.randstr({},64);le=s.select("body").append("div").attr({id:oe}).style({visibility:"hidden",position:"absolute","font-size":$.fontSize+"px"}).text(r(B));var se=le.node();return re===2?MathJax.Hub.Typeset(se):MathJax.typeset([se])},q=function(){var oe=le.select(re===2?".MathJax_SVG":".MathJax"),se=!oe.empty()&&le.select("svg").node();if(!se)o.log("There was an error in the tex syntax.",B),W();else{var me=se.getBoundingClientRect(),ce;re===2?ce=s.select("body").select("#MathJax_SVG_glyphs"):ce=oe.select("defs"),W(oe,ce,me)}le.remove()},X=function(){if(Q!=="SVG")return MathJax.Hub.setRenderer(Q)},J=function(){Q!=="svg"&&(MathJax.config.startup.output=Q)},ie=function(){return K!==void 0&&(MathJax.Hub.processSectionDelay=K),MathJax.Hub.Config(Z)},ne=function(){MathJax.config=Z};re===2?MathJax.Hub.Queue(fe,V,ee,q,X,ie):re===3&&(ue(),j(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ee(),q(),J(),ne()}))}var l={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},m={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},b="\u200B",g=["http:","https:","mailto:","",void 0,":"],_=F.NEWLINES=/(\r\n?|\n)/g,p=/(<[^<>]*>)/,A=/<(\/?)([^ >]*)(\s+(.*))?>/i,c=/<br(\s+.*)?>/i;F.BR_TAG_ALL=/<br(\s+.*)?>/gi;var S=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,T=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,w=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function v(B,$){if(!B)return null;var W=B.match($),re=W&&(W[3]||W[4]);return re&&L(re)}var C=/(^|;)\s*color:/;F.plainText=function(B,$){$=$||{};for(var W=$.len!==void 0&&$.len!==-1?$.len:1/0,re=$.allowedTags!==void 0?$.allowedTags:["br"],Q="...",Z=Q.length,K=B.split(p),le=[],fe="",ue=0,V=0;V<K.length;V++){var j=K[V],ee=j.match(A),q=ee&&ee[2].toLowerCase();if(q)re.indexOf(q)!==-1&&(le.push(j),fe=q);else{var X=j.length;if(ue+X<W)le.push(j),ue+=X;else if(ue<W){var J=W-ue;fe&&(fe!=="br"||J<=Z||X<=Z)&&le.pop(),W>Z?le.push(j.substr(0,J-Z)+Q):le.push(j.substr(0,J));break}fe=""}}return le.join("")};var M={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},E=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function L(B){return B.replace(E,function($,W){var re;return W.charAt(0)==="#"?re=z(W.charAt(1)==="x"?parseInt(W.substr(2),16):parseInt(W.substr(1),10)):re=M[W],re||$})}F.convertEntities=L;function z(B){if(!(B>1114111)){var $=String.fromCodePoint;if($)return $(B);var W=String.fromCharCode;return B<=65535?W(B):W((B>>10)+55232,B%1024+56320)}}function O(B,$){$=$.replace(_," ");var W=!1,re=[],Q,Z=-1;function K(){Z++;var pe=document.createElementNS(y.svg,"tspan");s.select(pe).attr({class:"line",dy:Z*t+"em"}),B.appendChild(pe),Q=pe;var xe=re;if(re=[{node:pe}],xe.length>1)for(var Se=1;Se<xe.length;Se++)le(xe[Se])}function le(pe){var xe=pe.type,Se={},Ae;if(xe==="a"){Ae="a";var Ce=pe.target,Ee=pe.href,Oe=pe.popup;Ee&&(Se={"xlink:xlink:show":Ce==="_blank"||Ce.charAt(0)!=="_"?"new":"replace",target:Ce,"xlink:xlink:href":Ee},Oe&&(Se.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Oe+'");return false;'))}else Ae="tspan";pe.style&&(Se.style=pe.style);var _e=document.createElementNS(y.svg,Ae);if(xe==="sup"||xe==="sub"){fe(Q,b),Q.appendChild(_e);var Re=document.createElementNS(y.svg,"tspan");fe(Re,b),s.select(Re).attr("dy",d[xe]),Se.dy=m[xe],Q.appendChild(_e),Q.appendChild(Re)}else Q.appendChild(_e);s.select(_e).attr(Se),Q=pe.node=_e,re.push(pe)}function fe(pe,xe){pe.appendChild(document.createTextNode(xe))}function ue(pe){if(re.length===1){o.log("Ignoring unexpected end tag </"+pe+">.",$);return}var xe=re.pop();pe!==xe.type&&o.log("Start tag <"+xe.type+"> doesnt match end tag <"+pe+">. Pretending it did match.",$),Q=re[re.length-1].node}var V=c.test($);V?K():(Q=B,re=[{node:B}]);for(var j=$.split(p),ee=0;ee<j.length;ee++){var q=j[ee],X=q.match(A),J=X&&X[2].toLowerCase(),ie=l[J];if(J==="br")K();else if(ie===void 0)fe(Q,L(q));else if(X[1])ue(J);else{var ne=X[4],oe={type:J},se=v(ne,S);if(se?(se=se.replace(C,"$1 fill:"),ie&&(se+=";"+ie)):ie&&(se=ie),se&&(oe.style=se),J==="a"){W=!0;var me=v(ne,T);if(me){var ce=R(me);ce&&(oe.href=ce,oe.target=v(ne,x)||"_blank",oe.popup=v(ne,w))}}le(oe)}}return W}function R(B){var $=encodeURI(decodeURI(B)),W=document.createElement("a"),re=document.createElement("a");W.href=B,re.href=$;var Q=W.protocol,Z=re.protocol;return g.indexOf(Q)!==-1&&g.indexOf(Z)!==-1?$:""}F.sanitizeHTML=function($){$=$.replace(_," ");for(var W=document.createElement("p"),re=W,Q=[],Z=$.split(p),K=0;K<Z.length;K++){var le=Z[K],fe=le.match(A),ue=fe&&fe[2].toLowerCase();if(ue in l)if(fe[1])Q.length&&(re=Q.pop());else{var V=fe[4],j=v(V,S),ee=j?{style:j}:{};if(ue==="a"){var q=v(V,T);if(q){var X=R(q);if(X){ee.href=X;var J=v(V,x);J&&(ee.target=J)}}}var ie=document.createElement(ue);re.appendChild(ie),s.select(ie).attr(ee),re=ie,Q.push(ie)}else re.appendChild(document.createTextNode(L(le)))}var ne="innerHTML";return W[ne]},F.lineCount=function($){return $.selectAll("tspan.line").size()||1},F.positionText=function($,W,re){return $.each(function(){var Q=s.select(this);function Z(fe,ue){return ue===void 0?(ue=Q.attr(fe),ue===null&&(Q.attr(fe,0),ue=0)):Q.attr(fe,ue),ue}var K=Z("x",W),le=Z("y",re);this.nodeName==="text"&&Q.selectAll("tspan.line").attr({x:K,y:le})})};function D(B,$,W){var re=W.horizontalAlign,Q=W.verticalAlign||"top",Z=B.node().getBoundingClientRect(),K=$.node().getBoundingClientRect(),le,fe,ue;return Q==="bottom"?fe=function(){return Z.bottom-le.height}:Q==="middle"?fe=function(){return Z.top+(Z.height-le.height)/2}:fe=function(){return Z.top},re==="right"?ue=function(){return Z.right-le.width}:re==="center"?ue=function(){return Z.left+(Z.width-le.width)/2}:ue=function(){return Z.left},function(){le=this.node().getBoundingClientRect();var V=ue()-K.left,j=fe()-K.top,ee=W.gd||{};if(W.gd){ee._fullLayout._calcInverseTransform(ee);var q=o.apply3DTransform(ee._fullLayout._invTransform)(V,j);V=q[0],j=q[1]}return this.style({top:j+"px",left:V+"px","z-index":1e3}),this}}var H="1px ";F.makeTextShadow=function(B){var $=H,W=H,re=H;return $+W+re+B+", -"+$+"-"+W+re+B+", "+$+"-"+W+re+B+", -"+$+W+re+B},F.makeEditable=function(B,$){var W=$.gd,re=$.delegate,Q=s.dispatch("edit","input","cancel"),Z=re||B;if(B.style({"pointer-events":re?"none":"all"}),B.size()!==1)throw new Error("boo");function K(){fe(),B.style({opacity:0});var ue=Z.attr("class"),V;ue?V="."+ue.split(" ")[0]+"-math-group":V="[class*=-math-group]",V&&s.select(B.node().parentNode).select(V).style({opacity:0})}function le(ue){var V=ue.node(),j=document.createRange();j.selectNodeContents(V);var ee=window.getSelection();ee.removeAllRanges(),ee.addRange(j),V.focus()}function fe(){var ue=s.select(W),V=ue.select(".svg-container"),j=V.append("div"),ee=B.node().style,q=parseFloat(ee.fontSize||12),X=$.text;X===void 0&&(X=B.attr("data-unformatted")),j.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ee.fontFamily||"Arial","font-size":q,color:$.fill||ee.fill||"black",opacity:1,"background-color":$.background||"transparent",outline:"#ffffff33 1px solid",margin:[-q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(X).call(D(B,V,$)).on("blur",function(){W._editing=!1,B.text(this.textContent).style({opacity:1});var J=s.select(this).attr("class"),ie;J?ie="."+J.split(" ")[0]+"-math-group":ie="[class*=-math-group]",ie&&s.select(B.node().parentNode).select(ie).style({opacity:0});var ne=this.textContent;s.select(this).transition().duration(0).remove(),s.select(document).on("mouseup",null),Q.edit.call(B,ne)}).on("focus",function(){var J=this;W._editing=!0,s.select(document).on("mouseup",function(){if(s.event.target===J)return!1;document.activeElement===j.node()&&j.node().blur()})}).on("keyup",function(){s.event.which===27?(W._editing=!1,B.style({opacity:1}),s.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Q.cancel.call(B,this.textContent)):(Q.input.call(B,this.textContent),s.select(this).call(D(B,V,$)))}).on("keydown",function(){s.event.which===13&&this.blur()}).call(le)}return $.immediate?K():Z.on("click",K),s.rebind(B,Q,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(e,I,F){var s={};F.throttle=function(y,t,a){var i=s[y],n=Date.now();if(!i){for(var r in s)s[r].ts<n-6e4&&delete s[r];i=s[y]={ts:0,timer:null}}o(i);function f(){a(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}if(n>i.ts+t){f();return}i.timer=setTimeout(function(){f(),i.timer=null},t)},F.done=function(h){var y=s[h];return!y||!y.timer?Promise.resolve():new Promise(function(t){var a=y.onDone;y.onDone=function(){a&&a(),t(),y.onDone=null}})},F.clear=function(h){if(h)o(s[h]),delete s[h];else for(var y in s)F.clear(y)};function o(h){h&&h.timer!==null&&(clearTimeout(h.timer),h.timer=null)}},{}],531:[function(e,I,F){var s=e("fast-isnumeric");I.exports=function(h,y){if(h>0)return Math.log(h)/Math.LN10;var t=Math.log(Math.min(y[0],y[1]))/Math.LN10;return s(t)||(t=Math.log(Math.max(y[0],y[1]))/Math.LN10-6),t}},{"fast-isnumeric":190}],532:[function(e,I,F){var s=I.exports={},o=e("../plots/geo/constants").locationmodeToLayer,h=e("topojson-client").feature;s.getTopojsonName=function(y){return[y.scope.replace(/ /g,"-"),"_",y.resolution.toString(),"m"].join("")},s.getTopojsonPath=function(y,t){return y+t+".json"},s.getTopojsonFeatures=function(y,t){var a=o[y.locationmode],i=t.objects[a];return h(t,i).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(e,I,F){I.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(e,I,F){I.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(e,I,F){var s=e("../registry");I.exports=function(h){for(var y=s.layoutArrayContainers,t=s.layoutArrayRegexes,a=h.split("[")[0],i,n,r=0;r<t.length;r++)if(n=h.match(t[r]),n&&n.index===0){i=n[0];break}if(i||(i=y[y.indexOf(a)]),!i)return!1;var f=h.substr(i.length);return f?(n=f.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),n?{array:i,index:Number(n[1]),property:n[3]||""}:!1):{array:i,index:"",property:""}}},{"../registry":638}],536:[function(e,I,F){var s=e("../lib"),o=s.extendFlat,h=s.isPlainObject,y={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},t={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=y.flags.slice().concat(["fullReplot"]),i=t.flags.slice().concat("layoutReplot");I.exports={traces:y,layout:t,traceFlags:function(){return n(a)},layoutFlags:function(){return n(i)},update:function(u,l){var m=l.editType;if(m&&m!=="none")for(var d=m.split("+"),b=0;b<d.length;b++)u[d[b]]=!0},overrideAll:r};function n(u){for(var l={},m=0;m<u.length;m++)l[u[m]]=!1;return l}function r(u,l,m){var d=o({},u);for(var b in d){var g=d[b];h(g)&&(d[b]=f(g,l,m,b))}return m==="from-root"&&(d.editType=l),d}function f(u,l,m,d){if(u.valType){var b=o({},u);if(b.editType=l,Array.isArray(u.items)){b.items=new Array(u.items.length);for(var g=0;g<u.items.length;g++)b.items[g]=f(u.items[g],l)}return b}else return r(u,l,d.charAt(0)==="_"?"nested":"from-root")}},{"../lib":503}],537:[function(e,I,F){var s=e("fast-isnumeric"),o=e("gl-mat4/fromQuat"),h=e("../registry"),y=e("../lib"),t=e("../plots/plots"),a=e("../plots/cartesian/axis_ids"),i=e("../components/color"),n=a.cleanId,r=a.getFromTrace,f=h.traceIs;F.clearPromiseQueue=function(c){Array.isArray(c._promises)&&c._promises.length>0&&y.log("Clearing previous rejected promises from queue."),c._promises=[]},F.cleanLayout=function(c){var S,T;c||(c={}),c.xaxis1&&(c.xaxis||(c.xaxis=c.xaxis1),delete c.xaxis1),c.yaxis1&&(c.yaxis||(c.yaxis=c.yaxis1),delete c.yaxis1),c.scene1&&(c.scene||(c.scene=c.scene1),delete c.scene1);var x=(t.subplotsRegistry.cartesian||{}).attrRegex,w=(t.subplotsRegistry.polar||{}).attrRegex,v=(t.subplotsRegistry.ternary||{}).attrRegex,C=(t.subplotsRegistry.gl3d||{}).attrRegex,M=Object.keys(c);for(S=0;S<M.length;S++){var E=M[S];if(x&&x.test(E)){var L=c[E];L.anchor&&L.anchor!=="free"&&(L.anchor=n(L.anchor)),L.overlaying&&(L.overlaying=n(L.overlaying)),L.type||(L.isdate?L.type="date":L.islog?L.type="log":L.isdate===!1&&L.islog===!1&&(L.type="linear")),(L.autorange==="withzero"||L.autorange==="tozero")&&(L.autorange=!0,L.rangemode="tozero"),delete L.islog,delete L.isdate,delete L.categories,g(L,"domain")&&delete L.domain,L.autotick!==void 0&&(L.tickmode===void 0&&(L.tickmode=L.autotick?"auto":"linear"),delete L.autotick),l(L)}else if(w&&w.test(E)){var z=c[E];l(z.radialaxis)}else if(v&&v.test(E)){var O=c[E];l(O.aaxis),l(O.baxis),l(O.caxis)}else if(C&&C.test(E)){var R=c[E],D=R.cameraposition;if(Array.isArray(D)&&D[0].length===4){var H=D[0],B=D[1],$=D[2],W=o([],H),re=[];for(T=0;T<3;++T)re[T]=B[T]+$*W[2+4*T];R.camera={eye:{x:re[0],y:re[1],z:re[2]},center:{x:B[0],y:B[1],z:B[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}l(R.xaxis),l(R.yaxis),l(R.zaxis)}}var Q=Array.isArray(c.annotations)?c.annotations.length:0;for(S=0;S<Q;S++){var Z=c.annotations[S];!y.isPlainObject(Z)||(Z.ref&&(Z.ref==="paper"?(Z.xref="paper",Z.yref="paper"):Z.ref==="data"&&(Z.xref="x",Z.yref="y"),delete Z.ref),u(Z,"xref"),u(Z,"yref"))}var K=Array.isArray(c.shapes)?c.shapes.length:0;for(S=0;S<K;S++){var le=c.shapes[S];!y.isPlainObject(le)||(u(le,"xref"),u(le,"yref"))}var fe=Array.isArray(c.images)?c.images.length:0;for(S=0;S<fe;S++){var ue=c.images[S];!y.isPlainObject(ue)||(u(ue,"xref"),u(ue,"yref"))}var V=c.legend;return V&&(V.x>3?(V.x=1.02,V.xanchor="left"):V.x<-2&&(V.x=-.02,V.xanchor="right"),V.y>3?(V.y=1.02,V.yanchor="bottom"):V.y<-2&&(V.y=-.02,V.yanchor="top")),l(c),c.dragmode==="rotate"&&(c.dragmode="orbit"),i.clean(c),c.template&&c.template.layout&&F.cleanLayout(c.template.layout),c};function u(c,S){var T=c[S],x=S.charAt(0);T&&T!=="paper"&&(c[S]=n(T,x,!0))}function l(c){c&&((typeof c.title=="string"||typeof c.title=="number")&&(c.title={text:c.title}),S("titlefont","font"),S("titleposition","position"),S("titleside","side"),S("titleoffset","offset"));function S(T,x){var w=c[T],v=c.title&&c.title[x];w&&!v&&(c.title||(c.title={}),c.title[x]=c[T],delete c[T])}}F.cleanData=function(c){for(var S=0;S<c.length;S++){var T=c[S],x;if(T.type==="histogramy"&&"xbins"in T&&!("ybins"in T)&&(T.ybins=T.xbins,delete T.xbins),T.error_y&&"opacity"in T.error_y){var w=i.defaults,v=T.error_y.color||(f(T,"bar")?i.defaultLine:w[S%w.length]);T.error_y.color=i.addOpacity(i.rgb(v),i.opacity(v)*T.error_y.opacity),delete T.error_y.opacity}if("bardir"in T&&(T.bardir==="h"&&(f(T,"bar")||T.type.substr(0,9)==="histogram")&&(T.orientation="h",F.swapXYData(T)),delete T.bardir),T.type==="histogramy"&&F.swapXYData(T),(T.type==="histogramx"||T.type==="histogramy")&&(T.type="histogram"),"scl"in T&&!("colorscale"in T)&&(T.colorscale=T.scl,delete T.scl),"reversescl"in T&&!("reversescale"in T)&&(T.reversescale=T.reversescl,delete T.reversescl),T.xaxis&&(T.xaxis=n(T.xaxis,"x")),T.yaxis&&(T.yaxis=n(T.yaxis,"y")),f(T,"gl3d")&&T.scene&&(T.scene=t.subplotsRegistry.gl3d.cleanId(T.scene)),!f(T,"pie-like")&&!f(T,"bar-like"))if(Array.isArray(T.textposition))for(x=0;x<T.textposition.length;x++)T.textposition[x]=b(T.textposition[x]);else T.textposition&&(T.textposition=b(T.textposition));var C=h.getModule(T);if(C&&C.colorbar){var M=C.colorbar.container,E=M?T[M]:T;E&&E.colorscale&&(E.colorscale==="YIGnBu"&&(E.colorscale="YlGnBu"),E.colorscale==="YIOrRd"&&(E.colorscale="YlOrRd"))}if(T.type==="surface"&&y.isPlainObject(T.contours)){var L=["x","y","z"];for(x=0;x<L.length;x++){var z=T.contours[L[x]];!y.isPlainObject(z)||(z.highlightColor&&(z.highlightcolor=z.highlightColor,delete z.highlightColor),z.highlightWidth&&(z.highlightwidth=z.highlightWidth,delete z.highlightWidth))}}if(T.type==="candlestick"||T.type==="ohlc"){var O=(T.increasing||{}).showlegend!==!1,R=(T.decreasing||{}).showlegend!==!1,D=m(T.increasing),H=m(T.decreasing);if(D!==!1&&H!==!1){var B=d(D,H,O,R);B&&(T.name=B)}else(D||H)&&!T.name&&(T.name=D||H)}if(Array.isArray(T.transforms)){var $=T.transforms;for(x=0;x<$.length;x++){var W=$[x];if(!!y.isPlainObject(W))switch(W.type){case"filter":W.filtersrc&&(W.target=W.filtersrc,delete W.filtersrc),W.calendar&&(W.valuecalendar||(W.valuecalendar=W.calendar),delete W.calendar);break;case"groupby":if(W.styles=W.styles||W.style,W.styles&&!Array.isArray(W.styles)){var re=W.styles,Q=Object.keys(re);W.styles=[];for(var Z=0;Z<Q.length;Z++)W.styles.push({target:Q[Z],value:re[Q[Z]]})}break}}}g(T,"line")&&delete T.line,"marker"in T&&(g(T.marker,"line")&&delete T.marker.line,g(T,"marker")&&delete T.marker),i.clean(T),T.autobinx&&(delete T.autobinx,delete T.xbins),T.autobiny&&(delete T.autobiny,delete T.ybins),l(T),T.colorbar&&l(T.colorbar),T.marker&&T.marker.colorbar&&l(T.marker.colorbar),T.line&&T.line.colorbar&&l(T.line.colorbar),T.aaxis&&l(T.aaxis),T.baxis&&l(T.baxis)}};function m(c){if(!y.isPlainObject(c))return!1;var S=c.name;return delete c.name,delete c.showlegend,(typeof S=="string"||typeof S=="number")&&String(S)}function d(c,S,T,x){if(T&&!x)return c;if(x&&!T||!c.trim())return S;if(!S.trim())return c;var w=Math.min(c.length,S.length),v;for(v=0;v<w&&c.charAt(v)===S.charAt(v);v++);var C=c.substr(0,v);return C.trim()}function b(c){var S="middle",T="center";return typeof c=="string"&&(c.indexOf("top")!==-1?S="top":c.indexOf("bottom")!==-1&&(S="bottom"),c.indexOf("left")!==-1?T="left":c.indexOf("right")!==-1&&(T="right")),S+" "+T}function g(c,S){return S in c&&typeof c[S]=="object"&&Object.keys(c[S]).length===0}F.swapXYData=function(c){var S;if(y.swapAttrs(c,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(c.z)&&Array.isArray(c.z[0])&&(c.transpose?delete c.transpose:c.transpose=!0),c.error_x&&c.error_y){var T=c.error_y,x="copy_ystyle"in T?T.copy_ystyle:!(T.color||T.thickness||T.width);y.swapAttrs(c,["error_?.copy_ystyle"]),x&&y.swapAttrs(c,["error_?.color","error_?.thickness","error_?.width"])}if(typeof c.hoverinfo=="string"){var w=c.hoverinfo.split("+");for(S=0;S<w.length;S++)w[S]==="x"?w[S]="y":w[S]==="y"&&(w[S]="x");c.hoverinfo=w.join("+")}},F.coerceTraceIndices=function(c,S){if(s(S))return[S];if(!Array.isArray(S)||!S.length)return c.data.map(function(w,v){return v});if(Array.isArray(S)){for(var T=[],x=0;x<S.length;x++)y.isIndex(S[x],c.data.length)?T.push(S[x]):y.warn("trace index (",S[x],") is not a number or is out of bounds");return T}return S},F.manageArrayContainers=function(c,S,T){var x=c.obj,w=c.parts,v=w.length,C=w[v-1],M=s(C);if(M&&S===null){var E=w.slice(0,v-1).join("."),L=y.nestedProperty(x,E).get();L.splice(C,1)}else M&&c.get()===void 0&&c.get()===void 0&&(T[c.astr]=null),c.set(S)};var _=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function p(c){var S=c.search(_);if(S>0)return c.substr(0,S)}F.hasParent=function(c,S){for(var T=p(S);T;){if(T in c)return!0;T=p(T)}return!1};var A=["x","y","z"];F.clearAxisTypes=function(c,S,T){for(var x=0;x<S.length;x++)for(var w=c._fullData[x],v=0;v<3;v++){var C=r(c,w,A[v]);if(C&&C.type!=="log"){var M=C._name,E=C._id.substr(1);if(E.substr(0,5)==="scene"){if(T[E]!==void 0)continue;M=E+"."+M}var L=M+".type";T[M]===void 0&&T[L]===void 0&&y.nestedProperty(c.layout,L).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(e,I,F){var s=e("./plot_api");F._doPlot=s._doPlot,F.newPlot=s.newPlot,F.restyle=s.restyle,F.relayout=s.relayout,F.redraw=s.redraw,F.update=s.update,F._guiRestyle=s._guiRestyle,F._guiRelayout=s._guiRelayout,F._guiUpdate=s._guiUpdate,F._storeDirectGUIEdit=s._storeDirectGUIEdit,F.react=s.react,F.extendTraces=s.extendTraces,F.prependTraces=s.prependTraces,F.addTraces=s.addTraces,F.deleteTraces=s.deleteTraces,F.moveTraces=s.moveTraces,F.purge=s.purge,F.addFrames=s.addFrames,F.deleteFrames=s.deleteFrames,F.animate=s.animate,F.setPlotConfig=s.setPlotConfig,F.toImage=e("./to_image"),F.validate=e("./validate"),F.downloadImage=e("../snapshot/download");var o=e("./template_api");F.makeTemplate=o.makeTemplate,F.validateTemplate=o.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(e,I,F){var s=e("../lib/is_plain_object"),o=e("../lib/noop"),h=e("../lib/loggers"),y=e("../lib/search").sorterAsc,t=e("../registry");F.containerArrayMatch=e("./container_array_match");var a=F.isAddVal=function(r){return r==="add"||s(r)},i=F.isRemoveVal=function(r){return r===null||r==="remove"};F.applyContainerArrayChanges=function(r,f,u,l,m){var d=f.astr,b=t.getComponentMethod(d,"supplyLayoutDefaults"),g=t.getComponentMethod(d,"draw"),_=t.getComponentMethod(d,"drawOne"),p=l.replot||l.recalc||b===o||g===o,A=r.layout,c=r._fullLayout;if(u[""]){Object.keys(u).length>1&&h.warn("Full array edits are incompatible with other edits",d);var S=u[""][""];if(i(S))f.set(null);else if(Array.isArray(S))f.set(S);else return h.warn("Unrecognized full array edit value",d,S),!0;return p?!1:(b(A,c),g(r),!0)}var T=Object.keys(u).map(Number).sort(y),x=f.get(),w=x||[],v=m(c,d).get(),C=[],M=-1,E=w.length,L,z,O,R,D,H,B,$;for(L=0;L<T.length;L++){if(O=T[L],R=u[O],D=Object.keys(R),H=R[""],B=a(H),O<0||O>w.length-(B?0:1)){h.warn("index out of range",d,O);continue}if(H!==void 0)D.length>1&&h.warn("Insertion & removal are incompatible with edits to the same index.",d,O),i(H)?C.push(O):B?(H==="add"&&(H={}),w.splice(O,0,H),v&&v.splice(O,0,{})):h.warn("Unrecognized full object edit value",d,O,H),M===-1&&(M=O);else for(z=0;z<D.length;z++)$=d+"["+O+"].",m(w[O],D[z],$).set(R[D[z]])}for(L=C.length-1;L>=0;L--)w.splice(C[L],1),v&&v.splice(C[L],1);if(w.length?x||f.set(w):f.set(null),p)return!1;if(b(A,c),_!==o){var W;if(M===-1)W=T;else{for(E=Math.max(w.length,E),W=[],L=0;L<T.length&&(O=T[L],!(O>=M));L++)W.push(O);for(L=M;L<E;L++)W.push(L)}for(L=0;L<W.length;L++)_(r,W[L])}else g(r);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("has-hover"),y=e("../lib"),t=y.nestedProperty,a=e("../lib/events"),i=e("../lib/queue"),n=e("../registry"),r=e("./plot_schema"),f=e("../plots/plots"),u=e("../plots/cartesian/axes"),l=e("../components/drawing"),m=e("../components/color"),d=e("../plots/cartesian/graph_interact").initInteractions,b=e("../constants/xmlns_namespaces"),g=e("../plots/cartesian/select").clearSelect,_=e("./plot_config").dfltConfig,p=e("./manage_arrays"),A=e("./helpers"),c=e("./subroutines"),S=e("./edit_types"),T=e("../plots/cartesian/constants").AX_NAME_PATTERN,x=0,w=5;function v(Pe,We,Qe,ut){var It;if(Pe=y.getGraphDiv(Pe),a.init(Pe),y.isPlainObject(We)){var Tt=We;We=Tt.data,Qe=Tt.layout,ut=Tt.config,It=Tt.frames}var Bt=a.triggerHandler(Pe,"plotly_beforeplot",[We,Qe,ut]);if(Bt===!1)return Promise.reject();!We&&!Qe&&!y.isPlotDiv(Pe)&&y.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Pe);function rr(){if(It)return F.addFrames(Pe,It)}z(Pe,ut),Qe||(Qe={}),s.select(Pe).classed("js-plotly-plot",!0),l.makeTester(),Array.isArray(Pe._promises)||(Pe._promises=[]);var Ut=(Pe.data||[]).length===0&&Array.isArray(We);Array.isArray(We)&&(A.cleanData(We),Ut?Pe.data=We:Pe.data.push.apply(Pe.data,We),Pe.empty=!1),(!Pe.layout||Ut)&&(Pe.layout=A.cleanLayout(Qe)),f.supplyDefaults(Pe);var Qt=Pe._fullLayout,ar=Qt._has("cartesian");Qt._replotting=!0,(Ut||Qt._shouldCreateBgLayer)&&(Ke(Pe),Qt._shouldCreateBgLayer&&delete Qt._shouldCreateBgLayer),l.initGradients(Pe),l.initPatterns(Pe),Ut&&u.saveShowSpikeInitial(Pe);var nr=!Pe.calcdata||Pe.calcdata.length!==(Pe._fullData||[]).length;nr&&f.doCalcdata(Pe);for(var cr=0;cr<Pe.calcdata.length;cr++)Pe.calcdata[cr][0].trace=Pe._fullData[cr];Pe._context.responsive?Pe._responsiveChartHandler||(Pe._responsiveChartHandler=function(){y.isHidden(Pe)||f.resize(Pe)},window.addEventListener("resize",Pe._responsiveChartHandler)):y.clearResponsive(Pe);var Kr=y.extendFlat({},Qt._size),yn=0;function Qr(){for(var Ge=Qt._basePlotModules,Ye=0;Ye<Ge.length;Ye++)Ge[Ye].drawFramework&&Ge[Ye].drawFramework(Pe);!Qt._glcanvas&&Qt._has("gl")&&(Qt._glcanvas=Qt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(pt){return pt.key}),Qt._glcanvas.enter().append("canvas").attr("class",function(pt){return"gl-canvas gl-canvas-"+pt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var qe=Pe._context.plotGlPixelRatio;if(Qt._glcanvas){Qt._glcanvas.attr("width",Qt.width*qe).attr("height",Qt.height*qe).style("width",Qt.width+"px").style("height",Qt.height+"px");var at=Qt._glcanvas.data()[0].regl;if(at&&(Math.floor(Qt.width*qe)!==at._gl.drawingBufferWidth||Math.floor(Qt.height*qe)!==at._gl.drawingBufferHeight)){var et="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(yn)y.error(et);else return y.log(et+" Clearing graph and plotting again."),f.cleanPlot([],{},Pe._fullData,Qt),f.supplyDefaults(Pe),Qt=Pe._fullLayout,f.doCalcdata(Pe),yn++,Qr()}}return Qt.modebar.orientation==="h"?Qt._modebardiv.style("height",null).style("width","100%"):Qt._modebardiv.style("width",null).style("height",Qt.height+"px"),f.previousPromises(Pe)}function st(){if(f.clearAutoMarginIds(Pe),c.drawMarginPushers(Pe),u.allowAutoMargin(Pe),Qt._has("pie"))for(var Ge=Pe._fullData,Ye=0;Ye<Ge.length;Ye++){var qe=Ge[Ye];qe.type==="pie"&&qe.automargin&&f.allowAutoMargin(Pe,"pie."+qe.uid+".automargin")}return f.doAutoMargin(Pe),f.previousPromises(Pe)}function Gt(){if(!!f.didMarginChange(Kr,Qt._size))return y.syncOrAsync([st,c.layoutStyles],Pe)}function Zt(){if(!nr){Ht();return}return y.syncOrAsync([n.getComponentMethod("shapes","calcAutorange"),n.getComponentMethod("annotations","calcAutorange"),Ht],Pe)}function Ht(){Pe._transitioning||(c.doAutoRangeAndConstraints(Pe),Ut&&u.saveRangeInitial(Pe),n.getComponentMethod("rangeslider","calcAutorange")(Pe))}function _r(){return u.draw(Pe,Ut?"":"redraw")}var it=[f.previousPromises,rr,Qr,st,Gt];ar&&it.push(Zt),it.push(c.layoutStyles),ar&&it.push(_r,function(Ye){Ye._fullLayout._insideTickLabelsAutorange&&oe(Ye,Ye._fullLayout._insideTickLabelsAutorange).then(function(){Ye._fullLayout._insideTickLabelsAutorange=void 0})}),it.push(c.drawData,c.finalDraw,d,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,Te,f.previousPromises);function Te(Ge){Ge._fullLayout._insideTickLabelsAutorange&&Ut&&u.saveRangeInitial(Ge,!0)}var ke=y.syncOrAsync(it,Pe);return(!ke||!ke.then)&&(ke=Promise.resolve()),ke.then(function(){return C(Pe),Pe})}function C(Pe){var We=Pe._fullLayout;We._redrawFromAutoMarginCount?We._redrawFromAutoMarginCount--:Pe.emit("plotly_afterplot")}function M(Pe){return y.extendFlat(_,Pe)}function E(Pe,We){try{Pe._fullLayout._paper.style("background",We)}catch(Qe){y.error(Qe)}}function L(Pe,We){var Qe=m.combine(We,"white");E(Pe,Qe)}function z(Pe,We){if(!Pe._context){Pe._context=y.extendDeep({},_);var Qe=s.select("base");Pe._context._baseUrl=Qe.size()&&Qe.attr("href")?window.location.href.split("#")[0]:""}var ut=Pe._context,It,Tt,Bt;if(We){for(Tt=Object.keys(We),It=0;It<Tt.length;It++)Bt=Tt[It],!(Bt==="editable"||Bt==="edits")&&Bt in ut&&(Bt==="setBackground"&&We[Bt]==="opaque"?ut[Bt]=L:ut[Bt]=We[Bt]);We.plot3dPixelRatio&&!ut.plotGlPixelRatio&&(ut.plotGlPixelRatio=ut.plot3dPixelRatio);var rr=We.editable;if(rr!==void 0)for(ut.editable=rr,Tt=Object.keys(ut.edits),It=0;It<Tt.length;It++)ut.edits[Tt[It]]=rr;if(We.edits)for(Tt=Object.keys(We.edits),It=0;It<Tt.length;It++)Bt=Tt[It],Bt in ut.edits&&(ut.edits[Bt]=We.edits[Bt]);ut._exportedPlot=We._exportedPlot}ut.staticPlot&&(ut.editable=!1,ut.edits={},ut.autosizable=!1,ut.scrollZoom=!1,ut.doubleClick=!1,ut.showTips=!1,ut.showLink=!1,ut.displayModeBar=!1),ut.displayModeBar==="hover"&&!h&&(ut.displayModeBar=!0),(ut.setBackground==="transparent"||typeof ut.setBackground!="function")&&(ut.setBackground=E),ut._hasZeroHeight=ut._hasZeroHeight||Pe.clientHeight===0,ut._hasZeroWidth=ut._hasZeroWidth||Pe.clientWidth===0;var Ut=ut.scrollZoom,Qt=ut._scrollZoom={};if(Ut===!0)Qt.cartesian=1,Qt.gl3d=1,Qt.geo=1,Qt.mapbox=1;else if(typeof Ut=="string"){var ar=Ut.split("+");for(It=0;It<ar.length;It++)Qt[ar[It]]=1}else Ut!==!1&&(Qt.gl3d=1,Qt.geo=1,Qt.mapbox=1)}function O(Pe){if(Pe=y.getGraphDiv(Pe),!y.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe);return A.cleanData(Pe.data),A.cleanLayout(Pe.layout),Pe.calcdata=void 0,F._doPlot(Pe).then(function(){return Pe.emit("plotly_redraw"),Pe})}function R(Pe,We,Qe,ut){return Pe=y.getGraphDiv(Pe),f.cleanPlot([],{},Pe._fullData||[],Pe._fullLayout||{}),f.purge(Pe),F._doPlot(Pe,We,Qe,ut)}function D(Pe,We){var Qe=We+1,ut=[],It,Tt;for(It=0;It<Pe.length;It++)Tt=Pe[It],Tt<0?ut.push(Qe+Tt):ut.push(Tt);return ut}function H(Pe,We,Qe){var ut,It;for(ut=0;ut<We.length;ut++){if(It=We[ut],It!==parseInt(It,10))throw new Error("all values in "+Qe+" must be integers");if(It>=Pe.data.length||It<-Pe.data.length)throw new Error(Qe+" must be valid indices for gd.data.");if(We.indexOf(It,ut+1)>-1||It>=0&&We.indexOf(-Pe.data.length+It)>-1||It<0&&We.indexOf(Pe.data.length+It)>-1)throw new Error("each index in "+Qe+" must be unique.")}}function B(Pe,We,Qe){if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array.");if(typeof We=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(We)||(We=[We]),H(Pe,We,"currentIndices"),typeof Qe!="undefined"&&!Array.isArray(Qe)&&(Qe=[Qe]),typeof Qe!="undefined"&&H(Pe,Qe,"newIndices"),typeof Qe!="undefined"&&We.length!==Qe.length)throw new Error("current and new indices must be of equal length.")}function $(Pe,We,Qe){var ut,It;if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array.");if(typeof We=="undefined")throw new Error("traces must be defined.");for(Array.isArray(We)||(We=[We]),ut=0;ut<We.length;ut++)if(It=We[ut],typeof It!="object"||Array.isArray(It)||It===null)throw new Error("all values in traces array must be non-array objects");if(typeof Qe!="undefined"&&!Array.isArray(Qe)&&(Qe=[Qe]),typeof Qe!="undefined"&&Qe.length!==We.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function W(Pe,We,Qe,ut){var It=y.isPlainObject(ut);if(!Array.isArray(Pe.data))throw new Error("gd.data must be an array");if(!y.isPlainObject(We))throw new Error("update must be a key:value object");if(typeof Qe=="undefined")throw new Error("indices must be an integer or array of integers");H(Pe,Qe,"indices");for(var Tt in We){if(!Array.isArray(We[Tt])||We[Tt].length!==Qe.length)throw new Error("attribute "+Tt+" must be an array of length equal to indices array length");if(It&&(!(Tt in ut)||!Array.isArray(ut[Tt])||ut[Tt].length!==We[Tt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function re(Pe,We,Qe,ut){var It=y.isPlainObject(ut),Tt=[],Bt,rr,Ut,Qt,ar;Array.isArray(Qe)||(Qe=[Qe]),Qe=D(Qe,Pe.data.length-1);for(var nr in We)for(var cr=0;cr<Qe.length;cr++){if(Bt=Pe.data[Qe[cr]],Ut=t(Bt,nr),rr=Ut.get(),Qt=We[nr][cr],!y.isArrayOrTypedArray(Qt))throw new Error("attribute: "+nr+" index: "+cr+" must be an array");if(!y.isArrayOrTypedArray(rr))throw new Error("cannot extend missing or non-array attribute: "+nr);if(rr.constructor!==Qt.constructor)throw new Error("cannot extend array with an array of a different type: "+nr);ar=It?ut[nr][cr]:ut,o(ar)||(ar=-1),Tt.push({prop:Ut,target:rr,insert:Qt,maxp:Math.floor(ar)})}return Tt}function Q(Pe,We,Qe,ut,It){W(Pe,We,Qe,ut);for(var Tt=re(Pe,We,Qe,ut),Bt={},rr={},Ut=0;Ut<Tt.length;Ut++){var Qt=Tt[Ut].prop,ar=Tt[Ut].maxp,nr=It(Tt[Ut].target,Tt[Ut].insert,ar);Qt.set(nr[0]),Array.isArray(Bt[Qt.astr])||(Bt[Qt.astr]=[]),Bt[Qt.astr].push(nr[1]),Array.isArray(rr[Qt.astr])||(rr[Qt.astr]=[]),rr[Qt.astr].push(Tt[Ut].target.length)}return{update:Bt,maxPoints:rr}}function Z(Pe,We){var Qe=new Pe.constructor(Pe.length+We.length);return Qe.set(Pe),Qe.set(We,Pe.length),Qe}function K(Pe,We,Qe,ut){Pe=y.getGraphDiv(Pe);function It(Ut,Qt,ar){var nr,cr;if(y.isTypedArray(Ut))if(ar<0){var Kr=new Ut.constructor(0),yn=Z(Ut,Qt);ar<0?(nr=yn,cr=Kr):(nr=Kr,cr=yn)}else if(nr=new Ut.constructor(ar),cr=new Ut.constructor(Ut.length+Qt.length-ar),ar===Qt.length)nr.set(Qt),cr.set(Ut);else if(ar<Qt.length){var Qr=Qt.length-ar;nr.set(Qt.subarray(Qr)),cr.set(Ut),cr.set(Qt.subarray(0,Qr),Ut.length)}else{var st=ar-Qt.length,Gt=Ut.length-st;nr.set(Ut.subarray(Gt)),nr.set(Qt,st),cr.set(Ut.subarray(0,Gt))}else nr=Ut.concat(Qt),cr=ar>=0&&ar<nr.length?nr.splice(0,nr.length-ar):[];return[nr,cr]}var Tt=Q(Pe,We,Qe,ut,It),Bt=F.redraw(Pe),rr=[Pe,Tt.update,Qe,Tt.maxPoints];return i.add(Pe,F.prependTraces,rr,K,arguments),Bt}function le(Pe,We,Qe,ut){Pe=y.getGraphDiv(Pe);function It(Ut,Qt,ar){var nr,cr;if(y.isTypedArray(Ut))if(ar<=0){var Kr=new Ut.constructor(0),yn=Z(Qt,Ut);ar<0?(nr=yn,cr=Kr):(nr=Kr,cr=yn)}else if(nr=new Ut.constructor(ar),cr=new Ut.constructor(Ut.length+Qt.length-ar),ar===Qt.length)nr.set(Qt),cr.set(Ut);else if(ar<Qt.length){var Qr=Qt.length-ar;nr.set(Qt.subarray(0,Qr)),cr.set(Qt.subarray(Qr)),cr.set(Ut,Qr)}else{var st=ar-Qt.length;nr.set(Qt),nr.set(Ut.subarray(0,st),Qt.length),cr.set(Ut.subarray(st))}else nr=Qt.concat(Ut),cr=ar>=0&&ar<nr.length?nr.splice(ar,nr.length):[];return[nr,cr]}var Tt=Q(Pe,We,Qe,ut,It),Bt=F.redraw(Pe),rr=[Pe,Tt.update,Qe,Tt.maxPoints];return i.add(Pe,F.extendTraces,rr,le,arguments),Bt}function fe(Pe,We,Qe){Pe=y.getGraphDiv(Pe);var ut=[],It=F.deleteTraces,Tt=fe,Bt=[Pe,ut],rr=[Pe,We],Ut,Qt;for($(Pe,We,Qe),Array.isArray(We)||(We=[We]),We=We.map(function(ar){return y.extendFlat({},ar)}),A.cleanData(We),Ut=0;Ut<We.length;Ut++)Pe.data.push(We[Ut]);for(Ut=0;Ut<We.length;Ut++)ut.push(-We.length+Ut);if(typeof Qe=="undefined")return Qt=F.redraw(Pe),i.add(Pe,It,Bt,Tt,rr),Qt;Array.isArray(Qe)||(Qe=[Qe]);try{B(Pe,ut,Qe)}catch(ar){throw Pe.data.splice(Pe.data.length-We.length,We.length),ar}return i.startSequence(Pe),i.add(Pe,It,Bt,Tt,rr),Qt=F.moveTraces(Pe,ut,Qe),i.stopSequence(Pe),Qt}function ue(Pe,We){Pe=y.getGraphDiv(Pe);var Qe=[],ut=F.addTraces,It=ue,Tt=[Pe,Qe,We],Bt=[Pe,We],rr,Ut;if(typeof We=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(We)||(We=[We]),H(Pe,We,"indices"),We=D(We,Pe.data.length-1),We.sort(y.sorterDes),rr=0;rr<We.length;rr+=1)Ut=Pe.data.splice(We[rr],1)[0],Qe.push(Ut);var Qt=F.redraw(Pe);return i.add(Pe,ut,Tt,It,Bt),Qt}function V(Pe,We,Qe){Pe=y.getGraphDiv(Pe);var ut=[],It=[],Tt=V,Bt=V,rr=[Pe,Qe,We],Ut=[Pe,We,Qe],Qt;if(B(Pe,We,Qe),We=Array.isArray(We)?We:[We],typeof Qe=="undefined")for(Qe=[],Qt=0;Qt<We.length;Qt++)Qe.push(-We.length+Qt);for(Qe=Array.isArray(Qe)?Qe:[Qe],We=D(We,Pe.data.length-1),Qe=D(Qe,Pe.data.length-1),Qt=0;Qt<Pe.data.length;Qt++)We.indexOf(Qt)===-1&&ut.push(Pe.data[Qt]);for(Qt=0;Qt<We.length;Qt++)It.push({newIndex:Qe[Qt],trace:Pe.data[We[Qt]]});for(It.sort(function(nr,cr){return nr.newIndex-cr.newIndex}),Qt=0;Qt<It.length;Qt+=1)ut.splice(It[Qt].newIndex,0,It[Qt].trace);Pe.data=ut;var ar=F.redraw(Pe);return i.add(Pe,Tt,rr,Bt,Ut),ar}function j(Pe,We,Qe,ut){Pe=y.getGraphDiv(Pe),A.clearPromiseQueue(Pe);var It={};if(typeof We=="string")It[We]=Qe;else if(y.isPlainObject(We))It=y.extendFlat({},We),ut===void 0&&(ut=Qe);else return y.warn("Restyle fail.",We,Qe,ut),Promise.reject();Object.keys(It).length&&(Pe.changed=!0);var Tt=A.coerceTraceIndices(Pe,ut),Bt=ie(Pe,It,Tt),rr=Bt.flags;rr.calc&&(Pe.calcdata=void 0),rr.clearAxisTypes&&A.clearAxisTypes(Pe,Tt,{});var Ut=[];rr.fullReplot?Ut.push(F._doPlot):(Ut.push(f.previousPromises),f.supplyDefaults(Pe),rr.markerSize&&(f.doCalcdata(Pe),me(Ut)),rr.style&&Ut.push(c.doTraceStyle),rr.colorbars&&Ut.push(c.doColorBars),Ut.push(C)),Ut.push(f.rehover,f.redrag),i.add(Pe,j,[Pe,Bt.undoit,Bt.traces],j,[Pe,Bt.redoit,Bt.traces]);var Qt=y.syncOrAsync(Ut,Pe);return(!Qt||!Qt.then)&&(Qt=Promise.resolve()),Qt.then(function(){return Pe.emit("plotly_restyle",Bt.eventData),Pe})}function ee(Pe){return Pe===void 0?null:Pe}function q(Pe,We){return We?function(Qe,ut,It){var Tt=t(Qe,ut),Bt=Tt.set;return Tt.set=function(rr){var Ut=(It||"")+ut;X(Ut,Tt.get(),rr,Pe),Bt(rr)},Tt}:t}function X(Pe,We,Qe,ut){if(Array.isArray(We)||Array.isArray(Qe))for(var It=Array.isArray(We)?We:[],Tt=Array.isArray(Qe)?Qe:[],Bt=Math.max(It.length,Tt.length),rr=0;rr<Bt;rr++)X(Pe+"["+rr+"]",It[rr],Tt[rr],ut);else if(y.isPlainObject(We)||y.isPlainObject(Qe)){var Ut=y.isPlainObject(We)?We:{},Qt=y.isPlainObject(Qe)?Qe:{},ar=y.extendFlat({},Ut,Qt);for(var nr in ar)X(Pe+"."+nr,Ut[nr],Qt[nr],ut)}else ut[Pe]===void 0&&(ut[Pe]=ee(We))}function J(Pe,We,Qe){for(var ut in Qe){var It=t(Pe,ut);X(ut,It.get(),Qe[ut],We)}}function ie(Pe,We,Qe){var ut=Pe._fullLayout,It=Pe._fullData,Tt=Pe.data,Bt=ut._guiEditing,rr=q(ut._preGUI,Bt),Ut=y.extendDeepAll({},We),Qt;ne(We);var ar=S.traceFlags(),nr={},cr={},Kr;function yn(){return Qe.map(function(){})}function Qr(Jt){var hr=u.id2name(Jt);Kr.indexOf(hr)===-1&&Kr.push(hr)}function st(Jt){return"LAYOUT"+Jt+".autorange"}function Gt(Jt){return"LAYOUT"+Jt+".range"}function Zt(Jt){for(var hr=Jt;hr<It.length;hr++)if(It[hr]._input===Tt[Jt])return It[hr]}function Ht(Jt,hr,Dr){if(Array.isArray(Jt)){Jt.forEach(function(tr){Ht(tr,hr,Dr)});return}if(!(Jt in We||A.hasParent(We,Jt))){var Gr;if(Jt.substr(0,6)==="LAYOUT")Gr=rr(Pe.layout,Jt.replace("LAYOUT",""));else{var Rr=Qe[Dr],Ct=ut._tracePreGUI[Zt(Rr)._fullInput.uid];Gr=q(Ct,Bt)(Tt[Rr],Jt)}Jt in cr||(cr[Jt]=yn()),cr[Jt][Dr]===void 0&&(cr[Jt][Dr]=ee(Gr.get())),hr!==void 0&&Gr.set(hr)}}function _r(Jt){return function(hr){return It[hr][Jt]}}function it(Jt){return function(hr,Dr){return hr===!1?It[Qe[Dr]][Jt]:null}}for(var Te in We){if(A.hasParent(We,Te))throw new Error("cannot set "+Te+" and a parent attribute simultaneously");var ke=We[Te],Ge,Ye,qe,at,et,pt;if((Te==="autobinx"||Te==="autobiny")&&(Te=Te.charAt(Te.length-1)+"bins",Array.isArray(ke)?ke=ke.map(it(Te)):ke===!1?ke=Qe.map(_r(Te)):ke=null),nr[Te]=ke,Te.substr(0,6)==="LAYOUT"){qe=rr(Pe.layout,Te.replace("LAYOUT","")),cr[Te]=[ee(qe.get())],qe.set(Array.isArray(ke)?ke[0]:ke),ar.calc=!0;continue}for(cr[Te]=yn(),Qt=0;Qt<Qe.length;Qt++){Ge=Tt[Qe[Qt]],Ye=Zt(Qe[Qt]);var _t=ut._tracePreGUI[Ye._fullInput.uid];if(qe=q(_t,Bt)(Ge,Te),at=qe.get(),et=Array.isArray(ke)?ke[Qt%ke.length]:ke,et!==void 0){var Pt=qe.parts[qe.parts.length-1],Xt=Te.substr(0,Te.length-Pt.length-1),zt=Xt?Xt+".":"",ur=Xt?t(Ye,Xt).get():Ye;if(pt=r.getTraceValObject(Ye,qe.parts),pt&&pt.impliedEdits&&et!==null)for(var gr in pt.impliedEdits)Ht(y.relativeAttr(Te,gr),pt.impliedEdits[gr],Qt);else if((Pt==="thicknessmode"||Pt==="lenmode")&&at!==et&&(et==="fraction"||et==="pixels")&&ur){var Mr=ut._size,un=ur.orient,zr=un==="top"||un==="bottom";if(Pt==="thicknessmode"){var $r=zr?Mr.h:Mr.w;Ht(zt+"thickness",ur.thickness*(et==="fraction"?1/$r:$r),Qt)}else{var hn=zr?Mr.w:Mr.h;Ht(zt+"len",ur.len*(et==="fraction"?1/hn:hn),Qt)}}else if(Te==="type"&&(et==="pie"!=(at==="pie")||et==="funnelarea"!=(at==="funnelarea"))){var Tr="x",wr="y";(et==="bar"||at==="bar")&&Ge.orientation==="h"&&(Tr="y",wr="x"),y.swapAttrs(Ge,["?","?src"],"labels",Tr),y.swapAttrs(Ge,["d?","?0"],"label",Tr),y.swapAttrs(Ge,["?","?src"],"values",wr),at==="pie"||at==="funnelarea"?(t(Ge,"marker.color").set(t(Ge,"marker.colors").get()),ut._pielayer.selectAll("g.trace").remove()):n.traceIs(Ge,"cartesian")&&t(Ge,"marker.colors").set(t(Ge,"marker.color").get())}cr[Te][Qt]=ee(at);var Ur=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Ur.indexOf(Te)!==-1){if(Te==="orientation"){qe.set(et);var Br=Ge.x&&!Ge.y?"h":"v";if((qe.get()||Br)===Ye.orientation)continue}else Te==="orientationaxes"&&(Ge.orientation={v:"h",h:"v"}[Ye.orientation]);A.swapXYData(Ge),ar.calc=ar.clearAxisTypes=!0}else f.dataArrayContainers.indexOf(qe.parts[0])!==-1?(A.manageArrayContainers(qe,et,cr),ar.calc=!0):(pt?pt.arrayOk&&!n.traceIs(Ye,"regl")&&(y.isArrayOrTypedArray(et)||y.isArrayOrTypedArray(at))?ar.calc=!0:S.update(ar,pt):ar.calc=!0,qe.set(et))}}if(["swapxyaxes","orientationaxes"].indexOf(Te)!==-1&&u.swap(Pe,Qe),Te==="orientationaxes"){var Cr=t(Pe.layout,"hovermode"),nt=Cr.get();nt==="x"?Cr.set("y"):nt==="y"?Cr.set("x"):nt==="x unified"?Cr.set("y unified"):nt==="y unified"&&Cr.set("x unified")}if(["orientation","type"].indexOf(Te)!==-1){for(Kr=[],Qt=0;Qt<Qe.length;Qt++){var Rt=Tt[Qe[Qt]];n.traceIs(Rt,"cartesian")&&(Qr(Rt.xaxis||"x"),Qr(Rt.yaxis||"y"))}Ht(Kr.map(st),!0,0),Ht(Kr.map(Gt),[0,1],0)}}return(ar.calc||ar.plot)&&(ar.fullReplot=!0),{flags:ar,undoit:cr,redoit:nr,traces:Qe,eventData:y.extendDeepNoArrays([],[Ut,Qe])}}function ne(Pe){var We=y.counterRegex("axis",".title",!1,!1),Qe=/colorbar\.title$/,ut=Object.keys(Pe),It,Tt,Bt;for(It=0;It<ut.length;It++)Tt=ut[It],Bt=Pe[Tt],(Tt==="title"||We.test(Tt)||Qe.test(Tt))&&(typeof Bt=="string"||typeof Bt=="number")?rr(Tt,Tt.replace("title","title.text")):Tt.indexOf("titlefont")>-1&&Tt.indexOf("grouptitlefont")===-1?rr(Tt,Tt.replace("titlefont","title.font")):Tt.indexOf("titleposition")>-1?rr(Tt,Tt.replace("titleposition","title.position")):Tt.indexOf("titleside")>-1?rr(Tt,Tt.replace("titleside","title.side")):Tt.indexOf("titleoffset")>-1&&rr(Tt,Tt.replace("titleoffset","title.offset"));function rr(Ut,Qt){Pe[Qt]=Pe[Ut],delete Pe[Ut]}}function oe(Pe,We,Qe){Pe=y.getGraphDiv(Pe),A.clearPromiseQueue(Pe);var ut={};if(typeof We=="string")ut[We]=Qe;else if(y.isPlainObject(We))ut=y.extendFlat({},We);else return y.warn("Relayout fail.",We,Qe),Promise.reject();Object.keys(ut).length&&(Pe.changed=!0);var It=Se(Pe,ut),Tt=It.flags;Tt.calc&&(Pe.calcdata=void 0);var Bt=[f.previousPromises];Tt.layoutReplot?Bt.push(c.layoutReplot):Object.keys(ut).length&&(se(Pe,Tt,It)||f.supplyDefaults(Pe),Tt.legend&&Bt.push(c.doLegend),Tt.layoutstyle&&Bt.push(c.layoutStyles),Tt.axrange&&me(Bt,It.rangesAltered),Tt.ticks&&Bt.push(c.doTicksRelayout),Tt.modebar&&Bt.push(c.doModeBar),Tt.camera&&Bt.push(c.doCamera),Tt.colorbars&&Bt.push(c.doColorBars),Bt.push(C)),Bt.push(f.rehover,f.redrag),i.add(Pe,oe,[Pe,It.undoit],oe,[Pe,It.redoit]);var rr=y.syncOrAsync(Bt,Pe);return(!rr||!rr.then)&&(rr=Promise.resolve(Pe)),rr.then(function(){return Pe.emit("plotly_relayout",It.eventData),Pe})}function se(Pe,We,Qe){var ut=Pe._fullLayout;if(!We.axrange)return!1;for(var It in We)if(It!=="axrange"&&We[It])return!1;for(var Tt in Qe.rangesAltered){var Bt=u.id2name(Tt),rr=Pe.layout[Bt],Ut=ut[Bt];if(Ut.autorange=rr.autorange,rr.range&&(Ut.range=rr.range.slice()),Ut.cleanRange(),Ut._matchGroup){for(var Qt in Ut._matchGroup)if(Qt!==Tt){var ar=ut[u.id2name(Qt)];ar.autorange=Ut.autorange,ar.range=Ut.range.slice(),ar._input.range=Ut.range.slice()}}}return!0}function me(Pe,We){var Qe=We?function(ut){var It=[],Tt=!0;for(var Bt in We){var rr=u.getFromId(ut,Bt);if(It.push(Bt),(rr.ticklabelposition||"").indexOf("inside")!==-1&&rr._anchorAxis&&It.push(rr._anchorAxis._id),rr._matchGroup)for(var Ut in rr._matchGroup)We[Ut]||It.push(Ut);rr.automargin&&(Tt=!1)}return u.draw(ut,It,{skipTitle:Tt})}:function(ut){return u.draw(ut,"redraw")};Pe.push(g,c.doAutoRangeAndConstraints,Qe,c.drawData,c.finalDraw)}var ce=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,pe=/^[xyz]axis[0-9]*\.autorange$/,xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Se(Pe,We){var Qe=Pe.layout,ut=Pe._fullLayout,It=ut._guiEditing,Tt=q(ut._preGUI,It),Bt=Object.keys(We),rr=u.list(Pe),Ut=y.extendDeepAll({},We),Qt={},ar,nr,cr;for(ne(We),Bt=Object.keys(We),nr=0;nr<Bt.length;nr++)if(Bt[nr].indexOf("allaxes")===0){for(cr=0;cr<rr.length;cr++){var Kr=rr[cr]._id.substr(1),yn=Kr.indexOf("scene")!==-1?Kr+".":"",Qr=Bt[nr].replace("allaxes",yn+rr[cr]._name);We[Qr]||(We[Qr]=We[Bt[nr]])}delete We[Bt[nr]]}var st=S.layoutFlags(),Gt={},Zt={};function Ht(Rr,Ct){if(Array.isArray(Rr)){Rr.forEach(function(Lr){Ht(Lr,Ct)});return}if(!(Rr in We||A.hasParent(We,Rr))){var tr=Tt(Qe,Rr);Rr in Zt||(Zt[Rr]=ee(tr.get())),Ct!==void 0&&tr.set(Ct)}}var _r={},it;function Te(Rr){var Ct=u.name2id(Rr.split(".")[0]);return _r[Ct]=1,Ct}for(var ke in We){if(A.hasParent(We,ke))throw new Error("cannot set "+ke+" and a parent attribute simultaneously");for(var Ge=Tt(Qe,ke),Ye=We[ke],qe=Ge.parts.length,at=qe-1;at>0&&typeof Ge.parts[at]!="string";)at--;var et=Ge.parts[at],pt=Ge.parts[at-1]+"."+et,_t=Ge.parts.slice(0,at).join("."),Pt=t(Pe.layout,_t).get(),Xt=t(ut,_t).get(),zt=Ge.get();if(Ye!==void 0){Gt[ke]=Ye,Zt[ke]=et==="reverse"?Ye:ee(zt);var ur=r.getLayoutValObject(ut,Ge.parts);if(ur&&ur.impliedEdits&&Ye!==null)for(var gr in ur.impliedEdits)Ht(y.relativeAttr(ke,gr),ur.impliedEdits[gr]);if(["width","height"].indexOf(ke)!==-1)if(Ye){Ht("autosize",null);var Mr=ke==="height"?"width":"height";Ht(Mr,ut[Mr])}else ut[ke]=Pe._initialAutoSize[ke];else if(ke==="autosize")Ht("width",Ye?null:ut.width),Ht("height",Ye?null:ut.height);else if(pt.match(ce))Te(pt),t(ut,_t+"._inputRange").set(null);else if(pt.match(pe)){Te(pt),t(ut,_t+"._inputRange").set(null);var un=t(ut,_t).get();un._inputDomain&&(un._input.domain=un._inputDomain.slice())}else pt.match(xe)&&t(ut,_t+"._inputDomain").set(null);if(et==="type"){it=Pt;var zr=Xt.type==="linear"&&Ye==="log",$r=Xt.type==="log"&&Ye==="linear";if(zr||$r){if(!it||!it.range)Ht(_t+".autorange",!0);else if(Xt.autorange)zr&&(it.range=it.range[1]>it.range[0]?[1,2]:[2,1]);else{var hn=it.range[0],Tr=it.range[1];zr?(hn<=0&&Tr<=0&&Ht(_t+".autorange",!0),hn<=0?hn=Tr/1e6:Tr<=0&&(Tr=hn/1e6),Ht(_t+".range[0]",Math.log(hn)/Math.LN10),Ht(_t+".range[1]",Math.log(Tr)/Math.LN10)):(Ht(_t+".range[0]",Math.pow(10,hn)),Ht(_t+".range[1]",Math.pow(10,Tr)))}Array.isArray(ut._subplots.polar)&&ut._subplots.polar.length&&ut[Ge.parts[0]]&&Ge.parts[1]==="radialaxis"&&delete ut[Ge.parts[0]]._subplot.viewInitial["radialaxis.range"],n.getComponentMethod("annotations","convertCoords")(Pe,Xt,Ye,Ht),n.getComponentMethod("images","convertCoords")(Pe,Xt,Ye,Ht)}else Ht(_t+".autorange",!0),Ht(_t+".range",null);t(ut,_t+"._inputRange").set(null)}else if(et.match(T)){var wr=t(ut,ke).get(),Ur=(Ye||{}).type;(!Ur||Ur==="-")&&(Ur="linear"),n.getComponentMethod("annotations","convertCoords")(Pe,wr,Ur,Ht),n.getComponentMethod("images","convertCoords")(Pe,wr,Ur,Ht)}var Br=p.containerArrayMatch(ke);if(Br){ar=Br.array,nr=Br.index;var Cr=Br.property,nt=ur||{editType:"calc"};nr!==""&&Cr===""&&(p.isAddVal(Ye)?Zt[ke]=null:p.isRemoveVal(Ye)?Zt[ke]=(t(Qe,ar).get()||[])[nr]:y.warn("unrecognized full object value",We)),S.update(st,nt),Qt[ar]||(Qt[ar]={});var Rt=Qt[ar][nr];Rt||(Rt=Qt[ar][nr]={}),Rt[Cr]=Ye,delete We[ke]}else et==="reverse"?(Pt.range?Pt.range.reverse():(Ht(_t+".autorange",!0),Pt.range=[1,0]),Xt.autorange?st.calc=!0:st.plot=!0):(ut._has("scatter-like")&&ut._has("regl")&&ke==="dragmode"&&(Ye==="lasso"||Ye==="select")&&!(zt==="lasso"||zt==="select")||ut._has("gl2d")?st.plot=!0:ur?S.update(st,ur):st.calc=!0,Ge.set(Ye))}}for(ar in Qt){var Jt=p.applyContainerArrayChanges(Pe,Tt(Qe,ar),Qt[ar],st,Tt);Jt||(st.plot=!0)}for(var hr in _r){it=u.getFromId(Pe,hr);var Dr=it&&it._constraintGroup;if(Dr){st.calc=!0;for(var Gr in Dr)_r[Gr]||(u.getFromId(Pe,Gr)._constraintShrinkable=!0)}}return(Ae(Pe)||We.height||We.width)&&(st.plot=!0),(st.plot||st.calc)&&(st.layoutReplot=!0),{flags:st,rangesAltered:_r,undoit:Zt,redoit:Gt,eventData:Ut}}function Ae(Pe){var We=Pe._fullLayout,Qe=We.width,ut=We.height;return Pe.layout.autosize&&f.plotAutoSize(Pe,Pe.layout,We),We.width!==Qe||We.height!==ut}function Ce(Pe,We,Qe,ut){Pe=y.getGraphDiv(Pe),A.clearPromiseQueue(Pe),y.isPlainObject(We)||(We={}),y.isPlainObject(Qe)||(Qe={}),Object.keys(We).length&&(Pe.changed=!0),Object.keys(Qe).length&&(Pe.changed=!0);var It=A.coerceTraceIndices(Pe,ut),Tt=ie(Pe,y.extendFlat({},We),It),Bt=Tt.flags,rr=Se(Pe,y.extendFlat({},Qe)),Ut=rr.flags;(Bt.calc||Ut.calc)&&(Pe.calcdata=void 0),Bt.clearAxisTypes&&A.clearAxisTypes(Pe,It,Qe);var Qt=[];Ut.layoutReplot?Qt.push(c.layoutReplot):Bt.fullReplot?Qt.push(F._doPlot):(Qt.push(f.previousPromises),se(Pe,Ut,rr)||f.supplyDefaults(Pe),Bt.style&&Qt.push(c.doTraceStyle),(Bt.colorbars||Ut.colorbars)&&Qt.push(c.doColorBars),Ut.legend&&Qt.push(c.doLegend),Ut.layoutstyle&&Qt.push(c.layoutStyles),Ut.axrange&&me(Qt,rr.rangesAltered),Ut.ticks&&Qt.push(c.doTicksRelayout),Ut.modebar&&Qt.push(c.doModeBar),Ut.camera&&Qt.push(c.doCamera),Qt.push(C)),Qt.push(f.rehover,f.redrag),i.add(Pe,Ce,[Pe,Tt.undoit,rr.undoit,Tt.traces],Ce,[Pe,Tt.redoit,rr.redoit,Tt.traces]);var ar=y.syncOrAsync(Qt,Pe);return(!ar||!ar.then)&&(ar=Promise.resolve(Pe)),ar.then(function(){return Pe.emit("plotly_update",{data:Tt.eventData,layout:rr.eventData}),Pe})}function Ee(Pe){return function(Qe){Qe._fullLayout._guiEditing=!0;var ut=Pe.apply(null,arguments);return Qe._fullLayout._guiEditing=!1,ut}}var Oe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],_e=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Re(Pe,We){for(var Qe=0;Qe<We.length;Qe++){var ut=We[Qe],It=Pe.match(ut.pattern);if(It){var Tt=It[1]||"";return{head:Tt,tail:Pe.substr(Tt.length+1),attr:ut.attr}}}}function Ve(Pe,We){var Qe=t(We,Pe).get();if(Qe!==void 0)return Qe;var ut=Pe.split(".");for(ut.pop();ut.length>1;)if(ut.pop(),Qe=t(We,ut.join(".")+".uirevision").get(),Qe!==void 0)return Qe;return We.uirevision}function Je(Pe,We){for(var Qe=0;Qe<We.length;Qe++)if(We[Qe]._fullInput.uid===Pe)return Qe;return-1}function ze(Pe,We,Qe){for(var ut=0;ut<We.length;ut++)if(We[ut].uid===Pe)return ut;return!We[Qe]||We[Qe].uid?-1:Qe}function De(Pe,We){var Qe=y.isPlainObject(Pe),ut=Array.isArray(Pe);return Qe||ut?(Qe&&y.isPlainObject(We)||ut&&Array.isArray(We))&&JSON.stringify(Pe)===JSON.stringify(We):Pe===We}function je(Pe,We,Qe,ut){var It=ut._preGUI,Tt,Bt,rr,Ut,Qt,ar,nr,cr,Kr,yn,Qr=[],st={},Gt={};for(Tt in It){if(Qt=Re(Tt,Oe),Qt){if(Kr=Qt.head,yn=Qt.tail,Bt=Qt.attr||Kr+".uirevision",rr=t(ut,Bt).get(),Ut=rr&&Ve(Bt,We),Ut&&Ut===rr){if(ar=It[Tt],ar===null&&(ar=void 0),nr=t(We,Tt),cr=nr.get(),De(cr,ar)){cr===void 0&&yn==="autorange"&&Qr.push(Kr),nr.set(ee(t(ut,Tt).get()));continue}else if(yn==="autorange"||yn.substr(0,6)==="range["){var Zt=It[Kr+".range[0]"],Ht=It[Kr+".range[1]"],_r=It[Kr+".autorange"];if(_r||_r===null&&Zt===null&&Ht===null){if(!(Kr in st)){var it=t(We,Kr).get();st[Kr]=it&&(it.autorange||it.autorange!==!1&&(!it.range||it.range.length!==2))}if(st[Kr]){nr.set(ee(t(ut,Tt).get()));continue}}}}}else y.warn("unrecognized GUI edit: "+Tt);delete It[Tt],Qt&&Qt.tail.substr(0,6)==="range["&&(Gt[Qt.head]=1)}for(var Te=0;Te<Qr.length;Te++){var ke=Qr[Te];if(Gt[ke]){var Ge=t(We,ke).get();Ge&&delete Ge.autorange}}var Ye=ut._tracePreGUI;for(var qe in Ye){var at=Ye[qe],et=null,pt;for(Tt in at){if(!et){var _t=Je(qe,Qe);if(_t<0){delete Ye[qe];break}var Pt=Qe[_t];pt=Pt._fullInput;var Xt=ze(qe,Pe,pt.index);if(Xt<0){delete Ye[qe];break}et=Pe[Xt]}if(Qt=Re(Tt,_e),Qt){if(Qt.attr?(rr=t(ut,Qt.attr).get(),Ut=rr&&Ve(Qt.attr,We)):(rr=pt.uirevision,Ut=et.uirevision,Ut===void 0&&(Ut=We.uirevision)),Ut&&Ut===rr&&(ar=at[Tt],ar===null&&(ar=void 0),nr=t(et,Tt),cr=nr.get(),De(cr,ar))){nr.set(ee(t(pt,Tt).get()));continue}}else y.warn("unrecognized GUI edit: "+Tt+" in trace uid "+qe);delete at[Tt]}}}function dt(Pe,We,Qe,ut){var It,Tt;function Bt(){return F.addFrames(Pe,It)}Pe=y.getGraphDiv(Pe),A.clearPromiseQueue(Pe);var rr=Pe._fullData,Ut=Pe._fullLayout;if(!y.isPlotDiv(Pe)||!rr||!Ut)Tt=F.newPlot(Pe,We,Qe,ut);else{if(y.isPlainObject(We)){var Qt=We;We=Qt.data,Qe=Qt.layout,ut=Qt.config,It=Qt.frames}var ar=!1;if(ut){var nr=y.extendDeep({},Pe._context);Pe._context=void 0,z(Pe,ut),ar=Ot(nr,Pe._context)}Pe.data=We||[],A.cleanData(Pe.data),Pe.layout=Qe||{},A.cleanLayout(Pe.layout),je(Pe.data,Pe.layout,rr,Ut),f.supplyDefaults(Pe,{skipUpdateCalc:!0});var cr=Pe._fullData,Kr=Pe._fullLayout,yn=Kr.datarevision===void 0,Qr=Kr.transition,st=$t(Pe,Ut,Kr,yn,Qr),Gt=st.newDataRevision,Zt=Et(Pe,rr,cr,yn,Qr,Gt);if(Ae(Pe)&&(st.layoutReplot=!0),Zt.calc||st.calc){Pe.calcdata=void 0;for(var Ht=Object.getOwnPropertyNames(Kr),_r=0;_r<Ht.length;_r++){var it=Ht[_r],Te=it.substring(0,5);if(Te==="xaxis"||Te==="yaxis"){var ke=Kr[it]._emptyCategories;ke&&ke()}}}else f.supplyDefaultsUpdateCalc(Pe.calcdata,cr);var Ge=[];if(It&&(Pe._transitionData={},f.createTransitionData(Pe),Ge.push(Bt)),Kr.transition&&!ar&&(Zt.anim||st.anim))st.ticks&&Ge.push(c.doTicksRelayout),f.doCalcdata(Pe),c.doAutoRangeAndConstraints(Pe),Ge.push(function(){return f.transitionFromReact(Pe,Zt,st,Ut)});else if(Zt.fullReplot||st.layoutReplot||ar)Pe._fullLayout._skipDefaults=!0,Ge.push(F._doPlot);else{for(var Ye in st.arrays){var qe=st.arrays[Ye];if(qe.length){var at=n.getComponentMethod(Ye,"drawOne");if(at!==y.noop)for(var et=0;et<qe.length;et++)at(Pe,qe[et]);else{var pt=n.getComponentMethod(Ye,"draw");if(pt===y.noop)throw new Error("cannot draw components: "+Ye);pt(Pe)}}}Ge.push(f.previousPromises),Zt.style&&Ge.push(c.doTraceStyle),(Zt.colorbars||st.colorbars)&&Ge.push(c.doColorBars),st.legend&&Ge.push(c.doLegend),st.layoutstyle&&Ge.push(c.layoutStyles),st.axrange&&me(Ge),st.ticks&&Ge.push(c.doTicksRelayout),st.modebar&&Ge.push(c.doModeBar),st.camera&&Ge.push(c.doCamera),Ge.push(C)}Ge.push(f.rehover,f.redrag),Tt=y.syncOrAsync(Ge,Pe),(!Tt||!Tt.then)&&(Tt=Promise.resolve(Pe))}return Tt.then(function(){return Pe.emit("plotly_react",{data:We,layout:Qe}),Pe})}function Et(Pe,We,Qe,ut,It,Tt){var Bt=We.length===Qe.length;if(!It&&!Bt)return{fullReplot:!0,calc:!0};var rr=S.traceFlags();rr.arrays={},rr.nChanges=0,rr.nChangesAnim=0;var Ut,Qt;function ar(Kr){var yn=r.getTraceValObject(Qt,Kr);return!Qt._module.animatable&&yn.anim&&(yn.anim=!1),yn}var nr={getValObject:ar,flags:rr,immutable:ut,transition:It,newDataRevision:Tt,gd:Pe},cr={};for(Ut=0;Ut<We.length;Ut++)if(Qe[Ut]){if(Qt=Qe[Ut]._fullInput,f.hasMakesDataTransform(Qt)&&(Qt=Qe[Ut]),cr[Qt.uid])continue;cr[Qt.uid]=1,wt(We[Ut]._fullInput,Qt,[],nr)}return(rr.calc||rr.plot)&&(rr.fullReplot=!0),It&&rr.nChanges&&rr.nChangesAnim&&(rr.anim=rr.nChanges===rr.nChangesAnim&&Bt?"all":"some"),rr}function $t(Pe,We,Qe,ut,It){var Tt=S.layoutFlags();Tt.arrays={},Tt.rangesAltered={},Tt.nChanges=0,Tt.nChangesAnim=0;function Bt(Ut){return r.getLayoutValObject(Qe,Ut)}var rr={getValObject:Bt,flags:Tt,immutable:ut,transition:It,gd:Pe};return wt(We,Qe,[],rr),(Tt.plot||Tt.calc)&&(Tt.layoutReplot=!0),It&&Tt.nChanges&&Tt.nChangesAnim&&(Tt.anim=Tt.nChanges===Tt.nChangesAnim?"all":"some"),Tt}function wt(Pe,We,Qe,ut){var It,Tt,Bt,rr=ut.getValObject,Ut=ut.flags,Qt=ut.immutable,ar=ut.inArray,nr=ut.arrayIndex;function cr(){var _t=It.editType;if(ar&&_t.indexOf("arraydraw")!==-1){y.pushUnique(Ut.arrays[ar],nr);return}S.update(Ut,It),_t!=="none"&&Ut.nChanges++,ut.transition&&It.anim&&Ut.nChangesAnim++,(ce.test(Bt)||pe.test(Bt))&&(Ut.rangesAltered[Qe[0]]=1),xe.test(Bt)&&t(We,"_inputDomain").set(null),Tt==="datarevision"&&(Ut.newDataRevision=1)}function Kr(_t){return _t.valType==="data_array"||_t.arrayOk}for(Tt in Pe){if(Ut.calc&&!ut.transition)return;var yn=Pe[Tt],Qr=We[Tt],st=Qe.concat(Tt);if(Bt=st.join("."),!(Tt.charAt(0)==="_"||typeof yn=="function"||yn===Qr)){if((Tt==="tick0"||Tt==="dtick")&&Qe[0]!=="geo"){var Gt=We.tickmode;if(Gt==="auto"||Gt==="array"||!Gt)continue}if(!(Tt==="range"&&We.autorange)&&!((Tt==="zmin"||Tt==="zmax")&&We.type==="contourcarpet")&&(It=rr(st),!!It&&!(It._compareAsJSON&&JSON.stringify(yn)===JSON.stringify(Qr)))){var Zt=It.valType,Ht,_r=Kr(It),it=Array.isArray(yn),Te=Array.isArray(Qr);if(it&&Te){var ke="_input_"+Tt,Ge=Pe[ke],Ye=We[ke];if(Array.isArray(Ge)&&Ge===Ye)continue}if(Qr===void 0)_r&&it?Ut.calc=!0:cr();else if(It._isLinkedToArray){var qe=[],at=!1;ar||(Ut.arrays[Tt]=qe);var et=Math.min(yn.length,Qr.length),pt=Math.max(yn.length,Qr.length);if(et!==pt)if(It.editType==="arraydraw")at=!0;else{cr();continue}for(Ht=0;Ht<et;Ht++)wt(yn[Ht],Qr[Ht],st.concat(Ht),y.extendFlat({inArray:Tt,arrayIndex:Ht},ut));if(at)for(Ht=et;Ht<pt;Ht++)qe.push(Ht)}else!Zt&&y.isPlainObject(yn)?wt(yn,Qr,st,ut):_r?it&&Te?(Qt&&(Ut.calc=!0),(Qt||ut.newDataRevision)&&cr()):it!==Te?Ut.calc=!0:cr():it&&Te?(yn.length!==Qr.length||String(yn)!==String(Qr))&&cr():cr()}}}for(Tt in We)if(!(Tt in Pe||Tt.charAt(0)==="_"||typeof We[Tt]=="function"))if(It=rr(Qe.concat(Tt)),Kr(It)&&Array.isArray(We[Tt])){Ut.calc=!0;return}else cr()}function Ot(Pe,We){var Qe;for(Qe in Pe)if(Qe.charAt(0)!=="_"){var ut=Pe[Qe],It=We[Qe];if(ut!==It)if(y.isPlainObject(ut)&&y.isPlainObject(It)){if(Ot(ut,It))return!0}else if(Array.isArray(ut)&&Array.isArray(It)){if(ut.length!==It.length)return!0;for(var Tt=0;Tt<ut.length;Tt++)if(ut[Tt]!==It[Tt])if(y.isPlainObject(ut[Tt])&&y.isPlainObject(It[Tt])){if(Ot(ut[Tt],It[Tt]))return!0}else return!0}else return!0}}function Vt(Pe,We,Qe){if(Pe=y.getGraphDiv(Pe),!y.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ut=Pe._transitionData;ut._frameQueue||(ut._frameQueue=[]),Qe=f.supplyAnimationDefaults(Qe);var It=Qe.transition,Tt=Qe.frame;ut._frameWaitingCnt===void 0&&(ut._frameWaitingCnt=0);function Bt(Qt){return Array.isArray(It)?Qt>=It.length?It[0]:It[Qt]:It}function rr(Qt){return Array.isArray(Tt)?Qt>=Tt.length?Tt[0]:Tt[Qt]:Tt}function Ut(Qt,ar){var nr=0;return function(){if(Qt&&++nr===ar)return Qt()}}return new Promise(function(Qt,ar){function nr(){if(ut._frameQueue.length!==0){for(;ut._frameQueue.length;){var et=ut._frameQueue.pop();et.onInterrupt&&et.onInterrupt()}Pe.emit("plotly_animationinterrupted",[])}}function cr(et){if(et.length!==0){for(var pt=0;pt<et.length;pt++){var _t;et[pt].type==="byname"?_t=f.computeFrame(Pe,et[pt].name):_t=et[pt].data;var Pt=rr(pt),Xt=Bt(pt);Xt.duration=Math.min(Xt.duration,Pt.duration);var zt={frame:_t,name:et[pt].name,frameOpts:Pt,transitionOpts:Xt};pt===et.length-1&&(zt.onComplete=Ut(Qt,2),zt.onInterrupt=ar),ut._frameQueue.push(zt)}Qe.mode==="immediate"&&(ut._lastFrameAt=-1/0),ut._animationRaf||Qr()}}function Kr(){Pe.emit("plotly_animated"),window.cancelAnimationFrame(ut._animationRaf),ut._animationRaf=null}function yn(){ut._currentFrame&&ut._currentFrame.onComplete&&ut._currentFrame.onComplete();var et=ut._currentFrame=ut._frameQueue.shift();if(et){var pt=et.name?et.name.toString():null;Pe._fullLayout._currentFrame=pt,ut._lastFrameAt=Date.now(),ut._timeToNext=et.frameOpts.duration,f.transition(Pe,et.frame.data,et.frame.layout,A.coerceTraceIndices(Pe,et.frame.traces),et.frameOpts,et.transitionOpts).then(function(){et.onComplete&&et.onComplete()}),Pe.emit("plotly_animatingframe",{name:pt,frame:et.frame,animation:{frame:et.frameOpts,transition:et.transitionOpts}})}else Kr()}function Qr(){Pe.emit("plotly_animating"),ut._lastFrameAt=-1/0,ut._timeToNext=0,ut._runningTransitions=0,ut._currentFrame=null;var et=function(){ut._animationRaf=window.requestAnimationFrame(et),Date.now()-ut._lastFrameAt>ut._timeToNext&&yn()};et()}var st=0;function Gt(et){return Array.isArray(It)?st>=It.length?et.transitionOpts=It[st]:et.transitionOpts=It[0]:et.transitionOpts=It,st++,et}var Zt,Ht,_r=[],it=We==null,Te=Array.isArray(We),ke=!it&&!Te&&y.isPlainObject(We);if(ke)_r.push({type:"object",data:Gt(y.extendFlat({},We))});else if(it||["string","number"].indexOf(typeof We)!==-1)for(Zt=0;Zt<ut._frames.length;Zt++)Ht=ut._frames[Zt],!!Ht&&(it||String(Ht.group)===String(We))&&_r.push({type:"byname",name:String(Ht.name),data:Gt({name:Ht.name})});else if(Te)for(Zt=0;Zt<We.length;Zt++){var Ge=We[Zt];["number","string"].indexOf(typeof Ge)!==-1?(Ge=String(Ge),_r.push({type:"byname",name:Ge,data:Gt({name:Ge})})):y.isPlainObject(Ge)&&_r.push({type:"object",data:Gt(y.extendFlat({},Ge))})}for(Zt=0;Zt<_r.length;Zt++)if(Ht=_r[Zt],Ht.type==="byname"&&!ut._frameHash[Ht.data.name]){y.warn('animate failure: frame not found: "'+Ht.data.name+'"'),ar();return}["next","immediate"].indexOf(Qe.mode)!==-1&&nr(),Qe.direction==="reverse"&&_r.reverse();var Ye=Pe._fullLayout._currentFrame;if(Ye&&Qe.fromcurrent){var qe=-1;for(Zt=0;Zt<_r.length;Zt++)if(Ht=_r[Zt],Ht.type==="byname"&&Ht.name===Ye){qe=Zt;break}if(qe>0&&qe<_r.length-1){var at=[];for(Zt=0;Zt<_r.length;Zt++)Ht=_r[Zt],(_r[Zt].type!=="byname"||Zt>qe)&&at.push(Ht);_r=at}}_r.length>0?cr(_r):(Pe.emit("plotly_animated"),Qt())})}function kt(Pe,We,Qe){if(Pe=y.getGraphDiv(Pe),We==null)return Promise.resolve();if(!y.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ut,It,Tt,Bt,rr=Pe._transitionData._frames,Ut=Pe._transitionData._frameHash;if(!Array.isArray(We))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+We);var Qt=rr.length+We.length*2,ar=[],nr={};for(ut=We.length-1;ut>=0;ut--)if(!!y.isPlainObject(We[ut])){var cr=We[ut].name,Kr=(Ut[cr]||nr[cr]||{}).name,yn=We[ut].name,Qr=Ut[Kr]||nr[Kr];Kr&&yn&&typeof yn=="number"&&Qr&&x<w&&(x++,y.warn('addFrames: overwriting frame "'+(Ut[Kr]||nr[Kr]).name+'" with a frame whose name of type "number" also equates to "'+Kr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),x===w&&y.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),nr[cr]={name:cr},ar.push({frame:f.supplyFrameDefaults(We[ut]),index:Qe&&Qe[ut]!==void 0&&Qe[ut]!==null?Qe[ut]:Qt+ut})}ar.sort(function(ke,Ge){return ke.index>Ge.index?-1:ke.index<Ge.index?1:0});var st=[],Gt=[],Zt=rr.length;for(ut=ar.length-1;ut>=0;ut--){if(It=ar[ut].frame,typeof It.name=="number"&&y.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!It.name)for(;Ut[It.name="frame "+Pe._transitionData._counter++];);if(Ut[It.name]){for(Tt=0;Tt<rr.length&&(rr[Tt]||{}).name!==It.name;Tt++);st.push({type:"replace",index:Tt,value:It}),Gt.unshift({type:"replace",index:Tt,value:rr[Tt]})}else Bt=Math.max(0,Math.min(ar[ut].index,Zt)),st.push({type:"insert",index:Bt,value:It}),Gt.unshift({type:"delete",index:Bt}),Zt++}var Ht=f.modifyFrames,_r=f.modifyFrames,it=[Pe,Gt],Te=[Pe,st];return i&&i.add(Pe,Ht,it,_r,Te),f.modifyFrames(Pe,st)}function St(Pe,We){if(Pe=y.getGraphDiv(Pe),!y.isPlotDiv(Pe))throw new Error("This element is not a Plotly plot: "+Pe);var Qe,ut,It=Pe._transitionData._frames,Tt=[],Bt=[];if(!We)for(We=[],Qe=0;Qe<It.length;Qe++)We.push(Qe);for(We=We.slice(),We.sort(),Qe=We.length-1;Qe>=0;Qe--)ut=We[Qe],Tt.push({type:"delete",index:ut}),Bt.unshift({type:"insert",index:ut,value:It[ut]});var rr=f.modifyFrames,Ut=f.modifyFrames,Qt=[Pe,Bt],ar=[Pe,Tt];return i&&i.add(Pe,rr,Qt,Ut,ar),f.modifyFrames(Pe,Tt)}function ot(Pe){Pe=y.getGraphDiv(Pe);var We=Pe._fullLayout||{},Qe=Pe._fullData||[];return f.cleanPlot([],{},Qe,We),f.purge(Pe),a.purge(Pe),We._container&&We._container.remove(),delete Pe._context,Pe}function ht(Pe){var We=Pe._fullLayout,Qe=Pe.getBoundingClientRect();if(!y.equalDomRects(Qe,We._lastBBox)){var ut=We._invTransform=y.inverseTransformMatrix(y.getFullTransformMatrix(Pe));We._invScaleX=Math.sqrt(ut[0][0]*ut[0][0]+ut[0][1]*ut[0][1]+ut[0][2]*ut[0][2]),We._invScaleY=Math.sqrt(ut[1][0]*ut[1][0]+ut[1][1]*ut[1][1]+ut[1][2]*ut[1][2]),We._lastBBox=Qe}}function Ke(Pe){var We=s.select(Pe),Qe=Pe._fullLayout;if(Qe._calcInverseTransform=ht,Qe._calcInverseTransform(Pe),Qe._container=We.selectAll(".plot-container").data([0]),Qe._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Qe._paperdiv=Qe._container.selectAll(".svg-container").data([0]),Qe._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Qe._glcontainer=Qe._paperdiv.selectAll(".gl-container").data([{}]),Qe._glcontainer.enter().append("div").classed("gl-container",!0),Qe._paperdiv.selectAll(".main-svg").remove(),Qe._paperdiv.select(".modebar-container").remove(),Qe._paper=Qe._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Qe._toppaper=Qe._paperdiv.append("svg").classed("main-svg",!0),Qe._modebardiv=Qe._paperdiv.append("div"),delete Qe._modeBar,Qe._hoverpaper=Qe._paperdiv.append("svg").classed("main-svg",!0),!Qe._uid){var ut={};s.selectAll("defs").each(function(){this.id&&(ut[this.id.split("-")[1]]=1)}),Qe._uid=y.randstr(ut)}Qe._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),Qe._defs=Qe._paper.append("defs").attr("id","defs-"+Qe._uid),Qe._clips=Qe._defs.append("g").classed("clips",!0),Qe._topdefs=Qe._toppaper.append("defs").attr("id","topdefs-"+Qe._uid),Qe._topclips=Qe._topdefs.append("g").classed("clips",!0),Qe._bgLayer=Qe._paper.append("g").classed("bglayer",!0),Qe._draggers=Qe._paper.append("g").classed("draglayer",!0);var It=Qe._paper.append("g").classed("layer-below",!0);Qe._imageLowerLayer=It.append("g").classed("imagelayer",!0),Qe._shapeLowerLayer=It.append("g").classed("shapelayer",!0),Qe._cartesianlayer=Qe._paper.append("g").classed("cartesianlayer",!0),Qe._polarlayer=Qe._paper.append("g").classed("polarlayer",!0),Qe._smithlayer=Qe._paper.append("g").classed("smithlayer",!0),Qe._ternarylayer=Qe._paper.append("g").classed("ternarylayer",!0),Qe._geolayer=Qe._paper.append("g").classed("geolayer",!0),Qe._funnelarealayer=Qe._paper.append("g").classed("funnelarealayer",!0),Qe._pielayer=Qe._paper.append("g").classed("pielayer",!0),Qe._iciclelayer=Qe._paper.append("g").classed("iciclelayer",!0),Qe._treemaplayer=Qe._paper.append("g").classed("treemaplayer",!0),Qe._sunburstlayer=Qe._paper.append("g").classed("sunburstlayer",!0),Qe._indicatorlayer=Qe._toppaper.append("g").classed("indicatorlayer",!0),Qe._glimages=Qe._paper.append("g").classed("glimages",!0);var Tt=Qe._toppaper.append("g").classed("layer-above",!0);Qe._imageUpperLayer=Tt.append("g").classed("imagelayer",!0),Qe._shapeUpperLayer=Tt.append("g").classed("shapelayer",!0),Qe._infolayer=Qe._toppaper.append("g").classed("infolayer",!0),Qe._menulayer=Qe._toppaper.append("g").classed("menulayer",!0),Qe._zoomlayer=Qe._toppaper.append("g").classed("zoomlayer",!0),Qe._hoverlayer=Qe._hoverpaper.append("g").classed("hoverlayer",!0),Qe._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Pe.emit("plotly_framework")}F.animate=Vt,F.addFrames=kt,F.deleteFrames=St,F.addTraces=fe,F.deleteTraces=ue,F.extendTraces=K,F.moveTraces=V,F.prependTraces=le,F.newPlot=R,F._doPlot=v,F.purge=ot,F.react=dt,F.redraw=O,F.relayout=oe,F.restyle=j,F.setPlotConfig=M,F.update=Ce,F._guiRelayout=Ee(oe),F._guiRestyle=Ee(j),F._guiUpdate=Ee(Ce),F._storeDirectGUIEdit=J},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(e,I,F){var s={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},o={};function h(y,t){for(var a in y){var i=y[a];i.valType?t[a]=i.dflt:(t[a]||(t[a]={}),h(i,t[a]))}}h(s,o),I.exports={configAttributes:s,dfltConfig:o}},{}],542:[function(e,I,F){var s=e("../registry"),o=e("../lib"),h=e("../plots/attributes"),y=e("../plots/layout_attributes"),t=e("../plots/frame_attributes"),a=e("../plots/animation_attributes"),i=e("./plot_config").configAttributes,n=e("./edit_types"),r=o.extendDeepAll,f=o.isPlainObject,u=o.isArrayOrTypedArray,l=o.nestedProperty,m=o.valObjectMeta,d="_isSubplotObj",b="_isLinkedToArray",g="_arrayAttrRegexps",_="_deprecated",p=[d,b,g,_];F.IS_SUBPLOT_OBJ=d,F.IS_LINKED_TO_ARRAY=b,F.DEPRECATED=_,F.UNDERSCORE_ATTRS=p,F.get=function(){var R={};s.allTypes.forEach(function(H){R[H]=T(H)});var D={};return Object.keys(s.transformsRegistry).forEach(function(H){D[H]=w(H)}),{defs:{valObjects:m,metaKeys:p.concat(["description","role","editType","impliedEdits"]),editType:{traces:n.traces,layout:n.layout},impliedEdits:{}},traces:R,layout:x(),transforms:D,frames:v(),animation:C(a),config:C(i)}},F.crawl=function(R,D,H,B){var $=H||0;B=B||"",Object.keys(R).forEach(function(W){var re=R[W];if(p.indexOf(W)===-1){var Q=(B?B+".":"")+W;D(re,W,R,$,Q),!F.isValObject(re)&&f(re)&&W!=="impliedEdits"&&F.crawl(re,D,$+1,Q)}})},F.isValObject=function(R){return R&&R.valType!==void 0},F.findArrayAttributes=function(R){var D=[],H=[],B=[],$,W;function re(ue,V,j,ee){H=H.slice(0,ee).concat([V]),B=B.slice(0,ee).concat([ue&&ue._isLinkedToArray]);var q=ue&&(ue.valType==="data_array"||ue.arrayOk===!0)&&!(H[ee-1]==="colorbar"&&(V==="ticktext"||V==="tickvals"));!q||Q($,0,"")}function Q(ue,V,j){var ee=ue[H[V]],q=j+H[V];if(V===H.length-1)u(ee)&&D.push(W+q);else if(B[V]){if(Array.isArray(ee))for(var X=0;X<ee.length;X++)f(ee[X])&&Q(ee[X],V+1,q+"["+X+"].")}else f(ee)&&Q(ee,V+1,q+".")}$=R,W="",F.crawl(h,re),R._module&&R._module.attributes&&F.crawl(R._module.attributes,re);var Z=R.transforms;if(Z)for(var K=0;K<Z.length;K++){var le=Z[K],fe=le._module;fe&&(W="transforms["+K+"].",$=le,F.crawl(fe.attributes,re))}return D},F.getTraceValObject=function(R,D){var H=D[0],B=1,$,W;if(H==="transforms"){if(D.length===1)return h.transforms;var re=R.transforms;if(!Array.isArray(re)||!re.length)return!1;var Q=D[1];if(!S(Q)||Q>=re.length)return!1;$=(s.transformsRegistry[re[Q].type]||{}).attributes,W=$&&$[D[2]],B=3}else{var Z=R._module;if(Z||(Z=(s.modules[R.type||h.type.dflt]||{})._module),!Z)return!1;if($=Z.attributes,W=$&&$[H],!W){var K=Z.basePlotModule;K&&K.attributes&&(W=K.attributes[H])}W||(W=h[H])}return c(W,D,B)},F.getLayoutValObject=function(R,D){var H=A(R,D[0]);return c(H,D,1)};function A(R,D){var H,B,$,W,re=R._basePlotModules;if(re){var Q;for(H=0;H<re.length;H++){if($=re[H],$.attrRegex&&$.attrRegex.test(D)){if($.layoutAttrOverrides)return $.layoutAttrOverrides;!Q&&$.layoutAttributes&&(Q=$.layoutAttributes)}var Z=$.baseLayoutAttrOverrides;if(Z&&D in Z)return Z[D]}if(Q)return Q}var K=R._modules;if(K){for(H=0;H<K.length;H++)if(W=K[H].layoutAttributes,W&&D in W)return W[D]}for(B in s.componentsRegistry){if($=s.componentsRegistry[B],$.name==="colorscale"&&D.indexOf("coloraxis")===0)return $.layoutAttributes[D];if(!$.schema&&D===$.name)return $.layoutAttributes}return D in y?y[D]:!1}function c(R,D,H){if(!R)return!1;if(R._isLinkedToArray){if(S(D[H]))H++;else if(H<D.length)return!1}for(;H<D.length;H++){var B=R[D[H]];if(f(B))R=B;else break;if(H===D.length-1)break;if(R._isLinkedToArray){if(H++,!S(D[H]))return!1}else if(R.valType==="info_array"){H++;var $=D[H];if(!S($))return!1;var W=R.items;if(Array.isArray(W)){if($>=W.length)return!1;if(R.dimensions===2){if(H++,D.length===H)return R;var re=D[H];if(!S(re))return!1;R=W[$][re]}else R=W[$]}else R=W}}return R}function S(R){return R===Math.round(R)&&R>=0}function T(R){var D,H;D=s.modules[R]._module,H=D.basePlotModule;var B={};B.type=null;var $=r({},h),W=r({},D.attributes);F.crawl(W,function(Z,K,le,fe,ue){l($,ue).set(void 0),Z===void 0&&l(W,ue).set(void 0)}),r(B,$),s.traceIs(R,"noOpacity")&&delete B.opacity,s.traceIs(R,"showLegend")||(delete B.showlegend,delete B.legendgroup),s.traceIs(R,"noHover")&&(delete B.hoverinfo,delete B.hoverlabel),D.selectPoints||delete B.selectedpoints,r(B,W),H.attributes&&r(B,H.attributes),B.type=R;var re={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:R,attributes:C(B)};if(D.layoutAttributes){var Q={};r(Q,D.layoutAttributes),re.layoutAttributes=C(Q)}return D.animatable||F.crawl(re,function(Z){F.isValObject(Z)&&"anim"in Z&&delete Z.anim}),re}function x(){var R={},D,H;r(R,y);for(D in s.subplotsRegistry)if(H=s.subplotsRegistry[D],!!H.layoutAttributes)if(Array.isArray(H.attr))for(var B=0;B<H.attr.length;B++)z(R,H,H.attr[B]);else{var $=H.attr==="subplot"?H.name:H.attr;z(R,H,$)}for(D in s.componentsRegistry){H=s.componentsRegistry[D];var W=H.schema;if(W&&(W.subplots||W.layout)){var re=W.subplots;if(re&&re.xaxis&&!re.yaxis)for(var Q in re.xaxis)delete R.yaxis[Q]}else H.name==="colorscale"?r(R,H.layoutAttributes):H.layoutAttributes&&O(R,H.layoutAttributes,H.name)}return{layoutAttributes:C(R)}}function w(R){var D=s.transformsRegistry[R],H=r({},D.attributes);return Object.keys(s.componentsRegistry).forEach(function(B){var $=s.componentsRegistry[B];$.schema&&$.schema.transforms&&$.schema.transforms[R]&&Object.keys($.schema.transforms[R]).forEach(function(W){O(H,$.schema.transforms[R][W],W)})}),{attributes:C(H)}}function v(){var R={frames:r({},t)};return C(R),R.frames}function C(R){return M(R),E(R),L(R),R}function M(R){function D(B){return{valType:"string",editType:"none"}}function H(B,$,W){F.isValObject(B)?(B.arrayOk===!0||B.valType==="data_array")&&(W[$+"src"]=D()):f(B)&&(B.role="object")}F.crawl(R,H)}function E(R){function D(H,B,$){if(!!H){var W=H[b];!W||(delete H[b],$[B]={items:{}},$[B].items[W]=H,$[B].role="object")}}F.crawl(R,D)}function L(R){function D(H){for(var B in H)if(f(H[B]))D(H[B]);else if(Array.isArray(H[B]))for(var $=0;$<H[B].length;$++)D(H[B][$]);else H[B]instanceof RegExp&&(H[B]=H[B].toString())}D(R)}function z(R,D,H){var B=l(R,H),$=r({},D.layoutAttributes);$[d]=!0,B.set($)}function O(R,D,H){var B=l(R,H);B.set(r(B.get()||{},D))}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(e,I,F){var s=e("../lib"),o=e("../plots/attributes"),h="templateitemname",y={name:{valType:"string",editType:"none"}};y[h]={valType:"string",editType:"calc"},F.templatedArray=function(i,n){return n._isLinkedToArray=i,n.name=y.name,n[h]=y[h],n},F.traceTemplater=function(i){var n={},r,f;for(r in i)f=i[r],Array.isArray(f)&&f.length&&(n[r]=0);function u(l){r=s.coerce(l,{},o,"type");var m={type:r,_template:null};if(r in n){f=i[r];var d=n[r]%f.length;n[r]++,m._template=f[d]}return m}return{newTrace:u}},F.newContainer=function(i,n,r){var f=i._template,u=f&&(f[n]||r&&f[r]);s.isPlainObject(u)||(u=null);var l=i[n]={_template:u};return l},F.arrayTemplater=function(i,n,r){var f=i._template,u=f&&f[a(n)],l=f&&f[n];(!Array.isArray(l)||!l.length)&&(l=[]);var m={};function d(g){var _={name:g.name,_input:g},p=_[h]=g[h];if(!t(p))return _._template=u,_;for(var A=0;A<l.length;A++){var c=l[A];if(c.name===p)return m[p]=1,_._template=c,_}return _[r]=g[r]||!1,_._template=!1,_}function b(){for(var g=[],_=0;_<l.length;_++){var p=l[_],A=p.name;if(t(A)&&!m[A]){var c={_template:p,name:A,_input:{_templateitemname:A}};c[h]=p[h],g.push(c),m[A]=1}}return g}return{newItem:d,defaultItems:b}};function t(i){return i&&typeof i=="string"}function a(i){var n=i.length-1;return i.charAt(n)!=="s"&&s.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}F.arrayDefaultKey=a,F.arrayEditor=function(i,n,r){var f=(s.nestedProperty(i,n).get()||[]).length,u=r._index,l=u>=f&&(r._input||{})._templateitemname;l&&(u=f);var m=n+"["+u+"]",d;function b(){d={},l&&(d[m]={},d[m][h]=l)}b();function g(c,S){d[c]=S}function _(c,S){l?s.nestedProperty(d[m],c).set(S):d[m+"."+c]=S}function p(){var c=d;return b(),c}function A(c,S){c&&_(c,S);var T=p();for(var x in T)s.nestedProperty(i,x).set(T[x])}return{modifyBase:g,modifyItem:_,getUpdateObj:p,applyUpdate:A}}},{"../lib":503,"../plots/attributes":550}],544:[function(e,I,F){var s=e("@plotly/d3"),o=e("../registry"),h=e("../plots/plots"),y=e("../lib"),t=e("../lib/clear_gl_canvases"),a=e("../components/color"),i=e("../components/drawing"),n=e("../components/titles"),r=e("../components/modebar"),f=e("../plots/cartesian/axes"),u=e("../constants/alignment"),l=e("../plots/cartesian/constraints"),m=l.enforce,d=l.clean,b=e("../plots/cartesian/autorange").doAutoRange,g="start",_="middle",p="end";F.layoutStyles=function(E){return y.syncOrAsync([h.doAutoMargin,c],E)};function A(E,L,z){for(var O=0;O<z.length;O++){var R=z[O][0],D=z[O][1];if(!(R[0]>=E[1]||R[1]<=E[0])&&D[0]<L[1]&&D[1]>L[0])return!0}return!1}function c(E){var L=E._fullLayout,z=L._size,O=z.p,R=f.list(E,"",!0),D,H,B,$,W,re;if(L._paperdiv.style({width:E._context.responsive&&L.autosize&&!E._context._hasZeroWidth&&!E.layout.width?"100%":L.width+"px",height:E._context.responsive&&L.autosize&&!E._context._hasZeroHeight&&!E.layout.height?"100%":L.height+"px"}).selectAll(".main-svg").call(i.setSize,L.width,L.height),E._context.setBackground(E,L.paper_bgcolor),F.drawMainTitle(E),r.manage(E),!L._has("cartesian"))return h.previousPromises(E);function Q(Ot,Vt,kt){var St=Ot._lw/2;if(Ot._id.charAt(0)==="x"){if(Vt){if(kt==="top")return Vt._offset-O-St}else return z.t+z.h*(1-(Ot.position||0))+St%1;return Vt._offset+Vt._length+O+St}if(Vt){if(kt==="right")return Vt._offset+Vt._length+O+St}else return z.l+z.w*(Ot.position||0)+St%1;return Vt._offset-O-St}for(D=0;D<R.length;D++){$=R[D];var Z=$._anchorAxis;$._linepositions={},$._lw=i.crispRound(E,$.linewidth,1),$._mainLinePosition=Q($,Z,$.side),$._mainMirrorPosition=$.mirror&&Z?Q($,Z,u.OPPOSITE_SIDE[$.side]):null}var K=[],le=[],fe=[],ue=a.opacity(L.paper_bgcolor)===1&&a.opacity(L.plot_bgcolor)===1&&L.paper_bgcolor===L.plot_bgcolor;for(H in L._plots)if(B=L._plots[H],B.mainplot)B.bg&&B.bg.remove(),B.bg=void 0;else{var V=B.xaxis.domain,j=B.yaxis.domain,ee=B.plotgroup;if(A(V,j,fe)){var q=ee.node(),X=B.bg=y.ensureSingle(ee,"rect","bg");q.insertBefore(X.node(),q.childNodes[0]),le.push(H)}else ee.select("rect.bg").remove(),fe.push([V,j]),ue||(K.push(H),le.push(H))}var J=L._bgLayer.selectAll(".bg").data(K);for(J.enter().append("rect").classed("bg",!0),J.exit().remove(),J.each(function(Ot){L._plots[Ot].bg=s.select(this)}),D=0;D<le.length;D++)B=L._plots[le[D]],W=B.xaxis,re=B.yaxis,B.bg&&W._offset!==void 0&&re._offset!==void 0&&B.bg.call(i.setRect,W._offset-O,re._offset-O,W._length+2*O,re._length+2*O).call(a.fill,L.plot_bgcolor).style("stroke-width",0);if(!L._hasOnlyLargeSploms)for(H in L._plots){B=L._plots[H],W=B.xaxis,re=B.yaxis;var ie=B.clipId="clip"+L._uid+H+"plot",ne=y.ensureSingleById(L._clips,"clipPath",ie,function(Ot){Ot.classed("plotclip",!0).append("rect")});B.clipRect=ne.select("rect").attr({width:W._length,height:re._length}),i.setTranslate(B.plot,W._offset,re._offset);var oe,se;B._hasClipOnAxisFalse?(oe=null,se=ie):(oe=ie,se=null),i.setClipUrl(B.plot,oe,E),B.layerClipId=se}var me,ce,pe,xe,Se,Ae,Ce,Ee,Oe,_e,Re,Ve,Je;function ze(Ot){return"M"+me+","+Ot+"H"+ce}function De(Ot){return"M"+W._offset+","+Ot+"h"+W._length}function je(Ot){return"M"+Ot+","+Ee+"V"+Ce}function dt(Ot){return"M"+Ot+","+re._offset+"v"+re._length}function Et(Ot,Vt,kt){if(!Ot.showline||H!==Ot._mainSubplot)return"";if(!Ot._anchorAxis)return kt(Ot._mainLinePosition);var St=Vt(Ot._mainLinePosition);return Ot.mirror&&(St+=Vt(Ot._mainMirrorPosition)),St}for(H in L._plots){B=L._plots[H],W=B.xaxis,re=B.yaxis;var $t="M0,0";S(W,H)&&(Se=x(W,"left",re,R),me=W._offset-(Se?O+Se:0),Ae=x(W,"right",re,R),ce=W._offset+W._length+(Ae?O+Ae:0),pe=Q(W,re,"bottom"),xe=Q(W,re,"top"),Je=!W._anchorAxis||H!==W._mainSubplot,Je&&(W.mirror==="allticks"||W.mirror==="all")&&(W._linepositions[H]=[pe,xe]),$t=Et(W,ze,De),Je&&W.showline&&(W.mirror==="all"||W.mirror==="allticks")&&($t+=ze(pe)+ze(xe)),B.xlines.style("stroke-width",W._lw+"px").call(a.stroke,W.showline?W.linecolor:"rgba(0,0,0,0)")),B.xlines.attr("d",$t);var wt="M0,0";S(re,H)&&(Re=x(re,"bottom",W,R),Ce=re._offset+re._length+(Re?O:0),Ve=x(re,"top",W,R),Ee=re._offset-(Ve?O:0),Oe=Q(re,W,"left"),_e=Q(re,W,"right"),Je=!re._anchorAxis||H!==re._mainSubplot,Je&&(re.mirror==="allticks"||re.mirror==="all")&&(re._linepositions[H]=[Oe,_e]),wt=Et(re,je,dt),Je&&re.showline&&(re.mirror==="all"||re.mirror==="allticks")&&(wt+=je(Oe)+je(_e)),B.ylines.style("stroke-width",re._lw+"px").call(a.stroke,re.showline?re.linecolor:"rgba(0,0,0,0)")),B.ylines.attr("d",wt)}return f.makeClipPaths(E),h.previousPromises(E)}function S(E,L){return(E.ticks||E.showline)&&(L===E._mainSubplot||E.mirror==="all"||E.mirror==="allticks")}function T(E,L,z){if(!z.showline||!z._lw)return!1;if(z.mirror==="all"||z.mirror==="allticks")return!0;var O=z._anchorAxis;if(!O)return!1;var R=u.FROM_BL[L];return z.side===L?O.domain[R]===E.domain[R]:z.mirror&&O.domain[1-R]===E.domain[1-R]}function x(E,L,z,O){if(T(E,L,z))return z._lw;for(var R=0;R<O.length;R++){var D=O[R];if(D._mainAxis===z._mainAxis&&T(E,L,D))return D._lw}return 0}F.drawMainTitle=function(E){var L=E._fullLayout,z=C(L),O=M(L);n.draw(E,"gtitle",{propContainer:L,propName:"title.text",placeholder:L._dfltTitle.plot,attributes:{x:w(L,z),y:v(L,O),"text-anchor":z,dy:O}})};function w(E,L){var z=E.title,O=E._size,R=0;switch(L===g?R=z.pad.l:L===p&&(R=-z.pad.r),z.xref){case"paper":return O.l+O.w*z.x+R;case"container":default:return E.width*z.x+R}}function v(E,L){var z=E.title,O=E._size,R=0;if(L==="0em"||!L?R=-z.pad.b:L===u.CAP_SHIFT+"em"&&(R=z.pad.t),z.y==="auto")return O.t/2;switch(z.yref){case"paper":return O.t+O.h-O.h*z.y+R;case"container":default:return E.height-E.height*z.y+R}}function C(E){var L=E.title,z=_;return y.isRightAnchor(L)?z=p:y.isLeftAnchor(L)&&(z=g),z}function M(E){var L=E.title,z="0em";return y.isTopAnchor(L)?z=u.CAP_SHIFT+"em":y.isMiddleAnchor(L)&&(z=u.MID_SHIFT+"em"),z}F.doTraceStyle=function(E){var L=E.calcdata,z=[],O;for(O=0;O<L.length;O++){var R=L[O],D=R[0]||{},H=D.trace||{},B=H._module||{},$=B.arraysToCalcdata;$&&$(R,H);var W=B.editStyle;W&&z.push({fn:W,cd0:D})}if(z.length){for(O=0;O<z.length;O++){var re=z[O];re.fn(E,re.cd0)}t(E),F.redrawReglTraces(E)}return h.style(E),o.getComponentMethod("legend","draw")(E),h.previousPromises(E)},F.doColorBars=function(E){return o.getComponentMethod("colorbar","draw")(E),h.previousPromises(E)},F.layoutReplot=function(E){var L=E.layout;return E.layout=void 0,o.call("_doPlot",E,"",L)},F.doLegend=function(E){return o.getComponentMethod("legend","draw")(E),h.previousPromises(E)},F.doTicksRelayout=function(E){return f.draw(E,"redraw"),E._fullLayout._hasOnlyLargeSploms&&(o.subplotsRegistry.splom.updateGrid(E),t(E),F.redrawReglTraces(E)),F.drawMainTitle(E),h.previousPromises(E)},F.doModeBar=function(E){var L=E._fullLayout;r.manage(E);for(var z=0;z<L._basePlotModules.length;z++){var O=L._basePlotModules[z].updateFx;O&&O(E)}return h.previousPromises(E)},F.doCamera=function(E){for(var L=E._fullLayout,z=L._subplots.gl3d,O=0;O<z.length;O++){var R=L[z[O]],D=R._scene;D.setViewport(R)}},F.drawData=function(E){var L=E._fullLayout;t(E);for(var z=L._basePlotModules,O=0;O<z.length;O++)z[O].plot(E);return F.redrawReglTraces(E),h.style(E),o.getComponentMethod("shapes","draw")(E),o.getComponentMethod("annotations","draw")(E),o.getComponentMethod("images","draw")(E),L._replotting=!1,h.previousPromises(E)},F.redrawReglTraces=function(E){var L=E._fullLayout;if(L._has("regl")){var z=E._fullData,O=[],R=[],D,H;for(L._hasOnlyLargeSploms&&L._splomGrid.draw(),D=0;D<z.length;D++){var B=z[D];B.visible===!0&&B._length!==0&&(B.type==="splom"?L._splomScenes[B.uid].draw():B.type==="scattergl"?y.pushUnique(O,B.xaxis+B.yaxis):B.type==="scatterpolargl"&&y.pushUnique(R,B.subplot))}for(D=0;D<O.length;D++)H=L._plots[O[D]],H._scene&&H._scene.draw();for(D=0;D<R.length;D++)H=L[R[D]]._subplot,H._scene&&H._scene.draw()}},F.doAutoRangeAndConstraints=function(E){for(var L=f.list(E,"",!0),z,O={},R=0;R<L.length;R++)if(z=L[R],!O[z._id]){O[z._id]=1,d(E,z),b(E,z);var D=z._matchGroup;if(D)for(var H in D){var B=f.getFromId(E,H);b(E,B,z.range),O[H]=1}}m(E)},F.finalDraw=function(E){o.getComponentMethod("rangeslider","draw")(E),o.getComponentMethod("rangeselector","draw")(E)},F.drawMarginPushers=function(E){o.getComponentMethod("legend","draw")(E),o.getComponentMethod("rangeselector","draw")(E),o.getComponentMethod("sliders","draw")(E),o.getComponentMethod("updatemenus","draw")(E),o.getComponentMethod("colorbar","draw")(E)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(e,I,F){var s=e("../lib"),o=s.isPlainObject,h=e("./plot_schema"),y=e("../plots/plots"),t=e("../plots/attributes"),a=e("./plot_template"),i=e("./plot_config").dfltConfig;F.makeTemplate=function(g){g=s.isPlainObject(g)?g:s.getGraphDiv(g),g=s.extendDeep({_context:i},{data:g.data,layout:g.layout}),y.supplyDefaults(g);var _=g.data||[],p=g.layout||{};p._basePlotModules=g._fullLayout._basePlotModules,p._modules=g._fullLayout._modules;var A={data:{},layout:{}};_.forEach(function(L){var z={};f(L,z,l.bind(null,L));var O=s.coerce(L,{},t,"type"),R=A.data[O];R||(R=A.data[O]=[]),R.push(z)}),f(p,A.layout,u.bind(null,p)),delete A.layout.template;var c=p.template;if(o(c)){var S=c.layout,T,x,w,v,C,M;o(S)&&n(S,A.layout);var E=c.data;if(o(E)){for(x in A.data)if(w=E[x],Array.isArray(w)){for(C=A.data[x],M=C.length,v=w.length,T=0;T<M;T++)n(w[T%v],C[T]);for(T=M;T<v;T++)C.push(s.extendDeep({},w[T]))}for(x in E)x in A.data||(A.data[x]=s.extendDeep([],E[x]))}}return A};function n(g,_){g=s.extendDeep({},g);var p=Object.keys(g).sort(),A,c;function S(C,M,E){if(o(M)&&o(C))n(C,M);else if(Array.isArray(M)&&Array.isArray(C)){var L=a.arrayTemplater({_template:g},E);for(c=0;c<M.length;c++){var z=M[c],O=L.newItem(z)._template;O&&n(O,z)}var R=L.defaultItems();for(c=0;c<R.length;c++)M.push(R[c]._template);for(c=0;c<M.length;c++)delete M[c].templateitemname}}for(A=0;A<p.length;A++){var T=p[A],x=g[T];if(T in _?S(x,_[T],T):_[T]=x,r(T)===T)for(var w in _){var v=r(w);w!==v&&v===T&&!(w in g)&&S(x,_[w],T)}}}function r(g){return g.replace(/[0-9]+$/,"")}function f(g,_,p,A,c){var S=c&&p(c);for(var T in g){var x=g[T],w=m(g,T,A),v=m(g,T,c),C=p(v);if(!C){var M=r(T);M!==T&&(v=m(g,M,c),C=p(v))}if(!(S&&S===C)&&!(!C||C._noTemplating||C.valType==="data_array"||C.arrayOk&&Array.isArray(x)))if(!C.valType&&o(x))f(x,_,p,w,v);else if(C._isLinkedToArray&&Array.isArray(x))for(var E=!1,L=0,z={},O=0;O<x.length;O++){var R=x[O];if(o(R)){var D=R.name;if(D)z[D]||(f(R,_,p,m(x,L,w),m(x,L,v)),L++,z[D]=1);else if(!E){var H=a.arrayDefaultKey(T),B=m(g,H,A),$=m(x,L,w);f(R,_,p,$,m(x,L,v));var W=s.nestedProperty(_,$),re=s.nestedProperty(_,B);re.set(W.get()),W.set(null),E=!0}}}else{var Q=s.nestedProperty(_,w);Q.set(x)}}}function u(g,_){return h.getLayoutValObject(g,s.nestedProperty({},_).parts)}function l(g,_){return h.getTraceValObject(g,s.nestedProperty({},_).parts)}function m(g,_,p){var A;return p?Array.isArray(g)?A=p+"["+_+"]":A=p+"."+_:A=_,A}F.validateTemplate=function(g,_){var p=s.extendDeep({},{_context:i,data:g.data,layout:g.layout}),A=p.layout||{};o(_)||(_=A.template||{});var c=_.layout,S=_.data,T=[];p.layout=A,p.layout.template=_,y.supplyDefaults(p);var x=p._fullLayout,w=p._fullData,v={};function C(B,$){for(var W in B)if(W.charAt(0)!=="_"&&o(B[W])){var re=r(W),Q=[],Z;for(Z=0;Z<$.length;Z++)Q.push(m(B,W,$[Z])),re!==W&&Q.push(m(B,re,$[Z]));for(Z=0;Z<Q.length;Z++)v[Q[Z]]=1;C(B[W],Q)}}function M(B,$){for(var W in B)if(W.indexOf("defaults")===-1&&o(B[W])){var re=m(B,W,$);v[re]?M(B[W],re):T.push({code:"unused",path:re})}}if(o(c)?(C(x,["layout"]),M(c,"layout")):T.push({code:"layout"}),!o(S))T.push({code:"data"});else{for(var E={},L,z=0;z<w.length;z++){var O=w[z];L=O.type,E[L]=(E[L]||0)+1,O._fullInput._template||T.push({code:"missing",index:O._fullInput.index,traceType:L})}for(L in S){var R=S[L].length,D=E[L]||0;R>D?T.push({code:"unused",traceType:L,templateCount:R,dataCount:D}):D>R&&T.push({code:"reused",traceType:L,templateCount:R,dataCount:D})}}function H(B,$){for(var W in B)if(W.charAt(0)!=="_"){var re=B[W],Q=m(B,W,$);o(re)?(Array.isArray(B)&&re._template===!1&&re.templateitemname&&T.push({code:"missing",path:Q,templateitemname:re.templateitemname}),H(re,Q)):Array.isArray(re)&&d(re)&&H(re,Q)}}if(H({data:w,layout:x},""),T.length)return T.map(b)};function d(g){for(var _=0;_<g.length;_++)if(o(g[_]))return!0}function b(g){var _;switch(g.code){case"data":_="The template has no key data.";break;case"layout":_="The template has no key layout.";break;case"missing":g.path?_="There are no templates for item "+g.path+" with name "+g.templateitemname:_="There are no templates for trace "+g.index+", of type "+g.traceType+".";break;case"unused":g.path?_="The template item at "+g.path+" was not used in constructing the plot.":g.dataCount?_="Some of the templates of type "+g.traceType+" were not used. The template has "+g.templateCount+" traces, the data only has "+g.dataCount+" of this type.":_="The template has "+g.templateCount+" traces of type "+g.traceType+" but there are none in the data.";break;case"reused":_="Some of the templates of type "+g.traceType+" were used more than once. The template has "+g.templateCount+" traces, the data has "+g.dataCount+" of this type.";break}return g.msg=_,g}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(e,I,F){var s=e("fast-isnumeric"),o=e("./plot_api"),h=e("../plots/plots"),y=e("../lib"),t=e("../snapshot/helpers"),a=e("../snapshot/tosvg"),i=e("../snapshot/svgtoimg"),n=e("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function f(u,l){l=l||{};var m,d,b,g;y.isPlainObject(u)?(m=u.data||[],d=u.layout||{},b=u.config||{},g={}):(u=y.getGraphDiv(u),m=y.extendDeep([],u.data),d=y.extendDeep({},u.layout),b=u._context,g=u._fullLayout||{});function _(D){return!(D in l)||y.validate(l[D],r[D])}if(!_("width")&&l.width!==null||!_("height")&&l.height!==null)throw new Error("Height and width should be pixel values.");if(!_("format"))throw new Error("Export format is not "+y.join2(r.format.values,", "," or ")+".");var p={};function A(D,H){return y.coerce(l,p,r,D,H)}var c=A("format"),S=A("width"),T=A("height"),x=A("scale"),w=A("setBackground"),v=A("imageDataOnly"),C=document.createElement("div");C.style.position="absolute",C.style.left="-5000px",document.body.appendChild(C);var M=y.extendFlat({},d);S?M.width=S:l.width===null&&s(g.width)&&(M.width=g.width),T?M.height=T:l.height===null&&s(g.height)&&(M.height=g.height);var E=y.extendFlat({},b,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),L=t.getRedrawFunc(C);function z(){return new Promise(function(D){setTimeout(D,t.getDelay(C._fullLayout))})}function O(){return new Promise(function(D,H){var B=a(C,c,x),$=C._fullLayout.width,W=C._fullLayout.height;function re(){o.purge(C),document.body.removeChild(C)}if(c==="full-json"){var Q=h.graphJson(C,!1,"keepdata","object",!0,!0);return Q.version=n,Q=JSON.stringify(Q),re(),D(v?Q:t.encodeJSON(Q))}if(re(),c==="svg")return D(v?B:t.encodeSVG(B));var Z=document.createElement("canvas");Z.id=y.randstr(),i({format:c,width:$,height:W,scale:x,canvas:Z,svg:B,promise:!0}).then(D).catch(H)})}function R(D){return v?D.replace(t.IMAGE_URL_PREFIX,""):D}return new Promise(function(D,H){o.newPlot(C,m,M,E).then(L).then(z).then(O).then(function(B){D(R(B))}).catch(function(B){H(B)})})}I.exports=f},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1123,"./plot_api":540,"fast-isnumeric":190}],547:[function(e,I,F){var s=e("../lib"),o=e("../plots/plots"),h=e("./plot_schema"),y=e("./plot_config").dfltConfig,t=s.isPlainObject,a=Array.isArray,i=s.isArrayOrTypedArray;I.exports=function(A,c){A===void 0&&(A=[]),c===void 0&&(c={});var S=h.get(),T=[],x={_context:s.extendFlat({},y)},w,v;a(A)?(x.data=s.extendDeep([],A),w=A):(x.data=[],w=[],T.push(l("array","data"))),t(c)?(x.layout=s.extendDeep({},c),v=c):(x.layout={},v={},arguments.length>1&&T.push(l("object","layout"))),o.supplyDefaults(x);for(var C=x._fullData,M=w.length,E=0;E<M;E++){var L=w[E],z=["data",E];if(!t(L)){T.push(l("object",z));continue}var O=C[E],R=O.type,D=S.traces[R].attributes;D.type={valType:"enumerated",values:[R]},O.visible===!1&&L.visible!==!1&&T.push(l("invisible",z)),n(L,O,D,T,z);var H=L.transforms,B=O.transforms;if(H){a(H)||T.push(l("array",z,["transforms"])),z.push("transforms");for(var $=0;$<H.length;$++){var W=["transforms",$],re=H[$].type;if(!t(H[$])){T.push(l("object",z,W));continue}var Q=S.transforms[re]?S.transforms[re].attributes:{};Q.type={valType:"enumerated",values:Object.keys(S.transforms)},n(H[$],B[$],Q,T,z,W)}}}var Z=x._fullLayout,K=r(S,C);return n(v,Z,K,T,"layout"),T.length===0?void 0:T};function n(p,A,c,S,T,x){x=x||[];for(var w=Object.keys(p),v=0;v<w.length;v++){var C=w[v];if(C!=="transforms"){var M=x.slice();M.push(C);var E=p[C],L=A[C],z=d(c,C),O=(z||{}).valType,R=O==="info_array",D=O==="colorscale",H=(z||{}).items;if(!m(c,C))S.push(l("schema",T,M));else if(t(E)&&t(L)&&O!=="any")n(E,L,z,S,T,M);else if(R&&a(E)){E.length>L.length&&S.push(l("unused",T,M.concat(L.length)));var B=L.length,$=Array.isArray(H);$&&(B=Math.min(B,H.length));var W,re,Q,Z,K;if(z.dimensions===2)for(re=0;re<B;re++)if(a(E[re])){E[re].length>L[re].length&&S.push(l("unused",T,M.concat(re,L[re].length)));var le=L[re].length;for(W=0;W<($?Math.min(le,H[re].length):le);W++)Q=$?H[re][W]:H,Z=E[re][W],K=L[re][W],s.validate(Z,Q)?K!==Z&&K!==+Z&&S.push(l("dynamic",T,M.concat(re,W),Z,K)):S.push(l("value",T,M.concat(re,W),Z))}else S.push(l("array",T,M.concat(re),E[re]));else for(re=0;re<B;re++)Q=$?H[re]:H,Z=E[re],K=L[re],s.validate(Z,Q)?K!==Z&&K!==+Z&&S.push(l("dynamic",T,M.concat(re),Z,K)):S.push(l("value",T,M.concat(re),Z))}else if(z.items&&!R&&a(E)){var fe=H[Object.keys(H)[0]],ue=[],V,j;for(V=0;V<L.length;V++){var ee=L[V]._index||V;if(j=M.slice(),j.push(ee),t(E[ee])&&t(L[V])){ue.push(ee);var q=E[ee],X=L[V];t(q)&&q.visible!==!1&&X.visible===!1?S.push(l("invisible",T,j)):n(q,X,fe,S,T,j)}}for(V=0;V<E.length;V++)j=M.slice(),j.push(V),t(E[V])?ue.indexOf(V)===-1&&S.push(l("unused",T,j)):S.push(l("object",T,j,E[V]))}else!t(E)&&t(L)?S.push(l("object",T,M,E)):!i(E)&&i(L)&&!R&&!D?S.push(l("array",T,M,E)):C in A?s.validate(E,z)?z.valType==="enumerated"&&(z.coerceNumber&&E!==+L||E!==L)&&S.push(l("dynamic",T,M,E,L)):S.push(l("value",T,M,E)):S.push(l("unused",T,M,E))}}return S}function r(p,A){for(var c=p.layout.layoutAttributes,S=0;S<A.length;S++){var T=A[S],x=p.traces[T.type],w=x.layoutAttributes;w&&(T.subplot?s.extendFlat(c[x.attributes.subplot.dflt],w):s.extendFlat(c,w))}return c}var f={object:function(p,A){var c;return p==="layout"&&A===""?c="The layout argument":p[0]==="data"&&A===""?c="Trace "+p[1]+" in the data argument":c=u(p)+"key "+A,c+" must be linked to an object container"},array:function(p,A){var c;return p==="data"?c="The data argument":c=u(p)+"key "+A,c+" must be linked to an array container"},schema:function(p,A){return u(p)+"key "+A+" is not part of the schema"},unused:function(p,A,c){var S=t(c)?"container":"key";return u(p)+S+" "+A+" did not get coerced"},dynamic:function(p,A,c,S){return[u(p)+"key",A,"(set to '"+c+"')","got reset to","'"+S+"'","during defaults."].join(" ")},invisible:function(p,A){return(A?u(p)+"item "+A:"Trace "+p[1])+" got defaulted to be not visible"},value:function(p,A,c){return[u(p)+"key "+A,"is set to an invalid value ("+c+")"].join(" ")}};function u(p){return a(p)?"In data trace "+p[1]+", ":"In "+p+", "}function l(p,A,c,S,T){c=c||"";var x,w;a(A)?(x=A[0],w=A[1]):(x=A,w=null);var v=_(c),C=f[p](A,v,S,T);return s.log(C),{code:p,container:x,trace:w,path:c,astr:v,msg:C}}function m(p,A){var c=g(A),S=c.keyMinusId,T=c.id;return S in p&&p[S]._isSubplotObj&&T?!0:A in p}function d(p,A){if(A in p)return p[A];var c=g(A);return p[c.keyMinusId]}var b=s.counterRegex("([a-z]+)");function g(p){var A=p.match(b);return{keyMinusId:A&&A[1],id:A&&A[2]}}function _(p){if(!a(p))return String(p);for(var A="",c=0;c<p.length;c++){var S=p[c];typeof S=="number"?A=A.substr(0,A.length-1)+"["+S+"]":A+=S,c<p.length-1&&(A+=".")}return A}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(e,I,F){I.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(e,I,F){var s=e("../lib"),o=e("../plot_api/plot_template");I.exports=function(y,t,a){var i=a.name,n=a.inclusionAttr||"visible",r=t[i],f=s.isArrayOrTypedArray(y[i])?y[i]:[],u=t[i]=[],l=o.arrayTemplater(t,i,n),m,d;for(m=0;m<f.length;m++){var b=f[m];s.isPlainObject(b)?d=l.newItem(b):(d=l.newItem({}),d[n]=!1),d._index=m,d[n]!==!1&&a.handleItemDefaults(b,d,t,a),u.push(d)}var g=l.defaultItems();for(m=0;m<g.length;m++)d=g[m],d._index=u.length,a.handleItemDefaults({},d,t,a,{}),u.push(d);if(s.isArrayOrTypedArray(r)){var _=Math.min(r.length,u.length);for(m=0;m<_;m++)s.relinkPrivateKeys(u[m],r[m])}return u}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(e,I,F){var s=e("./font_attributes"),o=e("../components/fx/attributes");I.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:s({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:o.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=o.dateTime2ms,y=o.incrementMonth,t=e("../../constants/numerical"),a=t.ONEAVGMONTH;I.exports=function(n,r,f,u){if(r.type!=="date")return{vals:u};var l=n[f+"periodalignment"];if(!l)return{vals:u};var m=n[f+"period"],d;if(s(m)){if(m=+m,m<=0)return{vals:u}}else if(typeof m=="string"&&m.charAt(0)==="M"){var b=+m.substring(1);if(b>0&&Math.round(b)===b)d=b;else return{vals:u}}for(var g=r.calendar,_=l==="start",p=l==="end",A=n[f+"period0"],c=h(A,g)||0,S=[],T=[],x=[],w=u.length,v=0;v<w;v++){var C=u[v],M,E,L;if(d){for(M=Math.round((C-c)/(d*a)),L=y(c,d*M,g);L>C;)L=y(L,-d,g);for(;L<=C;)L=y(L,d,g);E=y(L,-d,g)}else{for(M=Math.round((C-c)/m),L=c+M*m;L>C;)L-=m;for(;L<=C;)L+=m;E=L-m}S[v]=_?E:p?L:(E+L)/2,T[v]=E,x[v]=L}return{vals:S,starts:T,ends:x}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(e,I,F){I.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("../../lib"),y=e("../../constants/numerical").FP_SAFE,t=e("../../registry"),a=e("../../components/drawing"),i=e("./axis_ids"),n=i.getFromId,r=i.isLinked;I.exports={getAutoRange:f,makePadFn:l,doAutoRange:g,findExtremes:_,concatExtremes:b};function f(w,v){var C,M,E=[],L=w._fullLayout,z=l(L,v,0),O=l(L,v,1),R=b(w,v),D=R.min,H=R.max;if(D.length===0||H.length===0)return h.simpleMap(v.range,v.r2l);var B=D[0].val,$=H[0].val;for(C=1;C<D.length&&B===$;C++)B=Math.min(B,D[C].val);for(C=1;C<H.length&&B===$;C++)$=Math.max($,H[C].val);var W=!1;if(v.range){var re=h.simpleMap(v.range,v.r2l);W=re[1]<re[0]}v.autorange==="reversed"&&(W=!0,v.autorange=!0);var Q=v.rangemode,Z=Q==="tozero",K=Q==="nonnegative",le=v._length,fe=le/10,ue=0,V,j,ee,q,X,J;for(C=0;C<D.length;C++)for(V=D[C],M=0;M<H.length;M++)j=H[M],J=j.val-V.val-u(v,V.val,j.val),J>0&&(X=le-z(V)-O(j),X>fe?J/X>ue&&(ee=V,q=j,ue=J/X):J/le>ue&&(ee={val:V.val,nopad:1},q={val:j.val,nopad:1},ue=J/le));function ie(ce,pe){return Math.max(ce,O(pe))}if(B===$){var ne=B-1,oe=B+1;if(Z)if(B===0)E=[0,1];else{var se=(B>0?H:D).reduce(ie,0),me=B/(1-Math.min(.5,se/le));E=B>0?[0,me]:[me,0]}else K?E=[Math.max(0,ne),Math.max(1,oe)]:E=[ne,oe]}else Z?(ee.val>=0&&(ee={val:0,nopad:1}),q.val<=0&&(q={val:0,nopad:1})):K&&(ee.val-ue*z(ee)<0&&(ee={val:0,nopad:1}),q.val<=0&&(q={val:1,nopad:1})),ue=(q.val-ee.val-u(v,V.val,j.val))/(le-z(ee)-O(q)),E=[ee.val-ue*z(ee),q.val+ue*O(q)];return W&&E.reverse(),h.simpleMap(E,v.l2r||Number)}function u(w,v,C){var M=0;if(w.rangebreaks)for(var E=w.locateBreaks(v,C),L=0;L<E.length;L++){var z=E[L];M+=z.max-z.min}return M}function l(w,v,C){var M=.05*v._length,E=v._anchorAxis||{};if((v.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var L=v.autorange==="reversed";if(!L){var z=h.simpleMap(v.range,v.r2l);L=z[1]<z[0]}L&&(C=!C)}var O=0;return r(w,v._id)||(O=d(w,v,C)),M=Math.max(O,M),v.constrain==="domain"&&v._inputDomain&&(M*=(v._inputDomain[1]-v._inputDomain[0])/(v.domain[1]-v.domain[0])),function(D){return D.nopad?0:D.pad+(D.extrapad?M:O)}}var m=3;function d(w,v,C){var M=0,E=v._id.charAt(0)==="x";for(var L in w._plots){var z=w._plots[L];if(!(v._id!==z.xaxis._id&&v._id!==z.yaxis._id)){var O=(E?z.yaxis:z.xaxis)||{};if((O.ticklabelposition||"").indexOf("inside")!==-1&&(!C&&(O.side==="left"||O.side==="bottom")||C&&(O.side==="top"||O.side==="right"))){if(O._vals){var R=h.deg2rad(O._tickAngles[O._id+"tick"]||0),D=Math.abs(Math.cos(R)),H=Math.abs(Math.sin(R));if(!O._vals[0].bb){var B=O._id+"tick",$=O._selections[B];$.each(function(le){var fe=s.select(this),ue=fe.select(".text-math-group");ue.empty()&&(le.bb=a.bBox(fe.node()))})}for(var W=0;W<O._vals.length;W++){var re=O._vals[W],Q=re.bb;if(Q){var Z=2*m+Q.width,K=2*m+Q.height;M=Math.max(M,E?Math.max(Z*D,K*H):Math.max(K*D,Z*H))}}}O.ticks==="inside"&&O.ticklabelposition==="inside"&&(M+=O.ticklen||0)}}}return M}function b(w,v,C){var M=v._id,E=w._fullData,L=w._fullLayout,z=[],O=[],R,D,H;function B(Z,K){for(R=0;R<K.length;R++){var le=Z[K[R]],fe=(le._extremes||{})[M];if(le.visible===!0&&fe){for(D=0;D<fe.min.length;D++)H=fe.min[D],p(z,H.val,H.pad,{extrapad:H.extrapad});for(D=0;D<fe.max.length;D++)H=fe.max[D],A(O,H.val,H.pad,{extrapad:H.extrapad})}}}if(B(E,v._traceIndices),B(L.annotations||[],v._annIndices||[]),B(L.shapes||[],v._shapeIndices||[]),v._matchGroup&&!C){for(var $ in v._matchGroup)if($!==v._id){var W=n(w,$),re=b(w,W,!0),Q=v._length/W._length;for(D=0;D<re.min.length;D++)H=re.min[D],p(z,H.val,H.pad*Q,{extrapad:H.extrapad});for(D=0;D<re.max.length;D++)H=re.max[D],A(O,H.val,H.pad*Q,{extrapad:H.extrapad})}}return{min:z,max:O}}function g(w,v,C){if(v.setScale(),v.autorange){v.range=C?C.slice():f(w,v),v._r=v.range.slice(),v._rl=h.simpleMap(v._r,v.r2l);var M=v._input,E={};E[v._attr+".range"]=v.range,E[v._attr+".autorange"]=v.autorange,t.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,E),M.range=v.range.slice(),M.autorange=v.autorange}var L=v._anchorAxis;if(L&&L.rangeslider){var z=L.rangeslider[v._name];z&&z.rangemode==="auto"&&(z.range=f(w,v)),L._input.rangeslider[v._name]=h.extendFlat({},z)}}function _(w,v,C){C||(C={}),w._m||w.setScale();var M=[],E=[],L=v.length,z=C.padded||!1,O=C.tozero&&(w.type==="linear"||w.type==="-"),R=w.type==="log",D=!1,H=C.vpadLinearized||!1,B,$,W,re,Q,Z,K,le,fe;function ue(ne){if(Array.isArray(ne))return D=!0,function(se){return Math.max(Number(ne[se]||0),0)};var oe=Math.max(Number(ne||0),0);return function(){return oe}}var V=ue((w._m>0?C.ppadplus:C.ppadminus)||C.ppad||0),j=ue((w._m>0?C.ppadminus:C.ppadplus)||C.ppad||0),ee=ue(C.vpadplus||C.vpad),q=ue(C.vpadminus||C.vpad);if(!D){if(le=1/0,fe=-1/0,R)for(B=0;B<L;B++)$=v[B],$<le&&$>0&&(le=$),$>fe&&$<y&&(fe=$);else for(B=0;B<L;B++)$=v[B],$<le&&$>-y&&(le=$),$>fe&&$<y&&(fe=$);v=[le,fe],L=2}var X={tozero:O,extrapad:z};function J(ne){W=v[ne],o(W)&&(Z=V(ne),K=j(ne),H?(re=w.c2l(W)-q(ne),Q=w.c2l(W)+ee(ne)):(le=W-q(ne),fe=W+ee(ne),R&&le<fe/10&&(le=fe/10),re=w.c2l(le),Q=w.c2l(fe)),O&&(re=Math.min(0,re),Q=Math.max(0,Q)),S(re)&&p(M,re,K,X),S(Q)&&A(E,Q,Z,X))}var ie=Math.min(6,L);for(B=0;B<ie;B++)J(B);for(B=L-1;B>=ie;B--)J(B);return{min:M,max:E,opts:C}}function p(w,v,C,M){c(w,v,C,M,T)}function A(w,v,C,M){c(w,v,C,M,x)}function c(w,v,C,M,E){for(var L=M.tozero,z=M.extrapad,O=!0,R=0;R<w.length&&O;R++){var D=w[R];if(E(D.val,v)&&D.pad>=C&&(D.extrapad||!z)){O=!1;break}else E(v,D.val)&&D.pad<=C&&(z||!D.extrapad)&&(w.splice(R,1),R--)}if(O){var H=L&&v===0;w.push({val:v,pad:H?0:C,extrapad:H?!1:z})}}function S(w){return o(w)&&Math.abs(w)<y}function T(w,v){return w<=v}function x(w,v){return w>=v}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("../../plots/plots"),y=e("../../registry"),t=e("../../lib"),a=t.strTranslate,i=e("../../lib/svg_text_utils"),n=e("../../components/titles"),r=e("../../components/color"),f=e("../../components/drawing"),u=e("./layout_attributes"),l=e("./clean_ticks"),m=e("../../constants/numerical"),d=m.ONEMAXYEAR,b=m.ONEAVGYEAR,g=m.ONEMINYEAR,_=m.ONEMAXQUARTER,p=m.ONEAVGQUARTER,A=m.ONEMINQUARTER,c=m.ONEMAXMONTH,S=m.ONEAVGMONTH,T=m.ONEMINMONTH,x=m.ONEWEEK,w=m.ONEDAY,v=w/2,C=m.ONEHOUR,M=m.ONEMIN,E=m.ONESEC,L=m.MINUS_SIGN,z=m.BADNUM,O={K:"zeroline"},R={K:"gridline",L:"path"},D={K:"tick",L:"path"},H={K:"tick",L:"text"},B=e("../../constants/alignment"),$=B.MID_SHIFT,W=B.CAP_SHIFT,re=B.LINE_SPACING,Q=B.OPPOSITE_SIDE,Z=3,K=I.exports={};K.setConvert=e("./set_convert");var le=e("./axis_autotype"),fe=e("./axis_ids"),ue=fe.idSort,V=fe.isLinked;K.id2name=fe.id2name,K.name2id=fe.name2id,K.cleanId=fe.cleanId,K.list=fe.list,K.listIds=fe.listIds,K.getFromId=fe.getFromId,K.getFromTrace=fe.getFromTrace;var j=e("./autorange");K.getAutoRange=j.getAutoRange,K.findExtremes=j.findExtremes;var ee=1e-4;function q(Te){var ke=(Te[1]-Te[0])*ee;return[Te[0]-ke,Te[1]+ke]}K.coerceRef=function(Te,ke,Ge,Ye,qe,at){var et=Ye.charAt(Ye.length-1),pt=Ge._fullLayout._subplots[et+"axis"],_t=Ye+"ref",Pt={};return qe||(qe=pt[0]||(typeof at=="string"?at:at[0])),at||(at=qe),pt=pt.concat(pt.map(function(Xt){return Xt+" domain"})),Pt[_t]={valType:"enumerated",values:pt.concat(at?typeof at=="string"?[at]:at:[]),dflt:qe},t.coerce(Te,ke,Pt,_t)},K.getRefType=function(Te){return Te===void 0?Te:Te==="paper"?"paper":Te==="pixel"?"pixel":/( domain)$/.test(Te)?"domain":"range"},K.coercePosition=function(Te,ke,Ge,Ye,qe,at){var et,pt,_t=K.getRefType(Ye);if(_t!=="range")et=t.ensureNumber,pt=Ge(qe,at);else{var Pt=K.getFromId(ke,Ye);at=Pt.fraction2r(at),pt=Ge(qe,at),et=Pt.cleanPos}Te[qe]=et(pt)},K.cleanPosition=function(Te,ke,Ge){var Ye=Ge==="paper"||Ge==="pixel"?t.ensureNumber:K.getFromId(ke,Ge).cleanPos;return Ye(Te)},K.redrawComponents=function(Te,ke){ke=ke||K.listIds(Te);var Ge=Te._fullLayout;function Ye(qe,at,et,pt){for(var _t=y.getComponentMethod(qe,at),Pt={},Xt=0;Xt<ke.length;Xt++)for(var zt=Ge[K.id2name(ke[Xt])],ur=zt[et],gr=0;gr<ur.length;gr++){var Mr=ur[gr];if(!Pt[Mr]&&(_t(Te,Mr),Pt[Mr]=1,pt))return}}Ye("annotations","drawOne","_annIndices"),Ye("shapes","drawOne","_shapeIndices"),Ye("images","draw","_imgIndices",!0)};var X=K.getDataConversions=function(Te,ke,Ge,Ye){var qe,at=Ge==="x"||Ge==="y"||Ge==="z"?Ge:Ye;if(Array.isArray(at)){if(qe={type:le(Ye,void 0,{autotypenumbers:Te._fullLayout.autotypenumbers}),_categories:[]},K.setConvert(qe),qe.type==="category")for(var et=0;et<Ye.length;et++)qe.d2c(Ye[et])}else qe=K.getFromTrace(Te,ke,at);return qe?{d2c:qe.d2c,c2d:qe.c2d}:at==="ids"?{d2c:ie,c2d:ie}:{d2c:J,c2d:J}};function J(Te){return+Te}function ie(Te){return String(Te)}K.getDataToCoordFunc=function(Te,ke,Ge,Ye){return X(Te,ke,Ge,Ye).d2c},K.counterLetter=function(Te){var ke=Te.charAt(0);if(ke==="x")return"y";if(ke==="y")return"x"},K.minDtick=function(Te,ke,Ge,Ye){["log","category","multicategory"].indexOf(Te.type)!==-1||!Ye?Te._minDtick=0:Te._minDtick===void 0?(Te._minDtick=ke,Te._forceTick0=Ge):Te._minDtick&&((Te._minDtick/ke+1e-6)%1<2e-6&&((Ge-Te._forceTick0)/ke%1+1.000001)%1<2e-6?(Te._minDtick=ke,Te._forceTick0=Ge):((ke/Te._minDtick+1e-6)%1>2e-6||((Ge-Te._forceTick0)/Te._minDtick%1+1.000001)%1>2e-6)&&(Te._minDtick=0))},K.saveRangeInitial=function(Te,ke){for(var Ge=K.list(Te,"",!0),Ye=!1,qe=0;qe<Ge.length;qe++){var at=Ge[qe],et=at._rangeInitial===void 0,pt=et||!(at.range[0]===at._rangeInitial[0]&&at.range[1]===at._rangeInitial[1]);(et&&at.autorange===!1||ke&&pt)&&(at._rangeInitial=at.range.slice(),Ye=!0)}return Ye},K.saveShowSpikeInitial=function(Te,ke){for(var Ge=K.list(Te,"",!0),Ye=!1,qe="on",at=0;at<Ge.length;at++){var et=Ge[at],pt=et._showSpikeInitial===void 0,_t=pt||et.showspikes!==et._showspikes;(pt||ke&&_t)&&(et._showSpikeInitial=et.showspikes,Ye=!0),qe==="on"&&!et.showspikes&&(qe="off")}return Te._fullLayout._cartesianSpikesEnabled=qe,Ye},K.autoBin=function(Te,ke,Ge,Ye,qe,at){var et=t.aggNums(Math.min,null,Te),pt=t.aggNums(Math.max,null,Te);if(ke.type==="category"||ke.type==="multicategory")return{start:et-.5,end:pt+.5,size:Math.max(1,Math.round(at)||1),_dataSpan:pt-et};qe||(qe=ke.calendar);var _t;if(ke.type==="log"?_t={type:"linear",range:[et,pt]}:_t={type:ke.type,range:t.simpleMap([et,pt],ke.c2r,0,qe),calendar:qe},K.setConvert(_t),at=at&&l.dtick(at,_t.type),at)_t.dtick=at,_t.tick0=l.tick0(void 0,_t.type,qe);else{var Pt;if(Ge)Pt=(pt-et)/Ge;else{var Xt=t.distinctVals(Te),zt=Math.pow(10,Math.floor(Math.log(Xt.minDiff)/Math.LN10)),ur=zt*t.roundUp(Xt.minDiff/zt,[.9,1.9,4.9,9.9],!0);Pt=Math.max(ur,2*t.stdev(Te)/Math.pow(Te.length,Ye?.25:.4)),o(Pt)||(Pt=1)}K.autoTicks(_t,Pt)}var gr=_t.dtick,Mr=K.tickIncrement(K.tickFirst(_t),gr,"reverse",qe),un,zr;if(typeof gr=="number")Mr=ne(Mr,Te,_t,et,pt),zr=1+Math.floor((pt-Mr)/gr),un=Mr+zr*gr;else for(_t.dtick.charAt(0)==="M"&&(Mr=oe(Mr,Te,gr,et,qe)),un=Mr,zr=0;un<=pt;)un=K.tickIncrement(un,gr,!1,qe),zr++;return{start:ke.c2r(Mr,0,qe),end:ke.c2r(un,0,qe),size:gr,_dataSpan:pt-et}};function ne(Te,ke,Ge,Ye,qe){var at=0,et=0,pt=0,_t=0;function Pt(gr){return(1+(gr-Te)*100/Ge.dtick)%100<2}for(var Xt=0;Xt<ke.length;Xt++)ke[Xt]%1===0?pt++:o(ke[Xt])||_t++,Pt(ke[Xt])&&at++,Pt(ke[Xt]+Ge.dtick/2)&&et++;var zt=ke.length-_t;if(pt===zt&&Ge.type!=="date")Ge.dtick<1?Te=Ye-.5*Ge.dtick:(Te-=.5,Te+Ge.dtick<Ye&&(Te+=Ge.dtick));else if(et<zt*.1&&(at>zt*.3||Pt(Ye)||Pt(qe))){var ur=Ge.dtick/2;Te+=Te+ur<Ye?ur:-ur}return Te}function oe(Te,ke,Ge,Ye,qe){var at=t.findExactDates(ke,qe),et=.8;if(at.exactDays>et){var pt=Number(Ge.substr(1));at.exactYears>et&&pt%12===0?Te=K.tickIncrement(Te,"M6","reverse")+w*1.5:at.exactMonths>et?Te=K.tickIncrement(Te,"M1","reverse")+w*15.5:Te-=v;var _t=K.tickIncrement(Te,Ge);if(_t<=Ye)return _t}return Te}K.prepTicks=function(Te,ke){var Ge=t.simpleMap(Te.range,Te.r2l,void 0,void 0,ke);if(Te._dtickInit=Te.dtick,Te._tick0Init=Te.tick0,Te.tickmode==="auto"||!Te.dtick){var Ye=Te.nticks,qe;Ye||(Te.type==="category"||Te.type==="multicategory"?(qe=Te.tickfont?t.bigFont(Te.tickfont.size||12):15,Ye=Te._length/qe):(qe=Te._id.charAt(0)==="y"?40:80,Ye=t.constrain(Te._length/qe,4,9)+1),Te._name==="radialaxis"&&(Ye*=2)),Te.tickmode==="array"&&(Ye*=100),Te._roughDTick=Math.abs(Ge[1]-Ge[0])/Ye,K.autoTicks(Te,Te._roughDTick),Te._minDtick>0&&Te.dtick<Te._minDtick*2&&(Te.dtick=Te._minDtick,Te.tick0=Te.l2r(Te._forceTick0))}Te.ticklabelmode==="period"&&me(Te),Te.tick0||(Te.tick0=Te.type==="date"?"2000-01-01":0),Te.type==="date"&&Te.dtick<.1&&(Te.dtick=.1),Ve(Te)};function se(Te){return+Te.substring(1)}function me(Te){var ke;function Ge(){return!(o(Te.dtick)||Te.dtick.charAt(0)!=="M")}var Ye=Ge(),qe=K.getTickFormat(Te);if(qe){var at=Te._dtickInit!==Te.dtick;/%[fLQsSMX]/.test(qe)||(/%[HI]/.test(qe)?(ke=C,at&&!Ye&&Te.dtick<C&&(Te.dtick=C)):/%p/.test(qe)?(ke=v,at&&!Ye&&Te.dtick<v&&(Te.dtick=v)):/%[Aadejuwx]/.test(qe)?(ke=w,at&&!Ye&&Te.dtick<w&&(Te.dtick=w)):/%[UVW]/.test(qe)?(ke=x,at&&!Ye&&Te.dtick<x&&(Te.dtick=x)):/%[Bbm]/.test(qe)?(ke=S,at&&(Ye?se(Te.dtick)<1:Te.dtick<T)&&(Te.dtick="M1")):/%[q]/.test(qe)?(ke=p,at&&(Ye?se(Te.dtick)<3:Te.dtick<A)&&(Te.dtick="M3")):/%[Yy]/.test(qe)&&(ke=b,at&&(Ye?se(Te.dtick)<12:Te.dtick<g)&&(Te.dtick="M12")))}Ye=Ge(),Ye&&Te.tick0===Te._dowTick0&&(Te.tick0=Te._rawTick0),Te._definedDelta=ke}function ce(Te,ke,Ge){for(var Ye=0;Ye<Te.length;Ye++){var qe=Te[Ye].value,at=Ye,et=Ye+1;Ye<Te.length-1?(at=Ye,et=Ye+1):Ye>0?(at=Ye-1,et=Ye):(at=Ye,et=Ye);var pt=Te[at].value,_t=Te[et].value,Pt=Math.abs(_t-pt),Xt=Ge||Pt,zt=0;Xt>=g?Pt>=g&&Pt<=d?zt=Pt:zt=b:Ge===p&&Xt>=A?Pt>=A&&Pt<=_?zt=Pt:zt=p:Xt>=T?Pt>=T&&Pt<=c?zt=Pt:zt=S:Ge===x&&Xt>=x?zt=x:Xt>=w?zt=w:Ge===v&&Xt>=v?zt=v:Ge===C&&Xt>=C&&(zt=C);var ur;zt>=Pt&&(zt=Pt,ur=!0);var gr=qe+zt;if(ke.rangebreaks&&zt>0){for(var Mr=84,un=0,zr=0;zr<Mr;zr++){var $r=(zr+.5)/Mr;ke.maskBreaks(qe*(1-$r)+$r*gr)!==z&&un++}zt*=un/Mr,zt||(Te[Ye].drop=!0),ur&&Pt>x&&(zt=Pt)}(zt>0||Ye===0)&&(Te[Ye].periodX=qe+zt/2)}}K.calcTicks=function(ke,Ge){K.prepTicks(ke,Ge);var Ye=t.simpleMap(ke.range,ke.r2l,void 0,void 0,Ge);if(ke.tickmode==="array")return pe(ke);var qe=q(Ye),at=qe[0],et=qe[1],pt=Ye[1]<Ye[0],_t=Math.min(Ye[0],Ye[1]),Pt=Math.max(Ye[0],Ye[1]),Xt=o(ke.dtick),zt=ke.type==="log"&&!(Xt||ke.dtick.charAt(0)==="L"),ur=ke.ticklabelmode==="period";if(ke._tmin=K.tickFirst(ke,Ge),ke._tmin<at!==pt)return[];(ke.type==="category"||ke.type==="multicategory")&&(et=pt?Math.max(-.5,et):Math.min(ke._categories.length-.5,et));var gr=ke._tmin;ke.rangebreaks&&ke._tick0Init!==ke.tick0&&(gr=Ht(gr,ke),pt||(gr=K.tickIncrement(gr,ke.dtick,!pt,ke.calendar))),ur&&(gr=K.tickIncrement(gr,ke.dtick,!pt,ke.calendar));var Mr=ke.ticklabelstep,un=Math.max(1e3,ke._length||0),zr=[],$r=null,hn;Xt?hn=ke.dtick:ke.type==="date"?typeof ke.dtick=="string"&&ke.dtick.charAt(0)==="M"&&(hn=S*ke.dtick.substring(1)):hn=ke._roughDTick;for(var Tr=Math.round((ke.r2l(gr)-ke.r2l(ke.tick0))/hn)-1;pt?gr>=et:gr<=et;gr=K.tickIncrement(gr,ke.dtick,pt,ke.calendar)){if(Tr++,ke.rangebreaks&&!pt){if(gr<at)continue;if(ke.maskBreaks(gr)===z&&Ht(gr,ke)>=Pt)break}if(zr.length>un||gr===$r)break;$r=gr;var wr=!1;zt&&gr!==(gr|0)&&(wr=!0);var Ur={minor:wr,value:gr};Mr>1&&Tr%Mr&&(Ur.skipLabel=!0),zr.push(Ur)}ur&&ce(zr,ke,ke._definedDelta);var Br;if(ke.rangebreaks){var Cr=ke._id.charAt(0)==="y",nt=1;ke.tickmode==="auto"&&(nt=ke.tickfont?ke.tickfont.size:12);var Rt=NaN;for(Br=zr.length-1;Br>-1;Br--){if(zr[Br].drop){zr.splice(Br,1);continue}zr[Br].value=Ht(zr[Br].value,ke);var Jt=ke.c2p(zr[Br].value);(Cr?Rt>Jt-nt:Rt<Jt+nt)?zr.splice(pt?Br+1:Br,1):Rt=Jt}}Zt(ke)&&Math.abs(Ye[1]-Ye[0])===360&&zr.pop(),ke._tmax=(zr[zr.length-1]||{}).value,ke._prevDateHead="",ke._inCalcTicks=!0;var hr,Dr=function(Nr){Nr.text=" ",ke._prevDateHead=hr},Gr=[],Rr,Ct;for(Br=0;Br<zr.length;Br++){var tr=zr[Br].minor,Lr=zr[Br].value;hr=ke._prevDateHead,Rr=K.tickText(ke,Lr,!1,tr),Ct=zr[Br].periodX,Ct!==void 0&&(Rr.periodX=Ct,(Ct>Pt||Ct<_t)&&(Ct>Pt&&(Rr.periodX=Pt),Ct<_t&&(Rr.periodX=_t),Dr(Rr))),zr[Br].skipLabel&&Dr(Rr),Gr.push(Rr)}return ke._inCalcTicks=!1,Gr};function pe(Te){var ke=Te.tickvals,Ge=Te.ticktext,Ye=new Array(ke.length),qe=t.simpleMap(Te.range,Te.r2l),at=q(qe),et=Math.min(at[0],at[1]),pt=Math.max(at[0],at[1]),_t=0;Array.isArray(Ge)||(Ge=[]);var Pt=Te.type==="category"?Te.d2l_noadd:Te.d2l;Te.type==="log"&&String(Te.dtick).charAt(0)!=="L"&&(Te.dtick="L"+Math.pow(10,Math.floor(Math.min(Te.range[0],Te.range[1]))-1));for(var Xt=0;Xt<ke.length;Xt++){var zt=Pt(ke[Xt]);zt>et&&zt<pt&&(Ge[Xt]===void 0?Ye[_t]=K.tickText(Te,zt):Ye[_t]=Je(Te,zt,String(Ge[Xt])),_t++)}return _t<ke.length&&Ye.splice(_t,ke.length-_t),Te.rangebreaks&&(Ye=Ye.filter(function(ur){return Te.maskBreaks(ur.x)!==z})),Ye}var xe=[2,5,10],Se=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Ce=[1,2,3,7,14],Ee=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Oe=[-.301,0,.301,.699,1],_e=[15,30,45,90,180];function Re(Te,ke,Ge){return ke*t.roundUp(Te/ke,Ge)}K.autoTicks=function(Te,ke){var Ge;function Ye(Xt){return Math.pow(Xt,Math.floor(Math.log(ke)/Math.LN10))}if(Te.type==="date"){Te.tick0=t.dateTick0(Te.calendar,0);var qe=2*ke;if(qe>b)ke/=b,Ge=Ye(10),Te.dtick="M"+12*Re(ke,Ge,xe);else if(qe>S)ke/=S,Te.dtick="M"+Re(ke,1,Se);else if(qe>w){Te.dtick=Re(ke,w,Te._hasDayOfWeekBreaks?[1,2,7,14]:Ce);var at=K.getTickFormat(Te),et=Te.ticklabelmode==="period";et&&(Te._rawTick0=Te.tick0),/%[uVW]/.test(at)?Te.tick0=t.dateTick0(Te.calendar,2):Te.tick0=t.dateTick0(Te.calendar,1),et&&(Te._dowTick0=Te.tick0)}else qe>C?Te.dtick=Re(ke,C,Se):qe>M?Te.dtick=Re(ke,M,Ae):qe>E?Te.dtick=Re(ke,E,Ae):(Ge=Ye(10),Te.dtick=Re(ke,Ge,xe))}else if(Te.type==="log"){Te.tick0=0;var pt=t.simpleMap(Te.range,Te.r2l);if(ke>.7)Te.dtick=Math.ceil(ke);else if(Math.abs(pt[1]-pt[0])<1){var _t=1.5*Math.abs((pt[1]-pt[0])/ke);ke=Math.abs(Math.pow(10,pt[1])-Math.pow(10,pt[0]))/_t,Ge=Ye(10),Te.dtick="L"+Re(ke,Ge,xe)}else Te.dtick=ke>.3?"D2":"D1"}else Te.type==="category"||Te.type==="multicategory"?(Te.tick0=0,Te.dtick=Math.ceil(Math.max(ke,1))):Zt(Te)?(Te.tick0=0,Ge=1,Te.dtick=Re(ke,Ge,_e)):(Te.tick0=0,Ge=Ye(10),Te.dtick=Re(ke,Ge,xe));if(Te.dtick===0&&(Te.dtick=1),!o(Te.dtick)&&typeof Te.dtick!="string"){var Pt=Te.dtick;throw Te.dtick=1,"ax.dtick error: "+String(Pt)}};function Ve(Te){var ke=Te.dtick;if(Te._tickexponent=0,!o(ke)&&typeof ke!="string"&&(ke=1),(Te.type==="category"||Te.type==="multicategory")&&(Te._tickround=null),Te.type==="date"){var Ge=Te.r2l(Te.tick0),Ye=Te.l2r(Ge).replace(/(^-|i)/g,""),qe=Ye.length;if(String(ke).charAt(0)==="M")qe>10||Ye.substr(5)!=="01-01"?Te._tickround="d":Te._tickround=+ke.substr(1)%12===0?"y":"m";else if(ke>=w&&qe<=10||ke>=w*15)Te._tickround="d";else if(ke>=M&&qe<=16||ke>=C)Te._tickround="M";else if(ke>=E&&qe<=19||ke>=M)Te._tickround="S";else{var at=Te.l2r(Ge+ke).replace(/^-/,"").length;Te._tickround=Math.max(qe,at)-20,Te._tickround<0&&(Te._tickround=4)}}else if(o(ke)||ke.charAt(0)==="L"){var et=Te.range.map(Te.r2d||Number);o(ke)||(ke=Number(ke.substr(1))),Te._tickround=2-Math.floor(Math.log(ke)/Math.LN10+.01);var pt=Math.max(Math.abs(et[0]),Math.abs(et[1])),_t=Math.floor(Math.log(pt)/Math.LN10+.01),Pt=Te.minexponent===void 0?3:Te.minexponent;Math.abs(_t)>Pt&&(Vt(Te.exponentformat)&&!kt(_t)?Te._tickexponent=3*Math.round((_t-1)/3):Te._tickexponent=_t)}else Te._tickround=null}K.tickIncrement=function(Te,ke,Ge,Ye){var qe=Ge?-1:1;if(o(ke))return t.increment(Te,qe*ke);var at=ke.charAt(0),et=qe*Number(ke.substr(1));if(at==="M")return t.incrementMonth(Te,et,Ye);if(at==="L")return Math.log(Math.pow(10,Te)+et)/Math.LN10;if(at==="D"){var pt=ke==="D2"?Oe:Ee,_t=Te+qe*.01,Pt=t.roundUp(t.mod(_t,1),pt,Ge);return Math.floor(_t)+Math.log(s.round(Math.pow(10,Pt),1))/Math.LN10}throw"unrecognized dtick "+String(ke)},K.tickFirst=function(Te,ke){var Ge=Te.r2l||Number,Ye=t.simpleMap(Te.range,Ge,void 0,void 0,ke),qe=Ye[1]<Ye[0],at=qe?Math.floor:Math.ceil,et=q(Ye)[0],pt=Te.dtick,_t=Ge(Te.tick0);if(o(pt)){var Pt=at((et-_t)/pt)*pt+_t;return(Te.type==="category"||Te.type==="multicategory")&&(Pt=t.constrain(Pt,0,Te._categories.length-1)),Pt}var Xt=pt.charAt(0),zt=Number(pt.substr(1));if(Xt==="M"){for(var ur=0,gr=_t,Mr,un,zr;ur<10;){if(Mr=K.tickIncrement(gr,pt,qe,Te.calendar),(Mr-et)*(gr-et)<=0)return qe?Math.min(gr,Mr):Math.max(gr,Mr);un=(et-(gr+Mr)/2)/(Mr-gr),zr=Xt+(Math.abs(Math.round(un))||1)*zt,gr=K.tickIncrement(gr,zr,un<0?!qe:qe,Te.calendar),ur++}return t.error("tickFirst did not converge",Te),gr}else{if(Xt==="L")return Math.log(at((Math.pow(10,et)-_t)/zt)*zt+_t)/Math.LN10;if(Xt==="D"){var $r=pt==="D2"?Oe:Ee,hn=t.roundUp(t.mod(et,1),$r,qe);return Math.floor(et)+Math.log(s.round(Math.pow(10,hn),1))/Math.LN10}else throw"unrecognized dtick "+String(pt)}},K.tickText=function(Te,ke,Ge,Ye){var qe=Je(Te,ke),at=Te.tickmode==="array",et=Ge||at,pt=Te.type,_t=pt==="category"?Te.d2l_noadd:Te.d2l,Pt;if(at&&Array.isArray(Te.ticktext)){var Xt=t.simpleMap(Te.range,Te.r2l),zt=(Math.abs(Xt[1]-Xt[0])-(Te._lBreaks||0))/1e4;for(Pt=0;Pt<Te.ticktext.length&&!(Math.abs(ke-_t(Te.tickvals[Pt]))<zt);Pt++);if(Pt<Te.ticktext.length)return qe.text=String(Te.ticktext[Pt]),qe}function ur(un){if(un===void 0)return!0;if(Ge)return un==="none";var zr={first:Te._tmin,last:Te._tmax}[un];return un!=="all"&&ke!==zr}var gr=Ge?"never":Te.exponentformat!=="none"&&ur(Te.showexponent)?"hide":"";if(pt==="date"?ze(Te,qe,Ge,et):pt==="log"?De(Te,qe,Ge,et,gr):pt==="category"?je(Te,qe):pt==="multicategory"?dt(Te,qe,Ge):Zt(Te)?$t(Te,qe,Ge,et,gr):Et(Te,qe,Ge,et,gr),Ye||(Te.tickprefix&&!ur(Te.showtickprefix)&&(qe.text=Te.tickprefix+qe.text),Te.ticksuffix&&!ur(Te.showticksuffix)&&(qe.text+=Te.ticksuffix)),Te.tickson==="boundaries"||Te.showdividers){var Mr=function(un){var zr=Te.l2p(un);return zr>=0&&zr<=Te._length?un:null};qe.xbnd=[Mr(qe.x-.5),Mr(qe.x+Te.dtick-.5)]}return qe},K.hoverLabelText=function(Te,ke,Ge){Ge&&(Te=t.extendFlat({},Te,{hoverformat:Ge}));var Ye=Array.isArray(ke)?ke[0]:ke,qe=Array.isArray(ke)?ke[1]:void 0;if(qe!==void 0&&qe!==Ye)return K.hoverLabelText(Te,Ye,Ge)+" - "+K.hoverLabelText(Te,qe,Ge);var at=Te.type==="log"&&Ye<=0,et=K.tickText(Te,Te.c2l(at?-Ye:Ye),"hover").text;return at?Ye===0?"0":L+et:et};function Je(Te,ke,Ge){var Ye=Te.tickfont||{};return{x:ke,dx:0,dy:0,text:Ge||"",fontSize:Ye.size,font:Ye.family,fontColor:Ye.color}}function ze(Te,ke,Ge,Ye){var qe=Te._tickround,at=Ge&&Te.hoverformat||K.getTickFormat(Te);Ye&&(o(qe)?qe=4:qe={y:"m",m:"d",d:"M",M:"S",S:4}[qe]);var et=t.formatDate(ke.x,at,qe,Te._dateFormat,Te.calendar,Te._extraFormat),pt,_t=et.indexOf(`
`);if(_t!==-1&&(pt=et.substr(_t+1),et=et.substr(0,_t)),Ye&&(et==="00:00:00"||et==="00:00"?(et=pt,pt=""):et.length===8&&(et=et.replace(/:00$/,""))),pt)if(Ge)qe==="d"?et+=", "+pt:et=pt+(et?", "+et:"");else if(!Te._inCalcTicks||Te._prevDateHead!==pt)Te._prevDateHead=pt,et+="<br>"+pt;else{var Pt=_r(Te),Xt=Te._trueSide||Te.side;(!Pt&&Xt==="top"||Pt&&Xt==="bottom")&&(et+="<br> ")}ke.text=et}function De(Te,ke,Ge,Ye,qe){var at=Te.dtick,et=ke.x,pt=Te.tickformat,_t=typeof at=="string"&&at.charAt(0);if(qe==="never"&&(qe=""),Ye&&_t!=="L"&&(at="L3",_t="L"),pt||_t==="L")ke.text=St(Math.pow(10,et),Te,qe,Ye);else if(o(at)||_t==="D"&&t.mod(et+.01,1)<.1){var Pt=Math.round(et),Xt=Math.abs(Pt),zt=Te.exponentformat;zt==="power"||Vt(zt)&&kt(Pt)?(Pt===0?ke.text=1:Pt===1?ke.text="10":ke.text="10<sup>"+(Pt>1?"":L)+Xt+"</sup>",ke.fontSize*=1.25):(zt==="e"||zt==="E")&&Xt>2?ke.text="1"+zt+(Pt>0?"+":L)+Xt:(ke.text=St(Math.pow(10,et),Te,"","fakehover"),at==="D1"&&Te._id.charAt(0)==="y"&&(ke.dy-=ke.fontSize/6))}else if(_t==="D")ke.text=String(Math.round(Math.pow(10,t.mod(et,1)))),ke.fontSize*=.75;else throw"unrecognized dtick "+String(at);if(Te.dtick==="D1"){var ur=String(ke.text).charAt(0);(ur==="0"||ur==="1")&&(Te._id.charAt(0)==="y"?ke.dx-=ke.fontSize/4:(ke.dy+=ke.fontSize/2,ke.dx+=(Te.range[1]>Te.range[0]?1:-1)*ke.fontSize*(et<0?.5:.25)))}}function je(Te,ke){var Ge=Te._categories[Math.round(ke.x)];Ge===void 0&&(Ge=""),ke.text=String(Ge)}function dt(Te,ke,Ge){var Ye=Math.round(ke.x),qe=Te._categories[Ye]||[],at=qe[1]===void 0?"":String(qe[1]),et=qe[0]===void 0?"":String(qe[0]);Ge?ke.text=et+" - "+at:(ke.text=at,ke.text2=et)}function Et(Te,ke,Ge,Ye,qe){qe==="never"?qe="":Te.showexponent==="all"&&Math.abs(ke.x/Te.dtick)<1e-6&&(qe="hide"),ke.text=St(ke.x,Te,qe,Ye)}function $t(Te,ke,Ge,Ye,qe){if(Te.thetaunit==="radians"&&!Ge){var at=ke.x/180;if(at===0)ke.text="0";else{var et=wt(at);if(et[1]>=100)ke.text=St(t.deg2rad(ke.x),Te,qe,Ye);else{var pt=ke.x<0;et[1]===1?et[0]===1?ke.text="\u03C0":ke.text=et[0]+"\u03C0":ke.text=["<sup>",et[0],"</sup>","\u2044","<sub>",et[1],"</sub>","\u03C0"].join(""),pt&&(ke.text=L+ke.text)}}}else ke.text=St(ke.x,Te,qe,Ye)}function wt(Te){function ke(pt,_t){return Math.abs(pt-_t)<=1e-6}function Ge(pt,_t){return ke(_t,0)?pt:Ge(_t,pt%_t)}function Ye(pt){for(var _t=1;!ke(Math.round(pt*_t)/_t,pt);)_t*=10;return _t}var qe=Ye(Te),at=Te*qe,et=Math.abs(Ge(at,qe));return[Math.round(at/et),Math.round(qe/et)]}var Ot=["f","p","n","\u03BC","m","","k","M","G","T"];function Vt(Te){return Te==="SI"||Te==="B"}function kt(Te){return Te>14||Te<-15}function St(Te,ke,Ge,Ye){var qe=Te<0,at=ke._tickround,et=Ge||ke.exponentformat||"B",pt=ke._tickexponent,_t=K.getTickFormat(ke),Pt=ke.separatethousands;if(Ye){var Xt={exponentformat:et,minexponent:ke.minexponent,dtick:ke.showexponent==="none"?ke.dtick:o(Te)&&Math.abs(Te)||1,range:ke.showexponent==="none"?ke.range.map(ke.r2d):[0,Te||1]};Ve(Xt),at=(Number(Xt._tickround)||0)+4,pt=Xt._tickexponent,ke.hoverformat&&(_t=ke.hoverformat)}if(_t)return ke._numFormat(_t)(Te).replace(/-/g,L);var zt=Math.pow(10,-at)/2;if(et==="none"&&(pt=0),Te=Math.abs(Te),Te<zt)Te="0",qe=!1;else{if(Te+=zt,pt&&(Te*=Math.pow(10,-pt),at+=pt),at===0)Te=String(Math.floor(Te));else if(at<0){Te=String(Math.round(Te)),Te=Te.substr(0,Te.length+at);for(var ur=at;ur<0;ur++)Te+="0"}else{Te=String(Te);var gr=Te.indexOf(".")+1;gr&&(Te=Te.substr(0,gr+at).replace(/\.?0+$/,""))}Te=t.numSeparate(Te,ke._separators,Pt)}if(pt&&et!=="hide"){Vt(et)&&kt(pt)&&(et="power");var Mr;pt<0?Mr=L+-pt:et!=="power"?Mr="+"+pt:Mr=String(pt),et==="e"||et==="E"?Te+=et+Mr:et==="power"?Te+="\xD710<sup>"+Mr+"</sup>":et==="B"&&pt===9?Te+="B":Vt(et)&&(Te+=Ot[pt/3+5])}return qe?L+Te:Te}K.getTickFormat=function(Te){var ke;function Ge(_t){return typeof _t!="string"?_t:Number(_t.replace("M",""))*S}function Ye(_t,Pt){var Xt=["L","D"];if(typeof _t==typeof Pt){if(typeof _t=="number")return _t-Pt;var zt=Xt.indexOf(_t.charAt(0)),ur=Xt.indexOf(Pt.charAt(0));return zt===ur?Number(_t.replace(/(L|D)/g,""))-Number(Pt.replace(/(L|D)/g,"")):zt-ur}else return typeof _t=="number"?1:-1}function qe(_t,Pt,Xt){var zt=Xt||function(Mr){return Mr},ur=Pt[0],gr=Pt[1];return(!ur&&typeof ur!="number"||zt(ur)<=zt(_t))&&(!gr&&typeof gr!="number"||zt(gr)>=zt(_t))}function at(_t,Pt){var Xt=Pt[0]===null,zt=Pt[1]===null,ur=Ye(_t,Pt[0])>=0,gr=Ye(_t,Pt[1])<=0;return(Xt||ur)&&(zt||gr)}var et,pt;if(Te.tickformatstops&&Te.tickformatstops.length>0)switch(Te.type){case"date":case"linear":{for(ke=0;ke<Te.tickformatstops.length;ke++)if(pt=Te.tickformatstops[ke],pt.enabled&&qe(Te.dtick,pt.dtickrange,Ge)){et=pt;break}break}case"log":{for(ke=0;ke<Te.tickformatstops.length;ke++)if(pt=Te.tickformatstops[ke],pt.enabled&&at(Te.dtick,pt.dtickrange)){et=pt;break}break}}return et?et.value:Te.tickformat},K.getSubplots=function(Te,ke){var Ge=Te._fullLayout._subplots,Ye=Ge.cartesian.concat(Ge.gl2d||[]),qe=ke?K.findSubplotsWithAxis(Ye,ke):Ye;return qe.sort(function(at,et){var pt=at.substr(1).split("y"),_t=et.substr(1).split("y");return pt[0]===_t[0]?+pt[1]-+_t[1]:+pt[0]-+_t[0]}),qe},K.findSubplotsWithAxis=function(Te,ke){for(var Ge=new RegExp(ke._id.charAt(0)==="x"?"^"+ke._id+"y":ke._id+"$"),Ye=[],qe=0;qe<Te.length;qe++){var at=Te[qe];Ge.test(at)&&Ye.push(at)}return Ye},K.makeClipPaths=function(Te){var ke=Te._fullLayout;if(!ke._hasOnlyLargeSploms){var Ge={_offset:0,_length:ke.width,_id:""},Ye={_offset:0,_length:ke.height,_id:""},qe=K.list(Te,"x",!0),at=K.list(Te,"y",!0),et=[],pt,_t;for(pt=0;pt<qe.length;pt++)for(et.push({x:qe[pt],y:Ye}),_t=0;_t<at.length;_t++)pt===0&&et.push({x:Ge,y:at[_t]}),et.push({x:qe[pt],y:at[_t]});var Pt=ke._clips.selectAll(".axesclip").data(et,function(Xt){return Xt.x._id+Xt.y._id});Pt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Xt){return"clip"+ke._uid+Xt.x._id+Xt.y._id}).append("rect"),Pt.exit().remove(),Pt.each(function(Xt){s.select(this).select("rect").attr({x:Xt.x._offset||0,y:Xt.y._offset||0,width:Xt.x._length||1,height:Xt.y._length||1})})}},K.draw=function(Te,ke,Ge){var Ye=Te._fullLayout;ke==="redraw"&&Ye._paper.selectAll("g.subplot").each(function(at){var et=at[0],pt=Ye._plots[et];if(pt){var _t=pt.xaxis,Pt=pt.yaxis;pt.xaxislayer.selectAll("."+_t._id+"tick").remove(),pt.yaxislayer.selectAll("."+Pt._id+"tick").remove(),pt.xaxislayer.selectAll("."+_t._id+"tick2").remove(),pt.yaxislayer.selectAll("."+Pt._id+"tick2").remove(),pt.xaxislayer.selectAll("."+_t._id+"divider").remove(),pt.yaxislayer.selectAll("."+Pt._id+"divider").remove(),pt.gridlayer&&pt.gridlayer.selectAll("path").remove(),pt.zerolinelayer&&pt.zerolinelayer.selectAll("path").remove(),Ye._infolayer.select(".g-"+_t._id+"title").remove(),Ye._infolayer.select(".g-"+Pt._id+"title").remove()}});var qe=!ke||ke==="redraw"?K.listIds(Te):ke;return t.syncOrAsync(qe.map(function(at){return function(){if(!!at){var et=K.getFromId(Te,at),pt=K.drawOne(Te,et,Ge);return et._r=et.range.slice(),et._rl=t.simpleMap(et._r,et.r2l),pt}}}))},K.drawOne=function(Te,ke,Ge){Ge=Ge||{};var Ye,qe,at;ke.setScale();var et=Te._fullLayout,pt=ke._id,_t=pt.charAt(0),Pt=K.counterLetter(pt),Xt=et._plots[ke._mainSubplot];if(!Xt)return;var zt=Xt[_t+"axislayer"],ur=ke._mainLinePosition,gr=ke._mainMirrorPosition,Mr=ke._vals=K.calcTicks(ke),un=[ke.mirror,ur,gr].join("_");for(Ye=0;Ye<Mr.length;Ye++)Mr[Ye].axInfo=un;ke._selections={},ke._tickAngles&&(ke._prevTickAngles=ke._tickAngles),ke._tickAngles={},ke._depth=null;var zr={};function $r(Pa){var Ar=pt+(Pa||"tick");return zr[Ar]||(zr[Ar]=Pe(ke,Ar)),zr[Ar]}if(!!ke.visible){var hn=K.makeTransTickFn(ke),Tr=K.makeTransTickLabelFn(ke),wr,Ur,Br=ke.ticks==="inside",Cr=ke.ticks==="outside";if(ke.tickson==="boundaries"){var nt=ot(ke,Mr);Ur=K.clipEnds(ke,nt),wr=Br?Ur:nt}else Ur=K.clipEnds(ke,Mr),wr=Br&&ke.ticklabelmode!=="period"?Ur:Mr;var Rt=ke._gridVals=Ur,Jt=Ke(ke,Mr);if(!et._hasOnlyLargeSploms){var hr=ke._subplotsWith,Dr={};for(Ye=0;Ye<hr.length;Ye++){qe=hr[Ye],at=et._plots[qe];var Gr=at[Pt+"axis"],Rr=Gr._mainAxis._id;if(!Dr[Rr]){Dr[Rr]=1;var Ct=_t==="x"?"M0,"+Gr._offset+"v"+Gr._length:"M"+Gr._offset+",0h"+Gr._length;K.drawGrid(Te,ke,{vals:Rt,counterAxis:Gr,layer:at.gridlayer.select("."+pt),path:Ct,transFn:hn}),K.drawZeroLine(Te,ke,{counterAxis:Gr,layer:at.zerolinelayer,path:Ct,transFn:hn})}}}var tr=K.getTickSigns(ke),Lr=[];if(ke.ticks){var Nr=K.makeTickPath(ke,ur,tr[2]),Tn,rn;ke._anchorAxis&&ke.mirror&&ke.mirror!==!0?(Tn=K.makeTickPath(ke,gr,tr[3]),rn=Nr+Tn):(Tn="",rn=Nr);var kn;if(ke.showdividers&&Cr&&ke.tickson==="boundaries"){var Cn={};for(Ye=0;Ye<Jt.length;Ye++)Cn[Jt[Ye].x]=1;kn=function(Pa){return Cn[Pa.x]?Tn:rn}}else kn=rn;K.drawTicks(Te,ke,{vals:wr,layer:zt,path:kn,transFn:hn}),ke.mirror==="allticks"&&(Lr=Object.keys(ke._linepositions||{}))}for(Ye=0;Ye<Lr.length;Ye++){qe=Lr[Ye],at=et._plots[qe];var oa=ke._linepositions[qe]||[],ya=K.makeTickPath(ke,oa[0],tr[0])+K.makeTickPath(ke,oa[1],tr[1]);K.drawTicks(Te,ke,{vals:wr,layer:at[_t+"axislayer"],path:ya,transFn:hn})}var Oa=[];if(Oa.push(function(){return K.drawLabels(Te,ke,{vals:Mr,layer:zt,plotinfo:at,transFn:Tr,labelFns:K.makeLabelFns(ke,ur)})}),ke.type==="multicategory"){var Xa={x:2,y:10}[_t];Oa.push(function(){var Pa={x:"height",y:"width"}[_t],Ar=$r()[Pa]+Xa+(ke._tickAngles[pt+"tick"]?ke.tickfont.size*re:0);return K.drawLabels(Te,ke,{vals:ht(ke,Mr),layer:zt,cls:pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:hn,labelFns:K.makeLabelFns(ke,ur+Ar*tr[4])})}),Oa.push(function(){return ke._depth=tr[4]*($r("tick2")[ke.side]-ur),It(Te,ke,{vals:Jt,layer:zt,path:K.makeTickPath(ke,ur,tr[4],ke._depth),transFn:hn})})}else ke.title.hasOwnProperty("standoff")&&Oa.push(function(){ke._depth=tr[4]*($r()[ke.side]-ur)});var za=y.getComponentMethod("rangeslider","isVisible")(ke);return Oa.push(function(){var Pa=ke.side.charAt(0),Ar=Q[ke.side].charAt(0),nn=K.getPxPosition(Te,ke),vn=Cr?ke.ticklen:0,Mn,Gn,la,na;if((ke.automargin||za)&&(ke.type==="multicategory"?Mn=$r("tick2"):(Mn=$r(),_t==="x"&&Pa==="b"&&(ke._depth=Math.max(Mn.width>0?Mn.bottom-nn:0,vn)))),ke.automargin){Gn={x:0,y:0,r:0,l:0,t:0,b:0};var Nn=[0,1];if(_t==="x"){if(Pa==="b"?Gn[Pa]=ke._depth:(Gn[Pa]=ke._depth=Math.max(Mn.width>0?nn-Mn.top:0,vn),Nn.reverse()),Mn.width>0){var Kn=Mn.right-(ke._offset+ke._length);Kn>0&&(Gn.xr=1,Gn.r=Kn);var Va=ke._offset-Mn.left;Va>0&&(Gn.xl=0,Gn.l=Va)}}else if(Pa==="l"?Gn[Pa]=ke._depth=Math.max(Mn.height>0?nn-Mn.left:0,vn):(Gn[Pa]=ke._depth=Math.max(Mn.height>0?Mn.right-nn:0,vn),Nn.reverse()),Mn.height>0){var mi=Mn.bottom-(ke._offset+ke._length);mi>0&&(Gn.yb=0,Gn.b=mi);var Nt=ke._offset-Mn.top;Nt>0&&(Gn.yt=1,Gn.t=Nt)}Gn[Pt]=ke.anchor==="free"?ke.position:ke._anchorAxis.domain[Nn[0]],ke.title.text!==et._dfltTitle[_t]&&(Gn[Pa]+=Tt(ke)+(ke.title.standoff||0)),ke.mirror&&ke.anchor!=="free"&&(la={x:0,y:0,r:0,l:0,t:0,b:0},la[Ar]=ke.linewidth,ke.mirror&&ke.mirror!==!0&&(la[Ar]+=vn),ke.mirror===!0||ke.mirror==="ticks"?la[Pt]=ke._anchorAxis.domain[Nn[1]]:(ke.mirror==="all"||ke.mirror==="allticks")&&(la[Pt]=[ke._counterDomainMin,ke._counterDomainMax][Nn[1]]))}za&&(na=y.getComponentMethod("rangeslider","autoMarginOpts")(Te,ke)),h.autoMargin(Te,nr(ke),Gn),h.autoMargin(Te,cr(ke),la),h.autoMargin(Te,Kr(ke),na)}),!Ge.skipTitle&&!(za&&ke.side==="bottom")&&Oa.push(function(){return Bt(Te,ke)}),t.syncOrAsync(Oa)}};function ot(Te,ke){var Ge=[],Ye,qe=function(at,et){var pt=at.xbnd[et];pt!==null&&Ge.push(t.extendFlat({},at,{x:pt}))};if(ke.length){for(Ye=0;Ye<ke.length;Ye++)qe(ke[Ye],0);qe(ke[Ye-1],1)}return Ge}function ht(Te,ke){for(var Ge=[],Ye={},qe=0;qe<ke.length;qe++){var at=ke[qe];Ye[at.text2]?Ye[at.text2].push(at.x):Ye[at.text2]=[at.x]}for(var et in Ye)Ge.push(Je(Te,t.interp(Ye[et],.5),et));return Ge}function Ke(Te,ke){var Ge=[],Ye,qe,at=ke.length&&ke[ke.length-1].x<ke[0].x,et=function(_t,Pt){var Xt=_t.xbnd[Pt];Xt!==null&&Ge.push(t.extendFlat({},_t,{x:Xt}))};if(Te.showdividers&&ke.length){for(Ye=0;Ye<ke.length;Ye++){var pt=ke[Ye];pt.text2!==qe&&et(pt,at?1:0),qe=pt.text2}et(ke[Ye-1],at?0:1)}return Ge}function Pe(Te,ke){var Ge,Ye,qe,at;return Te._selections[ke].size()?(Ge=1/0,Ye=-1/0,qe=1/0,at=-1/0,Te._selections[ke].each(function(){var et=ar(this),pt=f.bBox(et.node().parentNode);Ge=Math.min(Ge,pt.top),Ye=Math.max(Ye,pt.bottom),qe=Math.min(qe,pt.left),at=Math.max(at,pt.right)})):(Ge=0,Ye=0,qe=0,at=0),{top:Ge,bottom:Ye,left:qe,right:at,height:Ye-Ge,width:at-qe}}K.getTickSigns=function(Te){var ke=Te._id.charAt(0),Ge={x:"top",y:"right"}[ke],Ye=Te.side===Ge?1:-1,qe=[-1,1,Ye,-Ye];return Te.ticks!=="inside"==(ke==="x")&&(qe=qe.map(function(at){return-at})),Te.side&&qe.push({l:-1,t:-1,r:1,b:1}[Te.side.charAt(0)]),qe},K.makeTransTickFn=function(Te){return Te._id.charAt(0)==="x"?function(ke){return a(Te._offset+Te.l2p(ke.x),0)}:function(ke){return a(0,Te._offset+Te.l2p(ke.x))}},K.makeTransTickLabelFn=function(Te){var ke=Qe(Te),Ge=ke[0],Ye=ke[1];return Te._id.charAt(0)==="x"?function(qe){return a(Ge+Te._offset+Te.l2p(We(qe)),Ye)}:function(qe){return a(Ye,Ge+Te._offset+Te.l2p(We(qe)))}};function We(Te){return Te.periodX!==void 0?Te.periodX:Te.x}function Qe(Te){var ke=Te.ticklabelposition||"",Ge=function(gr){return ke.indexOf(gr)!==-1},Ye=Ge("top"),qe=Ge("left"),at=Ge("right"),et=Ge("bottom"),pt=Ge("inside"),_t=et||qe||Ye||at;if(!_t&&!pt)return[0,0];var Pt=Te.side,Xt=_t?(Te.tickwidth||0)/2:0,zt=Z,ur=Te.tickfont?Te.tickfont.size:12;return(et||Ye)&&(Xt+=ur*W,zt+=(Te.linewidth||0)/2),(qe||at)&&(Xt+=(Te.linewidth||0)/2,zt+=Z),pt&&Pt==="top"&&(zt-=ur*(1-W)),(qe||Ye)&&(Xt=-Xt),(Pt==="bottom"||Pt==="right")&&(zt=-zt),[_t?Xt:0,pt?zt:0]}K.makeTickPath=function(Te,ke,Ge,Ye){Ye=Ye!==void 0?Ye:Te.ticklen;var qe=Te._id.charAt(0),at=(Te.linewidth||1)/2;return qe==="x"?"M0,"+(ke+at*Ge)+"v"+Ye*Ge:"M"+(ke+at*Ge)+",0h"+Ye*Ge},K.makeLabelFns=function(Te,ke,Ge){var Ye=Te.ticklabelposition||"",qe=function(Dr){return Ye.indexOf(Dr)!==-1},at=qe("top"),et=qe("left"),pt=qe("right"),_t=qe("bottom"),Pt=_t||et||at||pt,Xt=qe("inside"),zt=Ye==="inside"&&Te.ticks==="inside"||!Xt&&Te.ticks==="outside"&&Te.tickson!=="boundaries",ur=0,gr=0,Mr=zt?Te.ticklen:0;if(Xt?Mr*=-1:Pt&&(Mr=0),zt&&(ur+=Mr,Ge)){var un=t.deg2rad(Ge);ur=Mr*Math.cos(un)+1,gr=Mr*Math.sin(un)}Te.showticklabels&&(zt||Te.showline)&&(ur+=.2*Te.tickfont.size),ur+=(Te.linewidth||1)/2*(Xt?-1:1);var zr={labelStandoff:ur,labelShift:gr},$r,hn,Tr,wr,Ur=0,Br=Te.side,Cr=Te._id.charAt(0),nt=Te.tickangle,Rt;if(Cr==="x")Rt=!Xt&&Br==="bottom"||Xt&&Br==="top",wr=Rt?1:-1,Xt&&(wr*=-1),$r=gr*wr,hn=ke+ur*wr,Tr=Rt?1:-.2,Math.abs(nt)===90&&(Xt?Tr+=$:nt===-90&&Br==="bottom"?Tr=W:nt===90&&Br==="top"?Tr=$:Tr=.5,Ur=$/2*(nt/90)),zr.xFn=function(Dr){return Dr.dx+$r+Ur*Dr.fontSize},zr.yFn=function(Dr){return Dr.dy+hn+Dr.fontSize*Tr},zr.anchorFn=function(Dr,Gr){if(Pt){if(et)return"end";if(pt)return"start"}return!o(Gr)||Gr===0||Gr===180?"middle":Gr*wr<0!==Xt?"end":"start"},zr.heightFn=function(Dr,Gr,Rr){return Gr<-60||Gr>60?-.5*Rr:Te.side==="top"!==Xt?-Rr:0};else if(Cr==="y"){if(Rt=!Xt&&Br==="left"||Xt&&Br==="right",wr=Rt?1:-1,Xt&&(wr*=-1),$r=ur,hn=gr*wr,Tr=0,!Xt&&Math.abs(nt)===90&&(nt===-90&&Br==="left"||nt===90&&Br==="right"?Tr=W:Tr=.5),Xt){var Jt=o(nt)?+nt:0;if(Jt!==0){var hr=t.deg2rad(Jt);Ur=Math.abs(Math.sin(hr))*W*wr,Tr=0}}zr.xFn=function(Dr){return Dr.dx+ke-($r+Dr.fontSize*Tr)*wr+Ur*Dr.fontSize},zr.yFn=function(Dr){return Dr.dy+hn+Dr.fontSize*$},zr.anchorFn=function(Dr,Gr){return o(Gr)&&Math.abs(Gr)===90?"middle":Rt?"end":"start"},zr.heightFn=function(Dr,Gr,Rr){return Te.side==="right"&&(Gr*=-1),Gr<-30?-Rr:Gr<30?-.5*Rr:0}}return zr};function ut(Te){return[Te.text,Te.x,Te.axInfo,Te.font,Te.fontSize,Te.fontColor].join("_")}K.drawTicks=function(Te,ke,Ge){Ge=Ge||{};var Ye=ke._id+"tick",qe=Ge.vals;ke.ticklabelmode==="period"&&(qe=qe.slice(),qe.shift());var at=Ge.layer.selectAll("path."+Ye).data(ke.ticks?qe:[],ut);at.exit().remove(),at.enter().append("path").classed(Ye,1).classed("ticks",1).classed("crisp",Ge.crisp!==!1).call(r.stroke,ke.tickcolor).style("stroke-width",f.crispRound(Te,ke.tickwidth,1)+"px").attr("d",Ge.path).style("display",null),it(ke,[D]),at.attr("transform",Ge.transFn)},K.drawGrid=function(Te,ke,Ge){Ge=Ge||{};var Ye=ke._id+"grid",qe=Ge.vals,at=Ge.counterAxis;if(ke.showgrid===!1)qe=[];else if(at&&K.shouldShowZeroLine(Te,ke,at))for(var et=ke.tickmode==="array",pt=0;pt<qe.length;pt++){var _t=qe[pt].x;if(et?!_t:Math.abs(_t)<ke.dtick/100)if(qe=qe.slice(0,pt).concat(qe.slice(pt+1)),et)pt--;else break}var Pt=Ge.layer.selectAll("path."+Ye).data(qe,ut);Pt.exit().remove(),Pt.enter().append("path").classed(Ye,1).classed("crisp",Ge.crisp!==!1),ke._gw=f.crispRound(Te,ke.gridwidth,1),Pt.attr("transform",Ge.transFn).attr("d",Ge.path).call(r.stroke,ke.gridcolor||"#ddd").style("stroke-width",ke._gw+"px").style("display",null),it(ke,[R]),typeof Ge.path=="function"&&Pt.attr("d",Ge.path)},K.drawZeroLine=function(Te,ke,Ge){Ge=Ge||Ge;var Ye=ke._id+"zl",qe=K.shouldShowZeroLine(Te,ke,Ge.counterAxis),at=Ge.layer.selectAll("path."+Ye).data(qe?[{x:0,id:ke._id}]:[]);at.exit().remove(),at.enter().append("path").classed(Ye,1).classed("zl",1).classed("crisp",Ge.crisp!==!1).each(function(){Ge.layer.selectAll("path").sort(function(et,pt){return ue(et.id,pt.id)})}),at.attr("transform",Ge.transFn).attr("d",Ge.path).call(r.stroke,ke.zerolinecolor||r.defaultLine).style("stroke-width",f.crispRound(Te,ke.zerolinewidth,ke._gw||1)+"px").style("display",null),it(ke,[O])},K.drawLabels=function(Te,ke,Ge){Ge=Ge||{};var Ye=Te._fullLayout,qe=ke._id,at=qe.charAt(0),et=Ge.cls||qe+"tick",pt=Ge.vals,_t=Ge.labelFns,Pt=Ge.secondary?0:ke.tickangle,Xt=(ke._prevTickAngles||{})[et],zt=Ge.layer.selectAll("g."+et).data(ke.showticklabels?pt:[],ut),ur=[];zt.enter().append("g").classed(et,1).append("text").attr("text-anchor","middle").each(function(wr){var Ur=s.select(this),Br=Te._promises.length;Ur.call(i.positionText,_t.xFn(wr),_t.yFn(wr)).call(f.font,wr.font,wr.fontSize,wr.fontColor).text(wr.text).call(i.convertToTspans,Te),Te._promises[Br]?ur.push(Te._promises.pop().then(function(){gr(Ur,Pt)})):gr(Ur,Pt)}),it(ke,[H]),zt.exit().remove(),Ge.repositionOnUpdate&&zt.each(function(wr){s.select(this).select("text").call(i.positionText,_t.xFn(wr),_t.yFn(wr))});function gr(wr,Ur){wr.each(function(Br){var Cr=s.select(this),nt=Cr.select(".text-math-group"),Rt=_t.anchorFn(Br,Ur),Jt=Ge.transFn.call(Cr.node(),Br)+(o(Ur)&&+Ur!=0?" rotate("+Ur+","+_t.xFn(Br)+","+(_t.yFn(Br)-Br.fontSize/2)+")":""),hr=i.lineCount(Cr),Dr=re*Br.fontSize,Gr=_t.heightFn(Br,o(Ur)?+Ur:0,(hr-1)*Dr);if(Gr&&(Jt+=a(0,Gr)),nt.empty()){var Rr=Cr.select("text");Rr.attr({transform:Jt,"text-anchor":Rt}),Rr.style("opacity",1),ke._adjustTickLabelsOverflow&&ke._adjustTickLabelsOverflow()}else{var Ct=f.bBox(nt.node()).width,tr=Ct*{end:-.5,start:.5}[Rt];nt.attr("transform",Jt+a(tr,0))}})}ke._adjustTickLabelsOverflow=function(){var wr=ke.ticklabeloverflow;if(!(!wr||wr==="allow")){var Ur=wr.indexOf("hide")!==-1,Br=ke._id.charAt(0)==="x",Cr=0,nt=Br?Te._fullLayout.width:Te._fullLayout.height;if(wr.indexOf("domain")!==-1){var Rt=t.simpleMap(ke.range,ke.r2l);Cr=ke.l2p(Rt[0])+ke._offset,nt=ke.l2p(Rt[1])+ke._offset}var Jt=Math.min(Cr,nt),hr=Math.max(Cr,nt),Dr=ke.side,Gr=1/0,Rr=-1/0;zt.each(function(Nr){var Tn=s.select(this),rn=Tn.select(".text-math-group");if(rn.empty()){var kn=f.bBox(Tn.node()),Cn=0;Br?(kn.right>hr||kn.left<Jt)&&(Cn=1):(kn.bottom>hr||kn.top+(ke.tickangle?0:Nr.fontSize/4)<Jt)&&(Cn=1);var oa=Tn.select("text");Cn?Ur&&oa.style("opacity",0):(oa.style("opacity",1),Dr==="bottom"||Dr==="right"?Gr=Math.min(Gr,Br?kn.top:kn.left):Gr=-1/0,Dr==="top"||Dr==="left"?Rr=Math.max(Rr,Br?kn.bottom:kn.right):Rr=1/0)}});for(var Ct in Ye._plots){var tr=Ye._plots[Ct];if(!(ke._id!==tr.xaxis._id&&ke._id!==tr.yaxis._id)){var Lr=Br?tr.yaxis:tr.xaxis;Lr&&(Lr["_visibleLabelMin_"+ke._id]=Gr,Lr["_visibleLabelMax_"+ke._id]=Rr)}}}},ke._hideCounterAxisInsideTickLabels=function(wr){var Ur=ke._id.charAt(0)==="x",Br=[];for(var Cr in Ye._plots){var nt=Ye._plots[Cr];ke._id!==nt.xaxis._id&&ke._id!==nt.yaxis._id||Br.push(Ur?nt.yaxis:nt.xaxis)}Br.forEach(function(Rt,Jt){Rt&&_r(Rt)&&(wr||[O,R,D,H]).forEach(function(hr){var Dr=hr.K==="tick"&&hr.L==="text"&&ke.ticklabelmode==="period",Gr=Ye._plots[ke._mainSubplot],Rr;hr.K===O.K?Rr=Gr.zerolinelayer.selectAll("."+ke._id+"zl"):hr.K===R.K?Rr=Gr.gridlayer.selectAll("."+ke._id):Rr=Gr[ke._id.charAt(0)+"axislayer"],Rr.each(function(){var Ct=s.select(this);hr.L&&(Ct=Ct.selectAll(hr.L)),Ct.each(function(tr){var Lr=ke.l2p(Dr?We(tr):tr.x)+ke._offset,Nr=s.select(this);Lr<ke["_visibleLabelMax_"+Rt._id]&&Lr>ke["_visibleLabelMin_"+Rt._id]?Nr.style("display","none"):hr.K==="tick"&&!Jt&&Nr.style("display",null)})})})})},gr(zt,Xt+1?Xt:Pt);function Mr(){return ur.length&&Promise.all(ur)}var un=null;function zr(){if(gr(zt,Pt),pt.length&&at==="x"&&!o(Pt)&&(ke.type!=="log"||String(ke.dtick).charAt(0)!=="D")){un=0;var wr=0,Ur=[],Br;if(zt.each(function(kn){wr=Math.max(wr,kn.fontSize);var Cn=ke.l2p(kn.x),oa=ar(this),ya=f.bBox(oa.node());Ur.push({top:0,bottom:10,height:10,left:Cn-ya.width/2,right:Cn+ya.width/2+2,width:ya.width+2})}),(ke.tickson==="boundaries"||ke.showdividers)&&!Ge.secondary){var Cr=2;for(ke.ticks&&(Cr+=ke.tickwidth/2),Br=0;Br<Ur.length;Br++){var nt=pt[Br].xbnd,Rt=Ur[Br];if(nt[0]!==null&&Rt.left-ke.l2p(nt[0])<Cr||nt[1]!==null&&ke.l2p(nt[1])-Rt.right<Cr){un=90;break}}}else{var Jt=pt.length,hr=Math.abs((pt[Jt-1].x-pt[0].x)*ke._m)/(Jt-1),Dr=ke.ticklabelposition||"",Gr=function(kn){return Dr.indexOf(kn)!==-1},Rr=Gr("top"),Ct=Gr("left"),tr=Gr("right"),Lr=Gr("bottom"),Nr=Lr||Ct||Rr||tr,Tn=Nr?(ke.tickwidth||0)+2*Z:0,rn=hr<wr*2.5||ke.type==="multicategory"||ke._name==="realaxis";for(Br=0;Br<Ur.length-1;Br++)if(t.bBoxIntersect(Ur[Br],Ur[Br+1],Tn)){un=rn?90:30;break}}un&&gr(zt,un)}}ke._selections&&(ke._selections[et]=zt);var $r=[Mr];ke.automargin&&Ye._redrawFromAutoMarginCount&&Xt===90?(un=90,$r.push(function(){gr(zt,Xt)})):$r.push(zr),ke._tickAngles&&$r.push(function(){ke._tickAngles[et]=un===null?o(Pt)?Pt:0:un});var hn=ke._anchorAxis;hn&&hn.autorange&&_r(ke)&&!V(Ye,ke._id)&&(Ye._insideTickLabelsAutorange||(Ye._insideTickLabelsAutorange={}),Ye._insideTickLabelsAutorange[hn._name+".autorange"]=hn.autorange,$r.push(function(){zt.each(function(Ur,Br){var Cr=ar(this),nt=Cr.select(".text-math-group");nt.empty()&&(ke._vals[Br].bb=f.bBox(Cr.node()))})}));var Tr=t.syncOrAsync($r);return Tr&&Tr.then&&Te._promises.push(Tr),Tr};function It(Te,ke,Ge){var Ye=ke._id+"divider",qe=Ge.vals,at=Ge.layer.selectAll("path."+Ye).data(qe,ut);at.exit().remove(),at.enter().insert("path",":first-child").classed(Ye,1).classed("crisp",1).call(r.stroke,ke.dividercolor).style("stroke-width",f.crispRound(Te,ke.dividerwidth,1)+"px"),at.attr("transform",Ge.transFn).attr("d",Ge.path)}K.getPxPosition=function(Te,ke){var Ge=Te._fullLayout._size,Ye=ke._id.charAt(0),qe=ke.side,at;if(ke.anchor!=="free"?at=ke._anchorAxis:Ye==="x"?at={_offset:Ge.t+(1-(ke.position||0))*Ge.h,_length:0}:Ye==="y"&&(at={_offset:Ge.l+(ke.position||0)*Ge.w,_length:0}),qe==="top"||qe==="left")return at._offset;if(qe==="bottom"||qe==="right")return at._offset+at._length};function Tt(Te){var ke=Te.title.font.size,Ge=(Te.title.text.match(i.BR_TAG_ALL)||[]).length;return Te.title.hasOwnProperty("standoff")?Ge?ke*(W+Ge*re):ke*W:Ge?ke*(Ge+1)*re:ke}function Bt(Te,ke){var Ge=Te._fullLayout,Ye=ke._id,qe=Ye.charAt(0),at=ke.title.font.size,et;if(ke.title.hasOwnProperty("standoff"))et=ke._depth+ke.title.standoff+Tt(ke);else{var pt=_r(ke);if(ke.type==="multicategory")et=ke._depth;else{var _t=1.5*at;pt&&(_t=.5*at,ke.ticks==="outside"&&(_t+=ke.ticklen)),et=10+_t+(ke.linewidth?ke.linewidth-1:0)}pt||(qe==="x"?et+=ke.side==="top"?at*(ke.showticklabels?1:0):at*(ke.showticklabels?1.5:.5):et+=ke.side==="right"?at*(ke.showticklabels?1:.5):at*(ke.showticklabels?.5:0))}var Pt=K.getPxPosition(Te,ke),Xt,zt,ur;qe==="x"?(zt=ke._offset+ke._length/2,ur=ke.side==="top"?Pt-et:Pt+et):(ur=ke._offset+ke._length/2,zt=ke.side==="right"?Pt+et:Pt-et,Xt={rotate:"-90",offset:0});var gr;if(ke.type!=="multicategory"){var Mr=ke._selections[ke._id+"tick"];if(gr={selection:Mr,side:ke.side},Mr&&Mr.node()&&Mr.node().parentNode){var un=f.getTranslate(Mr.node().parentNode);gr.offsetLeft=un.x,gr.offsetTop=un.y}ke.title.hasOwnProperty("standoff")&&(gr.pad=0)}return n.draw(Te,Ye+"title",{propContainer:ke,propName:ke._name+".title.text",placeholder:Ge._dfltTitle[qe],avoid:gr,transform:Xt,attributes:{x:zt,y:ur,"text-anchor":"middle"}})}K.shouldShowZeroLine=function(Te,ke,Ge){var Ye=t.simpleMap(ke.range,ke.r2l);return Ye[0]*Ye[1]<=0&&ke.zeroline&&(ke.type==="linear"||ke.type==="-")&&!(ke.rangebreaks&&ke.maskBreaks(0)===z)&&(rr(ke,0)||!Ut(Te,ke,Ge,Ye)||Qt(Te,ke))},K.clipEnds=function(Te,ke){return ke.filter(function(Ge){return rr(Te,Ge.x)})};function rr(Te,ke){var Ge=Te.l2p(ke);return Ge>1&&Ge<Te._length-1}function Ut(Te,ke,Ge,Ye){var qe=Ge._mainAxis;if(!qe)return;var at=Te._fullLayout,et=ke._id.charAt(0),pt=K.counterLetter(ke._id),_t=ke._offset+(Math.abs(Ye[0])<Math.abs(Ye[1])==(et==="x")?0:ke._length);function Pt(Mr){if(!Mr.showline||!Mr.linewidth)return!1;var un=Math.max((Mr.linewidth+ke.zerolinewidth)/2,1);function zr(Tr){return typeof Tr=="number"&&Math.abs(Tr-_t)<un}if(zr(Mr._mainLinePosition)||zr(Mr._mainMirrorPosition))return!0;var $r=Mr._linepositions||{};for(var hn in $r)if(zr($r[hn][0])||zr($r[hn][1]))return!0}var Xt=at._plots[Ge._mainSubplot];if(!(Xt.mainplotinfo||Xt).overlays.length)return Pt(Ge);for(var zt=K.list(Te,pt),ur=0;ur<zt.length;ur++){var gr=zt[ur];if(gr._mainAxis===qe&&Pt(gr))return!0}}function Qt(Te,ke){for(var Ge=Te._fullData,Ye=ke._mainSubplot,qe=ke._id.charAt(0),at=0;at<Ge.length;at++){var et=Ge[at];if(et.visible===!0&&et.xaxis+et.yaxis===Ye&&(y.traceIs(et,"bar-like")&&et.orientation==={x:"h",y:"v"}[qe]||et.fill&&et.fill.charAt(et.fill.length-1)===qe))return!0}return!1}function ar(Te){var ke=s.select(Te),Ge=ke.select(".text-math-group");return Ge.empty()?ke.select("text"):Ge}K.allowAutoMargin=function(Te){for(var ke=K.list(Te,"",!0),Ge=0;Ge<ke.length;Ge++){var Ye=ke[Ge];Ye.automargin&&(h.allowAutoMargin(Te,nr(Ye)),Ye.mirror&&h.allowAutoMargin(Te,cr(Ye))),y.getComponentMethod("rangeslider","isVisible")(Ye)&&h.allowAutoMargin(Te,Kr(Ye))}};function nr(Te){return Te._id+".automargin"}function cr(Te){return nr(Te)+".mirror"}function Kr(Te){return Te._id+".rangeslider"}K.swap=function(Te,ke){for(var Ge=yn(Te,ke),Ye=0;Ye<Ge.length;Ye++)st(Te,Ge[Ye].x,Ge[Ye].y)};function yn(Te,ke){var Ge=[],Ye,qe;for(Ye=0;Ye<ke.length;Ye++){var at=[],et=Te._fullData[ke[Ye]].xaxis,pt=Te._fullData[ke[Ye]].yaxis;if(!(!et||!pt)){for(qe=0;qe<Ge.length;qe++)(Ge[qe].x.indexOf(et)!==-1||Ge[qe].y.indexOf(pt)!==-1)&&at.push(qe);if(!at.length){Ge.push({x:[et],y:[pt]});continue}var _t=Ge[at[0]],Pt;if(at.length>1)for(qe=1;qe<at.length;qe++)Pt=Ge[at[qe]],Qr(_t.x,Pt.x),Qr(_t.y,Pt.y);Qr(_t.x,[et]),Qr(_t.y,[pt])}}return Ge}function Qr(Te,ke){for(var Ge=0;Ge<ke.length;Ge++)Te.indexOf(ke[Ge])===-1&&Te.push(ke[Ge])}function st(Te,ke,Ge){var Ye=[],qe=[],at=Te.layout,et,pt;for(et=0;et<ke.length;et++)Ye.push(K.getFromId(Te,ke[et]));for(et=0;et<Ge.length;et++)qe.push(K.getFromId(Te,Ge[et]));var _t=Object.keys(u),Pt=["anchor","domain","overlaying","position","side","tickangle","editType"],Xt=["linear","log"];for(et=0;et<_t.length;et++){var zt=_t[et],ur=Ye[0][zt],gr=qe[0][zt],Mr=!0,un=!1,zr=!1;if(!(zt.charAt(0)==="_"||typeof ur=="function"||Pt.indexOf(zt)!==-1)){for(pt=1;pt<Ye.length&&Mr;pt++){var $r=Ye[pt][zt];zt==="type"&&Xt.indexOf(ur)!==-1&&Xt.indexOf($r)!==-1&&ur!==$r?un=!0:$r!==ur&&(Mr=!1)}for(pt=1;pt<qe.length&&Mr;pt++){var hn=qe[pt][zt];zt==="type"&&Xt.indexOf(gr)!==-1&&Xt.indexOf(hn)!==-1&&gr!==hn?zr=!0:qe[pt][zt]!==gr&&(Mr=!1)}Mr&&(un&&(at[Ye[0]._name].type="linear"),zr&&(at[qe[0]._name].type="linear"),Gt(at,zt,Ye,qe,Te._fullLayout._dfltTitle))}}for(et=0;et<Te._fullLayout.annotations.length;et++){var Tr=Te._fullLayout.annotations[et];ke.indexOf(Tr.xref)!==-1&&Ge.indexOf(Tr.yref)!==-1&&t.swapAttrs(at.annotations[et],["?"])}}function Gt(Te,ke,Ge,Ye,qe){var at=t.nestedProperty,et=at(Te[Ge[0]._name],ke).get(),pt=at(Te[Ye[0]._name],ke).get(),_t;for(ke==="title"&&(et&&et.text===qe.x&&(et.text=qe.y),pt&&pt.text===qe.y&&(pt.text=qe.x)),_t=0;_t<Ge.length;_t++)at(Te,Ge[_t]._name+"."+ke).set(pt);for(_t=0;_t<Ye.length;_t++)at(Te,Ye[_t]._name+"."+ke).set(et)}function Zt(Te){return Te._id==="angularaxis"}function Ht(Te,ke){for(var Ge=ke._rangebreaks.length,Ye=0;Ye<Ge;Ye++){var qe=ke._rangebreaks[Ye];if(Te>=qe.min&&Te<qe.max)return qe.max}return Te}function _r(Te){return(Te.ticklabelposition||"").indexOf("inside")!==-1}function it(Te,ke){_r(Te._anchorAxis||{})&&Te._hideCounterAxisInsideTickLabels&&Te._hideCounterAxisInsideTickLabels(ke)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../constants/numerical").BADNUM,y=o.isArrayOrTypedArray,t=o.isDateTime,a=o.cleanNumber,i=Math.round;I.exports=function(b,g,_){var p=b,A=_.noMultiCategory;if(y(p)&&!p.length)return"-";if(!A&&m(p))return"multicategory";if(A&&Array.isArray(p[0])){for(var c=[],S=0;S<p.length;S++)if(y(p[S]))for(var T=0;T<p[S].length;T++)c.push(p[S][T]);p=c}if(f(p,g))return"date";var x=_.autotypenumbers!=="strict";return l(p,x)?"category":r(p,x)?"linear":"-"};function n(d,b){return b?s(d):typeof d=="number"}function r(d,b){for(var g=d.length,_=0;_<g;_++)if(n(d[_],b))return!0;return!1}function f(d,b){for(var g=d.length,_=u(g),p=0,A=0,c={},S=0;S<g;S+=_){var T=i(S),x=d[T],w=String(x);c[w]||(c[w]=1,t(x,b)&&p++,s(x)&&A++)}return p>A*2}function u(d){return Math.max(1,(d-1)/1e3)}function l(d,b){for(var g=d.length,_=u(g),p=0,A=0,c={},S=0;S<g;S+=_){var T=i(S),x=d[T],w=String(x);if(!c[w]){c[w]=1;var v=typeof x;v==="boolean"?A++:(b?a(x)!==h:v==="number")?p++:v==="string"&&A++}}return A>p*2}function m(d){return y(d[0])&&y(d[1])}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../registry"),h=e("../../lib"),y=e("../array_container_defaults"),t=e("./layout_attributes"),a=e("./tick_value_defaults"),i=e("./tick_mark_defaults"),n=e("./tick_label_defaults"),r=e("./prefix_suffix_defaults"),f=e("./category_order_defaults"),u=e("./line_grid_defaults"),l=e("./set_convert"),m=e("./constants").WEEKDAY_PATTERN,d=e("./constants").HOUR_PATTERN;I.exports=function(A,c,S,T,x){var w=T.letter,v=T.font||{},C=T.splomStash||{},M=S("visible",!T.visibleDflt),E=c._template||{},L=c.type||E.type||"-",z;if(L==="date"){var O=o.getComponentMethod("calendars","handleDefaults");O(A,c,"calendar",T.calendar),T.noTicklabelmode||(z=S("ticklabelmode"))}var R="";(!T.noTicklabelposition||L==="multicategory")&&(R=h.coerce(A,c,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:z==="period"?["outside","inside"]:w==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),T.noTicklabeloverflow||S("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":L==="category"||L==="multicategory"?"allow":"hide past div"),l(c,x);var D=!c.isValidRange(A.range);D&&T.reverseDflt&&(D="reversed");var H=S("autorange",D);H&&(L==="linear"||L==="-")&&S("rangemode"),S("range"),c.cleanRange(),f(A,c,S,T),L!=="category"&&!T.noHover&&S("hoverformat");var B=S("color"),$=B!==t.color.dflt?B:v.color,W=C.label||x._dfltTitle[w];if(r(A,c,S,L,T),!M)return c;S("title.text",W),h.coerceFont(S,"title.font",{family:v.family,size:h.bigFont(v.size),color:$}),a(A,c,S,L),n(A,c,S,L,T),i(A,c,S,T),u(A,c,S,{dfltColor:B,bgColor:T.bgColor,showGrid:T.showGrid,attributes:t}),(c.showline||c.ticks)&&S("mirror"),T.automargin&&S("automargin");var re=L==="multicategory";if(!T.noTickson&&(L==="category"||re)&&(c.ticks||c.showgrid)){var Q;re&&(Q="boundaries");var Z=S("tickson",Q);Z==="boundaries"&&delete c.ticklabelposition}if(re){var K=S("showdividers");K&&(S("dividercolor"),S("dividerwidth"))}if(L==="date")if(y(A,c,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:b}),!c.rangebreaks.length)delete c.rangebreaks;else{for(var le=0;le<c.rangebreaks.length;le++)if(c.rangebreaks[le].pattern===m){c._hasDayOfWeekBreaks=!0;break}if(l(c,x),x._has("scattergl")||x._has("splom"))for(var fe=0;fe<T.data.length;fe++){var ue=T.data[fe];(ue.type==="scattergl"||ue.type==="splom")&&(ue.visible=!1,h.warn(ue.type+" traces do not work on axes with rangebreaks. Setting trace "+ue.index+" to `visible: false`."))}}return c};function b(p,A,c){function S(z,O){return h.coerce(p,A,t.rangebreaks,z,O)}var T=S("enabled");if(T){var x=S("bounds");if(x&&x.length>=2){var w="",v,C;if(x.length===2){for(v=0;v<2;v++)if(C=_(x[v]),C){w=m;break}}var M=S("pattern",w);if(M===m)for(v=0;v<2;v++)C=_(x[v]),C&&(A.bounds[v]=x[v]=C-1);if(M)for(v=0;v<2;v++)switch(C=x[v],M){case m:if(!s(C)){A.enabled=!1;return}if(C=+C,C!==Math.floor(C)||C<0||C>=7){A.enabled=!1;return}A.bounds[v]=x[v]=C;break;case d:if(!s(C)){A.enabled=!1;return}if(C=+C,C<0||C>24){A.enabled=!1;return}A.bounds[v]=x[v]=C;break}if(c.autorange===!1){var E=c.range;if(E[0]<E[1]){if(x[0]<E[0]&&x[1]>E[1]){A.enabled=!1;return}}else if(x[0]>E[0]&&x[1]<E[1]){A.enabled=!1;return}}}else{var L=S("values");if(L&&L.length)S("dvalue");else{A.enabled=!1;return}}}}var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function _(p){if(typeof p=="string")return g[p.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(e,I,F){var s=e("../../constants/docs"),o=s.FORMAT_LINK,h=s.DATE_FORMAT_LINK;function y(i,n){return{valType:"string",dflt:"",editType:"none",description:(n?t:a)("hover text",i)+["By default the values are formatted using "+(n?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}}function t(i,n){return["Sets the "+i+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+o+"."].join(" ")}function a(i,n){return t(i,n)+[" And for dates see: "+h+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}I.exports={axisHoverFormat:y,descriptionOnlyNumbers:t,descriptionWithDates:a}},{"../../constants/docs":474}],558:[function(e,I,F){var s=e("../../registry"),o=e("./constants");F.id2name=function(t){if(!(typeof t!="string"||!t.match(o.AX_ID_PATTERN))){var a=t.split(" ")[0].substr(1);return a==="1"&&(a=""),t.charAt(0)+"axis"+a}},F.name2id=function(t){if(!!t.match(o.AX_NAME_PATTERN)){var a=t.substr(5);return a==="1"&&(a=""),t.charAt(0)+a}},F.cleanId=function(t,a,i){var n=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(o.AX_ID_PATTERN))&&!(a&&t.charAt(0)!==a)&&!(n&&!i)){var r=t.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),t.charAt(0)+r+(n&&i?" domain":"")}},F.list=function(y,t,a){var i=y._fullLayout;if(!i)return[];var n=F.listIds(y,t),r=new Array(n.length),f;for(f=0;f<n.length;f++){var u=n[f];r[f]=i[u.charAt(0)+"axis"+u.substr(1)]}if(!a){var l=i._subplots.gl3d||[];for(f=0;f<l.length;f++){var m=i[l[f]];t?r.push(m[t+"axis"]):r.push(m.xaxis,m.yaxis,m.zaxis)}}return r},F.listIds=function(y,t){var a=y._fullLayout;if(!a)return[];var i=a._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)},F.getFromId=function(y,t,a){var i=y._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),a==="x"?t=t.replace(/y[0-9]*/,""):a==="y"&&(t=t.replace(/x[0-9]*/,"")),i[F.id2name(t)]},F.getFromTrace=function(y,t,a){var i=y._fullLayout,n=null;if(s.traceIs(t,"gl3d")){var r=t.scene;r.substr(0,5)==="scene"&&(n=i[r][a+"axis"])}else n=F.getFromId(y,t[a+"axis"]||a);return n},F.idSort=function(y,t){var a=y.charAt(0),i=t.charAt(0);return a!==i?a>i?1:-1:+(y.substr(1)||1)-+(t.substr(1)||1)},F.ref2id=function(y){return/^[xyz]/.test(y)?y.split(" ")[0]:!1};function h(y,t){if(t&&t.length){for(var a=0;a<t.length;a++)if(t[a][y])return!0}return!1}F.isLinked=function(y,t){return h(t,y._axisMatchGroups)||h(t,y._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(e,I,F){function s(o,h){var y=h.dataAttr||o._id.charAt(0),t={},a,i,n;if(h.axData)a=h.axData;else for(a=[],i=0;i<h.data.length;i++){var r=h.data[i];r[y+"axis"]===o._id&&a.push(r)}for(i=0;i<a.length;i++){var f=a[i][y];for(n=0;n<f.length;n++){var u=f[n];u!=null&&(t[u]=1)}}return Object.keys(t)}I.exports=function(h,y,t,a){if(y.type==="category"){var i=h.categoryarray,n=Array.isArray(i)&&i.length>0,r;n&&(r="array");var f=t("categoryorder",r),u;f==="array"&&(u=t("categoryarray")),!n&&f==="array"&&(f=y.categoryorder="trace"),f==="trace"?y._initialCategories=[]:f==="array"?y._initialCategories=u.slice():(u=s(y,a).sort(),f==="category ascending"?y._initialCategories=u:f==="category descending"&&(y._initialCategories=u.reverse()))}}},{}],560:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../constants/numerical"),y=h.ONEDAY,t=h.ONEWEEK;F.dtick=function(a,i){var n=i==="log",r=i==="date",f=i==="category",u=r?y:1;if(!a)return u;if(s(a))return a=Number(a),a<=0?u:f?Math.max(1,Math.round(a)):r?Math.max(.1,a):a;if(typeof a!="string"||!(r||n))return u;var l=a.charAt(0),m=a.substr(1);return m=s(m)?Number(m):0,m<=0||!(r&&l==="M"&&m===Math.round(m)||n&&l==="L"||n&&l==="D"&&(m===1||m===2))?u:a},F.tick0=function(a,i,n,r){if(i==="date")return o.cleanDate(a,o.dateTick0(n,r%t===0?1:0));if(!(r==="D1"||r==="D2"))return s(a)?Number(a):0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(e,I,F){var s=e("../../lib/regex").counter;I.exports={idRegex:{x:s("x","( domain)?"),y:s("y","( domain)?")},attrRegex:s("[xy]axis"),xAxisMatch:s("xaxis"),yAxisMatch:s("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(e,I,F){var s=e("../../lib"),o=e("./autorange"),h=e("./axis_ids").id2name,y=e("./layout_attributes"),t=e("./scale_zoom"),a=e("./set_convert"),i=e("../../constants/numerical").ALMOST_EQUAL,n=e("../../constants/alignment").FROM_BL;F.handleDefaults=function(g,_,p){var A=p.axIds,c=p.axHasImage,S=_._axisConstraintGroups=[],T=_._axisMatchGroups=[],x,w,v,C,M,E,L,z;for(x=0;x<A.length;x++)C=h(A[x]),M=g[C],E=_[C],r(M,E,{axIds:A,layoutOut:_,hasImage:c[C]});function O(Z,K){for(x=0;x<Z.length;x++){w=Z[x];for(v in w)_[h(v)][K]=w}}for(O(T,"_matchGroup"),x=0;x<S.length;x++){w=S[x];for(v in w)if(E=_[h(v)],E.fixedrange){for(var R in w){var D=h(R);(g[D]||{}).fixedrange===!1&&s.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),_[D].fixedrange=!0}break}}for(x=0;x<S.length;){w=S[x];for(v in w){E=_[h(v)],E._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(w).length&&(S.splice(x,1),x--);break}x++}O(S,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],B=!1,$=!1;function W(){z=E[L],L==="rangebreaks"&&($=E._hasDayOfWeekBreaks)}for(x=0;x<T.length;x++){w=T[x];for(var re=0;re<H.length;re++){L=H[re],z=null;var Q;for(v in w)if(C=h(v),M=g[C],E=_[C],L in E){if(!E.matches&&(Q=E,L in M)){W();break}z===null&&L in M&&W()}if(L==="range"&&z&&(B=!0),L==="autorange"&&z===null&&B&&(z=!1),z===null&&L in Q&&(z=Q[L]),z!==null)for(v in w)E=_[h(v)],E[L]=L==="range"?z.slice():z,L==="rangebreaks"&&(E._hasDayOfWeekBreaks=$,a(E,_))}}};function r(g,_,p){var A=p.axIds,c=p.layoutOut,S=p.hasImage,T=c._axisConstraintGroups,x=c._axisMatchGroups,w=_._id,v=w.charAt(0),C=((c._splomAxes||{})[v]||{})[w]||{},M=_._id,E=M.charAt(0)==="x";_._matchGroup=null,_._constraintGroup=null;function L(ue,V){return s.coerce(g,_,y,ue,V)}L("constrain",S?"domain":"range"),s.coerce(g,_,{constraintoward:{valType:"enumerated",values:E?["left","center","right"]:["bottom","middle","top"],dflt:E?"center":"middle"}},"constraintoward");var z=_.type,O,R,D=[];for(O=0;O<A.length;O++)if(R=A[O],R!==M){var H=c[h(R)];H.type===z&&D.push(R)}var B=u(T,M);if(B){var $=[];for(O=0;O<D.length;O++)R=D[O],B[R]||$.push(R);D=$}var W=D.length,re,Q;W&&(g.matches||C.matches)&&(re=s.coerce(g,_,{matches:{valType:"enumerated",values:D,dflt:D.indexOf(C.matches)!==-1?C.matches:void 0}},"matches"));var Z=S&&!E?_.anchor:void 0;if(W&&!re&&(g.scaleanchor||Z)&&(Q=s.coerce(g,_,{scaleanchor:{valType:"enumerated",values:D}},"scaleanchor",Z)),re){_._matchGroup=l(x,M,re,1);var K=c[h(re)],le=f(c,_)/f(c,K);E!==(re.charAt(0)==="x")&&(le=(E?"x":"y")+le),l(T,M,re,le)}else g.matches&&A.indexOf(g.matches)!==-1&&s.warn("ignored "+_._name+'.matches: "'+g.matches+'" to avoid an infinite loop');if(Q){var fe=L("scaleratio");fe||(fe=_.scaleratio=1),l(T,M,Q,fe)}else g.scaleanchor&&A.indexOf(g.scaleanchor)!==-1&&s.warn("ignored "+_._name+'.scaleanchor: "'+g.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(g,_){var p=_.domain;return p||(p=g[h(_.overlaying)].domain),p[1]-p[0]}function u(g,_){for(var p=0;p<g.length;p++)if(g[p][_])return g[p];return null}function l(g,_,p,A){var c,S,T,x,w,v=u(g,_);v===null?(v={},v[_]=1,w=g.length,g.push(v)):w=g.indexOf(v);var C=Object.keys(v);for(c=0;c<g.length;c++)if(T=g[c],c!==w&&T[p]){var M=T[p];for(S=0;S<C.length;S++)x=C[S],T[x]=m(M,m(A,v[x]));g.splice(w,1);return}if(A!==1)for(S=0;S<C.length;S++){var E=C[S];v[E]=m(A,v[E])}v[p]=1}function m(g,_){var p="",A="",c,S;typeof g=="string"&&(p=g.match(/^[xy]*/)[0],c=p.length,g=+g.substr(c)),typeof _=="string"&&(A=_.match(/^[xy]*/)[0],S=A.length,_=+_.substr(S));var T=g*_;return!c&&!S?T:!c||!S||p.charAt(0)===A.charAt(0)?p+A+g*_:c===S?T:(c>S?p.substr(S):A.substr(c))+T}function d(g,_){for(var p=_._size,A=p.h/p.w,c={},S=Object.keys(g),T=0;T<S.length;T++){var x=S[T],w=g[x];if(typeof w=="string"){var v=w.match(/^[xy]*/)[0],C=v.length;w=+w.substr(C);for(var M=v.charAt(0)==="y"?A:1/A,E=0;E<C;E++)w*=M}c[x]=w}return c}F.enforce=function(_){var p=_._fullLayout,A=p._axisConstraintGroups||[],c,S,T,x,w,v,C,M;for(c=0;c<A.length;c++){T=d(A[c],p);var E=Object.keys(T),L=1/0,z=0,O=1/0,R={},D={},H=!1;for(S=0;S<E.length;S++)x=E[S],D[x]=w=p[h(x)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),R[x]=v=Math.abs(w._m)/T[x],L=Math.min(L,v),(w.constrain==="domain"||!w._constraintShrinkable)&&(O=Math.min(O,v)),delete w._constraintShrinkable,z=Math.max(z,v),w.constrain==="domain"&&(H=!0);if(!(L>i*z&&!H)){for(S=0;S<E.length;S++)if(x=E[S],v=R[x],w=D[x],C=w.constrain,v!==O||C==="domain")if(M=v/O,C==="range")t(w,M);else{var B=w._inputDomain,$=(w.domain[1]-w.domain[0])/(B[1]-B[0]),W=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if(M/=$,M*W<1){w.domain=w._input.domain=B.slice(),t(w,M);continue}if(W<1&&(w.range=w._input.range=w._inputRange.slice(),M*=W),w.autorange){var re=w.r2l(w.range[0]),Q=w.r2l(w.range[1]),Z=(re+Q)/2,K=Z,le=Z,fe=Math.abs(Q-Z),ue=Z-fe*M*1.0001,V=Z+fe*M*1.0001,j=o.makePadFn(p,w,0),ee=o.makePadFn(p,w,1);b(w,M);var q=Math.abs(w._m),X=o.concatExtremes(_,w),J=X.min,ie=X.max,ne,oe;for(oe=0;oe<J.length;oe++)ne=J[oe].val-j(J[oe])/q,ne>ue&&ne<K&&(K=ne);for(oe=0;oe<ie.length;oe++)ne=ie[oe].val+ee(ie[oe])/q,ne<V&&ne>le&&(le=ne);var se=(le-K)/(2*fe);M/=se,K=w.l2r(K),le=w.l2r(le),w.range=w._input.range=re<Q?[K,le]:[le,K]}b(w,M)}}}},F.getAxisGroup=function(_,p){for(var A=_._axisMatchGroups,c=0;c<A.length;c++){var S=A[c];if(S[p])return"g"+c}return p},F.clean=function(_,p){if(p._inputDomain){for(var A=!1,c=p._id,S=_._fullLayout._axisConstraintGroups,T=0;T<S.length;T++)if(S[T][c]){A=!0;break}(!A||p.constrain!=="domain")&&(p._input.domain=p.domain=p._inputDomain,delete p._inputDomain)}};function b(g,_){var p=g._inputDomain,A=n[g.constraintoward],c=p[0]+(p[1]-p[0])*A;g.domain=g._input.domain=[c+(p[0]-c)/_,c+(p[1]-c)/_],g.setScale()}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=o.numberFormat,y=e("tinycolor2"),t=e("has-passive-events"),a=e("../../registry"),i=o.strTranslate,n=e("../../lib/svg_text_utils"),r=e("../../components/color"),f=e("../../components/drawing"),u=e("../../components/fx"),l=e("./axes"),m=e("../../lib/setcursor"),d=e("../../components/dragelement"),b=e("../../components/dragelement/helpers"),g=b.selectingOrDrawing,_=b.freeMode,p=e("../../constants/alignment").FROM_TL,A=e("../../lib/clear_gl_canvases"),c=e("../../plot_api/subroutines").redrawReglTraces,S=e("../plots"),T=e("./axis_ids").getFromId,x=e("./select").prepSelect,w=e("./select").clearSelect,v=e("./select").selectOnClick,C=e("./scale_zoom"),M=e("./constants"),E=M.MINDRAG,L=M.MINZOOM,z=!0;function O(ne,oe,se,me,ce,pe,xe,Se){var Ae=ne._fullLayout._zoomlayer,Ce=xe+Se==="nsew",Ee=(xe+Se).length===1,Oe,_e,Re,Ve,Je,ze,De,je,dt,Et,$t,wt,Ot,Vt,kt,St,ot,ht,Ke,Pe,We,Qe,ut;function It(){if(Oe=oe.xaxis,_e=oe.yaxis,dt=Oe._length,Et=_e._length,De=Oe._offset,je=_e._offset,Re={},Re[Oe._id]=Oe,Ve={},Ve[_e._id]=_e,xe&&Se)for(var zr=oe.overlays,$r=0;$r<zr.length;$r++){var hn=zr[$r].xaxis;Re[hn._id]=hn;var Tr=zr[$r].yaxis;Ve[Tr._id]=Tr}Je=ie(Re),ze=ie(Ve),Ot=H(Je,Se),Vt=H(ze,xe),kt=!Vt&&!Ot,wt=X(ne,ne._fullLayout._axisMatchGroups,Re,Ve),$t=X(ne,ne._fullLayout._axisConstraintGroups,Re,Ve,wt);var wr=$t.isSubplotConstrained||wt.isSubplotConstrained;St=Se||wr,ot=xe||wr;var Ur=ne._fullLayout;ht=Ur._has("scattergl"),Ke=Ur._has("splom"),Pe=Ur._has("svg")}It();var Tt=Q(Vt+Ot,ne._fullLayout.dragmode,Ce),Bt=D(oe,xe+Se+"drag",Tt,se,me,ce,pe);if(kt&&!Ce)return Bt.onmousedown=null,Bt.style.pointerEvents="none",Bt;var rr={element:Bt,gd:ne,plotinfo:oe};rr.prepFn=function(zr,$r,hn){var Tr=rr.dragmode,wr=ne._fullLayout.dragmode;wr!==Tr&&(rr.dragmode=wr),It(),Qe=ne._fullLayout._invScaleX,ut=ne._fullLayout._invScaleY,kt||(Ce?zr.shiftKey?wr==="pan"?wr="zoom":g(wr)||(wr="pan"):zr.ctrlKey&&(wr="pan"):wr="pan"),_(wr)?rr.minDrag=1:rr.minDrag=void 0,g(wr)?(rr.xaxes=Je,rr.yaxes=ze,x(zr,$r,hn,rr,wr)):(rr.clickFn=Qt,g(Tr)&&Ut(),kt||(wr==="zoom"?(rr.moveFn=it,rr.doneFn=ke,rr.minDrag=1,_r(zr,$r,hn)):wr==="pan"&&(rr.moveFn=pt,rr.doneFn=zt))),ne._fullLayout._redrag=function(){var Ur=ne._dragdata;if(Ur&&Ur.element===Bt){var Br=ne._fullLayout.dragmode;g(Br)||(It(),ur([0,0,dt,Et]),rr.moveFn(Ur.dx,Ur.dy))}}};function Ut(){rr.plotinfo.selection=!1,w(ne)}function Qt(zr,$r){var hn=rr.gd;if(hn._fullLayout._activeShapeIndex>=0){hn._fullLayout._deactivateShape(hn);return}var Tr=hn._fullLayout.clickmode;if(ue(hn),zr===2&&!Ee&&Xt(),Ce)Tr.indexOf("select")>-1&&v($r,hn,Je,ze,oe.id,rr),Tr.indexOf("event")>-1&&u.click(hn,$r,oe.id);else if(zr===1&&Ee){var wr=xe?_e:Oe,Ur=xe==="s"||Se==="w"?0:1,Br=wr._name+".range["+Ur+"]",Cr=B(wr,Ur),nt="left",Rt="middle";if(wr.fixedrange)return;xe?(Rt=xe==="n"?"top":"bottom",wr.side==="right"&&(nt="right")):Se==="e"&&(nt="right"),hn._context.showAxisRangeEntryBoxes&&s.select(Bt).call(n.makeEditable,{gd:hn,immediate:!0,background:hn._fullLayout.paper_bgcolor,text:String(Cr),fill:wr.tickfont?wr.tickfont.color:"#444",horizontalAlign:nt,verticalAlign:Rt}).on("edit",function(Jt){var hr=wr.d2r(Jt);hr!==void 0&&a.call("_guiRelayout",hn,Br,hr)})}}d.init(rr);var ar,nr,cr,Kr,yn,Qr,st,Gt,Zt,Ht;function _r(zr,$r,hn){var Tr=Bt.getBoundingClientRect();ar=$r-Tr.left,nr=hn-Tr.top,ne._fullLayout._calcInverseTransform(ne);var wr=o.apply3DTransform(ne._fullLayout._invTransform)(ar,nr);ar=wr[0],nr=wr[1],cr={l:ar,r:ar,w:0,t:nr,b:nr,h:0},Kr=ne._hmpixcount?ne._hmlumcount/ne._hmpixcount:y(ne._fullLayout.plot_bgcolor).getLuminance(),yn="M0,0H"+dt+"V"+Et+"H0V0",Qr=!1,st="xy",Ht=!1,Gt=Z(Ae,Kr,De,je,yn),Zt=K(Ae,De,je)}function it(zr,$r){if(ne._transitioningWithDuration)return!1;var hn=Math.max(0,Math.min(dt,Qe*zr+ar)),Tr=Math.max(0,Math.min(Et,ut*$r+nr)),wr=Math.abs(hn-ar),Ur=Math.abs(Tr-nr);cr.l=Math.min(ar,hn),cr.r=Math.max(ar,hn),cr.t=Math.min(nr,Tr),cr.b=Math.max(nr,Tr);function Br(){st="",cr.r=cr.l,cr.t=cr.b,Zt.attr("d","M0,0Z")}if($t.isSubplotConstrained)wr>L||Ur>L?(st="xy",wr/dt>Ur/Et?(Ur=wr*Et/dt,nr>Tr?cr.t=nr-Ur:cr.b=nr+Ur):(wr=Ur*dt/Et,ar>hn?cr.l=ar-wr:cr.r=ar+wr),Zt.attr("d",q(cr))):Br();else if(wt.isSubplotConstrained)if(wr>L||Ur>L){st="xy";var Cr=Math.min(cr.l/dt,(Et-cr.b)/Et),nt=Math.max(cr.r/dt,(Et-cr.t)/Et);cr.l=Cr*dt,cr.r=nt*dt,cr.b=(1-Cr)*Et,cr.t=(1-nt)*Et,Zt.attr("d",q(cr))}else Br();else!Vt||Ur<Math.min(Math.max(wr*.6,E),L)?wr<E||!Ot?Br():(cr.t=0,cr.b=Et,st="x",Zt.attr("d",j(cr,nr))):!Ot||wr<Math.min(Ur*.6,L)?(cr.l=0,cr.r=dt,st="y",Zt.attr("d",ee(cr,ar))):(st="xy",Zt.attr("d",q(cr)));cr.w=cr.r-cr.l,cr.h=cr.b-cr.t,st&&(Ht=!0),ne._dragged=Ht,le(Gt,Zt,cr,yn,Qr,Kr),Te(),ne.emit("plotly_relayouting",We),Qr=!0}function Te(){We={},(st==="xy"||st==="x")&&($(Je,cr.l/dt,cr.r/dt,We,$t.xaxes),_t("x",We)),(st==="xy"||st==="y")&&($(ze,(Et-cr.b)/Et,(Et-cr.t)/Et,We,$t.yaxes),_t("y",We))}function ke(){Te(),ue(ne),zt(),V(ne)}var Ge=[0,0,dt,Et],Ye=null,qe=M.REDRAWDELAY,at=oe.mainplot?ne._fullLayout._plots[oe.mainplot]:oe;function et(zr){if(!ne._context._scrollZoom.cartesian&&!ne._fullLayout._enablescrollzoom)return;if(Ut(),ne._transitioningWithDuration){zr.preventDefault(),zr.stopPropagation();return}It(),clearTimeout(Ye);var $r=-zr.deltaY;if(isFinite($r)||($r=zr.wheelDelta/10),!isFinite($r)){o.log("Did not find wheel motion attributes: ",zr);return}var hn=Math.exp(-Math.min(Math.max($r,-20),20)/200),Tr=at.draglayer.select(".nsewdrag").node().getBoundingClientRect(),wr=(zr.clientX-Tr.left)/Tr.width,Ur=(Tr.bottom-zr.clientY)/Tr.height,Br;function Cr(nt,Rt,Jt){if(nt.fixedrange)return;var hr=o.simpleMap(nt.range,nt.r2l),Dr=hr[0]+(hr[1]-hr[0])*Rt;function Gr(Rr){return nt.l2r(Dr+(Rr-Dr)*Jt)}nt.range=hr.map(Gr)}if(St){for(Se||(wr=.5),Br=0;Br<Je.length;Br++)Cr(Je[Br],wr,hn);_t("x"),Ge[2]*=hn,Ge[0]+=Ge[2]*wr*(1/hn-1)}if(ot){for(xe||(Ur=.5),Br=0;Br<ze.length;Br++)Cr(ze[Br],Ur,hn);_t("y"),Ge[3]*=hn,Ge[1]+=Ge[3]*(1-Ur)*(1/hn-1)}ur(Ge),Pt(),ne.emit("plotly_relayouting",We),Ye=setTimeout(function(){!ne._fullLayout||(Ge=[0,0,dt,Et],zt())},qe),zr.preventDefault()}xe.length*Se.length!==1&&J(Bt,et);function pt(zr,$r){if(zr=zr*Qe,$r=$r*ut,ne._transitioningWithDuration)return;if(ne._fullLayout._replotting=!0,Ot==="ew"||Vt==="ns"){var hn=Ot?-zr:0,Tr=Vt?-$r:0;if(wt.isSubplotConstrained){if(Ot&&Vt){var wr=(zr/dt-$r/Et)/2;zr=wr*dt,$r=-wr*Et,hn=-zr,Tr=-$r}Vt?hn=-Tr*dt/Et:Tr=-hn*Et/dt}Ot&&(W(Je,zr),_t("x")),Vt&&(W(ze,$r),_t("y")),ur([hn,Tr,dt,Et]),Pt(),ne.emit("plotly_relayouting",We);return}function Ur(Gr,Rr,Ct){for(var tr=1-Rr,Lr,Nr,Tn=0;Tn<Gr.length;Tn++){var rn=Gr[Tn];if(!rn.fixedrange){Lr=rn,Nr=rn._rl[tr]+(rn._rl[Rr]-rn._rl[tr])/re(Ct/rn._length);var kn=rn.l2r(Nr);kn!==!1&&kn!==void 0&&(rn.range[Rr]=kn)}}return Lr._length*(Lr._rl[Rr]-Nr)/(Lr._rl[Rr]-Lr._rl[tr])}var Br=Ot==="w"==(Vt==="n")?1:-1;if(Ot&&Vt&&($t.isSubplotConstrained||wt.isSubplotConstrained)){var Cr=(zr/dt+Br*$r/Et)/2;zr=Cr*dt,$r=Br*Cr*Et}var nt,Rt;if(Ot==="w"?zr=Ur(Je,0,zr):Ot==="e"?zr=Ur(Je,1,-zr):Ot||(zr=0),Vt==="n"?$r=Ur(ze,1,$r):Vt==="s"?$r=Ur(ze,0,-$r):Vt||($r=0),nt=Ot==="w"?zr:0,Rt=Vt==="n"?$r:0,$t.isSubplotConstrained&&!wt.isSubplotConstrained||wt.isSubplotConstrained&&Ot&&Vt&&Br>0){var Jt;if(wt.isSubplotConstrained||!Ot&&Vt.length===1){for(Jt=0;Jt<Je.length;Jt++)Je[Jt].range=Je[Jt]._r.slice(),C(Je[Jt],1-$r/Et);zr=$r*dt/Et,nt=zr/2}if(wt.isSubplotConstrained||!Vt&&Ot.length===1){for(Jt=0;Jt<ze.length;Jt++)ze[Jt].range=ze[Jt]._r.slice(),C(ze[Jt],1-zr/dt);$r=zr*Et/dt,Rt=$r/2}}(!wt.isSubplotConstrained||!Vt)&&_t("x"),(!wt.isSubplotConstrained||!Ot)&&_t("y");var hr=dt-zr,Dr=Et-$r;wt.isSubplotConstrained&&!(Ot&&Vt)&&(Ot?(Rt=nt?0:zr*Et/dt,Dr=hr*Et/dt):(nt=Rt?0:$r*dt/Et,hr=Dr*dt/Et)),ur([nt,Rt,hr,Dr]),Pt(),ne.emit("plotly_relayouting",We)}function _t(zr,$r){for(var hn=wt.isSubplotConstrained?{x:ze,y:Je}[zr]:wt[zr+"axes"],Tr=wt.isSubplotConstrained?{x:Je,y:ze}[zr]:[],wr=0;wr<hn.length;wr++){var Ur=hn[wr],Br=Ur._id,Cr=wt.xLinks[Br]||wt.yLinks[Br],nt=Tr[0]||Re[Cr]||Ve[Cr];nt&&($r?($r[Ur._name+".range[0]"]=$r[nt._name+".range[0]"],$r[Ur._name+".range[1]"]=$r[nt._name+".range[1]"]):Ur.range=nt.range.slice())}}function Pt(){var zr=[],$r;function hn(Ur){for($r=0;$r<Ur.length;$r++)Ur[$r].fixedrange||zr.push(Ur[$r]._id)}for(St&&(hn(Je),hn($t.xaxes),hn(wt.xaxes)),ot&&(hn(ze),hn($t.yaxes),hn(wt.yaxes)),We={},$r=0;$r<zr.length;$r++){var Tr=zr[$r],wr=T(ne,Tr);l.drawOne(ne,wr,{skipTitle:!0}),We[wr._name+".range[0]"]=wr.range[0],We[wr._name+".range[1]"]=wr.range[1]}l.redrawComponents(ne,zr)}function Xt(){if(!ne._transitioningWithDuration){var zr=ne._context.doubleClick,$r=[];Ot&&($r=$r.concat(Je)),Vt&&($r=$r.concat(ze)),wt.xaxes&&($r=$r.concat(wt.xaxes)),wt.yaxes&&($r=$r.concat(wt.yaxes));var hn={},Tr,wr,Ur;if(zr==="reset+autosize"){for(zr="autosize",wr=0;wr<$r.length;wr++)if(Tr=$r[wr],Tr._rangeInitial&&(Tr.range[0]!==Tr._rangeInitial[0]||Tr.range[1]!==Tr._rangeInitial[1])||!Tr._rangeInitial&&!Tr.autorange){zr="reset";break}}if(zr==="autosize")for(wr=0;wr<$r.length;wr++)Tr=$r[wr],Tr.fixedrange||(hn[Tr._name+".autorange"]=!0);else if(zr==="reset")for((Ot||$t.isSubplotConstrained)&&($r=$r.concat($t.xaxes)),Vt&&!$t.isSubplotConstrained&&($r=$r.concat($t.yaxes)),$t.isSubplotConstrained&&(Ot?Vt||($r=$r.concat(ze)):$r=$r.concat(Je)),wr=0;wr<$r.length;wr++)Tr=$r[wr],Tr.fixedrange||(Tr._rangeInitial?(Ur=Tr._rangeInitial,hn[Tr._name+".range[0]"]=Ur[0],hn[Tr._name+".range[1]"]=Ur[1]):hn[Tr._name+".autorange"]=!0);ne.emit("plotly_doubleclick",null),a.call("_guiRelayout",ne,hn)}}function zt(){ur([0,0,dt,Et]),o.syncOrAsync([S.previousPromises,function(){ne._fullLayout._replotting=!1,a.call("_guiRelayout",ne,We)}],ne)}function ur(zr){var $r=ne._fullLayout,hn=$r._plots,Tr=$r._subplots.cartesian,wr,Ur,Br,Cr;if(Ke&&a.subplotsRegistry.splom.drag(ne),ht){for(wr=0;wr<Tr.length;wr++)if(Ur=hn[Tr[wr]],Br=Ur.xaxis,Cr=Ur.yaxis,Ur._scene){var nt=o.simpleMap(Br.range,Br.r2l),Rt=o.simpleMap(Cr.range,Cr.r2l);Ur._scene.update({range:[nt[0],Rt[0],nt[1],Rt[1]]})}}if((Ke||ht)&&(A(ne),c(ne)),Pe){var Jt=zr[2]/Oe._length,hr=zr[3]/_e._length;for(wr=0;wr<Tr.length;wr++){Ur=hn[Tr[wr]],Br=Ur.xaxis,Cr=Ur.yaxis;var Dr=(St||wt.isSubplotConstrained)&&!Br.fixedrange&&Re[Br._id],Gr=(ot||wt.isSubplotConstrained)&&!Cr.fixedrange&&Ve[Cr._id],Rr,Ct,tr,Lr;if(Dr?(Rr=Jt,tr=Se||wt.isSubplotConstrained?zr[0]:un(Br,Rr)):wt.xaHash[Br._id]?(Rr=Jt,tr=zr[0]*Br._length/Oe._length):wt.yaHash[Br._id]?(Rr=hr,tr=Vt==="ns"?-zr[1]*Br._length/_e._length:un(Br,Rr,{n:"top",s:"bottom"}[Vt])):(Rr=gr(Br,Jt,hr),tr=Mr(Br,Rr)),Gr?(Ct=hr,Lr=xe||wt.isSubplotConstrained?zr[1]:un(Cr,Ct)):wt.yaHash[Cr._id]?(Ct=hr,Lr=zr[1]*Cr._length/_e._length):wt.xaHash[Cr._id]?(Ct=Jt,Lr=Ot==="ew"?-zr[0]*Cr._length/Oe._length:un(Cr,Ct,{e:"right",w:"left"}[Ot])):(Ct=gr(Cr,Jt,hr),Lr=Mr(Cr,Ct)),!(!Rr&&!Ct)){Rr||(Rr=1),Ct||(Ct=1);var Nr=Br._offset-tr/Rr,Tn=Cr._offset-Lr/Ct;Ur.clipRect.call(f.setTranslate,tr,Lr).call(f.setScale,Rr,Ct),Ur.plot.call(f.setTranslate,Nr,Tn).call(f.setScale,1/Rr,1/Ct),(Rr!==Ur.xScaleFactor||Ct!==Ur.yScaleFactor)&&(f.setPointGroupScale(Ur.zoomScalePts,Rr,Ct),f.setTextPointsScale(Ur.zoomScaleTxt,Rr,Ct)),f.hideOutsideRangePoints(Ur.clipOnAxisFalseTraces,Ur),Ur.xScaleFactor=Rr,Ur.yScaleFactor=Ct}}}}function gr(zr,$r,hn){return zr.fixedrange?0:St&&$t.xaHash[zr._id]?$r:ot&&($t.isSubplotConstrained?$t.xaHash:$t.yaHash)[zr._id]?hn:0}function Mr(zr,$r){return $r?(zr.range=zr._r.slice(),C(zr,$r),un(zr,$r)):0}function un(zr,$r,hn){return zr._length*(1-$r)*p[hn||zr.constraintoward||"middle"]}return Bt}function R(ne,oe,se,me){var ce=o.ensureSingle(ne.draglayer,oe,se,function(pe){pe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ne.id)});return ce.call(m,me),ce.node()}function D(ne,oe,se,me,ce,pe,xe){var Se=R(ne,"rect",oe,se);return s.select(Se).call(f.setRect,me,ce,pe,xe),Se}function H(ne,oe){for(var se=0;se<ne.length;se++)if(!ne[se].fixedrange)return oe;return""}function B(ne,oe){var se=ne.range[oe],me=Math.abs(se-ne.range[1-oe]),ce;return ne.type==="date"?se:ne.type==="log"?(ce=Math.ceil(Math.max(0,-Math.log(me)/Math.LN10))+3,h("."+ce+"g")(Math.pow(10,se))):(ce=Math.floor(Math.log(Math.abs(se))/Math.LN10)-Math.floor(Math.log(me)/Math.LN10)+4,h("."+String(ce)+"g")(se))}function $(ne,oe,se,me,ce){for(var pe=0;pe<ne.length;pe++){var xe=ne[pe];if(!xe.fixedrange)if(xe.rangebreaks){var Se=xe._id.charAt(0)==="y",Ae=Se?1-oe:oe,Ce=Se?1-se:se;me[xe._name+".range[0]"]=xe.l2r(xe.p2l(Ae*xe._length)),me[xe._name+".range[1]"]=xe.l2r(xe.p2l(Ce*xe._length))}else{var Ee=xe._rl[0],Oe=xe._rl[1]-Ee;me[xe._name+".range[0]"]=xe.l2r(Ee+Oe*oe),me[xe._name+".range[1]"]=xe.l2r(Ee+Oe*se)}}if(ce&&ce.length){var _e=(oe+(1-se))/2;$(ce,_e,1-_e,me,[])}}function W(ne,oe){for(var se=0;se<ne.length;se++){var me=ne[se];if(!me.fixedrange)if(me.rangebreaks){var ce=0,pe=me._length,xe=me.p2l(ce+oe)-me.p2l(ce),Se=me.p2l(pe+oe)-me.p2l(pe),Ae=(xe+Se)/2;me.range=[me.l2r(me._rl[0]-Ae),me.l2r(me._rl[1]-Ae)]}else me.range=[me.l2r(me._rl[0]-oe/me._m),me.l2r(me._rl[1]-oe/me._m)]}}function re(ne){return 1-(ne>=0?Math.min(ne,.9):1/(1/Math.max(ne,-.3)+3.222))}function Q(ne,oe,se){return ne?ne==="nsew"?se?"":oe==="pan"?"move":"crosshair":ne.toLowerCase()+"-resize":"pointer"}function Z(ne,oe,se,me,ce){return ne.append("path").attr("class","zoombox").style({fill:oe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(se,me)).attr("d",ce+"Z")}function K(ne,oe,se){return ne.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(oe,se)).attr("d","M0,0Z")}function le(ne,oe,se,me,ce,pe){ne.attr("d",me+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),fe(ne,oe,ce,pe)}function fe(ne,oe,se,me){se||(ne.transition().style("fill",me>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oe.transition().style("opacity",1).duration(200))}function ue(ne){s.select(ne).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function V(ne){z&&ne.data&&ne._context.showTips&&(o.notifier(o._(ne,"Double-click to zoom back out"),"long"),z=!1)}function j(ne,oe){return"M"+(ne.l-.5)+","+(oe-L-.5)+"h-3v"+(2*L+1)+"h3ZM"+(ne.r+.5)+","+(oe-L-.5)+"h3v"+(2*L+1)+"h-3Z"}function ee(ne,oe){return"M"+(oe-L-.5)+","+(ne.t-.5)+"v-3h"+(2*L+1)+"v3ZM"+(oe-L-.5)+","+(ne.b+.5)+"v3h"+(2*L+1)+"v-3Z"}function q(ne){var oe=Math.floor(Math.min(ne.b-ne.t,ne.r-ne.l,L)/2);return"M"+(ne.l-3.5)+","+(ne.t-.5+oe)+"h3v"+-oe+"h"+oe+"v-3h-"+(oe+3)+"ZM"+(ne.r+3.5)+","+(ne.t-.5+oe)+"h-3v"+-oe+"h"+-oe+"v-3h"+(oe+3)+"ZM"+(ne.r+3.5)+","+(ne.b+.5-oe)+"h-3v"+oe+"h"+-oe+"v3h"+(oe+3)+"ZM"+(ne.l-3.5)+","+(ne.b+.5-oe)+"h3v"+oe+"h"+oe+"v3h-"+(oe+3)+"Z"}function X(ne,oe,se,me,ce){for(var pe=!1,xe={},Se={},Ae,Ce,Ee,Oe,_e=(ce||{}).xaHash,Re=(ce||{}).yaHash,Ve=0;Ve<oe.length;Ve++){var Je=oe[Ve];for(Ae in se)if(Je[Ae]){for(Ee in Je)!(ce&&(_e[Ee]||Re[Ee]))&&!(Ee.charAt(0)==="x"?se:me)[Ee]&&(xe[Ee]=Ae);for(Ce in me)!(ce&&(_e[Ce]||Re[Ce]))&&Je[Ce]&&(pe=!0)}for(Ce in me)if(Je[Ce])for(Oe in Je)!(ce&&(_e[Oe]||Re[Oe]))&&!(Oe.charAt(0)==="x"?se:me)[Oe]&&(Se[Oe]=Ce)}pe&&(o.extendFlat(xe,Se),Se={});var ze={},De=[];for(Ee in xe){var je=T(ne,Ee);De.push(je),ze[je._id]=je}var dt={},Et=[];for(Oe in Se){var $t=T(ne,Oe);Et.push($t),dt[$t._id]=$t}return{xaHash:ze,yaHash:dt,xaxes:De,yaxes:Et,xLinks:xe,yLinks:Se,isSubplotConstrained:pe}}function J(ne,oe){if(!t)ne.onwheel!==void 0?ne.onwheel=oe:ne.onmousewheel!==void 0?ne.onmousewheel=oe:ne.isAddedWheelEvent||(ne.isAddedWheelEvent=!0,ne.addEventListener("wheel",oe,{passive:!1}));else{var se=ne.onwheel!==void 0?"wheel":"mousewheel";ne._onwheel&&ne.removeEventListener(se,ne._onwheel),ne._onwheel=oe,ne.addEventListener(se,oe,{passive:!1})}}function ie(ne){var oe=[];for(var se in ne)oe.push(ne[se]);return oe}I.exports={makeDragBox:O,makeDragger:R,makeRectDragger:D,makeZoombox:Z,makeCorners:K,updateZoombox:le,xyCorners:q,transitionZoombox:fe,removeZoombox:ue,showDoubleClickNotifier:V,attachWheelEventHandler:J}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/fx"),h=e("../../components/dragelement"),y=e("../../lib/setcursor"),t=e("./dragbox").makeDragBox,a=e("./constants").DRAGGERSIZE;F.initInteractions=function(n){var r=n._fullLayout;if(n._context.staticPlot){s.select(n).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var f=Object.keys(r._plots||{}).sort(function(l,m){if((r._plots[l].mainplot&&!0)===(r._plots[m].mainplot&&!0)){var d=l.split("y"),b=m.split("y");return d[0]===b[0]?Number(d[1]||1)-Number(b[1]||1):Number(d[0]||1)-Number(b[0]||1)}return r._plots[l].mainplot?1:-1});f.forEach(function(l){var m=r._plots[l],d=m.xaxis,b=m.yaxis;if(!m.mainplot){var g=t(n,m,d._offset,b._offset,d._length,b._length,"ns","ew");g.onmousemove=function(A){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===l&&n._fullLayout._plots[l]&&o.hover(n,A,l)},o.hover(n,A,l),n._fullLayout._lasthover=g,n._fullLayout._hoversubplot=l},g.onmouseout=function(A){n._dragging||(n._fullLayout._hoversubplot=null,h.unhover(n,A))},n._context.showAxisDragHandles&&(t(n,m,d._offset-a,b._offset-a,a,a,"n","w"),t(n,m,d._offset+d._length,b._offset-a,a,a,"n","e"),t(n,m,d._offset-a,b._offset+b._length,a,a,"s","w"),t(n,m,d._offset+d._length,b._offset+b._length,a,a,"s","e"))}if(n._context.showAxisDragHandles){if(l===d._mainSubplot){var _=d._mainLinePosition;d.side==="top"&&(_-=a),t(n,m,d._offset+d._length*.1,_,d._length*.8,a,"","ew"),t(n,m,d._offset,_,d._length*.1,a,"","w"),t(n,m,d._offset+d._length*.9,_,d._length*.1,a,"","e")}if(l===b._mainSubplot){var p=b._mainLinePosition;b.side!=="right"&&(p-=a),t(n,m,p,b._offset+b._length*.1,a,b._length*.8,"ns",""),t(n,m,p,b._offset+b._length*.9,a,b._length*.1,"s",""),t(n,m,p,b._offset,a,b._length*.1,"n","")}}});var u=r._hoverlayer.node();u.onmousemove=function(l){l.target=n._fullLayout._lasthover,o.hover(n,l,r._hoversubplot)},u.onclick=function(l){l.target=n._fullLayout._lasthover,o.click(n,l)},u.onmousedown=function(l){n._fullLayout._lasthover.onmousedown(l)},F.updateFx(n)}},F.updateFx=function(i){var n=i._fullLayout,r=n.dragmode==="pan"?"move":"crosshair";y(n._draggers,r)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(e,I,F){function s(h){var y=h._fullLayout._zoomlayer;y&&y.selectAll(".outline-controllers").remove()}function o(h){var y=h._fullLayout._zoomlayer;y&&y.selectAll(".select-outline").remove(),h._fullLayout._drawing=!1}I.exports={clearOutlineControllers:s,clearSelect:o}},{}],566:[function(e,I,F){var s=e("../../lib").strTranslate;function o(a,i){switch(a.type){case"log":return a.p2d(i);case"date":return a.p2r(i,0,a.calendar);default:return a.p2r(i)}}function h(a,i){switch(a.type){case"log":return a.d2p(i);case"date":return a.r2p(i,0,a.calendar);default:return a.r2p(i)}}function y(a){var i=a._id.charAt(0)==="y"?1:0;return function(n){return o(a,n[i])}}function t(a){return s(a.xaxis._offset,a.yaxis._offset)}I.exports={p2r:o,r2p:h,axValue:y,getTransform:t}},{"../../lib":503}],567:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("./axis_ids");I.exports=function(t){return function(i,n){var r=i[t];if(!!Array.isArray(r))for(var f=s.subplotsRegistry.cartesian,u=f.idRegex,l=n._subplots,m=l.xaxis,d=l.yaxis,b=l.cartesian,g=n._has("cartesian")||n._has("gl2d"),_=0;_<r.length;_++){var p=r[_];if(!!o.isPlainObject(p)){var A=h.cleanId(p.xref,"x",!1),c=h.cleanId(p.yref,"y",!1),S=u.x.test(A),T=u.y.test(c);if(S||T){g||o.pushUnique(n._basePlotModules,f);var x=!1;S&&m.indexOf(A)===-1&&(m.push(A),x=!0),T&&d.indexOf(c)===-1&&(d.push(c),x=!0),x&&S&&T&&b.push(A+c)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../registry"),h=e("../../lib"),y=e("../plots"),t=e("../../components/drawing"),a=e("../get_data").getModuleCalcData,i=e("./axis_ids"),n=e("./constants"),r=e("../../constants/xmlns_namespaces"),f=h.ensureSingle;function u(_,p,A){return h.ensureSingle(_,p,A,function(c){c.datum(A)})}F.name="cartesian",F.attr=["xaxis","yaxis"],F.idRoot=["x","y"],F.idRegex=n.idRegex,F.attrRegex=n.attrRegex,F.attributes=e("./attributes"),F.layoutAttributes=e("./layout_attributes"),F.supplyLayoutDefaults=e("./layout_defaults"),F.transitionAxes=e("./transition_axes"),F.finalizeSubplots=function(_,p){var A=p._subplots,c=A.xaxis,S=A.yaxis,T=A.cartesian,x=T.concat(A.gl2d||[]),w={},v={},C,M,E;for(C=0;C<x.length;C++){var L=x[C].split("y");w[L[0]]=1,v["y"+L[1]]=1}for(C=0;C<c.length;C++)M=c[C],w[M]||(E=(_[i.id2name(M)]||{}).anchor,n.idRegex.y.test(E)||(E="y"),T.push(M+E),x.push(M+E),v[E]||(v[E]=1,h.pushUnique(S,E)));for(C=0;C<S.length;C++)E=S[C],v[E]||(M=(_[i.id2name(E)]||{}).anchor,n.idRegex.x.test(M)||(M="x"),T.push(M+E),x.push(M+E),w[M]||(w[M]=1,h.pushUnique(c,M)));if(!x.length){M="",E="";for(var z in _)if(n.attrRegex.test(z)){var O=z.charAt(0);O==="x"?(!M||+z.substr(5)<+M.substr(5))&&(M=z):(!E||+z.substr(5)<+E.substr(5))&&(E=z)}M=M?i.name2id(M):"x",E=E?i.name2id(E):"y",c.push(M),S.push(E),T.push(M+E)}},F.plot=function(_,p,A,c){var S=_._fullLayout,T=S._subplots.cartesian,x=_.calcdata,w;if(!Array.isArray(p))for(p=[],w=0;w<x.length;w++)p.push(w);for(w=0;w<T.length;w++){for(var v=T[w],C=S._plots[v],M=[],E,L=0;L<x.length;L++){var z=x[L],O=z[0].trace;O.xaxis+O.yaxis===v&&((p.indexOf(O.index)!==-1||O.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===v&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&M.indexOf(E)===-1&&M.push(E),M.push(z)),E=z)}l(_,C,M,A,c)}};function l(_,p,A,c,S){for(var T=n.traceLayerClasses,x=_._fullLayout,w=x._modules,v,C,M,E=[],L=[],z=0;z<w.length;z++){v=w[z];var O=v.name,R=o.modules[O].categories;if(R.svg){var D=v.layerName||O+"layer",H=v.plot;C=a(A,H),M=C[0],A=C[1],M.length&&E.push({i:T.indexOf(D),className:D,plotMethod:H,cdModule:M}),R.zoomScale&&L.push("."+D)}}E.sort(function(W,re){return W.i-re.i});var B=p.plot.selectAll("g.mlayer").data(E,function(W){return W.className});if(B.enter().append("g").attr("class",function(W){return W.className}).classed("mlayer",!0).classed("rangeplot",p.isRangePlot),B.exit().remove(),B.order(),B.each(function(W){var re=s.select(this),Q=W.className;W.plotMethod(_,p,W.cdModule,re,c,S),n.clipOnAxisFalseQuery.indexOf("."+Q)===-1&&t.setClipUrl(re,p.layerClipId,_)}),x._has("scattergl")&&(v=o.getModule("scattergl"),M=a(A,v)[0],v.plot(_,p,M)),!_._context.staticPlot&&(p._hasClipOnAxisFalse&&(p.clipOnAxisFalseTraces=p.plot.selectAll(n.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var $=p.plot.selectAll(L.join(",")).selectAll(".trace");p.zoomScalePts=$.selectAll("path.point"),p.zoomScaleTxt=$.selectAll(".textpoint")}}F.clean=function(_,p,A,c){var S=c._plots||{},T=p._plots||{},x=c._subplots||{},w,v,C;if(c._hasOnlyLargeSploms&&!p._hasOnlyLargeSploms)for(C in S)w=S[C],w.plotgroup&&w.plotgroup.remove();var M=c._has&&c._has("gl"),E=p._has&&p._has("gl");if(M&&!E)for(C in S)w=S[C],w._scene&&w._scene.destroy();if(x.xaxis&&x.yaxis){var L=i.listIds({_fullLayout:c});for(v=0;v<L.length;v++){var z=L[v];p[i.id2name(z)]||c._infolayer.selectAll(".g-"+z+"title").remove()}}var O=c._has&&c._has("cartesian"),R=p._has&&p._has("cartesian");if(O&&!R)b(c._cartesianlayer.selectAll(".subplot"),c),c._defs.selectAll(".axesclip").remove(),delete c._axisConstraintGroups,delete c._axisMatchGroups;else if(x.cartesian)for(v=0;v<x.cartesian.length;v++){var D=x.cartesian[v];if(!T[D]){var H="."+D+",."+D+"-x,."+D+"-y";c._cartesianlayer.selectAll(H).remove(),g(D,c)}}},F.drawFramework=function(_){var p=_._fullLayout,A=m(_),c=p._cartesianlayer.selectAll(".subplot").data(A,String);c.enter().append("g").attr("class",function(S){return"subplot "+S[0]}),c.order(),c.exit().call(b,p),c.each(function(S){var T=S[0],x=p._plots[T];x.plotgroup=s.select(this),d(_,x),x.draglayer=f(p._draggers,"g",T)})},F.rangePlot=function(_,p,A){d(_,p),l(_,p,A),y.style(_)};function m(_){var p=_._fullLayout,A=p._subplots.cartesian,c=A.length,S,T,x,w,v,C,M=[],E=[];for(S=0;S<c;S++){x=A[S],w=p._plots[x],v=w.xaxis,C=w.yaxis;var L=v._mainAxis,z=C._mainAxis,O=L._id+z._id,R=p._plots[O];w.overlays=[],O!==x&&R?(w.mainplot=O,w.mainplotinfo=R,E.push(x)):(w.mainplot=void 0,w.mainplotinfo=void 0,M.push(x))}for(S=0;S<E.length;S++)x=E[S],w=p._plots[x],w.mainplotinfo.overlays.push(w);var D=M.concat(E),H=new Array(c);for(S=0;S<c;S++){x=D[S],w=p._plots[x],v=w.xaxis,C=w.yaxis;var B=[x,v.layer,C.layer,v.overlaying||"",C.overlaying||""];for(T=0;T<w.overlays.length;T++)B.push(w.overlays[T].id);H[S]=B}return H}function d(_,p){var A=p.plotgroup,c=p.id,S=n.layerValue2layerClass[p.xaxis.layer],T=n.layerValue2layerClass[p.yaxis.layer],x=_._fullLayout._hasOnlyLargeSploms;if(p.mainplot){var v=p.mainplotinfo,C=v.plotgroup,M=c+"-x",E=c+"-y";p.gridlayer=v.gridlayer,p.zerolinelayer=v.zerolinelayer,f(v.overlinesBelow,"path",M),f(v.overlinesBelow,"path",E),f(v.overaxesBelow,"g",M),f(v.overaxesBelow,"g",E),p.plot=f(v.overplot,"g",c),f(v.overlinesAbove,"path",M),f(v.overlinesAbove,"path",E),f(v.overaxesAbove,"g",M),f(v.overaxesAbove,"g",E),p.xlines=C.select(".overlines-"+S).select("."+M),p.ylines=C.select(".overlines-"+T).select("."+E),p.xaxislayer=C.select(".overaxes-"+S).select("."+M),p.yaxislayer=C.select(".overaxes-"+T).select("."+E)}else if(x)p.xlines=f(A,"path","xlines-above"),p.ylines=f(A,"path","ylines-above"),p.xaxislayer=f(A,"g","xaxislayer-above"),p.yaxislayer=f(A,"g","yaxislayer-above");else{var w=f(A,"g","layer-subplot");p.shapelayer=f(w,"g","shapelayer"),p.imagelayer=f(w,"g","imagelayer"),p.gridlayer=f(A,"g","gridlayer"),p.zerolinelayer=f(A,"g","zerolinelayer"),f(A,"path","xlines-below"),f(A,"path","ylines-below"),p.overlinesBelow=f(A,"g","overlines-below"),f(A,"g","xaxislayer-below"),f(A,"g","yaxislayer-below"),p.overaxesBelow=f(A,"g","overaxes-below"),p.plot=f(A,"g","plot"),p.overplot=f(A,"g","overplot"),p.xlines=f(A,"path","xlines-above"),p.ylines=f(A,"path","ylines-above"),p.overlinesAbove=f(A,"g","overlines-above"),f(A,"g","xaxislayer-above"),f(A,"g","yaxislayer-above"),p.overaxesAbove=f(A,"g","overaxes-above"),p.xlines=A.select(".xlines-"+S),p.ylines=A.select(".ylines-"+T),p.xaxislayer=A.select(".xaxislayer-"+S),p.yaxislayer=A.select(".yaxislayer-"+T)}x||(u(p.gridlayer,"g",p.xaxis._id),u(p.gridlayer,"g",p.yaxis._id),p.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(i.idSort)),p.xlines.style("fill","none").classed("crisp",!0),p.ylines.style("fill","none").classed("crisp",!0)}function b(_,p){if(!!_){var A={};_.each(function(v){var C=v[0],M=s.select(this);M.remove(),g(C,p),A[C]=!0});for(var c in p._plots)for(var S=p._plots[c],T=S.overlays||[],x=0;x<T.length;x++){var w=T[x];A[w.id]&&w.plot.selectAll(".trace").remove()}}}function g(_,p){p._draggers.selectAll("g."+_).remove(),p._defs.select("#clip"+p._uid+_+"plot").remove()}F.toSVG=function(_){var p=_._fullLayout._glimages,A=s.select(_).selectAll(".svg-container"),c=A.filter(function(T,x){return x===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function S(){var T=this,x=T.toDataURL("image/png"),w=p.append("svg:image");w.attr({xmlns:r.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,width:T.style.width,height:T.style.height})}c.each(S)},F.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(e,I,F){var s=e("../font_attributes"),o=e("../../components/color/attributes"),h=e("../../components/drawing/attributes").dash,y=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray,a=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,i=e("../../constants/numerical").ONEDAY,n=e("./constants"),r=n.HOUR_PATTERN,f=n.WEEKDAY_PATTERN;I.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:o.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:s({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:t("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:i},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:y({},h,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:s({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:t("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:o.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:s({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color"),h=e("../../components/fx/helpers").isUnifiedHover,y=e("../../components/fx/hovermode_defaults"),t=e("../../plot_api/plot_template"),a=e("../layout_attributes"),i=e("./layout_attributes"),n=e("./type_defaults"),r=e("./axis_defaults"),f=e("./constraints"),u=e("./position_defaults"),l=e("./axis_ids"),m=l.id2name,d=l.name2id,b=e("./constants").AX_ID_PATTERN,g=e("../../registry"),_=g.traceIs,p=g.getComponentMethod;function A(c,S,T){Array.isArray(c[S])?c[S].push(T):c[S]=[T]}I.exports=function(S,T,x){var w=T.autotypenumbers,v={},C={},M={},E={},L={},z={},O={},R={},D={},H={},B,$;for(B=0;B<x.length;B++){var W=x[B];if(!(!_(W,"cartesian")&&!_(W,"gl2d"))){var re;if(W.xaxis)re=m(W.xaxis),A(v,re,W);else if(W.xaxes)for($=0;$<W.xaxes.length;$++)A(v,m(W.xaxes[$]),W);var Q;if(W.yaxis)Q=m(W.yaxis),A(v,Q,W);else if(W.yaxes)for($=0;$<W.yaxes.length;$++)A(v,m(W.yaxes[$]),W);if(W.type==="funnel"?W.orientation==="h"?(re&&(C[re]=!0),Q&&(O[Q]=!0)):Q&&(M[Q]=!0):W.type==="image"?(Q&&(R[Q]=!0),re&&(R[re]=!0)):(Q&&(L[Q]=!0,z[Q]=!0),(!_(W,"carpet")||W.type==="carpet"&&!W._cheater)&&re&&(E[re]=!0)),W.type==="carpet"&&W._cheater&&re&&(C[re]=!0),_(W,"2dMap")&&(D[re]=!0,D[Q]=!0),_(W,"oriented")){var Z=W.orientation==="h"?Q:re;H[Z]=!0}}}var K=T._subplots,le=K.xaxis,fe=K.yaxis,ue=s.simpleMap(le,m),V=s.simpleMap(fe,m),j=ue.concat(V),ee=o.background;le.length&&fe.length&&(ee=s.coerce(S,T,a,"plot_bgcolor"));var q=o.combine(ee,T.paper_bgcolor),X,J,ie,ne,oe;function se(){var Ke=v[X]||[];oe._traceIndices=Ke.map(function(Pe){return Pe._expandedIndex}),oe._annIndices=[],oe._shapeIndices=[],oe._imgIndices=[],oe._subplotsWith=[],oe._counterAxes=[],oe._name=oe._attr=X,oe._id=J}function me(Ke,Pe){return s.coerce(ne,oe,i,Ke,Pe)}function ce(Ke,Pe){return s.coerce2(ne,oe,i,Ke,Pe)}function pe(Ke){return Ke==="x"?fe:le}function xe(Ke,Pe){for(var We=Ke==="x"?ue:V,Qe=[],ut=0;ut<We.length;ut++){var It=We[ut];It!==Pe&&!(S[It]||{}).overlaying&&Qe.push(d(It))}return Qe}var Se={x:pe("x"),y:pe("y")},Ae=Se.x.concat(Se.y),Ce={},Ee=[];function Oe(){var Ke=ne.matches;b.test(Ke)&&Ae.indexOf(Ke)===-1&&(Ce[Ke]=ne.type,Ee=Object.keys(Ce))}var _e=y(S,T),Re=h(_e);for(B=0;B<j.length;B++){X=j[B],J=d(X),ie=X.charAt(0),s.isPlainObject(S[X])||(S[X]={}),ne=S[X],oe=t.newContainer(T,X,ie+"axis"),se();var Ve=ie==="x"&&!E[X]&&C[X]||ie==="y"&&!L[X]&&M[X],Je=ie==="y"&&(!z[X]&&O[X]||R[X]),ze={letter:ie,font:T.font,outerTicks:D[X],showGrid:!H[X],data:v[X]||[],bgColor:q,calendar:T.calendar,automargin:!0,visibleDflt:Ve,reverseDflt:Je,autotypenumbersDflt:w,splomStash:((T._splomAxes||{})[ie]||{})[J]};me("uirevision",T.uirevision),n(ne,oe,me,ze),r(ne,oe,me,ze,T);var De=Re&&ie===_e.charAt(0),je=ce("spikecolor",Re?oe.color:void 0),dt=ce("spikethickness",Re?1.5:void 0),Et=ce("spikedash",Re?"dot":void 0),$t=ce("spikemode",Re?"across":void 0),wt=ce("spikesnap"),Ot=me("showspikes",!!De||!!je||!!dt||!!Et||!!$t||!!wt);Ot||(delete oe.spikecolor,delete oe.spikethickness,delete oe.spikedash,delete oe.spikemode,delete oe.spikesnap),u(ne,oe,me,{letter:ie,counterAxes:Se[ie],overlayableAxes:xe(ie,X),grid:T.grid}),me("title.standoff"),Oe(),oe._input=ne}for(B=0;B<Ee.length;){J=Ee[B++],X=m(J),ie=X.charAt(0),s.isPlainObject(S[X])||(S[X]={}),ne=S[X],oe=t.newContainer(T,X,ie+"axis"),se();var Vt={letter:ie,font:T.font,outerTicks:D[X],showGrid:!H[X],data:[],bgColor:q,calendar:T.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:w,splomStash:((T._splomAxes||{})[ie]||{})[J]};me("uirevision",T.uirevision),oe.type=Ce[J]||"linear",r(ne,oe,me,Vt,T),u(ne,oe,me,{letter:ie,counterAxes:Se[ie],overlayableAxes:xe(ie,X),grid:T.grid}),me("fixedrange"),Oe(),oe._input=ne}var kt=p("rangeslider","handleDefaults"),St=p("rangeselector","handleDefaults");for(B=0;B<ue.length;B++)X=ue[B],ne=S[X],oe=T[X],kt(S,T,X),oe.type==="date"&&St(ne,oe,T,V,oe.calendar),me("fixedrange");for(B=0;B<V.length;B++){X=V[B],ne=S[X],oe=T[X];var ot=T[m(oe.anchor)],ht=p("rangeslider","isVisible")(ot);me("fixedrange",ht)}f.handleDefaults(S,T,{axIds:Ae.concat(Ee).sort(l.idSort),axHasImage:R})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(e,I,F){var s=e("tinycolor2").mix,o=e("../../components/color/attributes").lightFraction,h=e("../../lib");I.exports=function(t,a,i,n){n=n||{};var r=n.dfltColor;function f(S,T){return h.coerce2(t,a,n.attributes,S,T)}var u=f("linecolor",r),l=f("linewidth"),m=i("showline",n.showLine||!!u||!!l);m||(delete a.linecolor,delete a.linewidth);var d=s(r,n.bgColor,n.blend||o).toRgbString(),b=f("gridcolor",d),g=f("gridwidth"),_=i("showgrid",n.showGrid||!!b||!!g);if(_||(delete a.gridcolor,delete a.gridwidth),!n.noZeroLine){var p=f("zerolinecolor",r),A=f("zerolinewidth"),c=i("zeroline",n.showGrid||!!p||!!A);c||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib");I.exports=function(y,t,a,i){var n=i.counterAxes||[],r=i.overlayableAxes||[],f=i.letter,u=i.grid,l,m,d,b;u&&(m=u._domains[f][u._axisMap[t._id]],l=u._anchors[t._id],m&&(d=u[f+"side"].split(" ")[0],b=u.domain[f][d==="right"||d==="top"?1:0])),m=m||[0,1],l=l||(s(y.position)?"free":n[0]||"free"),d=d||(f==="x"?"bottom":"left"),b=b||0;var g=o.coerce(y,t,{anchor:{valType:"enumerated",values:["free"].concat(n),dflt:l}},"anchor");g==="free"&&a("position",b),o.coerce(y,t,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:d}},"side");var _=!1;if(r.length&&(_=o.coerce(y,t,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!_){var p=a("domain",m);p[0]>p[1]-1/4096&&(t.domain=m),o.noneOrAll(y.domain,t.domain,m)}return a("layer"),t}},{"../../lib":503,"fast-isnumeric":190}],573:[function(e,I,F){var s=e("./show_dflt");I.exports=function(h,y,t,a,i){i||(i={});var n=i.tickSuffixDflt,r=s(h),f=t("tickprefix");f&&t("showtickprefix",r);var u=t("ticksuffix",n);u&&t("showticksuffix",r)}},{"./show_dflt":577}],574:[function(e,I,F){var s=e("../../constants/alignment").FROM_BL;I.exports=function(h,y,t){t===void 0&&(t=s[h.constraintoward||"center"]);var a=[h.r2l(h.range[0]),h.r2l(h.range[1])],i=a[0]+(a[1]-a[0])*t;h.range=h._input.range=[h.l2r(i+(a[0]-i)*y),h.l2r(i+(a[1]-i)*y)],h.setScale()}},{"../../constants/alignment":471}],575:[function(e,I,F){var s=e("polybooljs"),o=e("../../registry"),h=e("../../components/drawing").dashStyle,y=e("../../components/color"),t=e("../../components/fx"),a=e("../../components/fx/helpers").makeEventData,i=e("../../components/dragelement/helpers"),n=i.freeMode,r=i.rectMode,f=i.drawMode,u=i.openMode,l=i.selectMode,m=e("../../components/shapes/draw_newshape/display_outlines"),d=e("../../components/shapes/draw_newshape/helpers").handleEllipse,b=e("../../components/shapes/draw_newshape/newshapes"),g=e("../../lib"),_=e("../../lib/polygon"),p=e("../../lib/throttle"),A=e("./axis_ids").getFromId,c=e("../../lib/clear_gl_canvases"),S=e("../../plot_api/subroutines").redrawReglTraces,T=e("./constants"),x=T.MINSELECT,w=_.filter,v=_.tester,C=e("./handle_outline").clearSelect,M=e("./helpers"),E=M.p2r,L=M.axValue,z=M.getTransform;function O(X,J,ie,ne,oe){var se=n(oe),me=r(oe),ce=u(oe),pe=f(oe),xe=l(oe),Se=oe==="drawline",Ae=oe==="drawcircle",Ce=Se||Ae,Ee=ne.gd,Oe=Ee._fullLayout,_e=Oe._zoomlayer,Re=ne.element.getBoundingClientRect(),Ve=ne.plotinfo,Je=z(Ve),ze=J-Re.left,De=ie-Re.top;Oe._calcInverseTransform(Ee);var je=g.apply3DTransform(Oe._invTransform)(ze,De);ze=je[0],De=je[1];var dt=Oe._invScaleX,Et=Oe._invScaleY,$t=ze,wt=De,Ot="M"+ze+","+De,Vt=ne.xaxes[0]._length,kt=ne.yaxes[0]._length,St=ne.xaxes.concat(ne.yaxes),ot=X.altKey&&!(f(oe)&&ce),ht,Ke,Pe,We,Qe,ut,It;W(X,Ee,ne),se&&(ht=w([[ze,De]],T.BENDPX));var Tt=_e.selectAll("path.select-outline-"+Ve.id).data(pe?[0]:[1,2]),Bt=Oe.newshape;Tt.enter().append("path").attr("class",function(Kr){return"select-outline select-outline-"+Kr+" select-outline-"+Ve.id}).style(pe?{opacity:Bt.opacity/2,fill:ce?void 0:Bt.fillcolor,stroke:Bt.line.color,"stroke-dasharray":h(Bt.line.dash,Bt.line.width),"stroke-width":Bt.line.width+"px"}:{}).attr("fill-rule",Bt.fillrule).classed("cursor-move",!!pe).attr("transform",Je).attr("d",Ot+"Z");var rr=_e.append("path").attr("class","zoombox-corners").style({fill:y.background,stroke:y.defaultLine,"stroke-width":1}).attr("transform",Je).attr("d","M0,0Z"),Ut=Oe._uid+T.SELECTID,Qt=[],ar=Q(Ee,ne.xaxes,ne.yaxes,ne.subplot);function nr(Kr,yn){return Kr-yn}var cr;Ve.fillRangeItems?cr=Ve.fillRangeItems:me?cr=function(Kr,yn){var Qr=Kr.range={};for(Qe=0;Qe<St.length;Qe++){var st=St[Qe],Gt=st._id.charAt(0);Qr[st._id]=[E(st,yn[Gt+"min"]),E(st,yn[Gt+"max"])].sort(nr)}}:cr=function(Kr,yn,Qr){var st=Kr.lassoPoints={};for(Qe=0;Qe<St.length;Qe++){var Gt=St[Qe];st[Gt._id]=Qr.filtered.map(L(Gt))}},ne.moveFn=function(Kr,yn){$t=Math.max(0,Math.min(Vt,dt*Kr+ze)),wt=Math.max(0,Math.min(kt,Et*yn+De));var Qr=Math.abs($t-ze),st=Math.abs(wt-De);if(me){var Gt,Zt,Ht;if(xe){var _r=Oe.selectdirection;switch(_r==="any"?st<Math.min(Qr*.6,x)?Gt="h":Qr<Math.min(st*.6,x)?Gt="v":Gt="d":Gt=_r,Gt){case"h":Zt=Ae?kt/2:0,Ht=kt;break;case"v":Zt=Ae?Vt/2:0,Ht=Vt;break}}if(pe)switch(Oe.newshape.drawdirection){case"vertical":Gt="h",Zt=Ae?kt/2:0,Ht=kt;break;case"horizontal":Gt="v",Zt=Ae?Vt/2:0,Ht=Vt;break;case"ortho":Qr<st?(Gt="h",Zt=De,Ht=wt):(Gt="v",Zt=ze,Ht=$t);break;default:Gt="d"}Gt==="h"?(We=Ce?d(Ae,[$t,Zt],[$t,Ht]):[[ze,Zt],[ze,Ht],[$t,Ht],[$t,Zt]],We.xmin=Ce?$t:Math.min(ze,$t),We.xmax=Ce?$t:Math.max(ze,$t),We.ymin=Math.min(Zt,Ht),We.ymax=Math.max(Zt,Ht),rr.attr("d","M"+We.xmin+","+(De-x)+"h-4v"+2*x+"h4ZM"+(We.xmax-1)+","+(De-x)+"h4v"+2*x+"h-4Z")):Gt==="v"?(We=Ce?d(Ae,[Zt,wt],[Ht,wt]):[[Zt,De],[Zt,wt],[Ht,wt],[Ht,De]],We.xmin=Math.min(Zt,Ht),We.xmax=Math.max(Zt,Ht),We.ymin=Ce?wt:Math.min(De,wt),We.ymax=Ce?wt:Math.max(De,wt),rr.attr("d","M"+(ze-x)+","+We.ymin+"v-4h"+2*x+"v4ZM"+(ze-x)+","+(We.ymax-1)+"v4h"+2*x+"v-4Z")):Gt==="d"&&(We=Ce?d(Ae,[ze,De],[$t,wt]):[[ze,De],[ze,wt],[$t,wt],[$t,De]],We.xmin=Math.min(ze,$t),We.xmax=Math.max(ze,$t),We.ymin=Math.min(De,wt),We.ymax=Math.max(De,wt),rr.attr("d","M0,0Z"))}else se&&(ht.addPt([$t,wt]),We=ht.filtered);ne.selectionDefs&&ne.selectionDefs.length?(Pe=j(ne.mergedPolygons,We,ot),We.subtract=ot,Ke=$(ne.selectionDefs.concat([We]))):(Pe=[We],Ke=v(We)),m(q(Pe,ce),Tt,ne),xe&&p.throttle(Ut,T.SELECTDELAY,function(){Qt=[];var it,Te;for(Qe=0;Qe<ar.length;Qe++)if(ut=ar[Qe],Te=ut._module.selectPoints(ut,Ke),it=ee(Te,ut),Qt.length)for(var ke=0;ke<it.length;ke++)Qt.push(it[ke]);else Qt=it;It={points:Qt},V(Ee,ar,It),cr(It,We,ht),ne.gd.emit("plotly_selecting",It)})},ne.clickFn=function(Kr,yn){if(rr.remove(),Ee._fullLayout._activeShapeIndex>=0){Ee._fullLayout._deactivateShape(Ee);return}if(!pe){var Qr=Oe.clickmode;p.done(Ut).then(function(){if(p.clear(Ut),Kr===2){for(Tt.remove(),Qe=0;Qe<ar.length;Qe++)ut=ar[Qe],ut._module.selectPoints(ut,!1);V(Ee,ar),re(ne),Ee.emit("plotly_deselect",null)}else Qr.indexOf("select")>-1&&R(yn,Ee,ne.xaxes,ne.yaxes,ne.subplot,ne,Tt),Qr==="event"&&Ee.emit("plotly_selected",void 0);t.click(Ee,yn)}).catch(g.error)}},ne.doneFn=function(){rr.remove(),p.done(Ut).then(function(){p.clear(Ut),ne.gd.emit("plotly_selected",It),We&&ne.selectionDefs&&(We.subtract=ot,ne.selectionDefs.push(We),ne.mergedPolygons.length=0,[].push.apply(ne.mergedPolygons,Pe)),ne.doneFnCompleted&&ne.doneFnCompleted(Qt)}).catch(g.error),pe&&re(ne)}}function R(X,J,ie,ne,oe,se,me){var ce=J._hoverdata,pe=J._fullLayout,xe=pe.clickmode,Se=xe.indexOf("event")>-1,Ae=[],Ce,Ee,Oe,_e,Re,Ve,Je,ze,De,je;if(Z(ce)){W(X,J,se),Ce=Q(J,ie,ne,oe);var dt=K(ce,Ce),Et=dt.pointNumbers.length>0;if(Et?fe(Ce,dt):ue(Ce)&&(Je=le(dt))){for(me&&me.remove(),je=0;je<Ce.length;je++)Ee=Ce[je],Ee._module.selectPoints(Ee,!1);V(J,Ce),re(se),Se&&J.emit("plotly_deselect",null)}else{ze=X.shiftKey&&(Je!==void 0?Je:le(dt)),Oe=D(dt.pointNumber,dt.searchInfo,ze);var $t=se.selectionDefs.concat([Oe]);for(_e=$($t),je=0;je<Ce.length;je++)if(Re=Ce[je]._module.selectPoints(Ce[je],_e),Ve=ee(Re,Ce[je]),Ae.length)for(var wt=0;wt<Ve.length;wt++)Ae.push(Ve[wt]);else Ae=Ve;if(De={points:Ae},V(J,Ce,De),Oe&&se&&se.selectionDefs.push(Oe),me){var Ot=se.mergedPolygons,Vt=u(se.dragmode);m(q(Ot,Vt),me,se)}Se&&J.emit("plotly_selected",De)}}}function D(X,J,ie){return{pointNumber:X,searchInfo:J,subtract:ie}}function H(X){return"pointNumber"in X&&"searchInfo"in X}function B(X){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(J,ie,ne,oe){var se=X.searchInfo.cd[0].trace._expandedIndex,me=oe.cd[0].trace._expandedIndex;return me===se&&ne===X.pointNumber},isRect:!1,degenerate:!1,subtract:X.subtract}}function $(X){for(var J=[],ie=H(X[0])?0:X[0][0][0],ne=ie,oe=H(X[0])?0:X[0][0][1],se=oe,me=0;me<X.length;me++)if(H(X[me]))J.push(B(X[me]));else{var ce=_.tester(X[me]);ce.subtract=X[me].subtract,J.push(ce),ie=Math.min(ie,ce.xmin),ne=Math.max(ne,ce.xmax),oe=Math.min(oe,ce.ymin),se=Math.max(se,ce.ymax)}function pe(xe,Se,Ae,Ce){for(var Ee=!1,Oe=0;Oe<J.length;Oe++)J[Oe].contains(xe,Se,Ae,Ce)&&(Ee=J[Oe].subtract===!1);return Ee}return{xmin:ie,xmax:ne,ymin:oe,ymax:se,pts:[],contains:pe,isRect:!1,degenerate:!1}}function W(X,J,ie){J._fullLayout._drawing=!1;var ne=J._fullLayout,oe=ie.plotinfo,se=ie.dragmode,me=ne._lastSelectedSubplot&&ne._lastSelectedSubplot===oe.id,ce=(X.shiftKey||X.altKey)&&!(f(se)&&u(se));me&&ce&&oe.selection&&oe.selection.selectionDefs&&!ie.selectionDefs?(ie.selectionDefs=oe.selection.selectionDefs,ie.mergedPolygons=oe.selection.mergedPolygons):(!ce||!oe.selection)&&re(ie),me||(C(J),ne._lastSelectedSubplot=oe.id)}function re(X){var J=X.dragmode,ie=X.plotinfo,ne=X.gd;if(ne._fullLayout._activeShapeIndex>=0&&ne._fullLayout._deactivateShape(ne),f(J)){var oe=ne._fullLayout,se=oe._zoomlayer,me=se.selectAll(".select-outline-"+ie.id);if(me&&ne._fullLayout._drawing){var ce=b(me,X);ce&&o.call("_guiRelayout",ne,{shapes:ce}),ne._fullLayout._drawing=!1}}ie.selection={},ie.selection.selectionDefs=X.selectionDefs=[],ie.selection.mergedPolygons=X.mergedPolygons=[]}function Q(X,J,ie,ne){var oe=[],se=J.map(function(Ee){return Ee._id}),me=ie.map(function(Ee){return Ee._id}),ce,pe,xe;for(xe=0;xe<X.calcdata.length;xe++)if(ce=X.calcdata[xe],pe=ce[0].trace,!(pe.visible!==!0||!pe._module||!pe._module.selectPoints))if(ne&&(pe.subplot===ne||pe.geo===ne))oe.push(Ce(pe._module,ce,J[0],ie[0]));else if(pe.type==="splom"&&pe._xaxes[se[0]]&&pe._yaxes[me[0]]){var Se=Ce(pe._module,ce,J[0],ie[0]);Se.scene=X._fullLayout._splomScenes[pe.uid],oe.push(Se)}else if(pe.type==="sankey"){var Ae=Ce(pe._module,ce,J[0],ie[0]);oe.push(Ae)}else{if(se.indexOf(pe.xaxis)===-1||me.indexOf(pe.yaxis)===-1)continue;oe.push(Ce(pe._module,ce,A(X,pe.xaxis),A(X,pe.yaxis)))}return oe;function Ce(Ee,Oe,_e,Re){return{_module:Ee,cd:Oe,xaxis:_e,yaxis:Re}}}function Z(X){return X&&Array.isArray(X)&&X[0].hoverOnBox!==!0}function K(X,J){var ie=X[0],ne=-1,oe=[],se,me;for(me=0;me<J.length;me++)if(se=J[me],ie.fullData._expandedIndex===se.cd[0].trace._expandedIndex){if(ie.hoverOnBox===!0)break;ie.pointNumber!==void 0?ne=ie.pointNumber:ie.binNumber!==void 0&&(ne=ie.binNumber,oe=ie.pointNumbers);break}return{pointNumber:ne,pointNumbers:oe,searchInfo:se}}function le(X){var J=X.searchInfo.cd[0].trace,ie=X.pointNumber,ne=X.pointNumbers,oe=ne.length>0,se=oe?ne[0]:ie;return J.selectedpoints?J.selectedpoints.indexOf(se)>-1:!1}function fe(X,J){var ie=[],ne,oe,se,me;for(me=0;me<X.length;me++)ne=X[me],ne.cd[0].trace.selectedpoints&&ne.cd[0].trace.selectedpoints.length>0&&ie.push(ne);if(ie.length===1&&(se=ie[0]===J.searchInfo,se&&(oe=J.searchInfo.cd[0].trace,oe.selectedpoints.length===J.pointNumbers.length))){for(me=0;me<J.pointNumbers.length;me++)if(oe.selectedpoints.indexOf(J.pointNumbers[me])<0)return!1;return!0}return!1}function ue(X){var J=0,ie,ne,oe;for(oe=0;oe<X.length;oe++)if(ie=X[oe],ne=ie.cd[0].trace,ne.selectedpoints&&(ne.selectedpoints.length>1||(J+=ne.selectedpoints.length,J>1)))return!1;return J===1}function V(X,J,ie){var ne,oe,se,me;for(ne=0;ne<J.length;ne++){var ce=J[ne].cd[0].trace._fullInput,pe=X._fullLayout._tracePreGUI[ce.uid]||{};pe.selectedpoints===void 0&&(pe.selectedpoints=ce._input.selectedpoints||null)}if(ie){var xe=ie.points||[];for(ne=0;ne<J.length;ne++)me=J[ne].cd[0].trace,me._input.selectedpoints=me._fullInput.selectedpoints=[],me._fullInput!==me&&(me.selectedpoints=[]);for(ne=0;ne<xe.length;ne++){var Se=xe[ne],Ae=Se.data,Ce=Se.fullData;Se.pointIndices?([].push.apply(Ae.selectedpoints,Se.pointIndices),me._fullInput!==me&&[].push.apply(Ce.selectedpoints,Se.pointIndices)):(Ae.selectedpoints.push(Se.pointIndex),me._fullInput!==me&&Ce.selectedpoints.push(Se.pointIndex))}}else for(ne=0;ne<J.length;ne++)me=J[ne].cd[0].trace,delete me.selectedpoints,delete me._input.selectedpoints,me._fullInput!==me&&delete me._fullInput.selectedpoints;var Ee=!1;for(ne=0;ne<J.length;ne++){oe=J[ne],se=oe.cd,me=se[0].trace,o.traceIs(me,"regl")&&(Ee=!0);var Oe=oe._module,_e=Oe.styleOnSelect||Oe.style;_e&&(_e(X,se,se[0].node3),se[0].nodeRangePlot3&&_e(X,se,se[0].nodeRangePlot3))}Ee&&(c(X),S(X))}function j(X,J,ie){var ne;return ie?(ne=s.difference({regions:X,inverted:!1},{regions:[J],inverted:!1}),ne.regions):(ne=s.union({regions:X,inverted:!1},{regions:[J],inverted:!1}),ne.regions)}function ee(X,J){if(Array.isArray(X))for(var ie=J.cd,ne=J.cd[0].trace,oe=0;oe<X.length;oe++)X[oe]=a(X[oe],ne,ie);return X}function q(X,J){for(var ie=[],ne=0;ne<X.length;ne++){ie[ne]=[];for(var oe=0;oe<X[ne].length;oe++){ie[ne][oe]=[],ie[ne][oe][0]=oe?"L":"M";for(var se=0;se<X[ne][oe].length;se++)ie[ne][oe].push(X[ne][oe][se])}J||ie[ne].push(["Z",ie[ne][0][1],ie[ne][0][2]])}return ie}I.exports={prepSelect:O,clearSelect:C,clearSelectionsCache:re,selectOnClick:R}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(e,I,F){var s=e("@plotly/d3"),o=e("d3-time-format").utcFormat,h=e("../../lib"),y=h.numberFormat,t=e("fast-isnumeric"),a=h.cleanNumber,i=h.ms2DateTime,n=h.dateTime2ms,r=h.ensureNumber,f=h.isArrayOrTypedArray,u=e("../../constants/numerical"),l=u.FP_SAFE,m=u.BADNUM,d=u.LOG_CLIP,b=u.ONEWEEK,g=u.ONEDAY,_=u.ONEHOUR,p=u.ONEMIN,A=u.ONESEC,c=e("./axis_ids"),S=e("./constants"),T=S.HOUR_PATTERN,x=S.WEEKDAY_PATTERN;function w(C){return Math.pow(10,C)}function v(C){return C!=null}I.exports=function(M,E){E=E||{};var L=M._id||"x",z=L.charAt(0);function O(j,ee){if(j>0)return Math.log(j)/Math.LN10;if(j<=0&&ee&&M.range&&M.range.length===2){var q=M.range[0],X=M.range[1];return .5*(q+X-2*d*Math.abs(q-X))}else return m}function R(j,ee,q,X){if((X||{}).msUTC&&t(j))return+j;var J=n(j,q||M.calendar);if(J===m)if(t(j)){j=+j;var ie=Math.floor(h.mod(j+.05,1)*10),ne=Math.round(j-ie/10);J=n(new Date(ne))+ie/10}else return m;return J}function D(j,ee,q){return i(j,ee,q||M.calendar)}function H(j){return M._categories[Math.round(j)]}function B(j){if(v(j)){if(M._categoriesMap===void 0&&(M._categoriesMap={}),M._categoriesMap[j]!==void 0)return M._categoriesMap[j];M._categories.push(typeof j=="number"?String(j):j);var ee=M._categories.length-1;return M._categoriesMap[j]=ee,ee}return m}function $(j,ee){for(var q=new Array(ee),X=0;X<ee;X++){var J=(j[0]||[])[X],ie=(j[1]||[])[X];q[X]=W([J,ie])}return q}function W(j){if(M._categoriesMap)return M._categoriesMap[j]}function re(j){var ee=W(j);if(ee!==void 0)return ee;if(t(j))return+j}function Q(j){return t(j)?+j:W(j)}function Z(j,ee,q){return s.round(q+ee*j,2)}function K(j,ee,q){return(j-q)/ee}var le=function(ee){return t(ee)?Z(ee,M._m,M._b):m},fe=function(j){return K(j,M._m,M._b)};if(M.rangebreaks){var ue=z==="y";le=function(j){if(!t(j))return m;var ee=M._rangebreaks.length;if(!ee)return Z(j,M._m,M._b);var q=ue;M.range[0]>M.range[1]&&(q=!q);for(var X=q?-1:1,J=X*j,ie=0,ne=0;ne<ee;ne++){var oe=X*M._rangebreaks[ne].min,se=X*M._rangebreaks[ne].max;if(J<oe)break;if(J>se)ie=ne+1;else{ie=J<(oe+se)/2?ne:ne+1;break}}var me=M._B[ie]||0;return isFinite(me)?Z(j,M._m2,me):0},fe=function(j){var ee=M._rangebreaks.length;if(!ee)return K(j,M._m,M._b);for(var q=0,X=0;X<ee&&!(j<M._rangebreaks[X].pmin);X++)j>M._rangebreaks[X].pmax&&(q=X+1);return K(j,M._m2,M._B[q])}}M.c2l=M.type==="log"?O:r,M.l2c=M.type==="log"?w:r,M.l2p=le,M.p2l=fe,M.c2p=M.type==="log"?function(j,ee){return le(O(j,ee))}:le,M.p2c=M.type==="log"?function(j){return w(fe(j))}:fe,["linear","-"].indexOf(M.type)!==-1?(M.d2r=M.r2d=M.d2c=M.r2c=M.d2l=M.r2l=a,M.c2d=M.c2r=M.l2d=M.l2r=r,M.d2p=M.r2p=function(j){return M.l2p(a(j))},M.p2d=M.p2r=fe,M.cleanPos=r):M.type==="log"?(M.d2r=M.d2l=function(j,ee){return O(a(j),ee)},M.r2d=M.r2c=function(j){return w(a(j))},M.d2c=M.r2l=a,M.c2d=M.l2r=r,M.c2r=O,M.l2d=w,M.d2p=function(j,ee){return M.l2p(M.d2r(j,ee))},M.p2d=function(j){return w(fe(j))},M.r2p=function(j){return M.l2p(a(j))},M.p2r=fe,M.cleanPos=r):M.type==="date"?(M.d2r=M.r2d=h.identity,M.d2c=M.r2c=M.d2l=M.r2l=R,M.c2d=M.c2r=M.l2d=M.l2r=D,M.d2p=M.r2p=function(j,ee,q){return M.l2p(R(j,0,q))},M.p2d=M.p2r=function(j,ee,q){return D(fe(j),ee,q)},M.cleanPos=function(j){return h.cleanDate(j,m,M.calendar)}):M.type==="category"?(M.d2c=M.d2l=B,M.r2d=M.c2d=M.l2d=H,M.d2r=M.d2l_noadd=re,M.r2c=function(j){var ee=Q(j);return ee!==void 0?ee:M.fraction2r(.5)},M.l2r=M.c2r=r,M.r2l=Q,M.d2p=function(j){return M.l2p(M.r2c(j))},M.p2d=function(j){return H(fe(j))},M.r2p=M.d2p,M.p2r=fe,M.cleanPos=function(j){return typeof j=="string"&&j!==""?j:r(j)}):M.type==="multicategory"&&(M.r2d=M.c2d=M.l2d=H,M.d2r=M.d2l_noadd=re,M.r2c=function(j){var ee=re(j);return ee!==void 0?ee:M.fraction2r(.5)},M.r2c_just_indices=W,M.l2r=M.c2r=r,M.r2l=re,M.d2p=function(j){return M.l2p(M.r2c(j))},M.p2d=function(j){return H(fe(j))},M.r2p=M.d2p,M.p2r=fe,M.cleanPos=function(j){return Array.isArray(j)||typeof j=="string"&&j!==""?j:r(j)},M.setupMultiCategory=function(j){var ee=M._traceIndices,q,X,J=M._matchGroup;if(J&&M._categories.length===0){for(var ie in J)if(ie!==L){var ne=E[c.id2name(ie)];ee=ee.concat(ne._traceIndices)}}var oe=[[0,{}],[0,{}]],se=[];for(q=0;q<ee.length;q++){var me=j[ee[q]];if(z in me){var ce=me[z],pe=me._length||h.minRowLength(ce);if(f(ce[0])&&f(ce[1]))for(X=0;X<pe;X++){var xe=ce[0][X],Se=ce[1][X];v(xe)&&v(Se)&&(se.push([xe,Se]),xe in oe[0][1]||(oe[0][1][xe]=oe[0][0]++),Se in oe[1][1]||(oe[1][1][Se]=oe[1][0]++))}}}for(se.sort(function(Ae,Ce){var Ee=oe[0][1],Oe=Ee[Ae[0]]-Ee[Ce[0]];if(Oe)return Oe;var _e=oe[1][1];return _e[Ae[1]]-_e[Ce[1]]}),q=0;q<se.length;q++)B(se[q])}),M.fraction2r=function(j){var ee=M.r2l(M.range[0]),q=M.r2l(M.range[1]);return M.l2r(ee+j*(q-ee))},M.r2fraction=function(j){var ee=M.r2l(M.range[0]),q=M.r2l(M.range[1]);return(M.r2l(j)-ee)/(q-ee)},M.cleanRange=function(j,ee){ee||(ee={}),j||(j="range");var q=h.nestedProperty(M,j).get(),X,J;if(M.type==="date"?J=h.dfltRange(M.calendar):z==="y"?J=S.DFLTRANGEY:M._name==="realaxis"?J=[0,1]:J=ee.dfltRange||S.DFLTRANGEX,J=J.slice(),(M.rangemode==="tozero"||M.rangemode==="nonnegative")&&(J[0]=0),!q||q.length!==2){h.nestedProperty(M,j).set(J);return}for(M.type==="date"&&!M.autorange&&(q[0]=h.cleanDate(q[0],m,M.calendar),q[1]=h.cleanDate(q[1],m,M.calendar)),X=0;X<2;X++)if(M.type==="date"){if(!h.isDateTime(q[X],M.calendar)){M[j]=J;break}if(M.r2l(q[0])===M.r2l(q[1])){var ie=h.constrain(M.r2l(q[0]),h.MIN_MS+1e3,h.MAX_MS-1e3);q[0]=M.l2r(ie-1e3),q[1]=M.l2r(ie+1e3);break}}else{if(!t(q[X]))if(t(q[1-X]))q[X]=q[1-X]*(X?10:.1);else{M[j]=J;break}if(q[X]<-l?q[X]=-l:q[X]>l&&(q[X]=l),q[0]===q[1]){var ne=Math.max(1,Math.abs(q[0]*1e-6));q[0]-=ne,q[1]+=ne}}},M.setScale=function(j){var ee=E._size;if(M.overlaying){var q=c.getFromId({_fullLayout:E},M.overlaying);M.domain=q.domain}var X=j&&M._r?"_r":"range",J=M.calendar;M.cleanRange(X);var ie=M.r2l(M[X][0],J),ne=M.r2l(M[X][1],J),oe=z==="y";if(oe?(M._offset=ee.t+(1-M.domain[1])*ee.h,M._length=ee.h*(M.domain[1]-M.domain[0]),M._m=M._length/(ie-ne),M._b=-M._m*ne):(M._offset=ee.l+M.domain[0]*ee.w,M._length=ee.w*(M.domain[1]-M.domain[0]),M._m=M._length/(ne-ie),M._b=-M._m*ie),M._rangebreaks=[],M._lBreaks=0,M._m2=0,M._B=[],M.rangebreaks){var se,me;if(M._rangebreaks=M.locateBreaks(Math.min(ie,ne),Math.max(ie,ne)),M._rangebreaks.length){for(se=0;se<M._rangebreaks.length;se++)me=M._rangebreaks[se],M._lBreaks+=Math.abs(me.max-me.min);var ce=oe;ie>ne&&(ce=!ce),ce&&M._rangebreaks.reverse();var pe=ce?-1:1;for(M._m2=pe*M._length/(Math.abs(ne-ie)-M._lBreaks),M._B.push(-M._m2*(oe?ne:ie)),se=0;se<M._rangebreaks.length;se++)me=M._rangebreaks[se],M._B.push(M._B[M._B.length-1]-pe*M._m2*(me.max-me.min));for(se=0;se<M._rangebreaks.length;se++)me=M._rangebreaks[se],me.pmin=le(me.min),me.pmax=le(me.max)}}if(!isFinite(M._m)||!isFinite(M._b)||M._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},M.maskBreaks=function(j){var ee=M.rangebreaks||[],q,X,J,ie,ne;ee._cachedPatterns||(ee._cachedPatterns=ee.map(function(Ee){return Ee.enabled&&Ee.bounds?h.simpleMap(Ee.bounds,Ee.pattern?a:M.d2c):null})),ee._cachedValues||(ee._cachedValues=ee.map(function(Ee){return Ee.enabled&&Ee.values?h.simpleMap(Ee.values,M.d2c).sort(h.sorterAsc):null}));for(var oe=0;oe<ee.length;oe++){var se=ee[oe];if(se.enabled){if(se.bounds){var me=se.pattern;switch(q=ee._cachedPatterns[oe],X=q[0],J=q[1],me){case x:ne=new Date(j),ie=ne.getUTCDay(),X>J&&(J+=7,ie<X&&(ie+=7));break;case T:ne=new Date(j);var ce=ne.getUTCHours(),pe=ne.getUTCMinutes(),xe=ne.getUTCSeconds(),Se=ne.getUTCMilliseconds();ie=ce+(pe/60+xe/3600+Se/36e5),X>J&&(J+=24,ie<X&&(ie+=24));break;case"":ie=j;break}if(ie>=X&&ie<J)return m}else for(var Ae=ee._cachedValues[oe],Ce=0;Ce<Ae.length;Ce++)if(X=Ae[Ce],J=X+se.dvalue,j>=X&&j<J)return m}}return j},M.locateBreaks=function(j,ee){var q,X,J,ie,ne=[];if(!M.rangebreaks)return ne;var oe=M.rangebreaks.slice().sort(function(_e,Re){return _e.pattern===x&&Re.pattern===T?-1:Re.pattern===x&&_e.pattern===T?1:0}),se=function(_e,Re){if(_e=h.constrain(_e,j,ee),Re=h.constrain(Re,j,ee),_e!==Re){for(var Ve=!0,Je=0;Je<ne.length;Je++){var ze=ne[Je];_e<ze.max&&Re>=ze.min&&(_e<ze.min&&(ze.min=_e),Re>ze.max&&(ze.max=Re),Ve=!1)}Ve&&ne.push({min:_e,max:Re})}};for(q=0;q<oe.length;q++){var me=oe[q];if(me.enabled)if(me.bounds){var ce=j,pe=ee;me.pattern&&(ce=Math.floor(ce)),X=h.simpleMap(me.bounds,me.pattern?a:M.r2l),J=X[0],ie=X[1];var xe=new Date(ce),Se,Ae;switch(me.pattern){case x:Ae=b,Se=((ie<J?7:0)+(ie-J))*g,ce+=J*g-(xe.getUTCDay()*g+xe.getUTCHours()*_+xe.getUTCMinutes()*p+xe.getUTCSeconds()*A+xe.getUTCMilliseconds());break;case T:Ae=g,Se=((ie<J?24:0)+(ie-J))*_,ce+=J*_-(xe.getUTCHours()*_+xe.getUTCMinutes()*p+xe.getUTCSeconds()*A+xe.getUTCMilliseconds());break;default:ce=Math.min(X[0],X[1]),pe=Math.max(X[0],X[1]),Ae=pe-ce,Se=Ae}for(var Ce=ce;Ce<pe;Ce+=Ae)se(Ce,Ce+Se)}else for(var Ee=h.simpleMap(me.values,M.d2c),Oe=0;Oe<Ee.length;Oe++)J=Ee[Oe],ie=J+me.dvalue,se(J,ie)}return ne.sort(function(_e,Re){return _e.min-Re.min}),ne},M.makeCalcdata=function(j,ee,q){var X,J,ie,ne,oe=M.type,se=oe==="date"&&j[ee+"calendar"];if(ee in j){if(X=j[ee],ne=j._length||h.minRowLength(X),h.isTypedArray(X)&&(oe==="linear"||oe==="log")){if(ne===X.length)return X;if(X.subarray)return X.subarray(0,ne)}if(oe==="multicategory")return $(X,ne);for(J=new Array(ne),ie=0;ie<ne;ie++)J[ie]=M.d2c(X[ie],0,se,q)}else{var me=ee+"0"in j?M.d2c(j[ee+"0"],0,se):0,ce=j["d"+ee]?Number(j["d"+ee]):1;for(X=j[{x:"y",y:"x"}[ee]],ne=j._length||X.length,J=new Array(ne),ie=0;ie<ne;ie++)J[ie]=me+ie*ce}if(M.rangebreaks)for(ie=0;ie<ne;ie++)J[ie]=M.maskBreaks(J[ie]);return J},M.isValidRange=function(j){return Array.isArray(j)&&j.length===2&&t(M.r2l(j[0]))&&t(M.r2l(j[1]))},M.isPtWithinRange=function(j,ee){var q=M.c2l(j[z],null,ee),X=M.r2l(M.range[0]),J=M.r2l(M.range[1]);return X<J?X<=q&&q<=J:J<=q&&q<=X},M._emptyCategories=function(){M._categories=[],M._categoriesMap={}},M.clearCalc=function(){var j=M._matchGroup;if(j){var ee=null,q=null;for(var X in j){var J=E[c.id2name(X)];if(J._categories){ee=J._categories,q=J._categoriesMap;break}}ee&&q?(M._categories=ee,M._categoriesMap=q):M._emptyCategories()}else M._emptyCategories();if(M._initialCategories)for(var ie=0;ie<M._initialCategories.length;ie++)B(M._initialCategories[ie])},M.sortByInitialCategories=function(){var j=[];if(M._emptyCategories(),M._initialCategories)for(var ee=0;ee<M._initialCategories.length;ee++)B(M._initialCategories[ee]);j=j.concat(M._traceIndices);var q=M._matchGroup;for(var X in q)if(L!==X){var J=E[c.id2name(X)];J._categories=M._categories,J._categoriesMap=M._categoriesMap,j=j.concat(J._traceIndices)}return j};var V=E._d3locale;M.type==="date"&&(M._dateFormat=V?V.timeFormat:o,M._extraFormat=E._extraFormat),M._separators=E.separators,M._numFormat=V?V.numberFormat:y,delete M._minDtick,delete M._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(e,I,F){I.exports=function(o){var h=["showexponent","showtickprefix","showticksuffix"],y=h.filter(function(a){return o[a]!==void 0}),t=function(a){return o[a]===o[y[0]]};if(y.every(t)||y.length===1)return o[y[0]]}},{}],578:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color").contrast,h=e("./layout_attributes"),y=e("./show_dflt"),t=e("../array_container_defaults");I.exports=function(n,r,f,u,l){l||(l={});var m=y(n),d=f("showticklabels");if(d){var b=l.font||{},g=r.color,_=r.ticklabelposition||"",p=_.indexOf("inside")!==-1?o(l.bgColor):g&&g!==h.color.dflt?g:b.color;if(s.coerceFont(f,"tickfont",{family:b.family,size:b.size,color:p}),!l.noTicklabelstep&&u!=="multicategory"&&u!=="log"&&f("ticklabelstep"),l.noAng||f("tickangle"),u!=="category"){var A=f("tickformat");t(n,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),r.tickformatstops.length||delete r.tickformatstops,!l.noExp&&!A&&u!=="date"&&(f("showexponent",m),f("exponentformat"),f("minexponent"),f("separatethousands"))}}};function a(i,n){function r(u,l){return s.coerce(i,n,h.tickformatstops,u,l)}var f=r("enabled");f&&(r("dtickrange"),r("value"))}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(y,t,a,i){var n=s.coerce2(y,t,o,"ticklen"),r=s.coerce2(y,t,o,"tickwidth"),f=s.coerce2(y,t,o,"tickcolor",t.color),u=a("ticks",i.outerTicks||n||r||f?"outside":"");u||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(e,I,F){var s=e("./clean_ticks"),o=e("../../lib").isArrayOrTypedArray;I.exports=function(y,t,a,i){function n(g){var _=y[g];return _!==void 0?_:(t._template||{})[g]}var r=n("tick0"),f=n("dtick"),u=n("tickvals"),l=o(u)?"array":f?"linear":"auto",m=a("tickmode",l);if(m==="auto")a("nticks");else if(m==="linear"){var d=t.dtick=s.dtick(f,i);t.tick0=s.tick0(r,i,t.calendar,d)}else if(i!=="multicategory"){var b=a("tickvals");b===void 0?t.tickmode="auto":a("ticktext")}}},{"../../lib":503,"./clean_ticks":560}],581:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../registry"),h=e("../../lib"),y=e("../../components/drawing"),t=e("./axes");I.exports=function(i,n,r,f){var u=i._fullLayout;if(n.length===0){t.redrawComponents(i);return}function l(T){var x=T.xaxis,w=T.yaxis;u._defs.select("#"+T.clipId+"> rect").call(y.setTranslate,0,0).call(y.setScale,1,1),T.plot.call(y.setTranslate,x._offset,w._offset).call(y.setScale,1,1);var v=T.plot.selectAll(".scatterlayer .trace");v.selectAll(".point").call(y.setPointGroupScale,1,1),v.selectAll(".textpoint").call(y.setTextPointsScale,1,1),v.call(y.hideOutsideRangePoints,T)}function m(T,x){var w=T.plotinfo,v=w.xaxis,C=w.yaxis,M=v._length,E=C._length,L=!!T.xr1,z=!!T.yr1,O=[];if(L){var R=h.simpleMap(T.xr0,v.r2l),D=h.simpleMap(T.xr1,v.r2l),H=R[1]-R[0],B=D[1]-D[0];O[0]=(R[0]*(1-x)+x*D[0]-R[0])/(R[1]-R[0])*M,O[2]=M*(1-x+x*B/H),v.range[0]=v.l2r(R[0]*(1-x)+x*D[0]),v.range[1]=v.l2r(R[1]*(1-x)+x*D[1])}else O[0]=0,O[2]=M;if(z){var $=h.simpleMap(T.yr0,C.r2l),W=h.simpleMap(T.yr1,C.r2l),re=$[1]-$[0],Q=W[1]-W[0];O[1]=($[1]*(1-x)+x*W[1]-$[1])/($[0]-$[1])*E,O[3]=E*(1-x+x*Q/re),C.range[0]=v.l2r($[0]*(1-x)+x*W[0]),C.range[1]=C.l2r($[1]*(1-x)+x*W[1])}else O[1]=0,O[3]=E;t.drawOne(i,v,{skipTitle:!0}),t.drawOne(i,C,{skipTitle:!0}),t.redrawComponents(i,[v._id,C._id]);var Z=L?M/O[2]:1,K=z?E/O[3]:1,le=L?O[0]:0,fe=z?O[1]:0,ue=L?O[0]/O[2]*M:0,V=z?O[1]/O[3]*E:0,j=v._offset-ue,ee=C._offset-V;w.clipRect.call(y.setTranslate,le,fe).call(y.setScale,1/Z,1/K),w.plot.call(y.setTranslate,j,ee).call(y.setScale,Z,K),y.setPointGroupScale(w.zoomScalePts,1/Z,1/K),y.setTextPointsScale(w.zoomScaleTxt,1/Z,1/K)}var d;f&&(d=f());function b(){for(var T={},x=0;x<n.length;x++){var w=n[x],v=w.plotinfo.xaxis,C=w.plotinfo.yaxis;w.xr1&&(T[v._name+".range"]=w.xr1.slice()),w.yr1&&(T[C._name+".range"]=w.yr1.slice())}return d&&d(),o.call("relayout",i,T).then(function(){for(var M=0;M<n.length;M++)l(n[M].plotinfo)})}function g(){for(var T={},x=0;x<n.length;x++){var w=n[x],v=w.plotinfo.xaxis,C=w.plotinfo.yaxis;w.xr0&&(T[v._name+".range"]=w.xr0.slice()),w.yr0&&(T[C._name+".range"]=w.yr0.slice())}return o.call("relayout",i,T).then(function(){for(var M=0;M<n.length;M++)l(n[M].plotinfo)})}var _,p,A,c=s.ease(r.easing);i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(A),A=null,g()});function S(){p=Date.now();for(var T=Math.min(1,(p-_)/r.duration),x=c(T),w=0;w<n.length;w++)m(n[w],x);p-_>r.duration?(b(),A=window.cancelAnimationFrame(S)):A=window.requestAnimationFrame(S)}return _=Date.now(),A=window.requestAnimationFrame(S),Promise.resolve()}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(e,I,F){var s=e("../../registry").traceIs,o=e("./axis_autotype");I.exports=function(n,r,f,u){f("autotypenumbers",u.autotypenumbersDflt);var l=f("type",(u.splomStash||{}).type);l==="-"&&(h(r,u.data),r.type==="-"?r.type="linear":n.type=r.type)};function h(i,n){if(i.type==="-"){var r=i._id,f=r.charAt(0),u;r.indexOf("scene")!==-1&&(r=f);var l=y(n,r,f);if(!!l){if(l.type==="histogram"&&f==={v:"y",h:"x"}[l.orientation||"v"]){i.type="linear";return}var m=f+"calendar",d=l[m],b={noMultiCategory:!s(l,"cartesian")||s(l,"noMultiCategory")};if(l.type==="box"&&l._hasPreCompStats&&f==={h:"x",v:"y"}[l.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=i.autotypenumbers,a(l,f)){var g=t(l),_=[];for(u=0;u<n.length;u++){var p=n[u];!s(p,"box-violin")||(p[f+"axis"]||f)!==r||(p[g]!==void 0?_.push(p[g][0]):p.name!==void 0?_.push(p.name):_.push("text"),p[m]!==d&&(d=void 0))}i.type=o(_,d,b)}else if(l.type==="splom"){var A=l.dimensions,c=A[l._axesDim[r]];c.visible&&(i.type=o(c.values,d,b))}else i.type=o(l[f]||[l[f+"0"]],d,b)}}}function y(i,n,r){for(var f=0;f<i.length;f++){var u=i[f];if(u.type==="splom"&&u._length>0&&(u["_"+r+"axes"]||{})[n])return u;if((u[r+"axis"]||r)===n){if(a(u,r))return u;if((u[r]||[]).length||u[r+"0"])return u}}}function t(i){return{v:"x",h:"y"}[i.orientation||"v"]}function a(i,n){var r=t(i),f=s(i,"box-violin"),u=s(i._fullInput||{},"candlestick");return f&&!u&&n===r&&i[r]===void 0&&i[r+"0"]===void 0}},{"../../registry":638,"./axis_autotype":555}],583:[function(e,I,F){var s=e("../registry"),o=e("../lib");F.manageCommandObserver=function(n,r,f,u){var l={},m=!0;r&&r._commandObserver&&(l=r._commandObserver),l.cache||(l.cache={}),l.lookupTable={};var d=F.hasSimpleAPICommandBindings(n,f,l.lookupTable);if(r&&r._commandObserver){if(d)return l;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,l}if(d){h(n,d,l.cache),l.check=function(){if(!!m){var p=h(n,d,l.cache);return p.changed&&u&&l.lookupTable[p.value]!==void 0&&(l.disable(),Promise.resolve(u({value:p.value,type:d.type,prop:d.prop,traces:d.traces,index:l.lookupTable[p.value]})).then(l.enable,l.enable)),p.changed}};for(var b=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],g=0;g<b.length;g++)n._internalOn(b[g],l.check);l.remove=function(){for(var _=0;_<b.length;_++)n._removeInternalListener(b[_],l.check)}}else o.log("Unable to automatically bind plot updates to API command"),l.lookupTable={},l.remove=function(){};return l.disable=function(){m=!1},l.enable=function(){m=!0},r&&(r._commandObserver=l),l},F.hasSimpleAPICommandBindings=function(n,r,f){var u,l=r.length,m;for(u=0;u<l;u++){var d,b=r[u],g=b.method,_=b.args;if(Array.isArray(_)||(_=[]),!g)return!1;var p=F.computeAPICommandBindings(n,g,_);if(p.length!==1)return!1;if(!m)m=p[0],Array.isArray(m.traces)&&m.traces.sort();else{if(d=p[0],d.type!==m.type||d.prop!==m.prop)return!1;if(Array.isArray(m.traces))if(Array.isArray(d.traces)){d.traces.sort();for(var A=0;A<m.traces.length;A++)if(m.traces[A]!==d.traces[A])return!1}else return!1;else if(d.prop!==m.prop)return!1}d=p[0];var c=d.value;if(Array.isArray(c))if(c.length===1)c=c[0];else return!1;f&&(f[c]=u)}return m};function h(n,r,f){var u,l,m,d=!1;if(r.type==="data")u=n._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")u=n._fullLayout;else return!1;return l=o.nestedProperty(u,r.prop).get(),m=f[r.type]=f[r.type]||{},m.hasOwnProperty(r.prop)&&m[r.prop]!==l&&(d=!0),m[r.prop]=l,{changed:d,value:l}}F.executeAPICommand=function(n,r,f){if(r==="skip")return Promise.resolve();var u=s.apiMethodRegistry[r],l=[n];Array.isArray(f)||(f=[]);for(var m=0;m<f.length;m++)l.push(f[m]);return u.apply(null,l).catch(function(d){return o.warn("API call to Plotly."+r+" rejected.",d),Promise.reject(d)})},F.computeAPICommandBindings=function(n,r,f){var u;switch(Array.isArray(f)||(f=[]),r){case"restyle":u=a(n,f);break;case"relayout":u=t(n,f);break;case"update":u=a(n,[f[0],f[2]]).concat(t(n,[f[1]]));break;case"animate":u=y(n,f);break;default:u=[]}return u};function y(n,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function t(n,r){var f=[],u=r[0],l={};if(typeof u=="string")l[u]=r[1];else if(o.isPlainObject(u))l=u;else return f;return i(l,function(m,d,b){f.push({type:"layout",prop:m,value:b})},"",0),f}function a(n,r){var f,u,l,m,d=[];if(u=r[0],l=r[1],f=r[2],m={},typeof u=="string")m[u]=l;else if(o.isPlainObject(u))m=u,f===void 0&&(f=l);else return d;return f===void 0&&(f=null),i(m,function(b,g,_){var p,A;if(Array.isArray(_)){A=_.slice();var c=Math.min(A.length,n.data.length);f&&(c=Math.min(c,f.length)),p=[];for(var S=0;S<c;S++)p[S]=f?f[S]:S}else A=_,p=f?f.slice():null;if(p===null)Array.isArray(A)&&(A=A[0]);else if(Array.isArray(p)){if(!Array.isArray(A)){var T=A;A=[];for(var x=0;x<p.length;x++)A[x]=T}A.length=Math.min(p.length,A.length)}d.push({type:"data",prop:b,traces:p,value:A})},"",0),d}function i(n,r,f,u){Object.keys(n).forEach(function(l){var m=n[l];if(l[0]!=="_"){var d=f+(u>0?".":"")+l;o.isPlainObject(m)?i(m,r,d,u+1):r(d,l,m)}})}},{"../lib":503,"../registry":638}],584:[function(e,I,F){var s=e("../lib/extend").extendFlat;F.attributes=function(o,h){o=o||{},h=h||{};var y={valType:"info_array",editType:o.editType,items:[{valType:"number",min:0,max:1,editType:o.editType},{valType:"number",min:0,max:1,editType:o.editType}],dflt:[0,1]};o.name&&o.name+"",o.trace,h.description&&""+h.description;var t={x:s({},y,{}),y:s({},y,{}),editType:o.editType};return o.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:o.editType},t.column={valType:"integer",min:0,dflt:0,editType:o.editType}),t},F.defaults=function(o,h,y,t){var a=t&&t.x||[0,1],i=t&&t.y||[0,1],n=h.grid;if(n){var r=y("domain.column");r!==void 0&&(r<n.columns?a=n._domains.x[r]:delete o.domain.column);var f=y("domain.row");f!==void 0&&(f<n.rows?i=n._domains.y[f]:delete o.domain.row)}var u=y("domain.x",a),l=y("domain.y",i);u[0]<u[1]||(o.domain.x=a.slice()),l[0]<l[1]||(o.domain.y=i.slice())}},{"../lib/extend":493}],585:[function(e,I,F){I.exports=function(s){var o=s.editType,h=s.colorEditType;h===void 0&&(h=o);var y={family:{valType:"string",noBlank:!0,strict:!0,editType:o},size:{valType:"number",min:1,editType:o},color:{valType:"color",editType:h},editType:o};return s.autoSize&&(y.size.dflt="auto"),s.autoColor&&(y.color.dflt="auto"),s.arrayOk&&(y.family.arrayOk=!0,y.size.arrayOk=!0,y.color.arrayOk=!0),y}},{}],586:[function(e,I,F){I.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(e,I,F){F.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},F.axesNames=["lonaxis","lataxis"],F.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},F.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},F.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},F.clipPad=.001,F.precision=.1,F.landColor="#F0DC82",F.waterColor="#3399FF",F.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},F.sphereSVG={type:"Sphere"},F.fillLayers={ocean:1,land:1,lakes:1},F.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},F.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],F.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],F.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(e,I,F){var s=e("@plotly/d3"),o=e("d3-geo"),h=o.geoPath,y=o.geoDistance,t=e("d3-geo-projection"),a=e("../../registry"),i=e("../../lib"),n=i.strTranslate,r=e("../../components/color"),f=e("../../components/drawing"),u=e("../../components/fx"),l=e("../plots"),m=e("../cartesian/axes"),d=e("../cartesian/autorange").getAutoRange,b=e("../../components/dragelement"),g=e("../cartesian/select").prepSelect,_=e("../cartesian/select").clearSelect,p=e("../cartesian/select").selectOnClick,A=e("./zoom"),c=e("./constants"),S=e("../../lib/geo_location_utils"),T=e("../../lib/topojson_utils"),x=e("topojson-client").feature;function w(L){this.id=L.id,this.graphDiv=L.graphDiv,this.container=L.container,this.topojsonURL=L.topojsonURL,this.isStatic=L.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var v=w.prototype;I.exports=function(z){return new w(z)},v.plot=function(L,z,O){var R=this,D=z[this.id],H=[],B=!1;for(var $ in c.layerNameToAdjective)if($!=="frame"&&D["show"+$]){B=!0;break}for(var W=0;W<L.length;W++)if(L[0][0].trace.locationmode){B=!0;break}if(B){var re=T.getTopojsonName(D);(R.topojson===null||re!==R.topojsonName)&&(R.topojsonName=re,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&H.push(R.fetchTopojson()))}H=H.concat(S.fetchTraceGeoData(L)),O.push(new Promise(function(Q,Z){Promise.all(H).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(L,z),Q()}).catch(Z)}))},v.fetchTopojson=function(){var L=this,z=T.getTopojsonPath(L.topojsonURL,L.topojsonName);return new Promise(function(O,R){s.json(z,function(D,H){if(D)return D.status===404?R(new Error(["plotly.js could not find topojson file at",z,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):R(new Error(["unexpected error while fetching topojson file at",z].join(" ")));PlotlyGeoAssets.topojson[L.topojsonName]=H,O()})})},v.update=function(L,z){var O=z[this.id];this.hasChoropleth=!1;for(var R=0;R<L.length;R++){var D=L[R],H=D[0].trace;H.type==="choropleth"&&(this.hasChoropleth=!0),H.visible===!0&&H._length>0&&H._module.calcGeoJSON(D,z)}var B=this.updateProjection(L,z);if(!B){(!this.viewInitial||this.scope!==O.scope)&&this.saveViewInitial(O),this.scope=O.scope,this.updateBaseLayers(z,O),this.updateDims(z,O),this.updateFx(z,O),l.generalUpdatePerTraceModule(this.graphDiv,this,L,O);var $=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=$.selectAll(".point"),this.dataPoints.text=$.selectAll("text"),this.dataPaths.line=$.selectAll(".js-line");var W=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=W.selectAll("path"),this.render()}},v.updateProjection=function(L,z){var O=this.graphDiv,R=z[this.id],D=z._size,H=R.domain,B=R.projection,$=R.lonaxis,W=R.lataxis,re=$._ax,Q=W._ax,Z=this.projection=C(R),K=[[D.l+D.w*H.x[0],D.t+D.h*(1-H.y[1])],[D.l+D.w*H.x[1],D.t+D.h*(1-H.y[0])]],le=R.center||{},fe=B.rotation||{},ue=$.range||[],V=W.range||[];if(R.fitbounds){re._length=K[1][0]-K[0][0],Q._length=K[1][1]-K[0][1],re.range=d(O,re),Q.range=d(O,Q);var j=(re.range[0]+re.range[1])/2,ee=(Q.range[0]+Q.range[1])/2;if(R._isScoped)le={lon:j,lat:ee};else if(R._isClipped){le={lon:j,lat:ee},fe={lon:j,lat:ee,roll:fe.roll};var q=B.type,X=c.lonaxisSpan[q]/2||180,J=c.lataxisSpan[q]/2||90;ue=[j-X,j+X],V=[ee-J,ee+J]}else le={lon:j,lat:ee},fe={lon:j,lat:fe.lat,roll:fe.roll}}Z.center([le.lon-fe.lon,le.lat-fe.lat]).rotate([-fe.lon,-fe.lat,fe.roll]).parallels(B.parallels);var ie=E(ue,V);Z.fitExtent(K,ie);var ne=this.bounds=Z.getBounds(ie),oe=this.fitScale=Z.scale(),se=Z.translate();if(R.fitbounds){var me=Z.getBounds(E(re.range,Q.range)),ce=Math.min((ne[1][0]-ne[0][0])/(me[1][0]-me[0][0]),(ne[1][1]-ne[0][1])/(me[1][1]-me[0][1]));isFinite(ce)?Z.scale(ce*oe):i.warn("Something went wrong during"+this.id+"fitbounds computations.")}else Z.scale(B.scale*oe);var pe=this.midPt=[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2];if(Z.translate([se[0]+(pe[0]-se[0]),se[1]+(pe[1]-se[1])]).clipExtent(ne),R._isAlbersUsa){var xe=Z([le.lon,le.lat]),Se=Z.translate();Z.translate([Se[0]-(xe[0]-Se[0]),Se[1]-(xe[1]-Se[1])])}},v.updateBaseLayers=function(L,z){var O=this,R=O.topojson,D=O.layers,H=O.basePaths;function B(K){return K==="lonaxis"||K==="lataxis"}function $(K){return Boolean(c.lineLayers[K])}function W(K){return Boolean(c.fillLayers[K])}var re=this.hasChoropleth?c.layersForChoropleth:c.layers,Q=re.filter(function(K){return $(K)||W(K)?z["show"+K]:B(K)?z[K].showgrid:!0}),Z=O.framework.selectAll(".layer").data(Q,String);Z.exit().each(function(K){delete D[K],delete H[K],s.select(this).remove()}),Z.enter().append("g").attr("class",function(K){return"layer "+K}).each(function(K){var le=D[K]=s.select(this);K==="bg"?O.bgRect=le.append("rect").style("pointer-events","all"):B(K)?H[K]=le.append("path").style("fill","none"):K==="backplot"?le.append("g").classed("choroplethlayer",!0):K==="frontplot"?le.append("g").classed("scatterlayer",!0):$(K)?H[K]=le.append("path").style("fill","none").style("stroke-miterlimit",2):W(K)&&(H[K]=le.append("path").style("stroke","none"))}),Z.order(),Z.each(function(K){var le=H[K],fe=c.layerNameToAdjective[K];K==="frame"?le.datum(c.sphereSVG):$(K)||W(K)?le.datum(x(R,R.objects[K])):B(K)&&le.datum(M(K,z,L)).call(r.stroke,z[K].gridcolor).call(f.dashLine,"",z[K].gridwidth),$(K)?le.call(r.stroke,z[fe+"color"]).call(f.dashLine,"",z[fe+"width"]):W(K)&&le.call(r.fill,z[fe+"color"])})},v.updateDims=function(L,z){var O=this.bounds,R=(z.framewidth||0)/2,D=O[0][0]-R,H=O[0][1]-R,B=O[1][0]-D+R,$=O[1][1]-H+R;f.setRect(this.clipRect,D,H,B,$),this.bgRect.call(f.setRect,D,H,B,$).call(r.fill,z.bgcolor),this.xaxis._offset=D,this.xaxis._length=B,this.yaxis._offset=H,this.yaxis._length=$},v.updateFx=function(L,z){var O=this,R=O.graphDiv,D=O.bgRect,H=L.dragmode,B=L.clickmode;if(O.isStatic)return;function $(){var Z=O.viewInitial,K={};for(var le in Z)K[O.id+"."+le]=Z[le];a.call("_guiRelayout",R,K),R.emit("plotly_doubleclick",null)}function W(Z){return O.projection.invert([Z[0]+O.xaxis._offset,Z[1]+O.yaxis._offset])}var re;H==="select"?re=function(Z,K){var le=Z.range={};le[O.id]=[W([K.xmin,K.ymin]),W([K.xmax,K.ymax])]}:H==="lasso"&&(re=function(Z,K,le){var fe=Z.lassoPoints={};fe[O.id]=le.filtered.map(W)});var Q={element:O.bgRect.node(),gd:R,plotinfo:{id:O.id,xaxis:O.xaxis,yaxis:O.yaxis,fillRangeItems:re},xaxes:[O.xaxis],yaxes:[O.yaxis],subplot:O.id,clickFn:function(Z){Z===2&&_(R)}};H==="pan"?(D.node().onmousedown=null,D.call(A(O,z)),D.on("dblclick.zoom",$),R._context._scrollZoom.geo||D.on("wheel.zoom",null)):(H==="select"||H==="lasso")&&(D.on(".zoom",null),Q.prepFn=function(Z,K,le){g(Z,K,le,Q,H)},b.init(Q)),D.on("mousemove",function(){var Z=O.projection.invert(i.getPositionFromD3Event());if(!Z)return b.unhover(R,s.event);O.xaxis.p2c=function(){return Z[0]},O.yaxis.p2c=function(){return Z[1]},u.hover(R,s.event,O.id)}),D.on("mouseout",function(){R._dragging||b.unhover(R,s.event)}),D.on("click",function(){H!=="select"&&H!=="lasso"&&(B.indexOf("select")>-1&&p(s.event,R,[O.xaxis],[O.yaxis],O.id,Q),B.indexOf("event")>-1&&u.click(R,s.event))})},v.makeFramework=function(){var L=this,z=L.graphDiv,O=z._fullLayout,R="clip"+O._uid+L.id;L.clipDef=O._clips.append("clipPath").attr("id",R),L.clipRect=L.clipDef.append("rect"),L.framework=s.select(L.container).append("g").attr("class","geo "+L.id).call(f.setClipUrl,R,z),L.project=function(D){var H=L.projection(D);return H?[H[0]-L.xaxis._offset,H[1]-L.yaxis._offset]:[null,null]},L.xaxis={_id:"x",c2p:function(D){return L.project(D)[0]}},L.yaxis={_id:"y",c2p:function(D){return L.project(D)[1]}},L.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},m.setConvert(L.mockAxis,O)},v.saveViewInitial=function(L){var z=L.center||{},O=L.projection,R=O.rotation||{};this.viewInitial={fitbounds:L.fitbounds,"projection.scale":O.scale};var D;L._isScoped?D={"center.lon":z.lon,"center.lat":z.lat}:L._isClipped?D={"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:D={"center.lon":z.lon,"center.lat":z.lat,"projection.rotation.lon":R.lon},i.extendFlat(this.viewInitial,D)},v.render=function(){var L=this.projection,z=L.getPath(),O;function R(H){var B=L(H.lonlat);return B?n(B[0],B[1]):null}function D(H){return L.isLonLatOverEdges(H.lonlat)?"none":null}for(O in this.basePaths)this.basePaths[O].attr("d",z);for(O in this.dataPaths)this.dataPaths[O].attr("d",function(H){return z(H.geojson)});for(O in this.dataPoints)this.dataPoints[O].attr("display",D).attr("transform",R)};function C(L){var z=L.projection,O=z.type,R=c.projNames[O];R="geo"+i.titleCase(R);for(var D=o[R]||t[R],H=D(),B=L._isSatellite?Math.acos(1/z.distance)*180/Math.PI:L._isClipped?c.lonaxisSpan[O]/2:null,$=["center","rotate","parallels","clipExtent"],W=function(Z){return Z?H:[]},re=0;re<$.length;re++){var Q=$[re];typeof H[Q]!="function"&&(H[Q]=W)}return H.isLonLatOverEdges=function(Z){if(H(Z)===null)return!0;if(B){var K=H.rotate(),le=y(Z,[-K[0],-K[1]]),fe=B*Math.PI/180;return le>fe}else return!1},H.getPath=function(){return h().projection(H)},H.getBounds=function(Z){return H.getPath().bounds(Z)},H.precision(c.precision),L._isSatellite&&H.tilt(z.tilt).distance(z.distance),B&&H.clipAngle(B-c.clipPad),H}function M(L,z,O){var R=1e-6,D=2.5,H=z[L],B=c.scopeDefaults[z.scope],$,W,re;L==="lonaxis"?($=B.lonaxisRange,W=B.lataxisRange,re=function(ee,q){return[ee,q]}):L==="lataxis"&&($=B.lataxisRange,W=B.lonaxisRange,re=function(ee,q){return[q,ee]});var Q={type:"linear",range:[$[0],$[1]-R],tick0:H.tick0,dtick:H.dtick};m.setConvert(Q,O);var Z=m.calcTicks(Q);!z.isScoped&&L==="lonaxis"&&Z.pop();for(var K=Z.length,le=new Array(K),fe=0;fe<K;fe++)for(var ue=Z[fe].x,V=le[fe]=[],j=W[0];j<W[1]+D;j+=D)V.push(re(ue,j));return{type:"MultiLineString",coordinates:le}}function E(L,z){var O=c.clipPad,R=L[0]+O,D=L[1]-O,H=z[0]+O,B=z[1]-O;R>0&&D<0&&(D+=360);var $=(D-R)/4;return{type:"Polygon",coordinates:[[[R,H],[R,B],[R+$,B],[R+2*$,B],[R+3*$,B],[D,B],[D,H],[D-$,H],[D-2*$,H],[D-3*$,H],[R,H]]]}}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(e,I,F){var s=e("../../plots/get_data").getSubplotCalcData,o=e("../../lib").counterRegex,h=e("./geo"),y="geo",t=o(y),a={};a[y]={valType:"subplotid",dflt:y,editType:"calc"};function i(f){for(var u=f._fullLayout,l=f.calcdata,m=u._subplots[y],d=0;d<m.length;d++){var b=m[d],g=s(l,y,b),_=u[b],p=_._subplot;p||(p=h({id:b,graphDiv:f,container:u._geolayer.node(),topojsonURL:f._context.topojsonURL,staticPlot:f._context.staticPlot}),u[b]._subplot=p),p.plot(g,u,f._promises)}}function n(f,u,l,m){for(var d=m._subplots[y]||[],b=0;b<d.length;b++){var g=d[b],_=m[g]._subplot;!u[g]&&!!_&&(_.framework.remove(),_.clipDef.remove())}}function r(f){for(var u=f._fullLayout,l=u._subplots[y],m=0;m<l.length;m++){var d=u[l[m]],b=d._subplot;b.updateFx(u,d)}}I.exports={attr:y,name:y,idRoot:y,idRegex:t,attrRegex:t,attributes:a,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:i,updateFx:r,clean:n}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(e,I,F){var s=e("../../components/color/attributes"),o=e("../domain").attributes,h=e("./constants"),y=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/sort_object_keys"),a={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:s.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},i=I.exports=y({domain:o({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:t(h.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:t(h.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:s.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:h.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:h.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:h.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:h.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:s.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:s.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:s.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:s.background},lonaxis:a,lataxis:a},"plot","from-root");i.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(e,I,F){var s=e("../../lib"),o=e("../subplot_defaults"),h=e("../get_data").getSubplotData,y=e("./constants"),t=e("./layout_attributes"),a=y.axesNames;I.exports=function(r,f,u){o(r,f,u,{type:"geo",attributes:t,handleDefaults:i,fullData:u,partition:"y"})};function i(n,r,f,u){var l=h(u.fullData,"geo",u.id),m=l.map(function(V){return V._expandedIndex}),d=f("resolution"),b=f("scope"),g=y.scopeDefaults[b],_=f("projection.type",g.projType),p=r._isAlbersUsa=_==="albers usa";p&&(b=r.scope="usa");var A=r._isScoped=b!=="world",c=r._isSatellite=_==="satellite",S=r._isConic=_.indexOf("conic")!==-1||_==="albers",T=r._isClipped=!!y.lonaxisSpan[_];if(n.visible===!1){var x=s.extendDeep({},r._template);x.showcoastlines=!1,x.showcountries=!1,x.showframe=!1,x.showlakes=!1,x.showland=!1,x.showocean=!1,x.showrivers=!1,x.showsubunits=!1,x.lonaxis&&(x.lonaxis.showgrid=!1),x.lataxis&&(x.lataxis.showgrid=!1),r._template=x}for(var w=f("visible"),v,C=0;C<a.length;C++){var M=a[C],E=[30,10][C],L;if(A)L=g[M+"Range"];else{var z=y[M+"Span"],O=(z[_]||z["*"])/2,R=f("projection.rotation."+M.substr(0,3),g.projRotate[C]);L=[R-O,R+O]}var D=f(M+".range",L);f(M+".tick0"),f(M+".dtick",E),v=f(M+".showgrid",w?void 0:!1),v&&(f(M+".gridcolor"),f(M+".gridwidth")),r[M]._ax={type:"linear",_id:M.slice(0,3),_traceIndices:m,setScale:s.identity,c2l:s.identity,r2l:s.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var H=r.lonaxis.range,B=r.lataxis.range,$=H[0],W=H[1];$>0&&W<0&&(W+=360);var re=($+W)/2,Q;if(!p){var Z=A?g.projRotate:[re,0,0];Q=f("projection.rotation.lon",Z[0]),f("projection.rotation.lat",Z[1]),f("projection.rotation.roll",Z[2]),v=f("showcoastlines",!A&&w),v&&(f("coastlinecolor"),f("coastlinewidth")),v=f("showocean",w?void 0:!1),v&&f("oceancolor")}var K,le;if(p?(K=-96.6,le=38.7):(K=A?re:Q,le=(B[0]+B[1])/2),f("center.lon",K),f("center.lat",le),c&&(f("projection.tilt"),f("projection.distance")),S){var fe=g.projParallels||[0,60];f("projection.parallels",fe)}f("projection.scale"),v=f("showland",w?void 0:!1),v&&f("landcolor"),v=f("showlakes",w?void 0:!1),v&&f("lakecolor"),v=f("showrivers",w?void 0:!1),v&&(f("rivercolor"),f("riverwidth")),v=f("showcountries",A&&b!=="usa"&&w),v&&(f("countrycolor"),f("countrywidth")),(b==="usa"||b==="north america"&&d===50)&&(f("showsubunits",w),f("subunitcolor"),f("subunitwidth")),A||(v=f("showframe",w),v&&(f("framecolor"),f("framewidth"))),f("bgcolor");var ue=f("fitbounds");ue&&(delete r.projection.scale,A?(delete r.center.lon,delete r.center.lat):T?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../registry"),y=Math.PI/180,t=180/Math.PI,a={cursor:"pointer"},i={cursor:"auto"};function n(M,E){var L=M.projection,z;return E._isScoped?z=u:E._isClipped?z=m:z=l,z(M,L)}I.exports=n;function r(M,E){return s.behavior.zoom().translate(E.translate()).scale(E.scale())}function f(M,E,L){var z=M.id,O=M.graphDiv,R=O.layout,D=R[z],H=O._fullLayout,B=H[z],$={},W={};function re(Q,Z){$[z+"."+Q]=o.nestedProperty(D,Q).get(),h.call("_storeDirectGUIEdit",R,H._preGUI,$);var K=o.nestedProperty(B,Q);K.get()!==Z&&(K.set(Z),o.nestedProperty(D,Q).set(Z),W[z+"."+Q]=Z)}L(re),re("projection.scale",E.scale()/M.fitScale),re("fitbounds",!1),O.emit("plotly_relayout",W)}function u(M,E){var L=r(M,E);function z(){s.select(this).style(a)}function O(){E.scale(s.event.scale).translate(s.event.translate),M.render();var H=E.invert(M.midPt);M.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/M.fitScale,"geo.center.lon":H[0],"geo.center.lat":H[1]})}function R(H){var B=E.invert(M.midPt);H("center.lon",B[0]),H("center.lat",B[1])}function D(){s.select(this).style(i),f(M,E,R)}return L.on("zoomstart",z).on("zoom",O).on("zoomend",D),L}function l(M,E){var L=r(M,E),z=2,O,R,D,H,B,$,W,re,Q;function Z(j){return E.invert(j)}function K(j){var ee=Z(j);if(!ee)return!0;var q=E(ee);return Math.abs(q[0]-j[0])>z||Math.abs(q[1]-j[1])>z}function le(){s.select(this).style(a),O=s.mouse(this),R=E.rotate(),D=E.translate(),H=R,B=Z(O)}function fe(){if($=s.mouse(this),K(O)){L.scale(E.scale()),L.translate(E.translate());return}E.scale(s.event.scale),E.translate([D[0],s.event.translate[1]]),B?Z($)&&(re=Z($),W=[H[0]+(re[0]-B[0]),R[1],R[2]],E.rotate(W),H=W):(O=$,B=Z(O)),Q=!0,M.render();var j=E.rotate(),ee=E.invert(M.midPt);M.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/M.fitScale,"geo.center.lon":ee[0],"geo.center.lat":ee[1],"geo.projection.rotation.lon":-j[0]})}function ue(){s.select(this).style(i),Q&&f(M,E,V)}function V(j){var ee=E.rotate(),q=E.invert(M.midPt);j("projection.rotation.lon",-ee[0]),j("center.lon",q[0]),j("center.lat",q[1])}return L.on("zoomstart",le).on("zoom",fe).on("zoomend",ue),L}function m(M,E){E.rotate(),E.scale();var L=r(M,E),z=C(L,"zoomstart","zoom","zoomend"),O=0,R=L.on,D;L.on("zoomstart",function(){s.select(this).style(a);var re=s.mouse(this),Q=E.rotate(),Z=Q,K=E.translate(),le=b(Q);D=d(E,re),R.call(L,"zoom",function(){var fe=s.mouse(this);if(E.scale(s.event.scale),!D)re=fe,D=d(E,re);else if(d(E,fe)){E.rotate(Q).translate(K);var ue=d(E,fe),V=_(D,ue),j=T(g(le,V)),ee=p(j,D,Z);(!isFinite(ee[0])||!isFinite(ee[1])||!isFinite(ee[2]))&&(ee=Z),E.rotate(ee),Z=ee}B(z.of(this,arguments))}),H(z.of(this,arguments))}).on("zoomend",function(){s.select(this).style(i),R.call(L,"zoom",null),$(z.of(this,arguments)),f(M,E,W)}).on("zoom.redraw",function(){M.render();var re=E.rotate();M.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/M.fitScale,"geo.projection.rotation.lon":-re[0],"geo.projection.rotation.lat":-re[1]})});function H(re){O++||re({type:"zoomstart"})}function B(re){re({type:"zoom"})}function $(re){--O||re({type:"zoomend"})}function W(re){var Q=E.rotate();re("projection.rotation.lon",-Q[0]),re("projection.rotation.lat",-Q[1])}return s.rebind(L,z,"on")}function d(M,E){var L=M.invert(E);return L&&isFinite(L[0])&&isFinite(L[1])&&x(L)}function b(M){var E=.5*M[0]*y,L=.5*M[1]*y,z=.5*M[2]*y,O=Math.sin(E),R=Math.cos(E),D=Math.sin(L),H=Math.cos(L),B=Math.sin(z),$=Math.cos(z);return[R*H*$+O*D*B,O*H*$-R*D*B,R*D*$+O*H*B,R*H*B-O*D*$]}function g(M,E){var L=M[0],z=M[1],O=M[2],R=M[3],D=E[0],H=E[1],B=E[2],$=E[3];return[L*D-z*H-O*B-R*$,L*H+z*D+O*$-R*B,L*B-z*$+O*D+R*H,L*$+z*B-O*H+R*D]}function _(M,E){if(!(!M||!E)){var L=v(M,E),z=Math.sqrt(w(L,L)),O=.5*Math.acos(Math.max(-1,Math.min(1,w(M,E)))),R=Math.sin(O)/z;return z&&[Math.cos(O),L[2]*R,-L[1]*R,L[0]*R]}}function p(M,E,L){var z=S(E,2,M[0]);z=S(z,1,M[1]),z=S(z,0,M[2]-L[2]);var O=E[0],R=E[1],D=E[2],H=z[0],B=z[1],$=z[2],W=Math.atan2(R,O)*t,re=Math.sqrt(O*O+R*R),Q,Z;Math.abs(B)>re?(Z=(B>0?90:-90)-W,Q=0):(Z=Math.asin(B/re)*t-W,Q=Math.sqrt(re*re-B*B));var K=180-Z-2*W,le=(Math.atan2($,H)-Math.atan2(D,Q))*t,fe=(Math.atan2($,H)-Math.atan2(D,-Q))*t,ue=A(L[0],L[1],Z,le),V=A(L[0],L[1],K,fe);return ue<=V?[Z,le,L[2]]:[K,fe,L[2]]}function A(M,E,L,z){var O=c(L-M),R=c(z-E);return Math.sqrt(O*O+R*R)}function c(M){return(M%360+540)%360-180}function S(M,E,L){var z=L*y,O=M.slice(),R=E===0?1:0,D=E===2?1:2,H=Math.cos(z),B=Math.sin(z);return O[R]=M[R]*H-M[D]*B,O[D]=M[D]*H+M[R]*B,O}function T(M){return[Math.atan2(2*(M[0]*M[1]+M[2]*M[3]),1-2*(M[1]*M[1]+M[2]*M[2]))*t,Math.asin(Math.max(-1,Math.min(1,2*(M[0]*M[2]-M[3]*M[1]))))*t,Math.atan2(2*(M[0]*M[3]+M[1]*M[2]),1-2*(M[2]*M[2]+M[3]*M[3]))*t]}function x(M){var E=M[0]*y,L=M[1]*y,z=Math.cos(L);return[z*Math.cos(E),z*Math.sin(E),Math.sin(L)]}function w(M,E){for(var L=0,z=0,O=M.length;z<O;++z)L+=M[z]*E[z];return L}function v(M,E){return[M[1]*E[2]-M[2]*E[1],M[2]*E[0]-M[0]*E[2],M[0]*E[1]-M[1]*E[0]]}function C(M){for(var E=0,L=arguments.length,z=[];++E<L;)z.push(arguments[E]);var O=s.dispatch.apply(null,z);return O.of=function(R,D){return function(H){var B;try{B=H.sourceEvent=s.event,H.target=M,s.event=H,O[H.type].apply(R,D)}finally{s.event=B}}},O}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(e,I,F){var s=e("../registry"),o=e("./cartesian/constants").SUBPLOT_PATTERN;F.getSubplotCalcData=function(h,y,t){var a=s.subplotsRegistry[y];if(!a)return[];for(var i=a.attr,n=[],r=0;r<h.length;r++){var f=h[r],u=f[0].trace;u[i]===t&&n.push(f)}return n},F.getModuleCalcData=function(h,y){var t=[],a=[],i;if(typeof y=="string"?i=s.getModule(y).plot:typeof y=="function"?i=y:i=y.plot,!i)return[t,h];for(var n=0;n<h.length;n++){var r=h[n],f=r[0].trace;f.visible!==!0||f._length===0||(f._module.plot===i?t.push(r):a.push(r))}return[t,a]},F.getSubplotData=function(y,t,a){if(!s.subplotsRegistry[t])return[];var i=s.subplotsRegistry[t].attr,n=[],r,f,u;if(t==="gl2d"){var l=a.match(o);f="x"+l[1],u="y"+l[2]}for(var m=0;m<y.length;m++)r=y[m],t==="gl2d"&&s.traceIs(r,"gl2d")?r[i[0]]===f&&r[i[1]]===u&&n.push(r):r[i]===a&&n.push(r);return n}},{"../registry":638,"./cartesian/constants":561}],594:[function(e,I,F){var s=e("mouse-change"),o=e("mouse-wheel"),h=e("mouse-event-offset"),y=e("../cartesian/constants"),t=e("has-passive-events");I.exports=i;function a(n,r){this.element=n,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function i(n){var r=n.mouseContainer,f=n.glplot,u=new a(r,f);function l(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function m(){for(var b=n.graphDiv._fullLayout._axisConstraintGroups,g=n.xaxis._id,_=n.yaxis._id,p=0;p<b.length;p++)if(b[p][g]!==-1){if(b[p][_]!==-1)return!0;break}return!1}u.mouseListener=s(r,d),r.addEventListener("touchstart",function(b){var g=h(b.changedTouches[0],r);d(0,g[0],g[1]),d(1,g[0],g[1]),b.preventDefault()},t?{passive:!1}:!1),r.addEventListener("touchmove",function(b){b.preventDefault();var g=h(b.changedTouches[0],r);d(1,g[0],g[1]),b.preventDefault()},t?{passive:!1}:!1),r.addEventListener("touchend",function(b){d(0,u.lastPos[0],u.lastPos[1]),b.preventDefault()},t?{passive:!1}:!1);function d(b,g,_){var p=n.calcDataBox(),A=f.viewBox,c=u.lastPos[0],S=u.lastPos[1],T=y.MINDRAG*f.pixelRatio,x=y.MINZOOM*f.pixelRatio,w,v;g*=f.pixelRatio,_*=f.pixelRatio,_=A[3]-A[1]-_;function C(R,D,H){var B=Math.min(D,H),$=Math.max(D,H);B!==$?(p[R]=B,p[R+2]=$,u.dataBox=p,n.setRanges(p)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(n.fullLayout.dragmode){case"zoom":if(b){var M=g/(A[2]-A[0])*(p[2]-p[0])+p[0],E=_/(A[3]-A[1])*(p[3]-p[1])+p[1];u.boxInited||(u.boxStart[0]=M,u.boxStart[1]=E,u.dragStart[0]=g,u.dragStart[1]=_),u.boxEnd[0]=M,u.boxEnd[1]=E,u.boxInited=!0,!u.boxEnabled&&(u.boxStart[0]!==u.boxEnd[0]||u.boxStart[1]!==u.boxEnd[1])&&(u.boxEnabled=!0);var L=Math.abs(u.dragStart[0]-g)<x,z=Math.abs(u.dragStart[1]-_)<x;if(m()&&!(L&&z)){w=u.boxEnd[0]-u.boxStart[0],v=u.boxEnd[1]-u.boxStart[1];var O=(p[3]-p[1])/(p[2]-p[0]);Math.abs(w*O)>Math.abs(v)?(u.boxEnd[1]=u.boxStart[1]+Math.abs(w)*O*(v>=0?1:-1),u.boxEnd[1]<p[1]?(u.boxEnd[1]=p[1],u.boxEnd[0]=u.boxStart[0]+(p[1]-u.boxStart[1])/Math.abs(O)):u.boxEnd[1]>p[3]&&(u.boxEnd[1]=p[3],u.boxEnd[0]=u.boxStart[0]+(p[3]-u.boxStart[1])/Math.abs(O))):(u.boxEnd[0]=u.boxStart[0]+Math.abs(v)/O*(w>=0?1:-1),u.boxEnd[0]<p[0]?(u.boxEnd[0]=p[0],u.boxEnd[1]=u.boxStart[1]+(p[0]-u.boxStart[0])*Math.abs(O)):u.boxEnd[0]>p[2]&&(u.boxEnd[0]=p[2],u.boxEnd[1]=u.boxStart[1]+(p[2]-u.boxStart[0])*Math.abs(O)))}else L&&(u.boxEnd[0]=u.boxStart[0]),z&&(u.boxEnd[1]=u.boxStart[1])}else u.boxEnabled?(w=u.boxStart[0]!==u.boxEnd[0],v=u.boxStart[1]!==u.boxEnd[1],w||v?(w&&(C(0,u.boxStart[0],u.boxEnd[0]),n.xaxis.autorange=!1),v&&(C(1,u.boxStart[1],u.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),u.boxEnabled=!1,u.boxInited=!1):u.boxInited&&(u.boxInited=!1);break;case"pan":u.boxEnabled=!1,u.boxInited=!1,b?(u.panning||(u.dragStart[0]=g,u.dragStart[1]=_),Math.abs(u.dragStart[0]-g)<T&&(g=u.dragStart[0]),Math.abs(u.dragStart[1]-_)<T&&(_=u.dragStart[1]),w=(c-g)*(p[2]-p[0])/(f.viewBox[2]-f.viewBox[0]),v=(S-_)*(p[3]-p[1])/(f.viewBox[3]-f.viewBox[1]),p[0]+=w,p[2]+=w,p[1]+=v,p[3]+=v,n.setRanges(p),u.panning=!0,u.lastInputTime=Date.now(),l(),n.cameraChanged(),n.handleAnnotations()):u.panning&&(u.panning=!1,n.relayoutCallback());break}u.lastPos[0]=g,u.lastPos[1]=_}return u.wheelListener=o(r,function(b,g){if(!n.scrollZoom)return!1;var _=n.calcDataBox(),p=f.viewBox,A=u.lastPos[0],c=u.lastPos[1],S=Math.exp(5*g/(p[3]-p[1])),T=A/(p[2]-p[0])*(_[2]-_[0])+_[0],x=c/(p[3]-p[1])*(_[3]-_[1])+_[1];return _[0]=(_[0]-T)*S+T,_[2]=(_[2]-T)*S+T,_[1]=(_[1]-x)*S+x,_[3]=(_[3]-x)*S+x,n.setRanges(_),u.lastInputTime=Date.now(),l(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),u}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(e,I,F){var s=e("../cartesian/axes"),o=e("../../lib/str2rgbarray");function h(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var y=h.prototype,t=["xaxis","yaxis"];y.merge=function(i){this.titleEnable=!1,this.backgroundColor=o(i.plot_bgcolor);var n,r,f,u,l,m,d,b,g,_,p;for(_=0;_<2;++_){n=t[_];var A=n.charAt(0);for(r=i[this.scene[n]._name],f=r.title.text===this.scene.fullLayout._dfltTitle[A]?"":r.title.text,p=0;p<=2;p+=2)this.labelEnable[_+p]=!1,this.labels[_+p]=f,this.labelColor[_+p]=o(r.title.font.color),this.labelFont[_+p]=r.title.font.family,this.labelSize[_+p]=r.title.font.size,this.labelPad[_+p]=this.getLabelPad(n,r),this.tickEnable[_+p]=!1,this.tickColor[_+p]=o((r.tickfont||{}).color),this.tickAngle[_+p]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[_+p]=this.getTickPad(r),this.tickMarkLength[_+p]=0,this.tickMarkWidth[_+p]=r.tickwidth||0,this.tickMarkColor[_+p]=o(r.tickcolor),this.borderLineEnable[_+p]=!1,this.borderLineColor[_+p]=o(r.linecolor),this.borderLineWidth[_+p]=r.linewidth||0;d=this.hasSharedAxis(r),l=this.hasAxisInDfltPos(n,r)&&!d,m=this.hasAxisInAltrPos(n,r)&&!d,u=r.mirror||!1,b=d?String(u).indexOf("all")!==-1:!!u,g=d?u==="allticks":String(u).indexOf("ticks")!==-1,l?this.labelEnable[_]=!0:m&&(this.labelEnable[_+2]=!0),l?this.tickEnable[_]=r.showticklabels:m&&(this.tickEnable[_+2]=r.showticklabels),(l||b)&&(this.borderLineEnable[_]=r.showline),(m||b)&&(this.borderLineEnable[_+2]=r.showline),(l||g)&&(this.tickMarkLength[_]=this.getTickMarkLength(r)),(m||g)&&(this.tickMarkLength[_+2]=this.getTickMarkLength(r)),this.gridLineEnable[_]=r.showgrid,this.gridLineColor[_]=o(r.gridcolor),this.gridLineWidth[_]=r.gridwidth,this.zeroLineEnable[_]=r.zeroline,this.zeroLineColor[_]=o(r.zerolinecolor),this.zeroLineWidth[_]=r.zerolinewidth}},y.hasSharedAxis=function(i){var n=this.scene,r=n.fullLayout._subplots.gl2d,f=s.findSubplotsWithAxis(r,i);return f.indexOf(n.id)!==0},y.hasAxisInDfltPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="bottom";if(i==="yaxis")return r==="left"},y.hasAxisInAltrPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="top";if(i==="yaxis")return r==="right"},y.getLabelPad=function(i,n){var r=1.5,f=n.title.font.size,u=n.showticklabels;if(i==="xaxis")return n.side==="top"?-10+f*(r+(u?1:0)):-10+f*(r+(u?.5:0));if(i==="yaxis")return n.side==="right"?10+f*(r+(u?1:.5)):10+f*(r+(u?.5:0))},y.getTickPad=function(i){return i.ticks==="outside"?10+i.ticklen:15},y.getTickMarkLength=function(i){if(!i.ticks)return 0;var n=i.ticklen;return i.ticks==="inside"?-n:n};function a(i){return new h(i)}I.exports=a},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(e,I,F){var s=e("../../plot_api/edit_types").overrideAll,o=e("./scene2d"),h=e("../layout_attributes"),y=e("../../constants/xmlns_namespaces"),t=e("../cartesian/constants"),a=e("../cartesian"),i=e("../../components/fx/layout_attributes"),n=e("../get_data").getSubplotData;F.name="gl2d",F.attr=["xaxis","yaxis"],F.idRoot=["x","y"],F.idRegex=t.idRegex,F.attrRegex=t.attrRegex,F.attributes=e("../cartesian/attributes"),F.supplyLayoutDefaults=function(r,f,u){f._has("cartesian")||a.supplyLayoutDefaults(r,f,u)},F.layoutAttrOverrides=s(a.layoutAttributes,"plot","from-root"),F.baseLayoutAttrOverrides=s({plot_bgcolor:h.plot_bgcolor,hoverlabel:i.hoverlabel},"plot","nested"),F.plot=function(f){for(var u=f._fullLayout,l=f._fullData,m=u._subplots.gl2d,d=0;d<m.length;d++){var b=m[d],g=u._plots[b],_=n(l,"gl2d",b),p=g._scene2d;p===void 0&&(p=new o({id:b,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio},u),g._scene2d=p),p.plot(_,f.calcdata,u,f.layout)}},F.clean=function(r,f,u,l){for(var m=l._subplots.gl2d||[],d=0;d<m.length;d++){var b=m[d],g=l._plots[b];if(!!g._scene2d){var _=n(r,"gl2d",b);_.length===0&&(g._scene2d.destroy(),delete l._plots[b])}}a.clean.apply(this,arguments)},F.drawFramework=function(r){r._context.staticPlot||a.drawFramework(r)},F.toSVG=function(r){for(var f=r._fullLayout,u=f._subplots.gl2d,l=0;l<u.length;l++){var m=f._plots[u[l]],d=m._scene2d,b=d.toImage("png"),g=f._glimages.append("svg:image");g.attr({xmlns:y.svg,"xlink:href":b,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},F.updateFx=function(r){for(var f=r._fullLayout,u=f._subplots.gl2d,l=0;l<u.length;l++){var m=f._plots[u[l]]._scene2d;m.updateFx(f.dragmode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(e,I,F){var s=e("../../registry"),o=e("../../plots/cartesian/axes"),h=e("../../components/fx"),y=e("../../../stackgl_modules").gl_plot2d,t=e("../../../stackgl_modules").gl_spikes2d,a=e("../../../stackgl_modules").gl_select_box,i=e("webgl-context"),n=e("./convert"),r=e("./camera"),f=e("../../lib/show_no_webgl_msg"),u=e("../cartesian/constraints"),l=u.enforce,m=u.clean,d=e("../cartesian/autorange").doAutoRange,b=e("../../components/dragelement/helpers"),g=b.drawMode,_=b.selectMode,p=["xaxis","yaxis"],A,c,S=e("../cartesian/constants").SUBPLOT_PATTERN;function T(v,C){this.container=v.container,this.graphDiv=v.graphDiv,this.pixelRatio=v.plotGlPixelRatio||window.devicePixelRatio,this.id=v.id,this.staticPlot=!!v.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(C),this.makeFramework(),!this.stopped&&(this.glplotOptions=n(this),this.glplotOptions.merge(C),this.glplot=y(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}I.exports=T;var x=T.prototype;x.makeFramework=function(){if(this.staticPlot){if(!c&&(A=document.createElement("canvas"),c=i({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!c))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=c}else{var v=this.container.querySelector(".gl-canvas-focus"),C=i({canvas:v,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C){f(this),this.stopped=!0;return}this.canvas=v,this.gl=C}var M=this.canvas;M.style.width="100%",M.style.height="100%",M.style.position="absolute",M.style.top="0px",M.style.left="0px",M.style["pointer-events"]="none",this.updateSize(M);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var z=this.container;z.appendChild(E),z.appendChild(L);var O=this;L.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),L.addEventListener("mouseover",function(){O.isMouseOver=!0})},x.toImage=function(v){v||(v="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var C=this.glplot.gl,M=C.drawingBufferWidth,E=C.drawingBufferHeight;C.clearColor(1,1,1,0),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),C.bindFramebuffer(C.FRAMEBUFFER,null);var L=new Uint8Array(M*E*4);C.readPixels(0,0,M,E,C.RGBA,C.UNSIGNED_BYTE,L);for(var z=0,O=E-1;z<O;++z,--O)for(var R=0;R<M;++R)for(var D=0;D<4;++D){var H=L[4*(M*z+R)+D];L[4*(M*z+R)+D]=L[4*(M*O+R)+D],L[4*(M*O+R)+D]=H}var B=document.createElement("canvas");B.width=M,B.height=E;var $=B.getContext("2d"),W=$.createImageData(M,E);W.data.set(L),$.putImageData(W,0,0);var re;switch(v){case"jpeg":re=B.toDataURL("image/jpeg");break;case"webp":re=B.toDataURL("image/webp");break;default:re=B.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),re},x.updateSize=function(v){v||(v=this.canvas);var C=this.pixelRatio,M=this.fullLayout,E=M.width,L=M.height,z=Math.ceil(C*E)|0,O=Math.ceil(C*L)|0;return(v.width!==z||v.height!==O)&&(v.width=z,v.height=O),v},x.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var v=[o.calcTicks(this.xaxis),o.calcTicks(this.yaxis)],C=0;C<2;++C)for(var M=0;M<v[C].length;++M)v[C][M].text=v[C][M].text+"";return v};function w(v,C){for(var M=0;M<2;++M){var E=v[M],L=C[M];if(E.length!==L.length)return!0;for(var z=0;z<E.length;++z)if(E[z].x!==L[z].x)return!0}return!1}x.updateRefs=function(v){this.fullLayout=v;var C=this.id.match(S),M="xaxis"+C[1],E="yaxis"+C[2];this.xaxis=this.fullLayout[M],this.yaxis=this.fullLayout[E]},x.relayoutCallback=function(){var v=this.graphDiv,C=this.xaxis,M=this.yaxis,E=v.layout,L={},z=L[C._name+".range"]=C.range.slice(),O=L[M._name+".range"]=M.range.slice();L[C._name+".autorange"]=C.autorange,L[M._name+".autorange"]=M.autorange,s.call("_storeDirectGUIEdit",v.layout,v._fullLayout._preGUI,L);var R=E[C._name];R.range=z,R.autorange=C.autorange;var D=E[M._name];D.range=O,D.autorange=M.autorange,L.lastInputTime=this.camera.lastInputTime,v.emit("plotly_relayout",L)},x.cameraChanged=function(){var v=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks(),M=this.glplotOptions.ticks;w(C,M)&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=v.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},x.handleAnnotations=function(){for(var v=this.graphDiv,C=this.fullLayout.annotations,M=0;M<C.length;M++){var E=C[M];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&s.getComponentMethod("annotations","drawOne")(v,M)}},x.destroy=function(){if(!!this.glplot){var v=this.traces;v&&Object.keys(v).map(function(C){v[C].dispose(),delete v[C]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},x.plot=function(v,C,M){var E=this.glplot;this.updateRefs(M),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(v,C),this.updateFx(M.dragmode);var L=M.width,z=M.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(M),O.screenBox=[0,0,L,z];var R={_fullLayout:{_axisConstraintGroups:M._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:M._size}};m(R,this.xaxis),m(R,this.yaxis);var D=M._size,H=this.xaxis.domain,B=this.yaxis.domain;O.viewBox=[D.l+H[0]*D.w,D.b+B[0]*D.h,L-D.r-(1-H[1])*D.w,z-D.t-(1-B[1])*D.h],this.mouseContainer.style.width=D.w*(H[1]-H[0])+"px",this.mouseContainer.style.height=D.h*(B[1]-B[0])+"px",this.mouseContainer.height=D.h*(B[1]-B[0]),this.mouseContainer.style.left=D.l+H[0]*D.w+"px",this.mouseContainer.style.top=D.t+(1-B[1])*D.h+"px";var $,W;for(W=0;W<2;++W)$=this[p[W]],$._length=O.viewBox[W+2]-O.viewBox[W],d(this.graphDiv,$),$.setScale();l(R),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(M),E.update(O),this.glplot.draw()},x.calcDataBox=function(){var v=this.xaxis,C=this.yaxis,M=v.range,E=C.range,L=v.r2l,z=C.r2l;return[L(M[0]),z(E[0]),L(M[1]),z(E[1])]},x.setRanges=function(v){var C=this.xaxis,M=this.yaxis,E=C.l2r,L=M.l2r;C.range=[E(v[0]),E(v[2])],M.range=[L(v[1]),L(v[3])]},x.updateTraces=function(v,C){var M=Object.keys(this.traces),E,L,z;this.fullData=v;e:for(E=0;E<M.length;E++){var O=M[E],R=this.traces[O];for(L=0;L<v.length;L++)if(z=v[L],z.uid===O&&z.type===R.type)continue e;R.dispose(),delete this.traces[O]}for(E=0;E<v.length;E++){z=v[E];var D=C[E],H=this.traces[z.uid];H?H.update(z,D):(H=z._module.plot(this,z,D),this.traces[z.uid]=H)}this.glplot.objects.sort(function(B,$){return B._trace.index-$._trace.index})},x.updateFx=function(v){_(v)||g(v)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),v==="pan"?this.mouseContainer.style.cursor="move":v==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},x.emitPointAction=function(v,C){for(var M=v.trace.uid,E=v.pointIndex,L,z=0;z<this.fullData.length;z++)this.fullData[z].uid===M&&(L=this.fullData[z]);var O={x:v.traceCoord[0],y:v.traceCoord[1],curveNumber:L.index,pointNumber:E,data:L._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};h.appendArrayPointValue(O,L,E),this.graphDiv.emit(C,{points:[O]})},x.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var v=this.glplot,C=this.camera,M=C.mouseListener,E=this.lastButtonState===1&&M.buttons===0,L=this.fullLayout;this.lastButtonState=M.buttons,this.cameraChanged();var z=M.x*v.pixelRatio,O=this.canvas.height-v.pixelRatio*M.y,R;if(C.boxEnabled&&L.dragmode==="zoom"){this.selectBox.enabled=!0;for(var D=this.selectBox.selectBox=[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])],H=0;H<2;H++)C.boxStart[H]===C.boxEnd[H]&&(D[H]=v.dataBox[H],D[H+2]=v.dataBox[H+2]);v.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var B=L._size,$=this.xaxis.domain,W=this.yaxis.domain;R=v.pick(z/v.pixelRatio+B.l+$[0]*B.w,O/v.pixelRatio-(B.t+(1-W[1])*B.h));var re=R&&R.object._trace.handlePick(R);if(re&&E&&this.emitPointAction(re,"plotly_click"),R&&R.object._trace.hoverinfo!=="skip"&&L.hovermode&&re&&(!this.lastPickResult||this.lastPickResult.traceUid!==re.trace.uid||this.lastPickResult.dataCoord[0]!==re.dataCoord[0]||this.lastPickResult.dataCoord[1]!==re.dataCoord[1])){var Q=re;this.lastPickResult={traceUid:re.trace?re.trace.uid:null,dataCoord:re.dataCoord.slice()},this.spikes.update({center:R.dataCoord}),Q.screenCoord=[((v.viewBox[2]-v.viewBox[0])*(R.dataCoord[0]-v.dataBox[0])/(v.dataBox[2]-v.dataBox[0])+v.viewBox[0])/v.pixelRatio,(this.canvas.height-(v.viewBox[3]-v.viewBox[1])*(R.dataCoord[1]-v.dataBox[1])/(v.dataBox[3]-v.dataBox[1])-v.viewBox[1])/v.pixelRatio],this.emitPointAction(re,"plotly_hover");var Z=this.fullData[Q.trace.index]||{},K=Q.pointIndex,le=h.castHoverinfo(Z,L,K);if(le&&le!=="all"){var fe=le.split("+");fe.indexOf("x")===-1&&(Q.traceCoord[0]=void 0),fe.indexOf("y")===-1&&(Q.traceCoord[1]=void 0),fe.indexOf("z")===-1&&(Q.traceCoord[2]=void 0),fe.indexOf("text")===-1&&(Q.textLabel=void 0),fe.indexOf("name")===-1&&(Q.name=void 0)}h.loneHover({x:Q.screenCoord[0],y:Q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",Q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",Q.traceCoord[1]),zLabel:Q.traceCoord[2],text:Q.textLabel,name:Q.name,color:h.castHoverOption(Z,K,"bgcolor")||Q.color,borderColor:h.castHoverOption(Z,K,"bordercolor"),fontFamily:h.castHoverOption(Z,K,"font.family"),fontSize:h.castHoverOption(Z,K,"font.size"),fontColor:h.castHoverOption(Z,K,"font.color"),nameLength:h.castHoverOption(Z,K,"namelength"),textAlign:h.castHoverOption(Z,K,"align")},{container:this.svgContainer,gd:this.graphDiv})}}R||this.unhover(),v.draw()}},x.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),h.loneUnhover(this.svgContainer))},x.hoverFormatter=function(v,C){if(C!==void 0){var M=this[v];return o.tickText(M,M.c2l(C),"hover").text}}},{"../../../stackgl_modules":1124,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(e,I,F){var s=e("../../plot_api/edit_types").overrideAll,o=e("../../components/fx/layout_attributes"),h=e("./scene"),y=e("../get_data").getSubplotData,t=e("../../lib"),a=e("../../constants/xmlns_namespaces"),i="gl3d",n="scene";F.name=i,F.attr=n,F.idRoot=n,F.idRegex=F.attrRegex=t.counterRegex("scene"),F.attributes=e("./layout/attributes"),F.layoutAttributes=e("./layout/layout_attributes"),F.baseLayoutAttrOverrides=s({hoverlabel:o.hoverlabel},"plot","nested"),F.supplyLayoutDefaults=e("./layout/defaults"),F.plot=function(f){for(var u=f._fullLayout,l=f._fullData,m=u._subplots[i],d=0;d<m.length;d++){var b=m[d],g=y(l,i,b),_=u[b],p=_.camera,A=_._scene;A||(A=new h({id:b,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio,camera:p},u),_._scene=A),A.viewInitial||(A.viewInitial={up:{x:p.up.x,y:p.up.y,z:p.up.z},eye:{x:p.eye.x,y:p.eye.y,z:p.eye.z},center:{x:p.center.x,y:p.center.y,z:p.center.z}}),A.plot(g,u,f.layout)}},F.clean=function(r,f,u,l){for(var m=l._subplots[i]||[],d=0;d<m.length;d++){var b=m[d];!f[b]&&!!l[b]._scene&&(l[b]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+b).remove())}},F.toSVG=function(r){for(var f=r._fullLayout,u=f._subplots[i],l=f._size,m=0;m<u.length;m++){var d=f[u[m]],b=d.domain,g=d._scene,_=g.toImage("png"),p=f._glimages.append("svg:image");p.attr({xmlns:a.svg,"xlink:href":_,x:l.l+l.w*b.x[0],y:l.t+l.h*(1-b.y[1]),width:l.w*(b.x[1]-b.x[0]),height:l.h*(b.y[1]-b.y[0]),preserveAspectRatio:"none"}),g.destroy()}},F.cleanId=function(f){if(!!f.match(/^scene[0-9]*$/)){var u=f.substr(5);return u==="1"&&(u=""),n+u}},F.updateFx=function(r){for(var f=r._fullLayout,u=f._subplots[i],l=0;l<u.length;l++){var m=f[u[l]]._scene;m.updateFx(f.dragmode,f.hovermode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(e,I,F){I.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(e,I,F){var s=e("../../../components/color"),o=e("../../cartesian/layout_attributes"),h=e("../../../lib/extend").extendFlat,y=e("../../../plot_api/edit_types").overrideAll;I.exports=y({visible:o.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:s.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:o.color,categoryorder:o.categoryorder,categoryarray:o.categoryarray,title:{text:o.title.text,font:o.title.font},type:h({},o.type,{values:["-","linear","log","date","category"]}),autotypenumbers:o.autotypenumbers,autorange:o.autorange,rangemode:o.rangemode,range:h({},o.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:o.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,mirror:o.mirror,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,showticklabels:o.showticklabels,tickfont:o.tickfont,tickangle:o.tickangle,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:o.showline,linecolor:o.linecolor,linewidth:o.linewidth,showgrid:o.showgrid,gridcolor:h({},o.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:o.gridwidth,zeroline:o.zeroline,zerolinecolor:o.zerolinecolor,zerolinewidth:o.zerolinewidth,_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(e,I,F){var s=e("tinycolor2").mix,o=e("../../../lib"),h=e("../../../plot_api/plot_template"),y=e("./axis_attributes"),t=e("../../cartesian/type_defaults"),a=e("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"],n=100*(204-68)/(255-68);I.exports=function(f,u,l){var m,d;function b(p,A){return o.coerce(m,d,y,p,A)}for(var g=0;g<i.length;g++){var _=i[g];m=f[_]||{},d=h.newContainer(u,_),d._id=_[0]+l.scene,d._name=_,t(m,d,b,l),a(m,d,b,{font:l.font,letter:_[0],data:l.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:l.bgColor,calendar:l.calendar},l.fullLayout),b("gridcolor",s(d.color,l.bgColor,n).toRgbString()),b("title.text",_[0]),d.setScale=o.noop,b("showspikes")&&(b("spikesides"),b("spikethickness"),b("spikecolor",d.color)),b("showaxeslabels"),b("showbackground")&&b("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(e,I,F){var s=e("../../../lib/str2rgbarray"),o=e("../../../lib"),h=["xaxis","yaxis","zaxis"];function y(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var t=y.prototype;t.merge=function(i,n){for(var r=this,f=0;f<3;++f){var u=n[h[f]];if(!u.visible){r.tickEnable[f]=!1,r.labelEnable[f]=!1,r.lineEnable[f]=!1,r.lineTickEnable[f]=!1,r.gridEnable[f]=!1,r.zeroEnable[f]=!1,r.backgroundEnable[f]=!1;continue}r.labels[f]=i._meta?o.templateString(u.title.text,i._meta):u.title.text,"font"in u.title&&(u.title.font.color&&(r.labelColor[f]=s(u.title.font.color)),u.title.font.family&&(r.labelFont[f]=u.title.font.family),u.title.font.size&&(r.labelSize[f]=u.title.font.size)),"showline"in u&&(r.lineEnable[f]=u.showline),"linecolor"in u&&(r.lineColor[f]=s(u.linecolor)),"linewidth"in u&&(r.lineWidth[f]=u.linewidth),"showgrid"in u&&(r.gridEnable[f]=u.showgrid),"gridcolor"in u&&(r.gridColor[f]=s(u.gridcolor)),"gridwidth"in u&&(r.gridWidth[f]=u.gridwidth),u.type==="log"?r.zeroEnable[f]=!1:"zeroline"in u&&(r.zeroEnable[f]=u.zeroline),"zerolinecolor"in u&&(r.zeroLineColor[f]=s(u.zerolinecolor)),"zerolinewidth"in u&&(r.zeroLineWidth[f]=u.zerolinewidth),"ticks"in u&&!!u.ticks?r.lineTickEnable[f]=!0:r.lineTickEnable[f]=!1,"ticklen"in u&&(r.lineTickLength[f]=r._defaultLineTickLength[f]=u.ticklen),"tickcolor"in u&&(r.lineTickColor[f]=s(u.tickcolor)),"tickwidth"in u&&(r.lineTickWidth[f]=u.tickwidth),"tickangle"in u&&(r.tickAngle[f]=u.tickangle==="auto"?-3600:Math.PI*-u.tickangle/180),"showticklabels"in u&&(r.tickEnable[f]=u.showticklabels),"tickfont"in u&&(u.tickfont.color&&(r.tickColor[f]=s(u.tickfont.color)),u.tickfont.family&&(r.tickFont[f]=u.tickfont.family),u.tickfont.size&&(r.tickSize[f]=u.tickfont.size)),"mirror"in u?["ticks","all","allticks"].indexOf(u.mirror)!==-1?(r.lineTickMirror[f]=!0,r.lineMirror[f]=!0):u.mirror===!0?(r.lineTickMirror[f]=!1,r.lineMirror[f]=!0):(r.lineTickMirror[f]=!1,r.lineMirror[f]=!1):r.lineMirror[f]=!1,"showbackground"in u&&u.showbackground!==!1?(r.backgroundEnable[f]=!0,r.backgroundColor[f]=s(u.backgroundcolor)):r.backgroundEnable[f]=!1}};function a(i,n){var r=new y;return r.merge(i,n),r}I.exports=a},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(e,I,F){var s=e("../../../lib"),o=e("../../../components/color"),h=e("../../../registry"),y=e("../../subplot_defaults"),t=e("./axis_defaults"),a=e("./layout_attributes"),i=e("../../get_data").getSubplotData,n="gl3d";I.exports=function(u,l,m){var d=l._basePlotModules.length>1;function b(g){if(!d){var _=s.validate(u[g],a[g]);if(_)return u[g]}}y(u,l,m,{type:n,attributes:a,handleDefaults:r,fullLayout:l,font:l.font,fullData:m,getDfltFromLayout:b,autotypenumbersDflt:l.autotypenumbers,paper_bgcolor:l.paper_bgcolor,calendar:l.calendar})};function r(f,u,l,m){for(var d=l("bgcolor"),b=o.combine(d,m.paper_bgcolor),g=["up","center","eye"],_=0;_<g.length;_++)l("camera."+g[_]+".x"),l("camera."+g[_]+".y"),l("camera."+g[_]+".z");l("camera.projection.type");var p=!!l("aspectratio.x")&&!!l("aspectratio.y")&&!!l("aspectratio.z"),A=p?"manual":"auto",c=l("aspectmode",A);p||(f.aspectratio=u.aspectratio={x:1,y:1,z:1},c==="manual"&&(u.aspectmode="auto"),f.aspectmode=u.aspectmode);var S=i(m.fullData,n,m.id);t(f,u,{font:m.font,scene:m.id,data:S,bgColor:b,calendar:m.calendar,autotypenumbersDflt:m.autotypenumbersDflt,fullLayout:m.fullLayout}),h.getComponentMethod("annotations3d","handleDefaults")(f,u,m);var T=m.getDfltFromLayout("dragmode");if(T!==!1&&!T)if(T="orbit",f.camera&&f.camera.up){var x=f.camera.up.x,w=f.camera.up.y,v=f.camera.up.z;v!==0&&(!x||!w||!v||v/Math.sqrt(x*x+w*w+v*v)>.999)&&(T="turntable")}else T="turntable";l("dragmode",T),l("hovermode",m.getDfltFromLayout("hovermode"))}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(e,I,F){var s=e("./axis_attributes"),o=e("../../domain").attributes,h=e("../../../lib/extend").extendFlat,y=e("../../../lib").counterRegex;function t(a,i,n){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:i,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}I.exports={_arrayAttrRegexps:[y("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:h(t(0,0,1),{}),center:h(t(0,0,0),{}),eye:h(t(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:o({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:s,yaxis:s,zaxis:s,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(e,I,F){var s=e("../../../lib/str2rgbarray"),o=["xaxis","yaxis","zaxis"];function h(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var y=h.prototype;y.merge=function(a){for(var i=0;i<3;++i){var n=a[o[i]];if(!n.visible){this.enabled[i]=!1,this.drawSides[i]=!1;continue}this.enabled[i]=n.showspikes,this.colors[i]=s(n.spikecolor),this.drawSides[i]=n.spikesides,this.lineWidth[i]=n.spikethickness}};function t(a){var i=new h;return i.merge(a),i}I.exports=t},{"../../../lib/str2rgbarray":528}],606:[function(e,I,F){I.exports=a;var s=e("../../cartesian/axes"),o=e("../../../lib"),h=["xaxis","yaxis","zaxis"],y=[0,0,0];function t(i){for(var n=new Array(3),r=0;r<3;++r){for(var f=i[r],u=new Array(f.length),l=0;l<f.length;++l)u[l]=f[l].x;n[r]=u}return n}function a(i){for(var n=i.axesOptions,r=i.glplot.axesPixels,f=i.fullSceneLayout,u=[[],[],[]],l=0;l<3;++l){var m=f[h[l]];if(m._length=(r[l].hi-r[l].lo)*r[l].pixelsPerDataUnit/i.dataScale[l],Math.abs(m._length)===1/0||isNaN(m._length))u[l]=[];else{m._input_range=m.range.slice(),m.range[0]=r[l].lo/i.dataScale[l],m.range[1]=r[l].hi/i.dataScale[l],m._m=1/(i.dataScale[l]*r[l].pixelsPerDataUnit),m.range[0]===m.range[1]&&(m.range[0]-=1,m.range[1]+=1);var d=m.tickmode;if(m.tickmode==="auto"){m.tickmode="linear";var b=m.nticks||o.constrain(m._length/40,4,9);s.autoTicks(m,Math.abs(m.range[1]-m.range[0])/b)}for(var g=s.calcTicks(m,{msUTC:!0}),_=0;_<g.length;++_)g[_].x=g[_].x*i.dataScale[l],m.type==="date"&&(g[_].text=g[_].text.replace(/\<br\>/g," "));u[l]=g,m.tickmode=d}}n.ticks=u;for(var l=0;l<3;++l){y[l]=.5*(i.glplot.bounds[0][l]+i.glplot.bounds[1][l]);for(var _=0;_<2;++_)n.bounds[_][l]=i.glplot.bounds[_][l]}i.contourLevels=t(u)}},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(e,I,F){function s(h,y){var t=[0,0,0,0],a,i;for(a=0;a<4;++a)for(i=0;i<4;++i)t[i]+=h[4*a+i]*y[a];return t}function o(h,y){var t=s(h.projection,s(h.view,s(h.model,[y[0],y[1],y[2],1])));return t}I.exports=o},{}],608:[function(e,I,F){var s=e("../../../stackgl_modules").gl_plot3d,o=s.createCamera,h=s.createScene,y=e("webgl-context"),t=e("has-passive-events"),a=e("../../registry"),i=e("../../lib"),n=i.preserveDrawingBuffer(),r=e("../../plots/cartesian/axes"),f=e("../../components/fx"),u=e("../../lib/str2rgbarray"),l=e("../../lib/show_no_webgl_msg"),m=e("./project"),d=e("./layout/convert"),b=e("./layout/spikes"),g=e("./layout/tick_marks"),_,p;function A(L,z){var O=document.createElement("div"),R=L.container;this.graphDiv=L.graphDiv;var D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",D.style["z-index"]=20,D.style["pointer-events"]="none",O.appendChild(D),this.svgContainer=D,O.id=L.id,O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",R.appendChild(O),this.fullLayout=z,this.id=L.id||"scene",this.fullSceneLayout=z[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(z,z[this.id]),this.spikeOptions=b(z[this.id]),this.container=O,this.staticMode=!!L.staticPlot,this.pixelRatio=this.pixelRatio||L.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var c=A.prototype;c.prepareOptions=function(){var L=this,z={canvas:L.canvas,gl:L.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:L.container,axes:L.axesOptions,spikes:L.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:L.camera,pixelRatio:L.pixelRatio};if(L.staticMode){if(!p&&(_=document.createElement("canvas"),p=y({canvas:_,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!p))throw new Error("error creating static canvas/context for image server");z.gl=p,z.canvas=_}return z};var S=!0;c.tryCreatePlot=function(){var L=this,z=L.prepareOptions(),O=!0;try{L.glplot=h(z)}catch{if(L.staticMode||!S||n)O=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=z.glOptions.preserveDrawingBuffer=!0,L.glplot=h(z)}catch{n=z.glOptions.preserveDrawingBuffer=!1,O=!1}}}return S=!1,O},c.initializeGLCamera=function(){var L=this,z=L.fullSceneLayout.camera,O=z.projection.type==="orthographic";L.camera=o(L.container,{center:[z.center.x,z.center.y,z.center.z],eye:[z.eye.x,z.eye.y,z.eye.z],up:[z.up.x,z.up.y,z.up.z],_ortho:O,zoomMin:.01,zoomMax:100,mode:"orbit"})},c.initializeGLPlot=function(){var L=this;L.initializeGLCamera();var z=L.tryCreatePlot();if(!z)return l(L);L.traces={},L.make4thDimension();var O=L.graphDiv,R=O.layout,D=function(){var B={};return L.isCameraChanged(R)&&(B[L.id+".camera"]=L.getCamera()),L.isAspectChanged(R)&&(B[L.id+".aspectratio"]=L.glplot.getAspectratio(),R[L.id].aspectmode!=="manual"&&(L.fullSceneLayout.aspectmode=R[L.id].aspectmode=B[L.id+".aspectmode"]="manual")),B},H=function(B){if(B.fullSceneLayout.dragmode!==!1){var $=D();B.saveLayout(R),B.graphDiv.emit("plotly_relayout",$)}};return L.glplot.canvas&&(L.glplot.canvas.addEventListener("mouseup",function(){H(L)}),L.glplot.canvas.addEventListener("wheel",function(B){if(O._context._scrollZoom.gl3d){if(L.camera._ortho){var $=B.deltaX>B.deltaY?1.1:.9090909090909091,W=L.glplot.getAspectratio();L.glplot.setAspectratio({x:$*W.x,y:$*W.y,z:$*W.z})}H(L)}},t?{passive:!1}:!1),L.glplot.canvas.addEventListener("mousemove",function(){if(L.fullSceneLayout.dragmode!==!1&&L.camera.mouseListener.buttons!==0){var B=D();L.graphDiv.emit("plotly_relayouting",B)}}),L.staticMode||L.glplot.canvas.addEventListener("webglcontextlost",function(B){O&&O.emit&&O.emit("plotly_webglcontextlost",{event:B,layer:L.id})},!1)),L.glplot.oncontextloss=function(){L.recoverContext()},L.glplot.onrender=function(){L.render()},!0},c.render=function(){var L=this,z=L.graphDiv,O,R=L.svgContainer,D=L.container.getBoundingClientRect();z._fullLayout._calcInverseTransform(z);var H=z._fullLayout._invScaleX,B=z._fullLayout._invScaleY,$=D.width*H,W=D.height*B;R.setAttributeNS(null,"viewBox","0 0 "+$+" "+W),R.setAttributeNS(null,"width",$),R.setAttributeNS(null,"height",W),g(L),L.glplot.axes.update(L.axesOptions);for(var re=Object.keys(L.traces),Q=null,Z=L.glplot.selection,K=0;K<re.length;++K)O=L.traces[re[K]],O.data.hoverinfo!=="skip"&&O.handlePick(Z)&&(Q=O),O.setContourLevels&&O.setContourLevels();function le(me,ce,pe){var xe=L.fullSceneLayout[me+"axis"];return xe.type!=="log"&&(ce=xe.d2l(ce)),r.hoverLabelText(xe,ce,pe)}if(Q!==null){var fe=m(L.glplot.cameraParams,Z.dataCoordinate);O=Q.data;var ue=z._fullData[O.index],V=Z.index,j={xLabel:le("x",Z.traceCoordinate[0],O.xhoverformat),yLabel:le("y",Z.traceCoordinate[1],O.yhoverformat),zLabel:le("z",Z.traceCoordinate[2],O.zhoverformat)},ee=f.castHoverinfo(ue,L.fullLayout,V),q=(ee||"").split("+"),X=ee&&ee==="all";!ue.hovertemplate&&!X&&(q.indexOf("x")===-1&&(j.xLabel=void 0),q.indexOf("y")===-1&&(j.yLabel=void 0),q.indexOf("z")===-1&&(j.zLabel=void 0),q.indexOf("text")===-1&&(Z.textLabel=void 0),q.indexOf("name")===-1&&(Q.name=void 0));var J,ie=[];O.type==="cone"||O.type==="streamtube"?(j.uLabel=le("x",Z.traceCoordinate[3],O.uhoverformat),(X||q.indexOf("u")!==-1)&&ie.push("u: "+j.uLabel),j.vLabel=le("y",Z.traceCoordinate[4],O.vhoverformat),(X||q.indexOf("v")!==-1)&&ie.push("v: "+j.vLabel),j.wLabel=le("z",Z.traceCoordinate[5],O.whoverformat),(X||q.indexOf("w")!==-1)&&ie.push("w: "+j.wLabel),j.normLabel=Z.traceCoordinate[6].toPrecision(3),(X||q.indexOf("norm")!==-1)&&ie.push("norm: "+j.normLabel),O.type==="streamtube"&&(j.divergenceLabel=Z.traceCoordinate[7].toPrecision(3),(X||q.indexOf("divergence")!==-1)&&ie.push("divergence: "+j.divergenceLabel)),Z.textLabel&&ie.push(Z.textLabel),J=ie.join("<br>")):O.type==="isosurface"||O.type==="volume"?(j.valueLabel=r.hoverLabelText(L._mockAxis,L._mockAxis.d2l(Z.traceCoordinate[3]),O.valuehoverformat),ie.push("value: "+j.valueLabel),Z.textLabel&&ie.push(Z.textLabel),J=ie.join("<br>")):J=Z.textLabel;var ne={x:Z.traceCoordinate[0],y:Z.traceCoordinate[1],z:Z.traceCoordinate[2],data:ue._input,fullData:ue,curveNumber:ue.index,pointNumber:V};f.appendArrayPointValue(ne,ue,V),O._module.eventData&&(ne=ue._module.eventData(ne,Z,ue,{},V));var oe={points:[ne]};if(L.fullSceneLayout.hovermode){var se=[];f.loneHover({trace:ue,x:(.5+.5*fe[0]/fe[3])*$,y:(.5-.5*fe[1]/fe[3])*W,xLabel:j.xLabel,yLabel:j.yLabel,zLabel:j.zLabel,text:J,name:Q.name,color:f.castHoverOption(ue,V,"bgcolor")||Q.color,borderColor:f.castHoverOption(ue,V,"bordercolor"),fontFamily:f.castHoverOption(ue,V,"font.family"),fontSize:f.castHoverOption(ue,V,"font.size"),fontColor:f.castHoverOption(ue,V,"font.color"),nameLength:f.castHoverOption(ue,V,"namelength"),textAlign:f.castHoverOption(ue,V,"align"),hovertemplate:i.castOption(ue,V,"hovertemplate"),hovertemplateLabels:i.extendFlat({},ne,j),eventData:[ne]},{container:R,gd:z,inOut_bbox:se}),ne.bbox=se[0]}Z.buttons&&Z.distance<5?z.emit("plotly_click",oe):z.emit("plotly_hover",oe),this.oldEventData=oe}else f.loneUnhover(R),this.oldEventData&&z.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},c.recoverContext=function(){var L=this;L.glplot.dispose();var z=function(){if(L.glplot.gl.isContextLost()){requestAnimationFrame(z);return}if(!L.initializeGLPlot()){i.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}L.plot.apply(L,L.plotArgs)};requestAnimationFrame(z)};var T=["xaxis","yaxis","zaxis"];function x(L,z,O){for(var R=L.fullSceneLayout,D=0;D<3;D++){var H=T[D],B=H.charAt(0),$=R[H],W=z[B],re=z[B+"calendar"],Q=z["_"+B+"length"];if(!i.isArrayOrTypedArray(W))O[0][D]=Math.min(O[0][D],0),O[1][D]=Math.max(O[1][D],Q-1);else for(var Z,K=0;K<(Q||W.length);K++)if(i.isArrayOrTypedArray(W[K]))for(var le=0;le<W[K].length;++le)Z=$.d2l(W[K][le],0,re),!isNaN(Z)&&isFinite(Z)&&(O[0][D]=Math.min(O[0][D],Z),O[1][D]=Math.max(O[1][D],Z));else Z=$.d2l(W[K],0,re),!isNaN(Z)&&isFinite(Z)&&(O[0][D]=Math.min(O[0][D],Z),O[1][D]=Math.max(O[1][D],Z))}}function w(L,z){for(var O=L.fullSceneLayout,R=O.annotations||[],D=0;D<3;D++)for(var H=T[D],B=H.charAt(0),$=O[H],W=0;W<R.length;W++){var re=R[W];if(re.visible){var Q=$.r2l(re[B]);!isNaN(Q)&&isFinite(Q)&&(z[0][D]=Math.min(z[0][D],Q),z[1][D]=Math.max(z[1][D],Q))}}}c.plot=function(L,z,O){var R=this;if(R.plotArgs=[L,z,O],R.glplot.contextLost)return;var D,H,B,$,W,re,Q=z[R.id],Z=O[R.id];R.fullLayout=z,R.fullSceneLayout=Q,R.axesOptions.merge(z,Q),R.spikeOptions.merge(Q),R.setViewport(Q),R.updateFx(Q.dragmode,Q.hovermode),R.camera.enableWheel=R.graphDiv._context._scrollZoom.gl3d,R.glplot.setClearColor(u(Q.bgcolor)),R.setConvert(W),L?Array.isArray(L)||(L=[L]):L=[];var K=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(B=0;B<L.length;++B)D=L[B],!(D.visible!==!0||D._length===0)&&x(this,D,K);w(this,K);var le=[1,1,1];for($=0;$<3;++$)K[1][$]===K[0][$]?le[$]=1:le[$]=1/(K[1][$]-K[0][$]);for(R.dataScale=le,R.convertAnnotations(this),B=0;B<L.length;++B)D=L[B],!(D.visible!==!0||D._length===0)&&(H=R.traces[D.uid],H?H.data.type===D.type?H.update(D):(H.dispose(),H=D._module.plot(this,D),R.traces[D.uid]=H):(H=D._module.plot(this,D),R.traces[D.uid]=H),H.name=D.name);var fe=Object.keys(R.traces);e:for(B=0;B<fe.length;++B){for($=0;$<L.length;++$)if(L[$].uid===fe[B]&&L[$].visible===!0&&L[$]._length!==0)continue e;H=R.traces[fe[B]],H.dispose(),delete R.traces[fe[B]]}R.glplot.objects.sort(function(Ve,Je){return Ve._trace.data.index-Je._trace.data.index});var ue=[[0,0,0],[0,0,0]],V=[],j={};for(B=0;B<3;++B){if(W=Q[T[B]],re=W.type,re in j?(j[re].acc*=le[B],j[re].count+=1):j[re]={acc:le[B],count:1},W.autorange){ue[0][B]=1/0,ue[1][B]=-1/0;var ee=R.glplot.objects,q=R.fullSceneLayout.annotations||[],X=W._name.charAt(0);for($=0;$<ee.length;$++){var J=ee[$],ie=J.bounds,ne=J._trace.data._pad||0;J.constructor.name==="ErrorBars"&&W._lowerLogErrorBound?ue[0][B]=Math.min(ue[0][B],W._lowerLogErrorBound):ue[0][B]=Math.min(ue[0][B],ie[0][B]/le[B]-ne),ue[1][B]=Math.max(ue[1][B],ie[1][B]/le[B]+ne)}for($=0;$<q.length;$++){var oe=q[$];if(oe.visible){var se=W.r2l(oe[X]);ue[0][B]=Math.min(ue[0][B],se),ue[1][B]=Math.max(ue[1][B],se)}}if("rangemode"in W&&W.rangemode==="tozero"&&(ue[0][B]=Math.min(ue[0][B],0),ue[1][B]=Math.max(ue[1][B],0)),ue[0][B]>ue[1][B])ue[0][B]=-1,ue[1][B]=1;else{var me=ue[1][B]-ue[0][B];ue[0][B]-=me/32,ue[1][B]+=me/32}if(W.autorange==="reversed"){var ce=ue[0][B];ue[0][B]=ue[1][B],ue[1][B]=ce}}else{var pe=W.range;ue[0][B]=W.r2l(pe[0]),ue[1][B]=W.r2l(pe[1])}ue[0][B]===ue[1][B]&&(ue[0][B]-=1,ue[1][B]+=1),V[B]=ue[1][B]-ue[0][B],R.glplot.setBounds(B,{min:ue[0][B]*le[B],max:ue[1][B]*le[B]})}var xe,Se=Q.aspectmode;if(Se==="cube")xe=[1,1,1];else if(Se==="manual"){var Ae=Q.aspectratio;xe=[Ae.x,Ae.y,Ae.z]}else if(Se==="auto"||Se==="data"){var Ce=[1,1,1];for(B=0;B<3;++B){W=Q[T[B]],re=W.type;var Ee=j[re];Ce[B]=Math.pow(Ee.acc,1/Ee.count)/le[B]}Se==="data"||Math.max.apply(null,Ce)/Math.min.apply(null,Ce)<=4?xe=Ce:xe=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");Q.aspectratio.x=Z.aspectratio.x=xe[0],Q.aspectratio.y=Z.aspectratio.y=xe[1],Q.aspectratio.z=Z.aspectratio.z=xe[2],R.glplot.setAspectratio(Q.aspectratio),R.viewInitial.aspectratio||(R.viewInitial.aspectratio={x:Q.aspectratio.x,y:Q.aspectratio.y,z:Q.aspectratio.z}),R.viewInitial.aspectmode||(R.viewInitial.aspectmode=Q.aspectmode);var Oe=Q.domain||null,_e=z._size||null;if(Oe&&_e){var Re=R.container.style;Re.position="absolute",Re.left=_e.l+Oe.x[0]*_e.w+"px",Re.top=_e.t+(1-Oe.y[1])*_e.h+"px",Re.width=_e.w*(Oe.x[1]-Oe.x[0])+"px",Re.height=_e.h*(Oe.y[1]-Oe.y[0])+"px"}R.glplot.redraw()},c.destroy=function(){var L=this;!L.glplot||(L.camera.mouseListener.enabled=!1,L.container.removeEventListener("wheel",L.camera.wheelListener),L.camera=null,L.glplot.dispose(),L.container.parentNode.removeChild(L.container),L.glplot=null)};function v(L){return[[L.eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]}function C(L){return{up:{x:L.up[0],y:L.up[1],z:L.up[2]},center:{x:L.center[0],y:L.center[1],z:L.center[2]},eye:{x:L.eye[0],y:L.eye[1],z:L.eye[2]},projection:{type:L._ortho===!0?"orthographic":"perspective"}}}c.getCamera=function(){var L=this;return L.camera.view.recalcMatrix(L.camera.view.lastT()),C(L.camera)},c.setViewport=function(L){var z=this,O=L.camera;z.camera.lookAt.apply(this,v(O)),z.glplot.setAspectratio(L.aspectratio);var R=O.projection.type==="orthographic",D=z.camera._ortho;R!==D&&(z.glplot.redraw(),z.glplot.clearRGBA(),z.glplot.dispose(),z.initializeGLPlot())},c.isCameraChanged=function(L){var z=this,O=z.getCamera(),R=i.nestedProperty(L,z.id+".camera"),D=R.get();function H(re,Q,Z,K){var le=["up","center","eye"],fe=["x","y","z"];return Q[le[Z]]&&re[le[Z]][fe[K]]===Q[le[Z]][fe[K]]}var B=!1;if(D===void 0)B=!0;else{for(var $=0;$<3;$++)for(var W=0;W<3;W++)if(!H(O,D,$,W)){B=!0;break}(!D.projection||O.projection&&O.projection.type!==D.projection.type)&&(B=!0)}return B},c.isAspectChanged=function(L){var z=this,O=z.glplot.getAspectratio(),R=i.nestedProperty(L,z.id+".aspectratio"),D=R.get();return D===void 0||D.x!==O.x||D.y!==O.y||D.z!==O.z},c.saveLayout=function(L){var z=this,O=z.fullLayout,R,D,H,B,$,W,re=z.isCameraChanged(L),Q=z.isAspectChanged(L),Z=re||Q;if(Z){var K={};if(re&&(R=z.getCamera(),D=i.nestedProperty(L,z.id+".camera"),H=D.get(),K[z.id+".camera"]=H),Q&&(B=z.glplot.getAspectratio(),$=i.nestedProperty(L,z.id+".aspectratio"),W=$.get(),K[z.id+".aspectratio"]=W),a.call("_storeDirectGUIEdit",L,O._preGUI,K),re){D.set(R);var le=i.nestedProperty(O,z.id+".camera");le.set(R)}if(Q){$.set(B);var fe=i.nestedProperty(O,z.id+".aspectratio");fe.set(B),z.glplot.redraw()}}return Z},c.updateFx=function(L,z){var O=this,R=O.camera;if(R)if(L==="orbit")R.mode="orbit",R.keyBindingMode="rotate";else if(L==="turntable"){R.up=[0,0,1],R.mode="turntable",R.keyBindingMode="rotate";var D=O.graphDiv,H=D._fullLayout,B=O.fullSceneLayout.camera,$=B.up.x,W=B.up.y,re=B.up.z;if(re/Math.sqrt($*$+W*W+re*re)<.999){var Q=O.id+".camera.up",Z={x:0,y:0,z:1},K={};K[Q]=Z;var le=D.layout;a.call("_storeDirectGUIEdit",le,H._preGUI,K),B.up=Z,i.nestedProperty(le,Q).set(Z)}}else R.keyBindingMode=L;O.fullSceneLayout.hovermode=z};function M(L,z,O){for(var R=0,D=O-1;R<D;++R,--D)for(var H=0;H<z;++H)for(var B=0;B<4;++B){var $=4*(z*R+H)+B,W=4*(z*D+H)+B,re=L[$];L[$]=L[W],L[W]=re}}function E(L,z,O){for(var R=0;R<O;++R)for(var D=0;D<z;++D){var H=4*(z*R+D),B=L[H+3];if(B>0)for(var $=255/B,W=0;W<3;++W)L[H+W]=Math.min($*L[H+W],255)}}c.toImage=function(L){var z=this;L||(L="png"),z.staticMode&&z.container.appendChild(_),z.glplot.redraw();var O=z.glplot.gl,R=O.drawingBufferWidth,D=O.drawingBufferHeight;O.bindFramebuffer(O.FRAMEBUFFER,null);var H=new Uint8Array(R*D*4);O.readPixels(0,0,R,D,O.RGBA,O.UNSIGNED_BYTE,H),M(H,R,D),E(H,R,D);var B=document.createElement("canvas");B.width=R,B.height=D;var $=B.getContext("2d"),W=$.createImageData(R,D);W.data.set(H),$.putImageData(W,0,0);var re;switch(L){case"jpeg":re=B.toDataURL("image/jpeg");break;case"webp":re=B.toDataURL("image/webp");break;default:re=B.toDataURL("image/png")}return z.staticMode&&z.container.removeChild(_),re},c.setConvert=function(){for(var L=this,z=0;z<3;z++){var O=L.fullSceneLayout[T[z]];r.setConvert(O,L.fullLayout),O.setScale=i.noop}},c.make4thDimension=function(){var L=this,z=L.graphDiv,O=z._fullLayout;L._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(L._mockAxis,O)},I.exports=A},{"../../../stackgl_modules":1124,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(e,I,F){I.exports=function(o,h,y,t){t=t||o.length;for(var a=new Array(t),i=0;i<t;i++)a[i]=[o[i],h[i],y[i]];return a}},{}],610:[function(e,I,F){var s=e("./font_attributes"),o=e("./animation_attributes"),h=e("../components/color/attributes"),y=e("../components/shapes/draw_newshape/attributes"),t=e("./pad_attributes"),a=e("../lib/extend").extendFlat,i=s({editType:"calc"});i.family.dflt='"Open Sans", verdana, arial, sans-serif',i.size.dflt=12,i.color.dflt=h.defaultLine,I.exports={font:i,title:{text:{valType:"string",editType:"layoutstyle"},font:s({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:a(t({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:h.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:h.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:h.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:y.newshape,activeshape:y.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:a({},o.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:s({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(e,I,F){var s=e("../../lib/sort_object_keys"),o="1.10.1",h='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',y=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',h].join(" "),t=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),i={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:h,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:y,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:y,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=s(i);I.exports={requiredVersion:o,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:i,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+o+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){var t=h.split(" "),a=t[0],i=t[1],n=s.isArrayOrTypedArray(y)?s.mean(y):y,r=.5+n/100,f=1.5+n/100,u=["",""],l=[0,0];switch(a){case"top":u[0]="top",l[1]=-f;break;case"bottom":u[0]="bottom",l[1]=f;break}switch(i){case"left":u[1]="right",l[0]=-r;break;case"right":u[1]="left",l[0]=r;break}var m;return u[0]&&u[1]?m=u.join("-"):u[0]?m=u[0]:u[1]?m=u[1]:m="center",{anchor:m,offset:l}}},{"../../lib":503}],613:[function(e,I,F){var s=e("mapbox-gl/dist/mapbox-gl-unminified"),o=e("../../lib"),h=o.strTranslate,y=o.strScale,t=e("../../plots/get_data").getSubplotCalcData,a=e("../../constants/xmlns_namespaces"),i=e("@plotly/d3"),n=e("../../components/drawing"),r=e("../../lib/svg_text_utils"),f=e("./mapbox"),u="mapbox",l=F.constants=e("./constants");F.name=u,F.attr="subplot",F.idRoot=u,F.idRegex=F.attrRegex=o.counterRegex(u),F.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},F.layoutAttributes=e("./layout_attributes"),F.supplyLayoutDefaults=e("./layout_defaults"),F.plot=function(g){var _=g._fullLayout,p=g.calcdata,A=_._subplots[u];if(s.version!==l.requiredVersion)throw new Error(l.wrongVersionErrorMsg);var c=m(g,A);s.accessToken=c;for(var S=0;S<A.length;S++){var T=A[S],x=t(p,u,T),w=_[T],v=w._subplot;v||(v=new f(g,T),_[T]._subplot=v),v.viewInitial||(v.viewInitial={center:o.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),v.plot(x,_,g._promises)}},F.clean=function(b,g,_,p){for(var A=p._subplots[u]||[],c=0;c<A.length;c++){var S=A[c];!g[S]&&!!p[S]._subplot&&p[S]._subplot.destroy()}},F.toSVG=function(b){for(var g=b._fullLayout,_=g._subplots[u],p=g._size,A=0;A<_.length;A++){var c=g[_[A]],S=c.domain,T=c._subplot,x=T.toImage("png"),w=g._glimages.append("svg:image");w.attr({xmlns:a.svg,"xlink:href":x,x:p.l+p.w*S.x[0],y:p.t+p.h*(1-S.y[1]),width:p.w*(S.x[1]-S.x[0]),height:p.h*(S.y[1]-S.y[0]),preserveAspectRatio:"none"});var v=i.select(c._subplot.div),C=v.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!C){var M=g._glimages.append("g");M.attr("transform",h(p.l+p.w*S.x[0]+10,p.t+p.h*(1-S.y[0])-31)),M.append("path").attr("d",l.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",l.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",l.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",l.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var E=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),L=g._glimages.append("g"),z=L.append("text");z.text(E).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":E});var O=n.bBox(z.node()),R=p.w*(S.x[1]-S.x[0]);if(O.width>R/2){var D=E.split("|").join("<br>");z.text(D).attr("data-unformatted",D).call(r.convertToTspans,b),O=n.bBox(z.node())}z.attr("transform",h(-3,-O.height+8)),L.insert("rect",".static-attribution").attr({x:-O.width-6,y:-O.height-3,width:O.width+6,height:O.height+3,fill:"rgba(255, 255, 255, 0.75)"});var H=1;O.width+6>R&&(H=R/(O.width+6));var B=[p.l+p.w*S.x[1],p.t+p.h*(1-S.y[0])];L.attr("transform",h(B[0],B[1])+y(H))}};function m(b,g){var _=b._fullLayout,p=b._context;if(p.mapboxAccessToken==="")return"";for(var A=[],c=[],S=!1,T=!1,x=0;x<g.length;x++){var w=_[g[x]],v=w.accesstoken;d(w.style)&&(v?o.pushUnique(A,v):(d(w._input.style)&&(o.error("Uses Mapbox map style, but did not set an access token."),S=!0),T=!0)),v&&o.pushUnique(c,v)}if(T){var C=S?l.noAccessTokenErrorMsg:l.missingStyleErrorMsg;throw o.error(C),new Error(C)}return A.length?(A.length>1&&o.warn(l.multipleTokensErrorMsg),A[0]):(c.length&&o.log(["Listed mapbox access token(s)",c.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function d(b){return typeof b=="string"&&(l.styleValuesMapbox.indexOf(b)!==-1||b.indexOf("mapbox://")===0)}F.updateFx=function(b){for(var g=b._fullLayout,_=g._subplots[u],p=0;p<_.length;p++){var A=g[_[p]]._subplot;A.updateFx(g)}}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(e,I,F){var s=e("../../lib"),o=e("../../lib/svg_text_utils").sanitizeHTML,h=e("./convert_text_opts"),y=e("./constants");function t(f,u){this.subplot=f,this.uid=f.uid+"-"+u,this.index=u,this.idSource="source-"+this.uid,this.idLayer=y.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=t.prototype;a.update=function(u){this.visible?this.needsNewImage(u)?this.updateImage(u):this.needsNewSource(u)?(this.removeLayer(),this.updateSource(u),this.updateLayer(u)):this.needsNewLayer(u)?this.updateLayer(u):this.updateStyle(u):(this.updateSource(u),this.updateLayer(u)),this.visible=i(u)},a.needsNewImage=function(f){var u=this.subplot.map;return u.getSource(this.idSource)&&this.sourceType==="image"&&f.sourcetype==="image"&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},a.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},a.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(f){var u=this.subplot.map;u.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var l=this.findFollowingMapboxLayerId(this.lookupBelow());l!==null&&this.subplot.map.moveLayer(this.idLayer,l)},a.updateSource=function(f){var u=this.subplot.map;if(u.getSource(this.idSource)&&u.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,!!i(f)){var l=r(f);u.addSource(this.idSource,l)}},a.findFollowingMapboxLayerId=function(f){if(f==="traces")for(var u=this.subplot.getMapLayers(),l=0;l<u.length;l++){var m=u[l].id;if(typeof m=="string"&&m.indexOf(y.traceLayerPrefix)===0){f=m;break}}return f},a.updateLayer=function(f){var u=this.subplot,l=n(f),m=this.lookupBelow(),d=this.findFollowingMapboxLayerId(m);this.removeLayer(),i(f)&&u.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:l.layout,paint:l.paint},d),this.layerType=f.type,this.below=m},a.updateStyle=function(f){if(i(f)){var u=n(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",u.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",u.paint)}},a.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},a.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)};function i(f){if(!f.visible)return!1;var u=f.source;if(Array.isArray(u)&&u.length>0){for(var l=0;l<u.length;l++)if(typeof u[l]!="string"||u[l].length===0)return!1;return!0}return s.isPlainObject(u)||typeof u=="string"&&u.length>0}function n(f){var u={},l={};switch(f.type){case"circle":s.extendFlat(l,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":s.extendFlat(l,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":s.extendFlat(l,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var m=f.symbol,d=h(m.textposition,m.iconsize);s.extendFlat(u,{"icon-image":m.icon+"-15","icon-size":m.iconsize/10,"text-field":m.text,"text-size":m.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":m.placement}),s.extendFlat(l,{"icon-color":f.color,"text-color":m.textfont.color,"text-opacity":f.opacity});break;case"raster":s.extendFlat(l,{"raster-fade-duration":0,"raster-opacity":f.opacity});break}return{layout:u,paint:l}}function r(f){var u=f.sourcetype,l=f.source,m={type:u},d;return u==="geojson"?d="data":u==="vector"?d=typeof l=="string"?"url":"tiles":u==="raster"?(d="tiles",m.tileSize=256):u==="image"&&(d="url",m.coordinates=f.coordinates),m[d]=l,f.sourceattribution&&(m.attribution=o(f.sourceattribution)),m}I.exports=function(u,l,m){var d=new t(u,l);return d.update(m),d}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color").defaultLine,h=e("../domain").attributes,y=e("../font_attributes"),t=e("../../traces/scatter/attributes").textposition,a=e("../../plot_api/edit_types").overrideAll,i=e("../../plot_api/plot_template").templatedArray,n=e("./constants"),r=y({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var f=I.exports=a({_arrayAttrRegexps:[s.counterRegex("mapbox",".layers",!0)],domain:h({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:n.styleValuesMapbox.concat(n.styleValuesNonMapbox),dflt:n.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:i("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:o},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:o}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:s.extendFlat({},t,{arrayOk:!1})}})},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(e,I,F){var s=e("../../lib"),o=e("../subplot_defaults"),h=e("../array_container_defaults"),y=e("./layout_attributes");I.exports=function(n,r,f){o(n,r,f,{type:"mapbox",attributes:y,handleDefaults:t,partition:"y",accessToken:r._mapboxAccessToken})};function t(i,n,r,f){r("accesstoken",f.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch"),h(i,n,{name:"layers",handleItemDefaults:a}),n._input=i}function a(i,n){function r(b,g){return s.coerce(i,n,y.layers,b,g)}var f=r("visible");if(f){var u=r("sourcetype"),l=u==="raster"||u==="image";r("source"),r("sourceattribution"),u==="vector"&&r("sourcelayer"),u==="image"&&r("coordinates");var m;l&&(m="raster");var d=r("type",m);l&&d!=="raster"&&(d=n.type="raster",s.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),d==="circle"&&r("circle.radius"),d==="line"&&(r("line.width"),r("line.dash")),d==="fill"&&r("fill.outlinecolor"),d==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),s.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(e,I,F){var s=e("mapbox-gl/dist/mapbox-gl-unminified"),o=e("../../lib"),h=e("../../lib/geo_location_utils"),y=e("../../registry"),t=e("../cartesian/axes"),a=e("../../components/dragelement"),i=e("../../components/fx"),n=e("../../components/dragelement/helpers"),r=n.rectMode,f=n.drawMode,u=n.selectMode,l=e("../cartesian/select").prepSelect,m=e("../cartesian/select").clearSelect,d=e("../cartesian/select").clearSelectionsCache,b=e("../cartesian/select").selectOnClick,g=e("./constants"),_=e("./layers");function p(w,v){this.id=v,this.gd=w;var C=w._fullLayout,M=w._context;this.container=C._glcontainer.node(),this.isStatic=M.staticPlot,this.uid=C._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(C),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var A=p.prototype;A.plot=function(w,v,C){var M=this,E=v[M.id];M.map&&E.accesstoken!==M.accessToken&&(M.map.remove(),M.map=null,M.styleObj=null,M.traceHash={},M.layerList=[]);var L;M.map?L=new Promise(function(z,O){M.updateMap(w,v,z,O)}):L=new Promise(function(z,O){M.createMap(w,v,z,O)}),C.push(L)},A.createMap=function(w,v,C,M){var E=this,L=v[E.id],z=E.styleObj=S(L.style);E.accessToken=L.accesstoken;var O=E.map=new s.Map({container:E.div,style:z.style,center:x(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new s.AttributionControl({compact:!0}));O._canvas.style.left="0px",O._canvas.style.top="0px",E.rejectOnError(M),E.isStatic||E.initFx(w,v);var R=[];R.push(new Promise(function(D){O.once("load",D)})),R=R.concat(h.fetchTraceGeoData(w)),Promise.all(R).then(function(){E.fillBelowLookup(w,v),E.updateData(w),E.updateLayout(v),E.resolveOnRender(C)}).catch(M)},A.updateMap=function(w,v,C,M){var E=this,L=E.map,z=v[this.id];E.rejectOnError(M);var O=[],R=S(z.style);JSON.stringify(E.styleObj)!==JSON.stringify(R)&&(E.styleObj=R,L.setStyle(R.style),E.traceHash={},O.push(new Promise(function(D){L.once("styledata",D)}))),O=O.concat(h.fetchTraceGeoData(w)),Promise.all(O).then(function(){E.fillBelowLookup(w,v),E.updateData(w),E.updateLayout(v),E.resolveOnRender(C)}).catch(M)},A.fillBelowLookup=function(w,v){var C=v[this.id],M=C.layers,E,L,z=this.belowLookup={},O=!1;for(E=0;E<w.length;E++){var R=w[E][0].trace,D=R._module;typeof R.below=="string"?L=R.below:D.getBelow&&(L=D.getBelow(R,this)),L===""&&(O=!0),z["trace-"+R.uid]=L||""}for(E=0;E<M.length;E++){var H=M[E];typeof H.below=="string"?L=H.below:O?L="traces":L="",z["layout-"+E]=L}var B={},$,W;for($ in z)L=z[$],B[L]?B[L].push($):B[L]=[$];for(L in B){var re=B[L];if(re.length>1)for(E=0;E<re.length;E++)$=re[E],$.indexOf("trace-")===0?(W=$.split("trace-")[1],this.traceHash[W]&&(this.traceHash[W].below=null)):$.indexOf("layout-")===0&&(W=$.split("layout-")[1],this.layerList[W]&&(this.layerList[W].below=null))}};var c={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};A.updateData=function(w){var v=this.traceHash,C,M,E,L,z=w.slice().sort(function(B,$){return c[B[0].trace.type]-c[$[0].trace.type]});for(E=0;E<z.length;E++){var O=z[E];M=O[0].trace,C=v[M.uid];var R=!1;C&&(C.type===M.type?(C.update(O),R=!0):C.dispose()),!R&&M._module&&(v[M.uid]=M._module.plot(this,O))}var D=Object.keys(v);e:for(E=0;E<D.length;E++){var H=D[E];for(L=0;L<w.length;L++)if(M=w[L][0].trace,H===M.uid)continue e;C=v[H],C.dispose(),delete v[H]}},A.updateLayout=function(w){var v=this.map,C=w[this.id];!this.dragging&&!this.wheeling&&(v.setCenter(x(C.center)),v.setZoom(C.zoom),v.setBearing(C.bearing),v.setPitch(C.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?v.scrollZoom.enable():v.scrollZoom.disable()},A.resolveOnRender=function(w){var v=this.map;v.on("render",function C(){v.loaded()&&(v.off("render",C),setTimeout(w,10))})},A.rejectOnError=function(w){var v=this.map;function C(){w(new Error(g.mapOnErrorMsg))}v.once("error",C),v.once("style.error",C),v.once("source.error",C),v.once("tile.error",C),v.once("layer.error",C)},A.createFramework=function(w){var v=this,C=v.div=document.createElement("div");C.id=v.uid,C.style.position="absolute",v.container.appendChild(C),v.xaxis={_id:"x",c2p:function(M){return v.project(M).x}},v.yaxis={_id:"y",c2p:function(M){return v.project(M).y}},v.updateFramework(w),v.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(v.mockAxis,w)},A.initFx=function(w,v){var C=this,M=C.gd,E=C.map;E.on("moveend",function(O){if(!!C.map){var R=M._fullLayout;if(O.originalEvent||C.wheeling){var D=R[C.id];y.call("_storeDirectGUIEdit",M.layout,R._preGUI,C.getViewEdits(D));var H=C.getView();D._input.center=D.center=H.center,D._input.zoom=D.zoom=H.zoom,D._input.bearing=D.bearing=H.bearing,D._input.pitch=D.pitch=H.pitch,M.emit("plotly_relayout",C.getViewEditsWithDerived(H))}O.originalEvent&&O.originalEvent.type==="mouseup"?C.dragging=!1:C.wheeling&&(C.wheeling=!1),R._rehover&&R._rehover()}}),E.on("wheel",function(){C.wheeling=!0}),E.on("mousemove",function(O){var R=C.div.getBoundingClientRect(),D=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return R},C.xaxis.p2c=function(){return E.unproject(D).lng},C.yaxis.p2c=function(){return E.unproject(D).lat},M._fullLayout._rehover=function(){M._fullLayout._hoversubplot===C.id&&M._fullLayout[C.id]&&i.hover(M,O,C.id)},i.hover(M,O,C.id),M._fullLayout._hoversubplot=C.id});function L(){i.loneUnhover(v._hoverlayer)}E.on("dragstart",function(){C.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){M._fullLayout._hoversubplot=null});function z(){var O=C.getView();M.emit("plotly_relayouting",C.getViewEditsWithDerived(O))}E.on("drag",z),E.on("zoom",z),E.on("dblclick",function(){var O=M._fullLayout[C.id];y.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,C.getViewEdits(O));var R=C.viewInitial;E.setCenter(x(R.center)),E.setZoom(R.zoom),E.setBearing(R.bearing),E.setPitch(R.pitch);var D=C.getView();O._input.center=O.center=D.center,O._input.zoom=O.zoom=D.zoom,O._input.bearing=O.bearing=D.bearing,O._input.pitch=O.pitch=D.pitch,M.emit("plotly_doubleclick",null),M.emit("plotly_relayout",C.getViewEditsWithDerived(D))}),C.clearSelect=function(){d(C.dragOptions),m(C.dragOptions.gd)},C.onClickInPanFn=function(O){return function(R){var D=M._fullLayout.clickmode;D.indexOf("select")>-1&&b(R.originalEvent,M,[C.xaxis],[C.yaxis],C.id,O),D.indexOf("event")>-1&&i.click(M,R.originalEvent)}}},A.updateFx=function(w){var v=this,C=v.map,M=v.gd;if(v.isStatic)return;function E(R){var D=v.map.unproject(R);return[D.lng,D.lat]}var L=w.dragmode,z;r(L)?z=function(R,D){var H=R.range={};H[v.id]=[E([D.xmin,D.ymin]),E([D.xmax,D.ymax])]}:z=function(R,D,H){var B=R.lassoPoints={};B[v.id]=H.filtered.map(E)};var O=v.dragOptions;v.dragOptions=o.extendDeep(O||{},{dragmode:w.dragmode,element:v.div,gd:M,plotinfo:{id:v.id,domain:w[v.id].domain,xaxis:v.xaxis,yaxis:v.yaxis,fillRangeItems:z},xaxes:[v.xaxis],yaxes:[v.yaxis],subplot:v.id}),C.off("click",v.onClickInPanHandler),u(L)||f(L)?(C.dragPan.disable(),C.on("zoomstart",v.clearSelect),v.dragOptions.prepFn=function(R,D,H){l(R,D,H,v.dragOptions,L)},a.init(v.dragOptions)):(C.dragPan.enable(),C.off("zoomstart",v.clearSelect),v.div.onmousedown=null,v.onClickInPanHandler=v.onClickInPanFn(v.dragOptions),C.on("click",v.onClickInPanHandler))},A.updateFramework=function(w){var v=w[this.id].domain,C=w._size,M=this.div.style;M.width=C.w*(v.x[1]-v.x[0])+"px",M.height=C.h*(v.y[1]-v.y[0])+"px",M.left=C.l+v.x[0]*C.w+"px",M.top=C.t+(1-v.y[1])*C.h+"px",this.xaxis._offset=C.l+v.x[0]*C.w,this.xaxis._length=C.w*(v.x[1]-v.x[0]),this.yaxis._offset=C.t+(1-v.y[1])*C.h,this.yaxis._length=C.h*(v.y[1]-v.y[0])},A.updateLayers=function(w){var v=w[this.id],C=v.layers,M=this.layerList,E;if(C.length!==M.length){for(E=0;E<M.length;E++)M[E].dispose();for(M=this.layerList=[],E=0;E<C.length;E++)M.push(_(this,E,C[E]))}else for(E=0;E<C.length;E++)M[E].update(C[E])},A.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},A.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},A.setOptions=function(w,v,C){for(var M in C)this.map[v](w,M,C[M])},A.getMapLayers=function(){return this.map.getStyle().layers},A.addLayer=function(w,v){var C=this.map;if(typeof v=="string"){if(v===""){C.addLayer(w,v);return}for(var M=this.getMapLayers(),E=0;E<M.length;E++)if(v===M[E].id){C.addLayer(w,v);return}o.warn(["Trying to add layer with *below* value",v,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}C.addLayer(w)},A.project=function(w){return this.map.project(new s.LngLat(w[0],w[1]))},A.getView=function(){var w=this.map,v=w.getCenter(),C=v.lng,M=v.lat,E={lon:C,lat:M},L=w.getCanvas(),z=parseInt(L.style.width),O=parseInt(L.style.height);return{center:E,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([z,0]).toArray(),w.unproject([z,O]).toArray(),w.unproject([0,O]).toArray()]}}},A.getViewEdits=function(w){for(var v=this.id,C=["center","zoom","bearing","pitch"],M={},E=0;E<C.length;E++){var L=C[E];M[v+"."+L]=w[L]}return M},A.getViewEditsWithDerived=function(w){var v=this.id,C=this.getViewEdits(w);return C[v+"._derived"]=w._derived,C};function S(w){var v={};return o.isPlainObject(w)?(v.id=w.id,v.style=w):typeof w=="string"?(v.id=w,g.styleValuesMapbox.indexOf(w)!==-1?v.style=T(w):g.stylesNonMapbox[w]?v.style=g.stylesNonMapbox[w]:v.style=w):(v.id=g.styleValueDflt,v.style=T(g.styleValueDflt)),v.transition={duration:0,delay:0},v}function T(w){return g.styleUrlPrefix+w+"-"+g.styleUrlSuffix}function x(w){return[w.lon,w.lat]}I.exports=p},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(e,I,F){I.exports=function(s){var o=s.editType;return{t:{valType:"number",dflt:0,editType:o},r:{valType:"number",dflt:0,editType:o},b:{valType:"number",dflt:0,editType:o},l:{valType:"number",dflt:0,editType:o},editType:o}}},{}],619:[function(e,I,F){var s=e("@plotly/d3"),o=e("d3-time-format").timeFormatLocale,h=e("d3-format").formatLocale,y=e("fast-isnumeric"),t=e("../registry"),a=e("../plot_api/plot_schema"),i=e("../plot_api/plot_template"),n=e("../lib"),r=e("../components/color"),f=e("../constants/numerical").BADNUM,u=e("./cartesian/axis_ids"),l=e("./cartesian/handle_outline").clearSelect,m=e("./animation_attributes"),d=e("./frame_attributes"),b=e("../plots/get_data").getModuleCalcData,g=n.relinkPrivateKeys,_=n._,p=I.exports={};n.extendFlat(p,t),p.attributes=e("./attributes"),p.attributes.type.values=p.allTypes,p.fontAttrs=e("./font_attributes"),p.layoutAttributes=e("./layout_attributes"),p.fontWeight="normal";var A=p.transformsRegistry,c=e("./command");p.executeAPICommand=c.executeAPICommand,p.computeAPICommandBindings=c.computeAPICommandBindings,p.manageCommandObserver=c.manageCommandObserver,p.hasSimpleAPICommandBindings=c.hasSimpleAPICommandBindings,p.redrawText=function(V){return V=n.getGraphDiv(V),new Promise(function(j){setTimeout(function(){!V._fullLayout||(t.getComponentMethod("annotations","draw")(V),t.getComponentMethod("legend","draw")(V),t.getComponentMethod("colorbar","draw")(V),j(p.previousPromises(V)))},300)})},p.resize=function(V){V=n.getGraphDiv(V);var j,ee=new Promise(function(q,X){(!V||n.isHidden(V))&&X(new Error("Resize must be passed a displayed plot div element.")),V._redrawTimer&&clearTimeout(V._redrawTimer),V._resolveResize&&(j=V._resolveResize),V._resolveResize=q,V._redrawTimer=setTimeout(function(){if(!V.layout||V.layout.width&&V.layout.height||n.isHidden(V)){q(V);return}delete V.layout.width,delete V.layout.height;var J=V.changed;V.autoplay=!0,t.call("relayout",V,{autosize:!0}).then(function(){V.changed=J,V._resolveResize===q&&(delete V._resolveResize,q(V))})},100)});return j&&j(ee),ee},p.previousPromises=function(V){if((V._promises||[]).length)return Promise.all(V._promises).then(function(){V._promises=[]})},p.addLinks=function(V){if(!(!V._context.showLink&&!V._context.showSources)){var j=V._fullLayout,ee=n.ensureSingle(j._paper,"text","js-plot-link-container",function(oe){oe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var se=s.select(this);se.append("tspan").classed("js-link-to-tool",!0),se.append("tspan").classed("js-link-spacer",!0),se.append("tspan").classed("js-sourcelinks",!0)})}),q=ee.node(),X={y:j._paper.attr("height")-9};document.body.contains(q)&&q.getComputedTextLength()>=j.width-20?(X["text-anchor"]="start",X.x=5):(X["text-anchor"]="end",X.x=j._paper.attr("width")-7),ee.attr(X);var J=ee.select(".js-link-to-tool"),ie=ee.select(".js-link-spacer"),ne=ee.select(".js-sourcelinks");V._context.showSources&&V._context.showSources(V),V._context.showLink&&S(V,J),ie.text(J.text()&&ne.text()?" - ":"")}};function S(V,j){j.text("");var ee=j.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(V._context.linkText+" "+String.fromCharCode(187));if(V._context.sendData)ee.on("click",function(){p.sendDataToCloud(V)});else{var q=window.location.pathname.split("/"),X=window.location.search;ee.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+q[2].split(".")[0]+"/"+q[1]+X})}}p.sendDataToCloud=function(V){var j=(window.PLOTLYENV||{}).BASE_URL||V._context.plotlyServerURL;if(!!j){V.emit("plotly_beforeexport");var ee=s.select(V).append("div").attr("id","hiddenform").style("display","none"),q=ee.append("form").attr({action:j+"/external",method:"post",target:"_blank"}),X=q.append("input").attr({type:"text",name:"data"});return X.node().value=p.graphJson(V,!1,"keepdata"),q.node().submit(),ee.remove(),V.emit("plotly_afterexport"),!1}};var T=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],x=["year","month","dayMonth","dayMonthYear"];p.supplyDefaults=function(V,j){var ee=j&&j.skipUpdateCalc,q=V._fullLayout||{};if(q._skipDefaults){delete q._skipDefaults;return}var X=V._fullLayout={},J=V.layout||{},ie=V._fullData||[],ne=V._fullData=[],oe=V.data||[],se=V.calcdata||[],me=V._context||{},ce;V._transitionData||p.createTransitionData(V),X._dfltTitle={plot:_(V,"Click to enter Plot title"),x:_(V,"Click to enter X axis title"),y:_(V,"Click to enter Y axis title"),colorbar:_(V,"Click to enter Colorscale title"),annotation:_(V,"new text")},X._traceWord=_(V,"trace");var pe=C(V,T);if(X._mapboxAccessToken=me.mapboxAccessToken,q._initialAutoSizeIsDone){var xe=q.width,Se=q.height;p.supplyLayoutGlobalDefaults(J,X,pe),J.width||(X.width=xe),J.height||(X.height=Se),p.sanitizeMargins(X)}else{p.supplyLayoutGlobalDefaults(J,X,pe);var Ae=!J.width||!J.height,Ce=X.autosize,Ee=me.autosizable,Oe=Ae&&(Ce||Ee);Oe?p.plotAutoSize(V,J,X):Ae&&p.sanitizeMargins(X),!Ce&&Ae&&(J.width=X.width,J.height=X.height)}X._d3locale=M(pe,X.separators),X._extraFormat=C(V,x),X._initialAutoSizeIsDone=!0,X._dataLength=oe.length,X._modules=[],X._visibleModules=[],X._basePlotModules=[];var _e=X._subplots=v(),Re=X._splomAxes={x:{},y:{}},Ve=X._splomSubplots={};X._splomGridDflt={},X._scatterStackOpts={},X._firstScatter={},X._alignmentOpts={},X._colorAxes={},X._requestRangeslider={},X._traceUids=w(ie,oe),X._globalTransforms=(V._context||{}).globalTransforms,p.supplyDataDefaults(oe,ne,J,X);var Je=Object.keys(Re.x),ze=Object.keys(Re.y);if(Je.length>1&&ze.length>1){for(t.getComponentMethod("grid","sizeDefaults")(J,X),ce=0;ce<Je.length;ce++)n.pushUnique(_e.xaxis,Je[ce]);for(ce=0;ce<ze.length;ce++)n.pushUnique(_e.yaxis,ze[ce]);for(var De in Ve)n.pushUnique(_e.cartesian,De)}if(X._has=p._hasPlotType.bind(X),ie.length===ne.length)for(ce=0;ce<ne.length;ce++)g(ne[ce],ie[ce]);p.supplyLayoutModuleDefaults(J,X,ne,V._transitionData);var je=X._visibleModules,dt=[];for(ce=0;ce<je.length;ce++){var Et=je[ce].crossTraceDefaults;Et&&n.pushUnique(dt,Et)}for(ce=0;ce<dt.length;ce++)dt[ce](ne,X);X._hasOnlyLargeSploms=X._basePlotModules.length===1&&X._basePlotModules[0].name==="splom"&&Je.length>15&&ze.length>15&&X.shapes.length===0&&X.images.length===0,p.linkSubplots(ne,X,ie,q),p.cleanPlot(ne,X,ie,q);var $t=!!(q._has&&q._has("gl2d")),wt=!!(X._has&&X._has("gl2d")),Ot=!!(q._has&&q._has("cartesian")),Vt=!!(X._has&&X._has("cartesian")),kt=Ot||$t,St=Vt||wt;kt&&!St?q._bgLayer.remove():St&&!kt&&(X._shouldCreateBgLayer=!0),q._zoomlayer&&!V._dragging&&l({_fullLayout:q}),E(ne,X),g(X,q),t.getComponentMethod("colorscale","crossTraceDefaults")(ne,X),X._preGUI||(X._preGUI={}),X._tracePreGUI||(X._tracePreGUI={});var ot=X._tracePreGUI,ht={},Ke;for(Ke in ot)ht[Ke]="old";for(ce=0;ce<ne.length;ce++)Ke=ne[ce]._fullInput.uid,ht[Ke]||(ot[Ke]={}),ht[Ke]="new";for(Ke in ht)ht[Ke]==="old"&&delete ot[Ke];D(X),t.getComponentMethod("rangeslider","makeData")(X),!ee&&se.length===ne.length&&p.supplyDefaultsUpdateCalc(se,ne)},p.supplyDefaultsUpdateCalc=function(V,j){for(var ee=0;ee<j.length;ee++){var q=j[ee],X=(V[ee]||[])[0];if(X&&X.trace){var J=X.trace;if(J._hasCalcTransform){var ie=J._arrayAttrs,ne,oe,se;for(ne=0;ne<ie.length;ne++)oe=ie[ne],se=n.nestedProperty(J,oe).get().slice(),n.nestedProperty(q,oe).set(se)}X.trace=q}}};function w(V,j){var ee=j.length,q=[],X,J;for(X=0;X<V.length;X++){var ie=V[X]._fullInput;ie!==J&&q.push(ie),J=ie}var ne=q.length,oe=new Array(ee),se={};function me(xe,Se){oe[Se]=xe,se[xe]=1}function ce(xe,Se){if(xe&&typeof xe=="string"&&!se[xe])return me(xe,Se),!0}for(X=0;X<ee;X++){var pe=j[X].uid;typeof pe=="number"&&(pe=String(pe)),!ce(pe,X)&&(X<ne&&ce(q[X].uid,X)||me(n.randstr(se),X))}return oe}function v(){var V=t.collectableSubplotTypes,j={},ee,q;if(!V){V=[];var X=t.subplotsRegistry;for(var J in X){var ie=X[J],ne=ie.attr;if(ne&&(V.push(J),Array.isArray(ne)))for(q=0;q<ne.length;q++)n.pushUnique(V,ne[q])}}for(ee=0;ee<V.length;ee++)j[V[ee]]=[];return j}function C(V,j){var ee=V._context.locale;ee||(ee="en-US");var q=!1,X={};function J(ce){for(var pe=!0,xe=0;xe<j.length;xe++){var Se=j[xe];X[Se]||(ce[Se]?X[Se]=ce[Se]:pe=!1)}pe&&(q=!0)}for(var ie=0;ie<2;ie++){for(var ne=V._context.locales,oe=0;oe<2;oe++){var se=(ne[ee]||{}).format;if(se&&(J(se),q))break;ne=t.localeRegistry}var me=ee.split("-")[0];if(q||me===ee)break;ee=me}return q||J(t.localeRegistry.en.format),X}function M(V,j){return V.decimal=j.charAt(0),V.thousands=j.charAt(1),{numberFormat:function(ee){try{ee=h(V).format(n.adjustFormat(ee))}catch{return n.warnBadFormat(ee),n.noFormat}return ee},timeFormat:o(V).utcFormat}}function E(V,j){var ee,q=[];j.meta&&(ee=j._meta={meta:j.meta,layout:{meta:j.meta}});for(var X=0;X<V.length;X++){var J=V[X];J.meta?q[J.index]=J._meta={meta:J.meta}:j.meta&&(J._meta={meta:j.meta}),j.meta&&(J._meta.layout={meta:j.meta})}q.length&&(ee||(ee=j._meta={}),ee.data=q)}p.createTransitionData=function(V){V._transitionData||(V._transitionData={}),V._transitionData._frames||(V._transitionData._frames=[]),V._transitionData._frameHash||(V._transitionData._frameHash={}),V._transitionData._counter||(V._transitionData._counter=0),V._transitionData._interruptCallbacks||(V._transitionData._interruptCallbacks=[])},p._hasPlotType=function(V){var j,ee=this._basePlotModules||[];for(j=0;j<ee.length;j++)if(ee[j].name===V)return!0;var q=this._modules||[];for(j=0;j<q.length;j++){var X=q[j].name;if(X===V)return!0;var J=t.modules[X];if(J&&J.categories[V])return!0}return!1},p.cleanPlot=function(V,j,ee,q){var X,J,ie=q._basePlotModules||[];for(X=0;X<ie.length;X++){var ne=ie[X];ne.clean&&ne.clean(V,j,ee,q)}var oe=q._has&&q._has("gl"),se=j._has&&j._has("gl");oe&&!se&&q._glcontainer!==void 0&&(q._glcontainer.selectAll(".gl-canvas").remove(),q._glcontainer.selectAll(".no-webgl").remove(),q._glcanvas=null);var me=!!q._infolayer;e:for(X=0;X<ee.length;X++){var ce=ee[X],pe=ce.uid;for(J=0;J<V.length;J++){var xe=V[J];if(pe===xe.uid)continue e}me&&q._infolayer.select(".cb"+pe).remove()}},p.linkSubplots=function(V,j,ee,q){var X,J,ie=q._plots||{},ne=j._plots={},oe=j._subplots,se={_fullData:V,_fullLayout:j},me=oe.cartesian.concat(oe.gl2d||[]);for(X=0;X<me.length;X++){var ce=me[X],pe=ie[ce],xe=u.getFromId(se,ce,"x"),Se=u.getFromId(se,ce,"y"),Ae;for(pe?Ae=ne[ce]=pe:(Ae=ne[ce]={},Ae.id=ce),xe._counterAxes.push(Se._id),Se._counterAxes.push(xe._id),xe._subplotsWith.push(ce),Se._subplotsWith.push(ce),Ae.xaxis=xe,Ae.yaxis=Se,Ae._hasClipOnAxisFalse=!1,J=0;J<V.length;J++){var Ce=V[J];if(Ce.xaxis===Ae.xaxis._id&&Ce.yaxis===Ae.yaxis._id&&Ce.cliponaxis===!1){Ae._hasClipOnAxisFalse=!0;break}}}var Ee=u.list(se,null,!0),Oe;for(X=0;X<Ee.length;X++){Oe=Ee[X];var _e=null;Oe.overlaying&&(_e=u.getFromId(se,Oe.overlaying),_e&&_e.overlaying&&(Oe.overlaying=!1,_e=null)),Oe._mainAxis=_e||Oe,_e&&(Oe.domain=_e.domain.slice()),Oe._anchorAxis=Oe.anchor==="free"?null:u.getFromId(se,Oe.anchor)}for(X=0;X<Ee.length;X++)if(Oe=Ee[X],Oe._counterAxes.sort(u.idSort),Oe._subplotsWith.sort(n.subplotSort),Oe._mainSubplot=L(Oe,j),Oe._counterAxes.length&&(Oe.spikemode&&Oe.spikemode.indexOf("across")!==-1||Oe.automargin&&Oe.mirror&&Oe.anchor!=="free"||t.getComponentMethod("rangeslider","isVisible")(Oe))){var Re=1,Ve=0;for(J=0;J<Oe._counterAxes.length;J++){var Je=u.getFromId(se,Oe._counterAxes[J]);Re=Math.min(Re,Je.domain[0]),Ve=Math.max(Ve,Je.domain[1])}Re<Ve&&(Oe._counterDomainMin=Re,Oe._counterDomainMax=Ve)}};function L(V,j){var ee={_fullLayout:j},q=V._id.charAt(0)==="x",X=V._mainAxis._anchorAxis,J="",ie="",ne="";if(X&&(ne=X._mainAxis._id,J=q?V._id+ne:ne+V._id),!J||!j._plots[J]){J="";for(var oe=V._counterAxes,se=0;se<oe.length;se++){var me=oe[se],ce=q?V._id+me:me+V._id;ie||(ie=ce);var pe=u.getFromId(ee,me);if(ne&&pe.overlaying===ne){J=ce;break}}}return J||ie}p.clearExpandedTraceDefaultColors=function(V){var j,ee,q;function X(ie,ne,oe,se){ee[se]=ne,ee.length=se+1,ie.valType==="color"&&ie.dflt===void 0&&j.push(ee.join("."))}for(ee=[],j=V._module._colorAttrs,j||(V._module._colorAttrs=j=[],a.crawl(V._module.attributes,X)),q=0;q<j.length;q++){var J=n.nestedProperty(V,"_input."+j[q]);J.get()||n.nestedProperty(V,j[q]).set(null)}},p.supplyDataDefaults=function(V,j,ee,q){var X=q._modules,J=q._visibleModules,ie=q._basePlotModules,ne=0,oe=0,se,me,ce;q._transformModules=[];function pe(ze){j.push(ze);var De=ze._module;!De||(n.pushUnique(X,De),ze.visible===!0&&n.pushUnique(J,De),n.pushUnique(ie,ze._module.basePlotModule),ne++,ze._input.visible!==!1&&oe++)}var xe={},Se=[],Ae=(ee.template||{}).data||{},Ce=i.traceTemplater(Ae);for(se=0;se<V.length;se++){if(ce=V[se],me=Ce.newTrace(ce),me.uid=q._traceUids[se],p.supplyTraceDefaults(ce,me,oe,q,se),me.index=se,me._input=ce,me._expandedIndex=ne,me.transforms&&me.transforms.length)for(var Ee=ce.visible!==!1&&me.visible===!1,Oe=O(me,j,ee,q),_e=0;_e<Oe.length;_e++){var Re=Oe[_e],Ve={_template:me._template,type:me.type,uid:me.uid+_e};Ee&&Re.visible===!1&&delete Re.visible,p.supplyTraceDefaults(Re,Ve,ne,q,se),g(Ve,Re),Ve.index=se,Ve._input=ce,Ve._fullInput=me,Ve._expandedIndex=ne,Ve._expandedInput=Re,pe(Ve)}else me._fullInput=me,me._expandedInput=me,pe(me);t.traceIs(me,"carpetAxis")&&(xe[me.carpet]=me),t.traceIs(me,"carpetDependent")&&Se.push(se)}for(se=0;se<Se.length;se++)if(me=j[Se[se]],!!me.visible){var Je=xe[me.carpet];if(me._carpet=Je,!Je||!Je.visible){me.visible=!1;continue}me.xaxis=Je.xaxis,me.yaxis=Je.yaxis}},p.supplyAnimationDefaults=function(V){V=V||{};var j,ee={};function q(X,J){return n.coerce(V||{},ee,m,X,J)}if(q("mode"),q("direction"),q("fromcurrent"),Array.isArray(V.frame))for(ee.frame=[],j=0;j<V.frame.length;j++)ee.frame[j]=p.supplyAnimationFrameDefaults(V.frame[j]||{});else ee.frame=p.supplyAnimationFrameDefaults(V.frame||{});if(Array.isArray(V.transition))for(ee.transition=[],j=0;j<V.transition.length;j++)ee.transition[j]=p.supplyAnimationTransitionDefaults(V.transition[j]||{});else ee.transition=p.supplyAnimationTransitionDefaults(V.transition||{});return ee},p.supplyAnimationFrameDefaults=function(V){var j={};function ee(q,X){return n.coerce(V||{},j,m.frame,q,X)}return ee("duration"),ee("redraw"),j},p.supplyAnimationTransitionDefaults=function(V){var j={};function ee(q,X){return n.coerce(V||{},j,m.transition,q,X)}return ee("duration"),ee("easing"),j},p.supplyFrameDefaults=function(V){var j={};function ee(q,X){return n.coerce(V,j,d,q,X)}return ee("group"),ee("name"),ee("traces"),ee("baseframe"),ee("data"),ee("layout"),j},p.supplyTraceDefaults=function(V,j,ee,q,X){var J=q.colorway||r.defaults,ie=J[ee%J.length],ne;function oe(Oe,_e){return n.coerce(V,j,p.attributes,Oe,_e)}var se=oe("visible");oe("type"),oe("name",q._traceWord+" "+X),oe("uirevision",q.uirevision);var me=p.getModule(j);if(j._module=me,me){var ce=me.basePlotModule,pe=ce.attr,xe=ce.attributes;if(pe&&xe){var Se=q._subplots,Ae="";if(se||ce.name!=="gl2d"){if(Array.isArray(pe))for(ne=0;ne<pe.length;ne++){var Ce=pe[ne],Ee=n.coerce(V,j,xe,Ce);Se[Ce]&&n.pushUnique(Se[Ce],Ee),Ae+=Ee}else Ae=n.coerce(V,j,xe,pe);Se[ce.name]&&n.pushUnique(Se[ce.name],Ae)}}}return se&&(oe("customdata"),oe("ids"),oe("meta"),t.traceIs(j,"showLegend")?(n.coerce(V,j,me.attributes.showlegend?me.attributes:p.attributes,"showlegend"),oe("legendgroup"),oe("legendgrouptitle.text"),oe("legendrank"),j._dfltShowLegend=!0):j._dfltShowLegend=!1,me&&me.supplyDefaults(V,j,ie,q),t.traceIs(j,"noOpacity")||oe("opacity"),t.traceIs(j,"notLegendIsolatable")&&(j.visible=!!j.visible),t.traceIs(j,"noHover")||(j.hovertemplate||n.coerceHoverinfo(V,j,q),j.type!=="parcats"&&t.getComponentMethod("fx","supplyDefaults")(V,j,ie,q)),me&&me.selectPoints&&oe("selectedpoints"),p.supplyTransformDefaults(V,j,q)),j};function z(V){var j=V.transforms;if(Array.isArray(j)&&j.length)for(var ee=0;ee<j.length;ee++){var q=j[ee],X=q._module||A[q.type];if(X&&X.makesData)return!0}return!1}p.hasMakesDataTransform=z,p.supplyTransformDefaults=function(V,j,ee){if(!!(j._length||z(V))){var q=ee._globalTransforms||[],X=ee._transformModules||[];if(!(!Array.isArray(V.transforms)&&q.length===0))for(var J=V.transforms||[],ie=q.concat(J),ne=j.transforms=[],oe=0;oe<ie.length;oe++){var se=ie[oe],me=se.type,ce=A[me],pe,xe=!(se._module&&se._module===ce),Se=ce&&typeof ce.transform=="function";ce||n.warn("Unrecognized transform type "+me+"."),ce&&ce.supplyDefaults&&(xe||Se)?(pe=ce.supplyDefaults(se,j,ee,V),pe.type=me,pe._module=ce,n.pushUnique(X,ce)):pe=n.extendFlat({},se),ne.push(pe)}}};function O(V,j,ee,q){for(var X=V.transforms,J=[V],ie=0;ie<X.length;ie++){var ne=X[ie],oe=A[ne.type];oe&&oe.transform&&(J=oe.transform(J,{transform:ne,fullTrace:V,fullData:j,layout:ee,fullLayout:q,transformIndex:ie}))}return J}p.supplyLayoutGlobalDefaults=function(V,j,ee){function q(se,me){return n.coerce(V,j,p.layoutAttributes,se,me)}var X=V.template;n.isPlainObject(X)&&(j.template=X,j._template=X.layout,j._dataTemplate=X.data),q("autotypenumbers");var J=n.coerceFont(q,"font"),ie=J.size;n.coerceFont(q,"title.font",n.extendFlat({},J,{size:Math.round(ie*1.4)})),q("title.text",j._dfltTitle.plot),q("title.xref"),q("title.yref"),q("title.x"),q("title.y"),q("title.xanchor"),q("title.yanchor"),q("title.pad.t"),q("title.pad.r"),q("title.pad.b"),q("title.pad.l");var ne=q("uniformtext.mode");ne&&q("uniformtext.minsize"),q("autosize",!(V.width&&V.height)),q("width"),q("height"),q("margin.l"),q("margin.r"),q("margin.t"),q("margin.b"),q("margin.pad"),q("margin.autoexpand"),V.width&&V.height&&p.sanitizeMargins(j),t.getComponentMethod("grid","sizeDefaults")(V,j),q("paper_bgcolor"),q("separators",ee.decimal+ee.thousands),q("hidesources"),q("colorway"),q("datarevision");var oe=q("uirevision");q("editrevision",oe),q("selectionrevision",oe),t.getComponentMethod("modebar","supplyLayoutDefaults")(V,j),t.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(V,j,q),q("meta"),n.isPlainObject(V.transition)&&(q("transition.duration"),q("transition.easing"),q("transition.ordering")),t.getComponentMethod("calendars","handleDefaults")(V,j,"calendar"),t.getComponentMethod("fx","supplyLayoutGlobalDefaults")(V,j,q)};function R(V){return typeof V=="string"&&V.substr(V.length-2)==="px"&&parseFloat(V)}p.plotAutoSize=function(j,ee,q){var X=j._context||{},J=X.frameMargins,ie,ne,oe=n.isPlotDiv(j);if(oe&&j.emit("plotly_autosize"),X.fillFrame)ie=window.innerWidth,ne=window.innerHeight,document.body.style.overflow="hidden";else{var se=oe?window.getComputedStyle(j):{};if(ie=R(se.width)||R(se.maxWidth)||q.width,ne=R(se.height)||R(se.maxHeight)||q.height,y(J)&&J>0){var me=1-2*J;ie=Math.round(me*ie),ne=Math.round(me*ne)}}var ce=p.layoutAttributes.width.min,pe=p.layoutAttributes.height.min;ie<ce&&(ie=ce),ne<pe&&(ne=pe);var xe=!ee.width&&Math.abs(q.width-ie)>1,Se=!ee.height&&Math.abs(q.height-ne)>1;(Se||xe)&&(xe&&(q.width=ie),Se&&(q.height=ne)),j._initialAutoSize||(j._initialAutoSize={width:ie,height:ne}),p.sanitizeMargins(q)},p.supplyLayoutModuleDefaults=function(V,j,ee,q){var X=t.componentsRegistry,J=j._basePlotModules,ie,ne,oe,se=t.subplotsRegistry.cartesian;for(ie in X)oe=X[ie],oe.includeBasePlot&&oe.includeBasePlot(V,j);J.length||J.push(se),j._has("cartesian")&&(t.getComponentMethod("grid","contentDefaults")(V,j),se.finalizeSubplots(V,j));for(var me in j._subplots)j._subplots[me].sort(n.subplotSort);for(ne=0;ne<J.length;ne++)oe=J[ne],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(V,j,ee);var ce=j._modules;for(ne=0;ne<ce.length;ne++)oe=ce[ne],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(V,j,ee);var pe=j._transformModules;for(ne=0;ne<pe.length;ne++)oe=pe[ne],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(V,j,ee,q);for(ie in X)oe=X[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(V,j,ee)},p.purge=function(V){var j=V._fullLayout||{};j._glcontainer!==void 0&&(j._glcontainer.selectAll(".gl-canvas").remove(),j._glcontainer.remove(),j._glcanvas=null),j._modeBar&&j._modeBar.destroy(),V._transitionData&&(V._transitionData._interruptCallbacks&&(V._transitionData._interruptCallbacks.length=0),V._transitionData._animationRaf&&window.cancelAnimationFrame(V._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive(V),delete V.data,delete V.layout,delete V._fullData,delete V._fullLayout,delete V.calcdata,delete V.empty,delete V.fid,delete V.undoqueue,delete V.undonum,delete V.autoplay,delete V.changed,delete V._promises,delete V._redrawTimer,delete V._hmlumcount,delete V._hmpixcount,delete V._transitionData,delete V._transitioning,delete V._initialAutoSize,delete V._transitioningWithDuration,delete V._dragging,delete V._dragged,delete V._dragdata,delete V._hoverdata,delete V._snapshotInProgress,delete V._editing,delete V._mouseDownTime,delete V._legendMouseDownTime,V.removeAllListeners&&V.removeAllListeners()},p.style=function(V){var j=V._fullLayout._visibleModules,ee=[],q;for(q=0;q<j.length;q++){var X=j[q];X.style&&n.pushUnique(ee,X.style)}for(q=0;q<ee.length;q++)ee[q](V)},p.sanitizeMargins=function(V){if(!(!V||!V.margin)){var j=V.width,ee=V.height,q=V.margin,X=j-(q.l+q.r),J=ee-(q.t+q.b),ie;X<0&&(ie=(j-1)/(q.l+q.r),q.l=Math.floor(ie*q.l),q.r=Math.floor(ie*q.r)),J<0&&(ie=(ee-1)/(q.t+q.b),q.t=Math.floor(ie*q.t),q.b=Math.floor(ie*q.b))}},p.clearAutoMarginIds=function(V){V._fullLayout._pushmarginIds={}},p.allowAutoMargin=function(V,j){V._fullLayout._pushmarginIds[j]=1};function D(V){var j=V.margin;if(!V._size){var ee=V._size={l:Math.round(j.l),r:Math.round(j.r),t:Math.round(j.t),b:Math.round(j.b),p:Math.round(j.pad)};ee.w=Math.round(V.width)-ee.l-ee.r,ee.h=Math.round(V.height)-ee.t-ee.b}V._pushmargin||(V._pushmargin={}),V._pushmarginIds||(V._pushmarginIds={})}var H=2,B=2,$=64,W=64;p.autoMargin=function(V,j,ee){var q=V._fullLayout,X=q.width,J=q.height,ie=q.margin,ne=n.constrain(X-ie.l-ie.r,H,$),oe=n.constrain(J-ie.t-ie.b,B,W),se=Math.max(0,X-ne),me=Math.max(0,J-oe),ce=q._pushmargin,pe=q._pushmarginIds;if(ie.autoexpand!==!1){if(!ee)delete ce[j],delete pe[j];else{var xe=ee.pad;if(xe===void 0&&(xe=Math.min(12,ie.l,ie.r,ie.t,ie.b)),se){var Se=(ee.l+ee.r)/se;Se>1&&(ee.l/=Se,ee.r/=Se)}if(me){var Ae=(ee.t+ee.b)/me;Ae>1&&(ee.t/=Ae,ee.b/=Ae)}var Ce=ee.xl!==void 0?ee.xl:ee.x,Ee=ee.xr!==void 0?ee.xr:ee.x,Oe=ee.yt!==void 0?ee.yt:ee.y,_e=ee.yb!==void 0?ee.yb:ee.y;ce[j]={l:{val:Ce,size:ee.l+xe},r:{val:Ee,size:ee.r+xe},b:{val:_e,size:ee.b+xe},t:{val:Oe,size:ee.t+xe}},pe[j]=1}if(!q._replotting)return p.doAutoMargin(V)}},p.doAutoMargin=function(V){var j=V._fullLayout,ee=j.width,q=j.height;j._size||(j._size={}),D(j);var X=j._size,J=j.margin,ie=n.extendFlat({},X),ne=J.l,oe=J.r,se=J.t,me=J.b,ce=j._pushmargin,pe=j._pushmarginIds;if(j.margin.autoexpand!==!1){for(var xe in ce)pe[xe]||delete ce[xe];ce.base={l:{val:0,size:ne},r:{val:1,size:oe},t:{val:1,size:se},b:{val:0,size:me}};for(var Se in ce){var Ae=ce[Se].l||{},Ce=ce[Se].b||{},Ee=Ae.val,Oe=Ae.size,_e=Ce.val,Re=Ce.size;for(var Ve in ce){if(y(Oe)&&ce[Ve].r){var Je=ce[Ve].r.val,ze=ce[Ve].r.size;if(Je>Ee){var De=(Oe*Je+(ze-ee)*Ee)/(Je-Ee),je=(ze*(1-Ee)+(Oe-ee)*(1-Je))/(Je-Ee);De+je>ne+oe&&(ne=De,oe=je)}}if(y(Re)&&ce[Ve].t){var dt=ce[Ve].t.val,Et=ce[Ve].t.size;if(dt>_e){var $t=(Re*dt+(Et-q)*_e)/(dt-_e),wt=(Et*(1-_e)+(Re-q)*(1-dt))/(dt-_e);$t+wt>me+se&&(me=$t,se=wt)}}}}}var Ot=n.constrain(ee-J.l-J.r,H,$),Vt=n.constrain(q-J.t-J.b,B,W),kt=Math.max(0,ee-Ot),St=Math.max(0,q-Vt);if(kt){var ot=(ne+oe)/kt;ot>1&&(ne/=ot,oe/=ot)}if(St){var ht=(me+se)/St;ht>1&&(me/=ht,se/=ht)}if(X.l=Math.round(ne),X.r=Math.round(oe),X.t=Math.round(se),X.b=Math.round(me),X.p=Math.round(J.pad),X.w=Math.round(ee)-X.l-X.r,X.h=Math.round(q)-X.t-X.b,!j._replotting&&p.didMarginChange(ie,X)){"_redrawFromAutoMarginCount"in j?j._redrawFromAutoMarginCount++:j._redrawFromAutoMarginCount=1;var Ke=3*(1+Object.keys(pe).length);if(j._redrawFromAutoMarginCount<Ke)return t.call("_doPlot",V);j._size=ie,n.warn("Too many auto-margin redraws.")}re(V)};function re(V){var j=u.list(V,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ee){for(var q=0;q<j.length;q++){var X=j[q][ee];X&&X()}})}var Q=["l","r","t","b","p","w","h"];p.didMarginChange=function(V,j){for(var ee=0;ee<Q.length;ee++){var q=Q[ee],X=V[q],J=j[q];if(!y(X)||Math.abs(J-X)>1)return!0}return!1},p.graphJson=function(V,j,ee,q,X,J){(X&&j&&!V._fullData||X&&!j&&!V._fullLayout)&&p.supplyDefaults(V);var ie=X?V._fullData:V.data,ne=X?V._fullLayout:V.layout,oe=(V._transitionData||{})._frames;function se(pe,xe){if(typeof pe=="function")return xe?"_function_":null;if(n.isPlainObject(pe)){var Se={},Ae;return Object.keys(pe).sort().forEach(function(Ce){if(["_","["].indexOf(Ce.charAt(0))===-1){if(typeof pe[Ce]=="function"){xe&&(Se[Ce]="_function");return}if(ee==="keepdata"){if(Ce.substr(Ce.length-3)==="src")return}else if(ee==="keepstream"){if(Ae=pe[Ce+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0&&!n.isPlainObject(pe.stream))return}else if(ee!=="keepall"&&(Ae=pe[Ce+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0))return;Se[Ce]=se(pe[Ce],xe)}}),Se}return Array.isArray(pe)?pe.map(function(Ce){return se(Ce,xe)}):n.isTypedArray(pe)?n.simpleMap(pe,n.identity):n.isJSDate(pe)?n.ms2DateTimeLocal(+pe):pe}var me={data:(ie||[]).map(function(pe){var xe=se(pe);return j&&delete xe.fit,xe})};if(!j&&(me.layout=se(ne),X)){var ce=ne._size;me.layout.computed={margin:{b:ce.b,l:ce.l,r:ce.r,t:ce.t}}}return oe&&(me.frames=se(oe)),J&&(me.config=se(V._context,!0)),q==="object"?me:JSON.stringify(me)},p.modifyFrames=function(V,j){var ee,q,X,J=V._transitionData._frames,ie=V._transitionData._frameHash;for(ee=0;ee<j.length;ee++)switch(q=j[ee],q.type){case"replace":X=q.value;var ne=(J[q.index]||{}).name,oe=X.name;J[q.index]=ie[oe]=X,oe!==ne&&(delete ie[ne],ie[oe]=X);break;case"insert":X=q.value,ie[X.name]=X,J.splice(q.index,0,X);break;case"delete":X=J[q.index],delete ie[X.name],J.splice(q.index,1);break}return Promise.resolve()},p.computeFrame=function(V,j){var ee=V._transitionData._frameHash,q,X,J,ie;if(!j)throw new Error("computeFrame must be given a string frame name");var ne=ee[j.toString()];if(!ne)return!1;for(var oe=[ne],se=[ne.name];ne.baseframe&&(ne=ee[ne.baseframe.toString()])&&se.indexOf(ne.name)===-1;)oe.push(ne),se.push(ne.name);for(var me={};ne=oe.pop();)if(ne.layout&&(me.layout=p.extendLayout(me.layout,ne.layout)),ne.data){if(me.data||(me.data=[]),X=ne.traces,!X)for(X=[],q=0;q<ne.data.length;q++)X[q]=q;for(me.traces||(me.traces=[]),q=0;q<ne.data.length;q++)J=X[q],J!=null&&(ie=me.traces.indexOf(J),ie===-1&&(ie=me.data.length,me.traces[ie]=J),me.data[ie]=p.extendTrace(me.data[ie],ne.data[q]))}return me},p.recomputeFrameHash=function(V){for(var j=V._transitionData._frameHash={},ee=V._transitionData._frames,q=0;q<ee.length;q++){var X=ee[q];X&&X.name&&(j[X.name]=X)}},p.extendObjectWithContainers=function(V,j,ee){var q,X,J,ie,ne,oe,se,me,ce=n.extendDeepNoArrays({},j||{}),pe=n.expandObjectPaths(ce),xe={};if(ee&&ee.length)for(J=0;J<ee.length;J++)q=n.nestedProperty(pe,ee[J]),X=q.get(),X===void 0?n.nestedProperty(xe,ee[J]).set(null):(q.set(null),n.nestedProperty(xe,ee[J]).set(X));if(V=n.extendDeepNoArrays(V||{},pe),ee&&ee.length){for(J=0;J<ee.length;J++)if(ne=n.nestedProperty(xe,ee[J]),se=ne.get(),!!se){for(oe=n.nestedProperty(V,ee[J]),me=oe.get(),Array.isArray(me)||(me=[],oe.set(me)),ie=0;ie<se.length;ie++){var Se=se[ie];Se===null?me[ie]=null:me[ie]=p.extendObjectWithContainers(me[ie],Se)}oe.set(me)}}return V},p.dataArrayContainers=["transforms","dimensions"],p.layoutArrayContainers=t.layoutArrayContainers,p.extendTrace=function(V,j){return p.extendObjectWithContainers(V,j,p.dataArrayContainers)},p.extendLayout=function(V,j){return p.extendObjectWithContainers(V,j,p.layoutArrayContainers)},p.transition=function(V,j,ee,q,X,J){var ie={redraw:X.redraw},ne={},oe=[];return ie.prepareFn=function(){for(var se=Array.isArray(j)?j.length:0,me=q.slice(0,se),ce=0;ce<me.length;ce++){var pe=me[ce],xe=V._fullData[pe],Se=xe._module;if(!!Se){if(Se.animatable){var Ae=Se.basePlotModule.name;ne[Ae]||(ne[Ae]=[]),ne[Ae].push(pe)}V.data[me[ce]]=p.extendTrace(V.data[me[ce]],j[ce])}}var Ce=n.expandObjectPaths(n.extendDeepNoArrays({},ee)),Ee=/^[xy]axis[0-9]*$/;for(var Oe in Ce)!Ee.test(Oe)||delete Ce[Oe].range;p.extendLayout(V.layout,Ce),delete V.calcdata,p.supplyDefaults(V),p.doCalcdata(V);var _e=n.expandObjectPaths(ee);if(_e){var Re=V._fullLayout._plots;for(var Ve in Re){var Je=Re[Ve],ze=Je.xaxis,De=Je.yaxis,je=ze.range.slice(),dt=De.range.slice(),Et=null,$t=null,wt=null,Ot=null;Array.isArray(_e[ze._name+".range"])?Et=_e[ze._name+".range"].slice():Array.isArray((_e[ze._name]||{}).range)&&(Et=_e[ze._name].range.slice()),Array.isArray(_e[De._name+".range"])?$t=_e[De._name+".range"].slice():Array.isArray((_e[De._name]||{}).range)&&($t=_e[De._name].range.slice()),je&&Et&&(ze.r2l(je[0])!==ze.r2l(Et[0])||ze.r2l(je[1])!==ze.r2l(Et[1]))&&(wt={xr0:je,xr1:Et}),dt&&$t&&(De.r2l(dt[0])!==De.r2l($t[0])||De.r2l(dt[1])!==De.r2l($t[1]))&&(Ot={yr0:dt,yr1:$t}),(wt||Ot)&&oe.push(n.extendFlat({plotinfo:Je},wt,Ot))}}return Promise.resolve()},ie.runFn=function(se){var me,ce=V._fullLayout._basePlotModules,pe=oe.length,xe;if(ee)for(xe=0;xe<ce.length;xe++)ce[xe].transitionAxes&&ce[xe].transitionAxes(V,oe,J,se);pe?(me=n.extendFlat({},J),me.duration=0,delete ne.cartesian):me=J;for(var Se in ne){var Ae=ne[Se],Ce=V._fullData[Ae[0]]._module;Ce.basePlotModule.plot(V,Ae,me,se)}},Z(V,J,ie)},p.transitionFromReact=function(V,j,ee,q){var X=V._fullLayout,J=X.transition,ie={},ne=[];return ie.prepareFn=function(){var oe=X._plots;ie.redraw=!1,j.anim==="some"&&(ie.redraw=!0),ee.anim==="some"&&(ie.redraw=!0);for(var se in oe){var me=oe[se],ce=me.xaxis,pe=me.yaxis,xe=q[ce._name].range.slice(),Se=q[pe._name].range.slice(),Ae=ce.range.slice(),Ce=pe.range.slice();ce.setScale(),pe.setScale();var Ee=null,Oe=null;(ce.r2l(xe[0])!==ce.r2l(Ae[0])||ce.r2l(xe[1])!==ce.r2l(Ae[1]))&&(Ee={xr0:xe,xr1:Ae}),(pe.r2l(Se[0])!==pe.r2l(Ce[0])||pe.r2l(Se[1])!==pe.r2l(Ce[1]))&&(Oe={yr0:Se,yr1:Ce}),(Ee||Oe)&&ne.push(n.extendFlat({plotinfo:me},Ee,Oe))}return Promise.resolve()},ie.runFn=function(oe){for(var se=V._fullData,me=V._fullLayout,ce=me._basePlotModules,pe,xe,Se,Ae=[],Ce=0;Ce<se.length;Ce++)Ae.push(Ce);function Ee(){if(!!V._fullLayout)for(var _e=0;_e<ce.length;_e++)ce[_e].transitionAxes&&ce[_e].transitionAxes(V,ne,pe,oe)}function Oe(){if(!!V._fullLayout)for(var _e=0;_e<ce.length;_e++)ce[_e].plot(V,Se,xe,oe)}ne.length&&j.anim?J.ordering==="traces first"?(pe=n.extendFlat({},J,{duration:0}),Se=Ae,xe=J,setTimeout(Ee,J.duration),Oe()):(pe=J,Se=null,xe=n.extendFlat({},J,{duration:0}),setTimeout(Oe,pe.duration),Ee()):ne.length?(pe=J,Ee()):j.anim&&(Se=Ae,xe=J,Oe())},Z(V,J,ie)};function Z(V,j,ee){var q=!1;function X(ce){var pe=Promise.resolve();if(!ce)return pe;for(;ce.length;)pe=pe.then(ce.shift());return pe}function J(ce){if(!!ce)for(;ce.length;)ce.shift()}function ie(){return V.emit("plotly_transitioning",[]),new Promise(function(ce){V._transitioning=!0,j.duration>0&&(V._transitioningWithDuration=!0),V._transitionData._interruptCallbacks.push(function(){q=!0}),ee.redraw&&V._transitionData._interruptCallbacks.push(function(){return t.call("redraw",V)}),V._transitionData._interruptCallbacks.push(function(){V.emit("plotly_transitioninterrupted",[])});var pe=0,xe=0;function Se(){return pe++,function(){xe++,!q&&xe===pe&&ne(ce)}}ee.runFn(Se),setTimeout(Se())})}function ne(ce){if(!!V._transitionData)return J(V._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ee.redraw)return t.call("redraw",V)}).then(function(){V._transitioning=!1,V._transitioningWithDuration=!1,V.emit("plotly_transitioned",[])}).then(ce)}function oe(){if(!!V._transitionData)return V._transitioning=!1,X(V._transitionData._interruptCallbacks)}var se=[p.previousPromises,oe,ee.prepareFn,p.rehover,ie],me=n.syncOrAsync(se,V);return(!me||!me.then)&&(me=Promise.resolve()),me.then(function(){return V})}p.doCalcdata=function(V,j){var ee=u.list(V),q=V._fullData,X=V._fullLayout,J,ie,ne,oe,se=new Array(q.length),me=(V.calcdata||[]).slice();for(V.calcdata=se,X._numBoxes=0,X._numViolins=0,X._violinScaleGroupStats={},V._hmpixcount=0,V._hmlumcount=0,X._piecolormap={},X._sunburstcolormap={},X._treemapcolormap={},X._iciclecolormap={},X._funnelareacolormap={},ne=0;ne<q.length;ne++)if(Array.isArray(j)&&j.indexOf(ne)===-1){se[ne]=me[ne];continue}for(ne=0;ne<q.length;ne++)J=q[ne],J._arrayAttrs=a.findArrayAttributes(J),J._extremes={};var ce=X._subplots.polar||[];for(ne=0;ne<ce.length;ne++)ee.push(X[ce[ne]].radialaxis,X[ce[ne]].angularaxis);for(var pe in X._colorAxes){var xe=X[pe];xe.cauto!==!1&&(delete xe.cmin,delete xe.cmax)}var Se=!1;function Ae(Oe){if(J=q[Oe],ie=J._module,J.visible===!0&&J.transforms){if(ie&&ie.calc){var _e=ie.calc(V,J);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(oe=0;oe<J.transforms.length;oe++){var Re=J.transforms[oe];ie=A[Re.type],ie&&ie.calcTransform&&(J._hasCalcTransform=!0,Se=!0,ie.calcTransform(V,J,Re))}}}function Ce(Oe,_e){if(J=q[Oe],ie=J._module,!!ie.isContainer===_e){var Re=[];if(J.visible===!0&&J._length!==0){delete J._indexToPoints;var Ve=J.transforms||[];for(oe=Ve.length-1;oe>=0;oe--)if(Ve[oe].enabled){J._indexToPoints=Ve[oe]._indexToPoints;break}ie&&ie.calc&&(Re=ie.calc(V,J))}(!Array.isArray(Re)||!Re[0])&&(Re=[{x:f,y:f}]),Re[0].t||(Re[0].t={}),Re[0].trace=J,se[Oe]=Re}}for(fe(ee,q,X),ne=0;ne<q.length;ne++)Ce(ne,!0);for(ne=0;ne<q.length;ne++)Ae(ne);for(Se&&fe(ee,q,X),ne=0;ne<q.length;ne++)Ce(ne,!0);for(ne=0;ne<q.length;ne++)Ce(ne,!1);ue(V);var Ee=le(ee,V);if(Ee.length){for(X._numBoxes=0,X._numViolins=0,ne=0;ne<Ee.length;ne++)Ce(Ee[ne],!0);for(ne=0;ne<Ee.length;ne++)Ce(Ee[ne],!1);ue(V)}t.getComponentMethod("fx","calc")(V),t.getComponentMethod("errorbars","calc")(V)};var K=/(total|sum|min|max|mean|median) (ascending|descending)/;function le(V,j){var ee=[],q,X,J,ie,ne;function oe(kt,St,ot){var ht=St._id.charAt(0);if(kt==="histogram2dcontour"){var Ke=St._counterAxes[0],Pe=u.getFromId(j,Ke),We=ht==="x"||Ke==="x"&&Pe.type==="category",Qe=ht==="y"||Ke==="y"&&Pe.type==="category";return function(ut,It){return ut===0||It===0||We&&ut===ot[It].length-1||Qe&&It===ot.length-1?-1:(ht==="y"?It:ut)-1}}else return function(ut,It){return ht==="y"?It:ut}}var se={min:function(kt){return n.aggNums(Math.min,null,kt)},max:function(kt){return n.aggNums(Math.max,null,kt)},sum:function(kt){return n.aggNums(function(St,ot){return St+ot},null,kt)},total:function(kt){return n.aggNums(function(St,ot){return St+ot},null,kt)},mean:function(kt){return n.mean(kt)},median:function(kt){return n.median(kt)}};for(q=0;q<V.length;q++){var me=V[q];if(me.type==="category"){var ce=me.categoryorder.match(K);if(ce){var pe=ce[1],xe=ce[2],Se=me._id.charAt(0),Ae=Se==="x",Ce=[];for(X=0;X<me._categories.length;X++)Ce.push([me._categories[X],[]]);for(X=0;X<me._traceIndices.length;X++){var Ee=me._traceIndices[X],Oe=j._fullData[Ee];if(Oe.visible===!0){var _e=Oe.type;t.traceIs(Oe,"histogram")&&(delete Oe._xautoBinFinished,delete Oe._yautoBinFinished);var Re=_e==="splom",Ve=_e==="scattergl",Je=j.calcdata[Ee];for(J=0;J<Je.length;J++){var ze=Je[J],De,je;if(Re){var dt=Oe._axesDim[me._id];if(!Ae){var Et=Oe._diag[dt][0];Et&&(me=j._fullLayout[u.id2name(Et)])}var $t=ze.trace.dimensions[dt].values;for(ie=0;ie<$t.length;ie++)for(De=me._categoriesMap[$t[ie]],ne=0;ne<ze.trace.dimensions.length;ne++)if(ne!==dt){var wt=ze.trace.dimensions[ne];Ce[De][1].push(wt.values[ie])}}else if(Ve){for(ie=0;ie<ze.t.x.length;ie++)Ae?(De=ze.t.x[ie],je=ze.t.y[ie]):(De=ze.t.y[ie],je=ze.t.x[ie]),Ce[De][1].push(je);ze.t&&ze.t._scene&&delete ze.t._scene.dirty}else if(ze.hasOwnProperty("z")){je=ze.z;var Ot=oe(Oe.type,me,je);for(ie=0;ie<je.length;ie++)for(ne=0;ne<je[ie].length;ne++)De=Ot(ne,ie),De+1&&Ce[De][1].push(je[ie][ne])}else for(De=ze.p,De===void 0&&(De=ze[Se]),je=ze.s,je===void 0&&(je=ze.v),je===void 0&&(je=Ae?ze.y:ze.x),Array.isArray(je)||(je===void 0?je=[]:je=[je]),ie=0;ie<je.length;ie++)Ce[De][1].push(je[ie])}}}me._categoriesValue=Ce;var Vt=[];for(X=0;X<Ce.length;X++)Vt.push([Ce[X][0],se[pe](Ce[X][1])]);Vt.sort(function(kt,St){return kt[1]-St[1]}),me._categoriesAggregatedValue=Vt,me._initialCategories=Vt.map(function(kt){return kt[0]}),xe==="descending"&&me._initialCategories.reverse(),ee=ee.concat(me.sortByInitialCategories())}}}return ee}function fe(V,j,ee){var q={};function X(oe){oe.clearCalc(),oe.type==="multicategory"&&oe.setupMultiCategory(j),q[oe._id]=1}n.simpleMap(V,X);for(var J=ee._axisMatchGroups||[],ie=0;ie<J.length;ie++)for(var ne in J[ie])q[ne]||X(ee[u.id2name(ne)])}function ue(V){var j=V._fullLayout,ee=j._visibleModules,q={},X,J,ie;for(J=0;J<ee.length;J++){var ne=ee[J],oe=ne.crossTraceCalc;if(oe){var se=ne.basePlotModule.name;q[se]?n.pushUnique(q[se],oe):q[se]=[oe]}}for(ie in q){var me=q[ie],ce=j._subplots[ie];if(Array.isArray(ce))for(X=0;X<ce.length;X++){var pe=ce[X],xe=ie==="cartesian"?j._plots[pe]:j[pe];for(J=0;J<me.length;J++)me[J](V,xe,pe)}else for(J=0;J<me.length;J++)me[J](V)}}p.rehover=function(V){V._fullLayout._rehover&&V._fullLayout._rehover()},p.redrag=function(V){V._fullLayout._redrag&&V._fullLayout._redrag()},p.generalUpdatePerTraceModule=function(V,j,ee,q){var X=j.traceHash,J={},ie;for(ie=0;ie<ee.length;ie++){var ne=ee[ie],oe=ne[0].trace;oe.visible&&(J[oe.type]=J[oe.type]||[],J[oe.type].push(ne))}for(var se in X)if(!J[se]){var me=X[se][0],ce=me[0].trace;ce.visible=!1,J[se]=[me]}for(var pe in J){var xe=J[pe],Se=xe[0][0].trace._module;Se.plot(V,j,n.filterVisible(xe),q)}j.traceHash=J},p.plotBasePlot=function(V,j,ee,q,X){var J=t.getModule(V),ie=b(j.calcdata,J)[0];J.plot(j,ie,q,X)},p.cleanBasePlot=function(V,j,ee,q,X){var J=X._has&&X._has(V),ie=ee._has&&ee._has(V);J&&!ie&&X["_"+V+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(e,I,F){I.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(e,I,F){var s=e("../../lib"),o=e("../../lib/polygon").tester,h=s.findIndexOfMin,y=s.isAngleInsideSector,t=s.angleDelta,a=s.angleDist;function i(A,c,S,T,x){if(!y(c,T))return!1;var w,v;S[0]<S[1]?(w=S[0],v=S[1]):(w=S[1],v=S[0]);var C=o(l(w,T[0],T[1],x)),M=o(l(v,T[0],T[1],x)),E=[A*Math.cos(c),A*Math.sin(c)];return M.contains(E)&&!C.contains(E)}function n(A,c,S,T){var x,w,v=T[0],C=T[1],M=b(Math.sin(c)-Math.sin(A)),E=b(Math.cos(c)-Math.cos(A)),L=Math.tan(S),z=b(1/L),O=M/E,R=C-O*v;return z?M&&E?(x=R/(L-O),w=L*x):E?(x=C*z,w=C):(x=v,w=v*L):M&&E?(x=0,w=R):E?(x=0,w=C):x=w=NaN,[x,w]}function r(A,c,S,T){var x=-c*S,w=c*c+1,v=2*(c*x-S),C=x*x+S*S-A*A,M=Math.sqrt(v*v-4*w*C),E=(-v+M)/(2*w),L=(-v-M)/(2*w);return[[E,c*E+x+T],[L,c*L+x+T]]}function f(A,c){var S=c.length,T=new Array(S+1),x;for(x=0;x<S;x++){var w=c[x];T[x]=[A*Math.cos(w),A*Math.sin(w)]}return T[x]=T[0].slice(),T}function u(A,c,S,T){var x=T.length,w=[],v,C;function M($){return[A*Math.cos($),A*Math.sin($)]}function E($,W,re){return n($,W,re,M($))}function L($){return s.mod($,x)}function z($){return y($,[c,S])}var O=h(T,function($){return z($)?a($,c):1/0}),R=E(T[O],T[L(O-1)],c);for(w.push(R),v=O,C=0;C<x;v++,C++){var D=T[L(v)];if(!z(D))break;w.push(M(D))}var H=h(T,function($){return z($)?a($,S):1/0}),B=E(T[H],T[L(H+1)],S);return w.push(B),w.push([0,0]),w.push(w[0].slice()),w}function l(A,c,S,T){return s.isFullCircle([c,S])?f(A,T):u(A,c,S,T)}function m(A,c,S,T){for(var x=1/0,w=1/0,v=l(A,c,S,T),C=0;C<v.length;C++){var M=v[C];x=Math.min(x,M[0]),w=Math.min(w,-M[1])}return[x,w]}function d(A,c){var S=function(w){var v=t(w,A);return v>0?v:1/0},T=h(c,S),x=s.mod(T+1,c.length);return[c[T],c[x]]}function b(A){return Math.abs(A)>1e-10?A:0}function g(A,c,S){c=c||0,S=S||0;for(var T=A.length,x=new Array(T),w=0;w<T;w++){var v=A[w];x[w]=[c+v[0],S-v[1]]}return x}function _(A,c,S,T,x,w){var v=l(A,c,S,T);return"M"+g(v,x,w).join("L")}function p(A,c,S,T,x,w,v){var C,M;A<c?(C=A,M=c):(C=c,M=A);var E=g(l(C,S,T,x),w,v),L=g(l(M,S,T,x),w,v);return"M"+L.reverse().join("L")+"M"+E.join("L")}I.exports={isPtInsidePolygon:i,findPolygonOffset:m,findEnclosingVertexAngles:d,findIntersectionXY:n,findXYatLength:r,clampTiny:b,pathPolygon:_,pathPolygonAnnulus:p}},{"../../lib":503,"../../lib/polygon":515}],622:[function(e,I,F){var s=e("../get_data").getSubplotCalcData,o=e("../../lib").counterRegex,h=e("./polar"),y=e("./constants"),t=y.attr,a=y.name,i=o(a),n={};n[t]={valType:"subplotid",dflt:a,editType:"calc"};function r(u){for(var l=u._fullLayout,m=u.calcdata,d=l._subplots[a],b=0;b<d.length;b++){var g=d[b],_=s(m,a,g),p=l[g]._subplot;p||(p=h(u,g),l[g]._subplot=p),p.plot(_,l,u._promises)}}function f(u,l,m,d){for(var b=d._subplots[a]||[],g=d._has&&d._has("gl"),_=l._has&&l._has("gl"),p=g&&!_,A=0;A<b.length;A++){var c=b[A],S=d[c]._subplot;if(!l[c]&&!!S){S.framework.remove(),S.layers["radial-axis-title"].remove();for(var T in S.clipPaths)S.clipPaths[T].remove()}p&&S._scene&&(S._scene.destroy(),S._scene=null)}}I.exports={attr:t,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:r,clean:f,toSVG:e("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(e,I,F){var s=e("../../components/color/attributes"),o=e("../cartesian/layout_attributes"),h=e("../domain").attributes,y=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,a=t({color:o.color,showline:y({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:y({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth},"plot","from-root"),i=t({tickmode:o.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,layer:o.layer},"plot","from-root"),n={visible:y({},o.visible,{dflt:!0}),type:y({},o.type,{values:["-","linear","log","date","category"]}),autotypenumbers:o.autotypenumbers,autorange:y({},o.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:y({},o.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:o.categoryorder,categoryarray:o.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:y({},o.title.text,{editType:"plot",dflt:""}),font:y({},o.title.font,{editType:"plot"}),editType:"plot"},hoverformat:o.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}};y(n,a,i);var r={visible:y({},o.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:o.autotypenumbers,categoryorder:o.categoryorder,categoryarray:o.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:o.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};y(r,a,i),I.exports={domain:h({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:s.background},radialaxis:n,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color"),h=e("../../plot_api/plot_template"),y=e("../subplot_defaults"),t=e("../get_data").getSubplotData,a=e("../cartesian/tick_value_defaults"),i=e("../cartesian/tick_mark_defaults"),n=e("../cartesian/tick_label_defaults"),r=e("../cartesian/prefix_suffix_defaults"),f=e("../cartesian/category_order_defaults"),u=e("../cartesian/line_grid_defaults"),l=e("../cartesian/axis_autotype"),m=e("./layout_attributes"),d=e("./set_convert"),b=e("./constants"),g=b.axisNames;function _(A,c,S,T){var x=S("bgcolor");T.bgColor=o.combine(x,T.paper_bgcolor);var w=S("sector");S("hole");var v=t(T.fullData,b.name,T.id),C=T.layoutOut,M;function E(fe,ue){return S(M+"."+fe,ue)}for(var L=0;L<g.length;L++){M=g[L],s.isPlainObject(A[M])||(A[M]={});var z=A[M],O=h.newContainer(c,M);O._id=O._name=M,O._attr=T.id+"."+M,O._traceIndices=v.map(function(fe){return fe._expandedIndex});var R=b.axisName2dataArray[M],D=p(z,O,E,v,R,T);f(z,O,E,{axData:v,dataAttr:R});var H=E("visible");switch(d(O,c,C),E("uirevision",c.uirevision),O._m=1,M){case"radialaxis":var B=E("autorange",!O.isValidRange(z.range));z.autorange=B,B&&(D==="linear"||D==="-")&&E("rangemode"),B==="reversed"&&(O._m=-1),E("range"),O.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(D==="date"){s.log("Polar plots do not support date angular axes yet.");for(var $=0;$<v.length;$++)v[$].visible=!1;D=z.type=O.type="linear"}E(D==="linear"?"thetaunit":"period");var W=E("direction");E("rotation",{counterclockwise:0,clockwise:90}[W]);break}if(r(z,O,E,O.type,{tickSuffixDflt:O.thetaunit==="degrees"?"\xB0":void 0}),H){var re,Q,Z,K,le=T.font||{};re=E("color"),Q=re===z.color?re:le.color,Z=le.size,K=le.family,a(z,O,E,O.type),n(z,O,E,O.type,{font:{color:Q,size:Z,family:K}}),i(z,O,E,{outerTicks:!0}),u(z,O,E,{dfltColor:re,bgColor:T.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:m[M]}),E("layer"),M==="radialaxis"&&(E("side"),E("angle",w[0]),E("title.text"),s.coerceFont(E,"title.font",{color:Q,size:s.bigFont(Z),family:K}))}D!=="category"&&E("hoverformat"),O._input=z}c.angularaxis.type==="category"&&S("gridshape")}function p(A,c,S,T,x,w){var v=S("autotypenumbers",w.autotypenumbersDflt),C=S("type");if(C==="-"){for(var M,E=0;E<T.length;E++)if(T[E].visible){M=T[E];break}M&&M[x]&&(c.type=l(M[x],"gregorian",{noMultiCategory:!0,autotypenumbers:v})),c.type==="-"?c.type="linear":A.type=c.type}return c.type}I.exports=function(c,S,T){y(c,S,T,{type:b.name,attributes:m,handleDefaults:_,font:S.font,autotypenumbersDflt:S.autotypenumbers,paper_bgcolor:S.paper_bgcolor,fullData:T,layoutOut:S})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(e,I,F){var s=e("@plotly/d3"),o=e("tinycolor2"),h=e("../../registry"),y=e("../../lib"),t=y.strRotate,a=y.strTranslate,i=e("../../components/color"),n=e("../../components/drawing"),r=e("../plots"),f=e("../../plots/cartesian/axes"),u=e("../cartesian/set_convert"),l=e("./set_convert"),m=e("../cartesian/autorange").doAutoRange,d=e("../cartesian/dragbox"),b=e("../../components/dragelement"),g=e("../../components/fx"),_=e("../../components/titles"),p=e("../cartesian/select").prepSelect,A=e("../cartesian/select").selectOnClick,c=e("../cartesian/select").clearSelect,S=e("../../lib/setcursor"),T=e("../../lib/clear_gl_canvases"),x=e("../../plot_api/subroutines").redrawReglTraces,w=e("../../constants/alignment").MID_SHIFT,v=e("./constants"),C=e("./helpers"),M=e("../smith/helpers"),E=M.smith,L=M.reactanceArc,z=M.resistanceArc,O=M.smithTransform,R=y._,D=y.mod,H=y.deg2rad,B=y.rad2deg;function $(le,fe,ue){this.isSmith=ue||!1,this.id=fe,this.gd=le,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var V=le._fullLayout,j="clip"+V._uid+fe;this.clipIds.forTraces=j+"-for-traces",this.clipPaths.forTraces=V._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=V["_"+(ue?"smith":"polar")+"layer"].append("g").attr("class",fe),this.getHole=function(ee){return this.isSmith?0:ee.hole},this.getSector=function(ee){return this.isSmith?[0,360]:ee.sector},this.getRadial=function(ee){return this.isSmith?ee.realaxis:ee.radialaxis},this.getAngular=function(ee){return this.isSmith?ee.imaginaryaxis:ee.angularaxis},ue||(this.radialTickLayout=null,this.angularTickLayout=null)}var W=$.prototype;I.exports=function(fe,ue,V){return new $(fe,ue,V)},W.plot=function(le,fe){for(var ue=this,V=fe[ue.id],j=!1,ee=0;ee<le.length;ee++){var q=le[ee][0].trace;if(q.cliponaxis===!1){j=!0;break}}ue._hasClipOnAxisFalse=j,ue.updateLayers(fe,V),ue.updateLayout(fe,V),r.generalUpdatePerTraceModule(ue.gd,ue,le,V),ue.updateFx(fe,V),ue.isSmith&&(delete V.realaxis.range,delete V.imaginaryaxis.range)},W.updateLayers=function(le,fe){var ue=this,V=ue.isSmith,j=ue.layers,ee=ue.getRadial(fe),q=ue.getAngular(fe),X=v.layerNames,J=X.indexOf("frontplot"),ie=X.slice(0,J),ne=q.layer==="below traces",oe=ee.layer==="below traces";ne&&ie.push("angular-line"),oe&&ie.push("radial-line"),ne&&ie.push("angular-axis"),oe&&ie.push("radial-axis"),ie.push("frontplot"),ne||ie.push("angular-line"),oe||ie.push("radial-line"),ne||ie.push("angular-axis"),oe||ie.push("radial-axis");var se=(V?"smith":"polar")+"sublayer",me=ue.framework.selectAll("."+se).data(ie,String);me.enter().append("g").attr("class",function(ce){return se+" "+ce}).each(function(ce){var pe=j[ce]=s.select(this);switch(ce){case"frontplot":V||pe.append("g").classed("barlayer",!0),pe.append("g").classed("scatterlayer",!0);break;case"backplot":pe.append("g").classed("maplayer",!0);break;case"plotbg":j.bg=pe.append("path");break;case"radial-grid":pe.style("fill","none");break;case"angular-grid":pe.style("fill","none");break;case"radial-line":pe.append("line").style("fill","none");break;case"angular-line":pe.append("path").style("fill","none");break}}),me.order()},W.updateLayout=function(le,fe){var ue=this,V=ue.layers,j=le._size,ee=ue.getRadial(fe),q=ue.getAngular(fe),X=fe.domain.x,J=fe.domain.y;ue.xOffset=j.l+j.w*X[0],ue.yOffset=j.t+j.h*(1-J[1]);var ie=ue.xLength=j.w*(X[1]-X[0]),ne=ue.yLength=j.h*(J[1]-J[0]),oe=ue.getSector(fe);ue.sectorInRad=oe.map(H);var se=ue.sectorBBox=Q(oe),me=se[2]-se[0],ce=se[3]-se[1],pe=ne/ie,xe=Math.abs(ce/me),Se,Ae,Ce,Ee,Oe;pe>xe?(Se=ie,Ae=ie*xe,Oe=(ne-Ae)/j.h/2,Ce=[X[0],X[1]],Ee=[J[0]+Oe,J[1]-Oe]):(Se=ne/xe,Ae=ne,Oe=(ie-Se)/j.w/2,Ce=[X[0]+Oe,X[1]-Oe],Ee=[J[0],J[1]]),ue.xLength2=Se,ue.yLength2=Ae,ue.xDomain2=Ce,ue.yDomain2=Ee;var _e=ue.xOffset2=j.l+j.w*Ce[0],Re=ue.yOffset2=j.t+j.h*(1-Ee[1]),Ve=ue.radius=Se/me,Je=ue.innerRadius=ue.getHole(fe)*Ve,ze=ue.cx=_e-Ve*se[0],De=ue.cy=Re+Ve*se[3],je=ue.cxx=ze-_e,dt=ue.cyy=De-Re,Et=ee.side,$t;Et==="counterclockwise"?($t=Et,Et="top"):Et==="clockwise"&&($t=Et,Et="bottom"),ue.radialAxis=ue.mockAxis(le,fe,ee,{_id:"x",side:Et,_trueSide:$t,domain:[Je/j.w,Ve/j.w]}),ue.angularAxis=ue.mockAxis(le,fe,q,{side:"right",domain:[0,Math.PI],autorange:!1}),ue.doAutoRange(le,fe),ue.updateAngularAxis(le,fe),ue.updateRadialAxis(le,fe),ue.updateRadialAxisTitle(le,fe),ue.xaxis=ue.mockCartesianAxis(le,fe,{_id:"x",domain:Ce}),ue.yaxis=ue.mockCartesianAxis(le,fe,{_id:"y",domain:Ee});var wt=ue.pathSubplot();ue.clipPaths.forTraces.select("path").attr("d",wt).attr("transform",a(je,dt)),V.frontplot.attr("transform",a(_e,Re)).call(n.setClipUrl,ue._hasClipOnAxisFalse?null:ue.clipIds.forTraces,ue.gd),V.bg.attr("d",wt).attr("transform",a(ze,De)).call(i.fill,fe.bgcolor)},W.mockAxis=function(le,fe,ue,V){var j=y.extendFlat({},ue,V);return l(j,fe,le),j},W.mockCartesianAxis=function(le,fe,ue){var V=this,j=V.isSmith,ee=ue._id,q=y.extendFlat({type:"linear"},ue);u(q,le);var X={x:[0,2],y:[1,3]};return q.setRange=function(){var J=V.sectorBBox,ie=X[ee],ne=V.radialAxis._rl,oe=(ne[1]-ne[0])/(1-V.getHole(fe));q.range=[J[ie[0]]*oe,J[ie[1]]*oe]},q.isPtWithinRange=ee==="x"&&!j?function(J){return V.isPtInside(J)}:function(){return!0},q.setRange(),q.setScale(),q},W.doAutoRange=function(le,fe){var ue=this,V=ue.gd,j=ue.radialAxis,ee=ue.getRadial(fe);m(V,j);var q=j.range;ee.range=q.slice(),ee._input.range=q.slice(),j._rl=[j.r2l(q[0],null,"gregorian"),j.r2l(q[1],null,"gregorian")]},W.updateRadialAxis=function(le,fe){var ue=this,V=ue.gd,j=ue.layers,ee=ue.radius,q=ue.innerRadius,X=ue.cx,J=ue.cy,ie=ue.getRadial(fe),ne=D(ue.getSector(fe)[0],360),oe=ue.radialAxis,se=q<ee,me=ue.isSmith;me||(ue.fillViewInitialKey("radialaxis.angle",ie.angle),ue.fillViewInitialKey("radialaxis.range",oe.range.slice()),oe.setGeometry()),oe.tickangle==="auto"&&ne>90&&ne<=270&&(oe.tickangle=180);var ce=me?function(Ve){var Je=O(ue,E([Ve.x,0]));return a(Je[0]-X,Je[1]-J)}:function(Ve){return a(oe.l2p(Ve.x)+q,0)},pe=me?function(Ve){return z(ue,Ve.x,-1/0,1/0)}:function(Ve){return ue.pathArc(oe.r2p(Ve.x)+q)},xe=re(ie);if(ue.radialTickLayout!==xe&&(j["radial-axis"].selectAll(".xtick").remove(),ue.radialTickLayout=xe),se){oe.setScale();var Se=0,Ae=me?(oe.tickvals||[]).filter(function(Ve){return Ve>=0}).map(function(Ve){return f.tickText(oe,Ve,!0,!1)}):f.calcTicks(oe),Ce=me?Ae:f.clipEnds(oe,Ae),Ee=f.getTickSigns(oe)[2];me&&((oe.ticks==="top"&&oe.side==="bottom"||oe.ticks==="bottom"&&oe.side==="top")&&(Ee=-Ee),oe.ticks==="top"&&oe.side==="top"&&(Se=-oe.ticklen),oe.ticks==="bottom"&&oe.side==="bottom"&&(Se=oe.ticklen)),f.drawTicks(V,oe,{vals:Ae,layer:j["radial-axis"],path:f.makeTickPath(oe,0,Ee),transFn:ce,crisp:!1}),f.drawGrid(V,oe,{vals:Ce,layer:j["radial-grid"],path:pe,transFn:y.noop,crisp:!1}),f.drawLabels(V,oe,{vals:Ae,layer:j["radial-axis"],transFn:ce,labelFns:f.makeLabelFns(oe,Se)})}var Oe=ue.radialAxisAngle=ue.vangles?B(Z(H(ie.angle),ue.vangles)):ie.angle,_e=a(X,J),Re=_e+t(-Oe);K(j["radial-axis"],se&&(ie.showticklabels||ie.ticks),{transform:Re}),K(j["radial-grid"],se&&ie.showgrid,{transform:me?"":_e}),K(j["radial-line"].select("line"),se&&ie.showline,{x1:me?-ee:q,y1:0,x2:ee,y2:0,transform:Re}).attr("stroke-width",ie.linewidth).call(i.stroke,ie.linecolor)},W.updateRadialAxisTitle=function(le,fe,ue){if(!this.isSmith){var V=this,j=V.gd,ee=V.radius,q=V.cx,X=V.cy,J=V.getRadial(fe),ie=V.id+"title",ne=0;if(J.title){var oe=n.bBox(V.layers["radial-axis"].node()).height,se=J.title.font.size,me=J.side;ne=me==="top"?se:me==="counterclockwise"?-(oe+se*.4):oe+se*.8}var ce=ue!==void 0?ue:V.radialAxisAngle,pe=H(ce),xe=Math.cos(pe),Se=Math.sin(pe),Ae=q+ee/2*xe+ne*Se,Ce=X-ee/2*Se+ne*xe;V.layers["radial-axis-title"]=_.draw(j,ie,{propContainer:J,propName:V.id+".radialaxis.title",placeholder:R(j,"Click to enter radial axis title"),attributes:{x:Ae,y:Ce,"text-anchor":"middle"},transform:{rotate:-ce}})}},W.updateAngularAxis=function(le,fe){var ue=this,V=ue.gd,j=ue.layers,ee=ue.radius,q=ue.innerRadius,X=ue.cx,J=ue.cy,ie=ue.getAngular(fe),ne=ue.angularAxis,oe=ue.isSmith;oe||(ue.fillViewInitialKey("angularaxis.rotation",ie.rotation),ne.setGeometry(),ne.setScale());var se=oe?function(Je){var ze=O(ue,E([0,Je.x]));return Math.atan2(ze[0]-X,ze[1]-J)-Math.PI/2}:function(Je){return ne.t2g(Je.x)};ne.type==="linear"&&ne.thetaunit==="radians"&&(ne.tick0=B(ne.tick0),ne.dtick=B(ne.dtick));var me=function(Je){return a(X+ee*Math.cos(Je),J-ee*Math.sin(Je))},ce=oe?function(Je){var ze=O(ue,E([0,Je.x]));return a(ze[0],ze[1])}:function(Je){return me(se(Je))},pe=oe?function(Je){var ze=O(ue,E([0,Je.x])),De=Math.atan2(ze[0]-X,ze[1]-J)-Math.PI/2;return a(ze[0],ze[1])+t(-B(De))}:function(Je){var ze=se(Je);return me(ze)+t(-B(ze))},xe=oe?function(Je){return L(ue,Je.x,0,1/0)}:function(Je){var ze=se(Je),De=Math.cos(ze),je=Math.sin(ze);return"M"+[X+q*De,J-q*je]+"L"+[X+ee*De,J-ee*je]},Se=f.makeLabelFns(ne,0),Ae=Se.labelStandoff,Ce={};Ce.xFn=function(Je){var ze=se(Je);return Math.cos(ze)*Ae},Ce.yFn=function(Je){var ze=se(Je),De=Math.sin(ze)>0?.2:1;return-Math.sin(ze)*(Ae+Je.fontSize*De)+Math.abs(Math.cos(ze))*(Je.fontSize*w)},Ce.anchorFn=function(Je){var ze=se(Je),De=Math.cos(ze);return Math.abs(De)<.1?"middle":De>0?"start":"end"},Ce.heightFn=function(Je,ze,De){var je=se(Je);return-.5*(1+Math.sin(je))*De};var Ee=re(ie);ue.angularTickLayout!==Ee&&(j["angular-axis"].selectAll("."+ne._id+"tick").remove(),ue.angularTickLayout=Ee);var Oe=oe?[1/0].concat(ne.tickvals||[]).map(function(Je){return f.tickText(ne,Je,!0,!1)}):f.calcTicks(ne);oe&&(Oe[0].text="\u221E",Oe[0].fontSize*=1.75);var _e;if(fe.gridshape==="linear"?(_e=Oe.map(se),y.angleDelta(_e[0],_e[1])<0&&(_e=_e.slice().reverse())):_e=null,ue.vangles=_e,ne.type==="category"&&(Oe=Oe.filter(function(Je){return y.isAngleInsideSector(se(Je),ue.sectorInRad)})),ne.visible){var Re=ne.ticks==="inside"?-1:1,Ve=(ne.linewidth||1)/2;f.drawTicks(V,ne,{vals:Oe,layer:j["angular-axis"],path:"M"+Re*Ve+",0h"+Re*ne.ticklen,transFn:pe,crisp:!1}),f.drawGrid(V,ne,{vals:Oe,layer:j["angular-grid"],path:xe,transFn:y.noop,crisp:!1}),f.drawLabels(V,ne,{vals:Oe,layer:j["angular-axis"],repositionOnUpdate:!0,transFn:ce,labelFns:Ce})}K(j["angular-line"].select("path"),ie.showline,{d:ue.pathSubplot(),transform:a(X,J)}).attr("stroke-width",ie.linewidth).call(i.stroke,ie.linecolor)},W.updateFx=function(le,fe){if(!this.gd._context.staticPlot){var ue=!this.isSmith;ue&&(this.updateAngularDrag(le),this.updateRadialDrag(le,fe,0),this.updateRadialDrag(le,fe,1)),this.updateHoverAndMainDrag(le)}},W.updateHoverAndMainDrag=function(le){var fe=this,ue=fe.isSmith,V=fe.gd,j=fe.layers,ee=le._zoomlayer,q=v.MINZOOM,X=v.OFFEDGE,J=fe.radius,ie=fe.innerRadius,ne=fe.cx,oe=fe.cy,se=fe.cxx,me=fe.cyy,ce=fe.sectorInRad,pe=fe.vangles,xe=fe.radialAxis,Se=C.clampTiny,Ae=C.findXYatLength,Ce=C.findEnclosingVertexAngles,Ee=v.cornerHalfWidth,Oe=v.cornerLen/2,_e,Re,Ve=d.makeDragger(j,"path","maindrag","crosshair");s.select(Ve).attr("d",fe.pathSubplot()).attr("transform",a(ne,oe)),Ve.onmousemove=function(ar){g.hover(V,ar,fe.id),V._fullLayout._lasthover=Ve,V._fullLayout._hoversubplot=fe.id},Ve.onmouseout=function(ar){V._dragging||b.unhover(V,ar)};var Je={element:Ve,gd:V,subplot:fe.id,plotinfo:{id:fe.id,xaxis:fe.xaxis,yaxis:fe.yaxis},xaxes:[fe.xaxis],yaxes:[fe.yaxis]},ze,De,je,dt,Et,$t,wt,Ot,Vt;function kt(ar,nr){return Math.sqrt(ar*ar+nr*nr)}function St(ar,nr){return kt(ar-se,nr-me)}function ot(ar,nr){return Math.atan2(me-nr,ar-se)}function ht(ar,nr){return[ar*Math.cos(nr),ar*Math.sin(-nr)]}function Ke(ar,nr){if(ar===0)return fe.pathSector(2*Ee);var cr=Oe/ar,Kr=nr-cr,yn=nr+cr,Qr=Math.max(0,Math.min(ar,J)),st=Qr-Ee,Gt=Qr+Ee;return"M"+ht(st,Kr)+"A"+[st,st]+" 0,0,0 "+ht(st,yn)+"L"+ht(Gt,yn)+"A"+[Gt,Gt]+" 0,0,1 "+ht(Gt,Kr)+"Z"}function Pe(ar,nr,cr){if(ar===0)return fe.pathSector(2*Ee);var Kr=ht(ar,nr),yn=ht(ar,cr),Qr=Se((Kr[0]+yn[0])/2),st=Se((Kr[1]+yn[1])/2),Gt,Zt;if(Qr&&st){var Ht=st/Qr,_r=-1/Ht,it=Ae(Ee,Ht,Qr,st);Gt=Ae(Oe,_r,it[0][0],it[0][1]),Zt=Ae(Oe,_r,it[1][0],it[1][1])}else{var Te,ke;st?(Te=Oe,ke=Ee):(Te=Ee,ke=Oe),Gt=[[Qr-Te,st-ke],[Qr+Te,st-ke]],Zt=[[Qr-Te,st+ke],[Qr+Te,st+ke]]}return"M"+Gt.join("L")+"L"+Zt.reverse().join("L")+"Z"}function We(){je=null,dt=null,Et=fe.pathSubplot(),$t=!1;var ar=V._fullLayout[fe.id];wt=o(ar.bgcolor).getLuminance(),Ot=d.makeZoombox(ee,wt,ne,oe,Et),Ot.attr("fill-rule","evenodd"),Vt=d.makeCorners(ee,ne,oe),c(V)}function Qe(ar,nr){return nr=Math.max(Math.min(nr,J),ie),ar<X?ar=0:J-ar<X?ar=J:nr<X?nr=0:J-nr<X&&(nr=J),Math.abs(nr-ar)>q?(ar<nr?(je=ar,dt=nr):(je=nr,dt=ar),!0):(je=null,dt=null,!1)}function ut(ar,nr){ar=ar||Et,nr=nr||"M0,0Z",Ot.attr("d",ar),Vt.attr("d",nr),d.transitionZoombox(Ot,Vt,$t,wt),$t=!0;var cr={};Ut(cr),V.emit("plotly_relayouting",cr)}function It(ar,nr){ar=ar*_e,nr=nr*Re;var cr=ze+ar,Kr=De+nr,yn=St(ze,De),Qr=Math.min(St(cr,Kr),J),st=ot(ze,De),Gt,Zt;Qe(yn,Qr)&&(Gt=Et+fe.pathSector(dt),je&&(Gt+=fe.pathSector(je)),Zt=Ke(je,st)+Ke(dt,st)),ut(Gt,Zt)}function Tt(ar,nr,cr,Kr){var yn=C.findIntersectionXY(cr,Kr,cr,[ar-se,me-nr]);return kt(yn[0],yn[1])}function Bt(ar,nr){var cr=ze+ar,Kr=De+nr,yn=ot(ze,De),Qr=ot(cr,Kr),st=Ce(yn,pe),Gt=Ce(Qr,pe),Zt=Tt(ze,De,st[0],st[1]),Ht=Math.min(Tt(cr,Kr,Gt[0],Gt[1]),J),_r,it;Qe(Zt,Ht)&&(_r=Et+fe.pathSector(dt),je&&(_r+=fe.pathSector(je)),it=[Pe(je,st[0],st[1]),Pe(dt,st[0],st[1])].join(" ")),ut(_r,it)}function rr(){if(d.removeZoombox(V),!(je===null||dt===null)){var ar={};Ut(ar),d.showDoubleClickNotifier(V),h.call("_guiRelayout",V,ar)}}function Ut(ar){var nr=xe._rl,cr=(nr[1]-nr[0])/(1-ie/J)/J,Kr=[nr[0]+(je-ie)*cr,nr[0]+(dt-ie)*cr];ar[fe.id+".radialaxis.range"]=Kr}function Qt(ar,nr){var cr=V._fullLayout.clickmode;if(d.removeZoombox(V),ar===2){var Kr={};for(var yn in fe.viewInitial)Kr[fe.id+"."+yn]=fe.viewInitial[yn];V.emit("plotly_doubleclick",null),h.call("_guiRelayout",V,Kr)}cr.indexOf("select")>-1&&ar===1&&A(nr,V,[fe.xaxis],[fe.yaxis],fe.id,Je),cr.indexOf("event")>-1&&g.click(V,nr,fe.id)}Je.prepFn=function(ar,nr,cr){var Kr=V._fullLayout.dragmode,yn=Ve.getBoundingClientRect();V._fullLayout._calcInverseTransform(V);var Qr=V._fullLayout._invTransform;_e=V._fullLayout._invScaleX,Re=V._fullLayout._invScaleY;var st=y.apply3DTransform(Qr)(nr-yn.left,cr-yn.top);if(ze=st[0],De=st[1],pe){var Gt=C.findPolygonOffset(J,ce[0],ce[1],pe);ze+=se+Gt[0],De+=me+Gt[1]}switch(Kr){case"zoom":Je.clickFn=Qt,ue||(pe?Je.moveFn=Bt:Je.moveFn=It,Je.doneFn=rr,We());break;case"select":case"lasso":p(ar,nr,cr,Je,Kr);break}},b.init(Je)},W.updateRadialDrag=function(le,fe,ue){var V=this,j=V.gd,ee=V.layers,q=V.radius,X=V.innerRadius,J=V.cx,ie=V.cy,ne=V.radialAxis,oe=v.radialDragBoxSize,se=oe/2;if(!ne.visible)return;var me=H(V.radialAxisAngle),ce=ne._rl,pe=ce[0],xe=ce[1],Se=ce[ue],Ae=.75*(ce[1]-ce[0])/(1-V.getHole(fe))/q,Ce,Ee,Oe;ue?(Ce=J+(q+se)*Math.cos(me),Ee=ie-(q+se)*Math.sin(me),Oe="radialdrag"):(Ce=J+(X-se)*Math.cos(me),Ee=ie-(X-se)*Math.sin(me),Oe="radialdrag-inner");var _e=d.makeRectDragger(ee,Oe,"crosshair",-se,-se,oe,oe),Re={element:_e,gd:j};K(s.select(_e),ne.visible&&X<q,{transform:a(Ce,Ee)});var Ve,Je,ze;function De(wt,Ot){if(Ve)Ve(wt,Ot);else{var Vt=[wt,-Ot],kt=[Math.cos(me),Math.sin(me)],St=Math.abs(y.dot(Vt,kt)/Math.sqrt(y.dot(Vt,Vt)));isNaN(St)||(Ve=St<.5?Et:$t)}var ot={};je(ot),j.emit("plotly_relayouting",ot)}function je(wt){Je!==null?wt[V.id+".radialaxis.angle"]=Je:ze!==null&&(wt[V.id+".radialaxis.range["+ue+"]"]=ze)}function dt(){Je!==null?h.call("_guiRelayout",j,V.id+".radialaxis.angle",Je):ze!==null&&h.call("_guiRelayout",j,V.id+".radialaxis.range["+ue+"]",ze)}function Et(wt,Ot){if(ue!==0){var Vt=Ce+wt,kt=Ee+Ot;Je=Math.atan2(ie-kt,Vt-J),V.vangles&&(Je=Z(Je,V.vangles)),Je=B(Je);var St=a(J,ie)+t(-Je);ee["radial-axis"].attr("transform",St),ee["radial-line"].select("line").attr("transform",St);var ot=V.gd._fullLayout,ht=ot[V.id];V.updateRadialAxisTitle(ot,ht,Je)}}function $t(wt,Ot){var Vt=y.dot([wt,-Ot],[Math.cos(me),Math.sin(me)]);if(ze=Se-Ae*Vt,Ae>0!=(ue?ze>pe:ze<xe)){ze=null;return}var kt=j._fullLayout,St=kt[V.id];ne.range[ue]=ze,ne._rl[ue]=ze,V.updateRadialAxis(kt,St),V.xaxis.setRange(),V.xaxis.setScale(),V.yaxis.setRange(),V.yaxis.setScale();var ot=!1;for(var ht in V.traceHash){var Ke=V.traceHash[ht],Pe=y.filterVisible(Ke),We=Ke[0][0].trace._module;We.plot(j,V,Pe,St),h.traceIs(ht,"gl")&&Pe.length&&(ot=!0)}ot&&(T(j),x(j))}Re.prepFn=function(){Ve=null,Je=null,ze=null,Re.moveFn=De,Re.doneFn=dt,c(j)},Re.clampFn=function(wt,Ot){return Math.sqrt(wt*wt+Ot*Ot)<v.MINDRAG&&(wt=0,Ot=0),[wt,Ot]},b.init(Re)},W.updateAngularDrag=function(le){var fe=this,ue=fe.gd,V=fe.layers,j=fe.radius,ee=fe.angularAxis,q=fe.cx,X=fe.cy,J=fe.cxx,ie=fe.cyy,ne=v.angularDragBoxSize,oe=d.makeDragger(V,"path","angulardrag","move"),se={element:oe,gd:ue};s.select(oe).attr("d",fe.pathAnnulus(j,j+ne)).attr("transform",a(q,X)).call(S,"move");function me(ze,De){return Math.atan2(ie+ne-De,ze-J-ne)}var ce=V.frontplot.select(".scatterlayer").selectAll(".trace"),pe=ce.selectAll(".point"),xe=ce.selectAll(".textpoint"),Se,Ae,Ce,Ee,Oe,_e;function Re(ze,De){var je=fe.gd._fullLayout,dt=je[fe.id],Et=Se+ze*le._invScaleX,$t=Ae+De*le._invScaleY,wt=me(Et,$t),Ot=B(wt-_e);if(Ee=Ce+Ot,V.frontplot.attr("transform",a(fe.xOffset2,fe.yOffset2)+t([-Ot,J,ie])),fe.vangles){Oe=fe.radialAxisAngle+Ot;var Vt=a(q,X)+t(-Ot),kt=a(q,X)+t(-Oe);V.bg.attr("transform",Vt),V["radial-grid"].attr("transform",Vt),V["radial-axis"].attr("transform",kt),V["radial-line"].select("line").attr("transform",kt),fe.updateRadialAxisTitle(je,dt,Oe)}else fe.clipPaths.forTraces.select("path").attr("transform",a(J,ie)+t(Ot));pe.each(function(){var Qe=s.select(this),ut=n.getTranslate(Qe);Qe.attr("transform",a(ut.x,ut.y)+t([Ot]))}),xe.each(function(){var Qe=s.select(this),ut=Qe.select("text"),It=n.getTranslate(Qe);Qe.attr("transform",t([Ot,ut.attr("x"),ut.attr("y")])+a(It.x,It.y))}),ee.rotation=y.modHalf(Ee,360),fe.updateAngularAxis(je,dt),fe._hasClipOnAxisFalse&&!y.isFullCircle(fe.sectorInRad)&&ce.call(n.hideOutsideRangePoints,fe);var St=!1;for(var ot in fe.traceHash)if(h.traceIs(ot,"gl")){var ht=fe.traceHash[ot],Ke=y.filterVisible(ht),Pe=ht[0][0].trace._module;Pe.plot(ue,fe,Ke,dt),Ke.length&&(St=!0)}St&&(T(ue),x(ue));var We={};Ve(We),ue.emit("plotly_relayouting",We)}function Ve(ze){ze[fe.id+".angularaxis.rotation"]=Ee,fe.vangles&&(ze[fe.id+".radialaxis.angle"]=Oe)}function Je(){xe.select("text").attr("transform",null);var ze={};Ve(ze),h.call("_guiRelayout",ue,ze)}se.prepFn=function(ze,De,je){var dt=le[fe.id];Ce=dt.angularaxis.rotation;var Et=oe.getBoundingClientRect();Se=De-Et.left,Ae=je-Et.top,ue._fullLayout._calcInverseTransform(ue);var $t=y.apply3DTransform(le._invTransform)(Se,Ae);Se=$t[0],Ae=$t[1],_e=me(Se,Ae),se.moveFn=Re,se.doneFn=Je,c(ue)},fe.vangles&&!y.isFullCircle(fe.sectorInRad)&&(se.prepFn=y.noop,S(s.select(oe),null)),b.init(se)},W.isPtInside=function(le){if(this.isSmith)return!0;var fe=this.sectorInRad,ue=this.vangles,V=this.angularAxis.c2g(le.theta),j=this.radialAxis,ee=j.c2l(le.r),q=j._rl,X=ue?C.isPtInsidePolygon:y.isPtInsideSector;return X(ee,V,q,fe,ue)},W.pathArc=function(le){var fe=this.sectorInRad,ue=this.vangles,V=ue?C.pathPolygon:y.pathArc;return V(le,fe[0],fe[1],ue)},W.pathSector=function(le){var fe=this.sectorInRad,ue=this.vangles,V=ue?C.pathPolygon:y.pathSector;return V(le,fe[0],fe[1],ue)},W.pathAnnulus=function(le,fe){var ue=this.sectorInRad,V=this.vangles,j=V?C.pathPolygonAnnulus:y.pathAnnulus;return j(le,fe,ue[0],ue[1],V)},W.pathSubplot=function(){var le=this.innerRadius,fe=this.radius;return le?this.pathAnnulus(le,fe):this.pathSector(fe)},W.fillViewInitialKey=function(le,fe){le in this.viewInitial||(this.viewInitial[le]=fe)};function re(le){var fe=le.ticks+String(le.ticklen)+String(le.showticklabels);return"side"in le&&(fe+=le.side),fe}function Q(le){var fe=le[0],ue=le[1],V=ue-fe,j=D(fe,360),ee=j+V,q=Math.cos(H(j)),X=Math.sin(H(j)),J=Math.cos(H(ee)),ie=Math.sin(H(ee)),ne,oe,se,me;return j<=90&&ee>=90||j>90&&ee>=450?me=1:X<=0&&ie<=0?me=0:me=Math.max(X,ie),j<=180&&ee>=180||j>180&&ee>=540?ne=-1:q>=0&&J>=0?ne=0:ne=Math.min(q,J),j<=270&&ee>=270||j>270&&ee>=630?oe=-1:X>=0&&ie>=0?oe=0:oe=Math.min(X,ie),ee>=360?se=1:q<=0&&J<=0?se=0:se=Math.max(q,J),[ne,oe,se,me]}function Z(le,fe){var ue=function(j){return y.angleDist(le,j)},V=y.findIndexOfMin(fe,ue);return fe[V]}function K(le,fe,ue){return fe?(le.attr("display",null),le.attr(ue)):le&&le.attr("display","none"),le}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(e,I,F){var s=e("../../lib"),o=e("../cartesian/set_convert"),h=s.deg2rad,y=s.rad2deg;I.exports=function(f,u,l){switch(o(f,l),f._id){case"x":case"radialaxis":t(f,u);break;case"angularaxis":n(f,u);break}};function t(r,f){var u=f._subplot;r.setGeometry=function(){var l=r._rl[0],m=r._rl[1],d=u.innerRadius,b=(u.radius-d)/(m-l),g=d/b,_=l>m?function(p){return p<=0}:function(p){return p>=0};r.c2g=function(p){var A=r.c2l(p)-l;return(_(A)?A:0)+g},r.g2c=function(p){return r.l2c(p+l-g)},r.g2p=function(p){return p*b},r.c2p=function(p){return r.g2p(r.c2g(p))}}}function a(r,f){return f==="degrees"?h(r):r}function i(r,f){return f==="degrees"?y(r):r}function n(r,f){var u=r.type;if(u==="linear"){var l=r.d2c,m=r.c2d;r.d2c=function(d,b){return a(l(d),b)},r.c2d=function(d,b){return m(i(d,b))}}r.makeCalcdata=function(d,b){var g=d[b],_=d._length,p,A,c=function(v){return r.d2c(v,d.thetaunit)};if(g){if(s.isTypedArray(g)&&u==="linear"){if(_===g.length)return g;if(g.subarray)return g.subarray(0,_)}for(p=new Array(_),A=0;A<_;A++)p[A]=c(g[A])}else{var S=b+"0",T="d"+b,x=S in d?c(d[S]):0,w=d[T]?c(d[T]):(r.period||2*Math.PI)/_;for(p=new Array(_),A=0;A<_;A++)p[A]=x+A*w}return p},r.setGeometry=function(){var d=f.sector,b=d.map(h),g={clockwise:-1,counterclockwise:1}[r.direction],_=h(r.rotation),p=function(C){return g*C+_},A=function(C){return(C-_)/g},c,S,T,x;switch(u){case"linear":S=c=s.identity,x=h,T=y,r.range=s.isFullCircle(b)?[d[0],d[0]+360]:b.map(A).map(y);break;case"category":var w=r._categories.length,v=r.period?Math.max(r.period,w):w;v===0&&(v=1),S=x=function(C){return C*2*Math.PI/v},c=T=function(C){return C*v/Math.PI/2},r.range=[0,v];break}r.c2g=function(C){return p(S(C))},r.g2c=function(C){return c(A(C))},r.t2g=function(C){return p(x(C))},r.g2t=function(C){return T(A(C))}}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(e,I,F){I.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(e,I,F){function s(i){return i<0?-1:i>0?1:0}function o(i){var n=i[0],r=i[1];if(!isFinite(n)||!isFinite(r))return[1,0];var f=(n+1)*(n+1)+r*r;return[(n*n+r*r-1)/f,2*r/f]}function h(i,n){var r=n[0],f=n[1];return[r*i.radius+i.cx,-f*i.radius+i.cy]}function y(i,n){return n*i.radius}function t(i,n,r,f){var u=h(i,o([r,n])),l=u[0],m=u[1],d=h(i,o([f,n])),b=d[0],g=d[1];if(n===0)return["M"+l+","+m,"L"+b+","+g].join(" ");var _=y(i,1/Math.abs(n));return["M"+l+","+m,"A"+_+","+_+" 0 0,"+(n<0?1:0)+" "+b+","+g].join(" ")}function a(i,n,r,f){var u=y(i,1/(n+1)),l=h(i,o([n,r])),m=l[0],d=l[1],b=h(i,o([n,f])),g=b[0],_=b[1];if(s(r)!==s(f)){var p=h(i,o([n,0])),A=p[0],c=p[1];return["M"+m+","+d,"A"+u+","+u+" 0 0,"+(0<r?0:1)+" "+A+","+c,"A"+u+","+u+" 0 0,"+(f<0?0:1)+g+","+_].join(" ")}return["M"+m+","+d,"A"+u+","+u+" 0 0,"+(f<r?0:1)+" "+g+","+_].join(" ")}I.exports={smith:o,reactanceArc:t,resistanceArc:a,smithTransform:h}},{}],629:[function(e,I,F){var s=e("../get_data").getSubplotCalcData,o=e("../../lib").counterRegex,h=e("../polar/polar"),y=e("./constants"),t=y.attr,a=y.name,i=o(a),n={};n[t]={valType:"subplotid",dflt:a,editType:"calc"};function r(u){for(var l=u._fullLayout,m=u.calcdata,d=l._subplots[a],b=0;b<d.length;b++){var g=d[b],_=s(m,a,g),p=l[g]._subplot;p||(p=h(u,g,!0),l[g]._subplot=p),p.plot(_,l,u._promises)}}function f(u,l,m,d){for(var b=d._subplots[a]||[],g=0;g<b.length;g++){var _=b[g],p=d[_]._subplot;if(!l[_]&&!!p){p.framework.remove();for(var A in p.clipPaths)p.clipPaths[A].remove()}}}I.exports={attr:t,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:r,clean:f,toSVG:e("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(e,I,F){var s=e("../../components/color/attributes"),o=e("../cartesian/layout_attributes"),h=e("../domain").attributes,y=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,a=t({color:o.color,showline:y({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:y({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth},"plot","from-root"),i=t({ticklen:o.ticklen,tickwidth:y({},o.tickwidth,{dflt:2}),tickcolor:o.tickcolor,showticklabels:o.showticklabels,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,tickfont:o.tickfont,tickformat:o.tickformat,hoverformat:o.hoverformat,layer:o.layer},"plot","from-root"),n=y({visible:y({},o.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:y({},o.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,i),r=y({visible:y({},o.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:o.ticks,editType:"calc"},a,i);I.exports={domain:h({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:s.background},realaxis:n,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color"),h=e("../../plot_api/plot_template"),y=e("../subplot_defaults"),t=e("../get_data").getSubplotData,a=e("../cartesian/prefix_suffix_defaults"),i=e("../cartesian/tick_label_defaults"),n=e("../cartesian/line_grid_defaults"),r=e("../cartesian/set_convert"),f=e("./layout_attributes"),u=e("./constants"),l=u.axisNames,m=b(function(g){return g.slice().reverse().map(function(_){return-_}).concat([0]).concat(g)},String);function d(g,_,p,A){var c=p("bgcolor");A.bgColor=o.combine(c,A.paper_bgcolor);var S=t(A.fullData,u.name,A.id),T=A.layoutOut,x;function w(W,re){return p(x+"."+W,re)}for(var v=0;v<l.length;v++){x=l[v],s.isPlainObject(g[x])||(g[x]={});var C=g[x],M=h.newContainer(_,x);M._id=M._name=x,M._attr=A.id+"."+x,M._traceIndices=S.map(function(W){return W._expandedIndex});var E=w("visible");if(M.type="linear",r(M,T),a(C,M,w,M.type),E){var L=x==="realaxis";if(L&&w("side"),L)w("tickvals");else{var z=m(_.realaxis.tickvals||f.realaxis.tickvals.dflt);w("tickvals",z)}var O,R,D,H,B=A.font||{};E&&(O=w("color"),R=O===C.color?O:B.color,D=B.size,H=B.family),i(C,M,w,M.type,{noTicklabelstep:!0,noAng:!L,noExp:!0,font:{color:R,size:D,family:H}}),s.coerce2(g,_,f,x+".ticklen"),s.coerce2(g,_,f,x+".tickwidth"),s.coerce2(g,_,f,x+".tickcolor",_.color);var $=w("ticks");$||(delete _[x].ticklen,delete _[x].tickwidth,delete _[x].tickcolor),n(C,M,w,{dfltColor:O,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[x]}),w("layer")}w("hoverformat"),delete M.type,M._input=C}}I.exports=function(_,p,A){y(_,p,A,{noUirevision:!0,type:u.name,attributes:f,handleDefaults:d,font:p.font,paper_bgcolor:p.paper_bgcolor,fullData:A,layoutOut:p})};function b(g,_){var p={};return function(A){var c=_?_(A):A;if(c in p)return p[c];var S=g(A);return p[c]=S,S}}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(e,I,F){var s=e("../lib"),o=e("../plot_api/plot_template"),h=e("./domain").defaults;I.exports=function(t,a,i,n){var r=n.type,f=n.attributes,u=n.handleDefaults,l=n.partition||"x",m=a._subplots[r],d=m.length,b=d&&m[0].replace(/\d+$/,""),g,_;function p(T,x){return s.coerce(g,_,f,T,x)}for(var A=0;A<d;A++){var c=m[A];t[c]?g=t[c]:g=t[c]={},_=o.newContainer(a,c,b),n.noUirevision||p("uirevision",a.uirevision);var S={};S[l]=[A/d,(A+1)/d],h(_,a,p,S),n.id=c,u(g,_,p,n)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(e,I,F){var s=e("../constants/docs");s.FORMAT_LINK,s.DATE_FORMAT_LINK;function o(h){var y=h.description?" "+h.description:"",t=h.keys||[];if(t.length>0){for(var a=[],i=0;i<t.length;i++)a[i]="`"+t[i]+"`";y=y+"Finally, the template string has access to ",t.length===1?y="variable "+a[0]:y="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return y}F.hovertemplateAttrs=function(h,y){h=h||{},y=y||{},o(y);var t={valType:"string",dflt:"",editType:h.editType||"none"};return h.arrayOk!==!1&&(t.arrayOk=!0),t},F.texttemplateAttrs=function(h,y){h=h||{},y=y||{},o(y);var t={valType:"string",dflt:"",editType:h.editType||"calc"};return h.arrayOk!==!1&&(t.arrayOk=!0),t}},{"../constants/docs":474}],634:[function(e,I,F){var s=e("./ternary"),o=e("../../plots/get_data").getSubplotCalcData,h=e("../../lib").counterRegex,y="ternary";F.name=y;var t=F.attr="subplot";F.idRoot=y,F.idRegex=F.attrRegex=h(y);var a=F.attributes={};a[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},F.layoutAttributes=e("./layout_attributes"),F.supplyLayoutDefaults=e("./layout_defaults"),F.plot=function(n){for(var r=n._fullLayout,f=n.calcdata,u=r._subplots[y],l=0;l<u.length;l++){var m=u[l],d=o(f,y,m),b=r[m]._subplot;b||(b=new s({id:m,graphDiv:n,container:r._ternarylayer.node()},r),r[m]._subplot=b),b.plot(d,r,n._promises)}},F.clean=function(i,n,r,f){for(var u=f._subplots[y]||[],l=0;l<u.length;l++){var m=u[l],d=f[m]._subplot;!n[m]&&!!d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(e,I,F){var s=e("../../components/color/attributes"),o=e("../domain").attributes,h=e("../cartesian/layout_attributes"),y=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/extend").extendFlat,a={title:{text:h.title.text,font:h.title.font},color:h.color,tickmode:h.tickmode,nticks:t({},h.nticks,{dflt:6,min:1}),tick0:h.tick0,dtick:h.dtick,tickvals:h.tickvals,ticktext:h.ticktext,ticks:h.ticks,ticklen:h.ticklen,tickwidth:h.tickwidth,tickcolor:h.tickcolor,ticklabelstep:h.ticklabelstep,showticklabels:h.showticklabels,showtickprefix:h.showtickprefix,tickprefix:h.tickprefix,showticksuffix:h.showticksuffix,ticksuffix:h.ticksuffix,showexponent:h.showexponent,exponentformat:h.exponentformat,minexponent:h.minexponent,separatethousands:h.separatethousands,tickfont:h.tickfont,tickangle:h.tickangle,tickformat:h.tickformat,tickformatstops:h.tickformatstops,hoverformat:h.hoverformat,showline:t({},h.showline,{dflt:!0}),linecolor:h.linecolor,linewidth:h.linewidth,showgrid:t({},h.showgrid,{dflt:!0}),gridcolor:h.gridcolor,gridwidth:h.gridwidth,layer:h.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:h._deprecated.title,titlefont:h._deprecated.titlefont}},i=I.exports=y({domain:o({name:"ternary"}),bgcolor:{valType:"color",dflt:s.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(e,I,F){var s=e("../../components/color"),o=e("../../plot_api/plot_template"),h=e("../../lib"),y=e("../subplot_defaults"),t=e("../cartesian/tick_label_defaults"),a=e("../cartesian/prefix_suffix_defaults"),i=e("../cartesian/tick_mark_defaults"),n=e("../cartesian/tick_value_defaults"),r=e("../cartesian/line_grid_defaults"),f=e("./layout_attributes"),u=["aaxis","baxis","caxis"];I.exports=function(b,g,_){y(b,g,_,{type:"ternary",attributes:f,handleDefaults:l,font:g.font,paper_bgcolor:g.paper_bgcolor})};function l(d,b,g,_){var p=g("bgcolor"),A=g("sum");_.bgColor=s.combine(p,_.paper_bgcolor);for(var c,S,T,x=0;x<u.length;x++)c=u[x],S=d[c]||{},T=o.newContainer(b,c),T._name=c,m(S,T,_,b);var w=b.aaxis,v=b.baxis,C=b.caxis;w.min+v.min+C.min>=A&&(w.min=0,v.min=0,C.min=0,d.aaxis&&delete d.aaxis.min,d.baxis&&delete d.baxis.min,d.caxis&&delete d.caxis.min)}function m(d,b,g,_){var p=f[b._name];function A(M,E){return h.coerce(d,b,p,M,E)}A("uirevision",_.uirevision),b.type="linear";var c=A("color"),S=c!==p.color.dflt?c:g.font.color,T=b._name,x=T.charAt(0).toUpperCase(),w="Component "+x,v=A("title.text",w);b._hovertitle=v===w?v:x,h.coerceFont(A,"title.font",{family:g.font.family,size:h.bigFont(g.font.size),color:S}),A("min"),n(d,b,A,"linear"),a(d,b,A,"linear"),t(d,b,A,"linear"),i(d,b,A,{outerTicks:!0});var C=A("showticklabels");C&&(h.coerceFont(A,"tickfont",{family:g.font.family,size:g.font.size,color:S}),A("tickangle"),A("tickformat")),r(d,b,A,{dfltColor:c,bgColor:g.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p}),A("hoverformat"),A("layer")}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(e,I,F){var s=e("@plotly/d3"),o=e("tinycolor2"),h=e("../../registry"),y=e("../../lib"),t=y.strTranslate,a=y._,i=e("../../components/color"),n=e("../../components/drawing"),r=e("../cartesian/set_convert"),f=e("../../lib/extend").extendFlat,u=e("../plots"),l=e("../cartesian/axes"),m=e("../../components/dragelement"),d=e("../../components/fx"),b=e("../../components/dragelement/helpers"),g=b.freeMode,_=b.rectMode,p=e("../../components/titles"),A=e("../cartesian/select").prepSelect,c=e("../cartesian/select").selectOnClick,S=e("../cartesian/select").clearSelect,T=e("../cartesian/select").clearSelectionsCache,x=e("../cartesian/constants");function w(B,$){this.id=B.id,this.graphDiv=B.graphDiv,this.init($),this.makeFramework($),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}I.exports=w;var v=w.prototype;v.init=function(B){this.container=B._ternarylayer,this.defs=B._defs,this.layoutId=B._uid,this.traceHash={},this.layers={}},v.plot=function(B,$){var W=this,re=$[W.id],Q=$._size;W._hasClipOnAxisFalse=!1;for(var Z=0;Z<B.length;Z++){var K=B[Z][0].trace;if(K.cliponaxis===!1){W._hasClipOnAxisFalse=!0;break}}W.updateLayers(re),W.adjustLayout(re,Q),u.generalUpdatePerTraceModule(W.graphDiv,W,B,re),W.layers.plotbg.select("path").call(i.fill,re.bgcolor)},v.makeFramework=function(B){var $=this,W=$.graphDiv,re=B[$.id],Q=$.clipId="clip"+$.layoutId+$.id,Z=$.clipIdRelative="clip-relative"+$.layoutId+$.id;$.clipDef=y.ensureSingleById(B._clips,"clipPath",Q,function(K){K.append("path").attr("d","M0,0Z")}),$.clipDefRelative=y.ensureSingleById(B._clips,"clipPath",Z,function(K){K.append("path").attr("d","M0,0Z")}),$.plotContainer=y.ensureSingle($.container,"g",$.id),$.updateLayers(re),n.setClipUrl($.layers.backplot,Q,W),n.setClipUrl($.layers.grids,Q,W)},v.updateLayers=function(B){var $=this,W=$.layers,re=["draglayer","plotbg","backplot","grids"];B.aaxis.layer==="below traces"&&re.push("aaxis","aline"),B.baxis.layer==="below traces"&&re.push("baxis","bline"),B.caxis.layer==="below traces"&&re.push("caxis","cline"),re.push("frontplot"),B.aaxis.layer==="above traces"&&re.push("aaxis","aline"),B.baxis.layer==="above traces"&&re.push("baxis","bline"),B.caxis.layer==="above traces"&&re.push("caxis","cline");var Q=$.plotContainer.selectAll("g.toplevel").data(re,String),Z=["agrid","bgrid","cgrid"];Q.enter().append("g").attr("class",function(K){return"toplevel "+K}).each(function(K){var le=s.select(this);W[K]=le,K==="frontplot"?le.append("g").classed("scatterlayer",!0):K==="backplot"?le.append("g").classed("maplayer",!0):K==="plotbg"?le.append("path").attr("d","M0,0Z"):K==="aline"||K==="bline"||K==="cline"?le.append("path"):K==="grids"&&Z.forEach(function(fe){W[fe]=le.append("g").classed("grid "+fe,!0)})}),Q.order()};var C=Math.sqrt(4/3);v.adjustLayout=function(B,$){var W=this,re=B.domain,Q=(re.x[0]+re.x[1])/2,Z=(re.y[0]+re.y[1])/2,K=re.x[1]-re.x[0],le=re.y[1]-re.y[0],fe=K*$.w,ue=le*$.h,V=B.sum,j=B.aaxis.min,ee=B.baxis.min,q=B.caxis.min,X,J,ie,ne,oe,se;fe>C*ue?(ne=ue,ie=ne*C):(ie=fe,ne=ie/C),oe=K*ie/fe,se=le*ne/ue,X=$.l+$.w*Q-ie/2,J=$.t+$.h*(1-Z)-ne/2,W.x0=X,W.y0=J,W.w=ie,W.h=ne,W.sum=V,W.xaxis={type:"linear",range:[j+2*q-V,V-j-2*ee],domain:[Q-oe/2,Q+oe/2],_id:"x"},r(W.xaxis,W.graphDiv._fullLayout),W.xaxis.setScale(),W.xaxis.isPtWithinRange=function(Re){return Re.a>=W.aaxis.range[0]&&Re.a<=W.aaxis.range[1]&&Re.b>=W.baxis.range[1]&&Re.b<=W.baxis.range[0]&&Re.c>=W.caxis.range[1]&&Re.c<=W.caxis.range[0]},W.yaxis={type:"linear",range:[j,V-ee-q],domain:[Z-se/2,Z+se/2],_id:"y"},r(W.yaxis,W.graphDiv._fullLayout),W.yaxis.setScale(),W.yaxis.isPtWithinRange=function(){return!0};var me=W.yaxis.domain[0],ce=W.aaxis=f({},B.aaxis,{range:[j,V-ee-q],side:"left",tickangle:(+B.aaxis.tickangle||0)-30,domain:[me,me+se*C],anchor:"free",position:0,_id:"y",_length:ie});r(ce,W.graphDiv._fullLayout),ce.setScale();var pe=W.baxis=f({},B.baxis,{range:[V-j-q,ee],side:"bottom",domain:W.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ie});r(pe,W.graphDiv._fullLayout),pe.setScale();var xe=W.caxis=f({},B.caxis,{range:[V-j-ee,q],side:"right",tickangle:(+B.caxis.tickangle||0)+30,domain:[me,me+se*C],anchor:"free",position:0,_id:"y",_length:ie});r(xe,W.graphDiv._fullLayout),xe.setScale();var Se="M"+X+","+(J+ne)+"h"+ie+"l-"+ie/2+",-"+ne+"Z";W.clipDef.select("path").attr("d",Se),W.layers.plotbg.select("path").attr("d",Se);var Ae="M0,"+ne+"h"+ie+"l-"+ie/2+",-"+ne+"Z";W.clipDefRelative.select("path").attr("d",Ae);var Ce=t(X,J);W.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ce),W.clipDefRelative.select("path").attr("transform",null);var Ee=t(X-pe._offset,J+ne);W.layers.baxis.attr("transform",Ee),W.layers.bgrid.attr("transform",Ee);var Oe=t(X+ie/2,J)+"rotate(30)"+t(0,-ce._offset);W.layers.aaxis.attr("transform",Oe),W.layers.agrid.attr("transform",Oe);var _e=t(X+ie/2,J)+"rotate(-30)"+t(0,-xe._offset);W.layers.caxis.attr("transform",_e),W.layers.cgrid.attr("transform",_e),W.drawAxes(!0),W.layers.aline.select("path").attr("d",ce.showline?"M"+X+","+(J+ne)+"l"+ie/2+",-"+ne:"M0,0").call(i.stroke,ce.linecolor||"#000").style("stroke-width",(ce.linewidth||0)+"px"),W.layers.bline.select("path").attr("d",pe.showline?"M"+X+","+(J+ne)+"h"+ie:"M0,0").call(i.stroke,pe.linecolor||"#000").style("stroke-width",(pe.linewidth||0)+"px"),W.layers.cline.select("path").attr("d",xe.showline?"M"+(X+ie/2)+","+J+"l"+ie/2+","+ne:"M0,0").call(i.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),W.graphDiv._context.staticPlot||W.initInteractions(),n.setClipUrl(W.layers.frontplot,W._hasClipOnAxisFalse?null:W.clipId,W.graphDiv)},v.drawAxes=function(B){var $=this,W=$.graphDiv,re=$.id.substr(7)+"title",Q=$.layers,Z=$.aaxis,K=$.baxis,le=$.caxis;if($.drawAx(Z),$.drawAx(K),$.drawAx(le),B){var fe=Math.max(Z.showticklabels?Z.tickfont.size/2:0,(le.showticklabels?le.tickfont.size*.75:0)+(le.ticks==="outside"?le.ticklen*.87:0)),ue=(K.showticklabels?K.tickfont.size:0)+(K.ticks==="outside"?K.ticklen:0)+3;Q["a-title"]=p.draw(W,"a"+re,{propContainer:Z,propName:$.id+".aaxis.title",placeholder:a(W,"Click to enter Component A title"),attributes:{x:$.x0+$.w/2,y:$.y0-Z.title.font.size/3-fe,"text-anchor":"middle"}}),Q["b-title"]=p.draw(W,"b"+re,{propContainer:K,propName:$.id+".baxis.title",placeholder:a(W,"Click to enter Component B title"),attributes:{x:$.x0-ue,y:$.y0+$.h+K.title.font.size*.83+ue,"text-anchor":"middle"}}),Q["c-title"]=p.draw(W,"c"+re,{propContainer:le,propName:$.id+".caxis.title",placeholder:a(W,"Click to enter Component C title"),attributes:{x:$.x0+$.w+ue,y:$.y0+$.h+le.title.font.size*.83+ue,"text-anchor":"middle"}})}},v.drawAx=function(B){var $=this,W=$.graphDiv,re=B._name,Q=re.charAt(0),Z=B._id,K=$.layers[re],le=30,fe=Q+"tickLayout",ue=M(B);$[fe]!==ue&&(K.selectAll("."+Z+"tick").remove(),$[fe]=ue),B.setScale();var V=l.calcTicks(B),j=l.clipEnds(B,V),ee=l.makeTransTickFn(B),q=l.getTickSigns(B)[2],X=y.deg2rad(le),J=q*(B.linewidth||1)/2,ie=q*B.ticklen,ne=$.w,oe=$.h,se=Q==="b"?"M0,"+J+"l"+Math.sin(X)*ie+","+Math.cos(X)*ie:"M"+J+",0l"+Math.cos(X)*ie+","+-Math.sin(X)*ie,me={a:"M0,0l"+oe+",-"+ne/2,b:"M0,0l-"+ne/2+",-"+oe,c:"M0,0l-"+oe+","+ne/2}[Q];l.drawTicks(W,B,{vals:B.ticks==="inside"?j:V,layer:K,path:se,transFn:ee,crisp:!1}),l.drawGrid(W,B,{vals:j,layer:$.layers[Q+"grid"],path:me,transFn:ee,crisp:!1}),l.drawLabels(W,B,{vals:V,layer:K,transFn:ee,labelFns:l.makeLabelFns(B,0,le)})};function M(B){return B.ticks+String(B.ticklen)+String(B.showticklabels)}var E=x.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(E*.87+4.5)+"l2.6,1.5l-"+E/2+","+E*.87+"Z",z="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-2.6,1.5l"+E/2+","+E*.87+"Z",O="m0,1l"+E/2+","+E*.87+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-"+(E/2+2.6)+","+(E*.87+4.5)+"l2.6,1.5l"+E/2+",-"+E*.87+"Z",R="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",D=!0;v.clearSelect=function(){T(this.dragOptions),S(this.dragOptions.gd)},v.initInteractions=function(){var B=this,$=B.layers.plotbg.select("path").node(),W=B.graphDiv,re=W._fullLayout._zoomlayer,Q,Z;this.dragOptions={element:$,gd:W,plotinfo:{id:B.id,domain:W._fullLayout[B.id].domain,xaxis:B.xaxis,yaxis:B.yaxis},subplot:B.id,prepFn:function(Ee,Oe,_e){B.dragOptions.xaxes=[B.xaxis],B.dragOptions.yaxes=[B.yaxis],Q=W._fullLayout._invScaleX,Z=W._fullLayout._invScaleY;var Re=B.dragOptions.dragmode=W._fullLayout.dragmode;g(Re)?B.dragOptions.minDrag=1:B.dragOptions.minDrag=void 0,Re==="zoom"?(B.dragOptions.moveFn=pe,B.dragOptions.clickFn=ne,B.dragOptions.doneFn=xe,oe(Ee,Oe,_e)):Re==="pan"?(B.dragOptions.moveFn=Ae,B.dragOptions.clickFn=ne,B.dragOptions.doneFn=Ce,Se(),B.clearSelect(W)):(_(Re)||g(Re))&&A(Ee,Oe,_e,B.dragOptions,Re)}};var K,le,fe,ue,V,j,ee,q,X,J;function ie(Ee){var Oe={};return Oe[B.id+".aaxis.min"]=Ee.a,Oe[B.id+".baxis.min"]=Ee.b,Oe[B.id+".caxis.min"]=Ee.c,Oe}function ne(Ee,Oe){var _e=W._fullLayout.clickmode;H(W),Ee===2&&(W.emit("plotly_doubleclick",null),h.call("_guiRelayout",W,ie({a:0,b:0,c:0}))),_e.indexOf("select")>-1&&Ee===1&&c(Oe,W,[B.xaxis],[B.yaxis],B.id,B.dragOptions),_e.indexOf("event")>-1&&d.click(W,Oe,B.id)}function oe(Ee,Oe,_e){var Re=$.getBoundingClientRect();K=Oe-Re.left,le=_e-Re.top,W._fullLayout._calcInverseTransform(W);var Ve=W._fullLayout._invTransform,Je=y.apply3DTransform(Ve)(K,le);K=Je[0],le=Je[1],fe={a:B.aaxis.range[0],b:B.baxis.range[1],c:B.caxis.range[1]},V=fe,ue=B.aaxis.range[1]-fe.a,j=o(B.graphDiv._fullLayout[B.id].bgcolor).getLuminance(),ee="M0,"+B.h+"L"+B.w/2+", 0L"+B.w+","+B.h+"Z",q=!1,X=re.append("path").attr("class","zoombox").attr("transform",t(B.x0,B.y0)).style({fill:j>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ee),J=re.append("path").attr("class","zoombox-corners").attr("transform",t(B.x0,B.y0)).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),B.clearSelect(W)}function se(Ee,Oe){return 1-Oe/B.h}function me(Ee,Oe){return 1-(Ee+(B.h-Oe)/Math.sqrt(3))/B.w}function ce(Ee,Oe){return(Ee-(B.h-Oe)/Math.sqrt(3))/B.w}function pe(Ee,Oe){var _e=K+Ee*Q,Re=le+Oe*Z,Ve=Math.max(0,Math.min(1,se(K,le),se(_e,Re))),Je=Math.max(0,Math.min(1,me(K,le),me(_e,Re))),ze=Math.max(0,Math.min(1,ce(K,le),ce(_e,Re))),De=(Ve/2+ze)*B.w,je=(1-Ve/2-Je)*B.w,dt=(De+je)/2,Et=je-De,$t=(1-Ve)*B.h,wt=$t-Et/C;Et<x.MINZOOM?(V=fe,X.attr("d",ee),J.attr("d","M0,0Z")):(V={a:fe.a+Ve*ue,b:fe.b+Je*ue,c:fe.c+ze*ue},X.attr("d",ee+"M"+De+","+$t+"H"+je+"L"+dt+","+wt+"L"+De+","+$t+"Z"),J.attr("d","M"+K+","+le+R+"M"+De+","+$t+L+"M"+je+","+$t+z+"M"+dt+","+wt+O)),q||(X.transition().style("fill",j>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),J.transition().style("opacity",1).duration(200),q=!0),W.emit("plotly_relayouting",ie(V))}function xe(){H(W),V!==fe&&(h.call("_guiRelayout",W,ie(V)),D&&W.data&&W._context.showTips&&(y.notifier(a(W,"Double-click to zoom back out"),"long"),D=!1))}function Se(){fe={a:B.aaxis.range[0],b:B.baxis.range[1],c:B.caxis.range[1]},V=fe}function Ae(Ee,Oe){var _e=Ee/B.xaxis._m,Re=Oe/B.yaxis._m;V={a:fe.a-Re,b:fe.b+(_e+Re)/2,c:fe.c-(_e-Re)/2};var Ve=[V.a,V.b,V.c].sort(y.sorterAsc),Je={a:Ve.indexOf(V.a),b:Ve.indexOf(V.b),c:Ve.indexOf(V.c)};Ve[0]<0&&(Ve[1]+Ve[0]/2<0?(Ve[2]+=Ve[0]+Ve[1],Ve[0]=Ve[1]=0):(Ve[2]+=Ve[0]/2,Ve[1]+=Ve[0]/2,Ve[0]=0),V={a:Ve[Je.a],b:Ve[Je.b],c:Ve[Je.c]},Oe=(fe.a-V.a)*B.yaxis._m,Ee=(fe.c-V.c-fe.b+V.b)*B.xaxis._m);var ze=t(B.x0+Ee,B.y0+Oe);B.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ze);var De=t(-Ee,-Oe);B.clipDefRelative.select("path").attr("transform",De),B.aaxis.range=[V.a,B.sum-V.b-V.c],B.baxis.range=[B.sum-V.a-V.c,V.b],B.caxis.range=[B.sum-V.a-V.b,V.c],B.drawAxes(!1),B._hasClipOnAxisFalse&&B.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,B),W.emit("plotly_relayouting",ie(V))}function Ce(){h.call("_guiRelayout",W,ie(V))}$.onmousemove=function(Ee){d.hover(W,Ee,B.id),W._fullLayout._lasthover=$,W._fullLayout._hoversubplot=B.id},$.onmouseout=function(Ee){W._dragging||m.unhover(W,Ee)},m.init(this.dragOptions)};function H(B){s.select(B).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(e,I,F){var s=e("./lib/loggers"),o=e("./lib/noop"),h=e("./lib/push_unique"),y=e("./lib/is_plain_object"),t=e("./lib/dom").addStyleRule,a=e("./lib/extend"),i=e("./plots/attributes"),n=e("./plots/layout_attributes"),r=a.extendFlat,f=a.extendDeepAll;F.modules={},F.allCategories={},F.allTypes=[],F.subplotsRegistry={},F.transformsRegistry={},F.componentsRegistry={},F.layoutArrayContainers=[],F.layoutArrayRegexes=[],F.traceLayoutAttributes={},F.localeRegistry={},F.apiMethodRegistry={},F.collectableSubplotTypes=null,F.register=function(T){if(F.collectableSubplotTypes=null,T)T&&!Array.isArray(T)&&(T=[T]);else throw new Error("No argument passed to Plotly.register.");for(var x=0;x<T.length;x++){var w=T[x];if(!w)throw new Error("Invalid module was attempted to be registered!");switch(w.moduleType){case"trace":u(w);break;case"transform":d(w);break;case"component":m(w);break;case"locale":b(w);break;case"apiMethod":var v=w.name;F.apiMethodRegistry[v]=w.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},F.getModule=function(S){var T=F.modules[c(S)];return T?T._module:!1},F.traceIs=function(S,T){if(S=c(S),S==="various")return!1;var x=F.modules[S];return x||(S&&s.log("Unrecognized trace type "+S+"."),x=F.modules[i.type.dflt]),!!x.categories[T]},F.getTransformIndices=function(S,T){for(var x=[],w=S.transforms||[],v=0;v<w.length;v++)w[v].type===T&&x.push(v);return x},F.hasTransform=function(S,T){for(var x=S.transforms||[],w=0;w<x.length;w++)if(x[w].type===T)return!0;return!1},F.getComponentMethod=function(S,T){var x=F.componentsRegistry[S];return x&&x[T]||o},F.call=function(){var S=arguments[0],T=[].slice.call(arguments,1);return F.apiMethodRegistry[S].apply(null,T)};function u(S){var T=S.name,x=S.categories,w=S.meta;if(F.modules[T]){s.log("Type "+T+" already registered");return}F.subplotsRegistry[S.basePlotModule.name]||l(S.basePlotModule);for(var v={},C=0;C<x.length;C++)v[x[C]]=!0,F.allCategories[x[C]]=!0;F.modules[T]={_module:S,categories:v},w&&Object.keys(w).length&&(F.modules[T].meta=w),F.allTypes.push(T);for(var M in F.componentsRegistry)_(M,T);S.layoutAttributes&&r(F.traceLayoutAttributes,S.layoutAttributes);var E=S.basePlotModule,L=E.name;if(L==="mapbox"){var z=E.constants.styleRules;for(var O in z)t(".js-plotly-plot .plotly .mapboxgl-"+O,z[O])}(L==="geo"||L==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function l(S){var T=S.name;if(F.subplotsRegistry[T]){s.log("Plot type "+T+" already registered.");return}g(S),F.subplotsRegistry[T]=S;for(var x in F.componentsRegistry)A(x,S.name)}function m(S){if(typeof S.name!="string")throw new Error("Component module *name* must be a string.");var T=S.name;F.componentsRegistry[T]=S,S.layoutAttributes&&(S.layoutAttributes._isLinkedToArray&&h(F.layoutArrayContainers,T),g(S));for(var x in F.modules)_(T,x);for(var w in F.subplotsRegistry)A(T,w);for(var v in F.transformsRegistry)p(T,v);S.schema&&S.schema.layout&&f(n,S.schema.layout)}function d(S){if(typeof S.name!="string")throw new Error("Transform module *name* must be a string.");var T="Transform module "+S.name,x=typeof S.transform=="function",w=typeof S.calcTransform=="function";if(!x&&!w)throw new Error(T+" is missing a *transform* or *calcTransform* method.");x&&w&&s.log([T+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),y(S.attributes)||s.log(T+" registered without an *attributes* object."),typeof S.supplyDefaults!="function"&&s.log(T+" registered without a *supplyDefaults* method."),F.transformsRegistry[S.name]=S;for(var v in F.componentsRegistry)p(v,S.name)}function b(S){var T=S.name,x=T.split("-")[0],w=S.dictionary,v=S.format,C=w&&Object.keys(w).length,M=v&&Object.keys(v).length,E=F.localeRegistry,L=E[T];if(L||(E[T]=L={}),x!==T){var z=E[x];z||(E[x]=z={}),C&&z.dictionary===L.dictionary&&(z.dictionary=w),M&&z.format===L.format&&(z.format=v)}C&&(L.dictionary=w),M&&(L.format=v)}function g(S){if(S.layoutAttributes){var T=S.layoutAttributes._arrayAttrRegexps;if(T)for(var x=0;x<T.length;x++)h(F.layoutArrayRegexes,T[x])}}function _(S,T){var x=F.componentsRegistry[S].schema;if(!(!x||!x.traces)){var w=x.traces[T];w&&f(F.modules[T]._module.attributes,w)}}function p(S,T){var x=F.componentsRegistry[S].schema;if(!(!x||!x.transforms)){var w=x.transforms[T];w&&f(F.transformsRegistry[T].attributes,w)}}function A(S,T){var x=F.componentsRegistry[S].schema;if(!(!x||!x.subplots)){var w=F.subplotsRegistry[T],v=w.layoutAttributes,C=w.attr==="subplot"?w.name:w.attr;Array.isArray(C)&&(C=C[0]);var M=x.subplots[C];v&&M&&f(v,M)}}function c(S){return typeof S=="object"&&(S=S.type),S}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(e,I,F){var s=e("../registry"),o=e("../lib"),h=o.extendFlat,y=o.extendDeep;function t(i){var n;switch(i){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}function a(i){var n=["xaxis","yaxis","zaxis"];return n.indexOf(i.slice(0,5))>-1}I.exports=function(n,r){var f,u=n.data,l=n.layout,m=y([],u),d=y({},l,t(r.tileClass)),b=n._context||{};if(r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){d.annotations=[];var g=Object.keys(d);for(f=0;f<g.length;f++)a(g[f])&&(d[g[f]].title={text:""});for(f=0;f<m.length;f++){var _=m[f];_.showscale=!1,_.marker&&(_.marker.showscale=!1),s.traceIs(_,"pie-like")&&(_.textposition="none")}}if(Array.isArray(r.annotations))for(f=0;f<r.annotations.length;f++)d.annotations.push(r.annotations[f]);var p=Object.keys(d).filter(function(x){return x.match(/^scene\d*$/)});if(p.length){var A={};for(r.tileClass==="thumbnail"&&(A={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),f=0;f<p.length;f++){var c=d[p[f]];c.xaxis||(c.xaxis={}),c.yaxis||(c.yaxis={}),c.zaxis||(c.zaxis={}),h(c.xaxis,A),h(c.yaxis,A),h(c.zaxis,A),c._scene=null}}var S=document.createElement("div");r.tileClass&&(S.className=r.tileClass);var T={gd:S,td:S,layout:d,data:m,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:b.mapboxAccessToken}};return r.setBackground!=="transparent"&&(T.config.setBackground=r.setBackground||"opaque"),T.gd.defaultLayout=t(r.tileClass),T}},{"../lib":503,"../registry":638}],640:[function(e,I,F){var s=e("../lib"),o=e("../plot_api/to_image"),h=e("./filesaver"),y=e("./helpers");function t(a,i){var n;return s.isPlainObject(a)||(n=s.getGraphDiv(a)),i=i||{},i.format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(r,f){n&&n._snapshotInProgress&&f(new Error("Snapshotting already in progress.")),s.isIE()&&i.format!=="svg"&&f(new Error(y.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var u=o(a,i),l=i.filename||a.fn||"newplot";l+="."+i.format.replace("-","."),u.then(function(m){return n&&(n._snapshotInProgress=!1),h(m,l,i.format)}).then(function(m){r(m)}).catch(function(m){n&&(n._snapshotInProgress=!1),f(m)})})}I.exports=t},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(e,I,F){var s=e("../lib"),o=e("./helpers");function h(y,t,a){var i=document.createElement("a"),n="download"in i,r=new Promise(function(f,u){var l,m;if(s.isIE())return l=o.createBlob(y,"svg"),window.navigator.msSaveBlob(l,t),l=null,f(t);if(n)return l=o.createBlob(y,a),m=o.createObjectURL(l),i.href=m,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),o.revokeObjectURL(m),l=null,f(t);if(s.isSafari()){var d=a==="svg"?",":";base64,";return o.octetStream(d+encodeURIComponent(y)),f(t)}u(new Error("download error"))});return r}I.exports=h},{"../lib":503,"./helpers":642}],642:[function(e,I,F){var s=e("../registry");F.getDelay=function(y){return y._has&&(y._has("gl3d")||y._has("gl2d")||y._has("mapbox"))?500:0},F.getRedrawFunc=function(y){return function(){s.getComponentMethod("colorbar","draw")(y)}},F.encodeSVG=function(y){return"data:image/svg+xml,"+encodeURIComponent(y)},F.encodeJSON=function(y){return"data:application/json,"+encodeURIComponent(y)};var o=window.URL||window.webkitURL;F.createObjectURL=function(y){return o.createObjectURL(y)},F.revokeObjectURL=function(y){return o.revokeObjectURL(y)},F.createBlob=function(y,t){if(t==="svg")return new window.Blob([y],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([y],{type:"application/json;charset=utf-8"});var a=h(window.atob(y));return new window.Blob([a],{type:"image/"+t})},F.octetStream=function(y){document.location.href="data:application/octet-stream"+y};function h(y){for(var t=y.length,a=new ArrayBuffer(t),i=new Uint8Array(a),n=0;n<t;n++)i[n]=y.charCodeAt(n);return a}F.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,F.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(e,I,F){var s=e("./helpers"),o={getDelay:s.getDelay,getRedrawFunc:s.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};I.exports=o},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(e,I,F){var s=e("../lib"),o=e("events").EventEmitter,h=e("./helpers");function y(t){var a=t.emitter||new o,i=new Promise(function(n,r){var f=window.Image,u=t.svg,l=t.format||"png";if(s.isIE()&&l!=="svg"){var m=new Error(h.MSG_IE_BAD_FORMAT);return r(m),t.promise?i:a.emit("error",m)}var d=t.canvas,b=t.scale||1,g=t.width||300,_=t.height||150,p=b*g,A=b*_,c=d.getContext("2d"),S=new f,T,x;l==="svg"||s.isSafari()?x=h.encodeSVG(u):(T=h.createBlob(u,"svg"),x=h.createObjectURL(T)),d.width=p,d.height=A,S.onload=function(){var w;switch(T=null,h.revokeObjectURL(x),l!=="svg"&&c.drawImage(S,0,0,p,A),l){case"jpeg":w=d.toDataURL("image/jpeg");break;case"png":w=d.toDataURL("image/png");break;case"webp":w=d.toDataURL("image/webp");break;case"svg":w=x;break;default:var v="Image format is not jpeg, png, svg or webp.";if(r(new Error(v)),!t.promise)return a.emit("error",v)}n(w),t.promise||a.emit("success",w)},S.onerror=function(w){if(T=null,h.revokeObjectURL(x),r(w),!t.promise)return a.emit("error",w)},S.src=x});return t.promise?i:a}I.exports=y},{"../lib":503,"./helpers":642,events:84}],645:[function(e,I,F){var s=e("events").EventEmitter,o=e("../registry"),h=e("../lib"),y=e("./helpers"),t=e("./cloneplot"),a=e("./tosvg"),i=e("./svgtoimg");function n(r,f){var u=new s,l=t(r,{format:"png"}),m=l.gd;m.style.position="absolute",m.style.left="-5000px",document.body.appendChild(m);function d(){var g=y.getDelay(m._fullLayout);setTimeout(function(){var _=a(m),p=document.createElement("canvas");p.id=h.randstr(),u=i({format:f.format,width:m._fullLayout.width,height:m._fullLayout.height,canvas:p,emitter:u,svg:_}),u.clean=function(){m&&document.body.removeChild(m)}},g)}var b=y.getRedrawFunc(m);return o.call("_doPlot",m,l.data,l.layout,l.config).then(b).then(d).catch(function(g){u.emit("error",g)}),u}I.exports=n},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(e,I,F){var s=e("@plotly/d3"),o=e("../lib"),h=e("../components/drawing"),y=e("../components/color"),t=e("../constants/xmlns_namespaces"),a=/"/g,i="TOBESTRIPPED",n=new RegExp('("'+i+")|("+i+'")',"g");function r(u){var l=s.select("body").append("div").style({display:"none"}).html(""),m=u.replace(/(&[^;]*;)/gi,function(d){return d==="&lt;"?"&#60;":d==="&rt;"?"&#62;":d.indexOf("<")!==-1||d.indexOf(">")!==-1?"":l.html(d).text()});return l.remove(),m}function f(u){return u.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}I.exports=function(l,m,d){var b=l._fullLayout,g=b._paper,_=b._toppaper,p=b.width,A=b.height,c;g.insert("rect",":first-child").call(h.setRect,0,0,p,A).call(y.fill,b.paper_bgcolor);var S=b._basePlotModules||[];for(c=0;c<S.length;c++){var T=S[c];T.toSVG&&T.toSVG(l)}if(_){var x=_.node().childNodes,w=Array.prototype.slice.call(x);for(c=0;c<w.length;c++){var v=w[c];v.childNodes.length&&g.node().appendChild(v)}}b._draggers&&b._draggers.remove(),g.node().style.background="",g.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var M=s.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){M.remove();return}else M.style({visibility:null,display:null});var E=this.style.fontFamily;E&&E.indexOf('"')!==-1&&M.style("font-family",E.replace(a,i))}),g.selectAll(".gradient_filled,.pattern_filled").each(function(){var M=s.select(this),E=this.style.fill;E&&E.indexOf("url(")!==-1&&M.style("fill",E.replace(a,i));var L=this.style.stroke;L&&L.indexOf("url(")!==-1&&M.style("stroke",L.replace(a,i))}),(m==="pdf"||m==="eps")&&g.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),g.node().setAttributeNS(t.xmlns,"xmlns",t.svg),g.node().setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),m==="svg"&&d&&(g.attr("width",d*p),g.attr("height",d*A),g.attr("viewBox","0 0 "+p+" "+A));var C=new window.XMLSerializer().serializeToString(g.node());return C=r(C),C=f(C),C=C.replace(n,"'"),o.isIE()&&(C=C.replace(/"/gi,"'"),C=C.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),C=C.replace(/(\\')/gi,'"')),C}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){for(var t=0;t<h.length;t++)h[t].i=t;s.mergeArray(y.text,h,"tx"),s.mergeArray(y.hovertext,h,"htx");var a=y.marker;if(a){s.mergeArray(a.opacity,h,"mo",!0),s.mergeArray(a.color,h,"mc");var i=a.line;i&&(s.mergeArray(i.color,h,"mlc"),s.mergeArrayCastPositive(i.width,h,"mlw"))}}},{"../../lib":503}],648:[function(e,I,F){var s=e("../scatter/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),a=e("../../plots/font_attributes"),i=e("./constants"),n=e("../../components/drawing/attributes").pattern,r=e("../../lib/extend").extendFlat,f=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=s.marker,l=u.line,m=r({},l.width,{dflt:0}),d=r({width:m,editType:"calc"},t("marker.line")),b=r({line:d,editType:"calc"},t("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:n});I.exports={x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),text:s.text,texttemplate:y({editType:"plot"},{keys:i.eventDataKeys}),hovertext:s.hovertext,hovertemplate:h({},{keys:i.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},f,{}),insidetextfont:r({},f,{}),outsidetextfont:r({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},s.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:b,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:s.selected.marker.opacity,color:s.selected.marker.color,editType:"style"},textfont:s.selected.textfont,editType:"style"},unselected:{marker:{opacity:s.unselected.marker.opacity,color:s.unselected.marker.color,editType:"style"},textfont:s.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927,"./constants":650}],649:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/align_period"),h=e("../../components/colorscale/helpers").hasColorscale,y=e("../../components/colorscale/calc"),t=e("./arrays_to_calcdata"),a=e("../scatter/calc_selection");I.exports=function(n,r){var f=s.getFromId(n,r.xaxis||"x"),u=s.getFromId(n,r.yaxis||"y"),l,m,d,b,g,_,p={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(l=f.makeCalcdata(r,"x",p),d=u.makeCalcdata(r,"y"),b=o(r,u,"y",d),g=!!r.yperiodalignment,_="y"):(l=u.makeCalcdata(r,"y",p),d=f.makeCalcdata(r,"x"),b=o(r,f,"x",d),g=!!r.xperiodalignment,_="x"),m=b.vals;for(var A=Math.min(m.length,l.length),c=new Array(A),S=0;S<A;S++)c[S]={p:m[S],s:l[S]},g&&(c[S].orig_p=d[S],c[S][_+"End"]=b.ends[S],c[S][_+"Start"]=b.starts[S]),r.ids&&(c[S].id=String(r.ids[S]));return h(r,"marker")&&y(n,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),h(r,"marker.line")&&y(n,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),t(c,r),a(c,r),c}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":647}],650:[function(e,I,F){I.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib").isArrayOrTypedArray,h=e("../../constants/numerical").BADNUM,y=e("../../registry"),t=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/constraints").getAxisGroup,i=e("./sieve.js");function n(C,M){for(var E=M.xaxis,L=M.yaxis,z=C._fullLayout,O=C._fullData,R=C.calcdata,D=[],H=[],B=0;B<O.length;B++){var $=O[B];if($.visible===!0&&y.traceIs($,"bar")&&$.xaxis===E._id&&$.yaxis===L._id&&($.orientation==="h"?D.push(R[B]):H.push(R[B]),$._computePh))for(var W=C.calcdata[B],re=0;re<W.length;re++)typeof W[re].ph0=="function"&&(W[re].ph0=W[re].ph0()),typeof W[re].ph1=="function"&&(W[re].ph1=W[re].ph1())}var Q={xCat:E.type==="category"||E.type==="multicategory",yCat:L.type==="category"||L.type==="multicategory",mode:z.barmode,norm:z.barnorm,gap:z.bargap,groupgap:z.bargroupgap};r(C,E,L,H,Q),r(C,L,E,D,Q)}function r(C,M,E,L,z){if(!!L.length){var O,R,D,H,B;switch(f(E,L),z.mode){case"overlay":u(M,E,L,z);break;case"group":for(O=[],R=[],D=0;D<L.length;D++)H=L[D],B=H[0].trace,B.offset===void 0?R.push(H):O.push(H);R.length&&l(C,M,E,R,z),O.length&&u(M,E,O,z);break;case"stack":case"relative":for(O=[],R=[],D=0;D<L.length;D++)H=L[D],B=H[0].trace,B.base===void 0?R.push(H):O.push(H);R.length&&m(C,M,E,R,z),O.length&&u(M,E,O,z);break}w(L,M)}}function f(C,M){var E,L;for(E=0;E<M.length;E++){var z=M[E],O=z[0].trace,R=O.type==="funnel"?O._base:O.base,D,H=O.orientation==="h"?O.xcalendar:O.ycalendar,B=C.type==="category"||C.type==="multicategory"?function(){return null}:C.d2c;if(o(R)){for(L=0;L<Math.min(R.length,z.length);L++)D=B(R[L],0,H),s(D)?(z[L].b=+D,z[L].hasB=1):z[L].b=0;for(;L<z.length;L++)z[L].b=0}else{D=B(R,0,H);var $=s(D);for(D=$?D:0,L=0;L<z.length;L++)z[L].b=D,$&&(z[L].hasB=1)}}}function u(C,M,E,L){for(var z=0;z<E.length;z++){var O=E[z],R=new i([O],{posAxis:C,sepNegVal:!1,overlapNoMerge:!L.norm});d(C,R,L),L.norm?(S(R),x(M,R,L)):A(M,R)}}function l(C,M,E,L,z){var O=new i(L,{posAxis:M,sepNegVal:!1,overlapNoMerge:!z.norm});b(C,M,O,z),T(O,M),z.norm?(S(O),x(E,O,z)):A(E,O)}function m(C,M,E,L,z){var O=new i(L,{posAxis:M,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});d(M,O,z),c(E,O,z);for(var R=0;R<L.length;R++)for(var D=L[R],H=0;H<D.length;H++){var B=D[H];if(B.s!==h){var $=B.b+B.s===O.get(B.p,B.s);$&&(B._outmost=!0)}}z.norm&&x(E,O,z)}function d(C,M,E){for(var L=M.minDiff,z=M.traces,O=L*(1-E.gap),R=O,D=R*(1-(E.groupgap||0)),H=-D/2,B=0;B<z.length;B++){var $=z[B],W=$[0].t;W.barwidth=D,W.poffset=H,W.bargroupwidth=O,W.bardelta=L}M.binWidth=z[0][0].t.barwidth/100,g(M),_(C,M),p(C,M)}function b(C,M,E,L){for(var z=C._fullLayout,O=E.positions,R=E.distinctPositions,D=E.minDiff,H=E.traces,B=H.length,$=O.length!==R.length,W=D*(1-L.gap),re=a(z,M._id)+H[0][0].trace.orientation,Q=z._alignmentOpts[re]||{},Z=0;Z<B;Z++){var K=H[Z],le=K[0].trace,fe=Q[le.alignmentgroup]||{},ue=Object.keys(fe.offsetGroups||{}).length,V;ue?V=W/ue:V=$?W/B:W;var j=V*(1-(L.groupgap||0)),ee;ue?ee=((2*le._offsetIndex+1-ue)*V-j)/2:ee=$?((2*Z+1-B)*V-j)/2:-j/2;var q=K[0].t;q.barwidth=j,q.poffset=ee,q.bargroupwidth=W,q.bardelta=D}E.binWidth=H[0][0].t.barwidth/100,g(E),_(M,E),p(M,E,$)}function g(C){var M=C.traces,E,L;for(E=0;E<M.length;E++){var z=M[E],O=z[0],R=O.trace,D=O.t,H=R._offset||R.offset,B=D.poffset,$;if(o(H)){for($=Array.prototype.slice.call(H,0,z.length),L=0;L<$.length;L++)s($[L])||($[L]=B);for(L=$.length;L<z.length;L++)$.push(B);D.poffset=$}else H!==void 0&&(D.poffset=H);var W=R._width||R.width,re=D.barwidth;if(o(W)){var Q=Array.prototype.slice.call(W,0,z.length);for(L=0;L<Q.length;L++)s(Q[L])||(Q[L]=re);for(L=Q.length;L<z.length;L++)Q.push(re);if(D.barwidth=Q,H===void 0){for($=[],L=0;L<z.length;L++)$.push(B+(re-Q[L])/2);D.poffset=$}}else W!==void 0&&(D.barwidth=W,H===void 0&&(D.poffset=B+(re-W)/2))}}function _(C,M){for(var E=M.traces,L=v(C),z=0;z<E.length;z++)for(var O=E[z],R=O[0].t,D=R.poffset,H=Array.isArray(D),B=R.barwidth,$=Array.isArray(B),W=0;W<O.length;W++){var re=O[W],Q=re.w=$?B[W]:B;re[L]=re.p+(H?D[W]:D)+Q/2}}function p(C,M,E){var L=M.traces,z=M.minDiff,O=z/2;t.minDtick(C,M.minDiff,M.distinctPositions[0],E);for(var R=0;R<L.length;R++){var D=L[R],H=D[0],B=H.trace,$=[],W,re,Q,Z;for(Z=0;Z<D.length;Z++)W=D[Z],re=W.p-O,Q=W.p+O,$.push(re,Q);if(B.width||B.offset){var K=H.t,le=K.poffset,fe=K.barwidth,ue=Array.isArray(le),V=Array.isArray(fe);for(Z=0;Z<D.length;Z++){W=D[Z];var j=ue?le[Z]:le,ee=V?fe[Z]:fe;re=W.p+j,Q=re+ee,$.push(re,Q)}}B._extremes[C._id]=t.findExtremes(C,$,{padded:!1})}}function A(C,M){for(var E=M.traces,L=v(C),z=0;z<E.length;z++){for(var O=E[z],R=O[0].trace,D=[],H=!1,B=0;B<O.length;B++){var $=O[B],W=$.b,re=W+$.s;$[L]=re,D.push(re),$.hasB&&D.push(W),(!$.hasB||!$.b)&&(H=!0)}R._extremes[C._id]=t.findExtremes(C,D,{tozero:H,padded:!0})}}function c(C,M,E){var L=v(C),z=M.traces,O,R,D,H,B,$;for(H=0;H<z.length;H++)if(O=z[H],R=O[0].trace,R.type==="funnel")for(B=0;B<O.length;B++)$=O[B],$.s!==h&&M.put($.p,-.5*$.s);for(H=0;H<z.length;H++){O=z[H],R=O[0].trace,D=R.type==="funnel";var W=[];for(B=0;B<O.length;B++)if($=O[B],$.s!==h){var re;D?re=$.s:re=$.s+$.b;var Q=M.put($.p,re),Z=Q+re;$.b=Q,$[L]=Z,E.norm||(W.push(Z),$.hasB&&W.push(Q))}E.norm||(R._extremes[C._id]=t.findExtremes(C,W,{tozero:!0,padded:!0}))}}function S(C){for(var M=C.traces,E=0;E<M.length;E++)for(var L=M[E],z=0;z<L.length;z++){var O=L[z];O.s!==h&&C.put(O.p,O.b+O.s)}}function T(C,M){for(var E=C.traces,L=0;L<E.length;L++){var z=E[L],O=z[0].trace;if(O.base===void 0)for(var R=new i([z],{posAxis:M,sepNegVal:!0,overlapNoMerge:!0}),D=0;D<z.length;D++){var H=z[D];if(H.p!==h){var B=R.put(H.p,H.b+H.s);B&&(H.b=B)}}}}function x(C,M,E){var L=M.traces,z=v(C),O=E.norm==="fraction"?1:100,R=O/1e9,D=C.l2c(C.c2l(0)),H=E.mode==="stack"?O:D;function B(ee){return s(C.c2l(ee))&&(ee<D-R||ee>H+R||!s(D))}for(var $=0;$<L.length;$++){for(var W=L[$],re=W[0].trace,Q=[],Z=!1,K=!1,le=0;le<W.length;le++){var fe=W[le];if(fe.s!==h){var ue=Math.abs(O/M.get(fe.p,fe.s));fe.b*=ue,fe.s*=ue;var V=fe.b,j=V+fe.s;fe[z]=j,Q.push(j),K=K||B(j),fe.hasB&&(Q.push(V),K=K||B(V)),(!fe.hasB||!fe.b)&&(Z=!0)}}re._extremes[C._id]=t.findExtremes(C,Q,{tozero:Z,padded:K})}}function w(C,M){var E=v(M),L={},z,O,R,D=1/0,H=-1/0;for(z=0;z<C.length;z++)for(R=C[z],O=0;O<R.length;O++){var B=R[O].p;s(B)&&(D=Math.min(D,B),H=Math.max(H,B))}var $=1e4/(H-D),W=L.round=function(ue){return String(Math.round($*(ue-D)))};for(z=0;z<C.length;z++){R=C[z],R[0].t.extents=L;var re=R[0].t.poffset,Q=Array.isArray(re);for(O=0;O<R.length;O++){var Z=R[O],K=Z[E]-Z.w/2;if(s(K)){var le=Z[E]+Z.w/2,fe=W(Z.p);L[fe]?L[fe]=[Math.min(K,L[fe][0]),Math.max(le,L[fe][1])]:L[fe]=[K,le]}Z.p0=Z.p+(Q?re[O]:re),Z.p1=Z.p0+Z.w,Z.s0=Z.b,Z.s1=Z.s0+Z.s}}}function v(C){return C._id.charAt(0)}I.exports={crossTraceCalc:n,setGroupPositions:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color"),h=e("../../registry"),y=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),a=e("./style_defaults"),i=e("../../plots/cartesian/constraints").getAxisGroup,n=e("./attributes"),r=s.coerceFont;function f(d,b,g,_){function p(x,w){return s.coerce(d,b,n,x,w)}var A=y(d,b,_,p);if(!A){b.visible=!1;return}t(d,b,_,p),p("xhoverformat"),p("yhoverformat"),p("orientation",b.x&&!b.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");m(d,b,_,p,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(d,b,p,g,_);var S=(b.marker.line||{}).color,T=h.getComponentMethod("errorbars","supplyDefaults");T(d,b,S||o.defaultLine,{axis:"y"}),T(d,b,S||o.defaultLine,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(b,p)}function u(d,b,g,_){var p=b.orientation,A=b[{v:"x",h:"y"}[p]+"axis"],c=i(g,A)+p,S=g._alignmentOpts||{},T=_("alignmentgroup"),x=S[c];x||(x=S[c]={});var w=x[T];w?w.traces.push(b):w=x[T]={traces:[b],alignmentIndex:Object.keys(x).length,offsetGroups:{}};var v=_("offsetgroup"),C=w.offsetGroups,M=C[v];v&&(M||(M=C[v]={offsetIndex:Object.keys(C).length}),b._offsetIndex=M.offsetIndex)}function l(d,b){var g,_;function p(c){return s.coerce(_._input,_,n,c)}if(b.barmode==="group")for(var A=0;A<d.length;A++)_=d[A],_.type==="bar"&&(g=_._input,u(g,_,b,p))}function m(d,b,g,_,p,A){A=A||{};var c=A.moduleHasSelected!==!1,S=A.moduleHasUnselected!==!1,T=A.moduleHasConstrain!==!1,x=A.moduleHasCliponaxis!==!1,w=A.moduleHasTextangle!==!1,v=A.moduleHasInsideanchor!==!1,C=!!A.hasPathbar,M=Array.isArray(p)||p==="auto",E=M||p==="inside",L=M||p==="outside";if(E||L){var z=r(_,"textfont",g.font),O=s.extendFlat({},z),R=d.textfont&&d.textfont.color,D=!R;if(D&&delete O.color,r(_,"insidetextfont",O),C){var H=s.extendFlat({},z);D&&delete H.color,r(_,"pathbar.textfont",H)}L&&r(_,"outsidetextfont",z),c&&_("selected.textfont.color"),S&&_("unselected.textfont.color"),T&&_("constraintext"),x&&_("cliponaxis"),w&&_("textangle"),_("texttemplate")}E&&v&&_("insidetextanchor")}I.exports={supplyDefaults:f,crossTraceDefaults:l,handleGroupingDefaults:u,handleText:m}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":648,"./style_defaults":663}],653:[function(e,I,F){I.exports=function(o,h,y){return o.x="xVal"in h?h.xVal:h.x,o.y="yVal"in h?h.yVal:h.y,h.xa&&(o.xaxis=h.xa),h.ya&&(o.yaxis=h.ya),y.orientation==="h"?(o.label=o.y,o.value=o.x):(o.label=o.x,o.value=o.y),o}},{}],654:[function(e,I,F){var s=e("fast-isnumeric"),o=e("tinycolor2"),h=e("../../lib").isArrayOrTypedArray;F.coerceString=function(y,t,a){if(typeof t=="string"){if(t||!y.noBlank)return t}else if((typeof t=="number"||t===!0)&&!y.strict)return String(t);return a!==void 0?a:y.dflt},F.coerceNumber=function(y,t,a){if(s(t)){t=+t;var i=y.min,n=y.max,r=i!==void 0&&t<i||n!==void 0&&t>n;if(!r)return t}return a!==void 0?a:y.dflt},F.coerceColor=function(y,t,a){return o(t).isValid()?t:a!==void 0?a:y.dflt},F.coerceEnumerated=function(y,t,a){return y.coerceNumber&&(t=+t),y.values.indexOf(t)!==-1?t:a!==void 0?a:y.dflt},F.getValue=function(y,t){var a;return Array.isArray(y)?t<y.length&&(a=y[t]):a=y,a},F.getLineWidth=function(y,t){var a=0<t.mlw?t.mlw:h(y.marker.line.width)?0:y.marker.line.width;return a}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(e,I,F){var s=e("../../components/fx"),o=e("../../registry"),h=e("../../components/color"),y=e("../../lib").fillText,t=e("./helpers").getLineWidth,a=e("../../plots/cartesian/axes").hoverLabelText,i=e("../../constants/numerical").BADNUM;function n(u,l,m,d,b){var g=r(u,l,m,d,b);if(g){var _=g.cd,p=_[0].trace,A=_[g.index];return g.color=f(p,A),o.getComponentMethod("errorbars","hoverInfo")(A,p,g),[g]}}function r(u,l,m,d,b){var g=u.cd,_=g[0].trace,p=g[0].t,A=d==="closest",c=_.type==="waterfall",S=u.maxHoverDistance,T=u.maxSpikeDistance,x,w,v,C,M,E,L;_.orientation==="h"?(x=m,w=l,v="y",C="x",M=le,E=Q):(x=l,w=m,v="x",C="y",E=le,M=Q);var z=_[v+"period"],O=A||z;function R(oe){return H(oe,-1)}function D(oe){return H(oe,1)}function H(oe,se){var me=oe.w;return oe[v]+se*me/2}function B(oe){return oe[v+"End"]-oe[v+"Start"]}var $=A?R:z?function(oe){return oe.p-B(oe)/2}:function(oe){return Math.min(R(oe),oe.p-p.bardelta/2)},W=A?D:z?function(oe){return oe.p+B(oe)/2}:function(oe){return Math.max(D(oe),oe.p+p.bardelta/2)};function re(oe,se,me){return b.finiteRange&&(me=0),s.inbox(oe-x,se-x,me+Math.min(1,Math.abs(se-oe)/L)-1)}function Q(oe){return re($(oe),W(oe),S)}function Z(oe){return re(R(oe),D(oe),T)}function K(oe){var se=oe[C];if(c){var me=Math.abs(oe.rawS)||0;w>0?se+=me:w<0&&(se-=me)}return se}function le(oe){var se=w,me=oe.b,ce=K(oe);return s.inbox(me-se,ce-se,S+(ce-se)/(ce-me)-1)}function fe(oe){var se=w,me=oe.b,ce=K(oe);return s.inbox(me-se,ce-se,T+(ce-se)/(ce-me)-1)}var ue=u[v+"a"],V=u[C+"a"];L=Math.abs(ue.r2c(ue.range[1])-ue.r2c(ue.range[0]));function j(oe){return(M(oe)+E(oe))/2}var ee=s.getDistanceFunction(d,M,E,j);if(s.getClosest(g,ee,u),u.index!==!1&&g[u.index].p!==i){O||($=function(oe){return Math.min(R(oe),oe.p-p.bargroupwidth/2)},W=function(oe){return Math.max(D(oe),oe.p+p.bargroupwidth/2)});var q=u.index,X=g[q],J=_.base?X.b+X.s:X.s;u[C+"0"]=u[C+"1"]=V.c2p(X[C],!0),u[C+"LabelVal"]=J;var ie=p.extents[p.extents.round(X.p)];u[v+"0"]=ue.c2p(A?$(X):ie[0],!0),u[v+"1"]=ue.c2p(A?W(X):ie[1],!0);var ne=X.orig_p!==void 0;return u[v+"LabelVal"]=ne?X.orig_p:X.p,u.labelLabel=a(ue,u[v+"LabelVal"],_[v+"hoverformat"]),u.valueLabel=a(V,u[C+"LabelVal"],_[C+"hoverformat"]),u.baseLabel=a(V,X.b,_[C+"hoverformat"]),u.spikeDistance=(fe(X)+Z(X))/2,u[v+"Spike"]=ue.c2p(X.p,!0),y(X,_,u),u.hovertemplate=_.hovertemplate,u}}function f(u,l){var m=l.mcc||u.marker.color,d=l.mlcc||u.marker.line.color,b=t(u,l);if(h.opacity(m))return m;if(h.opacity(d)&&b)return d}I.exports={hoverPoints:n,hoverOnBars:r,getTraceColor:f}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(e,I,F){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(e,I,F){I.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(e,I,F){var s=e("../../registry"),o=e("../../plots/cartesian/axes"),h=e("../../lib"),y=e("./layout_attributes");I.exports=function(t,a,i){function n(p,A){return h.coerce(t,a,y,p,A)}for(var r=!1,f=!1,u=!1,l={},m=n("barmode"),d=0;d<i.length;d++){var b=i[d];if(s.traceIs(b,"bar")&&b.visible)r=!0;else continue;if(m==="group"){var g=b.xaxis+b.yaxis;l[g]&&(u=!0),l[g]=!0}if(b.visible&&b.type==="histogram"){var _=o.getFromId({_fullLayout:a},b[b.orientation==="v"?"xaxis":"yaxis"]);_.type!=="category"&&(f=!0)}}if(!r){delete a.barmode;return}m!=="overlay"&&n("barnorm"),n("bargap",f&&!u?0:.2),n("bargroupgap")}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("../../lib"),y=e("../../lib/svg_text_utils"),t=e("../../components/color"),a=e("../../components/drawing"),i=e("../../registry"),n=e("../../plots/cartesian/axes").tickText,r=e("./uniform_text"),f=r.recordMinTextSize,u=r.clearMinTextSize,l=e("./style"),m=e("./helpers"),d=e("./constants"),b=e("./attributes"),g=b.text,_=b.textposition,p=e("../../components/fx/helpers").appendArrayPointValue,A=d.TEXTPAD;function c($){return $.id}function S($){if($.ids)return c}function T($,W){return $<W?1:-1}function x($,W,re,Q){var Z=[],K=[],le=Q?W:re,fe=Q?re:W;return Z[0]=le.c2p($.s0,!0),K[0]=fe.c2p($.p0,!0),Z[1]=le.c2p($.s1,!0),K[1]=fe.c2p($.p1,!0),Q?[Z,K]:[K,Z]}function w($,W,re,Q){if(!W.uniformtext.mode&&v(re)){var Z;return Q&&(Z=Q()),$.transition().duration(re.duration).ease(re.easing).each("end",function(){Z&&Z()}).each("interrupt",function(){Z&&Z()})}else return $}function v($){return $&&$.duration>0}function C($,W,re,Q,Z,K){var le=W.xaxis,fe=W.yaxis,ue=$._fullLayout;Z||(Z={mode:ue.barmode,norm:ue.barmode,gap:ue.bargap,groupgap:ue.bargroupgap},u("bar",ue));var V=h.makeTraceGroups(Q,re,"trace bars").each(function(j){var ee=s.select(this),q=j[0].trace,X=q.type==="waterfall",J=q.type==="funnel",ie=q.type==="bar",ne=ie||J,oe=0;X&&q.connector.visible&&q.connector.mode==="between"&&(oe=q.connector.line.width/2);var se=q.orientation==="h",me=v(Z),ce=h.ensureSingle(ee,"g","points"),pe=S(q),xe=ce.selectAll("g.point").data(h.identity,pe);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(Ae,Ce){var Ee=s.select(this),Oe=x(Ae,le,fe,se),_e=Oe[0][0],Re=Oe[0][1],Ve=Oe[1][0],Je=Oe[1][1],ze=(se?Re-_e:Je-Ve)===0;ze&&ne&&m.getLineWidth(q,Ae)&&(ze=!1),ze||(ze=!o(_e)||!o(Re)||!o(Ve)||!o(Je)),Ae.isBlank=ze,ze&&(se?Re=_e:Je=Ve),oe&&!ze&&(se?(_e-=T(_e,Re)*oe,Re+=T(_e,Re)*oe):(Ve-=T(Ve,Je)*oe,Je+=T(Ve,Je)*oe));var De,je;if(q.type==="waterfall"){if(!ze){var dt=q[Ae.dir].marker;De=dt.line.width,je=dt.color}}else De=m.getLineWidth(q,Ae),je=Ae.mc||q.marker.color;function Et(St){var ot=s.round(De/2%1,2);return Z.gap===0&&Z.groupgap===0?s.round(Math.round(St)-ot,2):St}function $t(St,ot,ht){return ht&&St===ot?St:Math.abs(St-ot)>=2?Et(St):St>ot?Math.ceil(St):Math.floor(St)}if(!$._context.staticPlot){var wt=t.opacity(je),Ot=wt<1||De>.01?Et:$t;_e=Ot(_e,Re,se),Re=Ot(Re,_e,se),Ve=Ot(Ve,Je,!se),Je=Ot(Je,Ve,!se)}var Vt=w(h.ensureSingle(Ee,"path"),ue,Z,K);if(Vt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Re-_e)*(Je-Ve))||ze&&$._context.staticPlot?"M0,0Z":"M"+_e+","+Ve+"V"+Je+"H"+Re+"V"+Ve+"Z").call(a.setClipUrl,W.layerClipId,$),!ue.uniformtext.mode&&me){var kt=a.makePointStyleFns(q);a.singlePointStyle(Ae,Vt,q,kt,$)}M($,W,Ee,j,Ce,_e,Re,Ve,Je,Z,K),W.layerClipId&&a.hideOutsideRangePoint(Ae,Ee.select("text"),le,fe,q.xcalendar,q.ycalendar)});var Se=q.cliponaxis===!1;a.setClipUrl(ee,Se?null:W.layerClipId,$)});i.getComponentMethod("errorbars","plot")($,V,W,Z)}function M($,W,re,Q,Z,K,le,fe,ue,V,j){var ee=W.xaxis,q=W.yaxis,X=$._fullLayout,J;function ie(St,ot,ht){var Ke=h.ensureSingle(St,"text").text(ot).attr({class:"bartext bartext-"+J,"text-anchor":"middle","data-notex":1}).call(a.font,ht).call(y.convertToTspans,$);return Ke}var ne=Q[0].trace,oe=ne.orientation==="h",se=R(X,Q,Z,ee,q);J=D(ne,Z);var me=V.mode==="stack"||V.mode==="relative",ce=Q[Z],pe=!me||ce._outmost;if(!se||J==="none"||(ce.isBlank||K===le||fe===ue)&&(J==="auto"||J==="inside")){re.select("text").remove();return}var xe=X.font,Se=l.getBarColor(Q[Z],ne),Ae=l.getInsideTextFont(ne,Z,xe,Se),Ce=l.getOutsideTextFont(ne,Z,xe),Ee=re.datum();oe?ee.type==="log"&&Ee.s0<=0&&(ee.range[0]<ee.range[1]?K=0:K=ee._length):q.type==="log"&&Ee.s0<=0&&(q.range[0]<q.range[1]?fe=q._length:fe=0);var Oe=Math.abs(le-K)-2*A,_e=Math.abs(ue-fe)-2*A,Re,Ve,Je,ze,De;if(J==="outside"&&!pe&&!ce.hasB&&(J="inside"),J==="auto")if(pe){J="inside",De=h.ensureUniformFontSize($,Ae),Re=ie(re,se,De),Ve=a.bBox(Re.node()),Je=Ve.width,ze=Ve.height;var je=Je>0&&ze>0,dt=Je<=Oe&&ze<=_e,Et=Je<=_e&&ze<=Oe,$t=oe?Oe>=Je*(_e/ze):_e>=ze*(Oe/Je);je&&(dt||Et||$t)?J="inside":(J="outside",Re.remove(),Re=null)}else J="inside";if(!Re){De=h.ensureUniformFontSize($,J==="outside"?Ce:Ae),Re=ie(re,se,De);var wt=Re.attr("transform");if(Re.attr("transform",""),Ve=a.bBox(Re.node()),Je=Ve.width,ze=Ve.height,Re.attr("transform",wt),Je<=0||ze<=0){Re.remove();return}}var Ot=ne.textangle,Vt,kt;J==="outside"?(kt=ne.constraintext==="both"||ne.constraintext==="outside",Vt=O(K,le,fe,ue,Ve,{isHorizontal:oe,constrained:kt,angle:Ot})):(kt=ne.constraintext==="both"||ne.constraintext==="inside",Vt=z(K,le,fe,ue,Ve,{isHorizontal:oe,constrained:kt,angle:Ot,anchor:ne.insidetextanchor})),Vt.fontSize=De.size,f(ne.type==="histogram"?"bar":ne.type,Vt,X),ce.transform=Vt,w(Re,X,V,j).attr("transform",h.getTextTransform(Vt))}function E($){return $==="auto"?0:$}function L($,W){var re=Math.PI/180*W,Q=Math.abs(Math.sin(re)),Z=Math.abs(Math.cos(re));return{x:$.width*Z+$.height*Q,y:$.width*Q+$.height*Z}}function z($,W,re,Q,Z,K){var le=!!K.isHorizontal,fe=!!K.constrained,ue=K.angle||0,V=K.anchor||"end",j=V==="end",ee=V==="start",q=K.leftToRight||0,X=(q+1)/2,J=1-X,ie=Z.width,ne=Z.height,oe=Math.abs(W-$),se=Math.abs(Q-re),me=oe>2*A&&se>2*A?A:0;oe-=2*me,se-=2*me;var ce=E(ue);ue==="auto"&&!(ie<=oe&&ne<=se)&&(ie>oe||ne>se)&&(!(ie>se||ne>oe)||ie<ne!=oe<se)&&(ce+=90);var pe=L(Z,ce),xe=1;fe&&(xe=Math.min(1,oe/pe.x,se/pe.y));var Se=Z.left*J+Z.right*X,Ae=(Z.top+Z.bottom)/2,Ce=($+A)*J+(W-A)*X,Ee=(re+Q)/2,Oe=0,_e=0;if(ee||j){var Re=(le?pe.x:pe.y)/2,Ve=le?T($,W):T(re,Q);le?ee?(Ce=$+Ve*me,Oe=-Ve*Re):(Ce=W-Ve*me,Oe=Ve*Re):ee?(Ee=re+Ve*me,_e=-Ve*Re):(Ee=Q-Ve*me,_e=Ve*Re)}return{textX:Se,textY:Ae,targetX:Ce,targetY:Ee,anchorX:Oe,anchorY:_e,scale:xe,rotate:ce}}function O($,W,re,Q,Z,K){var le=!!K.isHorizontal,fe=!!K.constrained,ue=K.angle||0,V=Z.width,j=Z.height,ee=Math.abs(W-$),q=Math.abs(Q-re),X;le?X=q>2*A?A:0:X=ee>2*A?A:0;var J=1;fe&&(J=le?Math.min(1,q/j):Math.min(1,ee/V));var ie=E(ue),ne=L(Z,ie),oe=(le?ne.x:ne.y)/2,se=(Z.left+Z.right)/2,me=(Z.top+Z.bottom)/2,ce=($+W)/2,pe=(re+Q)/2,xe=0,Se=0,Ae=le?T(W,$):T(re,Q);return le?(ce=W-Ae*X,xe=Ae*oe):(pe=Q+Ae*X,Se=-Ae*oe),{textX:se,textY:me,targetX:ce,targetY:pe,anchorX:xe,anchorY:Se,scale:J,rotate:ie}}function R($,W,re,Q,Z){var K=W[0].trace,le=K.texttemplate,fe;return le?fe=H($,W,re,Q,Z):K.textinfo?fe=B(W,re,Q,Z):fe=m.getValue(K.text,re),m.coerceString(g,fe)}function D($,W){var re=m.getValue($.textposition,W);return m.coerceEnumerated(_,re)}function H($,W,re,Q,Z){var K=W[0].trace,le=h.castOption(K,re,"texttemplate");if(!le)return"";var fe=K.type==="histogram",ue=K.type==="waterfall",V=K.type==="funnel",j=K.orientation==="h",ee,q,X,J;j?(ee="y",q=Z,X="x",J=Q):(ee="x",q=Q,X="y",J=Z);function ie(xe){return n(q,q.c2l(xe),!0).text}function ne(xe){return n(J,J.c2l(xe),!0).text}var oe=W[re],se={};se.label=oe.p,se.labelLabel=se[ee+"Label"]=ie(oe.p);var me=h.castOption(K,oe.i,"text");(me===0||me)&&(se.text=me),se.value=oe.s,se.valueLabel=se[X+"Label"]=ne(oe.s);var ce={};p(ce,K,oe.i),(fe||ce.x===void 0)&&(ce.x=j?se.value:se.label),(fe||ce.y===void 0)&&(ce.y=j?se.label:se.value),(fe||ce.xLabel===void 0)&&(ce.xLabel=j?se.valueLabel:se.labelLabel),(fe||ce.yLabel===void 0)&&(ce.yLabel=j?se.labelLabel:se.valueLabel),ue&&(se.delta=+oe.rawS||oe.s,se.deltaLabel=ne(se.delta),se.final=oe.v,se.finalLabel=ne(se.final),se.initial=se.final-se.delta,se.initialLabel=ne(se.initial)),V&&(se.value=oe.s,se.valueLabel=ne(se.value),se.percentInitial=oe.begR,se.percentInitialLabel=h.formatPercent(oe.begR),se.percentPrevious=oe.difR,se.percentPreviousLabel=h.formatPercent(oe.difR),se.percentTotal=oe.sumR,se.percenTotalLabel=h.formatPercent(oe.sumR));var pe=h.castOption(K,oe.i,"customdata");return pe&&(se.customdata=pe),h.texttemplateString(le,se,$._d3locale,ce,se,K._meta||{})}function B($,W,re,Q){var Z=$[0].trace,K=Z.orientation==="h",le=Z.type==="waterfall",fe=Z.type==="funnel";function ue(pe){var xe=K?Q:re;return n(xe,pe,!0).text}function V(pe){var xe=K?re:Q;return n(xe,+pe,!0).text}var j=Z.textinfo,ee=$[W],q=j.split("+"),X=[],J,ie=function(pe){return q.indexOf(pe)!==-1};if(ie("label")&&X.push(ue($[W].p)),ie("text")&&(J=h.castOption(Z,ee.i,"text"),(J===0||J)&&X.push(J)),le){var ne=+ee.rawS||ee.s,oe=ee.v,se=oe-ne;ie("initial")&&X.push(V(se)),ie("delta")&&X.push(V(ne)),ie("final")&&X.push(V(oe))}if(fe){ie("value")&&X.push(V(ee.s));var me=0;ie("percent initial")&&me++,ie("percent previous")&&me++,ie("percent total")&&me++;var ce=me>1;ie("percent initial")&&(J=h.formatPercent(ee.begR),ce&&(J+=" of initial"),X.push(J)),ie("percent previous")&&(J=h.formatPercent(ee.difR),ce&&(J+=" of previous"),X.push(J)),ie("percent total")&&(J=h.formatPercent(ee.sumR),ce&&(J+=" of total"),X.push(J))}return X.join("<br>")}I.exports={plot:C,toMoveInsideBar:z}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(e,I,F){I.exports=function(h,y){var t=h.cd,a=h.xaxis,i=h.yaxis,n=t[0].trace,r=n.type==="funnel",f=n.orientation==="h",u=[],l;if(y===!1)for(l=0;l<t.length;l++)t[l].selected=0;else for(l=0;l<t.length;l++){var m=t[l],d="ct"in m?m.ct:s(m,a,i,f,r);y.contains(d,!1,l,h)?(u.push({pointNumber:l,x:a.c2d(m.x),y:i.c2d(m.y)}),m.selected=1):m.selected=0}return u};function s(o,h,y,t,a){var i=h.c2p(t?o.s0:o.p0,!0),n=h.c2p(t?o.s1:o.p1,!0),r=y.c2p(t?o.p0:o.s0,!0),f=y.c2p(t?o.p1:o.s1,!0);return a?[(i+n)/2,(r+f)/2]:t?[n,(r+f)/2]:[(i+n)/2,f]}},{}],661:[function(e,I,F){I.exports=h;var s=e("../../lib").distinctVals,o=e("../../constants/numerical").BADNUM;function h(y,t){this.traces=y,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var a=1/0,i=[],n=0;n<y.length;n++){for(var r=y[n],f=0;f<r.length;f++){var u=r[f];u.p!==o&&i.push(u.p)}r[0]&&r[0].width1&&(a=Math.min(r[0].width1,a))}this.positions=i;var l=s(i);this.distinctPositions=l.vals,l.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(l.minDiff,a);var m=(t.posAxis||{}).type;(m==="category"||m==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}h.prototype.put=function(t,a){var i=this.getLabel(t,a),n=this.bins[i]||0;return this.bins[i]=n+a,n},h.prototype.get=function(t,a){var i=this.getLabel(t,a);return this.bins[i]||0},h.prototype.getLabel=function(t,a){var i=a<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?t:Math.round(t/this.binWidth);return i+n}},{"../../constants/numerical":479,"../../lib":503}],662:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/color"),h=e("../../components/drawing"),y=e("../../lib"),t=e("../../registry"),a=e("./uniform_text").resizeText,i=e("./attributes"),n=i.textfont,r=i.insidetextfont,f=i.outsidetextfont,u=e("./helpers");function l(w){var v=s.select(w).selectAll("g.barlayer").selectAll("g.trace");a(w,v,"bar");var C=v.size(),M=w._fullLayout;v.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){(M.barmode==="stack"&&C>1||M.bargap===0&&M.bargroupgap===0&&!E[0].trace.marker.line.width)&&s.select(this).attr("shape-rendering","crispEdges")}),v.selectAll("g.points").each(function(E){var L=s.select(this),z=E[0].trace;m(L,z,w)}),t.getComponentMethod("errorbars","style")(v)}function m(w,v,C){h.pointStyle(w.selectAll("path"),v,C),d(w,v,C)}function d(w,v,C){w.selectAll("text").each(function(M){var E=s.select(this),L=y.ensureUniformFontSize(C,p(E,M,v,C));h.font(E,L)})}function b(w,v,C){var M=v[0].trace;M.selectedpoints?g(C,M,w):(m(C,M,w),t.getComponentMethod("errorbars","style")(C))}function g(w,v,C){h.selectedPointStyle(w.selectAll("path"),v),_(w.selectAll("text"),v,C)}function _(w,v,C){w.each(function(M){var E=s.select(this),L;if(M.selected){L=y.ensureUniformFontSize(C,p(E,M,v,C));var z=v.selected.textfont&&v.selected.textfont.color;z&&(L.color=z),h.font(E,L)}else h.selectedTextStyle(E,v)})}function p(w,v,C,M){var E=M._fullLayout.font,L=C.textfont;if(w.classed("bartext-inside")){var z=x(v,C);L=c(C,v.i,E,z)}else w.classed("bartext-outside")&&(L=S(C,v.i,E));return L}function A(w,v,C){return T(n,w.textfont,v,C)}function c(w,v,C,M){var E=A(w,v,C),L=w._input.textfont===void 0||w._input.textfont.color===void 0||Array.isArray(w.textfont.color)&&w.textfont.color[v]===void 0;return L&&(E={color:o.contrast(M),family:E.family,size:E.size}),T(r,w.insidetextfont,v,E)}function S(w,v,C){var M=A(w,v,C);return T(f,w.outsidetextfont,v,M)}function T(w,v,C,M){v=v||{};var E=u.getValue(v.family,C),L=u.getValue(v.size,C),z=u.getValue(v.color,C);return{family:u.coerceString(w.family,E,M.family),size:u.coerceNumber(w.size,L,M.size),color:u.coerceColor(w.color,z,M.color)}}function x(w,v){return v.type==="waterfall"?v[w.dir].marker.color:w.mcc||w.mc||v.marker.color}I.exports={style:l,styleTextPoints:d,styleOnSelect:b,getInsideTextFont:c,getOutsideTextFont:S,getBarColor:x,resizeText:a}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(e,I,F){var s=e("../../components/color"),o=e("../../components/colorscale/helpers").hasColorscale,h=e("../../components/colorscale/defaults"),y=e("../../lib").coercePattern;I.exports=function(a,i,n,r,f){var u=n("marker.color",r),l=o(a,"marker");l&&h(a,i,f,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",s.defaultLine),o(a,"marker.line")&&h(a,i,f,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),y(n,"marker.pattern",u,l),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib");function h(i,n,r){var f=i._fullLayout,u=f["_"+r+"Text_minsize"];if(u){var l=f.uniformtext.mode==="hide",m;switch(r){case"funnelarea":case"pie":case"sunburst":m="g.slice";break;case"treemap":case"icicle":m="g.slice, g.pathbar";break;default:m="g.points > g.point"}n.selectAll(m).each(function(d){var b=d.transform;if(b){b.scale=l&&b.hide?0:u/b.fontSize;var g=s.select(this).select("text");g.attr("transform",o.getTextTransform(b))}})}}function y(i,n,r){if(r.uniformtext.mode){var f=a(i),u=r.uniformtext.minsize,l=n.scale*n.fontSize;n.hide=l<u,r[f]=r[f]||1/0,n.hide||(r[f]=Math.min(r[f],Math.max(l,u)))}}function t(i,n){var r=a(i);n[r]=void 0}function a(i){return"_"+i+"Text_minsize"}I.exports={recordMinTextSize:y,clearMinTextSize:t,resizeText:h}},{"../../lib":503,"@plotly/d3":58}],665:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../lib/extend").extendFlat,h=e("../scatterpolar/attributes"),y=e("../bar/attributes");I.exports={r:h.r,theta:h.theta,r0:h.r0,dr:h.dr,theta0:h.theta0,dtheta:h.dtheta,thetaunit:h.thetaunit,base:o({},y.base,{}),offset:o({},y.offset,{}),width:o({},y.width,{}),text:o({},y.text,{}),hovertext:o({},y.hovertext,{}),marker:y.marker,hoverinfo:h.hoverinfo,hovertemplate:s(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1002}],666:[function(e,I,F){var s=e("../../components/colorscale/helpers").hasColorscale,o=e("../../components/colorscale/calc"),h=e("../bar/arrays_to_calcdata"),y=e("../bar/cross_trace_calc").setGroupPositions,t=e("../scatter/calc_selection"),a=e("../../registry").traceIs,i=e("../../lib").extendFlat;function n(f,u){for(var l=f._fullLayout,m=u.subplot,d=l[m].radialaxis,b=l[m].angularaxis,g=d.makeCalcdata(u,"r"),_=b.makeCalcdata(u,"theta"),p=u._length,A=new Array(p),c=g,S=_,T=0;T<p;T++)A[T]={p:S[T],s:c[T]};function x(w){var v=u[w];v!==void 0&&(u["_"+w]=Array.isArray(v)?b.makeCalcdata(u,w):b.d2c(v,u.thetaunit))}return b.type==="linear"&&(x("width"),x("offset")),s(u,"marker")&&o(f,u,{vals:u.marker.color,containerStr:"marker",cLetter:"c"}),s(u,"marker.line")&&o(f,u,{vals:u.marker.line.color,containerStr:"marker.line",cLetter:"c"}),h(A,u),t(A,u),A}function r(f,u,l){for(var m=f.calcdata,d=[],b=0;b<m.length;b++){var g=m[b],_=g[0].trace;_.visible===!0&&a(_,"bar")&&_.subplot===l&&d.push(g)}var p=i({},u.radialaxis,{_id:"x"}),A=u.angularaxis;y(f,A,p,d,{mode:u.barmode,norm:u.barnorm,gap:u.bargap,groupgap:u.bargroupgap})}I.exports={calc:n,crossTraceCalc:r}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":929}],667:[function(e,I,F){var s=e("../../lib"),o=e("../scatterpolar/defaults").handleRThetaDefaults,h=e("../bar/style_defaults"),y=e("./attributes");I.exports=function(a,i,n,r){function f(l,m){return s.coerce(a,i,y,l,m)}var u=o(a,i,r,f);if(!u){i.visible=!1;return}f("thetaunit"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),h(a,i,f,n,r),s.coerceSelectionMarkerOpacity(i,f)}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1004,"./attributes":665}],668:[function(e,I,F){var s=e("../../components/fx"),o=e("../../lib"),h=e("../bar/hover").getTraceColor,y=o.fillText,t=e("../scatterpolar/hover").makeHoverPointText,a=e("../../plots/polar/helpers").isPtInsidePolygon;I.exports=function(n,r,f){var u=n.cd,l=u[0].trace,m=n.subplot,d=m.radialAxis,b=m.angularAxis,g=m.vangles,_=g?a:o.isPtInsideSector,p=n.maxHoverDistance,A=b._period||2*Math.PI,c=Math.abs(d.g2p(Math.sqrt(r*r+f*f))),S=Math.atan2(f,r);d.range[0]>d.range[1]&&(S+=Math.PI);var T=function(C){return _(c,S,[C.rp0,C.rp1],[C.thetag0,C.thetag1],g)?p+Math.min(1,Math.abs(C.thetag1-C.thetag0)/A)-1+(C.rp1-c)/(C.rp1-C.rp0)-1:1/0};if(s.getClosest(u,T,n),n.index!==!1){var x=n.index,w=u[x];n.x0=n.x1=w.ct[0],n.y0=n.y1=w.ct[1];var v=o.extendFlat({},w,{r:w.s,theta:w.p});return y(w,l,n),t(v,l,m,n),n.hovertemplate=l.hovertemplate,n.color=h(l,w),n.xLabelVal=n.yLabelVal=void 0,w.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1006}],669:[function(e,I,F){I.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("../scatterpolar/format_labels"),style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"../scatterpolar/format_labels":1005,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(e,I,F){I.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(h,y,t){var a={},i;function n(u,l){return s.coerce(h[i]||{},y[i],o,u,l)}for(var r=0;r<t.length;r++){var f=t[r];f.type==="barpolar"&&f.visible===!0&&(i=f.subplot,a[i]||(n("barmode"),n("bargap"),a[i]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(e,I,F){var s=e("@plotly/d3"),o=e("fast-isnumeric"),h=e("../../lib"),y=e("../../components/drawing"),t=e("../../plots/polar/helpers");I.exports=function(n,r,f){var u=r.xaxis,l=r.yaxis,m=r.radialAxis,d=r.angularAxis,b=a(r),g=r.layers.frontplot.select("g.barlayer");h.makeTraceGroups(g,f,"trace bars").each(function(){var _=s.select(this),p=h.ensureSingle(_,"g","points"),A=p.selectAll("g.point").data(h.identity);A.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),A.exit().remove(),A.each(function(c){var S=s.select(this),T=c.rp0=m.c2p(c.s0),x=c.rp1=m.c2p(c.s1),w=c.thetag0=d.c2g(c.p0),v=c.thetag1=d.c2g(c.p1),C;if(!o(T)||!o(x)||!o(w)||!o(v)||T===x||w===v)C="M0,0Z";else{var M=m.c2g(c.s1),E=(w+v)/2;c.ct=[u.c2p(M*Math.cos(E)),l.c2p(M*Math.sin(E))],C=b(T,x,w,v)}h.ensureSingle(S,"path").attr("d",C)}),y.setClipUrl(_,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,n)})};function a(i){var n=i.cxx,r=i.cyy;return i.vangles?function(f,u,l,m){var d,b;h.angleDelta(l,m)>0?(d=l,b=m):(d=m,b=l);var g=t.findEnclosingVertexAngles(d,i.vangles)[0],_=t.findEnclosingVertexAngles(b,i.vangles)[1],p=[g,(d+b)/2,_];return t.pathPolygonAnnulus(f,u,d,b,p,n,r)}:function(f,u,l,m){return h.pathAnnulus(f,u,l,m,n,r)}}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(e,I,F){var s=e("../scatter/attributes"),o=e("../bar/attributes"),h=e("../../components/color/attributes"),y=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../lib/extend").extendFlat,i=s.marker,n=i.line;I.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:a({},i.size,{arrayOk:!1,editType:"calc"}),color:a({},i.color,{arrayOk:!1,editType:"style"}),line:{color:a({},n.color,{arrayOk:!1,dflt:h.defaultLine,editType:"style"}),width:a({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:s.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:s.selected.marker,editType:"style"},unselected:{marker:s.unselected.marker,editType:"style"},text:a({},s.text,{}),hovertext:a({},s.hovertext,{}),hovertemplate:t({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927}],674:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../plots/cartesian/axes"),h=e("../../plots/cartesian/align_period"),y=e("../../lib"),t=e("../../constants/numerical").BADNUM,a=y._;I.exports=function(S,T){var x=S._fullLayout,w=o.getFromId(S,T.xaxis||"x"),v=o.getFromId(S,T.yaxis||"y"),C=[],M=T.type==="violin"?"_numViolins":"_numBoxes",E,L,z,O,R,D,H;T.orientation==="h"?(z=w,O="x",R=v,D="y",H=!!T.yperiodalignment):(z=v,O="y",R=w,D="x",H=!!T.xperiodalignment);var B=i(T,D,R,x[M]),$=B[0],W=B[1],re=y.distinctVals($,R),Q=re.vals,Z=re.minDiff/2,K,le,fe,ue,V,j,ee=(T.boxpoints||T.points)==="all"?y.identity:function(wt){return wt.v<K.lf||wt.v>K.uf};if(T._hasPreCompStats){var q=T[O],X=function(wt){return z.d2c((T[wt]||[])[E])},J=1/0,ie=-1/0;for(E=0;E<T._length;E++){var ne=$[E];if(!!s(ne)){if(K={},K.pos=K[D]=ne,H&&W&&(K.orig_p=W[E]),K.q1=X("q1"),K.med=X("median"),K.q3=X("q3"),le=[],q&&y.isArrayOrTypedArray(q[E]))for(L=0;L<q[E].length;L++)j=z.d2c(q[E][L]),j!==t&&(V={v:j,i:[E,L]},u(V,T,[E,L]),le.push(V));if(K.pts=le.sort(m),fe=K[O]=le.map(d),ue=fe.length,K.med!==t&&K.q1!==t&&K.q3!==t&&K.med>=K.q1&&K.q3>=K.med){var oe=X("lowerfence");K.lf=oe!==t&&oe<=K.q1?oe:b(K,fe,ue);var se=X("upperfence");K.uf=se!==t&&se>=K.q3?se:g(K,fe,ue);var me=X("mean");K.mean=me!==t?me:ue?y.mean(fe,ue):(K.q1+K.q3)/2;var ce=X("sd");K.sd=me!==t&&ce>=0?ce:ue?y.stdev(fe,ue,K.mean):K.q3-K.q1,K.lo=_(K),K.uo=p(K);var pe=X("notchspan");pe=pe!==t&&pe>0?pe:A(K,ue),K.ln=K.med-pe,K.un=K.med+pe;var xe=K.lf,Se=K.uf;T.boxpoints&&fe.length&&(xe=Math.min(xe,fe[0]),Se=Math.max(Se,fe[ue-1])),T.notched&&(xe=Math.min(xe,K.ln),Se=Math.max(Se,K.un)),K.min=xe,K.max=Se}else{y.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+K.q1,"median = "+K.med,"q3 = "+K.q3].join(`
`));var Ae;K.med!==t?Ae=K.med:K.q1!==t?K.q3!==t?Ae=(K.q1+K.q3)/2:Ae=K.q1:K.q3!==t?Ae=K.q3:Ae=0,K.med=Ae,K.q1=K.q3=Ae,K.lf=K.uf=Ae,K.mean=K.sd=Ae,K.ln=K.un=Ae,K.min=K.max=Ae}J=Math.min(J,K.min),ie=Math.max(ie,K.max),K.pts2=le.filter(ee),C.push(K)}}T._extremes[z._id]=o.findExtremes(z,[J,ie],{padded:!0})}else{var Ce=z.makeCalcdata(T,O),Ee=n(Q,Z),Oe=Q.length,_e=r(Oe);for(E=0;E<T._length;E++)if(j=Ce[E],!!s(j)){var Re=y.findBin($[E],Ee);Re>=0&&Re<Oe&&(V={v:j,i:E},u(V,T,E),_e[Re].push(V))}var Ve=1/0,Je=-1/0,ze=T.quartilemethod,De=ze==="exclusive",je=ze==="inclusive";for(E=0;E<Oe;E++)if(_e[E].length>0){if(K={},K.pos=K[D]=Q[E],le=K.pts=_e[E].sort(m),fe=K[O]=le.map(d),ue=fe.length,K.min=fe[0],K.max=fe[ue-1],K.mean=y.mean(fe,ue),K.sd=y.stdev(fe,ue,K.mean),K.med=y.interp(fe,.5),ue%2&&(De||je)){var dt,Et;De?(dt=fe.slice(0,ue/2),Et=fe.slice(ue/2+1)):je&&(dt=fe.slice(0,ue/2+1),Et=fe.slice(ue/2)),K.q1=y.interp(dt,.5),K.q3=y.interp(Et,.5)}else K.q1=y.interp(fe,.25),K.q3=y.interp(fe,.75);K.lf=b(K,fe,ue),K.uf=g(K,fe,ue),K.lo=_(K),K.uo=p(K);var $t=A(K,ue);K.ln=K.med-$t,K.un=K.med+$t,Ve=Math.min(Ve,K.ln),Je=Math.max(Je,K.un),K.pts2=le.filter(ee),C.push(K)}T._extremes[z._id]=o.findExtremes(z,T.notched?Ce.concat([Ve,Je]):Ce,{padded:!0})}return l(C,T),C.length>0?(C[0].t={num:x[M],dPos:Z,posLetter:D,valLetter:O,labels:{med:a(S,"median:"),min:a(S,"min:"),q1:a(S,"q1:"),q3:a(S,"q3:"),max:a(S,"max:"),mean:T.boxmean==="sd"?a(S,"mean \xB1 \u03C3:"):a(S,"mean:"),lf:a(S,"lower fence:"),uf:a(S,"upper fence:")}},x[M]++,C):[{t:{empty:!0}}]};function i(c,S,T,x){var w=S in c,v=S+"0"in c,C="d"+S in c;if(w||v&&C){var M=T.makeCalcdata(c,S),E=h(c,T,S,M).vals;return[E,M]}var L;v?L=c[S+"0"]:"name"in c&&(T.type==="category"||s(c.name)&&["linear","log"].indexOf(T.type)!==-1||y.isDateTime(c.name)&&T.type==="date")?L=c.name:L=x;for(var z=T.type==="multicategory"?T.r2c_just_indices(L):T.d2c(L,0,c[S+"calendar"]),O=c._length,R=new Array(O),D=0;D<O;D++)R[D]=z;return[R]}function n(c,S){for(var T=c.length,x=new Array(T+1),w=0;w<T;w++)x[w]=c[w]-S;return x[T]=c[T-1]+S,x}function r(c){for(var S=new Array(c),T=0;T<c;T++)S[T]=[];return S}var f={text:"tx",hovertext:"htx"};function u(c,S,T){for(var x in f)y.isArrayOrTypedArray(S[x])&&(Array.isArray(T)?y.isArrayOrTypedArray(S[x][T[0]])&&(c[f[x]]=S[x][T[0]][T[1]]):c[f[x]]=S[x][T])}function l(c,S){if(y.isArrayOrTypedArray(S.selectedpoints))for(var T=0;T<c.length;T++){for(var x=c[T].pts||[],w={},v=0;v<x.length;v++)w[x[v].i]=v;y.tagSelected(x,S,w)}}function m(c,S){return c.v-S.v}function d(c){return c.v}function b(c,S,T){return T===0?c.q1:Math.min(c.q1,S[Math.min(y.findBin(2.5*c.q1-1.5*c.q3,S,!0)+1,T-1)])}function g(c,S,T){return T===0?c.q3:Math.max(c.q3,S[Math.max(y.findBin(2.5*c.q3-1.5*c.q1,S),0)])}function _(c){return 4*c.q1-3*c.q3}function p(c){return 4*c.q3-3*c.q1}function A(c,S){return S===0?0:1.57*(c.q3-c.q1)/Math.sqrt(S)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../lib"),h=e("../../plots/cartesian/constraints").getAxisGroup,y=["v","h"];function t(i,n){for(var r=i.calcdata,f=n.xaxis,u=n.yaxis,l=0;l<y.length;l++){for(var m=y[l],d=m==="h"?u:f,b=[],g=0;g<r.length;g++){var _=r[g],p=_[0].t,A=_[0].trace;A.visible===!0&&(A.type==="box"||A.type==="candlestick")&&!p.empty&&(A.orientation||"v")===m&&A.xaxis===f._id&&A.yaxis===u._id&&b.push(g)}a("box",i,b,d)}}function a(i,n,r,f){var u=n.calcdata,l=n._fullLayout,m=f._id,d=m.charAt(0),b,g,_,p=[],A=0;for(b=0;b<r.length;b++)for(_=u[r[b]],g=0;g<_.length;g++)p.push(f.c2l(_[g].pos,!0)),A+=(_[g].pts2||[]).length;if(!!p.length){var c=o.distinctVals(p);(f.type==="category"||f.type==="multicategory")&&(c.minDiff=1);var S=c.minDiff/2;s.minDtick(f,c.minDiff,c.vals[0],!0);var T=i==="violin"?"_numViolins":"_numBoxes",x=l[T],w=l[i+"mode"]==="group"&&x>1,v=1-l[i+"gap"],C=1-l[i+"groupgap"];for(b=0;b<r.length;b++){_=u[r[b]];var M=_[0].trace,E=_[0].t,L=M.width,z=M.side,O,R,D,H;if(L)O=R=H=L/2,D=0;else if(O=S,w){var B=h(l,f._id)+M.orientation,$=l._alignmentOpts[B]||{},W=$[M.alignmentgroup]||{},re=Object.keys(W.offsetGroups||{}).length,Q=re||x,Z=re?M._offsetIndex:E.num;R=O*v*C/Q,D=2*O*(-.5+(Z+.5)/Q)*v,H=O*v/Q}else R=O*v*C,D=0,H=O;E.dPos=O,E.bPos=D,E.bdPos=R,E.wHover=H;var K,le,fe=D+R,ue,V,j,ee,q,X,J=Boolean(L),ie=(M.boxpoints||M.points)&&A>0;if(z==="positive"?(K=O*(L?1:.5),ue=fe,le=ue=D):z==="negative"?(K=ue=D,le=O*(L?1:.5),V=fe):(K=le=O,ue=V=fe),ie){var ne=M.pointpos,oe=M.jitter,se=M.marker.size/2,me=0;ne+oe>=0&&(me=fe*(ne+oe),me>K?(J=!0,q=se,j=me):me>ue&&(q=se,j=K)),me<=K&&(j=K);var ce=0;ne-oe<=0&&(ce=-fe*(ne-oe),ce>le?(J=!0,X=se,ee=ce):ce>V&&(X=se,ee=le)),ce<=le&&(ee=le)}else j=K,ee=le;var pe=new Array(_.length);for(g=0;g<_.length;g++)pe[g]=_[g].pos;M._extremes[m]=s.findExtremes(f,pe,{padded:J,vpadminus:ee,vpadplus:j,vpadLinearized:!0,ppadminus:{x:X,y:q}[d],ppadplus:{x:q,y:X}[d]})}}}I.exports={crossTraceCalc:t,setPositionOffset:a}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(e,I,F){var s=e("../../lib"),o=e("../../registry"),h=e("../../components/color"),y=e("../scatter/period_defaults"),t=e("../bar/defaults").handleGroupingDefaults,a=e("../../plots/cartesian/axis_autotype"),i=e("./attributes");function n(l,m,d,b){function g(w,v){return s.coerce(l,m,i,w,v)}if(r(l,m,g,b),m.visible!==!1){y(l,m,b,g),g("xhoverformat"),g("yhoverformat");var _=m._hasPreCompStats;_&&(g("lowerfence"),g("upperfence")),g("line.color",(l.marker||{}).color||d),g("line.width"),g("fillcolor",h.addOpacity(m.line.color,.5));var p=!1;if(_){var A=g("mean"),c=g("sd");A&&A.length&&(p=!0,c&&c.length&&(p="sd"))}g("boxmean",p),g("whiskerwidth"),g("width"),g("quartilemethod");var S=!1;if(_){var T=g("notchspan");T&&T.length&&(S=!0)}else s.validate(l.notchwidth,i.notchwidth)&&(S=!0);var x=g("notched",S);x&&g("notchwidth"),f(l,m,g,{prefix:"box"})}}function r(l,m,d,b){function g(re){var Q=0;return re&&re.length&&(Q+=1,s.isArrayOrTypedArray(re[0])&&re[0].length&&(Q+=1)),Q}function _(re){return s.validate(l[re],i[re])}var p=d("y"),A=d("x"),c;if(m.type==="box"){var S=d("q1"),T=d("median"),x=d("q3");m._hasPreCompStats=S&&S.length&&T&&T.length&&x&&x.length,c=Math.min(s.minRowLength(S),s.minRowLength(T),s.minRowLength(x))}var w=g(p),v=g(A),C=w&&s.minRowLength(p),M=v&&s.minRowLength(A),E=b.calendar,L={autotypenumbers:b.autotypenumbers},z,O;if(m._hasPreCompStats)switch(String(v)+String(w)){case"00":var R=_("x0")||_("dx"),D=_("y0")||_("dy");D&&!R?z="h":z="v",O=c;break;case"10":z="v",O=Math.min(c,M);break;case"20":z="h",O=Math.min(c,A.length);break;case"01":z="h",O=Math.min(c,C);break;case"02":z="v",O=Math.min(c,p.length);break;case"12":z="v",O=Math.min(c,M,p.length);break;case"21":z="h",O=Math.min(c,A.length,C);break;case"11":O=0;break;case"22":var H=!1,B;for(B=0;B<A.length;B++)if(a(A[B],E,L)==="category"){H=!0;break}if(H)z="v",O=Math.min(c,M,p.length);else{for(B=0;B<p.length;B++)if(a(p[B],E,L)==="category"){H=!0;break}H?(z="h",O=Math.min(c,A.length,C)):(z="v",O=Math.min(c,M,p.length))}break}else w>0?(z="v",v>0?O=Math.min(M,C):O=Math.min(C)):v>0?(z="h",O=Math.min(M)):O=0;if(!O){m.visible=!1;return}m._length=O;var $=d("orientation",z);m._hasPreCompStats?$==="v"&&v===0?(d("x0",0),d("dx",1)):$==="h"&&w===0&&(d("y0",0),d("dy",1)):$==="v"&&v===0?d("x0"):$==="h"&&w===0&&d("y0");var W=o.getComponentMethod("calendars","handleTraceDefaults");W(l,m,["x","y"],b)}function f(l,m,d,b){var g=b.prefix,_=s.coerce2(l,m,i,"marker.outliercolor"),p=d("marker.line.outliercolor"),A="outliers";m._hasPreCompStats?A="all":(_||p)&&(A="suspectedoutliers");var c=d(g+"points",A);c?(d("jitter",c==="all"?.3:0),d("pointpos",c==="all"?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",m.line.color),d("marker.line.color"),d("marker.line.width"),c==="suspectedoutliers"&&(d("marker.line.outliercolor",m.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete m.marker;var S=d("hoveron");(S==="all"||S.indexOf("points")!==-1)&&d("hovertemplate"),s.coerceSelectionMarkerOpacity(m,d)}function u(l,m){var d,b;function g(A){return s.coerce(b._input,b,i,A)}for(var _=0;_<l.length;_++){b=l[_];var p=b.type;(p==="box"||p==="violin")&&(d=b._input,m[p+"mode"]==="group"&&t(d,b,m,g))}}I.exports={supplyDefaults:n,crossTraceDefaults:u,handleSampleDefaults:r,handlePointsDefaults:f}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":947,"./attributes":673}],677:[function(e,I,F){I.exports=function(o,h){return h.hoverOnBox&&(o.hoverOnBox=h.hoverOnBox),"xVal"in h&&(o.x=h.xVal),"yVal"in h&&(o.y=h.yVal),h.xa&&(o.xaxis=h.xa),h.ya&&(o.yaxis=h.ya),o}},{}],678:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../lib"),h=e("../../components/fx"),y=e("../../components/color"),t=o.fillText;function a(r,f,u,l){var m=r.cd,d=m[0].trace,b=d.hoveron,g=[],_;return b.indexOf("boxes")!==-1&&(g=g.concat(i(r,f,u,l))),b.indexOf("points")!==-1&&(_=n(r,f,u)),l==="closest"?_?[_]:g:(_&&g.push(_),g)}function i(r,f,u,l){var m=r.cd,d=r.xa,b=r.ya,g=m[0].trace,_=m[0].t,p=g.type==="violin",A=[],c,S,T,x,w,v,C,M,E,L,z,O=_.bdPos,R,D,H=_.wHover,B=function(ie){return T.c2l(ie.pos)+_.bPos-T.c2l(v)};p&&g.side!=="both"?(g.side==="positive"&&(E=function(ie){var ne=B(ie);return h.inbox(ne,ne+H,L)},R=O,D=0),g.side==="negative"&&(E=function(ie){var ne=B(ie);return h.inbox(ne-H,ne,L)},R=0,D=O)):(E=function(ie){var ne=B(ie);return h.inbox(ne-H,ne+H,L)},R=D=O);var $;p?$=function(ie){return h.inbox(ie.span[0]-w,ie.span[1]-w,L)}:$=function(ie){return h.inbox(ie.min-w,ie.max-w,L)},g.orientation==="h"?(w=f,v=u,C=$,M=E,c="y",T=b,S="x",x=d):(w=u,v=f,C=E,M=$,c="x",T=d,S="y",x=b);var W=Math.min(1,O/Math.abs(T.r2c(T.range[1])-T.r2c(T.range[0])));L=r.maxHoverDistance-W,z=r.maxSpikeDistance-W;function re(ie){return(C(ie)+M(ie))/2}var Q=h.getDistanceFunction(l,C,M,re);if(h.getClosest(m,Q,r),r.index===!1)return[];var Z=m[r.index],K=g.line.color,le=(g.marker||{}).color;y.opacity(K)&&g.line.width?r.color=K:y.opacity(le)&&g.boxpoints?r.color=le:r.color=g.fillcolor,r[c+"0"]=T.c2p(Z.pos+_.bPos-D,!0),r[c+"1"]=T.c2p(Z.pos+_.bPos+R,!0),r[c+"LabelVal"]=Z.orig_p!==void 0?Z.orig_p:Z.pos;var fe=c+"Spike";r.spikeDistance=re(Z)*z/L,r[fe]=T.c2p(Z.pos,!0);var ue={},V=["med","q1","q3","min","max"];(g.boxmean||(g.meanline||{}).visible)&&V.push("mean"),(g.boxpoints||g.points)&&V.push("lf","uf");for(var j=0;j<V.length;j++){var ee=V[j];if(!(!(ee in Z)||Z[ee]in ue)){ue[Z[ee]]=!0;var q=Z[ee],X=x.c2p(q,!0),J=o.extendFlat({},r);J.attr=ee,J[S+"0"]=J[S+"1"]=X,J[S+"LabelVal"]=q,J[S+"Label"]=(_.labels?_.labels[ee]+" ":"")+s.hoverLabelText(x,q,g[S+"hoverformat"]),J.hoverOnBox=!0,ee==="mean"&&"sd"in Z&&g.boxmean==="sd"&&(J[S+"err"]=Z.sd),r.name="",r.spikeDistance=void 0,r[fe]=void 0,J.hovertemplate=!1,A.push(J)}}return A}function n(r,f,u){for(var l=r.cd,m=r.xa,d=r.ya,b=l[0].trace,g=m.c2p(f),_=d.c2p(u),p,A=function(B){var $=Math.max(3,B.mrc||0);return Math.max(Math.abs(m.c2p(B.x)-g)-$,1-3/$)},c=function(B){var $=Math.max(3,B.mrc||0);return Math.max(Math.abs(d.c2p(B.y)-_)-$,1-3/$)},S=h.quadrature(A,c),T=!1,x,w,v=0;v<l.length;v++){x=l[v];for(var C=0;C<(x.pts||[]).length;C++){w=x.pts[C];var M=S(w);M<=r.distance&&(r.distance=M,T=[v,C])}}if(!T)return!1;x=l[T[0]],w=x.pts[T[1]];var E=m.c2p(w.x,!0),L=d.c2p(w.y,!0),z=w.mrc||1;p=o.extendFlat({},r,{index:w.i,color:(b.marker||{}).color,name:b.name,x0:E-z,x1:E+z,y0:L-z,y1:L+z,spikeDistance:r.distance,hovertemplate:b.hovertemplate});var O=x.orig_p,R=O!==void 0?O:x.pos,D;b.orientation==="h"?(D=d,p.xLabelVal=w.x,p.yLabelVal=R):(D=m,p.xLabelVal=R,p.yLabelVal=w.y);var H=D._id.charAt(0);return p[H+"Spike"]=D.c2p(x.pos,!0),t(w,b,p),p}I.exports={hoverPoints:a,hoverOnBoxes:i,hoverOnPoints:n}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(e,I,F){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(e,I,F){I.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("./layout_attributes");function y(a,i,n,r,f){for(var u=f+"Layout",l=!1,m=0;m<n.length;m++){var d=n[m];if(s.traceIs(d,u)){l=!0;break}}!l||(r(f+"mode"),r(f+"gap"),r(f+"groupgap"))}function t(a,i,n){function r(f,u){return o.coerce(a,i,h,f,u)}y(a,i,n,r,"box")}I.exports={supplyLayoutDefaults:t,_supply:y}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../components/drawing"),y=5,t=.01;function a(f,u,l,m){var d=u.xaxis,b=u.yaxis;o.makeTraceGroups(m,l,"trace boxes").each(function(g){var _=s.select(this),p=g[0],A=p.t,c=p.trace;if(A.wdPos=A.bdPos*c.whiskerwidth,c.visible!==!0||A.empty){_.remove();return}var S,T;c.orientation==="h"?(S=b,T=d):(S=d,T=b),i(_,{pos:S,val:T},c,A),n(_,{x:d,y:b},c,A),r(_,{pos:S,val:T},c,A)})}function i(f,u,l,m){var d=l.orientation==="h",b=u.val,g=u.pos,_=!!g.rangebreaks,p=m.bPos,A=m.wdPos||0,c=m.bPosPxOffset||0,S=l.whiskerwidth||0,T=l.notched||!1,x=T?1-2*l.notchwidth:1,w,v;Array.isArray(m.bdPos)?(w=m.bdPos[0],v=m.bdPos[1]):(w=m.bdPos,v=m.bdPos);var C=f.selectAll("path.box").data(l.type!=="violin"||l.box.visible?o.identity:[]);C.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),C.exit().remove(),C.each(function(M){if(M.empty)return"M0,0Z";var E=g.c2l(M.pos+p,!0),L=g.l2p(E-w)+c,z=g.l2p(E+v)+c,O=_?(L+z)/2:g.l2p(E)+c,R=l.whiskerwidth,D=_?L*R+(1-R)*O:g.l2p(E-A)+c,H=_?z*R+(1-R)*O:g.l2p(E+A)+c,B=g.l2p(E-w*x)+c,$=g.l2p(E+v*x)+c,W=b.c2p(M.q1,!0),re=b.c2p(M.q3,!0),Q=o.constrain(b.c2p(M.med,!0),Math.min(W,re)+1,Math.max(W,re)-1),Z=M.lf===void 0||l.boxpoints===!1,K=b.c2p(Z?M.min:M.lf,!0),le=b.c2p(Z?M.max:M.uf,!0),fe=b.c2p(M.ln,!0),ue=b.c2p(M.un,!0);d?s.select(this).attr("d","M"+Q+","+B+"V"+$+"M"+W+","+L+"V"+z+(T?"H"+fe+"L"+Q+","+$+"L"+ue+","+z:"")+"H"+re+"V"+L+(T?"H"+ue+"L"+Q+","+B+"L"+fe+","+L:"")+"ZM"+W+","+O+"H"+K+"M"+re+","+O+"H"+le+(S===0?"":"M"+K+","+D+"V"+H+"M"+le+","+D+"V"+H)):s.select(this).attr("d","M"+B+","+Q+"H"+$+"M"+L+","+W+"H"+z+(T?"V"+fe+"L"+$+","+Q+"L"+z+","+ue:"")+"V"+re+"H"+L+(T?"V"+ue+"L"+B+","+Q+"L"+L+","+fe:"")+"ZM"+O+","+W+"V"+K+"M"+O+","+re+"V"+le+(S===0?"":"M"+D+","+K+"H"+H+"M"+D+","+le+"H"+H))})}function n(f,u,l,m){var d=u.x,b=u.y,g=m.bdPos,_=m.bPos,p=l.boxpoints||l.points;o.seedPseudoRandom();var A=function(T){return T.forEach(function(x){x.t=m,x.trace=l}),T},c=f.selectAll("g.points").data(p?A:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var S=c.selectAll("path").data(function(T){var x,w=T.pts2,v=Math.max((T.max-T.min)/10,T.q3-T.q1),C=v*1e-9,M=v*t,E=[],L=0,z;if(l.jitter){if(v===0)for(L=1,E=new Array(w.length),x=0;x<w.length;x++)E[x]=1;else for(x=0;x<w.length;x++){var O=Math.max(0,x-y),R=w[O].v,D=Math.min(w.length-1,x+y),H=w[D].v;p!=="all"&&(w[x].v<T.lf?H=Math.min(H,T.lf):R=Math.max(R,T.uf));var B=Math.sqrt(M*(D-O)/(H-R+C))||0;B=o.constrain(Math.abs(B),0,1),E.push(B),L=Math.max(B,L)}z=l.jitter*2/(L||1)}for(x=0;x<w.length;x++){var $=w[x],W=$.v,re=l.jitter?z*E[x]*(o.pseudoRandom()-.5):0,Q=T.pos+_+g*(l.pointpos+re);l.orientation==="h"?($.y=Q,$.x=W):($.x=Q,$.y=W),p==="suspectedoutliers"&&W<T.uo&&W>T.lo&&($.so=!0)}return w});S.enter().append("path").classed("point",!0),S.exit().remove(),S.call(h.translatePoints,d,b)}function r(f,u,l,m){var d=u.val,b=u.pos,g=!!b.rangebreaks,_=m.bPos,p=m.bPosPxOffset||0,A=l.boxmean||(l.meanline||{}).visible,c,S;Array.isArray(m.bdPos)?(c=m.bdPos[0],S=m.bdPos[1]):(c=m.bdPos,S=m.bdPos);var T=f.selectAll("path.mean").data(l.type==="box"&&l.boxmean||l.type==="violin"&&l.box.visible&&l.meanline.visible?o.identity:[]);T.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),T.exit().remove(),T.each(function(x){var w=b.c2l(x.pos+_,!0),v=b.l2p(w-c)+p,C=b.l2p(w+S)+p,M=g?(v+C)/2:b.l2p(w)+p,E=d.c2p(x.mean,!0),L=d.c2p(x.mean-x.sd,!0),z=d.c2p(x.mean+x.sd,!0);l.orientation==="h"?s.select(this).attr("d","M"+E+","+v+"V"+C+(A==="sd"?"m0,0L"+L+","+M+"L"+E+","+v+"L"+z+","+M+"Z":"")):s.select(this).attr("d","M"+v+","+E+"H"+C+(A==="sd"?"m0,0L"+M+","+L+"L"+v+","+E+"L"+M+","+z+"Z":""))})}I.exports={plot:a,plotBoxAndWhiskers:i,plotPoints:n,plotBoxMean:r}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(e,I,F){I.exports=function(o,h){var y=o.cd,t=o.xaxis,a=o.yaxis,i=[],n,r;if(h===!1)for(n=0;n<y.length;n++)for(r=0;r<(y[n].pts||[]).length;r++)y[n].pts[r].selected=0;else for(n=0;n<y.length;n++)for(r=0;r<(y[n].pts||[]).length;r++){var f=y[n].pts[r],u=t.c2p(f.x),l=a.c2p(f.y);h.contains([u,l],null,f.i,o)?(i.push({pointNumber:f.i,x:t.c2d(f.x),y:a.c2d(f.y)}),f.selected=1):f.selected=0}return i}},{}],684:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/color"),h=e("../../components/drawing");function y(a,i,n){var r=n||s.select(a).selectAll("g.trace.boxes");r.style("opacity",function(f){return f[0].trace.opacity}),r.each(function(f){var u=s.select(this),l=f[0].trace,m=l.line.width;function d(_,p,A,c){_.style("stroke-width",p+"px").call(o.stroke,A).call(o.fill,c)}var b=u.selectAll("path.box");if(l.type==="candlestick")b.each(function(_){if(!_.empty){var p=s.select(this),A=l[_.dir];d(p,A.line.width,A.line.color,A.fillcolor),p.style("opacity",l.selectedpoints&&!_.selected?.3:1)}});else{d(b,m,l.line.color,l.fillcolor),u.selectAll("path.mean").style({"stroke-width":m,"stroke-dasharray":2*m+"px,"+m+"px"}).call(o.stroke,l.line.color);var g=u.selectAll("path.point");h.pointStyle(g,l,a)}})}function t(a,i,n){var r=i[0].trace,f=n.selectAll("path.point");r.selectedpoints?h.selectedPointStyle(f,r):h.pointStyle(f,r,a)}I.exports={style:y,styleOnSelect:t}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(e,I,F){var s=e("../../lib").extendFlat,o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=e("../ohlc/attributes"),y=e("../box/attributes");function t(a){return{line:{color:s({},y.line.color,{dflt:a}),width:y.line.width,editType:"style"},fillcolor:y.fillcolor,editType:"style"}}I.exports={xperiod:h.xperiod,xperiod0:h.xperiod0,xperiodalignment:h.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:h.x,open:h.open,high:h.high,low:h.low,close:h.close,line:{width:s({},y.line.width,{}),editType:"style"},increasing:t(h.increasing.line.color.dflt),decreasing:t(h.decreasing.line.color.dflt),text:h.text,hovertext:h.hovertext,whiskerwidth:s({},y.whiskerwidth,{dflt:0}),hoverlabel:h.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("../../plots/cartesian/align_period"),y=e("../ohlc/calc").calcCommon;I.exports=function(a,i){var n=a._fullLayout,r=o.getFromId(a,i.xaxis),f=o.getFromId(a,i.yaxis),u=r.makeCalcdata(i,"x"),l=h(i,r,"x",u).vals,m=y(a,i,u,l,f,t);return m.length?(s.extendFlat(m[0].t,{num:n._numBoxes,dPos:s.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,m):[{t:{empty:!0}}]};function t(a,i,n,r){return{min:n,q1:Math.min(a,r),med:r,q3:Math.max(a,r),max:i}}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color"),h=e("../ohlc/ohlc_defaults"),y=e("../scatter/period_defaults"),t=e("./attributes");I.exports=function(n,r,f,u){function l(d,b){return s.coerce(n,r,t,d,b)}var m=h(n,r,l,u);if(!m){r.visible=!1;return}y(n,r,u,l,{x:!0}),l("xhoverformat"),l("yhoverformat"),l("line.width"),a(n,r,l,"increasing"),a(n,r,l,"decreasing"),l("text"),l("hovertext"),l("whiskerwidth"),u._requestRangeslider[r.xaxis]=!0};function a(i,n,r,f){var u=r(f+".line.color");r(f+".line.width",n.line.width),r(f+".fillcolor",o.addOpacity(u,.5))}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":947,"./attributes":685}],688:[function(e,I,F){I.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(e,I,F){var s=e("./axis_defaults"),o=e("../../plot_api/plot_template");I.exports=function(t,a,i,n,r){var f=n("a");f||(n("da"),n("a0"));var u=n("b");u||(n("db"),n("b0")),h(t,a,i,r)};function h(y,t,a,i){var n=["aaxis","baxis"];n.forEach(function(r){var f=r.charAt(0),u=y[r]||{},l=o.newContainer(t,r),m={noTicklabelstep:!0,tickfont:"x",id:f+"axis",letter:f,font:t.font,name:r,data:y[f],calendar:t.calendar,dfltColor:i,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};s(u,l,m),l._categories=l._categories||[],!y[r]&&u.type!=="-"&&(y[r]={type:u.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(e,I,F){var s=e("../../lib").isArrayOrTypedArray;I.exports=function(h){return o(h,0)};function o(h,y){if(!s(h)||y>=10)return null;for(var t=1/0,a=-1/0,i=h.length,n=0;n<i;n++){var r=h[n];if(s(r)){var f=o(r,y+1);f&&(t=Math.min(f[0],t),a=Math.max(f[1],a))}else t=Math.min(r,t),a=Math.max(r,a)}return[t,a]}},{"../../lib":503}],691:[function(e,I,F){var s=e("../../plots/font_attributes"),o=e("./axis_attributes"),h=e("../../components/color/attributes"),y=s({editType:"calc"});y.family.dflt='"Open Sans", verdana, arial, sans-serif',y.size.dflt=12,y.color.dflt=h.defaultLine,I.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:o,baxis:o,font:y,color:{valType:"color",dflt:h.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(e,I,F){var s=e("../../lib").isArrayOrTypedArray;I.exports=function(o,h,y,t){var a,i,n,r,f,u,l,m,d,b,g,_,p,A=s(y)?"a":"b",c=A==="a"?o.aaxis:o.baxis,S=c.smoothing,T=A==="a"?o.a2i:o.b2j,x=A==="a"?y:t,w=A==="a"?t:y,v=A==="a"?h.a.length:h.b.length,C=A==="a"?h.b.length:h.a.length,M=Math.floor(A==="a"?o.b2j(w):o.a2i(w)),E=A==="a"?function(Z){return o.evalxy([],Z,M)}:function(Z){return o.evalxy([],M,Z)};S&&(n=Math.max(0,Math.min(C-2,M)),r=M-n,i=A==="a"?function(Z,K){return o.dxydi([],Z,n,K,r)}:function(Z,K){return o.dxydj([],n,Z,r,K)});var L=T(x[0]),z=T(x[1]),O=L<z?1:-1,R=(z-L)*1e-8,D=O>0?Math.floor:Math.ceil,H=O>0?Math.ceil:Math.floor,B=O>0?Math.min:Math.max,$=O>0?Math.max:Math.min,W=D(L+R),re=H(z-R);l=E(L);var Q=[[l]];for(a=W;a*O<re*O;a+=O)f=[],g=$(L,a),_=B(z,a+O),p=_-g,u=Math.max(0,Math.min(v-2,Math.floor(.5*(g+_)))),m=E(_),S&&(d=i(u,g-u),b=i(u,_-u),f.push([l[0]+d[0]/3*p,l[1]+d[1]/3*p]),f.push([m[0]-b[0]/3*p,m[1]-b[1]/3*p])),f.push(m),Q.push(f),l=m;return Q}},{"../../lib":503}],693:[function(e,I,F){var s=e("../../plots/font_attributes"),o=e("../../components/color/attributes"),h=e("../../plots/cartesian/layout_attributes"),y=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=e("../../plot_api/edit_types").overrideAll;I.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:s({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:h.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:s({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:y("tick label")},tickformatstops:t(h.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:o.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:s({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(e,I,F){var s=e("./attributes"),o=e("../../components/color").addOpacity,h=e("../../registry"),y=e("../../lib"),t=e("../../plots/cartesian/tick_value_defaults"),a=e("../../plots/cartesian/tick_label_defaults"),i=e("../../plots/cartesian/prefix_suffix_defaults"),n=e("../../plots/cartesian/category_order_defaults"),r=e("../../plots/cartesian/set_convert"),f=e("../../plots/cartesian/axis_autotype");I.exports=function(m,d,b){var g=b.letter,_=b.font||{},p=s[g+"axis"];function A($,W){return y.coerce(m,d,p,$,W)}function c($,W){return y.coerce2(m,d,p,$,W)}b.name&&(d._name=b.name,d._id=b.name),A("autotypenumbers",b.autotypenumbersDflt);var S=A("type");if(S==="-"&&(b.data&&u(d,b.data),d.type==="-"?d.type="linear":S=m.type=d.type),A("smoothing"),A("cheatertype"),A("showticklabels"),A("labelprefix",g+" = "),A("labelsuffix"),A("showtickprefix"),A("showticksuffix"),A("separatethousands"),A("tickformat"),A("exponentformat"),A("minexponent"),A("showexponent"),A("categoryorder"),A("tickmode"),A("tickvals"),A("ticktext"),A("tick0"),A("dtick"),d.tickmode==="array"&&(A("arraytick0"),A("arraydtick")),A("labelpadding"),d._hovertitle=g,S==="date"){var T=h.getComponentMethod("calendars","handleDefaults");T(m,d,"calendar",b.calendar)}r(d,b.fullLayout),d.c2p=y.identity;var x=A("color",b.dfltColor),w=x===m.color?x:_.color,v=A("title.text");v&&(y.coerceFont(A,"title.font",{family:_.family,size:y.bigFont(_.size),color:w}),A("title.offset")),A("tickangle");var C=A("autorange",!d.isValidRange(m.range));C&&A("rangemode"),A("range"),d.cleanRange(),A("fixedrange"),t(m,d,A,S),i(m,d,A,S,b),a(m,d,A,S,b),n(m,d,A,{data:b.data,dataAttr:g});var M=c("gridcolor",o(x,.3)),E=c("gridwidth"),L=A("showgrid");L||(delete d.gridcolor,delete d.gridwidth);var z=c("startlinecolor",x),O=c("startlinewidth",E),R=A("startline",d.showgrid||!!z||!!O);R||(delete d.startlinecolor,delete d.startlinewidth);var D=c("endlinecolor",x),H=c("endlinewidth",E),B=A("endline",d.showgrid||!!D||!!H);return B||(delete d.endlinecolor,delete d.endlinewidth),L?(A("minorgridcount"),A("minorgridwidth",E),A("minorgridcolor",o(M,.06)),d.minorgridcount||(delete d.minorgridwidth,delete d.minorgridcolor)):(delete d.gridcolor,delete d.gridWidth),d.showticklabels==="none"&&(delete d.tickfont,delete d.tickangle,delete d.showexponent,delete d.exponentformat,delete d.minexponent,delete d.tickformat,delete d.showticksuffix,delete d.showtickprefix),d.showticksuffix||delete d.ticksuffix,d.showtickprefix||delete d.tickprefix,A("tickmode"),d};function u(l,m){if(l.type==="-"){var d=l._id,b=d.charAt(0),g=b+"calendar",_=l[g];l.type=f(m,_,{autotypenumbers:l.autotypenumbers})}}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../lib").isArray1D,h=e("./cheater_basis"),y=e("./array_minmax"),t=e("./calc_gridlines"),a=e("./calc_labels"),i=e("./calc_clippath"),n=e("../heatmap/clean_2d_array"),r=e("./smooth_fill_2d_array"),f=e("../heatmap/convert_column_xyz"),u=e("./set_convert");I.exports=function(m,d){var b=s.getFromId(m,d.xaxis),g=s.getFromId(m,d.yaxis),_=d.aaxis,p=d.baxis,A=d.x,c=d.y,S=[];A&&o(A)&&S.push("x"),c&&o(c)&&S.push("y"),S.length&&f(d,_,p,"a","b",S);var T=d._a=d._a||d.a,x=d._b=d._b||d.b;A=d._x||d.x,c=d._y||d.y;var w={};if(d._cheater){var v=_.cheatertype==="index"?T.length:T,C=p.cheatertype==="index"?x.length:x;A=h(v,C,d.cheaterslope)}d._x=A=n(A),d._y=c=n(c),r(A,T,x),r(c,T,x),u(d),d.setScale();var M=y(A),E=y(c),L=.5*(M[1]-M[0]),z=.5*(M[1]+M[0]),O=.5*(E[1]-E[0]),R=.5*(E[1]+E[0]),D=1.3;return M=[z-L*D,z+L*D],E=[R-O*D,R+O*D],d._extremes[b._id]=s.findExtremes(b,M,{padded:!0}),d._extremes[g._id]=s.findExtremes(g,E,{padded:!0}),t(d,"a","b"),t(d,"b","a"),a(d,_),a(d,p),w.clipsegments=i(d._xctrl,d._yctrl,_,p),w.x=A,w.y=c,w.a=T,w.b=x,[w]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(e,I,F){I.exports=function(o,h,y,t){var a,i,n,r=[],f=!!y.smoothing,u=!!t.smoothing,l=o[0].length-1,m=o.length-1;for(a=0,i=[],n=[];a<=l;a++)i[a]=o[0][a],n[a]=h[0][a];for(r.push({x:i,y:n,bicubic:f}),a=0,i=[],n=[];a<=m;a++)i[a]=o[a][l],n[a]=h[a][l];for(r.push({x:i,y:n,bicubic:u}),a=l,i=[],n=[];a>=0;a--)i[l-a]=o[m][a],n[l-a]=h[m][a];for(r.push({x:i,y:n,bicubic:f}),a=m,i=[],n=[];a>=0;a--)i[m-a]=o[a][0],n[m-a]=h[a][0];return r.push({x:i,y:n,bicubic:u}),r}},{}],697:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../lib/extend").extendFlat;I.exports=function(y,t,a){var i,n,r,f,u,l,m,d,b,g,_,p,A,c,S=y["_"+t],T=y[t+"axis"],x=T._gridlines=[],w=T._minorgridlines=[],v=T._boundarylines=[],C=y["_"+a],M=y[a+"axis"];T.tickmode==="array"&&(T.tickvals=S.slice());var E=y._xctrl,L=y._yctrl,z=E[0].length,O=E.length,R=y._a.length,D=y._b.length;s.prepTicks(T),T.tickmode==="array"&&delete T.tickvals;var H=T.smoothing?3:1;function B(W){var re,Q,Z,K,le,fe,ue,V,j,ee,q,X,J=[],ie=[],ne={};if(t==="b")for(Q=y.b2j(W),Z=Math.floor(Math.max(0,Math.min(D-2,Q))),K=Q-Z,ne.length=D,ne.crossLength=R,ne.xy=function(oe){return y.evalxy([],oe,Q)},ne.dxy=function(oe,se){return y.dxydi([],oe,Z,se,K)},re=0;re<R;re++)fe=Math.min(R-2,re),ue=re-fe,V=y.evalxy([],re,Q),M.smoothing&&re>0&&(j=y.dxydi([],re-1,Z,0,K),J.push(le[0]+j[0]/3),ie.push(le[1]+j[1]/3),ee=y.dxydi([],re-1,Z,1,K),J.push(V[0]-ee[0]/3),ie.push(V[1]-ee[1]/3)),J.push(V[0]),ie.push(V[1]),le=V;else for(re=y.a2i(W),fe=Math.floor(Math.max(0,Math.min(R-2,re))),ue=re-fe,ne.length=R,ne.crossLength=D,ne.xy=function(oe){return y.evalxy([],re,oe)},ne.dxy=function(oe,se){return y.dxydj([],fe,oe,ue,se)},Q=0;Q<D;Q++)Z=Math.min(D-2,Q),K=Q-Z,V=y.evalxy([],re,Q),M.smoothing&&Q>0&&(q=y.dxydj([],fe,Q-1,ue,0),J.push(le[0]+q[0]/3),ie.push(le[1]+q[1]/3),X=y.dxydj([],fe,Q-1,ue,1),J.push(V[0]-X[0]/3),ie.push(V[1]-X[1]/3)),J.push(V[0]),ie.push(V[1]),le=V;return ne.axisLetter=t,ne.axis=T,ne.crossAxis=M,ne.value=W,ne.constvar=a,ne.index=d,ne.x=J,ne.y=ie,ne.smoothing=M.smoothing,ne}function $(W){var re,Q,Z,K,le,fe=[],ue=[],V={};if(V.length=S.length,V.crossLength=C.length,t==="b")for(Z=Math.max(0,Math.min(D-2,W)),le=Math.min(1,Math.max(0,W-Z)),V.xy=function(j){return y.evalxy([],j,W)},V.dxy=function(j,ee){return y.dxydi([],j,Z,ee,le)},re=0;re<z;re++)fe[re]=E[W*H][re],ue[re]=L[W*H][re];else for(Q=Math.max(0,Math.min(R-2,W)),K=Math.min(1,Math.max(0,W-Q)),V.xy=function(j){return y.evalxy([],W,j)},V.dxy=function(j,ee){return y.dxydj([],Q,j,K,ee)},re=0;re<O;re++)fe[re]=E[re][W*H],ue[re]=L[re][W*H];return V.axisLetter=t,V.axis=T,V.crossAxis=M,V.value=S[W],V.constvar=a,V.index=W,V.x=fe,V.y=ue,V.smoothing=M.smoothing,V}if(T.tickmode==="array"){for(f=5e-15,u=[Math.floor((S.length-1-T.arraytick0)/T.arraydtick*(1+f)),Math.ceil(-T.arraytick0/T.arraydtick/(1+f))].sort(function(W,re){return W-re}),l=u[0]-1,m=u[1]+1,d=l;d<m;d++)n=T.arraytick0+T.arraydtick*d,!(n<0||n>S.length-1)&&x.push(o($(n),{color:T.gridcolor,width:T.gridwidth}));for(d=l;d<m;d++)if(r=T.arraytick0+T.arraydtick*d,_=Math.min(r+T.arraydtick,S.length-1),!(r<0||r>S.length-1)&&!(_<0||_>S.length-1))for(p=S[r],A=S[_],i=0;i<T.minorgridcount;i++)c=_-r,!(c<=0)&&(g=p+(A-p)*(i+1)/(T.minorgridcount+1)*(T.arraydtick/c),!(g<S[0]||g>S[S.length-1])&&w.push(o(B(g),{color:T.minorgridcolor,width:T.minorgridwidth})));T.startline&&v.push(o($(0),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&v.push(o($(S.length-1),{color:T.endlinecolor,width:T.endlinewidth}))}else{for(f=5e-15,u=[Math.floor((S[S.length-1]-T.tick0)/T.dtick*(1+f)),Math.ceil((S[0]-T.tick0)/T.dtick/(1+f))].sort(function(W,re){return W-re}),l=u[0],m=u[1],d=l;d<=m;d++)b=T.tick0+T.dtick*d,x.push(o(B(b),{color:T.gridcolor,width:T.gridwidth}));for(d=l-1;d<m+1;d++)for(b=T.tick0+T.dtick*d,i=0;i<T.minorgridcount;i++)g=b+T.dtick*(i+1)/(T.minorgridcount+1),!(g<S[0]||g>S[S.length-1])&&w.push(o(B(g),{color:T.minorgridcolor,width:T.minorgridwidth}));T.startline&&v.push(o(B(S[0]),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&v.push(o(B(S[S.length-1]),{color:T.endlinecolor,width:T.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../lib/extend").extendFlat;I.exports=function(y,t){var a,i,n,r,f,u=t._labels=[],l=t._gridlines;for(a=0;a<l.length;a++)f=l[a],["start","both"].indexOf(t.showticklabels)!==-1&&(i=s.tickText(t,f.value),o(i,{prefix:n,suffix:r,endAnchor:!0,xy:f.xy(0),dxy:f.dxy(0,0),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:a===0,isLast:a===l.length-1}),u.push(i)),["end","both"].indexOf(t.showticklabels)!==-1&&(i=s.tickText(t,f.value),o(i,{endAnchor:!1,xy:f.xy(f.crossLength-1),dxy:f.dxy(f.crossLength-2,1),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:a===0,isLast:a===l.length-1}),u.push(i))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(e,I,F){var s=.5;I.exports=function(h,y,t,a){var i=h[0]-y[0],n=h[1]-y[1],r=t[0]-y[0],f=t[1]-y[1],u=Math.pow(i*i+n*n,s/2),l=Math.pow(r*r+f*f,s/2),m=(l*l*i-u*u*r)*a,d=(l*l*n-u*u*f)*a,b=l*(u+l)*3,g=u*(u+l)*3;return[[y[0]+(b&&m/b),y[1]+(b&&d/b)],[y[0]-(g&&m/g),y[1]-(g&&d/g)]]}},{}],700:[function(e,I,F){var s=e("../../lib").isArrayOrTypedArray;I.exports=function(o,h,y){var t,a,i,n,r,f,u=[],l=s(o)?o.length:o,m=s(h)?h.length:h,d=s(o)?o:null,b=s(h)?h:null;d&&(i=(d.length-1)/(d[d.length-1]-d[0])/(l-1)),b&&(n=(b.length-1)/(b[b.length-1]-b[0])/(m-1));var g,_=1/0,p=-1/0;for(a=0;a<m;a++)for(u[a]=[],f=b?(b[a]-b[0])*n:a/(m-1),t=0;t<l;t++)r=d?(d[t]-d[0])*i:t/(l-1),g=r-f*y,_=Math.min(g,_),p=Math.max(g,p),u[a][t]=g;var A=1/(p-_),c=-_*A;for(a=0;a<m;a++)for(t=0;t<l;t++)u[a][t]=A*u[a][t]+c;return u}},{"../../lib":503}],701:[function(e,I,F){var s=e("./catmull_rom"),o=e("../../lib").ensureArray;function h(y,t,a){var i=-.5*a[0]+1.5*t[0],n=-.5*a[1]+1.5*t[1];return[(2*i+y[0])/3,(2*n+y[1])/3]}I.exports=function(t,a,i,n,r,f){var u,l,m,d,b,g,_,p,A,c,S=i[0].length,T=i.length,x=r?3*S-2:S,w=f?3*T-2:T;for(t=o(t,w),a=o(a,w),m=0;m<w;m++)t[m]=o(t[m],x),a[m]=o(a[m],x);for(l=0,d=0;l<T;l++,d+=f?3:1)for(b=t[d],g=a[d],_=i[l],p=n[l],u=0,m=0;u<S;u++,m+=r?3:1)b[m]=_[u],g[m]=p[u];if(r)for(l=0,d=0;l<T;l++,d+=f?3:1){for(u=1,m=3;u<S-1;u++,m+=3)A=s([i[l][u-1],n[l][u-1]],[i[l][u],n[l][u]],[i[l][u+1],n[l][u+1]],r),t[d][m-1]=A[0][0],a[d][m-1]=A[0][1],t[d][m+1]=A[1][0],a[d][m+1]=A[1][1];c=h([t[d][0],a[d][0]],[t[d][2],a[d][2]],[t[d][3],a[d][3]]),t[d][1]=c[0],a[d][1]=c[1],c=h([t[d][x-1],a[d][x-1]],[t[d][x-3],a[d][x-3]],[t[d][x-4],a[d][x-4]]),t[d][x-2]=c[0],a[d][x-2]=c[1]}if(f)for(m=0;m<x;m++){for(d=3;d<w-3;d+=3)A=s([t[d-3][m],a[d-3][m]],[t[d][m],a[d][m]],[t[d+3][m],a[d+3][m]],f),t[d-1][m]=A[0][0],a[d-1][m]=A[0][1],t[d+1][m]=A[1][0],a[d+1][m]=A[1][1];c=h([t[0][m],a[0][m]],[t[2][m],a[2][m]],[t[3][m],a[3][m]]),t[1][m]=c[0],a[1][m]=c[1],c=h([t[w-1][m],a[w-1][m]],[t[w-3][m],a[w-3][m]],[t[w-4][m],a[w-4][m]]),t[w-2][m]=c[0],a[w-2][m]=c[1]}if(r&&f)for(d=1;d<w;d+=(d+1)%3===0?2:1){for(m=3;m<x-3;m+=3)A=s([t[d][m-3],a[d][m-3]],[t[d][m],a[d][m]],[t[d][m+3],a[d][m+3]],r),t[d][m-1]=.5*(t[d][m-1]+A[0][0]),a[d][m-1]=.5*(a[d][m-1]+A[0][1]),t[d][m+1]=.5*(t[d][m+1]+A[1][0]),a[d][m+1]=.5*(a[d][m+1]+A[1][1]);c=h([t[d][0],a[d][0]],[t[d][2],a[d][2]],[t[d][3],a[d][3]]),t[d][1]=.5*(t[d][1]+c[0]),a[d][1]=.5*(a[d][1]+c[1]),c=h([t[d][x-1],a[d][x-1]],[t[d][x-3],a[d][x-3]],[t[d][x-4],a[d][x-4]]),t[d][x-2]=.5*(t[d][x-2]+c[0]),a[d][x-2]=.5*(a[d][x-2]+c[1])}return[t,a]}},{"../../lib":503,"./catmull_rom":699}],702:[function(e,I,F){I.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(e,I,F){I.exports=function(s,o,h){return o&&h?function(y,t,a,i,n){y||(y=[]);var r,f,u,l,m,d;t*=3,a*=3;var b=i*i,g=1-i,_=g*g,p=g*i*2,A=-3*_,c=3*(_-p),S=3*(p-b),T=3*b,x=n*n,w=x*n,v=1-n,C=v*v,M=C*v;for(d=0;d<s.length;d++)m=s[d],r=A*m[a][t]+c*m[a][t+1]+S*m[a][t+2]+T*m[a][t+3],f=A*m[a+1][t]+c*m[a+1][t+1]+S*m[a+1][t+2]+T*m[a+1][t+3],u=A*m[a+2][t]+c*m[a+2][t+1]+S*m[a+2][t+2]+T*m[a+2][t+3],l=A*m[a+3][t]+c*m[a+3][t+1]+S*m[a+3][t+2]+T*m[a+3][t+3],y[d]=M*r+3*(C*n*f+v*x*u)+w*l;return y}:o?function(y,t,a,i,n){y||(y=[]);var r,f,u,l;t*=3;var m=i*i,d=1-i,b=d*d,g=d*i*2,_=-3*b,p=3*(b-g),A=3*(g-m),c=3*m,S=1-n;for(u=0;u<s.length;u++)l=s[u],r=_*l[a][t]+p*l[a][t+1]+A*l[a][t+2]+c*l[a][t+3],f=_*l[a+1][t]+p*l[a+1][t+1]+A*l[a+1][t+2]+c*l[a+1][t+3],y[u]=S*r+n*f;return y}:h?function(y,t,a,i,n){y||(y=[]);var r,f,u,l,m,d;a*=3;var b=n*n,g=b*n,_=1-n,p=_*_,A=p*_;for(m=0;m<s.length;m++)d=s[m],r=d[a][t+1]-d[a][t],f=d[a+1][t+1]-d[a+1][t],u=d[a+2][t+1]-d[a+2][t],l=d[a+3][t+1]-d[a+3][t],y[m]=A*r+3*(p*n*f+_*b*u)+g*l;return y}:function(y,t,a,i,n){y||(y=[]);var r,f,u,l,m=1-n;for(u=0;u<s.length;u++)l=s[u],r=l[a][t+1]-l[a][t],f=l[a+1][t+1]-l[a+1][t],y[u]=m*r+n*f;return y}}},{}],704:[function(e,I,F){I.exports=function(s,o,h){return o&&h?function(y,t,a,i,n){y||(y=[]);var r,f,u,l,m,d;t*=3,a*=3;var b=i*i,g=b*i,_=1-i,p=_*_,A=p*_,c=n*n,S=1-n,T=S*S,x=S*n*2,w=-3*T,v=3*(T-x),C=3*(x-c),M=3*c;for(d=0;d<s.length;d++)m=s[d],r=w*m[a][t]+v*m[a+1][t]+C*m[a+2][t]+M*m[a+3][t],f=w*m[a][t+1]+v*m[a+1][t+1]+C*m[a+2][t+1]+M*m[a+3][t+1],u=w*m[a][t+2]+v*m[a+1][t+2]+C*m[a+2][t+2]+M*m[a+3][t+2],l=w*m[a][t+3]+v*m[a+1][t+3]+C*m[a+2][t+3]+M*m[a+3][t+3],y[d]=A*r+3*(p*i*f+_*b*u)+g*l;return y}:o?function(y,t,a,i,n){y||(y=[]);var r,f,u,l,m,d;t*=3;var b=n*n,g=b*n,_=1-n,p=_*_,A=p*_;for(m=0;m<s.length;m++)d=s[m],r=d[a+1][t]-d[a][t],f=d[a+1][t+1]-d[a][t+1],u=d[a+1][t+2]-d[a][t+2],l=d[a+1][t+3]-d[a][t+3],y[m]=A*r+3*(p*n*f+_*b*u)+g*l;return y}:h?function(y,t,a,i,n){y||(y=[]);var r,f,u,l;a*=3;var m=1-i,d=n*n,b=1-n,g=b*b,_=b*n*2,p=-3*g,A=3*(g-_),c=3*(_-d),S=3*d;for(u=0;u<s.length;u++)l=s[u],r=p*l[a][t]+A*l[a+1][t]+c*l[a+2][t]+S*l[a+3][t],f=p*l[a][t+1]+A*l[a+1][t+1]+c*l[a+2][t+1]+S*l[a+3][t+1],y[u]=m*r+i*f;return y}:function(y,t,a,i,n){y||(y=[]);var r,f,u,l,m=1-i;for(u=0;u<s.length;u++)l=s[u],r=l[a+1][t]-l[a][t],f=l[a+1][t+1]-l[a][t+1],y[u]=m*r+i*f;return y}}},{}],705:[function(e,I,F){I.exports=function(s,o,h,y,t){var a=o-2,i=h-2;return y&&t?function(n,r,f){n||(n=[]);var u,l,m,d,b,g,_=Math.max(0,Math.min(Math.floor(r),a)),p=Math.max(0,Math.min(Math.floor(f),i)),A=Math.max(0,Math.min(1,r-_)),c=Math.max(0,Math.min(1,f-p));_*=3,p*=3;var S=A*A,T=S*A,x=1-A,w=x*x,v=w*x,C=c*c,M=C*c,E=1-c,L=E*E,z=L*E;for(g=0;g<s.length;g++)b=s[g],u=v*b[p][_]+3*(w*A*b[p][_+1]+x*S*b[p][_+2])+T*b[p][_+3],l=v*b[p+1][_]+3*(w*A*b[p+1][_+1]+x*S*b[p+1][_+2])+T*b[p+1][_+3],m=v*b[p+2][_]+3*(w*A*b[p+2][_+1]+x*S*b[p+2][_+2])+T*b[p+2][_+3],d=v*b[p+3][_]+3*(w*A*b[p+3][_+1]+x*S*b[p+3][_+2])+T*b[p+3][_+3],n[g]=z*u+3*(L*c*l+E*C*m)+M*d;return n}:y?function(n,r,f){n||(n=[]);var u=Math.max(0,Math.min(Math.floor(r),a)),l=Math.max(0,Math.min(Math.floor(f),i)),m=Math.max(0,Math.min(1,r-u)),d=Math.max(0,Math.min(1,f-l)),b,g,_,p,A,c;u*=3;var S=m*m,T=S*m,x=1-m,w=x*x,v=w*x,C=1-d;for(A=0;A<s.length;A++)c=s[A],b=C*c[l][u]+d*c[l+1][u],g=C*c[l][u+1]+d*c[l+1][u+1],_=C*c[l][u+2]+d*c[l+1][u+1],p=C*c[l][u+3]+d*c[l+1][u+1],n[A]=v*b+3*(w*m*g+x*S*_)+T*p;return n}:t?function(n,r,f){n||(n=[]);var u=Math.max(0,Math.min(Math.floor(r),a)),l=Math.max(0,Math.min(Math.floor(f),i)),m=Math.max(0,Math.min(1,r-u)),d=Math.max(0,Math.min(1,f-l)),b,g,_,p,A,c;l*=3;var S=d*d,T=S*d,x=1-d,w=x*x,v=w*x,C=1-m;for(A=0;A<s.length;A++)c=s[A],b=C*c[l][u]+m*c[l][u+1],g=C*c[l+1][u]+m*c[l+1][u+1],_=C*c[l+2][u]+m*c[l+2][u+1],p=C*c[l+3][u]+m*c[l+3][u+1],n[A]=v*b+3*(w*d*g+x*S*_)+T*p;return n}:function(n,r,f){n||(n=[]);var u=Math.max(0,Math.min(Math.floor(r),a)),l=Math.max(0,Math.min(Math.floor(f),i)),m=Math.max(0,Math.min(1,r-u)),d=Math.max(0,Math.min(1,f-l)),b,g,_,p,A=1-d,c=1-m;for(_=0;_<s.length;_++)p=s[_],b=c*p[l][u]+m*p[l][u+1],g=c*p[l+1][u]+m*p[l+1][u+1],n[_]=A*b+d*g;return n}}},{}],706:[function(e,I,F){var s=e("../../lib"),o=e("./xy_defaults"),h=e("./ab_defaults"),y=e("./attributes"),t=e("../../components/color/attributes");I.exports=function(i,n,r,f){function u(d,b){return s.coerce(i,n,y,d,b)}n._clipPathId="clip"+n.uid+"carpet";var l=u("color",t.defaultLine);if(s.coerceFont(u,"font"),u("carpet"),h(i,n,f,u,l),!n.a||!n.b){n.visible=!1;return}n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0);var m=o(i,n,u);m||(n.visible=!1),n._cheater&&u("cheaterslope")}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),plot:e("./plot"),calc:e("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(e,I,F){I.exports=function(s,o){for(var h=s._fullData.length,y,t=0;t<h;t++){var a=s._fullData[t];if(a.index!==o.index&&a.type==="carpet"&&(y||(y=a),a.carpet===o.carpet))return a}return y}},{}],709:[function(e,I,F){I.exports=function(o,h,y){if(o.length===0)return"";var t,a=[],i=y?3:1;for(t=0;t<o.length;t+=i)a.push(o[t]+","+h[t]),y&&t<o.length-i&&(a.push("C"),a.push([o[t+1]+","+h[t+1],o[t+2]+","+h[t+2]+" "].join(" ")));return a.join(y?"":"L")}},{}],710:[function(e,I,F){var s=e("../../lib").isArrayOrTypedArray;I.exports=function(h,y,t){var a;for(s(h)?h.length>y.length&&(h=h.slice(0,y.length)):h=[],a=0;a<y.length;a++)h[a]=t(y[a]);return h}},{"../../lib":503}],711:[function(e,I,F){I.exports=function(o,h,y,t,a,i){var n=a[0]*o.dpdx(h),r=a[1]*o.dpdy(y),f=1,u=1;if(i){var l=Math.sqrt(a[0]*a[0]+a[1]*a[1]),m=Math.sqrt(i[0]*i[0]+i[1]*i[1]),d=(a[0]*i[0]+a[1]*i[1])/l/m;u=Math.max(0,d)}var b=Math.atan2(r,n)*180/Math.PI;return b<-90?(b+=180,f=-f):b>90&&(b-=180,f=-f),{angle:b,flip:f,p:o.c2p(t,h,y),offsetMultplier:u}}},{}],712:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/drawing"),h=e("./map_1d_array"),y=e("./makepath"),t=e("./orient_text"),a=e("../../lib/svg_text_utils"),i=e("../../lib"),n=i.strRotate,r=i.strTranslate,f=e("../../constants/alignment");I.exports=function(A,c,S,T){var x=c.xaxis,w=c.yaxis,v=A._fullLayout,C=v._clips;i.makeTraceGroups(T,S,"trace").each(function(M){var E=s.select(this),L=M[0],z=L.trace,O=z.aaxis,R=z.baxis,D=i.ensureSingle(E,"g","minorlayer"),H=i.ensureSingle(E,"g","majorlayer"),B=i.ensureSingle(E,"g","boundarylayer"),$=i.ensureSingle(E,"g","labellayer");E.style("opacity",z.opacity),l(x,w,H,O,"a",O._gridlines),l(x,w,H,R,"b",R._gridlines),l(x,w,D,O,"a",O._minorgridlines),l(x,w,D,R,"b",R._minorgridlines),l(x,w,B,O,"a-boundary",O._boundarylines),l(x,w,B,R,"b-boundary",R._boundarylines);var W=m(A,x,w,z,L,$,O._labels,"a-label"),re=m(A,x,w,z,L,$,R._labels,"b-label");d(A,$,z,L,x,w,W,re),u(z,L,C,x,w)})};function u(p,A,c,S,T){var x,w,v,C,M=c.select("#"+p._clipPathId);M.size()||(M=c.append("clipPath").classed("carpetclip",!0));var E=i.ensureSingle(M,"path","carpetboundary"),L=A.clipsegments,z=[];for(C=0;C<L.length;C++)x=L[C],w=h([],x.x,S.c2p),v=h([],x.y,T.c2p),z.push(y(w,v,x.bicubic));var O="M"+z.join("L")+"Z";M.attr("id",p._clipPathId),E.attr("d",O)}function l(p,A,c,S,T,x){var w="const-"+T+"-lines",v=c.selectAll("."+w).data(x);v.enter().append("path").classed(w,!0).style("vector-effect","non-scaling-stroke"),v.each(function(C){var M=C,E=M.x,L=M.y,z=h([],E,p.c2p),O=h([],L,A.c2p),R="M"+y(z,O,M.smoothing),D=s.select(this);D.attr("d",R).style("stroke-width",M.width).style("stroke",M.color).style("fill","none")}),v.exit().remove()}function m(p,A,c,S,T,x,w,v){var C=x.selectAll("text."+v).data(w);C.enter().append("text").classed(v,!0);var M=0,E={};return C.each(function(L,z){var O;if(L.axis.tickangle==="auto")O=t(S,A,c,L.xy,L.dxy);else{var R=(L.axis.tickangle+180)*Math.PI/180;O=t(S,A,c,L.xy,[Math.cos(R),Math.sin(R)])}z||(E={angle:O.angle,flip:O.flip});var D=(L.endAnchor?-1:1)*O.flip,H=s.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(o.font,L.font).text(L.text).call(a.convertToTspans,p),B=o.bBox(this);H.attr("transform",r(O.p[0],O.p[1])+n(O.angle)+r(L.axis.labelpadding*D,B.height*.3)),M=Math.max(M,B.width+L.axis.labelpadding)}),C.exit().remove(),E.maxExtent=M,E}function d(p,A,c,S,T,x,w,v){var C,M,E,L,z=i.aggNums(Math.min,null,c.a),O=i.aggNums(Math.max,null,c.a),R=i.aggNums(Math.min,null,c.b),D=i.aggNums(Math.max,null,c.b);C=.5*(z+O),M=R,E=c.ab2xy(C,M,!0),L=c.dxyda_rough(C,M),w.angle===void 0&&i.extendFlat(w,t(c,T,x,E,c.dxydb_rough(C,M))),_(p,A,c,S,E,L,c.aaxis,T,x,w,"a-title"),C=z,M=.5*(R+D),E=c.ab2xy(C,M,!0),L=c.dxydb_rough(C,M),v.angle===void 0&&i.extendFlat(v,t(c,T,x,E,c.dxyda_rough(C,M))),_(p,A,c,S,E,L,c.baxis,T,x,v,"b-title")}var b=f.LINE_SPACING,g=(1-f.MID_SHIFT)/b+1;function _(p,A,c,S,T,x,w,v,C,M,E){var L=[];w.title.text&&L.push(w.title.text);var z=A.selectAll("text."+E).data(L),O=M.maxExtent;z.enter().append("text").classed(E,!0),z.each(function(){var R=t(c,v,C,T,x);["start","both"].indexOf(w.showticklabels)===-1&&(O=0);var D=w.title.font.size;O+=D+w.title.offset;var H=M.angle+(M.flip<0?180:0),B=(H-R.angle+450)%360,$=B>90&&B<270,W=s.select(this);W.text(w.title.text).call(a.convertToTspans,p),$&&(O=(-a.lineCount(W)+g)*b*D-O),W.attr("transform",r(R.p[0],R.p[1])+n(R.angle)+r(0,O)).attr("text-anchor","middle").call(o.font,w.title.font)}),z.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(e,I,F){var s=e("./constants"),o=e("../../lib/search").findBin,h=e("./compute_control_points"),y=e("./create_spline_evaluator"),t=e("./create_i_derivative_evaluator"),a=e("./create_j_derivative_evaluator");I.exports=function(n){var r=n._a,f=n._b,u=r.length,l=f.length,m=n.aaxis,d=n.baxis,b=r[0],g=r[u-1],_=f[0],p=f[l-1],A=r[r.length-1]-r[0],c=f[f.length-1]-f[0],S=A*s.RELATIVE_CULL_TOLERANCE,T=c*s.RELATIVE_CULL_TOLERANCE;b-=S,g+=S,_-=T,p+=T,n.isVisible=function(x,w){return x>b&&x<g&&w>_&&w<p},n.isOccluded=function(x,w){return x<b||x>g||w<_||w>p},n.setScale=function(){var x=n._x,w=n._y,v=h(n._xctrl,n._yctrl,x,w,m.smoothing,d.smoothing);n._xctrl=v[0],n._yctrl=v[1],n.evalxy=y([n._xctrl,n._yctrl],u,l,m.smoothing,d.smoothing),n.dxydi=t([n._xctrl,n._yctrl],m.smoothing,d.smoothing),n.dxydj=a([n._xctrl,n._yctrl],m.smoothing,d.smoothing)},n.i2a=function(x){var w=Math.max(0,Math.floor(x[0]),u-2),v=x[0]-w;return(1-v)*r[w]+v*r[w+1]},n.j2b=function(x){var w=Math.max(0,Math.floor(x[1]),u-2),v=x[1]-w;return(1-v)*f[w]+v*f[w+1]},n.ij2ab=function(x){return[n.i2a(x[0]),n.j2b(x[1])]},n.a2i=function(x){var w=Math.max(0,Math.min(o(x,r),u-2)),v=r[w],C=r[w+1];return Math.max(0,Math.min(u-1,w+(x-v)/(C-v)))},n.b2j=function(x){var w=Math.max(0,Math.min(o(x,f),l-2)),v=f[w],C=f[w+1];return Math.max(0,Math.min(l-1,w+(x-v)/(C-v)))},n.ab2ij=function(x){return[n.a2i(x[0]),n.b2j(x[1])]},n.i2c=function(x,w){return n.evalxy([],x,w)},n.ab2xy=function(x,w,v){if(!v&&(x<r[0]||x>r[u-1]|w<f[0]||w>f[l-1]))return[!1,!1];var C=n.a2i(x),M=n.b2j(w),E=n.evalxy([],C,M);if(v){var L=0,z=0,O=[],R,D,H,B;x<r[0]?(R=0,D=0,L=(x-r[0])/(r[1]-r[0])):x>r[u-1]?(R=u-2,D=1,L=(x-r[u-1])/(r[u-1]-r[u-2])):(R=Math.max(0,Math.min(u-2,Math.floor(C))),D=C-R),w<f[0]?(H=0,B=0,z=(w-f[0])/(f[1]-f[0])):w>f[l-1]?(H=l-2,B=1,z=(w-f[l-1])/(f[l-1]-f[l-2])):(H=Math.max(0,Math.min(l-2,Math.floor(M))),B=M-H),L&&(n.dxydi(O,R,H,D,B),E[0]+=O[0]*L,E[1]+=O[1]*L),z&&(n.dxydj(O,R,H,D,B),E[0]+=O[0]*z,E[1]+=O[1]*z)}return E},n.c2p=function(x,w,v){return[w.c2p(x[0]),v.c2p(x[1])]},n.p2x=function(x,w,v){return[w.p2c(x[0]),v.p2c(x[1])]},n.dadi=function(x){var w=Math.max(0,Math.min(r.length-2,x));return r[w+1]-r[w]},n.dbdj=function(x){var w=Math.max(0,Math.min(f.length-2,x));return f[w+1]-f[w]},n.dxyda=function(x,w,v,C){var M=n.dxydi(null,x,w,v,C),E=n.dadi(x,v);return[M[0]/E,M[1]/E]},n.dxydb=function(x,w,v,C){var M=n.dxydj(null,x,w,v,C),E=n.dbdj(w,C);return[M[0]/E,M[1]/E]},n.dxyda_rough=function(x,w,v){var C=A*(v||.1),M=n.ab2xy(x+C,w,!0),E=n.ab2xy(x-C,w,!0);return[(M[0]-E[0])*.5/C,(M[1]-E[1])*.5/C]},n.dxydb_rough=function(x,w,v){var C=c*(v||.1),M=n.ab2xy(x,w+C,!0),E=n.ab2xy(x,w-C,!0);return[(M[0]-E[0])*.5/C,(M[1]-E[1])*.5/C]},n.dpdx=function(x){return x._m},n.dpdy=function(x){return x._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y,t){var a,i,n,r=[],f=[],u=h[0].length,l=h.length;function m(Q,Z){var K=0,le,fe=0;return Q>0&&(le=h[Z][Q-1])!==void 0&&(fe++,K+=le),Q<u-1&&(le=h[Z][Q+1])!==void 0&&(fe++,K+=le),Z>0&&(le=h[Z-1][Q])!==void 0&&(fe++,K+=le),Z<l-1&&(le=h[Z+1][Q])!==void 0&&(fe++,K+=le),K/Math.max(1,fe)}var d=0;for(a=0;a<u;a++)for(i=0;i<l;i++)h[i][a]===void 0&&(r.push(a),f.push(i),h[i][a]=m(a,i)),d=Math.max(d,Math.abs(h[i][a]));if(!r.length)return h;var b,g,_,p,A,c,S,T,x,w,v,C=1e-5,M=0,E=100,L=0,z=r.length;do{for(M=0,n=0;n<z;n++){a=r[n],i=f[n];var O=0,R=0,D,H,B,$,W,re;a===0?(W=Math.min(u-1,2),B=y[W],$=y[1],D=h[i][W],H=h[i][1],R+=H+(H-D)*(y[0]-$)/($-B),O++):a===u-1&&(W=Math.max(0,u-3),B=y[W],$=y[u-2],D=h[i][W],H=h[i][u-2],R+=H+(H-D)*(y[u-1]-$)/($-B),O++),(a===0||a===u-1)&&i>0&&i<l-1&&(b=t[i+1]-t[i],g=t[i]-t[i-1],R+=(g*h[i+1][a]+b*h[i-1][a])/(g+b),O++),i===0?(re=Math.min(l-1,2),B=t[re],$=t[1],D=h[re][a],H=h[1][a],R+=H+(H-D)*(t[0]-$)/($-B),O++):i===l-1&&(re=Math.max(0,l-3),B=t[re],$=t[l-2],D=h[re][a],H=h[l-2][a],R+=H+(H-D)*(t[l-1]-$)/($-B),O++),(i===0||i===l-1)&&a>0&&a<u-1&&(b=y[a+1]-y[a],g=y[a]-y[a-1],R+=(g*h[i][a+1]+b*h[i][a-1])/(g+b),O++),O?R/=O:(_=y[a+1]-y[a],p=y[a]-y[a-1],A=t[i+1]-t[i],c=t[i]-t[i-1],S=_*p*(_+p),T=A*c*(A+c),R=(S*(c*h[i+1][a]+A*h[i-1][a])+T*(p*h[i][a+1]+_*h[i][a-1]))/(T*(p+_)+S*(c+A))),x=R-h[i][a],w=x/d,M+=w*w,v=O?0:.85,h[i][a]+=x*(1+v)}M=Math.sqrt(M)}while(L++<E&&M>C);return s.log("Smoother converged to",M,"after",L,"iterations"),h}},{"../../lib":503}],715:[function(e,I,F){var s=e("../../lib").isArray1D;I.exports=function(h,y,t){var a=t("x"),i=a&&a.length,n=t("y"),r=n&&n.length;if(!i&&!r)return!1;if(y._cheater=!a,(!i||s(a))&&(!r||s(n))){var f=i?a.length:1/0;r&&(f=Math.min(f,n.length)),y.a&&y.a.length&&(f=Math.min(f,y.a.length)),y.b&&y.b.length&&(f=Math.min(f,y.b.length)),y._length=f}else y._length=null;return!0}},{"../../lib":503}],716:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../scattergeo/attributes"),h=e("../../components/colorscale/attributes"),y=e("../../plots/attributes"),t=e("../../components/color/attributes").defaultLine,a=e("../../lib/extend").extendFlat,i=o.marker.line;I.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:o.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},o.geojson,{}),featureidkey:o.featureidkey,text:a({},o.text,{}),hovertext:a({},o.hovertext,{}),marker:{line:{color:a({},i.color,{dflt:t}),width:a({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:o.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:o.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},y.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:s(),showlegend:a({},y.showlegend,{dflt:!1})},h("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":969}],717:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../constants/numerical").BADNUM,h=e("../../components/colorscale/calc"),y=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection");function a(i){return i&&typeof i=="string"}I.exports=function(n,r){var f=r._length,u=new Array(f),l;r.geojson?l=function(_){return a(_)||s(_)}:l=a;for(var m=0;m<f;m++){var d=u[m]={},b=r.locations[m],g=r.z[m];l(b)&&s(g)?(d.loc=b,d.z=g):(d.loc=null,d.z=o),d.index=m}return y(u,r),h(n,r,{vals:r.z,containerStr:"",cLetter:"z"}),t(u,r),u}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"fast-isnumeric":190}],718:[function(e,I,F){var s=e("../../lib"),o=e("../../components/colorscale/defaults"),h=e("./attributes");I.exports=function(t,a,i,n){function r(g,_){return s.coerce(t,a,h,g,_)}var f=r("locations"),u=r("z");if(!(f&&f.length&&s.isArrayOrTypedArray(u)&&u.length)){a.visible=!1;return}a._length=Math.min(f.length,u.length);var l=r("geojson"),m;(typeof l=="string"&&l!==""||s.isPlainObject(l))&&(m="geojson-id");var d=r("locationmode",m);d==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var b=r("marker.line.width");b&&r("marker.line.color"),r("marker.opacity"),o(t,a,n,r,{prefix:"",cLetter:"z"}),s.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(e,I,F){I.exports=function(o,h,y,t,a){o.location=h.location,o.z=h.z;var i=t[a];return i.fIn&&i.fIn.properties&&(o.properties=i.fIn.properties),o.ct=i.ct,o}},{}],720:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("./attributes"),h=e("../../lib").fillText;I.exports=function(a,i,n){var r=a.cd,f=r[0].trace,u=a.subplot,l,m,d,b,g=[i,n],_=[i+360,n];for(m=0;m<r.length;m++)if(l=r[m],b=!1,l._polygons){for(d=0;d<l._polygons.length;d++)l._polygons[d].contains(g)&&(b=!b),l._polygons[d].contains(_)&&(b=!b);if(b)break}if(!(!b||!l))return a.x0=a.x1=a.xa.c2p(l.ct),a.y0=a.y1=a.ya.c2p(l.ct),a.index=l.index,a.location=l.loc,a.z=l.z,a.zLabel=s.tickText(u.mockAxis,u.mockAxis.c2l(l.z),"hover").text,a.hovertemplate=l.hovertemplate,y(a,f,l),[a]};function y(t,a,i){if(!a.hovertemplate){var n=i.hi||a.hoverinfo,r=String(i.loc),f=n==="all"?o.hoverinfo.flags:n.split("+"),u=f.indexOf("name")!==-1,l=f.indexOf("location")!==-1,m=f.indexOf("z")!==-1,d=f.indexOf("text")!==-1,b=!u&&l,g=[];b?t.nameOverride=r:(u&&(t.nameOverride=a.name),l&&g.push(r)),m&&g.push(t.zLabel),d&&h(i,a,g),t.extraText=g.join("<br>")}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"choropleth",basePlotModule:e("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../lib/geo_location_utils"),y=e("../../lib/topojson_utils").getTopojsonFeatures,t=e("../../plots/cartesian/autorange").findExtremes,a=e("./style").style;function i(r,f,u){var l=f.layers.backplot.select(".choroplethlayer");o.makeTraceGroups(l,u,"trace choropleth").each(function(m){var d=s.select(this),b=d.selectAll("path.choroplethlocation").data(o.identity);b.enter().append("path").classed("choroplethlocation",!0),b.exit().remove(),a(r,m)})}function n(r,f){for(var u=r[0].trace,l=f[u.geo],m=l._subplot,d=u.locationmode,b=u._length,g=d==="geojson-id"?h.extractTraceFeature(r):y(u,m.topojson),_=[],p=[],A=0;A<b;A++){var c=r[A],S=d==="geojson-id"?c.fOut:h.locationToFeature(d,c.loc,g);if(S){c.geojson=S,c.ct=S.properties.ct,c._polygons=h.feature2polygons(S);var T=h.computeBbox(S);_.push(T[0],T[2]),p.push(T[1],T[3])}else c.geojson=null}if(l.fitbounds==="geojson"&&d==="geojson-id"){var x=h.computeBbox(h.getTraceGeojson(u));_=[x[0],x[2]],p=[x[1],x[3]]}var w={padded:!0};u._extremes.lon=t(l.lonaxis._ax,_,w),u._extremes.lat=t(l.lataxis._ax,p,w)}I.exports={calcGeoJSON:n,plot:i}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(e,I,F){I.exports=function(o,h){var y=o.cd,t=o.xaxis,a=o.yaxis,i=[],n,r,f,u,l;if(h===!1)for(n=0;n<y.length;n++)y[n].selected=0;else for(n=0;n<y.length;n++)r=y[n],f=r.ct,f&&(u=t.c2p(f),l=a.c2p(f),h.contains([u,l],null,n,o)?(i.push({pointNumber:n,lon:f[0],lat:f[1]}),r.selected=1):r.selected=0);return i}},{}],724:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/color"),h=e("../../components/drawing"),y=e("../../components/colorscale");function t(n,r){r&&a(n,r)}function a(n,r){var f=r[0].trace,u=r[0].node3,l=u.selectAll(".choroplethlocation"),m=f.marker||{},d=m.line||{},b=y.makeColorScaleFuncFromTrace(f);l.each(function(g){s.select(this).attr("fill",b(g.z)).call(o.stroke,g.mlc||d.color).call(h.dashLine,"",g.mlw||d.width||0).style("opacity",m.opacity)}),h.selectedPointStyle(l,f,n)}function i(n,r){var f=r[0].node3,u=r[0].trace;u.selectedpoints?h.selectedPointStyle(f.selectAll(".choroplethlocation"),u,n):a(n,r)}I.exports={style:t,styleOnSelect:i}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(e,I,F){var s=e("../choropleth/attributes"),o=e("../../components/colorscale/attributes"),h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;I.exports=t({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:t({},s.featureidkey,{}),below:{valType:"string",editType:"plot"},text:s.text,hovertext:s.hovertext,marker:{line:{color:t({},s.marker.line.color,{editType:"plot"}),width:t({},s.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:t({},s.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:t({},s.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:t({},s.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:s.hoverinfo,hovertemplate:h({},{keys:["properties"]}),showlegend:t({},y.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../components/colorscale"),y=e("../../components/drawing"),t=e("../../lib/geojson_utils").makeBlank,a=e("../../lib/geo_location_utils");function i(r){var f=r[0].trace,u=f.visible===!0&&f._length!==0,l={layout:{visibility:"none"},paint:{}},m={layout:{visibility:"none"},paint:{}},d=f._opts={fill:l,line:m,geojson:t()};if(!u)return d;var b=a.extractTraceFeature(r);if(!b)return d;var g=h.makeColorScaleFuncFromTrace(f),_=f.marker,p=_.line||{},A;o.isArrayOrTypedArray(_.opacity)&&(A=function(M){var E=M.mo;return s(E)?+o.constrain(E,0,1):0});var c;o.isArrayOrTypedArray(p.color)&&(c=function(M){return M.mlc});var S;o.isArrayOrTypedArray(p.width)&&(S=function(M){return M.mlw});for(var T=0;T<r.length;T++){var x=r[T],w=x.fOut;if(w){var v=w.properties;v.fc=g(x.z),A&&(v.mo=A(x)),c&&(v.mlc=c(x)),S&&(v.mlw=S(x)),x.ct=v.ct,x._polygons=a.feature2polygons(w)}}var C=A?{type:"identity",property:"mo"}:_.opacity;return o.extendFlat(l.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":C}),o.extendFlat(m.paint,{"line-color":c?{type:"identity",property:"mlc"}:p.color,"line-width":S?{type:"identity",property:"mlw"}:p.width,"line-opacity":C}),l.layout.visibility="visible",m.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:b},n(r),d}function n(r){var f=r[0].trace,u=f._opts,l;if(f.selectedpoints){for(var m=y.makeSelectedPointStyleFns(f),d=0;d<r.length;d++){var b=r[d];b.fOut&&(b.fOut.properties.mo2=m.selectedOpacityFn(b))}l={type:"identity",property:"mo2"}}else l=o.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return o.extendFlat(u.fill.paint,{"fill-opacity":l}),o.extendFlat(u.line.paint,{"line-opacity":l}),u}I.exports={convert:i,convertOnSelect:n}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(e,I,F){var s=e("../../lib"),o=e("../../components/colorscale/defaults"),h=e("./attributes");I.exports=function(t,a,i,n){function r(d,b){return s.coerce(t,a,h,d,b)}var f=r("locations"),u=r("z"),l=r("geojson");if(!s.isArrayOrTypedArray(f)||!f.length||!s.isArrayOrTypedArray(u)||!u.length||!(typeof l=="string"&&l!==""||s.isPlainObject(l))){a.visible=!1;return}r("featureidkey"),a._length=Math.min(f.length,u.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var m=r("marker.line.width");m&&r("marker.line.color"),r("marker.opacity"),o(t,a,n,r,{prefix:"",cLetter:"z"}),s.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../choropleth/calc"),plot:e("./plot"),hoverPoints:e("../choropleth/hover"),eventData:e("../choropleth/event_data"),selectPoints:e("../choropleth/select"),styleOnSelect:function(s,o){if(o){var h=o[0].trace;h._glTrace.updateOnSelect(o)}},getBelow:function(s,o){for(var h=o.getMapLayers(),y=h.length-2;y>=0;y--){var t=h[y].id;if(typeof t=="string"&&t.indexOf("water")===0){for(var a=y+1;a<h.length;a++)if(t=h[a].id,typeof t=="string"&&t.indexOf("plotly-")===-1)return t}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(e,I,F){var s=e("./convert").convert,o=e("./convert").convertOnSelect,h=e("../../plots/mapbox/constants").traceLayerPrefix;function y(a,i){this.type="choroplethmapbox",this.subplot=a,this.uid=i,this.sourceId="source-"+i,this.layerList=[["fill",h+i+"-fill"],["line",h+i+"-line"]],this.below=null}var t=y.prototype;t.update=function(a){this._update(s(a))},t.updateOnSelect=function(a){this._update(o(a))},t._update=function(a){var i=this.subplot,n=this.layerList,r=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var f=0;f<n.length;f++){var u=n[f],l=u[0],m=u[1],d=a[l];i.setOptions(m,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&i.setOptions(m,"setPaintProperty",d.paint)}},t._addLayers=function(a,i){for(var n=this.subplot,r=this.layerList,f=this.sourceId,u=0;u<r.length;u++){var l=r[u],m=l[0],d=a[m];n.addLayer({type:m,id:l[1],source:f,layout:d.layout,paint:d.paint},i)}},t._removeLayers=function(){for(var a=this.subplot.map,i=this.layerList,n=i.length-1;n>=0;n--)a.removeLayer(i[n][1])},t.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},I.exports=function(i,n){var r=n[0].trace,f=new y(i,r.uid),u=f.sourceId,l=s(n),m=f.below=i.belowLookup["trace-"+r.uid];return i.map.addSource(u,{type:"geojson",data:l.geojson}),f._addLayers(l,m),n[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(e,I,F){var s=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../mesh3d/attributes"),t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:h({editType:"calc"},{keys:["norm"]}),uhoverformat:o("u",1),vhoverformat:o("v",1),whoverformat:o("w",1),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),showlegend:a({},t.showlegend,{dflt:!1})};a(i,s("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=y[r]}),i.hoverinfo=a({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,I.exports=i},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(e,I,F){var s=e("../../components/colorscale/calc");I.exports=function(h,y){for(var t=y.u,a=y.v,i=y.w,n=Math.min(y.x.length,y.y.length,y.z.length,t.length,a.length,i.length),r=-1/0,f=1/0,u=0;u<n;u++){var l=t[u],m=a[u],d=i[u],b=Math.sqrt(l*l+m*m+d*d);r=Math.max(r,b),f=Math.min(f,b)}y._len=n,y._normMax=r,s(h,y,{vals:[f,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(e,I,F){var s=e("../../../stackgl_modules").gl_cone3d,o=e("../../../stackgl_modules").gl_cone3d.createConeMesh,h=e("../../lib").simpleMap,y=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,a=e("../../plots/gl3d/zip3");function i(d,b){this.scene=d,this.uid=b,this.mesh=null,this.data=null}var n=i.prototype;n.handlePick=function(d){if(d.object===this.mesh){var b=d.index=d.data.index,g=this.data.x[b],_=this.data.y[b],p=this.data.z[b],A=this.data.u[b],c=this.data.v[b],S=this.data.w[b];d.traceCoordinate=[g,_,p,A,c,S,Math.sqrt(A*A+c*c+S*S)];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[b]!==void 0?d.textLabel=T[b]:T&&(d.textLabel=T),!0}};var r={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},u={tip:1,tail:1,cm:.75,center:.5};function l(d,b){var g=d.fullSceneLayout,_=d.dataScale,p={};function A(x,w){var v=g[w],C=_[r[w]];return h(x,function(M){return v.d2l(M)*C})}p.vectors=a(A(b.u,"xaxis"),A(b.v,"yaxis"),A(b.w,"zaxis"),b._len),p.positions=a(A(b.x,"xaxis"),A(b.y,"yaxis"),A(b.z,"zaxis"),b._len);var c=t(b);p.colormap=y(b),p.vertexIntensityBounds=[c.min/b._normMax,c.max/b._normMax],p.coneOffset=f[b.anchor],b.sizemode==="scaled"?p.coneSize=b.sizeref||.5:p.coneSize=b.sizeref&&b._normMax?b.sizeref/b._normMax:.5;var S=s(p),T=b.lightposition;return S.lightPosition=[T.x,T.y,T.z],S.ambient=b.lighting.ambient,S.diffuse=b.lighting.diffuse,S.specular=b.lighting.specular,S.roughness=b.lighting.roughness,S.fresnel=b.lighting.fresnel,S.opacity=b.opacity,b._pad=u[b.anchor]*S.vectorScale*S.coneScale*b._normMax,S}n.update=function(d){this.data=d;var b=l(this.scene,d);this.mesh.update(b)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function m(d,b){var g=d.glplot.gl,_=l(d,b),p=o(g,_),A=new i(d,b.uid);return A.mesh=p,A.data=b,p._trace=A,d.glplot.add(p),A}I.exports=m},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(e,I,F){var s=e("../../lib"),o=e("../../components/colorscale/defaults"),h=e("./attributes");I.exports=function(t,a,i,n){function r(g,_){return s.coerce(t,a,h,g,_)}var f=r("u"),u=r("v"),l=r("w"),m=r("x"),d=r("y"),b=r("z");if(!f||!f.length||!u||!u.length||!l||!l.length||!m||!m.length||!d||!d.length||!b||!b.length){a.visible=!1;return}r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),o(t,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(e,I,F){I.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(s,o){return s.norm=o.traceCoordinate[6],s},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(e,I,F){var s=e("../heatmap/attributes"),o=e("../scatter/attributes"),h=e("../../plots/cartesian/axis_format_attributes"),y=h.axisHoverFormat,t=h.descriptionOnlyNumbers,a=e("../../components/colorscale/attributes"),i=e("../../components/drawing/attributes").dash,n=e("../../plots/font_attributes"),r=e("../../lib/extend").extendFlat,f=e("../../constants/filter_ops"),u=f.COMPARISON_OPS2,l=f.INTERVAL_OPS,m=o.line;I.exports=r({z:s.z,x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,text:s.text,hovertext:s.hovertext,transpose:s.transpose,xtype:s.xtype,ytype:s.ytype,xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:s.hovertemplate,texttemplate:r({},s.texttemplate,{}),textfont:r({},s.textfont,{}),hoverongaps:s.hoverongaps,connectgaps:r({},s.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:t("contour label")},operation:{valType:"enumerated",values:[].concat(u).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},m.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:i,smoothing:r({},m.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":927}],736:[function(e,I,F){var s=e("../../components/colorscale"),o=e("../heatmap/calc"),h=e("./set_contours"),y=e("./end_plus");I.exports=function(a,i){var n=o(a,i),r=n[0].z;h(i,r);var f=i.contours,u=s.extractOpts(i),l;if(f.coloring==="heatmap"&&u.auto&&i.autocontour===!1){var m=f.start,d=y(f),b=f.size||1,g=Math.floor((d-m)/b)+1;isFinite(b)||(b=1,g=1);var _=m-b/2,p=_+g*b;l=[_,p]}else l=r;return s.calc(a,i,{vals:l,cLetter:"z"}),n}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(e,I,F){I.exports=function(s,o){var h=s[0],y=h.z,t;switch(o.type){case"levels":var a=Math.min(y[0][0],y[0][1]);for(t=0;t<s.length;t++){var i=s[t];i.prefixBoundary=!i.edgepaths.length&&(a>i.level||i.starts.length&&a===i.level)}break;case"constraint":if(h.prefixBoundary=!1,h.edgepaths.length)return;var n=h.x.length,r=h.y.length,f=-1/0,u=1/0;for(t=0;t<r;t++)u=Math.min(u,y[t][0]),u=Math.min(u,y[t][n-1]),f=Math.max(f,y[t][0]),f=Math.max(f,y[t][n-1]);for(t=1;t<n-1;t++)u=Math.min(u,y[0][t]),u=Math.min(u,y[r-1][t]),f=Math.max(f,y[0][t]),f=Math.max(f,y[r-1][t]);var l=o.value,m,d;switch(o._operation){case">":l>f&&(h.prefixBoundary=!0);break;case"<":(l<u||h.starts.length&&l===u)&&(h.prefixBoundary=!0);break;case"[]":m=Math.min(l[0],l[1]),d=Math.max(l[0],l[1]),(d<u||m>f||h.starts.length&&d===u)&&(h.prefixBoundary=!0);break;case"][":m=Math.min(l[0],l[1]),d=Math.max(l[0],l[1]),m<u&&d>f&&(h.prefixBoundary=!0);break}break}}},{}],738:[function(e,I,F){var s=e("../../components/colorscale"),o=e("./make_color_map"),h=e("./end_plus");function y(t,a,i){var n=a.contours,r=a.line,f=n.size||1,u=n.coloring,l=o(a,{isColorbar:!0});if(u==="heatmap"){var m=s.extractOpts(a);i._fillgradient=m.reversescale?s.flipScale(m.colorscale):m.colorscale,i._zrange=[m.min,m.max]}else u==="fill"&&(i._fillcolor=l);i._line={color:u==="lines"?l:r.color,width:n.showlines!==!1?r.width:0,dash:r.dash},i._levels={start:n.start,end:h(n),size:f}}I.exports={min:"zmin",max:"zmax",calc:y}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(e,I,F){I.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(e,I,F){var s=e("fast-isnumeric"),o=e("./label_defaults"),h=e("../../components/color"),y=h.addOpacity,t=h.opacity,a=e("../../constants/filter_ops"),i=a.CONSTRAINT_REDUCTION,n=a.COMPARISON_OPS2;I.exports=function(u,l,m,d,b,g){var _=l.contours,p,A,c,S=m("contours.operation");if(_._operation=i[S],r(m,_),S==="="?p=_.showlines=!0:(p=m("contours.showlines"),c=m("fillcolor",y((u.line||{}).color||b,.5))),p){var T=c&&t(c)?y(l.fillcolor,1):b;A=m("line.color",T),m("line.width",2),m("line.dash")}m("line.smoothing"),o(m,d,A,g)};function r(f,u){var l;n.indexOf(u.operation)===-1?(f("contours.value",[0,1]),Array.isArray(u.value)?u.value.length>2?u.value=u.value.slice(2):u.length===0?u.value=[0,1]:u.length<2?(l=parseFloat(u.value[0]),u.value=[l,l+1]):u.value=[parseFloat(u.value[0]),parseFloat(u.value[1])]:s(u.value)&&(l=parseFloat(u.value),u.value=[l,l+1])):(f("contours.value",0),s(u.value)||(Array.isArray(u.value)?u.value=parseFloat(u.value[0]):u.value=0))}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(e,I,F){var s=e("../../constants/filter_ops"),o=e("fast-isnumeric");I.exports={"[]":y("[]"),"][":y("]["),">":t(">"),"<":t("<"),"=":t("=")};function h(a,i){var n=Array.isArray(i),r;function f(u){return o(u)?+u:null}return s.COMPARISON_OPS2.indexOf(a)!==-1?r=f(n?i[0]:i):s.INTERVAL_OPS.indexOf(a)!==-1?r=n?[f(i[0]),f(i[1])]:[f(i),f(i)]:s.SET_OPS.indexOf(a)!==-1&&(r=n?i.map(f):[f(i)]),r}function y(a){return function(i){i=h(a,i);var n=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]);return{start:n,end:r,size:r-n}}}function t(a){return function(i){return i=h(a,i),{start:i,end:1/0,size:1/0}}}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(e,I,F){I.exports=function(o,h,y,t){var a=t("contours.start"),i=t("contours.end"),n=a===!1||i===!1,r=y("contours.size"),f;n?f=h.autocontour=!0:f=y("autocontour",!1),(f||!r)&&y("ncontours")}},{}],743:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){var t,a,i,n=function(u){return u.reverse()},r=function(u){return u};switch(y){case"=":case"<":return h;case">":for(h.length!==1&&s.warn("Contour data invalid for the specified inequality operation."),a=h[0],t=0;t<a.edgepaths.length;t++)a.edgepaths[t]=n(a.edgepaths[t]);for(t=0;t<a.paths.length;t++)a.paths[t]=n(a.paths[t]);for(t=0;t<a.starts.length;t++)a.starts[t]=n(a.starts[t]);return h;case"][":var f=n;n=r,r=f;case"[]":for(h.length!==2&&s.warn("Contour data invalid for the specified inequality range operation."),a=o(h[0]),i=o(h[1]),t=0;t<a.edgepaths.length;t++)a.edgepaths[t]=n(a.edgepaths[t]);for(t=0;t<a.paths.length;t++)a.paths[t]=n(a.paths[t]);for(t=0;t<a.starts.length;t++)a.starts[t]=n(a.starts[t]);for(;i.edgepaths.length;)a.edgepaths.push(r(i.edgepaths.shift()));for(;i.paths.length;)a.paths.push(r(i.paths.shift()));for(;i.starts.length;)a.starts.push(r(i.starts.shift()));return[a]}};function o(h){return s.extendFlat({},h,{edgepaths:s.extendDeep([],h.edgepaths),paths:s.extendDeep([],h.paths),starts:s.extendDeep([],h.starts)})}},{"../../lib":503}],744:[function(e,I,F){var s=e("../../lib"),o=e("../heatmap/xyz_defaults"),h=e("../scatter/period_defaults"),y=e("./constraint_defaults"),t=e("./contours_defaults"),a=e("./style_defaults"),i=e("../heatmap/label_defaults"),n=e("./attributes");I.exports=function(f,u,l,m){function d(p,A){return s.coerce(f,u,n,p,A)}function b(p){return s.coerce2(f,u,n,p)}var g=o(f,u,d,m);if(!g){u.visible=!1;return}h(f,u,m,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var _=d("contours.type")==="constraint";d("connectgaps",s.isArray1D(u.z)),_?y(f,u,d,m,l):(t(f,u,d,b),a(f,u,d,m)),u.contours&&u.contours.coloring==="heatmap"&&i(d,m)}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":947,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(e,I,F){var s=e("../../lib"),o=e("./constraint_mapping"),h=e("./end_plus");I.exports=function(t,a,i){for(var n=t.type==="constraint"?o[t._operation](t.value):t,r=n.size,f=[],u=h(n),l=i.trace._carpetTrace,m=l?{xaxis:l.aaxis,yaxis:l.baxis,x:i.a,y:i.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:i.x,y:i.y},d=n.start;d<u;d+=r)if(f.push(s.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},m)),f.length>1e3){s.warn("Too many contours, clipping at 1000",t);break}return f}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(e,I,F){I.exports=function(o){return o.end+o.size/1e6}},{}],747:[function(e,I,F){var s=e("../../lib"),o=e("./constants");I.exports=function(r,f,u){var l,m,d,b,g;for(f=f||.01,u=u||.01,d=0;d<r.length;d++){for(b=r[d],g=0;g<b.starts.length;g++)m=b.starts[g],t(b,m,"edge",f,u);for(l=0;Object.keys(b.crossings).length&&l<1e4;)l++,m=Object.keys(b.crossings)[0].split(",").map(Number),t(b,m,void 0,f,u);l===1e4&&s.log("Infinite loop in contour?")}};function h(n,r,f,u){return Math.abs(n[0]-r[0])<f&&Math.abs(n[1]-r[1])<u}function y(n,r){var f=n[2]-r[2],u=n[3]-r[3];return Math.sqrt(f*f+u*u)}function t(n,r,f,u,l){var m=r.join(","),d=n.crossings[m],b=a(d,f,r),g=[i(n,r,[-b[0],-b[1]])],_=n.z.length,p=n.z[0].length,A=r.slice(),c=b.slice(),S;for(S=0;S<1e4;S++){if(d>20?(d=o.CHOOSESADDLE[d][(b[0]||b[1])<0?0:1],n.crossings[m]=o.SADDLEREMAINDER[d]):delete n.crossings[m],b=o.NEWDELTA[d],!b){s.log("Found bad marching index:",d,r,n.level);break}g.push(i(n,r,b)),r[0]+=b[0],r[1]+=b[1],m=r.join(","),h(g[g.length-1],g[g.length-2],u,l)&&g.pop();var T=b[0]&&(r[0]<0||r[0]>p-2)||b[1]&&(r[1]<0||r[1]>_-2),x=r[0]===A[0]&&r[1]===A[1]&&b[0]===c[0]&&b[1]===c[1];if(x||f&&T)break;d=n.crossings[m]}S===1e4&&s.log("Infinite loop in contour?");var w=h(g[0],g[g.length-1],u,l),v=0,C=.2*n.smoothing,M=[],E=0,L,z,O,R,D,H,B,$,W,re,Q;for(S=1;S<g.length;S++)B=y(g[S],g[S-1]),v+=B,M.push(B);var Z=v/M.length*C;function K(ue){return g[ue%g.length]}for(S=g.length-2;S>=E;S--)if(L=M[S],L<Z){for(O=0,z=S-1;z>=E&&L+M[z]<Z;z--)L+=M[z];if(w&&S===g.length-2)for(O=0;O<z&&L+M[O]<Z;O++)L+=M[O];D=S-z+O+1,H=Math.floor((S+z+O+2)/2),!w&&S===g.length-2?R=g[g.length-1]:!w&&z===-1?R=g[0]:D%2?R=K(H):R=[(K(H)[0]+K(H+1)[0])/2,(K(H)[1]+K(H+1)[1])/2],g.splice(z+1,S-z+1,R),S=z+1,O&&(E=O),w&&(S===g.length-2?g[O]=g[g.length-1]:S===0&&(g[g.length-1]=g[0]))}for(g.splice(0,E),S=0;S<g.length;S++)g[S].length=2;if(!(g.length<2))if(w)g.pop(),n.paths.push(g);else{f||s.log("Unclosed interior contour?",n.level,A.join(","),g.join("L"));var le=!1;for($=0;$<n.edgepaths.length;$++)if(re=n.edgepaths[$],!le&&h(re[0],g[g.length-1],u,l)){g.pop(),le=!0;var fe=!1;for(W=0;W<n.edgepaths.length;W++)if(Q=n.edgepaths[W],h(Q[Q.length-1],g[0],u,l)){fe=!0,g.shift(),n.edgepaths.splice($,1),W===$?n.paths.push(g.concat(Q)):(W>$&&W--,n.edgepaths[W]=Q.concat(g,re));break}fe||(n.edgepaths[$]=g.concat(re))}for($=0;$<n.edgepaths.length&&!le;$++)re=n.edgepaths[$],h(re[re.length-1],g[0],u,l)&&(g.shift(),n.edgepaths[$]=re.concat(g),le=!0);le||n.edgepaths.push(g)}}function a(n,r,f){var u=0,l=0;return n>20&&r?n===208||n===1114?u=f[0]===0?1:-1:l=f[1]===0?1:-1:o.BOTTOMSTART.indexOf(n)!==-1?l=1:o.LEFTSTART.indexOf(n)!==-1?u=1:o.TOPSTART.indexOf(n)!==-1?l=-1:u=-1,[u,l]}function i(n,r,f){var u=r[0]+Math.max(f[0],0),l=r[1]+Math.max(f[1],0),m=n.z[l][u],d=n.xaxis,b=n.yaxis;if(f[1]){var g=(n.level-m)/(n.z[l][u+1]-m),_=(g!==1?(1-g)*d.c2l(n.x[u]):0)+(g!==0?g*d.c2l(n.x[u+1]):0);return[d.c2p(d.l2c(_),!0),b.c2p(n.y[l],!0),u+g,l]}else{var p=(n.level-m)/(n.z[l+1][u]-m),A=(p!==1?(1-p)*b.c2l(n.y[l]):0)+(p!==0?p*b.c2l(n.y[l+1]):0);return[d.c2p(n.x[u],!0),b.c2p(b.l2c(A),!0),u,l+p]}}},{"../../lib":503,"./constants":739}],748:[function(e,I,F){var s=e("../../components/color"),o=e("../heatmap/hover");I.exports=function(y,t,a,i,n){n||(n={}),n.isContour=!0;var r=o(y,t,a,i,n);return r&&r.forEach(function(f){var u=f.trace;u.contours.type==="constraint"&&(u.fillcolor&&s.opacity(u.fillcolor)?f.color=s.addOpacity(u.fillcolor,1):u.contours.showlines&&s.opacity(u.line.color)&&(f.color=s.addOpacity(u.line.color,1)))}),r}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y,t,a){a||(a={});var i=h("contours.showlabels");if(i){var n=y.font;s.coerceFont(h,"contours.labelfont",{family:n.family,size:n.size,color:t}),h("contours.labelformat")}a.hasHover!==!1&&h("zhoverformat")}},{"../../lib":503}],751:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/colorscale"),h=e("./end_plus");I.exports=function(t){var a=t.contours,i=a.start,n=h(a),r=a.size||1,f=Math.floor((n-i)/r)+1,u=a.coloring==="lines"?0:1,l=o.extractOpts(t);isFinite(r)||(r=1,f=1);var m=l.reversescale?o.flipScale(l.colorscale):l.colorscale,d=m.length,b=new Array(d),g=new Array(d),_,p;if(a.coloring==="heatmap"){var A=l.min,c=l.max;for(p=0;p<d;p++)_=m[p],b[p]=_[0]*(c-A)+A,g[p]=_[1];var S=s.extent([A,c,a.start,a.start+r*(f-1)]),T=S[A<c?0:1],x=S[A<c?1:0];T!==A&&(b.splice(0,0,T),g.splice(0,0,g[0])),x!==c&&(b.push(x),g.push(g[g.length-1]))}else for(p=0;p<d;p++)_=m[p],b[p]=(_[0]*(f+u-1)-u/2)*r+i,g[p]=_[1];return o.makeColorScaleFunc({domain:b,range:g},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(e,I,F){var s=e("./constants");I.exports=function(y){var t=y[0].z,a=t.length,i=t[0].length,n=a===2||i===2,r,f,u,l,m,d,b,g,_;for(f=0;f<a-1;f++)for(l=[],f===0&&(l=l.concat(s.BOTTOMSTART)),f===a-2&&(l=l.concat(s.TOPSTART)),r=0;r<i-1;r++)for(u=l.slice(),r===0&&(u=u.concat(s.LEFTSTART)),r===i-2&&(u=u.concat(s.RIGHTSTART)),m=r+","+f,d=[[t[f][r],t[f][r+1]],[t[f+1][r],t[f+1][r+1]]],_=0;_<y.length;_++)g=y[_],b=o(g.level,d),b&&(g.crossings[m]=b,u.indexOf(b)!==-1&&(g.starts.push([r,f]),n&&u.indexOf(b,u.indexOf(b)+1)!==-1&&g.starts.push([r,f])))};function o(h,y){var t=(y[0][0]>h?0:1)+(y[0][1]>h?0:2)+(y[1][1]>h?0:4)+(y[1][0]>h?0:8);if(t===5||t===10){var a=(y[0][0]+y[0][1]+y[1][0]+y[1][1])/4;return h>a?t===5?713:1114:t===5?104:208}return t===15?0:t}},{"./constants":739}],753:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../components/drawing"),y=e("../../components/colorscale"),t=e("../../lib/svg_text_utils"),a=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/set_convert"),n=e("../heatmap/plot"),r=e("./make_crossings"),f=e("./find_all_paths"),u=e("./empty_pathinfo"),l=e("./convert_to_constraints"),m=e("./close_boundaries"),d=e("./constants"),b=d.LABELOPTIMIZER;F.plot=function(w,v,C,M){var E=v.xaxis,L=v.yaxis;o.makeTraceGroups(M,C,"contour").each(function(z){var O=s.select(this),R=z[0],D=R.trace,H=R.x,B=R.y,$=D.contours,W=u($,v,R),re=o.ensureSingle(O,"g","heatmapcoloring"),Q=[];$.coloring==="heatmap"&&(Q=[z]),n(w,v,Q,re),r(W),f(W);var Z=E.c2p(H[0],!0),K=E.c2p(H[H.length-1],!0),le=L.c2p(B[0],!0),fe=L.c2p(B[B.length-1],!0),ue=[[Z,fe],[K,fe],[K,le],[Z,le]],V=W;$.type==="constraint"&&(V=l(W,$._operation)),g(O,ue,$),_(O,V,ue,$),A(O,W,w,R,$),S(O,v,w,R,ue)})};function g(x,w,v){var C=o.ensureSingle(x,"g","contourbg"),M=C.selectAll("path").data(v.coloring==="fill"?[0]:[]);M.enter().append("path"),M.exit().remove(),M.attr("d","M"+w.join("L")+"Z").style("stroke","none")}function _(x,w,v,C){var M=C.coloring==="fill"||C.type==="constraint"&&C._operation!=="=",E="M"+v.join("L")+"Z";M&&m(w,C);var L=o.ensureSingle(x,"g","contourfill"),z=L.selectAll("path").data(M?w:[]);z.enter().append("path"),z.exit().remove(),z.each(function(O){var R=(O.prefixBoundary?E:"")+p(O,v);R?s.select(this).attr("d",R).style("stroke","none"):s.select(this).remove()})}function p(x,w){var v="",C=0,M=x.edgepaths.map(function(Z,K){return K}),E=!0,L,z,O,R,D,H;function B(Z){return Math.abs(Z[1]-w[0][1])<.01}function $(Z){return Math.abs(Z[1]-w[2][1])<.01}function W(Z){return Math.abs(Z[0]-w[0][0])<.01}function re(Z){return Math.abs(Z[0]-w[2][0])<.01}for(;M.length;){for(H=h.smoothopen(x.edgepaths[C],x.smoothing),v+=E?H:H.replace(/^M/,"L"),M.splice(M.indexOf(C),1),L=x.edgepaths[C][x.edgepaths[C].length-1],R=-1,O=0;O<4;O++){if(!L){o.log("Missing end?",C,x);break}for(B(L)&&!re(L)?z=w[1]:W(L)?z=w[0]:$(L)?z=w[3]:re(L)&&(z=w[2]),D=0;D<x.edgepaths.length;D++){var Q=x.edgepaths[D][0];Math.abs(L[0]-z[0])<.01?Math.abs(L[0]-Q[0])<.01&&(Q[1]-L[1])*(z[1]-Q[1])>=0&&(z=Q,R=D):Math.abs(L[1]-z[1])<.01?Math.abs(L[1]-Q[1])<.01&&(Q[0]-L[0])*(z[0]-Q[0])>=0&&(z=Q,R=D):o.log("endpt to newendpt is not vert. or horz.",L,z,Q)}if(L=z,R>=0)break;v+="L"+z}if(R===x.edgepaths.length){o.log("unclosed perimeter path");break}C=R,E=M.indexOf(C)===-1,E&&(C=M[0],v+="Z")}for(C=0;C<x.paths.length;C++)v+=h.smoothclosed(x.paths[C],x.smoothing);return v}function A(x,w,v,C,M){var E=o.ensureSingle(x,"g","contourlines"),L=M.showlines!==!1,z=M.showlabels,O=L&&z,R=F.createLines(E,L||z,w),D=F.createLineClip(E,O,v,C.trace.uid),H=x.selectAll("g.contourlabels").data(z?[0]:[]);if(H.exit().remove(),H.enter().append("g").classed("contourlabels",!0),z){var B=[],$=[];o.clearLocationCache();var W=F.labelFormatter(v,C),re=h.tester.append("text").attr("data-notex",1).call(h.font,M.labelfont),Q=w[0].xaxis,Z=w[0].yaxis,K=Q._length,le=Z._length,fe=Q.range,ue=Z.range,V=o.aggNums(Math.min,null,C.x),j=o.aggNums(Math.max,null,C.x),ee=o.aggNums(Math.min,null,C.y),q=o.aggNums(Math.max,null,C.y),X=Math.max(Q.c2p(V,!0),0),J=Math.min(Q.c2p(j,!0),K),ie=Math.max(Z.c2p(q,!0),0),ne=Math.min(Z.c2p(ee,!0),le),oe={};fe[0]<fe[1]?(oe.left=X,oe.right=J):(oe.left=J,oe.right=X),ue[0]<ue[1]?(oe.top=ie,oe.bottom=ne):(oe.top=ne,oe.bottom=ie),oe.middle=(oe.top+oe.bottom)/2,oe.center=(oe.left+oe.right)/2,B.push([[oe.left,oe.top],[oe.right,oe.top],[oe.right,oe.bottom],[oe.left,oe.bottom]]);var se=Math.sqrt(K*K+le*le),me=d.LABELDISTANCE*se/Math.max(1,w.length/d.LABELINCREASE);R.each(function(ce){var pe=F.calcTextOpts(ce.level,W,re,v);s.select(this).selectAll("path").each(function(){var xe=this,Se=o.getVisibleSegment(xe,oe,pe.height/2);if(!!Se&&!(Se.len<(pe.width+pe.height)*d.LABELMIN))for(var Ae=Math.min(Math.ceil(Se.len/me),d.LABELMAX),Ce=0;Ce<Ae;Ce++){var Ee=F.findBestTextLocation(xe,Se,pe,$,oe);if(!Ee)break;F.addLabelData(Ee,pe,$,B)}})}),re.remove(),F.drawLabels(H,$,v,D,O?B:null)}z&&!L&&R.remove()}F.createLines=function(x,w,v){var C=v[0].smoothing,M=x.selectAll("g.contourlevel").data(w?v:[]);if(M.exit().remove(),M.enter().append("g").classed("contourlevel",!0),w){var E=M.selectAll("path.openline").data(function(z){return z.pedgepaths||z.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(z){return h.smoothopen(z,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var L=M.selectAll("path.closedline").data(function(z){return z.ppaths||z.paths});L.exit().remove(),L.enter().append("path").classed("closedline",!0),L.attr("d",function(z){return h.smoothclosed(z,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return M},F.createLineClip=function(x,w,v,C){var M=v._fullLayout._clips,E=w?"clipline"+C:null,L=M.selectAll("#"+E).data(w?[0]:[]);return L.exit().remove(),L.enter().append("clipPath").classed("contourlineclip",!0).attr("id",E),h.setClipUrl(x,E,v),L},F.labelFormatter=function(x,w){var v=x._fullLayout,C=w.trace,M=C.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(M.labelformat)E.tickformat=M.labelformat,i(E,v);else{var L=y.extractOpts(C);if(L&&L.colorbar&&L.colorbar._axis)E=L.colorbar._axis;else{if(M.type==="constraint"){var z=M.value;Array.isArray(z)?E.range=[z[0],z[z.length-1]]:E.range=[z,z]}else E.range=[M.start,M.end],E.nticks=(M.end-M.start)/M.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),i(E,v),a.prepTicks(E),E._tmin=null,E._tmax=null}}return function(O){return a.tickText(E,O).text}},F.calcTextOpts=function(x,w,v,C){var M=w(x);v.text(M).call(t.convertToTspans,C);var E=v.node(),L=h.bBox(E,!0);return{text:M,width:L.width,height:L.height,fontSize:+E.style["font-size"].replace("px",""),level:x,dy:(L.top+L.bottom)/2}},F.findBestTextLocation=function(x,w,v,C,M){var E=v.width,L,z,O,R,D;w.isClosed?(z=w.len/b.INITIALSEARCHPOINTS,L=w.min+z/2,O=w.max):(z=(w.len-E)/(b.INITIALSEARCHPOINTS+1),L=w.min+z+E/2,O=w.max-(z+E)/2);for(var H=1/0,B=0;B<b.ITERATIONS;B++){for(var $=L;$<O;$+=z){var W=o.getTextLocation(x,w.total,$,E),re=c(W,v,C,M);re<H&&(H=re,D=W,R=$)}if(H>b.MAXCOST*2)break;B&&(z/=2),L=R-z/2,O=L+z*1.5}if(H<=b.MAXCOST)return D};function c(x,w,v,C){var M=w.width/2,E=w.height/2,L=x.x,z=x.y,O=x.theta,R=Math.cos(O)*M,D=Math.sin(O)*M,H=(L>C.center?C.right-L:L-C.left)/(R+Math.abs(Math.sin(O)*E)),B=(z>C.middle?C.bottom-z:z-C.top)/(Math.abs(D)+Math.cos(O)*E);if(H<1||B<1)return 1/0;var $=b.EDGECOST*(1/(H-1)+1/(B-1));$+=b.ANGLECOST*O*O;for(var W=L-R,re=z-D,Q=L+R,Z=z+D,K=0;K<v.length;K++){var le=v[K],fe=Math.cos(le.theta)*le.width/2,ue=Math.sin(le.theta)*le.width/2,V=o.segmentDistance(W,re,Q,Z,le.x-fe,le.y-ue,le.x+fe,le.y+ue)*2/(w.height+le.height),j=le.level===w.level,ee=j?b.SAMELEVELDISTANCE:1;if(V<=ee)return 1/0;var q=b.NEIGHBORCOST*(j?b.SAMELEVELFACTOR:1);$+=q/(V-ee)}return $}F.addLabelData=function(x,w,v,C){var M=w.fontSize,E=w.width+M/3,L=Math.max(0,w.height-M/3),z=x.x,O=x.y,R=x.theta,D=Math.sin(R),H=Math.cos(R),B=function(W,re){return[z+W*H-re*D,O+W*D+re*H]},$=[B(-E/2,-L/2),B(-E/2,L/2),B(E/2,L/2),B(E/2,-L/2)];v.push({text:w.text,x:z,y:O,dy:w.dy,theta:R,level:w.level,width:E,height:L}),C.push($)},F.drawLabels=function(x,w,v,C,M){var E=x.selectAll("text").data(w,function(R){return R.text+","+R.x+","+R.y+","+R.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(R){var D=R.x+Math.sin(R.theta)*R.dy,H=R.y-Math.cos(R.theta)*R.dy;s.select(this).text(R.text).attr({x:D,y:H,transform:"rotate("+180*R.theta/Math.PI+" "+D+" "+H+")"}).call(t.convertToTspans,v)}),M){for(var L="",z=0;z<M.length;z++)L+="M"+M[z].join("L")+"Z";var O=o.ensureSingle(C,"path","");O.attr("d",L)}};function S(x,w,v,C,M){var E=C.trace,L=v._fullLayout._clips,z="clip"+E.uid,O=L.selectAll("#"+z).data(E.connectgaps?[]:[0]);if(O.enter().append("clipPath").classed("contourclip",!0).attr("id",z),O.exit().remove(),E.connectgaps===!1){var R={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:w.xaxis,yaxis:w.yaxis,x:C.x,y:C.y,z:T(C),smoothing:0};r([R]),f([R]),m([R],{type:"levels"});var D=o.ensureSingle(O,"path","");D.attr("d",(R.prefixBoundary?"M"+M.join("L")+"Z":"")+p(R,M))}else z=null;h.setClipUrl(x,z,v)}function T(x){var w=x.trace._emptypoints,v=[],C=x.z.length,M=x.z[0].length,E,L=[],z;for(E=0;E<M;E++)L.push(1);for(E=0;E<C;E++)v.push(L.slice());for(E=0;E<w.length;E++)z=w[E],v[z[0]][z[1]]=0;return x.zmask=v,v}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../lib");I.exports=function(t,a){var i=t.contours;if(t.autocontour){var n=t.zmin,r=t.zmax;(t.zauto||n===void 0)&&(n=o.aggNums(Math.min,null,a)),(t.zauto||r===void 0)&&(r=o.aggNums(Math.max,null,a));var f=h(n,r,t.ncontours);i.size=f.dtick,i.start=s.tickFirst(f),f.range.reverse(),i.end=s.tickFirst(f),i.start===n&&(i.start+=i.size),i.end===r&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),t._input.contours||(t._input.contours={}),o.extendFlat(t._input.contours,{start:i.start,end:i.end,size:i.size}),t._input.autocontour=!0}else if(i.type!=="constraint"){var u=i.start,l=i.end,m=t._input.contours;if(u>l&&(i.start=m.start=l,l=i.end=m.end=u,u=i.start),!(i.size>0)){var d;u===l?d=1:d=h(u,l,t.ncontours).dtick,m.size=i.size=d}}};function h(y,t,a){var i={type:"linear",range:[y,t]};return s.autoTicks(i,(t-y)/(a||15)),i}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/drawing"),h=e("../heatmap/style"),y=e("./make_color_map");I.exports=function(a){var i=s.select(a).selectAll("g.contour");i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var r=s.select(this),f=n[0].trace,u=f.contours,l=f.line,m=u.size||1,d=u.start,b=u.type==="constraint",g=!b&&u.coloring==="lines",_=!b&&u.coloring==="fill",p=g||_?y(f):null;r.selectAll("g.contourlevel").each(function(S){s.select(this).selectAll("path").call(o.lineGroupStyle,l.width,g?p(S.level):l.color,l.dash)});var A=u.labelfont;if(r.selectAll("g.contourlabels text").each(function(S){o.font(s.select(this),{family:A.family,size:A.size,color:A.color||(g?p(S.level):l.color)})}),b)r.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(_){var c;r.selectAll("g.contourfill path").style("fill",function(S){return c===void 0&&(c=S.level),p(S.level+.5*m)}),c===void 0&&(c=d),r.selectAll("g.contourbg path").style("fill",p(c-.5*m))}}),h(a)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(e,I,F){var s=e("../../components/colorscale/defaults"),o=e("./label_defaults");I.exports=function(y,t,a,i,n){var r=a("contours.coloring"),f,u="";r==="fill"&&(f=a("contours.showlines")),f!==!1&&(r!=="lines"&&(u=a("line.color","#000")),a("line.width",.5),a("line.dash")),r!=="none"&&(y.showlegend!==!0&&(t.showlegend=!1),t._dfltShowLegend=!1,s(y,t,i,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),o(a,i,u,n)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(e,I,F){var s=e("../heatmap/attributes"),o=e("../contour/attributes"),h=e("../../components/colorscale/attributes"),y=e("../../lib/extend").extendFlat,t=o.contours;I.exports=y({carpet:{valType:"string",editType:"calc"},z:s.z,a:s.x,a0:s.x0,da:s.dx,b:s.y,b0:s.y0,db:s.dy,text:s.text,hovertext:s.hovertext,transpose:s.transpose,atype:s.xtype,btype:s.ytype,fillcolor:o.fillcolor,autocontour:o.autocontour,ncontours:o.ncontours,contours:{type:t.type,start:t.start,end:t.end,size:t.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:t.showlines,showlabels:t.showlabels,labelfont:t.labelfont,labelformat:t.labelformat,operation:t.operation,value:t.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o.line.color,width:o.line.width,dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},transforms:void 0},h("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(e,I,F){var s=e("../../components/colorscale/calc"),o=e("../../lib"),h=e("../heatmap/convert_column_xyz"),y=e("../heatmap/clean_2d_array"),t=e("../heatmap/interp2d"),a=e("../heatmap/find_empties"),i=e("../heatmap/make_bound_array"),n=e("./defaults"),r=e("../carpet/lookup_carpetid"),f=e("../contour/set_contours");I.exports=function(m,d){var b=d._carpetTrace=r(m,d);if(!(!b||!b.visible||b.visible==="legendonly")){if(!d.a||!d.b){var g=m.data[b.index],_=m.data[d.index];_.a||(_.a=g.a),_.b||(_.b=g.b),n(_,d,d._defaultColor,m._fullLayout)}var p=u(m,d);return f(d,d._z),p}};function u(l,m){var d=m._carpetTrace,b=d.aaxis,g=d.baxis,_,p,A,c,S,T,x;b._minDtick=0,g._minDtick=0,o.isArray1D(m.z)&&h(m,b,g,"a","b",["z"]),_=m._a=m._a||m.a,c=m._b=m._b||m.b,_=_?b.makeCalcdata(m,"_a"):[],c=c?g.makeCalcdata(m,"_b"):[],p=m.a0||0,A=m.da||1,S=m.b0||0,T=m.db||1,x=m._z=y(m._z||m.z,m.transpose),m._emptypoints=a(x),t(x,m._emptypoints);var w=o.maxRowLength(x),v=m.xtype==="scaled"?"":_,C=i(m,v,p,A,w,b),M=m.ytype==="scaled"?"":c,E=i(m,M,S,T,x.length,g),L={a:C,b:E,z:x};return m.contours.type==="levels"&&m.contours.coloring!=="none"&&s(l,m,{vals:x,containerStr:"",cLetter:"z"}),[L]}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(e,I,F){var s=e("../../lib"),o=e("../heatmap/xyz_defaults"),h=e("./attributes"),y=e("../contour/constraint_defaults"),t=e("../contour/contours_defaults"),a=e("../contour/style_defaults");I.exports=function(n,r,f,u){function l(g,_){return s.coerce(n,r,h,g,_)}function m(g){return s.coerce2(n,r,h,g)}if(l("carpet"),n.a&&n.b){var d=o(n,r,l,u,"a","b");if(!d){r.visible=!1;return}l("text");var b=l("contours.type")==="constraint";b?y(n,r,l,u,f,{hasHover:!1}):(t(n,r,l,m),a(n,r,l,u,{hasHover:!1}))}else r._defaultColor=f,r._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../contour/colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(e,I,F){var s=e("@plotly/d3"),o=e("../carpet/map_1d_array"),h=e("../carpet/makepath"),y=e("../../components/drawing"),t=e("../../lib"),a=e("../contour/make_crossings"),i=e("../contour/find_all_paths"),n=e("../contour/plot"),r=e("../contour/constants"),f=e("../contour/convert_to_constraints"),u=e("../contour/empty_pathinfo"),l=e("../contour/close_boundaries"),m=e("../carpet/lookup_carpetid"),d=e("../carpet/axis_aligned_line");I.exports=function(v,C,M,E){var L=C.xaxis,z=C.yaxis;t.makeTraceGroups(E,M,"contour").each(function(O){var R=s.select(this),D=O[0],H=D.trace,B=H._carpetTrace=m(v,H),$=v.calcdata[B.index][0];if(!B.visible||B.visible==="legendonly")return;var W=D.a,re=D.b,Q=H.contours,Z=u(Q,C,D),K=Q.type==="constraint",le=Q._operation,fe=K?le==="="?"lines":"fill":Q.coloring;function ue(me){var ce=B.ab2xy(me[0],me[1],!0);return[L.c2p(ce[0]),z.c2p(ce[1])]}var V=[[W[0],re[re.length-1]],[W[W.length-1],re[re.length-1]],[W[W.length-1],re[0]],[W[0],re[0]]];a(Z);var j=(W[W.length-1]-W[0])*1e-8,ee=(re[re.length-1]-re[0])*1e-8;i(Z,j,ee);var q=Z;Q.type==="constraint"&&(q=f(Z,le)),b(Z,ue);var X,J,ie,ne,oe=[];for(ne=$.clipsegments.length-1;ne>=0;ne--)X=$.clipsegments[ne],J=o([],X.x,L.c2p),ie=o([],X.y,z.c2p),J.reverse(),ie.reverse(),oe.push(h(J,ie,X.bicubic));var se="M"+oe.join("L")+"Z";S(R,$.clipsegments,L,z,K,fe),T(H,R,L,z,q,V,ue,B,$,fe,se),g(R,Z,v,D,Q,C,B),y.setClipUrl(R,B._clipPathId,v)})};function b(w,v){var C,M,E,L,z,O,R,D,H;for(C=0;C<w.length;C++){for(L=w[C],z=L.pedgepaths=[],O=L.ppaths=[],M=0;M<L.edgepaths.length;M++){for(H=L.edgepaths[M],R=[],E=0;E<H.length;E++)R[E]=v(H[E]);z.push(R)}for(M=0;M<L.paths.length;M++){for(H=L.paths[M],D=[],E=0;E<H.length;E++)D[E]=v(H[E]);O.push(D)}}}function g(w,v,C,M,E,L,z){var O=t.ensureSingle(w,"g","contourlines"),R=E.showlines!==!1,D=E.showlabels,H=R&&D,B=n.createLines(O,R||D,v),$=n.createLineClip(O,H,C,M.trace.uid),W=w.selectAll("g.contourlabels").data(D?[0]:[]);if(W.exit().remove(),W.enter().append("g").classed("contourlabels",!0),D){var re=L.xaxis,Q=L.yaxis,Z=re._length,K=Q._length,le=[[[0,0],[Z,0],[Z,K],[0,K]]],fe=[];t.clearLocationCache();var ue=n.labelFormatter(C,M),V=y.tester.append("text").attr("data-notex",1).call(y.font,E.labelfont),j={left:0,right:Z,center:Z/2,top:0,bottom:K,middle:K/2},ee=Math.sqrt(Z*Z+K*K),q=r.LABELDISTANCE*ee/Math.max(1,v.length/r.LABELINCREASE);B.each(function(X){var J=n.calcTextOpts(X.level,ue,V,C);s.select(this).selectAll("path").each(function(ie){var ne=this,oe=t.getVisibleSegment(ne,j,J.height/2);if(!!oe&&(_(ne,ie,X,oe,z,J.height),!(oe.len<(J.width+J.height)*r.LABELMIN)))for(var se=Math.min(Math.ceil(oe.len/q),r.LABELMAX),me=0;me<se;me++){var ce=n.findBestTextLocation(ne,oe,J,fe,j);if(!ce)break;n.addLabelData(ce,J,fe,le)}})}),V.remove(),n.drawLabels(W,fe,C,$,H?le:null)}D&&!R&&B.remove()}function _(w,v,C,M,E,L){for(var z,O=0;O<C.pedgepaths.length;O++)v===C.pedgepaths[O]&&(z=C.edgepaths[O]);if(!z)return;var R=E.a[0],D=E.a[E.a.length-1],H=E.b[0],B=E.b[E.b.length-1];function $(K,le){var fe=0,ue,V=.1;return(Math.abs(K[0]-R)<V||Math.abs(K[0]-D)<V)&&(ue=A(E.dxydb_rough(K[0],K[1],V)),fe=Math.max(fe,L*c(le,ue)/2)),(Math.abs(K[1]-H)<V||Math.abs(K[1]-B)<V)&&(ue=A(E.dxyda_rough(K[0],K[1],V)),fe=Math.max(fe,L*c(le,ue)/2)),fe}var W=p(w,0,1),re=p(w,M.total,M.total-1),Q=$(z[0],W),Z=M.total-$(z[z.length-1],re);M.min<Q&&(M.min=Q),M.max>Z&&(M.max=Z),M.len=M.max-M.min}function p(w,v,C){var M=w.getPointAtLength(v),E=w.getPointAtLength(C),L=E.x-M.x,z=E.y-M.y,O=Math.sqrt(L*L+z*z);return[L/O,z/O]}function A(w){var v=Math.sqrt(w[0]*w[0]+w[1]*w[1]);return[w[0]/v,w[1]/v]}function c(w,v){var C=Math.abs(w[0]*v[0]+w[1]*v[1]),M=Math.sqrt(1-C*C);return M/C}function S(w,v,C,M,E,L){var z,O,R,D,H=t.ensureSingle(w,"g","contourbg"),B=H.selectAll("path").data(L==="fill"&&!E?[0]:[]);B.enter().append("path"),B.exit().remove();var $=[];for(D=0;D<v.length;D++)z=v[D],O=o([],z.x,C.c2p),R=o([],z.y,M.c2p),$.push(h(O,R,z.bicubic));B.attr("d","M"+$.join("L")+"Z").style("stroke","none")}function T(w,v,C,M,E,L,z,O,R,D,H){var B=D==="fill";B&&l(E,w.contours);var $=t.ensureSingle(v,"g","contourfill"),W=$.selectAll("path").data(B?E:[]);W.enter().append("path"),W.exit().remove(),W.each(function(re){var Q=(re.prefixBoundary?H:"")+x(w,re,L,z,O,R,C,M);Q?s.select(this).attr("d",Q).style("stroke","none"):s.select(this).remove()})}function x(w,v,C,M,E,L,z,O){var R,D="",H=v.edgepaths.map(function(ie,ne){return ne}),B=!0,$,W,re,Q,Z,K,le=Math.abs(C[0][0]-C[2][0])*1e-4,fe=Math.abs(C[0][1]-C[2][1])*1e-4;function ue(ie){return Math.abs(ie[1]-C[0][1])<fe}function V(ie){return Math.abs(ie[1]-C[2][1])<fe}function j(ie){return Math.abs(ie[0]-C[0][0])<le}function ee(ie){return Math.abs(ie[0]-C[2][0])<le}function q(ie,ne){var oe,se,me,ce,pe="";for(ue(ie)&&!ee(ie)||V(ie)&&!j(ie)?(ce=E.aaxis,me=d(E,L,[ie[0],ne[0]],.5*(ie[1]+ne[1]))):(ce=E.baxis,me=d(E,L,.5*(ie[0]+ne[0]),[ie[1],ne[1]])),oe=1;oe<me.length;oe++)for(pe+=ce.smoothing?"C":"L",se=0;se<me[oe].length;se++){var xe=me[oe][se];pe+=[z.c2p(xe[0]),O.c2p(xe[1])]+" "}return pe}for(R=0,$=null;H.length;){var X=v.edgepaths[R][0];for($&&(D+=q($,X)),K=y.smoothopen(v.edgepaths[R].map(M),v.smoothing),D+=B?K:K.replace(/^M/,"L"),H.splice(H.indexOf(R),1),$=v.edgepaths[R][v.edgepaths[R].length-1],Q=-1,re=0;re<4;re++){if(!$){t.log("Missing end?",R,v);break}for(ue($)&&!ee($)?W=C[1]:j($)?W=C[0]:V($)?W=C[3]:ee($)&&(W=C[2]),Z=0;Z<v.edgepaths.length;Z++){var J=v.edgepaths[Z][0];Math.abs($[0]-W[0])<le?Math.abs($[0]-J[0])<le&&(J[1]-$[1])*(W[1]-J[1])>=0&&(W=J,Q=Z):Math.abs($[1]-W[1])<fe?Math.abs($[1]-J[1])<fe&&(J[0]-$[0])*(W[0]-J[0])>=0&&(W=J,Q=Z):t.log("endpt to newendpt is not vert. or horz.",$,W,J)}if(Q>=0)break;D+=q($,W),$=W}if(Q===v.edgepaths.length){t.log("unclosed perimeter path");break}R=Q,B=H.indexOf(R)===-1,B&&(R=H[0],D+=q($,W)+"Z",$=null)}for(R=0;R<v.paths.length;R++)D+=y.smoothclosed(v.paths[R].map(M),v.smoothing);return D}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(e,I,F){var s=e("../../components/colorscale/attributes"),o=e("../../plots/template_attributes").hovertemplateAttrs,h=e("../../plots/attributes"),y=e("../scattermapbox/attributes"),t=e("../../lib/extend").extendFlat;I.exports=t({lon:y.lon,lat:y.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,hoverinfo:t({},h.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:o(),showlegend:t({},h.showlegend,{dflt:!1})},s("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":993}],763:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib").isArrayOrTypedArray,h=e("../../constants/numerical").BADNUM,y=e("../../components/colorscale/calc"),t=e("../../lib")._;I.exports=function(i,n){for(var r=n._length,f=new Array(r),u=n.z,l=o(u)&&u.length,m=0;m<r;m++){var d=f[m]={},b=n.lon[m],g=n.lat[m];if(d.lonlat=s(b)&&s(g)?[+b,+g]:[h,h],l){var _=u[m];d.z=s(_)?_:h}}return y(i,n,{vals:l?u:[0,1],containerStr:"",cLetter:"z"}),r&&(f[0].t={labels:{lat:t(i,"lat:")+" ",lon:t(i,"lon:")+" "}}),f}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../components/color"),y=e("../../components/colorscale"),t=e("../../constants/numerical").BADNUM,a=e("../../lib/geojson_utils").makeBlank;I.exports=function(n){var r=n[0].trace,f=r.visible===!0&&r._length!==0,u={layout:{visibility:"none"},paint:{}},l=r._opts={heatmap:u,geojson:a()};if(!f)return l;var m=[],d,b=r.z,g=r.radius,_=o.isArrayOrTypedArray(b)&&b.length,p=o.isArrayOrTypedArray(g);for(d=0;d<n.length;d++){var A=n[d],c=A.lonlat;if(c[0]!==t){var S={};if(_){var T=A.z;S.z=T!==t?T:0}p&&(S.r=s(g[d])&&g[d]>0?+g[d]:0),m.push({type:"Feature",geometry:{type:"Point",coordinates:c},properties:S})}}var x=y.extractOpts(r),w=x.reversescale?y.flipScale(x.colorscale):x.colorscale,v=w[0][1],C=h.opacity(v)<1?v:h.addOpacity(v,0),M=["interpolate",["linear"],["heatmap-density"],0,C];for(d=1;d<w.length;d++)M.push(w[d][0],w[d][1]);var E=["interpolate",["linear"],["get","z"],x.min,0,x.max,1];return o.extendFlat(l.heatmap.paint,{"heatmap-weight":_?E:1/(x.max-x.min),"heatmap-color":M,"heatmap-radius":p?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),l.geojson={type:"FeatureCollection",features:m},l.heatmap.layout.visibility="visible",l}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(e,I,F){var s=e("../../lib"),o=e("../../components/colorscale/defaults"),h=e("./attributes");I.exports=function(t,a,i,n){function r(m,d){return s.coerce(t,a,h,m,d)}var f=r("lon")||[],u=r("lat")||[],l=Math.min(f.length,u.length);if(!l){a.visible=!1;return}a._length=l,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),o(t,a,n,r,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(e,I,F){I.exports=function(o,h){return o.lon=h.lon,o.lat=h.lat,o.z=h.z,o}},{}],767:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../scattermapbox/hover").hoverPoints,h=e("../scattermapbox/hover").getExtraText;I.exports=function(t,a,i){var n=o(t,a,i);if(!!n){var r=n[0],f=r.cd,u=f[0].trace,l=f[r.index];if(delete r.color,"z"in l){var m=r.subplot.mockAxis;r.z=l.z,r.zLabel=s.tickText(m,m.c2l(l.z),"hover").text}return r.extraText=h(u,l,f[0].t.labels),[r]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":998}],768:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),formatLabels:e("../scattermapbox/format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),getBelow:function(s,o){for(var h=o.getMapLayers(),y=0;y<h.length;y++){var t=h[y],a=t.id;if(t.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":997,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(e,I,F){var s=e("./convert"),o=e("../../plots/mapbox/constants").traceLayerPrefix;function h(t,a){this.type="densitymapbox",this.subplot=t,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",o+a+"-heatmap"]],this.below=null}var y=h.prototype;y.update=function(t){var a=this.subplot,i=this.layerList,n=s(t),r=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var f=0;f<i.length;f++){var u=i[f],l=u[0],m=u[1],d=n[l];a.setOptions(m,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&a.setOptions(m,"setPaintProperty",d.paint)}},y._addLayers=function(t,a){for(var i=this.subplot,n=this.layerList,r=this.sourceId,f=0;f<n.length;f++){var u=n[f],l=u[0],m=t[l];i.addLayer({type:l,id:u[1],source:r,layout:m.layout,paint:m.paint},a)}},y._removeLayers=function(){for(var t=this.subplot.map,a=this.layerList,i=a.length-1;i>=0;i--)t.removeLayer(a[i][1])},y.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},I.exports=function(a,i){var n=i[0].trace,r=new h(a,n.uid),f=r.sourceId,u=s(i),l=r.below=a.belowLookup["trace-"+n.uid];return a.map.addSource(f,{type:"geojson",data:u.geojson}),r._addLayers(u,l),r}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){for(var t=0;t<h.length;t++)h[t].i=t;s.mergeArray(y.text,h,"tx"),s.mergeArray(y.hovertext,h,"htx");var a=y.marker;if(a){s.mergeArray(a.opacity,h,"mo"),s.mergeArray(a.color,h,"mc");var i=a.line;i&&(s.mergeArray(i.color,h,"mlc"),s.mergeArrayCastPositive(i.width,h,"mlw"))}}},{"../../lib":503}],771:[function(e,I,F){var s=e("../bar/attributes"),o=e("../scatter/attributes").line,h=e("../../plots/attributes"),y=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("./constants"),n=e("../../lib/extend").extendFlat,r=e("../../components/color");I.exports={x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),hovertext:s.hovertext,hovertemplate:t({},{keys:i.eventDataKeys}),hoverinfo:n({},h.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),text:s.text,textposition:s.textposition,insidetextanchor:n({},s.insidetextanchor,{dflt:"middle"}),textangle:n({},s.textangle,{dflt:0}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:s.outsidetextfont,constraintext:s.constraintext,cliponaxis:s.cliponaxis,orientation:n({},s.orientation,{}),offset:n({},s.offset,{arrayOk:!1}),width:n({},s.width,{arrayOk:!1}),marker:f(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},o.color,{dflt:r.defaultLine}),width:n({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup};function f(){var u=n({},s.marker);return delete u.pattern,u}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":773}],772:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/align_period"),h=e("./arrays_to_calcdata"),y=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;I.exports=function(n,r){var f=s.getFromId(n,r.xaxis||"x"),u=s.getFromId(n,r.yaxis||"y"),l,m,d,b,g,_,p,A;r.orientation==="h"?(l=f.makeCalcdata(r,"x"),d=u.makeCalcdata(r,"y"),b=o(r,u,"y",d),g=!!r.yperiodalignment,_="y"):(l=u.makeCalcdata(r,"y"),d=f.makeCalcdata(r,"x"),b=o(r,f,"x",d),g=!!r.xperiodalignment,_="x"),m=b.vals;var c=Math.min(m.length,l.length),S=new Array(c);for(r._base=[],p=0;p<c;p++){l[p]<0&&(l[p]=t);var T=!1;l[p]!==t&&p+1<c&&l[p+1]!==t&&(T=!0),A=S[p]={p:m[p],s:l[p],cNext:T},r._base[p]=-.5*A.s,g&&(S[p].orig_p=d[p],S[p][_+"End"]=b.ends[p],S[p][_+"Start"]=b.starts[p]),r.ids&&(A.id=String(r.ids[p])),p===0&&(S[0].vTotal=0),S[0].vTotal+=a(A.s),A.begR=a(A.s)/a(S[0].s)}var x;for(p=0;p<c;p++)A=S[p],A.s!==t&&(A.sumR=A.s/S[0].vTotal,A.difR=x!==void 0?A.s/x:1,x=A.s);return h(S,r),y(S,r),S};function a(i){return i===t?0:i}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":770}],773:[function(e,I,F){I.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(e,I,F){var s=e("../bar/cross_trace_calc").setGroupPositions;I.exports=function(h,y){var t=h._fullLayout,a=h._fullData,i=h.calcdata,n=y.xaxis,r=y.yaxis,f=[],u=[],l=[],m,d;for(d=0;d<a.length;d++){var b=a[d],g=b.orientation==="h";b.visible===!0&&b.xaxis===n._id&&b.yaxis===r._id&&b.type==="funnel"&&(m=i[d],g?l.push(m):u.push(m),f.push(m))}var _={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(s(h,n,r,u,_),s(h,r,n,l,_),d=0;d<f.length;d++){m=f[d];for(var p=0;p<m.length;p++)p+1<m.length&&(m[p].nextP0=m[p+1].p0,m[p].nextS0=m[p+1].s0,m[p].nextP1=m[p+1].p1,m[p].nextS1=m[p+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(e,I,F){var s=e("../../lib"),o=e("../bar/defaults").handleGroupingDefaults,h=e("../bar/defaults").handleText,y=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),a=e("./attributes"),i=e("../../components/color");function n(u,l,m,d){function b(T,x){return s.coerce(u,l,a,T,x)}var g=y(u,l,d,b);if(!g){l.visible=!1;return}t(u,l,d,b),b("xhoverformat"),b("yhoverformat"),b("orientation",l.y&&!l.x?"v":"h"),b("offset"),b("width");var _=b("text");b("hovertext"),b("hovertemplate");var p=b("textposition");h(u,l,d,b,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&!l.texttemplate&&b("textinfo",Array.isArray(_)?"text+value":"value");var A=b("marker.color",m);b("marker.line.color",i.defaultLine),b("marker.line.width");var c=b("connector.visible");if(c){b("connector.fillcolor",r(A));var S=b("connector.line.width");S&&(b("connector.line.color"),b("connector.line.dash"))}}function r(u){var l=s.isArrayOrTypedArray(u)?"#000":u;return i.addOpacity(l,.5*i.opacity(l))}function f(u,l){var m,d;function b(_){return s.coerce(d._input,d,a,_)}if(l.funnelmode==="group")for(var g=0;g<u.length;g++)d=u[g],m=d._input,o(m,d,l,b)}I.exports={supplyDefaults:n,crossTraceDefaults:f}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":771}],776:[function(e,I,F){I.exports=function(o,h){return o.x="xVal"in h?h.xVal:h.x,o.y="yVal"in h?h.yVal:h.y,"percentInitial"in h&&(o.percentInitial=h.percentInitial),"percentPrevious"in h&&(o.percentPrevious=h.percentPrevious),"percentTotal"in h&&(o.percentTotal=h.percentTotal),h.xa&&(o.xaxis=h.xa),h.ya&&(o.yaxis=h.ya),o}},{}],777:[function(e,I,F){var s=e("../../components/color").opacity,o=e("../bar/hover").hoverOnBars,h=e("../../lib").formatPercent;I.exports=function(a,i,n,r,f){var u=o(a,i,n,r,f);if(!!u){var l=u.cd,m=l[0].trace,d=m.orientation==="h",b=u.index,g=l[b],_=d?"x":"y";u[_+"LabelVal"]=g.s,u.percentInitial=g.begR,u.percentInitialLabel=h(g.begR,1),u.percentPrevious=g.difR,u.percentPreviousLabel=h(g.difR,1),u.percentTotal=g.sumR,u.percentTotalLabel=h(g.sumR,1);var p=g.hi||m.hoverinfo,A=[];if(p&&p!=="none"&&p!=="skip"){var c=p==="all",S=p.split("+"),T=function(x){return c||S.indexOf(x)!==-1};T("percent initial")&&A.push(u.percentInitialLabel+" of initial"),T("percent previous")&&A.push(u.percentPreviousLabel+" of previous"),T("percent total")&&A.push(u.percentTotalLabel+" of total")}return u.extraText=A.join("<br>"),u.color=y(m,g),[u]}};function y(t,a){var i=t.marker,n=a.mc||i.color,r=a.mlc||i.line.color,f=a.mlw||i.line.width;if(s(n))return n;if(s(r)&&f)return r}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(e,I,F){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(e,I,F){I.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(h,y,t){var a=!1;function i(f,u){return s.coerce(h,y,o,f,u)}for(var n=0;n<t.length;n++){var r=t[n];if(r.visible&&r.type==="funnel"){a=!0;break}}a&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../components/drawing"),y=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),a=e("../bar/uniform_text").clearMinTextSize;I.exports=function(u,l,m,d){var b=u._fullLayout;a("funnel",b),i(u,l,m,d),n(u,l,m,d),t.plot(u,l,m,d,{mode:b.funnelmode,norm:b.funnelmode,gap:b.funnelgap,groupgap:b.funnelgroupgap})};function i(f,u,l,m){var d=u.xaxis,b=u.yaxis;o.makeTraceGroups(m,l,"trace bars").each(function(g){var _=s.select(this),p=g[0].trace,A=o.ensureSingle(_,"g","regions");if(!p.connector||!p.connector.visible){A.remove();return}var c=p.orientation==="h",S=A.selectAll("g.region").data(o.identity);S.enter().append("g").classed("region",!0),S.exit().remove();var T=S.size();S.each(function(x,w){if(!(w!==T-1&&!x.cNext)){var v=r(x,d,b,c),C=v[0],M=v[1],E="";C[0]!==y&&M[0]!==y&&C[1]!==y&&M[1]!==y&&C[2]!==y&&M[2]!==y&&C[3]!==y&&M[3]!==y&&(c?E+="M"+C[0]+","+M[1]+"L"+C[2]+","+M[2]+"H"+C[3]+"L"+C[1]+","+M[1]+"Z":E+="M"+C[1]+","+M[1]+"L"+C[2]+","+M[3]+"V"+M[2]+"L"+C[1]+","+M[0]+"Z"),E===""&&(E="M0,0Z"),o.ensureSingle(s.select(this),"path").attr("d",E).call(h.setClipUrl,u.layerClipId,f)}})})}function n(f,u,l,m){var d=u.xaxis,b=u.yaxis;o.makeTraceGroups(m,l,"trace bars").each(function(g){var _=s.select(this),p=g[0].trace,A=o.ensureSingle(_,"g","lines");if(!p.connector||!p.connector.visible||!p.connector.line.width){A.remove();return}var c=p.orientation==="h",S=A.selectAll("g.line").data(o.identity);S.enter().append("g").classed("line",!0),S.exit().remove();var T=S.size();S.each(function(x,w){if(!(w!==T-1&&!x.cNext)){var v=r(x,d,b,c),C=v[0],M=v[1],E="";C[3]!==void 0&&M[3]!==void 0&&(c?(E+="M"+C[0]+","+M[1]+"L"+C[2]+","+M[2],E+="M"+C[1]+","+M[1]+"L"+C[3]+","+M[2]):(E+="M"+C[1]+","+M[1]+"L"+C[2]+","+M[3],E+="M"+C[1]+","+M[0]+"L"+C[2]+","+M[2])),E===""&&(E="M0,0Z"),o.ensureSingle(s.select(this),"path").attr("d",E).call(h.setClipUrl,u.layerClipId,f)}})})}function r(f,u,l,m){var d=[],b=[],g=m?u:l,_=m?l:u;return d[0]=g.c2p(f.s0,!0),b[0]=_.c2p(f.p0,!0),d[1]=g.c2p(f.s1,!0),b[1]=_.c2p(f.p1,!0),d[2]=g.c2p(f.nextS0,!0),b[2]=_.c2p(f.nextP0,!0),d[3]=g.c2p(f.nextS1,!0),b[3]=_.c2p(f.nextP1,!0),m?[d,b]:[b,d]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/drawing"),h=e("../../components/color"),y=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),a=e("../bar/uniform_text").resizeText,i=t.styleTextPoints;function n(r,f,u){var l=u||s.select(r).selectAll("g.funnellayer").selectAll("g.trace");a(r,l,"funnel"),l.style("opacity",function(m){return m[0].trace.opacity}),l.each(function(m){var d=s.select(this),b=m[0].trace;d.selectAll(".point > path").each(function(g){if(!g.isBlank){var _=b.marker;s.select(this).call(h.fill,g.mc||_.color).call(h.stroke,g.mlc||_.line.color).call(o.dashLine,_.line.dash,g.mlw||_.line.width).style("opacity",b.selectedpoints&&!g.selected?y:1)}}),i(d,b,r),d.selectAll(".regions").each(function(){s.select(this).selectAll("path").style("stroke-width",0).call(h.fill,b.connector.fillcolor)}),d.selectAll(".lines").each(function(){var g=b.connector.line;o.lineGroupStyle(s.select(this).selectAll("path"),g.width,g.color,g.dash)})})}I.exports={style:n}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(e,I,F){var s=e("../pie/attributes"),o=e("../../plots/attributes"),h=e("../../plots/domain").attributes,y=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../lib/extend").extendFlat;I.exports={labels:s.labels,label0:s.label0,dlabel:s.dlabel,values:s.values,marker:{colors:s.marker.colors,line:{color:a({},s.marker.line.color,{dflt:null}),width:a({},s.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:s.text,hovertext:s.hovertext,scalegroup:a({},s.scalegroup,{}),textinfo:a({},s.textinfo,{flags:["label","text","value","percent"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},o.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:y({},{keys:["label","color","value","text","percent"]}),textposition:a({},s.textposition,{values:["inside","none"],dflt:"inside"}),textfont:s.textfont,insidetextfont:s.insidetextfont,title:{text:s.title.text,font:s.title.font,position:a({},s.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:h({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901}],784:[function(e,I,F){var s=e("../../plots/plots");F.name="funnelarea",F.plot=function(o,h,y,t){s.plotBasePlot(F.name,o,h,y,t)},F.clean=function(o,h,y,t){s.cleanBasePlot(F.name,o,h,y,t)}},{"../../plots/plots":619}],785:[function(e,I,F){var s=e("../pie/calc");function o(y,t){return s.calc(y,t)}function h(y){s.crossTraceCalc(y,{type:"funnelarea"})}I.exports={calc:o,crossTraceCalc:h}},{"../pie/calc":903}],786:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("../../plots/domain").defaults,y=e("../bar/defaults").handleText,t=e("../pie/defaults").handleLabelsAndValues;I.exports=function(i,n,r,f){function u(T,x){return s.coerce(i,n,o,T,x)}var l=u("labels"),m=u("values"),d=t(l,m),b=d.len;if(n._hasLabels=d.hasLabels,n._hasValues=d.hasValues,!n._hasLabels&&n._hasValues&&(u("label0"),u("dlabel")),!b){n.visible=!1;return}n._length=b;var g=u("marker.line.width");g&&u("marker.line.color",f.paper_bgcolor),u("marker.colors"),u("scalegroup");var _=u("text"),p=u("texttemplate"),A;if(p||(A=u("textinfo",Array.isArray(_)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),p||A&&A!=="none"){var c=u("textposition");y(i,n,f,u,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}h(n,f,u);var S=u("title.text");S&&(u("title.position"),s.coerceFont(u,"title.font",f.font)),u("aspectratio"),u("baseratio")}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":904,"./attributes":783}],787:[function(e,I,F){I.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style"),styleOne:e("../pie/style_one"),meta:{}}},{"../pie/style_one":912,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(e,I,F){var s=e("../pie/layout_attributes").hiddenlabels;I.exports={hiddenlabels:s,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":908}],789:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(y,t){function a(i,n){return s.coerce(y,t,o,i,n)}a("hiddenlabels"),a("funnelareacolorway",t.colorway),a("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/drawing"),h=e("../../lib"),y=h.strScale,t=h.strTranslate,a=e("../../lib/svg_text_utils"),i=e("../bar/plot"),n=i.toMoveInsideBar,r=e("../bar/uniform_text"),f=r.recordMinTextSize,u=r.clearMinTextSize,l=e("../pie/helpers"),m=e("../pie/plot"),d=m.attachFxHandlers,b=m.determineInsideTextFont,g=m.layoutAreas,_=m.prerenderTitles,p=m.positionTitleOutside,A=m.formatSliceLabel;I.exports=function(w,v){var C=w._fullLayout;u("funnelarea",C),_(v,w),g(v,C._size),h.makeTraceGroups(C._funnelarealayer,v,"trace").each(function(M){var E=s.select(this),L=M[0],z=L.trace;T(M),E.each(function(){var O=s.select(this).selectAll("g.slice").data(M);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(D,H){if(D.hidden){s.select(this).selectAll("path,g").remove();return}D.pointNumber=D.i,D.curveNumber=z.index;var B=L.cx,$=L.cy,W=s.select(this),re=W.selectAll("path.surface").data([D]);re.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),W.call(d,w,M);var Q="M"+(B+D.TR[0])+","+($+D.TR[1])+c(D.TR,D.BR)+c(D.BR,D.BL)+c(D.BL,D.TL)+"Z";re.attr("d",Q),A(w,D,L);var Z=l.castOption(z.textposition,D.pts),K=W.selectAll("g.slicetext").data(D.text&&Z!=="none"?[0]:[]);K.enter().append("g").classed("slicetext",!0),K.exit().remove(),K.each(function(){var le=h.ensureSingle(s.select(this),"text","",function(J){J.attr("data-notex",1)}),fe=h.ensureUniformFontSize(w,b(z,D,C.font));le.text(D.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,fe).call(a.convertToTspans,w);var ue=o.bBox(le.node()),V,j,ee,q=Math.min(D.BL[1],D.BR[1])+$,X=Math.max(D.TL[1],D.TR[1])+$;j=Math.max(D.TL[0],D.BL[0])+B,ee=Math.min(D.TR[0],D.BR[0])+B,V=n(j,ee,q,X,ue,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),V.fontSize=fe.size,f(z.type,V,C),M[H].transform=V,le.attr("transform",h.getTextTransform(V))})});var R=s.select(this).selectAll("g.titletext").data(z.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var D=h.ensureSingle(s.select(this),"text","",function($){$.attr("data-notex",1)}),H=z.title.text;z._meta&&(H=h.templateString(H,z._meta)),D.text(H).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(o.font,z.title.font).call(a.convertToTspans,w);var B=p(L,C._size);D.attr("transform",t(B.x,B.y)+y(Math.min(1,B.scale))+t(B.tx,B.ty))})})})};function c(x,w){var v=w[0]-x[0],C=w[1]-x[1];return"l"+v+","+C}function S(x,w){return[.5*(x[0]+w[0]),.5*(x[1]+w[1])]}function T(x){if(!x.length)return;var w=x[0],v=w.trace,C=v.aspectratio,M=v.baseratio;M>.999&&(M=.999);var E=Math.pow(M,2),L=w.vTotal,z=L*E/(1-E),O=L,R=z/L;function D(){var ne=Math.sqrt(R);return{x:ne,y:-ne}}function H(){var ne=D();return[ne.x,ne.y]}var B,$=[];$.push(H());var W,re;for(W=x.length-1;W>-1;W--)if(re=x[W],!re.hidden){var Q=re.v/O;R+=Q,$.push(H())}var Z=1/0,K=-1/0;for(W=0;W<$.length;W++)B=$[W],Z=Math.min(Z,B[1]),K=Math.max(K,B[1]);for(W=0;W<$.length;W++)$[W][1]-=(K+Z)/2;var le=$[$.length-1][0],fe=w.r,ue=(K-Z)/2,V=fe/le,j=fe/ue*C;for(w.r=j*ue,W=0;W<$.length;W++)$[W][0]*=V,$[W][1]*=j;B=$[0];var ee=[-B[0],B[1]],q=[B[0],B[1]],X=0;for(W=x.length-1;W>-1;W--)if(re=x[W],!re.hidden){X+=1;var J=$[X][0],ie=$[X][1];re.TL=[-J,ie],re.TR=[J,ie],re.BL=ee,re.BR=q,re.pxmid=S(re.TR,re.BR),ee=re.TL,q=re.TR}}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"@plotly/d3":58}],791:[function(e,I,F){var s=e("@plotly/d3"),o=e("../pie/style_one"),h=e("../bar/uniform_text").resizeText;I.exports=function(t){var a=t._fullLayout._funnelarealayer.selectAll(".trace");h(t,a,"funnelarea"),a.each(function(i){var n=i[0],r=n.trace,f=s.select(this);f.style({opacity:r.opacity}),f.selectAll("path.surface").each(function(u){s.select(this).call(o,u,r)})})}},{"../bar/uniform_text":664,"../pie/style_one":912,"@plotly/d3":58}],792:[function(e,I,F){var s=e("../scatter/attributes"),o=e("../../plots/attributes"),h=e("../../plots/font_attributes"),y=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../components/colorscale/attributes"),n=e("../../lib/extend").extendFlat;I.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},s.x,{impliedEdits:{xtype:"array"}}),x0:n({},s.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},s.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},s.y,{impliedEdits:{ytype:"array"}}),y0:n({},s.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},s.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},s.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},s.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},s.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},s.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},s.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},s.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:t(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:h({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:n({},o.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927}],793:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("../../plots/cartesian/axes"),y=e("../../plots/cartesian/align_period"),t=e("../histogram2d/calc"),a=e("../../components/colorscale/calc"),i=e("./convert_column_xyz"),n=e("./clean_2d_array"),r=e("./interp2d"),f=e("./find_empties"),u=e("./make_bound_array"),l=e("../../constants/numerical").BADNUM;I.exports=function(g,_){var p=h.getFromId(g,_.xaxis||"x"),A=h.getFromId(g,_.yaxis||"y"),c=s.traceIs(_,"contour"),S=s.traceIs(_,"histogram"),T=s.traceIs(_,"gl2d"),x=c?"best":_.zsmooth,w,v,C,M,E,L,z,O,R,D,H;if(p._minDtick=0,A._minDtick=0,S)H=t(g,_),M=H.orig_x,w=H.x,v=H.x0,C=H.dx,O=H.orig_y,E=H.y,L=H.y0,z=H.dy,R=H.z;else{var B=_.z;o.isArray1D(B)?(i(_,p,A,"x","y",["z"]),w=_._x,E=_._y,B=_._z):(M=_.x?p.makeCalcdata(_,"x"):[],O=_.y?A.makeCalcdata(_,"y"):[],w=y(_,p,"x",M).vals,E=y(_,A,"y",O).vals,_._x=w,_._y=E),v=_.x0,C=_.dx,L=_.y0,z=_.dy,R=n(B,_,p,A)}(p.rangebreaks||A.rangebreaks)&&(R=d(w,E,R),S||(w=m(w),E=m(E),_._x=w,_._y=E)),!S&&(c||_.connectgaps)&&(_._emptypoints=f(R),r(R,_._emptypoints));function $(q){x=_._input.zsmooth=_.zsmooth=!1,o.warn('cannot use zsmooth: "fast": '+q)}if(x==="fast"){if(p.type==="log"||A.type==="log")$("log axis found");else if(!S){if(w.length){var W=(w[w.length-1]-w[0])/(w.length-1),re=Math.abs(W/100);for(D=0;D<w.length-1;D++)if(Math.abs(w[D+1]-w[D]-W)>re){$("x scale is not linear");break}}if(E.length&&x==="fast"){var Q=(E[E.length-1]-E[0])/(E.length-1),Z=Math.abs(Q/100);for(D=0;D<E.length-1;D++)if(Math.abs(E[D+1]-E[D]-Q)>Z){$("y scale is not linear");break}}}}var K=o.maxRowLength(R),le=_.xtype==="scaled"?"":w,fe=u(_,le,v,C,K,p),ue=_.ytype==="scaled"?"":E,V=u(_,ue,L,z,R.length,A);T||(_._extremes[p._id]=h.findExtremes(p,fe),_._extremes[A._id]=h.findExtremes(A,V));var j={x:fe,y:V,z:R,text:_._text||_.text,hovertext:_._hovertext||_.hovertext};if(_.xperiodalignment&&M&&(j.orig_x=M),_.yperiodalignment&&O&&(j.orig_y=O),le&&le.length===fe.length-1&&(j.xCenter=le),ue&&ue.length===V.length-1&&(j.yCenter=ue),S&&(j.xRanges=H.xRanges,j.yRanges=H.yRanges,j.pts=H.pts),c||a(g,_,{vals:R,cLetter:"z"}),c&&_.contours&&_.contours.coloring==="heatmap"){var ee={type:_.type==="contour"?"heatmap":"histogram2d",xcalendar:_.xcalendar,ycalendar:_.ycalendar};j.xfill=u(ee,le,v,C,K,p),j.yfill=u(ee,ue,L,z,R.length,A)}return[j]};function m(b){for(var g=[],_=b.length,p=0;p<_;p++){var A=b[p];A!==l&&g.push(A)}return g}function d(b,g,_){for(var p=[],A=-1,c=0;c<_.length;c++)if(g[c]!==l){A++,p[A]=[];for(var S=0;S<_[c].length;S++)b[S]!==l&&p[A].push(_[c][S])}return p}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../constants/numerical").BADNUM;I.exports=function(t,a,i,n){var r,f,u,l,m,d;function b(S){if(!!s(S))return+S}if(a&&a.transpose){for(r=0,m=0;m<t.length;m++)r=Math.max(r,t[m].length);if(r===0)return!1;u=function(S){return S.length},l=function(S,T,x){return(S[x]||[])[T]}}else r=t.length,u=function(S,T){return S[T].length},l=function(S,T,x){return(S[T]||[])[x]};var g=function(S,T,x){return T===h||x===h?h:l(S,T,x)};function _(S){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&S&&S.type==="category"&&a["_"+S._id.charAt(0)].length){var T=S._id.charAt(0),x={},w=a["_"+T+"CategoryMap"]||a[T];for(m=0;m<w.length;m++)x[w[m]]=m;return function(v){var C=x[S._categories[v]];return C+1?C:h}}else return o.identity}var p=_(i),A=_(n);n&&n.type==="category"&&(r=n._categories.length);var c=new Array(r);for(m=0;m<r;m++)for(i&&i.type==="category"?f=i._categories.length:f=u(t,m),c[m]=new Array(f),d=0;d<f;d++)c[m][d]=b(g(t,A(m),p(d)));return c}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(e,I,F){I.exports={min:"zmin",max:"zmax"}},{}],796:[function(e,I,F){var s=e("../../lib"),o=e("../../constants/numerical").BADNUM,h=e("../../plots/cartesian/align_period");I.exports=function(t,a,i,n,r,f){var u=t._length,l=a.makeCalcdata(t,n),m=i.makeCalcdata(t,r);l=h(t,a,n,l).vals,m=h(t,i,r,m).vals;var d=t.text,b=d!==void 0&&s.isArray1D(d),g=t.hovertext,_=g!==void 0&&s.isArray1D(g),p,A,c=s.distinctVals(l),S=c.vals,T=s.distinctVals(m),x=T.vals,w=[],v,C,M=x.length,E=S.length;for(p=0;p<f.length;p++)w[p]=s.init2dArray(M,E);b&&(v=s.init2dArray(M,E)),_&&(C=s.init2dArray(M,E));var L=s.init2dArray(M,E);for(p=0;p<u;p++)if(l[p]!==o&&m[p]!==o){var z=s.findBin(l[p]+c.minDiff/2,S),O=s.findBin(m[p]+T.minDiff/2,x);for(A=0;A<f.length;A++){var R=f[A],D=t[R],H=w[A];H[O][z]=D[p],L[O][z]=p}b&&(v[O][z]=d[p]),_&&(C[O][z]=g[p])}for(t["_"+n]=S,t["_"+r]=x,A=0;A<f.length;A++)t["_"+f[A]]=w[A];b&&(t._text=v),_&&(t._hovertext=C),a&&a.type==="category"&&(t["_"+n+"CategoryMap"]=S.map(function(B){return a._categories[B]})),i&&i.type==="category"&&(t["_"+r+"CategoryMap"]=x.map(function(B){return i._categories[B]})),t._after2before=L}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(e,I,F){var s=e("../../lib"),o=e("./xyz_defaults"),h=e("./label_defaults"),y=e("../scatter/period_defaults"),t=e("./style_defaults"),a=e("../../components/colorscale/defaults"),i=e("./attributes");I.exports=function(r,f,u,l){function m(b,g){return s.coerce(r,f,i,b,g)}var d=o(r,f,m,l);if(!d){f.visible=!1;return}y(r,f,l,m),m("xhoverformat"),m("yhoverformat"),m("text"),m("hovertext"),m("hovertemplate"),h(m,l),t(r,f,m,l),m("hoverongaps"),m("connectgaps",s.isArray1D(f.z)&&f.zsmooth!==!1),a(r,f,l,m,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":947,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(e,I,F){var s=e("../../lib").maxRowLength;I.exports=function(h){var y=[],t={},a=[],i=h[0],n=[],r=[0,0,0],f=s(h),u,l,m,d,b,g,_,p;for(l=0;l<h.length;l++)for(u=n,n=i,i=h[l+1]||[],m=0;m<f;m++)n[m]===void 0&&(g=(n[m-1]!==void 0?1:0)+(n[m+1]!==void 0?1:0)+(u[m]!==void 0?1:0)+(i[m]!==void 0?1:0),g?(l===0&&g++,m===0&&g++,l===h.length-1&&g++,m===n.length-1&&g++,g<4&&(t[[l,m]]=[l,m,g]),y.push([l,m,g])):a.push([l,m]));for(;a.length;){for(_={},p=!1,b=a.length-1;b>=0;b--)d=a[b],l=d[0],m=d[1],g=((t[[l-1,m]]||r)[2]+(t[[l+1,m]]||r)[2]+(t[[l,m-1]]||r)[2]+(t[[l,m+1]]||r)[2])/20,g&&(_[d]=[l,m,g],a.splice(b,1),p=!0);if(!p)throw"findEmpties iterated with no new neighbors";for(d in _)t[d]=_[d],y.push(_[d])}return y.sort(function(A,c){return c[2]-A[2]})}},{"../../lib":503}],799:[function(e,I,F){var s=e("../../components/fx"),o=e("../../lib"),h=e("../../plots/cartesian/axes"),y=e("../../components/colorscale").extractOpts;I.exports=function(a,i,n,r,f){f||(f={});var u=f.isContour,l=a.cd[0],m=l.trace,d=a.xa,b=a.ya,g=l.x,_=l.y,p=l.z,A=l.xCenter,c=l.yCenter,S=l.zmask,T=m.zhoverformat,x=g,w=_,v,C,M,E;if(a.index!==!1){try{M=Math.round(a.index[1]),E=Math.round(a.index[0])}catch{o.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(M<0||M>=p[0].length||E<0||E>p.length)return}else{if(s.inbox(i-g[0],i-g[g.length-1],0)>0||s.inbox(n-_[0],n-_[_.length-1],0)>0)return;if(u){var L;for(x=[2*g[0]-g[1]],L=1;L<g.length;L++)x.push((g[L]+g[L-1])/2);for(x.push([2*g[g.length-1]-g[g.length-2]]),w=[2*_[0]-_[1]],L=1;L<_.length;L++)w.push((_[L]+_[L-1])/2);w.push([2*_[_.length-1]-_[_.length-2]])}M=Math.max(0,Math.min(x.length-2,o.findBin(i,x))),E=Math.max(0,Math.min(w.length-2,o.findBin(n,w)))}var z=d.c2p(g[M]),O=d.c2p(g[M+1]),R=b.c2p(_[E]),D=b.c2p(_[E+1]),H,B;u?(H=l.orig_x||g,B=l.orig_y||_,O=z,v=H[M],D=R,C=B[E]):(H=l.orig_x||A||g,B=l.orig_y||c||_,v=A?H[M]:(H[M]+H[M+1])/2,C=c?B[E]:(B[E]+B[E+1])/2,d&&d.type==="category"&&(v=g[M]),b&&b.type==="category"&&(C=_[E]),m.zsmooth&&(z=O=d.c2p(v),R=D=b.c2p(C)));var $=p[E][M];if(S&&!S[E][M]&&($=void 0),!($===void 0&&!m.hoverongaps)){var W;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[E])?W=l.hovertext[E][M]:Array.isArray(l.text)&&Array.isArray(l.text[E])&&(W=l.text[E][M]);var re=y(m),Q={type:"linear",range:[re.min,re.max],hoverformat:T,_separators:d._separators,_numFormat:d._numFormat},Z=h.tickText(Q,$,"hover").text;return[o.extendFlat(a,{index:m._after2before?m._after2before[E][M]:[E,M],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:z,x1:O,y0:R,y1:D,xLabelVal:v,yLabelVal:C,zLabelVal:$,zLabel:Z,text:W})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(e,I,F){var s=e("../../lib"),o=.01,h=[[-1,0],[1,0],[0,-1],[0,1]];function y(a){return .5-.25*Math.min(1,a*.5)}I.exports=function(i,n){var r=1,f;for(t(i,n),f=0;f<n.length&&!(n[f][2]<4);f++);for(n=n.slice(f),f=0;f<100&&r>o;f++)r=t(i,n,y(r));return r>o&&s.log("interp2d didn't converge quickly",r),i};function t(a,i,n){var r=0,f,u,l,m,d,b,g,_,p,A,c,S,T;for(m=0;m<i.length;m++){for(f=i[m],u=f[0],l=f[1],c=a[u][l],A=0,p=0,d=0;d<4;d++)b=h[d],g=a[u+b[0]],g&&(_=g[l+b[1]],_!==void 0&&(A===0?S=T=_:(S=Math.min(S,_),T=Math.max(T,_)),p++,A+=_));if(p===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[u][l]=A/p,c===void 0?p<4&&(r=1):(a[u][l]=(1+n)*a[u][l]-n*c,T>S&&(r=Math.max(r,Math.abs(a[u][l]-c)/(T-S))))}return r}},{"../../lib":503}],802:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){h("texttemplate");var t=s.extendFlat({},y.font,{color:"auto",size:"auto"});s.coerceFont(h,"textfont",t)}},{"../../lib":503}],803:[function(e,I,F){var s=e("../../registry"),o=e("../../lib").isArrayOrTypedArray;I.exports=function(y,t,a,i,n,r){var f=[],u=s.traceIs(y,"contour"),l=s.traceIs(y,"histogram"),m=s.traceIs(y,"gl2d"),d,b,g,_=o(t)&&t.length>1;if(_&&!l&&r.type!=="category"){var p=t.length;if(p<=n){if(u||m)f=t.slice(0,n);else if(n===1)f=[t[0]-.5,t[0]+.5];else{for(f=[1.5*t[0]-.5*t[1]],g=1;g<p;g++)f.push((t[g-1]+t[g])*.5);f.push(1.5*t[p-1]-.5*t[p-2])}if(p<n){var A=f[f.length-1],c=A-f[f.length-2];for(g=p;g<n;g++)A+=c,f.push(A)}}else return u?t.slice(0,n):t.slice(0,n+1)}else{var S=y[r._id.charAt(0)+"calendar"];if(l)d=r.r2c(a,0,S);else if(o(t)&&t.length===1)d=t[0];else if(a===void 0)d=0;else{var T=r.type==="log"?r.d2c:r.r2c;d=T(a,0,S)}for(b=i||1,g=u||m?0:-.5;g<n;g++)f.push(d+b*g)}return f}},{"../../lib":503,"../../registry":638}],804:[function(e,I,F){var s=e("@plotly/d3"),o=e("tinycolor2"),h=e("../../registry"),y=e("../../components/drawing"),t=e("../../plots/cartesian/axes"),a=e("../../lib"),i=e("../../lib/svg_text_utils"),n=e("../scatter/format_labels"),r=e("../../components/color"),f=e("../../components/colorscale").extractOpts,u=e("../../components/colorscale").makeColorScaleFuncFromTrace,l=e("../../constants/xmlns_namespaces"),m=e("../../constants/alignment"),d=m.LINE_SPACING,b="heatmap-label";function g(S){return S.selectAll("g."+b)}function _(S){g(S).remove()}I.exports=function(S,T,x,w){var v=T.xaxis,C=T.yaxis;a.makeTraceGroups(w,x,"hm").each(function(M){var E=s.select(this),L=M[0],z=L.trace,O=z.xgap||0,R=z.ygap||0,D=L.z,H=L.x,B=L.y,$=L.xCenter,W=L.yCenter,re=h.traceIs(z,"contour"),Q=re?"best":z.zsmooth,Z=D.length,K=a.maxRowLength(D),le=!1,fe=!1,ue,V,j,ee,q,X,J,ie;for(X=0;ue===void 0&&X<H.length-1;)ue=v.c2p(H[X]),X++;for(X=H.length-1;V===void 0&&X>0;)V=v.c2p(H[X]),X--;for(V<ue&&(j=V,V=ue,ue=j,le=!0),X=0;ee===void 0&&X<B.length-1;)ee=C.c2p(B[X]),X++;for(X=B.length-1;q===void 0&&X>0;)q=C.c2p(B[X]),X--;if(q<ee&&(j=ee,ee=q,q=j,fe=!0),re&&($=H,W=B,H=L.xfill,B=L.yfill),Q!=="fast"){var ne=Q==="best"?0:.5;ue=Math.max(-ne*v._length,ue),V=Math.min((1+ne)*v._length,V),ee=Math.max(-ne*C._length,ee),q=Math.min((1+ne)*C._length,q)}var oe=Math.round(V-ue),se=Math.round(q-ee),me=oe<=0||se<=0;if(me){var ce=E.selectAll("image").data([]);ce.exit().remove(),_(E);return}var pe,xe;Q==="fast"?(pe=K,xe=Z):(pe=oe,xe=se);var Se=document.createElement("canvas");Se.width=pe,Se.height=xe;var Ae=Se.getContext("2d"),Ce=u(z,{noNumericCheck:!0,returnArray:!0}),Ee,Oe;Q==="fast"?(Ee=le?function(Rr){return K-1-Rr}:a.identity,Oe=fe?function(Rr){return Z-1-Rr}:a.identity):(Ee=function(Rr){return a.constrain(Math.round(v.c2p(H[Rr])-ue),0,oe)},Oe=function(Rr){return a.constrain(Math.round(C.c2p(B[Rr])-ee),0,se)});var _e=Oe(0),Re=[_e,_e],Ve=le?0:1,Je=fe?0:1,ze=0,De=0,je=0,dt=0,Et,$t,wt,Ot,Vt;function kt(Rr,Ct){if(Rr!==void 0){var tr=Ce(Rr);return tr[0]=Math.round(tr[0]),tr[1]=Math.round(tr[1]),tr[2]=Math.round(tr[2]),ze+=Ct,De+=tr[0]*Ct,je+=tr[1]*Ct,dt+=tr[2]*Ct,tr}return[0,0,0,0]}function St(Rr,Ct,tr,Lr){var Nr=Rr[tr.bin0];if(Nr===void 0)return kt(void 0,1);var Tn=Rr[tr.bin1],rn=Ct[tr.bin0],kn=Ct[tr.bin1],Cn=Tn-Nr||0,oa=rn-Nr||0,ya;return Tn===void 0?kn===void 0?ya=0:rn===void 0?ya=2*(kn-Nr):ya=(2*kn-rn-Nr)*2/3:kn===void 0?rn===void 0?ya=0:ya=(2*Nr-Tn-rn)*2/3:rn===void 0?ya=(2*kn-Tn-Nr)*2/3:ya=kn+Nr-Tn-rn,kt(Nr+tr.frac*Cn+Lr.frac*(oa+tr.frac*ya))}if(Q){var ot=0,ht;try{ht=new Uint8Array(oe*se*4)}catch{ht=new Array(oe*se*4)}if(Q==="best"){var Ke=$||H,Pe=W||B,We=new Array(Ke.length),Qe=new Array(Pe.length),ut=new Array(oe),It=$?A:p,Tt=W?A:p,Bt,rr,Ut;for(X=0;X<Ke.length;X++)We[X]=Math.round(v.c2p(Ke[X])-ue);for(X=0;X<Pe.length;X++)Qe[X]=Math.round(C.c2p(Pe[X])-ee);for(X=0;X<oe;X++)ut[X]=It(X,We);for(J=0;J<se;J++)for(Bt=Tt(J,Qe),rr=D[Bt.bin0],Ut=D[Bt.bin1],X=0;X<oe;X++,ot+=4)Vt=St(rr,Ut,ut[X],Bt),c(ht,ot,Vt)}else for(J=0;J<Z;J++)for(Ot=D[J],Re=Oe(J),X=0;X<oe;X++)Vt=kt(Ot[X],1),ot=(Re*oe+Ee(X))*4,c(ht,ot,Vt);var Qt=Ae.createImageData(oe,se);try{Qt.data.set(ht)}catch{var ar=Qt.data,nr=ar.length;for(J=0;J<nr;J++)ar[J]=ht[J]}Ae.putImageData(Qt,0,0)}else{var cr=Math.floor(O/2),Kr=Math.floor(R/2);for(J=0;J<Z;J++)if(Ot=D[J],Re.reverse(),Re[Je]=Oe(J+1),!(Re[0]===Re[1]||Re[0]===void 0||Re[1]===void 0))for($t=Ee(0),Et=[$t,$t],X=0;X<K;X++)Et.reverse(),Et[Ve]=Ee(X+1),!(Et[0]===Et[1]||Et[0]===void 0||Et[1]===void 0)&&(wt=Ot[X],Vt=kt(wt,(Et[1]-Et[0])*(Re[1]-Re[0])),Ae.fillStyle="rgba("+Vt.join(",")+")",Ae.fillRect(Et[0]+cr,Re[0]+Kr,Et[1]-Et[0]-O,Re[1]-Re[0]-R))}De=Math.round(De/ze),je=Math.round(je/ze),dt=Math.round(dt/ze);var yn=o("rgb("+De+","+je+","+dt+")");S._hmpixcount=(S._hmpixcount||0)+ze,S._hmlumcount=(S._hmlumcount||0)+ze*yn.getLuminance();var Qr=E.selectAll("image").data(M);Qr.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),Qr.attr({height:se,width:oe,x:ue,y:ee,"xlink:href":Se.toDataURL("image/png")}),_(E);var st=z.texttemplate;if(st){var Gt=f(z),Zt={type:"linear",range:[Gt.min,Gt.max],_separators:v._separators,_numFormat:v._numFormat},Ht=z.type==="histogram2dcontour",_r=z.type==="contour",it=_r?1:0,Te=_r?Z-1:Z,ke=_r?1:0,Ge=_r?K-1:K,Ye=[];for(X=it;X<Te;X++){var qe;if(_r)qe=L.y[X];else if(Ht){if(X===0||X===Z-1)continue;qe=L.y[X]}else if(L.yCenter)qe=L.yCenter[X];else{if(X+1===Z&&L.y[X+1]===void 0)continue;qe=(L.y[X]+L.y[X+1])/2}var at=Math.round(C.c2p(qe));if(!(0>at||at>C._length))for(J=ke;J<Ge;J++){var et;if(_r)et=L.x[J];else if(Ht){if(J===0||J===K-1)continue;et=L.x[J]}else if(L.xCenter)et=L.xCenter[J];else{if(J+1===K&&L.x[J+1]===void 0)continue;et=(L.x[J]+L.x[J+1])/2}var pt=Math.round(v.c2p(et));if(!(0>pt||pt>v._length)){var _t=n({x:et,y:qe},z,S._fullLayout);_t.x=et,_t.y=qe;var Pt=L.z[X][J];Pt===void 0?(_t.z="",_t.zLabel=""):(_t.z=Pt,_t.zLabel=t.tickText(Zt,Pt,"hover").text);var Xt=L.text&&L.text[X]&&L.text[X][J];(Xt===void 0||Xt===!1)&&(Xt=""),_t.text=Xt;var zt=a.texttemplateString(st,_t,S._fullLayout._d3locale,_t,z._meta||{});if(!!zt){var ur=zt.split("<br>"),gr=ur.length,Mr=0;for(ie=0;ie<gr;ie++)Mr=Math.max(Mr,ur[ie].length);Ye.push({l:gr,c:Mr,t:zt,x:pt,y:at,z:Pt})}}}}var un=z.textfont,zr=un.family,$r=un.size,hn=S._fullLayout.font.size;if(!$r||$r==="auto"){var Tr=1/0,wr=1/0,Ur=0,Br=0;for(ie=0;ie<Ye.length;ie++){var Cr=Ye[ie];if(Ur=Math.max(Ur,Cr.l),Br=Math.max(Br,Cr.c),ie<Ye.length-1){var nt=Ye[ie+1],Rt=Math.abs(nt.x-Cr.x),Jt=Math.abs(nt.y-Cr.y);Rt&&(Tr=Math.min(Tr,Rt)),Jt&&(wr=Math.min(wr,Jt))}}!isFinite(Tr)||!isFinite(wr)?$r=hn:(Tr-=O,wr-=R,Tr/=Br,wr/=Ur,Tr/=d/2,wr/=d,$r=Math.min(Math.floor(Tr),Math.floor(wr),hn))}if($r<=0||!isFinite($r))return;var hr=function(Rr){return Rr.x},Dr=function(Rr){return Rr.y-$r*(Rr.l*d/2-1)},Gr=g(E).data(Ye);Gr.enter().append("g").classed(b,1).append("text").attr("text-anchor","middle").each(function(Rr){var Ct=s.select(this),tr=un.color;(!tr||tr==="auto")&&(tr=r.contrast("rgba("+Ce(Rr.z).join()+")")),Ct.attr("data-notex",1).call(i.positionText,hr(Rr),Dr(Rr)).call(y.font,zr,$r,tr).text(Rr.t).call(i.convertToTspans,S)})}})};function p(S,T){var x=T.length-2,w=a.constrain(a.findBin(S,T),0,x),v=T[w],C=T[w+1],M=a.constrain(w+(S-v)/(C-v)-.5,0,x),E=Math.round(M),L=Math.abs(M-E);return!M||M===x||!L?{bin0:E,bin1:E,frac:0}:{bin0:E,frac:L,bin1:Math.round(E+L/(M-E))}}function A(S,T){var x=T.length-1,w=a.constrain(a.findBin(S,T),0,x),v=T[w],C=T[w+1],M=(S-v)/(C-v)||0;return M<=0?{bin0:w,bin1:w,frac:0}:M<.5?{bin0:w,bin1:w+1,frac:M}:{bin0:w+1,bin1:w,frac:1-M}}function c(S,T,x){S[T]=x[0],S[T+1]=x[1],S[T+2]=x[2],S[T+3]=Math.round(x[3]*255)}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":936,"@plotly/d3":58,tinycolor2:312}],805:[function(e,I,F){var s=e("@plotly/d3");I.exports=function(h){s.select(h).selectAll(".hm image").style("opacity",function(y){return y.trace.opacity})}},{"@plotly/d3":58}],806:[function(e,I,F){I.exports=function(o,h,y){var t=y("zsmooth");t===!1&&(y("xgap"),y("ygap")),y("zhoverformat")}},{}],807:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../registry");I.exports=function(i,n,r,f,u,l){var m=r("z");u=u||"x",l=l||"y";var d,b;if(m===void 0||!m.length)return 0;if(o.isArray1D(i.z)){d=r(u),b=r(l);var g=o.minRowLength(d),_=o.minRowLength(b);if(g===0||_===0)return 0;n._length=Math.min(g,_,m.length)}else{if(d=y(u,r),b=y(l,r),!t(m))return 0;r("transpose"),n._length=null}if(i.type==="heatmapgl")return!0;var p=h.getComponentMethod("calendars","handleTraceDefaults");return p(i,n,[u,l],f),!0};function y(a,i){var n=i(a),r=n?i(a+"type","array"):"scaled";return r==="scaled"&&(i(a+"0"),i("d"+a)),n}function t(a){for(var i=!0,n=!1,r=!1,f,u=0;u<a.length;u++){if(f=a[u],!o.isArrayOrTypedArray(f)){i=!1;break}f.length>0&&(n=!0);for(var l=0;l<f.length;l++)if(s(f[l])){r=!0;break}}return i&&n&&r}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(e,I,F){for(var s=e("../heatmap/attributes"),o=e("../../components/colorscale/attributes"),h=e("../../lib/extend").extendFlat,y=e("../../plot_api/edit_types").overrideAll,t=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},i=0;i<t.length;i++){var n=t[i];a[n]=s[n]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},h(a,o("",{cLetter:"z",autoColorDflt:!1})),I.exports=y(a,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(e,I,F){var s=e("../../../stackgl_modules").gl_heatmap2d,o=e("../../plots/cartesian/axes"),h=e("../../lib/str2rgbarray");function y(n,r){this.scene=n,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=s(n.glplot,this.options),this.heatmap._trace=this}var t=y.prototype;t.handlePick=function(n){var r=this.options,f=r.shape,u=n.pointId,l=u%f[0],m=Math.floor(u/f[0]),d=u;return{trace:this,dataCoord:n.dataCoord,traceCoord:[r.x[l],r.y[m],r.z[d]],textLabel:this.textLabels[u],name:this.name,pointIndex:[m,l],hoverinfo:this.hoverinfo}},t.update=function(n,r){var f=r[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var u=f.z;this.options.z=[].concat.apply([],u);var l=u[0].length,m=u.length;this.options.shape=[l,m],this.options.x=f.x,this.options.y=f.y,this.options.zsmooth=n.zsmooth;var d=a(n);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var b=this.scene.xaxis,g=this.scene.yaxis,_,p;n.zsmooth===!1&&(_={ppad:f.x[1]-f.x[0]},p={ppad:f.y[1]-f.y[0]}),n._extremes[b._id]=o.findExtremes(b,f.x,_),n._extremes[g._id]=o.findExtremes(g,f.y,p)},t.dispose=function(){this.heatmap.dispose()};function a(n){for(var r=n.colorscale,f=n.zmin,u=n.zmax,l=r.length,m=new Array(l),d=new Array(4*l),b=0;b<l;b++){var g=r[b],_=h(g[1]);m[b]=f+g[0]*(u-f);for(var p=0;p<4;p++)d[4*b+p]=_[p]}return{colorLevels:m,colorValues:d}}function i(n,r,f){var u=new y(n,r.uid);return u.update(r,f),u}I.exports=i},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(e,I,F){var s=e("../../lib"),o=e("../heatmap/xyz_defaults"),h=e("../../components/colorscale/defaults"),y=e("./attributes");I.exports=function(a,i,n,r){function f(l,m){return s.coerce(a,i,y,l,m)}var u=o(a,i,f,r);if(!u){i.visible=!1;return}f("text"),f("zsmooth"),h(a,i,r,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../heatmap/calc"),plot:e("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(e,I,F){var s=e("../bar/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../plots/font_attributes"),a=e("./bin_attributes"),i=e("./constants"),n=e("../../lib/extend").extendFlat;I.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:o("x"),yhoverformat:o("y"),text:n({},s.text,{}),hovertext:n({},s.hovertext,{}),orientation:s.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:h({},{keys:i.eventDataKeys}),texttemplate:y({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:n({},s.textposition,{arrayOk:!1}),textfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:s.insidetextanchor,textangle:s.textangle,cliponaxis:s.cliponaxis,constraintext:s.constraintext,marker:s.marker,offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:s.selected,unselected:s.unselected,_deprecated:{bardir:s._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(e,I,F){I.exports=function(o,h){for(var y=o.length,t=0,a=0;a<y;a++)h[a]?(o[a]/=h[a],t+=o[a]):o[a]=null;return t}},{}],814:[function(e,I,F){I.exports=function(o,h){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(e,I,F){var s=e("fast-isnumeric");I.exports={count:function(o,h,y){return y[o]++,1},sum:function(o,h,y,t){var a=t[h];return s(a)?(a=Number(a),y[o]+=a,a):0},avg:function(o,h,y,t,a){var i=t[h];return s(i)&&(i=Number(i),y[o]+=i,a[o]++),0},min:function(o,h,y,t){var a=t[h];if(s(a))if(a=Number(a),s(y[o])){if(y[o]>a){var i=a-y[o];return y[o]=a,i}}else return y[o]=a,a;return 0},max:function(o,h,y,t){var a=t[h];if(s(a))if(a=Number(a),s(y[o])){if(y[o]<a){var i=a-y[o];return y[o]=a,i}}else return y[o]=a,a;return 0}}},{"fast-isnumeric":190}],816:[function(e,I,F){var s=e("../../constants/numerical"),o=s.ONEAVGYEAR,h=s.ONEAVGMONTH,y=s.ONEDAY,t=s.ONEHOUR,a=s.ONEMIN,i=s.ONESEC,n=e("../../plots/cartesian/axes").tickIncrement;I.exports=function(d,b,g,_,p){var A=-1.1*b,c=-.1*b,S=d-c,T=g[0],x=g[1],w=Math.min(r(T+c,T+S,_,p),r(x+c,x+S,_,p)),v=Math.min(r(T+A,T+c,_,p),r(x+A,x+c,_,p)),C,M;if(w>v&&v<Math.abs(x-T)/4e3?(C=w,M=!1):(C=Math.min(w,v),M=!0),_.type==="date"&&C>y){var E=C===o?1:6,L=C===o?"M12":"M1";return function(z,O){var R=_.c2d(z,o,p),D=R.indexOf("-",E);D>0&&(R=R.substr(0,D));var H=_.d2c(R,0,p);if(H<z){var B=n(H,L,!1,p);(H+B)/2<z+d&&(H=B)}return O&&M?n(H,L,!0,p):H}}return function(z,O){var R=C*Math.round(z/C);return R+C/10<z&&R+C*.9<z+d&&(R+=C),O&&M&&(R-=C),R}};function r(m,d,b,g){if(m*d<=0)return 1/0;for(var _=Math.abs(d-m),p=b.type==="date",A=f(_,p),c=0;c<10;c++){var S=f(A*80,p);if(A===S)break;if(u(S,m,d,p,b,g))A=S;else break}return A}function f(m,d){return d&&m>i?m>y?m>o*1.1?o:m>h*1.1?h:y:m>t?t:m>a?a:i:Math.pow(10,Math.floor(Math.log(m)/Math.LN10))}function u(m,d,b,g,_,p){if(g&&m>y){var A=l(d,_,p),c=l(b,_,p),S=m===o?0:1;return A[S]!==c[S]}return Math.floor(b/m)-Math.floor(d/m)>.1}function l(m,d,b){var g=d.c2d(m,o,b).split("-");return g[0]===""&&(g.unshift(),g[0]="-"+g[0]),g}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../registry"),y=e("../../plots/cartesian/axes"),t=e("../bar/arrays_to_calcdata"),a=e("./bin_functions"),i=e("./norm_functions"),n=e("./average"),r=e("./bin_label_vals");function f(b,g){var _=[],p=[],A=g.orientation==="h",c=y.getFromId(b,A?g.yaxis:g.xaxis),S=A?"y":"x",T={x:"y",y:"x"}[S],x=g[S+"calendar"],w=g.cumulative,v,C=u(b,g,c,S),M=C[0],E=C[1],L=typeof M.size=="string",z=[],O=L?z:M,R=[],D=[],H=[],B=0,$=g.histnorm,W=g.histfunc,re=$.indexOf("density")!==-1,Q,Z,K;w.enabled&&re&&($=$.replace(/ ?density$/,""),re=!1);var le=W==="max"||W==="min",fe=le?null:0,ue=a.count,V=i[$],j=!1,ee=function(Oe){return c.r2c(Oe,0,x)},q;for(o.isArrayOrTypedArray(g[T])&&W!=="count"&&(q=g[T],j=W==="avg",ue=a[W]),v=ee(M.start),Z=ee(M.end)+(v-y.tickIncrement(v,M.size,!1,x))/1e6;v<Z&&_.length<1e6&&(Q=y.tickIncrement(v,M.size,!1,x),_.push((v+Q)/2),p.push(fe),H.push([]),z.push(v),re&&R.push(1/(Q-v)),j&&D.push(0),!(Q<=v));)v=Q;z.push(v),!L&&c.type==="date"&&(O={start:ee(O.start),end:ee(O.end),size:O.size}),b._fullLayout._roundFnOpts||(b._fullLayout._roundFnOpts={});var X=g["_"+S+"bingroup"],J={leftGap:1/0,rightGap:1/0};X&&(b._fullLayout._roundFnOpts[X]||(b._fullLayout._roundFnOpts[X]=J),J=b._fullLayout._roundFnOpts[X]);var ie=p.length,ne=!0,oe=J.leftGap,se=J.rightGap,me={};for(v=0;v<E.length;v++){var ce=E[v];K=o.findBin(ce,O),K>=0&&K<ie&&(B+=ue(K,v,p,q,D),ne&&H[K].length&&ce!==E[H[K][0]]&&(ne=!1),H[K].push(v),me[v]=K,oe=Math.min(oe,ce-z[K]),se=Math.min(se,z[K+1]-ce))}J.leftGap=oe,J.rightGap=se;var pe;ne||(pe=function(Oe,_e){return function(){var Re=b._fullLayout._roundFnOpts[X];return r(Re.leftGap,Re.rightGap,z,c,x)(Oe,_e)}}),j&&(B=n(p,D)),V&&V(p,B,R),w.enabled&&d(p,w.direction,w.currentbin);var xe=Math.min(_.length,p.length),Se=[],Ae=0,Ce=xe-1;for(v=0;v<xe;v++)if(p[v]){Ae=v;break}for(v=xe-1;v>=Ae;v--)if(p[v]){Ce=v;break}for(v=Ae;v<=Ce;v++)if(s(_[v])&&s(p[v])){var Ee={p:_[v],s:p[v],b:0};w.enabled||(Ee.pts=H[v],ne?Ee.ph0=Ee.ph1=H[v].length?E[H[v][0]]:_[v]:(g._computePh=!0,Ee.ph0=pe(z[v]),Ee.ph1=pe(z[v+1],!0))),Se.push(Ee)}return Se.length===1&&(Se[0].width1=y.tickIncrement(Se[0].p,M.size,!1,x)-Se[0].p),t(Se,g),o.isArrayOrTypedArray(g.selectedpoints)&&o.tagSelected(Se,g,me),Se}function u(b,g,_,p,A){var c=p+"bins",S=b._fullLayout,T=g["_"+p+"bingroup"],x=S._histogramBinOpts[T],w=S.barmode==="overlay",v,C,M,E,L,z,O,R=function(ce){return _.r2c(ce,0,E)},D=function(ce){return _.c2r(ce,0,E)},H=_.type==="date"?function(ce){return ce||ce===0?o.cleanDate(ce,null,E):null}:function(ce){return s(ce)?Number(ce):null};function B(ce,pe,xe){pe[ce+"Found"]?(pe[ce]=H(pe[ce]),pe[ce]===null&&(pe[ce]=xe[ce])):(z[ce]=pe[ce]=xe[ce],o.nestedProperty(C[0],c+"."+ce).set(xe[ce]))}if(g["_"+p+"autoBinFinished"])delete g["_"+p+"autoBinFinished"];else{C=x.traces;var $=[],W=!0,re=!1,Q=!1;for(v=0;v<C.length;v++)if(M=C[v],M.visible){var Z=x.dirs[v];L=M["_"+Z+"pos0"]=_.makeCalcdata(M,Z),$=o.concat($,L),delete M["_"+p+"autoBinFinished"],g.visible===!0&&(W?W=!1:(delete M._autoBin,M["_"+p+"autoBinFinished"]=1),h.traceIs(M,"2dMap")&&(re=!0),M.type==="histogram2dcontour"&&(Q=!0))}E=C[0][p+"calendar"];var K=y.autoBin($,_,x.nbins,re,E,x.sizeFound&&x.size),le=C[0]._autoBin={};if(z=le[x.dirs[0]]={},Q&&(x.size||(K.start=D(y.tickIncrement(R(K.start),K.size,!0,E))),x.end===void 0&&(K.end=D(y.tickIncrement(R(K.end),K.size,!1,E)))),w&&!h.traceIs(g,"2dMap")&&K._dataSpan===0&&_.type!=="category"&&_.type!=="multicategory"){if(A)return[K,L,!0];K=l(b,g,_,p,c)}O=M.cumulative||{},O.enabled&&O.currentbin!=="include"&&(O.direction==="decreasing"?K.start=D(y.tickIncrement(R(K.start),K.size,!0,E)):K.end=D(y.tickIncrement(R(K.end),K.size,!1,E))),x.size=K.size,x.sizeFound||(z.size=K.size,o.nestedProperty(C[0],c+".size").set(K.size)),B("start",x,K),B("end",x,K)}L=g["_"+p+"pos0"],delete g["_"+p+"pos0"];var fe=g._input[c]||{},ue=o.extendFlat({},x),V=x.start,j=_.r2l(fe.start),ee=j!==void 0;if((x.startFound||ee)&&j!==_.r2l(V)){var q=ee?j:o.aggNums(Math.min,null,L),X={type:_.type==="category"||_.type==="multicategory"?"linear":_.type,r2l:_.r2l,dtick:x.size,tick0:V,calendar:E,range:[q,y.tickIncrement(q,x.size,!1,E)].map(_.l2r)},J=y.tickFirst(X);J>_.r2l(q)&&(J=y.tickIncrement(J,x.size,!0,E)),ue.start=_.l2r(J),ee||o.nestedProperty(g,c+".start").set(ue.start)}var ie=x.end,ne=_.r2l(fe.end),oe=ne!==void 0;if((x.endFound||oe)&&ne!==_.r2l(ie)){var se=oe?ne:o.aggNums(Math.max,null,L);ue.end=_.l2r(se),oe||o.nestedProperty(g,c+".start").set(ue.end)}var me="autobin"+p;return g._input[me]===!1&&(g._input[c]=o.extendFlat({},g[c]||{}),delete g._input[me],delete g[me]),[ue,L]}function l(b,g,_,p,A){var c=b._fullLayout,S=m(b,g),T=!1,x=1/0,w=[g],v,C,M;for(v=0;v<S.length;v++)if(C=S[v],C===g)T=!0;else if(!T)M=c._histogramBinOpts[C["_"+p+"bingroup"]],x=Math.min(x,M.size||C[A].size);else{var E=u(b,C,_,p,!0),L=E[0],z=E[2];C["_"+p+"autoBinFinished"]=1,C["_"+p+"pos0"]=E[1],z?w.push(C):x=Math.min(x,L.size)}var O=new Array(w.length);for(v=0;v<w.length;v++)for(var R=w[v]["_"+p+"pos0"],D=0;D<R.length;D++)if(R[D]!==void 0){O[v]=R[D];break}for(isFinite(x)||(x=o.distinctVals(O).minDiff),v=0;v<w.length;v++){C=w[v];var H=C[p+"calendar"],B={start:_.c2r(O[v]-x/2,0,H),end:_.c2r(O[v]+x/2,0,H),size:x};C._input[A]=C[A]=B,M=c._histogramBinOpts[C["_"+p+"bingroup"]],M&&o.extendFlat(M,B)}return g[A]}function m(b,g){for(var _=g.xaxis,p=g.yaxis,A=g.orientation,c=[],S=b._fullData,T=0;T<S.length;T++){var x=S[T];x.type==="histogram"&&x.visible===!0&&x.orientation===A&&x.xaxis===_&&x.yaxis===p&&c.push(x)}return c}function d(b,g,_){var p,A,c;function S(x){c=b[x],b[x]/=2}function T(x){A=b[x],b[x]=c+A/2,c+=A}if(_==="half")if(g==="increasing")for(S(0),p=1;p<b.length;p++)T(p);else for(S(b.length-1),p=b.length-2;p>=0;p--)T(p);else if(g==="increasing"){for(p=1;p<b.length;p++)b[p]+=b[p-1];_==="exclude"&&(b.unshift(0),b.pop())}else{for(p=b.length-2;p>=0;p--)b[p]+=b[p+1];_==="exclude"&&(b.push(0),b.shift())}}I.exports={calc:f,calcAllAutoBins:u}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(e,I,F){I.exports={eventDataKeys:["binNumber"]}},{}],819:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axis_ids"),h=e("../../registry").traceIs,y=e("../bar/defaults").handleGroupingDefaults,t=s.nestedProperty,a=e("../../plots/cartesian/constraints").getAxisGroup,i=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];I.exports=function(f,u){var l=u._histogramBinOpts={},m=[],d={},b=[],g,_,p,A,c,S,T;function x(Q,Z){return s.coerce(g._input,g,g._module.attributes,Q,Z)}function w(Q){return Q.orientation==="v"?"x":"y"}function v(Q,Z){var K=o.getFromTrace({_fullLayout:u},Q,Z);return K.type}function C(Q,Z,K){var le=Q.uid+"__"+K;Z||(Z=le);var fe=v(Q,K),ue=Q[K+"calendar"]||"",V=l[Z],j=!0;V&&(fe===V.axType&&ue===V.calendar?(j=!1,V.traces.push(Q),V.dirs.push(K)):(Z=le,fe!==V.axType&&s.warn(["Attempted to group the bins of trace",Q.index,"set on a","type:"+fe,"axis","with bins on","type:"+V.axType,"axis."].join(" ")),ue!==V.calendar&&s.warn(["Attempted to group the bins of trace",Q.index,"set with a",ue,"calendar","with bins",V.calendar?"on a "+V.calendar+" calendar":"w/o a set calendar"].join(" ")))),j&&(l[Z]={traces:[Q],dirs:[K],axType:fe,calendar:Q[K+"calendar"]||""}),Q["_"+K+"bingroup"]=Z}for(c=0;c<f.length;c++)g=f[c],h(g,"histogram")&&(m.push(g),delete g._xautoBinFinished,delete g._yautoBinFinished,h(g,"2dMap")||y(g._input,g,u,x));var M=u._alignmentOpts||{};for(c=0;c<m.length;c++){if(g=m[c],p="",!h(g,"2dMap")){if(A=w(g),u.barmode==="group"&&g.alignmentgroup){var E=g[A+"axis"],L=a(u,E)+g.orientation;(M[L]||{})[g.alignmentgroup]&&(p=L)}!p&&u.barmode!=="overlay"&&(p=a(u,g.xaxis)+a(u,g.yaxis)+w(g))}p?(d[p]||(d[p]=[]),d[p].push(g)):b.push(g)}for(p in d){if(_=d[p],_.length===1){b.push(_[0]);continue}var z=!1;for(_.length&&(g=_[0],z=x("bingroup")),p=z||p,c=0;c<_.length;c++){g=_[c];var O=g._input.bingroup;O&&O!==p&&s.warn(["Trace",g.index,"must match","within bingroup",p+".","Ignoring its bingroup:",O,"setting."].join(" ")),g.bingroup=p,C(g,p,w(g))}}for(c=0;c<b.length;c++){g=b[c];var R=x("bingroup");if(h(g,"2dMap"))for(T=0;T<2;T++){A=n[T];var D=x(A+"bingroup",R?R+"__"+A:null);C(g,D,A)}else C(g,R,w(g))}for(p in l){var H=l[p];for(_=H.traces,S=0;S<i.length;S++){var B=i[S],$=B.name,W,re;if(!($==="nbins"&&H.sizeFound)){for(c=0;c<_.length;c++){if(g=_[c],A=H.dirs[c],W=B.aStr[A],t(g._input,W).get()!==void 0){H[$]=x(W),H[$+"Found"]=!0;break}re=(g._autoBin||{})[A]||{},re[$]&&t(g,W).set(re[$])}if($==="start"||$==="end")for(;c<_.length;c++)g=_[c],g["_"+A+"bingroup"]&&(re=(g._autoBin||{})[A]||{},x(W,re[$]));$==="nbins"&&!H.sizeFound&&!H.nbinsFound&&(g=_[0],H[$]=x(W))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("../../components/color"),y=e("../bar/defaults").handleText,t=e("../bar/style_defaults"),a=e("./attributes");I.exports=function(n,r,f,u){function l(v,C){return o.coerce(n,r,a,v,C)}var m=l("x"),d=l("y"),b=l("cumulative.enabled");b&&(l("cumulative.direction"),l("cumulative.currentbin")),l("text");var g=l("textposition");y(n,r,u,l,g,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat");var _=l("orientation",d&&!m?"h":"v"),p=_==="v"?"x":"y",A=_==="v"?"y":"x",c=m&&d?Math.min(o.minRowLength(m)&&o.minRowLength(d)):o.minRowLength(r[p]||[]);if(!c){r.visible=!1;return}r._length=c;var S=s.getComponentMethod("calendars","handleTraceDefaults");S(n,r,["x","y"],u);var T=r[A];T&&l("histfunc"),l("histnorm"),l("autobin"+p),t(n,r,l,f,u),o.coerceSelectionMarkerOpacity(r,l);var x=(r.marker.line||{}).color,w=s.getComponentMethod("errorbars","supplyDefaults");w(n,r,x||h.defaultLine,{axis:"y"}),w(n,r,x||h.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(e,I,F){I.exports=function(o,h,y,t,a){if(o.x="xVal"in h?h.xVal:h.x,o.y="yVal"in h?h.yVal:h.y,"zLabelVal"in h&&(o.z=h.zLabelVal),h.xa&&(o.xaxis=h.xa),h.ya&&(o.yaxis=h.ya),!(y.cumulative||{}).enabled){var i=Array.isArray(a)?t[0].pts[a[0]][a[1]]:t[a].pts;o.pointNumbers=i,o.binNumber=o.pointNumber,delete o.pointNumber,delete o.pointIndex;var n;if(y._indexToPoints){n=[];for(var r=0;r<i.length;r++)n=n.concat(y._indexToPoints[i[r]])}else n=i;o.pointIndices=n}return o}},{}],822:[function(e,I,F){var s=e("../bar/hover").hoverPoints,o=e("../../plots/cartesian/axes").hoverLabelText;I.exports=function(y,t,a,i,n){var r=s(y,t,a,i,n);if(!!r){y=r[0];var f=y.cd[y.index],u=y.cd[0].trace;if(!u.cumulative.enabled){var l=u.orientation==="h"?"y":"x";y[l+"Label"]=o(y[l+"a"],[f.ph0,f.ph1],u[l+"hoverformat"])}return r}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(e,I,F){I.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(e,I,F){I.exports={percent:function(s,o){for(var h=s.length,y=100/o,t=0;t<h;t++)s[t]*=y},probability:function(s,o){for(var h=s.length,y=0;y<h;y++)s[y]/=o},density:function(s,o,h,y){var t=s.length;y=y||1;for(var a=0;a<t;a++)s[a]*=h[a]*y},"probability density":function(s,o,h,y){var t=s.length;y&&(o/=y);for(var a=0;a<t;a++)s[a]*=h[a]/o}}},{}],825:[function(e,I,F){var s=e("../histogram/attributes"),o=e("../histogram/bin_attributes"),h=e("../heatmap/attributes"),y=e("../../plots/attributes"),t=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,n=e("../../components/colorscale/attributes"),r=e("../../lib/extend").extendFlat;I.exports=r({x:s.x,y:s.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:s.histnorm,histfunc:s.histfunc,nbinsx:s.nbinsx,xbins:o("x"),nbinsy:s.nbinsy,ybins:o("y"),autobinx:s.autobinx,autobiny:s.autobiny,bingroup:r({},s.bingroup,{}),xbingroup:r({},s.bingroup,{}),ybingroup:r({},s.bingroup,{}),xgap:h.xgap,ygap:h.ygap,zsmooth:h.zsmooth,xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:h.textfont,showlegend:r({},y.showlegend,{dflt:!1})},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("../histogram/bin_functions"),y=e("../histogram/norm_functions"),t=e("../histogram/average"),a=e("../histogram/bin_label_vals"),i=e("../histogram/calc").calcAllAutoBins;I.exports=function(l,m){var d=o.getFromId(l,m.xaxis),b=o.getFromId(l,m.yaxis),g=m.xcalendar,_=m.ycalendar,p=function(ot){return d.r2c(ot,0,g)},A=function(ot){return b.r2c(ot,0,_)},c=function(ot){return d.c2r(ot,0,g)},S=function(ot){return b.c2r(ot,0,_)},T,x,w,v,C=i(l,m,d,"x"),M=C[0],E=C[1],L=i(l,m,b,"y"),z=L[0],O=L[1],R=m._length;E.length>R&&E.splice(R,E.length-R),O.length>R&&O.splice(R,O.length-R);var D=[],H=[],B=[],$=typeof M.size=="string",W=typeof z.size=="string",re=[],Q=[],Z=$?re:M,K=W?Q:z,le=0,fe=[],ue=[],V=m.histnorm,j=m.histfunc,ee=V.indexOf("density")!==-1,q=j==="max"||j==="min",X=q?null:0,J=h.count,ie=y[V],ne=!1,oe=[],se=[],me="z"in m?m.z:"marker"in m&&Array.isArray(m.marker.color)?m.marker.color:"";me&&j!=="count"&&(ne=j==="avg",J=h[j]);var ce=M.size,pe=p(M.start),xe=p(M.end)+(pe-o.tickIncrement(pe,ce,!1,g))/1e6;for(T=pe;T<xe;T=o.tickIncrement(T,ce,!1,g))H.push(X),re.push(T),ne&&B.push(0);re.push(T);var Se=H.length,Ae=(T-pe)/Se,Ce=c(pe+Ae/2),Ee=z.size,Oe=A(z.start),_e=A(z.end)+(Oe-o.tickIncrement(Oe,Ee,!1,_))/1e6;for(T=Oe;T<_e;T=o.tickIncrement(T,Ee,!1,_)){D.push(H.slice()),Q.push(T);var Re=new Array(Se);for(x=0;x<Se;x++)Re[x]=[];ue.push(Re),ne&&fe.push(B.slice())}Q.push(T);var Ve=D.length,Je=(T-Oe)/Ve,ze=S(Oe+Je/2);ee&&(oe=n(H.length,Z,Ae,$),se=n(D.length,K,Je,W)),!$&&d.type==="date"&&(Z=r(p,Z)),!W&&b.type==="date"&&(K=r(A,K));var De=!0,je=!0,dt=new Array(Se),Et=new Array(Ve),$t=1/0,wt=1/0,Ot=1/0,Vt=1/0;for(T=0;T<R;T++){var kt=E[T],St=O[T];w=s.findBin(kt,Z),v=s.findBin(St,K),w>=0&&w<Se&&v>=0&&v<Ve&&(le+=J(w,T,D[v],me,fe[v]),ue[v][w].push(T),De&&(dt[w]===void 0?dt[w]=kt:dt[w]!==kt&&(De=!1)),je&&(Et[v]===void 0?Et[v]=St:Et[v]!==St&&(je=!1)),$t=Math.min($t,kt-re[w]),wt=Math.min(wt,re[w+1]-kt),Ot=Math.min(Ot,St-Q[v]),Vt=Math.min(Vt,Q[v+1]-St))}if(ne)for(v=0;v<Ve;v++)le+=t(D[v],fe[v]);if(ie)for(v=0;v<Ve;v++)ie(D[v],le,oe,se[v]);return{x:E,xRanges:f(re,De&&dt,$t,wt,d,g),x0:Ce,dx:Ae,y:O,yRanges:f(Q,je&&Et,Ot,Vt,b,_),y0:ze,dy:Je,z:D,pts:ue}};function n(u,l,m,d){var b=new Array(u),g;if(d)for(g=0;g<u;g++)b[g]=1/(l[g+1]-l[g]);else{var _=1/m;for(g=0;g<u;g++)b[g]=_}return b}function r(u,l){return{start:u(l.start),end:u(l.end),size:l.size}}function f(u,l,m,d,b,g){var _,p=u.length-1,A=new Array(p),c=a(m,d,u,b,g);for(_=0;_<p;_++){var S=(l||[])[_];A[_]=S===void 0?[c(u[_]),c(u[_+1],!0)]:[S,S]}return A}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(e,I,F){var s=e("../../lib"),o=e("./sample_defaults"),h=e("../heatmap/style_defaults"),y=e("../../components/colorscale/defaults"),t=e("../heatmap/label_defaults"),a=e("./attributes");I.exports=function(n,r,f,u){function l(m,d){return s.coerce(n,r,a,m,d)}o(n,r,l,u),r.visible!==!1&&(h(n,r,l,u),y(n,r,u,l,{prefix:"",cLetter:"z"}),l("hovertemplate"),t(l,u),l("xhoverformat"),l("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(e,I,F){var s=e("../heatmap/hover"),o=e("../../plots/cartesian/axes").hoverLabelText;I.exports=function(y,t,a,i,n){var r=s(y,t,a,i,n);if(!!r){y=r[0];var f=y.index,u=f[0],l=f[1],m=y.cd[0],d=m.trace,b=m.xRanges[l],g=m.yRanges[u];return y.xLabel=o(y.xa,[b[0],b[1]],d.xhoverformat),y.yLabel=o(y.ya,[g[0],g[1]],d.yhoverformat),r}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(e,I,F){var s=e("../../registry"),o=e("../../lib");I.exports=function(y,t,a,i){var n=a("x"),r=a("y"),f=o.minRowLength(n),u=o.minRowLength(r);if(!f||!u){t.visible=!1;return}t._length=Math.min(f,u);var l=s.getComponentMethod("calendars","handleTraceDefaults");l(y,t,["x","y"],i);var m=a("z")||a("marker.color");m&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":503,"../../registry":638}],831:[function(e,I,F){var s=e("../histogram2d/attributes"),o=e("../contour/attributes"),h=e("../../components/colorscale/attributes"),y=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../lib/extend").extendFlat;I.exports=t({x:s.x,y:s.y,z:s.z,marker:s.marker,histnorm:s.histnorm,histfunc:s.histfunc,nbinsx:s.nbinsx,xbins:s.xbins,nbinsy:s.nbinsy,ybins:s.ybins,autobinx:s.autobinx,autobiny:s.autobiny,bingroup:s.bingroup,xbingroup:s.xbingroup,ybingroup:s.ybingroup,autocontour:o.autocontour,ncontours:o.ncontours,contours:o.contours,line:{color:o.line.color,width:t({},o.line.width,{dflt:.5}),dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:s.hovertemplate,texttemplate:o.texttemplate,textfont:o.textfont},h("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(e,I,F){var s=e("../../lib"),o=e("../histogram2d/sample_defaults"),h=e("../contour/contours_defaults"),y=e("../contour/style_defaults"),t=e("../heatmap/label_defaults"),a=e("./attributes");I.exports=function(n,r,f,u){function l(d,b){return s.coerce(n,r,a,d,b)}function m(d){return s.coerce2(n,r,a,d)}o(n,r,l,u),r.visible!==!1&&(h(n,r,l,m),y(n,r,l,u),l("xhoverformat"),l("yhoverformat"),l("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&t(l,u))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,h=e("../../components/colorscale/attributes"),y=e("../../plots/domain").attributes,t=e("../pie/attributes"),a=e("../sunburst/attributes"),i=e("../treemap/attributes"),n=e("../treemap/constants"),r=e("../../lib/extend").extendFlat;I.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:a.marker.colors,line:a.marker.line,editType:"calc"},h("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:i.pathbar,text:t.text,textinfo:a.textinfo,texttemplate:o({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:a.hoverinfo,hovertemplate:s({},{keys:n.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:t.sort,root:a.root,domain:y({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"../treemap/attributes":1075,"../treemap/constants":1078}],835:[function(e,I,F){var s=e("../../plots/plots");F.name="icicle",F.plot=function(o,h,y,t){s.plotBasePlot(F.name,o,h,y,t)},F.clean=function(o,h,y,t){s.cleanBasePlot(F.name,o,h,y,t)}},{"../../plots/plots":619}],836:[function(e,I,F){var s=e("../sunburst/calc");F.calc=function(o,h){return s.calc(o,h)},F.crossTraceCalc=function(o){return s._runCrossTraceCalc("icicle",o)}},{"../sunburst/calc":1051}],837:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("../../components/color"),y=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,a=e("../bar/constants").TEXTPAD,i=e("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;I.exports=function(u,l,m,d){function b(w,v){return s.coerce(u,l,o,w,v)}var g=b("labels"),_=b("parents");if(!g||!g.length||!_||!_.length){l.visible=!1;return}var p=b("values");p&&p.length?b("branchvalues"):b("count"),b("level"),b("maxdepth"),b("tiling.orientation"),b("tiling.flip"),b("tiling.pad");var A=b("text");b("texttemplate"),l.texttemplate||b("textinfo",Array.isArray(A)?"text+label":"label"),b("hovertext"),b("hovertemplate");var c=b("pathbar.visible"),S="auto";t(u,l,d,b,S,{hasPathbar:c,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("textposition");var T=b("marker.line.width");T&&b("marker.line.color",d.paper_bgcolor),b("marker.colors");var x=l._hasColorscale=n(u,"marker","colors")||(u.marker||{}).coloraxis;x&&r(u,l,d,b,{prefix:"marker.",cLetter:"c"}),b("leaf.opacity",x?1:.7),l._hovered={marker:{line:{width:2,color:h.contrast(d.paper_bgcolor)}}},c&&(b("pathbar.thickness",l.pathbar.textfont.size+2*a),b("pathbar.side"),b("pathbar.edgeshape")),b("sort"),b("root.color"),y(l,d,b),l._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../components/drawing"),y=e("../../lib/svg_text_utils"),t=e("./partition"),a=e("./style").styleOne,i=e("../treemap/constants"),n=e("../sunburst/helpers"),r=e("../sunburst/fx"),f=e("../sunburst/plot").formatSliceLabel,u=!1;I.exports=function(m,d,b,g,_){var p=_.width,A=_.height,c=_.viewX,S=_.viewY,T=_.pathSlice,x=_.toMoveInsideSlice,w=_.strTransform,v=_.hasTransition,C=_.handleSlicesExit,M=_.makeUpdateSliceInterpolator,E=_.makeUpdateTextInterpolator,L=_.prevEntry,z={},O=m._fullLayout,R=d[0],D=R.trace,H=D.textposition.indexOf("left")!==-1,B=D.textposition.indexOf("right")!==-1,$=D.textposition.indexOf("bottom")!==-1,W=t(b,[p,A],{flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,orientation:D.tiling.orientation,pad:{inner:D.tiling.pad},maxDepth:D._maxDepth}),re=W.descendants(),Q=1/0,Z=-1/0;re.forEach(function(V){var j=V.depth;j>=D._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(Q=Math.min(Q,j),Z=Math.max(Z,j))}),g=g.data(re,n.getPtId),D._maxVisibleLayers=isFinite(Z)?Z-Q+1:0,g.enter().append("g").classed("slice",!0),C(g,u,z,[p,A],T),g.order();var K=null;if(v&&L){var le=n.getPtId(L);g.each(function(V){K===null&&n.getPtId(V)===le&&(K={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var fe=function(){return K||{x0:0,x1:p,y0:0,y1:A}},ue=g;return v&&(ue=ue.transition().each("end",function(){var V=s.select(this);n.setSliceCursor(V,m,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ue.each(function(V){V._x0=c(V.x0),V._x1=c(V.x1),V._y0=S(V.y0),V._y1=S(V.y1),V._hoverX=c(V.x1-D.tiling.pad),V._hoverY=S($?V.y1-D.tiling.pad/2:V.y0+D.tiling.pad/2);var j=s.select(this),ee=o.ensureSingle(j,"path","surface",function(ie){ie.style("pointer-events","all")});v?ee.transition().attrTween("d",function(ie){var ne=M(ie,u,fe(),[p,A],{orientation:D.tiling.orientation,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1});return function(oe){return T(ne(oe))}}):ee.attr("d",T),j.call(r,b,m,d,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,m,{isTransitioning:m._transitioning}),ee.call(a,V,D,{hovered:!1}),V.x0===V.x1||V.y0===V.y1?V._text="":V._text=f(V,b,D,d,O)||"";var q=o.ensureSingle(j,"g","slicetext"),X=o.ensureSingle(q,"text","",function(ie){ie.attr("data-notex",1)}),J=o.ensureUniformFontSize(m,n.determineTextFont(D,V,O.font));X.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":H?"start":"middle").call(h.font,J).call(y.convertToTspans,m),V.textBB=h.bBox(X.node()),V.transform=x(V,{fontSize:J.size}),V.transform.fontSize=J.size,v?X.transition().attrTween("transform",function(ie){var ne=E(ie,u,fe(),[p,A]);return function(oe){return w(ne(oe))}}):X.attr("transform",w(V))}),K}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"../treemap/constants":1078,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(e,I,F){I.exports={moduleType:"trace",name:"icicle",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(e,I,F){I.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(y,t){function a(i,n){return s.coerce(y,t,o,i,n)}a("iciclecolorway",t.colorway),a("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(e,I,F){var s=e("d3-hierarchy"),o=e("../treemap/flip_tree");I.exports=function(y,t,a){var i=a.flipX,n=a.flipY,r=a.orientation==="h",f=a.maxDepth,u=t[0],l=t[1];f&&(u=(y.height+1)*t[0]/Math.min(y.height+1,f),l=(y.height+1)*t[1]/Math.min(y.height+1,f));var m=s.partition().padding(a.pad.inner).size(r?[t[1],u]:[t[0],l])(y);return(r||i||n)&&o(m,t,{swapXY:r,flipX:i,flipY:n}),m}},{"../treemap/flip_tree":1083,"d3-hierarchy":115}],843:[function(e,I,F){var s=e("../treemap/draw"),o=e("./draw_descendants");I.exports=function(y,t,a,i){return s(y,t,a,i,{type:"icicle",drawDescendants:o})}},{"../treemap/draw":1080,"./draw_descendants":838}],844:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/color"),h=e("../../lib"),y=e("../bar/uniform_text").resizeText;function t(i){var n=i._fullLayout._iciclelayer.selectAll(".trace");y(i,n,"icicle"),n.each(function(r){var f=s.select(this),u=r[0],l=u.trace;f.style("opacity",l.opacity),f.selectAll("path.surface").each(function(m){s.select(this).call(a,m,l)})})}function a(i,n,r){var f=n.data.data,u=!n.children,l=f.i,m=h.castOption(r,l,"marker.line.color")||o.defaultLine,d=h.castOption(r,l,"marker.line.width")||0;i.style("stroke-width",d).call(o.fill,f.color).call(o.stroke,m).style("opacity",u?r.leaf.opacity:null)}I.exports={style:t,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(e,I,F){for(var s=e("../../plots/attributes"),o=e("../../plots/template_attributes").hovertemplateAttrs,h=e("../../lib/extend").extendFlat,y=e("./constants").colormodel,t=["rgb","rgba","rgba256","hsl","hsla"],a=[],i=[],n=0;n<t.length;n++){var r=y[t[n]];a.push("For the `"+t[n]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),i.push("For the `"+t[n]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}I.exports=h({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:t,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:h({},s.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(e,I,F){var s=e("../../lib"),o=e("./constants"),h=e("fast-isnumeric"),y=e("../../plots/cartesian/axes"),t=e("../../lib").maxRowLength,a=e("./helpers").getImageSize;I.exports=function(u,l){var m,d;if(l._hasZ)m=l.z.length,d=t(l.z);else if(l._hasSource){var b=a(l.source);m=b.height,d=b.width}var g=y.getFromId(u,l.xaxis||"x"),_=y.getFromId(u,l.yaxis||"y"),p=g.d2c(l.x0)-l.dx/2,A=_.d2c(l.y0)-l.dy/2,c,S=[p,p+d*l.dx],T=[A,A+m*l.dy];if(g&&g.type==="log")for(c=0;c<d;c++)S.push(p+c*l.dx);if(_&&_.type==="log")for(c=0;c<m;c++)T.push(A+c*l.dy);l._extremes[g._id]=y.findExtremes(g,S),l._extremes[_._id]=y.findExtremes(_,T),l._scaler=r(l);var x={x0:p,y0:A,z:l.z,w:d,h:m};return[x]};function i(f,u,l,m){return function(d){return s.constrain((d-f)*u,l,m)}}function n(f,u){return function(l){return s.constrain(l,f,u)}}function r(f){var u=o.colormodel[f.colormodel],l=u.colormodel||f.colormodel,m=l.length;f._sArray=[];for(var d=0;d<m;d++)u.min[d]!==f.zmin[d]||u.max[d]!==f.zmax[d]?f._sArray.push(i(f.zmin[d],(u.max[d]-u.min[d])/(f.zmax[d]-f.zmin[d]),u.min[d],u.max[d])):f._sArray.push(n(u.min[d],u.max[d]));return function(b){for(var g=b.slice(0,m),_=0;_<m;_++){var p=g[_];if(!h(p))return!1;g[_]=f._sArray[_](p)}return g}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(e,I,F){I.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(s){return s.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(s){return s.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(s){return s.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(s){var o=s.slice(0,3);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(s){var o=s.slice(0,4);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("./constants"),y=e("../../snapshot/helpers").IMAGE_URL_PREFIX;I.exports=function(a,i){function n(u,l){return s.coerce(a,i,o,u,l)}n("source"),i.source&&!i.source.match(y)&&delete i.source,i._hasSource=!!i.source;var r=n("z");if(i._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!i._hasZ&&!i._hasSource){i.visible=!1;return}n("x0"),n("y0"),n("dx"),n("dy");var f;i._hasZ?(n("colormodel","rgb"),f=h.colormodel[i.colormodel],n("zmin",f.zminDflt||f.min),n("zmax",f.zmaxDflt||f.max)):i._hasSource&&(i.colormodel="rgba256",f=h.colormodel[i.colormodel],i.zmin=f.zminDflt,i.zmax=f.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),i._length=null}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(e,I,F){I.exports=function(o,h){return"xVal"in h&&(o.x=h.xVal),"yVal"in h&&(o.y=h.yVal),h.xa&&(o.xaxis=h.xa),h.ya&&(o.yaxis=h.ya),o.color=h.color,o.colormodel=h.trace.colormodel,o.z||(o.z=h.color),o}},{}],850:[function(e,I,F){var s=e("probe-image-size/sync"),o=e("../../snapshot/helpers").IMAGE_URL_PREFIX,h=e("buffer/").Buffer;F.getImageSize=function(y){var t=y.replace(o,""),a=new h(t,"base64");return s(a)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(e,I,F){var s=e("../../components/fx"),o=e("../../lib"),h=e("./constants");I.exports=function(t,a,i){var n=t.cd[0],r=n.trace,f=t.xa,u=t.ya;if(!(s.inbox(a-n.x0,a-(n.x0+n.w*r.dx),0)>0||s.inbox(i-n.y0,i-(n.y0+n.h*r.dy),0)>0)){var l=Math.floor((a-n.x0)/r.dx),m=Math.floor(Math.abs(i-n.y0)/r.dy),d;if(r._hasZ?d=n.z[m][l]:r._hasSource&&(d=r._canvas.el.getContext("2d").getImageData(l,m,1,1).data),!!d){var b=n.hi||r.hoverinfo,g;if(b){var _=b.split("+");_.indexOf("all")!==-1&&(_=["color"]),_.indexOf("color")!==-1&&(g=!0)}var p=h.colormodel[r.colormodel],A=p.colormodel||r.colormodel,c=A.length,S=r._scaler(d),T=p.suffix,x=[];(r.hovertemplate||g)&&(x.push("["+[S[0]+T[0],S[1]+T[1],S[2]+T[2]].join(", ")),c===4&&x.push(", "+S[3]+T[3]),x.push("]"),x=x.join(""),t.extraText=A.toUpperCase()+": "+x);var w;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[m])?w=r.hovertext[m][l]:Array.isArray(r.text)&&Array.isArray(r.text[m])&&(w=r.text[m][l]);var v=u.c2p(n.y0+(m+.5)*r.dy),C=n.x0+(l+.5)*r.dx,M=n.y0+(m+.5)*r.dy,E="["+d.slice(0,r.colormodel.length).join(", ")+"]";return[o.extendFlat(t,{index:[m,l],x0:f.c2p(n.x0+l*r.dx),x1:f.c2p(n.x0+(l+1)*r.dx),y0:v,y1:v,color:S,xVal:C,xLabelVal:C,yVal:M,yLabelVal:M,zLabelVal:E,text:w,hovertemplateLabels:{zLabel:E,colorLabel:x,"color[0]Label":S[0]+T[0],"color[1]Label":S[1]+T[1],"color[2]Label":S[2]+T[2],"color[3]Label":S[3]+T[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=o.strTranslate,y=e("../../constants/xmlns_namespaces"),t=e("./constants"),a=o.isIOS()||o.isSafari()||o.isIE();I.exports=function(n,r,f,u){var l=r.xaxis,m=r.yaxis,d=!(a||n._context._exportedPlot);o.makeTraceGroups(u,f,"im").each(function(b){var g=s.select(this),_=b[0],p=_.trace,A=(p.zsmooth==="fast"||p.zsmooth===!1&&d)&&!p._hasZ&&p._hasSource&&l.type==="linear"&&m.type==="linear";p._realImage=A;var c=_.z,S=_.x0,T=_.y0,x=_.w,w=_.h,v=p.dx,C=p.dy,M,E,L,z,O,R;for(R=0;M===void 0&&R<x;)M=l.c2p(S+R*v),R++;for(R=x;E===void 0&&R>0;)E=l.c2p(S+R*v),R--;for(R=0;z===void 0&&R<w;)z=m.c2p(T+R*C),R++;for(R=w;O===void 0&&R>0;)O=m.c2p(T+R*C),R--;if(E<M&&(L=E,E=M,M=L),O<z&&(L=z,z=O,O=L),!A){var D=.5;M=Math.max(-D*l._length,M),E=Math.min((1+D)*l._length,E),z=Math.max(-D*m._length,z),O=Math.min((1+D)*m._length,O)}var H=Math.round(E-M),B=Math.round(O-z),$=H<=0||B<=0;if($){var W=g.selectAll("image").data([]);W.exit().remove();return}function re(q){var X=document.createElement("canvas");X.width=H,X.height=B;var J=X.getContext("2d"),ie=function(Ee){return o.constrain(Math.round(l.c2p(S+Ee*v)-M),0,H)},ne=function(Ee){return o.constrain(Math.round(m.c2p(T+Ee*C)-z),0,B)},oe=t.colormodel[p.colormodel],se=oe.colormodel||p.colormodel,me=oe.fmt,ce;for(R=0;R<_.w;R++){var pe=ie(R),xe=ie(R+1);if(!(xe===pe||isNaN(xe)||isNaN(pe)))for(var Se=0;Se<_.h;Se++){var Ae=ne(Se),Ce=ne(Se+1);Ce===Ae||isNaN(Ce)||isNaN(Ae)||!q(R,Se)||(ce=p._scaler(q(R,Se)),ce?J.fillStyle=se+"("+me(ce).join(",")+")":J.fillStyle="rgba(0,0,0,0)",J.fillRect(pe,Ae,xe-pe,Ce-Ae))}}return X}var Q=g.selectAll("image").data([b]);Q.enter().append("svg:image").attr({xmlns:y.svg,preserveAspectRatio:"none"}),Q.exit().remove();var Z=p.zsmooth===!1?t.pixelatedStyle:"";if(A){var K=o.simpleMap(l.range,l.r2l),le=o.simpleMap(m.range,m.r2l),fe=K[1]<K[0],ue=le[1]>le[0];if(fe||ue){var V=M+H/2,j=z+B/2;Z+="transform:"+h(V+"px",j+"px")+"scale("+(fe?-1:1)+","+(ue?-1:1)+")"+h(-V+"px",-j+"px")+";"}}Q.attr("style",Z);var ee=new Promise(function(q){if(p._hasZ)q();else if(p._hasSource)if(p._canvas&&p._canvas.el.width===x&&p._canvas.el.height===w&&p._canvas.source===p.source)q();else{var X=document.createElement("canvas");X.width=x,X.height=w;var J=X.getContext("2d");p._image=p._image||new Image;var ie=p._image;ie.onload=function(){J.drawImage(ie,0,0),p._canvas={el:X,source:p.source},q()},ie.setAttribute("src",p.source)}}).then(function(){var q,X;if(p._hasZ)X=re(function(ne,oe){return c[oe][ne]}),q=X.toDataURL("image/png");else if(p._hasSource)if(A)q=p.source;else{var J=p._canvas.el.getContext("2d"),ie=J.getImageData(0,0,x,w).data;X=re(function(ne,oe){var se=4*(oe*x+ne);return[ie[se],ie[se+1],ie[se+2],ie[se+3]]}),q=X.toDataURL("image/png")}Q.attr({"xlink:href":q,height:B,width:H,x:M,y:z})});n._promises.push(ee)})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(e,I,F){var s=e("@plotly/d3");I.exports=function(h){s.select(h).selectAll(".im image").style("opacity",function(y){return y[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(e,I,F){var s=e("../../lib/extend").extendFlat,o=e("../../lib/extend").extendDeep,h=e("../../plot_api/edit_types").overrideAll,y=e("../../plots/font_attributes"),t=e("../../components/color/attributes"),a=e("../../plots/domain").attributes,i=e("../../plots/cartesian/layout_attributes"),n=e("../../plot_api/plot_template").templatedArray,r=e("../../constants/delta.js"),f=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,u=y({editType:"plot",colorEditType:"plot"}),l={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:t.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},m={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},d=n("step",o({},l,{range:m}));I.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:s({},u,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:s({},u,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:s({},u,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:o({},l,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:h({range:m,visible:s({},i.visible,{dflt:!0}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:s({},i.ticks,{dflt:"outside"}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,tickfont:y({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,editType:"plot"},"plot"),steps:d,threshold:{line:{color:s({},l.line.color,{}),width:s({},l.line.width,{dflt:1}),editType:"plot"},thickness:s({},l.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(e,I,F){var s=e("../../plots/plots");F.name="indicator",F.plot=function(o,h,y,t){s.plotBasePlot(F.name,o,h,y,t)},F.clean=function(o,h,y,t){s.cleanBasePlot(F.name,o,h,y,t)}},{"../../plots/plots":619}],857:[function(e,I,F){function s(o,h){var y=[],t=h.value;typeof h._lastValue!="number"&&(h._lastValue=h.value);var a=h._lastValue,i=a;return h._hasDelta&&typeof h.delta.reference=="number"&&(i=h.delta.reference),y[0]={y:t,lastY:a,delta:t-i,relativeDelta:(t-i)/i},y}I.exports={calc:s}},{}],858:[function(e,I,F){I.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("../../plots/domain").defaults,y=e("../../plot_api/plot_template"),t=e("../../plots/array_container_defaults"),a=e("./constants.js"),i=e("../../plots/cartesian/tick_value_defaults"),n=e("../../plots/cartesian/tick_mark_defaults"),r=e("../../plots/cartesian/tick_label_defaults"),f=e("../../plots/cartesian/prefix_suffix_defaults");function u(m,d,b,g){function _(R,D){return s.coerce(m,d,o,R,D)}h(d,g,_),_("mode"),d._hasNumber=d.mode.indexOf("number")!==-1,d._hasDelta=d.mode.indexOf("delta")!==-1,d._hasGauge=d.mode.indexOf("gauge")!==-1;var p=_("value");d._range=[0,typeof p=="number"?1.5*p:1];var A=new Array(2),c;d._hasNumber&&(_("number.valueformat"),_("number.font.color",g.font.color),_("number.font.family",g.font.family),_("number.font.size"),d.number.font.size===void 0&&(d.number.font.size=a.defaultNumberFontSize,A[0]=!0),_("number.prefix"),_("number.suffix"),c=d.number.font.size);var S;d._hasDelta&&(_("delta.font.color",g.font.color),_("delta.font.family",g.font.family),_("delta.font.size"),d.delta.font.size===void 0&&(d.delta.font.size=(d._hasNumber?.5:1)*(c||a.defaultNumberFontSize),A[1]=!0),_("delta.reference",d.value),_("delta.relative"),_("delta.valueformat",d.delta.relative?"2%":""),_("delta.increasing.symbol"),_("delta.increasing.color"),_("delta.decreasing.symbol"),_("delta.decreasing.color"),_("delta.position"),S=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||A[0])&&(!d._hasDelta||A[1])||!1,_("title.font.color",g.font.color),_("title.font.family",g.font.family),_("title.font.size",.25*(c||S||a.defaultNumberFontSize)),_("title.text");var T,x,w,v;function C(R,D){return s.coerce(T,x,o.gauge,R,D)}function M(R,D){return s.coerce(w,v,o.gauge.axis,R,D)}if(d._hasGauge){T=m.gauge,T||(T={}),x=y.newContainer(d,"gauge"),C("shape");var E=d._isBullet=d.gauge.shape==="bullet";E||_("title.align","center");var L=d._isAngular=d.gauge.shape==="angular";L||_("align","center"),C("bgcolor",g.paper_bgcolor),C("borderwidth"),C("bordercolor"),C("bar.color"),C("bar.line.color"),C("bar.line.width");var z=a.valueThickness*(d.gauge.shape==="bullet"?.5:1);C("bar.thickness",z),t(T,x,{name:"steps",handleItemDefaults:l}),C("threshold.value"),C("threshold.thickness"),C("threshold.line.width"),C("threshold.line.color"),w={},T&&(w=T.axis||{}),v=y.newContainer(x,"axis"),M("visible"),d._range=M("range",d._range);var O={outerTicks:!0};i(w,v,M,"linear"),f(w,v,M,"linear",O),r(w,v,M,"linear",O),n(w,v,M,O)}else _("title.align","center"),_("align","center"),d._isAngular=d._isBullet=!1;d._length=null}function l(m,d){function b(g,_){return s.coerce(m,d,o.gauge.steps,g,_)}b("color"),b("line.color"),b("line.width"),b("range"),b("thickness")}I.exports={supplyDefaults:u}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(e,I,F){I.exports={moduleType:"trace",name:"indicator",basePlotModule:e("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc").calc,plot:e("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(e,I,F){var s=e("@plotly/d3"),o=e("d3-interpolate").interpolate,h=e("d3-interpolate").interpolateNumber,y=e("../../lib"),t=y.strScale,a=y.strTranslate,i=y.rad2deg,n=e("../../constants/alignment").MID_SHIFT,r=e("../../components/drawing"),f=e("./constants"),u=e("../../lib/svg_text_utils"),l=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/axis_defaults"),d=e("../../plots/cartesian/position_defaults"),b=e("../../plots/cartesian/layout_attributes"),g=e("../../components/color"),_={left:"start",center:"middle",right:"end"},p={left:0,center:.5,right:1},A=/[yzafpnµmkMGTPEZY]/;function c(O){return O&&O.duration>0}I.exports=function(R,D,H,B){var $=R._fullLayout,W;c(H)&&B&&(W=B()),y.makeTraceGroups($._indicatorlayer,D,"trace").each(function(re){var Q=re[0],Z=Q.trace,K=s.select(this),le=Z._hasGauge,fe=Z._isAngular,ue=Z._isBullet,V=Z.domain,j={w:$._size.w*(V.x[1]-V.x[0]),h:$._size.h*(V.y[1]-V.y[0]),l:$._size.l+$._size.w*V.x[0],r:$._size.r+$._size.w*(1-V.x[1]),t:$._size.t+$._size.h*(1-V.y[1]),b:$._size.b+$._size.h*V.y[0]},ee=j.l+j.w/2,q=j.t+j.h/2,X=Math.min(j.w/2,j.h),J=f.innerRadius*X,ie,ne,oe,se=Z.align||"center";if(ne=q,!le)ie=j.l+p[se]*j.w,oe=function(_e){return M(_e,j.w,j.h)};else if(fe&&(ie=ee,ne=q+X/2,oe=function(_e){return E(_e,.9*J)}),ue){var me=f.bulletPadding,ce=1-f.bulletNumberDomainSize+me;ie=j.l+(ce+(1-ce)*p[se])*j.w,oe=function(_e){return M(_e,(f.bulletNumberDomainSize-me)*j.w,j.h)}}x(R,K,re,{numbersX:ie,numbersY:ne,numbersScaler:oe,transitionOpts:H,onComplete:W});var pe,xe;le&&(pe={range:Z.gauge.axis.range,color:Z.gauge.bgcolor,line:{color:Z.gauge.bordercolor,width:0},thickness:1},xe={range:Z.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:Z.gauge.bordercolor,width:Z.gauge.borderwidth},thickness:1});var Se=K.selectAll("g.angular").data(fe?re:[]);Se.exit().remove();var Ae=K.selectAll("g.angularaxis").data(fe?re:[]);Ae.exit().remove(),fe&&T(R,K,re,{radius:X,innerRadius:J,gauge:Se,layer:Ae,size:j,gaugeBg:pe,gaugeOutline:xe,transitionOpts:H,onComplete:W});var Ce=K.selectAll("g.bullet").data(ue?re:[]);Ce.exit().remove();var Ee=K.selectAll("g.bulletaxis").data(ue?re:[]);Ee.exit().remove(),ue&&S(R,K,re,{gauge:Ce,layer:Ee,size:j,gaugeBg:pe,gaugeOutline:xe,transitionOpts:H,onComplete:W});var Oe=K.selectAll("text.title").data(re);Oe.exit().remove(),Oe.enter().append("text").classed("title",!0),Oe.attr("text-anchor",function(){return ue?_.right:_[Z.title.align]}).text(Z.title.text).call(r.font,Z.title.font).call(u.convertToTspans,R),Oe.attr("transform",function(){var _e=j.l+j.w*p[Z.title.align],Re,Ve=f.titlePadding,Je=r.bBox(Oe.node());if(le){if(fe)if(Z.gauge.axis.visible){var ze=r.bBox(Ae.node());Re=ze.top-Ve-Je.bottom}else Re=j.t+j.h/2-X/2-Je.bottom-Ve;ue&&(Re=ne-(Je.top+Je.bottom)/2,_e=j.l-f.bulletPadding*j.w)}else Re=Z._numbersTop-Ve-Je.bottom;return a(_e,Re)})})};function S(O,R,D,H){var B=D[0].trace,$=H.gauge,W=H.layer,re=H.gaugeBg,Q=H.gaugeOutline,Z=H.size,K=B.domain,le=H.transitionOpts,fe=H.onComplete,ue,V,j,ee,q;$.enter().append("g").classed("bullet",!0),$.attr("transform",a(Z.l,Z.t)),W.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),W.selectAll("g.xbulletaxistick,path,text").remove();var X=Z.h,J=B.gauge.bar.thickness*X,ie=K.x[0],ne=K.x[0]+(K.x[1]-K.x[0])*(B._hasNumber||B._hasDelta?1-f.bulletNumberDomainSize:1);ue=C(O,B.gauge.axis),ue._id="xbulletaxis",ue.domain=[ie,ne],ue.setScale(),V=l.calcTicks(ue),j=l.makeTransTickFn(ue),ee=l.getTickSigns(ue)[2],q=Z.t+Z.h,ue.visible&&(l.drawTicks(O,ue,{vals:ue.ticks==="inside"?l.clipEnds(ue,V):V,layer:W,path:l.makeTickPath(ue,q,ee),transFn:j}),l.drawLabels(O,ue,{vals:V,layer:W,transFn:j,labelFns:l.makeLabelFns(ue,q)}));function oe(Ae){Ae.attr("width",function(Ce){return Math.max(0,ue.c2p(Ce.range[1])-ue.c2p(Ce.range[0]))}).attr("x",function(Ce){return ue.c2p(Ce.range[0])}).attr("y",function(Ce){return .5*(1-Ce.thickness)*X}).attr("height",function(Ce){return Ce.thickness*X})}var se=[re].concat(B.gauge.steps),me=$.selectAll("g.bg-bullet").data(se);me.enter().append("g").classed("bg-bullet",!0).append("rect"),me.select("rect").call(oe).call(w),me.exit().remove();var ce=$.selectAll("g.value-bullet").data([B.gauge.bar]);ce.enter().append("g").classed("value-bullet",!0).append("rect"),ce.select("rect").attr("height",J).attr("y",(X-J)/2).call(w),c(le)?ce.select("rect").transition().duration(le.duration).ease(le.easing).each("end",function(){fe&&fe()}).each("interrupt",function(){fe&&fe()}).attr("width",Math.max(0,ue.c2p(Math.min(B.gauge.axis.range[1],D[0].y)))):ce.select("rect").attr("width",typeof D[0].y=="number"?Math.max(0,ue.c2p(Math.min(B.gauge.axis.range[1],D[0].y))):0),ce.exit().remove();var pe=D.filter(function(){return B.gauge.threshold.value||B.gauge.threshold.value===0}),xe=$.selectAll("g.threshold-bullet").data(pe);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",ue.c2p(B.gauge.threshold.value)).attr("x2",ue.c2p(B.gauge.threshold.value)).attr("y1",(1-B.gauge.threshold.thickness)/2*X).attr("y2",(1-(1-B.gauge.threshold.thickness)/2)*X).call(g.stroke,B.gauge.threshold.line.color).style("stroke-width",B.gauge.threshold.line.width),xe.exit().remove();var Se=$.selectAll("g.gauge-outline").data([Q]);Se.enter().append("g").classed("gauge-outline",!0).append("rect"),Se.select("rect").call(oe).call(w),Se.exit().remove()}function T(O,R,D,H){var B=D[0].trace,$=H.size,W=H.radius,re=H.innerRadius,Q=H.gaugeBg,Z=H.gaugeOutline,K=[$.l+$.w/2,$.t+$.h/2+W/2],le=H.gauge,fe=H.layer,ue=H.transitionOpts,V=H.onComplete,j=Math.PI/2;function ee(De){var je=B.gauge.axis.range[0],dt=B.gauge.axis.range[1],Et=(De-je)/(dt-je)*Math.PI-j;return Et<-j?-j:Et>j?j:Et}function q(De){return s.svg.arc().innerRadius((re+W)/2-De/2*(W-re)).outerRadius((re+W)/2+De/2*(W-re)).startAngle(-j)}function X(De){De.attr("d",function(je){return q(je.thickness).startAngle(ee(je.range[0])).endAngle(ee(je.range[1]))()})}var J,ie,ne,oe;le.enter().append("g").classed("angular",!0),le.attr("transform",a(K[0],K[1])),fe.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),fe.selectAll("g.xangularaxistick,path,text").remove(),J=C(O,B.gauge.axis),J.type="linear",J.range=B.gauge.axis.range,J._id="xangularaxis",J.ticklabeloverflow="allow",J.setScale();var se=function(De){return(J.range[0]-De.x)/(J.range[1]-J.range[0])*Math.PI+Math.PI},me={},ce=l.makeLabelFns(J,0),pe=ce.labelStandoff;me.xFn=function(De){var je=se(De);return Math.cos(je)*pe},me.yFn=function(De){var je=se(De),dt=Math.sin(je)>0?.2:1;return-Math.sin(je)*(pe+De.fontSize*dt)+Math.abs(Math.cos(je))*(De.fontSize*n)},me.anchorFn=function(De){var je=se(De),dt=Math.cos(je);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},me.heightFn=function(De,je,dt){var Et=se(De);return-.5*(1+Math.sin(Et))*dt};var xe=function(De){return a(K[0]+W*Math.cos(De),K[1]-W*Math.sin(De))};ne=function(De){return xe(se(De))};var Se=function(De){var je=se(De);return xe(je)+"rotate("+-i(je)+")"};if(ie=l.calcTicks(J),oe=l.getTickSigns(J)[2],J.visible){oe=J.ticks==="inside"?-1:1;var Ae=(J.linewidth||1)/2;l.drawTicks(O,J,{vals:ie,layer:fe,path:"M"+oe*Ae+",0h"+oe*J.ticklen,transFn:Se}),l.drawLabels(O,J,{vals:ie,layer:fe,transFn:ne,labelFns:me})}var Ce=[Q].concat(B.gauge.steps),Ee=le.selectAll("g.bg-arc").data(Ce);Ee.enter().append("g").classed("bg-arc",!0).append("path"),Ee.select("path").call(X).call(w),Ee.exit().remove();var Oe=q(B.gauge.bar.thickness),_e=le.selectAll("g.value-arc").data([B.gauge.bar]);_e.enter().append("g").classed("value-arc",!0).append("path");var Re=_e.select("path");c(ue)?(Re.transition().duration(ue.duration).ease(ue.easing).each("end",function(){V&&V()}).each("interrupt",function(){V&&V()}).attrTween("d",v(Oe,ee(D[0].lastY),ee(D[0].y))),B._lastValue=D[0].y):Re.attr("d",typeof D[0].y=="number"?Oe.endAngle(ee(D[0].y)):"M0,0Z"),Re.call(w),_e.exit().remove(),Ce=[];var Ve=B.gauge.threshold.value;(Ve||Ve===0)&&Ce.push({range:[Ve,Ve],color:B.gauge.threshold.color,line:{color:B.gauge.threshold.line.color,width:B.gauge.threshold.line.width},thickness:B.gauge.threshold.thickness});var Je=le.selectAll("g.threshold-arc").data(Ce);Je.enter().append("g").classed("threshold-arc",!0).append("path"),Je.select("path").call(X).call(w),Je.exit().remove();var ze=le.selectAll("g.gauge-outline").data([Z]);ze.enter().append("g").classed("gauge-outline",!0).append("path"),ze.select("path").call(X).call(w),ze.exit().remove()}function x(O,R,D,H){var B=D[0].trace,$=H.numbersX,W=H.numbersY,re=B.align||"center",Q=_[re],Z=H.transitionOpts,K=H.onComplete,le=y.ensureSingle(R,"g","numbers"),fe,ue,V,j=[];B._hasNumber&&j.push("number"),B._hasDelta&&(j.push("delta"),B.delta.position==="left"&&j.reverse());var ee=le.selectAll("text").data(j);ee.enter().append("text"),ee.attr("text-anchor",function(){return Q}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ee.exit().remove();function q(xe,Se,Ae,Ce){if(xe.match("s")&&Ae>=0!=Ce>=0&&!Se(Ae).slice(-1).match(A)&&!Se(Ce).slice(-1).match(A)){var Ee=xe.slice().replace("s","f").replace(/\d+/,function(_e){return parseInt(_e)-1}),Oe=C(O,{tickformat:Ee});return function(_e){return Math.abs(_e)<1?l.tickText(Oe,_e).text:Se(_e)}}else return Se}function X(){var xe=C(O,{tickformat:B.number.valueformat},B._range);xe.setScale(),l.prepTicks(xe);var Se=function(_e){return l.tickText(xe,_e).text},Ae=B.number.suffix,Ce=B.number.prefix,Ee=le.select("text.number");function Oe(){var _e=typeof D[0].y=="number"?Ce+Se(D[0].y)+Ae:"-";Ee.text(_e).call(r.font,B.number.font).call(u.convertToTspans,O)}return c(Z)?Ee.transition().duration(Z.duration).ease(Z.easing).each("end",function(){Oe(),K&&K()}).each("interrupt",function(){Oe(),K&&K()}).attrTween("text",function(){var _e=s.select(this),Re=h(D[0].lastY,D[0].y);B._lastValue=D[0].y;var Ve=q(B.number.valueformat,Se,D[0].lastY,D[0].y);return function(Je){_e.text(Ce+Ve(Re(Je))+Ae)}}):Oe(),fe=L(Ce+Se(D[0].y)+Ae,B.number.font,Q,O),Ee}function J(){var xe=C(O,{tickformat:B.delta.valueformat},B._range);xe.setScale(),l.prepTicks(xe);var Se=function(Re){return l.tickText(xe,Re).text},Ae=function(Re){var Ve=B.delta.relative?Re.relativeDelta:Re.delta;return Ve},Ce=function(Re,Ve){return Re===0||typeof Re!="number"||isNaN(Re)?"-":(Re>0?B.delta.increasing.symbol:B.delta.decreasing.symbol)+Ve(Re)},Ee=function(Re){return Re.delta>=0?B.delta.increasing.color:B.delta.decreasing.color};B._deltaLastValue===void 0&&(B._deltaLastValue=Ae(D[0]));var Oe=le.select("text.delta");Oe.call(r.font,B.delta.font).call(g.fill,Ee({delta:B._deltaLastValue}));function _e(){Oe.text(Ce(Ae(D[0]),Se)).call(g.fill,Ee(D[0])).call(u.convertToTspans,O)}return c(Z)?Oe.transition().duration(Z.duration).ease(Z.easing).tween("text",function(){var Re=s.select(this),Ve=Ae(D[0]),Je=B._deltaLastValue,ze=q(B.delta.valueformat,Se,Je,Ve),De=h(Je,Ve);return B._deltaLastValue=Ve,function(je){Re.text(Ce(De(je),ze)),Re.call(g.fill,Ee({delta:De(je)}))}}).each("end",function(){_e(),K&&K()}).each("interrupt",function(){_e(),K&&K()}):_e(),ue=L(Ce(Ae(D[0]),Se),B.delta.font,Q,O),Oe}var ie=B.mode+B.align,ne;if(B._hasDelta&&(ne=J(),ie+=B.delta.position+B.delta.font.size+B.delta.font.family+B.delta.valueformat,ie+=B.delta.increasing.symbol+B.delta.decreasing.symbol,V=ue),B._hasNumber&&(X(),ie+=B.number.font.size+B.number.font.family+B.number.valueformat+B.number.suffix+B.number.prefix,V=fe),B._hasDelta&&B._hasNumber){var oe=[(fe.left+fe.right)/2,(fe.top+fe.bottom)/2],se=[(ue.left+ue.right)/2,(ue.top+ue.bottom)/2],me,ce,pe=.75*B.delta.font.size;B.delta.position==="left"&&(me=z(B,"deltaPos",0,-1*(fe.width*p[B.align]+ue.width*(1-p[B.align])+pe),ie,Math.min),ce=oe[1]-se[1],V={width:fe.width+ue.width+pe,height:Math.max(fe.height,ue.height),left:ue.left+me,right:fe.right,top:Math.min(fe.top,ue.top+ce),bottom:Math.max(fe.bottom,ue.bottom+ce)}),B.delta.position==="right"&&(me=z(B,"deltaPos",0,fe.width*(1-p[B.align])+ue.width*p[B.align]+pe,ie,Math.max),ce=oe[1]-se[1],V={width:fe.width+ue.width+pe,height:Math.max(fe.height,ue.height),left:fe.left,right:ue.right+me,top:Math.min(fe.top,ue.top+ce),bottom:Math.max(fe.bottom,ue.bottom+ce)}),B.delta.position==="bottom"&&(me=null,ce=ue.height,V={width:Math.max(fe.width,ue.width),height:fe.height+ue.height,left:Math.min(fe.left,ue.left),right:Math.max(fe.right,ue.right),top:fe.bottom-fe.height,bottom:fe.bottom+ue.height}),B.delta.position==="top"&&(me=null,ce=fe.top,V={width:Math.max(fe.width,ue.width),height:fe.height+ue.height,left:Math.min(fe.left,ue.left),right:Math.max(fe.right,ue.right),top:fe.bottom-fe.height-ue.height,bottom:fe.bottom}),ne.attr({dx:me,dy:ce})}(B._hasNumber||B._hasDelta)&&le.attr("transform",function(){var xe=H.numbersScaler(V);ie+=xe[2];var Se=z(B,"numbersScale",1,xe[0],ie,Math.min),Ae;B._scaleNumbers||(Se=1),B._isAngular?Ae=W-Se*V.bottom:Ae=W-Se*(V.top+V.bottom)/2,B._numbersTop=Se*V.top+Ae;var Ce=V[re];re==="center"&&(Ce=(V.left+V.right)/2);var Ee=$-Se*Ce;return Ee=z(B,"numbersTranslate",0,Ee,ie,Math.max),a(Ee,Ae)+t(Se)})}function w(O){O.each(function(R){g.stroke(s.select(this),R.line.color)}).each(function(R){g.fill(s.select(this),R.color)}).style("stroke-width",function(R){return R.line.width})}function v(O,R,D){return function(){var H=o(R,D);return function(B){return O.endAngle(H(B))()}}}function C(O,R,D){var H=O._fullLayout,B=y.extendFlat({type:"linear",ticks:"outside",range:D,showline:!0},R),$={type:"linear",_id:"x"+R._id},W={letter:"x",font:H.font,noHover:!0,noTickson:!0};function re(Q,Z){return y.coerce(B,$,b,Q,Z)}return m(B,$,re,W,H),d(B,$,re,W),$}function M(O,R,D){var H=Math.min(R/O.width,D/O.height);return[H,O,R+"x"+D]}function E(O,R){var D=Math.sqrt(O.width/2*(O.width/2)+O.height*O.height),H=R/D;return[H,O,R]}function L(O,R,D,H){var B=document.createElementNS("http://www.w3.org/2000/svg","text"),$=s.select(B);return $.text(O).attr("x",0).attr("y",0).attr("text-anchor",D).attr("data-unformatted",O).call(u.convertToTspans,H).call(r.font,R),r.bBox($.node())}function z(O,R,D,H,B,$){var W="_cache"+R;O[W]&&O[W].key===B||(O[W]={key:B,value:D});var re=y.aggNums($,null,[O[W].value,H],2);return O[W].value=re,re}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(e,I,F){var s=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../mesh3d/attributes"),t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll;function n(u){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(u){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var f=I.exports=i(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n(),y:n(),z:n()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:h(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),valuehoverformat:o("value",1),showlegend:a({},t.showlegend,{dflt:!1})},s("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,lightposition:y.lightposition,lighting:y.lighting,flatshading:y.flatshading,contour:y.contour,hoverinfo:a({},t.hoverinfo)}),"calc","nested");f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(e,I,F){var s=e("../../components/colorscale/calc"),o=e("../streamtube/calc").processGrid,h=e("../streamtube/calc").filter;I.exports=function(t,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=h(a.x,a._len),a._y=h(a.y,a._len),a._z=h(a.z,a._len),a._value=h(a.value,a._len);var i=o(a);a._gridFill=i.fill,a._Xs=i.Xs,a._Ys=i.Ys,a._Zs=i.Zs,a._len=i.len;for(var n=1/0,r=-1/0,f=0;f<a._len;f++){var u=a._value[f];n=Math.min(n,u),r=Math.max(r,u)}a._minValues=n,a._maxValues=r,a._vMin=a.isomin===void 0||a.isomin===null?n:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?r:a.isomax,s(t,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1045}],864:[function(e,I,F){var s=e("../../../stackgl_modules").gl_mesh3d,o=e("../../lib/gl_format_color").parseColorScale,h=e("../../lib/str2rgbarray"),y=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),a=function(l,m){for(var d=m.length-1;d>0;d--){var b=Math.min(m[d],m[d-1]),g=Math.max(m[d],m[d-1]);if(g>b&&b<l&&l<=g)return{id:d,distRatio:(g-l)/(g-b)}}return{id:0,distRatio:0}};function i(l,m,d){this.scene=l,this.uid=d,this.mesh=m,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(l){if(l.object===this.mesh){var m=l.data.index,d=this.data._meshX[m],b=this.data._meshY[m],g=this.data._meshZ[m],_=this.data._Ys.length,p=this.data._Zs.length,A=a(d,this.data._Xs).id,c=a(b,this.data._Ys).id,S=a(g,this.data._Zs).id,T=l.index=S+p*c+p*_*A;l.traceCoordinate=[this.data._meshX[T],this.data._meshY[T],this.data._meshZ[T],this.data._value[T]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[T]!==void 0?l.textLabel=x[T]:x&&(l.textLabel=x),!0}},n.update=function(l){var m=this.scene,d=m.fullSceneLayout;this.data=f(l);function b(c,S,T,x){return S.map(function(w){return c.d2l(w,0,x)*T})}var g=t(b(d.xaxis,l._meshX,m.dataScale[0],l.xcalendar),b(d.yaxis,l._meshY,m.dataScale[1],l.ycalendar),b(d.zaxis,l._meshZ,m.dataScale[2],l.zcalendar)),_=t(l._meshI,l._meshJ,l._meshK),p={positions:g,cells:_,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,contourEnable:l.contour.show,contourColor:h(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading},A=y(l);p.vertexIntensity=l._meshIntensity,p.vertexIntensityBounds=[A.min,A.max],p.colormap=o(l),this.mesh.update(p)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(l){l._meshI=[],l._meshJ=[],l._meshK=[];var m=l.surface.show,d=l.spaceframe.show,b=l.surface.fill,g=l.spaceframe.fill,_=!1,p=!1,A=0,c,S,T=l._Xs,x=l._Ys,w=l._Zs,v=T.length,C=x.length,M=w.length,E=r.indexOf(l._gridFill.replace(/-/g,"").replace(/\+/g,"")),L=function(kt,St,ot){switch(E){case 5:return ot+M*St+M*C*kt;case 4:return ot+M*kt+M*v*St;case 3:return St+C*ot+C*M*kt;case 2:return St+C*kt+C*v*ot;case 1:return kt+v*ot+v*M*St;default:return kt+v*St+v*C*ot}},z=l._minValues,O=l._maxValues,R=l._vMin,D=l._vMax,H,B,$,W;function re(kt,St,ot){for(var ht=W.length,Ke=S;Ke<ht;Ke++)if(kt===H[Ke]&&St===B[Ke]&&ot===$[Ke])return Ke;return-1}function Q(){S=c}function Z(){H=[],B=[],$=[],W=[],c=0,Q()}function K(kt,St,ot,ht){return H.push(kt),B.push(St),$.push(ot),W.push(ht),c++,c-1}function le(kt,St,ot){return l._meshI.push(kt),l._meshJ.push(St),l._meshK.push(ot),A++,A-1}function fe(kt,St,ot){for(var ht=[],Ke=0;Ke<kt.length;Ke++)ht[Ke]=(kt[Ke]+St[Ke]+ot[Ke])/3;return ht}function ue(kt,St,ot){for(var ht=[],Ke=0;Ke<kt.length;Ke++)ht[Ke]=kt[Ke]*(1-ot)+ot*St[Ke];return ht}var V;function j(kt){V=kt}function ee(kt,St){var ot=kt[0],ht=kt[1],Ke=kt[2],Pe=fe(ot,ht,Ke),We=Math.sqrt(1-V),Qe=ue(Pe,ot,We),ut=ue(Pe,ht,We),It=ue(Pe,Ke,We),Tt=St[0],Bt=St[1],rr=St[2];return{xyzv:[[ot,ht,ut],[ut,Qe,ot],[ht,Ke,It],[It,ut,ht],[Ke,ot,Qe],[Qe,It,Ke]],abc:[[Tt,Bt,-1],[-1,-1,Tt],[Bt,rr,-1],[-1,-1,Bt],[rr,Tt,-1],[-1,-1,rr]]}}function q(kt,St){return kt==="all"||kt===null?!0:kt.indexOf(St)>-1}function X(kt,St){return kt===null?St:kt}function J(kt,St,ot){Q();var ht=[St],Ke=[ot];if(V>=1)ht=[St],Ke=[ot];else if(V>0){var Pe=ee(St,ot);ht=Pe.xyzv,Ke=Pe.abc}for(var We=0;We<ht.length;We++){St=ht[We],ot=Ke[We];for(var Qe=[],ut=0;ut<3;ut++){var It=St[ut][0],Tt=St[ut][1],Bt=St[ut][2],rr=St[ut][3],Ut=ot[ut]>-1?ot[ut]:re(It,Tt,Bt);Ut>-1?Qe[ut]=Ut:Qe[ut]=K(It,Tt,Bt,X(kt,rr))}le(Qe[0],Qe[1],Qe[2])}}function ie(kt,St,ot){var ht=function(Ke,Pe,We){J(kt,[St[Ke],St[Pe],St[We]],[ot[Ke],ot[Pe],ot[We]])};ht(0,1,2),ht(2,3,0)}function ne(kt,St,ot){var ht=function(Ke,Pe,We){J(kt,[St[Ke],St[Pe],St[We]],[ot[Ke],ot[Pe],ot[We]])};ht(0,1,2),ht(3,0,1),ht(2,3,0),ht(1,2,3)}function oe(kt,St,ot,ht){var Ke=kt[3];Ke<ot&&(Ke=ot),Ke>ht&&(Ke=ht);for(var Pe=(kt[3]-Ke)/(kt[3]-St[3]+1e-9),We=[],Qe=0;Qe<4;Qe++)We[Qe]=(1-Pe)*kt[Qe]+Pe*St[Qe];return We}function se(kt,St,ot){return kt>=St&&kt<=ot}function me(kt){var St=.001*(D-R);return kt>=R-St&&kt<=D+St}function ce(kt){for(var St=[],ot=0;ot<4;ot++){var ht=kt[ot];St.push([l._x[ht],l._y[ht],l._z[ht],l._value[ht]])}return St}var pe=3;function xe(kt,St,ot,ht,Ke,Pe){Pe||(Pe=1),ot=[-1,-1,-1];var We=!1,Qe=[se(St[0][3],ht,Ke),se(St[1][3],ht,Ke),se(St[2][3],ht,Ke)];if(!Qe[0]&&!Qe[1]&&!Qe[2])return!1;var ut=function(Tt,Bt,rr){return me(Bt[0][3])&&me(Bt[1][3])&&me(Bt[2][3])?(J(Tt,Bt,rr),!0):Pe<pe?xe(Tt,Bt,rr,R,D,++Pe):!1};if(Qe[0]&&Qe[1]&&Qe[2])return ut(kt,St,ot)||We;var It=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Tt){if(Qe[Tt[0]]&&Qe[Tt[1]]&&!Qe[Tt[2]]){var Bt=St[Tt[0]],rr=St[Tt[1]],Ut=St[Tt[2]],Qt=oe(Ut,Bt,ht,Ke),ar=oe(Ut,rr,ht,Ke);We=ut(kt,[ar,Qt,Bt],[-1,-1,ot[Tt[0]]])||We,We=ut(kt,[Bt,rr,ar],[ot[Tt[0]],ot[Tt[1]],-1])||We,It=!0}}),It||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Tt){if(Qe[Tt[0]]&&!Qe[Tt[1]]&&!Qe[Tt[2]]){var Bt=St[Tt[0]],rr=St[Tt[1]],Ut=St[Tt[2]],Qt=oe(rr,Bt,ht,Ke),ar=oe(Ut,Bt,ht,Ke);We=ut(kt,[ar,Qt,Bt],[-1,-1,ot[Tt[0]]])||We,It=!0}}),We}function Se(kt,St,ot,ht){var Ke=!1,Pe=ce(St),We=[se(Pe[0][3],ot,ht),se(Pe[1][3],ot,ht),se(Pe[2][3],ot,ht),se(Pe[3][3],ot,ht)];if(!We[0]&&!We[1]&&!We[2]&&!We[3])return Ke;if(We[0]&&We[1]&&We[2]&&We[3])return p&&(Ke=ne(kt,Pe,St)||Ke),Ke;var Qe=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ut){if(We[ut[0]]&&We[ut[1]]&&We[ut[2]]&&!We[ut[3]]){var It=Pe[ut[0]],Tt=Pe[ut[1]],Bt=Pe[ut[2]],rr=Pe[ut[3]];if(p)Ke=J(kt,[It,Tt,Bt],[St[ut[0]],St[ut[1]],St[ut[2]]])||Ke;else{var Ut=oe(rr,It,ot,ht),Qt=oe(rr,Tt,ot,ht),ar=oe(rr,Bt,ot,ht);Ke=J(null,[Ut,Qt,ar],[-1,-1,-1])||Ke}Qe=!0}}),Qe||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ut){if(We[ut[0]]&&We[ut[1]]&&!We[ut[2]]&&!We[ut[3]]){var It=Pe[ut[0]],Tt=Pe[ut[1]],Bt=Pe[ut[2]],rr=Pe[ut[3]],Ut=oe(Bt,It,ot,ht),Qt=oe(Bt,Tt,ot,ht),ar=oe(rr,Tt,ot,ht),nr=oe(rr,It,ot,ht);p?(Ke=J(kt,[It,nr,Ut],[St[ut[0]],-1,-1])||Ke,Ke=J(kt,[Tt,Qt,ar],[St[ut[1]],-1,-1])||Ke):Ke=ie(null,[Ut,Qt,ar,nr],[-1,-1,-1,-1])||Ke,Qe=!0}}),Qe)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ut){if(We[ut[0]]&&!We[ut[1]]&&!We[ut[2]]&&!We[ut[3]]){var It=Pe[ut[0]],Tt=Pe[ut[1]],Bt=Pe[ut[2]],rr=Pe[ut[3]],Ut=oe(Tt,It,ot,ht),Qt=oe(Bt,It,ot,ht),ar=oe(rr,It,ot,ht);p?(Ke=J(kt,[It,Ut,Qt],[St[ut[0]],-1,-1])||Ke,Ke=J(kt,[It,Qt,ar],[St[ut[0]],-1,-1])||Ke,Ke=J(kt,[It,ar,Ut],[St[ut[0]],-1,-1])||Ke):Ke=J(null,[Ut,Qt,ar],[-1,-1,-1])||Ke,Qe=!0}}),Ke}function Ae(kt,St,ot,ht,Ke,Pe,We,Qe,ut,It,Tt){var Bt=!1;return _&&(q(kt,"A")&&(Bt=Se(null,[St,ot,ht,Pe],It,Tt)||Bt),q(kt,"B")&&(Bt=Se(null,[ot,ht,Ke,ut],It,Tt)||Bt),q(kt,"C")&&(Bt=Se(null,[ot,Pe,We,ut],It,Tt)||Bt),q(kt,"D")&&(Bt=Se(null,[ht,Pe,Qe,ut],It,Tt)||Bt),q(kt,"E")&&(Bt=Se(null,[ot,ht,Pe,ut],It,Tt)||Bt)),p&&(Bt=Se(kt,[ot,ht,Pe,ut],It,Tt)||Bt),Bt}function Ce(kt,St,ot,ht,Ke,Pe,We,Qe){return[Qe[0]===!0?!0:xe(kt,ce([St,ot,ht]),[St,ot,ht],Pe,We),Qe[1]===!0?!0:xe(kt,ce([ht,Ke,St]),[ht,Ke,St],Pe,We)]}function Ee(kt,St,ot,ht,Ke,Pe,We,Qe,ut){return Qe?Ce(kt,St,ot,Ke,ht,Pe,We,ut):Ce(kt,ot,Ke,ht,St,Pe,We,ut)}function Oe(kt,St,ot,ht,Ke,Pe,We){var Qe=!1,ut,It,Tt,Bt,rr=function(){Qe=xe(kt,[ut,It,Tt],[-1,-1,-1],Ke,Pe)||Qe,Qe=xe(kt,[Tt,Bt,ut],[-1,-1,-1],Ke,Pe)||Qe},Ut=We[0],Qt=We[1],ar=We[2];return Ut&&(ut=ue(ce([L(St,ot-0,ht-0)])[0],ce([L(St-1,ot-0,ht-0)])[0],Ut),It=ue(ce([L(St,ot-0,ht-1)])[0],ce([L(St-1,ot-0,ht-1)])[0],Ut),Tt=ue(ce([L(St,ot-1,ht-1)])[0],ce([L(St-1,ot-1,ht-1)])[0],Ut),Bt=ue(ce([L(St,ot-1,ht-0)])[0],ce([L(St-1,ot-1,ht-0)])[0],Ut),rr()),Qt&&(ut=ue(ce([L(St-0,ot,ht-0)])[0],ce([L(St-0,ot-1,ht-0)])[0],Qt),It=ue(ce([L(St-0,ot,ht-1)])[0],ce([L(St-0,ot-1,ht-1)])[0],Qt),Tt=ue(ce([L(St-1,ot,ht-1)])[0],ce([L(St-1,ot-1,ht-1)])[0],Qt),Bt=ue(ce([L(St-1,ot,ht-0)])[0],ce([L(St-1,ot-1,ht-0)])[0],Qt),rr()),ar&&(ut=ue(ce([L(St-0,ot-0,ht)])[0],ce([L(St-0,ot-0,ht-1)])[0],ar),It=ue(ce([L(St-0,ot-1,ht)])[0],ce([L(St-0,ot-1,ht-1)])[0],ar),Tt=ue(ce([L(St-1,ot-1,ht)])[0],ce([L(St-1,ot-1,ht-1)])[0],ar),Bt=ue(ce([L(St-1,ot-0,ht)])[0],ce([L(St-1,ot-0,ht-1)])[0],ar),rr()),Qe}function _e(kt,St,ot,ht,Ke,Pe,We,Qe,ut,It,Tt,Bt){var rr=kt;return Bt?(_&&kt==="even"&&(rr=null),Ae(rr,St,ot,ht,Ke,Pe,We,Qe,ut,It,Tt)):(_&&kt==="odd"&&(rr=null),Ae(rr,ut,Qe,We,Pe,Ke,ht,ot,St,It,Tt))}function Re(kt,St,ot,ht,Ke){for(var Pe=[],We=0,Qe=0;Qe<St.length;Qe++)for(var ut=St[Qe],It=1;It<M;It++)for(var Tt=1;Tt<C;Tt++)Pe.push(Ee(kt,L(ut,Tt-1,It-1),L(ut,Tt-1,It),L(ut,Tt,It-1),L(ut,Tt,It),ot,ht,(ut+Tt+It)%2,Ke&&Ke[We]?Ke[We]:[])),We++;return Pe}function Ve(kt,St,ot,ht,Ke){for(var Pe=[],We=0,Qe=0;Qe<St.length;Qe++)for(var ut=St[Qe],It=1;It<v;It++)for(var Tt=1;Tt<M;Tt++)Pe.push(Ee(kt,L(It-1,ut,Tt-1),L(It,ut,Tt-1),L(It-1,ut,Tt),L(It,ut,Tt),ot,ht,(It+ut+Tt)%2,Ke&&Ke[We]?Ke[We]:[])),We++;return Pe}function Je(kt,St,ot,ht,Ke){for(var Pe=[],We=0,Qe=0;Qe<St.length;Qe++)for(var ut=St[Qe],It=1;It<C;It++)for(var Tt=1;Tt<v;Tt++)Pe.push(Ee(kt,L(Tt-1,It-1,ut),L(Tt-1,It,ut),L(Tt,It-1,ut),L(Tt,It,ut),ot,ht,(Tt+It+ut)%2,Ke&&Ke[We]?Ke[We]:[])),We++;return Pe}function ze(kt,St,ot){for(var ht=1;ht<M;ht++)for(var Ke=1;Ke<C;Ke++)for(var Pe=1;Pe<v;Pe++)_e(kt,L(Pe-1,Ke-1,ht-1),L(Pe-1,Ke-1,ht),L(Pe-1,Ke,ht-1),L(Pe-1,Ke,ht),L(Pe,Ke-1,ht-1),L(Pe,Ke-1,ht),L(Pe,Ke,ht-1),L(Pe,Ke,ht),St,ot,(Pe+Ke+ht)%2)}function De(kt,St,ot){p=!0,ze(kt,St,ot),p=!1}function je(kt,St,ot){_=!0,ze(kt,St,ot),_=!1}function dt(kt,St,ot,ht,Ke,Pe){for(var We=[],Qe=0,ut=0;ut<St.length;ut++)for(var It=St[ut],Tt=1;Tt<M;Tt++)for(var Bt=1;Bt<C;Bt++)We.push(Oe(kt,It,Bt,Tt,ot,ht,Ke[ut],Pe&&Pe[Qe]?Pe[Qe]:[])),Qe++;return We}function Et(kt,St,ot,ht,Ke,Pe){for(var We=[],Qe=0,ut=0;ut<St.length;ut++)for(var It=St[ut],Tt=1;Tt<v;Tt++)for(var Bt=1;Bt<M;Bt++)We.push(Oe(kt,Tt,It,Bt,ot,ht,Ke[ut],Pe&&Pe[Qe]?Pe[Qe]:[])),Qe++;return We}function $t(kt,St,ot,ht,Ke,Pe){for(var We=[],Qe=0,ut=0;ut<St.length;ut++)for(var It=St[ut],Tt=1;Tt<C;Tt++)for(var Bt=1;Bt<v;Bt++)We.push(Oe(kt,Bt,Tt,It,ot,ht,Ke[ut],Pe&&Pe[Qe]?Pe[Qe]:[])),Qe++;return We}function wt(kt,St){for(var ot=[],ht=kt;ht<St;ht++)ot.push(ht);return ot}function Ot(){for(var kt=0;kt<v;kt++)for(var St=0;St<C;St++)for(var ot=0;ot<M;ot++){var ht=L(kt,St,ot);K(l._x[ht],l._y[ht],l._z[ht],l._value[ht])}}function Vt(){Z(),Ot();var kt=null;if(d&&g&&(j(g),De(kt,R,D)),m&&b){j(b);for(var St=l.surface.pattern,ot=l.surface.count,ht=0;ht<ot;ht++){var Ke=ot===1?.5:ht/(ot-1),Pe=(1-Ke)*R+Ke*D,We=Math.abs(Pe-z),Qe=Math.abs(Pe-O),ut=We>Qe?[z,Pe]:[Pe,O];je(St,ut[0],ut[1])}}var It=[[Math.min(R,O),Math.max(R,O)],[Math.min(z,D),Math.max(z,D)]];["x","y","z"].forEach(function(Tt){for(var Bt=[],rr=0;rr<It.length;rr++){var Ut=0,Qt=It[rr][0],ar=It[rr][1],nr=l.slices[Tt];if(nr.show&&nr.fill){j(nr.fill);var cr=[],Kr=[],yn=[];if(nr.locations.length)for(var Qr=0;Qr<nr.locations.length;Qr++){var st=a(nr.locations[Qr],Tt==="x"?T:Tt==="y"?x:w);st.distRatio===0?cr.push(st.id):st.id>0&&(Kr.push(st.id),Tt==="x"?yn.push([st.distRatio,0,0]):Tt==="y"?yn.push([0,st.distRatio,0]):yn.push([0,0,st.distRatio]))}else Tt==="x"?cr=wt(1,v-1):Tt==="y"?cr=wt(1,C-1):cr=wt(1,M-1);Kr.length>0&&(Tt==="x"?Bt[Ut]=dt(kt,Kr,Qt,ar,yn,Bt[Ut]):Tt==="y"?Bt[Ut]=Et(kt,Kr,Qt,ar,yn,Bt[Ut]):Bt[Ut]=$t(kt,Kr,Qt,ar,yn,Bt[Ut]),Ut++),cr.length>0&&(Tt==="x"?Bt[Ut]=Re(kt,cr,Qt,ar,Bt[Ut]):Tt==="y"?Bt[Ut]=Ve(kt,cr,Qt,ar,Bt[Ut]):Bt[Ut]=Je(kt,cr,Qt,ar,Bt[Ut]),Ut++)}var Gt=l.caps[Tt];Gt.show&&Gt.fill&&(j(Gt.fill),Tt==="x"?Bt[Ut]=Re(kt,[0,v-1],Qt,ar,Bt[Ut]):Tt==="y"?Bt[Ut]=Ve(kt,[0,C-1],Qt,ar,Bt[Ut]):Bt[Ut]=Je(kt,[0,M-1],Qt,ar,Bt[Ut]),Ut++)}}),A===0&&Z(),l._meshX=H,l._meshY=B,l._meshZ=$,l._meshIntensity=W,l._Xs=T,l._Ys=x,l._Zs=w}return Vt(),l}function u(l,m){var d=l.glplot.gl,b=s({gl:d}),g=new i(l,b,m.uid);return b._trace=g,g.update(m),l.glplot.add(b),g}I.exports={findNearestOnAxis:a,generateIsoMeshes:f,createIsosurfaceTrace:u}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(e,I,F){var s=e("../../lib"),o=e("../../registry"),h=e("./attributes"),y=e("../../components/colorscale/defaults");function t(i,n,r,f){function u(l,m){return s.coerce(i,n,h,l,m)}a(i,n,r,f,u)}function a(i,n,r,f,u){var l=u("isomin"),m=u("isomax");m!=null&&l!==void 0&&l!==null&&l>m&&(n.isomin=null,n.isomax=null);var d=u("x"),b=u("y"),g=u("z"),_=u("value");if(!d||!d.length||!b||!b.length||!g||!g.length||!_||!_.length){n.visible=!1;return}var p=o.getComponentMethod("calendars","handleTraceDefaults");p(i,n,["x","y","z"],f),u("valuehoverformat"),["x","y","z"].forEach(function(T){u(T+"hoverformat");var x="caps."+T,w=u(x+".show");w&&u(x+".fill");var v="slices."+T,C=u(v+".show");C&&(u(v+".fill"),u(v+".locations"))});var A=u("spaceframe.show");A&&u("spaceframe.fill");var c=u("surface.show");c&&(u("surface.count"),u("surface.fill"),u("surface.pattern"));var S=u("contour.show");S&&(u("contour.color"),u("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(T){u(T)}),y(i,n,f,u,{prefix:"",cLetter:"c"}),n._length=null}I.exports={supplyDefaults:t,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(e,I,F){var s=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../surface/attributes"),t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat;I.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:h({editType:"calc"}),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},s("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},y.contours.x.show,{}),color:y.contours.x.color,width:y.contours.x.width,editType:"calc"},lightposition:{x:a({},y.lightposition.x,{dflt:1e5}),y:a({},y.lightposition.y,{dflt:1e5}),z:a({},y.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},y.lighting),hoverinfo:a({},t.hoverinfo,{editType:"calc"}),showlegend:a({},t.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1061}],868:[function(e,I,F){var s=e("../../components/colorscale/calc");I.exports=function(h,y){y.intensity&&s(h,y,{vals:y.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(e,I,F){var s=e("../../../stackgl_modules").gl_mesh3d,o=e("../../../stackgl_modules").delaunay_triangulate,h=e("../../../stackgl_modules").alpha_shape,y=e("../../../stackgl_modules").convex_hull,t=e("../../lib/gl_format_color").parseColorScale,a=e("../../lib/str2rgbarray"),i=e("../../components/colorscale").extractOpts,n=e("../../plots/gl3d/zip3");function r(_,p,A){this.scene=_,this.uid=A,this.mesh=p,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=r.prototype;f.handlePick=function(_){if(_.object===this.mesh){var p=_.index=_.data.index;_.data._cellCenter?_.traceCoordinate=_.data.dataCoordinate:_.traceCoordinate=[this.data.x[p],this.data.y[p],this.data.z[p]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&A[p]!==void 0?_.textLabel=A[p]:A&&(_.textLabel=A),!0}};function u(_){for(var p=[],A=_.length,c=0;c<A;c++)p[c]=a(_[c]);return p}function l(_,p,A,c){for(var S=[],T=p.length,x=0;x<T;x++)S[x]=_.d2l(p[x],0,c)*A;return S}function m(_){for(var p=[],A=_.length,c=0;c<A;c++)p[c]=Math.round(_[c]);return p}function d(_,p){for(var A=["x","y","z"].indexOf(_),c=[],S=p.length,T=0;T<S;T++)c[T]=[p[T][(A+1)%3],p[T][(A+2)%3]];return o(c)}function b(_,p){for(var A=_.length,c=0;c<A;c++)if(_[c]<=-.5||_[c]>=p-.5)return!1;return!0}f.update=function(_){var p=this.scene,A=p.fullSceneLayout;this.data=_;var c=_.x.length,S=n(l(A.xaxis,_.x,p.dataScale[0],_.xcalendar),l(A.yaxis,_.y,p.dataScale[1],_.ycalendar),l(A.zaxis,_.z,p.dataScale[2],_.zcalendar)),T;if(_.i&&_.j&&_.k){if(_.i.length!==_.j.length||_.j.length!==_.k.length||!b(_.i,c)||!b(_.j,c)||!b(_.k,c))return;T=n(m(_.i),m(_.j),m(_.k))}else _.alphahull===0?T=y(S):_.alphahull>0?T=h(_.alphahull,S):T=d(_.delaunayaxis,S);var x={positions:S,cells:T,lightPosition:[_.lightposition.x,_.lightposition.y,_.lightposition.z],ambient:_.lighting.ambient,diffuse:_.lighting.diffuse,specular:_.lighting.specular,roughness:_.lighting.roughness,fresnel:_.lighting.fresnel,vertexNormalsEpsilon:_.lighting.vertexnormalsepsilon,faceNormalsEpsilon:_.lighting.facenormalsepsilon,opacity:_.opacity,contourEnable:_.contour.show,contourColor:a(_.contour.color).slice(0,3),contourWidth:_.contour.width,useFacetNormals:_.flatshading};if(_.intensity){var w=i(_);this.color="#fff";var v=_.intensitymode;x[v+"Intensity"]=_.intensity,x[v+"IntensityBounds"]=[w.min,w.max],x.colormap=t(_)}else _.vertexcolor?(this.color=_.vertexcolor[0],x.vertexColors=u(_.vertexcolor)):_.facecolor?(this.color=_.facecolor[0],x.cellColors=u(_.facecolor)):(this.color=_.color,x.meshColor=a(_.color));this.mesh.update(x)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function g(_,p){var A=_.glplot.gl,c=s({gl:A}),S=new r(_,c,p.uid);return c._trace=S,S.update(p),_.glplot.add(c),S}I.exports=g},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("../../components/colorscale/defaults"),y=e("./attributes");I.exports=function(a,i,n,r){function f(b,g){return o.coerce(a,i,y,b,g)}function u(b){var g=b.map(function(_){var p=f(_);return p&&o.isArrayOrTypedArray(p)?p:null});return g.every(function(_){return _&&_.length===g[0].length})&&g}var l=u(["x","y","z"]);if(!l){i.visible=!1;return}if(u(["i","j","k"]),i.i&&(!i.j||!i.k)||i.j&&(!i.k||!i.i)||i.k&&(!i.i||!i.j)){i.visible=!1;return}var m=s.getComponentMethod("calendars","handleTraceDefaults");m(a,i,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(b){f(b)});var d=f("contour.show");d&&(f("contour.color"),f("contour.width")),"intensity"in a?(f("intensity"),f("intensitymode"),h(a,i,r,f,{prefix:"",cLetter:"c"})):(i.showscale=!1,"facecolor"in a?f("facecolor"):"vertexcolor"in a?f("vertexcolor"):f("color",n)),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(e,I,F){var s=e("../../lib").extendFlat,o=e("../scatter/attributes"),h=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=e("../../components/drawing/attributes").dash,t=e("../../components/fx/attributes"),a=e("../../constants/delta.js"),i=a.INCREASING.COLOR,n=a.DECREASING.COLOR,r=o.line;function f(u){return{line:{color:s({},r.color,{dflt:u}),width:r.width,dash:y,editType:"style"},editType:"style"}}I.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:h("x"),yhoverformat:h("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:s({},r.width,{}),dash:s({},y,{}),editType:"style"},increasing:f(i),decreasing:f(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:s({},t.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927}],873:[function(e,I,F){var s=e("../../lib"),o=s._,h=e("../../plots/cartesian/axes"),y=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM;function a(f,u){var l=h.getFromId(f,u.xaxis),m=h.getFromId(f,u.yaxis),d=r(f,l,u),b=u._minDiff;u._minDiff=null;var g=u._origX;u._origX=null;var _=u._xcalc;u._xcalc=null;var p=n(f,u,g,_,m,i);return u._extremes[l._id]=h.findExtremes(l,_,{vpad:b/2}),p.length?(s.extendFlat(p[0].t,{wHover:b/2,tickLen:d}),p):[{t:{empty:!0}}]}function i(f,u,l,m){return{o:f,h:u,l,c:m}}function n(f,u,l,m,d,b){for(var g=d.makeCalcdata(u,"open"),_=d.makeCalcdata(u,"high"),p=d.makeCalcdata(u,"low"),A=d.makeCalcdata(u,"close"),c=Array.isArray(u.text),S=Array.isArray(u.hovertext),T=!0,x=null,w=!!u.xperiodalignment,v=[],C=0;C<m.length;C++){var M=m[C],E=g[C],L=_[C],z=p[C],O=A[C];if(M!==t&&E!==t&&L!==t&&z!==t&&O!==t){O===E?x!==null&&O!==x&&(T=O>x):T=O>E,x=O;var R=b(E,L,z,O);R.pos=M,R.yc=(E+O)/2,R.i=C,R.dir=T?"increasing":"decreasing",R.x=R.pos,R.y=[z,L],w&&(R.orig_p=l[C]),c&&(R.tx=u.text[C]),S&&(R.htx=u.hovertext[C]),v.push(R)}else v.push({pos:M,empty:!0})}return u._extremes[d._id]=h.findExtremes(d,s.concat(p,_),{padded:!0}),v.length&&(v[0].t={labels:{open:o(f,"open:")+" ",high:o(f,"high:")+" ",low:o(f,"low:")+" ",close:o(f,"close:")+" "}}),v}function r(f,u,l){var m=l._minDiff;if(!m){var d=f._fullData,b=[];m=1/0;var g;for(g=0;g<d.length;g++){var _=d[g];if(_.type==="ohlc"&&_.visible===!0&&_.xaxis===u._id){b.push(_);var p=u.makeCalcdata(_,"x");_._origX=p;var A=y(l,u,"x",p).vals;_._xcalc=A;var c=s.distinctVals(A).minDiff;c&&isFinite(c)&&(m=Math.min(m,c))}}for(m===1/0&&(m=1),g=0;g<b.length;g++)b[g]._minDiff=m}return m*l.tickwidth}I.exports={calc:a,calcCommon:n}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(e,I,F){var s=e("../../lib"),o=e("./ohlc_defaults"),h=e("../scatter/period_defaults"),y=e("./attributes");I.exports=function(i,n,r,f){function u(m,d){return s.coerce(i,n,y,m,d)}var l=o(i,n,u,f);if(!l){n.visible=!1;return}h(i,n,f,u,{x:!0}),u("xhoverformat"),u("yhoverformat"),u("line.width"),u("line.dash"),t(i,n,u,"increasing"),t(i,n,u,"decreasing"),u("text"),u("hovertext"),u("tickwidth"),f._requestRangeslider[n.xaxis]=!0};function t(a,i,n,r){n(r+".line.color"),n(r+".line.width",i.line.width),n(r+".line.dash",i.line.dash)}},{"../../lib":503,"../scatter/period_defaults":947,"./attributes":872,"./ohlc_defaults":877}],875:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../lib"),h=e("../../components/fx"),y=e("../../components/color"),t=e("../../lib").fillText,a=e("../../constants/delta.js"),i={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function n(l,m,d,b){var g=l.cd,_=g[0].trace;return _.hoverlabel.split?f(l,m,d,b):u(l,m,d,b)}function r(l,m,d,b){var g=l.cd,_=l.xa,p=g[0].trace,A=g[0].t,c=p.type,S=c==="ohlc"?"l":"min",T=c==="ohlc"?"h":"max",x,w,v=A.bPos||0,C=function(re){return re.pos+v-m},M=A.bdPos||A.tickLen,E=A.wHover,L=Math.min(1,M/Math.abs(_.r2c(_.range[1])-_.r2c(_.range[0])));x=l.maxHoverDistance-L,w=l.maxSpikeDistance-L;function z(re){var Q=C(re);return h.inbox(Q-E,Q+E,x)}function O(re){var Q=re[S],Z=re[T];return Q===Z||h.inbox(Q-d,Z-d,x)}function R(re){return(z(re)+O(re))/2}var D=h.getDistanceFunction(b,z,O,R);if(h.getClosest(g,D,l),l.index===!1)return null;var H=g[l.index];if(H.empty)return null;var B=H.dir,$=p[B],W=$.line.color;return y.opacity(W)&&$.line.width?l.color=W:l.color=$.fillcolor,l.x0=_.c2p(H.pos+v-M,!0),l.x1=_.c2p(H.pos+v+M,!0),l.xLabelVal=H.orig_p!==void 0?H.orig_p:H.pos,l.spikeDistance=R(H)*w/x,l.xSpike=_.c2p(H.pos,!0),l}function f(l,m,d,b){var g=l.cd,_=l.ya,p=g[0].trace,A=g[0].t,c=[],S=r(l,m,d,b);if(!S)return[];var T=S.index,x=g[T],w=x.hi||p.hoverinfo,v=w.split("+"),C=w==="all",M=C||v.indexOf("y")!==-1;if(!M)return[];for(var E=["high","open","close","low"],L={},z=0;z<E.length;z++){var O=E[z],R=p[O][S.index],D=_.c2p(R,!0),H;R in L?(H=L[R],H.yLabel+="<br>"+A.labels[O]+s.hoverLabelText(_,R,p.yhoverformat)):(H=o.extendFlat({},S),H.y0=H.y1=D,H.yLabelVal=R,H.yLabel=A.labels[O]+s.hoverLabelText(_,R,p.yhoverformat),H.name="",c.push(H),L[R]=H)}return c}function u(l,m,d,b){var g=l.cd,_=l.ya,p=g[0].trace,A=g[0].t,c=r(l,m,d,b);if(!c)return[];var S=c.index,T=g[S],x=c.index=T.i,w=T.dir;function v(R){return A.labels[R]+s.hoverLabelText(_,p[R][x],p.yhoverformat)}var C=T.hi||p.hoverinfo,M=C.split("+"),E=C==="all",L=E||M.indexOf("y")!==-1,z=E||M.indexOf("text")!==-1,O=L?[v("open"),v("high"),v("low"),v("close")+"  "+i[w]]:[];return z&&t(T,p,O),c.extraText=O.join("<br>"),c.y0=c.y1=_.c2p(T.yc,!0),[c]}I.exports={hoverPoints:n,hoverSplit:f,hoverOnPoints:u}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(e,I,F){I.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(e,I,F){var s=e("../../registry"),o=e("../../lib");I.exports=function(y,t,a,i){var n=a("x"),r=a("open"),f=a("high"),u=a("low"),l=a("close");a("hoverlabel.split");var m=s.getComponentMethod("calendars","handleTraceDefaults");if(m(y,t,["x"],i),!!(r&&f&&u&&l)){var d=Math.min(r.length,f.length,u.length,l.length);return n&&(d=Math.min(d,o.minRowLength(n))),t._length=d,d}}},{"../../lib":503,"../../registry":638}],878:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib");I.exports=function(y,t,a,i){var n=t.yaxis,r=t.xaxis,f=!!r.rangebreaks;o.makeTraceGroups(i,a,"trace ohlc").each(function(u){var l=s.select(this),m=u[0],d=m.t,b=m.trace;if(b.visible!==!0||d.empty){l.remove();return}var g=d.tickLen,_=l.selectAll("path").data(o.identity);_.enter().append("path"),_.exit().remove(),_.attr("d",function(p){if(p.empty)return"M0,0Z";var A=r.c2p(p.pos-g,!0),c=r.c2p(p.pos+g,!0),S=f?(A+c)/2:r.c2p(p.pos,!0),T=n.c2p(p.o,!0),x=n.c2p(p.h,!0),w=n.c2p(p.l,!0),v=n.c2p(p.c,!0);return"M"+A+","+T+"H"+S+"M"+S+","+x+"V"+w+"M"+c+","+v+"H"+S})})}},{"../../lib":503,"@plotly/d3":58}],879:[function(e,I,F){I.exports=function(o,h){var y=o.cd,t=o.xaxis,a=o.yaxis,i=[],n,r=y[0].t.bPos||0;if(h===!1)for(n=0;n<y.length;n++)y[n].selected=0;else for(n=0;n<y.length;n++){var f=y[n];h.contains([t.c2p(f.pos+r),a.c2p(f.yc)],null,f.i,o)?(i.push({pointNumber:f.i,x:t.c2d(f.pos),y:a.c2d(f.yc)}),f.selected=1):f.selected=0}return i}},{}],880:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/drawing"),h=e("../../components/color");I.exports=function(t,a,i){var n=i||s.select(t).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var f=r[0].trace;s.select(this).selectAll("path").each(function(u){if(!u.empty){var l=f[u.dir].line;s.select(this).style("fill","none").call(h.stroke,l.color).call(o.dashLine,l.dash,l.width).style("opacity",f.selectedpoints&&!u.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(e,I,F){var s=e("../../lib/extend").extendFlat,o=e("../../plots/attributes"),h=e("../../plots/font_attributes"),y=e("../../components/colorscale/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/domain").attributes,i=s({editType:"calc"},y("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});I.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:s({},o.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:h({editType:"calc"}),tickfont:h({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:i,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(e,I,F){var s=e("../../plots/get_data").getModuleCalcData,o=e("./plot"),h="parcats";F.name=h,F.plot=function(y,t,a,i){var n=s(y.calcdata,h);if(n.length){var r=n[0];o(y,r,a,i)}},F.clean=function(y,t,a,i){var n=i._has&&i._has("parcats"),r=t._has&&t._has("parcats");n&&!r&&i._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(e,I,F){var s=e("../../lib/gup").wrap,o=e("../../components/colorscale/helpers").hasColorscale,h=e("../../components/colorscale/calc"),y=e("../../lib/filter_unique.js"),t=e("../../components/drawing"),a=e("../../lib"),i=e("fast-isnumeric");I.exports=function(A,c){var S=a.filterVisible(c.dimensions);if(S.length===0)return[];var T=S.map(function(fe){var ue;if(fe.categoryorder==="trace")ue=null;else if(fe.categoryorder==="array")ue=fe.categoryarray;else{ue=y(fe.values);for(var V=!0,j=0;j<ue.length;j++)if(!i(ue[j])){V=!1;break}ue.sort(V?a.sorterAsc:void 0),fe.categoryorder==="category descending"&&(ue=ue.reverse())}return d(fe.values,ue)}),x,w,v;a.isArrayOrTypedArray(c.counts)?x=c.counts:x=[c.counts],b(S),S.forEach(function(fe,ue){g(fe,T[ue])});var C=c.line,M;C?(o(c,"line")&&h(A,c,{vals:c.line.color,containerStr:"line",cLetter:"c"}),M=t.tryColorscale(C)):M=a.identity;function E(fe){var ue,V;return a.isArrayOrTypedArray(C.color)?(ue=C.color[fe%C.color.length],V=ue):ue=C.color,{color:M(ue),rawColor:V}}var L=S[0].values.length,z={},O=T.map(function(fe){return fe.inds});v=0;var R,D;for(R=0;R<L;R++){var H=[];for(D=0;D<O.length;D++)H.push(O[D][R]);w=x[R%x.length],v+=w;var B=E(R),$=H+"-"+B.rawColor;z[$]===void 0&&(z[$]=l(H,B.color,B.rawColor)),m(z[$],R,w)}var W=S.map(function(fe,ue){return r(ue,fe._index,fe._displayindex,fe.label,v)});for(R=0;R<L;R++)for(w=x[R%x.length],D=0;D<W.length;D++){var re=W[D].containerInd,Q=T[D].inds[R],Z=W[D].categories;if(Z[Q]===void 0){var K=c.dimensions[re]._categoryarray[Q],le=c.dimensions[re]._ticktext[Q];Z[Q]=f(D,Q,K,le)}u(Z[Q],R,w)}return s(n(W,z,v))};function n(p,A,c){var S=p.map(function(T){return T.categories.length}).reduce(function(T,x){return Math.max(T,x)});return{dimensions:p,paths:A,trace:void 0,maxCats:S,count:c}}function r(p,A,c,S,T){return{dimensionInd:p,containerInd:A,displayInd:c,dimensionLabel:S,count:T,categories:[],dragX:null}}function f(p,A,c,S){return{dimensionInd:p,categoryInd:A,categoryValue:c,displayInd:A,categoryLabel:S,valueInds:[],count:0,dragY:null}}function u(p,A,c){p.valueInds.push(A),p.count+=c}function l(p,A,c){return{categoryInds:p,color:A,rawColor:c,valueInds:[],count:0}}function m(p,A,c){p.valueInds.push(A),p.count+=c}function d(p,A){A==null?A=[]:A=A.map(function(M){return M});var c={},S={},T=[];A.forEach(function(M,E){c[M]=0,S[M]=E});for(var x=0;x<p.length;x++){var w=p[x],v;c[w]===void 0?(c[w]=1,v=A.push(w)-1,S[w]=v):(c[w]++,v=S[w]),T.push(v)}var C=A.map(function(M){return c[M]});return{uniqueValues:A,uniqueCounts:C,inds:T}}function b(p){var A=p.map(function(S){return S.displayindex}),c;if(_(A))for(c=0;c<p.length;c++)p[c]._displayindex=p[c].displayindex;else for(c=0;c<p.length;c++)p[c]._displayindex=c}function g(p,A){p._categoryarray=A.uniqueValues,p.ticktext===null||p.ticktext===void 0?p._ticktext=[]:p._ticktext=p.ticktext.slice();for(var c=p._ticktext.length;c<A.uniqueValues.length;c++)p._ticktext.push(A.uniqueValues[c])}function _(p){for(var A=new Array(p.length),c=0;c<p.length;c++){if(p[c]<0||p[c]>=p.length||A[p[c]]!==void 0)return!1;A[p[c]]=!0}return!0}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(e,I,F){var s=e("../../lib"),o=e("../../components/colorscale/helpers").hasColorscale,h=e("../../components/colorscale/defaults"),y=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),a=e("./attributes"),i=e("../parcoords/merge_length");function n(f,u,l,m,d){d("line.shape"),d("line.hovertemplate");var b=d("line.color",m.colorway[0]);if(o(f,"line")&&s.isArrayOrTypedArray(b)){if(b.length)return d("line.colorscale"),h(f,u,m,d,{prefix:"line.",cLetter:"c"}),b.length;u.line.color=l}return 1/0}function r(f,u){function l(A,c){return s.coerce(f,u,a.dimensions,A,c)}var m=l("values"),d=l("visible");if(m&&m.length||(d=u.visible=!1),d){l("label"),l("displayindex",u._index);var b=f.categoryarray,g=Array.isArray(b)&&b.length>0,_;g&&(_="array");var p=l("categoryorder",_);p==="array"?(l("categoryarray"),l("ticktext")):(delete f.categoryarray,delete f.ticktext),!g&&p==="array"&&(u.categoryorder="trace")}}I.exports=function(u,l,m,d){function b(c,S){return s.coerce(u,l,a,c,S)}var g=t(u,l,{name:"dimensions",handleItemDefaults:r}),_=n(u,l,m,d,b);y(l,d,b),(!Array.isArray(g)||!g.length)&&(l.visible=!1),i(l,g,"values",_),b("hoveron"),b("hovertemplate"),b("arrangement"),b("bundlecolors"),b("sortpaths"),b("counts");var p={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};s.coerceFont(b,"labelfont",p);var A={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};s.coerceFont(b,"tickfont",A)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":898,"./attributes":881}],885:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(e,I,F){var s=e("@plotly/d3"),o=e("d3-interpolate").interpolateNumber,h=e("../../plot_api/plot_api"),y=e("../../components/fx"),t=e("../../lib"),a=t.strTranslate,i=e("../../components/drawing"),n=e("tinycolor2"),r=e("../../lib/svg_text_utils");function f(j,ee,q,X){var J=j.map(K.bind(0,ee,q)),ie=X.selectAll("g.parcatslayer").data([null]);ie.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ne=ie.selectAll("g.trace.parcats").data(J,u),oe=ne.enter().append("g").attr("class","trace parcats");ne.attr("transform",function(_e){return a(_e.x,_e.y)}),oe.append("g").attr("class","paths");var se=ne.select("g.paths"),me=se.selectAll("path.path").data(function(_e){return _e.paths},u);me.attr("fill",function(_e){return _e.model.color});var ce=me.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(_e){return _e.model.color}).attr("fill-opacity",0);A(ce),me.attr("d",function(_e){return _e.svgD}),ce.empty()||me.sort(m),me.exit().remove(),me.on("mouseover",d).on("mouseout",b).on("click",p),oe.append("g").attr("class","dimensions");var pe=ne.select("g.dimensions"),xe=pe.selectAll("g.dimension").data(function(_e){return _e.dimensions},u);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(_e){return a(_e.x,0)}),xe.exit().remove();var Se=xe.selectAll("g.category").data(function(_e){return _e.categories},u),Ae=Se.enter().append("g").attr("class","category");Se.attr("transform",function(_e){return a(0,_e.y)}),Ae.append("rect").attr("class","catrect").attr("pointer-events","none"),Se.select("rect.catrect").attr("fill","none").attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}),T(Ae);var Ce=Se.selectAll("rect.bandrect").data(function(_e){return _e.bands},u);Ce.each(function(){t.raiseToTop(this)}),Ce.attr("fill",function(_e){return _e.color});var Ee=Ce.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(_e){return _e.color}).attr("fill-opacity",0);Ce.attr("fill",function(_e){return _e.color}).attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}).attr("y",function(_e){return _e.y}).attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":_e.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),w(Ee),Ce.exit().remove(),Ae.append("text").attr("class","catlabel").attr("pointer-events","none");var Oe=ee._fullLayout.paper_bgcolor;Se.select("text.catlabel").attr("text-anchor",function(_e){return l(_e)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Oe)).style("fill","rgb(0, 0, 0)").attr("x",function(_e){return l(_e)?_e.width+5:-5}).attr("y",function(_e){return _e.height/2}).text(function(_e){return _e.model.categoryLabel}).each(function(_e){i.font(s.select(this),_e.parcatsViewModel.categorylabelfont),r.convertToTspans(s.select(this),ee)}),Ae.append("text").attr("class","dimlabel"),Se.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(_e){return _e.width/2}).attr("y",-5).text(function(_e,Re){return Re===0?_e.parcatsViewModel.model.dimensions[_e.model.dimensionInd].dimensionLabel:null}).each(function(_e){i.font(s.select(this),_e.parcatsViewModel.labelfont)}),Se.selectAll("rect.bandrect").on("mouseover",D).on("mouseout",H),Se.exit().remove(),xe.call(s.behavior.drag().origin(function(_e){return{x:_e.x,y:0}}).on("dragstart",B).on("drag",$).on("dragend",W)),ne.each(function(_e){_e.traceSelection=s.select(this),_e.pathSelection=s.select(this).selectAll("g.paths").selectAll("path.path"),_e.dimensionSelection=s.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ne.exit().remove()}I.exports=function(j,ee,q,X){f(q,j,X,ee)};function u(j){return j.key}function l(j){var ee=j.parcatsViewModel.dimensions.length,q=j.parcatsViewModel.dimensions[ee-1].model.dimensionInd;return j.model.dimensionInd===q}function m(j,ee){return j.model.rawColor>ee.model.rawColor?1:j.model.rawColor<ee.model.rawColor?-1:0}function d(j){if(!j.parcatsViewModel.dragDimension&&j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){t.raiseToTop(this),c(s.select(this));var ee=g(j),q=_(j);if(j.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ee,event:s.event,constraints:q}),j.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var X=s.mouse(this)[0],J=j.parcatsViewModel.graphDiv,ie=j.parcatsViewModel.trace,ne=J._fullLayout,oe=ne._paperdiv.node().getBoundingClientRect(),se=j.parcatsViewModel.graphDiv.getBoundingClientRect(),me,ce,pe;for(pe=0;pe<j.leftXs.length-1;pe++)if(j.leftXs[pe]+j.dimWidths[pe]-2<=X&&X<=j.leftXs[pe+1]+2){var xe=j.parcatsViewModel.dimensions[pe],Se=j.parcatsViewModel.dimensions[pe+1];me=(xe.x+xe.width+Se.x)/2,ce=(j.topYs[pe]+j.topYs[pe+1]+j.height)/2;break}var Ae=j.parcatsViewModel.x+me,Ce=j.parcatsViewModel.y+ce,Ee=n.mostReadable(j.model.color,["black","white"]),Oe=j.model.count,_e=Oe/j.parcatsViewModel.model.count,Re={countLabel:Oe,probabilityLabel:_e.toFixed(3)},Ve=[];j.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ve.push(["Count:",Re.countLabel].join(" ")),j.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ve.push(["P:",Re.probabilityLabel].join(" "));var Je=Ve.join("<br>"),ze=s.mouse(J)[0];y.loneHover({trace:ie,x:Ae-oe.left+se.left,y:Ce-oe.top+se.top,text:Je,color:j.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ee,idealAlign:ze<Ae?"right":"left",hovertemplate:(ie.line||{}).hovertemplate,hovertemplateLabels:Re,eventData:[{data:ie._input,fullData:ie,count:Oe,probability:_e}]},{container:ne._hoverlayer.node(),outerContainer:ne._paper.node(),gd:J})}}}function b(j){if(!j.parcatsViewModel.dragDimension&&(A(s.select(this)),y.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),j.parcatsViewModel.pathSelection.sort(m),j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ee=g(j),q=_(j);j.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ee,event:s.event,constraints:q})}}function g(j){for(var ee=[],q=re(j.parcatsViewModel),X=0;X<j.model.valueInds.length;X++){var J=j.model.valueInds[X];ee.push({curveNumber:q,pointNumber:J})}return ee}function _(j){for(var ee={},q=j.parcatsViewModel.model.dimensions,X=0;X<q.length;X++){var J=q[X],ie=J.categories[j.model.categoryInds[X]];ee[J.containerInd]=ie.categoryValue}return j.model.rawColor!==void 0&&(ee.color=j.model.rawColor),ee}function p(j){if(j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=g(j),q=_(j);j.parcatsViewModel.graphDiv.emit("plotly_click",{points:ee,event:s.event,constraints:q})}}function A(j){j.attr("fill",function(ee){return ee.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function c(j){j.attr("fill-opacity",.8).attr("stroke",function(ee){return n.mostReadable(ee.model.color,["black","white"])}).attr("stroke-width",.3)}function S(j){j.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function T(j){j.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function x(j){j.attr("stroke","black").attr("stroke-width",1.5)}function w(j){j.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function v(j){var ee=j.parcatsViewModel.pathSelection,q=j.categoryViewModel.model.dimensionInd,X=j.categoryViewModel.model.categoryInd;return ee.filter(function(J){return J.model.categoryInds[q]===X&&J.model.color===j.color})}function C(j){var ee=s.select(j.parentNode).selectAll("rect.bandrect");ee.each(function(q){var X=v(q);c(X),X.each(function(){t.raiseToTop(this)})}),S(s.select(j.parentNode))}function M(j){var ee=s.select(j).datum(),q=v(ee);c(q),q.each(function(){t.raiseToTop(this)}),s.select(j.parentNode).selectAll("rect.bandrect").filter(function(X){return X.color===ee.color}).each(function(){t.raiseToTop(this),x(s.select(this))})}function E(j,ee,q){var X=s.select(j).datum(),J=X.categoryViewModel.model,ie=X.parcatsViewModel.graphDiv,ne=s.select(j.parentNode).selectAll("rect.bandrect"),oe=[];ne.each(function(me){var ce=v(me);ce.each(function(pe){Array.prototype.push.apply(oe,g(pe))})});var se={};se[J.dimensionInd]=J.categoryValue,ie.emit(ee,{points:oe,event:q,constraints:se})}function L(j,ee,q){var X=s.select(j).datum(),J=X.categoryViewModel.model,ie=X.parcatsViewModel.graphDiv,ne=v(X),oe=[];ne.each(function(me){Array.prototype.push.apply(oe,g(me))});var se={};se[J.dimensionInd]=J.categoryValue,X.rawColor!==void 0&&(se.color=X.rawColor),ie.emit(ee,{points:oe,event:q,constraints:se})}function z(j,ee,q){j._fullLayout._calcInverseTransform(j);var X=j._fullLayout._invScaleX,J=j._fullLayout._invScaleY,ie=s.select(q.parentNode).select("rect.catrect"),ne=ie.node().getBoundingClientRect(),oe=ie.datum(),se=oe.parcatsViewModel,me=se.model.dimensions[oe.model.dimensionInd],ce=se.trace,pe=ne.top+ne.height/2,xe,Se;se.dimensions.length>1&&me.displayInd===se.dimensions.length-1?(xe=ne.left,Se="left"):(xe=ne.left+ne.width,Se="right");var Ae=oe.model.count,Ce=oe.model.categoryLabel,Ee=Ae/oe.parcatsViewModel.model.count,Oe={countLabel:Ae,categoryLabel:Ce,probabilityLabel:Ee.toFixed(3)},_e=[];oe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&_e.push(["Count:",Oe.countLabel].join(" ")),oe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&_e.push(["P("+Oe.categoryLabel+"):",Oe.probabilityLabel].join(" "));var Re=_e.join("<br>");return{trace:ce,x:X*(xe-ee.left),y:J*(pe-ee.top),text:Re,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Se,hovertemplate:ce.hovertemplate,hovertemplateLabels:Oe,eventData:[{data:ce._input,fullData:ce,count:Ae,category:Ce,probability:Ee}]}}function O(j,ee,q){var X=[];return s.select(q.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var J=this;X.push(z(j,ee,J))}),X}function R(j,ee,q){j._fullLayout._calcInverseTransform(j);var X=j._fullLayout._invScaleX,J=j._fullLayout._invScaleY,ie=q.getBoundingClientRect(),ne=s.select(q).datum(),oe=ne.categoryViewModel,se=oe.parcatsViewModel,me=se.model.dimensions[oe.model.dimensionInd],ce=se.trace,pe=ie.y+ie.height/2,xe,Se;se.dimensions.length>1&&me.displayInd===se.dimensions.length-1?(xe=ie.left,Se="left"):(xe=ie.left+ie.width,Se="right");var Ae=oe.model.categoryLabel,Ce=ne.parcatsViewModel.model.count,Ee=0;ne.categoryViewModel.bands.forEach(function(Et){Et.color===ne.color&&(Ee+=Et.count)});var Oe=oe.model.count,_e=0;se.pathSelection.each(function(Et){Et.model.color===ne.color&&(_e+=Et.model.count)});var Re=Ee/Ce,Ve=Ee/_e,Je=Ee/Oe,ze={countLabel:Ce,categoryLabel:Ae,probabilityLabel:Re.toFixed(3)},De=[];oe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&De.push(["Count:",ze.countLabel].join(" ")),oe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(De.push("P(color \u2229 "+Ae+"): "+ze.probabilityLabel),De.push("P("+Ae+" | color): "+Ve.toFixed(3)),De.push("P(color | "+Ae+"): "+Je.toFixed(3)));var je=De.join("<br>"),dt=n.mostReadable(ne.color,["black","white"]);return{trace:ce,x:X*(xe-ee.left),y:J*(pe-ee.top),text:je,color:ne.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:Se,hovertemplate:ce.hovertemplate,hovertemplateLabels:ze,eventData:[{data:ce._input,fullData:ce,category:Ae,count:Ce,probability:Re,categorycount:Oe,colorcount:_e,bandcolorcount:Ee}]}}function D(j){if(!j.parcatsViewModel.dragDimension&&j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=s.mouse(this)[1];if(ee<-1)return;var q=j.parcatsViewModel.graphDiv,X=q._fullLayout,J=X._paperdiv.node().getBoundingClientRect(),ie=j.parcatsViewModel.hoveron,ne=this;if(ie==="color"?(M(ne),L(ne,"plotly_hover",s.event)):(C(ne),E(ne,"plotly_hover",s.event)),j.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var oe;ie==="category"?oe=z(q,J,ne):ie==="color"?oe=R(q,J,ne):ie==="dimension"&&(oe=O(q,J,ne)),oe&&y.loneHover(oe,{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:q})}}}function H(j){var ee=j.parcatsViewModel;if(!ee.dragDimension&&(A(ee.pathSelection),T(ee.dimensionSelection.selectAll("g.category")),w(ee.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),y.loneUnhover(ee.graphDiv._fullLayout._hoverlayer.node()),ee.pathSelection.sort(m),ee.hoverinfoItems.indexOf("skip")===-1)){var q=j.parcatsViewModel.hoveron,X=this;q==="color"?L(X,"plotly_unhover",s.event):E(X,"plotly_unhover",s.event)}}function B(j){j.parcatsViewModel.arrangement!=="fixed"&&(j.dragDimensionDisplayInd=j.model.displayInd,j.initialDragDimensionDisplayInds=j.parcatsViewModel.model.dimensions.map(function(ee){return ee.displayInd}),j.dragHasMoved=!1,j.dragCategoryDisplayInd=null,s.select(this).selectAll("g.category").select("rect.catrect").each(function(ee){var q=s.mouse(this)[0],X=s.mouse(this)[1];-2<=q&&q<=ee.width+2&&-2<=X&&X<=ee.height+2&&(j.dragCategoryDisplayInd=ee.model.displayInd,j.initialDragCategoryDisplayInds=j.model.categories.map(function(J){return J.displayInd}),ee.model.dragY=ee.y,t.raiseToTop(this.parentNode),s.select(this.parentNode).selectAll("rect.bandrect").each(function(J){J.y<X&&X<=J.y+J.height&&(j.potentialClickBand=this)}))}),j.parcatsViewModel.dragDimension=j,y.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function $(j){if(j.parcatsViewModel.arrangement!=="fixed"&&(j.dragHasMoved=!0,j.dragDimensionDisplayInd!==null)){var ee=j.dragDimensionDisplayInd,q=ee-1,X=ee+1,J=j.parcatsViewModel.dimensions[ee];if(j.dragCategoryDisplayInd!==null){var ie=J.categories[j.dragCategoryDisplayInd];ie.model.dragY+=s.event.dy;var ne=ie.model.dragY,oe=ie.model.displayInd,se=J.categories,me=se[oe-1],ce=se[oe+1];me!==void 0&&ne<me.y+me.height/2&&(ie.model.displayInd=me.model.displayInd,me.model.displayInd=oe),ce!==void 0&&ne+ie.height>ce.y+ce.height/2&&(ie.model.displayInd=ce.model.displayInd,ce.model.displayInd=oe),j.dragCategoryDisplayInd=ie.model.displayInd}if(j.dragCategoryDisplayInd===null||j.parcatsViewModel.arrangement==="freeform"){J.model.dragX=s.event.x;var pe=j.parcatsViewModel.dimensions[q],xe=j.parcatsViewModel.dimensions[X];pe!==void 0&&J.model.dragX<pe.x+pe.width&&(J.model.displayInd=pe.model.displayInd,pe.model.displayInd=ee),xe!==void 0&&J.model.dragX+J.width>xe.x&&(J.model.displayInd=xe.model.displayInd,xe.model.displayInd=j.dragDimensionDisplayInd),j.dragDimensionDisplayInd=J.model.displayInd}ue(j.parcatsViewModel),fe(j.parcatsViewModel),Z(j.parcatsViewModel),Q(j.parcatsViewModel)}}function W(j){if(j.parcatsViewModel.arrangement!=="fixed"&&j.dragDimensionDisplayInd!==null){s.select(this).selectAll("text").attr("font-weight","normal");var ee={},q=re(j.parcatsViewModel),X=j.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),J=j.initialDragDimensionDisplayInds.some(function(xe,Se){return xe!==X[Se]});J&&X.forEach(function(xe,Se){var Ae=j.parcatsViewModel.model.dimensions[Se].containerInd;ee["dimensions["+Ae+"].displayindex"]=xe});var ie=!1;if(j.dragCategoryDisplayInd!==null){var ne=j.model.categories.map(function(xe){return xe.displayInd});if(ie=j.initialDragCategoryDisplayInds.some(function(xe,Se){return xe!==ne[Se]}),ie){var oe=j.model.categories.slice().sort(function(xe,Se){return xe.displayInd-Se.displayInd}),se=oe.map(function(xe){return xe.categoryValue}),me=oe.map(function(xe){return xe.categoryLabel});ee["dimensions["+j.model.containerInd+"].categoryarray"]=[se],ee["dimensions["+j.model.containerInd+"].ticktext"]=[me],ee["dimensions["+j.model.containerInd+"].categoryorder"]="array"}}if(j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!j.dragHasMoved&&j.potentialClickBand&&(j.parcatsViewModel.hoveron==="color"?L(j.potentialClickBand,"plotly_click",s.event.sourceEvent):E(j.potentialClickBand,"plotly_click",s.event.sourceEvent)),j.model.dragX=null,j.dragCategoryDisplayInd!==null){var ce=j.parcatsViewModel.dimensions[j.dragDimensionDisplayInd].categories[j.dragCategoryDisplayInd];ce.model.dragY=null,j.dragCategoryDisplayInd=null}j.dragDimensionDisplayInd=null,j.parcatsViewModel.dragDimension=null,j.dragHasMoved=null,j.potentialClickBand=null,ue(j.parcatsViewModel),fe(j.parcatsViewModel);var pe=s.transition().duration(300).ease("cubic-in-out");pe.each(function(){Z(j.parcatsViewModel,!0),Q(j.parcatsViewModel,!0)}).each("end",function(){(J||ie)&&h.restyle(j.parcatsViewModel.graphDiv,ee,[q])})}}function re(j){for(var ee,q=j.graphDiv._fullData,X=0;X<q.length;X++)if(j.key===q[X].uid){ee=X;break}return ee}function Q(j,ee){ee===void 0&&(ee=!1);function q(X){return ee?X.transition():X}j.pathSelection.data(function(X){return X.paths},u),q(j.pathSelection).attr("d",function(X){return X.svgD})}function Z(j,ee){ee===void 0&&(ee=!1);function q(se){return ee?se.transition():se}j.dimensionSelection.data(function(se){return se.dimensions},u);var X=j.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},u);q(j.dimensionSelection).attr("transform",function(se){return a(se.x,0)}),q(X).attr("transform",function(se){return a(0,se.y)});var J=X.select(".dimlabel");J.text(function(se,me){return me===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null});var ie=X.select(".catlabel");ie.attr("text-anchor",function(se){return l(se)?"start":"end"}).attr("x",function(se){return l(se)?se.width+5:-5}).each(function(se){var me,ce;l(se)?(me=se.width+5,ce="start"):(me=-5,ce="end"),s.select(this).selectAll("tspan").attr("x",me).attr("text-anchor",ce)});var ne=X.selectAll("rect.bandrect").data(function(se){return se.bands},u),oe=ne.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);ne.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),w(oe),ne.each(function(){t.raiseToTop(this)}),ne.exit().remove()}function K(j,ee,q){var X=q[0],J=ee.margin||{l:80,r:80,t:100,b:80},ie=X.trace,ne=ie.domain,oe=ee.width,se=ee.height,me=Math.floor(oe*(ne.x[1]-ne.x[0])),ce=Math.floor(se*(ne.y[1]-ne.y[0])),pe=ne.x[0]*oe+J.l,xe=ee.height-ne.y[1]*ee.height+J.t,Se=ie.line.shape,Ae;ie.hoverinfo==="all"?Ae=["count","probability"]:Ae=(ie.hoverinfo||"").split("+");var Ce={trace:ie,key:ie.uid,model:X,x:pe,y:xe,width:me,height:ce,hoveron:ie.hoveron,hoverinfoItems:Ae,arrangement:ie.arrangement,bundlecolors:ie.bundlecolors,sortpaths:ie.sortpaths,labelfont:ie.labelfont,categorylabelfont:ie.tickfont,pathShape:Se,dragDimension:null,margin:J,paths:[],dimensions:[],graphDiv:j,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(ue(Ce),fe(Ce)),Ce}function le(j,ee,q,X,J){var ie=[],ne=[],oe,se;for(se=0;se<q.length-1;se++)oe=o(q[se]+j[se],j[se+1]),ie.push(oe(J)),ne.push(oe(1-J));var me="M "+j[0]+","+ee[0];for(me+="l"+q[0]+",0 ",se=1;se<q.length;se++)me+="C"+ie[se-1]+","+ee[se-1]+" "+ne[se-1]+","+ee[se]+" "+j[se]+","+ee[se],me+="l"+q[se]+",0 ";for(me+="l0,"+X+" ",me+="l -"+q[q.length-1]+",0 ",se=q.length-2;se>=0;se--)me+="C"+ne[se]+","+(ee[se+1]+X)+" "+ie[se]+","+(ee[se]+X)+" "+(j[se]+q[se])+","+(ee[se]+X),me+="l-"+q[se]+",0 ";return me+="Z",me}function fe(j){var ee=j.dimensions,q=j.model,X=ee.map(function(Ot){return Ot.categories.map(function(Vt){return Vt.y})}),J=j.model.dimensions.map(function(Ot){return Ot.categories.map(function(Vt){return Vt.displayInd})}),ie=j.model.dimensions.map(function(Ot){return Ot.displayInd}),ne=j.dimensions.map(function(Ot){return Ot.model.dimensionInd}),oe=ee.map(function(Ot){return Ot.x}),se=ee.map(function(Ot){return Ot.width}),me=[];for(var ce in q.paths)q.paths.hasOwnProperty(ce)&&me.push(q.paths[ce]);function pe(Ot){var Vt=Ot.categoryInds.map(function(St,ot){return J[ot][St]}),kt=ne.map(function(St){return Vt[St]});return kt}me.sort(function(Ot,Vt){var kt=pe(Ot),St=pe(Vt);return j.sortpaths==="backward"&&(kt.reverse(),St.reverse()),kt.push(Ot.valueInds[0]),St.push(Vt.valueInds[0]),j.bundlecolors&&(kt.unshift(Ot.rawColor),St.unshift(Vt.rawColor)),kt<St?-1:kt>St?1:0});for(var xe=new Array(me.length),Se=ee[0].model.count,Ae=ee[0].categories.map(function(Ot){return Ot.height}).reduce(function(Ot,Vt){return Ot+Vt}),Ce=0;Ce<me.length;Ce++){var Ee=me[Ce],Oe;Se>0?Oe=Ae*(Ee.count/Se):Oe=0;for(var _e=new Array(X.length),Re=0;Re<Ee.categoryInds.length;Re++){var Ve=Ee.categoryInds[Re],Je=J[Re][Ve],ze=ie[Re];_e[ze]=X[ze][Je],X[ze][Je]+=Oe;var De=j.dimensions[ze].categories[Je],je=De.bands.length,dt=De.bands[je-1];if(dt===void 0||Ee.rawColor!==dt.rawColor){var Et=dt===void 0?0:dt.y+dt.height;De.bands.push({key:Et,color:Ee.color,rawColor:Ee.rawColor,height:Oe,width:De.width,count:Ee.count,y:Et,categoryViewModel:De,parcatsViewModel:j})}else{var $t=De.bands[je-1];$t.height+=Oe,$t.count+=Ee.count}}var wt;j.pathShape==="hspline"?wt=le(oe,_e,se,Oe,.5):wt=le(oe,_e,se,Oe,0),xe[Ce]={key:Ee.valueInds[0],model:Ee,height:Oe,leftXs:oe,topYs:_e,dimWidths:se,svgD:wt,parcatsViewModel:j}}j.paths=xe}function ue(j){var ee=j.model.dimensions.map(function(ne){return{displayInd:ne.displayInd,dimensionInd:ne.dimensionInd}});ee.sort(function(ne,oe){return ne.displayInd-oe.displayInd});var q=[];for(var X in ee){var J=ee[X].dimensionInd,ie=j.model.dimensions[J];q.push(V(j,ie))}j.dimensions=q}function V(j,ee){var q=40,X=16,J=j.model.dimensions.length,ie=ee.displayInd,ne,oe,se;J>1?ne=(j.width-2*q-X)/(J-1):ne=0,oe=q,se=oe+ne*ie;var me=[],ce=j.model.maxCats,pe=ee.categories.length,xe=8,Se=ee.count,Ae=j.height-xe*(ce-1),Ce,Ee,Oe,_e,Re,Ve=(ce-pe)*xe/2,Je=ee.categories.map(function(ze){return{displayInd:ze.displayInd,categoryInd:ze.categoryInd}});for(Je.sort(function(ze,De){return ze.displayInd-De.displayInd}),Re=0;Re<pe;Re++)_e=Je[Re].categoryInd,Ee=ee.categories[_e],Se>0?Ce=Ee.count/Se*Ae:Ce=0,Oe={key:Ee.valueInds[0],model:Ee,width:X,height:Ce,y:Ee.dragY!==null?Ee.dragY:Ve,bands:[],parcatsViewModel:j},Ve=Ve+Ce+xe,me.push(Oe);return{key:ee.dimensionInd,x:ee.dragX!==null?ee.dragX:se,y:0,width:X,model:ee,categories:me,parcatsViewModel:j,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(e,I,F){var s=e("./parcats");I.exports=function(h,y,t,a){var i=h._fullLayout,n=i._paper,r=i._size;s(h,n,y,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},t,a)}},{"./parcats":886}],888:[function(e,I,F){var s=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/layout_attributes"),h=e("../../plots/font_attributes"),y=e("../../plots/domain").attributes,t=e("../../lib/extend").extendFlat,a=e("../../plot_api/plot_template").templatedArray;I.exports={domain:y({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:h({editType:"plot"}),tickfont:h({editType:"plot"}),rangefont:h({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:t({},o.tickvals,{editType:"plot"}),ticktext:t({},o.ticktext,{editType:"plot"}),tickformat:t({},o.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:t({editType:"calc"},s("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(e,I,F){var s=e("./constants"),o=e("@plotly/d3"),h=e("../../lib/gup").keyFun,y=e("../../lib/gup").repeat,t=e("../../lib").sorterAsc,a=e("../../lib").strTranslate,i=s.bar.snapRatio;function n(W,re){return W*(1-i)+re*i}var r=s.bar.snapClose;function f(W,re){return W*(1-r)+re*r}function u(W,re,Q,Z){if(l(Q,Z))return Q;var K=W?-1:1,le=0,fe=re.length-1;if(K<0){var ue=le;le=fe,fe=ue}for(var V=re[le],j=V,ee=le;K*ee<K*fe;ee+=K){var q=ee+K,X=re[q];if(K*Q<K*f(V,X))return n(V,j);if(K*Q<K*X||q===fe)return n(X,V);j=V,V=X}}function l(W,re){for(var Q=0;Q<re.length;Q++)if(W>=re[Q][0]&&W<=re[Q][1])return!0;return!1}function m(W){W.attr("x",-s.bar.captureWidth/2).attr("width",s.bar.captureWidth)}function d(W){W.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function b(W){if(!W.brush.filterSpecified)return"0,"+W.height;for(var re=g(W.brush.filter.getConsolidated(),W.height),Q=[0],Z,K,le,fe=re.length?re[0][0]:null,ue=0;ue<re.length;ue++)Z=re[ue],K=Z[1]-Z[0],Q.push(fe),Q.push(K),le=ue+1,le<re.length&&(fe=re[le][0]-Z[1]);return Q.push(W.height),Q}function g(W,re){return W.map(function(Q){return Q.map(function(Z){return Math.max(0,Z*re)}).sort(t)})}function _(W,re){var Q=s.bar.handleHeight;if(!(re>W[1]+Q||re<W[0]-Q))return re>=.9*W[1]+.1*W[0]?"n":re<=.9*W[0]+.1*W[1]?"s":"ns"}function p(){o.select(document.body).style("cursor",null)}function A(W){W.attr("stroke-dasharray",b)}function c(W,re){var Q=o.select(W).selectAll(".highlight, .highlight-shadow"),Z=re?Q.transition().duration(s.bar.snapDuration).each("end",re):Q;A(Z)}function S(W,re){var Q=W.brush,Z=Q.filterSpecified,K=NaN,le={},fe;if(Z){var ue=W.height,V=Q.filter.getConsolidated(),j=g(V,ue),ee=NaN,q=NaN,X=NaN;for(fe=0;fe<=j.length;fe++){var J=j[fe];if(J&&J[0]<=re&&re<=J[1]){ee=fe;break}else if(q=fe?fe-1:NaN,J&&J[0]>re){X=fe;break}}if(K=ee,isNaN(K)&&(isNaN(q)||isNaN(X)?K=isNaN(q)?X:q:K=re-j[q][1]<j[X][0]-re?q:X),!isNaN(K)){var ie=j[K],ne=_(ie,re);ne&&(le.interval=V[K],le.intervalPix=ie,le.region=ne)}}if(W.ordinal&&!le.region){var oe=W.unitTickvals,se=W.unitToPaddedPx.invert(re);for(fe=0;fe<oe.length;fe++){var me=[oe[Math.max(fe-1,0)]*.25+oe[fe]*.75,oe[Math.min(fe+1,oe.length-1)]*.25+oe[fe]*.75];if(se>=me[0]&&se<=me[1]){le.clickableOrdinalRange=me;break}}}return le}function T(W,re){o.event.sourceEvent.stopPropagation();var Q=re.height-o.mouse(W)[1]-2*s.verticalPadding,Z=re.unitToPaddedPx.invert(Q),K=re.brush,le=S(re,Q),fe=le.interval,ue=K.svgBrush;if(ue.wasDragged=!1,ue.grabbingBar=le.region==="ns",ue.grabbingBar){var V=fe.map(re.unitToPaddedPx);ue.grabPoint=Q-V[0]-s.verticalPadding,ue.barLength=V[1]-V[0]}ue.clickableOrdinalRange=le.clickableOrdinalRange,ue.stayingIntervals=re.multiselect&&K.filterSpecified?K.filter.getConsolidated():[],fe&&(ue.stayingIntervals=ue.stayingIntervals.filter(function(j){return j[0]!==fe[0]&&j[1]!==fe[1]})),ue.startExtent=le.region?fe[le.region==="s"?1:0]:Z,re.parent.inBrushDrag=!0,ue.brushStartCallback()}function x(W,re){o.event.sourceEvent.stopPropagation();var Q=re.height-o.mouse(W)[1]-2*s.verticalPadding,Z=re.brush.svgBrush;Z.wasDragged=!0,Z._dragging=!0,Z.grabbingBar?Z.newExtent=[Q-Z.grabPoint,Q+Z.barLength-Z.grabPoint].map(re.unitToPaddedPx.invert):Z.newExtent=[Z.startExtent,re.unitToPaddedPx.invert(Q)].sort(t),re.brush.filterSpecified=!0,Z.extent=Z.stayingIntervals.concat([Z.newExtent]),Z.brushCallback(re),c(W.parentNode)}function w(W,re){var Q=re.brush,Z=Q.filter,K=Q.svgBrush;K._dragging||(v(W,re),x(W,re),re.brush.svgBrush.wasDragged=!1),K._dragging=!1;var le=o.event;le.sourceEvent.stopPropagation();var fe=K.grabbingBar;if(K.grabbingBar=!1,K.grabLocation=void 0,re.parent.inBrushDrag=!1,p(),!K.wasDragged){K.wasDragged=void 0,K.clickableOrdinalRange?Q.filterSpecified&&re.multiselect?K.extent.push(K.clickableOrdinalRange):(K.extent=[K.clickableOrdinalRange],Q.filterSpecified=!0):fe?(K.extent=K.stayingIntervals,K.extent.length===0&&O(Q)):O(Q),K.brushCallback(re),c(W.parentNode),K.brushEndCallback(Q.filterSpecified?Z.getConsolidated():[]);return}var ue=function(){Z.set(Z.getConsolidated())};if(re.ordinal){var V=re.unitTickvals;V[V.length-1]<V[0]&&V.reverse(),K.newExtent=[u(0,V,K.newExtent[0],K.stayingIntervals),u(1,V,K.newExtent[1],K.stayingIntervals)];var j=K.newExtent[1]>K.newExtent[0];K.extent=K.stayingIntervals.concat(j?[K.newExtent]:[]),K.extent.length||O(Q),K.brushCallback(re),j?c(W.parentNode,ue):(ue(),c(W.parentNode))}else ue();K.brushEndCallback(Q.filterSpecified?Z.getConsolidated():[])}function v(W,re){var Q=re.height-o.mouse(W)[1]-2*s.verticalPadding,Z=S(re,Q),K="crosshair";Z.clickableOrdinalRange?K="pointer":Z.region&&(K=Z.region+"-resize"),o.select(document.body).style("cursor",K)}function C(W){W.on("mousemove",function(re){o.event.preventDefault(),re.parent.inBrushDrag||v(this,re)}).on("mouseleave",function(re){re.parent.inBrushDrag||p()}).call(o.behavior.drag().on("dragstart",function(re){T(this,re)}).on("drag",function(re){x(this,re)}).on("dragend",function(re){w(this,re)}))}function M(W,re){return W[0]-re[0]}function E(W,re){var Q=W.selectAll(".background").data(y);Q.enter().append("rect").classed("background",!0).call(m).call(d).style("pointer-events","auto").attr("transform",a(0,s.verticalPadding)),Q.call(C).attr("height",function(le){return le.height-s.verticalPadding});var Z=W.selectAll(".highlight-shadow").data(y);Z.enter().append("line").classed("highlight-shadow",!0).attr("x",-s.bar.width/2).attr("stroke-width",s.bar.width+s.bar.strokeWidth).attr("stroke",re).attr("opacity",s.bar.strokeOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(le){return le.height}).call(A);var K=W.selectAll(".highlight").data(y);K.enter().append("line").classed("highlight",!0).attr("x",-s.bar.width/2).attr("stroke-width",s.bar.width-s.bar.strokeWidth).attr("stroke",s.bar.fillColor).attr("opacity",s.bar.fillOpacity).attr("stroke-linecap","butt"),K.attr("y1",function(le){return le.height}).call(A)}function L(W,re){var Q=W.selectAll("."+s.cn.axisBrush).data(y,h);Q.enter().append("g").classed(s.cn.axisBrush,!0),E(Q,re)}function z(W){return W.svgBrush.extent.map(function(re){return re.slice()})}function O(W){W.filterSpecified=!1,W.svgBrush.extent=[[-1/0,1/0]]}function R(W){return function(Q){var Z=Q.brush,K=z(Z),le=K.slice();Z.filter.set(le),W()}}function D(W){for(var re=W.slice(),Q=[],Z,K=re.shift();K;){for(Z=K.slice();(K=re.shift())&&K[0]<=Z[1];)Z[1]=Math.max(Z[1],K[1]);Q.push(Z)}return Q.length===1&&Q[0][0]>Q[0][1]&&(Q=[]),Q}function H(){var W=[],re,Q;return{set:function(Z){W=Z.map(function(K){return K.slice().sort(t)}).sort(M),W.length===1&&W[0][0]===-1/0&&W[0][1]===1/0&&(W=[[0,-1]]),re=D(W),Q=W.reduce(function(K,le){return[Math.min(K[0],le[0]),Math.max(K[1],le[1])]},[1/0,-1/0])},get:function(){return W.slice()},getConsolidated:function(){return re},getBounds:function(){return Q}}}function B(W,re,Q,Z,K,le){var fe=H();return fe.set(Q),{filter:fe,filterSpecified:re,svgBrush:{extent:[],brushStartCallback:Z,brushCallback:R(K),brushEndCallback:le}}}function $(W,re){if(Array.isArray(W[0])?(W=W.map(function(Z){return Z.sort(t)}),re.multiselect?W=D(W.sort(M)):W=[W[0]]):W=[W.sort(t)],re.tickvals){var Q=re.tickvals.slice().sort(t);if(W=W.map(function(Z){var K=[u(0,Q,Z[0],[]),u(1,Q,Z[1],[])];if(K[1]>K[0])return K}).filter(function(Z){return Z}),!W.length)return}return W.length>1?W:W[0]}I.exports={makeBrush:B,ensureAxisBrush:L,cleanRanges:$}},{"../../lib":503,"../../lib/gup":500,"./constants":893,"@plotly/d3":58}],890:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":891,"./calc":892,"./defaults":894}],891:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../plots/get_data").getModuleCalcData,h=e("./plot"),y=e("../../constants/xmlns_namespaces");F.name="parcoords",F.plot=function(t){var a=o(t.calcdata,"parcoords")[0];a.length&&h(t,a)},F.clean=function(t,a,i,n){var r=n._has&&n._has("parcoords"),f=a._has&&a._has("parcoords");r&&!f&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},F.toSVG=function(t){var a=t._fullLayout._glimages,i=s.select(t).selectAll(".svg-container"),n=i.filter(function(f,u){return u===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var f=this,u=f.toDataURL("image/png"),l=a.append("svg:image");l.attr({xmlns:y.svg,"xlink:href":u,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})}n.each(r),window.setTimeout(function(){s.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":900,"@plotly/d3":58}],892:[function(e,I,F){var s=e("../../lib").isArrayOrTypedArray,o=e("../../components/colorscale"),h=e("../../lib/gup").wrap;I.exports=function(a,i){var n,r;return o.hasColorscale(i,"line")&&s(i.line.color)?(n=i.line.color,r=o.extractOpts(i.line).colorscale,o.calc(a,i,{vals:n,containerStr:"line",cLetter:"c"})):(n=y(i._length),r=[[0,i.line.color],[1,i.line.color]]),h({lineColor:n,cscale:r})};function y(t){for(var a=new Array(t),i=0;i<t;i++)a[i]=.5;return a}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],893:[function(e,I,F){I.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],894:[function(e,I,F){var s=e("../../lib"),o=e("../../components/colorscale/helpers").hasColorscale,h=e("../../components/colorscale/defaults"),y=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),a=e("../../plots/cartesian/axes"),i=e("./attributes"),n=e("./axisbrush"),r=e("./constants").maxDimensionCount,f=e("./merge_length");function u(m,d,b,g,_){var p=_("line.color",b);if(o(m,"line")&&s.isArrayOrTypedArray(p)){if(p.length)return _("line.colorscale"),h(m,d,g,_,{prefix:"line.",cLetter:"c"}),p.length;d.line.color=b}return 1/0}function l(m,d,b,g){function _(T,x){return s.coerce(m,d,i.dimensions,T,x)}var p=_("values"),A=_("visible");if(p&&p.length||(A=d.visible=!1),A){_("label"),_("tickvals"),_("ticktext"),_("tickformat");var c=_("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:c},a.setConvert(d._ax,g.layout),_("multiselect");var S=_("constraintrange");S&&(d.constraintrange=n.cleanRanges(S,d))}}I.exports=function(d,b,g,_){function p(x,w){return s.coerce(d,b,i,x,w)}var A=d.dimensions;Array.isArray(A)&&A.length>r&&(s.log("parcoords traces support up to "+r+" dimensions at the moment"),A.splice(r));var c=t(d,b,{name:"dimensions",layout:_,handleItemDefaults:l}),S=u(d,b,g,_,p);y(b,_,p),(!Array.isArray(c)||!c.length)&&(b.visible=!1),f(b,c,"values",S);var T={family:_.font.family,size:Math.round(_.font.size/1.2),color:_.font.color};s.coerceFont(p,"labelfont",T),s.coerceFont(p,"tickfont",T),s.coerceFont(p,"rangefont",T),p("labelangle"),p("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":893,"./merge_length":898}],895:[function(e,I,F){var s=e("../../lib").isTypedArray;F.convertTypedArray=function(o){return s(o)?Array.prototype.slice.call(o):o},F.isOrdinal=function(o){return!!o.tickvals},F.isVisible=function(o){return o.visible||!("visible"in o)}},{"../../lib":503}],896:[function(e,I,F){var s=e("./base_index");s.plot=e("./plot"),I.exports=s},{"./base_index":890,"./plot":900}],897:[function(e,I,F){var s=e("glslify"),o=s([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),h=s([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),y=e("./constants").maxDimensionCount,t=e("../../lib"),a=1e-6,i=2048,n=new Uint8Array(4),r=new Uint8Array(4),f={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function u(v){v.read({x:0,y:0,width:1,height:1,data:n})}function l(v,C,M,E,L){var z=v._gl;z.enable(z.SCISSOR_TEST),z.scissor(C,M,E,L),v.clear({color:[0,0,0,0],depth:1})}function m(v,C,M,E,L,z){var O=z.key;function R(D){var H=Math.min(E,L-D*E);D===0&&(window.cancelAnimationFrame(M.currentRafs[O]),delete M.currentRafs[O],l(v,z.scissorX,z.scissorY,z.scissorWidth,z.viewBoxSize[1])),!M.clearOnly&&(z.count=2*H,z.offset=2*D*E,C(z),D*E+H<L&&(M.currentRafs[O]=window.requestAnimationFrame(function(){R(D+1)})),M.drawCompleted=!1)}M.drawCompleted||(u(v),M.drawCompleted=!0),R(0)}function d(v){return Math.max(a,Math.min(1-a,v))}function b(v,C){for(var M=new Array(256),E=0;E<256;E++)M[E]=v(E/255).concat(C);return M}function g(v,C){return(v>>>8*C)%256/255}function _(v,C,M){for(var E=new Array(v*(y+4)),L=0,z=0;z<v;z++){for(var O=0;O<y;O++)E[L++]=O<C.length?C[O].paddedUnitValues[z]:.5;E[L++]=g(z,2),E[L++]=g(z,1),E[L++]=g(z,0),E[L++]=d(M[z])}return E}function p(v,C,M){for(var E=new Array(C*8),L=0,z=0;z<C;z++)for(var O=0;O<2;O++)for(var R=0;R<4;R++){var D=v*4+R,H=M[z*64+D];D===63&&O===0&&(H*=-1),E[L++]=H}return E}function A(v){var C="0"+v;return C.substr(C.length-2)}function c(v){return v<y?"p"+A(v+1)+"_"+A(v+4):"colors"}function S(v,C,M){for(var E=0;E<=y;E+=4)v[c(E)](p(E/4,C,M))}function T(v){for(var C={},M=0;M<=y;M+=4)C[c(M)]=v.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return C}function x(v,C,M,E,L,z,O,R,D,H,B,$,W,re){for(var Q=[[],[]],Z=0;Z<64;Z++)Q[0][Z]=Z===L?1:0,Q[1][Z]=Z===z?1:0;O*=re,R*=re,D*=re,H*=re;var K=v.lines.canvasOverdrag*re,le=v.domain,fe=v.canvasWidth*re,ue=v.canvasHeight*re,V=v.pad.l*re,j=v.pad.b*re,ee=v.layoutHeight*re,q=v.layoutWidth*re,X=v.deselectedLines.color,J=t.extendFlat({key:B,resolution:[fe,ue],viewBoxPos:[O+K,R],viewBoxSize:[D,H],i0:L,i1:z,dim0A:Q[0].slice(0,16),dim0B:Q[0].slice(16,32),dim0C:Q[0].slice(32,48),dim0D:Q[0].slice(48,64),dim1A:Q[1].slice(0,16),dim1B:Q[1].slice(16,32),dim1C:Q[1].slice(32,48),dim1D:Q[1].slice(48,64),drwLayer:$,contextColor:[X[0]/255,X[1]/255,X[2]/255,X[3]<1?X[3]:Math.max(1/255,Math.pow(1/v.lines.color.length,1/3))],scissorX:(E===C?0:O+K)+(V-K)+q*le.x[0],scissorWidth:(E===M?fe-O+K:D+.5)+(E===C?O+K:0),scissorY:R+j+ee*le.y[0],scissorHeight:H,viewportX:V-K+q*le.x[0],viewportY:j+ee*le.y[0],viewportWidth:fe,viewportHeight:ue},W);return J}function w(v){var C=i-1,M=Math.max(0,Math.floor(v[0]*C),0),E=Math.min(C,Math.ceil(v[1]*C),C);return[Math.min(M,E),Math.max(M,E)]}I.exports=function(v,C){var M=C.context,E=C.pick,L=C.regl,z=L._gl,O=z.getParameter(z.ALIASED_LINE_WIDTH_RANGE),R=Math.max(O[0],Math.min(O[1],C.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},H,B,$,W,re=T(L),Q,Z=L.texture(f),K=[];fe(C);var le=L({profile:!1,blend:{enable:M,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!M,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:L.prop("scissorX"),y:L.prop("scissorY"),width:L.prop("scissorWidth"),height:L.prop("scissorHeight")}},viewport:{x:L.prop("viewportX"),y:L.prop("viewportY"),width:L.prop("viewportWidth"),height:L.prop("viewportHeight")},dither:!1,vert:o,frag:h,primitive:"lines",lineWidth:R,attributes:re,uniforms:{resolution:L.prop("resolution"),viewBoxPos:L.prop("viewBoxPos"),viewBoxSize:L.prop("viewBoxSize"),dim0A:L.prop("dim0A"),dim1A:L.prop("dim1A"),dim0B:L.prop("dim0B"),dim1B:L.prop("dim1B"),dim0C:L.prop("dim0C"),dim1C:L.prop("dim1C"),dim0D:L.prop("dim0D"),dim1D:L.prop("dim1D"),loA:L.prop("loA"),hiA:L.prop("hiA"),loB:L.prop("loB"),hiB:L.prop("hiB"),loC:L.prop("loC"),hiC:L.prop("hiC"),loD:L.prop("loD"),hiD:L.prop("hiD"),palette:Z,contextColor:L.prop("contextColor"),maskTexture:L.prop("maskTexture"),drwLayer:L.prop("drwLayer"),maskHeight:L.prop("maskHeight")},offset:L.prop("offset"),count:L.prop("count")});function fe(X){H=X.model,B=X.viewModel,$=B.dimensions.slice(),W=$[0]?$[0].values.length:0;var J=H.lines,ie=E?J.color.map(function(oe,se){return se/J.color.length}):J.color,ne=_(W,$,ie);S(re,W,ne),!M&&!E&&(Z=L.texture(t.extendFlat({data:b(H.unitToColor,255)},f)))}function ue(X){var J,ie,ne,oe=[[],[]];for(ne=0;ne<64;ne++){var se=!X&&ne<$.length?$[ne].brush.filter.getBounds():[-1/0,1/0];oe[0][ne]=se[0],oe[1][ne]=se[1]}var me=i*8,ce=new Array(me);for(J=0;J<me;J++)ce[J]=255;if(!X)for(J=0;J<$.length;J++){var pe=J%8,xe=(J-pe)/8,Se=Math.pow(2,pe),Ae=$[J],Ce=Ae.brush.filter.get();if(!(Ce.length<2)){var Ee=w(Ce[0])[1];for(ie=1;ie<Ce.length;ie++){var Oe=w(Ce[ie]);for(ne=Ee+1;ne<Oe[0];ne++)ce[ne*8+xe]&=~Se;Ee=Math.max(Ee,Oe[1])}}}var _e={shape:[8,i],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ce};return Q?Q(_e):Q=L.texture(_e),{maskTexture:Q,maskHeight:i,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}function V(X,J,ie){var ne=X.length,oe,se,me,ce=1/0,pe=-1/0;for(oe=0;oe<ne;oe++)X[oe].dim0.canvasX<ce&&(ce=X[oe].dim0.canvasX,se=oe),X[oe].dim1.canvasX>pe&&(pe=X[oe].dim1.canvasX,me=oe);ne===0&&l(L,0,0,H.canvasWidth,H.canvasHeight);var xe=ue(M);for(oe=0;oe<ne;oe++){var Se=X[oe],Ae=Se.dim0.crossfilterDimensionIndex,Ce=Se.dim1.crossfilterDimensionIndex,Ee=Se.canvasX,Oe=Se.canvasY,_e=Ee+Se.panelSizeX,Re=Se.plotGlPixelRatio;if(J||!K[Ae]||K[Ae][0]!==Ee||K[Ae][1]!==_e){K[Ae]=[Ee,_e];var Ve=x(H,se,me,oe,Ae,Ce,Ee,Oe,Se.panelSizeX,Se.panelSizeY,Se.dim0.crossfilterDimensionIndex,M?0:E?2:1,xe,Re);D.clearOnly=ie;var Je=J?H.lines.blockLineCount:W;m(L,le,D,Je,W,Ve)}}}function j(X,J){return L.read({x:X,y:J,width:1,height:1,data:r}),r}function ee(X,J,ie,ne){var oe=new Uint8Array(4*ie*ne);return L.read({x:X,y:J,width:ie,height:ne,data:oe}),oe}function q(){v.style["pointer-events"]="none",Z.destroy(),Q&&Q.destroy();for(var X in re)re[X].destroy()}return{render:V,readPixel:j,readPixels:ee,destroy:q,update:fe}}},{"../../lib":503,"./constants":893,glslify:227}],898:[function(e,I,F){I.exports=function(s,o,h,y){y||(y=1/0);var t,a;for(t=0;t<o.length;t++)a=o[t],a.visible&&(y=Math.min(y,a[h].length));for(y===1/0&&(y=0),s._length=y,t=0;t<o.length;t++)a=o[t],a.visible&&(a._length=y);return y}},{}],899:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=o.numberFormat,y=e("color-rgba"),t=e("../../plots/cartesian/axes"),a=o.strRotate,i=o.strTranslate,n=e("../../lib/svg_text_utils"),r=e("../../components/drawing"),f=e("../../components/colorscale"),u=e("../../lib/gup"),l=u.keyFun,m=u.repeat,d=u.unwrap,b=e("./helpers"),g=e("./constants"),_=e("./axisbrush"),p=e("./lines");function A(Q,Z,K){return o.aggNums(Q,null,Z,K)}function c(Q,Z){return T(A(Math.min,Q,Z),A(Math.max,Q,Z))}function S(Q){var Z=Q.range;return Z?T(Z[0],Z[1]):c(Q.values,Q._length)}function T(Q,Z){return(isNaN(Q)||!isFinite(Q))&&(Q=0),(isNaN(Z)||!isFinite(Z))&&(Z=0),Q===Z&&(Q===0?(Q-=1,Z+=1):(Q*=.9,Z*=1.1)),[Q,Z]}function x(Q,Z){return Z?function(K,le){var fe=Z[le];return fe==null?Q(K):fe}:Q}function w(Q,Z,K,le,fe){var ue=S(K);return le?s.scale.ordinal().domain(le.map(x(h(K.tickformat),fe))).range(le.map(function(V){var j=(V-ue[0])/(ue[1]-ue[0]);return Q-Z+j*(2*Z-Q)})):s.scale.linear().domain(ue).range([Q-Z,Z])}function v(Q,Z){return s.scale.linear().range([Z,Q-Z])}function C(Q,Z){return s.scale.linear().domain(S(Q)).range([Z,1-Z])}function M(Q){if(!!Q.tickvals){var Z=S(Q);return s.scale.ordinal().domain(Q.tickvals).range(Q.tickvals.map(function(K){return(K-Z[0])/(Z[1]-Z[0])}))}}function E(Q){var Z=Q.map(function(ue){return ue[0]}),K=Q.map(function(ue){var V=y(ue[1]);return s.rgb("rgb("+V[0]+","+V[1]+","+V[2]+")")}),le=function(ue){return function(V){return V[ue]}},fe="rgb".split("").map(function(ue){return s.scale.linear().clamp(!0).domain(Z).range(K.map(le(ue)))});return function(ue){return fe.map(function(V){return V(ue)})}}function L(Q){return Q.dimensions.some(function(Z){return Z.brush.filterSpecified})}function z(Q,Z,K){var le=d(Z),fe=le.trace,ue=b.convertTypedArray(le.lineColor),V=fe.line,j={color:y(g.deselectedLineColor)},ee=f.extractOpts(V),q=ee.reversescale?f.flipScale(le.cscale):le.cscale,X=fe.domain,J=fe.dimensions,ie=Q.width,ne=fe.labelangle,oe=fe.labelside,se=fe.labelfont,me=fe.tickfont,ce=fe.rangefont,pe=o.extendDeepNoArrays({},V,{color:ue.map(s.scale.linear().domain(S({values:ue,range:[ee.min,ee.max],_length:fe._length}))),blockLineCount:g.blockLineCount,canvasOverdrag:g.overdrag*g.canvasPixelRatio}),xe=Math.floor(ie*(X.x[1]-X.x[0])),Se=Math.floor(Q.height*(X.y[1]-X.y[0])),Ae=Q.margin||{l:80,r:80,t:100,b:80},Ce=xe,Ee=Se;return{key:K,colCount:J.filter(b.isVisible).length,dimensions:J,tickDistance:g.tickDistance,unitToColor:E(q),lines:pe,deselectedLines:j,labelAngle:ne,labelSide:oe,labelFont:se,tickFont:me,rangeFont:ce,layoutWidth:ie,layoutHeight:Q.height,domain:X,translateX:X.x[0]*ie,translateY:Q.height-X.y[1]*Q.height,pad:Ae,canvasWidth:Ce*g.canvasPixelRatio+2*pe.canvasOverdrag,canvasHeight:Ee*g.canvasPixelRatio,width:Ce,height:Ee,canvasPixelRatio:g.canvasPixelRatio}}function O(Q,Z,K){var le=K.width,fe=K.height,ue=K.dimensions,V=K.canvasPixelRatio,j=function(ie){return le*ie/Math.max(1,K.colCount-1)},ee=g.verticalPadding/fe,q=v(fe,g.verticalPadding),X={key:K.key,xScale:j,model:K,inBrushDrag:!1},J={};return X.dimensions=ue.filter(b.isVisible).map(function(ie,ne){var oe=C(ie,ee),se=J[ie.label];J[ie.label]=(se||0)+1;var me=ie.label+(se?"__"+se:""),ce=ie.constraintrange,pe=ce&&ce.length;pe&&!Array.isArray(ce[0])&&(ce=[ce]);var xe=pe?ce.map(function(ze){return ze.map(oe)}):[[-1/0,1/0]],Se=function(){var ze=X;ze.focusLayer&&ze.focusLayer.render(ze.panels,!0);var De=L(ze);!Q.contextShown()&&De?(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0),Q.contextShown(!0)):Q.contextShown()&&!De&&(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0,!0),Q.contextShown(!1))},Ae=ie.values;Ae.length>ie._length&&(Ae=Ae.slice(0,ie._length));var Ce=ie.tickvals,Ee;function Oe(ze,De){return{val:ze,text:Ee[De]}}function _e(ze,De){return ze.val-De.val}if(Array.isArray(Ce)&&Ce.length){Ee=ie.ticktext,!Array.isArray(Ee)||!Ee.length?Ee=Ce.map(h(ie.tickformat)):Ee.length>Ce.length?Ee=Ee.slice(0,Ce.length):Ce.length>Ee.length&&(Ce=Ce.slice(0,Ee.length));for(var Re=1;Re<Ce.length;Re++)if(Ce[Re]<Ce[Re-1]){for(var Ve=Ce.map(Oe).sort(_e),Je=0;Je<Ce.length;Je++)Ce[Je]=Ve[Je].val,Ee[Je]=Ve[Je].text;break}}else Ce=void 0;return Ae=b.convertTypedArray(Ae),{key:me,label:ie.label,tickFormat:ie.tickformat,tickvals:Ce,ticktext:Ee,ordinal:b.isOrdinal(ie),multiselect:ie.multiselect,xIndex:ne,crossfilterDimensionIndex:ne,visibleIndex:ie._index,height:fe,values:Ae,paddedUnitValues:Ae.map(oe),unitTickvals:Ce&&Ce.map(oe),xScale:j,x:j(ne),canvasX:j(ne)*V,unitToPaddedPx:q,domainScale:w(fe,g.verticalPadding,ie,Ce,Ee),ordinalScale:M(ie),parent:X,model:K,brush:_.makeBrush(Q,pe,xe,function(){Q.linePickActive(!1)},Se,function(ze){if(X.focusLayer.render(X.panels,!0),X.pickLayer&&X.pickLayer.render(X.panels,!0),Q.linePickActive(!0),Z&&Z.filterChanged){var De=oe.invert,je=ze.map(function(dt){return dt.map(De).sort(o.sorterAsc)}).sort(function(dt,Et){return dt[0]-Et[0]});Z.filterChanged(X.key,ie._index,je)}})}}),X}function R(Q){Q.classed(g.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function D(){var Q=!0,Z=!1;return{linePickActive:function(K){return arguments.length?Q=!!K:Q},contextShown:function(K){return arguments.length?Z=!!K:Z}}}function H(Q,Z){var K=Z==="top"?1:-1,le=Q*Math.PI/180,fe=Math.sin(le),ue=Math.cos(le);return{dir:K,dx:fe,dy:ue,degrees:Q}}function B(Q,Z,K){for(var le=Z.panels||(Z.panels=[]),fe=Q.data(),ue=0;ue<fe.length-1;ue++){var V=le[ue]||(le[ue]={}),j=fe[ue],ee=fe[ue+1];V.dim0=j,V.dim1=ee,V.canvasX=j.canvasX,V.panelSizeX=ee.canvasX-j.canvasX,V.panelSizeY=Z.model.canvasHeight,V.y=0,V.canvasY=0,V.plotGlPixelRatio=K}}function $(Q){for(var Z=0;Z<Q.length;Z++)for(var K=0;K<Q[Z].length;K++)for(var le=Q[Z][K].trace,fe=le.dimensions,ue=0;ue<fe.length;ue++){var V=fe[ue].values,j=fe[ue]._ax;j&&(j.range?j.range=T(j.range[0],j.range[1]):j.range=c(V,le._length),j.dtick||(j.dtick=.01*(Math.abs(j.range[1]-j.range[0])||1)),j.tickformat=fe[ue].tickformat,t.calcTicks(j),j.cleanRange())}}function W(Q,Z){return t.tickText(Q._ax,Z,!1).text}function re(Q,Z){if(Q.ordinal)return"";var K=Q.domainScale.domain(),le=K[Z?K.length-1:0];return W(Q.model.dimensions[Q.visibleIndex],le)}I.exports=function(Z,K,le,fe){var ue=Z._fullLayout,V=ue._toppaper,j=ue._glcontainer,ee=Z._context.plotGlPixelRatio,q=Z._fullLayout.paper_bgcolor;$(K);var X=D(),J=K.filter(function(Ve){return d(Ve).trace.visible}).map(z.bind(0,le)).map(O.bind(0,X,fe));j.each(function(Ve,Je){return o.extendFlat(Ve,J[Je])});var ie=j.selectAll(".gl-canvas").each(function(Ve){Ve.viewModel=J[0],Ve.viewModel.plotGlPixelRatio=ee,Ve.viewModel.paperColor=q,Ve.model=Ve.viewModel?Ve.viewModel.model:null}),ne=null,oe=ie.filter(function(Ve){return Ve.pick});oe.style("pointer-events","auto").on("mousemove",function(Ve){if(X.linePickActive()&&Ve.lineLayer&&fe&&fe.hover){var Je=s.event,ze=this.width,De=this.height,je=s.mouse(this),dt=je[0],Et=je[1];if(dt<0||Et<0||dt>=ze||Et>=De)return;var $t=Ve.lineLayer.readPixel(dt,De-1-Et),wt=$t[3]!==0,Ot=wt?$t[2]+256*($t[1]+256*$t[0]):null,Vt={x:dt,y:Et,clientX:Je.clientX,clientY:Je.clientY,dataIndex:Ve.model.key,curveNumber:Ot};Ot!==ne&&(wt?fe.hover(Vt):fe.unhover&&fe.unhover(Vt),ne=Ot)}}),ie.style("opacity",function(Ve){return Ve.pick?0:1}),V.style("background","rgba(255, 255, 255, 0)");var se=V.selectAll("."+g.cn.parcoords).data(J,l);se.exit().remove(),se.enter().append("g").classed(g.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),se.attr("transform",function(Ve){return i(Ve.model.translateX,Ve.model.translateY)});var me=se.selectAll("."+g.cn.parcoordsControlView).data(m,l);me.enter().append("g").classed(g.cn.parcoordsControlView,!0),me.attr("transform",function(Ve){return i(Ve.model.pad.l,Ve.model.pad.t)});var ce=me.selectAll("."+g.cn.yAxis).data(function(Ve){return Ve.dimensions},l);ce.enter().append("g").classed(g.cn.yAxis,!0),me.each(function(Ve){B(ce,Ve,ee)}),ie.each(function(Ve){if(Ve.viewModel){!Ve.lineLayer||fe?Ve.lineLayer=p(this,Ve):Ve.lineLayer.update(Ve),(Ve.key||Ve.key===0)&&(Ve.viewModel[Ve.key]=Ve.lineLayer);var Je=!Ve.context||fe;Ve.lineLayer.render(Ve.viewModel.panels,Je)}}),ce.attr("transform",function(Ve){return i(Ve.xScale(Ve.xIndex),0)}),ce.call(s.behavior.drag().origin(function(Ve){return Ve}).on("drag",function(Ve){var Je=Ve.parent;X.linePickActive(!1),Ve.x=Math.max(-g.overdrag,Math.min(Ve.model.width+g.overdrag,s.event.x)),Ve.canvasX=Ve.x*Ve.model.canvasPixelRatio,ce.sort(function(ze,De){return ze.x-De.x}).each(function(ze,De){ze.xIndex=De,ze.x=Ve===ze?ze.x:ze.xScale(ze.xIndex),ze.canvasX=ze.x*ze.model.canvasPixelRatio}),B(ce,Je,ee),ce.filter(function(ze){return Math.abs(Ve.xIndex-ze.xIndex)!==0}).attr("transform",function(ze){return i(ze.xScale(ze.xIndex),0)}),s.select(this).attr("transform",i(Ve.x,0)),ce.each(function(ze,De,je){je===Ve.parent.key&&(Je.dimensions[De]=ze)}),Je.contextLayer&&Je.contextLayer.render(Je.panels,!1,!L(Je)),Je.focusLayer.render&&Je.focusLayer.render(Je.panels)}).on("dragend",function(Ve){var Je=Ve.parent;Ve.x=Ve.xScale(Ve.xIndex),Ve.canvasX=Ve.x*Ve.model.canvasPixelRatio,B(ce,Je,ee),s.select(this).attr("transform",function(ze){return i(ze.x,0)}),Je.contextLayer&&Je.contextLayer.render(Je.panels,!1,!L(Je)),Je.focusLayer&&Je.focusLayer.render(Je.panels),Je.pickLayer&&Je.pickLayer.render(Je.panels,!0),X.linePickActive(!0),fe&&fe.axesMoved&&fe.axesMoved(Je.key,Je.dimensions.map(function(ze){return ze.crossfilterDimensionIndex}))})),ce.exit().remove();var pe=ce.selectAll("."+g.cn.axisOverlays).data(m,l);pe.enter().append("g").classed(g.cn.axisOverlays,!0),pe.selectAll("."+g.cn.axis).remove();var xe=pe.selectAll("."+g.cn.axis).data(m,l);xe.enter().append("g").classed(g.cn.axis,!0),xe.each(function(Ve){var Je=Ve.model.height/Ve.model.tickDistance,ze=Ve.domainScale,De=ze.domain();s.select(this).call(s.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Je,Ve.tickFormat).tickValues(Ve.ordinal?De:null).tickFormat(function(je){return b.isOrdinal(Ve)?je:W(Ve.model.dimensions[Ve.visibleIndex],je)}).scale(ze)),r.font(xe.selectAll("text"),Ve.model.tickFont)}),xe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),xe.selectAll("text").style("text-shadow",n.makeTextShadow(q)).style("cursor","default");var Se=pe.selectAll("."+g.cn.axisHeading).data(m,l);Se.enter().append("g").classed(g.cn.axisHeading,!0);var Ae=Se.selectAll("."+g.cn.axisTitle).data(m,l);Ae.enter().append("text").classed(g.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Ae.text(function(Ve){return Ve.label}).each(function(Ve){var Je=s.select(this);r.font(Je,Ve.model.labelFont),n.convertToTspans(Je,Z)}).attr("transform",function(Ve){var Je=H(Ve.model.labelAngle,Ve.model.labelSide),ze=g.axisTitleOffset;return(Je.dir>0?"":i(0,2*ze+Ve.model.height))+a(Je.degrees)+i(-ze*Je.dx,-ze*Je.dy)}).attr("text-anchor",function(Ve){var Je=H(Ve.model.labelAngle,Ve.model.labelSide),ze=Math.abs(Je.dx),De=Math.abs(Je.dy);return 2*ze>De?Je.dir*Je.dx<0?"start":"end":"middle"});var Ce=pe.selectAll("."+g.cn.axisExtent).data(m,l);Ce.enter().append("g").classed(g.cn.axisExtent,!0);var Ee=Ce.selectAll("."+g.cn.axisExtentTop).data(m,l);Ee.enter().append("g").classed(g.cn.axisExtentTop,!0),Ee.attr("transform",i(0,-g.axisExtentOffset));var Oe=Ee.selectAll("."+g.cn.axisExtentTopText).data(m,l);Oe.enter().append("text").classed(g.cn.axisExtentTopText,!0).call(R),Oe.text(function(Ve){return re(Ve,!0)}).each(function(Ve){r.font(s.select(this),Ve.model.rangeFont)});var _e=Ce.selectAll("."+g.cn.axisExtentBottom).data(m,l);_e.enter().append("g").classed(g.cn.axisExtentBottom,!0),_e.attr("transform",function(Ve){return i(0,Ve.model.height+g.axisExtentOffset)});var Re=_e.selectAll("."+g.cn.axisExtentBottomText).data(m,l);Re.enter().append("text").classed(g.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(R),Re.text(function(Ve){return re(Ve,!1)}).each(function(Ve){r.font(s.select(this),Ve.model.rangeFont)}),_.ensureAxisBrush(pe,q)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":893,"./helpers":895,"./lines":897,"@plotly/d3":58,"color-rgba":91}],900:[function(e,I,i){var s=e("./parcoords"),o=e("../../lib/prepare_regl"),h=e("./helpers").isVisible,y={};function t(n,r,f){var u=r.indexOf(f),l=n.indexOf(u);return l===-1&&(l+=r.length),l}function a(n,r){return function(u,l){return t(n,r,u)-t(n,r,l)}}var i=I.exports=function(r,f){var u=r._fullLayout,l=o(r,[],y);if(!!l){var m={},d={},b={},g={},_=u._size;f.forEach(function(T,x){var w=T[0].trace;b[x]=w.index;var v=g[x]=w._fullInput.index;m[x]=r.data[v].dimensions,d[x]=r.data[v].dimensions.slice()});var p=function(T,x,w){var v=d[T][x],C=w.map(function(R){return R.slice()}),M="dimensions["+x+"].constraintrange",E=u._tracePreGUI[r._fullData[b[T]]._fullInput.uid];if(E[M]===void 0){var L=v.constraintrange;E[M]=L||null}var z=r._fullData[b[T]].dimensions[x];C.length?(C.length===1&&(C=C[0]),v.constraintrange=C,z.constraintrange=C.slice(),C=[C]):(delete v.constraintrange,delete z.constraintrange,C=null);var O={};O[M]=C,r.emit("plotly_restyle",[O,[g[T]]])},A=function(T){r.emit("plotly_hover",T)},c=function(T){r.emit("plotly_unhover",T)},S=function(T,x){var w=a(x,d[T].filter(h));m[T].sort(w),d[T].filter(function(v){return!h(v)}).sort(function(v){return d[T].indexOf(v)}).forEach(function(v){m[T].splice(m[T].indexOf(v),1),m[T].splice(d[T].indexOf(v),0,v)}),r.emit("plotly_restyle",[{dimensions:[m[T]]},[g[T]]])};s(r,f,{width:_.w,height:_.h,margin:{t:_.t,r:_.r,b:_.b,l:_.l}},{filterChanged:p,hover:A,unhover:c,axesMoved:S})}};i.reglPrecompiled=y},{"../../lib/prepare_regl":516,"./helpers":895,"./parcoords":899}],901:[function(e,I,F){var s=e("../../plots/attributes"),o=e("../../plots/domain").attributes,h=e("../../plots/font_attributes"),y=e("../../components/color/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../lib/extend").extendFlat,n=h({editType:"plot",arrayOk:!0,colorEditType:"plot"});I.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:y.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:i({},s.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:i({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:i({},n,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:o({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:i({},n,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],902:[function(e,I,F){var s=e("../../plots/plots");F.name="pie",F.plot=function(o,h,y,t){s.plotBasePlot(F.name,o,h,y,t)},F.clean=function(o,h,y,t){s.cleanBasePlot(F.name,o,h,y,t)}},{"../../plots/plots":619}],903:[function(e,I,F){var s=e("fast-isnumeric"),o=e("tinycolor2"),h=e("../../components/color"),y={};function t(r,f){var u=[],l=r._fullLayout,m=l.hiddenlabels||[],d=f.labels,b=f.marker.colors||[],g=f.values,_=f._length,p=f._hasValues&&_,A,c;if(f.dlabel)for(d=new Array(_),A=0;A<_;A++)d[A]=String(f.label0+A*f.dlabel);var S={},T=a(l["_"+f.type+"colormap"]),x=0,w=!1;for(A=0;A<_;A++){var v,C,M;if(p){if(v=g[A],!s(v))continue;v=+v}else v=1;C=d[A],(C===void 0||C==="")&&(C=A),C=String(C);var E=S[C];E===void 0?(S[C]=u.length,M=m.indexOf(C)!==-1,M||(x+=v),u.push({v,label:C,color:T(b[A],C),i:A,pts:[A],hidden:M})):(w=!0,c=u[E],c.v+=v,c.pts.push(A),c.hidden||(x+=v),c.color===!1&&b[A]&&(c.color=T(b[A],C)))}u=u.filter(function(z){return z.v>=0});var L=f.type==="funnelarea"?w:f.sort;return L&&u.sort(function(z,O){return O.v-z.v}),u[0]&&(u[0].vTotal=x),u}function a(r){return function(u,l){return!u||(u=o(u),!u.isValid())?!1:(u=h.addOpacity(u,u.getAlpha()),r[l]||(r[l]=u),u)}}function i(r,f){var u=(f||{}).type;u||(u="pie");var l=r._fullLayout,m=r.calcdata,d=l[u+"colorway"],b=l["_"+u+"colormap"];l["extend"+u+"colors"]&&(d=n(d,y));for(var g=0,_=0;_<m.length;_++){var p=m[_],A=p[0].trace.type;if(A===u)for(var c=0;c<p.length;c++){var S=p[c];S.color===!1&&(b[S.label]?S.color=b[S.label]:(b[S.label]=S.color=d[g%d.length],g++))}}}function n(r,f){var u,l=JSON.stringify(r),m=f[l];if(!m){for(m=r.slice(),u=0;u<r.length;u++)m.push(o(r[u]).lighten(20).toHexString());for(u=0;u<r.length;u++)m.push(o(r[u]).darken(20).toHexString());f[l]=m}return m}I.exports={calc:t,crossTraceCalc:i,makePullColorFn:a,generateExtendedColors:n}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],904:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("./attributes"),y=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText;function a(n,r){var f=Array.isArray(n),u=o.isArrayOrTypedArray(r),l=Math.min(f?n.length:1/0,u?r.length:1/0);if(isFinite(l)||(l=0),l&&u){for(var m,d=0;d<l;d++){var b=r[d];if(s(b)&&b>0){m=!0;break}}m||(l=0)}return{hasLabels:f,hasValues:u,len:l}}function i(n,r,f,u){function l(M,E){return o.coerce(n,r,h,M,E)}var m=l("labels"),d=l("values"),b=a(m,d),g=b.len;if(r._hasLabels=b.hasLabels,r._hasValues=b.hasValues,!r._hasLabels&&r._hasValues&&(l("label0"),l("dlabel")),!g){r.visible=!1;return}r._length=g;var _=l("marker.line.width");_&&l("marker.line.color"),l("marker.colors"),l("scalegroup");var p=l("text"),A=l("texttemplate"),c;if(A||(c=l("textinfo",Array.isArray(p)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),A||c&&c!=="none"){var S=l("textposition");t(n,r,u,l,S,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var T=Array.isArray(S)||S==="auto",x=T||S==="outside";x&&l("automargin"),(S==="inside"||S==="auto"||Array.isArray(S))&&l("insidetextorientation")}y(r,u,l);var w=l("hole"),v=l("title.text");if(v){var C=l("title.position",w?"middle center":"top center");!w&&C==="middle center"&&(r.title.position="top center"),o.coerceFont(l,"title.font",u.font)}l("sort"),l("direction"),l("rotation"),l("pull")}I.exports={handleLabelsAndValues:a,supplyDefaults:i}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":901,"fast-isnumeric":190}],905:[function(e,I,F){var s=e("../../components/fx/helpers").appendArrayMultiPointValues;I.exports=function(h,y){var t={curveNumber:y.index,pointNumbers:h.pts,data:y._input,fullData:y,label:h.label,color:h.color,value:h.v,percent:h.percent,text:h.text,bbox:h.bbox,v:h.v};return h.pts.length===1&&(t.pointNumber=t.i=h.pts[0]),s(t,y,h.pts),y.type==="funnelarea"&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":402}],906:[function(e,I,F){var s=e("../../lib");function o(h){return h.indexOf("e")!==-1?h.replace(/[.]?0+e/,"e"):h.indexOf(".")!==-1?h.replace(/[.]?0+$/,""):h}F.formatPiePercent=function(y,t){var a=o((y*100).toPrecision(3));return s.numSeparate(a,t)+"%"},F.formatPieValue=function(y,t){var a=o(y.toPrecision(10));return s.numSeparate(a,t)},F.getFirstFilled=function(y,t){if(!!Array.isArray(y))for(var a=0;a<t.length;a++){var i=y[t[a]];if(i||i===0||i==="")return i}},F.castOption=function(y,t){if(Array.isArray(y))return F.getFirstFilled(y,t);if(y)return y},F.getRotationAngle=function(h){return(h==="auto"?0:h)*Math.PI/180}},{"../../lib":503}],907:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":901,"./base_plot":902,"./calc":903,"./defaults":904,"./layout_attributes":908,"./layout_defaults":909,"./plot":910,"./style":911,"./style_one":912}],908:[function(e,I,F){I.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],909:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(y,t){function a(i,n){return s.coerce(y,t,o,i,n)}a("hiddenlabels"),a("piecolorway",t.colorway),a("extendpiecolors")}},{"../../lib":503,"./layout_attributes":908}],910:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../plots/plots"),h=e("../../components/fx"),y=e("../../components/color"),t=e("../../components/drawing"),a=e("../../lib"),i=a.strScale,n=a.strTranslate,r=e("../../lib/svg_text_utils"),f=e("../bar/uniform_text"),u=f.recordMinTextSize,l=f.clearMinTextSize,m=e("../bar/constants").TEXTPAD,d=e("./helpers"),b=e("./event_data"),g=e("../../lib").isValidTextValue;function _(ue,V){var j=ue._fullLayout,ee=j._size;l("pie",j),T(V,ue),re(V,ee);var q=a.makeTraceGroups(j._pielayer,V,"trace").each(function(X){var J=s.select(this),ie=X[0],ne=ie.trace;Z(X),J.attr("stroke-linejoin","round"),J.each(function(){var oe=s.select(this).selectAll("g.slice").data(X);oe.enter().append("g").classed("slice",!0),oe.exit().remove();var se=[[[],[]],[[],[]]],me=!1;oe.each(function(Oe,_e){if(Oe.hidden){s.select(this).selectAll("path,g").remove();return}Oe.pointNumber=Oe.i,Oe.curveNumber=ne.index,se[Oe.pxmid[1]<0?0:1][Oe.pxmid[0]<0?0:1].push(Oe);var Re=ie.cx,Ve=ie.cy,Je=s.select(this),ze=Je.selectAll("path.surface").data([Oe]);if(ze.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Je.call(A,ue,X),ne.pull){var De=+d.castOption(ne.pull,Oe.pts)||0;De>0&&(Re+=De*Oe.pxmid[0],Ve+=De*Oe.pxmid[1])}Oe.cxFinal=Re,Oe.cyFinal=Ve;function je(kt,St,ot,ht){var Ke=ht*(St[0]-kt[0]),Pe=ht*(St[1]-kt[1]);return"a"+ht*ie.r+","+ht*ie.r+" 0 "+Oe.largeArc+(ot?" 1 ":" 0 ")+Ke+","+Pe}var dt=ne.hole;if(Oe.v===ie.vTotal){var Et="M"+(Re+Oe.px0[0])+","+(Ve+Oe.px0[1])+je(Oe.px0,Oe.pxmid,!0,1)+je(Oe.pxmid,Oe.px0,!0,1)+"Z";dt?ze.attr("d","M"+(Re+dt*Oe.px0[0])+","+(Ve+dt*Oe.px0[1])+je(Oe.px0,Oe.pxmid,!1,dt)+je(Oe.pxmid,Oe.px0,!1,dt)+"Z"+Et):ze.attr("d",Et)}else{var $t=je(Oe.px0,Oe.px1,!0,1);if(dt){var wt=1-dt;ze.attr("d","M"+(Re+dt*Oe.px1[0])+","+(Ve+dt*Oe.px1[1])+je(Oe.px1,Oe.px0,!1,dt)+"l"+wt*Oe.px0[0]+","+wt*Oe.px0[1]+$t+"Z")}else ze.attr("d","M"+Re+","+Ve+"l"+Oe.px0[0]+","+Oe.px0[1]+$t+"Z")}le(ue,Oe,ie);var Ot=d.castOption(ne.textposition,Oe.pts),Vt=Je.selectAll("g.slicetext").data(Oe.text&&Ot!=="none"?[0]:[]);Vt.enter().append("g").classed("slicetext",!0),Vt.exit().remove(),Vt.each(function(){var kt=a.ensureSingle(s.select(this),"text","",function(ut){ut.attr("data-notex",1)}),St=a.ensureUniformFontSize(ue,Ot==="outside"?c(ne,Oe,j.font):S(ne,Oe,j.font));kt.text(Oe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(t.font,St).call(r.convertToTspans,ue);var ot=t.bBox(kt.node()),ht;if(Ot==="outside")ht=O(ot,Oe);else if(ht=x(ot,Oe,ie),Ot==="auto"&&ht.scale<1){var Ke=a.ensureUniformFontSize(ue,ne.outsidetextfont);kt.call(t.font,Ke),ot=t.bBox(kt.node()),ht=O(ot,Oe)}var Pe=ht.textPosAngle,We=Pe===void 0?Oe.pxmid:K(ie.r,Pe);if(ht.targetX=Re+We[0]*ht.rCenter+(ht.x||0),ht.targetY=Ve+We[1]*ht.rCenter+(ht.y||0),fe(ht,ot),ht.outside){var Qe=ht.targetY;Oe.yLabelMin=Qe-ot.height/2,Oe.yLabelMid=Qe,Oe.yLabelMax=Qe+ot.height/2,Oe.labelExtraX=0,Oe.labelExtraY=0,me=!0}ht.fontSize=St.size,u(ne.type,ht,j),X[_e].transform=ht,kt.attr("transform",a.getTextTransform(ht))})});var ce=s.select(this).selectAll("g.titletext").data(ne.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var Oe=a.ensureSingle(s.select(this),"text","",function(Ve){Ve.attr("data-notex",1)}),_e=ne.title.text;ne._meta&&(_e=a.templateString(_e,ne._meta)),Oe.text(_e).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(t.font,ne.title.font).call(r.convertToTspans,ue);var Re;ne.title.position==="middle center"?Re=R(ie):Re=D(ie,ee),Oe.attr("transform",n(Re.x,Re.y)+i(Math.min(1,Re.scale))+n(Re.tx,Re.ty))}),me&&W(se,ne),p(oe,ne),me&&ne.automargin){var pe=t.bBox(J.node()),xe=ne.domain,Se=ee.w*(xe.x[1]-xe.x[0]),Ae=ee.h*(xe.y[1]-xe.y[0]),Ce=(.5*Se-ie.r)/ee.w,Ee=(.5*Ae-ie.r)/ee.h;o.autoMargin(ue,"pie."+ne.uid+".automargin",{xl:xe.x[0]-Ce,xr:xe.x[1]+Ce,yb:xe.y[0]-Ee,yt:xe.y[1]+Ee,l:Math.max(ie.cx-ie.r-pe.left,0),r:Math.max(pe.right-(ie.cx+ie.r),0),b:Math.max(pe.bottom-(ie.cy+ie.r),0),t:Math.max(ie.cy-ie.r-pe.top,0),pad:5})}})});setTimeout(function(){q.selectAll("tspan").each(function(){var X=s.select(this);X.attr("dy")&&X.attr("dy",X.attr("dy"))})},0)}function p(ue,V){ue.each(function(j){var ee=s.select(this);if(!j.labelExtraX&&!j.labelExtraY){ee.select("path.textline").remove();return}var q=ee.select("g.slicetext text");j.transform.targetX+=j.labelExtraX,j.transform.targetY+=j.labelExtraY,q.attr("transform",a.getTextTransform(j.transform));var X=j.cxFinal+j.pxmid[0],J=j.cyFinal+j.pxmid[1],ie="M"+X+","+J,ne=(j.yLabelMax-j.yLabelMin)*(j.pxmid[0]<0?-1:1)/4;if(j.labelExtraX){var oe=j.labelExtraX*j.pxmid[1]/j.pxmid[0],se=j.yLabelMid+j.labelExtraY-(j.cyFinal+j.pxmid[1]);Math.abs(oe)>Math.abs(se)?ie+="l"+se*j.pxmid[0]/j.pxmid[1]+","+se+"H"+(X+j.labelExtraX+ne):ie+="l"+j.labelExtraX+","+oe+"v"+(se-oe)+"h"+ne}else ie+="V"+(j.yLabelMid+j.labelExtraY)+"h"+ne;a.ensureSingle(ee,"path","textline").call(y.stroke,V.outsidetextfont.color).attr({"stroke-width":Math.min(2,V.outsidetextfont.size/8),d:ie,fill:"none"})})}function A(ue,V,j){var ee=j[0],q=ee.cx,X=ee.cy,J=ee.trace,ie=J.type==="funnelarea";"_hasHoverLabel"in J||(J._hasHoverLabel=!1),"_hasHoverEvent"in J||(J._hasHoverEvent=!1),ue.on("mouseover",function(ne){var oe=V._fullLayout,se=V._fullData[J.index];if(!(V._dragging||oe.hovermode===!1)){var me=se.hoverinfo;if(Array.isArray(me)&&(me=h.castHoverinfo({hoverinfo:[d.castOption(me,ne.pts)],_module:J._module},oe,0)),me==="all"&&(me="label+text+value+percent+name"),se.hovertemplate||me!=="none"&&me!=="skip"&&me){var ce=ne.rInscribed||0,pe=q+ne.pxmid[0]*(1-ce),xe=X+ne.pxmid[1]*(1-ce),Se=oe.separators,Ae=[];if(me&&me.indexOf("label")!==-1&&Ae.push(ne.label),ne.text=d.castOption(se.hovertext||se.text,ne.pts),me&&me.indexOf("text")!==-1){var Ce=ne.text;a.isValidTextValue(Ce)&&Ae.push(Ce)}ne.value=ne.v,ne.valueLabel=d.formatPieValue(ne.v,Se),me&&me.indexOf("value")!==-1&&Ae.push(ne.valueLabel),ne.percent=ne.v/ee.vTotal,ne.percentLabel=d.formatPiePercent(ne.percent,Se),me&&me.indexOf("percent")!==-1&&Ae.push(ne.percentLabel);var Ee=se.hoverlabel,Oe=Ee.font,_e=[];h.loneHover({trace:J,x0:pe-ce*ee.r,x1:pe+ce*ee.r,y:xe,_x0:ie?q+ne.TL[0]:pe-ce*ee.r,_x1:ie?q+ne.TR[0]:pe+ce*ee.r,_y0:ie?X+ne.TL[1]:xe-ce*ee.r,_y1:ie?X+ne.BL[1]:xe+ce*ee.r,text:Ae.join("<br>"),name:se.hovertemplate||me.indexOf("name")!==-1?se.name:void 0,idealAlign:ne.pxmid[0]<0?"left":"right",color:d.castOption(Ee.bgcolor,ne.pts)||ne.color,borderColor:d.castOption(Ee.bordercolor,ne.pts),fontFamily:d.castOption(Oe.family,ne.pts),fontSize:d.castOption(Oe.size,ne.pts),fontColor:d.castOption(Oe.color,ne.pts),nameLength:d.castOption(Ee.namelength,ne.pts),textAlign:d.castOption(Ee.align,ne.pts),hovertemplate:d.castOption(se.hovertemplate,ne.pts),hovertemplateLabels:ne,eventData:[b(ne,se)]},{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:V,inOut_bbox:_e}),ne.bbox=_e[0],J._hasHoverLabel=!0}J._hasHoverEvent=!0,V.emit("plotly_hover",{points:[b(ne,se)],event:s.event})}}),ue.on("mouseout",function(ne){var oe=V._fullLayout,se=V._fullData[J.index],me=s.select(this).datum();J._hasHoverEvent&&(ne.originalEvent=s.event,V.emit("plotly_unhover",{points:[b(me,se)],event:s.event}),J._hasHoverEvent=!1),J._hasHoverLabel&&(h.loneUnhover(oe._hoverlayer.node()),J._hasHoverLabel=!1)}),ue.on("click",function(ne){var oe=V._fullLayout,se=V._fullData[J.index];V._dragging||oe.hovermode===!1||(V._hoverdata=[b(ne,se)],h.click(V,s.event))})}function c(ue,V,j){var ee=d.castOption(ue.outsidetextfont.color,V.pts)||d.castOption(ue.textfont.color,V.pts)||j.color,q=d.castOption(ue.outsidetextfont.family,V.pts)||d.castOption(ue.textfont.family,V.pts)||j.family,X=d.castOption(ue.outsidetextfont.size,V.pts)||d.castOption(ue.textfont.size,V.pts)||j.size;return{color:ee,family:q,size:X}}function S(ue,V,j){var ee=d.castOption(ue.insidetextfont.color,V.pts);!ee&&ue._input.textfont&&(ee=d.castOption(ue._input.textfont.color,V.pts));var q=d.castOption(ue.insidetextfont.family,V.pts)||d.castOption(ue.textfont.family,V.pts)||j.family,X=d.castOption(ue.insidetextfont.size,V.pts)||d.castOption(ue.textfont.size,V.pts)||j.size;return{color:ee||y.contrast(V.color),family:q,size:X}}function T(ue,V){for(var j,ee,q=0;q<ue.length;q++)if(j=ue[q][0],ee=j.trace,ee.title.text){var X=ee.title.text;ee._meta&&(X=a.templateString(X,ee._meta));var J=t.tester.append("text").attr("data-notex",1).text(X).call(t.font,ee.title.font).call(r.convertToTspans,V),ie=t.bBox(J.node(),!0);j.titleBox={width:ie.width,height:ie.height},J.remove()}}function x(ue,V,j){var ee=j.r||V.rpx1,q=V.rInscribed,X=V.startangle===V.stopangle;if(X)return{rCenter:1-q,scale:0,rotate:0,textPosAngle:0};var J=V.ring,ie=J===1&&Math.abs(V.startangle-V.stopangle)===Math.PI*2,ne=V.halfangle,oe=V.midangle,se=j.trace.insidetextorientation,me=se==="horizontal",ce=se==="tangential",pe=se==="radial",xe=se==="auto",Se=[],Ae;if(!xe){var Ce=function(ze,De){if(w(V,ze)){var je=Math.abs(ze-V.startangle),dt=Math.abs(ze-V.stopangle),Et=je<dt?je:dt;De==="tan"?Ae=C(ue,ee,J,Et,0):Ae=v(ue,ee,J,Et,Math.PI/2),Ae.textPosAngle=ze,Se.push(Ae)}},Ee;if(me||ce){for(Ee=4;Ee>=-4;Ee-=2)Ce(Math.PI*Ee,"tan");for(Ee=4;Ee>=-4;Ee-=2)Ce(Math.PI*(Ee+1),"tan")}if(me||pe){for(Ee=4;Ee>=-4;Ee-=2)Ce(Math.PI*(Ee+1.5),"rad");for(Ee=4;Ee>=-4;Ee-=2)Ce(Math.PI*(Ee+.5),"rad")}}if(ie||xe||me){var Oe=Math.sqrt(ue.width*ue.width+ue.height*ue.height);if(Ae={scale:q*ee*2/Oe,rCenter:1-q,rotate:0},Ae.textPosAngle=(V.startangle+V.stopangle)/2,Ae.scale>=1)return Ae;Se.push(Ae)}(xe||pe)&&(Ae=v(ue,ee,J,ne,oe),Ae.textPosAngle=(V.startangle+V.stopangle)/2,Se.push(Ae)),(xe||ce)&&(Ae=C(ue,ee,J,ne,oe),Ae.textPosAngle=(V.startangle+V.stopangle)/2,Se.push(Ae));for(var _e=0,Re=0,Ve=0;Ve<Se.length;Ve++){var Je=Se[Ve].scale;if(Re<Je&&(Re=Je,_e=Ve),!xe&&Re>=1)break}return Se[_e]}function w(ue,V){var j=ue.startangle,ee=ue.stopangle;return j>V&&V>ee||j<V&&V<ee}function v(ue,V,j,ee,q){V=Math.max(0,V-2*m);var X=ue.width/ue.height,J=L(X,ee,V,j);return{scale:J*2/ue.height,rCenter:M(X,J/V),rotate:E(q)}}function C(ue,V,j,ee,q){V=Math.max(0,V-2*m);var X=ue.height/ue.width,J=L(X,ee,V,j);return{scale:J*2/ue.width,rCenter:M(X,J/V),rotate:E(q+Math.PI/2)}}function M(ue,V){return Math.cos(V)-ue*V}function E(ue){return(180/Math.PI*ue+720)%180-90}function L(ue,V,j,ee){var q=ue+1/(2*Math.tan(V));return j*Math.min(1/(Math.sqrt(q*q+.5)+q),ee/(Math.sqrt(ue*ue+ee/2)+ue))}function z(ue,V){return ue.v===V.vTotal&&!V.trace.hole?1:Math.min(1/(1+1/Math.sin(ue.halfangle)),ue.ring/2)}function O(ue,V){var j=V.pxmid[0],ee=V.pxmid[1],q=ue.width/2,X=ue.height/2;return j<0&&(q*=-1),ee<0&&(X*=-1),{scale:1,rCenter:1,rotate:0,x:q+Math.abs(X)*(q>0?1:-1)/2,y:X/(1+j*j/(ee*ee)),outside:!0}}function R(ue){var V=Math.sqrt(ue.titleBox.width*ue.titleBox.width+ue.titleBox.height*ue.titleBox.height);return{x:ue.cx,y:ue.cy,scale:ue.trace.hole*ue.r*2/V,tx:0,ty:-ue.titleBox.height/2+ue.trace.title.font.size}}function D(ue,V){var j=1,ee=1,q,X=ue.trace,J={x:ue.cx,y:ue.cy},ie={tx:0,ty:0};ie.ty+=X.title.font.size,q=$(X),X.title.position.indexOf("top")!==-1?(J.y-=(1+q)*ue.r,ie.ty-=ue.titleBox.height):X.title.position.indexOf("bottom")!==-1&&(J.y+=(1+q)*ue.r);var ne=H(ue.r,ue.trace.aspectratio),oe=V.w*(X.domain.x[1]-X.domain.x[0])/2;return X.title.position.indexOf("left")!==-1?(oe=oe+ne,J.x-=(1+q)*ne,ie.tx+=ue.titleBox.width/2):X.title.position.indexOf("center")!==-1?oe*=2:X.title.position.indexOf("right")!==-1&&(oe=oe+ne,J.x+=(1+q)*ne,ie.tx-=ue.titleBox.width/2),j=oe/ue.titleBox.width,ee=B(ue,V)/ue.titleBox.height,{x:J.x,y:J.y,scale:Math.min(j,ee),tx:ie.tx,ty:ie.ty}}function H(ue,V){return ue/(V===void 0?1:V)}function B(ue,V){var j=ue.trace,ee=V.h*(j.domain.y[1]-j.domain.y[0]);return Math.min(ue.titleBox.height,ee/2)}function $(ue){var V=ue.pull;if(!V)return 0;var j;if(Array.isArray(V))for(V=0,j=0;j<ue.pull.length;j++)ue.pull[j]>V&&(V=ue.pull[j]);return V}function W(ue,V){var j,ee,q,X,J,ie,ne,oe,se,me,ce,pe,xe;function Se(Oe,_e){return Oe.pxmid[1]-_e.pxmid[1]}function Ae(Oe,_e){return _e.pxmid[1]-Oe.pxmid[1]}function Ce(Oe,_e){_e||(_e={});var Re=_e.labelExtraY+(ee?_e.yLabelMax:_e.yLabelMin),Ve=ee?Oe.yLabelMin:Oe.yLabelMax,Je=ee?Oe.yLabelMax:Oe.yLabelMin,ze=Oe.cyFinal+J(Oe.px0[1],Oe.px1[1]),De=Re-Ve,je,dt,Et,$t,wt,Ot;if(De*ne>0&&(Oe.labelExtraY=De),!!Array.isArray(V.pull))for(dt=0;dt<me.length;dt++)Et=me[dt],!(Et===Oe||(d.castOption(V.pull,Oe.pts)||0)>=(d.castOption(V.pull,Et.pts)||0))&&((Oe.pxmid[1]-Et.pxmid[1])*ne>0?($t=Et.cyFinal+J(Et.px0[1],Et.px1[1]),De=$t-Ve-Oe.labelExtraY,De*ne>0&&(Oe.labelExtraY+=De)):(Je+Oe.labelExtraY-ze)*ne>0&&(je=3*ie*Math.abs(dt-me.indexOf(Oe)),wt=Et.cxFinal+X(Et.px0[0],Et.px1[0]),Ot=wt+je-(Oe.cxFinal+Oe.pxmid[0])-Oe.labelExtraX,Ot*ie>0&&(Oe.labelExtraX+=Ot)))}for(ee=0;ee<2;ee++)for(q=ee?Se:Ae,J=ee?Math.max:Math.min,ne=ee?1:-1,j=0;j<2;j++){for(X=j?Math.max:Math.min,ie=j?1:-1,oe=ue[ee][j],oe.sort(q),se=ue[1-ee][j],me=se.concat(oe),pe=[],ce=0;ce<oe.length;ce++)oe[ce].yLabelMid!==void 0&&pe.push(oe[ce]);for(xe=!1,ce=0;ee&&ce<se.length;ce++)if(se[ce].yLabelMid!==void 0){xe=se[ce];break}for(ce=0;ce<pe.length;ce++){var Ee=ce&&pe[ce-1];xe&&!ce&&(Ee=xe),Ce(pe[ce],Ee)}}}function re(ue,V){for(var j=[],ee=0;ee<ue.length;ee++){var q=ue[ee][0],X=q.trace,J=X.domain,ie=V.w*(J.x[1]-J.x[0]),ne=V.h*(J.y[1]-J.y[0]);X.title.text&&X.title.position!=="middle center"&&(ne-=B(q,V));var oe=ie/2,se=ne/2;X.type==="funnelarea"&&!X.scalegroup&&(se/=X.aspectratio),q.r=Math.min(oe,se)/(1+$(X)),q.cx=V.l+V.w*(X.domain.x[1]+X.domain.x[0])/2,q.cy=V.t+V.h*(1-X.domain.y[0])-ne/2,X.title.text&&X.title.position.indexOf("bottom")!==-1&&(q.cy-=B(q,V)),X.scalegroup&&j.indexOf(X.scalegroup)===-1&&j.push(X.scalegroup)}Q(ue,j)}function Q(ue,V){for(var j,ee,q,X=0;X<V.length;X++){var J=1/0,ie=V[X];for(ee=0;ee<ue.length;ee++)if(j=ue[ee][0],q=j.trace,q.scalegroup===ie){var ne;if(q.type==="pie")ne=j.r*j.r;else if(q.type==="funnelarea"){var oe,se;q.aspectratio>1?(oe=j.r,se=oe/q.aspectratio):(se=j.r,oe=se*q.aspectratio),oe*=(1+q.baseratio)/2,ne=oe*se}J=Math.min(J,ne/j.vTotal)}for(ee=0;ee<ue.length;ee++)if(j=ue[ee][0],q=j.trace,q.scalegroup===ie){var me=J*j.vTotal;q.type==="funnelarea"&&(me/=(1+q.baseratio)/2,me/=q.aspectratio),j.r=Math.sqrt(me)}}}function Z(ue){var V=ue[0],j=V.r,ee=V.trace,q=d.getRotationAngle(ee.rotation),X=2*Math.PI/V.vTotal,J="px0",ie="px1",ne,oe,se;if(ee.direction==="counterclockwise"){for(ne=0;ne<ue.length&&ue[ne].hidden;ne++);if(ne===ue.length)return;q+=X*ue[ne].v,X*=-1,J="px1",ie="px0"}for(se=K(j,q),ne=0;ne<ue.length;ne++)oe=ue[ne],!oe.hidden&&(oe[J]=se,oe.startangle=q,q+=X*oe.v/2,oe.pxmid=K(j,q),oe.midangle=q,q+=X*oe.v/2,se=K(j,q),oe.stopangle=q,oe[ie]=se,oe.largeArc=oe.v>V.vTotal/2?1:0,oe.halfangle=Math.PI*Math.min(oe.v/V.vTotal,.5),oe.ring=1-ee.hole,oe.rInscribed=z(oe,V))}function K(ue,V){return[ue*Math.sin(V),-ue*Math.cos(V)]}function le(ue,V,j){var ee=ue._fullLayout,q=j.trace,X=q.texttemplate,J=q.textinfo;if(!X&&J&&J!=="none"){var ie=J.split("+"),ne=function(_e){return ie.indexOf(_e)!==-1},oe=ne("label"),se=ne("text"),me=ne("value"),ce=ne("percent"),pe=ee.separators,xe;if(xe=oe?[V.label]:[],se){var Se=d.getFirstFilled(q.text,V.pts);g(Se)&&xe.push(Se)}me&&xe.push(d.formatPieValue(V.v,pe)),ce&&xe.push(d.formatPiePercent(V.v/j.vTotal,pe)),V.text=xe.join("<br>")}function Ae(_e){return{label:_e.label,value:_e.v,valueLabel:d.formatPieValue(_e.v,ee.separators),percent:_e.v/j.vTotal,percentLabel:d.formatPiePercent(_e.v/j.vTotal,ee.separators),color:_e.color,text:_e.text,customdata:a.castOption(q,_e.i,"customdata")}}if(X){var Ce=a.castOption(q,V.i,"texttemplate");if(!Ce)V.text="";else{var Ee=Ae(V),Oe=d.getFirstFilled(q.text,V.pts);(g(Oe)||Oe==="")&&(Ee.text=Oe),V.text=a.texttemplateString(Ce,Ee,ue._fullLayout._d3locale,Ee,q._meta||{})}}}function fe(ue,V){var j=ue.rotate*Math.PI/180,ee=Math.cos(j),q=Math.sin(j),X=(V.left+V.right)/2,J=(V.top+V.bottom)/2;ue.textX=X*ee-J*q,ue.textY=X*q+J*ee,ue.noCenter=!0}I.exports={plot:_,formatSliceLabel:le,transformInsideText:x,determineInsideTextFont:S,positionTitleOutside:D,prerenderTitles:T,layoutAreas:re,attachFxHandlers:A,computeTransform:fe}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":905,"./helpers":906,"@plotly/d3":58}],911:[function(e,I,F){var s=e("@plotly/d3"),o=e("./style_one"),h=e("../bar/uniform_text").resizeText;I.exports=function(t){var a=t._fullLayout._pielayer.selectAll(".trace");h(t,a,"pie"),a.each(function(i){var n=i[0],r=n.trace,f=s.select(this);f.style({opacity:r.opacity}),f.selectAll("path.surface").each(function(u){s.select(this).call(o,u,r)})})}},{"../bar/uniform_text":664,"./style_one":912,"@plotly/d3":58}],912:[function(e,I,F){var s=e("../../components/color"),o=e("./helpers").castOption;I.exports=function(y,t,a){var i=a.marker.line,n=o(i.color,t.pts)||s.defaultLine,r=o(i.width,t.pts)||0;y.style("stroke-width",r).call(s.fill,t.color).call(s.stroke,n)}},{"../../components/color":366,"./helpers":906}],913:[function(e,I,F){var s=e("../scatter/attributes");I.exports={x:s.x,y:s.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:s.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":927}],914:[function(e,I,F){var s=e("../../../stackgl_modules").gl_pointcloud2d,o=e("../../lib/str2rgbarray"),h=e("../../plots/cartesian/autorange").findExtremes,y=e("../scatter/get_trace_color");function t(n,r){this.scene=n,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=s(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=t.prototype;a.handlePick=function(n){var r=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},a.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=y(n,{})},a.updateFast=function(n){var r=this.xData=this.pickXData=n.x,f=this.yData=this.pickYData=n.y,u=this.pickXYData=n.xy,l=n.xbounds&&n.ybounds,m=n.indices,d,b,g,_=this.bounds,p,A,c;if(u){if(g=u,d=u.length>>>1,l)_[0]=n.xbounds[0],_[2]=n.xbounds[1],_[1]=n.ybounds[0],_[3]=n.ybounds[1];else for(c=0;c<d;c++)p=g[c*2],A=g[c*2+1],p<_[0]&&(_[0]=p),p>_[2]&&(_[2]=p),A<_[1]&&(_[1]=A),A>_[3]&&(_[3]=A);if(m)b=m;else for(b=new Int32Array(d),c=0;c<d;c++)b[c]=c}else for(d=r.length,g=new Float32Array(2*d),b=new Int32Array(d),c=0;c<d;c++)p=r[c],A=f[c],b[c]=c,g[c*2]=p,g[c*2+1]=A,p<_[0]&&(_[0]=p),p>_[2]&&(_[2]=p),A<_[1]&&(_[1]=A),A>_[3]&&(_[3]=A);this.idToIndex=b,this.pointcloudOptions.idToIndex=b,this.pointcloudOptions.positions=g;var S=o(n.marker.color),T=o(n.marker.border.color),x=n.opacity*n.marker.opacity;S[3]*=x,this.pointcloudOptions.color=S;var w=n.marker.blend;if(w===null){var v=100;w=r.length<v||f.length<v}this.pointcloudOptions.blend=w,T[3]*=x,this.pointcloudOptions.borderColor=T;var C=n.marker.sizemin,M=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=C,this.pointcloudOptions.sizeMax=M,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,L=this.scene.yaxis,z=M/2||.5;n._extremes[E._id]=h(E,[_[0],_[2]],{ppad:z}),n._extremes[L._id]=h(L,[_[1],_[3]],{ppad:z})},a.dispose=function(){this.pointcloud.dispose()};function i(n,r){var f=new t(n,r.uid);return f.update(r),f}I.exports=i},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":937}],915:[function(e,I,F){var s=e("../../lib"),o=e("./attributes");I.exports=function(y,t,a){function i(n,r){return s.coerce(y,t,o,n,r)}i("x"),i("y"),i("xbounds"),i("ybounds"),y.xy&&y.xy instanceof Float32Array&&(t.xy=y.xy),y.indices&&y.indices instanceof Int32Array&&(t.indices=y.indices),i("text"),i("marker.color",a),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",a),i("marker.border.arearatio"),t._length=null}},{"../../lib":503,"./attributes":913}],916:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../scatter3d/calc"),plot:e("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":956,"./attributes":913,"./convert":914,"./defaults":915}],917:[function(e,I,F){var s=e("../../plots/font_attributes"),o=e("../../plots/attributes"),h=e("../../components/color/attributes"),y=e("../../components/fx/attributes"),t=e("../../plots/domain").attributes,a=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../components/colorscale/attributes"),n=e("../../plot_api/plot_template").templatedArray,r=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,f=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,l=I.exports=u({hoverinfo:f({},o.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:y.hoverlabel,domain:t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:s({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:h.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:h.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:f(i().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");l.transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],918:[function(e,I,F){var s=e("../../plot_api/edit_types").overrideAll,o=e("../../plots/get_data").getModuleCalcData,h=e("./plot"),y=e("../../components/fx/layout_attributes"),t=e("../../lib/setcursor"),a=e("../../components/dragelement"),i=e("../../plots/cartesian/select").prepSelect,n=e("../../lib"),r=e("../../registry"),f="sankey";F.name=f,F.baseLayoutAttrOverrides=s({hoverlabel:y.hoverlabel},"plot","nested"),F.plot=function(l){var m=o(l.calcdata,f)[0];h(l,m),F.updateFx(l)},F.clean=function(l,m,d,b){var g=b._has&&b._has(f),_=m._has&&m._has(f);g&&!_&&(b._paperdiv.selectAll(".sankey").remove(),b._paperdiv.selectAll(".bgsankey").remove())},F.updateFx=function(l){for(var m=0;m<l._fullData.length;m++)u(l,m)};function u(l,m){var d=l._fullData[m],b=l._fullLayout,g=b.dragmode,_=b.dragmode==="pan"?"move":"crosshair",p=d._bgRect;if(!(g==="pan"||g==="zoom")){t(p,_);var A={_id:"x",c2p:n.identity,_offset:d._sankey.translateX,_length:d._sankey.width},c={_id:"y",c2p:n.identity,_offset:d._sankey.translateY,_length:d._sankey.height},S={gd:l,element:p.node(),plotinfo:{id:m,xaxis:A,yaxis:c,fillRangeItems:n.noop},subplot:m,xaxes:[A],yaxes:[c],doneFnCompleted:function(T){var x=l._fullData[m],w,v=x.node.groups.slice(),C=[];function M(O){for(var R=x._sankey.graph.nodes,D=0;D<R.length;D++)if(R[D].pointNumber===O)return R[D]}for(var E=0;E<T.length;E++){var L=M(T[E].pointNumber);if(!!L)if(L.group){for(var z=0;z<L.childrenNodes.length;z++)C.push(L.childrenNodes[z].pointNumber);v[L.pointNumber-x.node._count]=!1}else C.push(L.pointNumber)}w=v.filter(Boolean).concat([C]),r.call("_guiRestyle",l,{"node.groups":[w]},m)}};S.prepFn=function(T,x,w){i(T,x,w,S,g)},a.init(S)}}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":923}],919:[function(e,I,F){var s=e("strongly-connected-components"),o=e("../../lib"),h=e("../../lib/gup").wrap,y=o.isArrayOrTypedArray,t=o.isIndex,a=e("../../components/colorscale");function i(r){var f=r.node,u=r.link,l=[],m=y(u.color),d=y(u.customdata),b={},g={},_=u.colorscales.length,p;for(p=0;p<_;p++){var A=u.colorscales[p],c=a.extractScale(A,{cLetter:"c"}),S=a.makeColorScaleFunc(c);g[A.label]=S}var T=0;for(p=0;p<u.value.length;p++)u.source[p]>T&&(T=u.source[p]),u.target[p]>T&&(T=u.target[p]);var x=T+1;r.node._count=x;var w,v=r.node.groups,C={};for(p=0;p<v.length;p++){var M=v[p];for(w=0;w<M.length;w++){var E=M[w],L=x+p;C.hasOwnProperty(E)?o.warn("Node "+E+" is already part of a group."):C[E]=L}}var z={source:[],target:[]};for(p=0;p<u.value.length;p++){var O=u.value[p],R=u.source[p],D=u.target[p];if(!!(O>0&&t(R,x)&&t(D,x))&&!(C.hasOwnProperty(R)&&C.hasOwnProperty(D)&&C[R]===C[D])){C.hasOwnProperty(D)&&(D=C[D]),C.hasOwnProperty(R)&&(R=C[R]),R=+R,D=+D,b[R]=b[D]=!0;var H="";u.label&&u.label[p]&&(H=u.label[p]);var B=null;H&&g.hasOwnProperty(H)&&(B=g[H]),l.push({pointNumber:p,label:H,color:m?u.color[p]:u.color,customdata:d?u.customdata[p]:u.customdata,concentrationscale:B,source:R,target:D,value:+O}),z.source.push(R),z.target.push(D)}}var $=x+v.length,W=y(f.color),re=y(f.customdata),Q=[];for(p=0;p<$;p++)if(!!b[p]){var Z=f.label[p];Q.push({group:p>x-1,childrenNodes:[],pointNumber:p,label:Z,color:W?f.color[p]:f.color,customdata:re?f.customdata[p]:f.customdata})}var K=!1;return n($,z.source,z.target)&&(K=!0),{circular:K,links:l,nodes:Q,groups:v,groupLookup:C}}function n(r,f,u){for(var l=o.init2dArray(r,0),m=0;m<Math.min(f.length,u.length);m++)if(o.isIndex(f[m],r)&&o.isIndex(u[m],r)){if(f[m]===u[m])return!0;l[f[m]].push(u[m])}var d=s(l);return d.components.some(function(b){return b.length>1})}I.exports=function(f,u){var l=i(u);return h({circular:l.circular,_nodes:l.nodes,_links:l.links,_groups:l.groups,_groupLookup:l.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],920:[function(e,I,F){I.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],921:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("../../components/color"),y=e("tinycolor2"),t=e("../../plots/domain").defaults,a=e("../../components/fx/hoverlabel_defaults"),i=e("../../plot_api/plot_template"),n=e("../../plots/array_container_defaults");I.exports=function(u,l,m,d){function b(M,E){return s.coerce(u,l,o,M,E)}var g=s.extendDeep(d.hoverlabel,u.hoverlabel),_=u.node,p=i.newContainer(l,"node");function A(M,E){return s.coerce(_,p,o.node,M,E)}A("label"),A("groups"),A("x"),A("y"),A("pad"),A("thickness"),A("line.color"),A("line.width"),A("hoverinfo",u.hoverinfo),a(_,p,A,g),A("hovertemplate");var c=d.colorway,S=function(M){return c[M%c.length]};A("color",p.label.map(function(M,E){return h.addOpacity(S(E),.8)})),A("customdata");var T=u.link||{},x=i.newContainer(l,"link");function w(M,E){return s.coerce(T,x,o.link,M,E)}w("label"),w("source"),w("target"),w("value"),w("line.color"),w("line.width"),w("hoverinfo",u.hoverinfo),a(T,x,w,g),w("hovertemplate");var v=y(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",s.repeat(v,x.value.length)),w("customdata"),n(T,x,{name:"colorscales",handleItemDefaults:r}),t(l,d,b),b("orientation"),b("valueformat"),b("valuesuffix");var C;p.x.length&&p.y.length&&(C="freeform"),b("arrangement",C),s.coerceFont(b,"textfont",s.extendFlat({},d.font)),l._length=null};function r(f,u){function l(m,d){return s.coerce(f,u,o.link.colorscales,m,d)}l("label"),l("cmin"),l("cmax"),l("colorscale")}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":917,tinycolor2:312}],922:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"sankey",basePlotModule:e("./base_plot"),selectPoints:e("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":917,"./base_plot":918,"./calc":919,"./defaults":921,"./plot":923,"./select.js":925}],923:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=o.numberFormat,y=e("./render"),t=e("../../components/fx"),a=e("../../components/color"),i=e("./constants").cn,n=o._;function r(c){return c!==""}function f(c,S){return c.filter(function(T){return T.key===S.traceId})}function u(c,S){s.select(c).select("path").style("fill-opacity",S),s.select(c).select("rect").style("fill-opacity",S)}function l(c){s.select(c).select("text.name").style("fill","black")}function m(c){return function(S){return c.node.sourceLinks.indexOf(S.link)!==-1||c.node.targetLinks.indexOf(S.link)!==-1}}function d(c){return function(S){return S.node.sourceLinks.indexOf(c.link)!==-1||S.node.targetLinks.indexOf(c.link)!==-1}}function b(c,S,T){S&&T&&f(T,S).selectAll("."+i.sankeyLink).filter(m(S)).call(_.bind(0,S,T,!1))}function g(c,S,T){S&&T&&f(T,S).selectAll("."+i.sankeyLink).filter(m(S)).call(p.bind(0,S,T,!1))}function _(c,S,T,x){var w=x.datum().link.label;x.style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),w&&f(S,c).selectAll("."+i.sankeyLink).filter(function(v){return v.link.label===w}).style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),T&&f(S,c).selectAll("."+i.sankeyNode).filter(d(c)).call(b)}function p(c,S,T,x){var w=x.datum().link.label;x.style("fill-opacity",function(v){return v.tinyColorAlpha}),w&&f(S,c).selectAll("."+i.sankeyLink).filter(function(v){return v.link.label===w}).style("fill-opacity",function(v){return v.tinyColorAlpha}),T&&f(S,c).selectAll(i.sankeyNode).filter(d(c)).call(g)}function A(c,S){var T=c.hoverlabel||{},x=o.nestedProperty(T,S).get();return Array.isArray(x)?!1:x}I.exports=function(S,T){for(var x=S._fullLayout,w=x._paper,v=x._size,C=0;C<S._fullData.length;C++)if(!!S._fullData[C].visible&&S._fullData[C].type===i.sankey&&!S._fullData[C]._viewInitial){var M=S._fullData[C].node;S._fullData[C]._viewInitial={node:{groups:M.groups.slice(),x:M.x.slice(),y:M.y.slice()}}}var E=function(K,le){var fe=le.link;fe.originalEvent=s.event,S._hoverdata=[fe],t.click(S,{target:!0})},L=function(K,le,fe){S._fullLayout.hovermode!==!1&&(s.select(K).call(_.bind(0,le,fe,!0)),le.link.trace.link.hoverinfo!=="skip"&&(le.link.fullData=le.link.trace,S.emit("plotly_hover",{event:s.event,points:[le.link]})))},z=n(S,"source:")+" ",O=n(S,"target:")+" ",R=n(S,"concentration:")+" ",D=n(S,"incoming flow count:")+" ",H=n(S,"outgoing flow count:")+" ",B=function(K,le){if(S._fullLayout.hovermode===!1)return;var fe=le.link.trace.link;if(fe.hoverinfo==="none"||fe.hoverinfo==="skip")return;var ue=[];function V(ne){var oe,se;ne.circular?(oe=(ne.circularPathData.leftInnerExtent+ne.circularPathData.rightInnerExtent)/2,se=ne.circularPathData.verticalFullExtent):(oe=(ne.source.x1+ne.target.x0)/2,se=(ne.y0+ne.y1)/2);var me=[oe,se];return ne.trace.orientation==="v"&&me.reverse(),me[0]+=le.parent.translateX,me[1]+=le.parent.translateY,me}for(var j=0,ee=0;ee<le.flow.links.length;ee++){var q=le.flow.links[ee];if(!(S._fullLayout.hovermode==="closest"&&le.link.pointNumber!==q.pointNumber)){le.link.pointNumber===q.pointNumber&&(j=ee),q.fullData=q.trace,fe=le.link.trace.link;var X=V(q),J={valueLabel:h(le.valueFormat)(q.value)+le.valueSuffix};ue.push({x:X[0],y:X[1],name:J.valueLabel,text:[q.label||"",z+q.source.label,O+q.target.label,q.concentrationscale?R+h("%0.2f")(q.flow.labelConcentration):""].filter(r).join("<br>"),color:A(fe,"bgcolor")||a.addOpacity(q.color,1),borderColor:A(fe,"bordercolor"),fontFamily:A(fe,"font.family"),fontSize:A(fe,"font.size"),fontColor:A(fe,"font.color"),nameLength:A(fe,"namelength"),textAlign:A(fe,"align"),idealAlign:s.event.x<X[0]?"right":"left",hovertemplate:fe.hovertemplate,hovertemplateLabels:J,eventData:[q]})}}var ie=t.loneHover(ue,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:S,anchorIndex:j});ie.each(function(){var ne=this;le.link.concentrationscale||u(ne,.65),l(ne)})},$=function(K,le,fe){S._fullLayout.hovermode!==!1&&(s.select(K).call(p.bind(0,le,fe,!0)),le.link.trace.link.hoverinfo!=="skip"&&(le.link.fullData=le.link.trace,S.emit("plotly_unhover",{event:s.event,points:[le.link]})),t.loneUnhover(x._hoverlayer.node()))},W=function(K,le,fe){var ue=le.node;ue.originalEvent=s.event,S._hoverdata=[ue],s.select(K).call(g,le,fe),t.click(S,{target:!0})},re=function(K,le,fe){S._fullLayout.hovermode!==!1&&(s.select(K).call(b,le,fe),le.node.trace.node.hoverinfo!=="skip"&&(le.node.fullData=le.node.trace,S.emit("plotly_hover",{event:s.event,points:[le.node]})))},Q=function(K,le){if(S._fullLayout.hovermode!==!1){var fe=le.node.trace.node;if(!(fe.hoverinfo==="none"||fe.hoverinfo==="skip")){var ue=s.select(K).select("."+i.nodeRect),V=S._fullLayout._paperdiv.node().getBoundingClientRect(),j=ue.node().getBoundingClientRect(),ee=j.left-2-V.left,q=j.right+2-V.left,X=j.top+j.height/4-V.top,J={valueLabel:h(le.valueFormat)(le.node.value)+le.valueSuffix};le.node.fullData=le.node.trace,S._fullLayout._calcInverseTransform(S);var ie=S._fullLayout._invScaleX,ne=S._fullLayout._invScaleY,oe=t.loneHover({x0:ie*ee,x1:ie*q,y:ne*X,name:h(le.valueFormat)(le.node.value)+le.valueSuffix,text:[le.node.label,D+le.node.targetLinks.length,H+le.node.sourceLinks.length].filter(r).join("<br>"),color:A(fe,"bgcolor")||le.tinyColorHue,borderColor:A(fe,"bordercolor"),fontFamily:A(fe,"font.family"),fontSize:A(fe,"font.size"),fontColor:A(fe,"font.color"),nameLength:A(fe,"namelength"),textAlign:A(fe,"align"),idealAlign:"left",hovertemplate:fe.hovertemplate,hovertemplateLabels:J,eventData:[le.node]},{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:S});u(oe,.85),l(oe)}}},Z=function(K,le,fe){S._fullLayout.hovermode!==!1&&(s.select(K).call(g,le,fe),le.node.trace.node.hoverinfo!=="skip"&&(le.node.fullData=le.node.trace,S.emit("plotly_unhover",{event:s.event,points:[le.node]})),t.loneUnhover(x._hoverlayer.node()))};y(S,w,T,{width:v.w,height:v.h,margin:{t:v.t,r:v.r,b:v.b,l:v.l}},{linkEvents:{hover:L,follow:B,unhover:$,select:E},nodeEvents:{hover:re,follow:Q,unhover:Z,select:W}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":920,"./render":924,"@plotly/d3":58}],924:[function(e,I,F){var s=e("d3-force"),o=e("d3-interpolate").interpolateNumber,h=e("@plotly/d3"),y=e("@plotly/d3-sankey"),t=e("@plotly/d3-sankey-circular"),a=e("./constants"),i=e("tinycolor2"),n=e("../../components/color"),r=e("../../components/drawing"),f=e("../../lib"),u=f.strTranslate,l=f.strRotate,m=e("../../lib/gup"),d=m.keyFun,b=m.repeat,g=m.unwrap,_=e("../../lib/svg_text_utils"),p=e("../../registry"),A=e("../../constants/alignment"),c=A.CAP_SHIFT,S=A.LINE_SPACING,T=3;function x(V,j,ee){var q=g(j),X=q.trace,J=X.domain,ie=X.orientation==="h",ne=X.node.pad,oe=X.node.thickness,se=V.width*(J.x[1]-J.x[0]),me=V.height*(J.y[1]-J.y[0]),ce=q._nodes,pe=q._links,xe=q.circular,Se;xe?Se=t.sankeyCircular().circularLinkGap(0):Se=y.sankey(),Se.iterations(a.sankeyIterations).size(ie?[se,me]:[me,se]).nodeWidth(oe).nodePadding(ne).nodeId(function(wt){return wt.pointNumber}).nodes(ce).links(pe);var Ae=Se();Se.nodePadding()<ne&&f.warn("node.pad was reduced to ",Se.nodePadding()," to fit within the figure.");var Ce,Ee,Oe;for(var _e in q._groupLookup){var Re=parseInt(q._groupLookup[_e]),Ve;for(Ce=0;Ce<Ae.nodes.length;Ce++)if(Ae.nodes[Ce].pointNumber===Re){Ve=Ae.nodes[Ce];break}if(!!Ve){var Je={pointNumber:parseInt(_e),x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ae.nodes.unshift(Je),Ve.childrenNodes.unshift(Je)}}function ze(){for(Ce=0;Ce<Ae.nodes.length;Ce++){var wt=Ae.nodes[Ce],Ot={},Vt,kt;for(Ee=0;Ee<wt.targetLinks.length;Ee++)kt=wt.targetLinks[Ee],Vt=kt.source.pointNumber+":"+kt.target.pointNumber,Ot.hasOwnProperty(Vt)||(Ot[Vt]=[]),Ot[Vt].push(kt);var St=Object.keys(Ot);for(Ee=0;Ee<St.length;Ee++){Vt=St[Ee];var ot=Ot[Vt],ht=0,Ke={};for(Oe=0;Oe<ot.length;Oe++)kt=ot[Oe],Ke[kt.label]||(Ke[kt.label]=0),Ke[kt.label]+=kt.value,ht+=kt.value;for(Oe=0;Oe<ot.length;Oe++)kt=ot[Oe],kt.flow={value:ht,labelConcentration:Ke[kt.label]/ht,concentration:kt.value/ht,links:ot},kt.concentrationscale&&(kt.color=i(kt.concentrationscale(kt.flow.labelConcentration)))}var Pe=0;for(Ee=0;Ee<wt.sourceLinks.length;Ee++)Pe+=wt.sourceLinks[Ee].value;for(Ee=0;Ee<wt.sourceLinks.length;Ee++)kt=wt.sourceLinks[Ee],kt.concentrationOut=kt.value/Pe;var We=0;for(Ee=0;Ee<wt.targetLinks.length;Ee++)We+=wt.targetLinks[Ee].value;for(Ee=0;Ee<wt.targetLinks.length;Ee++)kt=wt.targetLinks[Ee],kt.concenrationIn=kt.value/We}}ze();function De(wt){wt.forEach(function(Ot){var Vt,kt,St=0,ot=Ot.length,ht;for(Ot.sort(function(Ke,Pe){return Ke.y0-Pe.y0}),ht=0;ht<ot;++ht)Vt=Ot[ht],Vt.y0>=St||(kt=St-Vt.y0,kt>1e-6&&(Vt.y0+=kt,Vt.y1+=kt)),St=Vt.y1+ne})}function je(wt){var Ot=wt.map(function(Pe,We){return{x0:Pe.x0,index:We}}).sort(function(Pe,We){return Pe.x0-We.x0}),Vt=[],kt=-1,St,ot=-1/0,ht;for(Ce=0;Ce<Ot.length;Ce++){var Ke=wt[Ot[Ce].index];Ke.x0>ot+oe&&(kt+=1,St=Ke.x0),ot=Ke.x0,Vt[kt]||(Vt[kt]=[]),Vt[kt].push(Ke),ht=St-Ke.x0,Ke.x0+=ht,Ke.x1+=ht}return Vt}if(X.node.x.length&&X.node.y.length){for(Ce=0;Ce<Math.min(X.node.x.length,X.node.y.length,Ae.nodes.length);Ce++)if(X.node.x[Ce]&&X.node.y[Ce]){var dt=[X.node.x[Ce]*se,X.node.y[Ce]*me];Ae.nodes[Ce].x0=dt[0]-oe/2,Ae.nodes[Ce].x1=dt[0]+oe/2;var Et=Ae.nodes[Ce].y1-Ae.nodes[Ce].y0;Ae.nodes[Ce].y0=dt[1]-Et/2,Ae.nodes[Ce].y1=dt[1]+Et/2}if(X.arrangement==="snap"){ce=Ae.nodes;var $t=je(ce);De($t)}Se.update(Ae)}return{circular:xe,key:ee,trace:X,guid:f.randstr(),horizontal:ie,width:se,height:me,nodePad:X.node.pad,nodeLineColor:X.node.line.color,nodeLineWidth:X.node.line.width,linkLineColor:X.link.line.color,linkLineWidth:X.link.line.width,valueFormat:X.valueformat,valueSuffix:X.valuesuffix,textFont:X.textfont,translateX:J.x[0]*V.width+V.margin.l,translateY:V.height-J.y[1]*V.height+V.margin.t,dragParallel:ie?me:se,dragPerpendicular:ie?se:me,arrangement:X.arrangement,sankey:Se,graph:Ae,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(V,j,ee){var q=i(j.color),X=j.source.label+"|"+j.target.label,J=X+"__"+ee;return j.trace=V.trace,j.curveNumber=V.trace.index,{circular:V.circular,key:J,traceId:V.key,pointNumber:j.pointNumber,link:j,tinyColorHue:n.tinyRGB(q),tinyColorAlpha:q.getAlpha(),linkPath:C,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:j.flow}}function v(V){var j="",ee=V.width/2,q=V.circularPathData;return V.circularLinkType==="top"?j="M "+q.targetX+" "+(q.targetY+ee)+" L"+q.rightInnerExtent+" "+(q.targetY+ee)+"A"+(q.rightLargeArcRadius+ee)+" "+(q.rightSmallArcRadius+ee)+" 0 0 1 "+(q.rightFullExtent-ee)+" "+(q.targetY-q.rightSmallArcRadius)+"L"+(q.rightFullExtent-ee)+" "+q.verticalRightInnerExtent+"A"+(q.rightLargeArcRadius+ee)+" "+(q.rightLargeArcRadius+ee)+" 0 0 1 "+q.rightInnerExtent+" "+(q.verticalFullExtent-ee)+"L"+q.leftInnerExtent+" "+(q.verticalFullExtent-ee)+"A"+(q.leftLargeArcRadius+ee)+" "+(q.leftLargeArcRadius+ee)+" 0 0 1 "+(q.leftFullExtent+ee)+" "+q.verticalLeftInnerExtent+"L"+(q.leftFullExtent+ee)+" "+(q.sourceY-q.leftSmallArcRadius)+"A"+(q.leftLargeArcRadius+ee)+" "+(q.leftSmallArcRadius+ee)+" 0 0 1 "+q.leftInnerExtent+" "+(q.sourceY+ee)+"L"+q.sourceX+" "+(q.sourceY+ee)+"L"+q.sourceX+" "+(q.sourceY-ee)+"L"+q.leftInnerExtent+" "+(q.sourceY-ee)+"A"+(q.leftLargeArcRadius-ee)+" "+(q.leftSmallArcRadius-ee)+" 0 0 0 "+(q.leftFullExtent-ee)+" "+(q.sourceY-q.leftSmallArcRadius)+"L"+(q.leftFullExtent-ee)+" "+q.verticalLeftInnerExtent+"A"+(q.leftLargeArcRadius-ee)+" "+(q.leftLargeArcRadius-ee)+" 0 0 0 "+q.leftInnerExtent+" "+(q.verticalFullExtent+ee)+"L"+q.rightInnerExtent+" "+(q.verticalFullExtent+ee)+"A"+(q.rightLargeArcRadius-ee)+" "+(q.rightLargeArcRadius-ee)+" 0 0 0 "+(q.rightFullExtent+ee)+" "+q.verticalRightInnerExtent+"L"+(q.rightFullExtent+ee)+" "+(q.targetY-q.rightSmallArcRadius)+"A"+(q.rightLargeArcRadius-ee)+" "+(q.rightSmallArcRadius-ee)+" 0 0 0 "+q.rightInnerExtent+" "+(q.targetY-ee)+"L"+q.targetX+" "+(q.targetY-ee)+"Z":j="M "+q.targetX+" "+(q.targetY-ee)+" L"+q.rightInnerExtent+" "+(q.targetY-ee)+"A"+(q.rightLargeArcRadius+ee)+" "+(q.rightSmallArcRadius+ee)+" 0 0 0 "+(q.rightFullExtent-ee)+" "+(q.targetY+q.rightSmallArcRadius)+"L"+(q.rightFullExtent-ee)+" "+q.verticalRightInnerExtent+"A"+(q.rightLargeArcRadius+ee)+" "+(q.rightLargeArcRadius+ee)+" 0 0 0 "+q.rightInnerExtent+" "+(q.verticalFullExtent+ee)+"L"+q.leftInnerExtent+" "+(q.verticalFullExtent+ee)+"A"+(q.leftLargeArcRadius+ee)+" "+(q.leftLargeArcRadius+ee)+" 0 0 0 "+(q.leftFullExtent+ee)+" "+q.verticalLeftInnerExtent+"L"+(q.leftFullExtent+ee)+" "+(q.sourceY+q.leftSmallArcRadius)+"A"+(q.leftLargeArcRadius+ee)+" "+(q.leftSmallArcRadius+ee)+" 0 0 0 "+q.leftInnerExtent+" "+(q.sourceY-ee)+"L"+q.sourceX+" "+(q.sourceY-ee)+"L"+q.sourceX+" "+(q.sourceY+ee)+"L"+q.leftInnerExtent+" "+(q.sourceY+ee)+"A"+(q.leftLargeArcRadius-ee)+" "+(q.leftSmallArcRadius-ee)+" 0 0 1 "+(q.leftFullExtent-ee)+" "+(q.sourceY+q.leftSmallArcRadius)+"L"+(q.leftFullExtent-ee)+" "+q.verticalLeftInnerExtent+"A"+(q.leftLargeArcRadius-ee)+" "+(q.leftLargeArcRadius-ee)+" 0 0 1 "+q.leftInnerExtent+" "+(q.verticalFullExtent-ee)+"L"+q.rightInnerExtent+" "+(q.verticalFullExtent-ee)+"A"+(q.rightLargeArcRadius-ee)+" "+(q.rightLargeArcRadius-ee)+" 0 0 1 "+(q.rightFullExtent+ee)+" "+q.verticalRightInnerExtent+"L"+(q.rightFullExtent+ee)+" "+(q.targetY+q.rightSmallArcRadius)+"A"+(q.rightLargeArcRadius-ee)+" "+(q.rightSmallArcRadius-ee)+" 0 0 1 "+q.rightInnerExtent+" "+(q.targetY+ee)+"L"+q.targetX+" "+(q.targetY+ee)+"Z",j}function C(){var V=.5;function j(ee){if(ee.link.circular)return v(ee.link);var q=ee.link.source.x1,X=ee.link.target.x0,J=o(q,X),ie=J(V),ne=J(1-V),oe=ee.link.y0-ee.link.width/2,se=ee.link.y0+ee.link.width/2,me=ee.link.y1-ee.link.width/2,ce=ee.link.y1+ee.link.width/2;return"M"+q+","+oe+"C"+ie+","+oe+" "+ne+","+me+" "+X+","+me+"L"+X+","+ce+"C"+ne+","+ce+" "+ie+","+se+" "+q+","+se+"Z"}return j}function M(V,j){var ee=i(j.color),q=a.nodePadAcross,X=V.nodePad/2;j.dx=j.x1-j.x0,j.dy=j.y1-j.y0;var J=j.dx,ie=Math.max(.5,j.dy),ne="node_"+j.pointNumber;return j.group&&(ne=f.randstr()),j.trace=V.trace,j.curveNumber=V.trace.index,{index:j.pointNumber,key:ne,partOfGroup:j.partOfGroup||!1,group:j.group,traceId:V.key,trace:V.trace,node:j,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(J),visibleHeight:ie,zoneX:-q,zoneY:-X,zoneWidth:J+2*q,zoneHeight:ie+2*X,labelY:V.horizontal?j.dy/2+1:j.dx/2+1,left:j.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:ee.getBrightness()<=128,tinyColorHue:n.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,ne].join("_"),interactionState:V.interactionState,figure:V}}function E(V){V.attr("transform",function(j){return u(j.node.x0.toFixed(3),j.node.y0.toFixed(3))})}function L(V){V.call(E)}function z(V,j){V.call(L),j.attr("d",C())}function O(V){V.attr("width",function(j){return j.node.x1-j.node.x0}).attr("height",function(j){return j.visibleHeight})}function R(V){return V.link.width>1||V.linkLineWidth>0}function D(V){var j=u(V.translateX,V.translateY);return j+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function H(V,j,ee){V.on(".basic",null).on("mouseover.basic",function(q){!q.interactionState.dragInProgress&&!q.partOfGroup&&(ee.hover(this,q,j),q.interactionState.hovered=[this,q])}).on("mousemove.basic",function(q){!q.interactionState.dragInProgress&&!q.partOfGroup&&(ee.follow(this,q),q.interactionState.hovered=[this,q])}).on("mouseout.basic",function(q){!q.interactionState.dragInProgress&&!q.partOfGroup&&(ee.unhover(this,q,j),q.interactionState.hovered=!1)}).on("click.basic",function(q){q.interactionState.hovered&&(ee.unhover(this,q,j),q.interactionState.hovered=!1),!q.interactionState.dragInProgress&&!q.partOfGroup&&ee.select(this,q,j)})}function B(V,j,ee,q){var X=h.behavior.drag().origin(function(J){return{x:J.node.x0+J.visibleWidth/2,y:J.node.y0+J.visibleHeight/2}}).on("dragstart",function(J){if(J.arrangement!=="fixed"&&(f.ensureSingle(q._fullLayout._infolayer,"g","dragcover",function(ne){q._fullLayout._dragCover=ne}),f.raiseToTop(this),J.interactionState.dragInProgress=J.node,K(J.node),J.interactionState.hovered&&(ee.nodeEvents.unhover.apply(0,J.interactionState.hovered),J.interactionState.hovered=!1),J.arrangement==="snap")){var ie=J.traceId+"|"+J.key;J.forceLayouts[ie]?J.forceLayouts[ie].alpha(1):$(V,ie,J),W(V,j,J,ie,q)}}).on("drag",function(J){if(J.arrangement!=="fixed"){var ie=h.event.x,ne=h.event.y;J.arrangement==="snap"?(J.node.x0=ie-J.visibleWidth/2,J.node.x1=ie+J.visibleWidth/2,J.node.y0=ne-J.visibleHeight/2,J.node.y1=ne+J.visibleHeight/2):(J.arrangement==="freeform"&&(J.node.x0=ie-J.visibleWidth/2,J.node.x1=ie+J.visibleWidth/2),ne=Math.max(0,Math.min(J.size-J.visibleHeight/2,ne)),J.node.y0=ne-J.visibleHeight/2,J.node.y1=ne+J.visibleHeight/2),K(J.node),J.arrangement!=="snap"&&(J.sankey.update(J.graph),z(V.filter(le(J)),j))}}).on("dragend",function(J){if(J.arrangement!=="fixed"){J.interactionState.dragInProgress=!1;for(var ie=0;ie<J.node.childrenNodes.length;ie++)J.node.childrenNodes[ie].x=J.node.x,J.node.childrenNodes[ie].y=J.node.y;J.arrangement!=="snap"&&Q(J,q)}});V.on(".drag",null).call(X)}function $(V,j,ee,q){fe(ee.graph.nodes);var X=ee.graph.nodes.filter(function(J){return J.originalX===ee.node.originalX}).filter(function(J){return!J.partOfGroup});ee.forceLayouts[j]=s.forceSimulation(X).alphaDecay(0).force("collide",s.forceCollide().radius(function(J){return J.dy/2+ee.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",re(V,j,X,ee)).stop()}function W(V,j,ee,q,X){window.requestAnimationFrame(function J(){var ie;for(ie=0;ie<a.forceTicksPerFrame;ie++)ee.forceLayouts[q].tick();var ne=ee.graph.nodes;if(ue(ne),ee.sankey.update(ee.graph),z(V.filter(le(ee)),j),ee.forceLayouts[q].alpha()>0)window.requestAnimationFrame(J);else{var oe=ee.node.originalX;ee.node.x0=oe-ee.visibleWidth/2,ee.node.x1=oe+ee.visibleWidth/2,Q(ee,X)}})}function re(V,j,ee,q){return function(){for(var J=0,ie=0;ie<ee.length;ie++){var ne=ee[ie];ne===q.interactionState.dragInProgress?(ne.x=ne.lastDraggedX,ne.y=ne.lastDraggedY):(ne.vx=(ne.originalX-ne.x)/a.forceTicksPerFrame,ne.y=Math.min(q.size-ne.dy/2,Math.max(ne.dy/2,ne.y))),J=Math.max(J,Math.abs(ne.vx),Math.abs(ne.vy))}!q.interactionState.dragInProgress&&J<.1&&q.forceLayouts[j].alpha()>0&&q.forceLayouts[j].alpha(0)}}function Q(V,j){for(var ee=[],q=[],X=0;X<V.graph.nodes.length;X++){var J=(V.graph.nodes[X].x0+V.graph.nodes[X].x1)/2,ie=(V.graph.nodes[X].y0+V.graph.nodes[X].y1)/2;ee.push(J/V.figure.width),q.push(ie/V.figure.height)}p.call("_guiRestyle",j,{"node.x":[ee],"node.y":[q]},V.trace.index).then(function(){j._fullLayout._dragCover&&j._fullLayout._dragCover.remove()})}function Z(V){var j=[],ee;for(ee=0;ee<V.length;ee++)V[ee].originalX=(V[ee].x0+V[ee].x1)/2,V[ee].originalY=(V[ee].y0+V[ee].y1)/2,j.indexOf(V[ee].originalX)===-1&&j.push(V[ee].originalX);for(j.sort(function(q,X){return q-X}),ee=0;ee<V.length;ee++)V[ee].originalLayerIndex=j.indexOf(V[ee].originalX),V[ee].originalLayer=V[ee].originalLayerIndex/(j.length-1)}function K(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function le(V){return function(j){return j.node.originalX===V.node.originalX}}function fe(V){for(var j=0;j<V.length;j++)V[j].y=(V[j].y0+V[j].y1)/2,V[j].x=(V[j].x0+V[j].x1)/2}function ue(V){for(var j=0;j<V.length;j++)V[j].y0=V[j].y-V[j].dy/2,V[j].y1=V[j].y0+V[j].dy,V[j].x0=V[j].x-V[j].dx/2,V[j].x1=V[j].x0+V[j].dx}I.exports=function(V,j,ee,q,X){var J=!1;f.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){J=!0});var ie=V._fullLayout._dragCover,ne=ee.filter(function(Ae){return g(Ae).trace.visible}).map(x.bind(null,q)),oe=j.selectAll("."+a.cn.sankey).data(ne,d);oe.exit().remove(),oe.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",D),oe.each(function(Ae,Ce){V._fullData[Ce]._sankey=Ae;var Ee="bgsankey-"+Ae.trace.uid+"-"+Ce;f.ensureSingle(V._fullLayout._draggers,"rect",Ee),V._fullData[Ce]._bgRect=h.select("."+Ee),V._fullData[Ce]._bgRect.style("pointer-events","all").attr("width",Ae.width).attr("height",Ae.height).attr("x",Ae.translateX).attr("y",Ae.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(a.ease).duration(a.duration).attr("transform",D);var se=oe.selectAll("."+a.cn.sankeyLinks).data(b,d);se.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var me=se.selectAll("."+a.cn.sankeyLink).data(function(Ae){var Ce=Ae.graph.links;return Ce.filter(function(Ee){return Ee.value}).map(w.bind(null,Ae))},d);me.enter().append("path").classed(a.cn.sankeyLink,!0).call(H,oe,X.linkEvents),me.style("stroke",function(Ae){return R(Ae)?n.tinyRGB(i(Ae.linkLineColor)):Ae.tinyColorHue}).style("stroke-opacity",function(Ae){return R(Ae)?n.opacity(Ae.linkLineColor):Ae.tinyColorAlpha}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}).style("stroke-width",function(Ae){return R(Ae)?Ae.linkLineWidth:1}).attr("d",C()),me.style("opacity",function(){return V._context.staticPlot||J||ie?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),me.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ce=oe.selectAll("."+a.cn.sankeyNodeSet).data(b,d);ce.enter().append("g").classed(a.cn.sankeyNodeSet,!0),ce.style("cursor",function(Ae){switch(Ae.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var pe=ce.selectAll("."+a.cn.sankeyNode).data(function(Ae){var Ce=Ae.graph.nodes;return Z(Ce),Ce.map(M.bind(null,Ae))},d);pe.enter().append("g").classed(a.cn.sankeyNode,!0).call(E).style("opacity",function(Ae){return(V._context.staticPlot||J)&&!Ae.partOfGroup?1:0}),pe.call(H,oe,X.nodeEvents).call(B,me,X,V),pe.transition().ease(a.ease).duration(a.duration).call(E).style("opacity",function(Ae){return Ae.partOfGroup?0:1}),pe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var xe=pe.selectAll("."+a.cn.nodeRect).data(b);xe.enter().append("rect").classed(a.cn.nodeRect,!0).call(O),xe.style("stroke-width",function(Ae){return Ae.nodeLineWidth}).style("stroke",function(Ae){return n.tinyRGB(i(Ae.nodeLineColor))}).style("stroke-opacity",function(Ae){return n.opacity(Ae.nodeLineColor)}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}),xe.transition().ease(a.ease).duration(a.duration).call(O);var Se=pe.selectAll("."+a.cn.nodeLabel).data(b);Se.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),Se.attr("data-notex",1).text(function(Ae){return Ae.node.label}).each(function(Ae){var Ce=h.select(this);r.font(Ce,Ae.textFont),_.convertToTspans(Ce,V)}).style("text-shadow",_.makeTextShadow(V._fullLayout.paper_bgcolor)).attr("text-anchor",function(Ae){return Ae.horizontal&&Ae.left?"end":"start"}).attr("transform",function(Ae){var Ce=h.select(this),Ee=_.lineCount(Ce),Oe=Ae.textFont.size*((Ee-1)*S-c),_e=Ae.nodeLineWidth/2+T,Re=((Ae.horizontal?Ae.visibleHeight:Ae.visibleWidth)-Oe)/2;Ae.horizontal&&(Ae.left?_e=-_e:_e+=Ae.visibleWidth);var Ve=Ae.horizontal?"":"scale(-1,1)"+l(90);return u(Ae.horizontal?_e:Re,Ae.horizontal?Re:_e)+Ve}),Se.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":920,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],925:[function(e,I,F){I.exports=function(o,h){for(var y=o.cd,t=[],a=y[0].trace,i=a._sankey.graph.nodes,n=0;n<i.length;n++){var r=i[n];if(!r.partOfGroup){var f=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];a.orientation==="v"&&f.reverse(),h&&h.contains(f,!1,n,o)&&t.push({pointNumber:r.pointNumber})}}return t}},{}],926:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){for(var t=0;t<h.length;t++)h[t].i=t;s.mergeArray(y.text,h,"tx"),s.mergeArray(y.texttemplate,h,"txt"),s.mergeArray(y.hovertext,h,"htx"),s.mergeArray(y.customdata,h,"data"),s.mergeArray(y.textposition,h,"tp"),y.textfont&&(s.mergeArrayCastPositive(y.textfont.size,h,"ts"),s.mergeArray(y.textfont.color,h,"tc"),s.mergeArray(y.textfont.family,h,"tf"));var a=y.marker;if(a){s.mergeArrayCastPositive(a.size,h,"ms"),s.mergeArrayCastPositive(a.opacity,h,"mo"),s.mergeArray(a.symbol,h,"mx"),s.mergeArray(a.color,h,"mc");var i=a.line;a.line&&(s.mergeArray(i.color,h,"mlc"),s.mergeArrayCastPositive(i.width,h,"mlw"));var n=a.gradient;n&&n.type!=="none"&&(s.mergeArray(n.type,h,"mgt"),s.mergeArray(n.color,h,"mgc"))}}},{"../../lib":503}],927:[function(e,I,F){var s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=e("../../plots/template_attributes").texttemplateAttrs,h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../../components/colorscale/attributes"),t=e("../../plots/font_attributes"),a=e("../../components/drawing/attributes").dash,i=e("../../components/drawing/attributes").pattern,n=e("../../components/drawing"),r=e("./constants"),f=e("../../lib/extend").extendFlat;function u(d){return{valType:"any",dflt:0,editType:"calc"}}function l(d){return{valType:"any",editType:"calc"}}function m(d){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}I.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:u(),yperiod:u(),xperiod0:l(),yperiod0:l(),xperiodalignment:m(),yperiodalignment:m(),xhoverformat:s("x"),yhoverformat:s("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:o({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:h({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},a,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:i,marker:f({symbol:{valType:"enumerated",values:n.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},y("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},y("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:t({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":931}],928:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../plots/cartesian/axes"),y=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM,a=e("./subtypes"),i=e("./colorscale_calc"),n=e("./arrays_to_calcdata"),r=e("./calc_selection");function f(g,_){var p=g._fullLayout,A=h.getFromId(g,_.xaxis||"x"),c=h.getFromId(g,_.yaxis||"y"),S=A.makeCalcdata(_,"x"),T=c.makeCalcdata(_,"y"),x=y(_,A,"x",S),w=y(_,c,"y",T),v=x.vals,C=w.vals,M=_._length,E=new Array(M),L=_.ids,z=b(_,p,A,c),O=!1,R,D,H,B,$,W;m(p,_);var re="x",Q="y",Z;if(z)o.pushUnique(z.traceIndices,_._expandedIndex),R=z.orientation==="v",R?(Q="s",Z="x"):(re="s",Z="y"),$=z.stackgaps==="interpolate";else{var K=l(_,M);u(g,_,A,c,v,C,K)}var le=!!_.xperiodalignment,fe=!!_.yperiodalignment;for(D=0;D<M;D++){var ue=E[D]={},V=s(v[D]),j=s(C[D]);V&&j?(ue[re]=v[D],ue[Q]=C[D],le&&(ue.orig_x=S[D],ue.xEnd=x.ends[D],ue.xStart=x.starts[D]),fe&&(ue.orig_y=T[D],ue.yEnd=w.ends[D],ue.yStart=w.starts[D])):z&&(R?V:j)?(ue[Z]=R?v[D]:C[D],ue.gap=!0,$?(ue.s=t,O=!0):ue.s=0):ue[re]=ue[Q]=t,L&&(ue.id=String(L[D]))}if(n(E,_),i(g,_),r(E,_),z){for(D=0;D<E.length;)E[D][Z]===t?E.splice(D,1):D++;if(o.sort(E,function(J,ie){return J[Z]-ie[Z]||J.i-ie.i}),O){for(D=0;D<E.length-1&&E[D].gap;)D++;for(W=E[D].s,W||(W=E[D].s=0),H=0;H<D;H++)E[H].s=W;for(B=E.length-1;B>D&&E[B].gap;)B--;for(W=E[B].s,H=E.length-1;H>B;H--)E[H].s=W;for(;D<B;)if(D++,E[D].gap){for(H=D+1;E[H].gap;)H++;for(var ee=E[D-1][Z],q=E[D-1].s,X=(E[H].s-q)/(E[H][Z]-ee);D<H;)E[D].s=q+(E[D][Z]-ee)*X,D++}}}return E}function u(g,_,p,A,c,S,T){var x=_._length,w=g._fullLayout,v=p._id,C=A._id,M=w._firstScatter[d(_)]===_.uid,E=(b(_,w,p,A)||{}).orientation,L=_.fill;p._minDtick=0,A._minDtick=0;var z={padded:!0},O={padded:!0};T&&(z.ppad=O.ppad=T);var R=x<2||c[0]!==c[x-1]||S[0]!==S[x-1];R&&(L==="tozerox"||L==="tonextx"&&(M||E==="h"))?z.tozero=!0:!(_.error_y||{}).visible&&(L==="tonexty"||L==="tozeroy"||!a.hasMarkers(_)&&!a.hasText(_))&&(z.padded=!1,z.ppad=0),R&&(L==="tozeroy"||L==="tonexty"&&(M||E==="v"))?O.tozero=!0:(L==="tonextx"||L==="tozerox")&&(O.padded=!1),v&&(_._extremes[v]=h.findExtremes(p,c,z)),C&&(_._extremes[C]=h.findExtremes(A,S,O))}function l(g,_){if(!!a.hasMarkers(g)){var p=g.marker,A=1.6*(g.marker.sizeref||1),c;if(g.marker.sizemode==="area"?c=function(v){return Math.max(Math.sqrt((v||0)/A),3)}:c=function(v){return Math.max((v||0)/A,3)},o.isArrayOrTypedArray(p.size)){var S={type:"linear"};h.setConvert(S);for(var T=S.makeCalcdata(g.marker,"size"),x=new Array(_),w=0;w<_;w++)x[w]=c(T[w]);return x}else return c(p.size)}}function m(g,_){var p=d(_),A=g._firstScatter;A[p]||(A[p]=_.uid)}function d(g){var _=g.stackgroup;return g.xaxis+g.yaxis+g.type+(_?"-"+_:"")}function b(g,_,p,A){var c=g.stackgroup;if(!!c){var S=_._scatterStackOpts[p._id+A._id][c],T=S.orientation==="v"?A:p;if(T.type==="linear"||T.type==="log")return S}}I.exports={calc:f,calcMarkerSize:l,calcAxisExpansion:u,setFirstScatter:m,getStackOpts:b}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":926,"./calc_selection":929,"./colorscale_calc":930,"./subtypes":952,"fast-isnumeric":190}],929:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){s.isArrayOrTypedArray(y.selectedpoints)&&s.tagSelected(h,y)}},{"../../lib":503}],930:[function(e,I,F){var s=e("../../components/colorscale/helpers").hasColorscale,o=e("../../components/colorscale/calc"),h=e("./subtypes");I.exports=function(t,a){h.hasLines(a)&&s(a,"line")&&o(t,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),h.hasMarkers(a)&&(s(a,"marker")&&o(t,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),s(a,"marker.line")&&o(t,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":952}],931:[function(e,I,F){I.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],932:[function(e,I,F){var s=e("./calc");I.exports=function(t,a){var i=a.xaxis,n=a.yaxis,r=i._id+n._id,f=t._fullLayout._scatterStackOpts[r];if(!!f){var u=t.calcdata,l,m,d,b,g,_,p,A,c,S,T,x,w,v,C;for(var M in f){S=f[M];var E=S.traceIndices;if(!!E.length){for(T=S.stackgaps==="interpolate",x=S.groupnorm,S.orientation==="v"?(w="x",v="y"):(w="y",v="x"),C=new Array(E.length),l=0;l<C.length;l++)C[l]=!1;_=u[E[0]];var L=new Array(_.length);for(l=0;l<_.length;l++)L[l]=_[l][w];for(l=1;l<E.length;l++){for(g=u[E[l]],m=d=0;m<g.length;m++){for(p=g[m][w];p>L[d]&&d<L.length;d++)o(g,m,L[d],l,C,T,w),m++;if(p!==L[d]){for(b=0;b<l;b++)o(u[E[b]],d,p,b,C,T,w);L.splice(d,0,p)}d++}for(;d<L.length;d++)o(g,m,L[d],l,C,T,w),m++}var z=L.length;for(m=0;m<_.length;m++){for(A=_[m][v]=_[m].s,l=1;l<E.length;l++)g=u[E[l]],g[0].trace._rawLength=g[0].trace._length,g[0].trace._length=z,A+=g[m].s,g[m][v]=A;if(x)for(c=(x==="fraction"?A:A/100)||1,l=0;l<E.length;l++){var O=u[E[l]][m];O[v]/=c,O.sNorm=O.s/c}}for(l=0;l<E.length;l++){g=u[E[l]];var R=g[0].trace,D=s.calcMarkerSize(R,R._rawLength),H=Array.isArray(D);if(D&&C[l]||H){var B=D;for(D=new Array(z),m=0;m<z;m++)D[m]=g[m].gap?0:H?B[g[m].i]:B}var $=new Array(z),W=new Array(z);for(m=0;m<z;m++)$[m]=g[m].x,W[m]=g[m].y;s.calcAxisExpansion(t,R,i,n,$,W,D),g[0].t.orientation=S.orientation}}}}};function o(y,t,a,i,n,r,f){n[i]=!0;var u={i:null,gap:!0,s:0};if(u[f]=a,y.splice(t,0,u),t&&a===y[t-1][f]){var l=y[t-1];u.s=l.s,u.i=l.i,u.gap=l.gap}else r&&(u.s=h(y,t,a,f));t||(y[0].t=y[1].t,y[0].trace=y[1].trace,delete y[1].t,delete y[1].trace)}function h(y,t,a,i){var n=y[t-1],r=y[t+1];return r?n?n.s+(r.s-n.s)*(a-n[i])/(r[i]-n[i]):r.s:n.s}},{"./calc":928}],933:[function(e,I,F){I.exports=function(o){for(var h=0;h<o.length;h++){var y=o[h];if(y.type==="scatter"){var t=y.fill;if(!(t==="none"||t==="toself")&&(y.opacity=void 0,t==="tonexty"||t==="tonextx"))for(var a=h-1;a>=0;a--){var i=o[a];if(i.type==="scatter"&&i.xaxis===y.xaxis&&i.yaxis===y.yaxis){i.opacity=void 0;break}}}}}},{}],934:[function(e,I,F){var s=e("../../lib"),o=e("../../registry"),h=e("./attributes"),y=e("./constants"),t=e("./subtypes"),a=e("./xy_defaults"),i=e("./period_defaults"),n=e("./stack_defaults"),r=e("./marker_defaults"),f=e("./line_defaults"),u=e("./line_shape_defaults"),l=e("./text_defaults"),m=e("./fillcolor_defaults"),d=e("../../lib").coercePattern;I.exports=function(g,_,p,A){function c(E,L){return s.coerce(g,_,h,E,L)}var S=a(g,_,A,c);if(S||(_.visible=!1),!!_.visible){i(g,_,A,c),c("xhoverformat"),c("yhoverformat");var T=n(g,_,A,c),x=!T&&S<y.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("mode",x),t.hasLines(_)&&(f(g,_,p,A,c),u(g,_,c),c("connectgaps"),c("line.simplify")),t.hasMarkers(_)&&r(g,_,p,A,c,{gradient:!0}),t.hasText(_)&&(c("texttemplate"),l(g,_,A,c));var w=[];(t.hasMarkers(_)||t.hasText(_))&&(c("cliponaxis"),c("marker.maxdisplayed"),w.push("points")),c("fill",T?T.fillDflt:"none"),_.fill!=="none"&&(m(g,_,p,c),t.hasLines(_)||u(g,_,c),d(c,"fillpattern",_.fillcolor,!1));var v=(_.line||{}).color,C=(_.marker||{}).color;(_.fill==="tonext"||_.fill==="toself")&&w.push("fills"),c("hoveron",w.join("+")||"points"),_.hoveron!=="fills"&&c("hovertemplate");var M=o.getComponentMethod("errorbars","supplyDefaults");M(g,_,v||C||p,{axis:"y"}),M(g,_,v||C||p,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(_,c)}}},{"../../lib":503,"../../registry":638,"./attributes":927,"./constants":931,"./fillcolor_defaults":935,"./line_defaults":940,"./line_shape_defaults":942,"./marker_defaults":946,"./period_defaults":947,"./stack_defaults":950,"./subtypes":952,"./text_defaults":953,"./xy_defaults":954}],935:[function(e,I,F){var s=e("../../components/color"),o=e("../../lib").isArrayOrTypedArray;I.exports=function(y,t,a,i){var n=!1;if(t.marker){var r=t.marker.color,f=(t.marker.line||{}).color;r&&!o(r)?n=r:f&&!o(f)&&(n=f)}i("fillcolor",s.addOpacity((t.line||{}).color||n||a,.5))}},{"../../components/color":366,"../../lib":503}],936:[function(e,I,F){var s=e("../../plots/cartesian/axes");I.exports=function(h,y,t){var a={},i={_fullLayout:t},n=s.getFromTrace(i,y,"x"),r=s.getFromTrace(i,y,"y");return a.xLabel=s.tickText(n,n.c2l(h.x),!0).text,a.yLabel=s.tickText(r,r.c2l(h.y),!0).text,a}},{"../../plots/cartesian/axes":554}],937:[function(e,I,F){var s=e("../../components/color"),o=e("./subtypes");I.exports=function(y,t){var a,i;if(y.mode==="lines")return a=y.line.color,a&&s.opacity(a)?a:y.fillcolor;if(y.mode==="none")return y.fill?y.fillcolor:"";var n=t.mcc||(y.marker||{}).color,r=t.mlcc||((y.marker||{}).line||{}).color;return i=n&&s.opacity(n)?n:r&&s.opacity(r)&&(t.mlw||((y.marker||{}).line||{}).width)?r:"",i?s.opacity(i)<.3?s.addOpacity(i,.3):i:(a=(y.line||{}).color,a&&s.opacity(a)&&o.hasLines(y)&&y.line.width?a:y.fillcolor)}},{"../../components/color":366,"./subtypes":952}],938:[function(e,I,F){var s=e("../../lib"),o=e("../../components/fx"),h=e("../../registry"),y=e("./get_trace_color"),t=e("../../components/color"),a=s.fillText;I.exports=function(n,r,f,u){var l=n.cd,m=l[0].trace,d=n.xa,b=n.ya,g=d.c2p(r),_=b.c2p(f),p=[g,_],A=m.hoveron||"",c=m.mode.indexOf("markers")!==-1?3:.5,S=!!m.xperiodalignment,T=!!m.yperiodalignment;if(A.indexOf("points")!==-1){var x=function(oe){if(S){var se=d.c2p(oe.xStart),me=d.c2p(oe.xEnd);return g>=Math.min(se,me)&&g<=Math.max(se,me)?0:1/0}var ce=Math.max(3,oe.mrc||0),pe=1-1/ce,xe=Math.abs(d.c2p(oe.x)-g);return xe<ce?pe*xe/ce:xe-ce+pe},w=function(oe){if(T){var se=b.c2p(oe.yStart),me=b.c2p(oe.yEnd);return _>=Math.min(se,me)&&_<=Math.max(se,me)?0:1/0}var ce=Math.max(3,oe.mrc||0),pe=1-1/ce,xe=Math.abs(b.c2p(oe.y)-_);return xe<ce?pe*xe/ce:xe-ce+pe},v=function(oe){var se=Math.max(c,oe.mrc||0),me=d.c2p(oe.x)-g,ce=b.c2p(oe.y)-_;return Math.max(Math.sqrt(me*me+ce*ce)-se,1-c/se)},C=o.getDistanceFunction(u,x,w,v);if(o.getClosest(l,C,n),n.index!==!1){var M=l[n.index],E=d.c2p(M.x,!0),L=b.c2p(M.y,!0),z=M.mrc||1;n.index=M.i;var O=l[0].t.orientation,R=O&&(M.sNorm||M.s),D=O==="h"?R:M.orig_x!==void 0?M.orig_x:M.x,H=O==="v"?R:M.orig_y!==void 0?M.orig_y:M.y;return s.extendFlat(n,{color:y(m,M),x0:E-z,x1:E+z,xLabelVal:D,y0:L-z,y1:L+z,yLabelVal:H,spikeDistance:v(M),hovertemplate:m.hovertemplate}),a(M,m,n),h.getComponentMethod("errorbars","hoverInfo")(M,m,n),[n]}}if(A.indexOf("fills")!==-1&&m._polygons){var B=m._polygons,$=[],W=!1,re=1/0,Q=-1/0,Z=1/0,K=-1/0,le,fe,ue,V,j,ee,q,X,J;for(le=0;le<B.length;le++)ue=B[le],ue.contains(p)&&(W=!W,$.push(ue),Z=Math.min(Z,ue.ymin),K=Math.max(K,ue.ymax));if(W){Z=Math.max(Z,0),K=Math.min(K,b._length);var ie=(Z+K)/2;for(le=0;le<$.length;le++)for(V=$[le].pts,fe=1;fe<V.length;fe++)X=V[fe-1][1],J=V[fe][1],X>ie!=J>=ie&&(ee=V[fe-1][0],q=V[fe][0],J-X&&(j=ee+(q-ee)*(ie-X)/(J-X),re=Math.min(re,j),Q=Math.max(Q,j)));re=Math.max(re,0),Q=Math.min(Q,d._length);var ne=t.defaultLine;return t.opacity(m.fillcolor)?ne=m.fillcolor:t.opacity((m.line||{}).color)&&(ne=m.line.color),s.extendFlat(n,{distance:n.maxHoverDistance,x0:re,x1:Q,y0:ie,y1:ie,color:ne,hovertemplate:!1}),delete n.index,m.text&&!Array.isArray(m.text)?n.text=String(m.text):n.text=m.name,[n]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":937}],939:[function(e,I,F){var s=e("./subtypes");I.exports={hasLines:s.hasLines,hasMarkers:s.hasMarkers,hasText:s.hasText,isBubble:s.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":926,"./attributes":927,"./calc":928,"./cross_trace_calc":932,"./cross_trace_defaults":933,"./defaults":934,"./format_labels":936,"./hover":938,"./marker_colorbar":945,"./plot":948,"./select":949,"./style":951,"./subtypes":952}],940:[function(e,I,F){var s=e("../../lib").isArrayOrTypedArray,o=e("../../components/colorscale/helpers").hasColorscale,h=e("../../components/colorscale/defaults");I.exports=function(t,a,i,n,r,f){var u=(t.marker||{}).color;if(r("line.color",i),o(t,"line"))h(t,a,n,r,{prefix:"line.",cLetter:"c"});else{var l=(s(u)?!1:u)||i;r("line.color",l)}r("line.width"),(f||{}).noDash||r("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],941:[function(e,I,F){var s=e("../../constants/numerical"),o=s.BADNUM,h=s.LOG_CLIP,y=h+.5,t=h-.5,a=e("../../lib"),i=a.segmentsIntersect,n=a.constrain,r=e("./constants");I.exports=function(u,l){var m=l.xaxis,d=l.yaxis,b=m.type==="log",g=d.type==="log",_=m._length,p=d._length,A=l.connectGaps,c=l.baseTolerance,S=l.shape,T=S==="linear",x=l.fill&&l.fill!=="none",w=[],v=r.minTolerance,C=u.length,M=new Array(C),E=0,L,z,O,R,D,H,B,$,W,re,Q,Z,K,le,fe,ue;function V(wt){var Ot=u[wt];if(!Ot)return!1;var Vt=l.linearized?m.l2p(Ot.x):m.c2p(Ot.x),kt=l.linearized?d.l2p(Ot.y):d.c2p(Ot.y);if(Vt===o){if(b&&(Vt=m.c2p(Ot.x,!0)),Vt===o)return!1;g&&kt===o&&(Vt*=Math.abs(m._m*p*(m._m>0?y:t)/(d._m*_*(d._m>0?y:t)))),Vt*=1e3}if(kt===o){if(g&&(kt=d.c2p(Ot.y,!0)),kt===o)return!1;kt*=1e3}return[Vt,kt]}function j(wt,Ot,Vt,kt){var St=Vt-wt,ot=kt-Ot,ht=.5-wt,Ke=.5-Ot,Pe=St*St+ot*ot,We=St*ht+ot*Ke;if(We>0&&We<Pe){var Qe=ht*ot-Ke*St;if(Qe*Qe<Pe)return!0}}var ee,q;function X(wt,Ot){var Vt=wt[0]/_,kt=wt[1]/p,St=Math.max(0,-Vt,Vt-1,-kt,kt-1);return St&&ee!==void 0&&j(Vt,kt,ee,q)&&(St=0),St&&Ot&&j(Vt,kt,Ot[0]/_,Ot[1]/p)&&(St=0),(1+r.toleranceGrowth*St)*c}function J(wt,Ot){var Vt=wt[0]-Ot[0],kt=wt[1]-Ot[1];return Math.sqrt(Vt*Vt+kt*kt)}var ie=r.maxScreensAway,ne=-_*ie,oe=_*(1+ie),se=-p*ie,me=p*(1+ie),ce=[[ne,se,oe,se],[oe,se,oe,me],[oe,me,ne,me],[ne,me,ne,se]],pe,xe,Se,Ae,Ce,Ee;function Oe(wt,Ot){for(var Vt=[],kt=0,St=0;St<4;St++){var ot=ce[St],ht=i(wt[0],wt[1],Ot[0],Ot[1],ot[0],ot[1],ot[2],ot[3]);ht&&(!kt||Math.abs(ht.x-Vt[0][0])>1||Math.abs(ht.y-Vt[0][1])>1)&&(ht=[ht.x,ht.y],kt&&J(ht,wt)<J(Vt[0],wt)?Vt.unshift(ht):Vt.push(ht),kt++)}return Vt}function _e(wt){if(wt[0]<ne||wt[0]>oe||wt[1]<se||wt[1]>me)return[n(wt[0],ne,oe),n(wt[1],se,me)]}function Re(wt,Ot){if(wt[0]===Ot[0]&&(wt[0]===ne||wt[0]===oe)||wt[1]===Ot[1]&&(wt[1]===se||wt[1]===me))return!0}function Ve(wt,Ot){var Vt=[],kt=_e(wt),St=_e(Ot);return kt&&St&&Re(kt,St)||(kt&&Vt.push(kt),St&&Vt.push(St)),Vt}function Je(wt,Ot,Vt){return function(kt,St){var ot=_e(kt),ht=_e(St),Ke=[];if(ot&&ht&&Re(ot,ht))return Ke;ot&&Ke.push(ot),ht&&Ke.push(ht);var Pe=2*a.constrain((kt[wt]+St[wt])/2,Ot,Vt)-((ot||kt)[wt]+(ht||St)[wt]);if(Pe){var We;ot&&ht?We=Pe>0==ot[wt]>ht[wt]?ot:ht:We=ot||ht,We[wt]+=Pe}return Ke}}var ze;S==="linear"||S==="spline"?ze=Oe:S==="hv"||S==="vh"?ze=Ve:S==="hvh"?ze=Je(0,ne,oe):S==="vhv"&&(ze=Je(1,se,me));function De(wt,Ot){var Vt=Ot[0]-wt[0],kt=(Ot[1]-wt[1])/Vt,St=(wt[1]*Ot[0]-Ot[1]*wt[0])/Vt;return St>0?[kt>0?ne:oe,me]:[kt>0?oe:ne,se]}function je(wt){var Ot=wt[0],Vt=wt[1],kt=Ot===M[E-1][0],St=Vt===M[E-1][1];if(!(kt&&St))if(E>1){var ot=Ot===M[E-2][0],ht=Vt===M[E-2][1];kt&&(Ot===ne||Ot===oe)&&ot?ht?E--:M[E-1]=wt:St&&(Vt===se||Vt===me)&&ht?ot?E--:M[E-1]=wt:M[E++]=wt}else M[E++]=wt}function dt(wt){M[E-1][0]!==wt[0]&&M[E-1][1]!==wt[1]&&je([Se,Ae]),je(wt),Ce=null,Se=Ae=0}function Et(wt){if(ee=wt[0]/_,q=wt[1]/p,pe=wt[0]<ne?ne:wt[0]>oe?oe:0,xe=wt[1]<se?se:wt[1]>me?me:0,pe||xe){if(!E)M[E++]=[pe||wt[0],xe||wt[1]];else if(Ce){var Ot=ze(Ce,wt);Ot.length>1&&(dt(Ot[0]),M[E++]=Ot[1])}else Ee=ze(M[E-1],wt)[0],M[E++]=Ee;var Vt=M[E-1];pe&&xe&&(Vt[0]!==pe||Vt[1]!==xe)?(Ce&&(Se!==pe&&Ae!==xe?je(Se&&Ae?De(Ce,wt):[Se||pe,Ae||xe]):Se&&Ae&&je([Se,Ae])),je([pe,xe])):Se-pe&&Ae-xe&&je([pe||Se,xe||Ae]),Ce=wt,Se=pe,Ae=xe}else Ce&&dt(ze(Ce,wt)[0]),M[E++]=wt}for(L=0;L<C;L++)if(z=V(L),!!z){for(E=0,Ce=null,Et(z),L++;L<C;L++){if(R=V(L),!R){if(A)continue;break}if(!T||!l.simplify){Et(R);continue}var $t=V(L+1);if(re=J(R,z),!(!(x&&(E===0||E===C-1))&&re<X(R,$t)*v)){for($=[(R[0]-z[0])/re,(R[1]-z[1])/re],D=z,Q=re,Z=le=fe=0,B=!1,O=R,L++;L<u.length;L++){if(H=$t,$t=V(L+1),!H){if(A)continue;break}if(W=[H[0]-z[0],H[1]-z[1]],ue=W[0]*$[1]-W[1]*$[0],le=Math.min(le,ue),fe=Math.max(fe,ue),fe-le>X(H,$t))break;O=H,K=W[0]*$[0]+W[1]*$[1],K>Q?(Q=K,R=H,B=!1):K<Z&&(Z=K,D=H,B=!0)}if(B?(Et(R),O!==D&&Et(D)):(D!==z&&Et(D),O!==R&&Et(R)),Et(O),L>=u.length||!H)break;Et(H),z=H}}Ce&&je([Se||Ce[0],Ae||Ce[1]]),w.push(M.slice(0,E))}return w}},{"../../constants/numerical":479,"../../lib":503,"./constants":931}],942:[function(e,I,F){I.exports=function(o,h,y){var t=y("line.shape");t==="spline"&&y("line.smoothing")}},{}],943:[function(e,I,F){var s={tonextx:1,tonexty:1,tonext:1};I.exports=function(h,y,t){var a,i,n,r,f,u={},l=!1,m=-1,d=0,b=-1;for(i=0;i<t.length;i++)a=t[i][0].trace,n=a.stackgroup||"",n?n in u?f=u[n]:(f=u[n]=d,d++):a.fill in s&&b>=0?f=b:(f=b=d,d++),f<m&&(l=!0),a._groupIndex=m=f;var g=t.slice();l&&g.sort(function(p,A){var c=p[0].trace,S=A[0].trace;return c._groupIndex-S._groupIndex||c.index-S.index});var _={};for(i=0;i<g.length;i++)a=g[i][0].trace,n=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in s&&(r=_[n],a._prevtrace=r||null,r&&(r._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),_[n]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return g}},{}],944:[function(e,I,F){var s=e("fast-isnumeric");I.exports=function(h,y){y||(y=2);var t=h.marker,a=t.sizeref||1,i=t.sizemin||0,n=t.sizemode==="area"?function(r){return Math.sqrt(r/a)}:function(r){return r/a};return function(r){var f=n(r/y);return s(f)&&f>0?Math.max(f,i):0}}},{"fast-isnumeric":190}],945:[function(e,I,F){I.exports={container:"marker",min:"cmin",max:"cmax"}},{}],946:[function(e,I,F){var s=e("../../components/color"),o=e("../../components/colorscale/helpers").hasColorscale,h=e("../../components/colorscale/defaults"),y=e("./subtypes");I.exports=function(a,i,n,r,f,u){var l=y.isBubble(a),m=(a.line||{}).color,d;if(u=u||{},m&&(n=m),f("marker.symbol"),f("marker.opacity",l?.7:1),f("marker.size"),f("marker.color",n),o(a,"marker")&&h(a,i,r,f,{prefix:"marker.",cLetter:"c"}),u.noSelect||(f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size")),u.noLine||(m&&!Array.isArray(m)&&i.marker.color!==m?d=m:l?d=s.background:d=s.defaultLine,f("marker.line.color",d),o(a,"marker.line")&&h(a,i,r,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",l?1:0)),l&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode")),u.gradient){var b=f("marker.gradient.type");b!=="none"&&f("marker.gradient.color")}}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":952}],947:[function(e,I,F){var s=e("../../lib").dateTick0,o=e("../../constants/numerical"),h=o.ONEWEEK;function y(t,a){return t%h===0?s(a,1):s(a,0)}I.exports=function(a,i,n,r,f){if(f||(f={x:!0,y:!0}),f.x){var u=r("xperiod");u&&(r("xperiod0",y(u,i.xcalendar)),r("xperiodalignment"))}if(f.y){var l=r("yperiod");l&&(r("yperiod0",y(l,i.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],948:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../registry"),h=e("../../lib"),y=h.ensureSingle,t=h.identity,a=e("../../components/drawing"),i=e("./subtypes"),n=e("./line_points"),r=e("./link_traces"),f=e("../../lib/polygon").tester;I.exports=function(b,g,_,p,A,c){var S,T,x=!A,w=!!A&&A.duration>0,v=r(b,g,_);if(S=p.selectAll("g.trace").data(v,function(M){return M[0].trace.uid}),S.enter().append("g").attr("class",function(M){return"trace scatter trace"+M[0].trace.uid}).style("stroke-miterlimit",2),S.order(),u(b,S,g),w){c&&(T=c());var C=s.transition().duration(A.duration).ease(A.easing).each("end",function(){T&&T()}).each("interrupt",function(){T&&T()});C.each(function(){p.selectAll("g.trace").each(function(M,E){l(b,E,g,M,v,this,A)})})}else S.each(function(M,E){l(b,E,g,M,v,this,A)});x&&S.exit().remove(),p.selectAll("path:not([d])").remove()};function u(d,b,g){b.each(function(_){var p=y(s.select(this),"g","fills");a.setClipUrl(p,g.layerClipId,d);var A=_[0].trace,c=[];A._ownfill&&c.push("_ownFill"),A._nexttrace&&c.push("_nextFill");var S=p.selectAll("g").data(c,t);S.enter().append("g"),S.exit().each(function(T){A[T]=null}).remove(),S.order().each(function(T){A[T]=y(s.select(this),"path","js-fill")})})}function l(d,b,g,_,p,A,c){var S;m(d,b,g,_,p);var T=!!c&&c.duration>0;function x(Oe){return T?Oe.transition():Oe}var w=g.xaxis,v=g.yaxis,C=_[0].trace,M=C.line,E=s.select(A),L=y(E,"g","errorbars"),z=y(E,"g","lines"),O=y(E,"g","points"),R=y(E,"g","text");if(o.getComponentMethod("errorbars","plot")(d,L,g,c),C.visible!==!0)return;x(E).style("opacity",C.opacity);var D,H,B=C.fill.charAt(C.fill.length-1);B!=="x"&&B!=="y"&&(B=""),_[0][g.isRangePlot?"nodeRangePlot3":"node3"]=E;var $="",W=[],re=C._prevtrace;re&&($=re._prevRevpath||"",H=re._nextFill,W=re._polygons);var Q,Z,K="",le="",fe,ue,V,j,ee,q,X,J=[],ie=h.noop;if(D=C._ownFill,i.hasLines(C)||C.fill!=="none"){for(H&&H.datum(_),["hv","vh","hvh","vhv"].indexOf(M.shape)!==-1?(fe=a.steps(M.shape),ue=a.steps(M.shape.split("").reverse().join(""))):M.shape==="spline"?fe=ue=function(Oe){var _e=Oe[Oe.length-1];return Oe.length>1&&Oe[0][0]===_e[0]&&Oe[0][1]===_e[1]?a.smoothclosed(Oe.slice(1),M.smoothing):a.smoothopen(Oe,M.smoothing)}:fe=ue=function(Oe){return"M"+Oe.join("L")},V=function(Oe){return ue(Oe.reverse())},J=n(_,{xaxis:w,yaxis:v,connectGaps:C.connectgaps,baseTolerance:Math.max(M.width||1,3)/4,shape:M.shape,simplify:M.simplify,fill:C.fill}),X=C._polygons=new Array(J.length),S=0;S<J.length;S++)C._polygons[S]=f(J[S]);J.length&&(j=J[0][0],ee=J[J.length-1],q=ee[ee.length-1]),ie=function(Oe){return function(_e){if(Q=fe(_e),Z=V(_e),K?B?(K+="L"+Q.substr(1),le=Z+("L"+le.substr(1))):(K+="Z"+Q,le=Z+"Z"+le):(K=Q,le=Z),i.hasLines(C)&&_e.length>1){var Re=s.select(this);if(Re.datum(_),Oe)x(Re.style("opacity",0).attr("d",Q).call(a.lineGroupStyle)).style("opacity",1);else{var Ve=x(Re);Ve.attr("d",Q),a.singleLineStyle(_,Ve)}}}}}var ne=z.selectAll(".js-line").data(J);x(ne.exit()).style("opacity",0).remove(),ne.each(ie(!1)),ne.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(ie(!0)),a.setClipUrl(ne,g.layerClipId,d);function oe(Oe){x(Oe).attr("d","M0,0Z")}J.length?(D?(D.datum(_),j&&q&&(B?(B==="y"?j[1]=q[1]=v.c2p(0,!0):B==="x"&&(j[0]=q[0]=w.c2p(0,!0)),x(D).attr("d","M"+q+"L"+j+"L"+K.substr(1)).call(a.singleFillStyle,d)):x(D).attr("d",K+"Z").call(a.singleFillStyle,d))):H&&(C.fill.substr(0,6)==="tonext"&&K&&$?(C.fill==="tonext"?x(H).attr("d",K+"Z"+$+"Z").call(a.singleFillStyle,d):x(H).attr("d",K+"L"+$.substr(1)+"Z").call(a.singleFillStyle,d),C._polygons=C._polygons.concat(W)):(oe(H),C._polygons=null)),C._prevRevpath=le,C._prevPolygons=X):(D?oe(D):H&&oe(H),C._polygons=C._prevRevpath=C._prevPolygons=null);function se(Oe){return Oe.filter(function(_e){return!_e.gap&&_e.vis})}function me(Oe){return Oe.filter(function(_e){return _e.vis})}function ce(Oe){return Oe.filter(function(_e){return!_e.gap})}function pe(Oe){return Oe.id}function xe(Oe){if(Oe.ids)return pe}function Se(){return!1}function Ae(Oe,_e,Re){var Ve,Je,ze,De=Re[0].trace,je=i.hasMarkers(De),dt=i.hasText(De),Et=xe(De),$t=Se,wt=Se;if(je||dt){var Ot=t,Vt=De.stackgroup,kt=Vt&&d._fullLayout._scatterStackOpts[w._id+v._id][Vt].stackgaps==="infer zero";De.marker.maxdisplayed||De._needsCull?Ot=kt?me:se:Vt&&!kt&&(Ot=ce),je&&($t=Ot),dt&&(wt=Ot)}Je=Oe.selectAll("path.point"),Ve=Je.data($t,Et);var St=Ve.enter().append("path").classed("point",!0);T&&St.call(a.pointStyle,De,d).call(a.translatePoints,w,v).style("opacity",0).transition().style("opacity",1),Ve.order();var ot;je&&(ot=a.makePointStyleFns(De)),Ve.each(function(ht){var Ke=s.select(this),Pe=x(Ke);ze=a.translatePoint(ht,Pe,w,v),ze?(a.singlePointStyle(ht,Pe,De,ot,d),g.layerClipId&&a.hideOutsideRangePoint(ht,Pe,w,v,De.xcalendar,De.ycalendar),De.customdata&&Ke.classed("plotly-customdata",ht.data!==null&&ht.data!==void 0)):Pe.remove()}),T?Ve.exit().transition().style("opacity",0).remove():Ve.exit().remove(),Je=_e.selectAll("g"),Ve=Je.data(wt,Et),Ve.enter().append("g").classed("textpoint",!0).append("text"),Ve.order(),Ve.each(function(ht){var Ke=s.select(this),Pe=x(Ke.select("text"));ze=a.translatePoint(ht,Pe,w,v),ze?g.layerClipId&&a.hideOutsideRangePoint(ht,Ke,w,v,De.xcalendar,De.ycalendar):Ke.remove()}),Ve.selectAll("text").call(a.textPointStyle,De,d).each(function(ht){var Ke=w.c2p(ht.x),Pe=v.c2p(ht.y);s.select(this).selectAll("tspan.line").each(function(){x(s.select(this)).attr({x:Ke,y:Pe})})}),Ve.exit().remove()}O.datum(_),R.datum(_),Ae(O,R,_);var Ce=C.cliponaxis===!1,Ee=Ce?null:g.layerClipId;a.setClipUrl(O,Ee,d),a.setClipUrl(R,Ee,d)}function m(d,b,g,_,p){var A=g.xaxis,c=g.yaxis,S=s.extent(h.simpleMap(A.range,A.r2c)),T=s.extent(h.simpleMap(c.range,c.r2c)),x=_[0].trace;if(!!i.hasMarkers(x)){var w=x.marker.maxdisplayed;if(w!==0){var v=_.filter(function(L){return L.x>=S[0]&&L.x<=S[1]&&L.y>=T[0]&&L.y<=T[1]}),C=Math.ceil(v.length/w),M=0;p.forEach(function(L,z){var O=L[0].trace;i.hasMarkers(O)&&O.marker.maxdisplayed>0&&z<b&&M++});var E=Math.round(M*C/3+Math.floor(M/3)*C/7.1);_.forEach(function(L){delete L.vis}),v.forEach(function(L,z){Math.round((z+E)%C)===0&&(L.vis=!0)})}}}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":941,"./link_traces":943,"./subtypes":952,"@plotly/d3":58}],949:[function(e,I,F){var s=e("./subtypes");I.exports=function(h,y){var t=h.cd,a=h.xaxis,i=h.yaxis,n=[],r=t[0].trace,f,u,l,m,d=!s.hasMarkers(r)&&!s.hasText(r);if(d)return[];if(y===!1)for(f=0;f<t.length;f++)t[f].selected=0;else for(f=0;f<t.length;f++)u=t[f],l=a.c2p(u.x),m=i.c2p(u.y),u.i!==null&&y.contains([l,m],!1,f,h)?(n.push({pointNumber:u.i,x:a.c2d(u.x),y:i.c2d(u.y)}),u.selected=1):u.selected=0;return n}},{"./subtypes":952}],950:[function(e,I,F){var s=["orientation","groupnorm","stackgaps"];I.exports=function(h,y,t,a){var i=t._scatterStackOpts,n=a("stackgroup");if(n){var r=y.xaxis+y.yaxis,f=i[r];f||(f=i[r]={});var u=f[n],l=!1;u?u.traces.push(y):(u=f[n]={traceIndices:[],traces:[y]},l=!0);for(var m={orientation:y.x&&!y.y?"h":"v"},d=0;d<s.length;d++){var b=s[d],g=b+"Found";if(!u[g]){var _=h[b]!==void 0,p=b==="orientation";if((_||l)&&(u[b]=a(b,m[b]),p&&(u.fillDflt=u[b]==="h"?"tonextx":"tonexty"),_&&(u[g]=!0,!l&&(delete u.traces[0][b],p))))for(var A=0;A<u.traces.length-1;A++){var c=u.traces[A];c._input.fill!==c.fill&&(c.fill=u.fillDflt)}}}return u}}},{}],951:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/drawing"),h=e("../../registry");function y(n){var r=s.select(n).selectAll("g.trace.scatter");r.style("opacity",function(f){return f[0].trace.opacity}),r.selectAll("g.points").each(function(f){var u=s.select(this),l=f.trace||f[0].trace;t(u,l,n)}),r.selectAll("g.text").each(function(f){var u=s.select(this),l=f.trace||f[0].trace;a(u,l,n)}),r.selectAll("g.trace path.js-line").call(o.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(o.fillGroupStyle,n),h.getComponentMethod("errorbars","style")(r)}function t(n,r,f){o.pointStyle(n.selectAll("path.point"),r,f)}function a(n,r,f){o.textPointStyle(n.selectAll("text"),r,f)}function i(n,r,f){var u=r[0].trace;u.selectedpoints?(o.selectedPointStyle(f.selectAll("path.point"),u),o.selectedTextStyle(f.selectAll("text"),u)):(t(f,u,n),a(f,u,n))}I.exports={style:y,stylePoints:t,styleText:a,styleOnSelect:i}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],952:[function(e,I,F){var s=e("../../lib");I.exports={hasLines:function(o){return o.visible&&o.mode&&o.mode.indexOf("lines")!==-1},hasMarkers:function(o){return o.visible&&(o.mode&&o.mode.indexOf("markers")!==-1||o.type==="splom")},hasText:function(o){return o.visible&&o.mode&&o.mode.indexOf("text")!==-1},isBubble:function(o){return s.isPlainObject(o.marker)&&s.isArrayOrTypedArray(o.marker.size)}}},{"../../lib":503}],953:[function(e,I,F){var s=e("../../lib");I.exports=function(o,h,y,t,a){a=a||{},t("textposition"),s.coerceFont(t,"textfont",y.font),a.noSelect||(t("selected.textfont.color"),t("unselected.textfont.color"))}},{"../../lib":503}],954:[function(e,I,F){var s=e("../../lib"),o=e("../../registry");I.exports=function(y,t,a,i){var n=i("x"),r=i("y"),f,u=o.getComponentMethod("calendars","handleTraceDefaults");if(u(y,t,["x","y"],a),n){var l=s.minRowLength(n);r?f=Math.min(l,s.minRowLength(r)):(f=l,i("y0"),i("dy"))}else{if(!r)return 0;f=s.minRowLength(r),i("x0"),i("dx")}return t._length=f,f}},{"../../lib":503,"../../registry":638}],955:[function(e,I,F){var s=e("../scatter/attributes"),o=e("../../components/colorscale/attributes"),h=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../plots/attributes"),i=e("../../constants/gl3d_dashes"),n=e("../../constants/gl3d_markers"),r=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll,u=e("../../lib/sort_object_keys"),l=s.line,m=s.marker,d=m.line,b=r({width:l.width,dash:{valType:"enumerated",values:u(i),dflt:"solid"}},o("line"));function g(p){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var _=I.exports=f({x:s.x,y:s.y,z:{valType:"data_array"},text:r({},s.text,{}),texttemplate:t({},{}),hovertext:r({},s.hovertext,{}),hovertemplate:y(),xhoverformat:h("x"),yhoverformat:h("y"),zhoverformat:h("z"),mode:r({},s.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:g(),y:g(),z:g()},connectgaps:s.connectgaps,line:b,marker:r({symbol:{valType:"enumerated",values:u(n),dflt:"circle",arrayOk:!0},size:r({},m.size,{dflt:8}),sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode,opacity:r({},m.opacity,{arrayOk:!1}),colorbar:m.colorbar,line:r({width:r({},d.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:r({},s.textposition,{dflt:"top center"}),textfont:{color:s.textfont.color,size:s.textfont.size,family:r({},s.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:r({},a.hoverinfo)},"calc","nested");_.x.editType=_.y.editType=_.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":927}],956:[function(e,I,F){var s=e("../scatter/arrays_to_calcdata"),o=e("../scatter/colorscale_calc");I.exports=function(y,t){var a=[{x:!1,y:!1,trace:t,t:{}}];return s(a,t),o(y,t),a}},{"../scatter/arrays_to_calcdata":926,"../scatter/colorscale_calc":930}],957:[function(e,I,F){var s=e("../../registry");function o(t,a,i,n){if(!a||!a.visible)return null;for(var r=s.getComponentMethod("errorbars","makeComputeError")(a),f=new Array(t.length),u=0;u<t.length;u++){var l=r(+t[u],u);if(n.type==="log"){var m=n.c2l(t[u]),d=t[u]-l[0],b=t[u]+l[1];if(f[u]=[(n.c2l(d,!0)-m)*i,(n.c2l(b,!0)-m)*i],d>0){var g=n.c2l(d);n._lowerLogErrorBound||(n._lowerLogErrorBound=g),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,g)}}else f[u]=[-l[0]*i,l[1]*i]}return f}function h(t){for(var a=0;a<t.length;a++)if(t[a])return t[a].length;return 0}function y(t,a,i){var n=[o(t.x,t.error_x,a[0],i.xaxis),o(t.y,t.error_y,a[1],i.yaxis),o(t.z,t.error_z,a[2],i.zaxis)],r=h(n);if(r===0)return null;for(var f=new Array(r),u=0;u<r;u++){for(var l=[[0,0,0],[0,0,0]],m=0;m<3;m++)if(n[m])for(var d=0;d<2;d++)l[d][m]=n[m][u][d];f[u]=l}return f}I.exports=y},{"../../registry":638}],958:[function(e,I,F){var s=e("../../../stackgl_modules").gl_line3d,o=e("../../../stackgl_modules").gl_scatter3d,h=e("../../../stackgl_modules").gl_error3d,y=e("../../../stackgl_modules").gl_mesh3d,t=e("../../../stackgl_modules").delaunay_triangulate,a=e("../../lib"),i=e("../../lib/str2rgbarray"),n=e("../../lib/gl_format_color").formatColor,r=e("../scatter/make_bubble_size_func"),f=e("../../constants/gl3d_dashes"),u=e("../../constants/gl3d_markers"),l=e("../../plots/cartesian/axes"),m=e("../../components/fx/helpers").appendArrayPointValue,d=e("./calc_errors");function b(L,z){this.scene=L,this.uid=z,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var g=b.prototype;g.handlePick=function(L){if(L.object&&(L.object===this.linePlot||L.object===this.delaunayMesh||L.object===this.textMarkers||L.object===this.scatterPlot)){var z=L.index=L.data.index;return L.object.highlight&&L.object.highlight(null),this.scatterPlot&&(L.object=this.scatterPlot,this.scatterPlot.highlight(L.data)),L.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[z]||this.textLabels[z]===0)&&(L.textLabel=this.textLabels[z]):L.textLabel=this.textLabels),L.traceCoordinate=[this.data.x[z],this.data.y[z],this.data.z[z]],!0}};function _(L,z,O){var R=(O+1)%3,D=(O+2)%3,H=[],B=[],$;for($=0;$<L.length;++$){var W=L[$];isNaN(W[R])||!isFinite(W[R])||isNaN(W[D])||!isFinite(W[D])||(H.push([W[R],W[D]]),B.push($))}var re=t(H);for($=0;$<re.length;++$)for(var Q=re[$],Z=0;Z<Q.length;++Z)Q[Z]=B[Q[Z]];return{positions:L,cells:re,meshColor:z}}function p(L){for(var z=[0,0,0],O=[[0,0,0],[0,0,0],[0,0,0]],R=[1,1,1],D=0;D<3;D++){var H=L[D];H&&H.copy_zstyle!==!1&&L[2].visible!==!1&&(H=L[2]),!(!H||!H.visible)&&(z[D]=H.width/2,O[D]=i(H.color),R[D]=H.thickness)}return{capSize:z,color:O,lineWidth:R}}function A(L){return L==null?0:L.indexOf("left")>-1?-1:L.indexOf("right")>-1?1:0}function c(L){return L==null?0:L.indexOf("top")>-1?-1:L.indexOf("bottom")>-1?1:0}function S(L){var z=0,O=0,R=[z,O];if(Array.isArray(L))for(var D=0;D<L.length;D++)R[D]=[z,O],L[D]&&(R[D][0]=A(L[D]),R[D][1]=c(L[D]));else R[0]=A(L),R[1]=c(L);return R}function T(L,z){return z(L*4)}function x(L){return u[L]}function w(L,z,O,R,D){var H=null;if(a.isArrayOrTypedArray(L)){H=[];for(var B=0;B<z;B++)L[B]===void 0?H[B]=R:H[B]=O(L[B],D)}else H=O(L,a.identity);return H}function v(L,z){var O=[],R=L.fullSceneLayout,D=L.dataScale,H=R.xaxis,B=R.yaxis,$=R.zaxis,W=z.marker,re=z.line,Q=z.x||[],Z=z.y||[],K=z.z||[],le=Q.length,fe=z.xcalendar,ue=z.ycalendar,V=z.zcalendar,j,ee,q,X,J,ie;for(J=0;J<le;J++)j=H.d2l(Q[J],0,fe)*D[0],ee=B.d2l(Z[J],0,ue)*D[1],q=$.d2l(K[J],0,V)*D[2],O[J]=[j,ee,q];if(Array.isArray(z.text))ie=z.text;else if(z.text!==void 0)for(ie=new Array(le),J=0;J<le;J++)ie[J]=z.text;function ne(Je,ze){var De=R[Je];return l.tickText(De,De.d2l(ze),!0).text}var oe=z.texttemplate;if(oe){var se=L.fullLayout,me=se._d3locale,ce=Array.isArray(oe),pe=ce?Math.min(oe.length,le):le,xe=ce?function(Je){return oe[Je]}:function(){return oe};for(ie=new Array(pe),J=0;J<pe;J++){var Se={x:Q[J],y:Z[J],z:K[J]},Ae={xLabel:ne("xaxis",Q[J]),yLabel:ne("yaxis",Z[J]),zLabel:ne("zaxis",K[J])},Ce={};m(Ce,z,J);var Ee=z._meta||{};ie[J]=a.texttemplateString(xe(J),Ae,me,Ce,Se,Ee)}}if(X={position:O,mode:z.mode,text:ie},"line"in z&&(X.lineColor=n(re,1,le),X.lineWidth=re.width,X.lineDashes=re.dash),"marker"in z){var Oe=r(z);X.scatterColor=n(W,1,le),X.scatterSize=w(W.size,le,T,20,Oe),X.scatterMarker=w(W.symbol,le,x,"\u25CF"),X.scatterLineWidth=W.line.width,X.scatterLineColor=n(W.line,1,le),X.scatterAngle=0}"textposition"in z&&(X.textOffset=S(z.textposition),X.textColor=n(z.textfont,1,le),X.textSize=w(z.textfont.size,le,a.identity,12),X.textFont=z.textfont.family,X.textAngle=0);var _e=["x","y","z"];for(X.project=[!1,!1,!1],X.projectScale=[1,1,1],X.projectOpacity=[1,1,1],J=0;J<3;++J){var Re=z.projection[_e[J]];(X.project[J]=Re.show)&&(X.projectOpacity[J]=Re.opacity,X.projectScale[J]=Re.scale)}X.errorBounds=d(z,D,R);var Ve=p([z.error_x,z.error_y,z.error_z]);return X.errorColor=Ve.color,X.errorLineWidth=Ve.lineWidth,X.errorCapSize=Ve.capSize,X.delaunayAxis=z.surfaceaxis,X.delaunayColor=i(z.surfacecolor),X}function C(L){if(a.isArrayOrTypedArray(L)){var z=L[0];return a.isArrayOrTypedArray(z)&&(L=z),"rgb("+L.slice(0,3).map(function(O){return Math.round(O*255)})+")"}return null}function M(L){return a.isArrayOrTypedArray(L)?L.length===4&&typeof L[0]=="number"?C(L):L.map(C):null}g.update=function(L){var z=this.scene.glplot.gl,O,R,D,H,B=f.solid;this.data=L;var $=v(this.scene,L);"mode"in $&&(this.mode=$.mode),"lineDashes"in $&&$.lineDashes in f&&(B=f[$.lineDashes]),this.color=M($.scatterColor)||M($.lineColor),this.dataPoints=$.position,O={gl:this.scene.glplot.gl,position:$.position,color:$.lineColor,lineWidth:$.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:L.opacity,connectGaps:L.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(O):(this.linePlot=s(O),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var W=L.opacity;if(L.marker&&L.marker.opacity&&(W*=L.marker.opacity),R={gl:this.scene.glplot.gl,position:$.position,color:$.scatterColor,size:$.scatterSize,glyph:$.scatterMarker,opacity:W,orthographic:!0,lineWidth:$.scatterLineWidth,lineColor:$.scatterLineColor,project:$.project,projectScale:$.projectScale,projectOpacity:$.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(R):(this.scatterPlot=o(R),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),H={gl:this.scene.glplot.gl,position:$.position,glyph:$.text,color:$.textColor,size:$.textSize,angle:$.textAngle,alignment:$.textOffset,font:$.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:L.opacity},this.textLabels=L.hovertext||L.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(H):(this.textMarkers=o(H),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),D={gl:this.scene.glplot.gl,position:$.position,color:$.errorColor,error:$.errorBounds,lineWidth:$.errorLineWidth,capSize:$.errorCapSize,opacity:L.opacity},this.errorBars?$.errorBounds?this.errorBars.update(D):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):$.errorBounds&&(this.errorBars=h(D),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),$.delaunayAxis>=0){var re=_($.position,$.delaunayColor,$.delaunayAxis);re.opacity=L.opacity,this.delaunayMesh?this.delaunayMesh.update(re):(re.gl=z,this.delaunayMesh=y(re),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},g.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function E(L,z){var O=new b(L,z.uid);return O.update(z),O}I.exports=E},{"../../../stackgl_modules":1124,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":944,"./calc_errors":957}],959:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("../scatter/subtypes"),y=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),a=e("../scatter/text_defaults"),i=e("./attributes");I.exports=function(f,u,l,m){function d(T,x){return o.coerce(f,u,i,T,x)}var b=n(f,u,d,m);if(!b){u.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),d("mode"),h.hasLines(u)&&(d("connectgaps"),t(f,u,l,m,d)),h.hasMarkers(u)&&y(f,u,l,m,d,{noSelect:!0}),h.hasText(u)&&(d("texttemplate"),a(f,u,m,d,{noSelect:!0}));var g=(u.line||{}).color,_=(u.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",g||_);for(var p=["x","y","z"],A=0;A<3;++A){var c="projection."+p[A];d(c+".show")&&(d(c+".opacity"),d(c+".scale"))}var S=s.getComponentMethod("errorbars","supplyDefaults");S(f,u,g||_||l,{axis:"z"}),S(f,u,g||_||l,{axis:"y",inherit:"z"}),S(f,u,g||_||l,{axis:"x",inherit:"z"})};function n(r,f,u,l){var m=0,d=u("x"),b=u("y"),g=u("z"),_=s.getComponentMethod("calendars","handleTraceDefaults");return _(r,f,["x","y","z"],l),d&&b&&g&&(m=Math.min(d.length,b.length,g.length),f._length=f._xlength=f._ylength=f._zlength=m),m}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":955}],960:[function(e,I,F){I.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":955,"./calc":956,"./convert":958,"./defaults":959}],961:[function(e,I,F){var s=e("../scatter/attributes"),o=e("../../plots/attributes"),h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),a=e("../../lib/extend").extendFlat,i=s.marker,n=s.line,r=i.line;I.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},s.mode,{dflt:"markers"}),text:a({},s.text,{}),texttemplate:y({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},s.hovertext,{}),line:{color:n.color,width:n.width,dash:n.dash,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:s.connectgaps,fill:a({},s.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:s.fillcolor,marker:a({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:a({width:r.width,editType:"calc"},t("marker.line")),gradient:i.gradient,editType:"calc"},t("marker")),textfont:s.textfont,textposition:s.textposition,selected:s.selected,unselected:s.unselected,hoverinfo:a({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:s.hoveron,hovertemplate:h()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],962:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../scatter/colorscale_calc"),h=e("../scatter/arrays_to_calcdata"),y=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,a=e("../carpet/lookup_carpetid");I.exports=function(n,r){var f=r._carpetTrace=a(n,r);if(!(!f||!f.visible||f.visible==="legendonly")){var u;r.xaxis=f.xaxis,r.yaxis=f.yaxis;var l=r._length,m=new Array(l),d,b,g=!1;for(u=0;u<l;u++)if(d=r.a[u],b=r.b[u],s(d)&&s(b)){var _=f.ab2xy(+d,+b,!0),p=f.isVisible(+d,+b);p||(g=!0),m[u]={x:_[0],y:_[1],a:d,b,vis:p}}else m[u]={x:!1,y:!1};return r._needsCull=g,m[0].carpet=f,m[0].trace=r,t(r,l),o(n,r),h(m,r),y(m,r),m}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],963:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/constants"),h=e("../scatter/subtypes"),y=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),a=e("../scatter/line_shape_defaults"),i=e("../scatter/text_defaults"),n=e("../scatter/fillcolor_defaults"),r=e("./attributes");I.exports=function(u,l,m,d){function b(T,x){return s.coerce(u,l,r,T,x)}b("carpet"),l.xaxis="x",l.yaxis="y";var g=b("a"),_=b("b"),p=Math.min(g.length,_.length);if(!p){l.visible=!1;return}l._length=p,b("text"),b("texttemplate"),b("hovertext");var A=p<o.PTS_LINESONLY?"lines+markers":"lines";b("mode",A),h.hasLines(l)&&(t(u,l,m,d,b),a(u,l,b),b("connectgaps")),h.hasMarkers(l)&&y(u,l,m,d,b,{gradient:!0}),h.hasText(l)&&i(u,l,d,b);var c=[];(h.hasMarkers(l)||h.hasText(l))&&(b("marker.maxdisplayed"),c.push("points")),b("fill"),l.fill!=="none"&&(n(u,l,m,b),h.hasLines(l)||a(u,l,b)),(l.fill==="tonext"||l.fill==="toself")&&c.push("fills");var S=b("hoveron",c.join("+")||"points");S!=="fills"&&b("hovertemplate"),s.coerceSelectionMarkerOpacity(l,b)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":961}],964:[function(e,I,F){I.exports=function(o,h,y,t,a){var i=t[a];return o.a=i.a,o.b=i.b,o.y=i.y,o}},{}],965:[function(e,I,F){I.exports=function(o,h){var y={},t=h._carpet,a=t.ab2ij([o.a,o.b]),i=Math.floor(a[0]),n=a[0]-i,r=Math.floor(a[1]),f=a[1]-r,u=t.evalxy([],i,r,n,f);return y.yLabel=u[1].toFixed(3),y}},{}],966:[function(e,I,F){var s=e("../scatter/hover"),o=e("../../lib").fillText;I.exports=function(y,t,a,i){var n=s(y,t,a,i);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var f=1-r.y0/y.ya._length,u=y.xa._length,l=u*f/2,m=u-l;return r.x0=Math.max(Math.min(r.x0,m),l),r.x1=Math.max(Math.min(r.x1,m),l),n}var d=r.cd[r.index];r.a=d.a,r.b=d.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var b=r.trace,g=b._carpet,_=b._module.formatLabels(d,b);r.yLabel=_.yLabel,delete r.text;var p=[];function A(T,x){var w;T.labelprefix&&T.labelprefix.length>0?w=T.labelprefix.replace(/ = $/,""):w=T._hovertitle,p.push(w+": "+x.toFixed(3)+T.labelsuffix)}if(!b.hovertemplate){var c=d.hi||b.hoverinfo,S=c.split("+");S.indexOf("all")!==-1&&(S=["a","b","text"]),S.indexOf("a")!==-1&&A(g.aaxis,d.a),S.indexOf("b")!==-1&&A(g.baxis,d.b),p.push("y: "+r.yLabel),S.indexOf("text")!==-1&&o(d,b,p),r.extraText=p.join("<br>")}return n}},{"../../lib":503,"../scatter/hover":938}],967:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:e("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":961,"./calc":962,"./defaults":963,"./event_data":964,"./format_labels":965,"./hover":966,"./plot":968}],968:[function(e,I,F){var s=e("../scatter/plot"),o=e("../../plots/cartesian/axes"),h=e("../../components/drawing");I.exports=function(t,a,i,n){var r,f,u,l=i[0][0].carpet,m={xaxis:o.getFromId(t,l.xaxis||"x"),yaxis:o.getFromId(t,l.yaxis||"y"),plot:a.plot};for(s(t,m,i,n),r=0;r<i.length;r++)f=i[r][0].trace,u=n.selectAll("g.trace"+f.uid+" .js-line"),h.setClipUrl(u,i[r][0].carpet._clipPathId,t)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":948}],969:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,h=e("../scatter/attributes"),y=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),a=e("../../components/drawing/attributes").dash,i=e("../../lib/extend").extendFlat,n=e("../../plot_api/edit_types").overrideAll,r=h.marker,f=h.line,u=r.line;I.exports=n({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},h.mode,{dflt:"markers"}),text:i({},h.text,{}),texttemplate:o({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},h.hovertext,{}),textfont:h.textfont,textposition:h.textposition,line:{color:f.color,width:f.width,dash:a},connectgaps:h.connectgaps,marker:i({symbol:r.symbol,opacity:r.opacity,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:i({width:u.width},t("marker.line")),gradient:r.gradient},t("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:h.fillcolor,selected:h.selected,unselected:h.unselected,hoverinfo:i({},y.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:s()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],970:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../constants/numerical").BADNUM,h=e("../scatter/colorscale_calc"),y=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),a=e("../../lib")._;function i(n){return n&&typeof n=="string"}I.exports=function(r,f){var u=Array.isArray(f.locations),l=u?f.locations.length:f._length,m=new Array(l),d;f.geojson?d=function(c){return i(c)||s(c)}:d=i;for(var b=0;b<l;b++){var g=m[b]={};if(u){var _=f.locations[b];g.loc=d(_)?_:null}else{var p=f.lon[b],A=f.lat[b];s(p)&&s(A)?g.lonlat=[+p,+A]:g.lonlat=[o,o]}}return y(m,f),h(r,f),t(m,f),l&&(m[0].t={labels:{lat:a(r,"lat:")+" ",lon:a(r,"lon:")+" "}}),m}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],971:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/subtypes"),h=e("../scatter/marker_defaults"),y=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),i=e("./attributes");I.exports=function(r,f,u,l){function m(S,T){return s.coerce(r,f,i,S,T)}var d=m("locations"),b;if(d&&d.length){var g=m("geojson"),_;(typeof g=="string"&&g!==""||s.isPlainObject(g))&&(_="geojson-id");var p=m("locationmode",_);p==="geojson-id"&&m("featureidkey"),b=d.length}else{var A=m("lon")||[],c=m("lat")||[];b=Math.min(A.length,c.length)}if(!b){f.visible=!1;return}f._length=b,m("text"),m("hovertext"),m("hovertemplate"),m("mode"),o.hasLines(f)&&(y(r,f,u,l,m),m("connectgaps")),o.hasMarkers(f)&&h(r,f,u,l,m,{gradient:!0}),o.hasText(f)&&(m("texttemplate"),t(r,f,l,m)),m("fill"),f.fill!=="none"&&a(r,f,u,m),s.coerceSelectionMarkerOpacity(f,m)}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":969}],972:[function(e,I,F){I.exports=function(o,h,y,t,a){o.lon=h.lon,o.lat=h.lat,o.location=h.loc?h.loc:null;var i=t[a];return i.fIn&&i.fIn.properties&&(o.properties=i.fIn.properties),o}},{}],973:[function(e,I,F){var s=e("../../plots/cartesian/axes");I.exports=function(h,y,t){var a={},i=t[y.geo]._subplot,n=i.mockAxis,r=h.lonlat;return a.lonLabel=s.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=s.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":554}],974:[function(e,I,F){var s=e("../../components/fx"),o=e("../../constants/numerical").BADNUM,h=e("../scatter/get_trace_color"),y=e("../../lib").fillText,t=e("./attributes");I.exports=function(n,r,f){var u=n.cd,l=u[0].trace,m=n.xa,d=n.ya,b=n.subplot,g=b.projection.isLonLatOverEdges,_=b.project;function p(v){var C=v.lonlat;if(C[0]===o||g(C))return 1/0;var M=_(C),E=_([r,f]),L=Math.abs(M[0]-E[0]),z=Math.abs(M[1]-E[1]),O=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(L*L+z*z)-O,1-3/O)}if(s.getClosest(u,p,n),n.index!==!1){var A=u[n.index],c=A.lonlat,S=[m.c2p(c),d.c2p(c)],T=A.mrc||1;n.x0=S[0]-T,n.x1=S[0]+T,n.y0=S[1]-T,n.y1=S[1]+T,n.loc=A.loc,n.lon=c[0],n.lat=c[1];var x={};x[l.geo]={_subplot:b};var w=l._module.formatLabels(A,l,x);return n.lonLabel=w.lonLabel,n.latLabel=w.latLabel,n.color=h(l,A),n.extraText=a(l,A,n,u[0].t.labels),n.hovertemplate=l.hovertemplate,[n]}};function a(i,n,r,f){if(i.hovertemplate)return;var u=n.hi||i.hoverinfo,l=u==="all"?t.hoverinfo.flags:u.split("+"),m=l.indexOf("location")!==-1&&Array.isArray(i.locations),d=l.indexOf("lon")!==-1,b=l.indexOf("lat")!==-1,g=l.indexOf("text")!==-1,_=[];function p(A){return A+"\xB0"}return m?_.push(n.loc):d&&b?_.push("("+p(r.latLabel)+", "+p(r.lonLabel)+")"):d?_.push(f.lon+p(r.lonLabel)):b&&_.push(f.lat+p(r.latLabel)),g&&y(n,i,_),_.join("<br>")}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937,"./attributes":969}],975:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:e("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":945,"../scatter/style":951,"./attributes":969,"./calc":970,"./defaults":971,"./event_data":972,"./format_labels":973,"./hover":974,"./plot":976,"./select":977,"./style":978}],976:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../lib/topojson_utils").getTopojsonFeatures,y=e("../../lib/geojson_utils"),t=e("../../lib/geo_location_utils"),a=e("../../plots/cartesian/autorange").findExtremes,i=e("../../constants/numerical").BADNUM,n=e("../scatter/calc").calcMarkerSize,r=e("../scatter/subtypes"),f=e("./style");function u(m,d,b){var g=d.layers.frontplot.select(".scatterlayer"),_=o.makeTraceGroups(g,b,"trace scattergeo");function p(A,c){A.lonlat[0]===i&&s.select(c).remove()}_.selectAll("*").remove(),_.each(function(A){var c=s.select(this),S=A[0].trace;if(r.hasLines(S)||S.fill!=="none"){var T=y.calcTraceToLineCoords(A),x=S.fill!=="none"?y.makePolygon(T):y.makeLine(T);c.selectAll("path.js-line").data([{geojson:x,trace:S}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(S)&&c.selectAll("path.point").data(o.identity).enter().append("path").classed("point",!0).each(function(w){p(w,this)}),r.hasText(S)&&c.selectAll("g").data(o.identity).enter().append("g").append("text").each(function(w){p(w,this)}),f(m,A)})}function l(m,d){var b=m[0].trace,g=d[b.geo],_=g._subplot,p=b._length,A,c;if(Array.isArray(b.locations)){var S=b.locationmode,T=S==="geojson-id"?t.extractTraceFeature(m):h(b,_.topojson);for(A=0;A<p;A++){c=m[A];var x=S==="geojson-id"?c.fOut:t.locationToFeature(S,c.loc,T);c.lonlat=x?x.properties.ct:[i,i]}}var w={padded:!0},v,C;if(g.fitbounds==="geojson"&&b.locationmode==="geojson-id"){var M=t.computeBbox(t.getTraceGeojson(b));v=[M[0],M[2]],C=[M[1],M[3]]}else{for(v=new Array(p),C=new Array(p),A=0;A<p;A++)c=m[A],v[A]=c.lonlat[0],C[A]=c.lonlat[1];w.ppad=n(b,p)}b._extremes.lon=a(g.lonaxis._ax,v,w),b._extremes.lat=a(g.lataxis._ax,C,w)}I.exports={calcGeoJSON:l,plot:u}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":928,"../scatter/subtypes":952,"./style":978,"@plotly/d3":58}],977:[function(e,I,F){var s=e("../scatter/subtypes"),o=e("../../constants/numerical").BADNUM;I.exports=function(y,t){var a=y.cd,i=y.xaxis,n=y.yaxis,r=[],f=a[0].trace,u,l,m,d,b,g=!s.hasMarkers(f)&&!s.hasText(f);if(g)return[];if(t===!1)for(b=0;b<a.length;b++)a[b].selected=0;else for(b=0;b<a.length;b++)u=a[b],l=u.lonlat,l[0]!==o&&(m=i.c2p(l),d=n.c2p(l),t.contains([m,d],null,b,y)?(r.push({pointNumber:b,lon:l[0],lat:l[1]}),u.selected=1):u.selected=0);return r}},{"../../constants/numerical":479,"../scatter/subtypes":952}],978:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/drawing"),h=e("../../components/color"),y=e("../scatter/style"),t=y.stylePoints,a=y.styleText;I.exports=function(r,f){f&&i(r,f)};function i(n,r){var f=r[0].trace,u=r[0].node3;u.style("opacity",r[0].trace.opacity),t(u,f,n),a(u,f,n),u.selectAll("path.js-line").style("fill","none").each(function(l){var m=s.select(this),d=l.trace,b=d.line||{};m.call(h.stroke,b.color).call(o.dashLine,b.dash||"",b.width||0),d.fill!=="none"&&m.call(h.fill,d.fillcolor)})}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":951,"@plotly/d3":58}],979:[function(e,I,F){var s=e("../../plots/attributes"),o=e("../scatter/attributes"),h=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=e("../../components/colorscale/attributes"),t=e("../../lib/sort_object_keys"),a=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll,n=e("./constants").DASHES,r=o.line,f=o.marker,u=f.line,l=I.exports=i({x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:h("x"),yhoverformat:h("y"),text:o.text,hovertext:o.hovertext,textposition:o.textposition,textfont:o.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:t(n),dflt:"solid"}},marker:a({},y("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:a({},y("marker.line"),{width:u.width})}),connectgaps:o.connectgaps,fill:a({},o.fill,{dflt:"none"}),fillcolor:o.fillcolor,selected:{marker:o.selected.marker,textfont:o.selected.textfont},unselected:{marker:o.unselected.marker,textfont:o.unselected.textfont},opacity:s.opacity},"calc","nested");l.x.editType=l.y.editType=l.x0.editType=l.y0.editType="calc+clearAxisTypes",l.hovertemplate=o.hovertemplate,l.texttemplate=o.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927,"./constants":982}],980:[function(e,I,F){var s=e("./hover");I.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),hoverPoints:s.hoverPoints,selectPoints:e("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":933,"../scatter/marker_colorbar":945,"./attributes":979,"./calc":981,"./defaults":984,"./format_labels":986,"./hover":988,"./select":992}],981:[function(e,I,F){var s=e("@plotly/point-cluster"),o=e("../../lib"),h=e("../../plots/cartesian/axis_ids"),y=e("../../plots/cartesian/autorange").findExtremes,t=e("../../plots/cartesian/align_period"),a=e("../scatter/calc"),i=a.calcMarkerSize,n=a.calcAxisExpansion,r=a.setFirstScatter,f=e("../scatter/colorscale_calc"),u=e("./convert"),l=e("./scene_update"),m=e("../../constants/numerical").BADNUM,d=e("./constants").TOO_MANY_POINTS;I.exports=function(p,A){var c=p._fullLayout,S=h.getFromId(p,A.xaxis),T=h.getFromId(p,A.yaxis),x=c._plots[A.xaxis+A.yaxis],w=A._length,v=w>=d,C=w*2,M={},E,L=S.makeCalcdata(A,"x"),z=T.makeCalcdata(A,"y"),O=t(A,S,"x",L),R=t(A,T,"y",z),D=O.vals,H=R.vals;A._x=D,A._y=H,A.xperiodalignment&&(A._origX=L,A._xStarts=O.starts,A._xEnds=O.ends),A.yperiodalignment&&(A._origY=z,A._yStarts=R.starts,A._yEnds=R.ends);var B=new Array(C),$=new Array(w);for(E=0;E<w;E++)B[E*2]=D[E]===m?NaN:D[E],B[E*2+1]=H[E]===m?NaN:H[E],$[E]=E;if(S.type==="log")for(E=0;E<C;E+=2)B[E]=S.c2l(B[E]);if(T.type==="log")for(E=1;E<C;E+=2)B[E]=T.c2l(B[E]);v&&S.type!=="log"&&T.type!=="log"?M.tree=s(B):M.ids=$,f(p,A);var W=g(p,x,A,B,D,H),re=l(p,x);r(c,A);var Q;return v?W.marker&&(Q=W.marker.sizeAvg||Math.max(W.marker.size,3)):Q=i(A,w),n(p,A,S,T,D,H,Q),W.errorX&&b(A,S,W.errorX),W.errorY&&b(A,T,W.errorY),W.fill&&!re.fill2d&&(re.fill2d=!0),W.marker&&!re.scatter2d&&(re.scatter2d=!0),W.line&&!re.line2d&&(re.line2d=!0),(W.errorX||W.errorY)&&!re.error2d&&(re.error2d=!0),W.text&&!re.glText&&(re.glText=!0),W.marker&&(W.marker.snap=w),re.lineOptions.push(W.line),re.errorXOptions.push(W.errorX),re.errorYOptions.push(W.errorY),re.fillOptions.push(W.fill),re.markerOptions.push(W.marker),re.markerSelectedOptions.push(W.markerSel),re.markerUnselectedOptions.push(W.markerUnsel),re.textOptions.push(W.text),re.textSelectedOptions.push(W.textSel),re.textUnselectedOptions.push(W.textUnsel),re.selectBatch.push([]),re.unselectBatch.push([]),M._scene=re,M.index=re.count,M.x=D,M.y=H,M.positions=B,re.count++,[{x:!1,y:!1,t:M,trace:A}]};function b(_,p,A){var c=_._extremes[p._id],S=y(p,A._bnds,{padded:!0});c.min=c.min.concat(S.min),c.max=c.max.concat(S.max)}function g(_,p,A,c,S,T){var x=u.style(_,A);if(x.marker&&(x.marker.positions=c),x.line&&c.length>1&&o.extendFlat(x.line,u.linePositions(_,A,c)),x.errorX||x.errorY){var w=u.errorBarPositions(_,A,c,S,T);x.errorX&&o.extendFlat(x.errorX,w.x),x.errorY&&o.extendFlat(x.errorY,w.y)}return x.text&&(o.extendFlat(x.text,{positions:c},u.textPosition(_,A,x.text,x.marker)),o.extendFlat(x.textSel,{positions:c},u.textPosition(_,A,x.text,x.markerSel)),o.extendFlat(x.textUnsel,{positions:c},u.textPosition(_,A,x.text,x.markerUnsel))),x}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"./constants":982,"./convert":983,"./scene_update":991,"@plotly/point-cluster":59}],982:[function(e,I,F){var s=20;I.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:s,SYMBOL_STROKE:s/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],983:[function(e,I,F){var s=e("fast-isnumeric"),o=e("svg-path-sdf"),h=e("color-normalize"),y=e("../../registry"),t=e("../../lib"),a=e("../../components/drawing"),i=e("../../plots/cartesian/axis_ids"),n=e("../../lib/gl_format_color").formatColor,r=e("../scatter/subtypes"),f=e("../scatter/make_bubble_size_func"),u=e("./helpers"),l=e("./constants"),m=e("../../constants/interactions").DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},b=e("../../components/fx/helpers").appendArrayPointValue;function g(O,R){var D,H={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=O._context.plotGlPixelRatio;if(R.visible!==!0)return H;if(r.hasText(R)&&(H.text=_(O,R),H.textSel=c(O,R,R.selected),H.textUnsel=c(O,R,R.unselected)),r.hasMarkers(R)&&(H.marker=p(R),H.markerSel=A(R,R.selected),H.markerUnsel=A(R,R.unselected),!R.unselected&&t.isArrayOrTypedArray(R.marker.opacity))){var $=R.marker.opacity;for(H.markerUnsel.opacity=new Array($.length),D=0;D<$.length;D++)H.markerUnsel.opacity[D]=m*$[D]}if(r.hasLines(R)){H.line={overlay:!0,thickness:R.line.width*B,color:R.line.color,opacity:R.opacity};var W=(l.DASHES[R.line.dash]||[1]).slice();for(D=0;D<W.length;++D)W[D]*=R.line.width*B;H.line.dashes=W}return R.error_x&&R.error_x.visible&&(H.errorX=S(R,R.error_x,B)),R.error_y&&R.error_y.visible&&(H.errorY=S(R,R.error_y,B)),!!R.fill&&R.fill!=="none"&&(H.fill={closed:!0,fill:R.fillcolor,thickness:0}),H}function _(O,R){var D=O._fullLayout,H=R._length,B=R.textfont,$=R.textposition,W=Array.isArray($)?$:[$],re=B.color,Q=B.size,Z=B.family,K={},le,fe=O._context.plotGlPixelRatio,ue=R.texttemplate;if(ue){K.text=[];var V=D._d3locale,j=Array.isArray(ue),ee=j?Math.min(ue.length,H):H,q=j?function(me){return ue[me]}:function(){return ue};for(le=0;le<ee;le++){var X={i:le},J=R._module.formatLabels(X,R,D),ie={};b(ie,R,le);var ne=R._meta||{};K.text.push(t.texttemplateString(q(le),J,V,ie,X,ne))}}else Array.isArray(R.text)&&R.text.length<H?K.text=R.text.slice():K.text=R.text;if(Array.isArray(K.text))for(le=K.text.length;le<H;le++)K.text[le]="";for(K.opacity=R.opacity,K.font={},K.align=[],K.baseline=[],le=0;le<W.length;le++){var oe=W[le].split(/\s+/);switch(oe[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(oe[1])}switch(oe[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(oe[0])}}if(Array.isArray(re))for(K.color=new Array(H),le=0;le<H;le++)K.color[le]=re[le];else K.color=re;if(t.isArrayOrTypedArray(Q)||Array.isArray(Z))for(K.font=new Array(H),le=0;le<H;le++){var se=K.font[le]={};se.size=(t.isTypedArray(Q)?Q[le]:Array.isArray(Q)?s(Q[le])?Q[le]:0:Q)*fe,se.family=Array.isArray(Z)?Z[le]:Z}else K.font={size:Q*fe,family:Z};return K}function p(O){var R=O._length,D=O.marker,H={},B,$=t.isArrayOrTypedArray(D.symbol),W=t.isArrayOrTypedArray(D.color),re=t.isArrayOrTypedArray(D.line.color),Q=t.isArrayOrTypedArray(D.opacity),Z=t.isArrayOrTypedArray(D.size),K=t.isArrayOrTypedArray(D.line.width),le;if($||(le=u.isOpenSymbol(D.symbol)),$||W||re||Q){H.colors=new Array(R),H.borderColors=new Array(R);var fe=n(D,D.opacity,R),ue=n(D.line,D.opacity,R);if(!Array.isArray(ue[0])){var V=ue;for(ue=Array(R),B=0;B<R;B++)ue[B]=V}if(!Array.isArray(fe[0])){var j=fe;for(fe=Array(R),B=0;B<R;B++)fe[B]=j}for(H.colors=fe,H.borderColors=ue,B=0;B<R;B++){if($){var ee=D.symbol[B];le=u.isOpenSymbol(ee)}le&&(ue[B]=fe[B].slice(),fe[B]=fe[B].slice(),fe[B][3]=0)}H.opacity=O.opacity}else le?(H.color=h(D.color,"uint8"),H.color[3]=0,H.borderColor=h(D.color,"uint8")):(H.color=h(D.color,"uint8"),H.borderColor=h(D.line.color,"uint8")),H.opacity=O.opacity*D.opacity;if($)for(H.markers=new Array(R),B=0;B<R;B++)H.markers[B]=M(D.symbol[B]);else H.marker=M(D.symbol);var q=1,X=f(O,q),J;if(Z||K){var ie=H.sizes=new Array(R),ne=H.borderSizes=new Array(R),oe=0,se;if(Z){for(B=0;B<R;B++)ie[B]=X(D.size[B]),oe+=ie[B];se=oe/R}else for(J=X(D.size),B=0;B<R;B++)ie[B]=J;if(K)for(B=0;B<R;B++)ne[B]=D.line.width[B];else for(J=D.line.width,B=0;B<R;B++)ne[B]=J;H.sizeAvg=se}else H.size=X(D&&D.size||10),H.borderSizes=X(D.line.width);return H}function A(O,R){var D=O.marker,H={};return R&&(R.marker&&R.marker.symbol?H=p(t.extendFlat({},D,R.marker)):R.marker&&(R.marker.size&&(H.size=R.marker.size),R.marker.color&&(H.colors=R.marker.color),R.marker.opacity!==void 0&&(H.opacity=R.marker.opacity))),H}function c(O,R,D){var H={};if(!D)return H;if(D.textfont){var B={opacity:1,text:R.text,texttemplate:R.texttemplate,textposition:R.textposition,textfont:t.extendFlat({},R.textfont)};D.textfont&&t.extendFlat(B.textfont,D.textfont),H=_(O,B)}return H}function S(O,R,D){var H={capSize:R.width*2*D,lineWidth:R.thickness*D,color:R.color};return R.copy_ystyle&&(H=O.error_y),H}var T=l.SYMBOL_SDF_SIZE,x=l.SYMBOL_SIZE,w=l.SYMBOL_STROKE,v={},C=a.symbolFuncs[0](x*.05);function M(O){if(O==="circle")return null;var R,D,H=a.symbolNumber(O),B=a.symbolFuncs[H%100],$=!!a.symbolNoDot[H%100],W=!!a.symbolNoFill[H%100],re=u.isDotSymbol(O);return v[O]?v[O]:(re&&!$?R=B(x*1.1)+C:R=B(x),D=o(R,{w:T,h:T,viewBox:[-x,-x,x,x],stroke:W?w:-w}),v[O]=D,D||null)}function E(O,R,D){var H=D.length,B=H/2,$,W;if(r.hasLines(R)&&B)if(R.line.shape==="hv"){for($=[],W=0;W<B-1;W++)isNaN(D[W*2])||isNaN(D[W*2+1])?$.push(NaN,NaN,NaN,NaN):($.push(D[W*2],D[W*2+1]),!isNaN(D[W*2+2])&&!isNaN(D[W*2+3])?$.push(D[W*2+2],D[W*2+1]):$.push(NaN,NaN));$.push(D[H-2],D[H-1])}else if(R.line.shape==="hvh"){for($=[],W=0;W<B-1;W++)if(isNaN(D[W*2])||isNaN(D[W*2+1])||isNaN(D[W*2+2])||isNaN(D[W*2+3]))!isNaN(D[W*2])&&!isNaN(D[W*2+1])?$.push(D[W*2],D[W*2+1]):$.push(NaN,NaN),$.push(NaN,NaN);else{var re=(D[W*2]+D[W*2+2])/2;$.push(D[W*2],D[W*2+1],re,D[W*2+1],re,D[W*2+3])}$.push(D[H-2],D[H-1])}else if(R.line.shape==="vhv"){for($=[],W=0;W<B-1;W++)if(isNaN(D[W*2])||isNaN(D[W*2+1])||isNaN(D[W*2+2])||isNaN(D[W*2+3]))!isNaN(D[W*2])&&!isNaN(D[W*2+1])?$.push(D[W*2],D[W*2+1]):$.push(NaN,NaN),$.push(NaN,NaN);else{var Q=(D[W*2+1]+D[W*2+3])/2;$.push(D[W*2],D[W*2+1],D[W*2],Q,D[W*2+2],Q)}$.push(D[H-2],D[H-1])}else if(R.line.shape==="vh"){for($=[],W=0;W<B-1;W++)isNaN(D[W*2])||isNaN(D[W*2+1])?$.push(NaN,NaN,NaN,NaN):($.push(D[W*2],D[W*2+1]),!isNaN(D[W*2+2])&&!isNaN(D[W*2+3])?$.push(D[W*2],D[W*2+3]):$.push(NaN,NaN));$.push(D[H-2],D[H-1])}else $=D;var Z=!1;for(W=0;W<$.length;W++)if(isNaN($[W])){Z=!0;break}var K=Z||$.length>l.TOO_MANY_POINTS||r.hasMarkers(R)?"rect":"round";if(Z&&R.connectgaps){var le=$[0],fe=$[1];for(W=0;W<$.length;W+=2)isNaN($[W])||isNaN($[W+1])?($[W]=le,$[W+1]=fe):(le=$[W],fe=$[W+1])}return{join:K,positions:$}}function L(O,R,D,H,B){var $=y.getComponentMethod("errorbars","makeComputeError"),W=i.getFromId(O,R.xaxis),re=i.getFromId(O,R.yaxis),Q=D.length/2,Z={};function K(le,fe){var ue=fe._id.charAt(0),V=R["error_"+ue];if(V&&V.visible&&(fe.type==="linear"||fe.type==="log")){for(var j=$(V),ee={x:0,y:1}[ue],q={x:[0,1,2,3],y:[2,3,0,1]}[ue],X=new Float64Array(4*Q),J=1/0,ie=-1/0,ne=0,oe=0;ne<Q;ne++,oe+=4){var se=le[ne];if(s(se)){var me=D[ne*2+ee],ce=j(se,ne),pe=ce[0],xe=ce[1];if(s(pe)&&s(xe)){var Se=se-pe,Ae=se+xe;X[oe+q[0]]=me-fe.c2l(Se),X[oe+q[1]]=fe.c2l(Ae)-me,X[oe+q[2]]=0,X[oe+q[3]]=0,J=Math.min(J,se-pe),ie=Math.max(ie,se+xe)}}}Z[ue]={positions:D,errors:X,_bnds:[J,ie]}}}return K(H,W),K(B,re),Z}function z(O,R,D,H){var B=R._length,$={},W;if(r.hasMarkers(R)){var re=D.font,Q=D.align,Z=D.baseline;for($.offset=new Array(B),W=0;W<B;W++){var K=H.sizes?H.sizes[W]:H.size,le=Array.isArray(re)?re[W].size:re.size,fe=Array.isArray(Q)?Q.length>1?Q[W]:Q[0]:Q,ue=Array.isArray(Z)?Z.length>1?Z[W]:Z[0]:Z,V=d[fe],j=d[ue],ee=K?K/.8+1:0,q=-j*ee-j*.5;$.offset[W]=[V*ee/le,q/le]}}return $}I.exports={style:g,markerStyle:p,markerSelection:A,linePositions:E,errorBarPositions:L,textPosition:z}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"./constants":982,"./helpers":987,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],984:[function(e,I,F){var s=e("../../lib"),o=e("../../registry"),h=e("./helpers"),y=e("./attributes"),t=e("../scatter/constants"),a=e("../scatter/subtypes"),i=e("../scatter/xy_defaults"),n=e("../scatter/period_defaults"),r=e("../scatter/marker_defaults"),f=e("../scatter/line_defaults"),u=e("../scatter/fillcolor_defaults"),l=e("../scatter/text_defaults");I.exports=function(d,b,g,_){function p(C,M){return s.coerce(d,b,y,C,M)}var A=d.marker?h.isOpenSymbol(d.marker.symbol):!1,c=a.isBubble(d),S=i(d,b,_,p);if(!S){b.visible=!1;return}n(d,b,_,p),p("xhoverformat"),p("yhoverformat");var T=S<t.PTS_LINESONLY?"lines+markers":"lines";p("text"),p("hovertext"),p("hovertemplate"),p("mode",T),a.hasLines(b)&&(p("connectgaps"),f(d,b,g,_,p),p("line.shape")),a.hasMarkers(b)&&(r(d,b,g,_,p),p("marker.line.width",A||c?1:0)),a.hasText(b)&&(p("texttemplate"),l(d,b,_,p));var x=(b.line||{}).color,w=(b.marker||{}).color;p("fill"),b.fill!=="none"&&u(d,b,g,p);var v=o.getComponentMethod("errorbars","supplyDefaults");v(d,b,x||w||g,{axis:"y"}),v(d,b,x||w||g,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(b,p)}},{"../../lib":503,"../../registry":638,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/period_defaults":947,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatter/xy_defaults":954,"./attributes":979,"./helpers":987}],985:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color"),h=e("../../constants/interactions").DESELECTDIM;function y(t){var a=t[0],i=a.trace,n=a.t,r=n._scene,f=n.index,u=r.selectBatch[f],l=r.unselectBatch[f],m=r.textOptions[f],d=r.textSelectedOptions[f]||{},b=r.textUnselectedOptions[f]||{},g=s.extendFlat({},m),_,p;if(u.length||l.length){var A=d.color,c=b.color,S=m.color,T=Array.isArray(S);for(g.color=new Array(i._length),_=0;_<u.length;_++)p=u[_],g.color[p]=A||(T?S[p]:S);for(_=0;_<l.length;_++){p=l[_];var x=T?S[p]:S;g.color[p]=c||(A?x:o.addOpacity(x,h))}}r.glText[f].update(g)}I.exports={styleTextSelection:y}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],986:[function(e,I,F){var s=e("../scatter/format_labels");I.exports=function(h,y,t){var a=h.i;return"x"in h||(h.x=y._x[a]),"y"in h||(h.y=y._y[a]),s(h,y,t)}},{"../scatter/format_labels":936}],987:[function(e,I,F){var s=e("./constants");F.isOpenSymbol=function(o){return typeof o=="string"?s.OPEN_RE.test(o):o%200>100},F.isDotSymbol=function(o){return typeof o=="string"?s.DOT_RE.test(o):o>200}},{"./constants":982}],988:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("../scatter/get_trace_color");function y(a,i,n,r){var f=a.cd,u=f[0].t,l=f[0].trace,m=a.xa,d=a.ya,b=u.x,g=u.y,_=m.c2p(i),p=d.c2p(n),A=a.distance,c;if(u.tree){var S=m.p2c(_-A),T=m.p2c(_+A),x=d.p2c(p-A),w=d.p2c(p+A);r==="x"?c=u.tree.range(Math.min(S,T),Math.min(d._rl[0],d._rl[1]),Math.max(S,T),Math.max(d._rl[0],d._rl[1])):c=u.tree.range(Math.min(S,T),Math.min(x,w),Math.max(S,T),Math.max(x,w))}else c=u.ids;var v,C,M,E,L,z,O,R,D,H=A;if(r==="x"){var B=!!l.xperiodalignment,$=!!l.yperiodalignment;for(L=0;L<c.length;L++){if(v=c[L],M=b[v],z=Math.abs(m.c2p(M)-_),B){var W=m.c2p(l._xStarts[v]),re=m.c2p(l._xEnds[v]);z=_>=Math.min(W,re)&&_<=Math.max(W,re)?0:1/0}if(z<H){if(H=z,E=g[v],O=d.c2p(E)-p,$){var Q=d.c2p(l._yStarts[v]),Z=d.c2p(l._yEnds[v]);O=p>=Math.min(Q,Z)&&p<=Math.max(Q,Z)?0:1/0}D=Math.sqrt(z*z+O*O),C=c[L]}}}else for(L=c.length-1;L>-1;L--)v=c[L],M=b[v],E=g[v],z=m.c2p(M)-_,O=d.c2p(E)-p,R=Math.sqrt(z*z+O*O),R<H&&(H=D=R,C=v);return a.index=C,a.distance=H,a.dxy=D,C===void 0?[a]:[t(a,b,g,l)]}function t(a,i,n,r){var f=a.xa,u=a.ya,l=a.distance,m=a.dxy,d=a.index,b={pointNumber:d,x:i[d],y:n[d]};b.tx=Array.isArray(r.text)?r.text[d]:r.text,b.htx=Array.isArray(r.hovertext)?r.hovertext[d]:r.hovertext,b.data=Array.isArray(r.customdata)?r.customdata[d]:r.customdata,b.tp=Array.isArray(r.textposition)?r.textposition[d]:r.textposition;var g=r.textfont;g&&(b.ts=o.isArrayOrTypedArray(g.size)?g.size[d]:g.size,b.tc=Array.isArray(g.color)?g.color[d]:g.color,b.tf=Array.isArray(g.family)?g.family[d]:g.family);var _=r.marker;_&&(b.ms=o.isArrayOrTypedArray(_.size)?_.size[d]:_.size,b.mo=o.isArrayOrTypedArray(_.opacity)?_.opacity[d]:_.opacity,b.mx=o.isArrayOrTypedArray(_.symbol)?_.symbol[d]:_.symbol,b.mc=o.isArrayOrTypedArray(_.color)?_.color[d]:_.color);var p=_&&_.line;p&&(b.mlc=Array.isArray(p.color)?p.color[d]:p.color,b.mlw=o.isArrayOrTypedArray(p.width)?p.width[d]:p.width);var A=_&&_.gradient;A&&A.type!=="none"&&(b.mgt=Array.isArray(A.type)?A.type[d]:A.type,b.mgc=Array.isArray(A.color)?A.color[d]:A.color);var c=f.c2p(b.x,!0),S=u.c2p(b.y,!0),T=b.mrc||1,x=r.hoverlabel;x&&(b.hbg=Array.isArray(x.bgcolor)?x.bgcolor[d]:x.bgcolor,b.hbc=Array.isArray(x.bordercolor)?x.bordercolor[d]:x.bordercolor,b.hts=o.isArrayOrTypedArray(x.font.size)?x.font.size[d]:x.font.size,b.htc=Array.isArray(x.font.color)?x.font.color[d]:x.font.color,b.htf=Array.isArray(x.font.family)?x.font.family[d]:x.font.family,b.hnl=o.isArrayOrTypedArray(x.namelength)?x.namelength[d]:x.namelength);var w=r.hoverinfo;w&&(b.hi=Array.isArray(w)?w[d]:w);var v=r.hovertemplate;v&&(b.ht=Array.isArray(v)?v[d]:v);var C={};C[a.index]=b;var M=r._origX,E=r._origY,L=o.extendFlat({},a,{color:h(r,b),x0:c-T,x1:c+T,xLabelVal:M?M[d]:b.x,y0:S-T,y1:S+T,yLabelVal:E?E[d]:b.y,cd:C,distance:l,spikeDistance:m,hovertemplate:b.ht});return b.htx?L.text=b.htx:b.tx?L.text=b.tx:r.text&&(L.text=r.text),o.fillText(b,r,L),s.getComponentMethod("errorbars","hoverInfo")(b,r,L),L}I.exports={hoverPoints:y,calcHover:t}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":937}],989:[function(e,I,F){arguments[4][896][0].apply(F,arguments)},{"./base_index":980,"./plot":990,dup:896}],990:[function(e,I,m){var s=e("regl-scatter2d"),o=e("regl-line2d"),h=e("regl-error2d"),y=e("gl-text"),t=e("../../lib"),a=e("../../components/dragelement/helpers").selectMode,i=e("../../lib/prepare_regl"),n=e("../scatter/subtypes"),r=e("../scatter/link_traces"),f=e("./edit_style").styleTextSelection,u={};function l(d,b,g,_){var p=d._size,A=d.width*_,c=d.height*_,S=p.l*_,T=p.b*_,x=p.r*_,w=p.t*_,v=p.w*_,C=p.h*_;return[S+b.domain[0]*v,T+g.domain[0]*C,A-x-(1-b.domain[1])*v,c-w-(1-g.domain[1])*C]}var m=I.exports=function(b,g,_){if(!!_.length){var p=b._fullLayout,A=g._scene,c=g.xaxis,S=g.yaxis,T,x;if(!!A){var w=i(b,["ANGLE_instanced_arrays","OES_element_index_uint"],u);if(!w){A.init();return}var v=A.count,C=p._glcanvas.data()[0].regl;if(r(b,g,_),A.dirty){if(A.error2d===!0&&(A.error2d=h(C)),A.line2d===!0&&(A.line2d=o(C)),A.scatter2d===!0&&(A.scatter2d=s(C)),A.fill2d===!0&&(A.fill2d=o(C)),A.glText===!0)for(A.glText=new Array(v),T=0;T<v;T++)A.glText[T]=new y(C);if(A.glText){if(v>A.glText.length){var M=v-A.glText.length;for(T=0;T<M;T++)A.glText.push(new y(C))}else if(v<A.glText.length){var E=A.glText.length-v,L=A.glText.splice(v,E);L.forEach(function(X){X.destroy()})}for(T=0;T<v;T++)A.glText[T].update(A.textOptions[T])}if(A.line2d&&(A.line2d.update(A.lineOptions),A.lineOptions=A.lineOptions.map(function(X){if(X&&X.positions){for(var J=X.positions,ie=0;ie<J.length&&(isNaN(J[ie])||isNaN(J[ie+1]));)ie+=2;for(var ne=J.length-2;ne>ie&&(isNaN(J[ne])||isNaN(J[ne+1]));)ne-=2;X.positions=J.slice(ie,ne+2)}return X}),A.line2d.update(A.lineOptions)),A.error2d){var z=(A.errorXOptions||[]).concat(A.errorYOptions||[]);A.error2d.update(z)}A.scatter2d&&A.scatter2d.update(A.markerOptions),A.fillOrder=t.repeat(null,v),A.fill2d&&(A.fillOptions=A.fillOptions.map(function(X,J){var ie=_[J];if(!(!X||!ie||!ie[0]||!ie[0].trace)){var ne=ie[0],oe=ne.trace,se=ne.t,me=A.lineOptions[J],ce,pe,xe=[];oe._ownfill&&xe.push(J),oe._nexttrace&&xe.push(J+1),xe.length&&(A.fillOrder[J]=xe);var Se=[],Ae=me&&me.positions||se.positions,Ce,Ee;if(oe.fill==="tozeroy"){for(Ce=0;Ce<Ae.length&&isNaN(Ae[Ce+1]);)Ce+=2;for(Ee=Ae.length-2;Ee>Ce&&isNaN(Ae[Ee+1]);)Ee-=2;Ae[Ce+1]!==0&&(Se=[Ae[Ce],0]),Se=Se.concat(Ae.slice(Ce,Ee+2)),Ae[Ee+1]!==0&&(Se=Se.concat([Ae[Ee],0]))}else if(oe.fill==="tozerox"){for(Ce=0;Ce<Ae.length&&isNaN(Ae[Ce]);)Ce+=2;for(Ee=Ae.length-2;Ee>Ce&&isNaN(Ae[Ee]);)Ee-=2;Ae[Ce]!==0&&(Se=[0,Ae[Ce+1]]),Se=Se.concat(Ae.slice(Ce,Ee+2)),Ae[Ee]!==0&&(Se=Se.concat([0,Ae[Ee+1]]))}else if(oe.fill==="toself"||oe.fill==="tonext"){for(Se=[],ce=0,X.splitNull=!0,pe=0;pe<Ae.length;pe+=2)(isNaN(Ae[pe])||isNaN(Ae[pe+1]))&&(Se=Se.concat(Ae.slice(ce,pe)),Se.push(Ae[ce],Ae[ce+1]),Se.push(null,null),ce=pe+2);Se=Se.concat(Ae.slice(ce)),ce&&Se.push(Ae[ce],Ae[ce+1])}else{var Oe=oe._nexttrace;if(Oe){var _e=A.lineOptions[J+1];if(_e){var Re=_e.positions;if(oe.fill==="tonexty"){for(Se=Ae.slice(),J=Math.floor(Re.length/2);J--;){var Ve=Re[J*2],Je=Re[J*2+1];isNaN(Ve)||isNaN(Je)||Se.push(Ve,Je)}X.fill=Oe.fillcolor}}}}if(oe._prevtrace&&oe._prevtrace.fill==="tonext"){var ze=A.lineOptions[J-1].positions,De=Se.length/2;ce=De;var je=[ce];for(pe=0;pe<ze.length;pe+=2)(isNaN(ze[pe])||isNaN(ze[pe+1]))&&(je.push(pe/2+De+1),ce=pe+2);Se=Se.concat(ze),X.hole=je}return X.fillmode=oe.fill,X.opacity=oe.opacity,X.positions=Se,X}}),A.fill2d.update(A.fillOptions))}var O=p.dragmode,R=a(O),D=p.clickmode.indexOf("select")>-1;for(T=0;T<v;T++){var H=_[T][0],B=H.trace,$=H.t,W=$.index,re=B._length,Q=$.x,Z=$.y;if(B.selectedpoints||R||D){if(R||(R=!0),B.selectedpoints){var K=A.selectBatch[W]=t.selIndices2selPoints(B),le={};for(x=0;x<K.length;x++)le[K[x]]=1;var fe=[];for(x=0;x<re;x++)le[x]||fe.push(x);A.unselectBatch[W]=fe}var ue=$.xpx=new Array(re),V=$.ypx=new Array(re);for(x=0;x<re;x++)ue[x]=c.c2p(Q[x]),V[x]=S.c2p(Z[x])}else $.xpx=$.ypx=null}if(R){if(A.select2d||(A.select2d=s(p._glcanvas.data()[1].regl)),A.scatter2d){var j=new Array(v);for(T=0;T<v;T++)j[T]=A.selectBatch[T].length||A.unselectBatch[T].length?A.markerUnselectedOptions[T]:{};A.scatter2d.update(j)}A.select2d&&(A.select2d.update(A.markerOptions),A.select2d.update(A.markerSelectedOptions)),A.glText&&_.forEach(function(X){var J=((X||[])[0]||{}).trace||{};n.hasText(J)&&f(X)})}else A.scatter2d&&A.scatter2d.update(A.markerOptions);var ee={viewport:l(p,c,S,b._context.plotGlPixelRatio),range:[(c._rl||c.range)[0],(S._rl||S.range)[0],(c._rl||c.range)[1],(S._rl||S.range)[1]]},q=t.repeat(ee,A.count);A.fill2d&&A.fill2d.update(q),A.line2d&&A.line2d.update(q),A.error2d&&A.error2d.update(q.concat(q)),A.scatter2d&&A.scatter2d.update(q),A.select2d&&A.select2d.update(q),A.glText&&A.glText.forEach(function(X){X.update(ee)})}}};m.reglPrecompiled=u},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":943,"../scatter/subtypes":952,"./edit_style":985,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],991:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){var t=y._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},i={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return y._scene||(t=y._scene={},t.init=function(){s.extendFlat(t,i,a)},t.init(),t.update=function(r){var f=s.repeat(r,t.count);if(t.fill2d&&t.fill2d.update(f),t.scatter2d&&t.scatter2d.update(f),t.line2d&&t.line2d.update(f),t.error2d&&t.error2d.update(f.concat(f)),t.select2d&&t.select2d.update(f),t.glText)for(var u=0;u<t.count;u++)t.glText[u].update(r)},t.draw=function(){for(var r=t.count,f=t.fill2d,u=t.error2d,l=t.line2d,m=t.scatter2d,d=t.glText,b=t.select2d,g=t.selectBatch,_=t.unselectBatch,p=0;p<r;p++){if(f&&t.fillOrder[p]&&f.draw(t.fillOrder[p]),l&&t.lineOptions[p]&&l.draw(p),u&&(t.errorXOptions[p]&&u.draw(p),t.errorYOptions[p]&&u.draw(p+r)),m&&t.markerOptions[p])if(_[p].length){var A=s.repeat([],t.count);A[p]=_[p],m.draw(A)}else g[p].length||m.draw(p);d[p]&&t.textOptions[p]&&d[p].render()}b&&b.draw(g),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(r){r.destroy&&r.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,y._scene=null}),t.dirty||s.extendFlat(t,a),t}},{"../../lib":503}],992:[function(e,I,F){var s=e("../scatter/subtypes"),o=e("./edit_style").styleTextSelection;I.exports=function(y,t){var a=y.cd,i=y.xaxis,n=y.yaxis,r=[],f=a[0].trace,u=a[0].t,l=f._length,m=u.x,d=u.y,b=u._scene,g=u.index;if(!b)return r;var _=s.hasText(f),p=s.hasMarkers(f),A=!p&&!_;if(f.visible!==!0||A)return r;var c=[],S=[];if(t!==!1&&!t.degenerate)for(var T=0;T<l;T++)t.contains([u.xpx[T],u.ypx[T]],!1,T,y)?(c.push(T),r.push({pointNumber:T,x:i.c2d(m[T]),y:n.c2d(d[T])})):S.push(T);if(p){var x=b.scatter2d;if(!c.length&&!S.length){var w=new Array(b.count);w[g]=b.markerOptions[g],x.update.apply(x,w)}else if(!b.selectBatch[g].length&&!b.unselectBatch[g].length){var v=new Array(b.count);v[g]=b.markerUnselectedOptions[g],x.update.apply(x,v)}}return b.selectBatch[g]=c,b.unselectBatch[g]=S,_&&o(a),r}},{"../scatter/subtypes":952,"./edit_style":985}],993:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,h=e("../scattergeo/attributes"),y=e("../scatter/attributes"),t=e("../../plots/mapbox/layout_attributes"),a=e("../../plots/attributes"),i=e("../../components/colorscale/attributes"),n=e("../../lib/extend").extendFlat,r=e("../../plot_api/edit_types").overrideAll,f=h.line,u=h.marker;I.exports=r({lon:h.lon,lat:h.lat,mode:n({},y.mode,{dflt:"markers"}),text:n({},y.text,{}),texttemplate:o({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:n({},y.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:y.connectgaps,marker:n({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode},i("marker")),fill:h.fill,fillcolor:y.fillcolor,textfont:t.layers.symbol.textfont,textposition:t.layers.symbol.textposition,below:{valType:"string"},selected:{marker:y.selected.marker},unselected:{marker:y.unselected.marker},hoverinfo:n({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:s()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergeo/attributes":969}],994:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../lib"),h=e("../../constants/numerical").BADNUM,y=e("../../lib/geojson_utils"),t=e("../../components/colorscale"),a=e("../../components/drawing"),i=e("../scatter/make_bubble_size_func"),n=e("../scatter/subtypes"),r=e("../../plots/mapbox/convert_text_opts"),f=e("../../components/fx/helpers").appendArrayPointValue,u=e("../../lib/svg_text_utils").NEWLINES,l=e("../../lib/svg_text_utils").BR_TAG_ALL;I.exports=function(c,S){var T=S[0].trace,x=T.visible===!0&&T._length!==0,w=T.fill!=="none",v=n.hasLines(T),C=n.hasMarkers(T),M=n.hasText(T),E=C&&T.marker.symbol==="circle",L=C&&T.marker.symbol!=="circle",z=m(),O=m(),R=m(),D=m(),H={fill:z,line:O,circle:R,symbol:D};if(!x)return H;var B;if((w||v)&&(B=y.calcTraceToLineCoords(S)),w&&(z.geojson=y.makePolygon(B),z.layout.visibility="visible",o.extendFlat(z.paint,{"fill-color":T.fillcolor})),v&&(O.geojson=y.makeLine(B),O.layout.visibility="visible",o.extendFlat(O.paint,{"line-width":T.line.width,"line-color":T.line.color,"line-opacity":T.opacity})),E){var $=d(S);R.geojson=$.geojson,R.layout.visibility="visible",o.extendFlat(R.paint,{"circle-color":$.mcc,"circle-radius":$.mrc,"circle-opacity":$.mo})}if((L||M)&&(D.geojson=b(S,c),o.extendFlat(D.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(o.extendFlat(D.layout,{"icon-size":T.marker.size/10}),"angle"in T.marker&&T.marker.angle!=="auto"&&o.extendFlat(D.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),D.layout["icon-allow-overlap"]=T.marker.allowoverlap,o.extendFlat(D.paint,{"icon-opacity":T.opacity*T.marker.opacity,"icon-color":T.marker.color})),M)){var W=(T.marker||{}).size,re=r(T.textposition,W);o.extendFlat(D.layout,{"text-size":T.textfont.size,"text-anchor":re.anchor,"text-offset":re.offset}),o.extendFlat(D.paint,{"text-color":T.textfont.color,"text-opacity":T.opacity})}return H};function m(){return{geojson:y.makeBlank(),layout:{visibility:"none"},paint:{}}}function d(A){var c=A[0].trace,S=c.marker,T=c.selectedpoints,x=o.isArrayOrTypedArray(S.color),w=o.isArrayOrTypedArray(S.size),v=o.isArrayOrTypedArray(S.opacity),C;function M(re){return c.opacity*re}function E(re){return re/2}var L;x&&(t.hasColorscale(c,"marker")?L=t.makeColorScaleFuncFromTrace(S):L=o.identity);var z;w&&(z=i(c));var O;v&&(O=function(re){var Q=s(re)?+o.constrain(re,0,1):0;return M(Q)});var R=[];for(C=0;C<A.length;C++){var D=A[C],H=D.lonlat;if(!p(H)){var B={};L&&(B.mcc=D.mcc=L(D.mc)),z&&(B.mrc=D.mrc=z(D.ms)),O&&(B.mo=O(D.mo)),T&&(B.selected=D.selected||0),R.push({type:"Feature",geometry:{type:"Point",coordinates:H},properties:B})}}var $;if(T)for($=a.makeSelectedPointStyleFns(c),C=0;C<R.length;C++){var W=R[C].properties;$.selectedOpacityFn&&(W.mo=M($.selectedOpacityFn(W))),$.selectedColorFn&&(W.mcc=$.selectedColorFn(W)),$.selectedSizeFn&&(W.mrc=$.selectedSizeFn(W))}return{geojson:{type:"FeatureCollection",features:R},mcc:x||$&&$.selectedColorFn?{type:"identity",property:"mcc"}:S.color,mrc:w||$&&$.selectedSizeFn?{type:"identity",property:"mrc"}:E(S.size),mo:v||$&&$.selectedOpacityFn?{type:"identity",property:"mo"}:M(S.opacity)}}function b(A,c){for(var S=c._fullLayout,T=A[0].trace,x=T.marker||{},w=x.symbol,v=x.angle,C=w!=="circle"?g(w):_,M=v!=="auto"?g(v,!0):_,E=n.hasText(T)?g(T.text):_,L=[],z=0;z<A.length;z++){var O=A[z];if(!p(O.lonlat)){var R=T.texttemplate,D;if(R){var H=Array.isArray(R)?R[z]||"":R,B=T._module.formatLabels(O,T,S),$={};f($,T,O.i);var W=T._meta||{};D=o.texttemplateString(H,B,S._d3locale,$,O,W)}else D=E(z);D&&(D=D.replace(u,"").replace(l,`
`)),L.push({type:"Feature",geometry:{type:"Point",coordinates:O.lonlat},properties:{symbol:C(z),angle:M(z),text:D}})}}return{type:"FeatureCollection",features:L}}function g(A,c){return o.isArrayOrTypedArray(A)?c?function(S){return s(A[S])?+A[S]:0}:function(S){return A[S]}:A?function(){return A}:_}function _(){return""}function p(A){return A[0]===h}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"fast-isnumeric":190}],995:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/subtypes"),h=e("../scatter/marker_defaults"),y=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),i=e("./attributes");I.exports=function(f,u,l,m){function d(_,p){return s.coerce(f,u,i,_,p)}var b=n(f,u,d);if(!b){u.visible=!1;return}if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),o.hasLines(u)&&(y(f,u,l,m,d,{noDash:!0}),d("connectgaps")),o.hasMarkers(u)){h(f,u,l,m,d,{noLine:!0}),d("marker.allowoverlap"),d("marker.angle");var g=u.marker;g.symbol!=="circle"&&(s.isArrayOrTypedArray(g.size)&&(g.size=g.size[0]),s.isArrayOrTypedArray(g.color)&&(g.color=g.color[0]))}o.hasText(u)&&t(f,u,m,d,{noSelect:!0}),d("fill"),u.fill!=="none"&&a(f,u,l,d),s.coerceSelectionMarkerOpacity(u,d)};function n(r,f,u){var l=u("lon")||[],m=u("lat")||[],d=Math.min(l.length,m.length);return f._length=d,d}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":993}],996:[function(e,I,F){I.exports=function(o,h){return o.lon=h.lon,o.lat=h.lat,o}},{}],997:[function(e,I,F){var s=e("../../plots/cartesian/axes");I.exports=function(h,y,t){var a={},i=t[y.subplot]._subplot,n=i.mockAxis,r=h.lonlat;return a.lonLabel=s.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=s.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":554}],998:[function(e,I,F){var s=e("../../components/fx"),o=e("../../lib"),h=e("../scatter/get_trace_color"),y=o.fillText,t=e("../../constants/numerical").BADNUM;function a(n,r,f){var u=n.cd,l=u[0].trace,m=n.xa,d=n.ya,b=n.subplot,g=r>=0?Math.floor((r+180)/360):Math.ceil((r-180)/360),_=g*360,p=r-_;function A(E){var L=E.lonlat;if(L[0]===t)return 1/0;var z=o.modHalf(L[0],360),O=L[1],R=b.project([z,O]),D=R.x-m.c2p([p,O]),H=R.y-d.c2p([z,f]),B=Math.max(3,E.mrc||0);return Math.max(Math.sqrt(D*D+H*H)-B,1-3/B)}if(s.getClosest(u,A,n),n.index!==!1){var c=u[n.index],S=c.lonlat,T=[o.modHalf(S[0],360)+_,S[1]],x=m.c2p(T),w=d.c2p(T),v=c.mrc||1;n.x0=x-v,n.x1=x+v,n.y0=w-v,n.y1=w+v;var C={};C[l.subplot]={_subplot:b};var M=l._module.formatLabels(c,l,C);return n.lonLabel=M.lonLabel,n.latLabel=M.latLabel,n.color=h(l,c),n.extraText=i(l,c,u[0].t.labels),n.hovertemplate=l.hovertemplate,[n]}}function i(n,r,f){if(n.hovertemplate)return;var u=r.hi||n.hoverinfo,l=u.split("+"),m=l.indexOf("all")!==-1,d=l.indexOf("lon")!==-1,b=l.indexOf("lat")!==-1,g=r.lonlat,_=[];function p(A){return A+"\xB0"}return m||d&&b?_.push("("+p(g[1])+", "+p(g[0])+")"):d?_.push(f.lon+p(g[0])):b&&_.push(f.lat+p(g[1])),(m||l.indexOf("text")!==-1)&&y(r,n,_),_.join("<br>")}I.exports={hoverPoints:a,getExtraText:i}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937}],999:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("../scattergeo/calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),styleOnSelect:function(s,o){if(o){var h=o[0].trace;h._glTrace.update(o)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":945,"../scattergeo/calc":970,"./attributes":993,"./defaults":995,"./event_data":996,"./format_labels":997,"./hover":998,"./plot":1e3,"./select":1001}],1e3:[function(e,I,F){var s=e("./convert"),o=e("../../plots/mapbox/constants").traceLayerPrefix,h=["fill","line","circle","symbol"];function y(a,i){this.type="scattermapbox",this.subplot=a,this.uid=i,this.sourceIds={fill:"source-"+i+"-fill",line:"source-"+i+"-line",circle:"source-"+i+"-circle",symbol:"source-"+i+"-symbol"},this.layerIds={fill:o+i+"-fill",line:o+i+"-line",circle:o+i+"-circle",symbol:o+i+"-symbol"},this.below=null}var t=y.prototype;t.addSource=function(a,i){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:i.geojson})},t.setSourceData=function(a,i){this.subplot.map.getSource(this.sourceIds[a]).setData(i.geojson)},t.addLayer=function(a,i,n){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:i.layout,paint:i.paint},n)},t.update=function(i){var n=this.subplot,r=n.map,f=s(n.gd,i),u=n.belowLookup["trace-"+this.uid],l,m,d;if(u!==this.below){for(l=h.length-1;l>=0;l--)m=h[l],r.removeLayer(this.layerIds[m]);for(l=0;l<h.length;l++)m=h[l],d=f[m],this.addLayer(m,d,u);this.below=u}for(l=0;l<h.length;l++)m=h[l],d=f[m],n.setOptions(this.layerIds[m],"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&(this.setSourceData(m,d),n.setOptions(this.layerIds[m],"setPaintProperty",d.paint));i[0].trace._glTrace=this},t.dispose=function(){for(var i=this.subplot.map,n=h.length-1;n>=0;n--){var r=h[n];i.removeLayer(this.layerIds[r]),i.removeSource(this.sourceIds[r])}},I.exports=function(i,n){for(var r=n[0].trace,f=new y(i,r.uid),u=s(i.gd,n),l=f.below=i.belowLookup["trace-"+r.uid],m=0;m<h.length;m++){var d=h[m],b=u[d];f.addSource(d,b),f.addLayer(d,b,l)}return n[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":994}],1001:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/subtypes"),h=e("../../constants/numerical").BADNUM;I.exports=function(t,a){var i=t.cd,n=t.xaxis,r=t.yaxis,f=[],u=i[0].trace,l;if(!o.hasMarkers(u))return[];if(a===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++){var m=i[l],d=m.lonlat;if(d[0]!==h){var b=[s.modHalf(d[0],360),d[1]],g=[n.c2p(b),r.c2p(b)];a.contains(g,null,l,t)?(f.push({pointNumber:l,lon:d[0],lat:d[1]}),m.selected=1):m.selected=0}}return f}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":952}],1002:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,h=e("../../lib/extend").extendFlat,y=e("../scatter/attributes"),t=e("../../plots/attributes"),a=y.line;I.exports={mode:y.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,line:{color:a.color,width:a.width,dash:a.dash,shape:h({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:h({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:h({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:h({},t.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:y.hoveron,hovertemplate:s(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1003:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../constants/numerical").BADNUM,h=e("../../plots/cartesian/axes"),y=e("../scatter/colorscale_calc"),t=e("../scatter/arrays_to_calcdata"),a=e("../scatter/calc_selection"),i=e("../scatter/calc").calcMarkerSize;I.exports=function(r,f){for(var u=r._fullLayout,l=f.subplot,m=u[l].radialaxis,d=u[l].angularaxis,b=m.makeCalcdata(f,"r"),g=d.makeCalcdata(f,"theta"),_=f._length,p=new Array(_),A=0;A<_;A++){var c=b[A],S=g[A],T=p[A]={};s(c)&&s(S)?(T.r=c,T.theta=S):T.r=o}var x=i(f,_);return f._extremes.x=h.findExtremes(m,b,{ppad:x}),y(r,f),t(p,f),a(p,f),p}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1004:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/subtypes"),h=e("../scatter/marker_defaults"),y=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),n=e("../scatter/constants").PTS_LINESONLY,r=e("./attributes");function f(l,m,d,b){function g(A,c){return s.coerce(l,m,r,A,c)}var _=u(l,m,b,g);if(!_){m.visible=!1;return}g("thetaunit"),g("mode",_<n?"lines+markers":"lines"),g("text"),g("hovertext"),m.hoveron!=="fills"&&g("hovertemplate"),o.hasLines(m)&&(y(l,m,d,b,g),t(l,m,g),g("connectgaps")),o.hasMarkers(m)&&h(l,m,d,b,g,{gradient:!0}),o.hasText(m)&&(g("texttemplate"),a(l,m,b,g));var p=[];(o.hasMarkers(m)||o.hasText(m))&&(g("cliponaxis"),g("marker.maxdisplayed"),p.push("points")),g("fill"),m.fill!=="none"&&(i(l,m,d,g),o.hasLines(m)||t(l,m,g)),(m.fill==="tonext"||m.fill==="toself")&&p.push("fills"),g("hoveron",p.join("+")||"points"),s.coerceSelectionMarkerOpacity(m,g)}function u(l,m,d,b){var g=b("r"),_=b("theta"),p;if(g)_?p=Math.min(g.length,_.length):(p=g.length,b("theta0"),b("dtheta"));else{if(!_)return 0;p=m.theta.length,b("r0"),b("dr")}return m._length=p,p}I.exports={handleRThetaDefaults:u,supplyDefaults:f}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1002}],1005:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes");I.exports=function(y,t,a){var i={},n=a[t.subplot]._subplot,r,f;n?(r=n.radialAxis,f=n.angularAxis):(n=a[t.subplot],r=n.radialaxis,f=n.angularaxis);var u=r.c2l(y.r);i.rLabel=o.tickText(r,u,!0).text;var l=f.thetaunit==="degrees"?s.rad2deg(y.theta):y.theta;return i.thetaLabel=o.tickText(f,l,!0).text,i}},{"../../lib":503,"../../plots/cartesian/axes":554}],1006:[function(e,I,F){var s=e("../scatter/hover");function o(y,t,a,i){var n=s(y,t,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var f=y.subplot,u=r.cd[r.index],l=r.trace;if(!!f.isPtInside(u))return r.xLabelVal=void 0,r.yLabelVal=void 0,h(u,l,f,r),r.hovertemplate=l.hovertemplate,n}}function h(y,t,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="r",r._hovertitle="\u03B8";var f={};f[t.subplot]={_subplot:a};var u=t._module.formatLabels(y,t,f);i.rLabel=u.rLabel,i.thetaLabel=u.thetaLabel;var l=y.hi||t.hoverinfo,m=[];function d(g,_){m.push(g._hovertitle+": "+_)}if(!t.hovertemplate){var b=l.split("+");b.indexOf("all")!==-1&&(b=["r","theta","text"]),b.indexOf("r")!==-1&&d(n,i.rLabel),b.indexOf("theta")!==-1&&d(r,i.thetaLabel),b.indexOf("text")!==-1&&i.text&&(m.push(i.text),delete i.text),i.extraText=m.join("<br>")}}I.exports={hoverPoints:o,makeHoverPointText:h}},{"../scatter/hover":938}],1007:[function(e,I,F){I.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1002,"./calc":1003,"./defaults":1004,"./format_labels":1005,"./hover":1006,"./plot":1008}],1008:[function(e,I,F){var s=e("../scatter/plot"),o=e("../../constants/numerical").BADNUM;I.exports=function(y,t,a){for(var i=t.layers.frontplot.select("g.scatterlayer"),n={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},r=t.radialAxis,f=t.angularAxis,u=0;u<a.length;u++)for(var l=a[u],m=0;m<l.length;m++){var d=l[m],b=d.r;if(b===o)d.x=d.y=o;else{var g=r.c2g(b),_=f.c2g(d.theta);d.x=g*Math.cos(_),d.y=g*Math.sin(_)}}s(y,n,a,i)}},{"../../constants/numerical":479,"../scatter/plot":948}],1009:[function(e,I,F){var s=e("../scatterpolar/attributes"),o=e("../scattergl/attributes"),h=e("../../plots/template_attributes").texttemplateAttrs;I.exports={mode:s.mode,r:s.r,theta:s.theta,r0:s.r0,dr:s.dr,theta0:s.theta0,dtheta:s.dtheta,thetaunit:s.thetaunit,text:s.text,texttemplate:h({editType:"plot"},{keys:["r","theta","text"]}),hovertext:s.hovertext,hovertemplate:s.hovertemplate,line:o.line,connectgaps:o.connectgaps,marker:o.marker,fill:o.fill,fillcolor:o.fillcolor,textposition:o.textposition,textfont:o.textfont,hoverinfo:s.hoverinfo,selected:s.selected,unselected:s.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":979,"../scatterpolar/attributes":1002}],1010:[function(e,I,F){I.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scattergl/select":992,"./attributes":1009,"./calc":1011,"./defaults":1012,"./format_labels":1013,"./hover":1014}],1011:[function(e,I,F){var s=e("../scatter/colorscale_calc"),o=e("../scatter/calc").calcMarkerSize,h=e("../scattergl/convert"),y=e("../../plots/cartesian/axes"),t=e("../scattergl/constants").TOO_MANY_POINTS;I.exports=function(i,n){var r=i._fullLayout,f=n.subplot,u=r[f].radialaxis,l=r[f].angularaxis,m=n._r=u.makeCalcdata(n,"r"),d=n._theta=l.makeCalcdata(n,"theta"),b=n._length,g={};b<m.length&&(m=m.slice(0,b)),b<d.length&&(d=d.slice(0,b)),g.r=m,g.theta=d,s(i,n);var _=g.opts=h.style(i,n),p;return b<t?p=o(n,b):_.marker&&(p=2*(_.marker.sizeAvg||Math.max(_.marker.size,3))),n._extremes.x=y.findExtremes(u,m,{ppad:p}),[{x:!1,y:!1,t:g,trace:n}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983}],1012:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/subtypes"),h=e("../scatterpolar/defaults").handleRThetaDefaults,y=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),a=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),n=e("../scatter/constants").PTS_LINESONLY,r=e("./attributes");I.exports=function(u,l,m,d){function b(_,p){return s.coerce(u,l,r,_,p)}var g=h(u,l,d,b);if(!g){l.visible=!1;return}b("thetaunit"),b("mode",g<n?"lines+markers":"lines"),b("text"),b("hovertext"),l.hoveron!=="fills"&&b("hovertemplate"),o.hasLines(l)&&(t(u,l,m,d,b),b("connectgaps")),o.hasMarkers(l)&&y(u,l,m,d,b),o.hasText(l)&&(b("texttemplate"),a(u,l,d,b)),b("fill"),l.fill!=="none"&&i(u,l,m,b),s.coerceSelectionMarkerOpacity(l,b)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatterpolar/defaults":1004,"./attributes":1009}],1013:[function(e,I,F){var s=e("../scatterpolar/format_labels");I.exports=function(h,y,t){var a=h.i;return"r"in h||(h.r=y._r[a]),"theta"in h||(h.theta=y._theta[a]),s(h,y,t)}},{"../scatterpolar/format_labels":1005}],1014:[function(e,I,F){var s=e("../scattergl/hover"),o=e("../scatterpolar/hover").makeHoverPointText;function h(y,t,a,i){var n=y.cd,r=n[0].t,f=r.r,u=r.theta,l=s.hoverPoints(y,t,a,i);if(!(!l||l[0].index===!1)){var m=l[0];if(m.index===void 0)return l;var d=y.subplot,b=m.cd[m.index],g=m.trace;if(b.r=f[m.index],b.theta=u[m.index],!!d.isPtInside(b))return m.xLabelVal=void 0,m.yLabelVal=void 0,o(b,g,d,m),l}}I.exports={hoverPoints:h}},{"../scattergl/hover":988,"../scatterpolar/hover":1006}],1015:[function(e,I,F){arguments[4][896][0].apply(F,arguments)},{"./base_index":1010,"./plot":1016,dup:896}],1016:[function(e,I,F){var s=e("@plotly/point-cluster"),o=e("fast-isnumeric"),h=e("../scattergl/plot"),y=e("../scattergl/scene_update"),t=e("../scattergl/convert"),a=e("../../lib"),i=e("../scattergl/constants").TOO_MANY_POINTS,n={};I.exports=function(f,u,l){if(!!l.length){var m=u.radialAxis,d=u.angularAxis,b=y(f,u);return l.forEach(function(g){if(!(!g||!g[0]||!g[0].trace)){var _=g[0],p=_.trace,A=_.t,c=p._length,S=A.r,T=A.theta,x=A.opts,w,v=S.slice(),C=T.slice();for(w=0;w<S.length;w++)u.isPtInside({r:S[w],theta:T[w]})||(v[w]=NaN,C[w]=NaN);var M=new Array(c*2),E=Array(c),L=Array(c);for(w=0;w<c;w++){var z=v[w],O,R;if(o(z)){var D=m.c2g(z),H=d.c2g(C[w],p.thetaunit);O=D*Math.cos(H),R=D*Math.sin(H)}else O=R=NaN;E[w]=M[w*2]=O,L[w]=M[w*2+1]=R}A.tree=s(M),x.marker&&c>=i&&(x.marker.cluster=A.tree),x.marker&&(x.markerSel.positions=x.markerUnsel.positions=x.marker.positions=M),x.line&&M.length>1&&a.extendFlat(x.line,t.linePositions(f,p,M)),x.text&&(a.extendFlat(x.text,{positions:M},t.textPosition(f,p,x.text,x.marker)),a.extendFlat(x.textSel,{positions:M},t.textPosition(f,p,x.text,x.markerSel)),a.extendFlat(x.textUnsel,{positions:M},t.textPosition(f,p,x.text,x.markerUnsel))),x.fill&&!b.fill2d&&(b.fill2d=!0),x.marker&&!b.scatter2d&&(b.scatter2d=!0),x.line&&!b.line2d&&(b.line2d=!0),x.text&&!b.glText&&(b.glText=!0),b.lineOptions.push(x.line),b.fillOptions.push(x.fill),b.markerOptions.push(x.marker),b.markerSelectedOptions.push(x.markerSel),b.markerUnselectedOptions.push(x.markerUnsel),b.textOptions.push(x.text),b.textSelectedOptions.push(x.textSel),b.textUnselectedOptions.push(x.textUnsel),b.selectBatch.push([]),b.unselectBatch.push([]),A.x=E,A.y=L,A.rawx=E,A.rawy=L,A.r=S,A.theta=T,A.positions=M,A._scene=b,A.index=b.count,b.count++}}),h(f,u,l)}},I.exports.reglPrecompiled=n},{"../../lib":503,"../scattergl/constants":982,"../scattergl/convert":983,"../scattergl/plot":990,"../scattergl/scene_update":991,"@plotly/point-cluster":59,"fast-isnumeric":190}],1017:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,h=e("../../lib/extend").extendFlat,y=e("../scatter/attributes"),t=e("../../plots/attributes"),a=y.line;I.exports={mode:y.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:o({editType:"plot"},{keys:["real","imag","text"]}),hovertext:y.hovertext,line:{color:a.color,width:a.width,dash:a.dash,shape:h({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:h({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:h({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:h({},t.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:y.hoveron,hovertemplate:s(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1018:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../../constants/numerical").BADNUM,h=e("../scatter/colorscale_calc"),y=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),a=e("../scatter/calc").calcMarkerSize;I.exports=function(n,r){for(var f=n._fullLayout,u=r.subplot,l=f[u].realaxis,m=f[u].imaginaryaxis,d=l.makeCalcdata(r,"real"),b=m.makeCalcdata(r,"imag"),g=r._length,_=new Array(g),p=0;p<g;p++){var A=d[p],c=b[p],S=_[p]={};s(A)&&s(c)?(S.real=A,S.imag=c):S.real=o}return a(r,g),h(n,r),y(_,r),t(_,r),_}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1019:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/subtypes"),h=e("../scatter/marker_defaults"),y=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),n=e("../scatter/constants").PTS_LINESONLY,r=e("./attributes");I.exports=function(l,m,d,b){function g(A,c){return s.coerce(l,m,r,A,c)}var _=f(l,m,b,g);if(!_){m.visible=!1;return}g("mode",_<n?"lines+markers":"lines"),g("text"),g("hovertext"),m.hoveron!=="fills"&&g("hovertemplate"),o.hasLines(m)&&(y(l,m,d,b,g),t(l,m,g),g("connectgaps")),o.hasMarkers(m)&&h(l,m,d,b,g,{gradient:!0}),o.hasText(m)&&(g("texttemplate"),a(l,m,b,g));var p=[];(o.hasMarkers(m)||o.hasText(m))&&(g("cliponaxis"),g("marker.maxdisplayed"),p.push("points")),g("fill"),m.fill!=="none"&&(i(l,m,d,g),o.hasLines(m)||t(l,m,g)),(m.fill==="tonext"||m.fill==="toself")&&p.push("fills"),g("hoveron",p.join("+")||"points"),s.coerceSelectionMarkerOpacity(m,g)};function f(u,l,m,d){var b=d("real"),g=d("imag"),_;return b&&g&&(_=Math.min(b.length,g.length)),l._length=_,_}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1017}],1020:[function(e,I,F){var s=e("../../plots/cartesian/axes");I.exports=function(h,y,t){var a={},i=t[y.subplot]._subplot;return a.realLabel=s.tickText(i.radialAxis,h.real,!0).text,a.imagLabel=s.tickText(i.angularAxis,h.imag,!0).text,a}},{"../../plots/cartesian/axes":554}],1021:[function(e,I,F){var s=e("../scatter/hover");function o(y,t,a,i){var n=s(y,t,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var f=y.subplot,u=r.cd[r.index],l=r.trace;if(!!f.isPtInside(u))return r.xLabelVal=void 0,r.yLabelVal=void 0,h(u,l,f,r),r.hovertemplate=l.hovertemplate,n}}function h(y,t,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="real",r._hovertitle="imag";var f={};f[t.subplot]={_subplot:a};var u=t._module.formatLabels(y,t,f);i.realLabel=u.realLabel,i.imagLabel=u.imagLabel;var l=y.hi||t.hoverinfo,m=[];function d(g,_){m.push(g._hovertitle+": "+_)}if(!t.hovertemplate){var b=l.split("+");b.indexOf("all")!==-1&&(b=["real","imag","text"]),b.indexOf("real")!==-1&&d(n,i.realLabel),b.indexOf("imag")!==-1&&d(r,i.imagLabel),b.indexOf("text")!==-1&&i.text&&(m.push(i.text),delete i.text),i.extraText=m.join("<br>")}}I.exports={hoverPoints:o,makeHoverPointText:h}},{"../scatter/hover":938}],1022:[function(e,I,F){I.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1017,"./calc":1018,"./defaults":1019,"./format_labels":1020,"./hover":1021,"./plot":1023}],1023:[function(e,I,F){var s=e("../scatter/plot"),o=e("../../constants/numerical").BADNUM,h=e("../../plots/smith/helpers"),y=h.smith;I.exports=function(a,i,n){for(var r=i.layers.frontplot.select("g.scatterlayer"),f={xaxis:i.xaxis,yaxis:i.yaxis,plot:i.framework,layerClipId:i._hasClipOnAxisFalse?i.clipIds.forTraces:null},u=0;u<n.length;u++)for(var l=n[u],m=0;m<l.length;m++){var d=l[m],b=d.real;if(b===o)d.x=d.y=o;else{var g=y([b,d.imag]);d.x=g[0],d.y=g[1]}}s(a,f,n,r)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":948}],1024:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,h=e("../scatter/attributes"),y=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),a=e("../../components/drawing/attributes").dash,i=e("../../lib/extend").extendFlat,n=h.marker,r=h.line,f=n.line;I.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},h.mode,{dflt:"markers"}),text:i({},h.text,{}),texttemplate:o({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},h.hovertext,{}),line:{color:r.color,width:r.width,dash:a,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:h.connectgaps,cliponaxis:h.cliponaxis,fill:i({},h.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:h.fillcolor,marker:i({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:i({width:f.width,editType:"calc"},t("marker.line")),gradient:n.gradient,editType:"calc"},t("marker")),textfont:h.textfont,textposition:h.textposition,selected:h.selected,unselected:h.unselected,hoverinfo:i({},y.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:h.hoveron,hovertemplate:s()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1025:[function(e,I,F){var s=e("fast-isnumeric"),o=e("../scatter/colorscale_calc"),h=e("../scatter/arrays_to_calcdata"),y=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,a=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};I.exports=function(r,f){var u=r._fullLayout[f.subplot],l=u.sum,m=f.sum||l,d={a:f.a,b:f.b,c:f.c},b,g,_,p,A,c;for(b=0;b<a.length;b++)if(_=a[b],!d[_]){for(A=d[i[_][0]],c=d[i[_][1]],p=new Array(A.length),g=0;g<A.length;g++)p[g]=m-A[g]-c[g];d[_]=p}var S=f._length,T=new Array(S),x,w,v,C,M,E;for(b=0;b<S;b++)x=d.a[b],w=d.b[b],v=d.c[b],s(x)&&s(w)&&s(v)?(x=+x,w=+w,v=+v,C=l/(x+w+v),C!==1&&(x*=C,w*=C,v*=C),E=x,M=v-w,T[b]={x:M,y:E,a:x,b:w,c:v}):T[b]={x:!1,y:!1};return t(f,S),o(r,f),h(T,f),y(T,f),T}},{"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1026:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/constants"),h=e("../scatter/subtypes"),y=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),a=e("../scatter/line_shape_defaults"),i=e("../scatter/text_defaults"),n=e("../scatter/fillcolor_defaults"),r=e("./attributes");I.exports=function(u,l,m,d){function b(T,x){return s.coerce(u,l,r,T,x)}var g=b("a"),_=b("b"),p=b("c"),A;if(g?(A=g.length,_?(A=Math.min(A,_.length),p&&(A=Math.min(A,p.length))):p?A=Math.min(A,p.length):A=0):_&&p&&(A=Math.min(_.length,p.length)),!A){l.visible=!1;return}l._length=A,b("sum"),b("text"),b("hovertext"),l.hoveron!=="fills"&&b("hovertemplate");var c=A<o.PTS_LINESONLY?"lines+markers":"lines";b("mode",c),h.hasLines(l)&&(t(u,l,m,d,b),a(u,l,b),b("connectgaps")),h.hasMarkers(l)&&y(u,l,m,d,b,{gradient:!0}),h.hasText(l)&&(b("texttemplate"),i(u,l,d,b));var S=[];(h.hasMarkers(l)||h.hasText(l))&&(b("cliponaxis"),b("marker.maxdisplayed"),S.push("points")),b("fill"),l.fill!=="none"&&(n(u,l,m,b),h.hasLines(l)||a(u,l,b)),(l.fill==="tonext"||l.fill==="toself")&&S.push("fills"),b("hoveron",S.join("+")||"points"),s.coerceSelectionMarkerOpacity(l,b)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1024}],1027:[function(e,I,F){I.exports=function(o,h,y,t,a){if(h.xa&&(o.xaxis=h.xa),h.ya&&(o.yaxis=h.ya),t[a]){var i=t[a];o.a=i.a,o.b=i.b,o.c=i.c}else o.a=h.a,o.b=h.b,o.c=h.c;return o}},{}],1028:[function(e,I,F){var s=e("../../plots/cartesian/axes");I.exports=function(h,y,t){var a={},i=t[y.subplot]._subplot;return a.aLabel=s.tickText(i.aaxis,h.a,!0).text,a.bLabel=s.tickText(i.baxis,h.b,!0).text,a.cLabel=s.tickText(i.caxis,h.c,!0).text,a}},{"../../plots/cartesian/axes":554}],1029:[function(e,I,F){var s=e("../scatter/hover");I.exports=function(h,y,t,a){var i=s(h,y,t,a);if(!i||i[0].index===!1)return;var n=i[0];if(n.index===void 0){var r=1-n.y0/h.ya._length,f=h.xa._length,u=f*r/2,l=f-u;return n.x0=Math.max(Math.min(n.x0,l),u),n.x1=Math.max(Math.min(n.x1,l),u),i}var m=n.cd[n.index],d=n.trace,b=n.subplot;n.a=m.a,n.b=m.b,n.c=m.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var g={};g[d.subplot]={_subplot:b};var _=d._module.formatLabels(m,d,g);n.aLabel=_.aLabel,n.bLabel=_.bLabel,n.cLabel=_.cLabel;var p=m.hi||d.hoverinfo,A=[];function c(T,x){A.push(T._hovertitle+": "+x)}if(!d.hovertemplate){var S=p.split("+");S.indexOf("all")!==-1&&(S=["a","b","c"]),S.indexOf("a")!==-1&&c(b.aaxis,n.aLabel),S.indexOf("b")!==-1&&c(b.baxis,n.bLabel),S.indexOf("c")!==-1&&c(b.caxis,n.cLabel)}return n.extraText=A.join("<br>"),n.hovertemplate=d.hovertemplate,i}},{"../scatter/hover":938}],1030:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1024,"./calc":1025,"./defaults":1026,"./event_data":1027,"./format_labels":1028,"./hover":1029,"./plot":1031}],1031:[function(e,I,F){var s=e("../scatter/plot");I.exports=function(h,y,t){var a=y.plotContainer;a.select(".scatterlayer").selectAll("*").remove();var i={xaxis:y.xaxis,yaxis:y.yaxis,plot:a,layerClipId:y._hasClipOnAxisFalse?y.clipIdRelative:null},n=y.layers.frontplot.select("g.scatterlayer");s(h,i,t,n)}},{"../scatter/plot":948}],1032:[function(e,I,F){var s=e("../scatter/attributes"),o=e("../../components/colorscale/attributes"),h=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../scattergl/attributes"),a=e("../../plots/cartesian/constants").idRegex,i=e("../../plot_api/plot_template").templatedArray,n=e("../../lib/extend").extendFlat,r=s.marker,f=r.line,u=n(o("marker.line",{editTypeOverride:"calc"}),{width:n({},f.width,{editType:"calc"}),editType:"calc"}),l=n(o("marker"),{symbol:r.symbol,size:n({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:u,editType:"calc"});l.color.editType=l.cmin.editType=l.cmax.editType="style";function m(d){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[d],editType:"plot"}}}I.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},t.text,{}),hovertext:n({},t.hovertext,{}),hovertemplate:y(),xhoverformat:h("x"),yhoverformat:h("y"),marker:l,xaxes:m("x"),yaxes:m("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:t.selected.marker,editType:"calc"},unselected:{marker:t.unselected.marker,editType:"calc"},opacity:t.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergl/attributes":979}],1033:[function(e,I,F){var s=e("../../registry"),o=e("../../components/grid");I.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select"),editStyle:e("./edit_style"),meta:{}},s.register(o)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":945,"./attributes":1032,"./calc":1035,"./defaults":1036,"./edit_style":1037,"./hover":1039,"./plot":1041,"./select":1043}],1034:[function(e,I,F){var s=e("regl-line2d"),o=e("../../registry"),h=e("../../lib/prepare_regl"),y=e("../../plots/get_data").getModuleCalcData,t=e("../../plots/cartesian"),a=e("../../plots/cartesian/axis_ids").getFromId,i=e("../../plots/cartesian/axes").shouldShowZeroLine,n="splom",r={};function f(g){var _=g._fullLayout,p=o.getModule(n),A=y(g.calcdata,p)[0],c=h(g,["ANGLE_instanced_arrays","OES_element_index_uint"],r);!c||(_._hasOnlyLargeSploms&&m(g),p.plot(g,{},A))}function u(g){var _=g.calcdata,p=g._fullLayout;p._hasOnlyLargeSploms&&m(g);for(var A=0;A<_.length;A++){var c=_[A][0],S=c.trace,T=p._splomScenes[S.uid];S.type==="splom"&&T&&T.matrix&&l(g,S,T)}}function l(g,_,p){for(var A=p.matrixOptions.data.length,c=_._visibleDims,S=p.viewOpts.ranges=new Array(A),T=0;T<c.length;T++){var x=c[T],w=S[T]=new Array(4),v=a(g,_._diag[x][0]);v&&(w[0]=v.r2l(v.range[0]),w[2]=v.r2l(v.range[1]));var C=a(g,_._diag[x][1]);C&&(w[1]=C.r2l(C.range[0]),w[3]=C.r2l(C.range[1]))}p.selectBatch.length||p.unselectBatch.length?p.matrix.update({ranges:S},{ranges:S}):p.matrix.update({ranges:S})}function m(g){var _=g._fullLayout,p=_._glcanvas.data()[0].regl,A=_._splomGrid;A||(A=_._splomGrid=s(p)),A.update(d(g))}function d(g){var _=g._context.plotGlPixelRatio,p=g._fullLayout,A=p._size,c=[0,0,p.width*_,p.height*_],S={},T;function x(re,Q,Z,K,le,fe){Z*=_,K*=_,le*=_,fe*=_;var ue=Q[re+"color"],V=Q[re+"width"],j=String(ue+V);j in S?S[j].data.push(NaN,NaN,Z,K,le,fe):S[j]={data:[Z,K,le,fe],join:"rect",thickness:V*_,color:ue,viewport:c,range:c,overlay:!1}}for(T in p._splomSubplots){var w=p._plots[T],v=w.xaxis,C=w.yaxis,M=v._gridVals,E=C._gridVals,L=v._offset,z=v._length,O=C._length,R=A.b+C.domain[0]*A.h,D=-C._m,H=-D*C.r2l(C.range[0],C.calendar),B,$;if(v.showgrid)for(T=0;T<M.length;T++)B=L+v.l2p(M[T].x),x("grid",v,B,R,B,R+O);if(C.showgrid)for(T=0;T<E.length;T++)$=R+H+D*E[T].x,x("grid",C,L,$,L+z,$);i(g,v,C)&&(B=L+v.l2p(0),x("zeroline",v,B,R,B,R+O)),i(g,C,v)&&($=R+H+0,x("zeroline",C,L,$,L+z,$))}var W=[];for(T in S)W.push(S[T]);return W}function b(g,_,p,A){var c={},S;if(A._splomScenes){for(S=0;S<g.length;S++){var T=g[S];T.type==="splom"&&(c[T.uid]=1)}for(S=0;S<p.length;S++){var x=p[S];if(!c[x.uid]){var w=A._splomScenes[x.uid];w&&w.destroy&&w.destroy(),A._splomScenes[x.uid]=null,delete A._splomScenes[x.uid]}}}Object.keys(A._splomScenes||{}).length===0&&delete A._splomScenes,A._splomGrid&&!_._hasOnlyLargeSploms&&A._hasOnlyLargeSploms&&(A._splomGrid.destroy(),A._splomGrid=null,delete A._splomGrid),t.clean(g,_,p,A)}I.exports={name:n,attr:t.attr,attrRegex:t.attrRegex,layoutAttributes:t.layoutAttributes,supplyLayoutDefaults:t.supplyLayoutDefaults,drawFramework:t.drawFramework,plot:f,drag:u,updateGrid:m,clean:b,updateFx:t.updateFx,toSVG:t.toSVG,reglPrecompiled:r}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1035:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axis_ids"),h=e("../scatter/calc").calcMarkerSize,y=e("../scatter/calc").calcAxisExpansion,t=e("../scatter/colorscale_calc"),a=e("../scattergl/convert").markerSelection,i=e("../scattergl/convert").markerStyle,n=e("./scene_update"),r=e("../../constants/numerical").BADNUM,f=e("../scattergl/constants").TOO_MANY_POINTS;I.exports=function(l,m){var d=m.dimensions,b=m._length,g={},_=g.cdata=[],p=g.data=[],A=m._visibleDims=[],c,S,T,x,w;function v(z,O){for(var R=z.makeCalcdata({v:O.values,vcalendar:m.calendar},"v"),D=0;D<R.length;D++)R[D]=R[D]===r?NaN:R[D];_.push(R),p.push(z.type==="log"?s.simpleMap(R,z.c2l):R)}for(c=0;c<d.length;c++)if(T=d[c],T.visible){if(x=o.getFromId(l,m._diag[c][0]),w=o.getFromId(l,m._diag[c][1]),x&&w&&x.type!==w.type){s.log("Skipping splom dimension "+c+" with conflicting axis types");continue}x?(v(x,T),w&&w.type==="category"&&(w._categories=x._categories.slice())):v(w,T),A.push(c)}t(l,m),s.extendFlat(g,i(m));var C=_.length,M=C*b>f,E;for(M?E=g.sizeAvg||Math.max(g.size,3):E=h(m,b),S=0;S<A.length;S++)c=A[S],T=d[c],x=o.getFromId(l,m._diag[c][0])||{},w=o.getFromId(l,m._diag[c][1])||{},y(l,m,x,w,_[S],_[S],E);var L=n(l,m);return L.matrix||(L.matrix=!0),L.matrixOptions=g,L.selectedOptions=a(m,m.selected),L.unselectedOptions=a(m,m.unselected),[{x:!1,y:!1,t:{},trace:m}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983,"./scene_update":1042}],1036:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/array_container_defaults"),h=e("./attributes"),y=e("../scatter/subtypes"),t=e("../scatter/marker_defaults"),a=e("../parcoords/merge_length"),i=e("../scattergl/helpers").isOpenSymbol;I.exports=function(u,l,m,d){function b(x,w){return s.coerce(u,l,h,x,w)}var g=o(u,l,{name:"dimensions",handleItemDefaults:n}),_=b("diagonal.visible"),p=b("showupperhalf"),A=b("showlowerhalf"),c=a(l,g,"values");if(!c||!_&&!p&&!A){l.visible=!1;return}b("text"),b("hovertext"),b("hovertemplate"),b("xhoverformat"),b("yhoverformat"),t(u,l,m,d,b);var S=i(l.marker.symbol),T=y.isBubble(l);b("marker.line.width",S||T?1:0),r(u,l,d,b),s.coerceSelectionMarkerOpacity(l,b)};function n(f,u){function l(d,b){return s.coerce(f,u,h.dimensions,d,b)}l("label");var m=l("values");m&&m.length?l("visible"):u.visible=!1,l("axis.type"),l("axis.matches")}function r(f,u,l,m){var d=u.dimensions,b=d.length,g=u.showupperhalf,_=u.showlowerhalf,p=u.diagonal.visible,A,c,S=new Array(b),T=new Array(b);for(A=0;A<b;A++){var x=A?A+1:"";S[A]="x"+x,T[A]="y"+x}var w=m("xaxes",S),v=m("yaxes",T),C=u._diag=new Array(b);u._xaxes={},u._yaxes={};var M=[],E=[];function L(re,Q,Z,K){if(!!re){var le=re.charAt(0),fe=l._splomAxes[le];if(u["_"+le+"axes"][re]=1,K.push(re),!(re in fe)){var ue=fe[re]={};Z&&(ue.label=Z.label||"",Z.visible&&Z.axis&&(Z.axis.type&&(ue.type=Z.axis.type),Z.axis.matches&&(ue.matches=Q)))}}}var z=!p&&!_,O=!p&&!g;for(u._axesDim={},A=0;A<b;A++){var R=d[A],D=A===0,H=A===b-1,B=D&&z||H&&O?void 0:w[A],$=D&&O||H&&z?void 0:v[A];L(B,$,R,M),L($,B,R,E),C[A]=[B,$],u._axesDim[B]=A,u._axesDim[$]=A}for(A=0;A<M.length;A++)for(c=0;c<E.length;c++){var W=M[A]+E[c];(A>c&&g||A<c&&_||A===c&&(p||!_||!g))&&(l._splomSubplots[W]=1)}(!_||!p&&g&&_)&&(l._splomGridDflt.xside="bottom",l._splomGridDflt.yside="left")}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":898,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scattergl/helpers":987,"./attributes":1032}],1037:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/colorscale_calc"),h=e("../scattergl/convert").markerStyle;I.exports=function(t,a){var i=a.trace,n=t._fullLayout._splomScenes[i.uid];if(n){o(t,i),s.extendFlat(n.matrixOptions,h(i));var r=s.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(r,null)}}},{"../../lib":503,"../scatter/colorscale_calc":930,"../scattergl/convert":983}],1038:[function(e,I,F){F.getDimIndex=function(o,h){for(var y=h._id,t=y.charAt(0),a={x:0,y:1}[t],i=o._visibleDims,n=0;n<i.length;n++){var r=i[n];if(o._diag[r][a]===y)return n}return!1}},{}],1039:[function(e,I,F){var s=e("./helpers"),o=e("../scattergl/hover").calcHover;function h(y,t,a){var i=y.cd,n=i[0].trace,r=y.scene,f=r.matrixOptions.cdata,u=y.xa,l=y.ya,m=u.c2p(t),d=l.c2p(a),b=y.distance,g=s.getDimIndex(n,u),_=s.getDimIndex(n,l);if(g===!1||_===!1)return[y];for(var p=f[g],A=f[_],c,S,T=b,x=0;x<p.length;x++){var w=p[x],v=A[x],C=u.c2p(w)-m,M=l.c2p(v)-d,E=Math.sqrt(C*C+M*M);E<T&&(T=S=E,c=x)}return y.index=c,y.distance=T,y.dxy=S,c===void 0?[y]:[o(y,p,A,n)]}I.exports={hoverPoints:h}},{"../scattergl/hover":988,"./helpers":1038}],1040:[function(e,I,F){var s=e("./base_index");s.basePlotModule=e("./base_plot"),I.exports=s},{"./base_index":1033,"./base_plot":1034}],1041:[function(e,I,F){var s=e("regl-splom"),o=e("../../lib"),h=e("../../plots/cartesian/axis_ids"),y=e("../../components/dragelement/helpers").selectMode;I.exports=function(i,n,r){if(!!r.length)for(var f=0;f<r.length;f++)t(i,r[f][0])};function t(a,i){var n=a._fullLayout,r=n._size,f=i.trace,u=i.t,l=n._splomScenes[f.uid],m=l.matrixOptions,d=m.cdata,b=n._glcanvas.data()[0].regl,g=n.dragmode,_,p,A,c,S;if(d.length!==0){m.lower=f.showupperhalf,m.upper=f.showlowerhalf,m.diagonal=f.diagonal.visible;var T=f._visibleDims,x=d.length,w=l.viewOpts={};for(w.ranges=new Array(x),w.domains=new Array(x),S=0;S<T.length;S++){A=T[S];var v=w.ranges[S]=new Array(4),C=w.domains[S]=new Array(4);_=h.getFromId(a,f._diag[A][0]),_&&(v[0]=_._rl[0],v[2]=_._rl[1],C[0]=_.domain[0],C[2]=_.domain[1]),p=h.getFromId(a,f._diag[A][1]),p&&(v[1]=p._rl[0],v[3]=p._rl[1],C[1]=p.domain[0],C[3]=p.domain[1])}var M=a._context.plotGlPixelRatio,E=r.l*M,L=r.b*M,z=r.w*M,O=r.h*M;w.viewport=[E,L,z+E,O+L],l.matrix===!0&&(l.matrix=s(b));var R=n.clickmode.indexOf("select")>-1,D=y(g)||!!f.selectedpoints||R,H=!0;if(D){var B=f._length;if(f.selectedpoints){l.selectBatch=f.selectedpoints;var $=f.selectedpoints,W={};for(A=0;A<$.length;A++)W[$[A]]=!0;var re=[];for(A=0;A<B;A++)W[A]||re.push(A);l.unselectBatch=re}var Q=u.xpx=new Array(x),Z=u.ypx=new Array(x);for(S=0;S<T.length;S++){if(A=T[S],_=h.getFromId(a,f._diag[A][0]),_)for(Q[S]=new Array(B),c=0;c<B;c++)Q[S][c]=_.c2p(d[S][c]);if(p=h.getFromId(a,f._diag[A][1]),p)for(Z[S]=new Array(B),c=0;c<B;c++)Z[S][c]=p.c2p(d[S][c])}if(l.selectBatch.length||l.unselectBatch.length){var K=o.extendFlat({},m,l.unselectedOptions,w),le=o.extendFlat({},m,l.selectedOptions,w);l.matrix.update(K,le),H=!1}}else u.xpx=u.ypx=null;if(H){var fe=o.extendFlat({},m,w);l.matrix.update(fe,null)}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1042:[function(e,I,F){var s=e("../../lib");I.exports=function(h,y){var t=h._fullLayout,a=y.uid,i=t._splomScenes;i||(i=t._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},f=i[y.uid];return f||(f=i[a]=s.extendFlat({},n,r),f.draw=function(){f.matrix&&f.matrix.draw&&(f.selectBatch.length||f.unselectBatch.length?f.matrix.draw(f.unselectBatch,f.selectBatch):f.matrix.draw()),f.dirty=!1},f.destroy=function(){f.matrix&&f.matrix.destroy&&f.matrix.destroy(),f.matrixOptions=null,f.selectBatch=null,f.unselectBatch=null,f=null}),f.dirty||s.extendFlat(f,n),f}},{"../../lib":503}],1043:[function(e,I,F){var s=e("../../lib"),o=e("../scatter/subtypes"),h=e("./helpers");I.exports=function(t,a){var i=t.cd,n=i[0].trace,r=i[0].t,f=t.scene,u=f.matrixOptions.cdata,l=t.xaxis,m=t.yaxis,d=[];if(!f)return d;var b=!o.hasMarkers(n)&&!o.hasText(n);if(n.visible!==!0||b)return d;var g=h.getDimIndex(n,l),_=h.getDimIndex(n,m);if(g===!1||_===!1)return d;var p=r.xpx[g],A=r.ypx[_],c=u[g],S=u[_],T=[],x=[];if(a!==!1&&!a.degenerate)for(var w=0;w<c.length;w++)a.contains([p[w],A[w]],null,w,t)?(T.push(w),d.push({pointNumber:w,x:c[w],y:S[w]})):x.push(w);var v=f.matrixOptions;return!T.length&&!x.length?f.matrix.update(v,null):!f.selectBatch.length&&!f.unselectBatch.length&&f.matrix.update(f.unselectedOptions,s.extendFlat({},v,f.selectedOptions,f.viewOpts)),f.selectBatch=T,f.unselectBatch=x,d}},{"../../lib":503,"../scatter/subtypes":952,"./helpers":1038}],1044:[function(e,I,F){var s=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=e("../../plots/template_attributes").hovertemplateAttrs,y=e("../mesh3d/attributes"),t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:h({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:o("u",1),vhoverformat:o("v",1),whoverformat:o("w",1),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),showlegend:a({},t.showlegend,{dflt:!1})};a(i,s("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=y[r]}),i.hoverinfo=a({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,I.exports=i},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1045:[function(e,I,F){var s=e("../../lib"),o=e("../../components/colorscale/calc");function h(i,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=a(n.u,n._len),n._v=a(n.v,n._len),n._w=a(n.w,n._len),n._x=a(n.x,n._len),n._y=a(n.y,n._len),n._z=a(n.z,n._len);var r=y(n);n._gridFill=r.fill,n._Xs=r.Xs,n._Ys=r.Ys,n._Zs=r.Zs,n._len=r.len;var f=0,u,l,m;n.starts&&(u=a(n.starts.x||[]),l=a(n.starts.y||[]),m=a(n.starts.z||[]),f=Math.min(u.length,l.length,m.length)),n._startsX=u||[],n._startsY=l||[],n._startsZ=m||[];var d=0,b=1/0,g;for(g=0;g<n._len;g++){var _=n._u[g],p=n._v[g],A=n._w[g],c=Math.sqrt(_*_+p*p+A*A);d=Math.max(d,c),b=Math.min(b,c)}for(o(i,n,{vals:[b,d],containerStr:"",cLetter:"c"}),g=0;g<f;g++){var S=u[g];r.xMax=Math.max(r.xMax,S),r.xMin=Math.min(r.xMin,S);var T=l[g];r.yMax=Math.max(r.yMax,T),r.yMin=Math.min(r.yMin,T);var x=m[g];r.zMax=Math.max(r.zMax,x),r.zMin=Math.min(r.zMin,x)}n._slen=f,n._normMax=d,n._xbnds=[r.xMin,r.xMax],n._ybnds=[r.yMin,r.yMax],n._zbnds=[r.zMin,r.zMax]}function y(i){var n=i._x,r=i._y,f=i._z,u=i._len,l,m,d,b=-1/0,g=1/0,_=-1/0,p=1/0,A=-1/0,c=1/0,S="",T,x,w,v,C,M,E,L,z;for(u&&(v=n[0],M=r[0],L=f[0]),u>1&&(C=n[u-1],E=r[u-1],z=f[u-1]),l=0;l<u;l++)b=Math.max(b,n[l]),g=Math.min(g,n[l]),_=Math.max(_,r[l]),p=Math.min(p,r[l]),A=Math.max(A,f[l]),c=Math.min(c,f[l]),!T&&n[l]!==v&&(T=!0,S+="x"),!x&&r[l]!==M&&(x=!0,S+="y"),!w&&f[l]!==L&&(w=!0,S+="z");T||(S+="x"),x||(S+="y"),w||(S+="z");var O=t(i._x),R=t(i._y),D=t(i._z);S=S.replace("x",(v>C?"-":"+")+"x"),S=S.replace("y",(M>E?"-":"+")+"y"),S=S.replace("z",(L>z?"-":"+")+"z");var H=function(){u=0,O=[],R=[],D=[]};(!u||u<O.length*R.length*D.length)&&H();var B=function(oe){return oe==="x"?n:oe==="y"?r:f},$=function(oe){return oe==="x"?O:oe==="y"?R:D},W=function(oe){return oe[u-1]<oe[0]?-1:1},re=B(S[1]),Q=B(S[3]),Z=B(S[5]),K=$(S[1]).length,le=$(S[3]).length,fe=$(S[5]).length,ue=!1,V=function(oe,se,me){return K*(le*oe+se)+me},j=W(B(S[1])),ee=W(B(S[3])),q=W(B(S[5]));for(l=0;l<fe-1;l++){for(m=0;m<le-1;m++){for(d=0;d<K-1;d++){var X=V(l,m,d),J=V(l,m,d+1),ie=V(l,m+1,d),ne=V(l+1,m,d);if((!(re[X]*j<re[J]*j)||!(Q[X]*ee<Q[ie]*ee)||!(Z[X]*q<Z[ne]*q))&&(ue=!0),ue)break}if(ue)break}if(ue)break}return ue&&(s.warn("Encountered arbitrary coordinates! Unable to input data grid."),H()),{xMin:g,yMin:p,zMin:c,xMax:b,yMax:_,zMax:A,Xs:O,Ys:R,Zs:D,len:u,fill:S}}function t(i){return s.distinctVals(i).vals}function a(i,n){if(n===void 0&&(n=i.length),s.isTypedArray(i))return i.subarray(0,n);for(var r=[],f=0;f<n;f++)r[f]=+i[f];return r}I.exports={calc:h,filter:a,processGrid:y}},{"../../components/colorscale/calc":374,"../../lib":503}],1046:[function(e,I,F){var s=e("../../../stackgl_modules").gl_streamtube3d,o=s.createTubeMesh,h=e("../../lib"),y=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,a=e("../../plots/gl3d/zip3"),i={xaxis:0,yaxis:1,zaxis:2};function n(d,b){this.scene=d,this.uid=b,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(d){var b=this.scene.fullSceneLayout,g=this.scene.dataScale;function _(c,S){var T=b[S],x=g[i[S]];return T.l2c(c)/x}if(d.object===this.mesh){var p=d.data.position,A=d.data.velocity;return d.traceCoordinate=[_(p[0],"xaxis"),_(p[1],"yaxis"),_(p[2],"zaxis"),_(A[0],"xaxis"),_(A[1],"yaxis"),_(A[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}};function f(d){var b=d.length,g;return b>2?g=d.slice(1,b-1):b===2?g=[(d[0]+d[1])/2]:g=d,g}function u(d){var b=d.length;return b===1?[.5,.5]:[d[1]-d[0],d[b-1]-d[b-2]]}function l(d,b){var g=d.fullSceneLayout,_=d.dataScale,p=b._len,A={};function c(le,fe){var ue=g[fe],V=_[i[fe]];return h.simpleMap(le,function(j){return ue.d2l(j)*V})}if(A.vectors=a(c(b._u,"xaxis"),c(b._v,"yaxis"),c(b._w,"zaxis"),p),!p)return{positions:[],cells:[]};var S=c(b._Xs,"xaxis"),T=c(b._Ys,"yaxis"),x=c(b._Zs,"zaxis");A.meshgrid=[S,T,x],A.gridFill=b._gridFill;var w=b._slen;if(w)A.startingPositions=a(c(b._startsX,"xaxis"),c(b._startsY,"yaxis"),c(b._startsZ,"zaxis"));else{for(var v=T[0],C=f(S),M=f(x),E=new Array(C.length*M.length),L=0,z=0;z<C.length;z++)for(var O=0;O<M.length;O++)E[L++]=[C[z],v,M[O]];A.startingPositions=E}A.colormap=y(b),A.tubeSize=b.sizeref,A.maxLength=b.maxdisplayed;var R=c(b._xbnds,"xaxis"),D=c(b._ybnds,"yaxis"),H=c(b._zbnds,"zaxis"),B=u(S),$=u(T),W=u(x),re=[[R[0]-B[0],D[0]-$[0],H[0]-W[0]],[R[1]+B[1],D[1]+$[1],H[1]+W[1]]],Q=s(A,re),Z=t(b);Q.vertexIntensityBounds=[Z.min/b._normMax,Z.max/b._normMax];var K=b.lightposition;return Q.lightPosition=[K.x,K.y,K.z],Q.ambient=b.lighting.ambient,Q.diffuse=b.lighting.diffuse,Q.specular=b.lighting.specular,Q.roughness=b.lighting.roughness,Q.fresnel=b.lighting.fresnel,Q.opacity=b.opacity,b._pad=Q.tubeScale*b.sizeref*2,Q}r.update=function(d){this.data=d;var b=l(this.scene,d);this.mesh.update(b)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function m(d,b){var g=d.glplot.gl,_=l(d,b),p=o(g,_),A=new n(d,b.uid);return A.mesh=p,A.data=b,p._trace=A,d.glplot.add(p),A}I.exports=m},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1047:[function(e,I,F){var s=e("../../lib"),o=e("../../components/colorscale/defaults"),h=e("./attributes");I.exports=function(t,a,i,n){function r(g,_){return s.coerce(t,a,h,g,_)}var f=r("u"),u=r("v"),l=r("w"),m=r("x"),d=r("y"),b=r("z");if(!f||!f.length||!u||!u.length||!l||!l.length||!m||!m.length||!d||!d.length||!b||!b.length){a.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),o(t,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1044}],1048:[function(e,I,F){I.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc").calc,plot:e("./convert"),eventData:function(s,o){return s.tubex=s.x,s.tubey=s.y,s.tubez=s.z,s.tubeu=o.traceCoordinate[3],s.tubev=o.traceCoordinate[4],s.tubew=o.traceCoordinate[5],s.norm=o.traceCoordinate[6],s.divergence=o.traceCoordinate[7],delete s.x,delete s.y,delete s.z,s},meta:{}}},{"../../plots/gl3d":598,"./attributes":1044,"./calc":1045,"./convert":1046,"./defaults":1047}],1049:[function(e,I,F){var s=e("../../plots/attributes"),o=e("../../plots/template_attributes").hovertemplateAttrs,h=e("../../plots/template_attributes").texttemplateAttrs,y=e("../../components/colorscale/attributes"),t=e("../../plots/domain").attributes,a=e("../pie/attributes"),i=e("./constants"),n=e("../../lib/extend").extendFlat;I.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:n({colors:{valType:"data_array",editType:"calc"},line:{color:n({},a.marker.line.color,{dflt:null}),width:n({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},y("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:h({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:n({},s.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:o({},{keys:i.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:n({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:t({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"./constants":1052}],1050:[function(e,I,F){var s=e("../../plots/plots");F.name="sunburst",F.plot=function(o,h,y,t){s.plotBasePlot(F.name,o,h,y,t)},F.clean=function(o,h,y,t){s.cleanBasePlot(F.name,o,h,y,t)}},{"../../plots/plots":619}],1051:[function(e,I,F){var s=e("d3-hierarchy"),o=e("fast-isnumeric"),h=e("../../lib"),y=e("../../components/colorscale").makeColorScaleFuncFromTrace,t=e("../pie/calc").makePullColorFn,a=e("../pie/calc").generateExtendedColors,i=e("../../components/colorscale").calc,n=e("../../constants/numerical").ALMOST_EQUAL,r={},f={},u={};F.calc=function(m,d){var b=m._fullLayout,g=d.ids,_=h.isArrayOrTypedArray(g),p=d.labels,A=d.parents,c=d.values,S=h.isArrayOrTypedArray(c),T=[],x={},w={},v=function(j,ee){x[j]?x[j].push(ee):x[j]=[ee],w[ee]=1},C=function(j){return j||typeof j=="number"},M=function(j){return!S||o(c[j])&&c[j]>=0},E,L,z;_?(E=Math.min(g.length,A.length),L=function(j){return C(g[j])&&M(j)},z=function(j){return String(g[j])}):(E=Math.min(p.length,A.length),L=function(j){return C(p[j])&&M(j)},z=function(j){return String(p[j])}),S&&(E=Math.min(E,c.length));for(var O=0;O<E;O++)if(L(O)){var R=z(O),D=C(A[O])?String(A[O]):"",H={i:O,id:R,pid:D,label:C(p[O])?String(p[O]):""};S&&(H.v=+c[O]),T.push(H),v(D,R)}if(x[""]){if(x[""].length>1){for(var W=h.randstr(),re=0;re<T.length;re++)T[re].pid===""&&(T[re].pid=W);T.unshift({hasMultipleRoots:!0,id:W,pid:"",label:""})}}else{var B=[],$;for($ in x)w[$]||B.push($);if(B.length===1)$=B[0],T.unshift({hasImpliedRoot:!0,id:$,pid:"",label:$});else return h.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",B.join(", ")].join(" "))}var Q;try{Q=s.stratify().id(function(j){return j.id}).parentId(function(j){return j.pid})(T)}catch(j){return h.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",j.message].join(" "))}var Z=s.hierarchy(Q),K=!1;if(S)switch(d.branchvalues){case"remainder":Z.sum(function(j){return j.data.v});break;case"total":Z.each(function(j){var ee=j.data.data,q=ee.v;if(j.children){var X=j.children.reduce(function(J,ie){return J+ie.data.data.v},0);if((ee.hasImpliedRoot||ee.hasMultipleRoots)&&(q=X),q<X*n)return K=!0,h.warn(["Total value for node",j.data.data.id,"of",d.name,"is smaller than the sum of its children.",`
parent value =`,q,`
children sum =`,X].join(" "))}j.value=q});break}else l(Z,d,{branches:d.count.indexOf("branches")!==-1,leaves:d.count.indexOf("leaves")!==-1});if(!K){d.sort&&Z.sort(function(j,ee){return ee.value-j.value});var le,fe,ue=d.marker.colors||[],V=!!ue.length;return d._hasColorscale?(V||(ue=S?d.values:d._values),i(m,d,{vals:ue,containerStr:"marker",cLetter:"c"}),fe=y(d.marker)):le=t(b["_"+d.type+"colormap"]),Z.each(function(j){var ee=j.data.data;ee.color=d._hasColorscale?fe(ue[ee.i]):le(ue[ee.i],ee.id)}),T[0].hierarchy=Z,T}},F._runCrossTraceCalc=function(m,d){var b=d._fullLayout,g=d.calcdata,_=b[m+"colorway"],p=b["_"+m+"colormap"];b["extend"+m+"colors"]&&(_=a(_,m==="icicle"?u:m==="treemap"?f:r));var A=0,c;function S(v){var C=v.data.data,M=C.id;C.color===!1&&(p[M]?C.color=p[M]:v.parent?v.parent.parent?C.color=v.parent.data.data.color:(p[M]=C.color=_[A%_.length],A++):C.color=c)}for(var T=0;T<g.length;T++){var x=g[T],w=x[0];w.trace.type===m&&w.hierarchy&&(c=w.trace.root.color,w.hierarchy.each(S))}},F.crossTraceCalc=function(m){return F._runCrossTraceCalc("sunburst",m)};function l(m,d,b){var g=0,_=m.children;if(_){for(var p=_.length,A=0;A<p;A++)g+=l(_[A],d,b);b.branches&&g++}else b.leaves&&g++;return m.value=m.data.data.value=g,d._values||(d._values=[]),d._values[m.data.data.i]=g,g}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":903,"d3-hierarchy":115,"fast-isnumeric":190}],1052:[function(e,I,F){I.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1053:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("../../plots/domain").defaults,y=e("../bar/defaults").handleText,t=e("../../components/colorscale"),a=t.hasColorscale,i=t.handleDefaults;I.exports=function(r,f,u,l){function m(S,T){return s.coerce(r,f,o,S,T)}var d=m("labels"),b=m("parents");if(!d||!d.length||!b||!b.length){f.visible=!1;return}var g=m("values");g&&g.length?m("branchvalues"):m("count"),m("level"),m("maxdepth");var _=m("marker.line.width");_&&m("marker.line.color",l.paper_bgcolor),m("marker.colors");var p=f._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis;p&&i(r,f,l,m,{prefix:"marker.",cLetter:"c"}),m("leaf.opacity",p?1:.7);var A=m("text");m("texttemplate"),f.texttemplate||m("textinfo",Array.isArray(A)?"text+label":"label"),m("hovertext"),m("hovertemplate");var c="auto";y(r,f,l,m,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),m("insidetextorientation"),m("sort"),m("rotation"),m("root.color"),h(f,l,m),f._length=null}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1049}],1054:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../registry"),h=e("../../components/fx/helpers").appendArrayPointValue,y=e("../../components/fx"),t=e("../../lib"),a=e("../../lib/events"),i=e("./helpers"),n=e("../pie/helpers"),r=n.formatPieValue;I.exports=function(l,m,d,b,g){var _=b[0],p=_.trace,A=_.hierarchy,c=p.type==="sunburst",S=p.type==="treemap"||p.type==="icicle";"_hasHoverLabel"in p||(p._hasHoverLabel=!1),"_hasHoverEvent"in p||(p._hasHoverEvent=!1);var T=function(v){var C=d._fullLayout;if(!(d._dragging||C.hovermode===!1)){var M=d._fullData[p.index],E=v.data.data,L=E.i,z=i.isHierarchyRoot(v),O=i.getParent(A,v),R=i.getValue(v),D=function(J){return t.castOption(M,L,J)},H=D("hovertemplate"),B=y.castHoverinfo(M,C,L),$=C.separators,W;if(H||B&&B!=="none"&&B!=="skip"){var re,Q;c&&(re=_.cx+v.pxmid[0]*(1-v.rInscribed),Q=_.cy+v.pxmid[1]*(1-v.rInscribed)),S&&(re=v._hoverX,Q=v._hoverY);var Z={},K=[],le=[],fe=function(J){return K.indexOf(J)!==-1};B&&(K=B==="all"?M._module.attributes.hoverinfo.flags:B.split("+")),Z.label=E.label,fe("label")&&Z.label&&le.push(Z.label),E.hasOwnProperty("v")&&(Z.value=E.v,Z.valueLabel=r(Z.value,$),fe("value")&&le.push(Z.valueLabel)),Z.currentPath=v.currentPath=i.getPath(v.data),fe("current path")&&!z&&le.push(Z.currentPath);var ue,V=[],j=function(){V.indexOf(ue)===-1&&(le.push(ue),V.push(ue))};Z.percentParent=v.percentParent=R/i.getValue(O),Z.parent=v.parentString=i.getPtLabel(O),fe("percent parent")&&(ue=i.formatPercent(Z.percentParent,$)+" of "+Z.parent,j()),Z.percentEntry=v.percentEntry=R/i.getValue(m),Z.entry=v.entry=i.getPtLabel(m),fe("percent entry")&&!z&&!v.onPathbar&&(ue=i.formatPercent(Z.percentEntry,$)+" of "+Z.entry,j()),Z.percentRoot=v.percentRoot=R/i.getValue(A),Z.root=v.root=i.getPtLabel(A),fe("percent root")&&!z&&(ue=i.formatPercent(Z.percentRoot,$)+" of "+Z.root,j()),Z.text=D("hovertext")||D("text"),fe("text")&&(ue=Z.text,t.isValidTextValue(ue)&&le.push(ue)),W=[f(v,M,g.eventDataKeys)];var ee={trace:M,y:Q,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:le.join("<br>"),name:H||fe("name")?M.name:void 0,color:D("hoverlabel.bgcolor")||E.color,borderColor:D("hoverlabel.bordercolor"),fontFamily:D("hoverlabel.font.family"),fontSize:D("hoverlabel.font.size"),fontColor:D("hoverlabel.font.color"),nameLength:D("hoverlabel.namelength"),textAlign:D("hoverlabel.align"),hovertemplate:H,hovertemplateLabels:Z,eventData:W};c&&(ee.x0=re-v.rInscribed*v.rpx1,ee.x1=re+v.rInscribed*v.rpx1,ee.idealAlign=v.pxmid[0]<0?"left":"right"),S&&(ee.x=re,ee.idealAlign=re<0?"left":"right");var q=[];y.loneHover(ee,{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:d,inOut_bbox:q}),W[0].bbox=q[0],p._hasHoverLabel=!0}if(S){var X=l.select("path.surface");g.styleOne(X,v,M,{hovered:!0})}p._hasHoverEvent=!0,d.emit("plotly_hover",{points:W||[f(v,M,g.eventDataKeys)],event:s.event})}},x=function(v){var C=d._fullLayout,M=d._fullData[p.index],E=s.select(this).datum();if(p._hasHoverEvent&&(v.originalEvent=s.event,d.emit("plotly_unhover",{points:[f(E,M,g.eventDataKeys)],event:s.event}),p._hasHoverEvent=!1),p._hasHoverLabel&&(y.loneUnhover(C._hoverlayer.node()),p._hasHoverLabel=!1),S){var L=l.select("path.surface");g.styleOne(L,E,M,{hovered:!1})}},w=function(v){var C=d._fullLayout,M=d._fullData[p.index],E=c&&(i.isHierarchyRoot(v)||i.isLeaf(v)),L=i.getPtId(v),z=i.isEntry(v)?i.findEntryWithChild(A,L):i.findEntryWithLevel(A,L),O=i.getPtId(z),R={points:[f(v,M,g.eventDataKeys)],event:s.event};E||(R.nextLevel=O);var D=a.triggerHandler(d,"plotly_"+p.type+"click",R);if(D!==!1&&C.hovermode&&(d._hoverdata=[f(v,M,g.eventDataKeys)],y.click(d,s.event)),!E&&D!==!1&&!d._dragging&&!d._transitioning){o.call("_storeDirectGUIEdit",M,C._tracePreGUI[M.uid],{level:M.level});var H={data:[{level:O}],traces:[p.index]},B={frame:{redraw:!1,duration:g.transitionTime},transition:{duration:g.transitionTime,easing:g.transitionEasing},mode:"immediate",fromcurrent:!0};y.loneUnhover(C._hoverlayer.node()),o.call("animate",d,H,B)}};l.on("mouseover",T),l.on("mouseout",x),l.on("click",w)};function f(u,l,m){for(var d=u.data.data,b={curveNumber:l.index,pointNumber:d.i,data:l._input,fullData:l},g=0;g<m.length;g++){var _=m[g];_ in u&&(b[_]=u[_])}return"parentString"in u&&!i.isHierarchyRoot(u)&&(b.parent=u.parentString),h(b,l,d.i),b}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":906,"./helpers":1055,"@plotly/d3":58}],1055:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color"),h=e("../../lib/setcursor"),y=e("../pie/helpers");F.findEntryWithLevel=function(n,r){var f;return r&&n.eachAfter(function(u){if(F.getPtId(u)===r)return f=u.copy()}),f||n},F.findEntryWithChild=function(n,r){var f;return n.eachAfter(function(u){for(var l=u.children||[],m=0;m<l.length;m++){var d=l[m];if(F.getPtId(d)===r)return f=u.copy()}}),f||n},F.isEntry=function(n){return!n.parent},F.isLeaf=function(n){return!n.children},F.getPtId=function(n){return n.data.data.id},F.getPtLabel=function(n){return n.data.data.label},F.getValue=function(n){return n.value},F.isHierarchyRoot=function(n){return i(n)===""},F.setSliceCursor=function(n,r,f){var u=f.isTransitioning;if(!u){var l=n.datum();u=f.hideOnRoot&&F.isHierarchyRoot(l)||f.hideOnLeaves&&F.isLeaf(l)}h(n,u?null:"pointer")};function t(n,r,f){return{color:F.getOutsideTextFontKey("color",n,r,f),family:F.getOutsideTextFontKey("family",n,r,f),size:F.getOutsideTextFontKey("size",n,r,f)}}function a(n,r,f,u){var l=(u||{}).onPathbar,m=r.data.data,d=m.i,b=s.castOption(n,d,(l?"pathbar.textfont":"insidetextfont")+".color");return!b&&n._input.textfont&&(b=s.castOption(n._input,d,"textfont.color")),{color:b||o.contrast(m.color),family:F.getInsideTextFontKey("family",n,r,f,u),size:F.getInsideTextFontKey("size",n,r,f,u)}}F.getInsideTextFontKey=function(n,r,f,u,l){var m=(l||{}).onPathbar,d=m?"pathbar.textfont":"insidetextfont",b=f.data.data.i;return s.castOption(r,b,d+"."+n)||s.castOption(r,b,"textfont."+n)||u.size},F.getOutsideTextFontKey=function(n,r,f,u){var l=f.data.data.i;return s.castOption(r,l,"outsidetextfont."+n)||s.castOption(r,l,"textfont."+n)||u.size},F.isOutsideText=function(n,r){return!n._hasColorscale&&F.isHierarchyRoot(r)},F.determineTextFont=function(n,r,f,u){return F.isOutsideText(n,r)?t(n,r,f):a(n,r,f,u)},F.hasTransition=function(n){return!!(n&&n.duration>0)},F.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},F.isHeader=function(n,r){return!(F.isLeaf(n)||n.depth===r._maxDepth-1)};function i(n){return n.data.data.pid}F.getParent=function(n,r){return F.findEntryWithLevel(n,i(r))},F.listPath=function(n,r){var f=n.parent;if(!f)return[];var u=r?[f.data[r]]:[f];return F.listPath(f,r).concat(u)},F.getPath=function(n){return F.listPath(n,"label").join("/")+"/"},F.formatValue=y.formatPieValue,F.formatPercent=function(n,r){var f=s.formatPercent(n,0);return f==="0%"&&(f=y.formatPiePercent(n,r)),f}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":906}],1056:[function(e,I,F){I.exports={moduleType:"trace",name:"sunburst",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1049,"./base_plot":1050,"./calc":1051,"./defaults":1053,"./layout_attributes":1057,"./layout_defaults":1058,"./plot":1059,"./style":1060}],1057:[function(e,I,F){I.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1058:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(y,t){function a(i,n){return s.coerce(y,t,o,i,n)}a("sunburstcolorway",t.colorway),a("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1057}],1059:[function(e,I,F){var s=e("@plotly/d3"),o=e("d3-hierarchy"),h=e("d3-interpolate").interpolate,y=e("../../components/drawing"),t=e("../../lib"),a=e("../../lib/svg_text_utils"),i=e("../bar/uniform_text"),n=i.recordMinTextSize,r=i.clearMinTextSize,f=e("../pie/plot"),u=e("../pie/helpers").getRotationAngle,l=f.computeTransform,m=f.transformInsideText,d=e("./style").styleOne,b=e("../bar/style").resizeText,g=e("./fx"),_=e("./constants"),p=e("./helpers");F.plot=function(w,v,C,M){var E=w._fullLayout,L=E._sunburstlayer,z,O,R=!C,D=!E.uniformtext.mode&&p.hasTransition(C);if(r("sunburst",E),z=L.selectAll("g.trace.sunburst").data(v,function(B){return B[0].trace.uid}),z.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),z.order(),D){M&&(O=M());var H=s.transition().duration(C.duration).ease(C.easing).each("end",function(){O&&O()}).each("interrupt",function(){O&&O()});H.each(function(){L.selectAll("g.trace").each(function(B){A(w,B,this,C)})})}else z.each(function(B){A(w,B,this,C)}),E.uniformtext.mode&&b(w,E._sunburstlayer.selectAll(".trace"),"sunburst");R&&z.exit().remove()};function A(w,v,C,M){var E=w._fullLayout,L=!E.uniformtext.mode&&p.hasTransition(M),z=s.select(C),O=z.selectAll("g.slice"),R=v[0],D=R.trace,H=R.hierarchy,B=p.findEntryWithLevel(H,D.level),$=p.getMaxDepth(D),W=E._size,re=D.domain,Q=W.w*(re.x[1]-re.x[0]),Z=W.h*(re.y[1]-re.y[0]),K=.5*Math.min(Q,Z),le=R.cx=W.l+W.w*(re.x[1]+re.x[0])/2,fe=R.cy=W.t+W.h*(1-re.y[0])-Z/2;if(!B)return O.remove();var ue=null,V={};L&&O.each(function(_e){V[p.getPtId(_e)]={rpx0:_e.rpx0,rpx1:_e.rpx1,x0:_e.x0,x1:_e.x1,transform:_e.transform},!ue&&p.isEntry(_e)&&(ue=_e)});var j=c(B).descendants(),ee=B.height+1,q=0,X=$;R.hasMultipleRoots&&p.isHierarchyRoot(B)&&(j=j.slice(1),ee-=1,q=1,X+=1),j=j.filter(function(_e){return _e.y1<=X});var J=u(D.rotation);J&&j.forEach(function(_e){_e.x0+=J,_e.x1+=J});var ie=Math.min(ee,$),ne=function(_e){return(_e-q)/ie*K},oe=function(_e,Re){return[_e*Math.cos(Re),-_e*Math.sin(Re)]},se=function(_e){return t.pathAnnulus(_e.rpx0,_e.rpx1,_e.x0,_e.x1,le,fe)},me=function(_e){return le+T(_e)[0]*(_e.transform.rCenter||0)+(_e.transform.x||0)},ce=function(_e){return fe+T(_e)[1]*(_e.transform.rCenter||0)+(_e.transform.y||0)};O=O.data(j,p.getPtId),O.enter().append("g").classed("slice",!0),L?O.exit().transition().each(function(){var _e=s.select(this),Re=_e.select("path.surface");Re.transition().attrTween("d",function(Je){var ze=Ae(Je);return function(De){return se(ze(De))}});var Ve=_e.select("g.slicetext");Ve.attr("opacity",0)}).remove():O.exit().remove(),O.order();var pe=null;if(L&&ue){var xe=p.getPtId(ue);O.each(function(_e){pe===null&&p.getPtId(_e)===xe&&(pe=_e.x1)})}var Se=O;L&&(Se=Se.transition().each("end",function(){var _e=s.select(this);p.setSliceCursor(_e,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Se.each(function(_e){var Re=s.select(this),Ve=t.ensureSingle(Re,"path","surface",function(Et){Et.style("pointer-events","all")});_e.rpx0=ne(_e.y0),_e.rpx1=ne(_e.y1),_e.xmid=(_e.x0+_e.x1)/2,_e.pxmid=oe(_e.rpx1,_e.xmid),_e.midangle=-(_e.xmid-Math.PI/2),_e.startangle=-(_e.x0-Math.PI/2),_e.stopangle=-(_e.x1-Math.PI/2),_e.halfangle=.5*Math.min(t.angleDelta(_e.x0,_e.x1)||Math.PI,Math.PI),_e.ring=1-_e.rpx0/_e.rpx1,_e.rInscribed=S(_e),L?Ve.transition().attrTween("d",function(Et){var $t=Ce(Et);return function(wt){return se($t(wt))}}):Ve.attr("d",se),Re.call(g,B,w,v,{eventDataKeys:_.eventDataKeys,transitionTime:_.CLICK_TRANSITION_TIME,transitionEasing:_.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),Ve.call(d,_e,D);var Je=t.ensureSingle(Re,"g","slicetext"),ze=t.ensureSingle(Je,"text","",function(Et){Et.attr("data-notex",1)}),De=t.ensureUniformFontSize(w,p.determineTextFont(D,_e,E.font));ze.text(F.formatSliceLabel(_e,B,D,v,E)).classed("slicetext",!0).attr("text-anchor","middle").call(y.font,De).call(a.convertToTspans,w);var je=y.bBox(ze.node());_e.transform=m(je,_e,R),_e.transform.targetX=me(_e),_e.transform.targetY=ce(_e);var dt=function(Et,$t){var wt=Et.transform;return l(wt,$t),wt.fontSize=De.size,n(D.type,wt,E),t.getTextTransform(wt)};L?ze.transition().attrTween("transform",function(Et){var $t=Ee(Et);return function(wt){return dt($t(wt),je)}}):ze.attr("transform",dt(_e,je))});function Ae(_e){var Re=p.getPtId(_e),Ve=V[Re],Je=V[p.getPtId(B)],ze;if(Je){var De=(_e.x1>Je.x1?2*Math.PI:0)+J;ze=_e.rpx1<Je.rpx1?{x0:_e.x0,x1:_e.x1,rpx0:0,rpx1:0}:{x0:De,x1:De,rpx0:_e.rpx0,rpx1:_e.rpx1}}else{var je,dt=p.getPtId(_e.parent);O.each(function(Vt){if(p.getPtId(Vt)===dt)return je=Vt});var Et=je.children,$t;Et.forEach(function(Vt,kt){if(p.getPtId(Vt)===Re)return $t=kt});var wt=Et.length,Ot=h(je.x0,je.x1);ze={rpx0:K,rpx1:K,x0:Ot($t/wt),x1:Ot(($t+1)/wt)}}return h(Ve,ze)}function Ce(_e){var Re=V[p.getPtId(_e)],Ve,Je={x0:_e.x0,x1:_e.x1,rpx0:_e.rpx0,rpx1:_e.rpx1};if(Re)Ve=Re;else if(ue)if(_e.parent)if(pe){var ze=(_e.x1>pe?2*Math.PI:0)+J;Ve={x0:ze,x1:ze}}else Ve={rpx0:K,rpx1:K},t.extendFlat(Ve,Oe(_e));else Ve={rpx0:0,rpx1:0};else Ve={x0:J,x1:J};return h(Ve,Je)}function Ee(_e){var Re=V[p.getPtId(_e)],Ve,Je=_e.transform;if(Re)Ve=Re;else if(Ve={rpx1:_e.rpx1,transform:{textPosAngle:Je.textPosAngle,scale:0,rotate:Je.rotate,rCenter:Je.rCenter,x:Je.x,y:Je.y}},ue)if(_e.parent)if(pe){var ze=_e.x1>pe?2*Math.PI:0;Ve.x0=Ve.x1=ze}else t.extendFlat(Ve,Oe(_e));else Ve.x0=Ve.x1=J;else Ve.x0=Ve.x1=J;var De=h(Ve.transform.textPosAngle,_e.transform.textPosAngle),je=h(Ve.rpx1,_e.rpx1),dt=h(Ve.x0,_e.x0),Et=h(Ve.x1,_e.x1),$t=h(Ve.transform.scale,Je.scale),wt=h(Ve.transform.rotate,Je.rotate),Ot=Je.rCenter===0?3:Ve.transform.rCenter===0?1/3:1,Vt=h(Ve.transform.rCenter,Je.rCenter),kt=function(St){return Vt(Math.pow(St,Ot))};return function(St){var ot=je(St),ht=dt(St),Ke=Et(St),Pe=kt(St),We=oe(ot,(ht+Ke)/2),Qe=De(St),ut={pxmid:We,rpx1:ot,transform:{textPosAngle:Qe,rCenter:Pe,x:Je.x,y:Je.y}};return n(D.type,Je,E),{transform:{targetX:me(ut),targetY:ce(ut),scale:$t(St),rotate:wt(St),rCenter:Pe}}}}function Oe(_e){var Re=_e.parent,Ve=V[p.getPtId(Re)],Je={};if(Ve){var ze=Re.children,De=ze.indexOf(_e),je=ze.length,dt=h(Ve.x0,Ve.x1);Je.x0=dt(De/je),Je.x1=dt(De/je)}else Je.x0=Je.x1=0;return Je}}function c(w){return o.partition().size([2*Math.PI,w.height+1])(w)}F.formatSliceLabel=function(w,v,C,M,E){var L=C.texttemplate,z=C.textinfo;if(!L&&(!z||z==="none"))return"";var O=E.separators,R=M[0],D=w.data.data,H=R.hierarchy,B=p.isHierarchyRoot(w),$=p.getParent(H,w),W=p.getValue(w);if(!L){var re=z.split("+"),Q=function(X){return re.indexOf(X)!==-1},Z=[],K;if(Q("label")&&D.label&&Z.push(D.label),D.hasOwnProperty("v")&&Q("value")&&Z.push(p.formatValue(D.v,O)),!B){Q("current path")&&Z.push(p.getPath(w.data));var le=0;Q("percent parent")&&le++,Q("percent entry")&&le++,Q("percent root")&&le++;var fe=le>1;if(le){var ue,V=function(X){K=p.formatPercent(ue,O),fe&&(K+=" of "+X),Z.push(K)};Q("percent parent")&&!B&&(ue=W/p.getValue($),V("parent")),Q("percent entry")&&(ue=W/p.getValue(v),V("entry")),Q("percent root")&&(ue=W/p.getValue(H),V("root"))}}return Q("text")&&(K=t.castOption(C,D.i,"text"),t.isValidTextValue(K)&&Z.push(K)),Z.join("<br>")}var j=t.castOption(C,D.i,"texttemplate");if(!j)return"";var ee={};D.label&&(ee.label=D.label),D.hasOwnProperty("v")&&(ee.value=D.v,ee.valueLabel=p.formatValue(D.v,O)),ee.currentPath=p.getPath(w.data),B||(ee.percentParent=W/p.getValue($),ee.percentParentLabel=p.formatPercent(ee.percentParent,O),ee.parent=p.getPtLabel($)),ee.percentEntry=W/p.getValue(v),ee.percentEntryLabel=p.formatPercent(ee.percentEntry,O),ee.entry=p.getPtLabel(v),ee.percentRoot=W/p.getValue(H),ee.percentRootLabel=p.formatPercent(ee.percentRoot,O),ee.root=p.getPtLabel(H),D.hasOwnProperty("color")&&(ee.color=D.color);var q=t.castOption(C,D.i,"text");return(t.isValidTextValue(q)||q==="")&&(ee.text=q),ee.customdata=t.castOption(C,D.i,"customdata"),t.texttemplateString(j,ee,E._d3locale,ee,C._meta||{})};function S(w){return w.rpx0===0&&t.isFullCircle([w.x0,w.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(w.halfangle)),w.ring/2))}function T(w){return x(w.rpx1,w.transform.textPosAngle)}function x(w,v){return[w*Math.sin(v),-w*Math.cos(v)]}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"./constants":1052,"./fx":1054,"./helpers":1055,"./style":1060,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1060:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/color"),h=e("../../lib"),y=e("../bar/uniform_text").resizeText;function t(i){var n=i._fullLayout._sunburstlayer.selectAll(".trace");y(i,n,"sunburst"),n.each(function(r){var f=s.select(this),u=r[0],l=u.trace;f.style("opacity",l.opacity),f.selectAll("path.surface").each(function(m){s.select(this).call(a,m,l)})})}function a(i,n,r){var f=n.data.data,u=!n.children,l=f.i,m=h.castOption(r,l,"marker.line.color")||o.defaultLine,d=h.castOption(r,l,"marker.line.width")||0;i.style("stroke-width",d).call(o.fill,f.color).call(o.stroke,m).style("opacity",u?r.leaf.opacity:null)}I.exports={style:t,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1061:[function(e,I,F){var s=e("../../components/color"),o=e("../../components/colorscale/attributes"),h=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll;function n(u){return{valType:"boolean",dflt:!1}}function r(u){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n(),y:n(),z:n()},color:{valType:"color",dflt:s.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:s.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=I.exports=i(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:y(),xhoverformat:h("x"),yhoverformat:h("y"),zhoverformat:h("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},o("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},o.zauto,{}),zmin:a({},o.zmin,{}),zmax:a({},o.zmax,{})},hoverinfo:a({},t.hoverinfo),showlegend:a({},t.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1062:[function(e,I,F){var s=e("../../components/colorscale/calc");I.exports=function(h,y){y.surfacecolor?s(h,y,{vals:y.surfacecolor,containerStr:"",cLetter:"c"}):s(h,y,{vals:y.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1063:[function(e,I,F){var s=e("../../../stackgl_modules").gl_surface3d,o=e("../../../stackgl_modules").ndarray,h=e("../../../stackgl_modules").ndarray_linear_interpolate.d2,y=e("../heatmap/interp2d"),t=e("../heatmap/find_empties"),a=e("../../lib").isArrayOrTypedArray,i=e("../../lib/gl_format_color").parseColorScale,n=e("../../lib/str2rgbarray"),r=e("../../components/colorscale").extractOpts;function f(M,E,L){this.scene=M,this.uid=L,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var u=f.prototype;u.getXat=function(M,E,L,z){var O=a(this.data.x)?a(this.data.x[0])?this.data.x[E][M]:this.data.x[M]:M;return L===void 0?O:z.d2l(O,0,L)},u.getYat=function(M,E,L,z){var O=a(this.data.y)?a(this.data.y[0])?this.data.y[E][M]:this.data.y[E]:E;return L===void 0?O:z.d2l(O,0,L)},u.getZat=function(M,E,L,z){var O=this.data.z[E][M];return O===null&&this.data.connectgaps&&this.data._interpolatedZ&&(O=this.data._interpolatedZ[E][M]),L===void 0?O:z.d2l(O,0,L)},u.handlePick=function(M){if(M.object===this.surface){var E=(M.data.index[0]-1)/this.dataScaleX-1,L=(M.data.index[1]-1)/this.dataScaleY-1,z=Math.max(Math.min(Math.round(E),this.data.z[0].length-1),0),O=Math.max(Math.min(Math.round(L),this.data._ylength-1),0);M.index=[z,O],M.traceCoordinate=[this.getXat(z,O),this.getYat(z,O),this.getZat(z,O)],M.dataCoordinate=[this.getXat(z,O,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(z,O,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(z,O,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var R=0;R<3;R++){var D=M.dataCoordinate[R];D!=null&&(M.dataCoordinate[R]*=this.scene.dataScale[R])}var H=this.data.hovertext||this.data.text;return Array.isArray(H)&&H[O]&&H[O][z]!==void 0?M.textLabel=H[O][z]:H?M.textLabel=H:M.textLabel="",M.data.dataCoordinate=M.dataCoordinate.slice(),this.surface.highlight(M.data),this.scene.glplot.spikes.position=M.dataCoordinate,!0}};function l(M){var E=M[0].rgb,L=M[M.length-1].rgb;return E[0]===L[0]&&E[1]===L[1]&&E[2]===L[2]&&E[3]===L[3]}var m=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(M,E){if(M<E)return 0;for(var L=0;Math.floor(M%E)===0;)M/=E,L++;return L}function b(M){for(var E=[],L=0;L<m.length;L++){var z=m[L];E.push(d(M,z))}return E}function g(M){for(var E=b(M),L=M,z=0;z<m.length;z++)if(E[z]>0){L=m[z];break}return L}function _(M,E){if(!(M<1||E<1)){for(var L=b(M),z=b(E),O=1,R=0;R<m.length;R++)O*=Math.pow(m[R],Math.max(L[R],z[R]));return O}}function p(M){if(M.length!==0){for(var E=1,L=0;L<M.length;L++)E=_(E,M[L]);return E}}u.calcXnums=function(M){var E,L=[];for(E=1;E<M;E++){var z=this.getXat(E-1,0),O=this.getXat(E,0);O!==z&&z!==void 0&&z!==null&&O!==void 0&&O!==null?L[E-1]=Math.abs(O-z):L[E-1]=0}var R=0;for(E=1;E<M;E++)R+=L[E-1];for(E=1;E<M;E++)L[E-1]===0?L[E-1]=1:L[E-1]=Math.round(R/L[E-1]);return L},u.calcYnums=function(M){var E,L=[];for(E=1;E<M;E++){var z=this.getYat(0,E-1),O=this.getYat(0,E);O!==z&&z!==void 0&&z!==null&&O!==void 0&&O!==null?L[E-1]=Math.abs(O-z):L[E-1]=0}var R=0;for(E=1;E<M;E++)R+=L[E-1];for(E=1;E<M;E++)L[E-1]===0?L[E-1]=1:L[E-1]=Math.round(R/L[E-1]);return L};var A=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],c=A[9],S=A[13];u.estimateScale=function(M,E){for(var L=E===0?this.calcXnums(M):this.calcYnums(M),z=1+p(L);z<c;)z*=2;for(;z>S;)z--,z/=g(z),z++,z<c&&(z=S);var O=Math.round(z/M);return O>1?O:1};function T(M,E,L){var z=L[8]+L[2]*E[0]+L[5]*E[1];return M[0]=(L[6]+L[0]*E[0]+L[3]*E[1])/z,M[1]=(L[7]+L[1]*E[0]+L[4]*E[1])/z,M}function x(M,E,L){return w(M,E,T,L),M}function w(M,E,L,z){for(var O=[0,0],R=M.shape[0],D=M.shape[1],H=0;H<R;H++)for(var B=0;B<D;B++)L(O,[H,B],z),M.set(H,B,h(E,O[0],O[1]));return M}u.refineCoords=function(M){for(var E=this.dataScaleX,L=this.dataScaleY,z=M[0].shape[0],O=M[0].shape[1],R=Math.floor(M[0].shape[0]*E+1)|0,D=Math.floor(M[0].shape[1]*L+1)|0,H=1+z+1,B=1+O+1,$=o(new Float32Array(H*B),[H,B]),W=[1/E,0,0,0,1/L,0,0,0,1],re=0;re<M.length;++re){this.surface.padField($,M[re]);var Q=o(new Float32Array(R*D),[R,D]);x(Q,$,W),M[re]=Q}};function v(M,E){for(var L=!1,z=0;z<M.length;z++)if(E===M[z]){L=!0;break}L===!1&&M.push(E)}u.setContourLevels=function(){var M=[[],[],[]],E=[!1,!1,!1],L=!1,z,O,R;for(z=0;z<3;++z)if(this.showContour[z]&&(L=!0,this.contourSize[z]>0&&this.contourStart[z]!==null&&this.contourEnd[z]!==null&&this.contourEnd[z]>this.contourStart[z]))for(E[z]=!0,O=this.contourStart[z];O<this.contourEnd[z];O+=this.contourSize[z])R=O*this.scene.dataScale[z],v(M[z],R);if(L){var D=[[],[],[]];for(z=0;z<3;++z)this.showContour[z]&&(D[z]=E[z]?M[z]:this.scene.contourLevels[z]);this.surface.update({levels:D})}},u.update=function(M){var E=this.scene,L=E.fullSceneLayout,z=this.surface,O=i(M),R=E.dataScale,D=M.z[0].length,H=M._ylength,B=E.contourLevels;this.data=M;var $,W,re,Q,Z=[];for($=0;$<3;$++)for(Z[$]=[],W=0;W<D;W++)Z[$][W]=[];for(W=0;W<D;W++)for(re=0;re<H;re++)Z[0][W][re]=this.getXat(W,re,M.xcalendar,L.xaxis),Z[1][W][re]=this.getYat(W,re,M.ycalendar,L.yaxis),Z[2][W][re]=this.getZat(W,re,M.zcalendar,L.zaxis);if(M.connectgaps)for(M._emptypoints=t(Z[2]),y(Z[2],M._emptypoints),M._interpolatedZ=[],W=0;W<D;W++)for(M._interpolatedZ[W]=[],re=0;re<H;re++)M._interpolatedZ[W][re]=Z[2][W][re];for($=0;$<3;$++)for(W=0;W<D;W++)for(re=0;re<H;re++)Q=Z[$][W][re],Q==null?Z[$][W][re]=NaN:Q=Z[$][W][re]*=R[$];for($=0;$<3;$++)for(W=0;W<D;W++)for(re=0;re<H;re++)Q=Z[$][W][re],Q!=null&&(this.minValues[$]>Q&&(this.minValues[$]=Q),this.maxValues[$]<Q&&(this.maxValues[$]=Q));for($=0;$<3;$++)this.objectOffset[$]=.5*(this.minValues[$]+this.maxValues[$]);for($=0;$<3;$++)for(W=0;W<D;W++)for(re=0;re<H;re++)Q=Z[$][W][re],Q!=null&&(Z[$][W][re]-=this.objectOffset[$]);var K=[o(new Float32Array(D*H),[D,H]),o(new Float32Array(D*H),[D,H]),o(new Float32Array(D*H),[D,H])];for($=0;$<3;$++)for(W=0;W<D;W++)for(re=0;re<H;re++)K[$].set(W,re,Z[$][W][re]);Z=[];var le={colormap:O,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!M.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:M.opacityscale,opacity:M.opacity},fe=r(M);if(le.intensityBounds=[fe.min,fe.max],M.surfacecolor){var ue=o(new Float32Array(D*H),[D,H]);for(W=0;W<D;W++)for(re=0;re<H;re++)ue.set(W,re,M.surfacecolor[re][W]);K.push(ue)}else le.intensityBounds[0]*=R[2],le.intensityBounds[1]*=R[2];(S<K[0].shape[0]||S<K[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(K[0].shape[0],0),this.dataScaleY=this.estimateScale(K[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(K)),M.surfacecolor&&(le.intensity=K.pop());var V=[!0,!0,!0],j=["x","y","z"];for($=0;$<3;++$){var ee=M.contours[j[$]];V[$]=ee.highlight,le.showContour[$]=ee.show||ee.highlight,le.showContour[$]&&(le.contourProject[$]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[$]=!0,le.levels[$]=B[$],z.highlightColor[$]=le.contourColor[$]=n(ee.color),ee.usecolormap?z.highlightTint[$]=le.contourTint[$]=0:z.highlightTint[$]=le.contourTint[$]=1,le.contourWidth[$]=ee.width,this.contourStart[$]=ee.start,this.contourEnd[$]=ee.end,this.contourSize[$]=ee.size):(this.showContour[$]=!1,this.contourStart[$]=null,this.contourEnd[$]=null,this.contourSize[$]=0),ee.highlight&&(le.dynamicColor[$]=n(ee.highlightcolor),le.dynamicWidth[$]=ee.highlightwidth))}l(O)&&(le.vertexColor=!0),le.objectOffset=this.objectOffset,le.coords=K,z.update(le),z.visible=M.visible,z.enableDynamic=V,z.enableHighlight=V,z.snapToData=!0,"lighting"in M&&(z.ambientLight=M.lighting.ambient,z.diffuseLight=M.lighting.diffuse,z.specularLight=M.lighting.specular,z.roughness=M.lighting.roughness,z.fresnel=M.lighting.fresnel),"lightposition"in M&&(z.lightPosition=[M.lightposition.x,M.lightposition.y,M.lightposition.z])},u.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function C(M,E){var L=M.glplot.gl,z=s({gl:L}),O=new f(M,z,E.uid);return z._trace=O,O.update(E),M.glplot.add(z),O}I.exports=C},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1064:[function(e,I,F){var s=e("../../registry"),o=e("../../lib"),h=e("../../components/colorscale/defaults"),y=e("./attributes"),t=.1;function a(u,l){for(var m=[],d=32,b=0;b<d;b++){var g=b/(d-1),_=l+(1-l)*(1-Math.pow(Math.sin(u*g*Math.PI),2));m.push([g,Math.max(0,Math.min(1,_))])}return m}function i(u){var l=0;if(!Array.isArray(u)||u.length<2||!u[0]||!u[u.length-1]||+u[0][0]!=0||+u[u.length-1][0]!=1)return!1;for(var m=0;m<u.length;m++){var d=u[m];if(d.length!==2||+d[0]<l)return!1;l=+d[0]}return!0}function n(u,l,m,d){var b,g;function _(M,E){return o.coerce(u,l,y,M,E)}var p=_("x"),A=_("y"),c=_("z");if(!c||!c.length||(p?p.length<1:!1)||(A?A.length<1:!1)){l.visible=!1;return}l._xlength=Array.isArray(p)&&o.isArrayOrTypedArray(p[0])?c.length:c[0].length,l._ylength=c.length;var S=s.getComponentMethod("calendars","handleTraceDefaults");S(u,l,["x","y","z"],d),_("text"),_("hovertext"),_("hovertemplate"),_("xhoverformat"),_("yhoverformat"),_("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(M){_(M)});var T=_("surfacecolor"),x=["x","y","z"];for(b=0;b<3;++b){var w="contours."+x[b],v=_(w+".show"),C=_(w+".highlight");if(v||C)for(g=0;g<3;++g)_(w+".project."+x[g]);v&&(_(w+".color"),_(w+".width"),_(w+".usecolormap")),C&&(_(w+".highlightcolor"),_(w+".highlightwidth")),_(w+".start"),_(w+".end"),_(w+".size")}T||(f(u,"zmin","cmin"),f(u,"zmax","cmax"),f(u,"zauto","cauto")),h(u,l,d,_,{prefix:"",cLetter:"c"}),r(u,l,d,_),l._length=null}function r(u,l,m,d){var b=d("opacityscale");b==="max"?l.opacityscale=[[0,t],[1,1]]:b==="min"?l.opacityscale=[[0,1],[1,t]]:b==="extremes"?l.opacityscale=a(1,t):i(b)||(l.opacityscale=void 0)}function f(u,l,m){l in u&&!(m in u)&&(u[m]=u[l])}I.exports={supplyDefaults:n,opacityscaleDefaults:r}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1061}],1065:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),moduleType:"trace",name:"surface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1061,"./calc":1062,"./convert":1063,"./defaults":1064}],1066:[function(e,I,F){var s=e("../../components/annotations/attributes"),o=e("../../lib/extend").extendFlat,h=e("../../plot_api/edit_types").overrideAll,y=e("../../plots/font_attributes"),t=e("../../plots/domain").attributes,a=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,i=I.exports=h({domain:t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:o({},s.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:o({},y({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:o({},s.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:o({},y({arrayOk:!0}))}},"calc","from-root");i.transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1067:[function(e,I,F){var s=e("../../plots/get_data").getModuleCalcData,o=e("./plot"),h="table";F.name=h,F.plot=function(y){var t=s(y.calcdata,h)[0];t.length&&o(y,t)},F.clean=function(y,t,a,i){var n=i._has&&i._has(h),r=t._has&&t._has(h);n&&!r&&i._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1074}],1068:[function(e,I,F){var s=e("../../lib/gup").wrap;I.exports=function(){return s({})}},{"../../lib/gup":500}],1069:[function(e,I,F){I.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1070:[function(e,I,F){var s=e("./constants"),o=e("../../lib/extend").extendFlat,h=e("fast-isnumeric");I.exports=function(m,d){var b=a(d.cells.values),g=function(W){return W.slice(d.header.values.length,W.length)},_=a(d.header.values);_.length&&!_[0].length&&(_[0]=[""],_=a(_));var p=_.concat(g(b).map(function(){return i((_[0]||[""]).length)})),A=d.domain,c=Math.floor(m._fullLayout._size.w*(A.x[1]-A.x[0])),S=Math.floor(m._fullLayout._size.h*(A.y[1]-A.y[0])),T=d.header.values.length?p[0].map(function(){return d.header.height}):[s.emptyHeaderHeight],x=b.length?b[0].map(function(){return d.cells.height}):[],w=T.reduce(t,0),v=S-w,C=v+s.uplift,M=f(x,C),E=f(T,w),L=r(E,[]),z=r(M,L),O={},R=d._fullInput.columnorder.concat(g(b.map(function(W,re){return re}))),D=p.map(function(W,re){var Q=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(re,d.columnwidth.length-1)]:d.columnwidth;return h(Q)?Number(Q):1}),H=D.reduce(t,0);D=D.map(function(W){return W/H*c});var B=Math.max(y(d.header.line.width),y(d.cells.line.width)),$={key:d.uid+m._context.staticPlot,translateX:A.x[0]*m._fullLayout._size.w,translateY:m._fullLayout._size.h*(1-A.y[1]),size:m._fullLayout._size,width:c,maxLineWidth:B,height:S,columnOrder:R,groupHeight:S,rowBlocks:z,headerRowBlocks:L,scrollY:0,cells:o({},d.cells,{values:b}),headerCells:o({},d.header,{values:p}),gdColumns:p.map(function(W){return W[0]}),gdColumnsOriginalOrder:p.map(function(W){return W[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(W,re){var Q=O[W];O[W]=(Q||0)+1;var Z=W+"__"+O[W];return{key:Z,label:W,specIndex:re,xIndex:R[re],xScale:n,x:void 0,calcdata:void 0,columnWidth:D[re]}})};return $.columns.forEach(function(W){W.calcdata=$,W.x=n(W)}),$};function y(l){if(Array.isArray(l)){for(var m=0,d=0;d<l.length;d++)m=Math.max(m,y(l[d]));return m}return l}function t(l,m){return l+m}function a(l){var m=l.slice(),d=1/0,b=0,g;for(g=0;g<m.length;g++)Array.isArray(m[g])||(m[g]=[m[g]]),d=Math.min(d,m[g].length),b=Math.max(b,m[g].length);if(d!==b)for(g=0;g<m.length;g++){var _=b-m[g].length;_&&(m[g]=m[g].concat(i(_)))}return m}function i(l){for(var m=new Array(l),d=0;d<l;d++)m[d]="";return m}function n(l){return l.calcdata.columns.reduce(function(m,d){return d.xIndex<l.xIndex?m+d.columnWidth:m},0)}function r(l,m){var d=Object.keys(l);return d.map(function(b){return o({},l[b],{auxiliaryBlocks:m})})}function f(l,m){for(var d={},b,g=0,_=0,p=u(),A=0,c=0,S=0;S<l.length;S++)b=l[S],p.rows.push({rowIndex:S,rowHeight:b}),_+=b,(_>=m||S===l.length-1)&&(d[g]=p,p.key=c++,p.firstRowIndex=A,p.lastRowIndex=S,p=u(),g+=_,A=S+1,_=0);return d}function u(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":493,"./constants":1069,"fast-isnumeric":190}],1071:[function(e,I,F){var s=e("../../lib/extend").extendFlat;F.splitToPanels=function(h){var y=[0,0],t=s({},h,{key:"header",type:"header",page:0,prevPages:y,currentRepaint:[null,null],dragHandle:!0,values:h.calcdata.headerCells.values[h.specIndex],rowBlocks:h.calcdata.headerRowBlocks,calcdata:s({},h.calcdata,{cells:h.calcdata.headerCells})}),a=s({},h,{key:"cells1",type:"cells",page:0,prevPages:y,currentRepaint:[null,null],dragHandle:!1,values:h.calcdata.cells.values[h.specIndex],rowBlocks:h.calcdata.rowBlocks}),i=s({},h,{key:"cells2",type:"cells",page:1,prevPages:y,currentRepaint:[null,null],dragHandle:!1,values:h.calcdata.cells.values[h.specIndex],rowBlocks:h.calcdata.rowBlocks});return[a,i,t]},F.splitToCells=function(h){var y=o(h);return(h.values||[]).slice(y[0],y[1]).map(function(t,a){var i=typeof t=="string"&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+i,key:y[0]+a,column:h,calcdata:h.calcdata,page:h.page,rowBlocks:h.rowBlocks,value:t}})};function o(h){var y=h.rowBlocks[h.page],t=y?y.rows[0].rowIndex:0,a=y?t+y.rows.length:0;return[t,a]}},{"../../lib/extend":493}],1072:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("../../plots/domain").defaults;function y(t,a){for(var i=t.columnorder||[],n=t.header.values.length,r=i.slice(0,n),f=r.slice().sort(function(m,d){return m-d}),u=r.map(function(m){return f.indexOf(m)}),l=u.length;l<n;l++)u.push(l);a("columnorder",u)}I.exports=function(a,i,n,r){function f(u,l){return s.coerce(a,i,o,u,l)}h(i,r,f),f("columnwidth"),f("header.values"),f("header.format"),f("header.align"),f("header.prefix"),f("header.suffix"),f("header.height"),f("header.line.width"),f("header.line.color"),f("header.fill.color"),s.coerceFont(f,"header.font",s.extendFlat({},r.font)),y(i,f),f("cells.values"),f("cells.format"),f("cells.align"),f("cells.prefix"),f("cells.suffix"),f("cells.height"),f("cells.line.width"),f("cells.line.color"),f("cells.fill.color"),s.coerceFont(f,"cells.font",s.extendFlat({},r.font)),i._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1066}],1073:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"table",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1066,"./base_plot":1067,"./calc":1068,"./defaults":1072,"./plot":1074}],1074:[function(e,I,F){var s=e("./constants"),o=e("@plotly/d3"),h=e("../../lib"),y=h.numberFormat,t=e("../../lib/gup"),a=e("../../components/drawing"),i=e("../../lib/svg_text_utils"),n=e("../../lib").raiseToTop,r=e("../../lib").strTranslate,f=e("../../lib").cancelTransition,u=e("./data_preparation_helper"),l=e("./data_split_helpers"),m=e("../../components/color");I.exports=function(ie,ne){var oe=!ie._context.staticPlot,se=ie._fullLayout._paper.selectAll("."+s.cn.table).data(ne.map(function(ze){var De=t.unwrap(ze),je=De.trace;return u(ie,je)}),t.keyFun);se.exit().remove(),se.enter().append("g").classed(s.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),se.attr("width",function(ze){return ze.width+ze.size.l+ze.size.r}).attr("height",function(ze){return ze.height+ze.size.t+ze.size.b}).attr("transform",function(ze){return r(ze.translateX,ze.translateY)});var me=se.selectAll("."+s.cn.tableControlView).data(t.repeat,t.keyFun),ce=me.enter().append("g").classed(s.cn.tableControlView,!0).style("box-sizing","content-box");if(oe){var pe="onwheel"in document?"wheel":"mousewheel";ce.on("mousemove",function(ze){me.filter(function(De){return ze===De}).call(p,ie)}).on(pe,function(ze){if(!ze.scrollbarState.wheeling){ze.scrollbarState.wheeling=!0;var De=ze.scrollY+o.event.deltaY,je=Q(ie,me,null,De)(ze);je||(o.event.stopPropagation(),o.event.preventDefault()),ze.scrollbarState.wheeling=!1}}).call(p,ie,!0)}me.attr("transform",function(ze){return r(ze.size.l,ze.size.t)});var xe=me.selectAll("."+s.cn.scrollBackground).data(t.repeat,t.keyFun);xe.enter().append("rect").classed(s.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function(ze){return ze.width}).attr("height",function(ze){return ze.height}),me.each(function(ze){a.setClipUrl(o.select(this),b(ie,ze),ie)});var Se=me.selectAll("."+s.cn.yColumn).data(function(ze){return ze.columns},t.keyFun);Se.enter().append("g").classed(s.cn.yColumn,!0),Se.exit().remove(),Se.attr("transform",function(ze){return r(ze.x,0)}),oe&&Se.call(o.behavior.drag().origin(function(ze){var De=o.select(this);return D(De,ze,-s.uplift),n(this),ze.calcdata.columnDragInProgress=!0,p(me.filter(function(je){return ze.calcdata.key===je.key}),ie),ze}).on("drag",function(ze){var De=o.select(this),je=function($t){return(ze===$t?o.event.x:$t.x)+$t.columnWidth/2};ze.x=Math.max(-s.overdrag,Math.min(ze.calcdata.width+s.overdrag-ze.columnWidth,o.event.x));var dt=_(Se).filter(function($t){return $t.calcdata.key===ze.calcdata.key}),Et=dt.sort(function($t,wt){return je($t)-je(wt)});Et.forEach(function($t,wt){$t.xIndex=wt,$t.x=ze===$t?$t.x:$t.xScale($t)}),Se.filter(function($t){return ze!==$t}).transition().ease(s.transitionEase).duration(s.transitionDuration).attr("transform",function($t){return r($t.x,0)}),De.call(f).attr("transform",r(ze.x,-s.uplift))}).on("dragend",function(ze){var De=o.select(this),je=ze.calcdata;ze.x=ze.xScale(ze),ze.calcdata.columnDragInProgress=!1,D(De,ze,0),O(ie,je,je.columns.map(function(dt){return dt.xIndex}))})),Se.each(function(ze){a.setClipUrl(o.select(this),g(ie,ze),ie)});var Ae=Se.selectAll("."+s.cn.columnBlock).data(l.splitToPanels,t.keyFun);Ae.enter().append("g").classed(s.cn.columnBlock,!0).attr("id",function(ze){return ze.key}),Ae.style("cursor",function(ze){return ze.dragHandle?"ew-resize":ze.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Ce=Ae.filter(B),Ee=Ae.filter(H);oe&&Ee.call(o.behavior.drag().origin(function(ze){return o.event.stopPropagation(),ze}).on("drag",Q(ie,me,-1)).on("dragend",function(){})),A(ie,me,Ce,Ae),A(ie,me,Ee,Ae);var Oe=me.selectAll("."+s.cn.scrollAreaClip).data(t.repeat,t.keyFun);Oe.enter().append("clipPath").classed(s.cn.scrollAreaClip,!0).attr("id",function(ze){return b(ie,ze)});var _e=Oe.selectAll("."+s.cn.scrollAreaClipRect).data(t.repeat,t.keyFun);_e.enter().append("rect").classed(s.cn.scrollAreaClipRect,!0).attr("x",-s.overdrag).attr("y",-s.uplift).attr("fill","none"),_e.attr("width",function(ze){return ze.width+2*s.overdrag}).attr("height",function(ze){return ze.height+s.uplift});var Re=Se.selectAll("."+s.cn.columnBoundary).data(t.repeat,t.keyFun);Re.enter().append("g").classed(s.cn.columnBoundary,!0);var Ve=Se.selectAll("."+s.cn.columnBoundaryClippath).data(t.repeat,t.keyFun);Ve.enter().append("clipPath").classed(s.cn.columnBoundaryClippath,!0),Ve.attr("id",function(ze){return g(ie,ze)});var Je=Ve.selectAll("."+s.cn.columnBoundaryRect).data(t.repeat,t.keyFun);Je.enter().append("rect").classed(s.cn.columnBoundaryRect,!0).attr("fill","none"),Je.attr("width",function(ze){return ze.columnWidth+2*d(ze)}).attr("height",function(ze){return ze.calcdata.height+2*d(ze)+s.uplift}).attr("x",function(ze){return-d(ze)}).attr("y",function(ze){return-d(ze)}),re(null,Ee,me)};function d(J){return Math.ceil(J.calcdata.maxLineWidth/2)}function b(J,ie){return"clip"+J._fullLayout._uid+"_scrollAreaBottomClip_"+ie.key}function g(J,ie){return"clip"+J._fullLayout._uid+"_columnBoundaryClippath_"+ie.calcdata.key+"_"+ie.specIndex}function _(J){return[].concat.apply([],J.map(function(ie){return ie})).map(function(ie){return ie.__data__})}function p(J,ie,ne){function oe(Se){var Ae=Se.rowBlocks;return V(Ae,Ae.length-1)+(Ae.length?j(Ae[Ae.length-1],1/0):1)}var se=J.selectAll("."+s.cn.scrollbarKit).data(t.repeat,t.keyFun);se.enter().append("g").classed(s.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),se.each(function(Se){var Ae=Se.scrollbarState;Ae.totalHeight=oe(Se),Ae.scrollableAreaHeight=Se.groupHeight-$(Se),Ae.currentlyVisibleHeight=Math.min(Ae.totalHeight,Ae.scrollableAreaHeight),Ae.ratio=Ae.currentlyVisibleHeight/Ae.totalHeight,Ae.barLength=Math.max(Ae.ratio*Ae.currentlyVisibleHeight,s.goldenRatio*s.scrollbarWidth),Ae.barWiggleRoom=Ae.currentlyVisibleHeight-Ae.barLength,Ae.wiggleRoom=Math.max(0,Ae.totalHeight-Ae.scrollableAreaHeight),Ae.topY=Ae.barWiggleRoom===0?0:Se.scrollY/Ae.wiggleRoom*Ae.barWiggleRoom,Ae.bottomY=Ae.topY+Ae.barLength,Ae.dragMultiplier=Ae.wiggleRoom/Ae.barWiggleRoom}).attr("transform",function(Se){var Ae=Se.width+s.scrollbarWidth/2+s.scrollbarOffset;return r(Ae,$(Se))});var me=se.selectAll("."+s.cn.scrollbar).data(t.repeat,t.keyFun);me.enter().append("g").classed(s.cn.scrollbar,!0);var ce=me.selectAll("."+s.cn.scrollbarSlider).data(t.repeat,t.keyFun);ce.enter().append("g").classed(s.cn.scrollbarSlider,!0),ce.attr("transform",function(Se){return r(0,Se.scrollbarState.topY||0)});var pe=ce.selectAll("."+s.cn.scrollbarGlyph).data(t.repeat,t.keyFun);pe.enter().append("line").classed(s.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",s.scrollbarWidth).attr("stroke-linecap","round").attr("y1",s.scrollbarWidth/2),pe.attr("y2",function(Se){return Se.scrollbarState.barLength-s.scrollbarWidth/2}).attr("stroke-opacity",function(Se){return Se.columnDragInProgress||!Se.scrollbarState.barWiggleRoom||ne?0:.4}),pe.transition().delay(0).duration(0),pe.transition().delay(s.scrollbarHideDelay).duration(s.scrollbarHideDuration).attr("stroke-opacity",0);var xe=me.selectAll("."+s.cn.scrollbarCaptureZone).data(t.repeat,t.keyFun);xe.enter().append("line").classed(s.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",s.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Se){var Ae=o.event.y,Ce=this.getBoundingClientRect(),Ee=Se.scrollbarState,Oe=Ae-Ce.top,_e=o.scale.linear().domain([0,Ee.scrollableAreaHeight]).range([0,Ee.totalHeight]).clamp(!0);Ee.topY<=Oe&&Oe<=Ee.bottomY||Q(ie,J,null,_e(Oe-Ee.barLength/2))(Se)}).call(o.behavior.drag().origin(function(Se){return o.event.stopPropagation(),Se.scrollbarState.scrollbarScrollInProgress=!0,Se}).on("drag",Q(ie,J)).on("dragend",function(){})),xe.attr("y2",function(Se){return Se.scrollbarState.scrollableAreaHeight}),ie._context.staticPlot&&(pe.remove(),xe.remove())}function A(J,ie,ne,oe){var se=c(ne),me=S(se);v(me);var ce=T(me);M(ce);var pe=w(me),xe=x(pe);C(xe),E(xe,ie,oe,J),ue(me)}function c(J){var ie=J.selectAll("."+s.cn.columnCells).data(t.repeat,t.keyFun);return ie.enter().append("g").classed(s.cn.columnCells,!0),ie.exit().remove(),ie}function S(J){var ie=J.selectAll("."+s.cn.columnCell).data(l.splitToCells,function(ne){return ne.keyWithinBlock});return ie.enter().append("g").classed(s.cn.columnCell,!0),ie.exit().remove(),ie}function T(J){var ie=J.selectAll("."+s.cn.cellRect).data(t.repeat,function(ne){return ne.keyWithinBlock});return ie.enter().append("rect").classed(s.cn.cellRect,!0),ie}function x(J){var ie=J.selectAll("."+s.cn.cellText).data(t.repeat,function(ne){return ne.keyWithinBlock});return ie.enter().append("text").classed(s.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){o.event.stopPropagation()}),ie}function w(J){var ie=J.selectAll("."+s.cn.cellTextHolder).data(t.repeat,function(ne){return ne.keyWithinBlock});return ie.enter().append("g").classed(s.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}function v(J){J.each(function(ie,ne){var oe=ie.calcdata.cells.font,se=ie.column.specIndex,me={size:R(oe.size,se,ne),color:R(oe.color,se,ne),family:R(oe.family,se,ne)};ie.rowNumber=ie.key,ie.align=R(ie.calcdata.cells.align,se,ne),ie.cellBorderWidth=R(ie.calcdata.cells.line.width,se,ne),ie.font=me})}function C(J){J.each(function(ie){a.font(o.select(this),ie.font)})}function M(J){J.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var ne=o.select(this);m.stroke(ne,R(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),m.fill(ne,R(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})}function E(J,ie,ne,oe){J.text(function(se){var me=se.column.specIndex,ce=se.rowNumber,pe=se.value,xe=typeof pe=="string",Se=xe&&pe.match(/<br>/i),Ae=!xe||Se;se.mayHaveMarkup=xe&&pe.match(/[<&>]/);var Ce=L(pe);se.latex=Ce;var Ee=Ce?"":R(se.calcdata.cells.prefix,me,ce)||"",Oe=Ce?"":R(se.calcdata.cells.suffix,me,ce)||"",_e=Ce?null:R(se.calcdata.cells.format,me,ce)||null,Re=Ee+(_e?y(_e)(se.value):se.value)+Oe,Ve;se.wrappingNeeded=!se.wrapped&&!Ae&&!Ce&&(Ve=z(Re)),se.cellHeightMayIncrease=Se||Ce||se.mayHaveMarkup||(Ve===void 0?z(Re):Ve),se.needsConvertToTspans=se.mayHaveMarkup||se.wrappingNeeded||se.latex;var Je;if(se.wrappingNeeded){var ze=s.wrapSplitCharacter===" "?Re.replace(/<a href=/ig,"<a_href="):Re,De=ze.split(s.wrapSplitCharacter),je=s.wrapSplitCharacter===" "?De.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):De;se.fragments=je.map(function(dt){return{text:dt,width:null}}),se.fragments.push({fragment:s.wrapSpacer,width:null}),Je=je.join(s.lineBreaker)+s.lineBreaker+s.wrapSpacer}else delete se.fragments,Je=Re;return Je}).attr("dy",function(se){return se.needsConvertToTspans?0:"0.75em"}).each(function(se){var me=this,ce=o.select(me),pe=se.wrappingNeeded?K:le;se.needsConvertToTspans?i.convertToTspans(ce,oe,pe(ne,me,ie,oe,se)):o.select(me.parentNode).attr("transform",function(xe){return r(fe(xe),s.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function L(J){return typeof J=="string"&&J.match(s.latexCheck)}function z(J){return J.indexOf(s.wrapSplitCharacter)!==-1}function O(J,ie,ne){var oe=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(se,me){return ne[oe.indexOf(se)]-ne[oe.indexOf(me)]}),ie.columnorder=ne,J.emit("plotly_restyle")}function R(J,ie,ne){if(Array.isArray(J)){var oe=J[Math.min(ie,J.length-1)];return Array.isArray(oe)?oe[Math.min(ne,oe.length-1)]:oe}else return J}function D(J,ie,ne){J.transition().ease(s.releaseTransitionEase).duration(s.releaseTransitionDuration).attr("transform",r(ie.x,ne))}function H(J){return J.type==="cells"}function B(J){return J.type==="header"}function $(J){var ie=J.rowBlocks.length?J.rowBlocks[0].auxiliaryBlocks:[];return ie.reduce(function(ne,oe){return ne+j(oe,1/0)},0)}function W(J,ie,ne){for(var oe=[],se=0,me=0;me<J.length;me++){for(var ce=J[me],pe=ce.rows,xe=0,Se=0;Se<pe.length;Se++)xe+=pe[Se].rowHeight;ce.allRowsHeight=xe;var Ae=se+xe,Ce=ie,Ee=Ce+ne;Ce<Ae&&Ee>se&&oe.push(me),se+=xe}return oe}function re(J,ie,ne){var oe=_(ie)[0];if(oe!==void 0){var se=oe.rowBlocks,me=oe.calcdata,ce=V(se,se.length),pe=oe.calcdata.groupHeight-$(oe),xe=me.scrollY=Math.max(0,Math.min(ce-pe,me.scrollY)),Se=W(se,xe,pe);Se.length===1&&(Se[0]===se.length-1?Se.unshift(Se[0]-1):Se.push(Se[0]+1)),Se[0]%2&&Se.reverse(),ie.each(function(Ae,Ce){Ae.page=Se[Ce],Ae.scrollY=xe}),ie.attr("transform",function(Ae){var Ce=V(Ae.rowBlocks,Ae.page)-Ae.scrollY;return r(0,Ce)}),J&&(Z(J,ne,ie,Se,oe.prevPages,oe,0),Z(J,ne,ie,Se,oe.prevPages,oe,1),p(ne,J))}}function Q(J,ie,ne,oe){return function(me){var ce=me.calcdata?me.calcdata:me,pe=ie.filter(function(Ce){return ce.key===Ce.key}),xe=ne||ce.scrollbarState.dragMultiplier,Se=ce.scrollY;ce.scrollY=oe===void 0?ce.scrollY+xe*o.event.dy:oe;var Ae=pe.selectAll("."+s.cn.yColumn).selectAll("."+s.cn.columnBlock).filter(H);return re(J,Ae,pe),ce.scrollY===Se}}function Z(J,ie,ne,oe,se,me,ce){var pe=oe[ce]!==se[ce];pe&&(clearTimeout(me.currentRepaint[ce]),me.currentRepaint[ce]=setTimeout(function(){var xe=ne.filter(function(Se,Ae){return Ae===ce&&oe[Ae]!==se[Ae]});A(J,ie,xe,ne),se[ce]=oe[ce]}))}function K(J,ie,ne,oe){return function(){var me=o.select(ie.parentNode);me.each(function(ce){var pe=ce.fragments;me.selectAll("tspan.line").each(function(Re,Ve){pe[Ve].width=this.getComputedTextLength()});var xe=pe[pe.length-1].width,Se=pe.slice(0,-1),Ae=[],Ce,Ee,Oe=0,_e=ce.column.columnWidth-2*s.cellPad;for(ce.value="";Se.length;)Ce=Se.shift(),Ee=Ce.width+xe,Oe+Ee>_e&&(ce.value+=Ae.join(s.wrapSpacer)+s.lineBreaker,Ae=[],Oe=0),Ae.push(Ce.text),Oe+=Ee;Oe&&(ce.value+=Ae.join(s.wrapSpacer)),ce.wrapped=!0}),me.selectAll("tspan.line").remove(),E(me.select("."+s.cn.cellText),ne,J,oe),o.select(ie.parentNode.parentNode).call(ue)}}function le(J,ie,ne,oe,se){return function(){if(!se.settledY){var ce=o.select(ie.parentNode),pe=q(se),xe=se.key-pe.firstRowIndex,Se=pe.rows[xe].rowHeight,Ae=se.cellHeightMayIncrease?ie.parentNode.getBoundingClientRect().height+2*s.cellPad:Se,Ce=Math.max(Ae,Se),Ee=Ce-pe.rows[xe].rowHeight;Ee&&(pe.rows[xe].rowHeight=Ce,J.selectAll("."+s.cn.columnCell).call(ue),re(null,J.filter(H),0),p(ne,oe,!0)),ce.attr("transform",function(){var Oe=this,_e=Oe.parentNode,Re=_e.getBoundingClientRect(),Ve=o.select(Oe.parentNode).select("."+s.cn.cellRect).node().getBoundingClientRect(),Je=Oe.transform.baseVal.consolidate(),ze=Ve.top-Re.top+(Je?Je.matrix.f:s.cellPad);return r(fe(se,o.select(Oe.parentNode).select("."+s.cn.cellTextHolder).node().getBoundingClientRect().width),ze)}),se.settledY=!0}}}function fe(J,ie){switch(J.align){case"left":return s.cellPad;case"right":return J.column.columnWidth-(ie||0)-s.cellPad;case"center":return(J.column.columnWidth-(ie||0))/2;default:return s.cellPad}}function ue(J){J.attr("transform",function(ie){var ne=ie.rowBlocks[0].auxiliaryBlocks.reduce(function(ce,pe){return ce+j(pe,1/0)},0),oe=q(ie),se=j(oe,ie.key),me=se+ne;return r(0,me)}).selectAll("."+s.cn.cellRect).attr("height",function(ie){return X(q(ie),ie.key).rowHeight})}function V(J,ie){for(var ne=0,oe=ie-1;oe>=0;oe--)ne+=ee(J[oe]);return ne}function j(J,ie){for(var ne=0,oe=0;oe<J.rows.length&&J.rows[oe].rowIndex<ie;oe++)ne+=J.rows[oe].rowHeight;return ne}function ee(J){var ie=J.allRowsHeight;if(ie!==void 0)return ie;for(var ne=0,oe=0;oe<J.rows.length;oe++)ne+=J.rows[oe].rowHeight;return J.allRowsHeight=ne,ne}function q(J){return J.rowBlocks[J.page]}function X(J,ie){return J.rows[ie-J.firstRowIndex]}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1069,"./data_preparation_helper":1070,"./data_split_helpers":1071,"@plotly/d3":58}],1075:[function(e,I,F){var s=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,h=e("../../components/colorscale/attributes"),y=e("../../plots/domain").attributes,t=e("../pie/attributes"),a=e("../sunburst/attributes"),i=e("./constants"),n=e("../../lib/extend").extendFlat;I.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:n({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},h("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:n({},t.textfont,{}),editType:"calc"},text:t.text,textinfo:a.textinfo,texttemplate:o({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:a.hoverinfo,hovertemplate:s({},{keys:i.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:n({},t.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:t.sort,root:a.root,domain:y({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"./constants":1078}],1076:[function(e,I,F){var s=e("../../plots/plots");F.name="treemap",F.plot=function(o,h,y,t){s.plotBasePlot(F.name,o,h,y,t)},F.clean=function(o,h,y,t){s.cleanBasePlot(F.name,o,h,y,t)}},{"../../plots/plots":619}],1077:[function(e,I,F){var s=e("../sunburst/calc");F.calc=function(o,h){return s.calc(o,h)},F.crossTraceCalc=function(o){return s._runCrossTraceCalc("treemap",o)}},{"../sunburst/calc":1051}],1078:[function(e,I,F){I.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1079:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("../../components/color"),y=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,a=e("../bar/constants").TEXTPAD,i=e("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;I.exports=function(u,l,m,d){function b(E,L){return s.coerce(u,l,o,E,L)}var g=b("labels"),_=b("parents");if(!g||!g.length||!_||!_.length){l.visible=!1;return}var p=b("values");p&&p.length?b("branchvalues"):b("count"),b("level"),b("maxdepth");var A=b("tiling.packing");A==="squarify"&&b("tiling.squarifyratio"),b("tiling.flip"),b("tiling.pad");var c=b("text");b("texttemplate"),l.texttemplate||b("textinfo",Array.isArray(c)?"text+label":"label"),b("hovertext"),b("hovertemplate");var S=b("pathbar.visible"),T="auto";t(u,l,d,b,T,{hasPathbar:S,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("textposition");var x=l.textposition.indexOf("bottom")!==-1,w=b("marker.line.width");w&&b("marker.line.color",d.paper_bgcolor);var v=b("marker.colors"),C=l._hasColorscale=n(u,"marker","colors")||(u.marker||{}).coloraxis;C?r(u,l,d,b,{prefix:"marker.",cLetter:"c"}):b("marker.depthfade",!(v||[]).length);var M=l.textfont.size*2;b("marker.pad.t",x?M/4:M),b("marker.pad.l",M/4),b("marker.pad.r",M/4),b("marker.pad.b",x?M:M/4),l._hovered={marker:{line:{width:2,color:h.contrast(d.paper_bgcolor)}}},S&&(b("pathbar.thickness",l.pathbar.textfont.size+2*a),b("pathbar.side"),b("pathbar.edgeshape")),b("sort"),b("root.color"),y(l,d,b),l._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1075}],1080:[function(e,I,F){var s=e("@plotly/d3"),o=e("../sunburst/helpers"),h=e("../bar/uniform_text"),y=h.clearMinTextSize,t=e("../bar/style").resizeText,a=e("./plot_one");I.exports=function(n,r,f,u,l){var m=l.type,d=l.drawDescendants,b=n._fullLayout,g=b["_"+m+"layer"],_,p,A=!f;if(y(m,b),_=g.selectAll("g.trace."+m).data(r,function(S){return S[0].trace.uid}),_.enter().append("g").classed("trace",!0).classed(m,!0),_.order(),!b.uniformtext.mode&&o.hasTransition(f)){u&&(p=u());var c=s.transition().duration(f.duration).ease(f.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()});c.each(function(){g.selectAll("g.trace").each(function(S){a(n,S,this,f,d)})})}else _.each(function(S){a(n,S,this,f,d)}),b.uniformtext.mode&&t(n,g.selectAll(".trace"),m);A&&_.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./plot_one":1089,"@plotly/d3":58}],1081:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../components/drawing"),y=e("../../lib/svg_text_utils"),t=e("./partition"),a=e("./style").styleOne,i=e("./constants"),n=e("../sunburst/helpers"),r=e("../sunburst/fx"),f=!0;I.exports=function(l,m,d,b,g){var _=g.barDifY,p=g.width,A=g.height,c=g.viewX,S=g.viewY,T=g.pathSlice,x=g.toMoveInsideSlice,w=g.strTransform,v=g.hasTransition,C=g.handleSlicesExit,M=g.makeUpdateSliceInterpolator,E=g.makeUpdateTextInterpolator,L={},z=l._fullLayout,O=m[0],R=O.trace,D=O.hierarchy,H=p/R._entryDepth,B=n.listPath(d.data,"id"),$=t(D.copy(),[p,A],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();$=$.filter(function(re){var Q=B.indexOf(re.data.id);return Q===-1?!1:(re.x0=H*Q,re.x1=H*(Q+1),re.y0=_,re.y1=_+A,re.onPathbar=!0,!0)}),$.reverse(),b=b.data($,n.getPtId),b.enter().append("g").classed("pathbar",!0),C(b,f,L,[p,A],T),b.order();var W=b;v&&(W=W.transition().each("end",function(){var re=s.select(this);n.setSliceCursor(re,l,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(re){re._x0=c(re.x0),re._x1=c(re.x1),re._y0=S(re.y0),re._y1=S(re.y1),re._hoverX=c(re.x1-Math.min(p,A)/2),re._hoverY=S(re.y1-A/2);var Q=s.select(this),Z=o.ensureSingle(Q,"path","surface",function(ue){ue.style("pointer-events","all")});v?Z.transition().attrTween("d",function(ue){var V=M(ue,f,L,[p,A]);return function(j){return T(V(j))}}):Z.attr("d",T),Q.call(r,d,l,m,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,l,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:l._transitioning}),Z.call(a,re,R,{hovered:!1}),re._text=(n.getPtLabel(re)||"").split("<br>").join(" ")||"";var K=o.ensureSingle(Q,"g","slicetext"),le=o.ensureSingle(K,"text","",function(ue){ue.attr("data-notex",1)}),fe=o.ensureUniformFontSize(l,n.determineTextFont(R,re,z.font,{onPathbar:!0}));le.text(re._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(h.font,fe).call(y.convertToTspans,l),re.textBB=h.bBox(le.node()),re.transform=x(re,{fontSize:fe.size,onPathbar:!0}),re.transform.fontSize=fe.size,v?le.transition().attrTween("transform",function(ue){var V=E(ue,f,L,[p,A]);return function(j){return w(V(j))}}):le.attr("transform",w(re))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1082:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../components/drawing"),y=e("../../lib/svg_text_utils"),t=e("./partition"),a=e("./style").styleOne,i=e("./constants"),n=e("../sunburst/helpers"),r=e("../sunburst/fx"),f=e("../sunburst/plot").formatSliceLabel,u=!1;I.exports=function(m,d,b,g,_){var p=_.width,A=_.height,c=_.viewX,S=_.viewY,T=_.pathSlice,x=_.toMoveInsideSlice,w=_.strTransform,v=_.hasTransition,C=_.handleSlicesExit,M=_.makeUpdateSliceInterpolator,E=_.makeUpdateTextInterpolator,L=_.prevEntry,z={},O=m._fullLayout,R=d[0],D=R.trace,H=D.textposition.indexOf("left")!==-1,B=D.textposition.indexOf("right")!==-1,$=D.textposition.indexOf("bottom")!==-1,W=!$&&!D.marker.pad.t||$&&!D.marker.pad.b,re=t(b,[p,A],{packing:D.tiling.packing,squarifyratio:D.tiling.squarifyratio,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,pad:{inner:D.tiling.pad,top:D.marker.pad.t,left:D.marker.pad.l,right:D.marker.pad.r,bottom:D.marker.pad.b}}),Q=re.descendants(),Z=1/0,K=-1/0;Q.forEach(function(j){var ee=j.depth;ee>=D._maxDepth?(j.x0=j.x1=(j.x0+j.x1)/2,j.y0=j.y1=(j.y0+j.y1)/2):(Z=Math.min(Z,ee),K=Math.max(K,ee))}),g=g.data(Q,n.getPtId),D._maxVisibleLayers=isFinite(K)?K-Z+1:0,g.enter().append("g").classed("slice",!0),C(g,u,z,[p,A],T),g.order();var le=null;if(v&&L){var fe=n.getPtId(L);g.each(function(j){le===null&&n.getPtId(j)===fe&&(le={x0:j.x0,x1:j.x1,y0:j.y0,y1:j.y1})})}var ue=function(){return le||{x0:0,x1:p,y0:0,y1:A}},V=g;return v&&(V=V.transition().each("end",function(){var j=s.select(this);n.setSliceCursor(j,m,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(j){var ee=n.isHeader(j,D);j._x0=c(j.x0),j._x1=c(j.x1),j._y0=S(j.y0),j._y1=S(j.y1),j._hoverX=c(j.x1-D.marker.pad.r),j._hoverY=S($?j.y1-D.marker.pad.b/2:j.y0+D.marker.pad.t/2);var q=s.select(this),X=o.ensureSingle(q,"path","surface",function(oe){oe.style("pointer-events","all")});v?X.transition().attrTween("d",function(oe){var se=M(oe,u,ue(),[p,A]);return function(me){return T(se(me))}}):X.attr("d",T),q.call(r,b,m,d,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,m,{isTransitioning:m._transitioning}),X.call(a,j,D,{hovered:!1}),j.x0===j.x1||j.y0===j.y1?j._text="":ee?j._text=W?"":n.getPtLabel(j)||"":j._text=f(j,b,D,d,O)||"";var J=o.ensureSingle(q,"g","slicetext"),ie=o.ensureSingle(J,"text","",function(oe){oe.attr("data-notex",1)}),ne=o.ensureUniformFontSize(m,n.determineTextFont(D,j,O.font));ie.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":H||ee?"start":"middle").call(h.font,ne).call(y.convertToTspans,m),j.textBB=h.bBox(ie.node()),j.transform=x(j,{fontSize:ne.size,isHeader:ee}),j.transform.fontSize=ne.size,v?ie.transition().attrTween("transform",function(oe){var se=E(oe,u,ue(),[p,A]);return function(me){return w(se(me))}}):ie.attr("transform",w(j))}),le}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1083:[function(e,I,F){I.exports=function s(o,h,y){var t;y.swapXY&&(t=o.x0,o.x0=o.y0,o.y0=t,t=o.x1,o.x1=o.y1,o.y1=t),y.flipX&&(t=o.x0,o.x0=h[0]-o.x1,o.x1=h[0]-t),y.flipY&&(t=o.y0,o.y0=h[1]-o.y1,o.y1=h[1]-t);var a=o.children;if(a)for(var i=0;i<a.length;i++)s(a[i],h,y)}},{}],1084:[function(e,I,F){I.exports={moduleType:"trace",name:"treemap",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1079,"./layout_attributes":1085,"./layout_defaults":1086,"./plot":1088,"./style":1090}],1085:[function(e,I,F){I.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1086:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(y,t){function a(i,n){return s.coerce(y,t,o,i,n)}a("treemapcolorway",t.colorway),a("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1085}],1087:[function(e,I,F){var s=e("d3-hierarchy"),o=e("./flip_tree");I.exports=function(t,a,i){var n=i.flipX,r=i.flipY,f=i.packing==="dice-slice",u=i.pad[r?"bottom":"top"],l=i.pad[n?"right":"left"],m=i.pad[n?"left":"right"],d=i.pad[r?"top":"bottom"],b;f&&(b=l,l=u,u=b,b=m,m=d,d=b);var g=s.treemap().tile(h(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(l).paddingRight(m).paddingTop(u).paddingBottom(d).size(f?[a[1],a[0]]:a)(t);return(f||n||r)&&o(g,a,{swapXY:f,flipX:n,flipY:r}),g};function h(y,t){switch(y){case"squarify":return s.treemapSquarify.ratio(t);case"binary":return s.treemapBinary;case"dice":return s.treemapDice;case"slice":return s.treemapSlice;default:return s.treemapSliceDice}}},{"./flip_tree":1083,"d3-hierarchy":115}],1088:[function(e,I,F){var s=e("./draw"),o=e("./draw_descendants");I.exports=function(y,t,a,i){return s(y,t,a,i,{type:"treemap",drawDescendants:o})}},{"./draw":1080,"./draw_descendants":1082}],1089:[function(e,I,F){var s=e("@plotly/d3"),o=e("d3-interpolate").interpolate,h=e("../sunburst/helpers"),y=e("../../lib"),t=e("../bar/constants").TEXTPAD,a=e("../bar/plot"),i=a.toMoveInsideBar,n=e("../bar/uniform_text"),r=n.recordMinTextSize,f=e("./constants"),u=e("./draw_ancestors");function l(m){return h.isHierarchyRoot(m)?"":h.getPtId(m)}I.exports=function(d,b,g,_,p){var A=d._fullLayout,c=b[0],S=c.trace,T=S.type,x=T==="icicle",w=c.hierarchy,v=h.findEntryWithLevel(w,S.level),C=s.select(g),M=C.selectAll("g.pathbar"),E=C.selectAll("g.slice");if(!v){M.remove(),E.remove();return}var L=h.isHierarchyRoot(v),z=!A.uniformtext.mode&&h.hasTransition(_),O=h.getMaxDepth(S),R=function(je){return je.data.depth-v.data.depth<O},D=A._size,H=S.domain,B=D.w*(H.x[1]-H.x[0]),$=D.h*(H.y[1]-H.y[0]),W=B,re=S.pathbar.thickness,Q=S.marker.line.width+f.gapWithPathbar,Z=S.pathbar.visible?S.pathbar.side.indexOf("bottom")>-1?$+Q:-(re+Q):0,K={x0:W,x1:W,y0:Z,y1:Z+re},le=function(je,dt,Et){var $t=S.tiling.pad,wt=function(St){return St-$t<=dt.x0},Ot=function(St){return St+$t>=dt.x1},Vt=function(St){return St-$t<=dt.y0},kt=function(St){return St+$t>=dt.y1};return je.x0===dt.x0&&je.x1===dt.x1&&je.y0===dt.y0&&je.y1===dt.y1?{x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1}:{x0:wt(je.x0-$t)?0:Ot(je.x0-$t)?Et[0]:je.x0,x1:wt(je.x1+$t)?0:Ot(je.x1+$t)?Et[0]:je.x1,y0:Vt(je.y0-$t)?0:kt(je.y0-$t)?Et[1]:je.y0,y1:Vt(je.y1+$t)?0:kt(je.y1+$t)?Et[1]:je.y1}},fe=null,ue={},V={},j=null,ee=function(je,dt){return dt?ue[l(je)]:V[l(je)]},q=function(je,dt,Et,$t){if(dt)return ue[l(w)]||K;var wt=V[S.level]||Et;return R(je)?le(je,wt,$t):{}};c.hasMultipleRoots&&L&&O++,S._maxDepth=O,S._backgroundColor=A.paper_bgcolor,S._entryDepth=v.data.depth,S._atRootLevel=L;var X=-B/2+D.l+D.w*(H.x[1]+H.x[0])/2,J=-$/2+D.t+D.h*(1-(H.y[1]+H.y[0])/2),ie=function(je){return X+je},ne=function(je){return J+je},oe=ne(0),se=ie(0),me=function(je){return se+je},ce=function(je){return oe+je};function pe(je,dt){return je+","+dt}var xe=me(0),Se=function(je){je.x=Math.max(xe,je.x)},Ae=S.pathbar.edgeshape,Ce=function(je){var dt=me(Math.max(Math.min(je.x0,je.x0),0)),Et=me(Math.min(Math.max(je.x1,je.x1),W)),$t=ce(je.y0),wt=ce(je.y1),Ot=re/2,Vt={},kt={};Vt.x=dt,kt.x=Et,Vt.y=kt.y=($t+wt)/2;var St={x:dt,y:$t},ot={x:Et,y:$t},ht={x:Et,y:wt},Ke={x:dt,y:wt};return Ae===">"?(St.x-=Ot,ot.x-=Ot,ht.x-=Ot,Ke.x-=Ot):Ae==="/"?(ht.x-=Ot,Ke.x-=Ot,Vt.x-=Ot/2,kt.x-=Ot/2):Ae==="\\"?(St.x-=Ot,ot.x-=Ot,Vt.x-=Ot/2,kt.x-=Ot/2):Ae==="<"&&(Vt.x-=Ot,kt.x-=Ot),Se(St),Se(Ke),Se(Vt),Se(ot),Se(ht),Se(kt),"M"+pe(St.x,St.y)+"L"+pe(ot.x,ot.y)+"L"+pe(kt.x,kt.y)+"L"+pe(ht.x,ht.y)+"L"+pe(Ke.x,Ke.y)+"L"+pe(Vt.x,Vt.y)+"Z"},Ee=function(je){var dt=ie(je.x0),Et=ie(je.x1),$t=ne(je.y0),wt=ne(je.y1),Ot=Et-dt,Vt=wt-$t;if(!Ot||!Vt)return"";var kt=0,St=Ot>2*kt&&Vt>2*kt?kt:0,ot=function(ht,Ke){return St?"a"+pe(St,St)+" 0 0 1 "+pe(ht,Ke):""};return"M"+pe(dt,$t+St)+ot(St,-St)+"L"+pe(Et-St,$t)+ot(St,St)+"L"+pe(Et,wt-St)+ot(-St,St)+"L"+pe(dt+St,wt)+ot(-St,-St)+"Z"},Oe=function(je,dt){var Et=je.x0,$t=je.x1,wt=je.y0,Ot=je.y1,Vt=je.textBB,kt=function(Bt){return S.textposition.indexOf(Bt)!==-1},St=kt("bottom"),ot=kt("top")||dt.isHeader&&!St,ht=ot?"start":St?"end":"middle",Ke=kt("right"),Pe=kt("left")||dt.onPathbar,We=Pe?-1:Ke?1:0,Qe=S[x?"tiling":"marker"].pad;if(dt.isHeader){if(Et+=(x?Qe:Qe.l)-t,$t-=(x?Qe:Qe.r)-t,Et>=$t){var ut=(Et+$t)/2;Et=ut,$t=ut}var It;St?(It=Ot-(x?Qe:Qe.b),wt<It&&It<Ot&&(wt=It)):(It=wt+(x?Qe:Qe.t),wt<It&&It<Ot&&(Ot=It))}var Tt=i(Et,$t,wt,Ot,Vt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ht,leftToRight:We});return Tt.fontSize=dt.fontSize,Tt.targetX=ie(Tt.targetX),Tt.targetY=ne(Tt.targetY),isNaN(Tt.targetX)||isNaN(Tt.targetY)?{}:(Et!==$t&&wt!==Ot&&r(S.type,Tt,A),{scale:Tt.scale,rotate:Tt.rotate,textX:Tt.textX,textY:Tt.textY,anchorX:Tt.anchorX,anchorY:Tt.anchorY,targetX:Tt.targetX,targetY:Tt.targetY})},_e=function(je,dt){for(var Et,$t=0,wt=je;!Et&&$t<O;)$t++,wt=wt.parent,wt?Et=ee(wt,dt):$t=O;return Et||{}},Re=function(je,dt,Et,$t){var wt=ee(je,dt),Ot;if(dt)Ot=K;else{var Vt=ee(v,dt);Vt?Ot=le(je,Vt,$t):Ot={}}return o(wt,Ot)},Ve=function(je,dt,Et,$t,wt){var Ot=ee(je,dt),Vt;if(Ot)Vt=Ot;else if(dt)Vt=K;else if(fe)if(je.parent){var kt=j||Et;kt&&!dt?Vt=le(je,kt,$t):(Vt={},y.extendFlat(Vt,_e(je,dt)))}else Vt=y.extendFlat({},je),x&&(wt.orientation==="h"?wt.flipX?Vt.x0=je.x1:Vt.x1=0:wt.flipY?Vt.y0=je.y1:Vt.y1=0);else Vt={};return o(Vt,{x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1})},Je=function(je,dt,Et,$t){var wt=ee(je,dt),Ot={},Vt=q(je,dt,Et,$t);y.extendFlat(Ot,{transform:Oe({x0:Vt.x0,x1:Vt.x1,y0:Vt.y0,y1:Vt.y1,textBB:je.textBB,_text:je._text},{isHeader:h.isHeader(je,S)})}),wt?Ot=wt:je.parent&&y.extendFlat(Ot,_e(je,dt));var kt=je.transform;return je.x0!==je.x1&&je.y0!==je.y1&&r(S.type,kt,A),o(Ot,{transform:{scale:kt.scale,rotate:kt.rotate,textX:kt.textX,textY:kt.textY,anchorX:kt.anchorX,anchorY:kt.anchorY,targetX:kt.targetX,targetY:kt.targetY}})},ze=function(je,dt,Et,$t,wt){var Ot=$t[0],Vt=$t[1];z?je.exit().transition().each(function(){var kt=s.select(this),St=kt.select("path.surface");St.transition().attrTween("d",function(ht){var Ke=Re(ht,dt,Et,[Ot,Vt]);return function(Pe){return wt(Ke(Pe))}});var ot=kt.select("g.slicetext");ot.attr("opacity",0)}).remove():je.exit().remove()},De=function(je){var dt=je.transform;return je.x0!==je.x1&&je.y0!==je.y1&&r(S.type,dt,A),y.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};z&&(M.each(function(je){ue[l(je)]={x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1},je.transform&&(ue[l(je)].transform={textX:je.transform.textX,textY:je.transform.textY,anchorX:je.transform.anchorX,anchorY:je.transform.anchorY,targetX:je.transform.targetX,targetY:je.transform.targetY,scale:je.transform.scale,rotate:je.transform.rotate})}),E.each(function(je){V[l(je)]={x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1},je.transform&&(V[l(je)].transform={textX:je.transform.textX,textY:je.transform.textY,anchorX:je.transform.anchorX,anchorY:je.transform.anchorY,targetX:je.transform.targetX,targetY:je.transform.targetY,scale:je.transform.scale,rotate:je.transform.rotate}),!fe&&h.isEntry(je)&&(fe=je)})),j=p(d,b,v,E,{width:B,height:$,viewX:ie,viewY:ne,pathSlice:Ee,toMoveInsideSlice:Oe,prevEntry:fe,makeUpdateSliceInterpolator:Ve,makeUpdateTextInterpolator:Je,handleSlicesExit:ze,hasTransition:z,strTransform:De}),S.pathbar.visible?u(d,b,v,M,{barDifY:Z,width:W,height:re,viewX:me,viewY:ce,pathSlice:Ce,toMoveInsideSlice:Oe,makeUpdateSliceInterpolator:Ve,makeUpdateTextInterpolator:Je,handleSlicesExit:ze,hasTransition:z,strTransform:De}):M.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./constants":1078,"./draw_ancestors":1081,"@plotly/d3":58,"d3-interpolate":116}],1090:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/color"),h=e("../../lib"),y=e("../sunburst/helpers"),t=e("../bar/uniform_text").resizeText;function a(n){var r=n._fullLayout._treemaplayer.selectAll(".trace");t(n,r,"treemap"),r.each(function(f){var u=s.select(this),l=f[0],m=l.trace;u.style("opacity",m.opacity),u.selectAll("path.surface").each(function(d){s.select(this).call(i,d,m,{hovered:!1})})})}function i(n,r,f,u){var l=(u||{}).hovered,m=r.data.data,d=m.i,b,g,_=m.color,p=y.isHierarchyRoot(r),A=1;if(l)b=f._hovered.marker.line.color,g=f._hovered.marker.line.width;else if(p&&_===f.root.color)A=100,b="rgba(0,0,0,0)",g=0;else if(b=h.castOption(f,d,"marker.line.color")||o.defaultLine,g=h.castOption(f,d,"marker.line.width")||0,!f._hasColorscale&&!r.onPathbar){var c=f.marker.depthfade;if(c){var S=o.combine(o.addOpacity(f._backgroundColor,.75),_),T;if(c===!0){var x=y.getMaxDepth(f);isFinite(x)?y.isLeaf(r)?T=0:T=f._maxVisibleLayers-(r.data.depth-f._entryDepth):T=r.data.height+1}else T=r.data.depth-f._entryDepth,f._atRootLevel||T++;if(T>0)for(var w=0;w<T;w++){var v=.5*w/T;_=o.combine(o.addOpacity(S,v),_)}}}n.style("stroke-width",g).call(o.fill,_).call(o.stroke,b).style("opacity",A)}I.exports={style:a,styleOne:i}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1055,"@plotly/d3":58}],1091:[function(e,I,F){var s=e("../box/attributes"),o=e("../../lib/extend").extendFlat,h=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;I.exports={y:s.y,x:s.x,x0:s.x0,y0:s.y0,xhoverformat:h("x"),yhoverformat:h("y"),name:o({},s.name,{}),orientation:o({},s.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:s.fillcolor,points:o({},s.boxpoints,{}),jitter:o({},s.jitter,{}),pointpos:o({},s.pointpos,{}),width:o({},s.width,{}),marker:s.marker,text:s.text,hovertext:s.hovertext,hovertemplate:s.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:s.selected,unselected:s.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1092:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("../box/calc"),y=e("./helpers"),t=e("../../constants/numerical").BADNUM;I.exports=function(f,u){var l=h(f,u);if(l[0].t.empty)return l;for(var m=f._fullLayout,d=o.getFromId(f,u[u.orientation==="h"?"xaxis":"yaxis"]),b=1/0,g=-1/0,_=0,p=0,A=0;A<l.length;A++){var c=l[A],S=c.pts.map(y.extractVal),T=c.bandwidth=i(u,c,S),x=c.span=n(u,c,d,T);if(c.min===c.max&&T===0)x=c.span=[c.min,c.max],c.density=[{v:1,t:x[0]}],c.bandwidth=T,_=Math.max(_,1);else{var w=x[1]-x[0],v=Math.ceil(w/(T/3)),C=w/v;if(!isFinite(C)||!isFinite(v))return s.error("Something went wrong with computing the violin span"),l[0].t.empty=!0,l;var M=y.makeKDE(c,u,S);c.density=new Array(v);for(var E=0,L=x[0];L<x[1]+C/2;E++,L+=C){var z=M(L);c.density[E]={v:z,t:L},_=Math.max(_,z)}}p=Math.max(p,S.length),b=Math.min(b,x[0]),g=Math.max(g,x[1])}var O=o.findExtremes(d,[b,g],{padded:!0});if(u._extremes[d._id]=O,u.width)l[0].t.maxKDE=_;else{var R=m._violinScaleGroupStats,D=u.scalegroup,H=R[D];H?(H.maxKDE=Math.max(H.maxKDE,_),H.maxCount=Math.max(H.maxCount,p)):R[D]={maxKDE:_,maxCount:p}}return l[0].t.labels.kde=s._(f,"kde:"),l};function a(r,f,u){var l=Math.min(f,u/1.349);return 1.059*l*Math.pow(r,-.2)}function i(r,f,u){var l=f.max-f.min;if(!l)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,l/1e4);var m=u.length,d=s.stdev(u,m-1,f.mean);return Math.max(a(m,d,f.q3-f.q1),l/100)}function n(r,f,u,l){var m=r.spanmode,d=r.span||[],b=[f.min,f.max],g=[f.min-2*l,f.max+2*l],_;function p(c){var S=d[c],T=u.type==="multicategory"?u.r2c(S):u.d2c(S,0,r[f.valLetter+"calendar"]);return T===t?g[c]:T}m==="soft"?_=g:m==="hard"?_=b:_=[p(0),p(1)];var A={type:"linear",range:_};return o.setConvert(A),A.cleanRange(),_}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1095}],1093:[function(e,I,F){var s=e("../box/cross_trace_calc").setPositionOffset,o=["v","h"];I.exports=function(y,t){for(var a=y.calcdata,i=t.xaxis,n=t.yaxis,r=0;r<o.length;r++){for(var f=o[r],u=f==="h"?n:i,l=[],m=0;m<a.length;m++){var d=a[m],b=d[0].t,g=d[0].trace;g.visible===!0&&g.type==="violin"&&!b.empty&&g.orientation===f&&g.xaxis===i._id&&g.yaxis===n._id&&l.push(m)}s("violin",y,l,u)}}},{"../box/cross_trace_calc":675}],1094:[function(e,I,F){var s=e("../../lib"),o=e("../../components/color"),h=e("../box/defaults"),y=e("./attributes");I.exports=function(a,i,n,r){function f(C,M){return s.coerce(a,i,y,C,M)}function u(C,M){return s.coerce2(a,i,y,C,M)}if(h.handleSampleDefaults(a,i,f,r),i.visible!==!1){f("bandwidth"),f("side");var l=f("width");l||(f("scalegroup",i.name),f("scalemode"));var m=f("span"),d;Array.isArray(m)&&(d="manual"),f("spanmode",d);var b=f("line.color",(a.marker||{}).color||n),g=f("line.width"),_=f("fillcolor",o.addOpacity(i.line.color,.5));h.handlePointsDefaults(a,i,f,{prefix:""});var p=u("box.width"),A=u("box.fillcolor",_),c=u("box.line.color",b),S=u("box.line.width",g),T=f("box.visible",Boolean(p||A||c||S));T||(i.box={visible:!1});var x=u("meanline.color",b),w=u("meanline.width",g),v=f("meanline.visible",Boolean(x||w));v||(i.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1091}],1095:[function(e,I,F){var s=e("../../lib"),o={gaussian:function(h){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*h*h)}};F.makeKDE=function(h,y,t){var a=t.length,i=o.gaussian,n=h.bandwidth,r=1/(a*n);return function(f){for(var u=0,l=0;l<a;l++)u+=i((f-t[l])/n);return r*u}},F.getPositionOnKdePath=function(h,y,t){var a,i;y.orientation==="h"?(a="y",i="x"):(a="x",i="y");var n=s.findPointOnPath(h.path,t,i,{pathLength:h.pathLength}),r=h.posCenterPx,f=n[a],u=y.side==="both"?2*r-f:r;return[f,u]},F.getKdeValue=function(h,y,t){var a=h.pts.map(F.extractVal),i=F.makeKDE(h,y,a);return i(t)/h.posDensityScale},F.extractVal=function(h){return h.v}},{"../../lib":503}],1096:[function(e,I,F){var s=e("../../lib"),o=e("../../plots/cartesian/axes"),h=e("../box/hover"),y=e("./helpers");I.exports=function(a,i,n,r,f){f||(f={});var u=f.hoverLayer,l=a.cd,m=l[0].trace,d=m.hoveron,b=d.indexOf("violins")!==-1,g=d.indexOf("kde")!==-1,_=[],p,A;if(b||g){var c=h.hoverOnBoxes(a,i,n,r);if(g&&c.length>0){var S=a.xa,T=a.ya,x,w,v,C,M;m.orientation==="h"?(M=i,x="y",v=T,w="x",C=S):(M=n,x="x",v=S,w="y",C=T);var E=l[a.index];if(M>=E.span[0]&&M<=E.span[1]){var L=s.extendFlat({},a),z=C.c2p(M,!0),O=y.getKdeValue(E,m,M),R=y.getPositionOnKdePath(E,m,z),D=v._offset,H=v._length;L[x+"0"]=R[0],L[x+"1"]=R[1],L[w+"0"]=L[w+"1"]=z,L[w+"Label"]=w+": "+o.hoverLabelText(C,M,m[w+"hoverformat"])+", "+l[0].t.labels.kde+" "+O.toFixed(3),L.spikeDistance=c[0].spikeDistance;var B=x+"Spike";L[B]=c[0][B],c[0].spikeDistance=void 0,c[0][B]=void 0,L.hovertemplate=!1,_.push(L),A={stroke:a.color},A[x+"1"]=s.constrain(D+R[0],D,D+H),A[x+"2"]=s.constrain(D+R[1],D,D+H),A[w+"1"]=A[w+"2"]=C._offset+z}}b&&(_=_.concat(c))}d.indexOf("points")!==-1&&(p=h.hoverOnPoints(a,i,n));var $=u.selectAll(".violinline-"+m.uid).data(A?[0]:[]);return $.enter().append("line").classed("violinline-"+m.uid,!0).attr("stroke-width",1.5),$.exit().remove(),$.attr(A),r==="closest"?p?[p]:_:(p&&_.push(p),_)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1095}],1097:[function(e,I,F){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":951,"./attributes":1091,"./calc":1092,"./cross_trace_calc":1093,"./defaults":1094,"./hover":1096,"./layout_attributes":1098,"./layout_defaults":1099,"./plot":1100,"./style":1101}],1098:[function(e,I,F){var s=e("../box/layout_attributes"),o=e("../../lib").extendFlat;I.exports={violinmode:o({},s.boxmode,{}),violingap:o({},s.boxgap,{}),violingroupgap:o({},s.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1099:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes"),h=e("../box/layout_defaults");I.exports=function(t,a,i){function n(r,f){return s.coerce(t,a,o,r,f)}h._supply(t,a,i,n,"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1098}],1100:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../components/drawing"),y=e("../box/plot"),t=e("../scatter/line_points"),a=e("./helpers");I.exports=function(n,r,f,u){var l=n._fullLayout,m=r.xaxis,d=r.yaxis;function b(g){var _=t(g,{xaxis:m,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return h.smoothopen(_[0],1)}o.makeTraceGroups(u,f,"trace violins").each(function(g){var _=s.select(this),p=g[0],A=p.t,c=p.trace;if(c.visible!==!0||A.empty){_.remove();return}var S=A.bPos,T=A.bdPos,x=r[A.valLetter+"axis"],w=r[A.posLetter+"axis"],v=c.side==="both",C=v||c.side==="positive",M=v||c.side==="negative",E=_.selectAll("path.violin").data(o.identity);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),E.exit().remove(),E.each(function($){var W=s.select(this),re=$.density,Q=re.length,Z=w.c2l($.pos+S,!0),K=w.l2p(Z),le;if(c.width)le=A.maxKDE/T;else{var fe=l._violinScaleGroupStats[c.scalegroup];le=c.scalemode==="count"?fe.maxKDE/T*(fe.maxCount/$.pts.length):fe.maxKDE/T}var ue,V,j,ee,q,X,J;if(C){for(X=new Array(Q),ee=0;ee<Q;ee++)J=X[ee]={},J[A.posLetter]=Z+re[ee].v/le,J[A.valLetter]=x.c2l(re[ee].t,!0);ue=b(X)}if(M){for(X=new Array(Q),q=0,ee=Q-1;q<Q;q++,ee--)J=X[q]={},J[A.posLetter]=Z-re[ee].v/le,J[A.valLetter]=x.c2l(re[ee].t,!0);V=b(X)}if(v)j=ue+"L"+V.substr(1)+"Z";else{var ie=[K,x.c2p(re[0].t)],ne=[K,x.c2p(re[Q-1].t)];c.orientation==="h"&&(ie.reverse(),ne.reverse()),C?j="M"+ie+"L"+ue.substr(1)+"L"+ne:j="M"+ne+"L"+V.substr(1)+"L"+ie}W.attr("d",j),$.posCenterPx=K,$.posDensityScale=le*T,$.path=W.node(),$.pathLength=$.path.getTotalLength()/(v?2:1)});var L=c.box,z=L.width,O=(L.line||{}).width,R,D;v?(R=T*z,D=0):C?(R=[0,T*z/2],D=O*{x:1,y:-1}[A.posLetter]):(R=[T*z/2,0],D=O*{x:-1,y:1}[A.posLetter]),y.plotBoxAndWhiskers(_,{pos:w,val:x},c,{bPos:S,bdPos:R,bPosPxOffset:D}),y.plotBoxMean(_,{pos:w,val:x},c,{bPos:S,bdPos:R,bPosPxOffset:D});var H;!c.box.visible&&c.meanline.visible&&(H=o.identity);var B=_.selectAll("path.meanline").data(H||[]);B.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),B.exit().remove(),B.each(function($){var W=x.c2p($.mean,!0),re=a.getPositionOnKdePath($,c,W);s.select(this).attr("d",c.orientation==="h"?"M"+W+","+re[0]+"V"+re[1]:"M"+re[0]+","+W+"H"+re[1])}),y.plotPoints(_,{x:m,y:d},c,A)})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":941,"./helpers":1095,"@plotly/d3":58}],1101:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/color"),h=e("../scatter/style").stylePoints;I.exports=function(t){var a=s.select(t).selectAll("g.trace.violins");a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var n=i[0].trace,r=s.select(this),f=n.box||{},u=f.line||{},l=n.meanline||{},m=l.width;r.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(o.stroke,n.line.color).call(o.fill,n.fillcolor),r.selectAll("path.box").style("stroke-width",u.width+"px").call(o.stroke,u.color).call(o.fill,f.fillcolor);var d={"stroke-width":m+"px","stroke-dasharray":2*m+"px,"+m+"px"};r.selectAll("path.mean").style(d).call(o.stroke,l.color),r.selectAll("path.meanline").style(d).call(o.stroke,l.color),h(r,n,t)})}},{"../../components/color":366,"../scatter/style":951,"@plotly/d3":58}],1102:[function(e,I,F){var s=e("../../components/colorscale/attributes"),o=e("../isosurface/attributes"),h=e("../surface/attributes"),y=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll,i=I.exports=a(t({x:o.x,y:o.y,z:o.z,value:o.value,isomin:o.isomin,isomax:o.isomax,surface:o.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:o.slices,caps:o.caps,text:o.text,hovertext:o.hovertext,xhoverformat:o.xhoverformat,yhoverformat:o.yhoverformat,zhoverformat:o.zhoverformat,valuehoverformat:o.valuehoverformat,hovertemplate:o.hovertemplate},s("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:o.colorbar,opacity:o.opacity,opacityscale:h.opacityscale,lightposition:o.lightposition,lighting:o.lighting,flatshading:o.flatshading,contour:o.contour,hoverinfo:t({},y.hoverinfo),showlegend:t({},y.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1061}],1103:[function(e,I,F){var s=e("../../../stackgl_modules").gl_mesh3d,o=e("../../lib/gl_format_color").parseColorScale,h=e("../../lib/str2rgbarray"),y=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),a=e("../isosurface/convert").findNearestOnAxis,i=e("../isosurface/convert").generateIsoMeshes;function n(u,l,m){this.scene=u,this.uid=m,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(u){if(u.object===this.mesh){var l=u.data.index,m=this.data._meshX[l],d=this.data._meshY[l],b=this.data._meshZ[l],g=this.data._Ys.length,_=this.data._Zs.length,p=a(m,this.data._Xs).id,A=a(d,this.data._Ys).id,c=a(b,this.data._Zs).id,S=u.index=c+_*A+_*g*p;u.traceCoordinate=[this.data._meshX[S],this.data._meshY[S],this.data._meshZ[S],this.data._value[S]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[S]!==void 0?u.textLabel=T[S]:T&&(u.textLabel=T),!0}},r.update=function(u){var l=this.scene,m=l.fullSceneLayout;this.data=i(u);function d(A,c,S,T){return c.map(function(x){return A.d2l(x,0,T)*S})}var b=t(d(m.xaxis,u._meshX,l.dataScale[0],u.xcalendar),d(m.yaxis,u._meshY,l.dataScale[1],u.ycalendar),d(m.zaxis,u._meshZ,l.dataScale[2],u.zcalendar)),g=t(u._meshI,u._meshJ,u._meshK),_={positions:b,cells:g,lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,opacityscale:u.opacityscale,contourEnable:u.contour.show,contourColor:h(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading},p=y(u);_.vertexIntensity=u._meshIntensity,_.vertexIntensityBounds=[p.min,p.max],_.colormap=o(u),this.mesh.update(_)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(u,l){var m=u.glplot.gl,d=s({gl:m}),b=new n(u,d,l.uid);return d._trace=b,b.update(l),u.glplot.add(d),b}I.exports=f},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1104:[function(e,I,F){var s=e("../../lib"),o=e("./attributes"),h=e("../isosurface/defaults").supplyIsoDefaults,y=e("../surface/defaults").opacityscaleDefaults;I.exports=function(a,i,n,r){function f(u,l){return s.coerce(a,i,o,u,l)}h(a,i,n,r,f),y(a,i,r,f)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1064,"./attributes":1102}],1105:[function(e,I,F){I.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"volume",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1102,"./convert":1103,"./defaults":1104}],1106:[function(e,I,F){var s=e("../bar/attributes"),o=e("../scatter/attributes").line,h=e("../../plots/attributes"),y=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("./constants"),n=e("../../lib/extend").extendFlat,r=e("../../components/color");function f(u){return{marker:{color:n({},s.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},s.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},s.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}I.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),hovertext:s.hovertext,hovertemplate:t({},{keys:i.eventDataKeys}),hoverinfo:n({},h.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label"])}),text:s.text,textposition:s.textposition,insidetextanchor:s.insidetextanchor,textangle:s.textangle,textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:s.outsidetextfont,constraintext:s.constraintext,cliponaxis:s.cliponaxis,orientation:s.orientation,offset:s.offset,width:s.width,increasing:f(),decreasing:f(),totals:f(),connector:{line:{color:n({},o.color,{dflt:r.defaultLine}),width:n({},o.width,{editType:"plot"}),dash:o.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":1108}],1107:[function(e,I,F){var s=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/align_period"),h=e("../../lib").mergeArray,y=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;function a(n){return n==="a"||n==="absolute"}function i(n){return n==="t"||n==="total"}I.exports=function(r,f){var u=s.getFromId(r,f.xaxis||"x"),l=s.getFromId(r,f.yaxis||"y"),m,d,b,g,_,p;f.orientation==="h"?(m=u.makeCalcdata(f,"x"),b=l.makeCalcdata(f,"y"),g=o(f,l,"y",b),_=!!f.yperiodalignment,p="y"):(m=l.makeCalcdata(f,"y"),b=u.makeCalcdata(f,"x"),g=o(f,u,"x",b),_=!!f.xperiodalignment,p="x"),d=g.vals;for(var A=Math.min(d.length,m.length),c=new Array(A),S=0,T,x=!1,w=0;w<A;w++){var v=m[w]||0,C=!1;(m[w]!==t||i(f.measure[w])||a(f.measure[w]))&&w+1<A&&(m[w+1]!==t||i(f.measure[w+1])||a(f.measure[w+1]))&&(C=!0);var M=c[w]={i:w,p:d[w],s:v,rawS:v,cNext:C};a(f.measure[w])?(S=M.s,M.isSum=!0,M.dir="totals",M.s=S):i(f.measure[w])?(M.isSum=!0,M.dir="totals",M.s=S):(M.isSum=!1,M.dir=M.rawS<0?"decreasing":"increasing",T=M.s,M.s=S+T,S+=T),M.dir==="totals"&&(x=!0),_&&(c[w].orig_p=b[w],c[w][p+"End"]=g.ends[w],c[w][p+"Start"]=g.starts[w]),f.ids&&(M.id=String(f.ids[w])),M.v=(f.base||0)+S}return c.length&&(c[0].hasTotals=x),h(f.text,c,"tx"),h(f.hovertext,c,"htx"),y(c,f),c}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929}],1108:[function(e,I,F){I.exports={eventDataKeys:["initial","delta","final"]}},{}],1109:[function(e,I,F){var s=e("../bar/cross_trace_calc").setGroupPositions;I.exports=function(h,y){var t=h._fullLayout,a=h._fullData,i=h.calcdata,n=y.xaxis,r=y.yaxis,f=[],u=[],l=[],m,d;for(d=0;d<a.length;d++){var b=a[d];b.visible===!0&&b.xaxis===n._id&&b.yaxis===r._id&&b.type==="waterfall"&&(m=i[d],b.orientation==="h"?l.push(m):u.push(m),f.push(m))}var g={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(s(h,n,r,u,g),s(h,r,n,l,g),d=0;d<f.length;d++){m=f[d];for(var _=0;_<m.length;_++){var p=m[_];p.isSum===!1&&(p.s0+=_===0?0:m[_-1].s),_+1<m.length&&(m[_].nextP0=m[_+1].p0,m[_].nextS0=m[_+1].s0)}}}},{"../bar/cross_trace_calc":651}],1110:[function(e,I,F){var s=e("../../lib"),o=e("../bar/defaults").handleGroupingDefaults,h=e("../bar/defaults").handleText,y=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),a=e("./attributes"),i=e("../../components/color"),n=e("../../constants/delta.js"),r=n.INCREASING.COLOR,f=n.DECREASING.COLOR,u="#4499FF";function l(b,g,_){b(g+".marker.color",_),b(g+".marker.line.color",i.defaultLine),b(g+".marker.line.width")}function m(b,g,_,p){function A(w,v){return s.coerce(b,g,a,w,v)}var c=y(b,g,p,A);if(!c){g.visible=!1;return}t(b,g,p,A),A("xhoverformat"),A("yhoverformat"),A("measure"),A("orientation",g.x&&!g.y?"h":"v"),A("base"),A("offset"),A("width"),A("text"),A("hovertext"),A("hovertemplate");var S=A("textposition");h(b,g,p,A,S,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),g.textposition!=="none"&&(A("texttemplate"),g.texttemplate||A("textinfo")),l(A,"increasing",r),l(A,"decreasing",f),l(A,"totals",u);var T=A("connector.visible");if(T){A("connector.mode");var x=A("connector.line.width");x&&(A("connector.line.color"),A("connector.line.dash"))}}function d(b,g){var _,p;function A(S){return s.coerce(p._input,p,a,S)}if(g.waterfallmode==="group")for(var c=0;c<b.length;c++)p=b[c],_=p._input,o(_,p,g,A)}I.exports={supplyDefaults:m,crossTraceDefaults:d}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":1106}],1111:[function(e,I,F){I.exports=function(o,h){return o.x="xVal"in h?h.xVal:h.x,o.y="yVal"in h?h.yVal:h.y,"initial"in h&&(o.initial=h.initial),"delta"in h&&(o.delta=h.delta),"final"in h&&(o.final=h.final),h.xa&&(o.xaxis=h.xa),h.ya&&(o.yaxis=h.ya),o}},{}],1112:[function(e,I,F){var s=e("../../plots/cartesian/axes").hoverLabelText,o=e("../../components/color").opacity,h=e("../bar/hover").hoverOnBars,y=e("../../constants/delta.js"),t={increasing:y.INCREASING.SYMBOL,decreasing:y.DECREASING.SYMBOL};I.exports=function(n,r,f,u,l){var m=h(n,r,f,u,l);if(!m)return;var d=m.cd,b=d[0].trace,g=b.orientation==="h",_=g?"x":"y",p=g?n.xa:n.ya;function A(L){return s(p,L,b[_+"hoverformat"])}var c=m.index,S=d[c],T=S.isSum?S.b+S.s:S.rawS;if(!S.isSum){m.initial=S.b+S.s-T,m.delta=T,m.final=m.initial+m.delta;var x=A(Math.abs(m.delta));m.deltaLabel=T<0?"("+x+")":x,m.finalLabel=A(m.final),m.initialLabel=A(m.initial)}var w=S.hi||b.hoverinfo,v=[];if(w&&w!=="none"&&w!=="skip"){var C=w==="all",M=w.split("+"),E=function(L){return C||M.indexOf(L)!==-1};S.isSum||(E("final")&&(g?!E("x"):!E("y"))&&v.push(m.finalLabel),E("delta")&&(T<0?v.push(m.deltaLabel+" "+t.decreasing):v.push(m.deltaLabel+" "+t.increasing)),E("initial")&&v.push("Initial: "+m.initialLabel))}return v.length&&(m.extraText=v.join("<br>")),m.color=a(b,S),[m]};function a(i,n){var r=i[n.dir].marker,f=r.color,u=r.line.color,l=r.line.width;if(o(f))return f;if(o(u)&&l)return u}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1113:[function(e,I,F){I.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1106,"./calc":1107,"./cross_trace_calc":1109,"./defaults":1110,"./event_data":1111,"./hover":1112,"./layout_attributes":1114,"./layout_defaults":1115,"./plot":1116,"./style":1117}],1114:[function(e,I,F){I.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1115:[function(e,I,F){var s=e("../../lib"),o=e("./layout_attributes");I.exports=function(h,y,t){var a=!1;function i(f,u){return s.coerce(h,y,o,f,u)}for(var n=0;n<t.length;n++){var r=t[n];if(r.visible&&r.type==="waterfall"){a=!0;break}}a&&(i("waterfallmode"),i("waterfallgap",.2),i("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1114}],1116:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../lib"),h=e("../../components/drawing"),y=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),a=e("../bar/uniform_text").clearMinTextSize;I.exports=function(f,u,l,m){var d=f._fullLayout;a("waterfall",d),t.plot(f,u,l,m,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),i(f,u,l,m)};function i(r,f,u,l){var m=f.xaxis,d=f.yaxis;o.makeTraceGroups(l,u,"trace bars").each(function(b){var g=s.select(this),_=b[0].trace,p=o.ensureSingle(g,"g","lines");if(!_.connector||!_.connector.visible){p.remove();return}var A=_.orientation==="h",c=_.connector.mode,S=p.selectAll("g.line").data(o.identity);S.enter().append("g").classed("line",!0),S.exit().remove();var T=S.size();S.each(function(x,w){if(!(w!==T-1&&!x.cNext)){var v=n(x,m,d,A),C=v[0],M=v[1],E="";C[0]!==y&&M[0]!==y&&C[1]!==y&&M[1]!==y&&(c==="spanning"&&!x.isSum&&w>0&&(A?E+="M"+C[0]+","+M[1]+"V"+M[0]:E+="M"+C[1]+","+M[0]+"H"+C[0]),c!=="between"&&(x.isSum||w<T-1)&&(A?E+="M"+C[1]+","+M[0]+"V"+M[1]:E+="M"+C[0]+","+M[1]+"H"+C[1]),C[2]!==y&&M[2]!==y&&(A?E+="M"+C[1]+","+M[1]+"V"+M[2]:E+="M"+C[1]+","+M[1]+"H"+C[2])),E===""&&(E="M0,0Z"),o.ensureSingle(s.select(this),"path").attr("d",E).call(h.setClipUrl,f.layerClipId,r)}})})}function n(r,f,u,l){var m=[],d=[],b=l?f:u,g=l?u:f;return m[0]=b.c2p(r.s0,!0),d[0]=g.c2p(r.p0,!0),m[1]=b.c2p(r.s1,!0),d[1]=g.c2p(r.p1,!0),m[2]=b.c2p(r.nextS0,!0),d[2]=g.c2p(r.nextP0,!0),l?[m,d]:[d,m]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1117:[function(e,I,F){var s=e("@plotly/d3"),o=e("../../components/drawing"),h=e("../../components/color"),y=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),a=e("../bar/uniform_text").resizeText,i=t.styleTextPoints;function n(r,f,u){var l=u||s.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");a(r,l,"waterfall"),l.style("opacity",function(m){return m[0].trace.opacity}),l.each(function(m){var d=s.select(this),b=m[0].trace;d.selectAll(".point > path").each(function(g){if(!g.isBlank){var _=b[g.dir].marker;s.select(this).call(h.fill,_.color).call(h.stroke,_.line.color).call(o.dashLine,_.line.dash,_.line.width).style("opacity",b.selectedpoints&&!g.selected?y:1)}}),i(d,b,r),d.selectAll(".lines").each(function(){var g=b.connector.line;o.lineGroupStyle(s.select(this).selectAll("path"),g.width,g.color,g.dash)})})}I.exports={style:n}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1118:[function(e,I,F){var s=e("../plots/cartesian/axes"),o=e("../lib"),h=e("../plot_api/plot_schema"),y=e("./helpers").pointsAccessorFunction,t=e("../constants/numerical").BADNUM;F.moduleType="transform",F.name="aggregate";var a=F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=a.aggregations;F.supplyDefaults=function(m,d){var b={},g;function _(L,z){return o.coerce(m,b,a,L,z)}var p=_("enabled");if(!p)return b;var A=h.findArrayAttributes(d),c={};for(g=0;g<A.length;g++)c[A[g]]=1;var S=_("groups");if(!Array.isArray(S)){if(!c[S])return b.enabled=!1,b;c[S]=0}var T=m.aggregations||[],x=b.aggregations=new Array(T.length),w;function v(L,z){return o.coerce(T[g],w,i,L,z)}for(g=0;g<T.length;g++){w={_index:g};var C=v("target"),M=v("func"),E=v("enabled");E&&C&&(c[C]||M==="count"&&c[C]===void 0)?(M==="stddev"&&v("funcmode"),c[C]=0,x[g]=w):x[g]={enabled:!1,_index:g}}for(g=0;g<A.length;g++)c[A[g]]&&x.push({target:A[g],func:i.func.dflt,enabled:!0,_index:-1});return b},F.calcTransform=function(m,d,b){if(!!b.enabled){var g=b.groups,_=o.getTargetArray(d,{target:g});if(!!_){var p,A,c,S,T={},x={},w=[],v=y(d.transforms,b),C=_.length;for(d._length&&(C=Math.min(C,d._length)),p=0;p<C;p++)A=_[p],c=T[A],c===void 0?(T[A]=w.length,S=[p],w.push(S),x[T[A]]=v(p)):(w[c].push(p),x[T[A]]=(x[T[A]]||[]).concat(v(p)));b._indexToPoints=x;var M=b.aggregations;for(p=0;p<M.length;p++)n(m,d,w,M[p]);typeof g=="string"&&n(m,d,w,{target:g,func:"first",enabled:!0}),d._length=w.length}}};function n(m,d,b,g){if(!!g.enabled){for(var _=g.target,p=o.nestedProperty(d,_),A=p.get(),c=s.getDataConversions(m,d,_,A),S=r(g,c),T=new Array(b.length),x=0;x<b.length;x++)T[x]=S(A,b[x]);p.set(T),g.func==="count"&&o.pushUnique(d._arrayAttrs,_)}}function r(m,d){var b=m.func,g=d.d2c,_=d.c2d;switch(b){case"count":return f;case"first":return u;case"last":return l;case"sum":return function(p,A){for(var c=0,S=0;S<A.length;S++){var T=g(p[A[S]]);T!==t&&(c+=T)}return _(c)};case"avg":return function(p,A){for(var c=0,S=0,T=0;T<A.length;T++){var x=g(p[A[T]]);x!==t&&(c+=x,S++)}return S?_(c/S):t};case"min":return function(p,A){for(var c=1/0,S=0;S<A.length;S++){var T=g(p[A[S]]);T!==t&&(c=Math.min(c,T))}return c===1/0?t:_(c)};case"max":return function(p,A){for(var c=-1/0,S=0;S<A.length;S++){var T=g(p[A[S]]);T!==t&&(c=Math.max(c,T))}return c===-1/0?t:_(c)};case"range":return function(p,A){for(var c=1/0,S=-1/0,T=0;T<A.length;T++){var x=g(p[A[T]]);x!==t&&(c=Math.min(c,x),S=Math.max(S,x))}return S===-1/0||c===1/0?t:_(S-c)};case"change":return function(p,A){var c=g(p[A[0]]),S=g(p[A[A.length-1]]);return c===t||S===t?t:_(S-c)};case"median":return function(p,A){for(var c=[],S=0;S<A.length;S++){var T=g(p[A[S]]);T!==t&&c.push(T)}if(!c.length)return t;c.sort(o.sorterAsc);var x=(c.length-1)/2;return _((c[Math.floor(x)]+c[Math.ceil(x)])/2)};case"mode":return function(p,A){for(var c={},S=0,T=t,x=0;x<A.length;x++){var w=g(p[A[x]]);if(w!==t){var v=c[w]=(c[w]||0)+1;v>S&&(S=v,T=w)}}return S?_(T):t};case"rms":return function(p,A){for(var c=0,S=0,T=0;T<A.length;T++){var x=g(p[A[T]]);x!==t&&(c+=x*x,S++)}return S?_(Math.sqrt(c/S)):t};case"stddev":return function(p,A){var c=0,S=0,T=1,x=t,w;for(w=0;w<A.length&&x===t;w++)x=g(p[A[w]]);if(x===t)return t;for(;w<A.length;w++){var v=g(p[A[w]]);if(v!==t){var C=v-x;c+=C,S+=C*C,T++}}var M=m.funcmode==="sample"?T-1:T;return M?Math.sqrt((S-c*c/T)/M):0}}}function f(m,d){return d.length}function u(m,d){return m[d[0]]}function l(m,d){return m[d[d.length-1]]}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1121}],1119:[function(e,I,F){var s=e("../lib"),o=e("../registry"),h=e("../plots/cartesian/axes"),y=e("./helpers").pointsAccessorFunction,t=e("../constants/filter_ops"),a=t.COMPARISON_OPS,i=t.INTERVAL_OPS,n=t.SET_OPS;F.moduleType="transform",F.name="filter",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(i).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},F.supplyDefaults=function(f){var u={};function l(g,_){return s.coerce(f,u,F.attributes,g,_)}var m=l("enabled");if(m){var d=l("target");if(s.isArrayOrTypedArray(d)&&d.length===0)return u.enabled=!1,u;l("preservegaps"),l("operation"),l("value");var b=o.getComponentMethod("calendars","handleDefaults");b(f,u,"valuecalendar",null),b(f,u,"targetcalendar",null)}return u},F.calcTransform=function(f,u,l){if(!l.enabled)return;var m=s.getTargetArray(u,l);if(!m)return;var d=l.target,b=m.length;u._length&&(b=Math.min(b,u._length));var g=l.targetcalendar,_=u._arrayAttrs,p=l.preservegaps;if(typeof d=="string"){var A=s.nestedProperty(u,d+"calendar").get();A&&(g=A)}var c=h.getDataToCoordFunc(f,u,d,m),S=r(l,c,g),T={},x={},w=0;function v(O,R){for(var D=0;D<_.length;D++){var H=s.nestedProperty(u,_[D]);O(H,R)}}var C,M;p?(C=function(O){T[O.astr]=s.extendDeep([],O.get()),O.set(new Array(b))},M=function(O,R){var D=T[O.astr][R];O.get()[R]=D}):(C=function(O){T[O.astr]=s.extendDeep([],O.get()),O.set([])},M=function(O,R){var D=T[O.astr][R];O.get().push(D)}),v(C);for(var E=y(u.transforms,l),L=0;L<b;L++){var z=S(m[L]);z?(v(M,L),x[w++]=E(L)):p&&w++}l._indexToPoints=x,u._length=w};function r(f,u,l){var m=f.operation,d=f.value,b=Array.isArray(d);function g(c){return c.indexOf(m)!==-1}var _=function(c){return u(c,0,f.valuecalendar)},p=function(c){return u(c,0,l)},A;switch(g(a)?A=_(b?d[0]:d):g(i)?A=b?[_(d[0]),_(d[1])]:[_(d),_(d)]:g(n)&&(A=b?d.map(_):[_(d)]),m){case"=":return function(c){return p(c)===A};case"!=":return function(c){return p(c)!==A};case"<":return function(c){return p(c)<A};case"<=":return function(c){return p(c)<=A};case">":return function(c){return p(c)>A};case">=":return function(c){return p(c)>=A};case"[]":return function(c){var S=p(c);return S>=A[0]&&S<=A[1]};case"()":return function(c){var S=p(c);return S>A[0]&&S<A[1]};case"[)":return function(c){var S=p(c);return S>=A[0]&&S<A[1]};case"(]":return function(c){var S=p(c);return S>A[0]&&S<=A[1]};case"][":return function(c){var S=p(c);return S<=A[0]||S>=A[1]};case")(":return function(c){var S=p(c);return S<A[0]||S>A[1]};case"](":return function(c){var S=p(c);return S<=A[0]||S>A[1]};case")[":return function(c){var S=p(c);return S<A[0]||S>=A[1]};case"{}":return function(c){return A.indexOf(p(c))!==-1};case"}{":return function(c){return A.indexOf(p(c))===-1}}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1121}],1120:[function(e,I,F){var s=e("../lib"),o=e("../plot_api/plot_schema"),h=e("../plots/plots"),y=e("./helpers").pointsAccessorFunction;F.moduleType="transform",F.name="groupby",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},F.supplyDefaults=function(a,i,n){var r,f={};function u(_,p){return s.coerce(a,f,F.attributes,_,p)}var l=u("enabled");if(!l)return f;u("groups"),u("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var m=a.styles,d=f.styles=[];if(m)for(r=0;r<m.length;r++){var b=d[r]={};s.coerce(m[r],d[r],F.attributes.styles,"target");var g=s.coerce(m[r],d[r],F.attributes.styles,"value");s.isPlainObject(g)?b.value=s.extendDeep({},g):g&&delete b.value}return f},F.transform=function(a,i){var n,r,f,u=[];for(r=0;r<a.length;r++)for(n=t(a[r],i),f=0;f<n.length;f++)u.push(n[f]);return u};function t(a,i){var n,r,f,u,l,m,d,b,g,_,p=i.transform,A=i.transformIndex,c=a.transforms[A].groups,S=y(a.transforms,p);if(!s.isArrayOrTypedArray(c)||c.length===0)return[a];var T=s.filterUnique(c),x=new Array(T.length),w=c.length,v=o.findArrayAttributes(a),C=p.styles||[],M={};for(n=0;n<C.length;n++)M[C[n].target]=C[n].value;p.styles&&(_=s.keyedContainer(p,"styles","target","value.name"));var E={},L={};for(n=0;n<T.length;n++){m=T[n],E[m]=n,L[m]=0,d=x[n]=s.extendDeepNoArrays({},a),d._group=m,d.transforms[A]._indexToPoints={};var z=null;for(_&&(z=_.get(m)),z||z===""?d.name=z:d.name=s.templateString(p.nameformat,{trace:a.name,group:m}),b=d.transforms,d.transforms=[],r=0;r<b.length;r++)d.transforms[r]=s.extendDeepNoArrays({},b[r]);for(r=0;r<v.length;r++)s.nestedProperty(d,v[r]).set([])}for(f=0;f<v.length;f++){for(u=v[f],r=0,g=[];r<T.length;r++)g[r]=s.nestedProperty(x[r],u).get();for(l=s.nestedProperty(a,u).get(),r=0;r<w;r++)g[E[c[r]]].push(l[r])}for(r=0;r<w;r++){d=x[E[c[r]]];var O=d.transforms[A]._indexToPoints;O[L[c[r]]]=S(r),L[c[r]]++}for(n=0;n<T.length;n++)m=T[n],d=x[n],h.clearExpandedTraceDefaultColors(d),d=s.extendDeepNoArrays(d,M[m]||{});return x}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1121}],1121:[function(e,I,F){F.pointsAccessorFunction=function(s,o){for(var h,y,t=0;t<s.length&&(h=s[t],h!==o);t++)!h._indexToPoints||h.enabled===!1||(y=h._indexToPoints);var a=y?function(i){return y[i]}:function(i){return[i]};return a}},{}],1122:[function(e,I,F){var s=e("../lib"),o=e("../plots/cartesian/axes"),h=e("./helpers").pointsAccessorFunction,y=e("../constants/numerical").BADNUM;F.moduleType="transform",F.name="sort",F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},F.supplyDefaults=function(i){var n={};function r(u,l){return s.coerce(i,n,F.attributes,u,l)}var f=r("enabled");return f&&(r("target"),r("order")),n},F.calcTransform=function(i,n,r){if(!!r.enabled){var f=s.getTargetArray(n,r);if(!!f){var u=r.target,l=f.length;n._length&&(l=Math.min(l,n._length));var m=n._arrayAttrs,d=o.getDataToCoordFunc(i,n,u,f),b=t(r,f,d,l),g=h(n.transforms,r),_={},p,A;for(p=0;p<m.length;p++){var c=s.nestedProperty(n,m[p]),S=c.get(),T=new Array(l);for(A=0;A<l;A++)T[A]=S[b[A]];c.set(T)}for(A=0;A<l;A++)_[A]=g(b[A]);r._indexToPoints=_,n._length=l}}};function t(i,n,r,f){var u=new Array(f),l=new Array(f),m;for(m=0;m<f;m++)u[m]={v:n[m],i:m};for(u.sort(a(i,r)),m=0;m<f;m++)l[m]=u[m].i;return l}function a(i,n){switch(i.order){case"ascending":return function(r,f){var u=n(r.v),l=n(f.v);return u===y?1:l===y?-1:u-l};case"descending":return function(r,f){var u=n(r.v),l=n(f.v);return u===y?1:l===y?-1:l-u}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1121}],1123:[function(e,I,F){F.version="2.11.1"},{}],1124:[function(e,I,F){(function(s){(function(){(function(o){if(typeof F=="object"&&typeof I!="undefined")I.exports=o();else{var h;typeof window!="undefined"?h=window:typeof s!="undefined"?h=s:typeof self!="undefined"?h=self:h=this,h.stackgl=o()}})(function(){return function(){function o(h,y,t){function a(r,f){if(!y[r]){if(!h[r]){var u=typeof e=="function"&&e;if(!f&&u)return u(r,!0);if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var m=y[r]={exports:{}};h[r][0].call(m.exports,function(d){var b=h[r][1][d];return a(b||d)},m,m.exports,o,h,y,t)}return y[r].exports}for(var i=typeof e=="function"&&e,n=0;n<t.length;n++)a(t[n]);return a}return o}()({1:[function(o,h,y){y.byteLength=l,y.toByteArray=d,y.fromByteArray=_;for(var t=[],a=[],i=typeof Uint8Array!="undefined"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,f=n.length;r<f;++r)t[r]=n[r],a[n.charCodeAt(r)]=r;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function u(p){var A=p.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=p.indexOf("=");c===-1&&(c=A);var S=c===A?0:4-c%4;return[c,S]}function l(p){var A=u(p),c=A[0],S=A[1];return(c+S)*3/4-S}function m(p,A,c){return(A+c)*3/4-c}function d(p){var A,c=u(p),S=c[0],T=c[1],x=new i(m(p,S,T)),w=0,v=T>0?S-4:S,C;for(C=0;C<v;C+=4)A=a[p.charCodeAt(C)]<<18|a[p.charCodeAt(C+1)]<<12|a[p.charCodeAt(C+2)]<<6|a[p.charCodeAt(C+3)],x[w++]=A>>16&255,x[w++]=A>>8&255,x[w++]=A&255;return T===2&&(A=a[p.charCodeAt(C)]<<2|a[p.charCodeAt(C+1)]>>4,x[w++]=A&255),T===1&&(A=a[p.charCodeAt(C)]<<10|a[p.charCodeAt(C+1)]<<4|a[p.charCodeAt(C+2)]>>2,x[w++]=A>>8&255,x[w++]=A&255),x}function b(p){return t[p>>18&63]+t[p>>12&63]+t[p>>6&63]+t[p&63]}function g(p,A,c){for(var S,T=[],x=A;x<c;x+=3)S=(p[x]<<16&16711680)+(p[x+1]<<8&65280)+(p[x+2]&255),T.push(b(S));return T.join("")}function _(p){for(var A,c=p.length,S=c%3,T=[],x=16383,w=0,v=c-S;w<v;w+=x)T.push(g(p,w,w+x>v?v:w+x));return S===1?(A=p[c-1],T.push(t[A>>2]+t[A<<4&63]+"==")):S===2&&(A=(p[c-2]<<8)+p[c-1],T.push(t[A>>10]+t[A>>4&63]+t[A<<2&63]+"=")),T.join("")}},{}],2:[function(o,h,y){},{}],3:[function(o,h,y){(function(t){(function(){var a=o("base64-js"),i=o("ieee754");y.Buffer=u,y.SlowBuffer=S,y.INSPECT_MAX_BYTES=50;var n=2147483647;y.kMaxLength=n,u.TYPED_ARRAY_SUPPORT=r(),!u.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{var ce=new Uint8Array(1);return ce.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ce.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function f(ce){if(ce>n)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var pe=new Uint8Array(ce);return pe.__proto__=u.prototype,pe}function u(ce,pe,xe){if(typeof ce=="number"){if(typeof pe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ce)}return l(ce,pe,xe)}typeof Symbol!="undefined"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192;function l(ce,pe,xe){if(typeof ce=="string")return g(ce,pe);if(ArrayBuffer.isView(ce))return _(ce);if(ce==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(se(ce,ArrayBuffer)||ce&&se(ce.buffer,ArrayBuffer))return p(ce,pe,xe);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Se=ce.valueOf&&ce.valueOf();if(Se!=null&&Se!==ce)return u.from(Se,pe,xe);var Ae=A(ce);if(Ae)return Ae;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return u.from(ce[Symbol.toPrimitive]("string"),pe,xe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}u.from=function(ce,pe,xe){return l(ce,pe,xe)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array;function m(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function d(ce,pe,xe){return m(ce),ce<=0?f(ce):pe!==void 0?typeof xe=="string"?f(ce).fill(pe,xe):f(ce).fill(pe):f(ce)}u.alloc=function(ce,pe,xe){return d(ce,pe,xe)};function b(ce){return m(ce),f(ce<0?0:c(ce)|0)}u.allocUnsafe=function(ce){return b(ce)},u.allocUnsafeSlow=function(ce){return b(ce)};function g(ce,pe){if((typeof pe!="string"||pe==="")&&(pe="utf8"),!u.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var xe=T(ce,pe)|0,Se=f(xe),Ae=Se.write(ce,pe);return Ae!==xe&&(Se=Se.slice(0,Ae)),Se}function _(ce){for(var pe=ce.length<0?0:c(ce.length)|0,xe=f(pe),Se=0;Se<pe;Se+=1)xe[Se]=ce[Se]&255;return xe}function p(ce,pe,xe){if(pe<0||ce.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<pe+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var Se;return pe===void 0&&xe===void 0?Se=new Uint8Array(ce):xe===void 0?Se=new Uint8Array(ce,pe):Se=new Uint8Array(ce,pe,xe),Se.__proto__=u.prototype,Se}function A(ce){if(u.isBuffer(ce)){var pe=c(ce.length)|0,xe=f(pe);return xe.length===0||ce.copy(xe,0,0,pe),xe}if(ce.length!==void 0)return typeof ce.length!="number"||me(ce.length)?f(0):_(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return _(ce.data)}function c(ce){if(ce>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return ce|0}function S(ce){return+ce!=ce&&(ce=0),u.alloc(+ce)}u.isBuffer=function(pe){return pe!=null&&pe._isBuffer===!0&&pe!==u.prototype},u.compare=function(pe,xe){if(se(pe,Uint8Array)&&(pe=u.from(pe,pe.offset,pe.byteLength)),se(xe,Uint8Array)&&(xe=u.from(xe,xe.offset,xe.byteLength)),!u.isBuffer(pe)||!u.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pe===xe)return 0;for(var Se=pe.length,Ae=xe.length,Ce=0,Ee=Math.min(Se,Ae);Ce<Ee;++Ce)if(pe[Ce]!==xe[Ce]){Se=pe[Ce],Ae=xe[Ce];break}return Se<Ae?-1:Ae<Se?1:0},u.isEncoding=function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(pe,xe){if(!Array.isArray(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(pe.length===0)return u.alloc(0);var Se;if(xe===void 0)for(xe=0,Se=0;Se<pe.length;++Se)xe+=pe[Se].length;var Ae=u.allocUnsafe(xe),Ce=0;for(Se=0;Se<pe.length;++Se){var Ee=pe[Se];if(se(Ee,Uint8Array)&&(Ee=u.from(Ee)),!u.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(Ae,Ce),Ce+=Ee.length}return Ae};function T(ce,pe){if(u.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||se(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);var xe=ce.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&xe===0)return 0;for(var Ae=!1;;)switch(pe){case"ascii":case"latin1":case"binary":return xe;case"utf8":case"utf-8":return X(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe*2;case"hex":return xe>>>1;case"base64":return ne(ce).length;default:if(Ae)return Se?-1:X(ce).length;pe=(""+pe).toLowerCase(),Ae=!0}}u.byteLength=T;function x(ce,pe,xe){var Se=!1;if((pe===void 0||pe<0)&&(pe=0),pe>this.length||((xe===void 0||xe>this.length)&&(xe=this.length),xe<=0)||(xe>>>=0,pe>>>=0,xe<=pe))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return Q(this,pe,xe);case"utf8":case"utf-8":return H(this,pe,xe);case"ascii":return W(this,pe,xe);case"latin1":case"binary":return re(this,pe,xe);case"base64":return D(this,pe,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,pe,xe);default:if(Se)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),Se=!0}}u.prototype._isBuffer=!0;function w(ce,pe,xe){var Se=ce[pe];ce[pe]=ce[xe],ce[xe]=Se}u.prototype.swap16=function(){var pe=this.length;if(pe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<pe;xe+=2)w(this,xe,xe+1);return this},u.prototype.swap32=function(){var pe=this.length;if(pe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<pe;xe+=4)w(this,xe,xe+3),w(this,xe+1,xe+2);return this},u.prototype.swap64=function(){var pe=this.length;if(pe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<pe;xe+=8)w(this,xe,xe+7),w(this,xe+1,xe+6),w(this,xe+2,xe+5),w(this,xe+3,xe+4);return this},u.prototype.toString=function(){var pe=this.length;return pe===0?"":arguments.length===0?H(this,0,pe):x.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(pe){if(!u.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe?!0:u.compare(this,pe)===0},u.prototype.inspect=function(){var pe="",xe=y.INSPECT_MAX_BYTES;return pe=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(pe+=" ... "),"<Buffer "+pe+">"},u.prototype.compare=function(pe,xe,Se,Ae,Ce){if(se(pe,Uint8Array)&&(pe=u.from(pe,pe.offset,pe.byteLength)),!u.isBuffer(pe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof pe);if(xe===void 0&&(xe=0),Se===void 0&&(Se=pe?pe.length:0),Ae===void 0&&(Ae=0),Ce===void 0&&(Ce=this.length),xe<0||Se>pe.length||Ae<0||Ce>this.length)throw new RangeError("out of range index");if(Ae>=Ce&&xe>=Se)return 0;if(Ae>=Ce)return-1;if(xe>=Se)return 1;if(xe>>>=0,Se>>>=0,Ae>>>=0,Ce>>>=0,this===pe)return 0;for(var Ee=Ce-Ae,Oe=Se-xe,_e=Math.min(Ee,Oe),Re=this.slice(Ae,Ce),Ve=pe.slice(xe,Se),Je=0;Je<_e;++Je)if(Re[Je]!==Ve[Je]){Ee=Re[Je],Oe=Ve[Je];break}return Ee<Oe?-1:Oe<Ee?1:0};function v(ce,pe,xe,Se,Ae){if(ce.length===0)return-1;if(typeof xe=="string"?(Se=xe,xe=0):xe>2147483647?xe=2147483647:xe<-2147483648&&(xe=-2147483648),xe=+xe,me(xe)&&(xe=Ae?0:ce.length-1),xe<0&&(xe=ce.length+xe),xe>=ce.length){if(Ae)return-1;xe=ce.length-1}else if(xe<0)if(Ae)xe=0;else return-1;if(typeof pe=="string"&&(pe=u.from(pe,Se)),u.isBuffer(pe))return pe.length===0?-1:C(ce,pe,xe,Se,Ae);if(typeof pe=="number")return pe=pe&255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(ce,pe,xe):Uint8Array.prototype.lastIndexOf.call(ce,pe,xe):C(ce,[pe],xe,Se,Ae);throw new TypeError("val must be string, number or Buffer")}function C(ce,pe,xe,Se,Ae){var Ce=1,Ee=ce.length,Oe=pe.length;if(Se!==void 0&&(Se=String(Se).toLowerCase(),Se==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(ce.length<2||pe.length<2)return-1;Ce=2,Ee/=2,Oe/=2,xe/=2}function _e(De,je){return Ce===1?De[je]:De.readUInt16BE(je*Ce)}var Re;if(Ae){var Ve=-1;for(Re=xe;Re<Ee;Re++)if(_e(ce,Re)===_e(pe,Ve===-1?0:Re-Ve)){if(Ve===-1&&(Ve=Re),Re-Ve+1===Oe)return Ve*Ce}else Ve!==-1&&(Re-=Re-Ve),Ve=-1}else for(xe+Oe>Ee&&(xe=Ee-Oe),Re=xe;Re>=0;Re--){for(var Je=!0,ze=0;ze<Oe;ze++)if(_e(ce,Re+ze)!==_e(pe,ze)){Je=!1;break}if(Je)return Re}return-1}u.prototype.includes=function(pe,xe,Se){return this.indexOf(pe,xe,Se)!==-1},u.prototype.indexOf=function(pe,xe,Se){return v(this,pe,xe,Se,!0)},u.prototype.lastIndexOf=function(pe,xe,Se){return v(this,pe,xe,Se,!1)};function M(ce,pe,xe,Se){xe=Number(xe)||0;var Ae=ce.length-xe;Se?(Se=Number(Se),Se>Ae&&(Se=Ae)):Se=Ae;var Ce=pe.length;Se>Ce/2&&(Se=Ce/2);for(var Ee=0;Ee<Se;++Ee){var Oe=parseInt(pe.substr(Ee*2,2),16);if(me(Oe))return Ee;ce[xe+Ee]=Oe}return Ee}function E(ce,pe,xe,Se){return oe(X(pe,ce.length-xe),ce,xe,Se)}function L(ce,pe,xe,Se){return oe(J(pe),ce,xe,Se)}function z(ce,pe,xe,Se){return L(ce,pe,xe,Se)}function O(ce,pe,xe,Se){return oe(ne(pe),ce,xe,Se)}function R(ce,pe,xe,Se){return oe(ie(pe,ce.length-xe),ce,xe,Se)}u.prototype.write=function(pe,xe,Se,Ae){if(xe===void 0)Ae="utf8",Se=this.length,xe=0;else if(Se===void 0&&typeof xe=="string")Ae=xe,Se=this.length,xe=0;else if(isFinite(xe))xe=xe>>>0,isFinite(Se)?(Se=Se>>>0,Ae===void 0&&(Ae="utf8")):(Ae=Se,Se=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ce=this.length-xe;if((Se===void 0||Se>Ce)&&(Se=Ce),pe.length>0&&(Se<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var Ee=!1;;)switch(Ae){case"hex":return M(this,pe,xe,Se);case"utf8":case"utf-8":return E(this,pe,xe,Se);case"ascii":return L(this,pe,xe,Se);case"latin1":case"binary":return z(this,pe,xe,Se);case"base64":return O(this,pe,xe,Se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,pe,xe,Se);default:if(Ee)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),Ee=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(ce,pe,xe){return pe===0&&xe===ce.length?a.fromByteArray(ce):a.fromByteArray(ce.slice(pe,xe))}function H(ce,pe,xe){xe=Math.min(ce.length,xe);for(var Se=[],Ae=pe;Ae<xe;){var Ce=ce[Ae],Ee=null,Oe=Ce>239?4:Ce>223?3:Ce>191?2:1;if(Ae+Oe<=xe){var _e,Re,Ve,Je;switch(Oe){case 1:Ce<128&&(Ee=Ce);break;case 2:_e=ce[Ae+1],(_e&192)===128&&(Je=(Ce&31)<<6|_e&63,Je>127&&(Ee=Je));break;case 3:_e=ce[Ae+1],Re=ce[Ae+2],(_e&192)===128&&(Re&192)===128&&(Je=(Ce&15)<<12|(_e&63)<<6|Re&63,Je>2047&&(Je<55296||Je>57343)&&(Ee=Je));break;case 4:_e=ce[Ae+1],Re=ce[Ae+2],Ve=ce[Ae+3],(_e&192)===128&&(Re&192)===128&&(Ve&192)===128&&(Je=(Ce&15)<<18|(_e&63)<<12|(Re&63)<<6|Ve&63,Je>65535&&Je<1114112&&(Ee=Je))}}Ee===null?(Ee=65533,Oe=1):Ee>65535&&(Ee-=65536,Se.push(Ee>>>10&1023|55296),Ee=56320|Ee&1023),Se.push(Ee),Ae+=Oe}return $(Se)}var B=4096;function $(ce){var pe=ce.length;if(pe<=B)return String.fromCharCode.apply(String,ce);for(var xe="",Se=0;Se<pe;)xe+=String.fromCharCode.apply(String,ce.slice(Se,Se+=B));return xe}function W(ce,pe,xe){var Se="";xe=Math.min(ce.length,xe);for(var Ae=pe;Ae<xe;++Ae)Se+=String.fromCharCode(ce[Ae]&127);return Se}function re(ce,pe,xe){var Se="";xe=Math.min(ce.length,xe);for(var Ae=pe;Ae<xe;++Ae)Se+=String.fromCharCode(ce[Ae]);return Se}function Q(ce,pe,xe){var Se=ce.length;(!pe||pe<0)&&(pe=0),(!xe||xe<0||xe>Se)&&(xe=Se);for(var Ae="",Ce=pe;Ce<xe;++Ce)Ae+=q(ce[Ce]);return Ae}function Z(ce,pe,xe){for(var Se=ce.slice(pe,xe),Ae="",Ce=0;Ce<Se.length;Ce+=2)Ae+=String.fromCharCode(Se[Ce]+Se[Ce+1]*256);return Ae}u.prototype.slice=function(pe,xe){var Se=this.length;pe=~~pe,xe=xe===void 0?Se:~~xe,pe<0?(pe+=Se,pe<0&&(pe=0)):pe>Se&&(pe=Se),xe<0?(xe+=Se,xe<0&&(xe=0)):xe>Se&&(xe=Se),xe<pe&&(xe=pe);var Ae=this.subarray(pe,xe);return Ae.__proto__=u.prototype,Ae};function K(ce,pe,xe){if(ce%1!==0||ce<0)throw new RangeError("offset is not uint");if(ce+pe>xe)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(pe,xe,Se){pe=pe>>>0,xe=xe>>>0,Se||K(pe,xe,this.length);for(var Ae=this[pe],Ce=1,Ee=0;++Ee<xe&&(Ce*=256);)Ae+=this[pe+Ee]*Ce;return Ae},u.prototype.readUIntBE=function(pe,xe,Se){pe=pe>>>0,xe=xe>>>0,Se||K(pe,xe,this.length);for(var Ae=this[pe+--xe],Ce=1;xe>0&&(Ce*=256);)Ae+=this[pe+--xe]*Ce;return Ae},u.prototype.readUInt8=function(pe,xe){return pe=pe>>>0,xe||K(pe,1,this.length),this[pe]},u.prototype.readUInt16LE=function(pe,xe){return pe=pe>>>0,xe||K(pe,2,this.length),this[pe]|this[pe+1]<<8},u.prototype.readUInt16BE=function(pe,xe){return pe=pe>>>0,xe||K(pe,2,this.length),this[pe]<<8|this[pe+1]},u.prototype.readUInt32LE=function(pe,xe){return pe=pe>>>0,xe||K(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+this[pe+3]*16777216},u.prototype.readUInt32BE=function(pe,xe){return pe=pe>>>0,xe||K(pe,4,this.length),this[pe]*16777216+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},u.prototype.readIntLE=function(pe,xe,Se){pe=pe>>>0,xe=xe>>>0,Se||K(pe,xe,this.length);for(var Ae=this[pe],Ce=1,Ee=0;++Ee<xe&&(Ce*=256);)Ae+=this[pe+Ee]*Ce;return Ce*=128,Ae>=Ce&&(Ae-=Math.pow(2,8*xe)),Ae},u.prototype.readIntBE=function(pe,xe,Se){pe=pe>>>0,xe=xe>>>0,Se||K(pe,xe,this.length);for(var Ae=xe,Ce=1,Ee=this[pe+--Ae];Ae>0&&(Ce*=256);)Ee+=this[pe+--Ae]*Ce;return Ce*=128,Ee>=Ce&&(Ee-=Math.pow(2,8*xe)),Ee},u.prototype.readInt8=function(pe,xe){return pe=pe>>>0,xe||K(pe,1,this.length),this[pe]&128?(255-this[pe]+1)*-1:this[pe]},u.prototype.readInt16LE=function(pe,xe){pe=pe>>>0,xe||K(pe,2,this.length);var Se=this[pe]|this[pe+1]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt16BE=function(pe,xe){pe=pe>>>0,xe||K(pe,2,this.length);var Se=this[pe+1]|this[pe]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt32LE=function(pe,xe){return pe=pe>>>0,xe||K(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},u.prototype.readInt32BE=function(pe,xe){return pe=pe>>>0,xe||K(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},u.prototype.readFloatLE=function(pe,xe){return pe=pe>>>0,xe||K(pe,4,this.length),i.read(this,pe,!0,23,4)},u.prototype.readFloatBE=function(pe,xe){return pe=pe>>>0,xe||K(pe,4,this.length),i.read(this,pe,!1,23,4)},u.prototype.readDoubleLE=function(pe,xe){return pe=pe>>>0,xe||K(pe,8,this.length),i.read(this,pe,!0,52,8)},u.prototype.readDoubleBE=function(pe,xe){return pe=pe>>>0,xe||K(pe,8,this.length),i.read(this,pe,!1,52,8)};function le(ce,pe,xe,Se,Ae,Ce){if(!u.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(pe>Ae||pe<Ce)throw new RangeError('"value" argument is out of bounds');if(xe+Se>ce.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(pe,xe,Se,Ae){if(pe=+pe,xe=xe>>>0,Se=Se>>>0,!Ae){var Ce=Math.pow(2,8*Se)-1;le(this,pe,xe,Se,Ce,0)}var Ee=1,Oe=0;for(this[xe]=pe&255;++Oe<Se&&(Ee*=256);)this[xe+Oe]=pe/Ee&255;return xe+Se},u.prototype.writeUIntBE=function(pe,xe,Se,Ae){if(pe=+pe,xe=xe>>>0,Se=Se>>>0,!Ae){var Ce=Math.pow(2,8*Se)-1;le(this,pe,xe,Se,Ce,0)}var Ee=Se-1,Oe=1;for(this[xe+Ee]=pe&255;--Ee>=0&&(Oe*=256);)this[xe+Ee]=pe/Oe&255;return xe+Se},u.prototype.writeUInt8=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,1,255,0),this[xe]=pe&255,xe+1},u.prototype.writeUInt16LE=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,2,65535,0),this[xe]=pe&255,this[xe+1]=pe>>>8,xe+2},u.prototype.writeUInt16BE=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,2,65535,0),this[xe]=pe>>>8,this[xe+1]=pe&255,xe+2},u.prototype.writeUInt32LE=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,4,4294967295,0),this[xe+3]=pe>>>24,this[xe+2]=pe>>>16,this[xe+1]=pe>>>8,this[xe]=pe&255,xe+4},u.prototype.writeUInt32BE=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,4,4294967295,0),this[xe]=pe>>>24,this[xe+1]=pe>>>16,this[xe+2]=pe>>>8,this[xe+3]=pe&255,xe+4},u.prototype.writeIntLE=function(pe,xe,Se,Ae){if(pe=+pe,xe=xe>>>0,!Ae){var Ce=Math.pow(2,8*Se-1);le(this,pe,xe,Se,Ce-1,-Ce)}var Ee=0,Oe=1,_e=0;for(this[xe]=pe&255;++Ee<Se&&(Oe*=256);)pe<0&&_e===0&&this[xe+Ee-1]!==0&&(_e=1),this[xe+Ee]=(pe/Oe>>0)-_e&255;return xe+Se},u.prototype.writeIntBE=function(pe,xe,Se,Ae){if(pe=+pe,xe=xe>>>0,!Ae){var Ce=Math.pow(2,8*Se-1);le(this,pe,xe,Se,Ce-1,-Ce)}var Ee=Se-1,Oe=1,_e=0;for(this[xe+Ee]=pe&255;--Ee>=0&&(Oe*=256);)pe<0&&_e===0&&this[xe+Ee+1]!==0&&(_e=1),this[xe+Ee]=(pe/Oe>>0)-_e&255;return xe+Se},u.prototype.writeInt8=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,1,127,-128),pe<0&&(pe=255+pe+1),this[xe]=pe&255,xe+1},u.prototype.writeInt16LE=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,2,32767,-32768),this[xe]=pe&255,this[xe+1]=pe>>>8,xe+2},u.prototype.writeInt16BE=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,2,32767,-32768),this[xe]=pe>>>8,this[xe+1]=pe&255,xe+2},u.prototype.writeInt32LE=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,4,2147483647,-2147483648),this[xe]=pe&255,this[xe+1]=pe>>>8,this[xe+2]=pe>>>16,this[xe+3]=pe>>>24,xe+4},u.prototype.writeInt32BE=function(pe,xe,Se){return pe=+pe,xe=xe>>>0,Se||le(this,pe,xe,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),this[xe]=pe>>>24,this[xe+1]=pe>>>16,this[xe+2]=pe>>>8,this[xe+3]=pe&255,xe+4};function fe(ce,pe,xe,Se,Ae,Ce){if(xe+Se>ce.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("Index out of range")}function ue(ce,pe,xe,Se,Ae){return pe=+pe,xe=xe>>>0,Ae||fe(ce,pe,xe,4),i.write(ce,pe,xe,Se,23,4),xe+4}u.prototype.writeFloatLE=function(pe,xe,Se){return ue(this,pe,xe,!0,Se)},u.prototype.writeFloatBE=function(pe,xe,Se){return ue(this,pe,xe,!1,Se)};function V(ce,pe,xe,Se,Ae){return pe=+pe,xe=xe>>>0,Ae||fe(ce,pe,xe,8),i.write(ce,pe,xe,Se,52,8),xe+8}u.prototype.writeDoubleLE=function(pe,xe,Se){return V(this,pe,xe,!0,Se)},u.prototype.writeDoubleBE=function(pe,xe,Se){return V(this,pe,xe,!1,Se)},u.prototype.copy=function(pe,xe,Se,Ae){if(!u.isBuffer(pe))throw new TypeError("argument should be a Buffer");if(Se||(Se=0),!Ae&&Ae!==0&&(Ae=this.length),xe>=pe.length&&(xe=pe.length),xe||(xe=0),Ae>0&&Ae<Se&&(Ae=Se),Ae===Se||pe.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(Se<0||Se>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),pe.length-xe<Ae-Se&&(Ae=pe.length-xe+Se);var Ce=Ae-Se;if(this===pe&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(xe,Se,Ae);else if(this===pe&&Se<xe&&xe<Ae)for(var Ee=Ce-1;Ee>=0;--Ee)pe[Ee+xe]=this[Ee+Se];else Uint8Array.prototype.set.call(pe,this.subarray(Se,Ae),xe);return Ce},u.prototype.fill=function(pe,xe,Se,Ae){if(typeof pe=="string"){if(typeof xe=="string"?(Ae=xe,xe=0,Se=this.length):typeof Se=="string"&&(Ae=Se,Se=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!u.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(pe.length===1){var Ce=pe.charCodeAt(0);(Ae==="utf8"&&Ce<128||Ae==="latin1")&&(pe=Ce)}}else typeof pe=="number"&&(pe=pe&255);if(xe<0||this.length<xe||this.length<Se)throw new RangeError("Out of range index");if(Se<=xe)return this;xe=xe>>>0,Se=Se===void 0?this.length:Se>>>0,pe||(pe=0);var Ee;if(typeof pe=="number")for(Ee=xe;Ee<Se;++Ee)this[Ee]=pe;else{var Oe=u.isBuffer(pe)?pe:u.from(pe,Ae),_e=Oe.length;if(_e===0)throw new TypeError('The value "'+pe+'" is invalid for argument "value"');for(Ee=0;Ee<Se-xe;++Ee)this[Ee+xe]=Oe[Ee%_e]}return this};var j=/[^+/0-9A-Za-z-_]/g;function ee(ce){if(ce=ce.split("=")[0],ce=ce.trim().replace(j,""),ce.length<2)return"";for(;ce.length%4!==0;)ce=ce+"=";return ce}function q(ce){return ce<16?"0"+ce.toString(16):ce.toString(16)}function X(ce,pe){pe=pe||1/0;for(var xe,Se=ce.length,Ae=null,Ce=[],Ee=0;Ee<Se;++Ee){if(xe=ce.charCodeAt(Ee),xe>55295&&xe<57344){if(!Ae){if(xe>56319){(pe-=3)>-1&&Ce.push(239,191,189);continue}else if(Ee+1===Se){(pe-=3)>-1&&Ce.push(239,191,189);continue}Ae=xe;continue}if(xe<56320){(pe-=3)>-1&&Ce.push(239,191,189),Ae=xe;continue}xe=(Ae-55296<<10|xe-56320)+65536}else Ae&&(pe-=3)>-1&&Ce.push(239,191,189);if(Ae=null,xe<128){if((pe-=1)<0)break;Ce.push(xe)}else if(xe<2048){if((pe-=2)<0)break;Ce.push(xe>>6|192,xe&63|128)}else if(xe<65536){if((pe-=3)<0)break;Ce.push(xe>>12|224,xe>>6&63|128,xe&63|128)}else if(xe<1114112){if((pe-=4)<0)break;Ce.push(xe>>18|240,xe>>12&63|128,xe>>6&63|128,xe&63|128)}else throw new Error("Invalid code point")}return Ce}function J(ce){for(var pe=[],xe=0;xe<ce.length;++xe)pe.push(ce.charCodeAt(xe)&255);return pe}function ie(ce,pe){for(var xe,Se,Ae,Ce=[],Ee=0;Ee<ce.length&&!((pe-=2)<0);++Ee)xe=ce.charCodeAt(Ee),Se=xe>>8,Ae=xe%256,Ce.push(Ae),Ce.push(Se);return Ce}function ne(ce){return a.toByteArray(ee(ce))}function oe(ce,pe,xe,Se){for(var Ae=0;Ae<Se&&!(Ae+xe>=pe.length||Ae>=ce.length);++Ae)pe[Ae+xe]=ce[Ae];return Ae}function se(ce,pe){return ce instanceof pe||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===pe.name}function me(ce){return ce!==ce}}).call(this)}).call(this,o("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(o,h,y){y.read=function(t,a,i,n,r){var f,u,l=r*8-n-1,m=(1<<l)-1,d=m>>1,b=-7,g=i?r-1:0,_=i?-1:1,p=t[a+g];for(g+=_,f=p&(1<<-b)-1,p>>=-b,b+=l;b>0;f=f*256+t[a+g],g+=_,b-=8);for(u=f&(1<<-b)-1,f>>=-b,b+=n;b>0;u=u*256+t[a+g],g+=_,b-=8);if(f===0)f=1-d;else{if(f===m)return u?NaN:(p?-1:1)*(1/0);u=u+Math.pow(2,n),f=f-d}return(p?-1:1)*u*Math.pow(2,f-n)},y.write=function(t,a,i,n,r,f){var u,l,m,d=f*8-r-1,b=(1<<d)-1,g=b>>1,_=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:f-1,A=n?1:-1,c=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(l=isNaN(a)?1:0,u=b):(u=Math.floor(Math.log(a)/Math.LN2),a*(m=Math.pow(2,-u))<1&&(u--,m*=2),u+g>=1?a+=_/m:a+=_*Math.pow(2,1-g),a*m>=2&&(u++,m/=2),u+g>=b?(l=0,u=b):u+g>=1?(l=(a*m-1)*Math.pow(2,r),u=u+g):(l=a*Math.pow(2,g-1)*Math.pow(2,r),u=0));r>=8;t[i+p]=l&255,p+=A,l/=256,r-=8);for(u=u<<r|l,d+=r;d>0;t[i+p]=u&255,p+=A,u/=256,d-=8);t[i+p-A]|=c*128}},{}],5:[function(o,h,y){var t=h.exports={},a,i;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=n}catch{a=n}try{typeof clearTimeout=="function"?i=clearTimeout:i=r}catch{i=r}})();function f(c){if(a===setTimeout)return setTimeout(c,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(c,0);try{return a(c,0)}catch{try{return a.call(null,c,0)}catch{return a.call(this,c,0)}}}function u(c){if(i===clearTimeout)return clearTimeout(c);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(c);try{return i(c)}catch{try{return i.call(null,c)}catch{return i.call(this,c)}}}var l=[],m=!1,d,b=-1;function g(){!m||!d||(m=!1,d.length?l=d.concat(l):b=-1,l.length&&_())}function _(){if(!m){var c=f(g);m=!0;for(var S=l.length;S;){for(d=l,l=[];++b<S;)d&&d[b].run();b=-1,S=l.length}d=null,m=!1,u(c)}}t.nextTick=function(c){var S=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)S[T-1]=arguments[T];l.push(new p(c,S)),l.length===1&&!m&&f(_)};function p(c,S){this.fun=c,this.array=S}p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function A(){}t.on=A,t.addListener=A,t.once=A,t.off=A,t.removeListener=A,t.removeAllListeners=A,t.emit=A,t.prependListener=A,t.prependOnceListener=A,t.listeners=function(c){return[]},t.binding=function(c){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(c){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(o,h,y){h.exports={alpha_shape:o("alpha-shape"),convex_hull:o("convex-hull"),delaunay_triangulate:o("delaunay-triangulate"),gl_cone3d:o("gl-cone3d"),gl_error3d:o("gl-error3d"),gl_heatmap2d:o("gl-heatmap2d"),gl_line3d:o("gl-line3d"),gl_mesh3d:o("gl-mesh3d"),gl_plot2d:o("gl-plot2d"),gl_plot3d:o("gl-plot3d"),gl_pointcloud2d:o("gl-pointcloud2d"),gl_scatter3d:o("gl-scatter3d"),gl_select_box:o("gl-select-box"),gl_spikes2d:o("gl-spikes2d"),gl_streamtube3d:o("gl-streamtube3d"),gl_surface3d:o("gl-surface3d"),ndarray:o("ndarray"),ndarray_linear_interpolate:o("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(o,h,y){h.exports=f;var t=o("turntable-camera-controller"),a=o("orbit-camera-controller"),i=o("matrix-camera-controller");function n(u,l){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(m){return u[m]}),this._mode=l,this._active=u[l],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=n.prototype;r.flush=function(u){for(var l=this._controllerList,m=0;m<l.length;++m)l[m].flush(u)},r.idle=function(u){for(var l=this._controllerList,m=0;m<l.length;++m)l[m].idle(u)},r.lookAt=function(u,l,m,d){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].lookAt(u,l,m,d)},r.rotate=function(u,l,m,d){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].rotate(u,l,m,d)},r.pan=function(u,l,m,d){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].pan(u,l,m,d)},r.translate=function(u,l,m,d){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].translate(u,l,m,d)},r.setMatrix=function(u,l){for(var m=this._controllerList,d=0;d<m.length;++d)m[d].setMatrix(u,l)},r.setDistanceLimits=function(u,l){for(var m=this._controllerList,d=0;d<m.length;++d)m[d].setDistanceLimits(u,l)},r.setDistance=function(u,l){for(var m=this._controllerList,d=0;d<m.length;++d)m[d].setDistance(u,l)},r.recalcMatrix=function(u){this._active.recalcMatrix(u)},r.getDistance=function(u){return this._active.getDistance(u)},r.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},r.lastT=function(){return this._active.lastT()},r.setMode=function(u){if(u!==this._mode){var l=this._controllerNames.indexOf(u);if(!(l<0)){var m=this._active,d=this._controllerList[l],b=Math.max(m.lastT(),d.lastT());m.recalcMatrix(b),d.setMatrix(b,m.computedMatrix),this._active=d,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode};function f(u){u=u||{};var l=u.eye||[0,0,1],m=u.center||[0,0,0],d=u.up||[0,1,0],b=u.distanceLimits||[0,1/0],g=u.mode||"turntable",_=t(),p=a(),A=i();return _.setDistanceLimits(b[0],b[1]),_.lookAt(0,l,m,d),p.setDistanceLimits(b[0],b[1]),p.lookAt(0,l,m,d),A.setDistanceLimits(b[0],b[1]),A.lookAt(0,l,m,d),new n({turntable:_,orbit:p,matrix:A},g)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(o,h,y){var t=typeof WeakMap=="undefined"?o("weak-map"):WeakMap,a=o("gl-buffer"),i=o("gl-vao"),n=new t;function r(f){var u=n.get(f),l=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!l||!f.isBuffer(l)){var m=a(f,new Float32Array([-1,-1,-1,4,4,-1]));u=i(f,[{buffer:m,type:f.FLOAT,size:2}]),u._triangleBuffer=m,n.set(f,u)}u.bind(),f.drawArrays(f.TRIANGLES,0,3),u.unbind()}h.exports=r},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(o,h,y){var t=o("pad-left");h.exports=a;function a(i,n,r){n=typeof n=="number"?n:1,r=r||": ";var f=i.split(/\r?\n/),u=String(f.length+n-1).length;return f.map(function(l,m){var d=m+n,b=String(d).length,g=t(d,u-b);return g+r+l}).join(`
`)}},{"pad-left":264}],10:[function(o,h,y){h.exports=i;var t=o("robust-orientation");function a(n,r){for(var f=new Array(r+1),u=0;u<n.length;++u)f[u]=n[u];for(var u=0;u<=n.length;++u){for(var l=n.length;l<=r;++l){for(var m=new Array(r),d=0;d<r;++d)m[d]=Math.pow(l+1-u,d);f[l]=m}var b=t.apply(void 0,f);if(b)return!0}return!1}function i(n){var r=n.length;if(r===0)return[];if(r===1)return[0];for(var f=n[0].length,u=[n[0]],l=[0],m=1;m<r;++m){if(u.push(n[m]),!a(u,f)){u.pop();continue}if(l.push(m),l.length===f+1)return l}return l}},{"robust-orientation":284}],11:[function(o,h,y){h.exports=i;var t=o("delaunay-triangulate"),a=o("circumradius");function i(n,r){return t(r).filter(function(f){for(var u=new Array(f.length),l=0;l<f.length;++l)u[l]=r[f[l]];return a(u)*n<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(o,h,y){h.exports=i;var t=o("alpha-complex"),a=o("simplicial-complex-boundary");function i(n,r){return a(t(n,r))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(o,h,y){h.exports=function(a){return atob(a)}},{}],14:[function(o,h,y){h.exports=i;var t=o("robust-linear-solve");function a(n){for(var r=0,f=0;f<n.length;++f)r+=n[f];return r}function i(n,r){for(var f=r.length,u=new Array(f+1),l=0;l<f;++l){for(var m=new Array(f+1),d=0;d<=f;++d)m[d]=n[d][l];u[l]=m}u[f]=new Array(f+1);for(var l=0;l<=f;++l)u[f][l]=1;for(var b=new Array(f+1),l=0;l<f;++l)b[l]=r[l];b[f]=1;var g=t(u,b),_=a(g[f+1]);_===0&&(_=1);for(var p=new Array(f+1),l=0;l<=f;++l)p[l]=a(g[l])/_;return p}},{"robust-linear-solve":283}],15:[function(o,h,y){var t=o("./lib/rationalize");h.exports=a;function a(i,n){return t(i[0].mul(n[1]).add(n[0].mul(i[1])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],16:[function(o,h,y){h.exports=t;function t(a,i){return a[0].mul(i[1]).cmp(i[0].mul(a[1]))}},{}],17:[function(o,h,y){var t=o("./lib/rationalize");h.exports=a;function a(i,n){return t(i[0].mul(n[1]),i[1].mul(n[0]))}},{"./lib/rationalize":25}],18:[function(o,h,y){var t=o("./is-rat"),a=o("./lib/is-bn"),i=o("./lib/num-to-bn"),n=o("./lib/str-to-bn"),r=o("./lib/rationalize"),f=o("./div");h.exports=u;function u(l,m){if(t(l))return m?f(l,u(m)):[l[0].clone(),l[1].clone()];var d=0,b,g;if(a(l))b=l.clone();else if(typeof l=="string")b=n(l);else{if(l===0)return[i(0),i(1)];if(l===Math.floor(l))b=i(l);else{for(;l!==Math.floor(l);)l=l*Math.pow(2,256),d-=256;b=i(l)}}if(t(m))b.mul(m[1]),g=m[0].clone();else if(a(m))g=m.clone();else if(typeof m=="string")g=n(m);else if(!m)g=i(1);else if(m===Math.floor(m))g=i(m);else{for(;m!==Math.floor(m);)m=m*Math.pow(2,256),d+=256;g=i(m)}return d>0?b=b.ushln(d):d<0&&(g=g.ushln(-d)),r(b,g)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(o,h,y){var t=o("./lib/is-bn");h.exports=a;function a(i){return Array.isArray(i)&&i.length===2&&t(i[0])&&t(i[1])}},{"./lib/is-bn":23}],20:[function(o,h,y){var t=o("bn.js");h.exports=a;function a(i){return i.cmp(new t(0))}},{"bn.js":33}],21:[function(o,h,y){var t=o("./bn-sign");h.exports=a;function a(i){var n=i.length,r=i.words,f=0;if(n===1)f=r[0];else if(n===2)f=r[0]+r[1]*67108864;else for(var u=0;u<n;u++){var l=r[u];f+=l*Math.pow(67108864,u)}return t(i)*f}},{"./bn-sign":20}],22:[function(o,h,y){var t=o("double-bits"),a=o("bit-twiddle").countTrailingZeros;h.exports=i;function i(n){var r=a(t.lo(n));if(r<32)return r;var f=a(t.hi(n));return f>20?52:f+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(o,h,y){o("bn.js"),h.exports=t;function t(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(o,h,y){var t=o("bn.js"),a=o("double-bits");h.exports=i;function i(n){var r=a.exponent(n);return r<52?new t(n):new t(n*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(o,h,y){var t=o("./num-to-bn"),a=o("./bn-sign");h.exports=i;function i(n,r){var f=a(n),u=a(r);if(f===0)return[t(0),t(1)];if(u===0)return[t(0),t(0)];u<0&&(n=n.neg(),r=r.neg());var l=n.gcd(r);return l.cmpn(1)?[n.div(l),r.div(l)]:[n,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(o,h,y){var t=o("bn.js");h.exports=a;function a(i){return new t(i)}},{"bn.js":33}],27:[function(o,h,y){var t=o("./lib/rationalize");h.exports=a;function a(i,n){return t(i[0].mul(n[0]),i[1].mul(n[1]))}},{"./lib/rationalize":25}],28:[function(o,h,y){var t=o("./lib/bn-sign");h.exports=a;function a(i){return t(i[0])*t(i[1])}},{"./lib/bn-sign":20}],29:[function(o,h,y){var t=o("./lib/rationalize");h.exports=a;function a(i,n){return t(i[0].mul(n[1]).sub(i[1].mul(n[0])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],30:[function(o,h,y){var t=o("./lib/bn-to-num"),a=o("./lib/ctz");h.exports=i;function i(n){var r=n[0],f=n[1];if(r.cmpn(0)===0)return 0;var u=r.abs().divmod(f.abs()),l=u.div,m=t(l),d=u.mod,b=r.negative!==f.negative?-1:1;if(d.cmpn(0)===0)return b*m;if(m){var g=a(m)+4,_=t(d.ushln(g).divRound(f));return b*(m+_*Math.pow(2,-g))}else{var p=f.bitLength()-d.bitLength()+53,_=t(d.ushln(p).divRound(f));return p<1023?b*_*Math.pow(2,-p):(_*=Math.pow(2,-1023),b*_*Math.pow(2,1023-p))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(o,h,y){function t(u,l,m,d,b){for(var g=b+1;d<=b;){var _=d+b>>>1,p=u[_],A=m!==void 0?m(p,l):p-l;A>=0?(g=_,b=_-1):d=_+1}return g}function a(u,l,m,d,b){for(var g=b+1;d<=b;){var _=d+b>>>1,p=u[_],A=m!==void 0?m(p,l):p-l;A>0?(g=_,b=_-1):d=_+1}return g}function i(u,l,m,d,b){for(var g=d-1;d<=b;){var _=d+b>>>1,p=u[_],A=m!==void 0?m(p,l):p-l;A<0?(g=_,d=_+1):b=_-1}return g}function n(u,l,m,d,b){for(var g=d-1;d<=b;){var _=d+b>>>1,p=u[_],A=m!==void 0?m(p,l):p-l;A<=0?(g=_,d=_+1):b=_-1}return g}function r(u,l,m,d,b){for(;d<=b;){var g=d+b>>>1,_=u[g],p=m!==void 0?m(_,l):_-l;if(p===0)return g;p<=0?d=g+1:b=g-1}return-1}function f(u,l,m,d,b,g){return typeof m=="function"?g(u,l,m,d===void 0?0:d|0,b===void 0?u.length-1:b|0):g(u,l,void 0,m===void 0?0:m|0,d===void 0?u.length-1:d|0)}h.exports={ge:function(u,l,m,d,b){return f(u,l,m,d,b,t)},gt:function(u,l,m,d,b){return f(u,l,m,d,b,a)},lt:function(u,l,m,d,b){return f(u,l,m,d,b,i)},le:function(u,l,m,d,b){return f(u,l,m,d,b,n)},eq:function(u,l,m,d,b){return f(u,l,m,d,b,r)}}},{}],32:[function(o,h,y){var t=32;y.INT_BITS=t,y.INT_MAX=2147483647,y.INT_MIN=-1<<t-1,y.sign=function(n){return(n>0)-(n<0)},y.abs=function(n){var r=n>>t-1;return(n^r)-r},y.min=function(n,r){return r^(n^r)&-(n<r)},y.max=function(n,r){return n^(n^r)&-(n<r)},y.isPow2=function(n){return!(n&n-1)&&!!n},y.log2=function(n){var r,f;return r=(n>65535)<<4,n>>>=r,f=(n>255)<<3,n>>>=f,r|=f,f=(n>15)<<2,n>>>=f,r|=f,f=(n>3)<<1,n>>>=f,r|=f,r|n>>1},y.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},y.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function a(n){var r=32;return n&=-n,n&&r--,n&65535&&(r-=16),n&16711935&&(r-=8),n&252645135&&(r-=4),n&858993459&&(r-=2),n&1431655765&&(r-=1),r}y.countTrailingZeros=a,y.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},y.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},y.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var f=r,u=r,l=7;for(f>>>=1;f;f>>>=1)u<<=1,u|=f&1,--l;n[r]=u<<l&255}})(i),y.reverse=function(n){return i[n&255]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},y.interleave2=function(n,r){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n|r<<1},y.deinterleave2=function(n,r){return n=n>>>r&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},y.interleave3=function(n,r,f){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n|=r<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,n|f<<2},y.deinterleave3=function(n,r){return n=n>>>r&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},y.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>a(n)+1}},{}],33:[function(o,h,y){(function(t,a){function i(O,R){if(!O)throw new Error(R||"Assertion failed")}function n(O,R){O.super_=R;var D=function(){};D.prototype=R.prototype,O.prototype=new D,O.prototype.constructor=O}function r(O,R,D){if(r.isBN(O))return O;this.negative=0,this.words=null,this.length=0,this.red=null,O!==null&&((R==="le"||R==="be")&&(D=R,R=10),this._init(O||0,R||10,D||"be"))}typeof t=="object"?t.exports=r:a.BN=r,r.BN=r,r.wordSize=26;var f;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?f=window.Buffer:f=o("buffer").Buffer}catch{}r.isBN=function(R){return R instanceof r?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===r.wordSize&&Array.isArray(R.words)},r.max=function(R,D){return R.cmp(D)>0?R:D},r.min=function(R,D){return R.cmp(D)<0?R:D},r.prototype._init=function(R,D,H){if(typeof R=="number")return this._initNumber(R,D,H);if(typeof R=="object")return this._initArray(R,D,H);D==="hex"&&(D=16),i(D===(D|0)&&D>=2&&D<=36),R=R.toString().replace(/\s+/g,"");var B=0;R[0]==="-"&&(B++,this.negative=1),B<R.length&&(D===16?this._parseHex(R,B,H):(this._parseBase(R,D,B),H==="le"&&this._initArray(this.toArray(),D,H)))},r.prototype._initNumber=function(R,D,H){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(i(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),H==="le"&&this._initArray(this.toArray(),D,H)},r.prototype._initArray=function(R,D,H){if(i(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var $,W,re=0;if(H==="be")for(B=R.length-1,$=0;B>=0;B-=3)W=R[B]|R[B-1]<<8|R[B-2]<<16,this.words[$]|=W<<re&67108863,this.words[$+1]=W>>>26-re&67108863,re+=24,re>=26&&(re-=26,$++);else if(H==="le")for(B=0,$=0;B<R.length;B+=3)W=R[B]|R[B+1]<<8|R[B+2]<<16,this.words[$]|=W<<re&67108863,this.words[$+1]=W>>>26-re&67108863,re+=24,re>=26&&(re-=26,$++);return this.strip()};function u(O,R){var D=O.charCodeAt(R);return D>=65&&D<=70?D-55:D>=97&&D<=102?D-87:D-48&15}function l(O,R,D){var H=u(O,D);return D-1>=R&&(H|=u(O,D-1)<<4),H}r.prototype._parseHex=function(R,D,H){this.length=Math.ceil((R.length-D)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var $=0,W=0,re;if(H==="be")for(B=R.length-1;B>=D;B-=2)re=l(R,D,B)<<$,this.words[W]|=re&67108863,$>=18?($-=18,W+=1,this.words[W]|=re>>>26):$+=8;else{var Q=R.length-D;for(B=Q%2===0?D+1:D;B<R.length;B+=2)re=l(R,D,B)<<$,this.words[W]|=re&67108863,$>=18?($-=18,W+=1,this.words[W]|=re>>>26):$+=8}this.strip()};function m(O,R,D,H){for(var B=0,$=Math.min(O.length,D),W=R;W<$;W++){var re=O.charCodeAt(W)-48;B*=H,re>=49?B+=re-49+10:re>=17?B+=re-17+10:B+=re}return B}r.prototype._parseBase=function(R,D,H){this.words=[0],this.length=1;for(var B=0,$=1;$<=67108863;$*=D)B++;B--,$=$/D|0;for(var W=R.length-H,re=W%B,Q=Math.min(W,W-re)+H,Z=0,K=H;K<Q;K+=B)Z=m(R,K,K+B,D),this.imuln($),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z);if(re!==0){var le=1;for(Z=m(R,K,R.length,D),K=0;K<re;K++)le*=D;this.imuln(le),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z)}this.strip()},r.prototype.copy=function(R){R.words=new Array(this.length);for(var D=0;D<this.length;D++)R.words[D]=this.words[D];R.length=this.length,R.negative=this.negative,R.red=this.red},r.prototype.clone=function(){var R=new r(null);return this.copy(R),R},r.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(R,D){R=R||10,D=D|0||1;var H;if(R===16||R==="hex"){H="";for(var B=0,$=0,W=0;W<this.length;W++){var re=this.words[W],Q=((re<<B|$)&16777215).toString(16);$=re>>>24-B&16777215,$!==0||W!==this.length-1?H=d[6-Q.length]+Q+H:H=Q+H,B+=2,B>=26&&(B-=26,W--)}for($!==0&&(H=$.toString(16)+H);H.length%D!==0;)H="0"+H;return this.negative!==0&&(H="-"+H),H}if(R===(R|0)&&R>=2&&R<=36){var Z=b[R],K=g[R];H="";var le=this.clone();for(le.negative=0;!le.isZero();){var fe=le.modn(K).toString(R);le=le.idivn(K),le.isZero()?H=fe+H:H=d[Z-fe.length]+fe+H}for(this.isZero()&&(H="0"+H);H.length%D!==0;)H="0"+H;return this.negative!==0&&(H="-"+H),H}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(R,D){return i(typeof f!="undefined"),this.toArrayLike(f,R,D)},r.prototype.toArray=function(R,D){return this.toArrayLike(Array,R,D)},r.prototype.toArrayLike=function(R,D,H){var B=this.byteLength(),$=H||Math.max(1,B);i(B<=$,"byte array longer than desired length"),i($>0,"Requested array length <= 0"),this.strip();var W=D==="le",re=new R($),Q,Z,K=this.clone();if(W){for(Z=0;!K.isZero();Z++)Q=K.andln(255),K.iushrn(8),re[Z]=Q;for(;Z<$;Z++)re[Z]=0}else{for(Z=0;Z<$-B;Z++)re[Z]=0;for(Z=0;!K.isZero();Z++)Q=K.andln(255),K.iushrn(8),re[$-Z-1]=Q}return re},Math.clz32?r.prototype._countBits=function(R){return 32-Math.clz32(R)}:r.prototype._countBits=function(R){var D=R,H=0;return D>=4096&&(H+=13,D>>>=13),D>=64&&(H+=7,D>>>=7),D>=8&&(H+=4,D>>>=4),D>=2&&(H+=2,D>>>=2),H+D},r.prototype._zeroBits=function(R){if(R===0)return 26;var D=R,H=0;return(D&8191)===0&&(H+=13,D>>>=13),(D&127)===0&&(H+=7,D>>>=7),(D&15)===0&&(H+=4,D>>>=4),(D&3)===0&&(H+=2,D>>>=2),(D&1)===0&&H++,H},r.prototype.bitLength=function(){var R=this.words[this.length-1],D=this._countBits(R);return(this.length-1)*26+D};function _(O){for(var R=new Array(O.bitLength()),D=0;D<R.length;D++){var H=D/26|0,B=D%26;R[D]=(O.words[H]&1<<B)>>>B}return R}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,D=0;D<this.length;D++){var H=this._zeroBits(this.words[D]);if(R+=H,H!==26)break}return R},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},r.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var D=0;D<R.length;D++)this.words[D]=this.words[D]|R.words[D];return this.strip()},r.prototype.ior=function(R){return i((this.negative|R.negative)===0),this.iuor(R)},r.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},r.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},r.prototype.iuand=function(R){var D;this.length>R.length?D=R:D=this;for(var H=0;H<D.length;H++)this.words[H]=this.words[H]&R.words[H];return this.length=D.length,this.strip()},r.prototype.iand=function(R){return i((this.negative|R.negative)===0),this.iuand(R)},r.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},r.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},r.prototype.iuxor=function(R){var D,H;this.length>R.length?(D=this,H=R):(D=R,H=this);for(var B=0;B<H.length;B++)this.words[B]=D.words[B]^H.words[B];if(this!==D)for(;B<D.length;B++)this.words[B]=D.words[B];return this.length=D.length,this.strip()},r.prototype.ixor=function(R){return i((this.negative|R.negative)===0),this.iuxor(R)},r.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},r.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},r.prototype.inotn=function(R){i(typeof R=="number"&&R>=0);var D=Math.ceil(R/26)|0,H=R%26;this._expand(D),H>0&&D--;for(var B=0;B<D;B++)this.words[B]=~this.words[B]&67108863;return H>0&&(this.words[B]=~this.words[B]&67108863>>26-H),this.strip()},r.prototype.notn=function(R){return this.clone().inotn(R)},r.prototype.setn=function(R,D){i(typeof R=="number"&&R>=0);var H=R/26|0,B=R%26;return this._expand(H+1),D?this.words[H]=this.words[H]|1<<B:this.words[H]=this.words[H]&~(1<<B),this.strip()},r.prototype.iadd=function(R){var D;if(this.negative!==0&&R.negative===0)return this.negative=0,D=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,D=this.isub(R),R.negative=1,D._normSign();var H,B;this.length>R.length?(H=this,B=R):(H=R,B=this);for(var $=0,W=0;W<B.length;W++)D=(H.words[W]|0)+(B.words[W]|0)+$,this.words[W]=D&67108863,$=D>>>26;for(;$!==0&&W<H.length;W++)D=(H.words[W]|0)+$,this.words[W]=D&67108863,$=D>>>26;if(this.length=H.length,$!==0)this.words[this.length]=$,this.length++;else if(H!==this)for(;W<H.length;W++)this.words[W]=H.words[W];return this},r.prototype.add=function(R){var D;return R.negative!==0&&this.negative===0?(R.negative=0,D=this.sub(R),R.negative^=1,D):R.negative===0&&this.negative!==0?(this.negative=0,D=R.sub(this),this.negative=1,D):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},r.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var D=this.iadd(R);return R.negative=1,D._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var H=this.cmp(R);if(H===0)return this.negative=0,this.length=1,this.words[0]=0,this;var B,$;H>0?(B=this,$=R):(B=R,$=this);for(var W=0,re=0;re<$.length;re++)D=(B.words[re]|0)-($.words[re]|0)+W,W=D>>26,this.words[re]=D&67108863;for(;W!==0&&re<B.length;re++)D=(B.words[re]|0)+W,W=D>>26,this.words[re]=D&67108863;if(W===0&&re<B.length&&B!==this)for(;re<B.length;re++)this.words[re]=B.words[re];return this.length=Math.max(this.length,re),B!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(R){return this.clone().isub(R)};function p(O,R,D){D.negative=R.negative^O.negative;var H=O.length+R.length|0;D.length=H,H=H-1|0;var B=O.words[0]|0,$=R.words[0]|0,W=B*$,re=W&67108863,Q=W/67108864|0;D.words[0]=re;for(var Z=1;Z<H;Z++){for(var K=Q>>>26,le=Q&67108863,fe=Math.min(Z,R.length-1),ue=Math.max(0,Z-O.length+1);ue<=fe;ue++){var V=Z-ue|0;B=O.words[V]|0,$=R.words[ue]|0,W=B*$+le,K+=W/67108864|0,le=W&67108863}D.words[Z]=le|0,Q=K|0}return Q!==0?D.words[Z]=Q|0:D.length--,D.strip()}var A=function(R,D,H){var B=R.words,$=D.words,W=H.words,re=0,Q,Z,K,le=B[0]|0,fe=le&8191,ue=le>>>13,V=B[1]|0,j=V&8191,ee=V>>>13,q=B[2]|0,X=q&8191,J=q>>>13,ie=B[3]|0,ne=ie&8191,oe=ie>>>13,se=B[4]|0,me=se&8191,ce=se>>>13,pe=B[5]|0,xe=pe&8191,Se=pe>>>13,Ae=B[6]|0,Ce=Ae&8191,Ee=Ae>>>13,Oe=B[7]|0,_e=Oe&8191,Re=Oe>>>13,Ve=B[8]|0,Je=Ve&8191,ze=Ve>>>13,De=B[9]|0,je=De&8191,dt=De>>>13,Et=$[0]|0,$t=Et&8191,wt=Et>>>13,Ot=$[1]|0,Vt=Ot&8191,kt=Ot>>>13,St=$[2]|0,ot=St&8191,ht=St>>>13,Ke=$[3]|0,Pe=Ke&8191,We=Ke>>>13,Qe=$[4]|0,ut=Qe&8191,It=Qe>>>13,Tt=$[5]|0,Bt=Tt&8191,rr=Tt>>>13,Ut=$[6]|0,Qt=Ut&8191,ar=Ut>>>13,nr=$[7]|0,cr=nr&8191,Kr=nr>>>13,yn=$[8]|0,Qr=yn&8191,st=yn>>>13,Gt=$[9]|0,Zt=Gt&8191,Ht=Gt>>>13;H.negative=R.negative^D.negative,H.length=19,Q=Math.imul(fe,$t),Z=Math.imul(fe,wt),Z=Z+Math.imul(ue,$t)|0,K=Math.imul(ue,wt);var _r=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(_r>>>26)|0,_r&=67108863,Q=Math.imul(j,$t),Z=Math.imul(j,wt),Z=Z+Math.imul(ee,$t)|0,K=Math.imul(ee,wt),Q=Q+Math.imul(fe,Vt)|0,Z=Z+Math.imul(fe,kt)|0,Z=Z+Math.imul(ue,Vt)|0,K=K+Math.imul(ue,kt)|0;var it=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(it>>>26)|0,it&=67108863,Q=Math.imul(X,$t),Z=Math.imul(X,wt),Z=Z+Math.imul(J,$t)|0,K=Math.imul(J,wt),Q=Q+Math.imul(j,Vt)|0,Z=Z+Math.imul(j,kt)|0,Z=Z+Math.imul(ee,Vt)|0,K=K+Math.imul(ee,kt)|0,Q=Q+Math.imul(fe,ot)|0,Z=Z+Math.imul(fe,ht)|0,Z=Z+Math.imul(ue,ot)|0,K=K+Math.imul(ue,ht)|0;var Te=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(Te>>>26)|0,Te&=67108863,Q=Math.imul(ne,$t),Z=Math.imul(ne,wt),Z=Z+Math.imul(oe,$t)|0,K=Math.imul(oe,wt),Q=Q+Math.imul(X,Vt)|0,Z=Z+Math.imul(X,kt)|0,Z=Z+Math.imul(J,Vt)|0,K=K+Math.imul(J,kt)|0,Q=Q+Math.imul(j,ot)|0,Z=Z+Math.imul(j,ht)|0,Z=Z+Math.imul(ee,ot)|0,K=K+Math.imul(ee,ht)|0,Q=Q+Math.imul(fe,Pe)|0,Z=Z+Math.imul(fe,We)|0,Z=Z+Math.imul(ue,Pe)|0,K=K+Math.imul(ue,We)|0;var ke=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(ke>>>26)|0,ke&=67108863,Q=Math.imul(me,$t),Z=Math.imul(me,wt),Z=Z+Math.imul(ce,$t)|0,K=Math.imul(ce,wt),Q=Q+Math.imul(ne,Vt)|0,Z=Z+Math.imul(ne,kt)|0,Z=Z+Math.imul(oe,Vt)|0,K=K+Math.imul(oe,kt)|0,Q=Q+Math.imul(X,ot)|0,Z=Z+Math.imul(X,ht)|0,Z=Z+Math.imul(J,ot)|0,K=K+Math.imul(J,ht)|0,Q=Q+Math.imul(j,Pe)|0,Z=Z+Math.imul(j,We)|0,Z=Z+Math.imul(ee,Pe)|0,K=K+Math.imul(ee,We)|0,Q=Q+Math.imul(fe,ut)|0,Z=Z+Math.imul(fe,It)|0,Z=Z+Math.imul(ue,ut)|0,K=K+Math.imul(ue,It)|0;var Ge=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,Q=Math.imul(xe,$t),Z=Math.imul(xe,wt),Z=Z+Math.imul(Se,$t)|0,K=Math.imul(Se,wt),Q=Q+Math.imul(me,Vt)|0,Z=Z+Math.imul(me,kt)|0,Z=Z+Math.imul(ce,Vt)|0,K=K+Math.imul(ce,kt)|0,Q=Q+Math.imul(ne,ot)|0,Z=Z+Math.imul(ne,ht)|0,Z=Z+Math.imul(oe,ot)|0,K=K+Math.imul(oe,ht)|0,Q=Q+Math.imul(X,Pe)|0,Z=Z+Math.imul(X,We)|0,Z=Z+Math.imul(J,Pe)|0,K=K+Math.imul(J,We)|0,Q=Q+Math.imul(j,ut)|0,Z=Z+Math.imul(j,It)|0,Z=Z+Math.imul(ee,ut)|0,K=K+Math.imul(ee,It)|0,Q=Q+Math.imul(fe,Bt)|0,Z=Z+Math.imul(fe,rr)|0,Z=Z+Math.imul(ue,Bt)|0,K=K+Math.imul(ue,rr)|0;var Ye=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,Q=Math.imul(Ce,$t),Z=Math.imul(Ce,wt),Z=Z+Math.imul(Ee,$t)|0,K=Math.imul(Ee,wt),Q=Q+Math.imul(xe,Vt)|0,Z=Z+Math.imul(xe,kt)|0,Z=Z+Math.imul(Se,Vt)|0,K=K+Math.imul(Se,kt)|0,Q=Q+Math.imul(me,ot)|0,Z=Z+Math.imul(me,ht)|0,Z=Z+Math.imul(ce,ot)|0,K=K+Math.imul(ce,ht)|0,Q=Q+Math.imul(ne,Pe)|0,Z=Z+Math.imul(ne,We)|0,Z=Z+Math.imul(oe,Pe)|0,K=K+Math.imul(oe,We)|0,Q=Q+Math.imul(X,ut)|0,Z=Z+Math.imul(X,It)|0,Z=Z+Math.imul(J,ut)|0,K=K+Math.imul(J,It)|0,Q=Q+Math.imul(j,Bt)|0,Z=Z+Math.imul(j,rr)|0,Z=Z+Math.imul(ee,Bt)|0,K=K+Math.imul(ee,rr)|0,Q=Q+Math.imul(fe,Qt)|0,Z=Z+Math.imul(fe,ar)|0,Z=Z+Math.imul(ue,Qt)|0,K=K+Math.imul(ue,ar)|0;var qe=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(qe>>>26)|0,qe&=67108863,Q=Math.imul(_e,$t),Z=Math.imul(_e,wt),Z=Z+Math.imul(Re,$t)|0,K=Math.imul(Re,wt),Q=Q+Math.imul(Ce,Vt)|0,Z=Z+Math.imul(Ce,kt)|0,Z=Z+Math.imul(Ee,Vt)|0,K=K+Math.imul(Ee,kt)|0,Q=Q+Math.imul(xe,ot)|0,Z=Z+Math.imul(xe,ht)|0,Z=Z+Math.imul(Se,ot)|0,K=K+Math.imul(Se,ht)|0,Q=Q+Math.imul(me,Pe)|0,Z=Z+Math.imul(me,We)|0,Z=Z+Math.imul(ce,Pe)|0,K=K+Math.imul(ce,We)|0,Q=Q+Math.imul(ne,ut)|0,Z=Z+Math.imul(ne,It)|0,Z=Z+Math.imul(oe,ut)|0,K=K+Math.imul(oe,It)|0,Q=Q+Math.imul(X,Bt)|0,Z=Z+Math.imul(X,rr)|0,Z=Z+Math.imul(J,Bt)|0,K=K+Math.imul(J,rr)|0,Q=Q+Math.imul(j,Qt)|0,Z=Z+Math.imul(j,ar)|0,Z=Z+Math.imul(ee,Qt)|0,K=K+Math.imul(ee,ar)|0,Q=Q+Math.imul(fe,cr)|0,Z=Z+Math.imul(fe,Kr)|0,Z=Z+Math.imul(ue,cr)|0,K=K+Math.imul(ue,Kr)|0;var at=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(at>>>26)|0,at&=67108863,Q=Math.imul(Je,$t),Z=Math.imul(Je,wt),Z=Z+Math.imul(ze,$t)|0,K=Math.imul(ze,wt),Q=Q+Math.imul(_e,Vt)|0,Z=Z+Math.imul(_e,kt)|0,Z=Z+Math.imul(Re,Vt)|0,K=K+Math.imul(Re,kt)|0,Q=Q+Math.imul(Ce,ot)|0,Z=Z+Math.imul(Ce,ht)|0,Z=Z+Math.imul(Ee,ot)|0,K=K+Math.imul(Ee,ht)|0,Q=Q+Math.imul(xe,Pe)|0,Z=Z+Math.imul(xe,We)|0,Z=Z+Math.imul(Se,Pe)|0,K=K+Math.imul(Se,We)|0,Q=Q+Math.imul(me,ut)|0,Z=Z+Math.imul(me,It)|0,Z=Z+Math.imul(ce,ut)|0,K=K+Math.imul(ce,It)|0,Q=Q+Math.imul(ne,Bt)|0,Z=Z+Math.imul(ne,rr)|0,Z=Z+Math.imul(oe,Bt)|0,K=K+Math.imul(oe,rr)|0,Q=Q+Math.imul(X,Qt)|0,Z=Z+Math.imul(X,ar)|0,Z=Z+Math.imul(J,Qt)|0,K=K+Math.imul(J,ar)|0,Q=Q+Math.imul(j,cr)|0,Z=Z+Math.imul(j,Kr)|0,Z=Z+Math.imul(ee,cr)|0,K=K+Math.imul(ee,Kr)|0,Q=Q+Math.imul(fe,Qr)|0,Z=Z+Math.imul(fe,st)|0,Z=Z+Math.imul(ue,Qr)|0,K=K+Math.imul(ue,st)|0;var et=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(et>>>26)|0,et&=67108863,Q=Math.imul(je,$t),Z=Math.imul(je,wt),Z=Z+Math.imul(dt,$t)|0,K=Math.imul(dt,wt),Q=Q+Math.imul(Je,Vt)|0,Z=Z+Math.imul(Je,kt)|0,Z=Z+Math.imul(ze,Vt)|0,K=K+Math.imul(ze,kt)|0,Q=Q+Math.imul(_e,ot)|0,Z=Z+Math.imul(_e,ht)|0,Z=Z+Math.imul(Re,ot)|0,K=K+Math.imul(Re,ht)|0,Q=Q+Math.imul(Ce,Pe)|0,Z=Z+Math.imul(Ce,We)|0,Z=Z+Math.imul(Ee,Pe)|0,K=K+Math.imul(Ee,We)|0,Q=Q+Math.imul(xe,ut)|0,Z=Z+Math.imul(xe,It)|0,Z=Z+Math.imul(Se,ut)|0,K=K+Math.imul(Se,It)|0,Q=Q+Math.imul(me,Bt)|0,Z=Z+Math.imul(me,rr)|0,Z=Z+Math.imul(ce,Bt)|0,K=K+Math.imul(ce,rr)|0,Q=Q+Math.imul(ne,Qt)|0,Z=Z+Math.imul(ne,ar)|0,Z=Z+Math.imul(oe,Qt)|0,K=K+Math.imul(oe,ar)|0,Q=Q+Math.imul(X,cr)|0,Z=Z+Math.imul(X,Kr)|0,Z=Z+Math.imul(J,cr)|0,K=K+Math.imul(J,Kr)|0,Q=Q+Math.imul(j,Qr)|0,Z=Z+Math.imul(j,st)|0,Z=Z+Math.imul(ee,Qr)|0,K=K+Math.imul(ee,st)|0,Q=Q+Math.imul(fe,Zt)|0,Z=Z+Math.imul(fe,Ht)|0,Z=Z+Math.imul(ue,Zt)|0,K=K+Math.imul(ue,Ht)|0;var pt=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(pt>>>26)|0,pt&=67108863,Q=Math.imul(je,Vt),Z=Math.imul(je,kt),Z=Z+Math.imul(dt,Vt)|0,K=Math.imul(dt,kt),Q=Q+Math.imul(Je,ot)|0,Z=Z+Math.imul(Je,ht)|0,Z=Z+Math.imul(ze,ot)|0,K=K+Math.imul(ze,ht)|0,Q=Q+Math.imul(_e,Pe)|0,Z=Z+Math.imul(_e,We)|0,Z=Z+Math.imul(Re,Pe)|0,K=K+Math.imul(Re,We)|0,Q=Q+Math.imul(Ce,ut)|0,Z=Z+Math.imul(Ce,It)|0,Z=Z+Math.imul(Ee,ut)|0,K=K+Math.imul(Ee,It)|0,Q=Q+Math.imul(xe,Bt)|0,Z=Z+Math.imul(xe,rr)|0,Z=Z+Math.imul(Se,Bt)|0,K=K+Math.imul(Se,rr)|0,Q=Q+Math.imul(me,Qt)|0,Z=Z+Math.imul(me,ar)|0,Z=Z+Math.imul(ce,Qt)|0,K=K+Math.imul(ce,ar)|0,Q=Q+Math.imul(ne,cr)|0,Z=Z+Math.imul(ne,Kr)|0,Z=Z+Math.imul(oe,cr)|0,K=K+Math.imul(oe,Kr)|0,Q=Q+Math.imul(X,Qr)|0,Z=Z+Math.imul(X,st)|0,Z=Z+Math.imul(J,Qr)|0,K=K+Math.imul(J,st)|0,Q=Q+Math.imul(j,Zt)|0,Z=Z+Math.imul(j,Ht)|0,Z=Z+Math.imul(ee,Zt)|0,K=K+Math.imul(ee,Ht)|0;var _t=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(_t>>>26)|0,_t&=67108863,Q=Math.imul(je,ot),Z=Math.imul(je,ht),Z=Z+Math.imul(dt,ot)|0,K=Math.imul(dt,ht),Q=Q+Math.imul(Je,Pe)|0,Z=Z+Math.imul(Je,We)|0,Z=Z+Math.imul(ze,Pe)|0,K=K+Math.imul(ze,We)|0,Q=Q+Math.imul(_e,ut)|0,Z=Z+Math.imul(_e,It)|0,Z=Z+Math.imul(Re,ut)|0,K=K+Math.imul(Re,It)|0,Q=Q+Math.imul(Ce,Bt)|0,Z=Z+Math.imul(Ce,rr)|0,Z=Z+Math.imul(Ee,Bt)|0,K=K+Math.imul(Ee,rr)|0,Q=Q+Math.imul(xe,Qt)|0,Z=Z+Math.imul(xe,ar)|0,Z=Z+Math.imul(Se,Qt)|0,K=K+Math.imul(Se,ar)|0,Q=Q+Math.imul(me,cr)|0,Z=Z+Math.imul(me,Kr)|0,Z=Z+Math.imul(ce,cr)|0,K=K+Math.imul(ce,Kr)|0,Q=Q+Math.imul(ne,Qr)|0,Z=Z+Math.imul(ne,st)|0,Z=Z+Math.imul(oe,Qr)|0,K=K+Math.imul(oe,st)|0,Q=Q+Math.imul(X,Zt)|0,Z=Z+Math.imul(X,Ht)|0,Z=Z+Math.imul(J,Zt)|0,K=K+Math.imul(J,Ht)|0;var Pt=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,Q=Math.imul(je,Pe),Z=Math.imul(je,We),Z=Z+Math.imul(dt,Pe)|0,K=Math.imul(dt,We),Q=Q+Math.imul(Je,ut)|0,Z=Z+Math.imul(Je,It)|0,Z=Z+Math.imul(ze,ut)|0,K=K+Math.imul(ze,It)|0,Q=Q+Math.imul(_e,Bt)|0,Z=Z+Math.imul(_e,rr)|0,Z=Z+Math.imul(Re,Bt)|0,K=K+Math.imul(Re,rr)|0,Q=Q+Math.imul(Ce,Qt)|0,Z=Z+Math.imul(Ce,ar)|0,Z=Z+Math.imul(Ee,Qt)|0,K=K+Math.imul(Ee,ar)|0,Q=Q+Math.imul(xe,cr)|0,Z=Z+Math.imul(xe,Kr)|0,Z=Z+Math.imul(Se,cr)|0,K=K+Math.imul(Se,Kr)|0,Q=Q+Math.imul(me,Qr)|0,Z=Z+Math.imul(me,st)|0,Z=Z+Math.imul(ce,Qr)|0,K=K+Math.imul(ce,st)|0,Q=Q+Math.imul(ne,Zt)|0,Z=Z+Math.imul(ne,Ht)|0,Z=Z+Math.imul(oe,Zt)|0,K=K+Math.imul(oe,Ht)|0;var Xt=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,Q=Math.imul(je,ut),Z=Math.imul(je,It),Z=Z+Math.imul(dt,ut)|0,K=Math.imul(dt,It),Q=Q+Math.imul(Je,Bt)|0,Z=Z+Math.imul(Je,rr)|0,Z=Z+Math.imul(ze,Bt)|0,K=K+Math.imul(ze,rr)|0,Q=Q+Math.imul(_e,Qt)|0,Z=Z+Math.imul(_e,ar)|0,Z=Z+Math.imul(Re,Qt)|0,K=K+Math.imul(Re,ar)|0,Q=Q+Math.imul(Ce,cr)|0,Z=Z+Math.imul(Ce,Kr)|0,Z=Z+Math.imul(Ee,cr)|0,K=K+Math.imul(Ee,Kr)|0,Q=Q+Math.imul(xe,Qr)|0,Z=Z+Math.imul(xe,st)|0,Z=Z+Math.imul(Se,Qr)|0,K=K+Math.imul(Se,st)|0,Q=Q+Math.imul(me,Zt)|0,Z=Z+Math.imul(me,Ht)|0,Z=Z+Math.imul(ce,Zt)|0,K=K+Math.imul(ce,Ht)|0;var zt=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(zt>>>26)|0,zt&=67108863,Q=Math.imul(je,Bt),Z=Math.imul(je,rr),Z=Z+Math.imul(dt,Bt)|0,K=Math.imul(dt,rr),Q=Q+Math.imul(Je,Qt)|0,Z=Z+Math.imul(Je,ar)|0,Z=Z+Math.imul(ze,Qt)|0,K=K+Math.imul(ze,ar)|0,Q=Q+Math.imul(_e,cr)|0,Z=Z+Math.imul(_e,Kr)|0,Z=Z+Math.imul(Re,cr)|0,K=K+Math.imul(Re,Kr)|0,Q=Q+Math.imul(Ce,Qr)|0,Z=Z+Math.imul(Ce,st)|0,Z=Z+Math.imul(Ee,Qr)|0,K=K+Math.imul(Ee,st)|0,Q=Q+Math.imul(xe,Zt)|0,Z=Z+Math.imul(xe,Ht)|0,Z=Z+Math.imul(Se,Zt)|0,K=K+Math.imul(Se,Ht)|0;var ur=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(ur>>>26)|0,ur&=67108863,Q=Math.imul(je,Qt),Z=Math.imul(je,ar),Z=Z+Math.imul(dt,Qt)|0,K=Math.imul(dt,ar),Q=Q+Math.imul(Je,cr)|0,Z=Z+Math.imul(Je,Kr)|0,Z=Z+Math.imul(ze,cr)|0,K=K+Math.imul(ze,Kr)|0,Q=Q+Math.imul(_e,Qr)|0,Z=Z+Math.imul(_e,st)|0,Z=Z+Math.imul(Re,Qr)|0,K=K+Math.imul(Re,st)|0,Q=Q+Math.imul(Ce,Zt)|0,Z=Z+Math.imul(Ce,Ht)|0,Z=Z+Math.imul(Ee,Zt)|0,K=K+Math.imul(Ee,Ht)|0;var gr=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(gr>>>26)|0,gr&=67108863,Q=Math.imul(je,cr),Z=Math.imul(je,Kr),Z=Z+Math.imul(dt,cr)|0,K=Math.imul(dt,Kr),Q=Q+Math.imul(Je,Qr)|0,Z=Z+Math.imul(Je,st)|0,Z=Z+Math.imul(ze,Qr)|0,K=K+Math.imul(ze,st)|0,Q=Q+Math.imul(_e,Zt)|0,Z=Z+Math.imul(_e,Ht)|0,Z=Z+Math.imul(Re,Zt)|0,K=K+Math.imul(Re,Ht)|0;var Mr=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,Q=Math.imul(je,Qr),Z=Math.imul(je,st),Z=Z+Math.imul(dt,Qr)|0,K=Math.imul(dt,st),Q=Q+Math.imul(Je,Zt)|0,Z=Z+Math.imul(Je,Ht)|0,Z=Z+Math.imul(ze,Zt)|0,K=K+Math.imul(ze,Ht)|0;var un=(re+Q|0)+((Z&8191)<<13)|0;re=(K+(Z>>>13)|0)+(un>>>26)|0,un&=67108863,Q=Math.imul(je,Zt),Z=Math.imul(je,Ht),Z=Z+Math.imul(dt,Zt)|0,K=Math.imul(dt,Ht);var zr=(re+Q|0)+((Z&8191)<<13)|0;return re=(K+(Z>>>13)|0)+(zr>>>26)|0,zr&=67108863,W[0]=_r,W[1]=it,W[2]=Te,W[3]=ke,W[4]=Ge,W[5]=Ye,W[6]=qe,W[7]=at,W[8]=et,W[9]=pt,W[10]=_t,W[11]=Pt,W[12]=Xt,W[13]=zt,W[14]=ur,W[15]=gr,W[16]=Mr,W[17]=un,W[18]=zr,re!==0&&(W[19]=re,H.length++),H};Math.imul||(A=p);function c(O,R,D){D.negative=R.negative^O.negative,D.length=O.length+R.length;for(var H=0,B=0,$=0;$<D.length-1;$++){var W=B;B=0;for(var re=H&67108863,Q=Math.min($,R.length-1),Z=Math.max(0,$-O.length+1);Z<=Q;Z++){var K=$-Z,le=O.words[K]|0,fe=R.words[Z]|0,ue=le*fe,V=ue&67108863;W=W+(ue/67108864|0)|0,V=V+re|0,re=V&67108863,W=W+(V>>>26)|0,B+=W>>>26,W&=67108863}D.words[$]=re,H=W,W=B}return H!==0?D.words[$]=H:D.length--,D.strip()}function S(O,R,D){var H=new T;return H.mulp(O,R,D)}r.prototype.mulTo=function(R,D){var H,B=this.length+R.length;return this.length===10&&R.length===10?H=A(this,R,D):B<63?H=p(this,R,D):B<1024?H=c(this,R,D):H=S(this,R,D),H};function T(O,R){this.x=O,this.y=R}T.prototype.makeRBT=function(R){for(var D=new Array(R),H=r.prototype._countBits(R)-1,B=0;B<R;B++)D[B]=this.revBin(B,H,R);return D},T.prototype.revBin=function(R,D,H){if(R===0||R===H-1)return R;for(var B=0,$=0;$<D;$++)B|=(R&1)<<D-$-1,R>>=1;return B},T.prototype.permute=function(R,D,H,B,$,W){for(var re=0;re<W;re++)B[re]=D[R[re]],$[re]=H[R[re]]},T.prototype.transform=function(R,D,H,B,$,W){this.permute(W,R,D,H,B,$);for(var re=1;re<$;re<<=1)for(var Q=re<<1,Z=Math.cos(2*Math.PI/Q),K=Math.sin(2*Math.PI/Q),le=0;le<$;le+=Q)for(var fe=Z,ue=K,V=0;V<re;V++){var j=H[le+V],ee=B[le+V],q=H[le+V+re],X=B[le+V+re],J=fe*q-ue*X;X=fe*X+ue*q,q=J,H[le+V]=j+q,B[le+V]=ee+X,H[le+V+re]=j-q,B[le+V+re]=ee-X,V!==Q&&(J=Z*fe-K*ue,ue=Z*ue+K*fe,fe=J)}},T.prototype.guessLen13b=function(R,D){var H=Math.max(D,R)|1,B=H&1,$=0;for(H=H/2|0;H;H=H>>>1)$++;return 1<<$+1+B},T.prototype.conjugate=function(R,D,H){if(!(H<=1))for(var B=0;B<H/2;B++){var $=R[B];R[B]=R[H-B-1],R[H-B-1]=$,$=D[B],D[B]=-D[H-B-1],D[H-B-1]=-$}},T.prototype.normalize13b=function(R,D){for(var H=0,B=0;B<D/2;B++){var $=Math.round(R[2*B+1]/D)*8192+Math.round(R[2*B]/D)+H;R[B]=$&67108863,$<67108864?H=0:H=$/67108864|0}return R},T.prototype.convert13b=function(R,D,H,B){for(var $=0,W=0;W<D;W++)$=$+(R[W]|0),H[2*W]=$&8191,$=$>>>13,H[2*W+1]=$&8191,$=$>>>13;for(W=2*D;W<B;++W)H[W]=0;i($===0),i(($&-8192)===0)},T.prototype.stub=function(R){for(var D=new Array(R),H=0;H<R;H++)D[H]=0;return D},T.prototype.mulp=function(R,D,H){var B=2*this.guessLen13b(R.length,D.length),$=this.makeRBT(B),W=this.stub(B),re=new Array(B),Q=new Array(B),Z=new Array(B),K=new Array(B),le=new Array(B),fe=new Array(B),ue=H.words;ue.length=B,this.convert13b(R.words,R.length,re,B),this.convert13b(D.words,D.length,K,B),this.transform(re,W,Q,Z,B,$),this.transform(K,W,le,fe,B,$);for(var V=0;V<B;V++){var j=Q[V]*le[V]-Z[V]*fe[V];Z[V]=Q[V]*fe[V]+Z[V]*le[V],Q[V]=j}return this.conjugate(Q,Z,B),this.transform(Q,Z,ue,W,B,$),this.conjugate(ue,W,B),this.normalize13b(ue,B),H.negative=R.negative^D.negative,H.length=R.length+D.length,H.strip()},r.prototype.mul=function(R){var D=new r(null);return D.words=new Array(this.length+R.length),this.mulTo(R,D)},r.prototype.mulf=function(R){var D=new r(null);return D.words=new Array(this.length+R.length),S(this,R,D)},r.prototype.imul=function(R){return this.clone().mulTo(R,this)},r.prototype.imuln=function(R){i(typeof R=="number"),i(R<67108864);for(var D=0,H=0;H<this.length;H++){var B=(this.words[H]|0)*R,$=(B&67108863)+(D&67108863);D>>=26,D+=B/67108864|0,D+=$>>>26,this.words[H]=$&67108863}return D!==0&&(this.words[H]=D,this.length++),this},r.prototype.muln=function(R){return this.clone().imuln(R)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(R){var D=_(R);if(D.length===0)return new r(1);for(var H=this,B=0;B<D.length&&D[B]===0;B++,H=H.sqr());if(++B<D.length)for(var $=H.sqr();B<D.length;B++,$=$.sqr())D[B]!==0&&(H=H.mul($));return H},r.prototype.iushln=function(R){i(typeof R=="number"&&R>=0);var D=R%26,H=(R-D)/26,B=67108863>>>26-D<<26-D,$;if(D!==0){var W=0;for($=0;$<this.length;$++){var re=this.words[$]&B,Q=(this.words[$]|0)-re<<D;this.words[$]=Q|W,W=re>>>26-D}W&&(this.words[$]=W,this.length++)}if(H!==0){for($=this.length-1;$>=0;$--)this.words[$+H]=this.words[$];for($=0;$<H;$++)this.words[$]=0;this.length+=H}return this.strip()},r.prototype.ishln=function(R){return i(this.negative===0),this.iushln(R)},r.prototype.iushrn=function(R,D,H){i(typeof R=="number"&&R>=0);var B;D?B=(D-D%26)/26:B=0;var $=R%26,W=Math.min((R-$)/26,this.length),re=67108863^67108863>>>$<<$,Q=H;if(B-=W,B=Math.max(0,B),Q){for(var Z=0;Z<W;Z++)Q.words[Z]=this.words[Z];Q.length=W}if(W!==0)if(this.length>W)for(this.length-=W,Z=0;Z<this.length;Z++)this.words[Z]=this.words[Z+W];else this.words[0]=0,this.length=1;var K=0;for(Z=this.length-1;Z>=0&&(K!==0||Z>=B);Z--){var le=this.words[Z]|0;this.words[Z]=K<<26-$|le>>>$,K=le&re}return Q&&K!==0&&(Q.words[Q.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(R,D,H){return i(this.negative===0),this.iushrn(R,D,H)},r.prototype.shln=function(R){return this.clone().ishln(R)},r.prototype.ushln=function(R){return this.clone().iushln(R)},r.prototype.shrn=function(R){return this.clone().ishrn(R)},r.prototype.ushrn=function(R){return this.clone().iushrn(R)},r.prototype.testn=function(R){i(typeof R=="number"&&R>=0);var D=R%26,H=(R-D)/26,B=1<<D;if(this.length<=H)return!1;var $=this.words[H];return!!($&B)},r.prototype.imaskn=function(R){i(typeof R=="number"&&R>=0);var D=R%26,H=(R-D)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=H)return this;if(D!==0&&H++,this.length=Math.min(H,this.length),D!==0){var B=67108863^67108863>>>D<<D;this.words[this.length-1]&=B}return this.strip()},r.prototype.maskn=function(R){return this.clone().imaskn(R)},r.prototype.iaddn=function(R){return i(typeof R=="number"),i(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},r.prototype._iaddn=function(R){this.words[0]+=R;for(var D=0;D<this.length&&this.words[D]>=67108864;D++)this.words[D]-=67108864,D===this.length-1?this.words[D+1]=1:this.words[D+1]++;return this.length=Math.max(this.length,D+1),this},r.prototype.isubn=function(R){if(i(typeof R=="number"),i(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var D=0;D<this.length&&this.words[D]<0;D++)this.words[D]+=67108864,this.words[D+1]-=1;return this.strip()},r.prototype.addn=function(R){return this.clone().iaddn(R)},r.prototype.subn=function(R){return this.clone().isubn(R)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(R,D,H){var B=R.length+H,$;this._expand(B);var W,re=0;for($=0;$<R.length;$++){W=(this.words[$+H]|0)+re;var Q=(R.words[$]|0)*D;W-=Q&67108863,re=(W>>26)-(Q/67108864|0),this.words[$+H]=W&67108863}for(;$<this.length-H;$++)W=(this.words[$+H]|0)+re,re=W>>26,this.words[$+H]=W&67108863;if(re===0)return this.strip();for(i(re===-1),re=0,$=0;$<this.length;$++)W=-(this.words[$]|0)+re,re=W>>26,this.words[$]=W&67108863;return this.negative=1,this.strip()},r.prototype._wordDiv=function(R,D){var H=this.length-R.length,B=this.clone(),$=R,W=$.words[$.length-1]|0,re=this._countBits(W);H=26-re,H!==0&&($=$.ushln(H),B.iushln(H),W=$.words[$.length-1]|0);var Q=B.length-$.length,Z;if(D!=="mod"){Z=new r(null),Z.length=Q+1,Z.words=new Array(Z.length);for(var K=0;K<Z.length;K++)Z.words[K]=0}var le=B.clone()._ishlnsubmul($,1,Q);le.negative===0&&(B=le,Z&&(Z.words[Q]=1));for(var fe=Q-1;fe>=0;fe--){var ue=(B.words[$.length+fe]|0)*67108864+(B.words[$.length+fe-1]|0);for(ue=Math.min(ue/W|0,67108863),B._ishlnsubmul($,ue,fe);B.negative!==0;)ue--,B.negative=0,B._ishlnsubmul($,1,fe),B.isZero()||(B.negative^=1);Z&&(Z.words[fe]=ue)}return Z&&Z.strip(),B.strip(),D!=="div"&&H!==0&&B.iushrn(H),{div:Z||null,mod:B}},r.prototype.divmod=function(R,D,H){if(i(!R.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var B,$,W;return this.negative!==0&&R.negative===0?(W=this.neg().divmod(R,D),D!=="mod"&&(B=W.div.neg()),D!=="div"&&($=W.mod.neg(),H&&$.negative!==0&&$.iadd(R)),{div:B,mod:$}):this.negative===0&&R.negative!==0?(W=this.divmod(R.neg(),D),D!=="mod"&&(B=W.div.neg()),{div:B,mod:W.mod}):(this.negative&R.negative)!==0?(W=this.neg().divmod(R.neg(),D),D!=="div"&&($=W.mod.neg(),H&&$.negative!==0&&$.isub(R)),{div:W.div,mod:$}):R.length>this.length||this.cmp(R)<0?{div:new r(0),mod:this}:R.length===1?D==="div"?{div:this.divn(R.words[0]),mod:null}:D==="mod"?{div:null,mod:new r(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new r(this.modn(R.words[0]))}:this._wordDiv(R,D)},r.prototype.div=function(R){return this.divmod(R,"div",!1).div},r.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},r.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},r.prototype.divRound=function(R){var D=this.divmod(R);if(D.mod.isZero())return D.div;var H=D.div.negative!==0?D.mod.isub(R):D.mod,B=R.ushrn(1),$=R.andln(1),W=H.cmp(B);return W<0||$===1&&W===0?D.div:D.div.negative!==0?D.div.isubn(1):D.div.iaddn(1)},r.prototype.modn=function(R){i(R<=67108863);for(var D=(1<<26)%R,H=0,B=this.length-1;B>=0;B--)H=(D*H+(this.words[B]|0))%R;return H},r.prototype.idivn=function(R){i(R<=67108863);for(var D=0,H=this.length-1;H>=0;H--){var B=(this.words[H]|0)+D*67108864;this.words[H]=B/R|0,D=B%R}return this.strip()},r.prototype.divn=function(R){return this.clone().idivn(R)},r.prototype.egcd=function(R){i(R.negative===0),i(!R.isZero());var D=this,H=R.clone();D.negative!==0?D=D.umod(R):D=D.clone();for(var B=new r(1),$=new r(0),W=new r(0),re=new r(1),Q=0;D.isEven()&&H.isEven();)D.iushrn(1),H.iushrn(1),++Q;for(var Z=H.clone(),K=D.clone();!D.isZero();){for(var le=0,fe=1;(D.words[0]&fe)===0&&le<26;++le,fe<<=1);if(le>0)for(D.iushrn(le);le-- >0;)(B.isOdd()||$.isOdd())&&(B.iadd(Z),$.isub(K)),B.iushrn(1),$.iushrn(1);for(var ue=0,V=1;(H.words[0]&V)===0&&ue<26;++ue,V<<=1);if(ue>0)for(H.iushrn(ue);ue-- >0;)(W.isOdd()||re.isOdd())&&(W.iadd(Z),re.isub(K)),W.iushrn(1),re.iushrn(1);D.cmp(H)>=0?(D.isub(H),B.isub(W),$.isub(re)):(H.isub(D),W.isub(B),re.isub($))}return{a:W,b:re,gcd:H.iushln(Q)}},r.prototype._invmp=function(R){i(R.negative===0),i(!R.isZero());var D=this,H=R.clone();D.negative!==0?D=D.umod(R):D=D.clone();for(var B=new r(1),$=new r(0),W=H.clone();D.cmpn(1)>0&&H.cmpn(1)>0;){for(var re=0,Q=1;(D.words[0]&Q)===0&&re<26;++re,Q<<=1);if(re>0)for(D.iushrn(re);re-- >0;)B.isOdd()&&B.iadd(W),B.iushrn(1);for(var Z=0,K=1;(H.words[0]&K)===0&&Z<26;++Z,K<<=1);if(Z>0)for(H.iushrn(Z);Z-- >0;)$.isOdd()&&$.iadd(W),$.iushrn(1);D.cmp(H)>=0?(D.isub(H),B.isub($)):(H.isub(D),$.isub(B))}var le;return D.cmpn(1)===0?le=B:le=$,le.cmpn(0)<0&&le.iadd(R),le},r.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var D=this.clone(),H=R.clone();D.negative=0,H.negative=0;for(var B=0;D.isEven()&&H.isEven();B++)D.iushrn(1),H.iushrn(1);do{for(;D.isEven();)D.iushrn(1);for(;H.isEven();)H.iushrn(1);var $=D.cmp(H);if($<0){var W=D;D=H,H=W}else if($===0||H.cmpn(1)===0)break;D.isub(H)}while(!0);return H.iushln(B)},r.prototype.invm=function(R){return this.egcd(R).a.umod(R)},r.prototype.isEven=function(){return(this.words[0]&1)===0},r.prototype.isOdd=function(){return(this.words[0]&1)===1},r.prototype.andln=function(R){return this.words[0]&R},r.prototype.bincn=function(R){i(typeof R=="number");var D=R%26,H=(R-D)/26,B=1<<D;if(this.length<=H)return this._expand(H+1),this.words[H]|=B,this;for(var $=B,W=H;$!==0&&W<this.length;W++){var re=this.words[W]|0;re+=$,$=re>>>26,re&=67108863,this.words[W]=re}return $!==0&&(this.words[W]=$,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(R){var D=R<0;if(this.negative!==0&&!D)return-1;if(this.negative===0&&D)return 1;this.strip();var H;if(this.length>1)H=1;else{D&&(R=-R),i(R<=67108863,"Number is too big");var B=this.words[0]|0;H=B===R?0:B<R?-1:1}return this.negative!==0?-H|0:H},r.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var D=this.ucmp(R);return this.negative!==0?-D|0:D},r.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var D=0,H=this.length-1;H>=0;H--){var B=this.words[H]|0,$=R.words[H]|0;if(B!==$){B<$?D=-1:B>$&&(D=1);break}}return D},r.prototype.gtn=function(R){return this.cmpn(R)===1},r.prototype.gt=function(R){return this.cmp(R)===1},r.prototype.gten=function(R){return this.cmpn(R)>=0},r.prototype.gte=function(R){return this.cmp(R)>=0},r.prototype.ltn=function(R){return this.cmpn(R)===-1},r.prototype.lt=function(R){return this.cmp(R)===-1},r.prototype.lten=function(R){return this.cmpn(R)<=0},r.prototype.lte=function(R){return this.cmp(R)<=0},r.prototype.eqn=function(R){return this.cmpn(R)===0},r.prototype.eq=function(R){return this.cmp(R)===0},r.red=function(R){return new L(R)},r.prototype.toRed=function(R){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(R){return this.red=R,this},r.prototype.forceRed=function(R){return i(!this.red,"Already a number in reduction context"),this._forceRed(R)},r.prototype.redAdd=function(R){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},r.prototype.redIAdd=function(R){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},r.prototype.redSub=function(R){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},r.prototype.redISub=function(R){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},r.prototype.redShl=function(R){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},r.prototype.redMul=function(R){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},r.prototype.redIMul=function(R){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(R){return i(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var x={k256:null,p224:null,p192:null,p25519:null};function w(O,R){this.name=O,this.p=new r(R,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}w.prototype._tmp=function(){var R=new r(null);return R.words=new Array(Math.ceil(this.n/13)),R},w.prototype.ireduce=function(R){var D=R,H;do this.split(D,this.tmp),D=this.imulK(D),D=D.iadd(this.tmp),H=D.bitLength();while(H>this.n);var B=H<this.n?-1:D.ucmp(this.p);return B===0?(D.words[0]=0,D.length=1):B>0?D.isub(this.p):D.strip!==void 0?D.strip():D._strip(),D},w.prototype.split=function(R,D){R.iushrn(this.n,0,D)},w.prototype.imulK=function(R){return R.imul(this.k)};function v(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(v,w),v.prototype.split=function(R,D){for(var H=4194303,B=Math.min(R.length,9),$=0;$<B;$++)D.words[$]=R.words[$];if(D.length=B,R.length<=9){R.words[0]=0,R.length=1;return}var W=R.words[9];for(D.words[D.length++]=W&H,$=10;$<R.length;$++){var re=R.words[$]|0;R.words[$-10]=(re&H)<<4|W>>>22,W=re}W>>>=22,R.words[$-10]=W,W===0&&R.length>10?R.length-=10:R.length-=9},v.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var D=0,H=0;H<R.length;H++){var B=R.words[H]|0;D+=B*977,R.words[H]=D&67108863,D=B*64+(D/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R};function C(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(C,w);function M(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(M,w);function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(E,w),E.prototype.imulK=function(R){for(var D=0,H=0;H<R.length;H++){var B=(R.words[H]|0)*19+D,$=B&67108863;B>>>=26,R.words[H]=$,D=B}return D!==0&&(R.words[R.length++]=D),R},r._prime=function(R){if(x[R])return x[R];var D;if(R==="k256")D=new v;else if(R==="p224")D=new C;else if(R==="p192")D=new M;else if(R==="p25519")D=new E;else throw new Error("Unknown prime "+R);return x[R]=D,D};function L(O){if(typeof O=="string"){var R=r._prime(O);this.m=R.p,this.prime=R}else i(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}L.prototype._verify1=function(R){i(R.negative===0,"red works only with positives"),i(R.red,"red works only with red numbers")},L.prototype._verify2=function(R,D){i((R.negative|D.negative)===0,"red works only with positives"),i(R.red&&R.red===D.red,"red works only with red numbers")},L.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},L.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},L.prototype.add=function(R,D){this._verify2(R,D);var H=R.add(D);return H.cmp(this.m)>=0&&H.isub(this.m),H._forceRed(this)},L.prototype.iadd=function(R,D){this._verify2(R,D);var H=R.iadd(D);return H.cmp(this.m)>=0&&H.isub(this.m),H},L.prototype.sub=function(R,D){this._verify2(R,D);var H=R.sub(D);return H.cmpn(0)<0&&H.iadd(this.m),H._forceRed(this)},L.prototype.isub=function(R,D){this._verify2(R,D);var H=R.isub(D);return H.cmpn(0)<0&&H.iadd(this.m),H},L.prototype.shl=function(R,D){return this._verify1(R),this.imod(R.ushln(D))},L.prototype.imul=function(R,D){return this._verify2(R,D),this.imod(R.imul(D))},L.prototype.mul=function(R,D){return this._verify2(R,D),this.imod(R.mul(D))},L.prototype.isqr=function(R){return this.imul(R,R.clone())},L.prototype.sqr=function(R){return this.mul(R,R)},L.prototype.sqrt=function(R){if(R.isZero())return R.clone();var D=this.m.andln(3);if(i(D%2===1),D===3){var H=this.m.add(new r(1)).iushrn(2);return this.pow(R,H)}for(var B=this.m.subn(1),$=0;!B.isZero()&&B.andln(1)===0;)$++,B.iushrn(1);i(!B.isZero());var W=new r(1).toRed(this),re=W.redNeg(),Q=this.m.subn(1).iushrn(1),Z=this.m.bitLength();for(Z=new r(2*Z*Z).toRed(this);this.pow(Z,Q).cmp(re)!==0;)Z.redIAdd(re);for(var K=this.pow(Z,B),le=this.pow(R,B.addn(1).iushrn(1)),fe=this.pow(R,B),ue=$;fe.cmp(W)!==0;){for(var V=fe,j=0;V.cmp(W)!==0;j++)V=V.redSqr();i(j<ue);var ee=this.pow(K,new r(1).iushln(ue-j-1));le=le.redMul(ee),K=ee.redSqr(),fe=fe.redMul(K),ue=j}return le},L.prototype.invm=function(R){var D=R._invmp(this.m);return D.negative!==0?(D.negative=0,this.imod(D).redNeg()):this.imod(D)},L.prototype.pow=function(R,D){if(D.isZero())return new r(1).toRed(this);if(D.cmpn(1)===0)return R.clone();var H=4,B=new Array(1<<H);B[0]=new r(1).toRed(this),B[1]=R;for(var $=2;$<B.length;$++)B[$]=this.mul(B[$-1],R);var W=B[0],re=0,Q=0,Z=D.bitLength()%26;for(Z===0&&(Z=26),$=D.length-1;$>=0;$--){for(var K=D.words[$],le=Z-1;le>=0;le--){var fe=K>>le&1;if(W!==B[0]&&(W=this.sqr(W)),fe===0&&re===0){Q=0;continue}re<<=1,re|=fe,Q++,!(Q!==H&&($!==0||le!==0))&&(W=this.mul(W,B[re]),Q=0,re=0)}Z=26}return W},L.prototype.convertTo=function(R){var D=R.umod(this.m);return D===R?D.clone():D},L.prototype.convertFrom=function(R){var D=R.clone();return D.red=null,D},r.mont=function(R){return new z(R)};function z(O){L.call(this,O),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(z,L),z.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},z.prototype.convertFrom=function(R){var D=this.imod(R.mul(this.rinv));return D.red=null,D},z.prototype.imul=function(R,D){if(R.isZero()||D.isZero())return R.words[0]=0,R.length=1,R;var H=R.imul(D),B=H.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$=H.isub(B).iushrn(this.shift),W=$;return $.cmp(this.m)>=0?W=$.isub(this.m):$.cmpn(0)<0&&(W=$.iadd(this.m)),W._forceRed(this)},z.prototype.mul=function(R,D){if(R.isZero()||D.isZero())return new r(0)._forceRed(this);var H=R.mul(D),B=H.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$=H.isub(B).iushrn(this.shift),W=$;return $.cmp(this.m)>=0?W=$.isub(this.m):$.cmpn(0)<0&&(W=$.iadd(this.m)),W._forceRed(this)},z.prototype.invm=function(R){var D=this.imod(R._invmp(this.m).mul(this.r2));return D._forceRed(this)}})(typeof h=="undefined"||h,this)},{buffer:2}],34:[function(o,h,y){h.exports=t;function t(a){var i,n,r,f=a.length,u=0;for(i=0;i<f;++i)u+=a[i].length;var l=new Array(u),m=0;for(i=0;i<f;++i){var d=a[i],b=d.length;for(n=0;n<b;++n){var g=l[m++]=new Array(b-1),_=0;for(r=0;r<b;++r)r!==n&&(g[_++]=d[r]);if(n&1){var p=g[1];g[1]=g[0],g[0]=p}}}return l}},{}],35:[function(o,h,y){h.exports=b;var t=o("typedarray-pool"),a=o("./lib/sweep"),i=o("./lib/intersect");function n(g,_){for(var p=0;p<g;++p)if(!(_[p]<=_[p+g]))return!0;return!1}function r(g,_,p,A){for(var c=0,S=0,T=0,x=g.length;T<x;++T){var w=g[T];if(!n(_,w)){for(var v=0;v<2*_;++v)p[c++]=w[v];A[S++]=T}}return S}function f(g,_,p,A){var c=g.length,S=_.length;if(!(c<=0||S<=0)){var T=g[0].length>>>1;if(!(T<=0)){var x,w=t.mallocDouble(2*T*c),v=t.mallocInt32(c);if(c=r(g,T,w,v),c>0){if(T===1&&A)a.init(c),x=a.sweepComplete(T,p,0,c,w,v,0,c,w,v);else{var C=t.mallocDouble(2*T*S),M=t.mallocInt32(S);S=r(_,T,C,M),S>0&&(a.init(c+S),T===1?x=a.sweepBipartite(T,p,0,c,w,v,0,S,C,M):x=i(T,p,A,c,w,v,S,C,M),t.free(C),t.free(M))}t.free(w),t.free(v)}return x}}}var u;function l(g,_){u.push([g,_])}function m(g){return u=[],f(g,g,l,!0),u}function d(g,_){return u=[],f(g,_,l,!1),u}function b(g,_,p){switch(arguments.length){case 1:return m(g);case 2:return typeof _=="function"?f(g,g,_,!0):d(g,_);case 3:return f(g,_,p,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(o,h,y){function t(){function n(u,l,m,d,b,g,_,p,A,c,S){for(var T=2*u,x=d,w=T*d;x<b;++x,w+=T){var v=g[l+w],C=g[l+w+u],M=_[x];e:for(var E=p,L=T*p;E<A;++E,L+=T){var z=c[l+L],O=c[l+L+u],R=S[E];if(!(O<v||C<z)){for(var D=l+1;D<u;++D){var H=g[D+w],B=g[D+u+w],$=c[D+L],W=c[D+u+L];if(B<$||W<H)continue e}var re=m(M,R);if(re!==void 0)return re}}}}function r(u,l,m,d,b,g,_,p,A,c,S){for(var T=2*u,x=p,w=T*p;x<A;++x,w+=T){var v=c[l+w],C=c[l+w+u],M=S[x];e:for(var E=d,L=T*d;E<b;++E,L+=T){var z=g[l+L],O=g[l+L+u],R=_[E];if(!(C<z||O<v)){for(var D=l+1;D<u;++D){var H=g[D+L],B=g[D+u+L],$=c[D+w],W=c[D+u+w];if(B<$||W<H)continue e}var re=m(R,M);if(re!==void 0)return re}}}}function f(u,l,m,d,b,g,_,p,A,c,S){return b-d>A-p?n(u,l,m,d,b,g,_,p,A,c,S):r(u,l,m,d,b,g,_,p,A,c,S)}return f}function a(){function n(m,d,b,g,_,p,A,c,S,T,x){for(var w=2*m,v=g,C=w*g;v<_;++v,C+=w){var M=p[d+C],E=p[d+C+m],L=A[v];e:for(var z=c,O=w*c;z<S;++z,O+=w){var R=T[d+O],D=x[z];if(!(R<=M||E<R)){for(var H=d+1;H<m;++H){var B=p[H+C],$=p[H+m+C],W=T[H+O],re=T[H+m+O];if($<W||re<B)continue e}var Q=b(D,L);if(Q!==void 0)return Q}}}}function r(m,d,b,g,_,p,A,c,S,T,x){for(var w=2*m,v=g,C=w*g;v<_;++v,C+=w){var M=p[d+C],E=p[d+C+m],L=A[v];e:for(var z=c,O=w*c;z<S;++z,O+=w){var R=T[d+O],D=x[z];if(!(R<M||E<R)){for(var H=d+1;H<m;++H){var B=p[H+C],$=p[H+m+C],W=T[H+O],re=T[H+m+O];if($<W||re<B)continue e}var Q=b(L,D);if(Q!==void 0)return Q}}}}function f(m,d,b,g,_,p,A,c,S,T,x){for(var w=2*m,v=c,C=w*c;v<S;++v,C+=w){var M=T[d+C],E=x[v];e:for(var L=g,z=w*g;L<_;++L,z+=w){var O=p[d+z],R=p[d+z+m],D=A[L];if(!(M<=O||R<M)){for(var H=d+1;H<m;++H){var B=p[H+z],$=p[H+m+z],W=T[H+C],re=T[H+m+C];if($<W||re<B)continue e}var Q=b(E,D);if(Q!==void 0)return Q}}}}function u(m,d,b,g,_,p,A,c,S,T,x){for(var w=2*m,v=c,C=w*c;v<S;++v,C+=w){var M=T[d+C],E=x[v];e:for(var L=g,z=w*g;L<_;++L,z+=w){var O=p[d+z],R=p[d+z+m],D=A[L];if(!(M<O||R<M)){for(var H=d+1;H<m;++H){var B=p[H+z],$=p[H+m+z],W=T[H+C],re=T[H+m+C];if($<W||re<B)continue e}var Q=b(D,E);if(Q!==void 0)return Q}}}}function l(m,d,b,g,_,p,A,c,S,T,x,w){return p-_>T-S?g?n(m,d,b,_,p,A,c,S,T,x,w):r(m,d,b,_,p,A,c,S,T,x,w):g?f(m,d,b,_,p,A,c,S,T,x,w):u(m,d,b,_,p,A,c,S,T,x,w)}return l}function i(n){return n?t():a()}y.partial=i(!1),y.full=i(!0)},{}],37:[function(o,h,y){h.exports=O;var t=o("typedarray-pool"),a=o("bit-twiddle"),i=o("./brute"),n=i.partial,r=i.full,f=o("./sweep"),u=o("./median"),l=o("./partition"),m=128,d=1<<22,b=1<<22,g=l("!(lo>=p0)&&!(p1>=hi)"),_=l("lo===p0"),p=l("lo<p0"),A=l("hi<=p0"),c=l("lo<=p0&&p0<=hi"),S=l("lo<p0&&p0<=hi"),T=6,x=2,w=1024,v=t.mallocInt32(w),C=t.mallocDouble(w);function M(R,D){var H=8*a.log2(D+1)*(R+1)|0,B=a.nextPow2(T*H);v.length<B&&(t.free(v),v=t.mallocInt32(B));var $=a.nextPow2(x*H);C.length<$&&(t.free(C),C=t.mallocDouble($))}function E(R,D,H,B,$,W,re,Q,Z){var K=T*R;v[K]=D,v[K+1]=H,v[K+2]=B,v[K+3]=$,v[K+4]=W,v[K+5]=re;var le=x*R;C[le]=Q,C[le+1]=Z}function L(R,D,H,B,$,W,re,Q,Z,K,le){var fe=2*R,ue=Z*fe,V=K[ue+D];e:for(var j=$,ee=$*fe;j<W;++j,ee+=fe){var q=re[ee+D],X=re[ee+D+R];if(!(V<q||X<V)&&!(B&&V===q)){for(var J=Q[j],ie=D+1;ie<R;++ie){var q=re[ee+ie],X=re[ee+ie+R],ne=K[ue+ie],oe=K[ue+ie+R];if(X<ne||oe<q)continue e}var se;if(B?se=H(le,J):se=H(J,le),se!==void 0)return se}}}function z(R,D,H,B,$,W,re,Q,Z,K){var le=2*R,fe=Q*le,ue=Z[fe+D];e:for(var V=B,j=B*le;V<$;++V,j+=le){var ee=re[V];if(ee!==K){var q=W[j+D],X=W[j+D+R];if(!(ue<q||X<ue)){for(var J=D+1;J<R;++J){var q=W[j+J],X=W[j+J+R],ie=Z[fe+J],ne=Z[fe+J+R];if(X<ie||ne<q)continue e}var oe=H(ee,K);if(oe!==void 0)return oe}}}}function O(R,D,H,B,$,W,re,Q,Z){M(R,B+re);var K=0,le=2*R,fe;for(E(K++,0,0,B,0,re,H?16:0,-1/0,1/0),H||E(K++,0,0,re,0,B,1,-1/0,1/0);K>0;){K-=1;var ue=K*T,V=v[ue],j=v[ue+1],ee=v[ue+2],q=v[ue+3],X=v[ue+4],J=v[ue+5],ie=K*x,ne=C[ie],oe=C[ie+1],se=J&1,me=!!(J&16),ce=$,pe=W,xe=Q,Se=Z;if(se&&(ce=Q,pe=Z,xe=$,Se=W),!(J&2&&(ee=p(R,V,j,ee,ce,pe,oe),j>=ee))&&!(J&4&&(j=A(R,V,j,ee,ce,pe,ne),j>=ee))){var Ae=ee-j,Ce=X-q;if(me){if(R*Ae*(Ae+Ce)<b){if(fe=f.scanComplete(R,V,D,j,ee,ce,pe,q,X,xe,Se),fe!==void 0)return fe;continue}}else if(R*Math.min(Ae,Ce)<m){if(fe=n(R,V,D,se,j,ee,ce,pe,q,X,xe,Se),fe!==void 0)return fe;continue}else if(R*Ae*Ce<d){if(fe=f.scanBipartite(R,V,D,se,j,ee,ce,pe,q,X,xe,Se),fe!==void 0)return fe;continue}var Ee=g(R,V,j,ee,ce,pe,ne,oe);if(j<Ee)if(R*(Ee-j)<m){if(fe=r(R,V+1,D,j,Ee,ce,pe,q,X,xe,Se),fe!==void 0)return fe}else if(V===R-2){if(se?fe=f.sweepBipartite(R,D,q,X,xe,Se,j,Ee,ce,pe):fe=f.sweepBipartite(R,D,j,Ee,ce,pe,q,X,xe,Se),fe!==void 0)return fe}else E(K++,V+1,j,Ee,q,X,se,-1/0,1/0),E(K++,V+1,q,X,j,Ee,se^1,-1/0,1/0);if(Ee<ee){var Oe=u(R,V,q,X,xe,Se),_e=xe[le*Oe+V],Re=_(R,V,Oe,X,xe,Se,_e);if(Re<X&&E(K++,V,Ee,ee,Re,X,(se|4)+(me?16:0),_e,oe),q<Oe&&E(K++,V,Ee,ee,q,Oe,(se|2)+(me?16:0),ne,_e),Oe+1===Re){if(me?fe=z(R,V,D,Ee,ee,ce,pe,Oe,xe,Se[Oe]):fe=L(R,V,D,se,Ee,ee,ce,pe,Oe,xe,Se[Oe]),fe!==void 0)return fe}else if(Oe<Re){var Ve;if(me){if(Ve=c(R,V,Ee,ee,ce,pe,_e),Ee<Ve){var Je=_(R,V,Ee,Ve,ce,pe,_e);if(V===R-2){if(Ee<Je&&(fe=f.sweepComplete(R,D,Ee,Je,ce,pe,Oe,Re,xe,Se),fe!==void 0)||Je<Ve&&(fe=f.sweepBipartite(R,D,Je,Ve,ce,pe,Oe,Re,xe,Se),fe!==void 0))return fe}else Ee<Je&&E(K++,V+1,Ee,Je,Oe,Re,16,-1/0,1/0),Je<Ve&&(E(K++,V+1,Je,Ve,Oe,Re,0,-1/0,1/0),E(K++,V+1,Oe,Re,Je,Ve,1,-1/0,1/0))}}else se?Ve=S(R,V,Ee,ee,ce,pe,_e):Ve=c(R,V,Ee,ee,ce,pe,_e),Ee<Ve&&(V===R-2?se?fe=f.sweepBipartite(R,D,Oe,Re,xe,Se,Ee,Ve,ce,pe):fe=f.sweepBipartite(R,D,Ee,Ve,ce,pe,Oe,Re,xe,Se):(E(K++,V+1,Ee,Ve,Oe,Re,se,-1/0,1/0),E(K++,V+1,Oe,Re,Ee,Ve,se^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(o,h,y){h.exports=r;var t=o("./partition"),a=t("lo<p0"),i=8;function n(f,u,l,m,d,b){for(var g=2*f,_=g*(l+1)+u,p=l+1;p<m;++p,_+=g)for(var A=d[_],c=p,S=g*(p-1);c>l&&d[S+u]>A;--c,S-=g){for(var T=S,x=S+g,w=0;w<g;++w,++T,++x){var v=d[T];d[T]=d[x],d[x]=v}var C=b[c];b[c]=b[c-1],b[c-1]=C}}function r(f,u,l,m,d,b){if(m<=l+1)return l;for(var g=l,_=m,p=m+l>>>1,A=2*f,c=p,S=d[A*p+u];g<_;){if(_-g<i){n(f,u,g,_,d,b),S=d[A*p+u];break}var T=_-g,x=Math.random()*T+g|0,w=d[A*x+u],v=Math.random()*T+g|0,C=d[A*v+u],M=Math.random()*T+g|0,E=d[A*M+u];w<=C?E>=C?(c=v,S=C):w>=E?(c=x,S=w):(c=M,S=E):C>=E?(c=v,S=C):E>=w?(c=x,S=w):(c=M,S=E);for(var O=A*(_-1),R=A*c,L=0;L<A;++L,++O,++R){var z=d[O];d[O]=d[R],d[R]=z}var D=b[_-1];b[_-1]=b[c],b[c]=D,c=a(f,u,g,_-1,d,b,S);for(var O=A*(_-1),R=A*c,L=0;L<A;++L,++O,++R){var z=d[O];d[O]=d[R],d[R]=z}var D=b[_-1];if(b[_-1]=b[c],b[c]=D,p<c){for(_=c-1;g<_&&d[A*(_-1)+u]===S;)_-=1;_+=1}else if(c<p)for(g=c+1;g<_&&d[A*g+u]===S;)g+=1;else break}return a(f,u,l,p,d,b,d[A*p+u])}},{"./partition":39}],39:[function(o,h,y){h.exports=a;var t={"lo===p0":i,"lo<p0":n,"lo<=p0":r,"hi<=p0":f,"lo<p0&&p0<=hi":l,"lo<=p0&&p0<=hi":u,"!(lo>=p0)&&!(p1>=hi)":m};function a(d){return t[d]}function i(d,b,g,_,p,A,c){for(var S=2*d,T=S*g,x=T,w=g,v=b,C=g;_>C;++C,T+=S){var M=p[T+v];if(M===c)if(w===C)w+=1,x+=S;else{for(var E=0;S>E;++E){var L=p[T+E];p[T+E]=p[x],p[x++]=L}var z=A[C];A[C]=A[w],A[w++]=z}}return w}function n(d,b,g,_,p,A,c){for(var S=2*d,T=S*g,x=T,w=g,v=b,C=g;_>C;++C,T+=S){var M=p[T+v];if(M<c)if(w===C)w+=1,x+=S;else{for(var E=0;S>E;++E){var L=p[T+E];p[T+E]=p[x],p[x++]=L}var z=A[C];A[C]=A[w],A[w++]=z}}return w}function r(d,b,g,_,p,A,c){for(var S=2*d,T=S*g,x=T,w=g,v=d+b,C=g;_>C;++C,T+=S){var M=p[T+v];if(M<=c)if(w===C)w+=1,x+=S;else{for(var E=0;S>E;++E){var L=p[T+E];p[T+E]=p[x],p[x++]=L}var z=A[C];A[C]=A[w],A[w++]=z}}return w}function f(d,b,g,_,p,A,c){for(var S=2*d,T=S*g,x=T,w=g,v=d+b,C=g;_>C;++C,T+=S){var M=p[T+v];if(M<=c)if(w===C)w+=1,x+=S;else{for(var E=0;S>E;++E){var L=p[T+E];p[T+E]=p[x],p[x++]=L}var z=A[C];A[C]=A[w],A[w++]=z}}return w}function u(d,b,g,_,p,A,c){for(var S=2*d,T=S*g,x=T,w=g,v=b,C=d+b,M=g;_>M;++M,T+=S){var E=p[T+v],L=p[T+C];if(E<=c&&c<=L)if(w===M)w+=1,x+=S;else{for(var z=0;S>z;++z){var O=p[T+z];p[T+z]=p[x],p[x++]=O}var R=A[M];A[M]=A[w],A[w++]=R}}return w}function l(d,b,g,_,p,A,c){for(var S=2*d,T=S*g,x=T,w=g,v=b,C=d+b,M=g;_>M;++M,T+=S){var E=p[T+v],L=p[T+C];if(E<c&&c<=L)if(w===M)w+=1,x+=S;else{for(var z=0;S>z;++z){var O=p[T+z];p[T+z]=p[x],p[x++]=O}var R=A[M];A[M]=A[w],A[w++]=R}}return w}function m(d,b,g,_,p,A,c,S){for(var T=2*d,x=T*g,w=x,v=g,C=b,M=d+b,E=g;_>E;++E,x+=T){var L=p[x+C],z=p[x+M];if(!(L>=c)&&!(S>=z))if(v===E)v+=1,w+=T;else{for(var O=0;T>O;++O){var R=p[x+O];p[x+O]=p[w],p[w++]=R}var D=A[E];A[E]=A[v],A[v++]=D}}return v}},{}],40:[function(o,h,y){h.exports=a;var t=32;function a(b,g){g<=4*t?i(0,g-1,b):d(0,g-1,b)}function i(b,g,_){for(var p=2*(b+1),A=b+1;A<=g;++A){for(var c=_[p++],S=_[p++],T=A,x=p-2;T-- >b;){var w=_[x-2],v=_[x-1];if(w<c)break;if(w===c&&v<S)break;_[x]=w,_[x+1]=v,x-=2}_[x]=c,_[x+1]=S}}function n(b,g,_){b*=2,g*=2;var p=_[b],A=_[b+1];_[b]=_[g],_[b+1]=_[g+1],_[g]=p,_[g+1]=A}function r(b,g,_){b*=2,g*=2,_[b]=_[g],_[b+1]=_[g+1]}function f(b,g,_,p){b*=2,g*=2,_*=2;var A=p[b],c=p[b+1];p[b]=p[g],p[b+1]=p[g+1],p[g]=p[_],p[g+1]=p[_+1],p[_]=A,p[_+1]=c}function u(b,g,_,p,A){b*=2,g*=2,A[b]=A[g],A[g]=_,A[b+1]=A[g+1],A[g+1]=p}function l(b,g,_){b*=2,g*=2;var p=_[b],A=_[g];return p<A?!1:p===A?_[b+1]>_[g+1]:!0}function m(b,g,_,p){b*=2;var A=p[b];return A<g?!0:A===g?p[b+1]<_:!1}function d(b,g,_){var p=(g-b+1)/6|0,A=b+p,c=g-p,S=b+g>>1,T=S-p,x=S+p,w=A,v=T,C=S,M=x,E=c,L=b+1,z=g-1,O=0;l(w,v,_)&&(O=w,w=v,v=O),l(M,E,_)&&(O=M,M=E,E=O),l(w,C,_)&&(O=w,w=C,C=O),l(v,C,_)&&(O=v,v=C,C=O),l(w,M,_)&&(O=w,w=M,M=O),l(C,M,_)&&(O=C,C=M,M=O),l(v,E,_)&&(O=v,v=E,E=O),l(v,C,_)&&(O=v,v=C,C=O),l(M,E,_)&&(O=M,M=E,E=O);for(var R=_[2*v],D=_[2*v+1],H=_[2*M],B=_[2*M+1],$=2*w,W=2*C,re=2*E,Q=2*A,Z=2*S,K=2*c,le=0;le<2;++le){var fe=_[$+le],ue=_[W+le],V=_[re+le];_[Q+le]=fe,_[Z+le]=ue,_[K+le]=V}r(T,b,_),r(x,g,_);for(var j=L;j<=z;++j)if(m(j,R,D,_))j!==L&&n(j,L,_),++L;else if(!m(j,H,B,_))for(;;)if(m(z,H,B,_)){m(z,R,D,_)?(f(j,L,z,_),++L,--z):(n(j,z,_),--z);break}else{if(--z<j)break;continue}u(b,L-1,R,D,_),u(g,z+1,H,B,_),L-2-b<=t?i(b,L-2,_):d(b,L-2,_),g-(z+2)<=t?i(z+2,g,_):d(z+2,g,_),z-L<=t?i(L,z,_):d(L,z,_)}},{}],41:[function(o,h,y){h.exports={init:_,sweepBipartite:c,sweepComplete:S,scanBipartite:T,scanComplete:x};var t=o("typedarray-pool"),a=o("bit-twiddle"),i=o("./sort"),n=1<<28,r=1024,f=t.mallocInt32(r),u=t.mallocInt32(r),l=t.mallocInt32(r),m=t.mallocInt32(r),d=t.mallocInt32(r),b=t.mallocInt32(r),g=t.mallocDouble(r*8);function _(w){var v=a.nextPow2(w);f.length<v&&(t.free(f),f=t.mallocInt32(v)),u.length<v&&(t.free(u),u=t.mallocInt32(v)),l.length<v&&(t.free(l),l=t.mallocInt32(v)),m.length<v&&(t.free(m),m=t.mallocInt32(v)),d.length<v&&(t.free(d),d=t.mallocInt32(v)),b.length<v&&(t.free(b),b=t.mallocInt32(v));var C=8*v;g.length<C&&(t.free(g),g=t.mallocDouble(C))}function p(w,v,C,M){var E=v[M],L=w[C-1];w[E]=L,v[L]=E}function A(w,v,C,M){w[C]=M,v[M]=C}function c(w,v,C,M,E,L,z,O,R,D){for(var H=0,B=2*w,$=w-1,W=B-1,re=C;re<M;++re){var Q=L[re],Z=B*re;g[H++]=E[Z+$],g[H++]=-(Q+1),g[H++]=E[Z+W],g[H++]=Q}for(var re=z;re<O;++re){var Q=D[re]+n,K=B*re;g[H++]=R[K+$],g[H++]=-Q,g[H++]=R[K+W],g[H++]=Q}var le=H>>>1;i(g,le);for(var fe=0,ue=0,re=0;re<le;++re){var V=g[2*re+1]|0;if(V>=n)V=V-n|0,p(l,m,ue--,V);else if(V>=0)p(f,u,fe--,V);else if(V<=-n){V=-V-n|0;for(var j=0;j<fe;++j){var ee=v(f[j],V);if(ee!==void 0)return ee}A(l,m,ue++,V)}else{V=-V-1|0;for(var j=0;j<ue;++j){var ee=v(V,l[j]);if(ee!==void 0)return ee}A(f,u,fe++,V)}}}function S(w,v,C,M,E,L,z,O,R,D){for(var H=0,B=2*w,$=w-1,W=B-1,re=C;re<M;++re){var Q=L[re]+1<<1,Z=B*re;g[H++]=E[Z+$],g[H++]=-Q,g[H++]=E[Z+W],g[H++]=Q}for(var re=z;re<O;++re){var Q=D[re]+1<<1,K=B*re;g[H++]=R[K+$],g[H++]=-Q|1,g[H++]=R[K+W],g[H++]=Q|1}var le=H>>>1;i(g,le);for(var fe=0,ue=0,V=0,re=0;re<le;++re){var j=g[2*re+1]|0,ee=j&1;if(re<le-1&&j>>1===g[2*re+3]>>1&&(ee=2,re+=1),j<0){for(var q=-(j>>1)-1,X=0;X<V;++X){var J=v(d[X],q);if(J!==void 0)return J}if(ee!==0)for(var X=0;X<fe;++X){var J=v(f[X],q);if(J!==void 0)return J}if(ee!==1)for(var X=0;X<ue;++X){var J=v(l[X],q);if(J!==void 0)return J}ee===0?A(f,u,fe++,q):ee===1?A(l,m,ue++,q):ee===2&&A(d,b,V++,q)}else{var q=(j>>1)-1;ee===0?p(f,u,fe--,q):ee===1?p(l,m,ue--,q):ee===2&&p(d,b,V--,q)}}}function T(w,v,C,M,E,L,z,O,R,D,H,B){var $=0,W=2*w,re=v,Q=v+w,Z=1,K=1;M?K=n:Z=n;for(var le=E;le<L;++le){var fe=le+Z,ue=W*le;g[$++]=z[ue+re],g[$++]=-fe,g[$++]=z[ue+Q],g[$++]=fe}for(var le=R;le<D;++le){var fe=le+K,V=W*le;g[$++]=H[V+re],g[$++]=-fe}var j=$>>>1;i(g,j);for(var ee=0,le=0;le<j;++le){var q=g[2*le+1]|0;if(q<0){var fe=-q,X=!1;if(fe>=n?(X=!M,fe-=n):(X=!!M,fe-=1),X)A(f,u,ee++,fe);else{var J=B[fe],ie=W*fe,ne=H[ie+v+1],oe=H[ie+v+1+w];e:for(var se=0;se<ee;++se){var me=f[se],ce=W*me;if(!(oe<z[ce+v+1]||z[ce+v+1+w]<ne)){for(var pe=v+2;pe<w;++pe)if(H[ie+pe+w]<z[ce+pe]||z[ce+pe+w]<H[ie+pe])continue e;var xe=O[me],Se;if(M?Se=C(J,xe):Se=C(xe,J),Se!==void 0)return Se}}}}else p(f,u,ee--,q-Z)}}function x(w,v,C,M,E,L,z,O,R,D,H){for(var B=0,$=2*w,W=v,re=v+w,Q=M;Q<E;++Q){var Z=Q+n,K=$*Q;g[B++]=L[K+W],g[B++]=-Z,g[B++]=L[K+re],g[B++]=Z}for(var Q=O;Q<R;++Q){var Z=Q+1,le=$*Q;g[B++]=D[le+W],g[B++]=-Z}var fe=B>>>1;i(g,fe);for(var ue=0,Q=0;Q<fe;++Q){var V=g[2*Q+1]|0;if(V<0){var Z=-V;if(Z>=n)f[ue++]=Z-n;else{Z-=1;var j=H[Z],ee=$*Z,q=D[ee+v+1],X=D[ee+v+1+w];e:for(var J=0;J<ue;++J){var ie=f[J],ne=z[ie];if(ne===j)break;var oe=$*ie;if(!(X<L[oe+v+1]||L[oe+v+1+w]<q)){for(var se=v+2;se<w;++se)if(D[ee+se+w]<L[oe+se]||L[oe+se+w]<D[ee+se])continue e;var me=C(ne,j);if(me!==void 0)return me}}}}else{for(var Z=V-n,J=ue-1;J>=0;--J)if(f[J]===Z){for(var se=J+1;se<ue;++se)f[se-1]=f[se];break}--ue}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(o,h,y){var t=o("./lib/monotone"),a=o("./lib/triangulation"),i=o("./lib/delaunay"),n=o("./lib/filter");h.exports=m;function r(d){return[Math.min(d[0],d[1]),Math.max(d[0],d[1])]}function f(d,b){return d[0]-b[0]||d[1]-b[1]}function u(d){return d.map(r).sort(f)}function l(d,b,g){return b in d?d[b]:g}function m(d,b,g){Array.isArray(b)?(g=g||{},b=b||[]):(g=b||{},b=[]);var _=!!l(g,"delaunay",!0),p=!!l(g,"interior",!0),A=!!l(g,"exterior",!0),c=!!l(g,"infinity",!1);if(!p&&!A||d.length===0)return[];var S=t(d,b);if(_||p!==A||c){for(var T=a(d.length,u(b)),x=0;x<S.length;++x){var w=S[x];T.addTriangle(w[0],w[1],w[2])}return _&&i(d,T),A?p?c?n(T,0,c):T.cells():n(T,1,c):n(T,-1)}else return S}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(o,h,y){var t=o("robust-in-sphere")[4];o("binary-search-bounds"),h.exports=i;function a(n,r,f,u,l,m){var d=r.opposite(u,l);if(!(d<0)){if(l<u){var b=u;u=l,l=b,b=m,m=d,d=b}r.isConstraint(u,l)||t(n[u],n[l],n[m],n[d])<0&&f.push(u,l)}}function i(n,r){for(var f=[],u=n.length,l=r.stars,m=0;m<u;++m)for(var d=l[m],b=1;b<d.length;b+=2){var g=d[b];if(!(g<m)&&!r.isConstraint(m,g)){for(var _=d[b-1],p=-1,A=1;A<d.length;A+=2)if(d[A-1]===g){p=d[A];break}p<0||t(n[m],n[g],n[_],n[p])<0&&f.push(m,g)}}for(;f.length>0;){for(var g=f.pop(),m=f.pop(),_=-1,p=-1,d=l[m],c=1;c<d.length;c+=2){var S=d[c-1],T=d[c];S===g?p=T:T===g&&(_=S)}_<0||p<0||t(n[m],n[g],n[_],n[p])>=0||(r.flip(m,g),a(n,r,f,_,m,p),a(n,r,f,m,p,_),a(n,r,f,p,g,_),a(n,r,f,g,_,p))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(o,h,y){var t=o("binary-search-bounds");h.exports=u;function a(l,m,d,b,g,_,p){this.cells=l,this.neighbor=m,this.flags=b,this.constraint=d,this.active=g,this.next=_,this.boundary=p}var i=a.prototype;function n(l,m){return l[0]-m[0]||l[1]-m[1]||l[2]-m[2]}i.locate=function(){var l=[0,0,0];return function(m,d,b){var g=m,_=d,p=b;return d<b?d<m&&(g=d,_=b,p=m):b<m&&(g=b,_=m,p=d),g<0?-1:(l[0]=g,l[1]=_,l[2]=p,t.eq(this.cells,l,n))}}();function r(l,m){for(var d=l.cells(),b=d.length,g=0;g<b;++g){var _=d[g],p=_[0],A=_[1],c=_[2];A<c?A<p&&(_[0]=A,_[1]=c,_[2]=p):c<p&&(_[0]=c,_[1]=p,_[2]=A)}d.sort(n);for(var S=new Array(b),g=0;g<S.length;++g)S[g]=0;var T=[],x=[],w=new Array(3*b),v=new Array(3*b),C=null;m&&(C=[]);for(var M=new a(d,w,v,S,T,x,C),g=0;g<b;++g)for(var _=d[g],E=0;E<3;++E){var p=_[E],A=_[(E+1)%3],L=w[3*g+E]=M.locate(A,p,l.opposite(A,p)),z=v[3*g+E]=l.isConstraint(p,A);L<0&&(z?x.push(g):(T.push(g),S[g]=1),m&&C.push([A,p,-1]))}return M}function f(l,m,d){for(var b=0,g=0;g<l.length;++g)m[g]===d&&(l[b++]=l[g]);return l.length=b,l}function u(l,m,d){var b=r(l,d);if(m===0)return d?b.cells.concat(b.boundary):b.cells;for(var g=1,_=b.active,p=b.next,A=b.flags,c=b.cells,S=b.constraint,T=b.neighbor;_.length>0||p.length>0;){for(;_.length>0;){var x=_.pop();if(A[x]!==-g){A[x]=g,c[x];for(var w=0;w<3;++w){var v=T[3*x+w];v>=0&&A[v]===0&&(S[3*x+w]?p.push(v):(_.push(v),A[v]=g))}}}var C=p;p=_,_=C,p.length=0,g=-g}var M=f(c,A,m);return d?M.concat(b.boundary):M}},{"binary-search-bounds":31}],45:[function(o,h,y){var t=o("binary-search-bounds"),a=o("robust-orientation")[3],i=0,n=1,r=2;h.exports=p;function f(A,c,S,T,x){this.a=A,this.b=c,this.idx=S,this.lowerIds=T,this.upperIds=x}function u(A,c,S,T){this.a=A,this.b=c,this.type=S,this.idx=T}function l(A,c){var S=A.a[0]-c.a[0]||A.a[1]-c.a[1]||A.type-c.type;return S||A.type!==i&&(S=a(A.a,A.b,c.b),S)?S:A.idx-c.idx}function m(A,c){return a(A.a,A.b,c)}function d(A,c,S,T,x){for(var w=t.lt(c,T,m),v=t.gt(c,T,m),C=w;C<v;++C){for(var M=c[C],E=M.lowerIds,z=E.length;z>1&&a(S[E[z-2]],S[E[z-1]],T)>0;)A.push([E[z-1],E[z-2],x]),z-=1;E.length=z,E.push(x);for(var L=M.upperIds,z=L.length;z>1&&a(S[L[z-2]],S[L[z-1]],T)<0;)A.push([L[z-2],L[z-1],x]),z-=1;L.length=z,L.push(x)}}function b(A,c){var S;return A.a[0]<c.a[0]?S=a(A.a,A.b,c.a):S=a(c.b,c.a,A.a),S||(c.b[0]<A.b[0]?S=a(A.a,A.b,c.b):S=a(c.b,c.a,A.b),S||A.idx-c.idx)}function g(A,c,S){var T=t.le(A,S,b),x=A[T],w=x.upperIds,v=w[w.length-1];x.upperIds=[v],A.splice(T+1,0,new f(S.a,S.b,S.idx,[v],w))}function _(A,c,S){var T=S.a;S.a=S.b,S.b=T;var x=t.eq(A,S,b),w=A[x],v=A[x-1];v.upperIds=w.upperIds,A.splice(x,1)}function p(A,c){for(var S=A.length,T=c.length,x=[],w=0;w<S;++w)x.push(new u(A[w],null,i,w));for(var w=0;w<T;++w){var v=c[w],C=A[v[0]],M=A[v[1]];C[0]<M[0]?x.push(new u(C,M,r,w),new u(M,C,n,w)):C[0]>M[0]&&x.push(new u(M,C,r,w),new u(C,M,n,w))}x.sort(l);for(var E=x[0].a[0]-(1+Math.abs(x[0].a[0]))*Math.pow(2,-52),L=[new f([E,1],[E,0],-1,[],[],[],[])],z=[],w=0,O=x.length;w<O;++w){var R=x[w],D=R.type;D===i?d(z,L,A,R.a,R.idx):D===r?g(L,A,R):_(L,A,R)}return z}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(o,h,y){var t=o("binary-search-bounds");h.exports=r;function a(f,u){this.stars=f,this.edges=u}var i=a.prototype;function n(f,u,l){for(var m=1,d=f.length;m<d;m+=2)if(f[m-1]===u&&f[m]===l){f[m-1]=f[d-2],f[m]=f[d-1],f.length=d-2;return}}i.isConstraint=function(){var f=[0,0];function u(l,m){return l[0]-m[0]||l[1]-m[1]}return function(l,m){return f[0]=Math.min(l,m),f[1]=Math.max(l,m),t.eq(this.edges,f,u)>=0}}(),i.removeTriangle=function(f,u,l){var m=this.stars;n(m[f],u,l),n(m[u],l,f),n(m[l],f,u)},i.addTriangle=function(f,u,l){var m=this.stars;m[f].push(u,l),m[u].push(l,f),m[l].push(f,u)},i.opposite=function(f,u){for(var l=this.stars[u],m=1,d=l.length;m<d;m+=2)if(l[m]===f)return l[m-1];return-1},i.flip=function(f,u){var l=this.opposite(f,u),m=this.opposite(u,f);this.removeTriangle(f,u,l),this.removeTriangle(u,f,m),this.addTriangle(f,m,l),this.addTriangle(u,l,m)},i.edges=function(){for(var f=this.stars,u=[],l=0,m=f.length;l<m;++l)for(var d=f[l],b=0,g=d.length;b<g;b+=2)u.push([d[b],d[b+1]]);return u},i.cells=function(){for(var f=this.stars,u=[],l=0,m=f.length;l<m;++l)for(var d=f[l],b=0,g=d.length;b<g;b+=2){var _=d[b],p=d[b+1];l<Math.min(_,p)&&u.push([l,_,p])}return u};function r(f,u){for(var l=new Array(f),m=0;m<f;++m)l[m]=[];return new a(l,u)}},{"binary-search-bounds":31}],47:[function(o,h,y){h.exports=t;function t(a){for(var i=1,n=1;n<a.length;++n)for(var r=0;r<n;++r)if(a[n]<a[r])i=-i;else if(a[r]===a[n])return 0;return i}},{}],48:[function(o,h,y){var t=o("dup"),a=o("robust-linear-solve");function i(f,u){for(var l=0,m=f.length,d=0;d<m;++d)l+=f[d]*u[d];return l}function n(f){var u=f.length;if(u===0)return[];f[0].length;var l=t([f.length+1,f.length+1],1),m=t([f.length+1],1);l[u][u]=0;for(var d=0;d<u;++d){for(var b=0;b<=d;++b)l[b][d]=l[d][b]=2*i(f[d],f[b]);m[d]=i(f[d],f[d])}for(var g=a(l,m),_=0,p=g[u+1],d=0;d<p.length;++d)_+=p[d];for(var A=new Array(u),d=0;d<u;++d){for(var p=g[d],c=0,b=0;b<p.length;++b)c+=p[b];A[d]=c/_}return A}function r(f){if(f.length===0)return[];for(var u=f[0].length,l=t([u]),m=n(f),d=0;d<f.length;++d)for(var b=0;b<u;++b)l[b]+=f[d][b]*m[d];return l}r.barycenetric=n,h.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(o,h,y){h.exports=a;var t=o("circumcenter");function a(i){for(var n=t(i),r=0,f=0;f<i.length;++f)for(var u=i[f],l=0;l<n.length;++l)r+=Math.pow(u[l]-n[l],2);return Math.sqrt(r/i.length)}},{circumcenter:48}],50:[function(o,h,y){h.exports=C;var t=o("union-find"),a=o("box-intersect"),i=o("robust-segment-intersect"),n=o("big-rat"),r=o("big-rat/cmp"),f=o("big-rat/to-float"),u=o("rat-vec"),l=o("nextafter"),m=o("./lib/rat-seg-intersect");function d(M){var E=f(M);return[l(E,-1/0),l(E,1/0)]}function b(M,E){for(var L=new Array(E.length),z=0;z<E.length;++z){var O=E[z],R=M[O[0]],D=M[O[1]];L[z]=[l(Math.min(R[0],D[0]),-1/0),l(Math.min(R[1],D[1]),-1/0),l(Math.max(R[0],D[0]),1/0),l(Math.max(R[1],D[1]),1/0)]}return L}function g(M){for(var E=new Array(M.length),L=0;L<M.length;++L){var z=M[L];E[L]=[l(z[0],-1/0),l(z[1],-1/0),l(z[0],1/0),l(z[1],1/0)]}return E}function _(M,E,L){var z=[];return a(L,function(O,R){var D=E[O],H=E[R];if(!(D[0]===H[0]||D[0]===H[1]||D[1]===H[0]||D[1]===H[1])){var B=M[D[0]],$=M[D[1]],W=M[H[0]],re=M[H[1]];i(B,$,W,re)&&z.push([O,R])}}),z}function p(M,E,L,z){var O=[];return a(L,z,function(R,D){var H=E[R];if(!(H[0]===D||H[1]===D)){var B=M[D],$=M[H[0]],W=M[H[1]];i($,W,B,B)&&O.push([R,D])}}),O}function A(M,E,L,z,O){var R,D,H=M.map(function(ie){return[n(ie[0]),n(ie[1])]});for(R=0;R<L.length;++R){var B=L[R];D=B[0];var $=B[1],W=E[D],re=E[$],Q=m(u(M[W[0]]),u(M[W[1]]),u(M[re[0]]),u(M[re[1]]));if(!!Q){var Z=M.length;M.push([f(Q[0]),f(Q[1])]),H.push(Q),z.push([D,Z],[$,Z])}}for(z.sort(function(ie,ne){if(ie[0]!==ne[0])return ie[0]-ne[0];var oe=H[ie[1]],se=H[ne[1]];return r(oe[0],se[0])||r(oe[1],se[1])}),R=z.length-1;R>=0;--R){var K=z[R];D=K[0];var le=E[D],fe=le[0],ue=le[1],V=M[fe],j=M[ue];if((V[0]-j[0]||V[1]-j[1])<0){var ee=fe;fe=ue,ue=ee}le[0]=fe;var q=le[1]=K[1],X;for(O&&(X=le[2]);R>0&&z[R-1][0]===D;){var K=z[--R],J=K[1];O?E.push([q,J,X]):E.push([q,J]),q=J}O?E.push([q,ue,X]):E.push([q,ue])}return H}function c(M,E,L){for(var z=E.length,O=new t(z),R=[],D=0;D<E.length;++D){var H=E[D],B=d(H[0]),$=d(H[1]);R.push([l(B[0],-1/0),l($[0],-1/0),l(B[1],1/0),l($[1],1/0)])}a(R,function(K,le){O.link(K,le)});for(var W=!0,re=new Array(z),D=0;D<z;++D){var Q=O.find(D);Q!==D&&(W=!1,M[Q]=[Math.min(M[D][0],M[Q][0]),Math.min(M[D][1],M[Q][1])])}if(W)return null;for(var Z=0,D=0;D<z;++D){var Q=O.find(D);Q===D?(re[D]=Z,M[Z++]=M[D]):re[D]=-1}M.length=Z;for(var D=0;D<z;++D)re[D]<0&&(re[D]=re[O.find(D)]);return re}function S(M,E){return M[0]-E[0]||M[1]-E[1]}function T(M,E){var L=M[0]-E[0]||M[1]-E[1];return L||(M[2]<E[2]?-1:M[2]>E[2]?1:0)}function x(M,E,L){if(M.length!==0){if(E)for(var z=0;z<M.length;++z){var O=M[z],R=E[O[0]],D=E[O[1]];O[0]=Math.min(R,D),O[1]=Math.max(R,D)}else for(var z=0;z<M.length;++z){var O=M[z],R=O[0],D=O[1];O[0]=Math.min(R,D),O[1]=Math.max(R,D)}L?M.sort(T):M.sort(S);for(var H=1,z=1;z<M.length;++z){var B=M[z-1],$=M[z];$[0]===B[0]&&$[1]===B[1]&&(!L||$[2]===B[2])||(M[H++]=$)}M.length=H}}function w(M,E,L){var z=c(M,[],g(M));return x(E,z,L),!!z}function v(M,E,L){var z=b(M,E),O=_(M,E,z),R=g(M),D=p(M,E,z,R),H=A(M,E,O,D,L),B=c(M,H);return x(E,B,L),B?!0:O.length>0||D.length>0}function C(M,E,L){var z;if(L){z=E;for(var O=new Array(E.length),R=0;R<E.length;++R){var D=E[R];O[R]=[D[0],D[1],L[R]]}E=O}for(var H=w(M,E,!!L);v(M,E,!!L);)H=!0;if(!!L&&H){z.length=0,L.length=0;for(var R=0;R<E.length;++R){var D=E[R];z.push([D[0],D[1]]),L.push(D[2])}}return H}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(o,h,y){h.exports=m;var t=o("big-rat/mul"),a=o("big-rat/div"),i=o("big-rat/sub"),n=o("big-rat/sign"),r=o("rat-vec/sub"),f=o("rat-vec/add"),u=o("rat-vec/muls");function l(d,b){return i(t(d[0],b[1]),t(d[1],b[0]))}function m(d,b,g,_){var p=r(b,d),A=r(_,g),c=l(p,A);if(n(c)===0)return null;var S=r(d,g),T=l(A,S),x=a(T,c),w=u(p,x),v=f(d,w);return v}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(o,h,y){h.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(o,h,y){var t=o("./colorScale"),a=o("lerp");h.exports=i;function i(u){var l,m,d,b,g,_,p,A,x,c,S;if(u||(u={}),A=(u.nshades||72)-1,p=u.format||"hex",_=u.colormap,_||(_="jet"),typeof _=="string"){if(_=_.toLowerCase(),!t[_])throw Error(_+" not a supported colorscale");g=t[_]}else if(Array.isArray(_))g=_.slice();else throw Error("unsupported colormap option",_);if(g.length>A+1)throw new Error(_+" map requires nshades to be at least size "+g.length);Array.isArray(u.alpha)?u.alpha.length!==2?c=[1,1]:c=u.alpha.slice():typeof u.alpha=="number"?c=[u.alpha,u.alpha]:c=[1,1],l=g.map(function(C){return Math.round(C.index*A)}),c[0]=Math.min(Math.max(c[0],0),1),c[1]=Math.min(Math.max(c[1],0),1);var T=g.map(function(C,M){var E=g[M].index,L=g[M].rgb.slice();return L.length===4&&L[3]>=0&&L[3]<=1||(L[3]=c[0]+(c[1]-c[0])*E),L}),x=[];for(S=0;S<l.length-1;++S){b=l[S+1]-l[S],m=T[S],d=T[S+1];for(var w=0;w<b;w++){var v=w/b;x.push([Math.round(a(m[0],d[0],v)),Math.round(a(m[1],d[1],v)),Math.round(a(m[2],d[2],v)),a(m[3],d[3],v)])}}return x.push(g[g.length-1].rgb.concat(c[1])),p==="hex"?x=x.map(r):p==="rgbaString"?x=x.map(f):p==="float"&&(x=x.map(n)),x}function n(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function r(u){for(var l,m="#",d=0;d<3;++d)l=u[d],l=l.toString(16),m+=("00"+l).substr(l.length);return m}function f(u){return"rgba("+u.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(o,h,y){h.exports=u;var t=o("robust-orientation"),a=o("signum"),i=o("two-sum"),n=o("robust-product"),r=o("robust-sum");function f(l,m,d){var b=i(l[0],-m[0]),g=i(l[1],-m[1]),_=i(d[0],-m[0]),p=i(d[1],-m[1]),A=r(n(b,_),n(g,p));return A[A.length-1]>=0}function u(l,m,d,b){var g=t(m,d,b);if(g===0){var _=a(t(l,m,d)),p=a(t(l,m,b));if(_===p){if(_===0){var A=f(l,m,d),c=f(l,m,b);return A===c?0:A?1:-1}return 0}else{if(p===0)return _>0||f(l,m,b)?-1:1;if(_===0)return p>0||f(l,m,d)?1:-1}return a(p-_)}var S=t(l,m,d);if(S>0)return g>0&&t(l,m,b)>0?1:-1;if(S<0)return g>0||t(l,m,b)>0?1:-1;var T=t(l,m,b);return T>0||f(l,m,d)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(o,h,y){h.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(o,h,y){h.exports=i;var t=Math.min;function a(n,r){return n-r}function i(n,r){var f=n.length,u=n.length-r.length;if(u)return u;switch(f){case 0:return 0;case 1:return n[0]-r[0];case 2:return n[0]+n[1]-r[0]-r[1]||t(n[0],n[1])-t(r[0],r[1]);case 3:var l=n[0]+n[1],m=r[0]+r[1];if(u=l+n[2]-(m+r[2]),u)return u;var d=t(n[0],n[1]),b=t(r[0],r[1]);return t(d,n[2])-t(b,r[2])||t(d+n[2],l)-t(b+r[2],m);case 4:var g=n[0],_=n[1],p=n[2],A=n[3],c=r[0],S=r[1],T=r[2],x=r[3];return g+_+p+A-(c+S+T+x)||t(g,_,p,A)-t(c,S,T,x,c)||t(g+_,g+p,g+A,_+p,_+A,p+A)-t(c+S,c+T,c+x,S+T,S+x,T+x)||t(g+_+p,g+_+A,g+p+A,_+p+A)-t(c+S+T,c+S+x,c+T+x,S+T+x);default:for(var w=n.slice().sort(a),v=r.slice().sort(a),C=0;C<f;++C)if(u=w[C]-v[C],u)return u;return 0}}},{}],57:[function(o,h,y){var t=o("compare-cell"),a=o("cell-orientation");h.exports=i;function i(n,r){return t(n,r)||a(n)-a(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(o,h,y){var t=o("./lib/ch1d"),a=o("./lib/ch2d"),i=o("./lib/chnd");h.exports=n;function n(r){var f=r.length;if(f===0)return[];if(f===1)return[[0]];var u=r[0].length;return u===0?[]:u===1?t(r):u===2?a(r):i(r,u)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(o,h,y){h.exports=t;function t(a){for(var i=0,n=0,r=1;r<a.length;++r)a[r][0]<a[i][0]&&(i=r),a[r][0]>a[n][0]&&(n=r);return i<n?[[i],[n]]:i>n?[[n],[i]]:[[i]]}},{}],60:[function(o,h,y){h.exports=a;var t=o("monotone-convex-hull-2d");function a(i){var n=t(i),r=n.length;if(r<=2)return[];for(var f=new Array(r),u=n[r-1],l=0;l<r;++l){var m=n[l];f[l]=[u,m],u=m}return f}},{"monotone-convex-hull-2d":246}],61:[function(o,h,y){h.exports=r;var t=o("incremental-convex-hull"),a=o("affine-hull");function i(f,u){for(var l=f.length,m=new Array(l),d=0;d<u.length;++d)m[d]=f[u[d]];for(var b=u.length,d=0;d<l;++d)u.indexOf(d)<0&&(m[b++]=f[d]);return m}function n(f,u){for(var l=f.length,m=u.length,d=0;d<l;++d)for(var b=f[d],g=0;g<b.length;++g){var _=b[g];if(_<m)b[g]=u[_];else{_=_-m;for(var p=0;p<m;++p)_>=u[p]&&(_+=1);b[g]=_}}return f}function r(f,u){try{return t(f,!0)}catch{var l=a(f);if(l.length<=u)return[];var m=i(f,l),d=t(m,!0);return n(d,l)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(o,h,y){function t(i,n,r,f,u,l){var m=6*u*u-6*u,d=3*u*u-4*u+1,b=-6*u*u+6*u,g=3*u*u-2*u;if(i.length){l||(l=new Array(i.length));for(var _=i.length-1;_>=0;--_)l[_]=m*i[_]+d*n[_]+b*r[_]+g*f[_];return l}return m*i+d*n+b*r[_]+g*f}function a(i,n,r,f,u,l){var m=u-1,d=u*u,b=m*m,g=(1+2*u)*b,_=u*b,p=d*(3-2*u),A=d*m;if(i.length){l||(l=new Array(i.length));for(var c=i.length-1;c>=0;--c)l[c]=g*i[c]+_*n[c]+p*r[c]+A*f[c];return l}return g*i+_*n+p*r+A*f}h.exports=a,h.exports.derivative=t},{}],63:[function(o,h,y){var t=o("incremental-convex-hull"),a=o("uniq");h.exports=f;function i(u,l){this.point=u,this.index=l}function n(u,l){for(var m=u.point,d=l.point,b=m.length,g=0;g<b;++g){var _=d[g]-m[g];if(_)return _}return 0}function r(u,l,m){if(u===1)return m?[[-1,0]]:[];var d=l.map(function(A,c){return[A[0],c]});d.sort(function(A,c){return A[0]-c[0]});for(var b=new Array(u-1),g=1;g<u;++g){var _=d[g-1],p=d[g];b[g-1]=[_[1],p[1]]}return m&&b.push([-1,b[0][1]],[b[u-1][1],-1]),b}function f(u,l){var m=u.length;if(m===0)return[];var d=u[0].length;if(d<1)return[];if(d===1)return r(m,u,l);for(var b=new Array(m),g=1,_=0;_<m;++_){for(var p=u[_],A=new Array(d+1),c=0,S=0;S<d;++S){var T=p[S];A[S]=T,c+=T*T}A[d]=c,b[_]=new i(A,_),g=Math.max(c,g)}a(b,n),m=b.length;for(var x=new Array(m+d+1),w=new Array(m+d+1),v=(d+1)*(d+1)*g,C=new Array(d+1),_=0;_<=d;++_)C[_]=0;C[d]=v,x[0]=C.slice(),w[0]=-1;for(var _=0;_<=d;++_){var A=C.slice();A[_]=1,x[_+1]=A,w[_+1]=-1}for(var _=0;_<m;++_){var M=b[_];x[_+d+1]=M.point,w[_+d+1]=M.index}var E=t(x,!1);if(l?E=E.filter(function(L){for(var z=0,O=0;O<=d;++O){var R=w[L[O]];if(R<0&&++z>=2)return!1;L[O]=R}return!0}):E=E.filter(function(L){for(var z=0;z<=d;++z){var O=w[L[z]];if(O<0)return!1;L[z]=O}return!0}),d&1)for(var _=0;_<E.length;++_){var M=E[_],A=M[0];M[0]=M[1],M[1]=A}return E}},{"incremental-convex-hull":233,uniq:310}],64:[function(o,h,y){(function(t){(function(){var a=!1;if(typeof Float64Array!="undefined"){var i=new Float64Array(1),n=new Uint32Array(i.buffer);if(i[0]=1,a=!0,n[1]===1072693248){let f=function(m,d){return n[0]=m,n[1]=d,i[0]},u=function(m){return i[0]=m,n[0]},l=function(m){return i[0]=m,n[1]};h.exports=function(d){return i[0]=d,[n[0],n[1]]},h.exports.pack=f,h.exports.lo=u,h.exports.hi=l}else if(n[0]===1072693248){let f=function(m,d){return n[1]=m,n[0]=d,i[0]},u=function(m){return i[0]=m,n[1]},l=function(m){return i[0]=m,n[0]};h.exports=function(d){return i[0]=d,[n[1],n[0]]},h.exports.pack=f,h.exports.lo=u,h.exports.hi=l}else a=!1}if(!a){let f=function(m,d){return r.writeUInt32LE(m,0,!0),r.writeUInt32LE(d,4,!0),r.readDoubleLE(0,!0)},u=function(m){return r.writeDoubleLE(m,0,!0),r.readUInt32LE(0,!0)},l=function(m){return r.writeDoubleLE(m,0,!0),r.readUInt32LE(4,!0)};var r=new t(8);h.exports=function(d){return r.writeDoubleLE(d,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},h.exports.pack=f,h.exports.lo=u,h.exports.hi=l}h.exports.sign=function(f){return h.exports.hi(f)>>>31},h.exports.exponent=function(f){var u=h.exports.hi(f);return(u<<1>>>21)-1023},h.exports.fraction=function(f){var u=h.exports.lo(f),l=h.exports.hi(f),m=l&(1<<20)-1;return l&2146435072&&(m+=1<<20),[u,m]},h.exports.denormalized=function(f){var u=h.exports.hi(f);return!(u&2146435072)}}).call(this)}).call(this,o("buffer").Buffer)},{buffer:3}],65:[function(o,h,y){function t(n,r,f){var u=n[f]|0;if(u<=0)return[];var l=new Array(u),m;if(f===n.length-1)for(m=0;m<u;++m)l[m]=r;else for(m=0;m<u;++m)l[m]=t(n,r,f+1);return l}function a(n,r){var f,u;for(f=new Array(n),u=0;u<n;++u)f[u]=r;return f}function i(n,r){switch(typeof r=="undefined"&&(r=0),typeof n){case"number":if(n>0)return a(n|0,r);break;case"object":if(typeof n.length=="number")return t(n,r,0);break}return[]}h.exports=i},{}],66:[function(o,h,y){h.exports=a;var t=o("uniq");function a(i,n){var r=i.length;if(typeof n!="number"){n=0;for(var f=0;f<r;++f){var u=i[f];n=Math.max(n,u[0],u[1])}n=(n|0)+1}n=n|0;for(var l=new Array(n),f=0;f<n;++f)l[f]=[];for(var f=0;f<r;++f){var u=i[f];l[u[0]].push(u[1]),l[u[1]].push(u[0])}for(var m=0;m<n;++m)t(l[m],function(d,b){return d-b});return l}},{uniq:310}],67:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i||0,f=n||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[r*a[12]+a[8],r*a[13]+a[9],r*a[14]+a[10],r*a[15]+a[11]],[f*a[12]-a[8],f*a[13]-a[9],f*a[14]-a[10],f*a[15]-a[11]]]}},{}],68:[function(o,h,y){h.exports=u;var t=o("cubic-hermite"),a=o("binary-search-bounds");function i(l,m,d){return Math.min(m,Math.max(l,d))}function n(l,m,d){this.dimension=l.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var b=0;b<this.dimension;++b)this.bounds[0][b]=-1/0,this.bounds[1][b]=1/0;this._state=l.slice().reverse(),this._velocity=m.slice().reverse(),this._time=[d],this._scratch=[l.slice(),l.slice(),l.slice(),l.slice(),l.slice()]}var r=n.prototype;r.flush=function(l){var m=a.gt(this._time,l)-1;m<=0||(this._time.splice(0,m),this._state.splice(0,m*this.dimension),this._velocity.splice(0,m*this.dimension))},r.curve=function(l){var m=this._time,d=m.length,b=a.le(m,l),g=this._scratch[0],_=this._state,p=this._velocity,A=this.dimension,c=this.bounds;if(b<0)for(var S=A-1,T=0;T<A;++T,--S)g[T]=_[S];else if(b>=d-1)for(var S=_.length-1,x=l-m[d-1],T=0;T<A;++T,--S)g[T]=_[S]+x*p[S];else{for(var S=A*(b+1)-1,w=m[b],v=m[b+1],C=v-w||1,M=this._scratch[1],E=this._scratch[2],L=this._scratch[3],z=this._scratch[4],O=!0,T=0;T<A;++T,--S)M[T]=_[S],L[T]=p[S]*C,E[T]=_[S+A],z[T]=p[S+A]*C,O=O&&M[T]===E[T]&&L[T]===z[T]&&L[T]===0;if(O)for(var T=0;T<A;++T)g[T]=M[T];else t(M,L,E,z,(l-w)/C,g)}for(var R=c[0],D=c[1],T=0;T<A;++T)g[T]=i(R[T],D[T],g[T]);return g},r.dcurve=function(l){var m=this._time,d=m.length,b=a.le(m,l),g=this._scratch[0],_=this._state,p=this._velocity,A=this.dimension;if(b>=d-1){var c=_.length-1;l-m[d-1];for(var S=0;S<A;++S,--c)g[S]=p[c]}else{for(var c=A*(b+1)-1,T=m[b],x=m[b+1],w=x-T||1,v=this._scratch[1],C=this._scratch[2],M=this._scratch[3],E=this._scratch[4],L=!0,S=0;S<A;++S,--c)v[S]=_[c],M[S]=p[c]*w,C[S]=_[c+A],E[S]=p[c+A]*w,L=L&&v[S]===C[S]&&M[S]===E[S]&&M[S]===0;if(L)for(var S=0;S<A;++S)g[S]=0;else{t.derivative(v,M,C,E,(l-T)/w,g);for(var S=0;S<A;++S)g[S]/=w}}return g},r.lastT=function(){var l=this._time;return l[l.length-1]},r.stable=function(){for(var l=this._velocity,m=l.length,d=this.dimension-1;d>=0;--d)if(l[--m])return!1;return!0},r.jump=function(l){var m=this.lastT(),d=this.dimension;if(!(l<m||arguments.length!==d+1)){var b=this._state,g=this._velocity,_=b.length-this.dimension,p=this.bounds,A=p[0],c=p[1];this._time.push(m,l);for(var S=0;S<2;++S)for(var T=0;T<d;++T)b.push(b[_++]),g.push(0);this._time.push(l);for(var T=d;T>0;--T)b.push(i(A[T-1],c[T-1],arguments[T])),g.push(0)}},r.push=function(l){var m=this.lastT(),d=this.dimension;if(!(l<m||arguments.length!==d+1)){var b=this._state,g=this._velocity,_=b.length-this.dimension,p=l-m,A=this.bounds,c=A[0],S=A[1],T=p>1e-6?1/p:0;this._time.push(l);for(var x=d;x>0;--x){var w=i(c[x-1],S[x-1],arguments[x]);b.push(w),g.push((w-b[_++])*T)}}},r.set=function(l){var m=this.dimension;if(!(l<this.lastT()||arguments.length!==m+1)){var d=this._state,b=this._velocity,g=this.bounds,_=g[0],p=g[1];this._time.push(l);for(var A=m;A>0;--A)d.push(i(_[A-1],p[A-1],arguments[A])),b.push(0)}},r.move=function(l){var m=this.lastT(),d=this.dimension;if(!(l<=m||arguments.length!==d+1)){var b=this._state,g=this._velocity,_=b.length-this.dimension,p=this.bounds,A=p[0],c=p[1],S=l-m,T=S>1e-6?1/S:0;this._time.push(l);for(var x=d;x>0;--x){var w=arguments[x];b.push(i(A[x-1],c[x-1],b[_++]+w)),g.push(w*T)}}},r.idle=function(l){var m=this.lastT();if(!(l<m)){var d=this.dimension,b=this._state,g=this._velocity,_=b.length-d,p=this.bounds,A=p[0],c=p[1],S=l-m;this._time.push(l);for(var T=d-1;T>=0;--T)b.push(i(A[T],c[T],b[_]+S*g[_])),g.push(0),_+=1}};function f(l){for(var m=new Array(l),d=0;d<l;++d)m[d]=0;return m}function u(l,m,d){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if(typeof l=="number"){var b=f(l);return new n(b,b,0)}else return new n(l,f(l.length),0);case 2:if(typeof m=="number"){var b=f(l.length);return new n(l,b,+m)}else d=0;case 3:if(l.length!==m.length)throw new Error("state and velocity lengths must match");return new n(l,m,d)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(o,h,y){h.exports=S;var t=0,a=1;function i(T,x,w,v,C,M){this._color=T,this.key=x,this.value=w,this.left=v,this.right=C,this._count=M}function n(T){return new i(T._color,T.key,T.value,T.left,T.right,T._count)}function r(T,x){return new i(T,x.key,x.value,x.left,x.right,x._count)}function f(T){T._count=1+(T.left?T.left._count:0)+(T.right?T.right._count:0)}function u(T,x){this._compare=T,this.root=x}var l=u.prototype;Object.defineProperty(l,"keys",{get:function(){var T=[];return this.forEach(function(x,w){T.push(x)}),T}}),Object.defineProperty(l,"values",{get:function(){var T=[];return this.forEach(function(x,w){T.push(w)}),T}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(T,x){for(var w=this._compare,v=this.root,C=[],M=[];v;){var E=w(T,v.key);C.push(v),M.push(E),E<=0?v=v.left:v=v.right}C.push(new i(t,T,x,null,null,1));for(var L=C.length-2;L>=0;--L){var v=C[L];M[L]<=0?C[L]=new i(v._color,v.key,v.value,C[L+1],v.right,v._count+1):C[L]=new i(v._color,v.key,v.value,v.left,C[L+1],v._count+1)}for(var L=C.length-1;L>1;--L){var z=C[L-1],v=C[L];if(z._color===a||v._color===a)break;var O=C[L-2];if(O.left===z)if(z.left===v){var R=O.right;if(R&&R._color===t)z._color=a,O.right=r(a,R),O._color=t,L-=1;else{if(O._color=t,O.left=z.right,z._color=a,z.right=O,C[L-2]=z,C[L-1]=v,f(O),f(z),L>=3){var D=C[L-3];D.left===O?D.left=z:D.right=z}break}}else{var R=O.right;if(R&&R._color===t)z._color=a,O.right=r(a,R),O._color=t,L-=1;else{if(z.right=v.left,O._color=t,O.left=v.right,v._color=a,v.left=z,v.right=O,C[L-2]=v,C[L-1]=z,f(O),f(z),f(v),L>=3){var D=C[L-3];D.left===O?D.left=v:D.right=v}break}}else if(z.right===v){var R=O.left;if(R&&R._color===t)z._color=a,O.left=r(a,R),O._color=t,L-=1;else{if(O._color=t,O.right=z.left,z._color=a,z.left=O,C[L-2]=z,C[L-1]=v,f(O),f(z),L>=3){var D=C[L-3];D.right===O?D.right=z:D.left=z}break}}else{var R=O.left;if(R&&R._color===t)z._color=a,O.left=r(a,R),O._color=t,L-=1;else{if(z.left=v.right,O._color=t,O.right=v.left,v._color=a,v.right=z,v.left=O,C[L-2]=v,C[L-1]=z,f(O),f(z),f(v),L>=3){var D=C[L-3];D.right===O?D.right=v:D.left=v}break}}}return C[0]._color=a,new u(w,C[0])};function m(T,x){if(x.left){var w=m(T,x.left);if(w)return w}var w=T(x.key,x.value);if(w)return w;if(x.right)return m(T,x.right)}function d(T,x,w,v){var C=x(T,v.key);if(C<=0){if(v.left){var M=d(T,x,w,v.left);if(M)return M}var M=w(v.key,v.value);if(M)return M}if(v.right)return d(T,x,w,v.right)}function b(T,x,w,v,C){var M=w(T,C.key),E=w(x,C.key),L;if(M<=0&&(C.left&&(L=b(T,x,w,v,C.left),L)||E>0&&(L=v(C.key,C.value),L)))return L;if(E>0&&C.right)return b(T,x,w,v,C.right)}l.forEach=function(x,w,v){if(!!this.root)switch(arguments.length){case 1:return m(x,this.root);case 2:return d(w,this._compare,x,this.root);case 3:return this._compare(w,v)>=0?void 0:b(w,v,this._compare,x,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var T=[],x=this.root;x;)T.push(x),x=x.left;return new g(this,T)}}),Object.defineProperty(l,"end",{get:function(){for(var T=[],x=this.root;x;)T.push(x),x=x.right;return new g(this,T)}}),l.at=function(T){if(T<0)return new g(this,[]);for(var x=this.root,w=[];;){if(w.push(x),x.left){if(T<x.left._count){x=x.left;continue}T-=x.left._count}if(!T)return new g(this,w);if(T-=1,x.right){if(T>=x.right._count)break;x=x.right}else break}return new g(this,[])},l.ge=function(T){for(var x=this._compare,w=this.root,v=[],C=0;w;){var M=x(T,w.key);v.push(w),M<=0&&(C=v.length),M<=0?w=w.left:w=w.right}return v.length=C,new g(this,v)},l.gt=function(T){for(var x=this._compare,w=this.root,v=[],C=0;w;){var M=x(T,w.key);v.push(w),M<0&&(C=v.length),M<0?w=w.left:w=w.right}return v.length=C,new g(this,v)},l.lt=function(T){for(var x=this._compare,w=this.root,v=[],C=0;w;){var M=x(T,w.key);v.push(w),M>0&&(C=v.length),M<=0?w=w.left:w=w.right}return v.length=C,new g(this,v)},l.le=function(T){for(var x=this._compare,w=this.root,v=[],C=0;w;){var M=x(T,w.key);v.push(w),M>=0&&(C=v.length),M<0?w=w.left:w=w.right}return v.length=C,new g(this,v)},l.find=function(T){for(var x=this._compare,w=this.root,v=[];w;){var C=x(T,w.key);if(v.push(w),C===0)return new g(this,v);C<=0?w=w.left:w=w.right}return new g(this,[])},l.remove=function(T){var x=this.find(T);return x?x.remove():this},l.get=function(T){for(var x=this._compare,w=this.root;w;){var v=x(T,w.key);if(v===0)return w.value;v<=0?w=w.left:w=w.right}};function g(T,x){this.tree=T,this._stack=x}var _=g.prototype;Object.defineProperty(_,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(_,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),_.clone=function(){return new g(this.tree,this._stack.slice())};function p(T,x){T.key=x.key,T.value=x.value,T.left=x.left,T.right=x.right,T._color=x._color,T._count=x._count}function A(T){for(var x,w,v,C,M=T.length-1;M>=0;--M){if(x=T[M],M===0){x._color=a;return}if(w=T[M-1],w.left===x){if(v=w.right,v.right&&v.right._color===t){if(v=w.right=n(v),C=v.right=n(v.right),w.right=v.left,v.left=w,v.right=C,v._color=w._color,x._color=a,w._color=a,C._color=a,f(w),f(v),M>1){var E=T[M-2];E.left===w?E.left=v:E.right=v}T[M-1]=v;return}else if(v.left&&v.left._color===t){if(v=w.right=n(v),C=v.left=n(v.left),w.right=C.left,v.left=C.right,C.left=w,C.right=v,C._color=w._color,w._color=a,v._color=a,x._color=a,f(w),f(v),f(C),M>1){var E=T[M-2];E.left===w?E.left=C:E.right=C}T[M-1]=C;return}if(v._color===a)if(w._color===t){w._color=a,w.right=r(t,v);return}else{w.right=r(t,v);continue}else{if(v=n(v),w.right=v.left,v.left=w,v._color=w._color,w._color=t,f(w),f(v),M>1){var E=T[M-2];E.left===w?E.left=v:E.right=v}T[M-1]=v,T[M]=w,M+1<T.length?T[M+1]=x:T.push(x),M=M+2}}else{if(v=w.left,v.left&&v.left._color===t){if(v=w.left=n(v),C=v.left=n(v.left),w.left=v.right,v.right=w,v.left=C,v._color=w._color,x._color=a,w._color=a,C._color=a,f(w),f(v),M>1){var E=T[M-2];E.right===w?E.right=v:E.left=v}T[M-1]=v;return}else if(v.right&&v.right._color===t){if(v=w.left=n(v),C=v.right=n(v.right),w.left=C.right,v.right=C.left,C.right=w,C.left=v,C._color=w._color,w._color=a,v._color=a,x._color=a,f(w),f(v),f(C),M>1){var E=T[M-2];E.right===w?E.right=C:E.left=C}T[M-1]=C;return}if(v._color===a)if(w._color===t){w._color=a,w.left=r(t,v);return}else{w.left=r(t,v);continue}else{if(v=n(v),w.left=v.right,v.right=w,v._color=w._color,w._color=t,f(w),f(v),M>1){var E=T[M-2];E.right===w?E.right=v:E.left=v}T[M-1]=v,T[M]=w,M+1<T.length?T[M+1]=x:T.push(x),M=M+2}}}}_.remove=function(){var T=this._stack;if(T.length===0)return this.tree;var x=new Array(T.length),w=T[T.length-1];x[x.length-1]=new i(w._color,w.key,w.value,w.left,w.right,w._count);for(var v=T.length-2;v>=0;--v){var w=T[v];w.left===T[v+1]?x[v]=new i(w._color,w.key,w.value,x[v+1],w.right,w._count):x[v]=new i(w._color,w.key,w.value,w.left,x[v+1],w._count)}if(w=x[x.length-1],w.left&&w.right){var C=x.length;for(w=w.left;w.right;)x.push(w),w=w.right;var M=x[C-1];x.push(new i(w._color,M.key,M.value,w.left,w.right,w._count)),x[C-1].key=w.key,x[C-1].value=w.value;for(var v=x.length-2;v>=C;--v)w=x[v],x[v]=new i(w._color,w.key,w.value,w.left,x[v+1],w._count);x[C-1].left=x[C]}if(w=x[x.length-1],w._color===t){var E=x[x.length-2];E.left===w?E.left=null:E.right===w&&(E.right=null),x.pop();for(var v=0;v<x.length;++v)x[v]._count--;return new u(this.tree._compare,x[0])}else if(w.left||w.right){w.left?p(w,w.left):w.right&&p(w,w.right),w._color=a;for(var v=0;v<x.length-1;++v)x[v]._count--;return new u(this.tree._compare,x[0])}else{if(x.length===1)return new u(this.tree._compare,null);for(var v=0;v<x.length;++v)x[v]._count--;var L=x[x.length-2];A(x),L.left===w?L.left=null:L.right=null}return new u(this.tree._compare,x[0])},Object.defineProperty(_,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(_,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(_,"index",{get:function(){var T=0,x=this._stack;if(x.length===0){var w=this.tree.root;return w?w._count:0}else x[x.length-1].left&&(T=x[x.length-1].left._count);for(var v=x.length-2;v>=0;--v)x[v+1]===x[v].right&&(++T,x[v].left&&(T+=x[v].left._count));return T},enumerable:!0}),_.next=function(){var T=this._stack;if(T.length!==0){var x=T[T.length-1];if(x.right)for(x=x.right;x;)T.push(x),x=x.left;else for(T.pop();T.length>0&&T[T.length-1].right===x;)x=T[T.length-1],T.pop()}},Object.defineProperty(_,"hasNext",{get:function(){var T=this._stack;if(T.length===0)return!1;if(T[T.length-1].right)return!0;for(var x=T.length-1;x>0;--x)if(T[x-1].left===T[x])return!0;return!1}}),_.update=function(T){var x=this._stack;if(x.length===0)throw new Error("Can't update empty node!");var w=new Array(x.length),v=x[x.length-1];w[w.length-1]=new i(v._color,v.key,T,v.left,v.right,v._count);for(var C=x.length-2;C>=0;--C)v=x[C],v.left===x[C+1]?w[C]=new i(v._color,v.key,v.value,w[C+1],v.right,v._count):w[C]=new i(v._color,v.key,v.value,v.left,w[C+1],v._count);return new u(this.tree._compare,w[0])},_.prev=function(){var T=this._stack;if(T.length!==0){var x=T[T.length-1];if(x.left)for(x=x.left;x;)T.push(x),x=x.right;else for(T.pop();T.length>0&&T[T.length-1].left===x;)x=T[T.length-1],T.pop()}},Object.defineProperty(_,"hasPrev",{get:function(){var T=this._stack;if(T.length===0)return!1;if(T[T.length-1].left)return!0;for(var x=T.length-1;x>0;--x)if(T[x-1].right===T[x])return!0;return!1}});function c(T,x){return T<x?-1:T>x?1:0}function S(T){return new u(T||c,null)}},{}],70:[function(o,h,y){h.exports=x;var t=o("./lib/text.js"),a=o("./lib/lines.js"),i=o("./lib/background.js"),n=o("./lib/cube.js"),r=o("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function u(w,v){return w[0]=v[0],w[1]=v[1],w[2]=v[2],w}function l(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(w)}var m=l.prototype;m.update=function(w){w=w||{};function v(W,re,Q){if(Q in w){var Z=w[Q],K=this[Q],le;(W?Array.isArray(Z)&&Array.isArray(Z[0]):Array.isArray(Z))?this[Q]=le=[re(Z[0]),re(Z[1]),re(Z[2])]:this[Q]=le=[re(Z),re(Z),re(Z)];for(var fe=0;fe<3;++fe)if(le[fe]!==K[fe])return!0}return!1}var C=v.bind(this,!1,Number),M=v.bind(this,!1,Boolean),E=v.bind(this,!1,String),L=v.bind(this,!0,function(W){if(Array.isArray(W)){if(W.length===3)return[+W[0],+W[1],+W[2],1];if(W.length===4)return[+W[0],+W[1],+W[2],+W[3]]}return[0,0,0,1]}),z,O=!1,R=!1;if("bounds"in w)for(var D=w.bounds,H=0;H<2;++H)for(var B=0;B<3;++B)D[H][B]!==this.bounds[H][B]&&(R=!0),this.bounds[H][B]=D[H][B];if("ticks"in w){z=w.ticks,O=!0,this.autoTicks=!1;for(var H=0;H<3;++H)this.tickSpacing[H]=0}else C("tickSpacing")&&(this.autoTicks=!0,R=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),R=!0,O=!0,this._firstInit=!1),R&&this.autoTicks&&(z=r.create(this.bounds,this.tickSpacing),O=!0),O){for(var H=0;H<3;++H)z[H].sort(function(re,Q){return re.x-Q.x});r.equal(z,this.ticks)?O=!1:this.ticks=z}M("tickEnable"),E("tickFont")&&(O=!0),C("tickSize"),C("tickAngle"),C("tickPad"),L("tickColor");var $=E("labels");E("labelFont")&&($=!0),M("labelEnable"),C("labelSize"),C("labelPad"),L("labelColor"),M("lineEnable"),M("lineMirror"),C("lineWidth"),L("lineColor"),M("lineTickEnable"),M("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),L("lineTickColor"),M("gridEnable"),C("gridWidth"),L("gridColor"),M("zeroEnable"),L("zeroLineColor"),C("zeroLineWidth"),M("backgroundEnable"),L("backgroundColor"),this._text?this._text&&($||O)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=t(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&O&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var b=[new d,new d,new d];function g(w,v,C,M,E){for(var L=w.primalOffset,z=w.primalMinor,O=w.mirrorOffset,R=w.mirrorMinor,D=M[v],H=0;H<3;++H)if(v!==H){var B=L,$=O,W=z,re=R;D&1<<H&&(B=O,$=L,W=R,re=z),B[H]=C[0][H],$[H]=C[1][H],E[H]>0?(W[H]=-1,re[H]=0):(W[H]=0,re[H]=1)}}var _=[0,0,0],p={model:f,view:f,projection:f,_ortho:!1};m.isOpaque=function(){return!0},m.isTransparent=function(){return!1},m.drawTransparent=function(w){};var A=0,c=[0,0,0],S=[0,0,0],T=[0,0,0];m.draw=function(w){w=w||p;for(var K=this.gl,v=w.model||f,C=w.view||f,M=w.projection||f,E=this.bounds,L=w._ortho||!1,z=n(v,C,M,E,L),O=z.cubeEdges,R=z.axis,D=C[12],H=C[13],B=C[14],$=C[15],W=L?2:1,re=W*this.pixelRatio*(M[3]*D+M[7]*H+M[11]*B+M[15]*$)/K.drawingBufferHeight,Q=0;Q<3;++Q)this.lastCubeProps.cubeEdges[Q]=O[Q],this.lastCubeProps.axis[Q]=R[Q];for(var Z=b,Q=0;Q<3;++Q)g(b[Q],Q,this.bounds,O,R);for(var K=this.gl,le=_,Q=0;Q<3;++Q)this.backgroundEnable[Q]?le[Q]=R[Q]:le[Q]=0;this._background.draw(v,C,M,E,le,this.backgroundColor),this._lines.bind(v,C,M,this);for(var Q=0;Q<3;++Q){var fe=[0,0,0];R[Q]>0?fe[Q]=E[1][Q]:fe[Q]=E[0][Q];for(var ue=0;ue<2;++ue){var V=(Q+1+ue)%3,j=(Q+1+(ue^1))%3;this.gridEnable[V]&&this._lines.drawGrid(V,j,this.bounds,fe,this.gridColor[V],this.gridWidth[V]*this.pixelRatio)}for(var ue=0;ue<2;++ue){var V=(Q+1+ue)%3,j=(Q+1+(ue^1))%3;this.zeroEnable[j]&&Math.min(E[0][j],E[1][j])<=0&&Math.max(E[0][j],E[1][j])>=0&&this._lines.drawZero(V,j,this.bounds,fe,this.zeroLineColor[j],this.zeroLineWidth[j]*this.pixelRatio)}}for(var Q=0;Q<3;++Q){this.lineEnable[Q]&&this._lines.drawAxisLine(Q,this.bounds,Z[Q].primalOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio),this.lineMirror[Q]&&this._lines.drawAxisLine(Q,this.bounds,Z[Q].mirrorOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio);for(var ee=u(c,Z[Q].primalMinor),q=u(S,Z[Q].mirrorMinor),X=this.lineTickLength,ue=0;ue<3;++ue){var J=re/v[5*ue];ee[ue]*=X[ue]*J,q[ue]*=X[ue]*J}this.lineTickEnable[Q]&&this._lines.drawAxisTicks(Q,Z[Q].primalOffset,ee,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio),this.lineTickMirror[Q]&&this._lines.drawAxisTicks(Q,Z[Q].mirrorOffset,q,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio)}this._lines.unbind(),this._text.bind(v,C,M,this.pixelRatio);var ie,ne=.5,oe,se;function me(Ce){se=[0,0,0],se[Ce]=1}function ce(Ce,Ee,Oe){var _e=(Ce+1)%3,Re=(Ce+2)%3,Ve=Ee[_e],Je=Ee[Re],ze=Oe[_e],De=Oe[Re];if(Ve>0&&De>0){me(_e);return}else if(Ve>0&&De<0){me(_e);return}else if(Ve<0&&De>0){me(_e);return}else if(Ve<0&&De<0){me(_e);return}else if(Je>0&&ze>0){me(Re);return}else if(Je>0&&ze<0){me(Re);return}else if(Je<0&&ze>0){me(Re);return}else if(Je<0&&ze<0){me(Re);return}}for(var Q=0;Q<3;++Q){for(var pe=Z[Q].primalMinor,xe=Z[Q].mirrorMinor,Se=u(T,Z[Q].primalOffset),ue=0;ue<3;++ue)this.lineTickEnable[Q]&&(Se[ue]+=re*pe[ue]*Math.max(this.lineTickLength[ue],0)/v[5*ue]);var Ae=[0,0,0];if(Ae[Q]=1,this.tickEnable[Q]){this.tickAngle[Q]===-3600?(this.tickAngle[Q]=0,this.tickAlign[Q]="auto"):this.tickAlign[Q]=-1,oe=1,ie=[this.tickAlign[Q],ne,oe],ie[0]==="auto"?ie[0]=A:ie[0]=parseInt(""+ie[0]),se=[0,0,0],ce(Q,pe,xe);for(var ue=0;ue<3;++ue)Se[ue]+=re*pe[ue]*this.tickPad[ue]/v[5*ue];this._text.drawTicks(Q,this.tickSize[Q],this.tickAngle[Q],Se,this.tickColor[Q],Ae,se,ie)}if(this.labelEnable[Q]){oe=0,se=[0,0,0],this.labels[Q].length>4&&(me(Q),oe=1),ie=[this.labelAlign[Q],ne,oe],ie[0]==="auto"?ie[0]=A:ie[0]=parseInt(""+ie[0]);for(var ue=0;ue<3;++ue)Se[ue]+=re*pe[ue]*this.labelPad[ue]/v[5*ue];Se[Q]+=.5*(E[0][Q]+E[1][Q]),this._text.drawLabel(Q,this.labelSize[Q],this.labelAngle[Q],Se,this.labelColor[Q],[0,0,0],se,ie)}}this._text.unbind()},m.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function x(w,v){var C=new l(w);return C.update(v),C}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(o,h,y){h.exports=f;var t=o("gl-buffer"),a=o("gl-vao"),i=o("./shaders").bg;function n(u,l,m,d){this.gl=u,this.buffer=l,this.vao=m,this.shader=d}var r=n.prototype;r.draw=function(u,l,m,d,b,g){for(var _=!1,p=0;p<3;++p)_=_||b[p];if(!!_){var A=this.gl;A.enable(A.POLYGON_OFFSET_FILL),A.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:l,projection:m,bounds:d,enable:b,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),A.disable(A.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(u){for(var l=[],m=[],d=0,b=0;b<3;++b)for(var g=(b+1)%3,_=(b+2)%3,p=[0,0,0],A=[0,0,0],c=-1;c<=1;c+=2){m.push(d,d+2,d+1,d+1,d+2,d+3),p[b]=c,A[b]=c;for(var S=-1;S<=1;S+=2){p[g]=S;for(var T=-1;T<=1;T+=2)p[_]=T,l.push(p[0],p[1],p[2],A[0],A[1],A[2]),d+=1}var x=g;g=_,_=x}var w=t(u,new Float32Array(l)),v=t(u,new Uint16Array(m),u.ELEMENT_ARRAY_BUFFER),C=a(u,[{buffer:w,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:w,type:u.FLOAT,size:3,offset:12,stride:24}],v),M=i(u);return M.attributes.position.location=0,M.attributes.normal.location=1,new n(u,w,C,M)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(o,h,y){h.exports=c;var t=o("bit-twiddle"),a=o("gl-mat4/multiply"),i=o("split-polygon"),n=o("robust-orientation"),r=new Array(16),f=new Array(8),u=new Array(8),l=new Array(3),m=[0,0,0];(function(){for(var S=0;S<8;++S)f[S]=[1,1,1,1],u[S]=[1,1,1]})();function d(S,T,x){for(var w=0;w<4;++w){S[w]=x[12+w];for(var v=0;v<3;++v)S[w]+=T[v]*x[4*v+w]}}var b=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(S){for(var T=0;T<b.length;++T)if(S=i.positive(S,b[T]),S.length<3)return 0;for(var x=S[0],w=x[0]/x[3],v=x[1]/x[3],C=0,T=1;T+1<S.length;++T){var M=S[T],E=S[T+1],L=M[0]/M[3],z=M[1]/M[3],O=E[0]/E[3],R=E[1]/E[3],D=L-w,H=z-v,B=O-w,$=R-v;C+=Math.abs(D*$-H*B)}return C}var _=[1,1,1],p=[0,0,0],A={cubeEdges:_,axis:p};function c(S,T,x,w,v){a(r,T,S),a(r,x,r);for(var C=0,M=0;M<2;++M){l[2]=w[M][2];for(var E=0;E<2;++E){l[1]=w[E][1];for(var L=0;L<2;++L)l[0]=w[L][0],d(f[C],l,r),C+=1}}for(var z=-1,M=0;M<8;++M){for(var O=f[M][3],R=0;R<3;++R)u[M][R]=f[M][R]/O;v&&(u[M][2]*=-1),O<0&&(z<0||u[M][2]<u[z][2])&&(z=M)}if(z<0){z=0;for(var D=0;D<3;++D){for(var H=(D+2)%3,B=(D+1)%3,$=-1,W=-1,re=0;re<2;++re){var Q=re<<D,Z=Q+(re<<H)+(1-re<<B),K=Q+(1-re<<H)+(re<<B);n(u[Q],u[Z],u[K],m)<0||(re?$=1:W=1)}if($<0||W<0){W>$&&(z|=1<<D);continue}for(var re=0;re<2;++re){var Q=re<<D,Z=Q+(re<<H)+(1-re<<B),K=Q+(1-re<<H)+(re<<B),le=g([f[Q],f[Z],f[K],f[Q+(1<<H)+(1<<B)]]);re?$=le:W=le}if(W>$){z|=1<<D;continue}}}for(var fe=7^z,ue=-1,M=0;M<8;++M)M===z||M===fe||(ue<0||u[ue][1]>u[M][1])&&(ue=M);for(var V=-1,M=0;M<3;++M){var j=ue^1<<M;if(!(j===z||j===fe)){V<0&&(V=j);var B=u[j];B[0]<u[V][0]&&(V=j)}}for(var ee=-1,M=0;M<3;++M){var j=ue^1<<M;if(!(j===z||j===fe||j===V)){ee<0&&(ee=j);var B=u[j];B[0]>u[ee][0]&&(ee=j)}}var q=_;q[0]=q[1]=q[2]=0,q[t.log2(V^ue)]=ue&V,q[t.log2(ue^ee)]=ue&ee;var X=ee^7;X===z||X===fe?(X=V^7,q[t.log2(ee^X)]=X&ee):q[t.log2(V^X)]=X&V;for(var J=p,ie=z,D=0;D<3;++D)ie&1<<D?J[D]=-1:J[D]=1;return A}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(o,h,y){h.exports=_;var t=o("gl-buffer"),a=o("gl-vao"),i=o("./shaders").line,n=[0,0,0],r=[0,0,0],f=[0,0,0],u=[0,0,0],l=[1,1];function m(p){return p[0]=p[1]=p[2]=0,p}function d(p,A){return p[0]=A[0],p[1]=A[1],p[2]=A[2],p}function b(p,A,c,S,T,x,w,v){this.gl=p,this.vertBuffer=A,this.vao=c,this.shader=S,this.tickCount=T,this.tickOffset=x,this.gridCount=w,this.gridOffset=v}var g=b.prototype;g.bind=function(p,A,c){this.shader.bind(),this.shader.uniforms.model=p,this.shader.uniforms.view=A,this.shader.uniforms.projection=c,l[0]=this.gl.drawingBufferWidth,l[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=l,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(p,A,c,S,T){var x=m(r);this.shader.uniforms.majorAxis=r,x[p]=A[1][p]-A[0][p],this.shader.uniforms.minorAxis=x;var w=d(u,c);w[p]+=A[0][p],this.shader.uniforms.offset=w,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=S;var v=m(f);v[(p+2)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6);var v=m(f);v[(p+1)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(p,A,c,S,T){if(!!this.tickCount[p]){var x=m(n);x[p]=1,this.shader.uniforms.majorAxis=x,this.shader.uniforms.offset=A,this.shader.uniforms.minorAxis=c,this.shader.uniforms.color=S,this.shader.uniforms.lineWidth=T;var w=m(f);w[p]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p])}},g.drawGrid=function(p,A,c,S,T,x){if(!!this.gridCount[p]){var w=m(r);w[A]=c[1][A]-c[0][A],this.shader.uniforms.minorAxis=w;var v=d(u,S);v[A]+=c[0][A],this.shader.uniforms.offset=v;var C=m(n);C[p]=1,this.shader.uniforms.majorAxis=C;var M=m(f);M[p]=1,this.shader.uniforms.screenAxis=M,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,this.gridCount[p],this.gridOffset[p])}},g.drawZero=function(p,A,c,S,T,x){var w=m(r);this.shader.uniforms.majorAxis=w,w[p]=c[1][p]-c[0][p],this.shader.uniforms.minorAxis=w;var v=d(u,S);v[p]+=c[0][p],this.shader.uniforms.offset=v;var C=m(f);C[A]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function _(p,A,c){var S=[],T=[0,0,0],x=[0,0,0],w=[0,0,0],v=[0,0,0];S.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var L=S.length/3|0,M=0;M<c[C].length;++M){var E=+c[C][M].x;S.push(E,0,1,E,1,1,E,0,-1,E,0,-1,E,1,1,E,1,-1)}var O=S.length/3|0;T[C]=L,x[C]=O-L;for(var L=S.length/3|0,z=0;z<c[C].length;++z){var E=+c[C][z].x;S.push(E,0,1,E,1,1,E,0,-1,E,0,-1,E,1,1,E,1,-1)}var O=S.length/3|0;w[C]=L,v[C]=O-L}var R=t(p,new Float32Array(S)),D=a(p,[{buffer:R,type:p.FLOAT,size:3,stride:0,offset:0}]),H=i(p);return H.attributes.position.location=0,new b(p,R,D,H,x,T,v,w)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(o,h,y){var t=o("glslify"),a=o("gl-shader"),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);y.line=function(m){return a(m,i,n,null,[{name:"position",type:"vec3"}])};var r=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);y.text=function(m){return a(m,r,f,null,[{name:"position",type:"vec3"}])};var u=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),l=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);y.bg=function(m){return a(m,u,l,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(o,h,y){(function(t){(function(){h.exports=_;var a=o("gl-buffer"),i=o("gl-vao"),n=o("vectorize-text"),r=o("./shaders").text,f=window||t.global||{},u=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var l=3;function m(p,A,c,S){this.gl=p,this.shader=A,this.buffer=c,this.vao=S,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var d=m.prototype,b=[0,0];d.bind=function(p,A,c,S){this.vao.bind(),this.shader.bind();var T=this.shader.uniforms;T.model=p,T.view=A,T.projection=c,T.pixelScale=S,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=b},d.unbind=function(){this.vao.unbind()},d.update=function(p,A,c,S,T){var x=[];function w(D,H,B,$,W,re){var Q=u[B];Q||(Q=u[B]={});var Z=Q[H];Z||(Z=Q[H]=g(H,{triangles:!0,font:B,textAlign:"center",textBaseline:"middle",lineSpacing:W,styletags:re}));for(var K=($||12)/12,le=Z.positions,fe=Z.cells,ue=0,V=fe.length;ue<V;++ue)for(var j=fe[ue],ee=2;ee>=0;--ee){var q=le[j[ee]];x.push(K*q[0],-K*q[1],D)}}for(var v=[0,0,0],C=[0,0,0],M=[0,0,0],E=[0,0,0],L=1.25,z={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){M[O]=x.length/l|0,w(.5*(p[0][O]+p[1][O]),A[O],c[O],12,L,z),E[O]=(x.length/l|0)-M[O],v[O]=x.length/l|0;for(var R=0;R<S[O].length;++R)!S[O][R].text||w(S[O][R].x,S[O][R].text,S[O][R].font||T,S[O][R].fontSize||12,L,z);C[O]=(x.length/l|0)-v[O]}this.buffer.update(x),this.tickOffset=v,this.tickCount=C,this.labelOffset=M,this.labelCount=E},d.drawTicks=function(p,A,c,S,T,x,w,v){!this.tickCount[p]||(this.shader.uniforms.axis=x,this.shader.uniforms.color=T,this.shader.uniforms.angle=c,this.shader.uniforms.scale=A,this.shader.uniforms.offset=S,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p]))},d.drawLabel=function(p,A,c,S,T,x,w,v){!this.labelCount[p]||(this.shader.uniforms.axis=x,this.shader.uniforms.color=T,this.shader.uniforms.angle=c,this.shader.uniforms.scale=A,this.shader.uniforms.offset=S,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.labelCount[p],this.labelOffset[p]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function g(p,A){try{return n(p,A)}catch(c){return console.warn('error vectorizing text:"'+p+'" error:',c),{cells:[],positions:[]}}}function _(p,A,c,S,T,x){var w=a(p),v=i(p,[{buffer:w,size:3}]),C=r(p);C.attributes.position.location=0;var M=new m(p,C,w,v);return M.update(A,c,S,T,x),M}}).call(this)}).call(this,o("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(o,h,y){y.create=a,y.equal=i;function t(n,r){var f=n+"",u=f.indexOf("."),l=0;u>=0&&(l=f.length-u-1);var m=Math.pow(10,l),d=Math.round(n*r*m),b=d+"";if(b.indexOf("e")>=0)return b;var g=d/m,_=d%m;d<0?(g=-Math.ceil(g)|0,_=-_|0):(g=Math.floor(g)|0,_=_|0);var p=""+g;if(d<0&&(p="-"+p),l){for(var A=""+_;A.length<l;)A="0"+A;return p+"."+A}else return p}function a(n,r){for(var f=[],u=0;u<3;++u){var l=[];.5*(n[0][u]+n[1][u]);for(var m=0;m*r[u]<=n[1][u];++m)l.push({x:m*r[u],text:t(r[u],m)});for(var m=-1;m*r[u]>=n[0][u];--m)l.push({x:m*r[u],text:t(r[u],m)});f.push(l)}return f}function i(n,r){for(var f=0;f<3;++f){if(n[f].length!==r[f].length)return!1;for(var u=0;u<n[f].length;++u){var l=n[f][u],m=r[f][u];if(l.x!==m.x||l.text!==m.text||l.font!==m.font||l.fontColor!==m.fontColor||l.fontSize!==m.fontSize||l.dx!==m.dx||l.dy!==m.dy)return!1}}return!0}},{}],77:[function(o,h,y){h.exports=A;var t=o("extract-frustum-planes"),a=o("split-polygon"),i=o("./lib/cube.js"),n=o("gl-mat4/multiply"),r=o("gl-mat4/transpose"),f=o("gl-vec4/transformMat4"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l=new Float32Array(16);function m(c,S,T){this.lo=c,this.hi=S,this.pixelsPerDataUnit=T}var d=[0,0,0,1],b=[0,0,0,1];function g(c,S,T,x,w){for(var v=0;v<3;++v){for(var C=d,M=b,E=0;E<3;++E)M[E]=C[E]=T[E];M[3]=C[3]=1,M[v]+=1,f(M,M,S),M[3]<0&&(c[v]=1/0),C[v]-=1,f(C,C,S),C[3]<0&&(c[v]=1/0);var L=(C[0]/C[3]-M[0]/M[3])*x,z=(C[1]/C[3]-M[1]/M[3])*w;c[v]=.25*Math.sqrt(L*L+z*z)}return c}var _=[new m(1/0,-1/0,1/0),new m(1/0,-1/0,1/0),new m(1/0,-1/0,1/0)],p=[0,0,0];function A(c,S,T,x,z){var v=S.model||u,C=S.view||u,M=S.projection||u,E=S._ortho||!1,L=c.bounds,z=z||i(v,C,M,L,E),O=z.axis;n(l,C,v),n(l,M,l);for(var R=_,D=0;D<3;++D)R[D].lo=1/0,R[D].hi=-1/0,R[D].pixelsPerDataUnit=1/0;var H=t(r(l,l));r(l,l);for(var B=0;B<3;++B){var $=(B+1)%3,W=(B+2)%3,re=p;e:for(var D=0;D<2;++D){var Q=[];if(O[B]<0!=!!D){re[B]=L[D][B];for(var Z=0;Z<2;++Z){re[$]=L[Z^D][$];for(var K=0;K<2;++K)re[W]=L[K^Z^D][W],Q.push(re.slice())}for(var le=E?5:4,Z=le;Z===le;++Z){if(Q.length===0)continue e;Q=a.positive(Q,H[Z])}for(var Z=0;Z<Q.length;++Z)for(var W=Q[Z],fe=g(p,l,W,T,x),K=0;K<3;++K)R[K].lo=Math.min(R[K].lo,W[K]),R[K].hi=Math.max(R[K].hi,W[K]),K!==B&&(R[K].pixelsPerDataUnit=Math.min(R[K].pixelsPerDataUnit,Math.abs(fe[K])))}}}return R}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(o,h,y){var t=o("typedarray-pool"),a=o("ndarray-ops"),i=o("ndarray"),n=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(b,g,_,p,A){this.gl=b,this.type=g,this.handle=_,this.length=p,this.usage=A}var f=r.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function u(b,g,_,p,A,c){var S=A.length*A.BYTES_PER_ELEMENT;if(c<0)return b.bufferData(g,A,p),S;if(S+c>_)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return b.bufferSubData(g,c,A),_}function l(b,g){for(var _=t.malloc(b.length,g),p=b.length,A=0;A<p;++A)_[A]=b[A];return _}function m(b,g){for(var _=1,p=g.length-1;p>=0;--p){if(g[p]!==_)return!1;_*=b[p]}return!0}f.update=function(b,g){if(typeof g!="number"&&(g=-1),this.bind(),typeof b=="object"&&typeof b.shape!="undefined"){var _=b.dtype;if(n.indexOf(_)<0&&(_="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var p=gl.getExtension("OES_element_index_uint");p&&_!=="uint16"?_="uint32":_="uint16"}if(_===b.dtype&&m(b.shape,b.stride))b.offset===0&&b.data.length===b.shape[0]?this.length=u(this.gl,this.type,this.length,this.usage,b.data,g):this.length=u(this.gl,this.type,this.length,this.usage,b.data.subarray(b.offset,b.shape[0]),g);else{var A=t.malloc(b.size,_),c=i(A,b.shape);a.assign(c,b),g<0?this.length=u(this.gl,this.type,this.length,this.usage,A,g):this.length=u(this.gl,this.type,this.length,this.usage,A.subarray(0,b.size),g),t.free(A)}}else if(Array.isArray(b)){var S;this.type===this.gl.ELEMENT_ARRAY_BUFFER?S=l(b,"uint16"):S=l(b,"float32"),g<0?this.length=u(this.gl,this.type,this.length,this.usage,S,g):this.length=u(this.gl,this.type,this.length,this.usage,S.subarray(0,b.length),g),t.free(S)}else if(typeof b=="object"&&typeof b.length=="number")this.length=u(this.gl,this.type,this.length,this.usage,b,g);else if(typeof b=="number"||b===void 0){if(g>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");b=b|0,b<=0&&(b=1),this.gl.bufferData(this.type,b|0,this.usage),this.length=b}else throw new Error("gl-buffer: Invalid data type")};function d(b,g,_,p){if(_=_||b.ARRAY_BUFFER,p=p||b.DYNAMIC_DRAW,_!==b.ARRAY_BUFFER&&_!==b.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(p!==b.DYNAMIC_DRAW&&p!==b.STATIC_DRAW&&p!==b.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var A=b.createBuffer(),c=new r(b,_,A,0,p);return c.update(g),c}h.exports=d},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(o,h,y){var t=o("gl-vec3");h.exports=function(i,n){var r=i.positions,f=i.vectors,u={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),u;for(var l=0,m=1/0,d=-1/0,b=1/0,g=-1/0,_=1/0,p=-1/0,A=null,c=null,S=[],T=1/0,x=!1,w=0;w<r.length;w++){var v=r[w];m=Math.min(v[0],m),d=Math.max(v[0],d),b=Math.min(v[1],b),g=Math.max(v[1],g),_=Math.min(v[2],_),p=Math.max(v[2],p);var C=f[w];if(t.length(C)>l&&(l=t.length(C)),w){var M=2*t.distance(A,v)/(t.length(c)+t.length(C));M?(T=Math.min(T,M),x=!1):x=!0}x||(A=v,c=C),S.push(C)}var E=[m,b,_],L=[d,g,p];n&&(n[0]=E,n[1]=L),l===0&&(l=1);var z=1/l;isFinite(T)||(T=1),u.vectorScale=T;var O=i.coneSize||.5;i.absoluteConeSize&&(O=i.absoluteConeSize*z),u.coneScale=O;for(var w=0,R=0;w<r.length;w++)for(var v=r[w],D=v[0],H=v[1],B=v[2],$=S[w],W=t.length($)*z,re=0,Q=8;re<Q;re++){u.positions.push([D,H,B,R++]),u.positions.push([D,H,B,R++]),u.positions.push([D,H,B,R++]),u.positions.push([D,H,B,R++]),u.positions.push([D,H,B,R++]),u.positions.push([D,H,B,R++]),u.vectors.push($),u.vectors.push($),u.vectors.push($),u.vectors.push($),u.vectors.push($),u.vectors.push($),u.vertexIntensity.push(W,W,W),u.vertexIntensity.push(W,W,W);var Z=u.positions.length;u.cells.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}return u};var a=o("./lib/shaders");h.exports.createMesh=o("./create_mesh"),h.exports.createConeMesh=function(i,n){return h.exports.createMesh(i,n,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(o,h,y){var t=o("gl-shader"),a=o("gl-buffer"),i=o("gl-vao"),n=o("gl-texture2d"),r=o("gl-mat4/multiply"),f=o("gl-mat4/invert"),u=o("ndarray"),l=o("colormap"),m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(S,T,x,w,v,C,M,E,L,z,O){this.gl=S,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=T,this.dirty=!0,this.triShader=x,this.pickShader=w,this.trianglePositions=v,this.triangleVectors=C,this.triangleColors=E,this.triangleUVs=L,this.triangleIds=M,this.triangleVAO=z,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=m,this._view=m,this._projection=m,this._resolution=[1,1]}var b=d.prototype;b.isOpaque=function(){return this.opacity>=1},b.isTransparent=function(){return this.opacity<1},b.pickSlots=1,b.setPickBase=function(S){this.pickId=S};function g(S){for(var T=l({colormap:S,nshades:256,format:"rgba"}),x=new Uint8Array(256*4),w=0;w<256;++w){for(var v=T[w],C=0;C<3;++C)x[4*w+C]=v[C];x[4*w+3]=v[3]*255}return u(x,[256,256,4],[4,0,1])}function _(S){for(var T=S.length,x=new Array(T),w=0;w<T;++w)x[w]=S[w][2];return x}b.update=function(S){S=S||{};var T=this.gl;this.dirty=!0,"lightPosition"in S&&(this.lightPosition=S.lightPosition),"opacity"in S&&(this.opacity=S.opacity),"ambient"in S&&(this.ambientLight=S.ambient),"diffuse"in S&&(this.diffuseLight=S.diffuse),"specular"in S&&(this.specularLight=S.specular),"roughness"in S&&(this.roughness=S.roughness),"fresnel"in S&&(this.fresnel=S.fresnel),S.tubeScale!==void 0&&(this.tubeScale=S.tubeScale),S.vectorScale!==void 0&&(this.vectorScale=S.vectorScale),S.coneScale!==void 0&&(this.coneScale=S.coneScale),S.coneOffset!==void 0&&(this.coneOffset=S.coneOffset),S.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=T.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=T.LINEAR,this.texture.setPixels(g(S.colormap)),this.texture.generateMipmap());var x=S.cells,w=S.positions,v=S.vectors;if(!w||!x||!v)return;var C=[],M=[],E=[],L=[],z=[];this.cells=x,this.positions=w,this.vectors=v;var O=S.meshColor||[1,1,1,1],R=S.vertexIntensity,D=1/0,H=-1/0;if(R)if(S.vertexIntensityBounds)D=+S.vertexIntensityBounds[0],H=+S.vertexIntensityBounds[1];else for(var B=0;B<R.length;++B){var $=R[B];D=Math.min(D,$),H=Math.max(H,$)}else for(var B=0;B<w.length;++B){var $=w[B][2];D=Math.min(D,$),H=Math.max(H,$)}R?this.intensity=R:this.intensity=_(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var B=0;B<w.length;++B)for(var W=w[B],re=0;re<3;++re)isNaN(W[re])||!isFinite(W[re])||(this.bounds[0][re]=Math.min(this.bounds[0][re],W[re]),this.bounds[1][re]=Math.max(this.bounds[1][re],W[re]));var Q=0;e:for(var B=0;B<x.length;++B){var Z=x[B];switch(Z.length){case 3:for(var re=0;re<3;++re)for(var K=Z[re],W=w[K],le=0;le<3;++le)if(isNaN(W[le])||!isFinite(W[le]))continue e;for(var re=0;re<3;++re){var K=Z[2-re],W=w[K];C.push(W[0],W[1],W[2],W[3]);var fe=v[K];M.push(fe[0],fe[1],fe[2],fe[3]||0);var ue=O;ue.length===3?E.push(ue[0],ue[1],ue[2],1):E.push(ue[0],ue[1],ue[2],ue[3]);var V;R?V=[(R[K]-D)/(H-D),0]:V=[(W[2]-D)/(H-D),0],L.push(V[0],V[1]),z.push(B)}Q+=1;break}}this.triangleCount=Q,this.trianglePositions.update(C),this.triangleVectors.update(M),this.triangleColors.update(E),this.triangleUVs.update(L),this.triangleIds.update(new Uint32Array(z))},b.drawTransparent=b.draw=function(S){S=S||{};for(var T=this.gl,x=S.model||m,w=S.view||m,v=S.projection||m,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)C[0][M]=Math.max(C[0][M],this.clipBounds[0][M]),C[1][M]=Math.min(C[1][M],this.clipBounds[1][M]);var E={model:x,view:w,projection:v,inverseModel:m.slice(),clipBounds:C,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=f(E.inverseModel,E.model),T.disable(T.CULL_FACE),this.texture.bind(0);var L=new Array(16);r(L,E.view,E.model),r(L,E.projection,L),f(L,L);for(var M=0;M<3;++M)E.eyePosition[M]=L[12+M]/L[15];for(var z=L[15],M=0;M<3;++M)z+=this.lightPosition[M]*L[4*M+3];for(var M=0;M<3;++M){for(var O=L[12+M],R=0;R<3;++R)O+=L[4*R+M]*this.lightPosition[R];E.lightPosition[M]=O/z}if(this.triangleCount>0){var D=this.triShader;D.bind(),D.uniforms=E,this.triangleVAO.bind(),T.drawArrays(T.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},b.drawPick=function(S){S=S||{};for(var T=this.gl,x=S.model||m,w=S.view||m,v=S.projection||m,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)C[0][M]=Math.max(C[0][M],this.clipBounds[0][M]),C[1][M]=Math.min(C[1][M],this.clipBounds[1][M]);this._model=[].slice.call(x),this._view=[].slice.call(w),this._projection=[].slice.call(v),this._resolution=[T.drawingBufferWidth,T.drawingBufferHeight];var E={model:x,view:w,projection:v,clipBounds:C,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},L=this.pickShader;L.bind(),L.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),T.drawArrays(T.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},b.pick=function(S){if(!S||S.id!==this.pickId)return null;var T=S.value[0]+256*S.value[1]+65536*S.value[2],x=this.cells[T],w=this.positions[x[1]].slice(0,3),v={position:w,dataCoordinate:w,index:Math.floor(x[1]/48)};return this.traceType==="cone"?v.index=Math.floor(x[1]/48):this.traceType==="streamtube"&&(v.intensity=this.intensity[x[1]],v.velocity=this.vectors[x[1]].slice(0,3),v.divergence=this.vectors[x[1]][3],v.index=T),v},b.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function p(S,T){var x=t(S,T.meshShader.vertex,T.meshShader.fragment,null,T.meshShader.attributes);return x.attributes.position.location=0,x.attributes.color.location=2,x.attributes.uv.location=3,x.attributes.vector.location=4,x}function A(S,T){var x=t(S,T.pickShader.vertex,T.pickShader.fragment,null,T.pickShader.attributes);return x.attributes.position.location=0,x.attributes.id.location=1,x.attributes.vector.location=4,x}function c(S,T,x){var w=x.shaders;arguments.length===1&&(T=S,S=T.gl);var v=p(S,w),C=A(S,w),M=n(S,u(new Uint8Array([255,255,255,255]),[1,1,4]));M.generateMipmap(),M.minFilter=S.LINEAR_MIPMAP_LINEAR,M.magFilter=S.LINEAR;var E=a(S),L=a(S),z=a(S),O=a(S),R=a(S),D=i(S,[{buffer:E,type:S.FLOAT,size:4},{buffer:R,type:S.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:S.FLOAT,size:4},{buffer:O,type:S.FLOAT,size:2},{buffer:L,type:S.FLOAT,size:4}]),H=new d(S,M,v,C,E,L,R,z,O,D,x.traceType||"cone");return H.update(T),H}h.exports=c},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(o,h,y){var t=o("glslify"),a=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);y.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},y.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(o,h,y){h.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(o,h,y){var t=o("./1.0/numbers");h.exports=function(i){return t[i]}},{"./1.0/numbers":82}],84:[function(o,h,y){h.exports=d;var t=o("gl-buffer"),a=o("gl-vao"),i=o("./shaders/index"),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(b,g,_,p){this.gl=b,this.shader=p,this.buffer=g,this.vao=_,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=r.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(b){var g=this.gl,_=this.shader.uniforms;this.shader.bind();var p=_.view=b.view||n,A=_.projection=b.projection||n;_.model=b.model||n,_.clipBounds=this.clipBounds,_.opacity=this.opacity;var c=p[12],S=p[13],T=p[14],x=p[15],w=b._ortho||!1,v=w?2:1,C=v*this.pixelRatio*(A[3]*c+A[7]*S+A[11]*T+A[15]*x)/g.drawingBufferHeight;this.vao.bind();for(var M=0;M<3;++M)g.lineWidth(this.lineWidth[M]*this.pixelRatio),_.capSize=this.capSize[M]*C,this.lineCount[M]&&g.drawArrays(g.LINES,this.lineOffset[M],this.lineCount[M]);this.vao.unbind()};function u(b,g){for(var _=0;_<3;++_)b[0][_]=Math.min(b[0][_],g[_]),b[1][_]=Math.max(b[1][_],g[_])}var l=function(){for(var b=new Array(3),g=0;g<3;++g){for(var _=[],p=1;p<=2;++p)for(var A=-1;A<=1;A+=2){var c=(p+g)%3,S=[0,0,0];S[c]=A,_.push(S)}b[g]=_}return b}();function m(b,g,_,p){for(var A=l[p],c=0;c<A.length;++c){var S=A[c];b.push(g[0],g[1],g[2],_[0],_[1],_[2],_[3],S[0],S[1],S[2])}return A.length}f.update=function(b){b=b||{},"lineWidth"in b&&(this.lineWidth=b.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in b&&(this.capSize=b.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in b&&(this.opacity=+b.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=b.color||[[0,0,0],[0,0,0],[0,0,0]],_=b.position,p=b.error;if(Array.isArray(g[0])||(g=[g,g,g]),_&&p){var A=[],c=_.length,S=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var T=0;T<3;++T){this.lineOffset[T]=S;e:for(var x=0;x<c;++x){for(var w=_[x],v=0;v<3;++v)if(isNaN(w[v])||!isFinite(w[v]))continue e;var C=p[x],M=g[T];if(Array.isArray(M[0])&&(M=g[x]),M.length===3?M=[M[0],M[1],M[2],1]:M.length===4&&(M=[M[0],M[1],M[2],M[3]],!this.hasAlpha&&M[3]<1&&(this.hasAlpha=!0)),!(isNaN(C[0][T])||isNaN(C[1][T]))){if(C[0][T]<0){var E=w.slice();E[T]+=C[0][T],A.push(w[0],w[1],w[2],M[0],M[1],M[2],M[3],0,0,0,E[0],E[1],E[2],M[0],M[1],M[2],M[3],0,0,0),u(this.bounds,E),S+=2+m(A,E,M,T)}if(C[1][T]>0){var E=w.slice();E[T]+=C[1][T],A.push(w[0],w[1],w[2],M[0],M[1],M[2],M[3],0,0,0,E[0],E[1],E[2],M[0],M[1],M[2],M[3],0,0,0),u(this.bounds,E),S+=2+m(A,E,M,T)}}}this.lineCount[T]=S-this.lineOffset[T]}this.buffer.update(A)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function d(b){var g=b.gl,_=t(g),p=a(g,[{buffer:_,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:_,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:_,type:g.FLOAT,size:3,offset:28,stride:40}]),A=i(g);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.offset.location=2;var c=new r(g,_,p,A);return c.update(b),c}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(o,h,y){var t=o("glslify"),a=o("gl-shader"),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);h.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(o,h,y){var t=o("gl-texture2d");h.exports=S;var a=null,i,n,r,f;function u(T){var x=T.getParameter(T.FRAMEBUFFER_BINDING),w=T.getParameter(T.RENDERBUFFER_BINDING),v=T.getParameter(T.TEXTURE_BINDING_2D);return[x,w,v]}function l(T,x){T.bindFramebuffer(T.FRAMEBUFFER,x[0]),T.bindRenderbuffer(T.RENDERBUFFER,x[1]),T.bindTexture(T.TEXTURE_2D,x[2])}function m(T,x){var w=T.getParameter(x.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(w+1);for(var v=0;v<=w;++v){for(var C=new Array(w),M=0;M<v;++M)C[M]=T.COLOR_ATTACHMENT0+M;for(var M=v;M<w;++M)C[M]=T.NONE;a[v]=C}}function d(T){switch(T){case i:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function b(T,x,w,v,C,M){if(!v)return null;var E=t(T,x,w,C,v);return E.magFilter=T.NEAREST,E.minFilter=T.NEAREST,E.mipSamples=1,E.bind(),T.framebufferTexture2D(T.FRAMEBUFFER,M,T.TEXTURE_2D,E.handle,0),E}function g(T,x,w,v,C){var M=T.createRenderbuffer();return T.bindRenderbuffer(T.RENDERBUFFER,M),T.renderbufferStorage(T.RENDERBUFFER,v,x,w),T.framebufferRenderbuffer(T.FRAMEBUFFER,C,T.RENDERBUFFER,M),M}function _(T){var x=u(T.gl),w=T.gl,v=T.handle=w.createFramebuffer(),C=T._shape[0],M=T._shape[1],E=T.color.length,L=T._ext,z=T._useStencil,O=T._useDepth,R=T._colorType;w.bindFramebuffer(w.FRAMEBUFFER,v);for(var D=0;D<E;++D)T.color[D]=b(w,C,M,R,w.RGBA,w.COLOR_ATTACHMENT0+D);E===0?(T._color_rb=g(w,C,M,w.RGBA4,w.COLOR_ATTACHMENT0),L&&L.drawBuffersWEBGL(a[0])):E>1&&L.drawBuffersWEBGL(a[E]);var H=w.getExtension("WEBGL_depth_texture");H?z?T.depth=b(w,C,M,H.UNSIGNED_INT_24_8_WEBGL,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):O&&(T.depth=b(w,C,M,w.UNSIGNED_SHORT,w.DEPTH_COMPONENT,w.DEPTH_ATTACHMENT)):O&&z?T._depth_rb=g(w,C,M,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):O?T._depth_rb=g(w,C,M,w.DEPTH_COMPONENT16,w.DEPTH_ATTACHMENT):z&&(T._depth_rb=g(w,C,M,w.STENCIL_INDEX,w.STENCIL_ATTACHMENT));var B=w.checkFramebufferStatus(w.FRAMEBUFFER);if(B!==w.FRAMEBUFFER_COMPLETE){T._destroyed=!0,w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(T.handle),T.handle=null,T.depth&&(T.depth.dispose(),T.depth=null),T._depth_rb&&(w.deleteRenderbuffer(T._depth_rb),T._depth_rb=null);for(var D=0;D<T.color.length;++D)T.color[D].dispose(),T.color[D]=null;T._color_rb&&(w.deleteRenderbuffer(T._color_rb),T._color_rb=null),l(w,x),d(B)}l(w,x)}function p(T,x,w,v,C,M,E,L){this.gl=T,this._shape=[x|0,w|0],this._destroyed=!1,this._ext=L,this.color=new Array(C);for(var z=0;z<C;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=v,this._useDepth=M,this._useStencil=E;var O=this,R=[x|0,w|0];Object.defineProperties(R,{0:{get:function(){return O._shape[0]},set:function(D){return O.width=D}},1:{get:function(){return O._shape[1]},set:function(D){return O.height=D}}}),this._shapeVector=R,_(this)}var A=p.prototype;function c(T,x,w){if(T._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(T._shape[0]===x&&T._shape[1]===w)){var v=T.gl,C=v.getParameter(v.MAX_RENDERBUFFER_SIZE);if(x<0||x>C||w<0||w>C)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");T._shape[0]=x,T._shape[1]=w;for(var M=u(v),E=0;E<T.color.length;++E)T.color[E].shape=T._shape;T._color_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,T._color_rb),v.renderbufferStorage(v.RENDERBUFFER,v.RGBA4,T._shape[0],T._shape[1])),T.depth&&(T.depth.shape=T._shape),T._depth_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,T._depth_rb),T._useDepth&&T._useStencil?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,T._shape[0],T._shape[1]):T._useDepth?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_COMPONENT16,T._shape[0],T._shape[1]):T._useStencil&&v.renderbufferStorage(v.RENDERBUFFER,v.STENCIL_INDEX,T._shape[0],T._shape[1])),v.bindFramebuffer(v.FRAMEBUFFER,T.handle);var L=v.checkFramebufferStatus(v.FRAMEBUFFER);L!==v.FRAMEBUFFER_COMPLETE&&(T.dispose(),l(v,M),d(L)),l(v,M)}}Object.defineProperties(A,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(T){if(Array.isArray(T)||(T=[T|0,T|0]),T.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var x=T[0]|0,w=T[1]|0;return c(this,x,w),[x,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(T){return T=T|0,c(this,T,this._shape[1]),T},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(T){return T=T|0,c(this,this._shape[0],T),T},enumerable:!1}}),A.bind=function(){if(!this._destroyed){var T=this.gl;T.bindFramebuffer(T.FRAMEBUFFER,this.handle),T.viewport(0,0,this._shape[0],this._shape[1])}},A.dispose=function(){if(!this._destroyed){this._destroyed=!0;var T=this.gl;T.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(T.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var x=0;x<this.color.length;++x)this.color[x].dispose(),this.color[x]=null;this._color_rb&&(T.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function S(T,x,w,v){i||(i=T.FRAMEBUFFER_UNSUPPORTED,n=T.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=T.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=T.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var C=T.getExtension("WEBGL_draw_buffers");if(!a&&C&&m(T,C),Array.isArray(x)&&(v=w,w=x[1]|0,x=x[0]|0),typeof x!="number")throw new Error("gl-fbo: Missing shape parameter");var M=T.getParameter(T.MAX_RENDERBUFFER_SIZE);if(x<0||x>M||w<0||w>M)throw new Error("gl-fbo: Parameters are too large for FBO");v=v||{};var E=1;if("color"in v){if(E=Math.max(v.color|0,0),E<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(E>1)if(C){if(E>T.getParameter(C.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+E+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var L=T.UNSIGNED_BYTE,z=T.getExtension("OES_texture_float");if(v.float&&E>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");L=T.FLOAT}else v.preferFloat&&E>0&&z&&(L=T.FLOAT);var O=!0;"depth"in v&&(O=!!v.depth);var R=!1;return"stencil"in v&&(R=!!v.stencil),new p(T,x,w,L,E,O,R,C)}},{"gl-texture2d":146}],87:[function(o,h,y){var t=o("sprintf-js").sprintf,a=o("gl-constants/lookup"),i=o("glsl-shader-name"),n=o("add-line-numbers");h.exports=r;function r(f,u,l){var m=i(u)||"of unknown name (see npm glsl-shader-name)",d="unknown type";l!==void 0&&(d=l===a.FRAGMENT_SHADER?"fragment":"vertex");for(var b=t(`Error compiling %s shader %s:
`,d,m),g=t("%s%s",b,f),_=f.split(`
`),p={},A=0;A<_.length;A++){var c=_[A];if(!(c===""||c==="\0")){var S=parseInt(c.split(":")[2]);if(isNaN(S))throw new Error(t("Could not parse error: %s",c));p[S]=c}}for(var T=n(u).split(`
`),A=0;A<T.length;A++)if(!(!p[A+3]&&!p[A+2]&&!p[A+1])){var x=T[A];if(b+=x+`
`,p[A+1]){var w=p[A+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),b+=t(`^^^ %s

`,w)}}return{long:b.trim(),short:g.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(o,h,y){h.exports=d;var t=o("binary-search-bounds"),a=o("iota-array"),i=o("typedarray-pool"),n=o("gl-shader"),r=o("gl-buffer"),f=o("./lib/shaders");function u(b,g,_,p,A,c,S){this.plot=b,this.shader=g,this.pickShader=_,this.positionBuffer=p,this.weightBuffer=A,this.colorBuffer=c,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var l=u.prototype,m=[0,0,1,0,0,1,1,0,1,1,0,1];l.draw=function(){var b=[1,0,0,0,1,0,0,0,1];return function(){var g=this.plot,_=this.shader,p=this.bounds,A=this.numVertices;if(!(A<=0)){var c=g.gl,S=g.dataBox,T=p[2]-p[0],x=p[3]-p[1],w=S[2]-S[0],v=S[3]-S[1];b[0]=2*T/w,b[4]=2*x/v,b[6]=2*(p[0]-S[0])/w-1,b[7]=2*(p[1]-S[1])/v-1,_.bind();var C=_.uniforms;C.viewTransform=b,C.shape=this.shape;var M=_.attributes;this.positionBuffer.bind(),M.position.pointer(),this.weightBuffer.bind(),M.weight.pointer(c.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),M.color.pointer(c.UNSIGNED_BYTE,!0),c.drawArrays(c.TRIANGLES,0,A)}}}(),l.drawPick=function(){var b=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(_){var p=this.plot,A=this.pickShader,c=this.bounds,S=this.numVertices;if(!(S<=0)){var T=p.gl,x=p.dataBox,w=c[2]-c[0],v=c[3]-c[1],C=x[2]-x[0],M=x[3]-x[1];b[0]=2*w/C,b[4]=2*v/M,b[6]=2*(c[0]-x[0])/C-1,b[7]=2*(c[1]-x[1])/M-1;for(var E=0;E<4;++E)g[E]=_>>E*8&255;this.pickOffset=_,A.bind();var L=A.uniforms;L.viewTransform=b,L.pickOffset=g,L.shape=this.shape;var z=A.attributes;return this.positionBuffer.bind(),z.position.pointer(),this.weightBuffer.bind(),z.weight.pointer(T.UNSIGNED_BYTE,!1),this.idBuffer.bind(),z.pickId.pointer(T.UNSIGNED_BYTE,!1),T.drawArrays(T.TRIANGLES,0,S),_+this.shape[0]*this.shape[1]}}}(),l.pick=function(b,g,_){var p=this.pickOffset,A=this.shape[0]*this.shape[1];if(_<p||_>=p+A)return null;var c=_-p,S=this.xData,T=this.yData;return{object:this,pointId:c,dataCoord:[S[c%this.shape[0]],T[c/this.shape[0]|0]]}},l.update=function(b){b=b||{};var g=b.shape||[0,0],_=b.x||a(g[0]),p=b.y||a(g[1]),A=b.z||new Float32Array(g[0]*g[1]),c=b.zsmooth!==!1;this.xData=_,this.yData=p;var S=b.colorLevels||[0],T=b.colorValues||[0,0,0,1],x=S.length,w=this.bounds,v,C,M,E;c?(v=w[0]=_[0],C=w[1]=p[0],M=w[2]=_[_.length-1],E=w[3]=p[p.length-1]):(v=w[0]=_[0]+(_[1]-_[0])/2,C=w[1]=p[0]+(p[1]-p[0])/2,M=w[2]=_[_.length-1]+(_[_.length-1]-_[_.length-2])/2,E=w[3]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2);var L=1/(M-v),z=1/(E-C),O=g[0],R=g[1];this.shape=[O,R];var D=(c?(O-1)*(R-1):O*R)*(m.length>>>1);this.numVertices=D;for(var H=i.mallocUint8(D*4),B=i.mallocFloat32(D*2),$=i.mallocUint8(D*2),W=i.mallocUint32(D),re=0,Q=c?O-1:O,Z=c?R-1:R,K=0;K<Z;++K){var le,fe;c?(le=z*(p[K]-C),fe=z*(p[K+1]-C)):(le=K<R-1?z*(p[K]-(p[K+1]-p[K])/2-C):z*(p[K]-(p[K]-p[K-1])/2-C),fe=K<R-1?z*(p[K]+(p[K+1]-p[K])/2-C):z*(p[K]+(p[K]-p[K-1])/2-C));for(var ue=0;ue<Q;++ue){var V,j;c?(V=L*(_[ue]-v),j=L*(_[ue+1]-v)):(V=ue<O-1?L*(_[ue]-(_[ue+1]-_[ue])/2-v):L*(_[ue]-(_[ue]-_[ue-1])/2-v),j=ue<O-1?L*(_[ue]+(_[ue+1]-_[ue])/2-v):L*(_[ue]+(_[ue]-_[ue-1])/2-v));for(var ee=0;ee<m.length;ee+=2){var q=m[ee],X=m[ee+1],J=c?(K+X)*O+(ue+q):K*O+ue,ie=A[J],ne=t.le(S,ie),oe,se,me,ce;if(ne<0)oe=T[0],se=T[1],me=T[2],ce=T[3];else if(ne===x-1)oe=T[4*x-4],se=T[4*x-3],me=T[4*x-2],ce=T[4*x-1];else{var pe=(ie-S[ne])/(S[ne+1]-S[ne]),xe=1-pe,Se=4*ne,Ae=4*(ne+1);oe=xe*T[Se]+pe*T[Ae],se=xe*T[Se+1]+pe*T[Ae+1],me=xe*T[Se+2]+pe*T[Ae+2],ce=xe*T[Se+3]+pe*T[Ae+3]}H[4*re]=255*oe,H[4*re+1]=255*se,H[4*re+2]=255*me,H[4*re+3]=255*ce,B[2*re]=V*.5+j*.5,B[2*re+1]=le*.5+fe*.5,$[2*re]=q,$[2*re+1]=X,W[re]=K*O+ue,re+=1}}}this.positionBuffer.update(B),this.weightBuffer.update($),this.colorBuffer.update(H),this.idBuffer.update(W),i.free(B),i.free(H),i.free($),i.free(W)},l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function d(b,g){var _=b.gl,p=n(_,f.vertex,f.fragment),A=n(_,f.pickVertex,f.pickFragment),c=r(_),S=r(_),T=r(_),x=r(_),w=new u(b,p,A,c,S,T,x);return w.update(g),b.addObject(w),w}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(o,h,y){var t=o("glslify");h.exports={fragment:t([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(o,h,y){var t=o("glslify"),a=o("gl-shader"),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];y.createShader=function(u){return a(u,i,n,null,f)},y.createPickShader=function(u){return a(u,i,r,null,f)}},{"gl-shader":132,glslify:231}],91:[function(o,h,y){h.exports=T;var t=o("gl-buffer"),a=o("gl-vao"),i=o("gl-texture2d"),n=new Uint8Array(4),r=new Float32Array(n.buffer);function f(x,w,v,C){return n[0]=C,n[1]=v,n[2]=w,n[3]=x,r[0]}var u=o("binary-search-bounds"),l=o("ndarray"),m=o("./lib/shaders"),d=m.createShader,b=m.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function _(x,w){for(var v=0,C=0;C<3;++C){var M=x[C]-w[C];v+=M*M}return Math.sqrt(v)}function p(x){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],v=0;v<3;++v)w[0][v]=Math.max(x[0][v],w[0][v]),w[1][v]=Math.min(x[1][v],w[1][v]);return w}function A(x,w,v,C){this.arcLength=x,this.position=w,this.index=v,this.dataCoordinate=C}function c(x,w,v,C,M,E){this.gl=x,this.shader=w,this.pickShader=v,this.buffer=C,this.vao=M,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=E,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var S=c.prototype;S.isTransparent=function(){return this.hasAlpha},S.isOpaque=function(){return!this.hasAlpha},S.pickSlots=1,S.setPickBase=function(x){this.pickId=x},S.drawTransparent=S.draw=function(x){if(!!this.vertexCount){var w=this.gl,v=this.shader,C=this.vao;v.bind(),v.uniforms={model:x.model||g,view:x.view||g,projection:x.projection||g,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(w.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},S.drawPick=function(x){if(!!this.vertexCount){var w=this.gl,v=this.pickShader,C=this.vao;v.bind(),v.uniforms={model:x.model||g,view:x.view||g,projection:x.projection||g,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(w.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},S.update=function(x){var w,v;this.dirty=!0;var C=!!x.connectGaps;"dashScale"in x&&(this.dashScale=x.dashScale),this.hasAlpha=!1,"opacity"in x&&(this.opacity=+x.opacity,this.opacity<1&&(this.hasAlpha=!0));var M=[],E=[],L=[],z=0,O=0,R=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=x.position||x.positions;if(D){var H=x.color||x.colors||[0,0,0,1],B=x.lineWidth||1,$=!1;e:for(w=1;w<D.length;++w){var W=D[w-1],re=D[w];for(E.push(z),L.push(W.slice()),v=0;v<3;++v){if(isNaN(W[v])||isNaN(re[v])||!isFinite(W[v])||!isFinite(re[v])){if(!C&&M.length>0){for(var Q=0;Q<24;++Q)M.push(M[M.length-12]);O+=2,$=!0}continue e}R[0][v]=Math.min(R[0][v],W[v],re[v]),R[1][v]=Math.max(R[1][v],W[v],re[v])}var Z,K;Array.isArray(H[0])?(Z=H.length>w-1?H[w-1]:H.length>0?H[H.length-1]:[0,0,0,1],K=H.length>w?H[w]:H.length>0?H[H.length-1]:[0,0,0,1]):Z=K=H,Z.length===3&&(Z=[Z[0],Z[1],Z[2],1]),K.length===3&&(K=[K[0],K[1],K[2],1]),!this.hasAlpha&&Z[3]<1&&(this.hasAlpha=!0);var le;Array.isArray(B)?le=B.length>w-1?B[w-1]:B.length>0?B[B.length-1]:[0,0,0,1]:le=B;var fe=z;if(z+=_(W,re),$){for(v=0;v<2;++v)M.push(W[0],W[1],W[2],re[0],re[1],re[2],fe,le,Z[0],Z[1],Z[2],Z[3]);O+=2,$=!1}M.push(W[0],W[1],W[2],re[0],re[1],re[2],fe,le,Z[0],Z[1],Z[2],Z[3],W[0],W[1],W[2],re[0],re[1],re[2],fe,-le,Z[0],Z[1],Z[2],Z[3],re[0],re[1],re[2],W[0],W[1],W[2],z,-le,K[0],K[1],K[2],K[3],re[0],re[1],re[2],W[0],W[1],W[2],z,le,K[0],K[1],K[2],K[3]),O+=4}}if(this.buffer.update(M),E.push(z),L.push(D[D.length-1].slice()),this.bounds=R,this.vertexCount=O,this.points=L,this.arcLength=E,"dashes"in x){var ue=x.dashes,V=ue.slice();for(V.unshift(0),w=1;w<V.length;++w)V[w]=V[w-1]+V[w];var j=l(new Array(256*4),[256,1,4]);for(w=0;w<256;++w){for(v=0;v<4;++v)j.set(w,0,v,0);u.le(V,V[V.length-1]*w/255)&1?j.set(w,0,0,0):j.set(w,0,0,255)}this.texture.setPixels(j)}},S.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},S.pick=function(x){if(!x||x.id!==this.pickId)return null;var w=f(x.value[0],x.value[1],x.value[2],0),v=u.le(this.arcLength,w);if(v<0)return null;if(v===this.arcLength.length-1)return new A(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),v);for(var C=this.points[v],M=this.points[Math.min(v+1,this.points.length-1)],E=(w-this.arcLength[v])/(this.arcLength[v+1]-this.arcLength[v]),L=1-E,z=[0,0,0],O=0;O<3;++O)z[O]=L*C[O]+E*M[O];var R=Math.min(E<.5?v:v+1,this.points.length-1);return new A(w,z,R,this.points[R])};function T(x){var w=x.gl||x.scene&&x.scene.gl,v=d(w);v.attributes.position.location=0,v.attributes.nextPosition.location=1,v.attributes.arcLength.location=2,v.attributes.lineWidth.location=3,v.attributes.color.location=4;var C=b(w);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;for(var M=t(w),E=a(w,[{buffer:M,size:3,offset:0,stride:48},{buffer:M,size:3,offset:12,stride:48},{buffer:M,size:1,offset:24,stride:48},{buffer:M,size:1,offset:28,stride:48},{buffer:M,size:4,offset:32,stride:48}]),L=l(new Array(256*4),[256,1,4]),z=0;z<256*4;++z)L.data[z]=255;var O=i(w,L);O.wrap=w.REPEAT;var R=new c(w,v,C,M,E,O);return R.update(x),R}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(o,h,y){h.exports=t;function t(a){var i=new Float32Array(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i}},{}],93:[function(o,h,y){h.exports=t;function t(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(o,h,y){h.exports=t;function t(a){var i=a[0],n=a[1],r=a[2],f=a[3],u=a[4],l=a[5],m=a[6],d=a[7],b=a[8],g=a[9],_=a[10],p=a[11],A=a[12],c=a[13],S=a[14],T=a[15],x=i*l-n*u,w=i*m-r*u,v=i*d-f*u,C=n*m-r*l,M=n*d-f*l,E=r*d-f*m,L=b*c-g*A,z=b*S-_*A,O=b*T-p*A,R=g*S-_*c,D=g*T-p*c,H=_*T-p*S;return x*H-w*D+v*R+C*O-M*z+E*L}},{}],95:[function(o,h,y){h.exports=t;function t(a,i){var n=i[0],r=i[1],f=i[2],u=i[3],l=n+n,m=r+r,d=f+f,b=n*l,g=r*l,_=r*m,p=f*l,A=f*m,c=f*d,S=u*l,T=u*m,x=u*d;return a[0]=1-_-c,a[1]=g+x,a[2]=p-T,a[3]=0,a[4]=g-x,a[5]=1-b-c,a[6]=A+S,a[7]=0,a[8]=p+T,a[9]=A-S,a[10]=1-b-_,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i[0],f=i[1],u=i[2],l=i[3],m=r+r,d=f+f,b=u+u,g=r*m,_=r*d,p=r*b,A=f*d,c=f*b,S=u*b,T=l*m,x=l*d,w=l*b;return a[0]=1-(A+S),a[1]=_+w,a[2]=p-x,a[3]=0,a[4]=_-w,a[5]=1-(g+S),a[6]=c+T,a[7]=0,a[8]=p+x,a[9]=c-T,a[10]=1-(g+A),a[11]=0,a[12]=n[0],a[13]=n[1],a[14]=n[2],a[15]=1,a}},{}],97:[function(o,h,y){h.exports=t;function t(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(o,h,y){h.exports=t;function t(a,i){var n=i[0],r=i[1],f=i[2],u=i[3],l=i[4],m=i[5],d=i[6],b=i[7],g=i[8],_=i[9],p=i[10],A=i[11],c=i[12],S=i[13],T=i[14],x=i[15],w=n*m-r*l,v=n*d-f*l,C=n*b-u*l,M=r*d-f*m,E=r*b-u*m,L=f*b-u*d,z=g*S-_*c,O=g*T-p*c,R=g*x-A*c,D=_*T-p*S,H=_*x-A*S,B=p*x-A*T,$=w*B-v*H+C*D+M*R-E*O+L*z;return $?($=1/$,a[0]=(m*B-d*H+b*D)*$,a[1]=(f*H-r*B-u*D)*$,a[2]=(S*L-T*E+x*M)*$,a[3]=(p*E-_*L-A*M)*$,a[4]=(d*R-l*B-b*O)*$,a[5]=(n*B-f*R+u*O)*$,a[6]=(T*C-c*L-x*v)*$,a[7]=(g*L-p*C+A*v)*$,a[8]=(l*H-m*R+b*z)*$,a[9]=(r*R-n*H-u*z)*$,a[10]=(c*E-S*C+x*w)*$,a[11]=(_*C-g*E-A*w)*$,a[12]=(m*O-l*D-d*z)*$,a[13]=(n*D-r*O+f*z)*$,a[14]=(S*v-c*M-T*w)*$,a[15]=(g*M-_*v+p*w)*$,a):null}},{}],99:[function(o,h,y){var t=o("./identity");h.exports=a;function a(i,n,r,f){var u,l,m,d,b,g,_,p,A,c,S=n[0],T=n[1],x=n[2],w=f[0],v=f[1],C=f[2],M=r[0],E=r[1],L=r[2];return Math.abs(S-M)<1e-6&&Math.abs(T-E)<1e-6&&Math.abs(x-L)<1e-6?t(i):(_=S-M,p=T-E,A=x-L,c=1/Math.sqrt(_*_+p*p+A*A),_*=c,p*=c,A*=c,u=v*A-C*p,l=C*_-w*A,m=w*p-v*_,c=Math.sqrt(u*u+l*l+m*m),c?(c=1/c,u*=c,l*=c,m*=c):(u=0,l=0,m=0),d=p*m-A*l,b=A*u-_*m,g=_*l-p*u,c=Math.sqrt(d*d+b*b+g*g),c?(c=1/c,d*=c,b*=c,g*=c):(d=0,b=0,g=0),i[0]=u,i[1]=d,i[2]=_,i[3]=0,i[4]=l,i[5]=b,i[6]=p,i[7]=0,i[8]=m,i[9]=g,i[10]=A,i[11]=0,i[12]=-(u*S+l*T+m*x),i[13]=-(d*S+b*T+g*x),i[14]=-(_*S+p*T+A*x),i[15]=1,i)}},{"./identity":97}],100:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i[0],f=i[1],u=i[2],l=i[3],m=i[4],d=i[5],b=i[6],g=i[7],_=i[8],p=i[9],A=i[10],c=i[11],S=i[12],T=i[13],x=i[14],w=i[15],v=n[0],C=n[1],M=n[2],E=n[3];return a[0]=v*r+C*m+M*_+E*S,a[1]=v*f+C*d+M*p+E*T,a[2]=v*u+C*b+M*A+E*x,a[3]=v*l+C*g+M*c+E*w,v=n[4],C=n[5],M=n[6],E=n[7],a[4]=v*r+C*m+M*_+E*S,a[5]=v*f+C*d+M*p+E*T,a[6]=v*u+C*b+M*A+E*x,a[7]=v*l+C*g+M*c+E*w,v=n[8],C=n[9],M=n[10],E=n[11],a[8]=v*r+C*m+M*_+E*S,a[9]=v*f+C*d+M*p+E*T,a[10]=v*u+C*b+M*A+E*x,a[11]=v*l+C*g+M*c+E*w,v=n[12],C=n[13],M=n[14],E=n[15],a[12]=v*r+C*m+M*_+E*S,a[13]=v*f+C*d+M*p+E*T,a[14]=v*u+C*b+M*A+E*x,a[15]=v*l+C*g+M*c+E*w,a}},{}],101:[function(o,h,y){h.exports=t;function t(a,i,n,r,f,u,l){var m=1/(i-n),d=1/(r-f),b=1/(u-l);return a[0]=-2*m,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*b,a[11]=0,a[12]=(i+n)*m,a[13]=(f+r)*d,a[14]=(l+u)*b,a[15]=1,a}},{}],102:[function(o,h,y){h.exports=t;function t(a,i,n,r,f){var u=1/Math.tan(i/2),l=1/(r-f);return a[0]=u/n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(f+r)*l,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*f*r*l,a[15]=0,a}},{}],103:[function(o,h,y){h.exports=t;function t(a,i,n,r){var f=r[0],u=r[1],l=r[2],m=Math.sqrt(f*f+u*u+l*l),d,b,g,_,p,A,c,S,T,x,w,v,C,M,E,L,z,O,R,D,H,B,$,W;return Math.abs(m)<1e-6?null:(m=1/m,f*=m,u*=m,l*=m,d=Math.sin(n),b=Math.cos(n),g=1-b,_=i[0],p=i[1],A=i[2],c=i[3],S=i[4],T=i[5],x=i[6],w=i[7],v=i[8],C=i[9],M=i[10],E=i[11],L=f*f*g+b,z=u*f*g+l*d,O=l*f*g-u*d,R=f*u*g-l*d,D=u*u*g+b,H=l*u*g+f*d,B=f*l*g+u*d,$=u*l*g-f*d,W=l*l*g+b,a[0]=_*L+S*z+v*O,a[1]=p*L+T*z+C*O,a[2]=A*L+x*z+M*O,a[3]=c*L+w*z+E*O,a[4]=_*R+S*D+v*H,a[5]=p*R+T*D+C*H,a[6]=A*R+x*D+M*H,a[7]=c*R+w*D+E*H,a[8]=_*B+S*$+v*W,a[9]=p*B+T*$+C*W,a[10]=A*B+x*$+M*W,a[11]=c*B+w*$+E*W,i!==a&&(a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a)}},{}],104:[function(o,h,y){h.exports=t;function t(a,i,n){var r=Math.sin(n),f=Math.cos(n),u=i[4],l=i[5],m=i[6],d=i[7],b=i[8],g=i[9],_=i[10],p=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=u*f+b*r,a[5]=l*f+g*r,a[6]=m*f+_*r,a[7]=d*f+p*r,a[8]=b*f-u*r,a[9]=g*f-l*r,a[10]=_*f-m*r,a[11]=p*f-d*r,a}},{}],105:[function(o,h,y){h.exports=t;function t(a,i,n){var r=Math.sin(n),f=Math.cos(n),u=i[0],l=i[1],m=i[2],d=i[3],b=i[8],g=i[9],_=i[10],p=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=u*f-b*r,a[1]=l*f-g*r,a[2]=m*f-_*r,a[3]=d*f-p*r,a[8]=u*r+b*f,a[9]=l*r+g*f,a[10]=m*r+_*f,a[11]=d*r+p*f,a}},{}],106:[function(o,h,y){h.exports=t;function t(a,i,n){var r=Math.sin(n),f=Math.cos(n),u=i[0],l=i[1],m=i[2],d=i[3],b=i[4],g=i[5],_=i[6],p=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=u*f+b*r,a[1]=l*f+g*r,a[2]=m*f+_*r,a[3]=d*f+p*r,a[4]=b*f-u*r,a[5]=g*f-l*r,a[6]=_*f-m*r,a[7]=p*f-d*r,a}},{}],107:[function(o,h,y){h.exports=t;function t(a,i,n){var r=n[0],f=n[1],u=n[2];return a[0]=i[0]*r,a[1]=i[1]*r,a[2]=i[2]*r,a[3]=i[3]*r,a[4]=i[4]*f,a[5]=i[5]*f,a[6]=i[6]*f,a[7]=i[7]*f,a[8]=i[8]*u,a[9]=i[9]*u,a[10]=i[10]*u,a[11]=i[11]*u,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}},{}],108:[function(o,h,y){h.exports=t;function t(a,i,n){var r=n[0],f=n[1],u=n[2],l,m,d,b,g,_,p,A,c,S,T,x;return i===a?(a[12]=i[0]*r+i[4]*f+i[8]*u+i[12],a[13]=i[1]*r+i[5]*f+i[9]*u+i[13],a[14]=i[2]*r+i[6]*f+i[10]*u+i[14],a[15]=i[3]*r+i[7]*f+i[11]*u+i[15]):(l=i[0],m=i[1],d=i[2],b=i[3],g=i[4],_=i[5],p=i[6],A=i[7],c=i[8],S=i[9],T=i[10],x=i[11],a[0]=l,a[1]=m,a[2]=d,a[3]=b,a[4]=g,a[5]=_,a[6]=p,a[7]=A,a[8]=c,a[9]=S,a[10]=T,a[11]=x,a[12]=l*r+g*f+c*u+i[12],a[13]=m*r+_*f+S*u+i[13],a[14]=d*r+p*f+T*u+i[14],a[15]=b*r+A*f+x*u+i[15]),a}},{}],109:[function(o,h,y){h.exports=t;function t(a,i){if(a===i){var n=i[1],r=i[2],f=i[3],u=i[6],l=i[7],m=i[11];a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=n,a[6]=i[9],a[7]=i[13],a[8]=r,a[9]=u,a[11]=i[14],a[12]=f,a[13]=l,a[14]=m}else a[0]=i[0],a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=i[1],a[5]=i[5],a[6]=i[9],a[7]=i[13],a[8]=i[2],a[9]=i[6],a[10]=i[10],a[11]=i[14],a[12]=i[3],a[13]=i[7],a[14]=i[11],a[15]=i[15];return a}},{}],110:[function(o,h,y){var t=o("barycentric"),a=o("polytope-closest-point/lib/closest_point_2d.js");h.exports=u;function i(l,m){for(var d=[0,0,0,0],b=0;b<4;++b)for(var g=0;g<4;++g)d[g]+=l[4*b+g]*m[b];return d}function n(l,m,d,b,g){for(var _=i(b,i(d,i(m,[l[0],l[1],l[2],1]))),p=0;p<3;++p)_[p]/=_[3];return[.5*g[0]*(1+_[0]),.5*g[1]*(1-_[1])]}function r(l,m){if(l.length===2){for(var d=0,b=0,g=0;g<2;++g)d+=Math.pow(m[g]-l[0][g],2),b+=Math.pow(m[g]-l[1][g],2);return d=Math.sqrt(d),b=Math.sqrt(b),d+b<1e-6?[1,0]:[b/(d+b),d/(b+d)]}else if(l.length===3){var _=[0,0];return a(l[0],l[1],l[2],m,_),t(l,_)}return[]}function f(l,m){for(var d=[0,0,0],b=0;b<l.length;++b)for(var g=l[b],_=m[b],p=0;p<3;++p)d[p]+=_*g[p];return d}function u(l,m,d,b,g,_){if(l.length===1)return[0,l[0].slice()];for(var p=new Array(l.length),A=0;A<l.length;++A)p[A]=n(l[A],d,b,g,_);for(var c=0,S=1/0,A=0;A<p.length;++A){for(var T=0,x=0;x<2;++x)T+=Math.pow(p[A][x]-m[x],2);T<S&&(S=T,c=A)}for(var w=r(p,m),v=0,A=0;A<3;++A){if(w[A]<-.001||w[A]>1.0001)return null;v+=w[A]}return Math.abs(v-1)>.001?null:[c,f(l,w),w]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(o,h,y){var t=o("glslify"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),u=t([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),l=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),m=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),d=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),b=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),g=t([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);y.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.wireShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.pointShader={vertex:f,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},y.pickShader={vertex:l,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},y.pointPickShader={vertex:d,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},y.contourShader={vertex:b,fragment:g,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(o,h,y){var t=1e-6,a=1e-6,i=o("gl-shader"),n=o("gl-buffer"),r=o("gl-vao"),f=o("gl-texture2d"),u=o("normals"),l=o("gl-mat4/multiply"),m=o("gl-mat4/invert"),d=o("ndarray"),b=o("colormap"),g=o("simplicial-complex-contour"),_=o("typedarray-pool"),p=o("./lib/shaders"),A=o("./lib/closest-point"),c=p.meshShader,S=p.wireShader,T=p.pointShader,x=p.pickShader,w=p.pointPickShader,v=p.contourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function M(Q,Z,K,le,fe,ue,V,j,ee,q,X,J,ie,ne,oe,se,me,ce,pe,xe,Se,Ae,Ce,Ee,Oe,_e,Re){this.gl=Q,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Z,this.dirty=!0,this.triShader=K,this.lineShader=le,this.pointShader=fe,this.pickShader=ue,this.pointPickShader=V,this.contourShader=j,this.trianglePositions=ee,this.triangleColors=X,this.triangleNormals=ie,this.triangleUVs=J,this.triangleIds=q,this.triangleVAO=ne,this.triangleCount=0,this.lineWidth=1,this.edgePositions=oe,this.edgeColors=me,this.edgeUVs=ce,this.edgeIds=se,this.edgeVAO=pe,this.edgeCount=0,this.pointPositions=xe,this.pointColors=Ae,this.pointUVs=Ce,this.pointSizes=Ee,this.pointIds=Se,this.pointVAO=Oe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=_e,this.contourVAO=Re,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=C,this._view=C,this._projection=C,this._resolution=[1,1]}var E=M.prototype;E.isOpaque=function(){return!this.hasAlpha},E.isTransparent=function(){return this.hasAlpha},E.pickSlots=1,E.setPickBase=function(Q){this.pickId=Q};function L(Q,Z){if(!Z||!Z.length)return 1;for(var K=0;K<Z.length;++K){if(Z.length<2)return 1;if(Z[K][0]===Q)return Z[K][1];if(Z[K][0]>Q&&K>0){var le=(Z[K][0]-Q)/(Z[K][0]-Z[K-1][0]);return Z[K][1]*(1-le)+le*Z[K-1][1]}}return 1}function z(Q,Z){for(var K=b({colormap:Q,nshades:256,format:"rgba"}),le=new Uint8Array(256*4),fe=0;fe<256;++fe){for(var ue=K[fe],V=0;V<3;++V)le[4*fe+V]=ue[V];Z?le[4*fe+3]=255*L(fe/255,Z):le[4*fe+3]=255*ue[3]}return d(le,[256,256,4],[4,0,1])}function O(Q){for(var Z=Q.length,K=new Array(Z),le=0;le<Z;++le)K[le]=Q[le][2];return K}E.highlight=function(Q){if(!Q||!this.contourEnable){this.contourCount=0;return}for(var Z=g(this.cells,this.intensity,Q.intensity),K=Z.cells,le=Z.vertexIds,fe=Z.vertexWeights,ue=K.length,V=_.mallocFloat32(2*3*ue),j=0,ee=0;ee<ue;++ee)for(var q=K[ee],X=0;X<2;++X){var J=q[0];q.length===2&&(J=q[X]);for(var ie=le[J][0],ne=le[J][1],oe=fe[J],se=1-oe,me=this.positions[ie],ce=this.positions[ne],pe=0;pe<3;++pe)V[j++]=oe*me[pe]+se*ce[pe]}this.contourCount=j/3|0,this.contourPositions.update(V.subarray(0,j)),_.free(V)},E.update=function(Q){Q=Q||{};var Z=this.gl;this.dirty=!0,"contourEnable"in Q&&(this.contourEnable=Q.contourEnable),"contourColor"in Q&&(this.contourColor=Q.contourColor),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"lightPosition"in Q&&(this.lightPosition=Q.lightPosition),this.hasAlpha=!1,"opacity"in Q&&(this.opacity=Q.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Q&&(this.opacityscale=Q.opacityscale,this.hasAlpha=!0),"ambient"in Q&&(this.ambientLight=Q.ambient),"diffuse"in Q&&(this.diffuseLight=Q.diffuse),"specular"in Q&&(this.specularLight=Q.specular),"roughness"in Q&&(this.roughness=Q.roughness),"fresnel"in Q&&(this.fresnel=Q.fresnel),Q.texture?(this.texture.dispose(),this.texture=f(Z,Q.texture)):Q.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Z.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Z.LINEAR,this.texture.setPixels(z(Q.colormap,this.opacityscale)),this.texture.generateMipmap());var K=Q.cells,le=Q.positions;if(!le||!K)return;var fe=[],ue=[],V=[],j=[],ee=[],q=[],X=[],J=[],ie=[],ne=[],oe=[],se=[],me=[],ce=[];this.cells=K,this.positions=le;var pe=Q.vertexNormals,xe=Q.cellNormals,Se=Q.vertexNormalsEpsilon===void 0?t:Q.vertexNormalsEpsilon,Ae=Q.faceNormalsEpsilon===void 0?a:Q.faceNormalsEpsilon;Q.useFacetNormals&&!xe&&(xe=u.faceNormals(K,le,Ae)),!xe&&!pe&&(pe=u.vertexNormals(K,le,Se));var Ce=Q.vertexColors,Ee=Q.cellColors,Oe=Q.meshColor||[1,1,1,1],_e=Q.vertexUVs,Re=Q.vertexIntensity,Ve=Q.cellUVs,Je=Q.cellIntensity,ze=1/0,De=-1/0;if(!_e&&!Ve)if(Re)if(Q.vertexIntensityBounds)ze=+Q.vertexIntensityBounds[0],De=+Q.vertexIntensityBounds[1];else for(var je=0;je<Re.length;++je){var dt=Re[je];ze=Math.min(ze,dt),De=Math.max(De,dt)}else if(Je)if(Q.cellIntensityBounds)ze=+Q.cellIntensityBounds[0],De=+Q.cellIntensityBounds[1];else for(var je=0;je<Je.length;++je){var dt=Je[je];ze=Math.min(ze,dt),De=Math.max(De,dt)}else for(var je=0;je<le.length;++je){var dt=le[je][2];ze=Math.min(ze,dt),De=Math.max(De,dt)}Re?this.intensity=Re:Je?this.intensity=Je:this.intensity=O(le),this.pickVertex=!(Je||Ee);var Et=Q.pointSizes,$t=Q.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var je=0;je<le.length;++je)for(var wt=le[je],Ot=0;Ot<3;++Ot)isNaN(wt[Ot])||!isFinite(wt[Ot])||(this.bounds[0][Ot]=Math.min(this.bounds[0][Ot],wt[Ot]),this.bounds[1][Ot]=Math.max(this.bounds[1][Ot],wt[Ot]));var Vt=0,kt=0,St=0;e:for(var je=0;je<K.length;++je){var ot=K[je];switch(ot.length){case 1:for(var ht=ot[0],wt=le[ht],Ot=0;Ot<3;++Ot)if(isNaN(wt[Ot])||!isFinite(wt[Ot]))continue e;ne.push(wt[0],wt[1],wt[2]);var Ke;Ce?Ke=Ce[ht]:Ee?Ke=Ee[je]:Ke=Oe,this.opacityscale&&Re?ue.push(Ke[0],Ke[1],Ke[2],this.opacity*L((Re[ht]-ze)/(De-ze),this.opacityscale)):Ke.length===3?oe.push(Ke[0],Ke[1],Ke[2],this.opacity):(oe.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0));var Pe;_e?Pe=_e[ht]:Re?Pe=[(Re[ht]-ze)/(De-ze),0]:Ve?Pe=Ve[je]:Je?Pe=[(Je[je]-ze)/(De-ze),0]:Pe=[(wt[2]-ze)/(De-ze),0],se.push(Pe[0],Pe[1]),Et?me.push(Et[ht]):me.push($t),ce.push(je),St+=1;break;case 2:for(var Ot=0;Ot<2;++Ot)for(var ht=ot[Ot],wt=le[ht],We=0;We<3;++We)if(isNaN(wt[We])||!isFinite(wt[We]))continue e;for(var Ot=0;Ot<2;++Ot){var ht=ot[Ot],wt=le[ht];q.push(wt[0],wt[1],wt[2]);var Ke;Ce?Ke=Ce[ht]:Ee?Ke=Ee[je]:Ke=Oe,this.opacityscale&&Re?ue.push(Ke[0],Ke[1],Ke[2],this.opacity*L((Re[ht]-ze)/(De-ze),this.opacityscale)):Ke.length===3?X.push(Ke[0],Ke[1],Ke[2],this.opacity):(X.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0));var Pe;_e?Pe=_e[ht]:Re?Pe=[(Re[ht]-ze)/(De-ze),0]:Ve?Pe=Ve[je]:Je?Pe=[(Je[je]-ze)/(De-ze),0]:Pe=[(wt[2]-ze)/(De-ze),0],J.push(Pe[0],Pe[1]),ie.push(je)}kt+=1;break;case 3:for(var Ot=0;Ot<3;++Ot)for(var ht=ot[Ot],wt=le[ht],We=0;We<3;++We)if(isNaN(wt[We])||!isFinite(wt[We]))continue e;for(var Ot=0;Ot<3;++Ot){var ht=ot[2-Ot],wt=le[ht];fe.push(wt[0],wt[1],wt[2]);var Ke;Ce?Ke=Ce[ht]:Ee?Ke=Ee[je]:Ke=Oe,Ke?this.opacityscale&&Re?ue.push(Ke[0],Ke[1],Ke[2],this.opacity*L((Re[ht]-ze)/(De-ze),this.opacityscale)):Ke.length===3?ue.push(Ke[0],Ke[1],Ke[2],this.opacity):(ue.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0)):ue.push(.5,.5,.5,1);var Pe;_e?Pe=_e[ht]:Re?Pe=[(Re[ht]-ze)/(De-ze),0]:Ve?Pe=Ve[je]:Je?Pe=[(Je[je]-ze)/(De-ze),0]:Pe=[(wt[2]-ze)/(De-ze),0],j.push(Pe[0],Pe[1]);var Qe;pe?Qe=pe[ht]:Qe=xe[je],V.push(Qe[0],Qe[1],Qe[2]),ee.push(je)}Vt+=1;break}}this.pointCount=St,this.edgeCount=kt,this.triangleCount=Vt,this.pointPositions.update(ne),this.pointColors.update(oe),this.pointUVs.update(se),this.pointSizes.update(me),this.pointIds.update(new Uint32Array(ce)),this.edgePositions.update(q),this.edgeColors.update(X),this.edgeUVs.update(J),this.edgeIds.update(new Uint32Array(ie)),this.trianglePositions.update(fe),this.triangleColors.update(ue),this.triangleUVs.update(j),this.triangleNormals.update(V),this.triangleIds.update(new Uint32Array(ee))},E.drawTransparent=E.draw=function(Q){Q=Q||{};for(var Z=this.gl,K=Q.model||C,le=Q.view||C,fe=Q.projection||C,ue=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)ue[0][V]=Math.max(ue[0][V],this.clipBounds[0][V]),ue[1][V]=Math.min(ue[1][V],this.clipBounds[1][V]);var j={model:K,view:le,projection:fe,inverseModel:C.slice(),clipBounds:ue,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};j.inverseModel=m(j.inverseModel,j.model),Z.disable(Z.CULL_FACE),this.texture.bind(0);var ee=new Array(16);l(ee,j.view,j.model),l(ee,j.projection,ee),m(ee,ee);for(var V=0;V<3;++V)j.eyePosition[V]=ee[12+V]/ee[15];for(var q=ee[15],V=0;V<3;++V)q+=this.lightPosition[V]*ee[4*V+3];for(var V=0;V<3;++V){for(var X=ee[12+V],J=0;J<3;++J)X+=ee[4*J+V]*this.lightPosition[J];j.lightPosition[V]=X/q}if(this.triangleCount>0){var ie=this.triShader;ie.bind(),ie.uniforms=j,this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ie=this.lineShader;ie.bind(),ie.uniforms=j,this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ie=this.pointShader;ie.bind(),ie.uniforms=j,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ie=this.contourShader;ie.bind(),ie.uniforms=j,this.contourVAO.bind(),Z.drawArrays(Z.LINES,0,this.contourCount),this.contourVAO.unbind()}},E.drawPick=function(Q){Q=Q||{};for(var Z=this.gl,K=Q.model||C,le=Q.view||C,fe=Q.projection||C,ue=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)ue[0][V]=Math.max(ue[0][V],this.clipBounds[0][V]),ue[1][V]=Math.min(ue[1][V],this.clipBounds[1][V]);this._model=[].slice.call(K),this._view=[].slice.call(le),this._projection=[].slice.call(fe),this._resolution=[Z.drawingBufferWidth,Z.drawingBufferHeight];var j={model:K,view:le,projection:fe,clipBounds:ue,pickId:this.pickId/255},ee=this.pickShader;if(ee.bind(),ee.uniforms=j,this.triangleCount>0&&(this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ee=this.pointPickShader;ee.bind(),ee.uniforms=j,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()}},E.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;for(var Z=Q.value[0]+256*Q.value[1]+65536*Q.value[2],K=this.cells[Z],le=this.positions,fe=new Array(K.length),ue=0;ue<K.length;++ue)fe[ue]=le[K[ue]];var V=Q.coord[0],j=Q.coord[1];if(!this.pickVertex){var ee=this.positions[K[0]],q=this.positions[K[1]],X=this.positions[K[2]],J=[(ee[0]+q[0]+X[0])/3,(ee[1]+q[1]+X[1])/3,(ee[2]+q[2]+X[2])/3];return{_cellCenter:!0,position:[V,j],index:Z,cell:K,cellId:Z,intensity:this.intensity[Z],dataCoordinate:J}}var ie=A(fe,[V*this.pixelRatio,this._resolution[1]-j*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ie)return null;for(var ne=ie[2],oe=0,ue=0;ue<K.length;++ue)oe+=ne[ue]*this.intensity[K[ue]];return{position:ie[1],index:K[ie[0]],cell:K,cellId:Z,intensity:oe,dataCoordinate:this.positions[K[ie[0]]]}},E.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function R(Q){var Z=i(Q,c.vertex,c.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.normal.location=4,Z}function D(Q){var Z=i(Q,S.vertex,S.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z}function H(Q){var Z=i(Q,T.vertex,T.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.pointSize.location=4,Z}function B(Q){var Z=i(Q,x.vertex,x.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z}function $(Q){var Z=i(Q,w.vertex,w.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.pointSize.location=4,Z}function W(Q){var Z=i(Q,v.vertex,v.fragment);return Z.attributes.position.location=0,Z}function re(Q,Z){arguments.length===1&&(Z=Q,Q=Z.gl);var K=Q.getExtension("OES_standard_derivatives")||Q.getExtension("MOZ_OES_standard_derivatives")||Q.getExtension("WEBKIT_OES_standard_derivatives");if(!K)throw new Error("derivatives not supported");var le=R(Q),fe=D(Q),ue=H(Q),V=B(Q),j=$(Q),ee=W(Q),q=f(Q,d(new Uint8Array([255,255,255,255]),[1,1,4]));q.generateMipmap(),q.minFilter=Q.LINEAR_MIPMAP_LINEAR,q.magFilter=Q.LINEAR;var X=n(Q),J=n(Q),ie=n(Q),ne=n(Q),oe=n(Q),se=r(Q,[{buffer:X,type:Q.FLOAT,size:3},{buffer:oe,type:Q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:J,type:Q.FLOAT,size:4},{buffer:ie,type:Q.FLOAT,size:2},{buffer:ne,type:Q.FLOAT,size:3}]),me=n(Q),ce=n(Q),pe=n(Q),xe=n(Q),Se=r(Q,[{buffer:me,type:Q.FLOAT,size:3},{buffer:xe,type:Q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ce,type:Q.FLOAT,size:4},{buffer:pe,type:Q.FLOAT,size:2}]),Ae=n(Q),Ce=n(Q),Ee=n(Q),Oe=n(Q),_e=n(Q),Re=r(Q,[{buffer:Ae,type:Q.FLOAT,size:3},{buffer:_e,type:Q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ce,type:Q.FLOAT,size:4},{buffer:Ee,type:Q.FLOAT,size:2},{buffer:Oe,type:Q.FLOAT,size:1}]),Ve=n(Q),Je=r(Q,[{buffer:Ve,type:Q.FLOAT,size:3}]),ze=new M(Q,q,le,fe,ue,V,j,ee,X,oe,J,ie,ne,se,me,xe,ce,pe,Se,Ae,_e,Ce,Ee,Oe,Re,Ve,Je);return ze.update(Z),ze}h.exports=re},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(o,h,y){h.exports=f;var t=o("gl-buffer"),a=o("gl-shader"),i=o("./shaders");function n(u,l,m){this.plot=u,this.vbo=l,this.shader=m}var r=n.prototype;r.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},r.drawBox=function(){var u=[0,0],l=[0,0];return function(m,d,b,g,_){var p=this.plot,A=this.shader,c=p.gl;u[0]=m,u[1]=d,l[0]=b,l[1]=g,A.uniforms.lo=u,A.uniforms.hi=l,A.uniforms.color=_,c.drawArrays(c.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(u){var l=u.gl,m=t(l,[0,0,0,1,1,0,1,1]),d=a(l,i.boxVert,i.lineFrag);return new n(u,m,d)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(o,h,y){h.exports=l;var t=o("gl-buffer"),a=o("gl-shader"),i=o("binary-search-bounds"),n=o("./shaders");function r(m,d,b,g){this.plot=m,this.vbo=d,this.shader=b,this.tickShader=g,this.ticks=[[],[]]}function f(m,d){return m-d}var u=r.prototype;u.draw=function(){var m=[0,0],d=[0,0],b=[0,0];return function(){for(var g=this.plot,_=this.vbo,p=this.shader,A=this.ticks,c=g.gl,S=g._tickBounds,T=g.dataBox,x=g.viewBox,w=g.gridLineWidth,v=g.gridLineColor,C=g.gridLineEnable,M=g.pixelRatio,E=0;E<2;++E){var L=S[E],z=S[E+2],O=z-L,R=.5*(T[E+2]+T[E]),D=T[E+2]-T[E];d[E]=2*O/D,m[E]=2*(L-R)/D}p.bind(),_.bind(),p.attributes.dataCoord.pointer(),p.uniforms.dataShift=m,p.uniforms.dataScale=d;for(var H=0,E=0;E<2;++E){b[0]=b[1]=0,b[E]=1,p.uniforms.dataAxis=b,p.uniforms.lineWidth=w[E]/(x[E+2]-x[E])*M,p.uniforms.color=v[E];var B=A[E].length*6;C[E]&&B&&c.drawArrays(c.TRIANGLES,H,B),H+=B}}}(),u.drawTickMarks=function(){var m=[0,0],d=[0,0],b=[1,0],g=[0,1],_=[0,0],p=[0,0];return function(){for(var A=this.plot,c=this.vbo,S=this.tickShader,T=this.ticks,x=A.gl,w=A._tickBounds,v=A.dataBox,C=A.viewBox,M=A.pixelRatio,E=A.screenBox,L=E[2]-E[0],z=E[3]-E[1],O=C[2]-C[0],R=C[3]-C[1],D=0;D<2;++D){var H=w[D],B=w[D+2],$=B-H,W=.5*(v[D+2]+v[D]),re=v[D+2]-v[D];d[D]=2*$/re,m[D]=2*(H-W)/re}d[0]*=O/L,m[0]*=O/L,d[1]*=R/z,m[1]*=R/z,S.bind(),c.bind(),S.attributes.dataCoord.pointer();var Q=S.uniforms;Q.dataShift=m,Q.dataScale=d;var Z=A.tickMarkLength,K=A.tickMarkWidth,le=A.tickMarkColor,fe=0,ue=T[0].length*6,V=Math.min(i.ge(T[0],(v[0]-w[0])/(w[2]-w[0]),f),T[0].length),j=Math.min(i.gt(T[0],(v[2]-w[0])/(w[2]-w[0]),f),T[0].length),ee=fe+6*V,q=6*Math.max(0,j-V),X=Math.min(i.ge(T[1],(v[1]-w[1])/(w[3]-w[1]),f),T[1].length),J=Math.min(i.gt(T[1],(v[3]-w[1])/(w[3]-w[1]),f),T[1].length),ie=ue+6*X,ne=6*Math.max(0,J-X);_[0]=2*(C[0]-Z[1])/L-1,_[1]=(C[3]+C[1])/z-1,p[0]=Z[1]*M/L,p[1]=K[1]*M/z,ne&&(Q.color=le[1],Q.tickScale=p,Q.dataAxis=g,Q.screenOffset=_,x.drawArrays(x.TRIANGLES,ie,ne)),_[0]=(C[2]+C[0])/L-1,_[1]=2*(C[1]-Z[0])/z-1,p[0]=K[0]*M/L,p[1]=Z[0]*M/z,q&&(Q.color=le[0],Q.tickScale=p,Q.dataAxis=b,Q.screenOffset=_,x.drawArrays(x.TRIANGLES,ee,q)),_[0]=2*(C[2]+Z[3])/L-1,_[1]=(C[3]+C[1])/z-1,p[0]=Z[3]*M/L,p[1]=K[3]*M/z,ne&&(Q.color=le[3],Q.tickScale=p,Q.dataAxis=g,Q.screenOffset=_,x.drawArrays(x.TRIANGLES,ie,ne)),_[0]=(C[2]+C[0])/L-1,_[1]=2*(C[3]+Z[2])/z-1,p[0]=K[2]*M/L,p[1]=Z[2]*M/z,q&&(Q.color=le[2],Q.tickScale=p,Q.dataAxis=b,Q.screenOffset=_,x.drawArrays(x.TRIANGLES,ee,q))}}(),u.update=function(){var m=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1];return function(b){var g=b.ticks,_=b.bounds,p=new Float32Array(6*3*(g[0].length+g[1].length));this.plot.zeroLineEnable;for(var A=0,c=[[],[]],S=0;S<2;++S)for(var T=c[S],x=g[S],w=_[S],v=_[S+2],C=0;C<x.length;++C){var M=(x[C].x-w)/(v-w);T.push(M);for(var E=0;E<6;++E)p[A++]=M,p[A++]=m[E],p[A++]=d[E]}this.ticks=c,this.vbo.update(p)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function l(m){var d=m.gl,b=t(d),g=a(d,n.gridVert,n.gridFrag),_=a(d,n.tickVert,n.gridFrag),p=new r(m,b,g,_);return p}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(o,h,y){h.exports=f;var t=o("gl-buffer"),a=o("gl-shader"),i=o("./shaders");function n(u,l,m){this.plot=u,this.vbo=l,this.shader=m}var r=n.prototype;r.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},r.drawLine=function(){var u=[0,0],l=[0,0];return function(m,d,b,g,_,p){var A=this.plot,c=this.shader,S=A.gl;u[0]=m,u[1]=d,l[0]=b,l[1]=g,c.uniforms.start=u,c.uniforms.end=l,c.uniforms.width=_*A.pixelRatio,c.uniforms.color=p,S.drawArrays(S.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(u){var l=u.gl,m=t(l,[-1,-1,-1,1,1,-1,1,1]),d=a(l,i.lineVert,i.lineFrag),b=new n(u,m,d);return b}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(o,h,y){var t=o("glslify"),a=t([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);h.exports={lineVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:t([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(o,h,y){h.exports=l;var t=o("gl-buffer"),a=o("gl-shader"),i=o("text-cache"),n=o("binary-search-bounds"),r=o("./shaders");function f(m,d,b){this.plot=m,this.vbo=d,this.shader=b,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var u=f.prototype;u.drawTicks=function(){var m=[0,0],d=[0,0],b=[0,0];return function(g){var _=this.plot,p=this.shader,A=this.tickX[g],c=this.tickOffset[g],S=_.gl,T=_.viewBox,x=_.dataBox,w=_.screenBox,v=_.pixelRatio,C=_.tickEnable,M=_.tickPad,E=_.tickColor,L=_.tickAngle,z=_.labelEnable,O=_.labelPad,R=_.labelColor,D=_.labelAngle,H=this.labelOffset[g],B=this.labelCount[g],$=n.lt(A,x[g]),W=n.le(A,x[g+2]);m[0]=m[1]=0,m[g]=1,d[g]=(T[2+g]+T[g])/(w[2+g]-w[g])-1;var re=2/w[2+(g^1)]-w[g^1];d[g^1]=re*T[g^1]-1,C[g]&&(d[g^1]-=re*v*M[g],$<W&&c[W]>c[$]&&(p.uniforms.dataAxis=m,p.uniforms.screenOffset=d,p.uniforms.color=E[g],p.uniforms.angle=L[g],S.drawArrays(S.TRIANGLES,c[$],c[W]-c[$]))),z[g]&&B&&(d[g^1]-=re*v*O[g],p.uniforms.dataAxis=b,p.uniforms.screenOffset=d,p.uniforms.color=R[g],p.uniforms.angle=D[g],S.drawArrays(S.TRIANGLES,H,B)),d[g^1]=re*T[2+(g^1)]-1,C[g+2]&&(d[g^1]+=re*v*M[g+2],$<W&&c[W]>c[$]&&(p.uniforms.dataAxis=m,p.uniforms.screenOffset=d,p.uniforms.color=E[g+2],p.uniforms.angle=L[g+2],S.drawArrays(S.TRIANGLES,c[$],c[W]-c[$]))),z[g+2]&&B&&(d[g^1]+=re*v*O[g+2],p.uniforms.dataAxis=b,p.uniforms.screenOffset=d,p.uniforms.color=R[g+2],p.uniforms.angle=D[g+2],S.drawArrays(S.TRIANGLES,H,B))}}(),u.drawTitle=function(){var m=[0,0],d=[0,0];return function(){var b=this.plot,g=this.shader,_=b.gl,p=b.screenBox,A=b.titleCenter,c=b.titleAngle,S=b.titleColor,T=b.pixelRatio;if(!!this.titleCount){for(var x=0;x<2;++x)d[x]=2*(A[x]*T-p[x])/(p[2+x]-p[x])-1;g.bind(),g.uniforms.dataAxis=m,g.uniforms.screenOffset=d,g.uniforms.angle=c,g.uniforms.color=S,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}}(),u.bind=function(){var m=[0,0],d=[0,0],b=[0,0];return function(){var g=this.plot,_=this.shader,p=g._tickBounds,A=g.dataBox,c=g.screenBox,S=g.viewBox;_.bind();for(var T=0;T<2;++T){var x=p[T],w=p[T+2],v=w-x,C=.5*(A[T+2]+A[T]),M=A[T+2]-A[T],E=S[T],L=S[T+2],z=L-E,O=c[T],R=c[T+2],D=R-O;d[T]=2*v/M*z/D,m[T]=2*(x-C)/M*z/D}b[1]=2*g.pixelRatio/(c[3]-c[1]),b[0]=b[1]*(c[3]-c[1])/(c[2]-c[0]),_.uniforms.dataScale=d,_.uniforms.dataShift=m,_.uniforms.textScale=b,this.vbo.bind(),_.attributes.textCoordinate.pointer()}}(),u.update=function(m){var d=[],b=m.ticks,g=m.bounds,_,p,A,c,S;for(S=0;S<2;++S){var T=[Math.floor(d.length/3)],x=[-1/0],w=b[S];for(_=0;_<w.length;++_){var v=w[_],C=v.x,M=v.text,E=v.font||"sans-serif";c=v.fontSize||12;for(var L=1/(g[S+2]-g[S]),z=g[S],O=M.split(`
`),R=0;R<O.length;R++)for(A=i(E,O[R]).data,p=0;p<A.length;p+=2)d.push(A[p]*c,-A[p+1]*c-R*c*1.2,(C-z)*L);T.push(Math.floor(d.length/3)),x.push(C)}this.tickOffset[S]=T,this.tickX[S]=x}for(S=0;S<2;++S){for(this.labelOffset[S]=Math.floor(d.length/3),A=i(m.labelFont[S],m.labels[S],{textAlign:"center"}).data,c=m.labelSize[S],_=0;_<A.length;_+=2)d.push(A[_]*c,-A[_+1]*c,0);this.labelCount[S]=Math.floor(d.length/3)-this.labelOffset[S]}for(this.titleOffset=Math.floor(d.length/3),A=i(m.titleFont,m.title).data,c=m.titleSize,_=0;_<A.length;_+=2)d.push(A[_]*c,-A[_+1]*c,0);this.titleCount=Math.floor(d.length/3)-this.titleOffset,this.vbo.update(d)},u.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function l(m){var d=m.gl,b=t(d),g=a(d,r.textVert,r.textFrag),_=new f(m,b,g);return _}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(o,h,y){h.exports=d;var t=o("gl-select-static"),a=o("./lib/grid"),i=o("./lib/text"),n=o("./lib/line"),r=o("./lib/box");function f(b,g){this.gl=b,this.pickBuffer=g,this.screenBox=[0,0,b.drawingBufferWidth,b.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var u=f.prototype;u.setDirty=function(){this.dirty=this.pickDirty=!0},u.setOverlayDirty=function(){this.dirty=!0},u.nextDepthValue=function(){return this._depthCounter++/65536},u.draw=function(){return function(){var b=this.gl,g=this.screenBox,_=this.viewBox,p=this.dataBox,A=this.pixelRatio,c=this.grid,S=this.line,T=this.text,x=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,b.bindFramebuffer(b.FRAMEBUFFER,null),b.enable(b.SCISSOR_TEST),b.disable(b.DEPTH_TEST),b.depthFunc(b.LESS),b.depthMask(!1),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD,b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),this.borderColor){b.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var w=this.borderColor;b.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}b.scissor(_[0],_[1],_[2]-_[0],_[3]-_[1]),b.viewport(_[0],_[1],_[2]-_[0],_[3]-_[1]);var v=this.backgroundColor;b.clearColor(v[0]*v[3],v[1]*v[3],v[2]*v[3],v[3]),b.clear(b.COLOR_BUFFER_BIT),c.draw();var C=this.zeroLineEnable,M=this.zeroLineColor,E=this.zeroLineWidth;if(C[0]||C[1]){S.bind();for(var L=0;L<2;++L)if(!(!C[L]||!(p[L]<=0&&p[L+2]>=0))){var z=g[L]-p[L]*(g[L+2]-g[L])/(p[L+2]-p[L]);L===0?S.drawLine(z,g[1],z,g[3],E[L],M[L]):S.drawLine(g[0],z,g[2],z,E[L],M[L])}}for(var L=0;L<x.length;++L)x[L].draw();b.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),b.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),S.bind();var O=this.borderLineEnable,R=this.borderLineWidth,D=this.borderLineColor;O[1]&&S.drawLine(_[0],_[1]-.5*R[1]*A,_[0],_[3]+.5*R[3]*A,R[1],D[1]),O[0]&&S.drawLine(_[0]-.5*R[0]*A,_[1],_[2]+.5*R[2]*A,_[1],R[0],D[0]),O[3]&&S.drawLine(_[2],_[1]-.5*R[1]*A,_[2],_[3]+.5*R[3]*A,R[3],D[3]),O[2]&&S.drawLine(_[0]-.5*R[0]*A,_[3],_[2]+.5*R[2]*A,_[3],R[2],D[2]),T.bind();for(var L=0;L<2;++L)T.drawTicks(L);this.titleEnable&&T.drawTitle();for(var H=this.overlays,L=0;L<H.length;++L)H[L].draw();b.disable(b.SCISSOR_TEST),b.disable(b.BLEND),b.depthMask(!0)}}}(),u.drawPick=function(){return function(){if(!this.static){var b=this.pickBuffer;this.gl,this._pickTimeout=null,b.begin();for(var g=1,_=this.objects,p=0;p<_.length;++p)g=_[p].drawPick(g);b.end()}}}(),u.pick=function(){return function(b,g){if(!this.static){var _=this.pixelRatio,p=this.pickPixelRatio,A=this.viewBox,c=Math.round((b-A[0]/_)*p)|0,S=Math.round((g-A[1]/_)*p)|0,T=this.pickBuffer.query(c,S,this.pickRadius);if(!T)return null;for(var x=T.id+(T.value[0]<<8)+(T.value[1]<<16)+(T.value[2]<<24),w=this.objects,v=0;v<w.length;++v){var C=w[v].pick(c,S,x);if(C)return C}return null}}}();function l(b){for(var g=b.slice(),_=0;_<g.length;++_)g[_]=g[_].slice();return g}function m(b,g){return b.x-g.x}u.setScreenBox=function(b){var g=this.screenBox,_=this.pixelRatio;g[0]=Math.round(b[0]*_)|0,g[1]=Math.round(b[1]*_)|0,g[2]=Math.round(b[2]*_)|0,g[3]=Math.round(b[3]*_)|0,this.setDirty()},u.setDataBox=function(b){var g=this.dataBox,_=g[0]!==b[0]||g[1]!==b[1]||g[2]!==b[2]||g[3]!==b[3];_&&(g[0]=b[0],g[1]=b[1],g[2]=b[2],g[3]=b[3],this.setDirty())},u.setViewBox=function(b){var g=this.pixelRatio,_=this.viewBox;_[0]=Math.round(b[0]*g)|0,_[1]=Math.round(b[1]*g)|0,_[2]=Math.round(b[2]*g)|0,_[3]=Math.round(b[3]*g)|0;var p=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((b[2]-b[0])*p)|0,Math.round((b[3]-b[1])*p)|0],this.setDirty()},u.update=function(b){b=b||{};var g=this.gl;this.pixelRatio=b.pixelRatio||1;var _=this.pixelRatio;this.pickPixelRatio=Math.max(_,1),this.setScreenBox(b.screenBox||[0,0,g.drawingBufferWidth/_,g.drawingBufferHeight/_]),this.screenBox,this.setViewBox(b.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/_,.125*(this.screenBox[3]-this.screenBox[1])/_,.875*(this.screenBox[2]-this.screenBox[0])/_,.875*(this.screenBox[3]-this.screenBox[1])/_]);var p=this.viewBox,A=(p[2]-p[0])/(p[3]-p[1]);this.setDataBox(b.dataBox||[-10,-10/A,10,10/A]),this.borderColor=b.borderColor!==!1?(b.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(b.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(b.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(b.gridLineWidth||[1,1]).slice(),this.gridLineColor=l(b.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(b.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(b.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=l(b.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(b.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(b.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=l(b.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(b.titleCenter||[.5*(p[0]+p[2])/_,(p[3]+120)/_]).slice(),this.titleEnable=!("titleEnable"in b)||!!b.titleEnable,this.titleAngle=b.titleAngle||0,this.titleColor=(b.titleColor||[0,0,0,1]).slice(),this.labelPad=(b.labelPad||[15,15,15,15]).slice(),this.labelAngle=(b.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(b.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=l(b.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(b.tickPad||[15,15,15,15]).slice(),this.tickAngle=(b.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(b.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=l(b.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(b.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(b.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=l(b.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var c=b.ticks||[[],[]],S=this._tickBounds;S[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(var T=0;T<2;++T){var x=c[T].slice(0);x.length!==0&&(x.sort(m),S[T]=Math.min(S[T],x[0].x),S[T+2]=Math.max(S[T+2],x[x.length-1].x))}this.grid.update({bounds:S,ticks:c}),this.text.update({bounds:S,ticks:c,labels:b.labels||["x","y"],labelSize:b.labelSize||[12,12],labelFont:b.labelFont||["sans-serif","sans-serif"],title:b.title||"",titleSize:b.titleSize||18,titleFont:b.titleFont||"sans-serif"}),this.static=!!b.static,this.setDirty()},u.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var b=this.objects.length-1;b>=0;--b)this.objects[b].dispose();this.objects.length=0;for(var b=this.overlays.length-1;b>=0;--b)this.overlays[b].dispose();this.overlays.length=0,this.gl=null},u.addObject=function(b){this.objects.indexOf(b)<0&&(this.objects.push(b),this.setDirty())},u.removeObject=function(b){for(var g=this.objects,_=0;_<g.length;++_)if(g[_]===b){g.splice(_,1),this.setDirty();break}},u.addOverlay=function(b){this.overlays.indexOf(b)<0&&(this.overlays.push(b),this.setOverlayDirty())},u.removeOverlay=function(b){for(var g=this.overlays,_=0;_<g.length;++_)if(g[_]===b){g.splice(_,1),this.setOverlayDirty();break}};function d(b){var g=b.gl,_=t(g,[g.drawingBufferWidth,g.drawingBufferHeight]),p=new f(g,_);return p.grid=a(p),p.text=i(p),p.line=n(p),p.box=r(p),p.update(b),p}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(o,h,y){h.exports=u;var t=o("right-now"),a=o("3d-view"),i=o("mouse-change"),n=o("mouse-wheel"),r=o("mouse-event-offset"),f=o("has-passive-events");function u(l,m){l=l||document.body,m=m||{};var d=[.01,1/0];"distanceLimits"in m&&(d[0]=m.distanceLimits[0],d[1]=m.distanceLimits[1]),"zoomMin"in m&&(d[0]=m.zoomMin),"zoomMax"in m&&(d[1]=m.zoomMax);var b=a({center:m.center||[0,0,0],up:m.up||[0,1,0],eye:m.eye||[0,0,10],mode:m.mode||"orbit",distanceLimits:d}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=0,p=l.clientWidth,A=l.clientHeight,c={keyBindingMode:"rotate",enableWheel:!0,view:b,element:l,delay:m.delay||16,rotateSpeed:m.rotateSpeed||1,zoomSpeed:m.zoomSpeed||1,translateSpeed:m.translateSpeed||1,flipX:!!m.flipX,flipY:!!m.flipY,modes:b.modes,_ortho:m._ortho||m.projection&&m.projection.type==="orthographic"||!1,tick:function(){var S=t(),T=this.delay,x=S-2*T;b.idle(S-T),b.recalcMatrix(x),b.flush(S-(100+T*2));for(var w=!0,v=b.computedMatrix,C=0;C<16;++C)w=w&&g[C]===v[C],g[C]=v[C];var M=l.clientWidth===p&&l.clientHeight===A;return p=l.clientWidth,A=l.clientHeight,w?!M:(_=Math.exp(b.computedRadius[0]),!0)},lookAt:function(S,T,x){b.lookAt(b.lastT(),S,T,x)},rotate:function(S,T,x){b.rotate(b.lastT(),S,T,x)},pan:function(S,T,x){b.pan(b.lastT(),S,T,x)},translate:function(S,T,x){b.translate(b.lastT(),S,T,x)}};return Object.defineProperties(c,{matrix:{get:function(){return b.computedMatrix},set:function(S){return b.setMatrix(b.lastT(),S),b.computedMatrix},enumerable:!0},mode:{get:function(){return b.getMode()},set:function(S){var T=b.computedUp.slice(),x=b.computedEye.slice(),w=b.computedCenter.slice();if(b.setMode(S),S==="turntable"){var v=t();b._active.lookAt(v,x,w,T),b._active.lookAt(v+500,x,w,[0,0,1]),b._active.flush(v)}return b.getMode()},enumerable:!0},center:{get:function(){return b.computedCenter},set:function(S){return b.lookAt(b.lastT(),null,S),b.computedCenter},enumerable:!0},eye:{get:function(){return b.computedEye},set:function(S){return b.lookAt(b.lastT(),S),b.computedEye},enumerable:!0},up:{get:function(){return b.computedUp},set:function(S){return b.lookAt(b.lastT(),null,null,S),b.computedUp},enumerable:!0},distance:{get:function(){return _},set:function(S){return b.setDistance(b.lastT(),S),S},enumerable:!0},distanceLimits:{get:function(){return b.getDistanceLimits(d)},set:function(S){return b.setDistanceLimits(S),S},enumerable:!0}}),l.addEventListener("contextmenu",function(S){return S.preventDefault(),!1}),c._lastX=-1,c._lastY=-1,c._lastMods={shift:!1,control:!1,alt:!1,meta:!1},c.enableMouseListeners=function(){c.mouseListener=i(l,S),l.addEventListener("touchstart",function(T){var x=r(T.changedTouches[0],l);S(0,x[0],x[1],c._lastMods),S(1,x[0],x[1],c._lastMods)},f?{passive:!0}:!1),l.addEventListener("touchmove",function(T){var x=r(T.changedTouches[0],l);S(1,x[0],x[1],c._lastMods),T.preventDefault()},f?{passive:!1}:!1),l.addEventListener("touchend",function(T){S(0,c._lastX,c._lastY,c._lastMods)},f?{passive:!0}:!1);function S(T,x,w,v){var C=c.keyBindingMode;if(C!==!1){var M=C==="rotate",E=C==="pan",L=C==="zoom",z=!!v.control,O=!!v.alt,R=!!v.shift,D=!!(T&1),H=!!(T&2),B=!!(T&4),$=1/l.clientHeight,W=$*(x-c._lastX),re=$*(w-c._lastY),Q=c.flipX?1:-1,Z=c.flipY?1:-1,K=Math.PI*c.rotateSpeed,le=t();if(c._lastX!==-1&&c._lastY!==-1&&((M&&D&&!z&&!O&&!R||D&&!z&&!O&&R)&&b.rotate(le,Q*K*W,-Z*K*re,0),(E&&D&&!z&&!O&&!R||H||D&&z&&!O&&!R)&&b.pan(le,-c.translateSpeed*W*_,c.translateSpeed*re*_,0),L&&D&&!z&&!O&&!R||B||D&&!z&&O&&!R)){var fe=-c.zoomSpeed*re/window.innerHeight*(le-b.lastT())*100;b.pan(le,0,0,_*(Math.exp(fe)-1))}return c._lastX=x,c._lastY=w,c._lastMods=v,!0}}c.wheelListener=n(l,function(T,x){if(c.keyBindingMode!==!1&&!!c.enableWheel){var w=c.flipX?1:-1,v=c.flipY?1:-1,C=t();if(Math.abs(T)>Math.abs(x))b.rotate(C,0,0,-T*w*Math.PI*c.rotateSpeed/window.innerWidth);else if(!c._ortho){var M=-c.zoomSpeed*v*x/window.innerHeight*(C-b.lastT())/20;b.pan(C,0,0,_*(Math.exp(M)-1))}}},!0)},c.enableMouseListeners(),c}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(o,h,y){var t=o("glslify"),a=o("gl-shader"),i=t([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),n=t([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);h.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(o,h,y){var t=o("./camera.js"),a=o("gl-axes3d"),i=o("gl-axes3d/properties"),n=o("gl-spikes3d"),r=o("gl-select-static"),f=o("gl-fbo"),u=o("a-big-triangle"),l=o("mouse-change"),m=o("gl-mat4/perspective"),d=o("gl-mat4/ortho"),b=o("./lib/shader"),g=o("is-mobile")({tablet:!0,featureDetect:!0});h.exports={createScene:S,createCamera:t};function _(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function p(x,w){var v=null;try{v=x.getContext("webgl",w),v||(v=x.getContext("experimental-webgl",w))}catch{return null}return v}function A(x){var w=Math.round(Math.log(Math.abs(x))/Math.log(10));if(w<0){var v=Math.round(Math.pow(10,-w));return Math.ceil(x*v)/v}else if(w>0){var v=Math.round(Math.pow(10,w));return Math.ceil(x/v)*v}return Math.ceil(x)}function c(x){return typeof x=="boolean"?x:!0}function S(x){x=x||{},x.camera=x.camera||{};var w=x.canvas;if(!w)if(w=document.createElement("canvas"),x.container){var v=x.container;v.appendChild(w)}else document.body.appendChild(w);var C=x.gl;if(C||(x.glOptions&&(g=!!x.glOptions.preserveDrawingBuffer),C=p(w,x.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!C)throw new Error("webgl not supported");var M=x.bounds||[[-10,-10,-10],[10,10,10]],E=new _,L=f(C,C.drawingBufferWidth,C.drawingBufferHeight,{preferFloat:!g}),z=b(C),O=x.cameraObject&&x.cameraObject._ortho===!0||x.camera.projection&&x.camera.projection.type==="orthographic"||!1,R={eye:x.camera.eye||[2,0,0],center:x.camera.center||[0,0,0],up:x.camera.up||[0,1,0],zoomMin:x.camera.zoomMax||.1,zoomMax:x.camera.zoomMin||100,mode:x.camera.mode||"turntable",_ortho:O},D=x.axes||{},H=a(C,D);H.enable=!D.disable;var B=x.spikes||{},$=n(C,B),W=[],re=[],Q=[],Z=[],K=!0,V=!0,le=new Array(16),fe=new Array(16),ue={view:null,projection:le,model:fe,_ortho:!1},V=!0,j=[C.drawingBufferWidth,C.drawingBufferHeight],ee=x.cameraObject||t(w,R),q={gl:C,contextLost:!1,pixelRatio:x.pixelRatio||1,canvas:w,selection:E,camera:ee,axes:H,axesPixels:null,spikes:$,bounds:M,objects:W,shape:j,aspect:x.aspectRatio||[1,1,1],pickRadius:x.pickRadius||10,zNear:x.zNear||.01,zFar:x.zFar||1e3,fovy:x.fovy||Math.PI/4,clearColor:x.clearColor||[0,0,0,0],autoResize:c(x.autoResize),autoBounds:c(x.autoBounds),autoScale:!!x.autoScale,autoCenter:c(x.autoCenter),clipToBounds:c(x.clipToBounds),snapToData:!!x.snapToData,onselect:x.onselect||null,onrender:x.onrender||null,onclick:x.onclick||null,cameraParams:ue,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xe){this.aspect[0]=xe.x,this.aspect[1]=xe.y,this.aspect[2]=xe.z,V=!0},setBounds:function(xe,Se){this.bounds[0][xe]=Se.min,this.bounds[1][xe]=Se.max},setClearColor:function(xe){this.clearColor=xe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},X=[C.drawingBufferWidth/q.pixelRatio|0,C.drawingBufferHeight/q.pixelRatio|0];function J(){if(!q._stopped&&!!q.autoResize){var xe=w.parentNode,Se=1,Ae=1;xe&&xe!==document.body?(Se=xe.clientWidth,Ae=xe.clientHeight):(Se=window.innerWidth,Ae=window.innerHeight);var Ce=Math.ceil(Se*q.pixelRatio)|0,Ee=Math.ceil(Ae*q.pixelRatio)|0;if(Ce!==w.width||Ee!==w.height){w.width=Ce,w.height=Ee;var Oe=w.style;Oe.position=Oe.position||"absolute",Oe.left="0px",Oe.top="0px",Oe.width=Se+"px",Oe.height=Ae+"px",K=!0}}}q.autoResize&&J(),window.addEventListener("resize",J);function ie(){for(var xe=W.length,Se=Z.length,Ae=0;Ae<Se;++Ae)Q[Ae]=0;e:for(var Ae=0;Ae<xe;++Ae){var Ce=W[Ae],Ee=Ce.pickSlots;if(!Ee){re[Ae]=-1;continue}for(var Oe=0;Oe<Se;++Oe)if(Q[Oe]+Ee<255){re[Ae]=Oe,Ce.setPickBase(Q[Oe]+1),Q[Oe]+=Ee;continue e}var _e=r(C,j);re[Ae]=Se,Z.push(_e),Q.push(Ee),Ce.setPickBase(1),Se+=1}for(;Se>0&&Q[Se-1]===0;)Q.pop(),Z.pop().dispose()}q.update=function(xe){q._stopped||(K=!0,V=!0)},q.add=function(xe){q._stopped||(xe.axes=H,W.push(xe),re.push(-1),K=!0,V=!0,ie())},q.remove=function(xe){if(!q._stopped){var Se=W.indexOf(xe);Se<0||(W.splice(Se,1),re.pop(),K=!0,V=!0,ie())}},q.dispose=function(){if(!q._stopped&&(q._stopped=!0,window.removeEventListener("resize",J),w.removeEventListener("webglcontextlost",ne),q.mouseListener.enabled=!1,!q.contextLost)){H.dispose(),$.dispose();for(var xe=0;xe<W.length;++xe)W[xe].dispose();L.dispose();for(var xe=0;xe<Z.length;++xe)Z[xe].dispose();z.dispose(),C=null,H=null,$=null,W=[]}},q._mouseRotating=!1,q._prevButtons=0,q.enableMouseListeners=function(){q.mouseListener=l(w,function(xe,Se,Ae){if(!q._stopped){var Ce=Z.length,Ee=W.length,Oe=E.object;E.distance=1/0,E.mouse[0]=Se,E.mouse[1]=Ae,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var _e=!1;if(xe&&q._prevButtons)q._mouseRotating=!0;else{q._mouseRotating&&(V=!0),q._mouseRotating=!1;for(var Re=0;Re<Ce;++Re){var Ve=Z[Re].query(Se,X[1]-Ae-1,q.pickRadius);if(Ve){if(Ve.distance>E.distance)continue;for(var Je=0;Je<Ee;++Je){var ze=W[Je];if(re[Je]===Re){var De=ze.pick(Ve);De&&(E.buttons=xe,E.screen=Ve.coord,E.distance=Ve.distance,E.object=ze,E.index=De.distance,E.dataPosition=De.position,E.dataCoordinate=De.dataCoordinate,E.data=De,_e=!0)}}}}}Oe&&Oe!==E.object&&(Oe.highlight&&Oe.highlight(null),K=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),K=!0),_e=_e||E.object!==Oe,_e&&q.onselect&&q.onselect(E),xe&1&&!(q._prevButtons&1)&&q.onclick&&q.onclick(E),q._prevButtons=xe}})};function ne(){if(q.contextLost)return!0;C.isContextLost()&&(q.contextLost=!0,q.mouseListener.enabled=!1,q.selection.object=null,q.oncontextloss&&q.oncontextloss())}w.addEventListener("webglcontextlost",ne);function oe(){if(!ne()){C.colorMask(!0,!0,!0,!0),C.depthMask(!0),C.disable(C.BLEND),C.enable(C.DEPTH_TEST),C.depthFunc(C.LEQUAL);for(var xe=W.length,Se=Z.length,Ae=0;Ae<Se;++Ae){var Ce=Z[Ae];Ce.shape=X,Ce.begin();for(var Ee=0;Ee<xe;++Ee)if(re[Ee]===Ae){var Oe=W[Ee];Oe.drawPick&&(Oe.pixelRatio=1,Oe.drawPick(ue))}Ce.end()}}}var se=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],me=[se[0].slice(),se[1].slice()];function ce(){if(!ne()){J();var xe=q.camera.tick();ue.view=q.camera.matrix,K=K||xe,V=V||xe,H.pixelRatio=q.pixelRatio,$.pixelRatio=q.pixelRatio;var Se=W.length,Ae=se[0],Ce=se[1];Ae[0]=Ae[1]=Ae[2]=1/0,Ce[0]=Ce[1]=Ce[2]=-1/0;for(var Ee=0;Ee<Se;++Ee){var Oe=W[Ee];Oe.pixelRatio=q.pixelRatio,Oe.axes=q.axes,K=K||!!Oe.dirty,V=V||!!Oe.dirty;var _e=Oe.bounds;if(_e)for(var Re=_e[0],Ve=_e[1],Je=0;Je<3;++Je)Ae[Je]=Math.min(Ae[Je],Re[Je]),Ce[Je]=Math.max(Ce[Je],Ve[Je])}var ze=q.bounds;if(q.autoBounds)for(var Je=0;Je<3;++Je){if(Ce[Je]<Ae[Je])Ae[Je]=-1,Ce[Je]=1;else{Ae[Je]===Ce[Je]&&(Ae[Je]-=1,Ce[Je]+=1);var De=.05*(Ce[Je]-Ae[Je]);Ae[Je]=Ae[Je]-De,Ce[Je]=Ce[Je]+De}ze[0][Je]=Ae[Je],ze[1][Je]=Ce[Je]}for(var je=!1,Je=0;Je<3;++Je)je=je||me[0][Je]!==ze[0][Je]||me[1][Je]!==ze[1][Je],me[0][Je]=ze[0][Je],me[1][Je]=ze[1][Je];if(V=V||je,K=K||je,!!K){if(je){for(var dt=[0,0,0],Ee=0;Ee<3;++Ee)dt[Ee]=A((ze[1][Ee]-ze[0][Ee])/10);H.autoTicks?H.update({bounds:ze,tickSpacing:dt}):H.update({bounds:ze})}var Et=C.drawingBufferWidth,$t=C.drawingBufferHeight;j[0]=Et,j[1]=$t,X[0]=Math.max(Et/q.pixelRatio,1)|0,X[1]=Math.max($t/q.pixelRatio,1)|0,T(q,O);for(var Ee=0;Ee<Se;++Ee){var Oe=W[Ee];Oe.axesBounds=ze,q.clipToBounds&&(Oe.clipBounds=ze)}E.object&&(q.snapToData?$.position=E.dataCoordinate:$.position=E.dataPosition,$.bounds=ze),V&&(V=!1,oe()),q.axesPixels=i(q.axes,ue,Et,$t),q.onrender&&q.onrender(),C.bindFramebuffer(C.FRAMEBUFFER,null),C.viewport(0,0,Et,$t),q.clearRGBA(),C.depthMask(!0),C.colorMask(!0,!0,!0,!0),C.enable(C.DEPTH_TEST),C.depthFunc(C.LEQUAL),C.disable(C.BLEND),C.disable(C.CULL_FACE);var wt=!1;H.enable&&(wt=wt||H.isTransparent(),H.draw(ue)),$.axes=H,E.object&&$.draw(ue),C.disable(C.CULL_FACE);for(var Ee=0;Ee<Se;++Ee){var Oe=W[Ee];Oe.axes=H,Oe.pixelRatio=q.pixelRatio,Oe.isOpaque&&Oe.isOpaque()&&Oe.draw(ue),Oe.isTransparent&&Oe.isTransparent()&&(wt=!0)}if(wt){L.shape=j,L.bind(),C.clear(C.DEPTH_BUFFER_BIT),C.colorMask(!1,!1,!1,!1),C.depthMask(!0),C.depthFunc(C.LESS),H.enable&&H.isTransparent()&&H.drawTransparent(ue);for(var Ee=0;Ee<Se;++Ee){var Oe=W[Ee];Oe.isOpaque&&Oe.isOpaque()&&Oe.draw(ue)}C.enable(C.BLEND),C.blendEquation(C.FUNC_ADD),C.blendFunc(C.ONE,C.ONE_MINUS_SRC_ALPHA),C.colorMask(!0,!0,!0,!0),C.depthMask(!1),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),H.isTransparent()&&H.drawTransparent(ue);for(var Ee=0;Ee<Se;++Ee){var Oe=W[Ee];Oe.isTransparent&&Oe.isTransparent()&&Oe.drawTransparent(ue)}C.bindFramebuffer(C.FRAMEBUFFER,null),C.blendFunc(C.ONE,C.ONE_MINUS_SRC_ALPHA),C.disable(C.DEPTH_TEST),z.bind(),L.color[0].bind(0),z.uniforms.accumBuffer=0,u(C),C.disable(C.BLEND)}K=!1;for(var Ee=0;Ee<Se;++Ee)W[Ee].dirty=!1}}}function pe(){q._stopped||q.contextLost||(ce(),requestAnimationFrame(pe))}return q.enableMouseListeners(),pe(),q.redraw=function(){q._stopped||(K=!0,ce())},q}function T(x,w){var v=x.bounds,C=x.cameraParams,M=C.projection,E=C.model,L=x.gl.drawingBufferWidth,z=x.gl.drawingBufferHeight,O=x.zNear,R=x.zFar,D=x.fovy,H=L/z;w?(d(M,-H,H,-1,1,O,R),C._ortho=!0):(m(M,D,H,O,R),C._ortho=!1);for(var B=0;B<16;++B)E[B]=0;E[15]=1;for(var $=0,B=0;B<3;++B)$=Math.max($,v[1][B]-v[0][B]);for(var B=0;B<3;++B)x.autoScale?E[5*B]=x.aspect[B]/(v[1][B]-v[0][B]):E[5*B]=1/$,x.autoCenter&&(E[12+B]=-E[5*B]*.5*(v[0][B]+v[1][B]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(o,h,y){var t=o("glslify");y.pointVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),y.pointFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),y.pickVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),y.pickFragment=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(o,h,y){var t=o("gl-shader"),a=o("gl-buffer"),i=o("typedarray-pool"),n=o("./lib/shader");h.exports=l;function r(m,d,b,g,_){this.plot=m,this.offsetBuffer=d,this.pickBuffer=b,this.shader=g,this.pickShader=_,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=r.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(m){var d;m=m||{};function b(T,x){return T in m?m[T]:x}this.sizeMin=b("sizeMin",.5),this.sizeMax=b("sizeMax",20),this.color=b("color",[1,0,0,1]).slice(),this.areaRatio=b("areaRatio",1),this.borderColor=b("borderColor",[0,0,0,1]).slice(),this.blend=b("blend",!1);var g=m.positions.length>>>1,_=m.positions instanceof Float32Array,p=m.idToIndex instanceof Int32Array&&m.idToIndex.length>=g,A=m.positions,c=_?A:i.mallocFloat32(A.length),S=p?m.idToIndex:i.mallocInt32(g);if(_||c.set(A),!p)for(c.set(A),d=0;d<g;d++)S[d]=d;this.points=A,this.offsetBuffer.update(c),this.pickBuffer.update(S),_||i.free(c),p||i.free(S),this.pointCount=g,this.pickOffset=0};function u(m,d){var b=0,g=m.length>>>1,_;for(_=0;_<g;_++){var p=m[_*2],A=m[_*2+1];p>=d[0]&&p<=d[2]&&A>=d[1]&&A<=d[3]&&b++}return b}f.unifiedDraw=function(){var m=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0];return function(b){var g=b!==void 0,_=g?this.pickShader:this.shader,p=this.plot.gl,A=this.plot.dataBox;if(this.pointCount===0)return b;var c=A[2]-A[0],S=A[3]-A[1],T=u(this.points,A),x=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(T,.33333)));m[0]=2/c,m[4]=2/S,m[6]=-2*A[0]/c-1,m[7]=-2*A[1]/S-1,this.offsetBuffer.bind(),_.bind(),_.attributes.position.pointer(),_.uniforms.matrix=m,_.uniforms.color=this.color,_.uniforms.borderColor=this.borderColor,_.uniforms.pointCloud=x<5,_.uniforms.pointSize=x,_.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),g&&(d[0]=b&255,d[1]=b>>8&255,d[2]=b>>16&255,d[3]=b>>24&255,this.pickBuffer.bind(),_.attributes.pickId.pointer(p.UNSIGNED_BYTE),_.uniforms.pickOffset=d,this.pickOffset=b);var w=p.getParameter(p.BLEND),v=p.getParameter(p.DITHER);return w&&!this.blend&&p.disable(p.BLEND),v&&p.disable(p.DITHER),p.drawArrays(p.POINTS,0,this.pointCount),w&&!this.blend&&p.enable(p.BLEND),v&&p.enable(p.DITHER),b+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(m,d,b){var g=this.pickOffset,_=this.pointCount;if(b<g||b>=g+_)return null;var p=b-g,A=this.points;return{object:this,pointId:p,dataCoord:[A[2*p],A[2*p+1]]}};function l(m,d){var b=m.gl,g=a(b),_=a(b),p=t(b,n.pointVertex,n.pointFragment),A=t(b,n.pickVertex,n.pickFragment),c=new r(m,g,_,p,A);return c.update(d),m.addObject(c),c}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(o,h,y){h.exports=t;function t(a,i,n,r){var f=i[0],u=i[1],l=i[2],m=i[3],d=n[0],b=n[1],g=n[2],_=n[3],p,A,c,S,T;return A=f*d+u*b+l*g+m*_,A<0&&(A=-A,d=-d,b=-b,g=-g,_=-_),1-A>1e-6?(p=Math.acos(A),c=Math.sin(p),S=Math.sin((1-r)*p)/c,T=Math.sin(r*p)/c):(S=1-r,T=r),a[0]=S*f+T*d,a[1]=S*u+T*b,a[2]=S*l+T*g,a[3]=S*m+T*_,a}},{}],125:[function(o,h,y){h.exports=function(t){return!t&&t!==0?"":t.toString()}},{}],126:[function(o,h,y){var t=o("vectorize-text");h.exports=i;var a={};function i(n,r,f){var u=a[r];if(u||(u=a[r]={}),n in u)return u[n];var l={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};l.triangles=!0;var m=t(n,l);l.triangles=!1;var d=t(n,l),b,g;if(f&&f!==1){for(b=0;b<m.positions.length;++b)for(g=0;g<m.positions[b].length;++g)m.positions[b][g]/=f;for(b=0;b<d.positions.length;++b)for(g=0;g<d.positions[b].length;++g)d.positions[b][g]/=f}var _=[[1/0,1/0],[-1/0,-1/0]],p=d.positions.length;for(b=0;b<p;++b){var A=d.positions[b];for(g=0;g<2;++g)_[0][g]=Math.min(_[0][g],A[g]),_[1][g]=Math.max(_[1][g],A[g])}return u[n]=[m,d,_]}},{"vectorize-text":311}],127:[function(o,h,y){var t=o("gl-shader"),a=o("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),l=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],m={vertex:i,fragment:f,attributes:l},d={vertex:n,fragment:f,attributes:l},b={vertex:r,fragment:f,attributes:l},g={vertex:i,fragment:u,attributes:l},_={vertex:n,fragment:u,attributes:l},p={vertex:r,fragment:u,attributes:l};function A(c,S){var T=t(c,S),x=T.attributes;return x.position.location=0,x.color.location=1,x.glyph.location=2,x.id.location=3,T}y.createPerspective=function(c){return A(c,m)},y.createOrtho=function(c){return A(c,d)},y.createProject=function(c){return A(c,b)},y.createPickPerspective=function(c){return A(c,g)},y.createPickOrtho=function(c){return A(c,_)},y.createPickProject=function(c){return A(c,p)}},{"gl-shader":132,glslify:231}],128:[function(o,h,y){var t=o("is-string-blank"),a=o("gl-buffer"),i=o("gl-vao"),n=o("typedarray-pool"),r=o("gl-mat4/multiply"),f=o("./lib/shaders"),u=o("./lib/glyphs"),l=o("./lib/get-simple-string"),m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];h.exports=re;function d(Q,Z){var K=Q[0],le=Q[1],fe=Q[2],ue=Q[3];return Q[0]=Z[0]*K+Z[4]*le+Z[8]*fe+Z[12]*ue,Q[1]=Z[1]*K+Z[5]*le+Z[9]*fe+Z[13]*ue,Q[2]=Z[2]*K+Z[6]*le+Z[10]*fe+Z[14]*ue,Q[3]=Z[3]*K+Z[7]*le+Z[11]*fe+Z[15]*ue,Q}function b(Q,Z,K,le){return d(le,le),d(le,le),d(le,le)}function g(Q,Z){this.index=Q,this.dataCoordinate=this.position=Z}function _(Q){return Q===!0||Q>1?1:Q}function p(Q,Z,K,le,fe,ue,V,j,ee,q,X,J){this.gl=Q,this.pixelRatio=1,this.shader=Z,this.orthoShader=K,this.projectShader=le,this.pointBuffer=fe,this.colorBuffer=ue,this.glyphBuffer=V,this.idBuffer=j,this.vao=ee,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=q,this.pickOrthoShader=X,this.pickProjectShader=J,this.points=[],this._selectResult=new g(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var A=p.prototype;A.pickSlots=1,A.setPickBase=function(Q){this.pickId=Q},A.isTransparent=function(){if(this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&this.projectHasAlpha)return!0;return!1},A.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&!this.projectHasAlpha)return!0;return!1};var c=[0,0],S=[0,0,0],T=[0,0,0],x=[0,0,0,1],w=[0,0,0,1],v=m.slice(),C=[0,0,0],M=[[0,0,0],[0,0,0]];function E(Q){return Q[0]=Q[1]=Q[2]=0,Q}function L(Q,Z){return Q[0]=Z[0],Q[1]=Z[1],Q[2]=Z[2],Q[3]=1,Q}function z(Q,Z,K,le){return Q[0]=Z[0],Q[1]=Z[1],Q[2]=Z[2],Q[K]=le,Q}function O(Q){for(var Z=M,K=0;K<2;++K)for(var le=0;le<3;++le)Z[K][le]=Math.max(Math.min(Q[K][le],1e8),-1e8);return Z}function R(Q,Z,K,le){var fe=Z.axesProject,ue=Z.gl,V=Q.uniforms,j=K.model||m,ee=K.view||m,q=K.projection||m,X=Z.axesBounds,J=O(Z.clipBounds),ie;Z.axes&&Z.axes.lastCubeProps?ie=Z.axes.lastCubeProps.axis:ie=[1,1,1],c[0]=2/ue.drawingBufferWidth,c[1]=2/ue.drawingBufferHeight,Q.bind(),V.view=ee,V.projection=q,V.screenSize=c,V.highlightId=Z.highlightId,V.highlightScale=Z.highlightScale,V.clipBounds=J,V.pickGroup=Z.pickId/255,V.pixelRatio=le;for(var ne=0;ne<3;++ne)if(!!fe[ne]){V.scale=Z.projectScale[ne],V.opacity=Z.projectOpacity[ne];for(var oe=v,se=0;se<16;++se)oe[se]=0;for(var se=0;se<4;++se)oe[5*se]=1;oe[5*ne]=0,ie[ne]<0?oe[12+ne]=X[0][ne]:oe[12+ne]=X[1][ne],r(oe,j,oe),V.model=oe;var me=(ne+1)%3,ce=(ne+2)%3,pe=E(S),xe=E(T);pe[me]=1,xe[ce]=1;var Se=b(q,ee,j,L(x,pe)),Ae=b(q,ee,j,L(w,xe));if(Math.abs(Se[1])>Math.abs(Ae[1])){var Ce=Se;Se=Ae,Ae=Ce,Ce=pe,pe=xe,xe=Ce;var Ee=me;me=ce,ce=Ee}Se[0]<0&&(pe[me]=-1),Ae[1]>0&&(xe[ce]=-1);for(var Oe=0,_e=0,se=0;se<4;++se)Oe+=Math.pow(j[4*me+se],2),_e+=Math.pow(j[4*ce+se],2);pe[me]/=Math.sqrt(Oe),xe[ce]/=Math.sqrt(_e),V.axes[0]=pe,V.axes[1]=xe,V.fragClipBounds[0]=z(C,J[0],ne,-1e8),V.fragClipBounds[1]=z(C,J[1],ne,1e8),Z.vao.bind(),Z.vao.draw(ue.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(ue.lineWidth(Z.lineWidth*le),Z.vao.draw(ue.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}var D=[-1e8,-1e8,-1e8],H=[1e8,1e8,1e8],B=[D,H];function $(Q,Z,K,le,fe,ue,V){var j=K.gl;if((ue===K.projectHasAlpha||V)&&R(Z,K,le,fe),ue===K.hasAlpha||V){Q.bind();var ee=Q.uniforms;ee.model=le.model||m,ee.view=le.view||m,ee.projection=le.projection||m,c[0]=2/j.drawingBufferWidth,c[1]=2/j.drawingBufferHeight,ee.screenSize=c,ee.highlightId=K.highlightId,ee.highlightScale=K.highlightScale,ee.fragClipBounds=B,ee.clipBounds=K.axes.bounds,ee.opacity=K.opacity,ee.pickGroup=K.pickId/255,ee.pixelRatio=fe,K.vao.bind(),K.vao.draw(j.TRIANGLES,K.vertexCount),K.lineWidth>0&&(j.lineWidth(K.lineWidth*fe),K.vao.draw(j.LINES,K.lineVertexCount,K.vertexCount)),K.vao.unbind()}}A.draw=function(Q){var Z=this.useOrtho?this.orthoShader:this.shader;$(Z,this.projectShader,this,Q,this.pixelRatio,!1,!1)},A.drawTransparent=function(Q){var Z=this.useOrtho?this.orthoShader:this.shader;$(Z,this.projectShader,this,Q,this.pixelRatio,!0,!1)},A.drawPick=function(Q){var Z=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;$(Z,this.pickProjectShader,this,Q,1,!0,!0)},A.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;var Z=Q.value[2]+(Q.value[1]<<8)+(Q.value[0]<<16);if(Z>=this.pointCount||Z<0)return null;var K=this.points[Z],le=this._selectResult;le.index=Z;for(var fe=0;fe<3;++fe)le.position[fe]=le.dataCoordinate[fe]=K[fe];return le},A.highlight=function(Q){if(!Q)this.highlightId=[1,1,1,1];else{var Z=Q.index,K=Z&255,le=Z>>8&255,fe=Z>>16&255;this.highlightId=[K/255,le/255,fe/255,0]}};function W(Q,Z,K,le){var fe;Array.isArray(Q)?Z<Q.length?fe=Q[Z]:fe=void 0:fe=Q,fe=l(fe);var ue=!0;t(fe)&&(fe="\u25BC",ue=!1);var V=u(fe,K,le);return{mesh:V[0],lines:V[1],bounds:V[2],visible:ue}}A.update=function(Q){if(Q=Q||{},"perspective"in Q&&(this.useOrtho=!Q.perspective),"orthographic"in Q&&(this.useOrtho=!!Q.orthographic),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"project"in Q)if(Array.isArray(Q.project))this.axesProject=Q.project;else{var Z=!!Q.project;this.axesProject=[Z,Z,Z]}if("projectScale"in Q)if(Array.isArray(Q.projectScale))this.projectScale=Q.projectScale.slice();else{var K=+Q.projectScale;this.projectScale=[K,K,K]}if(this.projectHasAlpha=!1,"projectOpacity"in Q){if(Array.isArray(Q.projectOpacity))this.projectOpacity=Q.projectOpacity.slice();else{var K=+Q.projectOpacity;this.projectOpacity=[K,K,K]}for(var le=0;le<3;++le)this.projectOpacity[le]=_(this.projectOpacity[le]),this.projectOpacity[le]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Q&&(this.opacity=_(Q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var fe=Q.position,ue=Q.font||"normal",V=Q.alignment||[0,0],j,ee;if(V.length===2)j=V[0],ee=V[1];else{j=[],ee=[];for(var le=0;le<V.length;++le)j[le]=V[le][0],ee[le]=V[le][1]}var q=[1/0,1/0,1/0],X=[-1/0,-1/0,-1/0],J=Q.glyph,ie=Q.color,ne=Q.size,oe=Q.angle,se=Q.lineColor,me=-1,ce=0,pe=0,xe=0;if(fe.length){xe=fe.length;e:for(var le=0;le<xe;++le){for(var Se=fe[le],Ae=0;Ae<3;++Ae)if(isNaN(Se[Ae])||!isFinite(Se[Ae]))continue e;var Ce=W(J,le,ue,this.pixelRatio),Ee=Ce.mesh,Oe=Ce.lines,_e=Ce.bounds;ce+=Ee.cells.length*3,pe+=Oe.edges.length*2}}var Re=ce+pe,Ve=n.mallocFloat(3*Re),Je=n.mallocFloat(4*Re),ze=n.mallocFloat(2*Re),De=n.mallocUint32(Re);if(Re>0){var je=0,dt=ce,Et=[0,0,0,1],$t=[0,0,0,1],wt=Array.isArray(ie)&&Array.isArray(ie[0]),Ot=Array.isArray(se)&&Array.isArray(se[0]);e:for(var le=0;le<xe;++le){me+=1;for(var Se=fe[le],Ae=0;Ae<3;++Ae){if(isNaN(Se[Ae])||!isFinite(Se[Ae]))continue e;X[Ae]=Math.max(X[Ae],Se[Ae]),q[Ae]=Math.min(q[Ae],Se[Ae])}var Ce=W(J,le,ue,this.pixelRatio),Ee=Ce.mesh,Oe=Ce.lines,_e=Ce.bounds,Vt=Ce.visible;if(!Vt)Et=[1,1,1,0];else if(Array.isArray(ie)){var kt;if(wt?le<ie.length?kt=ie[le]:kt=[0,0,0,0]:kt=ie,kt.length===3){for(var Ae=0;Ae<3;++Ae)Et[Ae]=kt[Ae];Et[3]=1}else if(kt.length===4){for(var Ae=0;Ae<4;++Ae)Et[Ae]=kt[Ae];!this.hasAlpha&&kt[3]<1&&(this.hasAlpha=!0)}}else Et[0]=Et[1]=Et[2]=0,Et[3]=1;if(!Vt)$t=[1,1,1,0];else if(Array.isArray(se)){var kt;if(Ot?le<se.length?kt=se[le]:kt=[0,0,0,0]:kt=se,kt.length===3){for(var Ae=0;Ae<3;++Ae)$t[Ae]=kt[Ae];$t[Ae]=1}else if(kt.length===4){for(var Ae=0;Ae<4;++Ae)$t[Ae]=kt[Ae];!this.hasAlpha&&kt[3]<1&&(this.hasAlpha=!0)}}else $t[0]=$t[1]=$t[2]=0,$t[3]=1;var St=.5;Vt?Array.isArray(ne)?le<ne.length?St=+ne[le]:St=12:ne?St=+ne:this.useOrtho&&(St=12):St=0;var ot=0;Array.isArray(oe)?le<oe.length?ot=+oe[le]:ot=0:oe&&(ot=+oe);for(var ht=Math.cos(ot),Ke=Math.sin(ot),Se=fe[le],Ae=0;Ae<3;++Ae)X[Ae]=Math.max(X[Ae],Se[Ae]),q[Ae]=Math.min(q[Ae],Se[Ae]);var Pe=j,We=ee,Pe=0;Array.isArray(j)?le<j.length?Pe=j[le]:Pe=0:j&&(Pe=j);var We=0;Array.isArray(ee)?le<ee.length?We=ee[le]:We=0:ee&&(We=ee),Pe*=Pe>0?1-_e[0][0]:Pe<0?1+_e[1][0]:1,We*=We>0?1-_e[0][1]:We<0?1+_e[1][1]:1;for(var Qe=[Pe,We],rr=Ee.cells||[],Ut=Ee.positions||[],Ae=0;Ae<rr.length;++Ae)for(var ut=rr[Ae],It=0;It<3;++It){for(var Tt=0;Tt<3;++Tt)Ve[3*je+Tt]=Se[Tt];for(var Tt=0;Tt<4;++Tt)Je[4*je+Tt]=Et[Tt];De[je]=me;var Bt=Ut[ut[It]];ze[2*je]=St*(ht*Bt[0]-Ke*Bt[1]+Qe[0]),ze[2*je+1]=St*(Ke*Bt[0]+ht*Bt[1]+Qe[1]),je+=1}for(var rr=Oe.edges,Ut=Oe.positions,Ae=0;Ae<rr.length;++Ae)for(var ut=rr[Ae],It=0;It<2;++It){for(var Tt=0;Tt<3;++Tt)Ve[3*dt+Tt]=Se[Tt];for(var Tt=0;Tt<4;++Tt)Je[4*dt+Tt]=$t[Tt];De[dt]=me;var Bt=Ut[ut[It]];ze[2*dt]=St*(ht*Bt[0]-Ke*Bt[1]+Qe[0]),ze[2*dt+1]=St*(Ke*Bt[0]+ht*Bt[1]+Qe[1]),dt+=1}}}this.bounds=[q,X],this.points=fe,this.pointCount=fe.length,this.vertexCount=ce,this.lineVertexCount=pe,this.pointBuffer.update(Ve),this.colorBuffer.update(Je),this.glyphBuffer.update(ze),this.idBuffer.update(De),n.free(Ve),n.free(Je),n.free(ze),n.free(De)},A.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function re(Q){var Z=Q.gl,K=f.createPerspective(Z),le=f.createOrtho(Z),fe=f.createProject(Z),ue=f.createPickPerspective(Z),V=f.createPickOrtho(Z),j=f.createPickProject(Z),ee=a(Z),q=a(Z),X=a(Z),J=a(Z),ie=i(Z,[{buffer:ee,size:3,type:Z.FLOAT},{buffer:q,size:4,type:Z.FLOAT},{buffer:X,size:2,type:Z.FLOAT},{buffer:J,size:4,type:Z.UNSIGNED_BYTE,normalized:!0}]),ne=new p(Z,K,le,fe,ee,q,X,J,ie,ue,V,j);return ne.update(Q),ne}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(o,h,y){var t=o("glslify");y.boxVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),y.boxFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(o,h,y){var t=o("gl-shader"),a=o("gl-buffer"),i=o("./lib/shaders");h.exports=f;function n(u,l,m){this.plot=u,this.boxBuffer=l,this.boxShader=m,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var r=n.prototype;r.draw=function(){if(!!this.enabled){var u=this.plot,l=this.selectBox,m=this.borderWidth;this.innerFill;var d=this.innerColor;this.outerFill;var b=this.outerColor,g=this.borderColor,_=u.box,p=u.screenBox,A=u.dataBox,c=u.viewBox,S=u.pixelRatio,T=(l[0]-A[0])*(c[2]-c[0])/(A[2]-A[0])+c[0],x=(l[1]-A[1])*(c[3]-c[1])/(A[3]-A[1])+c[1],w=(l[2]-A[0])*(c[2]-c[0])/(A[2]-A[0])+c[0],v=(l[3]-A[1])*(c[3]-c[1])/(A[3]-A[1])+c[1];if(T=Math.max(T,c[0]),x=Math.max(x,c[1]),w=Math.min(w,c[2]),v=Math.min(v,c[3]),!(w<T||v<x)){_.bind();var C=p[2]-p[0],M=p[3]-p[1];if(this.outerFill&&(_.drawBox(0,0,C,x,b),_.drawBox(0,x,T,v,b),_.drawBox(0,v,C,M,b),_.drawBox(w,x,C,v,b)),this.innerFill&&_.drawBox(T,x,w,v,d),m>0){var E=m*S;_.drawBox(T-E,x-E,w+E,x+E,g),_.drawBox(T-E,v-E,w+E,v+E,g),_.drawBox(T-E,x-E,T+E,v+E,g),_.drawBox(w-E,x-E,w+E,v+E,g)}}}},r.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(u,l){var m=u.gl,d=a(m,[0,0,0,1,1,0,1,1]),b=t(m,i.boxVertex,i.boxFragment),g=new n(u,d,b);return g.update(l),u.addOverlay(g),g}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(o,h,y){h.exports=m;var t=o("gl-fbo"),a=o("typedarray-pool"),i=o("ndarray"),n=o("bit-twiddle").nextPow2,r=function(d,b,g){for(var _=1e8,p=-1,A=-1,c=d.shape[0],S=d.shape[1],T=0;T<c;T++)for(var x=0;x<S;x++){var w=d.get(T,x,0),v=d.get(T,x,1),C=d.get(T,x,2),M=d.get(T,x,3);if(w<255||v<255||C<255||M<255){var E=b-T,L=g-x,z=E*E+L*L;z<_&&(_=z,p=T,A=x)}}return[p,A,_]};function f(d,b,g,_,p){this.coord=[d,b],this.id=g,this.value=_,this.distance=p}function u(d,b,g){this.gl=d,this.fbo=b,this.buffer=g,this._readTimeout=null;var _=this;this._readCallback=function(){!_.gl||(b.bind(),d.readPixels(0,0,b.shape[0],b.shape[1],d.RGBA,d.UNSIGNED_BYTE,_.buffer),_._readTimeout=null)}}var l=u.prototype;Object.defineProperty(l,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(d){if(!!this.gl){this.fbo.shape=d;var b=this.fbo.shape[0],g=this.fbo.shape[1];if(g*b*4>this.buffer.length){a.free(this.buffer);for(var _=this.buffer=a.mallocUint8(n(g*b*4)),p=0;p<g*b*4;++p)_[p]=255}return d}}}),l.begin=function(){var d=this.gl;this.shape,d&&(this.fbo.bind(),d.clearColor(1,1,1,1),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT))},l.end=function(){var d=this.gl;!d||(d.bindFramebuffer(d.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},l.query=function(d,b,g){if(!this.gl)return null;var _=this.fbo.shape.slice();d=d|0,b=b|0,typeof g!="number"&&(g=1);var p=Math.min(Math.max(d-g,0),_[0])|0,A=Math.min(Math.max(d+g,0),_[0])|0,c=Math.min(Math.max(b-g,0),_[1])|0,S=Math.min(Math.max(b+g,0),_[1])|0;if(A<=p||S<=c)return null;var T=[A-p,S-c],x=i(this.buffer,[T[0],T[1],4],[4,_[0]*4,1],4*(p+_[0]*c)),w=r(x.hi(T[0],T[1],1),g,g),v=w[0],C=w[1];if(v<0||Math.pow(this.radius,2)<w[2])return null;var M=x.get(v,C,0),E=x.get(v,C,1),L=x.get(v,C,2),z=x.get(v,C,3);return new f(v+p|0,C+c|0,M,[E,L,z],Math.sqrt(w[2]))},l.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function m(d,b){var g=b[0],_=b[1],p={},A=t(d,g,_,p),c=a.mallocUint8(g*_*4);return new u(d,A,c)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(o,h,y){var t=o("./lib/create-uniforms"),a=o("./lib/create-attributes"),i=o("./lib/reflect"),n=o("./lib/shader-cache"),r=o("./lib/runtime-reflect"),f=o("./lib/GLError");function u(b){this.gl=b,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var l=u.prototype;l.bind=function(){this.program||this._relink();var b,g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),_=this.gl.lastAttribCount;if(g>_)for(b=_;b<g;b++)this.gl.enableVertexAttribArray(b);else if(_>g)for(b=g;b<_;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},l.dispose=function(){for(var b=this.gl.lastAttribCount,g=0;g<b;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function m(b,g){return b.name<g.name?-1:1}l.update=function(b,g,_,p){if(!g||arguments.length===1){var A=b;b=A.vertex,g=A.fragment,_=A.uniforms,p=A.attributes}var c=this,S=c.gl,T=c._vref;c._vref=n.shader(S,S.VERTEX_SHADER,b),T&&T.dispose(),c.vertShader=c._vref.shader;var x=this._fref;if(c._fref=n.shader(S,S.FRAGMENT_SHADER,g),x&&x.dispose(),c.fragShader=c._fref.shader,!_||!p){var w=S.createProgram();if(S.attachShader(w,c.fragShader),S.attachShader(w,c.vertShader),S.linkProgram(w),!S.getProgramParameter(w,S.LINK_STATUS)){var v=S.getProgramInfoLog(w);throw new f(v,"Error linking program:"+v)}_=_||r.uniforms(S,w),p=p||r.attributes(S,w),S.deleteProgram(w)}p=p.slice(),p.sort(m);var C=[],M=[],E=[],L;for(L=0;L<p.length;++L){var z=p[L];if(z.type.indexOf("mat")>=0){for(var O=z.type.charAt(z.type.length-1)|0,R=new Array(O),D=0;D<O;++D)R[D]=E.length,M.push(z.name+"["+D+"]"),typeof z.location=="number"?E.push(z.location+D):Array.isArray(z.location)&&z.location.length===O&&typeof z.location[D]=="number"?E.push(z.location[D]|0):E.push(-1);C.push({name:z.name,type:z.type,locations:R})}else C.push({name:z.name,type:z.type,locations:[E.length]}),M.push(z.name),typeof z.location=="number"?E.push(z.location|0):E.push(-1)}var H=0;for(L=0;L<E.length;++L)if(E[L]<0){for(;E.indexOf(H)>=0;)H+=1;E[L]=H}var B=new Array(_.length);function $(){c.program=n.program(S,c._vref,c._fref,M,E);for(var W=0;W<_.length;++W)B[W]=S.getUniformLocation(c.program,_[W].name)}$(),c._relink=$,c.types={uniforms:i(_),attributes:i(p)},c.attributes=a(S,c,C,E),Object.defineProperty(c,"uniforms",t(S,c,_,B))};function d(b,g,_,p,A){var c=new u(b);return c.update(g,_,p,A),c}h.exports=d},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(o,h,y){function t(a,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=a||"",this.message="gl-shader: "+(i||a||"")+(n?`
`+n:""),this.stack=new Error().stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,h.exports=t},{}],134:[function(o,h,y){h.exports=u;var t=o("./GLError");function a(l,m,d,b,g,_){this._gl=l,this._wrapper=m,this._index=d,this._locations=b,this._dimension=g,this._constFunc=_}var i=a.prototype;i.pointer=function(m,d,b,g){var _=this,p=_._gl,A=_._locations[_._index];p.vertexAttribPointer(A,_._dimension,m||p.FLOAT,!!d,b||0,g||0),p.enableVertexAttribArray(A)},i.set=function(l,m,d,b){return this._constFunc(this._locations[this._index],l,m,d,b)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(l){return l!==this._locations[this._index]&&(this._locations[this._index]=l|0,this._wrapper.program=null),l|0}});var n=[function(l,m,d){return d.length===void 0?l.vertexAttrib1f(m,d):l.vertexAttrib1fv(m,d)},function(l,m,d,b){return d.length===void 0?l.vertexAttrib2f(m,d,b):l.vertexAttrib2fv(m,d)},function(l,m,d,b,g){return d.length===void 0?l.vertexAttrib3f(m,d,b,g):l.vertexAttrib3fv(m,d)},function(l,m,d,b,g,_){return d.length===void 0?l.vertexAttrib4f(m,d,b,g,_):l.vertexAttrib4fv(m,d)}];function r(l,m,d,b,g,_,p){var A=n[g],c=new a(l,m,d,b,g,A);Object.defineProperty(_,p,{set:function(S){return l.disableVertexAttribArray(b[d]),A(l,b[d],S),S},get:function(){return c},enumerable:!0})}function f(l,m,d,b,g,_,p){for(var A=new Array(g),c=new Array(g),S=0;S<g;++S)r(l,m,d[S],b,g,A,S),c[S]=A[S];Object.defineProperty(A,"location",{set:function(w){if(Array.isArray(w))for(var v=0;v<g;++v)c[v].location=w[v];else for(var v=0;v<g;++v)c[v].location=w+v;return w},get:function(){for(var w=new Array(g),v=0;v<g;++v)w[v]=b[d[v]];return w},enumerable:!0}),A.pointer=function(w,v,C,M){w=w||l.FLOAT,v=!!v,C=C||g*g,M=M||0;for(var E=0;E<g;++E){var L=b[d[E]];l.vertexAttribPointer(L,g,w,v,C,M+E*g),l.enableVertexAttribArray(L)}};var T=new Array(g),x=l["vertexAttrib"+g+"fv"];Object.defineProperty(_,p,{set:function(w){for(var v=0;v<g;++v){var C=b[d[v]];if(l.disableVertexAttribArray(C),Array.isArray(w[0]))x.call(l,C,w[v]);else{for(var M=0;M<g;++M)T[M]=w[g*v+M];x.call(l,C,T)}}return w},get:function(){return A},enumerable:!0})}function u(l,m,d,b){for(var g={},_=0,p=d.length;_<p;++_){var A=d[_],c=A.name,S=A.type,T=A.locations;switch(S){case"bool":case"int":case"float":r(l,m,T[0],b,1,g,c);break;default:if(S.indexOf("vec")>=0){var x=S.charCodeAt(S.length-1)-48;if(x<2||x>4)throw new t("","Invalid data type for attribute "+c+": "+S);r(l,m,T[0],b,x,g,c)}else if(S.indexOf("mat")>=0){var x=S.charCodeAt(S.length-1)-48;if(x<2||x>4)throw new t("","Invalid data type for attribute "+c+": "+S);f(l,m,T,b,x,g,c)}else throw new t("","Unknown data type for attribute "+c+": "+S);break}}return g}},{"./GLError":133}],135:[function(o,h,y){var t=o("./reflect"),a=o("./GLError");h.exports=r;function i(f){return function(){return f}}function n(f,u){for(var l=new Array(f),m=0;m<f;++m)l[m]=u;return l}function r(f,u,l,m){function d(S){return function(T,x,w){return T.getUniform(x.program,w[S])}}function b(S){return function(x){for(var w=g("",S),v=0;v<w.length;++v){var C=w[v],M=C[0],E=C[1];if(m[E]){var L=x;if(typeof M=="string"&&(M.indexOf(".")===0||M.indexOf("[")===0)){var z=M;if(M.indexOf(".")===0&&(z=M.slice(1)),z.indexOf("]")===z.length-1){var O=z.indexOf("["),R=z.slice(0,O),D=z.slice(O+1,z.length-1);L=R?x[R][D]:x[D]}else L=x[z]}var H=l[E].type,B;switch(H){case"bool":case"int":case"sampler2D":case"samplerCube":f.uniform1i(m[E],L);break;case"float":f.uniform1f(m[E],L);break;default:var $=H.indexOf("vec");if(0<=$&&$<=1&&H.length===4+$){if(B=H.charCodeAt(H.length-1)-48,B<2||B>4)throw new a("","Invalid data type");switch(H.charAt(0)){case"b":case"i":f["uniform"+B+"iv"](m[E],L);break;case"v":f["uniform"+B+"fv"](m[E],L);break;default:throw new a("","Unrecognized data type for vector "+name+": "+H)}}else if(H.indexOf("mat")===0&&H.length===4){if(B=H.charCodeAt(H.length-1)-48,B<2||B>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+H);f["uniformMatrix"+B+"fv"](m[E],!1,L);break}else throw new a("","Unknown uniform data type for "+name+": "+H)}}}}}function g(S,T){if(typeof T!="object")return[[S,T]];var x=[];for(var w in T){var v=T[w],C=S;parseInt(w)+""===w?C+="["+w+"]":C+="."+w,typeof v=="object"?x.push.apply(x,g(C,v)):x.push([C,v])}return x}function _(S){switch(S){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var T=S.indexOf("vec");if(0<=T&&T<=1&&S.length===4+T){var x=S.charCodeAt(S.length-1)-48;if(x<2||x>4)throw new a("","Invalid data type");return S.charAt(0)==="b"?n(x,!1):n(x,0)}else if(S.indexOf("mat")===0&&S.length===4){var x=S.charCodeAt(S.length-1)-48;if(x<2||x>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+S);return n(x*x,0)}else throw new a("","Unknown uniform data type for "+name+": "+S)}}function p(S,T,x){if(typeof x=="object"){var w=A(x);Object.defineProperty(S,T,{get:i(w),set:b(x),enumerable:!0,configurable:!1})}else m[x]?Object.defineProperty(S,T,{get:d(x),set:b(x),enumerable:!0,configurable:!1}):S[T]=_(l[x].type)}function A(S){var T;if(Array.isArray(S)){T=new Array(S.length);for(var x=0;x<S.length;++x)p(T,x,S[x])}else{T={};for(var w in S)p(T,w,S[w])}return T}var c=t(l,!0);return{get:i(A(c)),set:b(c),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(o,h,y){h.exports=t;function t(a,i){for(var n={},r=0;r<a.length;++r)for(var f=a[r].name,u=f.split("."),l=n,m=0;m<u.length;++m){var d=u[m].split("[");if(d.length>1){d[0]in l||(l[d[0]]=[]),l=l[d[0]];for(var b=1;b<d.length;++b){var g=parseInt(d[b]);b<d.length-1||m<u.length-1?(g in l||(b<d.length-1?l[g]=[]:l[g]={}),l=l[g]):i?l[g]=r:l[g]=a[r].type}}else m<u.length-1?(d[0]in l||(l[d[0]]={}),l=l[d[0]]):i?l[d[0]]=r:l[d[0]]=a[r].type}return n}},{}],137:[function(o,h,y){y.uniforms=n,y.attributes=r;var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function i(f,u){if(!a){var l=Object.keys(t);a={};for(var m=0;m<l.length;++m){var d=l[m];a[f[d]]=t[d]}}return a[u]}function n(f,u){for(var l=f.getProgramParameter(u,f.ACTIVE_UNIFORMS),m=[],d=0;d<l;++d){var b=f.getActiveUniform(u,d);if(b){var g=i(f,b.type);if(b.size>1)for(var _=0;_<b.size;++_)m.push({name:b.name.replace("[0]","["+_+"]"),type:g});else m.push({name:b.name,type:g})}}return m}function r(f,u){for(var l=f.getProgramParameter(u,f.ACTIVE_ATTRIBUTES),m=[],d=0;d<l;++d){var b=f.getActiveAttrib(u,d);b&&m.push({name:b.name,type:i(f,b.type)})}return m}},{}],138:[function(o,h,y){y.shader=g,y.program=_;var t=o("./GLError"),a=o("gl-format-compiler-error"),i=typeof WeakMap=="undefined"?o("weakmap-shim"):WeakMap,n=new i,r=0;function f(p,A,c,S,T,x,w){this.id=p,this.src=A,this.type=c,this.shader=S,this.count=x,this.programs=[],this.cache=w}f.prototype.dispose=function(){if(--this.count===0){for(var p=this.cache,A=p.gl,c=this.programs,S=0,T=c.length;S<T;++S){var x=p.programs[c[S]];x&&(delete p.programs[S],A.deleteProgram(x))}A.deleteShader(this.shader),delete p.shaders[this.type===A.FRAGMENT_SHADER|0][this.src]}};function u(p){this.gl=p,this.shaders=[{},{}],this.programs={}}var l=u.prototype;function m(p,A,c){var S=p.createShader(A);if(p.shaderSource(S,c),p.compileShader(S),!p.getShaderParameter(S,p.COMPILE_STATUS)){var T=p.getShaderInfoLog(S);try{var x=a(T,c,A)}catch(w){throw console.warn("Failed to format compiler error: "+w),new t(T,`Error compiling shader:
`+T)}throw new t(T,x.short,x.long)}return S}l.getShaderReference=function(p,A){var c=this.gl,S=this.shaders[p===c.FRAGMENT_SHADER|0],T=S[A];if(!T||!c.isShader(T.shader)){var x=m(c,p,A);T=S[A]=new f(r++,A,p,x,[],1,this)}else T.count+=1;return T};function d(p,A,c,S,T){var x=p.createProgram();p.attachShader(x,A),p.attachShader(x,c);for(var w=0;w<S.length;++w)p.bindAttribLocation(x,T[w],S[w]);if(p.linkProgram(x),!p.getProgramParameter(x,p.LINK_STATUS)){var v=p.getProgramInfoLog(x);throw new t(v,"Error linking program: "+v)}return x}l.getProgram=function(p,A,c,S){var T=[p.id,A.id,c.join(":"),S.join(":")].join("@"),x=this.programs[T];return(!x||!this.gl.isProgram(x))&&(this.programs[T]=x=d(this.gl,p.shader,A.shader,c,S),p.programs.push(T),A.programs.push(T)),x};function b(p){var A=n.get(p);return A||(A=new u(p),n.set(p,A)),A}function g(p,A,c){return b(p).getShaderReference(A,c)}function _(p,A,c,S,T){return b(p).getProgram(A,c,S,T)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(o,h,y){h.exports=i;function t(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=t.prototype;a.update=function(n){n=n||{},this.enable=(n.enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var n=this.enable,r=this.width,f=this.color,u=this.center,l=this.plot,m=l.line,d=l.dataBox,b=l.viewBox;if(m.bind(),d[0]<=u[0]&&u[0]<=d[2]&&d[1]<=u[1]&&u[1]<=d[3]){var g=b[0]+(u[0]-d[0])/(d[2]-d[0])*(b[2]-b[0]),_=b[1]+(u[1]-d[1])/(d[3]-d[1])*(b[3]-b[1]);n[0]&&m.drawLine(g,_,b[0],_,r[0],f[0]),n[1]&&m.drawLine(g,_,g,b[1],r[1],f[1]),n[2]&&m.drawLine(g,_,b[2],_,r[2],f[2]),n[3]&&m.drawLine(g,_,g,b[3],r[3],f[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function i(n,r){var f=new t(n);return f.update(r),n.addOverlay(f),f}},{}],140:[function(o,h,y){var t=o("glslify"),a=o("gl-shader"),i=t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),n=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);h.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(o,h,y){var t=o("gl-buffer"),a=o("gl-vao"),i=o("./shaders/index");h.exports=d;var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(b,g,_,p){this.gl=b,this.buffer=g,this.vao=_,this.shader=p,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=r.prototype,u=[0,0,0],l=[0,0,0],m=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(b){},f.draw=function(b){var g=this.gl,_=this.vao,p=this.shader;_.bind(),p.bind();var A=b.model||n,c=b.view||n,S=b.projection||n,T;this.axes&&(T=this.axes.lastCubeProps.axis);for(var x=u,w=l,v=0;v<3;++v)T&&T[v]<0?(x[v]=this.bounds[0][v],w[v]=this.bounds[1][v]):(x[v]=this.bounds[1][v],w[v]=this.bounds[0][v]);m[0]=g.drawingBufferWidth,m[1]=g.drawingBufferHeight,p.uniforms.model=A,p.uniforms.view=c,p.uniforms.projection=S,p.uniforms.coordinates=[this.position,x,w],p.uniforms.colors=this.colors,p.uniforms.screenShape=m;for(var v=0;v<3;++v)p.uniforms.lineWidth=this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(_.draw(g.TRIANGLES,6,6*v),this.drawSides[v]&&_.draw(g.TRIANGLES,12,18+12*v));_.unbind()},f.update=function(b){!b||("bounds"in b&&(this.bounds=b.bounds),"position"in b&&(this.position=b.position),"lineWidth"in b&&(this.lineWidth=b.lineWidth),"colors"in b&&(this.colors=b.colors),"enabled"in b&&(this.enabled=b.enabled),"drawSides"in b&&(this.drawSides=b.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function d(b,g){var _=[];function p(x,w,v,C,M,E){var L=[x,w,v,0,0,0,1];L[C+3]=1,L[C]=M,_.push.apply(_,L),L[6]=-1,_.push.apply(_,L),L[C]=E,_.push.apply(_,L),_.push.apply(_,L),L[6]=1,_.push.apply(_,L),L[C]=M,_.push.apply(_,L)}p(0,0,0,0,0,1),p(0,0,0,1,0,1),p(0,0,0,2,0,1),p(1,0,0,1,-1,1),p(1,0,0,2,-1,1),p(0,1,0,0,-1,1),p(0,1,0,2,-1,1),p(0,0,1,0,-1,1),p(0,0,1,1,-1,1);var A=t(b,_),c=a(b,[{type:b.FLOAT,buffer:A,size:3,offset:0,stride:28},{type:b.FLOAT,buffer:A,size:3,offset:12,stride:28},{type:b.FLOAT,buffer:A,size:1,offset:24,stride:28}]),S=i(b);S.attributes.position.location=0,S.attributes.color.location=1,S.attributes.weight.location=2;var T=new r(b,A,c,S);return T.update(g),T}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(o,h,y){var t=o("glslify"),a=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);y.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},y.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(o,h,y){var t=o("gl-vec3"),a=o("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(_,p,A,c){for(var S=_.points,T=_.velocities,x=_.divergences,w=[],v=[],C=[],M=[],E=[],L=[],z=0,O=0,R=a.create(),D=a.create(),H=8,B=0;B<S.length;B++){var $=S[B],W=T[B],re=x[B];p===0&&(re=A*.05),O=t.length(W)/c,R=a.create(),t.copy(R,W),R[3]=re;for(var Q=0;Q<H;Q++)E[Q]=[$[0],$[1],$[2],Q];if(M.length>0)for(var Q=0;Q<H;Q++){var Z=(Q+1)%H;w.push(M[Q],E[Q],E[Z],E[Z],M[Z],M[Q]),C.push(D,R,R,R,D,D),L.push(z,O,O,O,z,z);var K=w.length;v.push([K-6,K-5,K-4],[K-3,K-2,K-1])}var le=M;M=E,E=le;var fe=D;D=R,R=fe;var ue=z;z=O,O=ue}return{positions:w,cells:v,vectors:C,vertexIntensity:L}},r=function(_,p,A,c){for(var S=0,T=0;T<_.length;T++)for(var x=_[T].velocities,w=0;w<x.length;w++)S=Math.max(S,t.length(x[w]));for(var v=_.map(function(B){return n(B,A,c,S)}),C=[],M=[],E=[],L=[],T=0;T<v.length;T++){var z=v[T],O=C.length;C=C.concat(z.positions),E=E.concat(z.vectors),L=L.concat(z.vertexIntensity);for(var w=0;w<z.cells.length;w++){var R=z.cells[w],D=[];M.push(D);for(var H=0;H<R.length;H++)D.push(R[H]+O)}}return{positions:C,cells:M,vectors:E,vertexIntensity:L,colormap:p}},f=function(_,p){var A=_.length,c;for(c=0;c<A;c++){var S=_[c];if(S===p)return c;if(S>p)return c-1}return c},u=function(_,p,A){return _<p?p:_>A?A:_},l=function(_,p,A){var c=p.vectors,S=p.meshgrid,T=_[0],x=_[1],w=_[2],v=S[0].length,C=S[1].length,M=S[2].length,E=f(S[0],T),L=f(S[1],x),z=f(S[2],w),O=E+1,R=L+1,D=z+1;if(E=u(E,0,v-1),O=u(O,0,v-1),L=u(L,0,C-1),R=u(R,0,C-1),z=u(z,0,M-1),D=u(D,0,M-1),E<0||L<0||z<0||O>v-1||R>C-1||D>M-1)return t.create();var H=S[0][E],B=S[0][O],$=S[1][L],W=S[1][R],re=S[2][z],Q=S[2][D],Z=(T-H)/(B-H),K=(x-$)/(W-$),le=(w-re)/(Q-re);isFinite(Z)||(Z=.5),isFinite(K)||(K=.5),isFinite(le)||(le=.5);var fe,ue,V,j,ee,q;switch(A.reversedX&&(E=v-1-E,O=v-1-O),A.reversedY&&(L=C-1-L,R=C-1-R),A.reversedZ&&(z=M-1-z,D=M-1-D),A.filled){case 5:ee=z,q=D,V=L*M,j=R*M,fe=E*M*C,ue=O*M*C;break;case 4:ee=z,q=D,fe=E*M,ue=O*M,V=L*M*v,j=R*M*v;break;case 3:V=L,j=R,ee=z*C,q=D*C,fe=E*C*M,ue=O*C*M;break;case 2:V=L,j=R,fe=E*C,ue=O*C,ee=z*C*v,q=D*C*v;break;case 1:fe=E,ue=O,ee=z*v,q=D*v,V=L*v*M,j=R*v*M;break;default:fe=E,ue=O,V=L*v,j=R*v,ee=z*v*C,q=D*v*C;break}var X=c[fe+V+ee],J=c[fe+V+q],ie=c[fe+j+ee],ne=c[fe+j+q],oe=c[ue+V+ee],se=c[ue+V+q],me=c[ue+j+ee],ce=c[ue+j+q],pe=t.create(),xe=t.create(),Se=t.create(),Ae=t.create();t.lerp(pe,X,oe,Z),t.lerp(xe,J,se,Z),t.lerp(Se,ie,me,Z),t.lerp(Ae,ne,ce,Z);var Ce=t.create(),Ee=t.create();t.lerp(Ce,pe,Se,K),t.lerp(Ee,xe,Ae,K);var Oe=t.create();return t.lerp(Oe,Ce,Ee,le),Oe},m=function(_){var p=1/0;_.sort(function(T,x){return T-x});for(var A=_.length,c=1;c<A;c++){var S=Math.abs(_[c]-_[c-1]);S<p&&(p=S)}return p},d=function(_){for(var p=[],A=[],c=[],S={},T={},x={},w=_.length,v=0;v<w;v++){var C=_[v],M=C[0],E=C[1],L=C[2];S[M]||(p.push(M),S[M]=!0),T[E]||(A.push(E),T[E]=!0),x[L]||(c.push(L),x[L]=!0)}var z=m(p),O=m(A),R=m(c),D=Math.min(z,O,R);return isFinite(D)?D:1};h.exports=function(_,p){var A=_.startingPositions,c=_.maxLength||1e3,S=_.tubeSize||1,T=_.absoluteTubeSize,x=_.gridFill||"+x+y+z",w={};x.indexOf("-x")!==-1&&(w.reversedX=!0),x.indexOf("-y")!==-1&&(w.reversedY=!0),x.indexOf("-z")!==-1&&(w.reversedZ=!0),w.filled=i.indexOf(x.replace(/-/g,"").replace(/\+/g,""));var v=_.getVelocity||function(se){return l(se,_,w)},C=_.getDivergence||function(se,me){var ce=t.create(),pe=1e-4;t.add(ce,se,[pe,0,0]);var xe=v(ce);t.subtract(xe,xe,me),t.scale(xe,xe,1/pe),t.add(ce,se,[0,pe,0]);var Se=v(ce);t.subtract(Se,Se,me),t.scale(Se,Se,1/pe),t.add(ce,se,[0,0,pe]);var Ae=v(ce);return t.subtract(Ae,Ae,me),t.scale(Ae,Ae,1/pe),t.add(ce,xe,Se),t.add(ce,ce,Ae),ce},M=[],E=p[0][0],L=p[0][1],z=p[0][2],O=p[1][0],R=p[1][1],D=p[1][2],H=function(se){var me=se[0],ce=se[1],pe=se[2];return!(me<E||me>O||ce<L||ce>R||pe<z||pe>D)},B=t.distance(p[0],p[1]),$=10*B/c,W=$*$,re=1,Q=0,Z=A.length;Z>1&&(re=d(A));for(var K=0;K<Z;K++){var le=t.create();t.copy(le,A[K]);var fe=[le],ue=[],V=v(le),j=le;ue.push(V);var ee=[],q=C(le,V),X=t.length(q);isFinite(X)&&X>Q&&(Q=X),ee.push(X),M.push({points:fe,velocities:ue,divergences:ee});for(var J=0;J<c*100&&fe.length<c&&H(le);){J++;var ie=t.clone(V),ne=t.squaredLength(ie);if(ne===0)break;if(ne>W&&t.scale(ie,ie,$/Math.sqrt(ne)),t.add(ie,ie,le),V=v(ie),t.squaredDistance(j,ie)-W>-1e-4*W){fe.push(ie),j=ie,ue.push(V);var q=C(ie,V),X=t.length(q);isFinite(X)&&X>Q&&(Q=X),ee.push(X)}le=ie}}var oe=r(M,_.colormap,Q,re);return T?oe.tubeScale=T:(Q===0&&(Q=1),oe.tubeScale=S*.5*re/Q),oe};var b=o("./lib/shaders"),g=o("gl-cone3d").createMesh;h.exports.createTubeMesh=function(_,p){return g(_,p,{shaders:b,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(o,h,y){var t=o("gl-shader"),a=o("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),n=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);y.createShader=function(u){var l=t(u,i,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return l.attributes.uv.location=0,l.attributes.f.location=1,l.attributes.normal.location=2,l},y.createPickShader=function(u){var l=t(u,i,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return l.attributes.uv.location=0,l.attributes.f.location=1,l.attributes.normal.location=2,l},y.createContourShader=function(u){var l=t(u,r,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return l.attributes.uv.location=0,l.attributes.f.location=1,l},y.createPickContourShader=function(u){var l=t(u,r,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return l.attributes.uv.location=0,l.attributes.f.location=1,l}},{"gl-shader":132,glslify:231}],145:[function(o,h,y){h.exports=ue;var t=o("bit-twiddle"),a=o("gl-buffer"),i=o("gl-vao"),n=o("gl-texture2d"),r=o("typedarray-pool"),f=o("colormap"),u=o("ndarray-ops"),l=o("ndarray-pack"),m=o("ndarray"),d=o("surface-nets"),b=o("gl-mat4/multiply"),g=o("gl-mat4/invert"),_=o("binary-search-bounds"),p=o("ndarray-gradient"),A=o("./lib/shaders"),c=A.createShader,S=A.createContourShader,T=A.createPickShader,x=A.createPickContourShader,w=4*(4+3+3),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],M=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var V=0;V<3;++V){var j=M[V],ee=(V+1)%3,q=(V+2)%3;j[ee+0]=1,j[q+3]=1,j[V+6]=1}})();function E(V,j,ee,q,X){this.position=V,this.index=j,this.uv=ee,this.level=q,this.dataCoordinate=X}var L=256;function z(V,j,ee,q,X,J,ie,ne,oe,se,me,ce,pe,xe,Se){this.gl=V,this.shape=j,this.bounds=ee,this.objectOffset=Se,this.intensityBounds=[],this._shader=q,this._pickShader=X,this._coordinateBuffer=J,this._vao=ie,this._colorMap=ne,this._contourShader=oe,this._contourPickShader=se,this._contourBuffer=me,this._contourVAO=ce,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new E([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=pe,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[m(r.mallocFloat(1024),[0,0]),m(r.mallocFloat(1024),[0,0]),m(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var O=z.prototype;O.genColormap=function(V,j){var ee=!1,q=l([f({colormap:V,nshades:L,format:"rgba"}).map(function(X,J){var ie=j?R(J/255,j):X[3];return ie<1&&(ee=!0),[X[0],X[1],X[2],255*ie]})]);return u.divseq(q,255),this.hasAlphaScale=ee,q},O.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},O.isOpaque=function(){return!this.isTransparent()},O.pickSlots=1,O.setPickBase=function(V){this.pickId=V};function R(V,j){if(!j||!j.length)return 1;for(var ee=0;ee<j.length;++ee){if(j.length<2)return 1;if(j[ee][0]===V)return j[ee][1];if(j[ee][0]>V&&ee>0){var q=(j[ee][0]-V)/(j[ee][0]-j[ee-1][0]);return j[ee][1]*(1-q)+q*j[ee-1][1]}}return 1}var D=[0,0,0],H={showSurface:!1,showContour:!1,projections:[v.slice(),v.slice(),v.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function B(V,j){var ee,q,X,J=j.axes&&j.axes.lastCubeProps.axis||D,ie=j.showSurface,ne=j.showContour;for(ee=0;ee<3;++ee)for(ie=ie||j.surfaceProject[ee],q=0;q<3;++q)ne=ne||j.contourProject[ee][q];for(ee=0;ee<3;++ee){var oe=H.projections[ee];for(q=0;q<16;++q)oe[q]=0;for(q=0;q<4;++q)oe[5*q]=1;oe[5*ee]=0,oe[12+ee]=j.axesBounds[+(J[ee]>0)][ee],b(oe,V.model,oe);var se=H.clipBounds[ee];for(X=0;X<2;++X)for(q=0;q<3;++q)se[X][q]=V.clipBounds[X][q];se[0][ee]=-1e8,se[1][ee]=1e8}return H.showSurface=ie,H.showContour=ne,H}var $={model:v,view:v,projection:v,inverseModel:v.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},W=v.slice(),re=[1,0,0,0,1,0,0,0,1];function Q(V,j){V=V||{};var ee=this.gl;ee.disable(ee.CULL_FACE),this._colorMap.bind(0);var q=$;q.model=V.model||v,q.view=V.view||v,q.projection=V.projection||v,q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],q.objectOffset=this.objectOffset,q.contourColor=this.contourColor[0],q.inverseModel=g(q.inverseModel,q.model);for(var X=0;X<2;++X)for(var J=q.clipBounds[X],ie=0;ie<3;++ie)J[ie]=Math.min(Math.max(this.clipBounds[X][ie],-1e8),1e8);q.kambient=this.ambientLight,q.kdiffuse=this.diffuseLight,q.kspecular=this.specularLight,q.roughness=this.roughness,q.fresnel=this.fresnel,q.opacity=this.opacity,q.height=0,q.permutation=re,q.vertexColor=this.vertexColor;var ne=W;for(b(ne,q.view,q.model),b(ne,q.projection,ne),g(ne,ne),X=0;X<3;++X)q.eyePosition[X]=ne[12+X]/ne[15];var oe=ne[15];for(X=0;X<3;++X)oe+=this.lightPosition[X]*ne[4*X+3];for(X=0;X<3;++X){var se=ne[12+X];for(ie=0;ie<3;++ie)se+=ne[4*ie+X]*this.lightPosition[ie];q.lightPosition[X]=se/oe}var me=B(q,this);if(me.showSurface){for(this._shader.bind(),this._shader.uniforms=q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ee.TRIANGLES,this._vertexCount),X=0;X<3;++X)!this.surfaceProject[X]||!this.vertexCount||(this._shader.uniforms.model=me.projections[X],this._shader.uniforms.clipBounds=me.clipBounds[X],this._vao.draw(ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(me.showContour){var ce=this._contourShader;q.kambient=1,q.kdiffuse=0,q.kspecular=0,q.opacity=1,ce.bind(),ce.uniforms=q;var pe=this._contourVAO;for(pe.bind(),X=0;X<3;++X)for(ce.uniforms.permutation=M[X],ee.lineWidth(this.contourWidth[X]*this.pixelRatio),ie=0;ie<this.contourLevels[X].length;++ie)ie===this.highlightLevel[X]?(ce.uniforms.contourColor=this.highlightColor[X],ce.uniforms.contourTint=this.highlightTint[X]):(ie===0||ie-1===this.highlightLevel[X])&&(ce.uniforms.contourColor=this.contourColor[X],ce.uniforms.contourTint=this.contourTint[X]),this._contourCounts[X][ie]&&(ce.uniforms.height=this.contourLevels[X][ie],pe.draw(ee.LINES,this._contourCounts[X][ie],this._contourOffsets[X][ie]));for(X=0;X<3;++X)for(ce.uniforms.model=me.projections[X],ce.uniforms.clipBounds=me.clipBounds[X],ie=0;ie<3;++ie)if(!!this.contourProject[X][ie]){ce.uniforms.permutation=M[ie],ee.lineWidth(this.contourWidth[ie]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[ie].length;++xe)xe===this.highlightLevel[ie]?(ce.uniforms.contourColor=this.highlightColor[ie],ce.uniforms.contourTint=this.highlightTint[ie]):(xe===0||xe-1===this.highlightLevel[ie])&&(ce.uniforms.contourColor=this.contourColor[ie],ce.uniforms.contourTint=this.contourTint[ie]),this._contourCounts[ie][xe]&&(ce.uniforms.height=this.contourLevels[ie][xe],pe.draw(ee.LINES,this._contourCounts[ie][xe],this._contourOffsets[ie][xe]))}for(pe.unbind(),pe=this._dynamicVAO,pe.bind(),X=0;X<3;++X)if(this._dynamicCounts[X]!==0)for(ce.uniforms.model=q.model,ce.uniforms.clipBounds=q.clipBounds,ce.uniforms.permutation=M[X],ee.lineWidth(this.dynamicWidth[X]*this.pixelRatio),ce.uniforms.contourColor=this.dynamicColor[X],ce.uniforms.contourTint=this.dynamicTint[X],ce.uniforms.height=this.dynamicLevel[X],pe.draw(ee.LINES,this._dynamicCounts[X],this._dynamicOffsets[X]),ie=0;ie<3;++ie)!this.contourProject[ie][X]||(ce.uniforms.model=me.projections[ie],ce.uniforms.clipBounds=me.clipBounds[ie],pe.draw(ee.LINES,this._dynamicCounts[X],this._dynamicOffsets[X]));pe.unbind()}}O.draw=function(V){return Q.call(this,V,!1)},O.drawTransparent=function(V){return Q.call(this,V,!0)};var Z={model:v,view:v,projection:v,inverseModel:v,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};O.drawPick=function(V){V=V||{};var j=this.gl;j.disable(j.CULL_FACE);var ee=Z;ee.model=V.model||v,ee.view=V.view||v,ee.projection=V.projection||v,ee.shape=this._field[2].shape,ee.pickId=this.pickId/255,ee.lowerBound=this.bounds[0],ee.upperBound=this.bounds[1],ee.objectOffset=this.objectOffset,ee.permutation=re;for(var q=0;q<2;++q)for(var X=ee.clipBounds[q],J=0;J<3;++J)X[J]=Math.min(Math.max(this.clipBounds[q][J],-1e8),1e8);var ie=B(ee,this);if(ie.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ee,this._vao.bind(),this._vao.draw(j.TRIANGLES,this._vertexCount),q=0;q<3;++q)!this.surfaceProject[q]||(this._pickShader.uniforms.model=ie.projections[q],this._pickShader.uniforms.clipBounds=ie.clipBounds[q],this._vao.draw(j.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ie.showContour){var ne=this._contourPickShader;ne.bind(),ne.uniforms=ee;var oe=this._contourVAO;for(oe.bind(),J=0;J<3;++J)for(j.lineWidth(this.contourWidth[J]*this.pixelRatio),ne.uniforms.permutation=M[J],q=0;q<this.contourLevels[J].length;++q)this._contourCounts[J][q]&&(ne.uniforms.height=this.contourLevels[J][q],oe.draw(j.LINES,this._contourCounts[J][q],this._contourOffsets[J][q]));for(q=0;q<3;++q)for(ne.uniforms.model=ie.projections[q],ne.uniforms.clipBounds=ie.clipBounds[q],J=0;J<3;++J)if(!!this.contourProject[q][J]){ne.uniforms.permutation=M[J],j.lineWidth(this.contourWidth[J]*this.pixelRatio);for(var se=0;se<this.contourLevels[J].length;++se)this._contourCounts[J][se]&&(ne.uniforms.height=this.contourLevels[J][se],oe.draw(j.LINES,this._contourCounts[J][se],this._contourOffsets[J][se]))}oe.unbind()}},O.pick=function(V){if(!V||V.id!==this.pickId)return null;var j=this._field[2].shape,ee=this._pickResult,q=j[0]*(V.value[0]+(V.value[2]>>4)/16)/255,X=Math.floor(q),J=q-X,ie=j[1]*(V.value[1]+(V.value[2]&15)/16)/255,ne=Math.floor(ie),oe=ie-ne;X+=1,ne+=1;var se=ee.position;se[0]=se[1]=se[2]=0;for(var me=0;me<2;++me)for(var ce=me?J:1-J,pe=0;pe<2;++pe)for(var xe=pe?oe:1-oe,Se=X+me,Ae=ne+pe,Ce=ce*xe,Ee=0;Ee<3;++Ee)se[Ee]+=this._field[Ee].get(Se,Ae)*Ce;for(var Oe=this._pickResult.level,_e=0;_e<3;++_e)if(Oe[_e]=_.le(this.contourLevels[_e],se[_e]),Oe[_e]<0)this.contourLevels[_e].length>0&&(Oe[_e]=0);else if(Oe[_e]<this.contourLevels[_e].length-1){var Re=this.contourLevels[_e][Oe[_e]],Ve=this.contourLevels[_e][Oe[_e]+1];Math.abs(Re-se[_e])>Math.abs(Ve-se[_e])&&(Oe[_e]+=1)}for(ee.index[0]=J<.5?X:X+1,ee.index[1]=oe<.5?ne:ne+1,ee.uv[0]=q/j[0],ee.uv[1]=ie/j[1],Ee=0;Ee<3;++Ee)ee.dataCoordinate[Ee]=this._field[Ee].get(ee.index[0],ee.index[1]);return ee},O.padField=function(V,j){var ee=j.shape.slice(),q=V.shape.slice();u.assign(V.lo(1,1).hi(ee[0],ee[1]),j),u.assign(V.lo(1).hi(ee[0],1),j.hi(ee[0],1)),u.assign(V.lo(1,q[1]-1).hi(ee[0],1),j.lo(0,ee[1]-1).hi(ee[0],1)),u.assign(V.lo(0,1).hi(1,ee[1]),j.hi(1)),u.assign(V.lo(q[0]-1,1).hi(1,ee[1]),j.lo(ee[0]-1)),V.set(0,0,j.get(0,0)),V.set(0,q[1]-1,j.get(0,ee[1]-1)),V.set(q[0]-1,0,j.get(ee[0]-1,0)),V.set(q[0]-1,q[1]-1,j.get(ee[0]-1,ee[1]-1))};function K(V,j){return Array.isArray(V)?[j(V[0]),j(V[1]),j(V[2])]:[j(V),j(V),j(V)]}function le(V){return Array.isArray(V)?V.length===3?[V[0],V[1],V[2],1]:[V[0],V[1],V[2],V[3]]:[0,0,0,1]}function fe(V){if(Array.isArray(V)){if(Array.isArray(V))return[le(V[0]),le(V[1]),le(V[2])];var j=le(V);return[j.slice(),j.slice(),j.slice()]}}O.update=function(V){V=V||{},this.objectOffset=V.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in V&&(this.contourWidth=K(V.contourWidth,Number)),"showContour"in V&&(this.showContour=K(V.showContour,Boolean)),"showSurface"in V&&(this.showSurface=!!V.showSurface),"contourTint"in V&&(this.contourTint=K(V.contourTint,Boolean)),"contourColor"in V&&(this.contourColor=fe(V.contourColor)),"contourProject"in V&&(this.contourProject=K(V.contourProject,function(_t){return K(_t,Boolean)})),"surfaceProject"in V&&(this.surfaceProject=V.surfaceProject),"dynamicColor"in V&&(this.dynamicColor=fe(V.dynamicColor)),"dynamicTint"in V&&(this.dynamicTint=K(V.dynamicTint,Number)),"dynamicWidth"in V&&(this.dynamicWidth=K(V.dynamicWidth,Number)),"opacity"in V&&(this.opacity=V.opacity),"opacityscale"in V&&(this.opacityscale=V.opacityscale),"colorBounds"in V&&(this.colorBounds=V.colorBounds),"vertexColor"in V&&(this.vertexColor=V.vertexColor?1:0),"colormap"in V&&this._colorMap.setPixels(this.genColormap(V.colormap,this.opacityscale));var j=V.field||V.coords&&V.coords[2]||null,ee=!1;if(j||(this._field[2].shape[0]||this._field[2].shape[2]?j=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):j=this._field[2].hi(0,0)),"field"in V||"coords"in V){var q=(j.shape[0]+2)*(j.shape[1]+2);q>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(t.nextPow2(q))),this._field[2]=m(this._field[2].data,[j.shape[0]+2,j.shape[1]+2]),this.padField(this._field[2],j),this.shape=j.shape.slice();for(var X=this.shape,J=0;J<2;++J)this._field[2].size>this._field[J].data.length&&(r.freeFloat(this._field[J].data),this._field[J].data=r.mallocFloat(this._field[2].size)),this._field[J]=m(this._field[J].data,[X[0]+2,X[1]+2]);if(V.coords){var ie=V.coords;if(!Array.isArray(ie)||ie.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(J=0;J<2;++J){var ne=ie[J];for(pe=0;pe<2;++pe)if(ne.shape[pe]!==X[pe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[J],ne)}}else if(V.ticks){var oe=V.ticks;if(!Array.isArray(oe)||oe.length!==2)throw new Error("gl-surface: invalid ticks");for(J=0;J<2;++J){var se=oe[J];if((Array.isArray(se)||se.length)&&(se=m(se)),se.shape[0]!==X[J])throw new Error("gl-surface: invalid tick length");var me=m(se.data,X);me.stride[J]=se.stride[0],me.stride[J^1]=0,this.padField(this._field[J],me)}}else{for(J=0;J<2;++J){var ce=[0,0];ce[J]=1,this._field[J]=m(this._field[J].data,[X[0]+2,X[1]+2],ce,0)}this._field[0].set(0,0,0);for(var pe=0;pe<X[0];++pe)this._field[0].set(pe+1,0,pe);for(this._field[0].set(X[0]+1,0,X[0]-1),this._field[1].set(0,0,0),pe=0;pe<X[1];++pe)this._field[1].set(0,pe+1,pe);this._field[1].set(0,X[1]+1,X[1]-1)}var xe=this._field,Se=m(r.mallocFloat(xe[2].size*3*2),[3,X[0]+2,X[1]+2,2]);for(J=0;J<3;++J)p(Se.pick(J),xe[J],"mirror");var Ae=m(r.mallocFloat(xe[2].size*3),[X[0]+2,X[1]+2,3]);for(J=0;J<X[0]+2;++J)for(pe=0;pe<X[1]+2;++pe){var Ce=Se.get(0,J,pe,0),Ee=Se.get(0,J,pe,1),Oe=Se.get(1,J,pe,0),_e=Se.get(1,J,pe,1),Re=Se.get(2,J,pe,0),Ve=Se.get(2,J,pe,1),Je=Oe*Ve-_e*Re,ze=Re*Ee-Ve*Ce,De=Ce*_e-Ee*Oe,je=Math.sqrt(Je*Je+ze*ze+De*De);je<1e-8?(je=Math.max(Math.abs(Je),Math.abs(ze),Math.abs(De)),je<1e-8?(De=1,ze=Je=0,je=1):je=1/je):je=1/Math.sqrt(je),Ae.set(J,pe,0,Je*je),Ae.set(J,pe,1,ze*je),Ae.set(J,pe,2,De*je)}r.free(Se.data);var dt=[1/0,1/0,1/0],Et=[-1/0,-1/0,-1/0],$t=1/0,wt=-1/0,Ot=(X[0]-1)*(X[1]-1)*6,Vt=r.mallocFloat(t.nextPow2(10*Ot)),kt=0,St=0;for(J=0;J<X[0]-1;++J){e:for(pe=0;pe<X[1]-1;++pe){for(var ot=0;ot<2;++ot)for(var ht=0;ht<2;++ht)for(var Ke=0;Ke<3;++Ke){var Pe=this._field[Ke].get(1+J+ot,1+pe+ht);if(isNaN(Pe)||!isFinite(Pe))continue e}for(Ke=0;Ke<6;++Ke){var We=J+C[Ke][0],Qe=pe+C[Ke][1],ut=this._field[0].get(We+1,Qe+1),It=this._field[1].get(We+1,Qe+1);Pe=this._field[2].get(We+1,Qe+1),Je=Ae.get(We+1,Qe+1,0),ze=Ae.get(We+1,Qe+1,1),De=Ae.get(We+1,Qe+1,2),V.intensity&&(Tt=V.intensity.get(We,Qe));var Tt=V.intensity?V.intensity.get(We,Qe):Pe+this.objectOffset[2];Vt[kt++]=We,Vt[kt++]=Qe,Vt[kt++]=ut,Vt[kt++]=It,Vt[kt++]=Pe,Vt[kt++]=0,Vt[kt++]=Tt,Vt[kt++]=Je,Vt[kt++]=ze,Vt[kt++]=De,dt[0]=Math.min(dt[0],ut+this.objectOffset[0]),dt[1]=Math.min(dt[1],It+this.objectOffset[1]),dt[2]=Math.min(dt[2],Pe+this.objectOffset[2]),$t=Math.min($t,Tt),Et[0]=Math.max(Et[0],ut+this.objectOffset[0]),Et[1]=Math.max(Et[1],It+this.objectOffset[1]),Et[2]=Math.max(Et[2],Pe+this.objectOffset[2]),wt=Math.max(wt,Tt),St+=1}}}for(V.intensityBounds&&($t=+V.intensityBounds[0],wt=+V.intensityBounds[1]),J=6;J<kt;J+=10)Vt[J]=(Vt[J]-$t)/(wt-$t);this._vertexCount=St,this._coordinateBuffer.update(Vt.subarray(0,kt)),r.freeFloat(Vt),r.free(Ae.data),this.bounds=[dt,Et],this.intensity=V.intensity||this._field[2],(this.intensityBounds[0]!==$t||this.intensityBounds[1]!==wt)&&(ee=!0),this.intensityBounds=[$t,wt]}if("levels"in V){var Bt=V.levels;for(Array.isArray(Bt[0])?Bt=Bt.slice():Bt=[[],[],Bt],J=0;J<3;++J)Bt[J]=Bt[J].slice(),Bt[J].sort(function(_t,Pt){return _t-Pt});for(J=0;J<3;++J)for(pe=0;pe<Bt[J].length;++pe)Bt[J][pe]-=this.objectOffset[J];e:for(J=0;J<3;++J){if(Bt[J].length!==this.contourLevels[J].length){ee=!0;break}for(pe=0;pe<Bt[J].length;++pe)if(Bt[J][pe]!==this.contourLevels[J][pe]){ee=!0;break e}}this.contourLevels=Bt}if(ee){xe=this._field,X=this.shape;for(var rr=[],Ut=0;Ut<3;++Ut){var Qt=this.contourLevels[Ut],ar=[],nr=[],cr=[0,0,0];for(J=0;J<Qt.length;++J){var Kr=d(this._field[Ut],Qt[J]);ar.push(rr.length/5|0),St=0;e:for(pe=0;pe<Kr.cells.length;++pe){var yn=Kr.cells[pe];for(Ke=0;Ke<2;++Ke){var Qr=Kr.positions[yn[Ke]],st=Qr[0],Gt=Math.floor(st)|0,Zt=st-Gt,Ht=Qr[1],_r=Math.floor(Ht)|0,it=Ht-_r,Te=!1;t:for(var ke=0;ke<3;++ke){cr[ke]=0;var Ge=(Ut+ke+1)%3;for(ot=0;ot<2;++ot){var Ye=ot?Zt:1-Zt;for(We=Math.min(Math.max(Gt+ot,0),X[0])|0,ht=0;ht<2;++ht){var qe=ht?it:1-it;if(Qe=Math.min(Math.max(_r+ht,0),X[1])|0,ke<2?Pe=this._field[Ge].get(We,Qe):Pe=(this.intensity.get(We,Qe)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Pe)||isNaN(Pe)){Te=!0;break t}var at=Ye*qe;cr[ke]+=at*Pe}}}if(!Te)rr.push(cr[0],cr[1],Qr[0],Qr[1],cr[2]),St+=1;else{if(Ke>0){for(var et=0;et<5;++et)rr.pop();St-=1}continue e}}}nr.push(St)}this._contourOffsets[Ut]=ar,this._contourCounts[Ut]=nr}var pt=r.mallocFloat(rr.length);for(J=0;J<rr.length;++J)pt[J]=rr[J];this._contourBuffer.update(pt),r.freeFloat(pt)}},O.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var V=0;V<3;++V)r.freeFloat(this._field[V].data)},O.highlight=function(V){var j;if(!V){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(j=0;j<3;++j)this.enableHighlight[j]?this.highlightLevel[j]=V.level[j]:this.highlightLevel[j]=-1;var ee;for(this.snapToData?ee=V.dataCoordinate:ee=V.position,j=0;j<3;++j)ee[j]-=this.objectOffset[j];if(!((!this.enableDynamic[0]||ee[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ee[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ee[2]===this.dynamicLevel[2]))){for(var q=0,X=this.shape,J=r.mallocFloat(12*X[0]*X[1]),ie=0;ie<3;++ie){if(!this.enableDynamic[ie]){this.dynamicLevel[ie]=NaN,this._dynamicCounts[ie]=0;continue}this.dynamicLevel[ie]=ee[ie];var ne=(ie+1)%3,oe=(ie+2)%3,se=this._field[ie],me=this._field[ne],ce=this._field[oe],pe=d(se,ee[ie]),xe=pe.cells,Se=pe.positions;for(this._dynamicOffsets[ie]=q,j=0;j<xe.length;++j)for(var Ae=xe[j],Ce=0;Ce<2;++Ce){var Ee=Se[Ae[Ce]],Oe=+Ee[0],_e=Oe|0,Re=Math.min(_e+1,X[0])|0,Ve=Oe-_e,Je=1-Ve,ze=+Ee[1],De=ze|0,je=Math.min(De+1,X[1])|0,dt=ze-De,Et=1-dt,$t=Je*Et,wt=Je*dt,Ot=Ve*Et,Vt=Ve*dt,kt=$t*me.get(_e,De)+wt*me.get(_e,je)+Ot*me.get(Re,De)+Vt*me.get(Re,je),St=$t*ce.get(_e,De)+wt*ce.get(_e,je)+Ot*ce.get(Re,De)+Vt*ce.get(Re,je);if(isNaN(kt)||isNaN(St)){Ce&&(q-=1);break}J[2*q+0]=kt,J[2*q+1]=St,q+=1}this._dynamicCounts[ie]=q-this._dynamicOffsets[ie]}this._dynamicBuffer.update(J.subarray(0,2*q)),r.freeFloat(J)}};function ue(V){var j=V.gl,ee=c(j),q=T(j),X=S(j),J=x(j),ie=a(j),ne=i(j,[{buffer:ie,size:4,stride:w,offset:0},{buffer:ie,size:3,stride:w,offset:16},{buffer:ie,size:3,stride:w,offset:28}]),oe=a(j),se=i(j,[{buffer:oe,size:4,stride:20,offset:0},{buffer:oe,size:1,stride:20,offset:16}]),me=a(j),ce=i(j,[{buffer:me,size:2,type:j.FLOAT}]),pe=n(j,1,L,j.RGBA,j.UNSIGNED_BYTE);pe.minFilter=j.LINEAR,pe.magFilter=j.LINEAR;var xe=new z(j,[0,0],[[0,0,0],[0,0,0]],ee,q,ie,ne,pe,X,J,oe,se,me,ce,[0,0,0]),Se={levels:[[],[],[]]};for(var Ae in V)Se[Ae]=V[Ae];return Se.colormap=Se.colormap||"jet",xe.update(Se),xe}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(o,h,y){var t=o("ndarray"),a=o("ndarray-ops"),i=o("typedarray-pool");h.exports=x;var n=null,r=null,f=null;function u(w){n=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],r=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],f=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}function l(w){return typeof HTMLCanvasElement!="undefined"&&w instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&w instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&w instanceof HTMLVideoElement||typeof ImageData!="undefined"&&w instanceof ImageData}var m=function(w,v){a.muls(w,v,255)};function d(w,v,C){var M=w.gl,E=M.getParameter(M.MAX_TEXTURE_SIZE);if(v<0||v>E||C<0||C>E)throw new Error("gl-texture2d: Invalid texture size");return w._shape=[v,C],w.bind(),M.texImage2D(M.TEXTURE_2D,0,w.format,v,C,0,w.format,w.type,null),w._mipLevels=[0],w}function b(w,v,C,M,E,L){this.gl=w,this.handle=v,this.format=E,this.type=L,this._shape=[C,M],this._mipLevels=[0],this._magFilter=w.NEAREST,this._minFilter=w.NEAREST,this._wrapS=w.CLAMP_TO_EDGE,this._wrapT=w.CLAMP_TO_EDGE,this._anisoSamples=1;var z=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return z._wrapS},set:function(D){return z.wrapS=D}},{get:function(){return z._wrapT},set:function(D){return z.wrapT=D}}]),this._wrapVector=O;var R=[this._shape[0],this._shape[1]];Object.defineProperties(R,[{get:function(){return z._shape[0]},set:function(D){return z.width=D}},{get:function(){return z._shape[1]},set:function(D){return z.height=D}}]),this._shapeVector=R}var g=b.prototype;Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(w){this.bind();var v=this.gl;if(this.type===v.FLOAT&&n.indexOf(w)>=0&&(v.getExtension("OES_texture_float_linear")||(w=v.NEAREST)),r.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,w),this._minFilter=w}},magFilter:{get:function(){return this._magFilter},set:function(w){this.bind();var v=this.gl;if(this.type===v.FLOAT&&n.indexOf(w)>=0&&(v.getExtension("OES_texture_float_linear")||(w=v.NEAREST)),r.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,w),this._magFilter=w}},mipSamples:{get:function(){return this._anisoSamples},set:function(w){var v=this._anisoSamples;if(this._anisoSamples=Math.max(w,1)|0,v!==this._anisoSamples){var C=this.gl.getExtension("EXT_texture_filter_anisotropic");C&&this.gl.texParameterf(this.gl.TEXTURE_2D,C.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(w){if(this.bind(),f.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,w),this._wrapS=w}},wrapT:{get:function(){return this._wrapT},set:function(w){if(this.bind(),f.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,w),this._wrapT=w}},wrap:{get:function(){return this._wrapVector},set:function(w){if(Array.isArray(w)||(w=[w,w]),w.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var v=0;v<2;++v)if(f.indexOf(w[v])<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);this._wrapS=w[0],this._wrapT=w[1];var C=this.gl;return this.bind(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this._wrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this._wrapT),w}},shape:{get:function(){return this._shapeVector},set:function(w){if(!Array.isArray(w))w=[w|0,w|0];else if(w.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return d(this,w[0]|0,w[1]|0),[w[0]|0,w[1]|0]}},width:{get:function(){return this._shape[0]},set:function(w){return w=w|0,d(this,w,this._shape[1]),w}},height:{get:function(){return this._shape[1]},set:function(w){return w=w|0,d(this,this._shape[0],w),w}}}),g.bind=function(w){var v=this.gl;return w!==void 0&&v.activeTexture(v.TEXTURE0+(w|0)),v.bindTexture(v.TEXTURE_2D,this.handle),w!==void 0?w|0:v.getParameter(v.ACTIVE_TEXTURE)-v.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var w=Math.min(this._shape[0],this._shape[1]),v=0;w>0;++v,w>>>=1)this._mipLevels.indexOf(v)<0&&this._mipLevels.push(v)},g.setPixels=function(w,v,C,M){var E=this.gl;this.bind(),Array.isArray(v)?(M=C,C=v[1]|0,v=v[0]|0):(v=v||0,C=C||0),M=M||0;var L=l(w)?w:w.raw;if(L){var z=this._mipLevels.indexOf(M)<0;z?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,L),this._mipLevels.push(M)):E.texSubImage2D(E.TEXTURE_2D,M,v,C,this.format,this.type,L)}else if(w.shape&&w.stride&&w.data){if(w.shape.length<2||v+w.shape[1]>this._shape[1]>>>M||C+w.shape[0]>this._shape[0]>>>M||v<0||C<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");p(E,v,C,M,this.format,this.type,this._mipLevels,w)}else throw new Error("gl-texture2d: Unsupported data type")};function _(w,v){return w.length===3?v[2]===1&&v[1]===w[0]*w[2]&&v[0]===w[2]:v[0]===1&&v[1]===w[0]}function p(w,v,C,M,E,L,z,O){var R=O.dtype,D=O.shape.slice();if(D.length<2||D.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var H=0,B=0,$=_(D,O.stride.slice());if(R==="float32"?H=w.FLOAT:R==="float64"?(H=w.FLOAT,$=!1,R="float32"):R==="uint8"?H=w.UNSIGNED_BYTE:(H=w.UNSIGNED_BYTE,$=!1,R="uint8"),D.length===2)B=w.LUMINANCE,D=[D[0],D[1],1],O=t(O.data,D,[O.stride[0],O.stride[1],1],O.offset);else if(D.length===3)if(D[2]===1)B=w.ALPHA;else if(D[2]===2)B=w.LUMINANCE_ALPHA;else if(D[2]===3)B=w.RGB;else if(D[2]===4)B=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((B===w.LUMINANCE||B===w.ALPHA)&&(E===w.LUMINANCE||E===w.ALPHA)&&(B=E),B!==E)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var W=O.size,re=z.indexOf(M)<0;if(re&&z.push(M),H===L&&$)O.offset===0&&O.data.length===W?re?w.texImage2D(w.TEXTURE_2D,M,E,D[0],D[1],0,E,L,O.data):w.texSubImage2D(w.TEXTURE_2D,M,v,C,D[0],D[1],E,L,O.data):re?w.texImage2D(w.TEXTURE_2D,M,E,D[0],D[1],0,E,L,O.data.subarray(O.offset,O.offset+W)):w.texSubImage2D(w.TEXTURE_2D,M,v,C,D[0],D[1],E,L,O.data.subarray(O.offset,O.offset+W));else{var Q;L===w.FLOAT?Q=i.mallocFloat32(W):Q=i.mallocUint8(W);var Z=t(Q,D,[D[2],D[2]*D[0],1]);H===w.FLOAT&&L===w.UNSIGNED_BYTE?m(Z,O):a.assign(Z,O),re?w.texImage2D(w.TEXTURE_2D,M,E,D[0],D[1],0,E,L,Q.subarray(0,W)):w.texSubImage2D(w.TEXTURE_2D,M,v,C,D[0],D[1],E,L,Q.subarray(0,W)),L===w.FLOAT?i.freeFloat32(Q):i.freeUint8(Q)}}function A(w){var v=w.createTexture();return w.bindTexture(w.TEXTURE_2D,v),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),v}function c(w,v,C,M,E){var L=w.getParameter(w.MAX_TEXTURE_SIZE);if(v<0||v>L||C<0||C>L)throw new Error("gl-texture2d: Invalid texture shape");if(E===w.FLOAT&&!w.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var z=A(w);return w.texImage2D(w.TEXTURE_2D,0,M,v,C,0,M,E,null),new b(w,z,v,C,M,E)}function S(w,v,C,M,E,L){var z=A(w);return w.texImage2D(w.TEXTURE_2D,0,E,E,L,v),new b(w,z,C,M,E,L)}function T(w,v){var C=v.dtype,M=v.shape.slice(),E=w.getParameter(w.MAX_TEXTURE_SIZE);if(M[0]<0||M[0]>E||M[1]<0||M[1]>E)throw new Error("gl-texture2d: Invalid texture size");var L=_(M,v.stride.slice()),z=0;C==="float32"?z=w.FLOAT:C==="float64"?(z=w.FLOAT,L=!1,C="float32"):C==="uint8"?z=w.UNSIGNED_BYTE:(z=w.UNSIGNED_BYTE,L=!1,C="uint8");var O=0;if(M.length===2)O=w.LUMINANCE,M=[M[0],M[1],1],v=t(v.data,M,[v.stride[0],v.stride[1],1],v.offset);else if(M.length===3)if(M[2]===1)O=w.ALPHA;else if(M[2]===2)O=w.LUMINANCE_ALPHA;else if(M[2]===3)O=w.RGB;else if(M[2]===4)O=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");z===w.FLOAT&&!w.getExtension("OES_texture_float")&&(z=w.UNSIGNED_BYTE,L=!1);var R,D,H=v.size;if(L)v.offset===0&&v.data.length===H?R=v.data:R=v.data.subarray(v.offset,v.offset+H);else{var B=[M[2],M[2]*M[0],1];D=i.malloc(H,C);var $=t(D,M,B,0);(C==="float32"||C==="float64")&&z===w.UNSIGNED_BYTE?m($,v):a.assign($,v),R=D.subarray(0,H)}var W=A(w);return w.texImage2D(w.TEXTURE_2D,0,O,M[0],M[1],0,O,z,R),L||i.free(D),new b(w,W,M[0],M[1],O,z)}function x(w){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(n||u(w),typeof arguments[1]=="number")return c(w,arguments[1],arguments[2],arguments[3]||w.RGBA,arguments[4]||w.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return c(w,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var v=arguments[1],C=l(v)?v:v.raw;if(C)return S(w,C,v.width|0,v.height|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(v.shape&&v.data&&v.stride)return T(w,v)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(o,h,y){function t(a,i,n){i?i.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var r=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<n.length;++f){var u=n[f];if(u.buffer){var l=u.buffer,m=u.size||4,d=u.type||a.FLOAT,b=!!u.normalized,g=u.stride||0,_=u.offset||0;l.bind(),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,m,d,b,g,_)}else{if(typeof u=="number")a.vertexAttrib1f(f,u);else if(u.length===1)a.vertexAttrib1f(f,u[0]);else if(u.length===2)a.vertexAttrib2f(f,u[0],u[1]);else if(u.length===3)a.vertexAttrib3f(f,u[0],u[1],u[2]);else if(u.length===4)a.vertexAttrib4f(f,u[0],u[1],u[2],u[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(f)}}for(;f<r;++f)a.disableVertexAttribArray(f)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var f=0;f<r;++f)a.disableVertexAttribArray(f)}}h.exports=t},{}],148:[function(o,h,y){var t=o("./do-bind.js");function a(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}a.prototype.bind=function(){t(this.gl,this._elements,this._attributes)},a.prototype.update=function(n,r,f){this._elements=r,this._attributes=n,this._elementsType=f||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(n,r,f){f=f||0;var u=this.gl;this._elements?u.drawElements(n,r,this._elementsType,f):u.drawArrays(n,f,r)};function i(n){return new a(n)}h.exports=i},{"./do-bind.js":147}],149:[function(o,h,y){var t=o("./do-bind.js");function a(r,f,u,l,m,d){this.location=r,this.dimension=f,this.a=u,this.b=l,this.c=m,this.d=d}a.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function i(r,f,u){this.gl=r,this._ext=f,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(r,f,u){if(this.bind(),t(this.gl,f,r),this.unbind(),this._attribs.length=0,r)for(var l=0;l<r.length;++l){var m=r[l];typeof m=="number"?this._attribs.push(new a(l,1,m)):Array.isArray(m)&&this._attribs.push(new a(l,m.length,m[0],m[1],m[2],m[3]))}this._useElements=!!f,this._elementsType=u||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(r,f,u){u=u||0;var l=this.gl;this._useElements?l.drawElements(r,f,this._elementsType,u):l.drawArrays(r,u,f)};function n(r,f){return new i(r,f,f.createVertexArrayOES())}h.exports=n},{"./do-bind.js":147}],150:[function(o,h,y){var t=o("./lib/vao-native.js"),a=o("./lib/vao-emulated.js");function i(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}function n(r,f,u,l){var m=r.createVertexArray?new i(r):r.getExtension("OES_vertex_array_object"),d;return m?d=t(r,m):d=a(r),d.update(f,u,l),d}h.exports=n},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a}},{}],152:[function(o,h,y){h.exports=n;var t=o("./fromValues"),a=o("./normalize"),i=o("./dot");function n(r,f){var u=t(r[0],r[1],r[2]),l=t(f[0],f[1],f[2]);a(u,u),a(l,l);var m=i(u,l);return m>1?0:Math.acos(m)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=Math.ceil(i[0]),a[1]=Math.ceil(i[1]),a[2]=Math.ceil(i[2]),a}},{}],154:[function(o,h,y){h.exports=t;function t(a){var i=new Float32Array(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}},{}],155:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a}},{}],156:[function(o,h,y){h.exports=t;function t(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i[0],f=i[1],u=i[2],l=n[0],m=n[1],d=n[2];return a[0]=f*d-u*m,a[1]=u*l-r*d,a[2]=r*m-f*l,a}},{}],158:[function(o,h,y){h.exports=o("./distance")},{"./distance":159}],159:[function(o,h,y){h.exports=t;function t(a,i){var n=i[0]-a[0],r=i[1]-a[1],f=i[2]-a[2];return Math.sqrt(n*n+r*r+f*f)}},{}],160:[function(o,h,y){h.exports=o("./divide")},{"./divide":161}],161:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a}},{}],162:[function(o,h,y){h.exports=t;function t(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}},{}],163:[function(o,h,y){h.exports=1e-6},{}],164:[function(o,h,y){h.exports=a;var t=o("./epsilon");function a(i,n){var r=i[0],f=i[1],u=i[2],l=n[0],m=n[1],d=n[2];return Math.abs(r-l)<=t*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(f-m)<=t*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(u-d)<=t*Math.max(1,Math.abs(u),Math.abs(d))}},{"./epsilon":163}],165:[function(o,h,y){h.exports=t;function t(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]}},{}],166:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=Math.floor(i[0]),a[1]=Math.floor(i[1]),a[2]=Math.floor(i[2]),a}},{}],167:[function(o,h,y){h.exports=a;var t=o("./create")();function a(i,n,r,f,u,l){var m,d;for(n||(n=3),r||(r=0),f?d=Math.min(f*n+r,i.length):d=i.length,m=r;m<d;m+=n)t[0]=i[m],t[1]=i[m+1],t[2]=i[m+2],u(t,t,l),i[m]=t[0],i[m+1]=t[1],i[m+2]=t[2];return i}},{"./create":156}],168:[function(o,h,y){h.exports=t;function t(a,i,n){var r=new Float32Array(3);return r[0]=a,r[1]=i,r[2]=n,r}},{}],169:[function(o,h,y){h.exports={EPSILON:o("./epsilon"),create:o("./create"),clone:o("./clone"),angle:o("./angle"),fromValues:o("./fromValues"),copy:o("./copy"),set:o("./set"),equals:o("./equals"),exactEquals:o("./exactEquals"),add:o("./add"),subtract:o("./subtract"),sub:o("./sub"),multiply:o("./multiply"),mul:o("./mul"),divide:o("./divide"),div:o("./div"),min:o("./min"),max:o("./max"),floor:o("./floor"),ceil:o("./ceil"),round:o("./round"),scale:o("./scale"),scaleAndAdd:o("./scaleAndAdd"),distance:o("./distance"),dist:o("./dist"),squaredDistance:o("./squaredDistance"),sqrDist:o("./sqrDist"),length:o("./length"),len:o("./len"),squaredLength:o("./squaredLength"),sqrLen:o("./sqrLen"),negate:o("./negate"),inverse:o("./inverse"),normalize:o("./normalize"),dot:o("./dot"),cross:o("./cross"),lerp:o("./lerp"),random:o("./random"),transformMat4:o("./transformMat4"),transformMat3:o("./transformMat3"),transformQuat:o("./transformQuat"),rotateX:o("./rotateX"),rotateY:o("./rotateY"),rotateZ:o("./rotateZ"),forEach:o("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a}},{}],171:[function(o,h,y){h.exports=o("./length")},{"./length":172}],172:[function(o,h,y){h.exports=t;function t(a){var i=a[0],n=a[1],r=a[2];return Math.sqrt(i*i+n*n+r*r)}},{}],173:[function(o,h,y){h.exports=t;function t(a,i,n,r){var f=i[0],u=i[1],l=i[2];return a[0]=f+r*(n[0]-f),a[1]=u+r*(n[1]-u),a[2]=l+r*(n[2]-l),a}},{}],174:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a}},{}],175:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a}},{}],176:[function(o,h,y){h.exports=o("./multiply")},{"./multiply":177}],177:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a}},{}],178:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a}},{}],179:[function(o,h,y){h.exports=t;function t(a,i){var n=i[0],r=i[1],f=i[2],u=n*n+r*r+f*f;return u>0&&(u=1/Math.sqrt(u),a[0]=i[0]*u,a[1]=i[1]*u,a[2]=i[2]*u),a}},{}],180:[function(o,h,y){h.exports=t;function t(a,i){i=i||1;var n=Math.random()*2*Math.PI,r=Math.random()*2-1,f=Math.sqrt(1-r*r)*i;return a[0]=Math.cos(n)*f,a[1]=Math.sin(n)*f,a[2]=r*i,a}},{}],181:[function(o,h,y){h.exports=t;function t(a,i,n,r){var f=n[1],u=n[2],l=i[1]-f,m=i[2]-u,d=Math.sin(r),b=Math.cos(r);return a[0]=i[0],a[1]=f+l*b-m*d,a[2]=u+l*d+m*b,a}},{}],182:[function(o,h,y){h.exports=t;function t(a,i,n,r){var f=n[0],u=n[2],l=i[0]-f,m=i[2]-u,d=Math.sin(r),b=Math.cos(r);return a[0]=f+m*d+l*b,a[1]=i[1],a[2]=u+m*b-l*d,a}},{}],183:[function(o,h,y){h.exports=t;function t(a,i,n,r){var f=n[0],u=n[1],l=i[0]-f,m=i[1]-u,d=Math.sin(r),b=Math.cos(r);return a[0]=f+l*b-m*d,a[1]=u+l*d+m*b,a[2]=i[2],a}},{}],184:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=Math.round(i[0]),a[1]=Math.round(i[1]),a[2]=Math.round(i[2]),a}},{}],185:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a}},{}],186:[function(o,h,y){h.exports=t;function t(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a}},{}],187:[function(o,h,y){h.exports=t;function t(a,i,n,r){return a[0]=i,a[1]=n,a[2]=r,a}},{}],188:[function(o,h,y){h.exports=o("./squaredDistance")},{"./squaredDistance":190}],189:[function(o,h,y){h.exports=o("./squaredLength")},{"./squaredLength":191}],190:[function(o,h,y){h.exports=t;function t(a,i){var n=i[0]-a[0],r=i[1]-a[1],f=i[2]-a[2];return n*n+r*r+f*f}},{}],191:[function(o,h,y){h.exports=t;function t(a){var i=a[0],n=a[1],r=a[2];return i*i+n*n+r*r}},{}],192:[function(o,h,y){h.exports=o("./subtract")},{"./subtract":193}],193:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a}},{}],194:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i[0],f=i[1],u=i[2];return a[0]=r*n[0]+f*n[3]+u*n[6],a[1]=r*n[1]+f*n[4]+u*n[7],a[2]=r*n[2]+f*n[5]+u*n[8],a}},{}],195:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i[0],f=i[1],u=i[2],l=n[3]*r+n[7]*f+n[11]*u+n[15];return l=l||1,a[0]=(n[0]*r+n[4]*f+n[8]*u+n[12])/l,a[1]=(n[1]*r+n[5]*f+n[9]*u+n[13])/l,a[2]=(n[2]*r+n[6]*f+n[10]*u+n[14])/l,a}},{}],196:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i[0],f=i[1],u=i[2],l=n[0],m=n[1],d=n[2],b=n[3],g=b*r+m*u-d*f,_=b*f+d*r-l*u,p=b*u+l*f-m*r,A=-l*r-m*f-d*u;return a[0]=g*b+A*-l+_*-d-p*-m,a[1]=_*b+A*-m+p*-l-g*-d,a[2]=p*b+A*-d+g*-m-_*-l,a}},{}],197:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a[3]=i[3]+n[3],a}},{}],198:[function(o,h,y){h.exports=t;function t(a){var i=new Float32Array(4);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i}},{}],199:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a}},{}],200:[function(o,h,y){h.exports=t;function t(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(o,h,y){h.exports=t;function t(a,i){var n=i[0]-a[0],r=i[1]-a[1],f=i[2]-a[2],u=i[3]-a[3];return Math.sqrt(n*n+r*r+f*f+u*u)}},{}],202:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a[3]=i[3]/n[3],a}},{}],203:[function(o,h,y){h.exports=t;function t(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]}},{}],204:[function(o,h,y){h.exports=t;function t(a,i,n,r){var f=new Float32Array(4);return f[0]=a,f[1]=i,f[2]=n,f[3]=r,f}},{}],205:[function(o,h,y){h.exports={create:o("./create"),clone:o("./clone"),fromValues:o("./fromValues"),copy:o("./copy"),set:o("./set"),add:o("./add"),subtract:o("./subtract"),multiply:o("./multiply"),divide:o("./divide"),min:o("./min"),max:o("./max"),scale:o("./scale"),scaleAndAdd:o("./scaleAndAdd"),distance:o("./distance"),squaredDistance:o("./squaredDistance"),length:o("./length"),squaredLength:o("./squaredLength"),negate:o("./negate"),inverse:o("./inverse"),normalize:o("./normalize"),dot:o("./dot"),lerp:o("./lerp"),random:o("./random"),transformMat4:o("./transformMat4"),transformQuat:o("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a[3]=1/i[3],a}},{}],207:[function(o,h,y){h.exports=t;function t(a){var i=a[0],n=a[1],r=a[2],f=a[3];return Math.sqrt(i*i+n*n+r*r+f*f)}},{}],208:[function(o,h,y){h.exports=t;function t(a,i,n,r){var f=i[0],u=i[1],l=i[2],m=i[3];return a[0]=f+r*(n[0]-f),a[1]=u+r*(n[1]-u),a[2]=l+r*(n[2]-l),a[3]=m+r*(n[3]-m),a}},{}],209:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a[3]=Math.max(i[3],n[3]),a}},{}],210:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a[3]=Math.min(i[3],n[3]),a}},{}],211:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a[3]=i[3]*n[3],a}},{}],212:[function(o,h,y){h.exports=t;function t(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=-i[3],a}},{}],213:[function(o,h,y){h.exports=t;function t(a,i){var n=i[0],r=i[1],f=i[2],u=i[3],l=n*n+r*r+f*f+u*u;return l>0&&(l=1/Math.sqrt(l),a[0]=n*l,a[1]=r*l,a[2]=f*l,a[3]=u*l),a}},{}],214:[function(o,h,y){var t=o("./normalize"),a=o("./scale");h.exports=i;function i(n,r){return r=r||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),t(n,n),a(n,n,r),n}},{"./normalize":213,"./scale":215}],215:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a[3]=i[3]*n,a}},{}],216:[function(o,h,y){h.exports=t;function t(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a[3]=i[3]+n[3]*r,a}},{}],217:[function(o,h,y){h.exports=t;function t(a,i,n,r,f){return a[0]=i,a[1]=n,a[2]=r,a[3]=f,a}},{}],218:[function(o,h,y){h.exports=t;function t(a,i){var n=i[0]-a[0],r=i[1]-a[1],f=i[2]-a[2],u=i[3]-a[3];return n*n+r*r+f*f+u*u}},{}],219:[function(o,h,y){h.exports=t;function t(a){var i=a[0],n=a[1],r=a[2],f=a[3];return i*i+n*n+r*r+f*f}},{}],220:[function(o,h,y){h.exports=t;function t(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a[3]=i[3]-n[3],a}},{}],221:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i[0],f=i[1],u=i[2],l=i[3];return a[0]=n[0]*r+n[4]*f+n[8]*u+n[12]*l,a[1]=n[1]*r+n[5]*f+n[9]*u+n[13]*l,a[2]=n[2]*r+n[6]*f+n[10]*u+n[14]*l,a[3]=n[3]*r+n[7]*f+n[11]*u+n[15]*l,a}},{}],222:[function(o,h,y){h.exports=t;function t(a,i,n){var r=i[0],f=i[1],u=i[2],l=n[0],m=n[1],d=n[2],b=n[3],g=b*r+m*u-d*f,_=b*f+d*r-l*u,p=b*u+l*f-m*r,A=-l*r-m*f-d*u;return a[0]=g*b+A*-l+_*-d-p*-m,a[1]=_*b+A*-m+p*-l-g*-d,a[2]=p*b+A*-d+g*-m-_*-l,a[3]=i[3],a}},{}],223:[function(o,h,y){var t=o("glsl-tokenizer"),a=o("atob-lite");h.exports=i;function i(n){for(var r=Array.isArray(n)?n:t(n),f=0;f<r.length;f++){var u=r[f];if(u.type==="preprocessor"){var l=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!l&&!!l[2]){var m=l[1],d=l[2];return(m?a(d):d).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(o,h,y){h.exports=v;var t=o("./lib/literals"),a=o("./lib/operators"),i=o("./lib/builtins"),n=o("./lib/literals-300es"),r=o("./lib/builtins-300es"),f=999,u=9999,l=0,m=1,d=2,b=3,g=4,_=5,p=6,A=7,c=8,S=9,T=10,x=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function v(C){var M=0,E=0,L=f,z,O,R=[],D=[],H=1,B=0,$=0,W=!1,re=!1,Q="",Z;C=C||{};var K=i,le=t;C.version==="300 es"&&(K=r,le=n);for(var fe={},ue={},M=0;M<K.length;M++)fe[K[M]]=!0;for(var M=0;M<le.length;M++)ue[le[M]]=!0;return function(Se){return D=[],Se!==null?j(Se):ee()};function V(Se){Se.length&&D.push({type:w[L],data:Se,position:$,line:H,column:B})}function j(Se){M=0,Se.toString&&(Se=Se.toString()),Q+=Se.replace(/\r\n/g,`
`),Z=Q.length;for(var Ae;z=Q[M],M<Z;){switch(Ae=M,L){case l:M=ne();break;case m:M=ie();break;case d:M=J();break;case b:M=oe();break;case g:M=ce();break;case x:M=me();break;case _:M=pe();break;case u:M=xe();break;case S:M=X();break;case f:M=q();break}if(Ae!==M)switch(Q[Ae]){case`
`:B=0,++H;break;default:++B;break}}return E+=M,Q=Q.slice(M),D}function ee(Se){return R.length&&V(R.join("")),L=T,V("(eof)"),D}function q(){return R=R.length?[]:R,O==="/"&&z==="*"?($=E+M-1,L=l,O=z,M+1):O==="/"&&z==="/"?($=E+M-1,L=m,O=z,M+1):z==="#"?(L=d,$=E+M,M):/\s/.test(z)?(L=S,$=E+M,M):(W=/\d/.test(z),re=/[^\w_]/.test(z),$=E+M,L=W?g:re?b:u,M)}function X(){return/[^\s]/g.test(z)?(V(R.join("")),L=f,M):(R.push(z),O=z,M+1)}function J(){return(z==="\r"||z===`
`)&&O!=="\\"?(V(R.join("")),L=f,M):(R.push(z),O=z,M+1)}function ie(){return J()}function ne(){return z==="/"&&O==="*"?(R.push(z),V(R.join("")),L=f,M+1):(R.push(z),O=z,M+1)}function oe(){if(O==="."&&/\d/.test(z))return L=_,M;if(O==="/"&&z==="*")return L=l,M;if(O==="/"&&z==="/")return L=m,M;if(z==="."&&R.length){for(;se(R););return L=_,M}if(z===";"||z===")"||z==="("){if(R.length)for(;se(R););return V(z),L=f,M+1}var Se=R.length===2&&z!=="=";if(/[\w_\d\s]/.test(z)||Se){for(;se(R););return L=f,M}return R.push(z),O=z,M+1}function se(Se){var Ae=0,Ce,Ee;do{if(Ce=a.indexOf(Se.slice(0,Se.length+Ae).join("")),Ee=a[Ce],Ce===-1){if(Ae--+Se.length>0)continue;Ee=Se.slice(0,1).join("")}return V(Ee),$+=Ee.length,R=R.slice(Ee.length),R.length}while(1)}function me(){return/[^a-fA-F0-9]/.test(z)?(V(R.join("")),L=f,M):(R.push(z),O=z,M+1)}function ce(){return z==="."||/[eE]/.test(z)?(R.push(z),L=_,O=z,M+1):z==="x"&&R.length===1&&R[0]==="0"?(L=x,R.push(z),O=z,M+1):/[^\d]/.test(z)?(V(R.join("")),L=f,M):(R.push(z),O=z,M+1)}function pe(){return z==="f"&&(R.push(z),O=z,M+=1),/[eE]/.test(z)||(z==="-"||z==="+")&&/[eE]/.test(O)?(R.push(z),O=z,M+1):/[^\d]/.test(z)?(V(R.join("")),L=f,M):(R.push(z),O=z,M+1)}function xe(){if(/[^\d\w_]/.test(z)){var Se=R.join("");return ue[Se]?L=c:fe[Se]?L=A:L=p,V(R.join("")),L=f,M}return R.push(z),O=z,M+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(o,h,y){var t=o("./builtins");t=t.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),h.exports=t.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(o,h,y){h.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(o,h,y){var t=o("./literals");h.exports=t.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(o,h,y){h.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(o,h,y){h.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(o,h,y){var t=o("./index");h.exports=a;function a(i,n){var r=t(n),f=[];return f=f.concat(r(i)),f=f.concat(r(null)),f}},{"./index":224}],231:[function(o,h,y){h.exports=function(t){typeof t=="string"&&(t=[t]);for(var a=[].slice.call(arguments,1),i=[],n=0;n<t.length-1;n++)i.push(t[n],a[n]||"");return i.push(t[n]),i.join("")}},{}],232:[function(o,h,y){var t=o("is-browser");function a(){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{i=!1}return i}h.exports=t&&a()},{"is-browser":236}],233:[function(o,h,y){h.exports=b;var t=o("robust-orientation"),a=o("simplicial-complex").compareCells;function i(g,_,p){this.vertices=g,this.adjacent=_,this.boundary=p,this.lastVisited=-1}i.prototype.flip=function(){var g=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=g;var _=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=_};function n(g,_,p){this.vertices=g,this.cell=_,this.index=p}function r(g,_){return a(g.vertices,_.vertices)}function f(g){return function(){var _=this.tuple;return g.apply(this,_)}}function u(g){var _=t[g+1];return _||(_=t),f(_)}var l=[];function m(g,_,p){this.dimension=g,this.vertices=_,this.simplices=p,this.interior=p.filter(function(S){return!S.boundary}),this.tuple=new Array(g+1);for(var A=0;A<=g;++A)this.tuple[A]=this.vertices[A];var c=l[g];c||(c=l[g]=u(g)),this.orient=c}var d=m.prototype;d.handleBoundaryDegeneracy=function(g,_){var p=this.dimension,A=this.vertices.length-1,c=this.tuple,S=this.vertices,T=[g];for(g.lastVisited=-A;T.length>0;){g=T.pop();for(var x=g.adjacent,w=0;w<=p;++w){var v=x[w];if(!(!v.boundary||v.lastVisited<=-A)){for(var C=v.vertices,M=0;M<=p;++M){var E=C[M];E<0?c[M]=_:c[M]=S[E]}var L=this.orient();if(L>0)return v;v.lastVisited=-A,L===0&&T.push(v)}}}return null},d.walk=function(g,_){var p=this.vertices.length-1,A=this.dimension,c=this.vertices,S=this.tuple,T=_?this.interior.length*Math.random()|0:this.interior.length-1,x=this.interior[T];e:for(;!x.boundary;){for(var w=x.vertices,v=x.adjacent,C=0;C<=A;++C)S[C]=c[w[C]];x.lastVisited=p;for(var C=0;C<=A;++C){var M=v[C];if(!(M.lastVisited>=p)){var E=S[C];S[C]=g;var L=this.orient();if(S[C]=E,L<0){x=M;continue e}else M.boundary?M.lastVisited=-p:M.lastVisited=p}}return}return x},d.addPeaks=function(g,_){var p=this.vertices.length-1,A=this.dimension,c=this.vertices,S=this.tuple,T=this.interior,x=this.simplices,w=[_];_.lastVisited=p,_.vertices[_.vertices.indexOf(-1)]=p,_.boundary=!1,T.push(_);for(var v=[];w.length>0;){var _=w.pop(),C=_.vertices,M=_.adjacent,E=C.indexOf(p);if(!(E<0)){for(var L=0;L<=A;++L)if(L!==E){var z=M[L];if(!(!z.boundary||z.lastVisited>=p)){var O=z.vertices;if(z.lastVisited!==-p){for(var R=0,D=0;D<=A;++D)O[D]<0?(R=D,S[D]=g):S[D]=c[O[D]];var H=this.orient();if(H>0){O[R]=p,z.boundary=!1,T.push(z),w.push(z),z.lastVisited=p;continue}else z.lastVisited=-p}var B=z.adjacent,$=C.slice(),W=M.slice(),re=new i($,W,!0);x.push(re);var Q=B.indexOf(_);if(!(Q<0)){B[Q]=re,W[E]=z,$[L]=-1,W[L]=_,M[L]=re,re.flip();for(var D=0;D<=A;++D){var Z=$[D];if(!(Z<0||Z===p)){for(var K=new Array(A-1),le=0,fe=0;fe<=A;++fe){var ue=$[fe];ue<0||fe===D||(K[le++]=ue)}v.push(new n(K,re,D))}}}}}}}v.sort(r);for(var L=0;L+1<v.length;L+=2){var V=v[L],j=v[L+1],ee=V.index,q=j.index;ee<0||q<0||(V.cell.adjacent[V.index]=j.cell,j.cell.adjacent[j.index]=V.cell)}},d.insert=function(g,_){var p=this.vertices;p.push(g);var A=this.walk(g,_);if(!!A){for(var c=this.dimension,S=this.tuple,T=0;T<=c;++T){var x=A.vertices[T];x<0?S[T]=g:S[T]=p[x]}var w=this.orient(S);w<0||w===0&&(A=this.handleBoundaryDegeneracy(A,g),!A)||this.addPeaks(g,A)}},d.boundary=function(){for(var g=this.dimension,_=[],p=this.simplices,A=p.length,c=0;c<A;++c){var S=p[c];if(S.boundary){for(var T=new Array(g),x=S.vertices,w=0,v=0,C=0;C<=g;++C)x[C]>=0?T[w++]=x[C]:v=C&1;if(v===(g&1)){var M=T[0];T[0]=T[1],T[1]=M}_.push(T)}}return _};function b(g,_){var p=g.length;if(p===0)throw new Error("Must have at least d+1 points");var A=g[0].length;if(p<=A)throw new Error("Must input at least d+1 points");var c=g.slice(0,A+1),S=t.apply(void 0,c);if(S===0)throw new Error("Input not in general position");for(var T=new Array(A+1),x=0;x<=A;++x)T[x]=x;S<0&&(T[0]=1,T[1]=0);for(var w=new i(T,new Array(A+1),!1),v=w.adjacent,C=new Array(A+2),x=0;x<=A;++x){for(var M=T.slice(),E=0;E<=A;++E)E===x&&(M[E]=-1);var L=M[0];M[0]=M[1],M[1]=L;var z=new i(M,new Array(A+1),!0);v[x]=z,C[x]=z}C[A+1]=w;for(var x=0;x<=A;++x)for(var M=v[x].vertices,O=v[x].adjacent,E=0;E<=A;++E){var R=M[E];if(R<0){O[E]=w;continue}for(var D=0;D<=A;++D)v[D].vertices.indexOf(R)<0&&(O[E]=v[D])}for(var H=new m(A,c,C),B=!!_,x=A+1;x<p;++x)H.insert(g[x],B);return H.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(o,h,y){var t=o("binary-search-bounds"),a=0,i=1,n=2;h.exports=w;function r(v,C,M,E,L){this.mid=v,this.left=C,this.right=M,this.leftPoints=E,this.rightPoints=L,this.count=(C?C.count:0)+(M?M.count:0)+E.length}var f=r.prototype;function u(v,C){v.mid=C.mid,v.left=C.left,v.right=C.right,v.leftPoints=C.leftPoints,v.rightPoints=C.rightPoints,v.count=C.count}function l(v,C){var M=S(C);v.mid=M.mid,v.left=M.left,v.right=M.right,v.leftPoints=M.leftPoints,v.rightPoints=M.rightPoints,v.count=M.count}function m(v,C){var M=v.intervals([]);M.push(C),l(v,M)}function d(v,C){var M=v.intervals([]),E=M.indexOf(C);return E<0?a:(M.splice(E,1),l(v,M),i)}f.intervals=function(v){return v.push.apply(v,this.leftPoints),this.left&&this.left.intervals(v),this.right&&this.right.intervals(v),v},f.insert=function(v){var C=this.count-this.leftPoints.length;if(this.count+=1,v[1]<this.mid)this.left?4*(this.left.count+1)>3*(C+1)?m(this,v):this.left.insert(v):this.left=S([v]);else if(v[0]>this.mid)this.right?4*(this.right.count+1)>3*(C+1)?m(this,v):this.right.insert(v):this.right=S([v]);else{var M=t.ge(this.leftPoints,v,A),E=t.ge(this.rightPoints,v,c);this.leftPoints.splice(M,0,v),this.rightPoints.splice(E,0,v)}},f.remove=function(v){var C=this.count-this.leftPoints;if(v[1]<this.mid){if(!this.left)return a;var M=this.right?this.right.count:0;if(4*M>3*(C-1))return d(this,v);var E=this.left.remove(v);return E===n?(this.left=null,this.count-=1,i):(E===i&&(this.count-=1),E)}else if(v[0]>this.mid){if(!this.right)return a;var L=this.left?this.left.count:0;if(4*L>3*(C-1))return d(this,v);var E=this.right.remove(v);return E===n?(this.right=null,this.count-=1,i):(E===i&&(this.count-=1),E)}else{if(this.count===1)return this.leftPoints[0]===v?n:a;if(this.leftPoints.length===1&&this.leftPoints[0]===v){if(this.left&&this.right){for(var z=this,O=this.left;O.right;)z=O,O=O.right;if(z===this)O.right=this.right;else{var R=this.left,E=this.right;z.count-=O.count,z.right=O.left,O.left=R,O.right=E}u(this,O),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?u(this,this.left):u(this,this.right);return i}for(var R=t.ge(this.leftPoints,v,A);R<this.leftPoints.length&&this.leftPoints[R][0]===v[0];++R)if(this.leftPoints[R]===v){this.count-=1,this.leftPoints.splice(R,1);for(var E=t.ge(this.rightPoints,v,c);E<this.rightPoints.length&&this.rightPoints[E][1]===v[1];++E)if(this.rightPoints[E]===v)return this.rightPoints.splice(E,1),i}return a}};function b(v,C,M){for(var E=0;E<v.length&&v[E][0]<=C;++E){var L=M(v[E]);if(L)return L}}function g(v,C,M){for(var E=v.length-1;E>=0&&v[E][1]>=C;--E){var L=M(v[E]);if(L)return L}}function _(v,C){for(var M=0;M<v.length;++M){var E=C(v[M]);if(E)return E}}f.queryPoint=function(v,C){if(v<this.mid){if(this.left){var M=this.left.queryPoint(v,C);if(M)return M}return b(this.leftPoints,v,C)}else if(v>this.mid){if(this.right){var M=this.right.queryPoint(v,C);if(M)return M}return g(this.rightPoints,v,C)}else return _(this.leftPoints,C)},f.queryInterval=function(v,C,M){if(v<this.mid&&this.left){var E=this.left.queryInterval(v,C,M);if(E)return E}if(C>this.mid&&this.right){var E=this.right.queryInterval(v,C,M);if(E)return E}return C<this.mid?b(this.leftPoints,C,M):v>this.mid?g(this.rightPoints,v,M):_(this.leftPoints,M)};function p(v,C){return v-C}function A(v,C){var M=v[0]-C[0];return M||v[1]-C[1]}function c(v,C){var M=v[1]-C[1];return M||v[0]-C[0]}function S(v){if(v.length===0)return null;for(var C=[],M=0;M<v.length;++M)C.push(v[M][0],v[M][1]);C.sort(p);for(var E=C[C.length>>1],L=[],z=[],O=[],M=0;M<v.length;++M){var R=v[M];R[1]<E?L.push(R):E<R[0]?z.push(R):O.push(R)}var D=O,H=O.slice();return D.sort(A),H.sort(c),new r(E,S(L),S(z),D,H)}function T(v){this.root=v}var x=T.prototype;x.insert=function(v){this.root?this.root.insert(v):this.root=new r(v[0],null,null,[v],[v])},x.remove=function(v){if(this.root){var C=this.root.remove(v);return C===n&&(this.root=null),C!==a}return!1},x.queryPoint=function(v,C){if(this.root)return this.root.queryPoint(v,C)},x.queryInterval=function(v,C,M){if(v<=C&&this.root)return this.root.queryInterval(v,C,M)},Object.defineProperty(x,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(x,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function w(v){return!v||v.length===0?new T(null):new T(S(v))}},{"binary-search-bounds":31}],235:[function(o,h,y){function t(a){for(var i=new Array(a),n=0;n<a;++n)i[n]=n;return i}h.exports=t},{}],236:[function(o,h,y){h.exports=!0},{}],237:[function(o,h,y){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */h.exports=function(i){return i!=null&&(t(i)||a(i)||!!i._isBuffer)};function t(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function a(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&t(i.slice(0,0))}},{}],238:[function(o,h,y){h.exports=i,h.exports.isMobile=i,h.exports.default=i;var t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(n){n||(n={});var r=n.ua;if(!r&&typeof navigator!="undefined"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var f=n.tablet?a.test(r):t.test(r);return!f&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(f=!0),f}},{}],239:[function(o,h,y){h.exports=function(t){for(var a=t.length,i,n=0;n<a;n++)if(i=t.charCodeAt(n),(i<9||i>13)&&i!==32&&i!==133&&i!==160&&i!==5760&&i!==6158&&(i<8192||i>8205)&&i!==8232&&i!==8233&&i!==8239&&i!==8287&&i!==8288&&i!==12288&&i!==65279)return!1;return!0}},{}],240:[function(o,h,y){function t(a,i,n){return a*(1-n)+i*n}h.exports=t},{}],241:[function(o,h,y){var t=o("./normalize"),a=o("gl-mat4/create"),i=o("gl-mat4/clone"),n=o("gl-mat4/determinant"),r=o("gl-mat4/invert"),f=o("gl-mat4/transpose"),u={length:o("gl-vec3/length"),normalize:o("gl-vec3/normalize"),dot:o("gl-vec3/dot"),cross:o("gl-vec3/cross")},l=a(),m=a(),d=[0,0,0,0],b=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];h.exports=function(S,T,x,w,v,C){if(T||(T=[0,0,0]),x||(x=[0,0,0]),w||(w=[0,0,0]),v||(v=[0,0,0,1]),C||(C=[0,0,0,1]),!t(l,S)||(i(m,l),m[3]=0,m[7]=0,m[11]=0,m[15]=1,Math.abs(n(m)<1e-8)))return!1;var M=l[3],E=l[7],L=l[11],z=l[12],O=l[13],R=l[14],D=l[15];if(M!==0||E!==0||L!==0){d[0]=M,d[1]=E,d[2]=L,d[3]=D;var H=r(m,m);if(!H)return!1;f(m,m),_(v,d,m)}else v[0]=v[1]=v[2]=0,v[3]=1;if(T[0]=z,T[1]=O,T[2]=R,p(b,l),x[0]=u.length(b[0]),u.normalize(b[0],b[0]),w[0]=u.dot(b[0],b[1]),A(b[1],b[1],b[0],1,-w[0]),x[1]=u.length(b[1]),u.normalize(b[1],b[1]),w[0]/=x[1],w[1]=u.dot(b[0],b[2]),A(b[2],b[2],b[0],1,-w[1]),w[2]=u.dot(b[1],b[2]),A(b[2],b[2],b[1],1,-w[2]),x[2]=u.length(b[2]),u.normalize(b[2],b[2]),w[1]/=x[2],w[2]/=x[2],u.cross(g,b[1],b[2]),u.dot(b[0],g)<0)for(var B=0;B<3;B++)x[B]*=-1,b[B][0]*=-1,b[B][1]*=-1,b[B][2]*=-1;return C[0]=.5*Math.sqrt(Math.max(1+b[0][0]-b[1][1]-b[2][2],0)),C[1]=.5*Math.sqrt(Math.max(1-b[0][0]+b[1][1]-b[2][2],0)),C[2]=.5*Math.sqrt(Math.max(1-b[0][0]-b[1][1]+b[2][2],0)),C[3]=.5*Math.sqrt(Math.max(1+b[0][0]+b[1][1]+b[2][2],0)),b[2][1]>b[1][2]&&(C[0]=-C[0]),b[0][2]>b[2][0]&&(C[1]=-C[1]),b[1][0]>b[0][1]&&(C[2]=-C[2]),!0};function _(c,S,T){var x=S[0],w=S[1],v=S[2],C=S[3];return c[0]=T[0]*x+T[4]*w+T[8]*v+T[12]*C,c[1]=T[1]*x+T[5]*w+T[9]*v+T[13]*C,c[2]=T[2]*x+T[6]*w+T[10]*v+T[14]*C,c[3]=T[3]*x+T[7]*w+T[11]*v+T[15]*C,c}function p(c,S){c[0][0]=S[0],c[0][1]=S[1],c[0][2]=S[2],c[1][0]=S[4],c[1][1]=S[5],c[1][2]=S[6],c[2][0]=S[8],c[2][1]=S[9],c[2][2]=S[10]}function A(c,S,T,x,w){c[0]=S[0]*x+T[0]*w,c[1]=S[1]*x+T[1]*w,c[2]=S[2]*x+T[2]*w}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(o,h,y){h.exports=function(a,i){var n=i[15];if(n===0)return!1;for(var r=1/n,f=0;f<16;f++)a[f]=i[f]*r;return!0}},{}],243:[function(o,h,y){var t=o("gl-vec3/lerp"),a=o("mat4-recompose"),i=o("mat4-decompose"),n=o("gl-mat4/determinant"),r=o("quat-slerp"),f=d(),u=d(),l=d();h.exports=m;function m(_,p,A,c){if(n(p)===0||n(A)===0)return!1;var S=i(p,f.translate,f.scale,f.skew,f.perspective,f.quaternion),T=i(A,u.translate,u.scale,u.skew,u.perspective,u.quaternion);return!S||!T?!1:(t(l.translate,f.translate,u.translate,c),t(l.skew,f.skew,u.skew,c),t(l.scale,f.scale,u.scale,c),t(l.perspective,f.perspective,u.perspective,c),r(l.quaternion,f.quaternion,u.quaternion,c),a(_,l.translate,l.scale,l.skew,l.perspective,l.quaternion),!0)}function d(){return{translate:b(),scale:b(1),skew:b(),perspective:g(),quaternion:g()}}function b(_){return[_||0,_||0,_||0]}function g(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(o,h,y){var t={identity:o("gl-mat4/identity"),translate:o("gl-mat4/translate"),multiply:o("gl-mat4/multiply"),create:o("gl-mat4/create"),scale:o("gl-mat4/scale"),fromRotationTranslation:o("gl-mat4/fromRotationTranslation")};t.create();var a=t.create();h.exports=function(n,r,f,u,l,m){return t.identity(n),t.fromRotationTranslation(n,m,r),n[3]=l[0],n[7]=l[1],n[11]=l[2],n[15]=l[3],t.identity(a),u[2]!==0&&(a[9]=u[2],t.multiply(n,n,a)),u[1]!==0&&(a[9]=0,a[8]=u[1],t.multiply(n,n,a)),u[0]!==0&&(a[8]=0,a[4]=u[0],t.multiply(n,n,a)),t.scale(n,n,f),n}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(o,h,y){var t=o("binary-search-bounds"),a=o("mat4-interpolate"),i=o("gl-mat4/invert"),n=o("gl-mat4/rotateX"),r=o("gl-mat4/rotateY"),f=o("gl-mat4/rotateZ"),u=o("gl-mat4/lookAt"),l=o("gl-mat4/translate");o("gl-mat4/scale");var m=o("gl-vec3/normalize"),d=[0,0,0];h.exports=p;function b(A){this._components=A.slice(),this._time=[0],this.prevMatrix=A.slice(),this.nextMatrix=A.slice(),this.computedMatrix=A.slice(),this.computedInverse=A.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var g=b.prototype;g.recalcMatrix=function(A){var c=this._time,S=t.le(c,A),T=this.computedMatrix;if(!(S<0)){var x=this._components;if(S===c.length-1)for(var w=16*S,v=0;v<16;++v)T[v]=x[w++];else{for(var C=c[S+1]-c[S],w=16*S,M=this.prevMatrix,E=!0,v=0;v<16;++v)M[v]=x[w++];for(var L=this.nextMatrix,v=0;v<16;++v)L[v]=x[w++],E=E&&M[v]===L[v];if(C<1e-6||E)for(var v=0;v<16;++v)T[v]=M[v];else a(T,M,L,(A-c[S])/C)}var z=this.computedUp;z[0]=T[1],z[1]=T[5],z[2]=T[9],m(z,z);var O=this.computedInverse;i(O,T);var R=this.computedEye,D=O[15];R[0]=O[12]/D,R[1]=O[13]/D,R[2]=O[14]/D;for(var H=this.computedCenter,B=Math.exp(this.computedRadius[0]),v=0;v<3;++v)H[v]=R[v]-T[2+4*v]*B}},g.idle=function(A){if(!(A<this.lastT())){for(var c=this._components,S=c.length-16,T=0;T<16;++T)c.push(c[S++]);this._time.push(A)}},g.flush=function(A){var c=t.gt(this._time,A)-2;c<0||(this._time.splice(0,c),this._components.splice(0,16*c))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(A,c,S,T){this.recalcMatrix(A),c=c||this.computedEye,S=S||d,T=T||this.computedUp,this.setMatrix(A,u(this.computedMatrix,c,S,T));for(var x=0,w=0;w<3;++w)x+=Math.pow(S[w]-c[w],2);x=Math.log(Math.sqrt(x)),this.computedRadius[0]=x},g.rotate=function(A,c,S,T){this.recalcMatrix(A);var x=this.computedInverse;c&&r(x,x,c),S&&n(x,x,S),T&&f(x,x,T),this.setMatrix(A,i(this.computedMatrix,x))};var _=[0,0,0];g.pan=function(A,c,S,T){_[0]=-(c||0),_[1]=-(S||0),_[2]=-(T||0),this.recalcMatrix(A);var x=this.computedInverse;l(x,x,_),this.setMatrix(A,i(x,x))},g.translate=function(A,c,S,T){_[0]=c||0,_[1]=S||0,_[2]=T||0,this.recalcMatrix(A);var x=this.computedMatrix;l(x,x,_),this.setMatrix(A,x)},g.setMatrix=function(A,c){if(!(A<this.lastT())){this._time.push(A);for(var S=0;S<16;++S)this._components.push(c[S])}},g.setDistance=function(A,c){this.computedRadius[0]=c},g.setDistanceLimits=function(A,c){var S=this._limits;S[0]=A,S[1]=c},g.getDistanceLimits=function(A){var c=this._limits;return A?(A[0]=c[0],A[1]=c[1],A):c};function p(A){A=A||{};var c=A.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new b(c)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(o,h,y){h.exports=a;var t=o("robust-orientation")[3];function a(i){var n=i.length;if(n<3){for(var g=new Array(n),r=0;r<n;++r)g[r]=r;return n===2&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:g}for(var f=new Array(n),r=0;r<n;++r)f[r]=r;f.sort(function(c,S){var T=i[c][0]-i[S][0];return T||i[c][1]-i[S][1]});for(var u=[f[0],f[1]],l=[f[0],f[1]],r=2;r<n;++r){for(var m=f[r],d=i[m],b=u.length;b>1&&t(i[u[b-2]],i[u[b-1]],d)<=0;)b-=1,u.pop();for(u.push(m),b=l.length;b>1&&t(i[l[b-2]],i[l[b-1]],d)>=0;)b-=1,l.pop();l.push(m)}for(var g=new Array(l.length+u.length-2),_=0,r=0,p=u.length;r<p;++r)g[_++]=u[r];for(var A=l.length-2;A>0;--A)g[_++]=l[A];return g}},{"robust-orientation":284}],247:[function(o,h,y){h.exports=a;var t=o("mouse-event");function a(i,n){n||(n=i,i=window);var r=0,f=0,u=0,l={shift:!1,alt:!1,control:!1,meta:!1},m=!1;function d(v){var C=!1;return"altKey"in v&&(C=C||v.altKey!==l.alt,l.alt=!!v.altKey),"shiftKey"in v&&(C=C||v.shiftKey!==l.shift,l.shift=!!v.shiftKey),"ctrlKey"in v&&(C=C||v.ctrlKey!==l.control,l.control=!!v.ctrlKey),"metaKey"in v&&(C=C||v.metaKey!==l.meta,l.meta=!!v.metaKey),C}function b(v,C){var M=t.x(C),E=t.y(C);"buttons"in C&&(v=C.buttons|0),(v!==r||M!==f||E!==u||d(C))&&(r=v|0,f=M||0,u=E||0,n&&n(r,f,u,l))}function g(v){b(0,v)}function _(){(r||f||u||l.shift||l.alt||l.meta||l.control)&&(f=u=0,r=0,l.shift=l.alt=l.control=l.meta=!1,n&&n(0,0,0,l))}function p(v){d(v)&&n&&n(r,f,u,l)}function A(v){t.buttons(v)===0?b(0,v):b(r,v)}function c(v){b(r|t.buttons(v),v)}function S(v){b(r&~t.buttons(v),v)}function T(){m||(m=!0,i.addEventListener("mousemove",A),i.addEventListener("mousedown",c),i.addEventListener("mouseup",S),i.addEventListener("mouseleave",g),i.addEventListener("mouseenter",g),i.addEventListener("mouseout",g),i.addEventListener("mouseover",g),i.addEventListener("blur",_),i.addEventListener("keyup",p),i.addEventListener("keydown",p),i.addEventListener("keypress",p),i!==window&&(window.addEventListener("blur",_),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}function x(){!m||(m=!1,i.removeEventListener("mousemove",A),i.removeEventListener("mousedown",c),i.removeEventListener("mouseup",S),i.removeEventListener("mouseleave",g),i.removeEventListener("mouseenter",g),i.removeEventListener("mouseout",g),i.removeEventListener("mouseover",g),i.removeEventListener("blur",_),i.removeEventListener("keyup",p),i.removeEventListener("keydown",p),i.removeEventListener("keypress",p),i!==window&&(window.removeEventListener("blur",_),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))}T();var w={element:i};return Object.defineProperties(w,{enabled:{get:function(){return m},set:function(v){v?T():x()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),w}},{"mouse-event":249}],248:[function(o,h,y){var t={left:0,top:0};h.exports=a;function a(n,r,f){r=r||n.currentTarget||n.srcElement,Array.isArray(f)||(f=[0,0]);var u=n.clientX||0,l=n.clientY||0,m=i(r);return f[0]=u-m.left,f[1]=l-m.top,f}function i(n){return n===window||n===document||n===document.body?t:n.getBoundingClientRect()}},{}],249:[function(o,h,y){function t(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){var f=r.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in r){var f=r.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}y.buttons=t;function a(r){return r.target||r.srcElement||window}y.element=a;function i(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var f=a(r),u=f.getBoundingClientRect();return r.clientX-u.left}return 0}y.x=i;function n(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var f=a(r),u=f.getBoundingClientRect();return r.clientY-u.top}return 0}y.y=n},{}],250:[function(o,h,y){var t=o("to-px");h.exports=a;function a(i,n,r){typeof i=="function"&&(r=!!n,n=i,i=window);var f=t("ex",i),u=function(l){r&&l.preventDefault();var m=l.deltaX||0,d=l.deltaY||0,b=l.deltaZ||0,g=l.deltaMode,_=1;switch(g){case 1:_=f;break;case 2:_=window.innerHeight;break}if(m*=_,d*=_,b*=_,m||d||b)return n(m,d,b,l)};return i.addEventListener("wheel",u),u}},{"to-px":304}],251:[function(o,h,y){var t=o("typedarray-pool");h.exports=n;var a={"false,0,1":function(f,u,l,m,d){return function(g,_,p,A){var c=g.shape[0]|0,S=g.shape[1]|0,T=g.data,x=g.offset|0,w=g.stride[0]|0,v=g.stride[1]|0,C=x,M,E=-w|0,L=0,z=-v|0,O=0,R=-w-v|0,D=0,H=w|0,B=v-w*c|0,$=0,W=0,re=0,Q=2*c|0,Z=m(Q),K=m(Q),le=0,fe=0,ue=-1,V=-1,j=0,ee=-c|0,q=c|0,X=0,J=-c-1|0,ie=c-1|0,ne=0,oe=0,se=0;for($=0;$<c;++$)Z[le++]=l(T[C],_,p,A),C+=H;if(C+=B,S>0){if(W=1,Z[le++]=l(T[C],_,p,A),C+=H,c>0)for($=1,M=T[C],fe=Z[le]=l(M,_,p,A),j=Z[le+ue],X=Z[le+ee],ne=Z[le+J],(fe!==j||fe!==X||fe!==ne)&&(L=T[C+E],O=T[C+z],D=T[C+R],f($,W,M,L,O,D,fe,j,X,ne,_,p,A),oe=K[le]=re++),le+=1,C+=H,$=2;$<c;++$)M=T[C],fe=Z[le]=l(M,_,p,A),j=Z[le+ue],X=Z[le+ee],ne=Z[le+J],(fe!==j||fe!==X||fe!==ne)&&(L=T[C+E],O=T[C+z],D=T[C+R],f($,W,M,L,O,D,fe,j,X,ne,_,p,A),oe=K[le]=re++,ne!==j&&u(K[le+ue],oe,D,L,ne,j,_,p,A)),le+=1,C+=H;for(C+=B,le=0,se=ue,ue=V,V=se,se=ee,ee=q,q=se,se=J,J=ie,ie=se,W=2;W<S;++W){if(Z[le++]=l(T[C],_,p,A),C+=H,c>0)for($=1,M=T[C],fe=Z[le]=l(M,_,p,A),j=Z[le+ue],X=Z[le+ee],ne=Z[le+J],(fe!==j||fe!==X||fe!==ne)&&(L=T[C+E],O=T[C+z],D=T[C+R],f($,W,M,L,O,D,fe,j,X,ne,_,p,A),oe=K[le]=re++,ne!==X&&u(K[le+ee],oe,O,D,X,ne,_,p,A)),le+=1,C+=H,$=2;$<c;++$)M=T[C],fe=Z[le]=l(M,_,p,A),j=Z[le+ue],X=Z[le+ee],ne=Z[le+J],(fe!==j||fe!==X||fe!==ne)&&(L=T[C+E],O=T[C+z],D=T[C+R],f($,W,M,L,O,D,fe,j,X,ne,_,p,A),oe=K[le]=re++,ne!==X&&u(K[le+ee],oe,O,D,X,ne,_,p,A),ne!==j&&u(K[le+ue],oe,D,L,ne,j,_,p,A)),le+=1,C+=H;W&1&&(le=0),se=ue,ue=V,V=se,se=ee,ee=q,q=se,se=J,J=ie,ie=se,C+=B}}d(K),d(Z)}},"false,1,0":function(f,u,l,m,d){return function(g,_,p,A){var c=g.shape[0]|0,S=g.shape[1]|0,T=g.data,x=g.offset|0,w=g.stride[0]|0,v=g.stride[1]|0,C=x,M,E=-w|0,L=0,z=-v|0,O=0,R=-w-v|0,D=0,H=v|0,B=w-v*S|0,$=0,W=0,re=0,Q=2*S|0,Z=m(Q),K=m(Q),le=0,fe=0,ue=-1,V=-1,j=0,ee=-S|0,q=S|0,X=0,J=-S-1|0,ie=S-1|0,ne=0,oe=0,se=0;for(W=0;W<S;++W)Z[le++]=l(T[C],_,p,A),C+=H;if(C+=B,c>0){if($=1,Z[le++]=l(T[C],_,p,A),C+=H,S>0)for(W=1,M=T[C],fe=Z[le]=l(M,_,p,A),X=Z[le+ee],j=Z[le+ue],ne=Z[le+J],(fe!==X||fe!==j||fe!==ne)&&(L=T[C+E],O=T[C+z],D=T[C+R],f($,W,M,L,O,D,fe,X,j,ne,_,p,A),oe=K[le]=re++),le+=1,C+=H,W=2;W<S;++W)M=T[C],fe=Z[le]=l(M,_,p,A),X=Z[le+ee],j=Z[le+ue],ne=Z[le+J],(fe!==X||fe!==j||fe!==ne)&&(L=T[C+E],O=T[C+z],D=T[C+R],f($,W,M,L,O,D,fe,X,j,ne,_,p,A),oe=K[le]=re++,ne!==j&&u(K[le+ue],oe,O,D,j,ne,_,p,A)),le+=1,C+=H;for(C+=B,le=0,se=ee,ee=q,q=se,se=ue,ue=V,V=se,se=J,J=ie,ie=se,$=2;$<c;++$){if(Z[le++]=l(T[C],_,p,A),C+=H,S>0)for(W=1,M=T[C],fe=Z[le]=l(M,_,p,A),X=Z[le+ee],j=Z[le+ue],ne=Z[le+J],(fe!==X||fe!==j||fe!==ne)&&(L=T[C+E],O=T[C+z],D=T[C+R],f($,W,M,L,O,D,fe,X,j,ne,_,p,A),oe=K[le]=re++,ne!==X&&u(K[le+ee],oe,D,L,ne,X,_,p,A)),le+=1,C+=H,W=2;W<S;++W)M=T[C],fe=Z[le]=l(M,_,p,A),X=Z[le+ee],j=Z[le+ue],ne=Z[le+J],(fe!==X||fe!==j||fe!==ne)&&(L=T[C+E],O=T[C+z],D=T[C+R],f($,W,M,L,O,D,fe,X,j,ne,_,p,A),oe=K[le]=re++,ne!==j&&u(K[le+ue],oe,O,D,j,ne,_,p,A),ne!==X&&u(K[le+ee],oe,D,L,ne,X,_,p,A)),le+=1,C+=H;$&1&&(le=0),se=ee,ee=q,q=se,se=ue,ue=V,V=se,se=J,J=ie,ie=se,C+=B}}d(K),d(Z)}}};function i(r,f,u,l,m,d){var b=[d,m].join(","),g=a[b];return g(r,f,u,t.mallocUint32,t.freeUint32)}function n(r){function f(_){throw new Error("ndarray-extract-contour: "+_)}typeof r!="object"&&f("Must specify arguments");var u=r.order;Array.isArray(u)||f("Must specify order");var l=r.arrayArguments||1;l<1&&f("Must have at least one array argument");var m=r.scalarArguments||0;m<0&&f("Scalar arg count must be > 0"),typeof r.vertex!="function"&&f("Must specify vertex creation function"),typeof r.cell!="function"&&f("Must specify cell creation function"),typeof r.phase!="function"&&f("Must specify phase function");for(var d=r.getters||[],b=new Array(l),g=0;g<l;++g)d.indexOf(g)>=0?b[g]=!0:b[g]=!1;return i(r.vertex,r.cell,r.phase,m,u,b)}},{"typedarray-pool":308}],252:[function(o,h,y){var t=o("dup"),a={zero:function(p,A,c,S){var T=p[0],x=c[0];S|=0;var w=0,v=x;for(w=0;w<T;++w)A[S]=0,S+=v},fdTemplate1:function(p,A,c,S,T,x,w){var v=p[0],C=c[0],M=x[0],E=-1*C,L=C;S|=0,w|=0;var z=0,O=C,R=M;for(z=0;z<v;++z)T[w]=.5*(A[S+E]-A[S+L]),S+=O,w+=R},fdTemplate2:function(p,A,c,S,T,x,w,v,C,M){var E=p[0],L=p[1],z=c[0],O=c[1],R=x[0],D=x[1],H=C[0],B=C[1],$=-1*z,W=z,re=-1*O,Q=O;S|=0,w|=0,M|=0;var Z=0,K=0,le=O,fe=z-L*O,ue=D,V=R-L*D,j=B,ee=H-L*B;for(K=0;K<E;++K){for(Z=0;Z<L;++Z)T[w]=.5*(A[S+$]-A[S+W]),v[M]=.5*(A[S+re]-A[S+Q]),S+=le,w+=ue,M+=j;S+=fe,w+=V,M+=ee}}},i={cdiff:function(p){var A={};return function(S,T,x){var w=S.dtype,v=S.order,C=T.dtype,M=T.order,E=x.dtype,L=x.order,z=[w,v.join(),C,M.join(),E,L.join()].join(),O=A[z];return O||(A[z]=O=p([w,v,C,M,E,L])),O(S.shape.slice(0),S.data,S.stride,S.offset|0,T.data,T.stride,T.offset|0,x.data,x.stride,x.offset|0)}},zero:function(p){var A={};return function(S){var T=S.dtype,x=S.order,w=[T,x.join()].join(),v=A[w];return v||(A[w]=v=p([T,x])),v(S.shape.slice(0),S.data,S.stride,S.offset|0)}},fdTemplate1:function(p){var A={};return function(S,T){var x=S.dtype,w=S.order,v=T.dtype,C=T.order,M=[x,w.join(),v,C.join()].join(),E=A[M];return E||(A[M]=E=p([x,w,v,C])),E(S.shape.slice(0),S.data,S.stride,S.offset|0,T.data,T.stride,T.offset|0)}},fdTemplate2:function(p){var A={};return function(S,T,x){var w=S.dtype,v=S.order,C=T.dtype,M=T.order,E=x.dtype,L=x.order,z=[w,v.join(),C,M.join(),E,L.join()].join(),O=A[z];return O||(A[z]=O=p([w,v,C,M,E,L])),O(S.shape.slice(0),S.data,S.stride,S.offset|0,T.data,T.stride,T.offset|0,x.data,x.stride,x.offset|0)}}};function n(p){var A=i[p.funcName];return A(r.bind(void 0,p))}function r(p){return a[p.funcName]}function f(p){return n({funcName:p.funcName})}var u={},l={},m=f({funcName:"cdiff"}),d=f({funcName:"zero"});function b(p){return p in u?u[p]:u[p]=f({funcName:"fdTemplate"+p})}function g(p,A,c,S){return function(T,x){var w=x.shape.slice();return w[0]>2&&w[1]>2&&S(x.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),T.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),T.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(c(x.pick(0,-1).lo(1).hi(w[1]-2),T.pick(0,-1,1).lo(1).hi(w[1]-2)),A(T.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(c(x.pick(w[0]-1,-1).lo(1).hi(w[1]-2),T.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),A(T.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(c(x.pick(-1,0).lo(1).hi(w[0]-2),T.pick(-1,0,0).lo(1).hi(w[0]-2)),A(T.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(c(x.pick(-1,w[1]-1).lo(1).hi(w[0]-2),T.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),A(T.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),T.set(0,0,0,0),T.set(0,0,1,0),T.set(w[0]-1,0,0,0),T.set(w[0]-1,0,1,0),T.set(0,w[1]-1,0,0),T.set(0,w[1]-1,1,0),T.set(w[0]-1,w[1]-1,0,0),T.set(w[0]-1,w[1]-1,1,0),T}}function _(p){var A=p.join(),w=l[A];if(w)return w;for(var c=p.length,S=[m,d],T=1;T<=c;++T)S.push(b(T));var x=g,w=x.apply(void 0,S);return l[A]=w,w}h.exports=function(A,c,S){if(Array.isArray(S)||(typeof S=="string"?S=t(c.dimension,S):S=t(c.dimension,"clamp")),c.size===0)return A;if(c.dimension===0)return A.set(0),A;var T=_(S);return T(A,c)}},{dup:65}],253:[function(o,h,y){function t(f,u){var l=Math.floor(u),m=u-l,d=0<=l&&l<f.shape[0],b=0<=l+1&&l+1<f.shape[0],g=d?+f.get(l):0,_=b?+f.get(l+1):0;return(1-m)*g+m*_}function a(f,u,l){var m=Math.floor(u),d=u-m,b=0<=m&&m<f.shape[0],g=0<=m+1&&m+1<f.shape[0],_=Math.floor(l),p=l-_,A=0<=_&&_<f.shape[1],c=0<=_+1&&_+1<f.shape[1],S=b&&A?f.get(m,_):0,T=b&&c?f.get(m,_+1):0,x=g&&A?f.get(m+1,_):0,w=g&&c?f.get(m+1,_+1):0;return(1-p)*((1-d)*S+d*x)+p*((1-d)*T+d*w)}function i(f,u,l,m){var d=Math.floor(u),b=u-d,g=0<=d&&d<f.shape[0],_=0<=d+1&&d+1<f.shape[0],p=Math.floor(l),A=l-p,c=0<=p&&p<f.shape[1],S=0<=p+1&&p+1<f.shape[1],T=Math.floor(m),x=m-T,w=0<=T&&T<f.shape[2],v=0<=T+1&&T+1<f.shape[2],C=g&&c&&w?f.get(d,p,T):0,M=g&&S&&w?f.get(d,p+1,T):0,E=_&&c&&w?f.get(d+1,p,T):0,L=_&&S&&w?f.get(d+1,p+1,T):0,z=g&&c&&v?f.get(d,p,T+1):0,O=g&&S&&v?f.get(d,p+1,T+1):0,R=_&&c&&v?f.get(d+1,p,T+1):0,D=_&&S&&v?f.get(d+1,p+1,T+1):0;return(1-x)*((1-A)*((1-b)*C+b*E)+A*((1-b)*M+b*L))+x*((1-A)*((1-b)*z+b*R)+A*((1-b)*O+b*D))}function n(f){var u=f.shape.length|0,l=new Array(u),m=new Array(u),d=new Array(u),b=new Array(u),g,_;for(g=0;g<u;++g)_=+arguments[g+1],l[g]=Math.floor(_),m[g]=_-l[g],d[g]=0<=l[g]&&l[g]<f.shape[g],b[g]=0<=l[g]+1&&l[g]+1<f.shape[g];var p=0,A,c,S;e:for(g=0;g<1<<u;++g){for(c=1,S=f.offset,A=0;A<u;++A)if(g&1<<A){if(!b[A])continue e;c*=m[A],S+=f.stride[A]*(l[A]+1)}else{if(!d[A])continue e;c*=1-m[A],S+=f.stride[A]*l[A]}p+=c*f.data[S]}return p}function r(f,u,l,m){switch(f.shape.length){case 0:return 0;case 1:return t(f,u);case 2:return a(f,u,l);case 3:return i(f,u,l,m);default:return n.apply(void 0,arguments)}}h.exports=r,h.exports.d1=t,h.exports.d2=a,h.exports.d3=i},{}],254:[function(o,h,y){var t={"float64,2,1,0":function(){return function(m,d,b,g,_){var p=m[0],A=m[1],c=m[2],S=b[0],T=b[1],x=b[2];g|=0;var w=0,v=0,C=0,M=x,E=T-c*x,L=S-A*T;for(C=0;C<p;++C){for(v=0;v<A;++v){for(w=0;w<c;++w)d[g]/=_,g+=M;g+=E}g+=L}}},"uint8,2,0,1,float64,2,1,0":function(){return function(m,d,b,g,_,p,A,c){var S=m[0],T=m[1],x=m[2],w=b[0],v=b[1],C=b[2],M=p[0],E=p[1],L=p[2];g|=0,A|=0;for(var z=g,O=A,R=m[0]|0;R>0;){R<64?(S=R,R=0):(S=64,R-=64);for(var D=m[1]|0;D>0;){D<64?(T=D,D=0):(T=64,D-=64),g=z+R*w+D*v,A=O+R*M+D*E;var H=0,B=0,$=0,W=C,re=w-x*C,Q=v-S*w,Z=L,K=M-x*L,le=E-S*M;for($=0;$<T;++$){for(B=0;B<S;++B){for(H=0;H<x;++H)d[g]=_[A]*c,g+=W,A+=Z;g+=re,A+=K}g+=Q,A+=le}}}}},"float32,1,0,float32,1,0":function(){return function(m,d,b,g,_,p,A){var c=m[0],S=m[1],T=b[0],x=b[1],w=p[0],v=p[1];g|=0,A|=0;var C=0,M=0,E=x,L=T-S*x,z=v,O=w-S*v;for(M=0;M<c;++M){for(C=0;C<S;++C)d[g]=_[A],g+=E,A+=z;g+=L,A+=O}}},"float32,1,0,float32,0,1":function(){return function(m,d,b,g,_,p,A){var c=m[0],S=m[1],T=b[0],x=b[1],w=p[0],v=p[1];g|=0,A|=0;for(var C=g,M=A,E=m[1]|0;E>0;){E<64?(S=E,E=0):(S=64,E-=64);for(var L=m[0]|0;L>0;){L<64?(c=L,L=0):(c=64,L-=64),g=C+E*x+L*T,A=M+E*v+L*w;var z=0,O=0,R=x,D=T-S*x,H=v,B=w-S*v;for(O=0;O<c;++O){for(z=0;z<S;++z)d[g]=_[A],g+=R,A+=H;g+=D,A+=B}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(m,d,b,g,_,p,A){var c=m[0],S=m[1],T=m[2],x=b[0],w=b[1],v=b[2],C=p[0],M=p[1],E=p[2];g|=0,A|=0;for(var L=g,z=A,O=m[2]|0;O>0;){O<64?(T=O,O=0):(T=64,O-=64);for(var R=m[0]|0;R>0;){R<64?(c=R,R=0):(c=64,R-=64);for(var D=m[1]|0;D>0;){D<64?(S=D,D=0):(S=64,D-=64),g=L+O*v+R*x+D*w,A=z+O*E+R*C+D*M;var H=0,B=0,$=0,W=v,re=x-T*v,Q=w-c*x,Z=E,K=C-T*E,le=M-c*C;for($=0;$<S;++$){for(B=0;B<c;++B){for(H=0;H<T;++H)d[g]=_[A],g+=W,A+=Z;g+=re,A+=K}g+=Q,A+=le}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(m,d,b,g,_,p,A){var c=m[0],S=m[1],T=m[2],x=b[0],w=b[1],v=b[2],C=p[0],M=p[1],E=p[2];g|=0,A|=0;var L=0,z=0,O=0,R=v,D=x-T*v,H=w-c*x,B=E,$=C-T*E,W=M-c*C;for(O=0;O<S;++O){for(z=0;z<c;++z){for(L=0;L<T;++L)d[g]=_[A],g+=R,A+=B;g+=D,A+=$}g+=H,A+=W}}}};function a(l,m){var d=m.join(","),b=t[d];return b()}var i=a,n={mul:function(l){var m={};return function(b,g,_){var p=b.dtype,A=b.order,c=g.dtype,S=g.order,T=_.dtype,x=_.order,w=[p,A.join(),c,S.join(),T,x.join()].join(),v=m[w];return v||(m[w]=v=l([p,A,c,S,T,x])),v(b.shape.slice(0),b.data,b.stride,b.offset|0,g.data,g.stride,g.offset|0,_.data,_.stride,_.offset|0)}},muls:function(l){var m={};return function(b,g,_){var p=b.dtype,A=b.order,c=g.dtype,S=g.order,T=[p,A.join(),c,S.join()].join(),x=m[T];return x||(m[T]=x=l([p,A,c,S])),x(b.shape.slice(0),b.data,b.stride,b.offset|0,g.data,g.stride,g.offset|0,_)}},mulseq:function(l){var m={};return function(b,g){var _=b.dtype,p=b.order,A=[_,p.join()].join(),c=m[A];return c||(m[A]=c=l([_,p])),c(b.shape.slice(0),b.data,b.stride,b.offset|0,g)}},div:function(l){var m={};return function(b,g,_){var p=b.dtype,A=b.order,c=g.dtype,S=g.order,T=_.dtype,x=_.order,w=[p,A.join(),c,S.join(),T,x.join()].join(),v=m[w];return v||(m[w]=v=l([p,A,c,S,T,x])),v(b.shape.slice(0),b.data,b.stride,b.offset|0,g.data,g.stride,g.offset|0,_.data,_.stride,_.offset|0)}},divs:function(l){var m={};return function(b,g,_){var p=b.dtype,A=b.order,c=g.dtype,S=g.order,T=[p,A.join(),c,S.join()].join(),x=m[T];return x||(m[T]=x=l([p,A,c,S])),x(b.shape.slice(0),b.data,b.stride,b.offset|0,g.data,g.stride,g.offset|0,_)}},divseq:function(l){var m={};return function(b,g){var _=b.dtype,p=b.order,A=[_,p.join()].join(),c=m[A];return c||(m[A]=c=l([_,p])),c(b.shape.slice(0),b.data,b.stride,b.offset|0,g)}},assign:function(l){var m={};return function(b,g){var _=b.dtype,p=b.order,A=g.dtype,c=g.order,S=[_,p.join(),A,c.join()].join(),T=m[S];return T||(m[S]=T=l([_,p,A,c])),T(b.shape.slice(0),b.data,b.stride,b.offset|0,g.data,g.stride,g.offset|0)}}};function r(l){var m=n[l.funcName];return m(i.bind(void 0,l))}function f(l){return r({funcName:l.funcName})}var u={mul:"*",div:"/"};(function(){for(var l in u)y[l]=f({funcName:l}),y[l+"s"]=f({funcName:l+"s"}),y[l+"seq"]=f({funcName:l+"seq"})})(),y.assign=f({funcName:"assign"})},{}],255:[function(o,h,y){var t=o("ndarray"),a=o("./doConvert.js");h.exports=function(n,r){for(var f=[],u=n,l=1;Array.isArray(u);)f.push(u.length),l*=u.length,u=u[0];return f.length===0?t():(r||(r=t(new Float64Array(l),f)),a(r,n),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(o,h,y){function t(){return function(u,l,m,d,b){var g=u[0],_=u[1],p=u[2],A=m[0],c=m[1],S=m[2],T=[0,0,0];d|=0;var x=0,w=0,v=0,C=S,M=c-p*S,E=A-_*c;for(v=0;v<g;++v){for(w=0;w<_;++w){for(x=0;x<p;++x){{var L=b,z;for(z=0;z<T.length-1;++z)L=L[T[z]];l[d]=L[T[T.length-1]]}d+=C,++T[2]}d+=M,T[2]-=p,++T[1]}d+=E,T[1]-=_,++T[0]}}}function a(){return t()}var i=a;function n(u){var l={};return function(d,b){var g=d.dtype,_=d.order,p=[g,_.join()].join(),A=l[p];return A||(l[p]=A=u([g,_])),A(d.shape.slice(0),d.data,d.stride,d.offset|0,b)}}function r(u){return n(i.bind(void 0,u))}function f(u){return r({funcName:u.funcName})}h.exports=f({funcName:"convert"})},{}],257:[function(o,h,y){var t=o("typedarray-pool");function a(m){switch(m){case"uint32":return[t.mallocUint32,t.freeUint32];default:return null}}var i={"uint32,1,0":function(m,d){return function(g,_,p,A,c,S,T,x,w,v,C){var M,E,L,z=g*c+A,O,R=m(x),D,H,B,$;for(M=g+1;M<=_;++M){for(E=M,z+=c,L=z,D=0,H=z,O=0;O<x;++O)R[D++]=p[H],H+=w;e:for(;E-- >g;){D=0,H=L-c;t:for(O=0;O<x;++O){if(B=p[H],$=R[D],B<$)break e;if(B>$)break t;H+=v,D+=C}for(D=L,H=L-c,O=0;O<x;++O)p[D]=p[H],D+=w,H+=w;L-=c}for(D=L,H=0,O=0;O<x;++O)p[D]=R[H++],D+=w}d(R)}}};function n(m,d){var b=a(d),g=[d,m].join(","),_=i[g];return b?_(b[0],b[1]):_()}var r={"uint32,1,0":function(m,d,b){return function g(_,p,A,c,S,T,x,w,v,C,M){var E=(p-_+1)/6|0,L=_+E,z=p-E,O=_+p>>1,R=O-E,D=O+E,H=L,B=R,$=O,W=D,re=z,Q=_+1,Z=p-1,K=!0,le,fe,ue,V,j,ee,q,X,J,ie=0,ne=0,oe=0,se,me,ce,pe,xe,Se,Ae,Ce,Ee,Oe,_e,Re,Ve,Je,ze,De,je=w,dt=d(je),Et=d(je);me=S*H,ce=S*B,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=H,H=B,B=fe;break e}if(oe<0)break e;De+=C}me=S*W,ce=S*re,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=W,W=re,re=fe;break e}if(oe<0)break e;De+=C}me=S*H,ce=S*$,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=H,H=$,$=fe;break e}if(oe<0)break e;De+=C}me=S*B,ce=S*$,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=B,B=$,$=fe;break e}if(oe<0)break e;De+=C}me=S*H,ce=S*W,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=H,H=W,W=fe;break e}if(oe<0)break e;De+=C}me=S*$,ce=S*W,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=$,$=W,W=fe;break e}if(oe<0)break e;De+=C}me=S*B,ce=S*re,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=B,B=re,re=fe;break e}if(oe<0)break e;De+=C}me=S*B,ce=S*$,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=B,B=$,$=fe;break e}if(oe<0)break e;De+=C}me=S*W,ce=S*re,De=c;e:for(se=0;se<w;++se){if(q=me+De,X=ce+De,oe=A[q]-A[X],oe>0){fe=W,W=re,re=fe;break e}if(oe<0)break e;De+=C}for(me=S*H,ce=S*B,pe=S*$,xe=S*W,Se=S*re,Ae=S*L,Ce=S*O,Ee=S*z,ze=0,De=c,se=0;se<w;++se)q=me+De,X=ce+De,J=pe+De,Oe=xe+De,_e=Se+De,Re=Ae+De,Ve=Ce+De,Je=Ee+De,dt[ze]=A[X],Et[ze]=A[Oe],K=K&&dt[ze]===Et[ze],ue=A[q],V=A[J],j=A[_e],A[Re]=ue,A[Ve]=V,A[Je]=j,++ze,De+=v;for(me=S*R,ce=S*_,De=c,se=0;se<w;++se)q=me+De,X=ce+De,A[q]=A[X],De+=v;for(me=S*D,ce=S*p,De=c,se=0;se<w;++se)q=me+De,X=ce+De,A[q]=A[X],De+=v;if(K)for(ee=Q;ee<=Z;++ee){q=c+ee*S,ze=0;e:for(se=0;se<w;++se){if(oe=A[q]-dt[ze],oe!==0)break e;ze+=M,q+=C}if(oe!==0)if(oe<0){if(ee!==Q)for(me=S*ee,ce=S*Q,De=c,se=0;se<w;++se)q=me+De,X=ce+De,le=A[q],A[q]=A[X],A[X]=le,De+=v;++Q}else for(;;){q=c+Z*S,ze=0;e:for(se=0;se<w;++se){if(oe=A[q]-dt[ze],oe!==0)break e;ze+=M,q+=C}if(oe>0)Z--;else if(oe<0){for(me=S*ee,ce=S*Q,pe=S*Z,De=c,se=0;se<w;++se)q=me+De,X=ce+De,J=pe+De,le=A[q],A[q]=A[X],A[X]=A[J],A[J]=le,De+=v;++Q,--Z;break}else{for(me=S*ee,ce=S*Z,De=c,se=0;se<w;++se)q=me+De,X=ce+De,le=A[q],A[q]=A[X],A[X]=le,De+=v;--Z;break}}}else for(ee=Q;ee<=Z;++ee){q=c+ee*S,ze=0;e:for(se=0;se<w;++se){if(ie=A[q]-dt[ze],ie!==0)break e;ze+=M,q+=C}if(ie<0){if(ee!==Q)for(me=S*ee,ce=S*Q,De=c,se=0;se<w;++se)q=me+De,X=ce+De,le=A[q],A[q]=A[X],A[X]=le,De+=v;++Q}else{q=c+ee*S,ze=0;e:for(se=0;se<w;++se){if(ne=A[q]-Et[ze],ne!==0)break e;ze+=M,q+=C}if(ne>0)for(;;){q=c+Z*S,ze=0;e:for(se=0;se<w;++se){if(oe=A[q]-Et[ze],oe!==0)break e;ze+=M,q+=C}if(oe>0){if(--Z<ee)break;continue}else{q=c+Z*S,ze=0;e:for(se=0;se<w;++se){if(oe=A[q]-dt[ze],oe!==0)break e;ze+=M,q+=C}if(oe<0){for(me=S*ee,ce=S*Q,pe=S*Z,De=c,se=0;se<w;++se)q=me+De,X=ce+De,J=pe+De,le=A[q],A[q]=A[X],A[X]=A[J],A[J]=le,De+=v;++Q,--Z}else{for(me=S*ee,ce=S*Z,De=c,se=0;se<w;++se)q=me+De,X=ce+De,le=A[q],A[q]=A[X],A[X]=le,De+=v;--Z}break}}}}for(me=S*_,ce=S*(Q-1),ze=0,De=c,se=0;se<w;++se)q=me+De,X=ce+De,A[q]=A[X],A[X]=dt[ze],++ze,De+=v;for(me=S*p,ce=S*(Z+1),ze=0,De=c,se=0;se<w;++se)q=me+De,X=ce+De,A[q]=A[X],A[X]=Et[ze],++ze,De+=v;if(Q-2-_<=32?m(_,Q-2,A,c,S,T,x,w,v,C,M):g(_,Q-2,A,c,S,T,x,w,v,C,M),p-(Z+2)<=32?m(Z+2,p,A,c,S,T,x,w,v,C,M):g(Z+2,p,A,c,S,T,x,w,v,C,M),K){b(dt),b(Et);return}if(Q<L&&Z>z){e:for(;;){for(q=c+Q*S,ze=0,De=c,se=0;se<w;++se){if(A[q]!==dt[ze])break e;++ze,q+=v}++Q}e:for(;;){for(q=c+Z*S,ze=0,De=c,se=0;se<w;++se){if(A[q]!==Et[ze])break e;++ze,q+=v}--Z}for(ee=Q;ee<=Z;++ee){q=c+ee*S,ze=0;e:for(se=0;se<w;++se){if(ie=A[q]-dt[ze],ie!==0)break e;ze+=M,q+=C}if(ie===0){if(ee!==Q)for(me=S*ee,ce=S*Q,De=c,se=0;se<w;++se)q=me+De,X=ce+De,le=A[q],A[q]=A[X],A[X]=le,De+=v;++Q}else{q=c+ee*S,ze=0;e:for(se=0;se<w;++se){if(ne=A[q]-Et[ze],ne!==0)break e;ze+=M,q+=C}if(ne===0)for(;;){q=c+Z*S,ze=0;e:for(se=0;se<w;++se){if(oe=A[q]-Et[ze],oe!==0)break e;ze+=M,q+=C}if(oe===0){if(--Z<ee)break;continue}else{q=c+Z*S,ze=0;e:for(se=0;se<w;++se){if(oe=A[q]-dt[ze],oe!==0)break e;ze+=M,q+=C}if(oe<0){for(me=S*ee,ce=S*Q,pe=S*Z,De=c,se=0;se<w;++se)q=me+De,X=ce+De,J=pe+De,le=A[q],A[q]=A[X],A[X]=A[J],A[J]=le,De+=v;++Q,--Z}else{for(me=S*ee,ce=S*Z,De=c,se=0;se<w;++se)q=me+De,X=ce+De,le=A[q],A[q]=A[X],A[X]=le,De+=v;--Z}break}}}}}b(dt),b(Et),Z-Q<=32?m(Q,Z,A,c,S,T,x,w,v,C,M):g(Q,Z,A,c,S,T,x,w,v,C,M)}}};function f(m,d,b){var g=a(d),_=[d,m].join(","),p=r[_];return m.length>1&&g?p(b,g[0],g[1]):p(b)}var u={"uint32,1,0":function(m,d){return function(b){var g=b.data,_=b.offset|0,p=b.shape,A=b.stride,c=A[0]|0,S=p[0]|0,T=A[1]|0,x=p[1]|0,w=T,v=T,C=1;S<=32?m(0,S-1,g,_,c,T,S,x,w,v,C):d(0,S-1,g,_,c,T,S,x,w,v,C)}}};function l(m,d){var b=[d,m].join(","),g=u[b],_=n(m,d),p=f(m,d,_);return g(_,p)}h.exports=l},{"typedarray-pool":308}],258:[function(o,h,y){var t=o("./lib/compile_sort.js"),a={};function i(n){var r=n.order,f=n.dtype,u=[r,f],l=u.join(":"),m=a[l];return m||(a[l]=m=t(r,f)),m(n),n}h.exports=i},{"./lib/compile_sort.js":257}],259:[function(o,h,y){var t=o("is-buffer"),a=typeof Float64Array!="undefined";function i(d,b){return d[0]-b[0]}function n(){var d=this.stride,b=new Array(d.length),g;for(g=0;g<b.length;++g)b[g]=[Math.abs(d[g]),g];b.sort(i);var _=new Array(b.length);for(g=0;g<_.length;++g)_[g]=b[g][1];return _}var r={T:function(d){function b(_){this.data=_}var g=b.prototype;return g.dtype=d,g.index=function(){return-1},g.size=0,g.dimension=-1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new b(this.data)},g.get=g.set=function(){},g.pick=function(){return null},function(p){return new b(p)}},0:function(d,b){function g(p,A){this.data=p,this.offset=A}var _=g.prototype;return _.dtype=d,_.index=function(){return this.offset},_.dimension=0,_.size=1,_.shape=_.stride=_.order=[],_.lo=_.hi=_.transpose=_.step=function(){return new g(this.data,this.offset)},_.pick=function(){return b(this.data)},_.valueOf=_.get=function(){return d==="generic"?this.data.get(this.offset):this.data[this.offset]},_.set=function(A){return d==="generic"?this.data.set(this.offset,A):this.data[this.offset]=A},function(A,c,S,T){return new g(A,T)}},1:function(d,b,g){function _(A,c,S,T){this.data=A,this.shape=[c],this.stride=[S],this.offset=T|0}var p=_.prototype;return p.dtype=d,p.dimension=1,Object.defineProperty(p,"size",{get:function(){return this.shape[0]}}),p.order=[0],p.set=function(c,S){return d==="generic"?this.data.set(this.offset+this.stride[0]*c,S):this.data[this.offset+this.stride[0]*c]=S},p.get=function(c){return d==="generic"?this.data.get(this.offset+this.stride[0]*c):this.data[this.offset+this.stride[0]*c]},p.index=function(c){return this.offset+this.stride[0]*c},p.hi=function(c){return new _(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,this.stride[0],this.offset)},p.lo=function(c){var S=this.offset,T=0,x=this.shape[0],w=this.stride[0];return typeof c=="number"&&c>=0&&(T=c|0,S+=w*T,x-=T),new _(this.data,x,w,S)},p.step=function(c){var S=this.shape[0],T=this.stride[0],x=this.offset,w=0,v=Math.ceil;return typeof c=="number"&&(w=c|0,w<0?(x+=T*(S-1),S=v(-S/w)):S=v(S/w),T*=w),new _(this.data,S,T,x)},p.transpose=function(c){c=c===void 0?0:c|0;var S=this.shape,T=this.stride;return new _(this.data,S[c],T[c],this.offset)},p.pick=function(c){var S=[],T=[],x=this.offset;typeof c=="number"&&c>=0?x=x+this.stride[0]*c|0:(S.push(this.shape[0]),T.push(this.stride[0]));var w=b[S.length+1];return w(this.data,S,T,x)},function(c,S,T,x){return new _(c,S[0],T[0],x)}},2:function(d,b,g){function _(A,c,S,T,x,w){this.data=A,this.shape=[c,S],this.stride=[T,x],this.offset=w|0}var p=_.prototype;return p.dtype=d,p.dimension=2,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(p,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),p.set=function(c,S,T){return d==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*S,T):this.data[this.offset+this.stride[0]*c+this.stride[1]*S]=T},p.get=function(c,S){return d==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*S):this.data[this.offset+this.stride[0]*c+this.stride[1]*S]},p.index=function(c,S){return this.offset+this.stride[0]*c+this.stride[1]*S},p.hi=function(c,S){return new _(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof S!="number"||S<0?this.shape[1]:S|0,this.stride[0],this.stride[1],this.offset)},p.lo=function(c,S){var T=this.offset,x=0,w=this.shape[0],v=this.shape[1],C=this.stride[0],M=this.stride[1];return typeof c=="number"&&c>=0&&(x=c|0,T+=C*x,w-=x),typeof S=="number"&&S>=0&&(x=S|0,T+=M*x,v-=x),new _(this.data,w,v,C,M,T)},p.step=function(c,S){var T=this.shape[0],x=this.shape[1],w=this.stride[0],v=this.stride[1],C=this.offset,M=0,E=Math.ceil;return typeof c=="number"&&(M=c|0,M<0?(C+=w*(T-1),T=E(-T/M)):T=E(T/M),w*=M),typeof S=="number"&&(M=S|0,M<0?(C+=v*(x-1),x=E(-x/M)):x=E(x/M),v*=M),new _(this.data,T,x,w,v,C)},p.transpose=function(c,S){c=c===void 0?0:c|0,S=S===void 0?1:S|0;var T=this.shape,x=this.stride;return new _(this.data,T[c],T[S],x[c],x[S],this.offset)},p.pick=function(c,S){var T=[],x=[],w=this.offset;typeof c=="number"&&c>=0?w=w+this.stride[0]*c|0:(T.push(this.shape[0]),x.push(this.stride[0])),typeof S=="number"&&S>=0?w=w+this.stride[1]*S|0:(T.push(this.shape[1]),x.push(this.stride[1]));var v=b[T.length+1];return v(this.data,T,x,w)},function(c,S,T,x){return new _(c,S[0],S[1],T[0],T[1],x)}},3:function(d,b,g){function _(A,c,S,T,x,w,v,C){this.data=A,this.shape=[c,S,T],this.stride=[x,w,v],this.offset=C|0}var p=_.prototype;return p.dtype=d,p.dimension=3,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(p,"order",{get:function(){var c=Math.abs(this.stride[0]),S=Math.abs(this.stride[1]),T=Math.abs(this.stride[2]);return c>S?S>T?[2,1,0]:c>T?[1,2,0]:[1,0,2]:c>T?[2,0,1]:T>S?[0,1,2]:[0,2,1]}}),p.set=function(c,S,T,x){return d==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T,x):this.data[this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T]=x},p.get=function(c,S,T){return d==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T):this.data[this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T]},p.index=function(c,S,T){return this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T},p.hi=function(c,S,T){return new _(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof S!="number"||S<0?this.shape[1]:S|0,typeof T!="number"||T<0?this.shape[2]:T|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},p.lo=function(c,S,T){var x=this.offset,w=0,v=this.shape[0],C=this.shape[1],M=this.shape[2],E=this.stride[0],L=this.stride[1],z=this.stride[2];return typeof c=="number"&&c>=0&&(w=c|0,x+=E*w,v-=w),typeof S=="number"&&S>=0&&(w=S|0,x+=L*w,C-=w),typeof T=="number"&&T>=0&&(w=T|0,x+=z*w,M-=w),new _(this.data,v,C,M,E,L,z,x)},p.step=function(c,S,T){var x=this.shape[0],w=this.shape[1],v=this.shape[2],C=this.stride[0],M=this.stride[1],E=this.stride[2],L=this.offset,z=0,O=Math.ceil;return typeof c=="number"&&(z=c|0,z<0?(L+=C*(x-1),x=O(-x/z)):x=O(x/z),C*=z),typeof S=="number"&&(z=S|0,z<0?(L+=M*(w-1),w=O(-w/z)):w=O(w/z),M*=z),typeof T=="number"&&(z=T|0,z<0?(L+=E*(v-1),v=O(-v/z)):v=O(v/z),E*=z),new _(this.data,x,w,v,C,M,E,L)},p.transpose=function(c,S,T){c=c===void 0?0:c|0,S=S===void 0?1:S|0,T=T===void 0?2:T|0;var x=this.shape,w=this.stride;return new _(this.data,x[c],x[S],x[T],w[c],w[S],w[T],this.offset)},p.pick=function(c,S,T){var x=[],w=[],v=this.offset;typeof c=="number"&&c>=0?v=v+this.stride[0]*c|0:(x.push(this.shape[0]),w.push(this.stride[0])),typeof S=="number"&&S>=0?v=v+this.stride[1]*S|0:(x.push(this.shape[1]),w.push(this.stride[1])),typeof T=="number"&&T>=0?v=v+this.stride[2]*T|0:(x.push(this.shape[2]),w.push(this.stride[2]));var C=b[x.length+1];return C(this.data,x,w,v)},function(c,S,T,x){return new _(c,S[0],S[1],S[2],T[0],T[1],T[2],x)}},4:function(d,b,g){function _(A,c,S,T,x,w,v,C,M,E){this.data=A,this.shape=[c,S,T,x],this.stride=[w,v,C,M],this.offset=E|0}var p=_.prototype;return p.dtype=d,p.dimension=4,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(p,"order",{get:g}),p.set=function(c,S,T,x,w){return d==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T+this.stride[3]*x,w):this.data[this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T+this.stride[3]*x]=w},p.get=function(c,S,T,x){return d==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T+this.stride[3]*x):this.data[this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T+this.stride[3]*x]},p.index=function(c,S,T,x){return this.offset+this.stride[0]*c+this.stride[1]*S+this.stride[2]*T+this.stride[3]*x},p.hi=function(c,S,T,x){return new _(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof S!="number"||S<0?this.shape[1]:S|0,typeof T!="number"||T<0?this.shape[2]:T|0,typeof x!="number"||x<0?this.shape[3]:x|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},p.lo=function(c,S,T,x){var w=this.offset,v=0,C=this.shape[0],M=this.shape[1],E=this.shape[2],L=this.shape[3],z=this.stride[0],O=this.stride[1],R=this.stride[2],D=this.stride[3];return typeof c=="number"&&c>=0&&(v=c|0,w+=z*v,C-=v),typeof S=="number"&&S>=0&&(v=S|0,w+=O*v,M-=v),typeof T=="number"&&T>=0&&(v=T|0,w+=R*v,E-=v),typeof x=="number"&&x>=0&&(v=x|0,w+=D*v,L-=v),new _(this.data,C,M,E,L,z,O,R,D,w)},p.step=function(c,S,T,x){var w=this.shape[0],v=this.shape[1],C=this.shape[2],M=this.shape[3],E=this.stride[0],L=this.stride[1],z=this.stride[2],O=this.stride[3],R=this.offset,D=0,H=Math.ceil;return typeof c=="number"&&(D=c|0,D<0?(R+=E*(w-1),w=H(-w/D)):w=H(w/D),E*=D),typeof S=="number"&&(D=S|0,D<0?(R+=L*(v-1),v=H(-v/D)):v=H(v/D),L*=D),typeof T=="number"&&(D=T|0,D<0?(R+=z*(C-1),C=H(-C/D)):C=H(C/D),z*=D),typeof x=="number"&&(D=x|0,D<0?(R+=O*(M-1),M=H(-M/D)):M=H(M/D),O*=D),new _(this.data,w,v,C,M,E,L,z,O,R)},p.transpose=function(c,S,T,x){c=c===void 0?0:c|0,S=S===void 0?1:S|0,T=T===void 0?2:T|0,x=x===void 0?3:x|0;var w=this.shape,v=this.stride;return new _(this.data,w[c],w[S],w[T],w[x],v[c],v[S],v[T],v[x],this.offset)},p.pick=function(c,S,T,x){var w=[],v=[],C=this.offset;typeof c=="number"&&c>=0?C=C+this.stride[0]*c|0:(w.push(this.shape[0]),v.push(this.stride[0])),typeof S=="number"&&S>=0?C=C+this.stride[1]*S|0:(w.push(this.shape[1]),v.push(this.stride[1])),typeof T=="number"&&T>=0?C=C+this.stride[2]*T|0:(w.push(this.shape[2]),v.push(this.stride[2])),typeof x=="number"&&x>=0?C=C+this.stride[3]*x|0:(w.push(this.shape[3]),v.push(this.stride[3]));var M=b[w.length+1];return M(this.data,w,v,C)},function(c,S,T,x){return new _(c,S[0],S[1],S[2],S[3],T[0],T[1],T[2],T[3],x)}},5:function(b,g,_){function p(c,S,T,x,w,v,C,M,E,L,z,O){this.data=c,this.shape=[S,T,x,w,v],this.stride=[C,M,E,L,z],this.offset=O|0}var A=p.prototype;return A.dtype=b,A.dimension=5,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(A,"order",{get:_}),A.set=function(S,T,x,w,v,C){return b==="generic"?this.data.set(this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*x+this.stride[3]*w+this.stride[4]*v,C):this.data[this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*x+this.stride[3]*w+this.stride[4]*v]=C},A.get=function(S,T,x,w,v){return b==="generic"?this.data.get(this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*x+this.stride[3]*w+this.stride[4]*v):this.data[this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*x+this.stride[3]*w+this.stride[4]*v]},A.index=function(S,T,x,w,v){return this.offset+this.stride[0]*S+this.stride[1]*T+this.stride[2]*x+this.stride[3]*w+this.stride[4]*v},A.hi=function(S,T,x,w,v){return new p(this.data,typeof S!="number"||S<0?this.shape[0]:S|0,typeof T!="number"||T<0?this.shape[1]:T|0,typeof x!="number"||x<0?this.shape[2]:x|0,typeof w!="number"||w<0?this.shape[3]:w|0,typeof v!="number"||v<0?this.shape[4]:v|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},A.lo=function(S,T,x,w,v){var C=this.offset,M=0,E=this.shape[0],L=this.shape[1],z=this.shape[2],O=this.shape[3],R=this.shape[4],D=this.stride[0],H=this.stride[1],B=this.stride[2],$=this.stride[3],W=this.stride[4];return typeof S=="number"&&S>=0&&(M=S|0,C+=D*M,E-=M),typeof T=="number"&&T>=0&&(M=T|0,C+=H*M,L-=M),typeof x=="number"&&x>=0&&(M=x|0,C+=B*M,z-=M),typeof w=="number"&&w>=0&&(M=w|0,C+=$*M,O-=M),typeof v=="number"&&v>=0&&(M=v|0,C+=W*M,R-=M),new p(this.data,E,L,z,O,R,D,H,B,$,W,C)},A.step=function(S,T,x,w,v){var C=this.shape[0],M=this.shape[1],E=this.shape[2],L=this.shape[3],z=this.shape[4],O=this.stride[0],R=this.stride[1],D=this.stride[2],H=this.stride[3],B=this.stride[4],$=this.offset,W=0,re=Math.ceil;return typeof S=="number"&&(W=S|0,W<0?($+=O*(C-1),C=re(-C/W)):C=re(C/W),O*=W),typeof T=="number"&&(W=T|0,W<0?($+=R*(M-1),M=re(-M/W)):M=re(M/W),R*=W),typeof x=="number"&&(W=x|0,W<0?($+=D*(E-1),E=re(-E/W)):E=re(E/W),D*=W),typeof w=="number"&&(W=w|0,W<0?($+=H*(L-1),L=re(-L/W)):L=re(L/W),H*=W),typeof v=="number"&&(W=v|0,W<0?($+=B*(z-1),z=re(-z/W)):z=re(z/W),B*=W),new p(this.data,C,M,E,L,z,O,R,D,H,B,$)},A.transpose=function(S,T,x,w,v){S=S===void 0?0:S|0,T=T===void 0?1:T|0,x=x===void 0?2:x|0,w=w===void 0?3:w|0,v=v===void 0?4:v|0;var C=this.shape,M=this.stride;return new p(this.data,C[S],C[T],C[x],C[w],C[v],M[S],M[T],M[x],M[w],M[v],this.offset)},A.pick=function(S,T,x,w,v){var C=[],M=[],E=this.offset;typeof S=="number"&&S>=0?E=E+this.stride[0]*S|0:(C.push(this.shape[0]),M.push(this.stride[0])),typeof T=="number"&&T>=0?E=E+this.stride[1]*T|0:(C.push(this.shape[1]),M.push(this.stride[1])),typeof x=="number"&&x>=0?E=E+this.stride[2]*x|0:(C.push(this.shape[2]),M.push(this.stride[2])),typeof w=="number"&&w>=0?E=E+this.stride[3]*w|0:(C.push(this.shape[3]),M.push(this.stride[3])),typeof v=="number"&&v>=0?E=E+this.stride[4]*v|0:(C.push(this.shape[4]),M.push(this.stride[4]));var L=g[C.length+1];return L(this.data,C,M,E)},function(S,T,x,w){return new p(S,T[0],T[1],T[2],T[3],T[4],x[0],x[1],x[2],x[3],x[4],w)}}};function f(d,b){var g=b===-1?"T":String(b),_=r[g];return b===-1?_(d):b===0?_(d,l[d][0]):_(d,l[d],n)}function u(d){if(t(d))return"buffer";if(a)switch(Object.prototype.toString.call(d)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(d)?"array":"generic"}var l={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function m(d,b,g,_){if(d===void 0){var x=l.array[0];return x([])}else typeof d=="number"&&(d=[d]);b===void 0&&(b=[d.length]);var p=b.length;if(g===void 0){g=new Array(p);for(var A=p-1,c=1;A>=0;--A)g[A]=c,c*=b[A]}if(_===void 0){_=0;for(var A=0;A<p;++A)g[A]<0&&(_-=(b[A]-1)*g[A])}for(var S=u(d),T=l[S];T.length<=p+1;)T.push(f(S,T.length-1));var x=T[p+1];return x(d,b,g,_)}h.exports=m},{"is-buffer":237}],260:[function(o,h,y){var t=o("double-bits"),a=Math.pow(2,-1074),i=-1>>>0;h.exports=n;function n(r,f){if(isNaN(r)||isNaN(f))return NaN;if(r===f)return r;if(r===0)return f<0?-a:a;var u=t.hi(r),l=t.lo(r);return f>r==r>0?l===i?(u+=1,l=0):l+=1:l===0?(l=i,u-=1):l-=1,t.pack(l,u)}},{"double-bits":64}],261:[function(o,h,y){var t=1e-6,a=1e-6;y.vertexNormals=function(i,n,r){for(var f=n.length,u=new Array(f),l=r===void 0?t:r,m=0;m<f;++m)u[m]=[0,0,0];for(var m=0;m<i.length;++m)for(var d=i[m],b=0,g=d[d.length-1],_=d[0],p=0;p<d.length;++p){b=g,g=_,_=d[(p+1)%d.length];for(var A=n[b],c=n[g],S=n[_],T=new Array(3),x=0,w=new Array(3),v=0,C=0;C<3;++C)T[C]=A[C]-c[C],x+=T[C]*T[C],w[C]=S[C]-c[C],v+=w[C]*w[C];if(x*v>l)for(var M=u[g],E=1/Math.sqrt(x*v),C=0;C<3;++C){var L=(C+1)%3,z=(C+2)%3;M[C]+=E*(w[L]*T[z]-w[z]*T[L])}}for(var m=0;m<f;++m){for(var M=u[m],O=0,C=0;C<3;++C)O+=M[C]*M[C];if(O>l)for(var E=1/Math.sqrt(O),C=0;C<3;++C)M[C]*=E;else for(var C=0;C<3;++C)M[C]=0}return u},y.faceNormals=function(i,n,r){for(var f=i.length,u=new Array(f),l=r===void 0?a:r,m=0;m<f;++m){for(var d=i[m],b=new Array(3),g=0;g<3;++g)b[g]=n[d[g]];for(var _=new Array(3),p=new Array(3),g=0;g<3;++g)_[g]=b[1][g]-b[0][g],p[g]=b[2][g]-b[0][g];for(var A=new Array(3),c=0,g=0;g<3;++g){var S=(g+1)%3,T=(g+2)%3;A[g]=_[S]*p[T]-_[T]*p[S],c+=A[g]*A[g]}c>l?c=1/Math.sqrt(c):c=0;for(var g=0;g<3;++g)A[g]*=c;u[m]=A}return u}},{}],262:[function(o,h,y){h.exports=t;function t(a,i,n,r,f,u,l,m,d,b){var g=i+u+b;if(_>0){var _=Math.sqrt(g+1);a[0]=.5*(l-d)/_,a[1]=.5*(m-r)/_,a[2]=.5*(n-u)/_,a[3]=.5*_}else{var p=Math.max(i,u,b),_=Math.sqrt(2*p-g+1);i>=p?(a[0]=.5*_,a[1]=.5*(f+n)/_,a[2]=.5*(m+r)/_,a[3]=.5*(l-d)/_):u>=p?(a[0]=.5*(n+f)/_,a[1]=.5*_,a[2]=.5*(d+l)/_,a[3]=.5*(m-r)/_):(a[0]=.5*(r+m)/_,a[1]=.5*(l+d)/_,a[2]=.5*_,a[3]=.5*(n-f)/_)}return a}},{}],263:[function(o,h,y){h.exports=b;var t=o("filtered-vector"),a=o("gl-mat4/lookAt"),i=o("gl-mat4/fromQuat"),n=o("gl-mat4/invert"),r=o("./lib/quatFromFrame");function f(g,_,p){return Math.sqrt(Math.pow(g,2)+Math.pow(_,2)+Math.pow(p,2))}function u(g,_,p,A){return Math.sqrt(Math.pow(g,2)+Math.pow(_,2)+Math.pow(p,2)+Math.pow(A,2))}function l(g,_){var p=_[0],A=_[1],c=_[2],S=_[3],T=u(p,A,c,S);T>1e-6?(g[0]=p/T,g[1]=A/T,g[2]=c/T,g[3]=S/T):(g[0]=g[1]=g[2]=0,g[3]=1)}function m(g,_,p){this.radius=t([p]),this.center=t(_),this.rotation=t(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=m.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var _=this.computedRotation;l(_,_);var p=this.computedMatrix;i(p,_);var A=this.computedCenter,c=this.computedEye,S=this.computedUp,T=Math.exp(this.computedRadius[0]);c[0]=A[0]+T*p[2],c[1]=A[1]+T*p[6],c[2]=A[2]+T*p[10],S[0]=p[1],S[1]=p[5],S[2]=p[9];for(var x=0;x<3;++x){for(var w=0,v=0;v<3;++v)w+=p[x+4*v]*c[v];p[12+x]=-w}},d.getMatrix=function(g,_){this.recalcMatrix(g);var p=this.computedMatrix;if(_){for(var A=0;A<16;++A)_[A]=p[A];return _}return p},d.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},d.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},d.pan=function(g,_,p,A){_=_||0,p=p||0,A=A||0,this.recalcMatrix(g);var c=this.computedMatrix,S=c[1],T=c[5],x=c[9],w=f(S,T,x);S/=w,T/=w,x/=w;var v=c[0],C=c[4],M=c[8],E=v*S+C*T+M*x;v-=S*E,C-=T*E,M-=x*E;var L=f(v,C,M);v/=L,C/=L,M/=L,c[2],c[6],c[10];var z=v*_+S*p,O=C*_+T*p,R=M*_+x*p;this.center.move(g,z,O,R);var D=Math.exp(this.computedRadius[0]);D=Math.max(1e-4,D+A),this.radius.set(g,Math.log(D))},d.rotate=function(g,_,p,A){this.recalcMatrix(g),_=_||0,p=p||0;var c=this.computedMatrix,S=c[0],T=c[4],x=c[8],w=c[1],v=c[5],C=c[9],M=c[2],E=c[6],L=c[10],z=_*S+p*w,O=_*T+p*v,R=_*x+p*C,D=-(E*R-L*O),H=-(L*z-M*R),B=-(M*O-E*z),$=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(H,2)-Math.pow(B,2))),W=u(D,H,B,$);W>1e-6?(D/=W,H/=W,B/=W,$/=W):(D=H=B=0,$=1);var re=this.computedRotation,Q=re[0],Z=re[1],K=re[2],le=re[3],fe=Q*$+le*D+Z*B-K*H,ue=Z*$+le*H+K*D-Q*B,V=K*$+le*B+Q*H-Z*D,j=le*$-Q*D-Z*H-K*B;if(A){D=M,H=E,B=L;var ee=Math.sin(A)/f(D,H,B);D*=ee,H*=ee,B*=ee,$=Math.cos(_),fe=fe*$+j*D+ue*B-V*H,ue=ue*$+j*H+V*D-fe*B,V=V*$+j*B+fe*H-ue*D,j=j*$-fe*D-ue*H-V*B}var q=u(fe,ue,V,j);q>1e-6?(fe/=q,ue/=q,V/=q,j/=q):(fe=ue=V=0,j=1),this.rotation.set(g,fe,ue,V,j)},d.lookAt=function(g,_,p,A){this.recalcMatrix(g),p=p||this.computedCenter,_=_||this.computedEye,A=A||this.computedUp;var c=this.computedMatrix;a(c,_,p,A);var S=this.computedRotation;r(S,c[0],c[1],c[2],c[4],c[5],c[6],c[8],c[9],c[10]),l(S,S),this.rotation.set(g,S[0],S[1],S[2],S[3]);for(var T=0,x=0;x<3;++x)T+=Math.pow(p[x]-_[x],2);this.radius.set(g,.5*Math.log(Math.max(T,1e-6))),this.center.set(g,p[0],p[1],p[2])},d.translate=function(g,_,p,A){this.center.move(g,_||0,p||0,A||0)},d.setMatrix=function(g,_){var p=this.computedRotation;r(p,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),l(p,p),this.rotation.set(g,p[0],p[1],p[2],p[3]);var A=this.computedMatrix;n(A,_);var c=A[15];if(Math.abs(c)>1e-6){var S=A[12]/c,T=A[13]/c,x=A[14]/c;this.recalcMatrix(g);var w=Math.exp(this.computedRadius[0]);this.center.set(g,S-A[2]*w,T-A[6]*w,x-A[10]*w),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},d.setDistance=function(g,_){_>0&&this.radius.set(g,Math.log(_))},d.setDistanceLimits=function(g,_){g>0?g=Math.log(g):g=-1/0,_>0?_=Math.log(_):_=1/0,_=Math.max(_,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=_},d.getDistanceLimits=function(g){var _=this.radius.bounds;return g?(g[0]=Math.exp(_[0][0]),g[1]=Math.exp(_[1][0]),g):[Math.exp(_[0][0]),Math.exp(_[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(g){var _=this.lastT(),p=g.center;p&&this.center.set(_,p[0],p[1],p[2]);var A=g.rotation;A&&this.rotation.set(_,A[0],A[1],A[2],A[3]);var c=g.distance;c&&c>0&&this.radius.set(_,Math.log(c)),this.setDistanceLimits(g.zoomMin,g.zoomMax)};function b(g){g=g||{};var _=g.center||[0,0,0],p=g.rotation||[0,0,0,1],A=g.radius||1;_=[].slice.call(_,0,3),p=[].slice.call(p,0,4),l(p,p);var c=new m(p,_,Math.log(A));return c.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&c.lookAt(0,g.eye,g.center,g.up),c}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(o,h,y){var t=o("repeat-string");h.exports=function(i,n,r){return r=typeof r!="undefined"?r+"":" ",t(r,n)+i}},{"repeat-string":277}],265:[function(o,h,y){h.exports=function(a,i){i||(i=[0,""]),a=String(a);var n=parseFloat(a,10);return i[0]=n,i[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},{}],266:[function(o,h,y){h.exports=a;var t=o("compare-angle");function a(i,n){for(var r=n.length|0,f=i.length,u=[new Array(r),new Array(r)],l=0;l<r;++l)u[0][l]=[],u[1][l]=[];for(var l=0;l<f;++l){var m=i[l];u[0][m[0]].push(m),u[1][m[1]].push(m)}for(var d=[],l=0;l<r;++l)u[0][l].length+u[1][l].length===0&&d.push([l]);function b(T,x){var w=u[x][T[x]];w.splice(w.indexOf(T),1)}function g(T,x,w){for(var v,C,M,E=0;E<2;++E)if(u[E][x].length>0){v=u[E][x][0],M=E;break}C=v[M^1];for(var L=0;L<2;++L)for(var z=u[L][x],O=0;O<z.length;++O){var R=z[O],D=R[L^1],H=t(n[T],n[x],n[C],n[D]);H>0&&(v=R,C=D,M=L)}return w||v&&b(v,M),C}function _(T,x){var w=u[x][T][0],v=[T];b(w,x);for(var C=w[x^1];;){for(;C!==T;)v.push(C),C=g(v[v.length-2],C,!1);if(u[0][T].length+u[1][T].length===0)break;var M=v[v.length-1],E=T,L=v[1],z=g(M,E,!0);if(t(n[M],n[E],n[L],n[z])<0)break;v.push(T),C=g(M,E)}return v}function p(T,x){return x[1]===x[x.length-1]}for(var l=0;l<r;++l)for(var A=0;A<2;++A){for(var c=[];u[A][l].length>0;){u[0][l].length;var S=_(l,A);p(c,S)?c.push.apply(c,S):(c.length>0&&d.push(c),c=S)}c.length>0&&d.push(c)}return d}},{"compare-angle":54}],267:[function(o,h,y){h.exports=a;var t=o("edges-to-adjacency-list");function a(i,n){for(var r=t(i,n.length),f=new Array(n.length),u=new Array(n.length),l=[],m=0;m<n.length;++m){var d=r[m].length;u[m]=d,f[m]=!0,d<=1&&l.push(m)}for(;l.length>0;){var b=l.pop();f[b]=!1;for(var g=r[b],m=0;m<g.length;++m){var _=g[m];--u[_]===0&&l.push(_)}}for(var p=new Array(n.length),A=[],m=0;m<n.length;++m)if(f[m]){var b=A.length;p[m]=b,A.push(n[m])}else p[m]=-1;for(var c=[],m=0;m<i.length;++m){var S=i[m];f[S[0]]&&f[S[1]]&&c.push([p[S[0]],p[S[1]]])}return[c,A]}},{"edges-to-adjacency-list":66}],268:[function(o,h,y){h.exports=d;var t=o("edges-to-adjacency-list"),a=o("planar-dual"),i=o("point-in-big-polygon"),n=o("two-product"),r=o("robust-sum"),f=o("uniq"),u=o("./lib/trim-leaves");function l(b,g){for(var _=new Array(b),p=0;p<b;++p)_[p]=g;return _}function m(b){for(var g=new Array(b),_=0;_<b;++_)g[_]=[];return g}function d(b,g){var j=u(b,g);b=j[0],g=j[1];var _=g.length;b.length;for(var p=t(b,g.length),A=0;A<_;++A)if(p[A].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var c=a(b,g);function S(oe){for(var se=oe.length,me=[0],ce=0;ce<se;++ce){var pe=g[oe[ce]],xe=g[oe[(ce+1)%se]],Se=n(-pe[0],pe[1]),Ae=n(-pe[0],xe[1]),Ce=n(xe[0],pe[1]),Ee=n(xe[0],xe[1]);me=r(me,r(r(Se,Ae),r(Ce,Ee)))}return me[me.length-1]>0}c=c.filter(S);for(var T=c.length,x=new Array(T),w=new Array(T),A=0;A<T;++A){x[A]=A;var v=new Array(T),C=c[A].map(function(se){return g[se]}),M=i([C]),E=0;e:for(var L=0;L<T;++L)if(v[L]=0,A!==L){for(var z=c[L],O=z.length,R=0;R<O;++R){var D=M(g[z[R]]);if(D!==0){D<0&&(v[L]=1,E+=1);continue e}}v[L]=1,E+=1}w[A]=[E,A,v]}w.sort(function(oe,se){return se[0]-oe[0]});for(var A=0;A<T;++A)for(var v=w[A],H=v[1],B=v[2],L=0;L<T;++L)B[L]&&(x[L]=H);for(var $=m(T),A=0;A<T;++A)$[A].push(x[A]),$[x[A]].push(A);for(var W={},re=l(_,!1),A=0;A<T;++A)for(var z=c[A],O=z.length,L=0;L<O;++L){var Q=z[L],Z=z[(L+1)%O],K=Math.min(Q,Z)+":"+Math.max(Q,Z);if(K in W){var le=W[K];$[le].push(A),$[A].push(le),re[Q]=re[Z]=!0}else W[K]=A}function fe(oe){for(var se=oe.length,me=0;me<se;++me)if(!re[oe[me]])return!1;return!0}for(var ue=[],V=l(T,-1),A=0;A<T;++A)x[A]===A&&!fe(c[A])?(ue.push(A),V[A]=0):V[A]=-1;for(var j=[];ue.length>0;){var ee=ue.pop(),q=$[ee];f(q,function(oe,se){return oe-se});var X=q.length,J=V[ee],ie;if(J===0){var z=c[ee];ie=[z]}for(var A=0;A<X;++A){var ne=q[A];if(!(V[ne]>=0)&&(V[ne]=J^1,ue.push(ne),J===0)){var z=c[ne];fe(z)||(z.reverse(),ie.push(z))}}J===0&&j.push(ie)}return j}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(o,h,y){h.exports=g;var t=o("robust-orientation")[3],a=o("slab-decomposition"),i=o("interval-tree-1d"),n=o("binary-search-bounds");function r(){return!0}function f(_){return function(p,A){var c=_[p];return c?!!c.queryPoint(A,r):!1}}function u(_){for(var p={},A=0;A<_.length;++A){var c=_[A],S=c[0][0],T=c[0][1],x=c[1][1],w=[Math.min(T,x),Math.max(T,x)];S in p?p[S].push(w):p[S]=[w]}for(var v={},C=Object.keys(p),A=0;A<C.length;++A){var M=p[C[A]];v[C[A]]=i(M)}return f(v)}function l(_,p){return function(A){var c=n.le(p,A[0]);if(c<0)return 1;var S=_[c];if(!S)if(c>0&&p[c]===A[0])S=_[c-1];else return 1;for(var T=1;S;){var x=S.key,w=t(A,x[0],x[1]);if(x[0][0]<x[1][0])if(w<0)S=S.left;else if(w>0)T=-1,S=S.right;else return 0;else if(w>0)S=S.left;else if(w<0)T=1,S=S.right;else return 0}return T}}function m(_){return 1}function d(_){return function(A){return _(A[0],A[1])?0:1}}function b(_,p){return function(c){return _(c[0],c[1])?0:p(c)}}function g(_){for(var p=_.length,A=[],c=[],S=0;S<p;++S)for(var T=_[S],x=T.length,w=x-1,v=0;v<x;w=v++){var C=T[w],M=T[v];C[0]===M[0]?c.push([C,M]):A.push([C,M])}if(A.length===0)return c.length===0?m:d(u(c));var E=a(A),L=l(E.slabs,E.coordinates);return c.length===0?L:b(u(c),L)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(o,h,y){var t=new Float64Array(4),a=new Float64Array(4),i=new Float64Array(4);function n(r,f,u,l,m){t.length<l.length&&(t=new Float64Array(l.length),a=new Float64Array(l.length),i=new Float64Array(l.length));for(var d=0;d<l.length;++d)t[d]=r[d]-l[d],a[d]=f[d]-r[d],i[d]=u[d]-r[d];for(var b=0,g=0,_=0,p=0,A=0,c=0,d=0;d<l.length;++d){var S=a[d],T=i[d],x=t[d];b+=S*S,g+=S*T,_+=T*T,p+=x*S,A+=x*T,c+=x*x}var w=Math.abs(b*_-g*g),v=g*A-_*p,C=g*p-b*A,M;if(v+C<=w)if(v<0)C<0&&p<0?(C=0,-p>=b?(v=1,M=b+2*p+c):(v=-p/b,M=p*v+c)):(v=0,A>=0?(C=0,M=c):-A>=_?(C=1,M=_+2*A+c):(C=-A/_,M=A*C+c));else if(C<0)C=0,p>=0?(v=0,M=c):-p>=b?(v=1,M=b+2*p+c):(v=-p/b,M=p*v+c);else{var E=1/w;v*=E,C*=E,M=v*(b*v+g*C+2*p)+C*(g*v+_*C+2*A)+c}else{var L,z,O,R;v<0?(L=g+p,z=_+A,z>L?(O=z-L,R=b-2*g+_,O>=R?(v=1,C=0,M=b+2*p+c):(v=O/R,C=1-v,M=v*(b*v+g*C+2*p)+C*(g*v+_*C+2*A)+c)):(v=0,z<=0?(C=1,M=_+2*A+c):A>=0?(C=0,M=c):(C=-A/_,M=A*C+c))):C<0?(L=g+A,z=b+p,z>L?(O=z-L,R=b-2*g+_,O>=R?(C=1,v=0,M=_+2*A+c):(C=O/R,v=1-C,M=v*(b*v+g*C+2*p)+C*(g*v+_*C+2*A)+c)):(C=0,z<=0?(v=1,M=b+2*p+c):p>=0?(v=0,M=c):(v=-p/b,M=p*v+c))):(O=_+A-g-p,O<=0?(v=0,C=1,M=_+2*A+c):(R=b-2*g+_,O>=R?(v=1,C=0,M=b+2*p+c):(v=O/R,C=1-v,M=v*(b*v+g*C+2*p)+C*(g*v+_*C+2*A)+c)))}for(var D=1-v-C,d=0;d<l.length;++d)m[d]=D*r[d]+v*f[d]+C*u[d];return M<0?0:M}h.exports=n},{}],271:[function(o,h,y){h.exports=o("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(o,h,y){var t=o("big-rat/add");h.exports=a;function a(i,n){for(var r=i.length,f=new Array(r),u=0;u<r;++u)f[u]=t(i[u],n[u]);return f}},{"big-rat/add":15}],273:[function(o,h,y){h.exports=a;var t=o("big-rat");function a(i){for(var n=new Array(i.length),r=0;r<i.length;++r)n[r]=t(i[r]);return n}},{"big-rat":18}],274:[function(o,h,y){var t=o("big-rat"),a=o("big-rat/mul");h.exports=i;function i(n,r){for(var f=t(r),u=n.length,l=new Array(u),m=0;m<u;++m)l[m]=a(n[m],f);return l}},{"big-rat":18,"big-rat/mul":27}],275:[function(o,h,y){var t=o("big-rat/sub");h.exports=a;function a(i,n){for(var r=i.length,f=new Array(r),u=0;u<r;++u)f[u]=t(i[u],n[u]);return f}},{"big-rat/sub":29}],276:[function(o,h,y){var t=o("compare-cell"),a=o("compare-oriented-cell"),i=o("cell-orientation");h.exports=n;function n(r){r.sort(a);for(var f=r.length,u=0,l=0;l<f;++l){var m=r[l],d=i(m);if(d!==0){if(u>0){var b=r[u-1];if(t(m,b)===0&&i(b)!==d){u-=1;continue}}r[u++]=m}}return r.length=u,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(o,h,y){var t="",a;h.exports=i;function i(n,r){if(typeof n!="string")throw new TypeError("expected a string");if(r===1)return n;if(r===2)return n+n;var f=n.length*r;if(a!==n||typeof a=="undefined")a=n,t="";else if(t.length>=f)return t.substr(0,f);for(;f>t.length&&r>1;)r&1&&(t+=n),r>>=1,n+=n;return t+=n,t=t.substr(0,f),t}},{}],278:[function(o,h,y){(function(t){(function(){h.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof s!="undefined"?s:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(o,h,y){h.exports=t;function t(a){for(var i=a.length,n=a[a.length-1],r=i,f=i-2;f>=0;--f){var u=n,l=a[f];n=u+l;var m=n-u,d=l-m;d&&(a[--r]=n,n=d)}for(var b=0,f=r;f<i;++f){var u=a[f],l=n;n=u+l;var m=n-u,d=l-m;d&&(a[b++]=d)}return a[b++]=n,a.length=b,a}},{}],280:[function(o,h,y){var t=o("two-product"),a=o("robust-sum"),i=o("robust-scale"),n=o("robust-compress"),r=6;function f(p,A,c,S){return function(x){return S(p(c(x[0][0],x[1][1]),c(-x[0][1],x[1][0])))}}function u(p,A,c,S){return function(x){return S(p(A(p(c(x[1][1],x[2][2]),c(-x[1][2],x[2][1])),x[0][0]),p(A(p(c(x[1][0],x[2][2]),c(-x[1][2],x[2][0])),-x[0][1]),A(p(c(x[1][0],x[2][1]),c(-x[1][1],x[2][0])),x[0][2]))))}}function l(p,A,c,S){return function(x){return S(p(p(A(p(A(p(c(x[2][2],x[3][3]),c(-x[2][3],x[3][2])),x[1][1]),p(A(p(c(x[2][1],x[3][3]),c(-x[2][3],x[3][1])),-x[1][2]),A(p(c(x[2][1],x[3][2]),c(-x[2][2],x[3][1])),x[1][3]))),x[0][0]),A(p(A(p(c(x[2][2],x[3][3]),c(-x[2][3],x[3][2])),x[1][0]),p(A(p(c(x[2][0],x[3][3]),c(-x[2][3],x[3][0])),-x[1][2]),A(p(c(x[2][0],x[3][2]),c(-x[2][2],x[3][0])),x[1][3]))),-x[0][1])),p(A(p(A(p(c(x[2][1],x[3][3]),c(-x[2][3],x[3][1])),x[1][0]),p(A(p(c(x[2][0],x[3][3]),c(-x[2][3],x[3][0])),-x[1][1]),A(p(c(x[2][0],x[3][1]),c(-x[2][1],x[3][0])),x[1][3]))),x[0][2]),A(p(A(p(c(x[2][1],x[3][2]),c(-x[2][2],x[3][1])),x[1][0]),p(A(p(c(x[2][0],x[3][2]),c(-x[2][2],x[3][0])),-x[1][1]),A(p(c(x[2][0],x[3][1]),c(-x[2][1],x[3][0])),x[1][2]))),-x[0][3]))))}}function m(p,A,c,S){return function(x){return S(p(p(A(p(p(A(p(A(p(c(x[3][3],x[4][4]),c(-x[3][4],x[4][3])),x[2][2]),p(A(p(c(x[3][2],x[4][4]),c(-x[3][4],x[4][2])),-x[2][3]),A(p(c(x[3][2],x[4][3]),c(-x[3][3],x[4][2])),x[2][4]))),x[1][1]),A(p(A(p(c(x[3][3],x[4][4]),c(-x[3][4],x[4][3])),x[2][1]),p(A(p(c(x[3][1],x[4][4]),c(-x[3][4],x[4][1])),-x[2][3]),A(p(c(x[3][1],x[4][3]),c(-x[3][3],x[4][1])),x[2][4]))),-x[1][2])),p(A(p(A(p(c(x[3][2],x[4][4]),c(-x[3][4],x[4][2])),x[2][1]),p(A(p(c(x[3][1],x[4][4]),c(-x[3][4],x[4][1])),-x[2][2]),A(p(c(x[3][1],x[4][2]),c(-x[3][2],x[4][1])),x[2][4]))),x[1][3]),A(p(A(p(c(x[3][2],x[4][3]),c(-x[3][3],x[4][2])),x[2][1]),p(A(p(c(x[3][1],x[4][3]),c(-x[3][3],x[4][1])),-x[2][2]),A(p(c(x[3][1],x[4][2]),c(-x[3][2],x[4][1])),x[2][3]))),-x[1][4]))),x[0][0]),A(p(p(A(p(A(p(c(x[3][3],x[4][4]),c(-x[3][4],x[4][3])),x[2][2]),p(A(p(c(x[3][2],x[4][4]),c(-x[3][4],x[4][2])),-x[2][3]),A(p(c(x[3][2],x[4][3]),c(-x[3][3],x[4][2])),x[2][4]))),x[1][0]),A(p(A(p(c(x[3][3],x[4][4]),c(-x[3][4],x[4][3])),x[2][0]),p(A(p(c(x[3][0],x[4][4]),c(-x[3][4],x[4][0])),-x[2][3]),A(p(c(x[3][0],x[4][3]),c(-x[3][3],x[4][0])),x[2][4]))),-x[1][2])),p(A(p(A(p(c(x[3][2],x[4][4]),c(-x[3][4],x[4][2])),x[2][0]),p(A(p(c(x[3][0],x[4][4]),c(-x[3][4],x[4][0])),-x[2][2]),A(p(c(x[3][0],x[4][2]),c(-x[3][2],x[4][0])),x[2][4]))),x[1][3]),A(p(A(p(c(x[3][2],x[4][3]),c(-x[3][3],x[4][2])),x[2][0]),p(A(p(c(x[3][0],x[4][3]),c(-x[3][3],x[4][0])),-x[2][2]),A(p(c(x[3][0],x[4][2]),c(-x[3][2],x[4][0])),x[2][3]))),-x[1][4]))),-x[0][1])),p(A(p(p(A(p(A(p(c(x[3][3],x[4][4]),c(-x[3][4],x[4][3])),x[2][1]),p(A(p(c(x[3][1],x[4][4]),c(-x[3][4],x[4][1])),-x[2][3]),A(p(c(x[3][1],x[4][3]),c(-x[3][3],x[4][1])),x[2][4]))),x[1][0]),A(p(A(p(c(x[3][3],x[4][4]),c(-x[3][4],x[4][3])),x[2][0]),p(A(p(c(x[3][0],x[4][4]),c(-x[3][4],x[4][0])),-x[2][3]),A(p(c(x[3][0],x[4][3]),c(-x[3][3],x[4][0])),x[2][4]))),-x[1][1])),p(A(p(A(p(c(x[3][1],x[4][4]),c(-x[3][4],x[4][1])),x[2][0]),p(A(p(c(x[3][0],x[4][4]),c(-x[3][4],x[4][0])),-x[2][1]),A(p(c(x[3][0],x[4][1]),c(-x[3][1],x[4][0])),x[2][4]))),x[1][3]),A(p(A(p(c(x[3][1],x[4][3]),c(-x[3][3],x[4][1])),x[2][0]),p(A(p(c(x[3][0],x[4][3]),c(-x[3][3],x[4][0])),-x[2][1]),A(p(c(x[3][0],x[4][1]),c(-x[3][1],x[4][0])),x[2][3]))),-x[1][4]))),x[0][2]),p(A(p(p(A(p(A(p(c(x[3][2],x[4][4]),c(-x[3][4],x[4][2])),x[2][1]),p(A(p(c(x[3][1],x[4][4]),c(-x[3][4],x[4][1])),-x[2][2]),A(p(c(x[3][1],x[4][2]),c(-x[3][2],x[4][1])),x[2][4]))),x[1][0]),A(p(A(p(c(x[3][2],x[4][4]),c(-x[3][4],x[4][2])),x[2][0]),p(A(p(c(x[3][0],x[4][4]),c(-x[3][4],x[4][0])),-x[2][2]),A(p(c(x[3][0],x[4][2]),c(-x[3][2],x[4][0])),x[2][4]))),-x[1][1])),p(A(p(A(p(c(x[3][1],x[4][4]),c(-x[3][4],x[4][1])),x[2][0]),p(A(p(c(x[3][0],x[4][4]),c(-x[3][4],x[4][0])),-x[2][1]),A(p(c(x[3][0],x[4][1]),c(-x[3][1],x[4][0])),x[2][4]))),x[1][2]),A(p(A(p(c(x[3][1],x[4][2]),c(-x[3][2],x[4][1])),x[2][0]),p(A(p(c(x[3][0],x[4][2]),c(-x[3][2],x[4][0])),-x[2][1]),A(p(c(x[3][0],x[4][1]),c(-x[3][1],x[4][0])),x[2][2]))),-x[1][4]))),-x[0][3]),A(p(p(A(p(A(p(c(x[3][2],x[4][3]),c(-x[3][3],x[4][2])),x[2][1]),p(A(p(c(x[3][1],x[4][3]),c(-x[3][3],x[4][1])),-x[2][2]),A(p(c(x[3][1],x[4][2]),c(-x[3][2],x[4][1])),x[2][3]))),x[1][0]),A(p(A(p(c(x[3][2],x[4][3]),c(-x[3][3],x[4][2])),x[2][0]),p(A(p(c(x[3][0],x[4][3]),c(-x[3][3],x[4][0])),-x[2][2]),A(p(c(x[3][0],x[4][2]),c(-x[3][2],x[4][0])),x[2][3]))),-x[1][1])),p(A(p(A(p(c(x[3][1],x[4][3]),c(-x[3][3],x[4][1])),x[2][0]),p(A(p(c(x[3][0],x[4][3]),c(-x[3][3],x[4][0])),-x[2][1]),A(p(c(x[3][0],x[4][1]),c(-x[3][1],x[4][0])),x[2][3]))),x[1][2]),A(p(A(p(c(x[3][1],x[4][2]),c(-x[3][2],x[4][1])),x[2][0]),p(A(p(c(x[3][0],x[4][2]),c(-x[3][2],x[4][0])),-x[2][1]),A(p(c(x[3][0],x[4][1]),c(-x[3][1],x[4][0])),x[2][2]))),-x[1][3]))),x[0][4])))))}}function d(p){var A=p===2?f:p===3?u:p===4?l:p===5?m:void 0;return A(a,i,t,n)}var b=[function(){return[0]},function(A){return[A[0][0]]}];function g(p,A,c,S,T,x,w,v){return function(M){switch(M.length){case 0:return p(M);case 1:return A(M);case 2:return c(M);case 3:return S(M);case 4:return T(M);case 5:return x(M)}var E=w[M.length];return E||(E=w[M.length]=v(M.length)),E(M)}}function _(){for(;b.length<r;)b.push(d(b.length));h.exports=g.apply(void 0,b.concat([b,d]));for(var p=0;p<b.length;++p)h.exports[p]=b[p]}_()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(o,h,y){var t=o("two-product"),a=o("robust-sum");h.exports=i;function i(n,r){for(var f=t(n[0],r[0]),u=1;u<n.length;++u)f=a(f,t(n[u],r[u]));return f}},{"robust-sum":289,"two-product":306}],282:[function(o,h,y){var t=o("two-product"),a=o("robust-sum"),i=o("robust-subtract"),n=o("robust-scale"),r=6;function f(T){var x=T===3?d:T===4?b:T===5?g:_;return x(a,i,t,n)}function u(){return 0}function l(){return 0}function m(){return 0}function d(T,x,w,v){function C(M,E,L){var z=w(M[0],M[0]),O=v(z,E[0]),R=v(z,L[0]),D=w(E[0],E[0]),H=v(D,M[0]),B=v(D,L[0]),$=w(L[0],L[0]),W=v($,M[0]),re=v($,E[0]),Q=T(x(re,B),x(H,O)),Z=x(W,R),K=x(Q,Z);return K[K.length-1]}return C}function b(T,x,w,v){function C(M,E,L,z){var O=T(w(M[0],M[0]),w(M[1],M[1])),R=v(O,E[0]),D=v(O,L[0]),H=v(O,z[0]),B=T(w(E[0],E[0]),w(E[1],E[1])),$=v(B,M[0]),W=v(B,L[0]),re=v(B,z[0]),Q=T(w(L[0],L[0]),w(L[1],L[1])),Z=v(Q,M[0]),K=v(Q,E[0]),le=v(Q,z[0]),fe=T(w(z[0],z[0]),w(z[1],z[1])),ue=v(fe,M[0]),V=v(fe,E[0]),j=v(fe,L[0]),ee=T(T(v(x(j,le),E[1]),T(v(x(V,re),-L[1]),v(x(K,W),z[1]))),T(v(x(V,re),M[1]),T(v(x(ue,H),-E[1]),v(x($,R),z[1])))),q=T(T(v(x(j,le),M[1]),T(v(x(ue,H),-L[1]),v(x(Z,D),z[1]))),T(v(x(K,W),M[1]),T(v(x(Z,D),-E[1]),v(x($,R),L[1])))),X=x(ee,q);return X[X.length-1]}return C}function g(T,x,w,v){function C(M,E,L,z,O){var R=T(w(M[0],M[0]),T(w(M[1],M[1]),w(M[2],M[2]))),D=v(R,E[0]),H=v(R,L[0]),B=v(R,z[0]),$=v(R,O[0]),W=T(w(E[0],E[0]),T(w(E[1],E[1]),w(E[2],E[2]))),re=v(W,M[0]),Q=v(W,L[0]),Z=v(W,z[0]),K=v(W,O[0]),le=T(w(L[0],L[0]),T(w(L[1],L[1]),w(L[2],L[2]))),fe=v(le,M[0]),ue=v(le,E[0]),V=v(le,z[0]),j=v(le,O[0]),ee=T(w(z[0],z[0]),T(w(z[1],z[1]),w(z[2],z[2]))),q=v(ee,M[0]),X=v(ee,E[0]),J=v(ee,L[0]),ie=v(ee,O[0]),ne=T(w(O[0],O[0]),T(w(O[1],O[1]),w(O[2],O[2]))),oe=v(ne,M[0]),se=v(ne,E[0]),me=v(ne,L[0]),ce=v(ne,z[0]),pe=T(T(T(v(T(v(x(ce,ie),L[1]),T(v(x(me,j),-z[1]),v(x(J,V),O[1]))),E[2]),T(v(T(v(x(ce,ie),E[1]),T(v(x(se,K),-z[1]),v(x(X,Z),O[1]))),-L[2]),v(T(v(x(me,j),E[1]),T(v(x(se,K),-L[1]),v(x(ue,Q),O[1]))),z[2]))),T(v(T(v(x(J,V),E[1]),T(v(x(X,Z),-L[1]),v(x(ue,Q),z[1]))),-O[2]),T(v(T(v(x(ce,ie),E[1]),T(v(x(se,K),-z[1]),v(x(X,Z),O[1]))),M[2]),v(T(v(x(ce,ie),M[1]),T(v(x(oe,$),-z[1]),v(x(q,B),O[1]))),-E[2])))),T(T(v(T(v(x(se,K),M[1]),T(v(x(oe,$),-E[1]),v(x(re,D),O[1]))),z[2]),T(v(T(v(x(X,Z),M[1]),T(v(x(q,B),-E[1]),v(x(re,D),z[1]))),-O[2]),v(T(v(x(J,V),E[1]),T(v(x(X,Z),-L[1]),v(x(ue,Q),z[1]))),M[2]))),T(v(T(v(x(J,V),M[1]),T(v(x(q,B),-L[1]),v(x(fe,H),z[1]))),-E[2]),T(v(T(v(x(X,Z),M[1]),T(v(x(q,B),-E[1]),v(x(re,D),z[1]))),L[2]),v(T(v(x(ue,Q),M[1]),T(v(x(fe,H),-E[1]),v(x(re,D),L[1]))),-z[2]))))),xe=T(T(T(v(T(v(x(ce,ie),L[1]),T(v(x(me,j),-z[1]),v(x(J,V),O[1]))),M[2]),v(T(v(x(ce,ie),M[1]),T(v(x(oe,$),-z[1]),v(x(q,B),O[1]))),-L[2])),T(v(T(v(x(me,j),M[1]),T(v(x(oe,$),-L[1]),v(x(fe,H),O[1]))),z[2]),v(T(v(x(J,V),M[1]),T(v(x(q,B),-L[1]),v(x(fe,H),z[1]))),-O[2]))),T(T(v(T(v(x(me,j),E[1]),T(v(x(se,K),-L[1]),v(x(ue,Q),O[1]))),M[2]),v(T(v(x(me,j),M[1]),T(v(x(oe,$),-L[1]),v(x(fe,H),O[1]))),-E[2])),T(v(T(v(x(se,K),M[1]),T(v(x(oe,$),-E[1]),v(x(re,D),O[1]))),L[2]),v(T(v(x(ue,Q),M[1]),T(v(x(fe,H),-E[1]),v(x(re,D),L[1]))),-O[2])))),Se=x(pe,xe);return Se[Se.length-1]}return C}function _(T,x,w,v){function C(M,E,L,z,O,R){var D=T(T(w(M[0],M[0]),w(M[1],M[1])),T(w(M[2],M[2]),w(M[3],M[3]))),H=v(D,E[0]),B=v(D,L[0]),$=v(D,z[0]),W=v(D,O[0]),re=v(D,R[0]),Q=T(T(w(E[0],E[0]),w(E[1],E[1])),T(w(E[2],E[2]),w(E[3],E[3]))),Z=v(Q,M[0]),K=v(Q,L[0]),le=v(Q,z[0]),fe=v(Q,O[0]),ue=v(Q,R[0]),V=T(T(w(L[0],L[0]),w(L[1],L[1])),T(w(L[2],L[2]),w(L[3],L[3]))),j=v(V,M[0]),ee=v(V,E[0]),q=v(V,z[0]),X=v(V,O[0]),J=v(V,R[0]),ie=T(T(w(z[0],z[0]),w(z[1],z[1])),T(w(z[2],z[2]),w(z[3],z[3]))),ne=v(ie,M[0]),oe=v(ie,E[0]),se=v(ie,L[0]),me=v(ie,O[0]),ce=v(ie,R[0]),pe=T(T(w(O[0],O[0]),w(O[1],O[1])),T(w(O[2],O[2]),w(O[3],O[3]))),xe=v(pe,M[0]),Se=v(pe,E[0]),Ae=v(pe,L[0]),Ce=v(pe,z[0]),Ee=v(pe,R[0]),Oe=T(T(w(R[0],R[0]),w(R[1],R[1])),T(w(R[2],R[2]),w(R[3],R[3]))),_e=v(Oe,M[0]),Re=v(Oe,E[0]),Ve=v(Oe,L[0]),Je=v(Oe,z[0]),ze=v(Oe,O[0]),De=T(T(T(v(T(T(v(T(v(x(ze,Ee),z[1]),T(v(x(Je,ce),-O[1]),v(x(Ce,me),R[1]))),L[2]),v(T(v(x(ze,Ee),L[1]),T(v(x(Ve,J),-O[1]),v(x(Ae,X),R[1]))),-z[2])),T(v(T(v(x(Je,ce),L[1]),T(v(x(Ve,J),-z[1]),v(x(se,q),R[1]))),O[2]),v(T(v(x(Ce,me),L[1]),T(v(x(Ae,X),-z[1]),v(x(se,q),O[1]))),-R[2]))),E[3]),T(v(T(T(v(T(v(x(ze,Ee),z[1]),T(v(x(Je,ce),-O[1]),v(x(Ce,me),R[1]))),E[2]),v(T(v(x(ze,Ee),E[1]),T(v(x(Re,ue),-O[1]),v(x(Se,fe),R[1]))),-z[2])),T(v(T(v(x(Je,ce),E[1]),T(v(x(Re,ue),-z[1]),v(x(oe,le),R[1]))),O[2]),v(T(v(x(Ce,me),E[1]),T(v(x(Se,fe),-z[1]),v(x(oe,le),O[1]))),-R[2]))),-L[3]),v(T(T(v(T(v(x(ze,Ee),L[1]),T(v(x(Ve,J),-O[1]),v(x(Ae,X),R[1]))),E[2]),v(T(v(x(ze,Ee),E[1]),T(v(x(Re,ue),-O[1]),v(x(Se,fe),R[1]))),-L[2])),T(v(T(v(x(Ve,J),E[1]),T(v(x(Re,ue),-L[1]),v(x(ee,K),R[1]))),O[2]),v(T(v(x(Ae,X),E[1]),T(v(x(Se,fe),-L[1]),v(x(ee,K),O[1]))),-R[2]))),z[3]))),T(T(v(T(T(v(T(v(x(Je,ce),L[1]),T(v(x(Ve,J),-z[1]),v(x(se,q),R[1]))),E[2]),v(T(v(x(Je,ce),E[1]),T(v(x(Re,ue),-z[1]),v(x(oe,le),R[1]))),-L[2])),T(v(T(v(x(Ve,J),E[1]),T(v(x(Re,ue),-L[1]),v(x(ee,K),R[1]))),z[2]),v(T(v(x(se,q),E[1]),T(v(x(oe,le),-L[1]),v(x(ee,K),z[1]))),-R[2]))),-O[3]),v(T(T(v(T(v(x(Ce,me),L[1]),T(v(x(Ae,X),-z[1]),v(x(se,q),O[1]))),E[2]),v(T(v(x(Ce,me),E[1]),T(v(x(Se,fe),-z[1]),v(x(oe,le),O[1]))),-L[2])),T(v(T(v(x(Ae,X),E[1]),T(v(x(Se,fe),-L[1]),v(x(ee,K),O[1]))),z[2]),v(T(v(x(se,q),E[1]),T(v(x(oe,le),-L[1]),v(x(ee,K),z[1]))),-O[2]))),R[3])),T(v(T(T(v(T(v(x(ze,Ee),z[1]),T(v(x(Je,ce),-O[1]),v(x(Ce,me),R[1]))),E[2]),v(T(v(x(ze,Ee),E[1]),T(v(x(Re,ue),-O[1]),v(x(Se,fe),R[1]))),-z[2])),T(v(T(v(x(Je,ce),E[1]),T(v(x(Re,ue),-z[1]),v(x(oe,le),R[1]))),O[2]),v(T(v(x(Ce,me),E[1]),T(v(x(Se,fe),-z[1]),v(x(oe,le),O[1]))),-R[2]))),M[3]),v(T(T(v(T(v(x(ze,Ee),z[1]),T(v(x(Je,ce),-O[1]),v(x(Ce,me),R[1]))),M[2]),v(T(v(x(ze,Ee),M[1]),T(v(x(_e,re),-O[1]),v(x(xe,W),R[1]))),-z[2])),T(v(T(v(x(Je,ce),M[1]),T(v(x(_e,re),-z[1]),v(x(ne,$),R[1]))),O[2]),v(T(v(x(Ce,me),M[1]),T(v(x(xe,W),-z[1]),v(x(ne,$),O[1]))),-R[2]))),-E[3])))),T(T(T(v(T(T(v(T(v(x(ze,Ee),E[1]),T(v(x(Re,ue),-O[1]),v(x(Se,fe),R[1]))),M[2]),v(T(v(x(ze,Ee),M[1]),T(v(x(_e,re),-O[1]),v(x(xe,W),R[1]))),-E[2])),T(v(T(v(x(Re,ue),M[1]),T(v(x(_e,re),-E[1]),v(x(Z,H),R[1]))),O[2]),v(T(v(x(Se,fe),M[1]),T(v(x(xe,W),-E[1]),v(x(Z,H),O[1]))),-R[2]))),z[3]),v(T(T(v(T(v(x(Je,ce),E[1]),T(v(x(Re,ue),-z[1]),v(x(oe,le),R[1]))),M[2]),v(T(v(x(Je,ce),M[1]),T(v(x(_e,re),-z[1]),v(x(ne,$),R[1]))),-E[2])),T(v(T(v(x(Re,ue),M[1]),T(v(x(_e,re),-E[1]),v(x(Z,H),R[1]))),z[2]),v(T(v(x(oe,le),M[1]),T(v(x(ne,$),-E[1]),v(x(Z,H),z[1]))),-R[2]))),-O[3])),T(v(T(T(v(T(v(x(Ce,me),E[1]),T(v(x(Se,fe),-z[1]),v(x(oe,le),O[1]))),M[2]),v(T(v(x(Ce,me),M[1]),T(v(x(xe,W),-z[1]),v(x(ne,$),O[1]))),-E[2])),T(v(T(v(x(Se,fe),M[1]),T(v(x(xe,W),-E[1]),v(x(Z,H),O[1]))),z[2]),v(T(v(x(oe,le),M[1]),T(v(x(ne,$),-E[1]),v(x(Z,H),z[1]))),-O[2]))),R[3]),v(T(T(v(T(v(x(Je,ce),L[1]),T(v(x(Ve,J),-z[1]),v(x(se,q),R[1]))),E[2]),v(T(v(x(Je,ce),E[1]),T(v(x(Re,ue),-z[1]),v(x(oe,le),R[1]))),-L[2])),T(v(T(v(x(Ve,J),E[1]),T(v(x(Re,ue),-L[1]),v(x(ee,K),R[1]))),z[2]),v(T(v(x(se,q),E[1]),T(v(x(oe,le),-L[1]),v(x(ee,K),z[1]))),-R[2]))),M[3]))),T(T(v(T(T(v(T(v(x(Je,ce),L[1]),T(v(x(Ve,J),-z[1]),v(x(se,q),R[1]))),M[2]),v(T(v(x(Je,ce),M[1]),T(v(x(_e,re),-z[1]),v(x(ne,$),R[1]))),-L[2])),T(v(T(v(x(Ve,J),M[1]),T(v(x(_e,re),-L[1]),v(x(j,B),R[1]))),z[2]),v(T(v(x(se,q),M[1]),T(v(x(ne,$),-L[1]),v(x(j,B),z[1]))),-R[2]))),-E[3]),v(T(T(v(T(v(x(Je,ce),E[1]),T(v(x(Re,ue),-z[1]),v(x(oe,le),R[1]))),M[2]),v(T(v(x(Je,ce),M[1]),T(v(x(_e,re),-z[1]),v(x(ne,$),R[1]))),-E[2])),T(v(T(v(x(Re,ue),M[1]),T(v(x(_e,re),-E[1]),v(x(Z,H),R[1]))),z[2]),v(T(v(x(oe,le),M[1]),T(v(x(ne,$),-E[1]),v(x(Z,H),z[1]))),-R[2]))),L[3])),T(v(T(T(v(T(v(x(Ve,J),E[1]),T(v(x(Re,ue),-L[1]),v(x(ee,K),R[1]))),M[2]),v(T(v(x(Ve,J),M[1]),T(v(x(_e,re),-L[1]),v(x(j,B),R[1]))),-E[2])),T(v(T(v(x(Re,ue),M[1]),T(v(x(_e,re),-E[1]),v(x(Z,H),R[1]))),L[2]),v(T(v(x(ee,K),M[1]),T(v(x(j,B),-E[1]),v(x(Z,H),L[1]))),-R[2]))),-z[3]),v(T(T(v(T(v(x(se,q),E[1]),T(v(x(oe,le),-L[1]),v(x(ee,K),z[1]))),M[2]),v(T(v(x(se,q),M[1]),T(v(x(ne,$),-L[1]),v(x(j,B),z[1]))),-E[2])),T(v(T(v(x(oe,le),M[1]),T(v(x(ne,$),-E[1]),v(x(Z,H),z[1]))),L[2]),v(T(v(x(ee,K),M[1]),T(v(x(j,B),-E[1]),v(x(Z,H),L[1]))),-z[2]))),R[3]))))),je=T(T(T(v(T(T(v(T(v(x(ze,Ee),z[1]),T(v(x(Je,ce),-O[1]),v(x(Ce,me),R[1]))),L[2]),v(T(v(x(ze,Ee),L[1]),T(v(x(Ve,J),-O[1]),v(x(Ae,X),R[1]))),-z[2])),T(v(T(v(x(Je,ce),L[1]),T(v(x(Ve,J),-z[1]),v(x(se,q),R[1]))),O[2]),v(T(v(x(Ce,me),L[1]),T(v(x(Ae,X),-z[1]),v(x(se,q),O[1]))),-R[2]))),M[3]),T(v(T(T(v(T(v(x(ze,Ee),z[1]),T(v(x(Je,ce),-O[1]),v(x(Ce,me),R[1]))),M[2]),v(T(v(x(ze,Ee),M[1]),T(v(x(_e,re),-O[1]),v(x(xe,W),R[1]))),-z[2])),T(v(T(v(x(Je,ce),M[1]),T(v(x(_e,re),-z[1]),v(x(ne,$),R[1]))),O[2]),v(T(v(x(Ce,me),M[1]),T(v(x(xe,W),-z[1]),v(x(ne,$),O[1]))),-R[2]))),-L[3]),v(T(T(v(T(v(x(ze,Ee),L[1]),T(v(x(Ve,J),-O[1]),v(x(Ae,X),R[1]))),M[2]),v(T(v(x(ze,Ee),M[1]),T(v(x(_e,re),-O[1]),v(x(xe,W),R[1]))),-L[2])),T(v(T(v(x(Ve,J),M[1]),T(v(x(_e,re),-L[1]),v(x(j,B),R[1]))),O[2]),v(T(v(x(Ae,X),M[1]),T(v(x(xe,W),-L[1]),v(x(j,B),O[1]))),-R[2]))),z[3]))),T(T(v(T(T(v(T(v(x(Je,ce),L[1]),T(v(x(Ve,J),-z[1]),v(x(se,q),R[1]))),M[2]),v(T(v(x(Je,ce),M[1]),T(v(x(_e,re),-z[1]),v(x(ne,$),R[1]))),-L[2])),T(v(T(v(x(Ve,J),M[1]),T(v(x(_e,re),-L[1]),v(x(j,B),R[1]))),z[2]),v(T(v(x(se,q),M[1]),T(v(x(ne,$),-L[1]),v(x(j,B),z[1]))),-R[2]))),-O[3]),v(T(T(v(T(v(x(Ce,me),L[1]),T(v(x(Ae,X),-z[1]),v(x(se,q),O[1]))),M[2]),v(T(v(x(Ce,me),M[1]),T(v(x(xe,W),-z[1]),v(x(ne,$),O[1]))),-L[2])),T(v(T(v(x(Ae,X),M[1]),T(v(x(xe,W),-L[1]),v(x(j,B),O[1]))),z[2]),v(T(v(x(se,q),M[1]),T(v(x(ne,$),-L[1]),v(x(j,B),z[1]))),-O[2]))),R[3])),T(v(T(T(v(T(v(x(ze,Ee),L[1]),T(v(x(Ve,J),-O[1]),v(x(Ae,X),R[1]))),E[2]),v(T(v(x(ze,Ee),E[1]),T(v(x(Re,ue),-O[1]),v(x(Se,fe),R[1]))),-L[2])),T(v(T(v(x(Ve,J),E[1]),T(v(x(Re,ue),-L[1]),v(x(ee,K),R[1]))),O[2]),v(T(v(x(Ae,X),E[1]),T(v(x(Se,fe),-L[1]),v(x(ee,K),O[1]))),-R[2]))),M[3]),v(T(T(v(T(v(x(ze,Ee),L[1]),T(v(x(Ve,J),-O[1]),v(x(Ae,X),R[1]))),M[2]),v(T(v(x(ze,Ee),M[1]),T(v(x(_e,re),-O[1]),v(x(xe,W),R[1]))),-L[2])),T(v(T(v(x(Ve,J),M[1]),T(v(x(_e,re),-L[1]),v(x(j,B),R[1]))),O[2]),v(T(v(x(Ae,X),M[1]),T(v(x(xe,W),-L[1]),v(x(j,B),O[1]))),-R[2]))),-E[3])))),T(T(T(v(T(T(v(T(v(x(ze,Ee),E[1]),T(v(x(Re,ue),-O[1]),v(x(Se,fe),R[1]))),M[2]),v(T(v(x(ze,Ee),M[1]),T(v(x(_e,re),-O[1]),v(x(xe,W),R[1]))),-E[2])),T(v(T(v(x(Re,ue),M[1]),T(v(x(_e,re),-E[1]),v(x(Z,H),R[1]))),O[2]),v(T(v(x(Se,fe),M[1]),T(v(x(xe,W),-E[1]),v(x(Z,H),O[1]))),-R[2]))),L[3]),v(T(T(v(T(v(x(Ve,J),E[1]),T(v(x(Re,ue),-L[1]),v(x(ee,K),R[1]))),M[2]),v(T(v(x(Ve,J),M[1]),T(v(x(_e,re),-L[1]),v(x(j,B),R[1]))),-E[2])),T(v(T(v(x(Re,ue),M[1]),T(v(x(_e,re),-E[1]),v(x(Z,H),R[1]))),L[2]),v(T(v(x(ee,K),M[1]),T(v(x(j,B),-E[1]),v(x(Z,H),L[1]))),-R[2]))),-O[3])),T(v(T(T(v(T(v(x(Ae,X),E[1]),T(v(x(Se,fe),-L[1]),v(x(ee,K),O[1]))),M[2]),v(T(v(x(Ae,X),M[1]),T(v(x(xe,W),-L[1]),v(x(j,B),O[1]))),-E[2])),T(v(T(v(x(Se,fe),M[1]),T(v(x(xe,W),-E[1]),v(x(Z,H),O[1]))),L[2]),v(T(v(x(ee,K),M[1]),T(v(x(j,B),-E[1]),v(x(Z,H),L[1]))),-O[2]))),R[3]),v(T(T(v(T(v(x(Ce,me),L[1]),T(v(x(Ae,X),-z[1]),v(x(se,q),O[1]))),E[2]),v(T(v(x(Ce,me),E[1]),T(v(x(Se,fe),-z[1]),v(x(oe,le),O[1]))),-L[2])),T(v(T(v(x(Ae,X),E[1]),T(v(x(Se,fe),-L[1]),v(x(ee,K),O[1]))),z[2]),v(T(v(x(se,q),E[1]),T(v(x(oe,le),-L[1]),v(x(ee,K),z[1]))),-O[2]))),M[3]))),T(T(v(T(T(v(T(v(x(Ce,me),L[1]),T(v(x(Ae,X),-z[1]),v(x(se,q),O[1]))),M[2]),v(T(v(x(Ce,me),M[1]),T(v(x(xe,W),-z[1]),v(x(ne,$),O[1]))),-L[2])),T(v(T(v(x(Ae,X),M[1]),T(v(x(xe,W),-L[1]),v(x(j,B),O[1]))),z[2]),v(T(v(x(se,q),M[1]),T(v(x(ne,$),-L[1]),v(x(j,B),z[1]))),-O[2]))),-E[3]),v(T(T(v(T(v(x(Ce,me),E[1]),T(v(x(Se,fe),-z[1]),v(x(oe,le),O[1]))),M[2]),v(T(v(x(Ce,me),M[1]),T(v(x(xe,W),-z[1]),v(x(ne,$),O[1]))),-E[2])),T(v(T(v(x(Se,fe),M[1]),T(v(x(xe,W),-E[1]),v(x(Z,H),O[1]))),z[2]),v(T(v(x(oe,le),M[1]),T(v(x(ne,$),-E[1]),v(x(Z,H),z[1]))),-O[2]))),L[3])),T(v(T(T(v(T(v(x(Ae,X),E[1]),T(v(x(Se,fe),-L[1]),v(x(ee,K),O[1]))),M[2]),v(T(v(x(Ae,X),M[1]),T(v(x(xe,W),-L[1]),v(x(j,B),O[1]))),-E[2])),T(v(T(v(x(Se,fe),M[1]),T(v(x(xe,W),-E[1]),v(x(Z,H),O[1]))),L[2]),v(T(v(x(ee,K),M[1]),T(v(x(j,B),-E[1]),v(x(Z,H),L[1]))),-O[2]))),-z[3]),v(T(T(v(T(v(x(se,q),E[1]),T(v(x(oe,le),-L[1]),v(x(ee,K),z[1]))),M[2]),v(T(v(x(se,q),M[1]),T(v(x(ne,$),-L[1]),v(x(j,B),z[1]))),-E[2])),T(v(T(v(x(oe,le),M[1]),T(v(x(ne,$),-E[1]),v(x(Z,H),z[1]))),L[2]),v(T(v(x(ee,K),M[1]),T(v(x(j,B),-E[1]),v(x(Z,H),L[1]))),-z[2]))),O[3]))))),dt=x(De,je);return dt[dt.length-1]}return C}var p=[u,l,m];function A(T){var x=p[T.length];return x||(x=p[T.length]=f(T.length)),x.apply(void 0,T)}function c(T,x,w,v,C,M,E,L){function z(O,R,D,H,B,$){switch(arguments.length){case 0:case 1:return 0;case 2:return v(O,R);case 3:return C(O,R,D);case 4:return M(O,R,D,H);case 5:return E(O,R,D,H,B);case 6:return L(O,R,D,H,B,$)}for(var W=new Array(arguments.length),re=0;re<arguments.length;++re)W[re]=arguments[re];return T(W)}return z}function S(){for(;p.length<=r;)p.push(f(p.length));h.exports=c.apply(void 0,[A].concat(p));for(var T=0;T<=r;++T)h.exports[T]=p[T]}S()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(o,h,y){var t=o("robust-determinant"),a=6;function i(p){var A=p===2?f:p===3?u:p===4?l:p===5?m:d;return p<6?A(t[p]):A(t)}function n(){return[[0]]}function r(p,A){return[[A[0]],[p[0][0]]]}function f(p){return function(c,S){return[p([[+S[0],+c[0][1]],[+S[1],+c[1][1]]]),p([[+c[0][0],+S[0]],[+c[1][0],+S[1]]]),p(c)]}}function u(p){return function(c,S){return[p([[+S[0],+c[0][1],+c[0][2]],[+S[1],+c[1][1],+c[1][2]],[+S[2],+c[2][1],+c[2][2]]]),p([[+c[0][0],+S[0],+c[0][2]],[+c[1][0],+S[1],+c[1][2]],[+c[2][0],+S[2],+c[2][2]]]),p([[+c[0][0],+c[0][1],+S[0]],[+c[1][0],+c[1][1],+S[1]],[+c[2][0],+c[2][1],+S[2]]]),p(c)]}}function l(p){return function(c,S){return[p([[+S[0],+c[0][1],+c[0][2],+c[0][3]],[+S[1],+c[1][1],+c[1][2],+c[1][3]],[+S[2],+c[2][1],+c[2][2],+c[2][3]],[+S[3],+c[3][1],+c[3][2],+c[3][3]]]),p([[+c[0][0],+S[0],+c[0][2],+c[0][3]],[+c[1][0],+S[1],+c[1][2],+c[1][3]],[+c[2][0],+S[2],+c[2][2],+c[2][3]],[+c[3][0],+S[3],+c[3][2],+c[3][3]]]),p([[+c[0][0],+c[0][1],+S[0],+c[0][3]],[+c[1][0],+c[1][1],+S[1],+c[1][3]],[+c[2][0],+c[2][1],+S[2],+c[2][3]],[+c[3][0],+c[3][1],+S[3],+c[3][3]]]),p([[+c[0][0],+c[0][1],+c[0][2],+S[0]],[+c[1][0],+c[1][1],+c[1][2],+S[1]],[+c[2][0],+c[2][1],+c[2][2],+S[2]],[+c[3][0],+c[3][1],+c[3][2],+S[3]]]),p(c)]}}function m(p){return function(c,S){return[p([[+S[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4]],[+S[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4]],[+S[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4]],[+S[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4]],[+S[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4]]]),p([[+c[0][0],+S[0],+c[0][2],+c[0][3],+c[0][4]],[+c[1][0],+S[1],+c[1][2],+c[1][3],+c[1][4]],[+c[2][0],+S[2],+c[2][2],+c[2][3],+c[2][4]],[+c[3][0],+S[3],+c[3][2],+c[3][3],+c[3][4]],[+c[4][0],+S[4],+c[4][2],+c[4][3],+c[4][4]]]),p([[+c[0][0],+c[0][1],+S[0],+c[0][3],+c[0][4]],[+c[1][0],+c[1][1],+S[1],+c[1][3],+c[1][4]],[+c[2][0],+c[2][1],+S[2],+c[2][3],+c[2][4]],[+c[3][0],+c[3][1],+S[3],+c[3][3],+c[3][4]],[+c[4][0],+c[4][1],+S[4],+c[4][3],+c[4][4]]]),p([[+c[0][0],+c[0][1],+c[0][2],+S[0],+c[0][4]],[+c[1][0],+c[1][1],+c[1][2],+S[1],+c[1][4]],[+c[2][0],+c[2][1],+c[2][2],+S[2],+c[2][4]],[+c[3][0],+c[3][1],+c[3][2],+S[3],+c[3][4]],[+c[4][0],+c[4][1],+c[4][2],+S[4],+c[4][4]]]),p([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+S[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+S[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+S[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+S[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+S[4]]]),p(c)]}}function d(p){return function(c,S){return[p([[+S[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+S[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+S[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+S[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+S[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+S[5],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),p([[+c[0][0],+S[0],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+S[1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+S[2],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+S[3],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+S[4],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+S[5],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),p([[+c[0][0],+c[0][1],+S[0],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+S[1],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+S[2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+S[3],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+S[4],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+S[5],+c[5][3],+c[5][4],+c[5][5]]]),p([[+c[0][0],+c[0][1],+c[0][2],+S[0],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+S[1],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+S[2],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+S[3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+S[4],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+S[5],+c[5][4],+c[5][5]]]),p([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+S[0],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+S[1],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+S[2],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+S[3],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+S[4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+S[5],+c[5][5]]]),p([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+S[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+S[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+S[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+S[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+S[4]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+S[5]]]),p(c)]}}var b=[n,r];function g(p,A,c,S,T,x,w,v){return function(M,E){switch(M.length){case 0:return p(M,E);case 1:return A(M,E);case 2:return c(M,E);case 3:return S(M,E);case 4:return T(M,E);case 5:return x(M,E)}var L=w[M.length];return L||(L=w[M.length]=v(M.length)),L(M,E)}}function _(){for(;b.length<a;)b.push(i(b.length));h.exports=g.apply(void 0,b.concat([b,i]));for(var p=0;p<a;++p)h.exports[p]=b[p]}_()},{"robust-determinant":280}],284:[function(o,h,y){var t=o("two-product"),a=o("robust-sum"),i=o("robust-scale"),n=o("robust-subtract"),r=5,f=11102230246251565e-32,u=(3+16*f)*f,l=(7+56*f)*f;function m(x,w,v,C){return function(E,L,z){var O=x(x(w(L[1],z[0]),w(-z[1],L[0])),x(w(E[1],L[0]),w(-L[1],E[0]))),R=x(w(E[1],z[0]),w(-z[1],E[0])),D=C(O,R);return D[D.length-1]}}function d(x,w,v,C){return function(E,L,z,O){var R=x(x(v(x(w(z[1],O[0]),w(-O[1],z[0])),L[2]),x(v(x(w(L[1],O[0]),w(-O[1],L[0])),-z[2]),v(x(w(L[1],z[0]),w(-z[1],L[0])),O[2]))),x(v(x(w(L[1],O[0]),w(-O[1],L[0])),E[2]),x(v(x(w(E[1],O[0]),w(-O[1],E[0])),-L[2]),v(x(w(E[1],L[0]),w(-L[1],E[0])),O[2])))),D=x(x(v(x(w(z[1],O[0]),w(-O[1],z[0])),E[2]),x(v(x(w(E[1],O[0]),w(-O[1],E[0])),-z[2]),v(x(w(E[1],z[0]),w(-z[1],E[0])),O[2]))),x(v(x(w(L[1],z[0]),w(-z[1],L[0])),E[2]),x(v(x(w(E[1],z[0]),w(-z[1],E[0])),-L[2]),v(x(w(E[1],L[0]),w(-L[1],E[0])),z[2])))),H=C(R,D);return H[H.length-1]}}function b(x,w,v,C){return function(E,L,z,O,R){var D=x(x(x(v(x(v(x(w(O[1],R[0]),w(-R[1],O[0])),z[2]),x(v(x(w(z[1],R[0]),w(-R[1],z[0])),-O[2]),v(x(w(z[1],O[0]),w(-O[1],z[0])),R[2]))),L[3]),x(v(x(v(x(w(O[1],R[0]),w(-R[1],O[0])),L[2]),x(v(x(w(L[1],R[0]),w(-R[1],L[0])),-O[2]),v(x(w(L[1],O[0]),w(-O[1],L[0])),R[2]))),-z[3]),v(x(v(x(w(z[1],R[0]),w(-R[1],z[0])),L[2]),x(v(x(w(L[1],R[0]),w(-R[1],L[0])),-z[2]),v(x(w(L[1],z[0]),w(-z[1],L[0])),R[2]))),O[3]))),x(v(x(v(x(w(z[1],O[0]),w(-O[1],z[0])),L[2]),x(v(x(w(L[1],O[0]),w(-O[1],L[0])),-z[2]),v(x(w(L[1],z[0]),w(-z[1],L[0])),O[2]))),-R[3]),x(v(x(v(x(w(O[1],R[0]),w(-R[1],O[0])),L[2]),x(v(x(w(L[1],R[0]),w(-R[1],L[0])),-O[2]),v(x(w(L[1],O[0]),w(-O[1],L[0])),R[2]))),E[3]),v(x(v(x(w(O[1],R[0]),w(-R[1],O[0])),E[2]),x(v(x(w(E[1],R[0]),w(-R[1],E[0])),-O[2]),v(x(w(E[1],O[0]),w(-O[1],E[0])),R[2]))),-L[3])))),x(x(v(x(v(x(w(L[1],R[0]),w(-R[1],L[0])),E[2]),x(v(x(w(E[1],R[0]),w(-R[1],E[0])),-L[2]),v(x(w(E[1],L[0]),w(-L[1],E[0])),R[2]))),O[3]),x(v(x(v(x(w(L[1],O[0]),w(-O[1],L[0])),E[2]),x(v(x(w(E[1],O[0]),w(-O[1],E[0])),-L[2]),v(x(w(E[1],L[0]),w(-L[1],E[0])),O[2]))),-R[3]),v(x(v(x(w(z[1],O[0]),w(-O[1],z[0])),L[2]),x(v(x(w(L[1],O[0]),w(-O[1],L[0])),-z[2]),v(x(w(L[1],z[0]),w(-z[1],L[0])),O[2]))),E[3]))),x(v(x(v(x(w(z[1],O[0]),w(-O[1],z[0])),E[2]),x(v(x(w(E[1],O[0]),w(-O[1],E[0])),-z[2]),v(x(w(E[1],z[0]),w(-z[1],E[0])),O[2]))),-L[3]),x(v(x(v(x(w(L[1],O[0]),w(-O[1],L[0])),E[2]),x(v(x(w(E[1],O[0]),w(-O[1],E[0])),-L[2]),v(x(w(E[1],L[0]),w(-L[1],E[0])),O[2]))),z[3]),v(x(v(x(w(L[1],z[0]),w(-z[1],L[0])),E[2]),x(v(x(w(E[1],z[0]),w(-z[1],E[0])),-L[2]),v(x(w(E[1],L[0]),w(-L[1],E[0])),z[2]))),-O[3]))))),H=x(x(x(v(x(v(x(w(O[1],R[0]),w(-R[1],O[0])),z[2]),x(v(x(w(z[1],R[0]),w(-R[1],z[0])),-O[2]),v(x(w(z[1],O[0]),w(-O[1],z[0])),R[2]))),E[3]),v(x(v(x(w(O[1],R[0]),w(-R[1],O[0])),E[2]),x(v(x(w(E[1],R[0]),w(-R[1],E[0])),-O[2]),v(x(w(E[1],O[0]),w(-O[1],E[0])),R[2]))),-z[3])),x(v(x(v(x(w(z[1],R[0]),w(-R[1],z[0])),E[2]),x(v(x(w(E[1],R[0]),w(-R[1],E[0])),-z[2]),v(x(w(E[1],z[0]),w(-z[1],E[0])),R[2]))),O[3]),v(x(v(x(w(z[1],O[0]),w(-O[1],z[0])),E[2]),x(v(x(w(E[1],O[0]),w(-O[1],E[0])),-z[2]),v(x(w(E[1],z[0]),w(-z[1],E[0])),O[2]))),-R[3]))),x(x(v(x(v(x(w(z[1],R[0]),w(-R[1],z[0])),L[2]),x(v(x(w(L[1],R[0]),w(-R[1],L[0])),-z[2]),v(x(w(L[1],z[0]),w(-z[1],L[0])),R[2]))),E[3]),v(x(v(x(w(z[1],R[0]),w(-R[1],z[0])),E[2]),x(v(x(w(E[1],R[0]),w(-R[1],E[0])),-z[2]),v(x(w(E[1],z[0]),w(-z[1],E[0])),R[2]))),-L[3])),x(v(x(v(x(w(L[1],R[0]),w(-R[1],L[0])),E[2]),x(v(x(w(E[1],R[0]),w(-R[1],E[0])),-L[2]),v(x(w(E[1],L[0]),w(-L[1],E[0])),R[2]))),z[3]),v(x(v(x(w(L[1],z[0]),w(-z[1],L[0])),E[2]),x(v(x(w(E[1],z[0]),w(-z[1],E[0])),-L[2]),v(x(w(E[1],L[0]),w(-L[1],E[0])),z[2]))),-R[3])))),B=C(D,H);return B[B.length-1]}}function g(x){var w=x===3?m:x===4?d:b;return w(a,t,i,n)}var _=g(3),p=g(4),A=[function(){return 0},function(){return 0},function(w,v){return v[0]-w[0]},function(w,v,C){var M=(w[1]-C[1])*(v[0]-C[0]),E=(w[0]-C[0])*(v[1]-C[1]),L=M-E,z;if(M>0){if(E<=0)return L;z=M+E}else if(M<0){if(E>=0)return L;z=-(M+E)}else return L;var O=u*z;return L>=O||L<=-O?L:_(w,v,C)},function(w,v,C,M){var E=w[0]-M[0],L=v[0]-M[0],z=C[0]-M[0],O=w[1]-M[1],R=v[1]-M[1],D=C[1]-M[1],H=w[2]-M[2],B=v[2]-M[2],$=C[2]-M[2],W=L*D,re=z*R,Q=z*O,Z=E*D,K=E*R,le=L*O,fe=H*(W-re)+B*(Q-Z)+$*(K-le),ue=(Math.abs(W)+Math.abs(re))*Math.abs(H)+(Math.abs(Q)+Math.abs(Z))*Math.abs(B)+(Math.abs(K)+Math.abs(le))*Math.abs($),V=l*ue;return fe>V||-fe>V?fe:p(w,v,C,M)}];function c(x){var w=A[x.length];return w||(w=A[x.length]=g(x.length)),w.apply(void 0,x)}function S(x,w,v,C,M,E,L){return function(O,R,D,H,B){switch(arguments.length){case 0:case 1:return 0;case 2:return C(O,R);case 3:return M(O,R,D);case 4:return E(O,R,D,H);case 5:return L(O,R,D,H,B)}for(var $=new Array(arguments.length),W=0;W<arguments.length;++W)$[W]=arguments[W];return x($)}}function T(){for(;A.length<=r;)A.push(g(A.length));h.exports=S.apply(void 0,[c].concat(A));for(var x=0;x<=r;++x)h.exports[x]=A[x]}T()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(o,h,y){var t=o("robust-sum"),a=o("robust-scale");h.exports=i;function i(n,r){if(n.length===1)return a(r,n[0]);if(r.length===1)return a(n,r[0]);if(n.length===0||r.length===0)return[0];var f=[0];if(n.length<r.length)for(var u=0;u<n.length;++u)f=t(f,a(r,n[u]));else for(var u=0;u<r.length;++u)f=t(f,a(n,r[u]));return f}},{"robust-scale":286,"robust-sum":289}],286:[function(o,h,y){var t=o("two-product"),a=o("two-sum");h.exports=i;function i(n,r){var f=n.length;if(f===1){var u=t(n[0],r);return u[0]?u:[u[1]]}var l=new Array(2*f),m=[.1,.1],d=[.1,.1],b=0;t(n[0],r,m),m[0]&&(l[b++]=m[0]);for(var g=1;g<f;++g){t(n[g],r,d);var _=m[1];a(_,d[0],m),m[0]&&(l[b++]=m[0]);var p=d[1],A=m[1],c=p+A,S=c-p,T=A-S;m[1]=c,T&&(l[b++]=T)}return m[1]&&(l[b++]=m[1]),b===0&&(l[b++]=0),l.length=b,l}},{"two-product":306,"two-sum":307}],287:[function(o,h,y){h.exports=i;var t=o("robust-orientation")[3];function a(n,r,f,u){for(var l=0;l<2;++l){var m=n[l],d=r[l],b=Math.min(m,d),g=Math.max(m,d),_=f[l],p=u[l],A=Math.min(_,p),c=Math.max(_,p);if(c<b||g<A)return!1}return!0}function i(n,r,f,u){var l=t(n,f,u),m=t(r,f,u);if(l>0&&m>0||l<0&&m<0)return!1;var d=t(f,n,r),b=t(u,n,r);return d>0&&b>0||d<0&&b<0?!1:l===0&&m===0&&d===0&&b===0?a(n,r,f,u):!0}},{"robust-orientation":284}],288:[function(o,h,y){h.exports=a;function t(i,n){var r=i+n,f=r-i,u=r-f,l=n-f,m=i-u,d=m+l;return d?[d,r]:[r]}function a(i,n){var r=i.length|0,f=n.length|0;if(r===1&&f===1)return t(i[0],-n[0]);var u=r+f,l=new Array(u),m=0,d=0,b=0,g=Math.abs,_=i[d],p=g(_),A=-n[b],c=g(A),S,T;p<c?(T=_,d+=1,d<r&&(_=i[d],p=g(_))):(T=A,b+=1,b<f&&(A=-n[b],c=g(A))),d<r&&p<c||b>=f?(S=_,d+=1,d<r&&(_=i[d],p=g(_))):(S=A,b+=1,b<f&&(A=-n[b],c=g(A)));for(var x=S+T,w=x-S,v=T-w,C=v,M=x,E,L,z,O,R;d<r&&b<f;)p<c?(S=_,d+=1,d<r&&(_=i[d],p=g(_))):(S=A,b+=1,b<f&&(A=-n[b],c=g(A))),T=C,x=S+T,w=x-S,v=T-w,v&&(l[m++]=v),E=M+x,L=E-M,z=E-L,O=x-L,R=M-z,C=R+O,M=E;for(;d<r;)S=_,T=C,x=S+T,w=x-S,v=T-w,v&&(l[m++]=v),E=M+x,L=E-M,z=E-L,O=x-L,R=M-z,C=R+O,M=E,d+=1,d<r&&(_=i[d]);for(;b<f;)S=A,T=C,x=S+T,w=x-S,v=T-w,v&&(l[m++]=v),E=M+x,L=E-M,z=E-L,O=x-L,R=M-z,C=R+O,M=E,b+=1,b<f&&(A=-n[b]);return C&&(l[m++]=C),M&&(l[m++]=M),m||(l[m++]=0),l.length=m,l}},{}],289:[function(o,h,y){h.exports=a;function t(i,n){var r=i+n,f=r-i,u=r-f,l=n-f,m=i-u,d=m+l;return d?[d,r]:[r]}function a(i,n){var r=i.length|0,f=n.length|0;if(r===1&&f===1)return t(i[0],n[0]);var u=r+f,l=new Array(u),m=0,d=0,b=0,g=Math.abs,_=i[d],p=g(_),A=n[b],c=g(A),S,T;p<c?(T=_,d+=1,d<r&&(_=i[d],p=g(_))):(T=A,b+=1,b<f&&(A=n[b],c=g(A))),d<r&&p<c||b>=f?(S=_,d+=1,d<r&&(_=i[d],p=g(_))):(S=A,b+=1,b<f&&(A=n[b],c=g(A)));for(var x=S+T,w=x-S,v=T-w,C=v,M=x,E,L,z,O,R;d<r&&b<f;)p<c?(S=_,d+=1,d<r&&(_=i[d],p=g(_))):(S=A,b+=1,b<f&&(A=n[b],c=g(A))),T=C,x=S+T,w=x-S,v=T-w,v&&(l[m++]=v),E=M+x,L=E-M,z=E-L,O=x-L,R=M-z,C=R+O,M=E;for(;d<r;)S=_,T=C,x=S+T,w=x-S,v=T-w,v&&(l[m++]=v),E=M+x,L=E-M,z=E-L,O=x-L,R=M-z,C=R+O,M=E,d+=1,d<r&&(_=i[d]);for(;b<f;)S=A,T=C,x=S+T,w=x-S,v=T-w,v&&(l[m++]=v),E=M+x,L=E-M,z=E-L,O=x-L,R=M-z,C=R+O,M=E,b+=1,b<f&&(A=n[b]);return C&&(l[m++]=C),M&&(l[m++]=M),m||(l[m++]=0),l.length=m,l}},{}],290:[function(o,h,y){h.exports=i;var t=o("boundary-cells"),a=o("reduce-simplicial-complex");function i(n){return a(t(n))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(o,h,y){h.exports=b;var t=o("ndarray"),a=o("typedarray-pool"),i=o("ndarray-sort"),n=o("./lib/codegen");function r(g){for(var _=g.length,p=0,A=0;A<_;++A)p=Math.max(p,g[A].length)|0;return p-1}function f(g,_){for(var p=g.length,A=a.mallocUint8(p),c=0;c<p;++c)A[c]=g[c]<_|0;return A}function u(g,_){for(var p=g.length,A=_*(_+1)/2*p|0,c=a.mallocUint32(A*2),S=0,T=0;T<p;++T)for(var x=g[T],_=x.length,w=0;w<_;++w)for(var v=0;v<w;++v){var C=x[v],M=x[w];c[S++]=Math.min(C,M)|0,c[S++]=Math.max(C,M)|0}var E=S/2|0;i(t(c,[E,2]));for(var L=2,T=2;T<S;T+=2)c[T-2]===c[T]&&c[T-1]===c[T+1]||(c[L++]=c[T],c[L++]=c[T+1]);return t(c,[L/2|0,2])}function l(g,_,p,A){for(var c=g.data,S=g.shape[0],T=a.mallocDouble(S),x=0,w=0;w<S;++w){var v=c[2*w],C=c[2*w+1];if(p[v]!==p[C]){var M=_[v],E=_[C];c[2*x]=v,c[2*x+1]=C,T[x++]=(E-A)/(E-M)}}return g.shape[0]=x,t(T,[x])}function m(g,_){var p=a.mallocInt32(_*2),A=g.shape[0],c=g.data;p[0]=0;for(var S=0,T=0;T<A;++T){var x=c[2*T];if(x!==S){for(p[2*S+1]=T;++S<x;)p[2*S]=T,p[2*S+1]=T;p[2*S]=T}}for(p[2*S+1]=A;++S<_;)p[2*S]=p[2*S+1]=A;return p}function d(g){for(var _=g.shape[0]|0,p=g.data,A=new Array(_),c=0;c<_;++c)A[c]=[p[2*c],p[2*c+1]];return A}function b(g,_,p,A){p=p||0,typeof A=="undefined"&&(A=r(g));var c=g.length;if(c===0||A<1)return{cells:[],vertexIds:[],vertexWeights:[]};var S=f(_,+p),T=u(g,A),x=l(T,_,S,+p),w=m(T,_.length|0),v=n(A)(g,T.data,w,S),C=d(T),M=[].slice.call(x.data,0,x.shape[0]);return a.free(S),a.free(T.data),a.free(x.data),a.free(w),{cells:v,vertexIds:C,vertexWeights:M}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(o,h,y){h.exports=a;var t=[function(){function n(r,f,u,l){for(var m=r.length,d=[],b=0;b<m;++b){var g=r[b];g.length}return d}return n},function(){function n(f,u,l,m){for(var d=Math.min(l,m)|0,b=Math.max(l,m)|0,g=f[2*d],_=f[2*d+1];g<_;){var p=g+_>>1,A=u[2*p+1];if(A===b)return p;b<A?_=p:g=p+1}return g}function r(f,u,l,m){for(var d=f.length,b=[],g=0;g<d;++g){var _=f[g],p=_.length;if(p===2){var A=(m[_[0]]<<0)+(m[_[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:b.push([n(l,u,_[0],_[1])]);break;case 2:b.push([n(l,u,_[1],_[0])]);break}}}return b}return r},function(){function n(f,u,l,m){for(var d=Math.min(l,m)|0,b=Math.max(l,m)|0,g=f[2*d],_=f[2*d+1];g<_;){var p=g+_>>1,A=u[2*p+1];if(A===b)return p;b<A?_=p:g=p+1}return g}function r(f,u,l,m){for(var d=f.length,b=[],g=0;g<d;++g){var _=f[g],p=_.length;if(p===3){var A=(m[_[0]]<<0)+(m[_[1]]<<1)+(m[_[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:b.push([n(l,u,_[0],_[2]),n(l,u,_[0],_[1])]);break;case 2:b.push([n(l,u,_[1],_[0]),n(l,u,_[1],_[2])]);break;case 3:b.push([n(l,u,_[0],_[2]),n(l,u,_[1],_[2])]);break;case 4:b.push([n(l,u,_[2],_[1]),n(l,u,_[2],_[0])]);break;case 5:b.push([n(l,u,_[2],_[1]),n(l,u,_[0],_[1])]);break;case 6:b.push([n(l,u,_[1],_[0]),n(l,u,_[2],_[0])]);break}}else if(p===2){var A=(m[_[0]]<<0)+(m[_[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:b.push([n(l,u,_[0],_[1])]);break;case 2:b.push([n(l,u,_[1],_[0])]);break}}}return b}return r},function(){function n(f,u,l,m){for(var d=Math.min(l,m)|0,b=Math.max(l,m)|0,g=f[2*d],_=f[2*d+1];g<_;){var p=g+_>>1,A=u[2*p+1];if(A===b)return p;b<A?_=p:g=p+1}return g}function r(f,u,l,m){for(var d=f.length,b=[],g=0;g<d;++g){var _=f[g],p=_.length;if(p===4){var A=(m[_[0]]<<0)+(m[_[1]]<<1)+(m[_[2]]<<2)+(m[_[3]]<<3);if(A===0||A===15)continue;switch(A){case 0:break;case 1:b.push([n(l,u,_[0],_[1]),n(l,u,_[0],_[2]),n(l,u,_[0],_[3])]);break;case 2:b.push([n(l,u,_[1],_[2]),n(l,u,_[1],_[0]),n(l,u,_[1],_[3])]);break;case 3:b.push([n(l,u,_[1],_[2]),n(l,u,_[0],_[2]),n(l,u,_[0],_[3])],[n(l,u,_[1],_[3]),n(l,u,_[1],_[2]),n(l,u,_[0],_[3])]);break;case 4:b.push([n(l,u,_[2],_[0]),n(l,u,_[2],_[1]),n(l,u,_[2],_[3])]);break;case 5:b.push([n(l,u,_[0],_[1]),n(l,u,_[2],_[1]),n(l,u,_[0],_[3])],[n(l,u,_[2],_[1]),n(l,u,_[2],_[3]),n(l,u,_[0],_[3])]);break;case 6:b.push([n(l,u,_[2],_[0]),n(l,u,_[1],_[0]),n(l,u,_[1],_[3])],[n(l,u,_[2],_[3]),n(l,u,_[2],_[0]),n(l,u,_[1],_[3])]);break;case 7:b.push([n(l,u,_[0],_[3]),n(l,u,_[1],_[3]),n(l,u,_[2],_[3])]);break;case 8:b.push([n(l,u,_[3],_[1]),n(l,u,_[3],_[0]),n(l,u,_[3],_[2])]);break;case 9:b.push([n(l,u,_[3],_[1]),n(l,u,_[0],_[1]),n(l,u,_[0],_[2])],[n(l,u,_[3],_[2]),n(l,u,_[3],_[1]),n(l,u,_[0],_[2])]);break;case 10:b.push([n(l,u,_[1],_[0]),n(l,u,_[3],_[0]),n(l,u,_[1],_[2])],[n(l,u,_[3],_[0]),n(l,u,_[3],_[2]),n(l,u,_[1],_[2])]);break;case 11:b.push([n(l,u,_[1],_[2]),n(l,u,_[0],_[2]),n(l,u,_[3],_[2])]);break;case 12:b.push([n(l,u,_[3],_[0]),n(l,u,_[2],_[0]),n(l,u,_[2],_[1])],[n(l,u,_[3],_[1]),n(l,u,_[3],_[0]),n(l,u,_[2],_[1])]);break;case 13:b.push([n(l,u,_[0],_[1]),n(l,u,_[2],_[1]),n(l,u,_[3],_[1])]);break;case 14:b.push([n(l,u,_[2],_[0]),n(l,u,_[1],_[0]),n(l,u,_[3],_[0])]);break}}else if(p===3){var A=(m[_[0]]<<0)+(m[_[1]]<<1)+(m[_[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:b.push([n(l,u,_[0],_[2]),n(l,u,_[0],_[1])]);break;case 2:b.push([n(l,u,_[1],_[0]),n(l,u,_[1],_[2])]);break;case 3:b.push([n(l,u,_[0],_[2]),n(l,u,_[1],_[2])]);break;case 4:b.push([n(l,u,_[2],_[1]),n(l,u,_[2],_[0])]);break;case 5:b.push([n(l,u,_[2],_[1]),n(l,u,_[0],_[1])]);break;case 6:b.push([n(l,u,_[1],_[0]),n(l,u,_[2],_[0])]);break}}else if(p===2){var A=(m[_[0]]<<0)+(m[_[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:b.push([n(l,u,_[0],_[1])]);break;case 2:b.push([n(l,u,_[1],_[0])]);break}}}return b}return r}];function a(i){return t[i]()}},{}],293:[function(o,h,y){var t=o("bit-twiddle"),a=o("union-find");function i(x){for(var w=0,v=Math.max,C=0,M=x.length;C<M;++C)w=v(w,x[C].length);return w-1}y.dimension=i;function n(x){for(var w=-1,v=Math.max,C=0,M=x.length;C<M;++C)for(var E=x[C],L=0,z=E.length;L<z;++L)w=v(w,E[L]);return w+1}y.countVertices=n;function r(x){for(var w=new Array(x.length),v=0,C=x.length;v<C;++v)w[v]=x[v].slice(0);return w}y.cloneCells=r;function f(x,w){var v=x.length,C=x.length-w.length,M=Math.min;if(C)return C;switch(v){case 0:return 0;case 1:return x[0]-w[0];case 2:var R=x[0]+x[1]-w[0]-w[1];return R||M(x[0],x[1])-M(w[0],w[1]);case 3:var E=x[0]+x[1],L=w[0]+w[1];if(R=E+x[2]-(L+w[2]),R)return R;var z=M(x[0],x[1]),O=M(w[0],w[1]),R=M(z,x[2])-M(O,w[2]);return R||M(z+x[2],E)-M(O+w[2],L);default:var D=x.slice(0);D.sort();var H=w.slice(0);H.sort();for(var B=0;B<v;++B)if(C=D[B]-H[B],C)return C;return 0}}y.compareCells=f;function u(x,w){return f(x[0],w[0])}function l(x,w){if(w){for(var v=x.length,C=new Array(v),M=0;M<v;++M)C[M]=[x[M],w[M]];C.sort(u);for(var M=0;M<v;++M)x[M]=C[M][0],w[M]=C[M][1];return x}else return x.sort(f),x}y.normalize=l;function m(x){if(x.length===0)return[];for(var w=1,v=x.length,C=1;C<v;++C){var M=x[C];if(f(M,x[C-1])){if(C===w){w++;continue}x[w++]=M}}return x.length=w,x}y.unique=m;function d(x,w){for(var v=0,C=x.length-1,M=-1;v<=C;){var E=v+C>>1,L=f(x[E],w);L<=0?(L===0&&(M=E),v=E+1):L>0&&(C=E-1)}return M}y.findCell=d;function b(x,w){for(var v=new Array(x.length),C=0,M=v.length;C<M;++C)v[C]=[];for(var E=[],C=0,L=w.length;C<L;++C)for(var z=w[C],O=z.length,R=1,D=1<<O;R<D;++R){E.length=t.popCount(R);for(var H=0,B=0;B<O;++B)R&1<<B&&(E[H++]=z[B]);var $=d(x,E);if(!($<0))for(;v[$++].push(C),!($>=x.length||f(x[$],E)!==0););}return v}y.incidence=b;function g(x,w){if(!w)return b(m(p(x,0)),x);for(var v=new Array(w),C=0;C<w;++C)v[C]=[];for(var C=0,M=x.length;C<M;++C)for(var E=x[C],L=0,z=E.length;L<z;++L)v[E[L]].push(C);return v}y.dual=g;function _(x){for(var w=[],v=0,C=x.length;v<C;++v)for(var M=x[v],E=M.length|0,L=1,z=1<<E;L<z;++L){for(var O=[],R=0;R<E;++R)L>>>R&1&&O.push(M[R]);w.push(O)}return l(w)}y.explode=_;function p(x,w){if(w<0)return[];for(var v=[],C=(1<<w+1)-1,M=0;M<x.length;++M)for(var E=x[M],L=C;L<1<<E.length;L=t.nextCombination(L)){for(var z=new Array(w+1),O=0,R=0;R<E.length;++R)L&1<<R&&(z[O++]=E[R]);v.push(z)}return l(v)}y.skeleton=p;function A(x){for(var w=[],v=0,C=x.length;v<C;++v)for(var M=x[v],E=0,L=M.length;E<L;++E){for(var z=new Array(M.length-1),O=0,R=0;O<L;++O)O!==E&&(z[R++]=M[O]);w.push(z)}return l(w)}y.boundary=A;function c(x,w){for(var v=new a(w),C=0;C<x.length;++C)for(var M=x[C],E=0;E<M.length;++E)for(var L=E+1;L<M.length;++L)v.link(M[E],M[L]);for(var z=[],O=v.ranks,C=0;C<O.length;++C)O[C]=-1;for(var C=0;C<x.length;++C){var R=v.find(x[C][0]);O[R]<0?(O[R]=z.length,z.push([x[C].slice(0)])):z[O[R]].push(x[C].slice(0))}return z}function S(x){for(var w=m(l(p(x,0))),v=new a(w.length),C=0;C<x.length;++C)for(var M=x[C],E=0;E<M.length;++E)for(var L=d(w,[M[E]]),z=E+1;z<M.length;++z)v.link(L,d(w,[M[z]]));for(var O=[],R=v.ranks,C=0;C<R.length;++C)R[C]=-1;for(var C=0;C<x.length;++C){var D=v.find(d(w,[x[C][0]]));R[D]<0?(R[D]=O.length,O.push([x[C].slice(0)])):O[R[D]].push(x[C].slice(0))}return O}function T(x,w){return w?c(x,w):S(x)}y.connectedComponents=T},{"bit-twiddle":32,"union-find":309}],294:[function(o,h,y){arguments[4][32][0].apply(y,arguments)},{dup:32}],295:[function(o,h,y){arguments[4][293][0].apply(y,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(o,h,y){h.exports=t;function t(a){this.roots=new Array(a),this.ranks=new Array(a);for(var i=0;i<a;++i)this.roots[i]=i,this.ranks[i]=0}t.prototype.length=function(){return this.roots.length},t.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},t.prototype.find=function(a){for(var i=this.roots;i[a]!==a;){var n=i[a];i[a]=i[n],a=n}return a},t.prototype.link=function(a,i){var n=this.find(a),r=this.find(i);if(n!==r){var f=this.ranks,u=this.roots,l=f[n],m=f[r];l<m?u[n]=r:m<l?u[r]=n:(u[r]=n,++f[n])}}},{}],297:[function(o,h,y){h.exports=n;var t=o("robust-orientation"),a=o("simplicial-complex");function i(r,f,u){var l=Math.abs(t(r,f,u)),m=Math.sqrt(Math.pow(f[0]-u[0],2)+Math.pow(f[1]-u[1],2));return l/m}function n(r,f,u){for(var l=f.length,m=r.length,d=new Array(l),b=new Array(l),g=new Array(l),_=new Array(l),p=0;p<l;++p)d[p]=b[p]=-1,g[p]=1/0,_[p]=!1;for(var p=0;p<m;++p){var A=r[p];if(A.length!==2)throw new Error("Input must be a graph");var c=A[1],S=A[0];b[S]!==-1?b[S]=-2:b[S]=c,d[c]!==-1?d[c]=-2:d[c]=S}function T(Q){if(_[Q])return 1/0;var Z=d[Q],K=b[Q];return Z<0||K<0?1/0:i(f[Q],f[Z],f[K])}function x(Q,Z){var K=O[Q],le=O[Z];O[Q]=le,O[Z]=K,R[K]=Z,R[le]=Q}function w(Q){return g[O[Q]]}function v(Q){return Q&1?Q-1>>1:(Q>>1)-1}function C(Q){for(var Z=w(Q);;){var K=Z,le=2*Q+1,fe=2*(Q+1),ue=Q;if(le<H){var V=w(le);V<K&&(ue=le,K=V)}if(fe<H){var j=w(fe);j<K&&(ue=fe)}if(ue===Q)return Q;x(Q,ue),Q=ue}}function M(Q){for(var Z=w(Q);Q>0;){var K=v(Q);if(K>=0){var le=w(K);if(Z<le){x(Q,K),Q=K;continue}}return Q}}function E(){if(H>0){var Q=O[0];return x(0,H-1),H-=1,C(0),Q}return-1}function L(Q,Z){var K=O[Q];return g[K]===Z?Q:(g[K]=-1/0,M(Q),E(),g[K]=Z,H+=1,M(H-1))}function z(Q){if(!_[Q]){_[Q]=!0;var Z=d[Q],K=b[Q];d[K]>=0&&(d[K]=Z),b[Z]>=0&&(b[Z]=K),R[Z]>=0&&L(R[Z],T(Z)),R[K]>=0&&L(R[K],T(K))}}for(var O=[],R=new Array(l),p=0;p<l;++p){var D=g[p]=T(p);D<1/0?(R[p]=O.length,O.push(p)):R[p]=-1}for(var H=O.length,p=H>>1;p>=0;--p)C(p);for(;;){var B=E();if(B<0||g[B]>u)break;z(B)}for(var $=[],p=0;p<l;++p)_[p]||(R[p]=$.length,$.push(f[p].slice()));$.length;function W(Q,Z){if(Q[Z]<0)return Z;var K=Z,le=Z;do{var fe=Q[le];if(!_[le]||fe<0||fe===le||(le=fe,fe=Q[le],!_[le]||fe<0||fe===le))break;le=fe,K=Q[K]}while(K!==le);for(var ue=Z;ue!==le;ue=Q[ue])Q[ue]=le;return le}var re=[];return r.forEach(function(Q){var Z=W(d,Q[0]),K=W(b,Q[1]);if(Z>=0&&K>=0&&Z!==K){var le=R[Z],fe=R[K];le!==fe&&re.push([le,fe])}}),a.unique(a.normalize(re)),{positions:$,edges:re}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(o,h,y){h.exports=i;var t=o("robust-orientation");function a(n,r){var f,u;if(r[0][0]<r[1][0])f=r[0],u=r[1];else if(r[0][0]>r[1][0])f=r[1],u=r[0];else{var l=Math.min(n[0][1],n[1][1]),m=Math.max(n[0][1],n[1][1]),d=Math.min(r[0][1],r[1][1]),b=Math.max(r[0][1],r[1][1]);return m<d?m-d:l>b?l-b:m-b}var g,_;n[0][1]<n[1][1]?(g=n[0],_=n[1]):(g=n[1],_=n[0]);var p=t(u,f,g);return p||(p=t(u,f,_),p)?p:_-u}function i(n,r){var f,u;if(r[0][0]<r[1][0])f=r[0],u=r[1];else if(r[0][0]>r[1][0])f=r[1],u=r[0];else return a(r,n);var l,m;if(n[0][0]<n[1][0])l=n[0],m=n[1];else if(n[0][0]>n[1][0])l=n[1],m=n[0];else return-a(n,r);var d=t(f,u,m),b=t(f,u,l);if(d<0){if(b<=0)return d}else if(d>0){if(b>=0)return d}else if(b)return b;if(d=t(m,l,u),b=t(m,l,f),d<0){if(b<=0)return d}else if(d>0){if(b>=0)return d}else if(b)return b;return u[0]-m[0]}},{"robust-orientation":284}],299:[function(o,h,y){h.exports=b;var t=o("binary-search-bounds"),a=o("functional-red-black-tree"),i=o("robust-orientation"),n=o("./lib/order-segments");function r(g,_,p){this.slabs=g,this.coordinates=_,this.horizontal=p}var f=r.prototype;function u(g,_){return g.y-_}function l(g,_){for(var p=null;g;){var A=g.key,c,S;A[0][0]<A[1][0]?(c=A[0],S=A[1]):(c=A[1],S=A[0]);var T=i(c,S,_);if(T<0)g=g.left;else if(T>0)if(_[0]!==A[1][0])p=g,g=g.right;else{var x=l(g.right,_);if(x)return x;g=g.left}else{if(_[0]!==A[1][0])return g;var x=l(g.right,_);if(x)return x;g=g.left}}return p}f.castUp=function(g){var _=t.le(this.coordinates,g[0]);if(_<0)return-1;this.slabs[_];var p=l(this.slabs[_],g),A=-1;if(p&&(A=p.value),this.coordinates[_]===g[0]){var c=null;if(p&&(c=p.key),_>0){var S=l(this.slabs[_-1],g);S&&(c?n(S.key,c)>0&&(c=S.key,A=S.value):(A=S.value,c=S.key))}var T=this.horizontal[_];if(T.length>0){var x=t.ge(T,g[1],u);if(x<T.length){var w=T[x];if(g[1]===w.y){if(w.closed)return w.index;for(;x<T.length-1&&T[x+1].y===g[1];)if(x=x+1,w=T[x],w.closed)return w.index;if(w.y===g[1]&&!w.start){if(x=x+1,x>=T.length)return A;w=T[x]}}if(w.start)if(c){var v=i(c[0],c[1],[g[0],w.y]);c[0][0]>c[1][0]&&(v=-v),v>0&&(A=w.index)}else A=w.index;else w.y!==g[1]&&(A=w.index)}}}return A};function m(g,_,p,A){this.y=g,this.index=_,this.start=p,this.closed=A}function d(g,_,p,A){this.x=g,this.segment=_,this.create=p,this.index=A}function b(g){for(var _=g.length,p=2*_,A=new Array(p),c=0;c<_;++c){var S=g[c],T=S[0][0]<S[1][0];A[2*c]=new d(S[0][0],S,T,c),A[2*c+1]=new d(S[1][0],S,!T,c)}A.sort(function(z,O){var R=z.x-O.x;return R||(R=z.create-O.create,R)?R:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(O.segment[0][1],O.segment[1][1])});for(var x=a(n),w=[],v=[],C=[],c=0;c<p;){for(var M=A[c].x,E=[];c<p;){var L=A[c];if(L.x!==M)break;c+=1,L.segment[0][0]===L.x&&L.segment[1][0]===L.x?L.create&&(L.segment[0][1]<L.segment[1][1]?(E.push(new m(L.segment[0][1],L.index,!0,!0)),E.push(new m(L.segment[1][1],L.index,!1,!1))):(E.push(new m(L.segment[1][1],L.index,!0,!1)),E.push(new m(L.segment[0][1],L.index,!1,!0)))):L.create?x=x.insert(L.segment,L.index):x=x.remove(L.segment)}w.push(x.root),v.push(M),C.push(E)}return new r(w,v,C)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(o,h,y){var t=o("robust-dot-product"),a=o("robust-sum");h.exports=r,h.exports.positive=f,h.exports.negative=u;function i(l,m){var d=a(t(l,m),[m[m.length-1]]);return d[d.length-1]}function n(l,m,d,b){var g=b-m,_=-m/g;_<0?_=0:_>1&&(_=1);for(var p=1-_,A=l.length,c=new Array(A),S=0;S<A;++S)c[S]=_*l[S]+p*d[S];return c}function r(l,m){for(var d=[],b=[],g=i(l[l.length-1],m),_=l[l.length-1],p=l[0],A=0;A<l.length;++A,_=p){p=l[A];var c=i(p,m);if(g<0&&c>0||g>0&&c<0){var S=n(_,c,p,g);d.push(S),b.push(S.slice())}c<0?b.push(p.slice()):c>0?d.push(p.slice()):(d.push(p.slice()),b.push(p.slice())),g=c}return{positive:d,negative:b}}function f(l,m){for(var d=[],b=i(l[l.length-1],m),g=l[l.length-1],_=l[0],p=0;p<l.length;++p,g=_){_=l[p];var A=i(_,m);(b<0&&A>0||b>0&&A<0)&&d.push(n(g,A,_,b)),A>=0&&d.push(_.slice()),b=A}return d}function u(l,m){for(var d=[],b=i(l[l.length-1],m),g=l[l.length-1],_=l[0],p=0;p<l.length;++p,g=_){_=l[p];var A=i(_,m);(b<0&&A>0||b>0&&A<0)&&d.push(n(g,A,_,b)),A<=0&&d.push(_.slice()),b=A}return d}},{"robust-dot-product":281,"robust-sum":289}],301:[function(o,h,y){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(u){return n(f(u),arguments)}function i(u,l){return a.apply(null,[u].concat(l||[]))}function n(u,l){var m=1,d=u.length,b,g="",_,p,A,c,S,T,x,w;for(_=0;_<d;_++)if(typeof u[_]=="string")g+=u[_];else if(typeof u[_]=="object"){if(A=u[_],A.keys)for(b=l[m],p=0;p<A.keys.length;p++){if(b==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[p],A.keys[p-1]));b=b[A.keys[p]]}else A.param_no?b=l[A.param_no]:b=l[m++];if(t.not_type.test(A.type)&&t.not_primitive.test(A.type)&&b instanceof Function&&(b=b()),t.numeric_arg.test(A.type)&&typeof b!="number"&&isNaN(b))throw new TypeError(a("[sprintf] expecting number but found %T",b));switch(t.number.test(A.type)&&(x=b>=0),A.type){case"b":b=parseInt(b,10).toString(2);break;case"c":b=String.fromCharCode(parseInt(b,10));break;case"d":case"i":b=parseInt(b,10);break;case"j":b=JSON.stringify(b,null,A.width?parseInt(A.width):0);break;case"e":b=A.precision?parseFloat(b).toExponential(A.precision):parseFloat(b).toExponential();break;case"f":b=A.precision?parseFloat(b).toFixed(A.precision):parseFloat(b);break;case"g":b=A.precision?String(Number(b.toPrecision(A.precision))):parseFloat(b);break;case"o":b=(parseInt(b,10)>>>0).toString(8);break;case"s":b=String(b),b=A.precision?b.substring(0,A.precision):b;break;case"t":b=String(!!b),b=A.precision?b.substring(0,A.precision):b;break;case"T":b=Object.prototype.toString.call(b).slice(8,-1).toLowerCase(),b=A.precision?b.substring(0,A.precision):b;break;case"u":b=parseInt(b,10)>>>0;break;case"v":b=b.valueOf(),b=A.precision?b.substring(0,A.precision):b;break;case"x":b=(parseInt(b,10)>>>0).toString(16);break;case"X":b=(parseInt(b,10)>>>0).toString(16).toUpperCase();break}t.json.test(A.type)?g+=b:(t.number.test(A.type)&&(!x||A.sign)?(w=x?"+":"-",b=b.toString().replace(t.sign,"")):w="",S=A.pad_char?A.pad_char==="0"?"0":A.pad_char.charAt(1):" ",T=A.width-(w+b).length,c=A.width&&T>0?S.repeat(T):"",g+=A.align?w+b+c:S==="0"?w+c+b:c+w+b)}return g}var r=Object.create(null);function f(u){if(r[u])return r[u];for(var l=u,m,d=[],b=0;l;){if((m=t.text.exec(l))!==null)d.push(m[0]);else if((m=t.modulo.exec(l))!==null)d.push("%");else if((m=t.placeholder.exec(l))!==null){if(m[2]){b|=1;var g=[],_=m[2],p=[];if((p=t.key.exec(_))!==null)for(g.push(p[1]);(_=_.substring(p[0].length))!=="";)if((p=t.key_access.exec(_))!==null)g.push(p[1]);else if((p=t.index_access.exec(_))!==null)g.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");m[2]=g}else b|=2;if(b===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:m[0],param_no:m[1],keys:m[2],sign:m[3],pad_char:m[4],align:m[5],width:m[6],precision:m[7],type:m[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");l=l.substring(m[0].length)}return r[u]=d}typeof y!="undefined"&&(y.sprintf=a,y.vsprintf=i),typeof window!="undefined"&&(window.sprintf=a,window.vsprintf=i)})()},{}],302:[function(o,h,y){h.exports=u;var t=o("ndarray-extract-contour"),a=o("zero-crossings"),i={"2d":function(l,m,d){var b=l({order:m,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(_,p,A,c){return _>c|0},vertex:function(_,p,A,c,S,T,x,w,v,C,M,E,L){var z=(x<<0)+(w<<1)+(v<<2)+(C<<3)|0;if(!(z===0||z===15))switch(z){case 0:M.push([_-.5,p-.5]);break;case 1:M.push([_-.25-.25*(c+A-2*L)/(A-c),p-.25-.25*(S+A-2*L)/(A-S)]);break;case 2:M.push([_-.75-.25*(-c-A+2*L)/(c-A),p-.25-.25*(T+c-2*L)/(c-T)]);break;case 3:M.push([_-.5,p-.5-.5*(S+A+T+c-4*L)/(A-S+c-T)]);break;case 4:M.push([_-.25-.25*(T+S-2*L)/(S-T),p-.75-.25*(-S-A+2*L)/(S-A)]);break;case 5:M.push([_-.5-.5*(c+A+T+S-4*L)/(A-c+S-T),p-.5]);break;case 6:M.push([_-.5-.25*(-c-A+T+S)/(c-A+S-T),p-.5-.25*(-S-A+T+c)/(S-A+c-T)]);break;case 7:M.push([_-.75-.25*(T+S-2*L)/(S-T),p-.75-.25*(T+c-2*L)/(c-T)]);break;case 8:M.push([_-.75-.25*(-T-S+2*L)/(T-S),p-.75-.25*(-T-c+2*L)/(T-c)]);break;case 9:M.push([_-.5-.25*(c+A+-T-S)/(A-c+T-S),p-.5-.25*(S+A+-T-c)/(A-S+T-c)]);break;case 10:M.push([_-.5-.5*(-c-A+-T-S+4*L)/(c-A+T-S),p-.5]);break;case 11:M.push([_-.25-.25*(-T-S+2*L)/(T-S),p-.75-.25*(S+A-2*L)/(A-S)]);break;case 12:M.push([_-.5,p-.5-.5*(-S-A+-T-c+4*L)/(S-A+T-c)]);break;case 13:M.push([_-.75-.25*(c+A-2*L)/(A-c),p-.25-.25*(-T-c+2*L)/(T-c)]);break;case 14:M.push([_-.25-.25*(-c-A+2*L)/(c-A),p-.25-.25*(-S-A+2*L)/(S-A)]);break;case 15:M.push([_-.5,p-.5]);break}},cell:function(_,p,A,c,S,T,x,w,v){S?w.push([_,p]):w.push([p,_])}});return function(g,_){var p=[],A=[];return b(g,p,A,_),{positions:p,cells:A}}}};function n(l,m){var d=l.length+"d",b=i[d];if(b)return b(t,l,m)}function r(l,m){for(var d=a(l,m),b=d.length,g=new Array(b),_=new Array(b),p=0;p<b;++p)g[p]=[d[p]],_[p]=[p];return{positions:g,cells:_}}var f={};function u(l,g){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return r(l,g);var d=l.order.join()+"-"+l.dtype,b=f[d],g=+g||0;return b||(b=f[d]=n(l.order,l.dtype)),b(l,g)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(o,h,y){(function(t){(function(){h.exports=f;var a=o("vectorize-text"),i=window||t.global||{},n=i.__TEXT_CACHE||{};i.__TEXT_CACHE={};function r(u){for(var l=u.cells,m=u.positions,d=new Float32Array(l.length*6),b=0,g=0,_=0;_<l.length;++_)for(var p=l[_],A=0;A<3;++A){var c=m[p[A]];d[b++]=c[0],d[b++]=c[1]+1.4,g=Math.max(c[0],g)}return{data:d,shape:g}}function f(u,l,d){var d=d||{},b=n[u];b||(b=n[u]={" ":{data:new Float32Array(0),shape:.2}});var g=b[l];if(!g)if(l.length<=1||!/\d/.test(l))g=b[l]=r(a(l,{triangles:!0,font:u,textAlign:d.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var _=l.split(/(\d|\s)/),p=new Array(_.length),A=0,c=0,S=0;S<_.length;++S)p[S]=f(u,_[S]),A+=p[S].data.length,c+=p[S].shape,S>0&&(c+=.02);for(var T=new Float32Array(A),x=0,w=-.5*c,S=0;S<p.length;++S){for(var v=p[S].data,C=0;C<v.length;C+=2)T[x++]=v[C]+w,T[x++]=v[C+1];w+=p[S].shape+.02}g=b[l]={data:T,shape:c}}return g}}).call(this)}).call(this,o("_process"))},{_process:5,"vectorize-text":311}],304:[function(o,h,y){var t=o("parse-unit");h.exports=r;var a=96;function i(f,u){var l=t(getComputedStyle(f).getPropertyValue(u));return l[0]*r(l[1],f)}function n(f,u){var l=document.createElement("div");l.style["font-size"]="128"+f,u.appendChild(l);var m=i(l,"font-size")/128;return u.removeChild(l),m}function r(f,u){switch(u=u||document.body,f=(f||"px").trim().toLowerCase(),(u===window||u===document)&&(u=document.body),f){case"%":return u.clientHeight/100;case"ch":case"ex":return n(f,u);case"em":return i(u,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(o,h,y){h.exports=_;var t=o("filtered-vector"),a=o("gl-mat4/invert"),i=o("gl-mat4/rotate"),n=o("gl-vec3/cross"),r=o("gl-vec3/normalize"),f=o("gl-vec3/dot");function u(p,A,c){return Math.sqrt(Math.pow(p,2)+Math.pow(A,2)+Math.pow(c,2))}function l(p){return Math.min(1,Math.max(-1,p))}function m(p){var A=Math.abs(p[0]),c=Math.abs(p[1]),S=Math.abs(p[2]),T=[0,0,0];A>Math.max(c,S)?T[2]=1:c>Math.max(A,S)?T[0]=1:T[1]=1;for(var x=0,w=0,v=0;v<3;++v)x+=p[v]*p[v],w+=T[v]*p[v];for(var v=0;v<3;++v)T[v]-=w/x*p[v];return r(T,T),T}function d(p,A,c,S,T,x,w,v){this.center=t(c),this.up=t(S),this.right=t(T),this.radius=t([x]),this.angle=t([w,v]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(p,A),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var b=d.prototype;b.setDistanceLimits=function(p,A){p>0?p=Math.log(p):p=-1/0,A>0?A=Math.log(A):A=1/0,A=Math.max(A,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=A},b.getDistanceLimits=function(p){var A=this.radius.bounds[0];return p?(p[0]=Math.exp(A[0][0]),p[1]=Math.exp(A[1][0]),p):[Math.exp(A[0][0]),Math.exp(A[1][0])]},b.recalcMatrix=function(p){this.center.curve(p),this.up.curve(p),this.right.curve(p),this.radius.curve(p),this.angle.curve(p);for(var A=this.computedUp,c=this.computedRight,S=0,T=0,x=0;x<3;++x)T+=A[x]*c[x],S+=A[x]*A[x];for(var w=Math.sqrt(S),v=0,x=0;x<3;++x)c[x]-=A[x]*T/S,v+=c[x]*c[x],A[x]/=w;for(var C=Math.sqrt(v),x=0;x<3;++x)c[x]/=C;var M=this.computedToward;n(M,A,c),r(M,M);for(var E=Math.exp(this.computedRadius[0]),L=this.computedAngle[0],z=this.computedAngle[1],O=Math.cos(L),R=Math.sin(L),D=Math.cos(z),H=Math.sin(z),B=this.computedCenter,$=O*D,W=R*D,re=H,Q=-O*H,Z=-R*H,K=D,le=this.computedEye,fe=this.computedMatrix,x=0;x<3;++x){var ue=$*c[x]+W*M[x]+re*A[x];fe[4*x+1]=Q*c[x]+Z*M[x]+K*A[x],fe[4*x+2]=ue,fe[4*x+3]=0}var V=fe[1],j=fe[5],ee=fe[9],q=fe[2],X=fe[6],J=fe[10],ie=j*J-ee*X,ne=ee*q-V*J,oe=V*X-j*q,se=u(ie,ne,oe);ie/=se,ne/=se,oe/=se,fe[0]=ie,fe[4]=ne,fe[8]=oe;for(var x=0;x<3;++x)le[x]=B[x]+fe[2+4*x]*E;for(var x=0;x<3;++x){for(var v=0,me=0;me<3;++me)v+=fe[x+4*me]*le[me];fe[12+x]=-v}fe[15]=1},b.getMatrix=function(p,A){this.recalcMatrix(p);var c=this.computedMatrix;if(A){for(var S=0;S<16;++S)A[S]=c[S];return A}return c};var g=[0,0,0];b.rotate=function(p,A,c,S){if(this.angle.move(p,A,c),S){this.recalcMatrix(p);var T=this.computedMatrix;g[0]=T[2],g[1]=T[6],g[2]=T[10];for(var x=this.computedUp,w=this.computedRight,v=this.computedToward,C=0;C<3;++C)T[4*C]=x[C],T[4*C+1]=w[C],T[4*C+2]=v[C];i(T,T,S,g);for(var C=0;C<3;++C)x[C]=T[4*C],w[C]=T[4*C+1];this.up.set(p,x[0],x[1],x[2]),this.right.set(p,w[0],w[1],w[2])}},b.pan=function(p,A,c,S){A=A||0,c=c||0,S=S||0,this.recalcMatrix(p);var T=this.computedMatrix;Math.exp(this.computedRadius[0]);var x=T[1],w=T[5],v=T[9],C=u(x,w,v);x/=C,w/=C,v/=C;var M=T[0],E=T[4],L=T[8],z=M*x+E*w+L*v;M-=x*z,E-=w*z,L-=v*z;var O=u(M,E,L);M/=O,E/=O,L/=O;var R=M*A+x*c,D=E*A+w*c,H=L*A+v*c;this.center.move(p,R,D,H);var B=Math.exp(this.computedRadius[0]);B=Math.max(1e-4,B+S),this.radius.set(p,Math.log(B))},b.translate=function(p,A,c,S){this.center.move(p,A||0,c||0,S||0)},b.setMatrix=function(p,A,c,S){var T=1;typeof c=="number"&&(T=c|0),(T<0||T>3)&&(T=1);var x=(T+2)%3;A||(this.recalcMatrix(p),A=this.computedMatrix);var w=A[T],v=A[T+4],C=A[T+8];if(S){var E=Math.abs(w),L=Math.abs(v),z=Math.abs(C),O=Math.max(E,L,z);E===O?(w=w<0?-1:1,v=C=0):z===O?(C=C<0?-1:1,w=v=0):(v=v<0?-1:1,w=C=0)}else{var M=u(w,v,C);w/=M,v/=M,C/=M}var R=A[x],D=A[x+4],H=A[x+8],B=R*w+D*v+H*C;R-=w*B,D-=v*B,H-=C*B;var $=u(R,D,H);R/=$,D/=$,H/=$;var W=v*H-C*D,re=C*R-w*H,Q=w*D-v*R,Z=u(W,re,Q);W/=Z,re/=Z,Q/=Z,this.center.jump(p,Se,Ae,Ce),this.radius.idle(p),this.up.jump(p,w,v,C),this.right.jump(p,R,D,H);var K,le;if(T===2){var fe=A[1],ue=A[5],V=A[9],j=fe*R+ue*D+V*H,ee=fe*W+ue*re+V*Q;ie<0?K=-Math.PI/2:K=Math.PI/2,le=Math.atan2(ee,j)}else{var q=A[2],X=A[6],J=A[10],ie=q*w+X*v+J*C,ne=q*R+X*D+J*H,oe=q*W+X*re+J*Q;K=Math.asin(l(ie)),le=Math.atan2(oe,ne)}this.angle.jump(p,le,K),this.recalcMatrix(p);var se=A[2],me=A[6],ce=A[10],pe=this.computedMatrix;a(pe,A);var xe=pe[15],Se=pe[12]/xe,Ae=pe[13]/xe,Ce=pe[14]/xe,Ee=Math.exp(this.computedRadius[0]);this.center.jump(p,Se-se*Ee,Ae-me*Ee,Ce-ce*Ee)},b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},b.idle=function(p){this.center.idle(p),this.up.idle(p),this.right.idle(p),this.radius.idle(p),this.angle.idle(p)},b.flush=function(p){this.center.flush(p),this.up.flush(p),this.right.flush(p),this.radius.flush(p),this.angle.flush(p)},b.setDistance=function(p,A){A>0&&this.radius.set(p,Math.log(A))},b.lookAt=function(p,A,c,S){this.recalcMatrix(p),A=A||this.computedEye,c=c||this.computedCenter,S=S||this.computedUp;var T=S[0],x=S[1],w=S[2],v=u(T,x,w);if(!(v<1e-6)){T/=v,x/=v,w/=v;var C=A[0]-c[0],M=A[1]-c[1],E=A[2]-c[2],L=u(C,M,E);if(!(L<1e-6)){C/=L,M/=L,E/=L;var z=this.computedRight,O=z[0],R=z[1],D=z[2],H=T*O+x*R+w*D;O-=H*T,R-=H*x,D-=H*w;var B=u(O,R,D);if(!(B<.01&&(O=x*E-w*M,R=w*C-T*E,D=T*M-x*C,B=u(O,R,D),B<1e-6))){O/=B,R/=B,D/=B,this.up.set(p,T,x,w),this.right.set(p,O,R,D),this.center.set(p,c[0],c[1],c[2]),this.radius.set(p,Math.log(L));var $=x*D-w*R,W=w*O-T*D,re=T*R-x*O,Q=u($,W,re);$/=Q,W/=Q,re/=Q;var Z=T*C+x*M+w*E,K=O*C+R*M+D*E,le=$*C+W*M+re*E,fe=Math.asin(l(Z)),ue=Math.atan2(le,K),V=this.angle._state,j=V[V.length-1],ee=V[V.length-2];j=j%(2*Math.PI);var q=Math.abs(j+2*Math.PI-ue),X=Math.abs(j-ue),J=Math.abs(j-2*Math.PI-ue);q<X&&(j+=2*Math.PI),J<X&&(j-=2*Math.PI),this.angle.jump(this.angle.lastT(),j,ee),this.angle.set(p,ue,fe)}}}};function _(p){p=p||{};var A=p.center||[0,0,0],c=p.up||[0,1,0],S=p.right||m(c),T=p.radius||1,x=p.theta||0,w=p.phi||0;if(A=[].slice.call(A,0,3),c=[].slice.call(c,0,3),r(c,c),S=[].slice.call(S,0,3),r(S,S),"eye"in p){var v=p.eye,C=[v[0]-A[0],v[1]-A[1],v[2]-A[2]];n(S,C,c),u(S[0],S[1],S[2])<1e-6?S=m(c):r(S,S),T=u(C[0],C[1],C[2]);var M=f(c,C)/T,E=f(S,C)/T;w=Math.acos(M),x=Math.acos(E)}return T=Math.log(T),new d(p.zoomMin,p.zoomMax,A,c,S,T,x,w)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(o,h,y){h.exports=a;var t=+(Math.pow(2,27)+1);function a(i,n,r){var f=i*n,u=t*i,l=u-i,m=u-l,d=i-m,b=t*n,g=b-n,_=b-g,p=n-_,A=f-m*_,c=A-d*_,S=c-m*p,T=d*p-S;return r?(r[0]=T,r[1]=f,r):[T,f]}},{}],307:[function(o,h,y){h.exports=t;function t(a,i,n){var r=a+i,f=r-a,u=r-f,l=i-f,m=a-u;return n?(n[0]=m+l,n[1]=r,n):[m+l,r]}},{}],308:[function(o,h,y){(function(t){(function(){var a=o("bit-twiddle"),i=o("dup"),n=o("buffer").Buffer;t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var r=typeof Uint8ClampedArray!="undefined",f=typeof BigUint64Array!="undefined",u=typeof BigInt64Array!="undefined",l=t.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=i([32,0])),l.BIGUINT64||(l.BIGUINT64=i([32,0])),l.BIGINT64||(l.BIGINT64=i([32,0])),l.BUFFER||(l.BUFFER=i([32,0]));var m=l.DATA,d=l.BUFFER;y.free=function(R){if(n.isBuffer(R))d[a.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var D=R.length||R.byteLength,H=a.log2(D)|0;m[H].push(R)}};function b(O){if(!!O){var R=O.length||O.byteLength,D=a.log2(R);m[D].push(O)}}function g(O){b(O.buffer)}y.freeUint8=y.freeUint16=y.freeUint32=y.freeBigUint64=y.freeInt8=y.freeInt16=y.freeInt32=y.freeBigInt64=y.freeFloat32=y.freeFloat=y.freeFloat64=y.freeDouble=y.freeUint8Clamped=y.freeDataView=g,y.freeArrayBuffer=b,y.freeBuffer=function(R){d[a.log2(R.length)].push(R)},y.malloc=function(R,D){if(D===void 0||D==="arraybuffer")return _(R);switch(D){case"uint8":return p(R);case"uint16":return A(R);case"uint32":return c(R);case"int8":return S(R);case"int16":return T(R);case"int32":return x(R);case"float":case"float32":return w(R);case"double":case"float64":return v(R);case"uint8_clamped":return C(R);case"bigint64":return E(R);case"biguint64":return M(R);case"buffer":return z(R);case"data":case"dataview":return L(R);default:return null}return null};function _(R){var R=a.nextPow2(R),D=a.log2(R),H=m[D];return H.length>0?H.pop():new ArrayBuffer(R)}y.mallocArrayBuffer=_;function p(O){return new Uint8Array(_(O),0,O)}y.mallocUint8=p;function A(O){return new Uint16Array(_(2*O),0,O)}y.mallocUint16=A;function c(O){return new Uint32Array(_(4*O),0,O)}y.mallocUint32=c;function S(O){return new Int8Array(_(O),0,O)}y.mallocInt8=S;function T(O){return new Int16Array(_(2*O),0,O)}y.mallocInt16=T;function x(O){return new Int32Array(_(4*O),0,O)}y.mallocInt32=x;function w(O){return new Float32Array(_(4*O),0,O)}y.mallocFloat32=y.mallocFloat=w;function v(O){return new Float64Array(_(8*O),0,O)}y.mallocFloat64=y.mallocDouble=v;function C(O){return r?new Uint8ClampedArray(_(O),0,O):p(O)}y.mallocUint8Clamped=C;function M(O){return f?new BigUint64Array(_(8*O),0,O):null}y.mallocBigUint64=M;function E(O){return u?new BigInt64Array(_(8*O),0,O):null}y.mallocBigInt64=E;function L(O){return new DataView(_(O),0,O)}y.mallocDataView=L;function z(O){O=a.nextPow2(O);var R=a.log2(O),D=d[R];return D.length>0?D.pop():new n(O)}y.mallocBuffer=z,y.clearCache=function(){for(var R=0;R<32;++R)l.UINT8[R].length=0,l.UINT16[R].length=0,l.UINT32[R].length=0,l.INT8[R].length=0,l.INT16[R].length=0,l.INT32[R].length=0,l.FLOAT[R].length=0,l.DOUBLE[R].length=0,l.BIGUINT64[R].length=0,l.BIGINT64[R].length=0,l.UINT8C[R].length=0,m[R].length=0,d[R].length=0}}).call(this)}).call(this,typeof s!="undefined"?s:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(o,h,y){h.exports=t;function t(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}var a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},a.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var f=r[n];r[n]=i,n=f}return i},a.link=function(i,n){var r=this.find(i),f=this.find(n);if(r!==f){var u=this.ranks,l=this.roots,m=u[r],d=u[f];m<d?l[r]=f:d<m?l[f]=r:(l[f]=r,++u[r])}}},{}],310:[function(o,h,y){function t(n,r){for(var f=1,u=n.length,l=n[0],m=n[0],d=1;d<u;++d)if(m=l,l=n[d],r(l,m)){if(d===f){f++;continue}n[f++]=l}return n.length=f,n}function a(n){for(var r=1,f=n.length,u=n[0],l=n[0],m=1;m<f;++m,l=u)if(l=u,u=n[m],u!==l){if(m===r){r++;continue}n[r++]=u}return n.length=r,n}function i(n,r,f){return n.length===0?n:r?(f||n.sort(r),t(n,r)):(f||n.sort(),a(n))}h.exports=i},{}],311:[function(o,h,y){h.exports=n;var t=o("./lib/vtext"),a=null,i=null;typeof document!="undefined"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,i=a.getContext("2d"));function n(r,f){return(typeof f!="object"||f===null)&&(f={}),t(r,f.canvas||a,f.context||i,f)}},{"./lib/vtext":312}],312:[function(o,h,y){h.exports=M,h.exports.processPixels=C;var t=o("surface-nets"),a=o("ndarray"),i=o("simplify-planar-graph"),n=o("clean-pslg"),r=o("cdt2d"),f=o("planar-graph-to-polyline"),u="b",l="b|",m="i",d="i|",b="sup",g="+",_="+1",p="sub",A="-",c="-1";function S(E,L,z,O){for(var R="<"+E+">",D="</"+E+">",H=R.length,B=D.length,$=L[0]===g||L[0]===A,W=0,re=-B;W>-1&&(W=z.indexOf(R,W),!(W===-1||(re=z.indexOf(D,W+H),re===-1)||re<=W));){for(var Q=W;Q<re+B;++Q)if(Q<W+H||Q>=re)O[Q]=null,z=z.substr(0,Q)+" "+z.substr(Q+1);else if(O[Q]!==null){var Z=O[Q].indexOf(L[0]);Z===-1?O[Q]+=L:$&&(O[Q]=O[Q].substr(0,Z+1)+(1+parseInt(O[Q][Z+1]))+O[Q].substr(Z+2))}var K=W+H,le=z.substr(K,re-K),fe=le.indexOf(R);fe!==-1?W=fe:W=re+B}return O}function T(E,L,z){for(var O=L.textAlign||"start",R=L.textBaseline||"alphabetic",D=[1<<30,1<<30],H=[0,0],B=E.length,$=0;$<B;++$)for(var W=E[$],re=0;re<2;++re)D[re]=Math.min(D[re],W[re])|0,H[re]=Math.max(H[re],W[re])|0;var Q=0;switch(O){case"center":Q=-.5*(D[0]+H[0]);break;case"right":case"end":Q=-H[0];break;case"left":case"start":Q=-D[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+O+"'")}var Z=0;switch(R){case"hanging":case"top":Z=-D[1];break;case"middle":Z=-.5*(D[1]+H[1]);break;case"alphabetic":case"ideographic":Z=-3*z;break;case"bottom":Z=-H[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+R+"'")}var K=1/z;return"lineHeight"in L?K*=+L.lineHeight:"width"in L?K=L.width/(H[0]-D[0]):"height"in L&&(K=L.height/(H[1]-D[1])),E.map(function(le){return[K*(le[0]+Q),K*(le[1]+Z)]})}function x(E,L,z,O,R,D){z=z.replace(/\n/g,""),D.breaklines===!0?z=z.replace(/\<br\>/g,`
`):z=z.replace(/\<br\>/g," ");var H="",B=[];for(j=0;j<z.length;++j)B[j]=H;D.bolds===!0&&(B=S(u,l,z,B)),D.italics===!0&&(B=S(m,d,z,B)),D.superscripts===!0&&(B=S(b,_,z,B)),D.subscripts===!0&&(B=S(p,c,z,B));var $=[],W="";for(j=0;j<z.length;++j)B[j]!==null&&(W+=z[j],$.push(B[j]));var re=W.split(`
`),Q=re.length,Z=Math.round(R*O),K=O,le=O*2,fe=0,ue=Q*Z+le;E.height<ue&&(E.height=ue),L.fillStyle="#000",L.fillRect(0,0,E.width,E.height),L.fillStyle="#fff";var V,j,ee,q,X,J=0,ie="";function ne(){if(ie!==""){var Ce=L.measureText(ie).width;L.fillText(ie,K+ee,le+q),ee+=Ce}}function oe(){return""+Math.round(X)+"px "}function se(Ce,Ee){var Oe=""+L.font;if(D.subscripts===!0){var _e=Ce.indexOf(A),Re=Ee.indexOf(A),Ve=_e>-1?parseInt(Ce[1+_e]):0,Je=Re>-1?parseInt(Ee[1+Re]):0;Ve!==Je&&(Oe=Oe.replace(oe(),"?px "),X*=Math.pow(.75,Je-Ve),Oe=Oe.replace("?px ",oe())),q+=.25*Z*(Je-Ve)}if(D.superscripts===!0){var ze=Ce.indexOf(g),De=Ee.indexOf(g),je=ze>-1?parseInt(Ce[1+ze]):0,dt=De>-1?parseInt(Ee[1+De]):0;je!==dt&&(Oe=Oe.replace(oe(),"?px "),X*=Math.pow(.75,dt-je),Oe=Oe.replace("?px ",oe())),q-=.25*Z*(dt-je)}if(D.bolds===!0){var Et=Ce.indexOf(l)>-1,$t=Ee.indexOf(l)>-1;!Et&&$t&&(wt?Oe=Oe.replace("italic ","italic bold "):Oe="bold "+Oe),Et&&!$t&&(Oe=Oe.replace("bold ",""))}if(D.italics===!0){var wt=Ce.indexOf(d)>-1,Ot=Ee.indexOf(d)>-1;!wt&&Ot&&(Oe="italic "+Oe),wt&&!Ot&&(Oe=Oe.replace("italic ",""))}L.font=Oe}for(V=0;V<Q;++V){var me=re[V]+`
`;for(ee=0,q=V*Z,X=O,ie="",j=0;j<me.length;++j){var ce=j+J<$.length?$[j+J]:$[$.length-1];H===ce?ie+=me[j]:(ne(),ie=me[j],ce!==void 0&&(se(H,ce),H=ce))}ne(),J+=me.length;var pe=Math.round(ee+2*K)|0;fe<pe&&(fe=pe)}var xe=fe,Se=le+Z*Q,Ae=a(L.getImageData(0,0,xe,Se).data,[Se,xe,4]);return Ae.pick(-1,-1,0).transpose(1,0)}function w(E,L){var z=t(E,128);return L?i(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function v(E,L,z,O){var R=w(E,O),D=T(R.positions,L,z),H=R.edges,B=L.orientation==="ccw";if(n(D,H),L.polygons||L.polygon||L.polyline){for(var $=f(H,D),W=new Array($.length),re=0;re<$.length;++re){for(var Q=$[re],Z=new Array(Q.length),K=0;K<Q.length;++K){for(var le=Q[K],fe=new Array(le.length),ue=0;ue<le.length;++ue)fe[ue]=D[le[ue]].slice();B&&fe.reverse(),Z[K]=fe}W[re]=Z}return W}else return L.triangles||L.triangulate||L.triangle?{cells:r(D,H,{delaunay:!1,exterior:!1,interior:!0}),positions:D}:{edges:H,positions:D}}function C(E,L,z){try{return v(E,L,z,!0)}catch{}try{return v(E,L,z,!1)}catch{}return L.polygons||L.polyline||L.polygon?[]:L.triangles||L.triangulate||L.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function M(E,L,z,O){var R=64,D=1.25,H={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};O&&(O.size&&O.size>0&&(R=O.size),O.lineSpacing&&O.lineSpacing>0&&(D=O.lineSpacing),O.styletags&&O.styletags.breaklines&&(H.breaklines=!!O.styletags.breaklines),O.styletags&&O.styletags.bolds&&(H.bolds=!!O.styletags.bolds),O.styletags&&O.styletags.italics&&(H.italics=!!O.styletags.italics),O.styletags&&O.styletags.subscripts&&(H.subscripts=!!O.styletags.subscripts),O.styletags&&O.styletags.superscripts&&(H.superscripts=!!O.styletags.superscripts)),z.font=[O.fontStyle,O.fontVariant,O.fontWeight,R+"px",O.font].filter(function($){return $}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr";var B=x(L,z,E,R,D,H);return C(B,O,R)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(o,h,y){(function(){if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function a(C){C.permitHostObjects___&&C.permitHostObjects___(a)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=a);var i=!1;if(typeof WeakMap=="function"){var n=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var r=new n,f=Object.freeze({});if(r.set(f,1),r.get(f)!==1)i=!0;else{h.exports=WeakMap;return}}}var u=Object.getOwnPropertyNames,l=Object.defineProperty,m=Object.isExtensible,d="weakmap:",b=d+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var g=new ArrayBuffer(25),_=new Uint8Array(g);crypto.getRandomValues(_),b=d+"rand:"+Array.prototype.map.call(_,function(C){return(C%36).toString(36)}).join("")+"___"}function p(C){return!(C.substr(0,d.length)==d&&C.substr(C.length-3)==="___")}if(l(Object,"getOwnPropertyNames",{value:function(M){return u(M).filter(p)}}),"getPropertyNames"in Object){var A=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(M){return A(M).filter(p)}})}function c(C){if(C!==Object(C))throw new TypeError("Not an object: "+C);var M=C[b];if(M&&M.key===C)return M;if(!!m(C)){M={key:C};try{return l(C,b,{value:M,writable:!1,enumerable:!1,configurable:!1}),M}catch{return}}}(function(){var C=Object.freeze;l(Object,"freeze",{value:function(z){return c(z),C(z)}});var M=Object.seal;l(Object,"seal",{value:function(z){return c(z),M(z)}});var E=Object.preventExtensions;l(Object,"preventExtensions",{value:function(z){return c(z),E(z)}})})();function S(C){return C.prototype=null,Object.freeze(C)}var T=!1;function x(){!T&&typeof console!="undefined"&&(T=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var w=0,v=function(){this instanceof v||x();var C=[],M=[],E=w++;function L(D,H){var B,$=c(D);return $?E in $?$[E]:H:(B=C.indexOf(D),B>=0?M[B]:H)}function z(D){var H=c(D);return H?E in H:C.indexOf(D)>=0}function O(D,H){var B,$=c(D);return $?$[E]=H:(B=C.indexOf(D),B>=0?M[B]=H:(B=C.length,M[B]=H,C[B]=D)),this}function R(D){var H=c(D),B,$;return H?E in H&&delete H[E]:(B=C.indexOf(D),B<0?!1:($=C.length-1,C[B]=void 0,M[B]=M[$],C[B]=C[$],C.length=$,M.length=$,!0))}return Object.create(v.prototype,{get___:{value:S(L)},has___:{value:S(z)},set___:{value:S(O)},delete___:{value:S(R)}})};v.prototype=Object.create(Object.prototype,{get:{value:function(M,E){return this.get___(M,E)},writable:!0,configurable:!0},has:{value:function(M){return this.has___(M)},writable:!0,configurable:!0},set:{value:function(M,E){return this.set___(M,E)},writable:!0,configurable:!0},delete:{value:function(M){return this.delete___(M)},writable:!0,configurable:!0}}),typeof n=="function"?function(){i&&typeof Proxy!="undefined"&&(Proxy=void 0);function C(){this instanceof v||x();var M=new n,E=void 0,L=!1;function z(H,B){return E?M.has(H)?M.get(H):E.get___(H,B):M.get(H,B)}function O(H){return M.has(H)||(E?E.has___(H):!1)}var R;i?R=function(H,B){return M.set(H,B),M.has(H)||(E||(E=new v),E.set(H,B)),this}:R=function(H,B){if(L)try{M.set(H,B)}catch{E||(E=new v),E.set___(H,B)}else M.set(H,B);return this};function D(H){var B=!!M.delete(H);return E&&E.delete___(H)||B}return Object.create(v.prototype,{get___:{value:S(z)},has___:{value:S(O)},set___:{value:S(R)},delete___:{value:S(D)},permitHostObjects___:{value:S(function(H){if(H===a)L=!0;else throw new Error("bogus call to permitHostObjects___")})}})}C.prototype=v.prototype,h.exports=C,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),h.exports=v)})()},{}],314:[function(o,h,y){var t=o("./hidden-store.js");h.exports=a;function a(){var i={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var r=n.valueOf(i);return r&&r.identity===i?r:t(n,i)}}},{"./hidden-store.js":315}],315:[function(o,h,y){h.exports=t;function t(a,i){var n={identity:i},r=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(f){return f!==i?r.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(o,h,y){var t=o("./create-store.js");h.exports=a;function a(){var i=t();return{get:function(n,r){var f=i(n);return f.hasOwnProperty("value")?f.value:r},set:function(n,r){return i(n).value=r,this},has:function(n){return"value"in i(n)},delete:function(n){return delete i(n).value}}}},{"./create-store.js":314}],317:[function(o,h,y){function t(){return function(u,l,m,d,b,g){var _=u[0],p=m[0],A=[0],c=p;d|=0;var S=0,T=p;for(S=0;S<_;++S){{var x=l[d]-g,w=l[d+c]-g;x>=0!=w>=0&&b.push(A[0]+.5+.5*(x+w)/(x-w))}d+=T,++A[0]}}}function a(){return t()}var i=a;function n(u){var l={};return function(d,b,g){var _=d.dtype,p=d.order,A=[_,p.join()].join(),c=l[A];return c||(l[A]=c=u([_,p])),c(d.shape.slice(0),d.data,d.stride,d.offset|0,b,g)}}function r(u){return n(i.bind(void 0,u))}function f(u){return r({funcName:u.funcName})}h.exports=f({funcName:"zeroCrossings"})},{}],318:[function(o,h,y){h.exports=a;var t=o("./lib/zc-core");function a(i,n){var r=[];return n=+n||0,t(i.hi(i.shape[0]-1),r,n),r}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof No!="undefined"?No:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[27])(27)})})(kE);var kie=ME(kE.exports),UR=(N,U)=>{const e=N.__vccOpts||N;for(const[I,F]of U)e[I]=F;return e};const VR=TI({name:"my-table",emits:["return-checked-rows","do-search","is-finished","get-now-page"],props:{isLoading:{type:Boolean,require:!0},isReSearch:{type:Boolean,require:!0},hasCheckbox:{type:Boolean,default:!1},title:{type:String,default:""},columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},pageSize:{type:Number,default:10},total:{type:Number,default:100},page:{type:Number,default:1},sortable:{type:Object,default:()=>({order:"id",sort:"asc"})},messages:{type:Object,default:()=>({pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"})},isStaticMode:{type:Boolean,default:!1},isSlotMode:{type:Boolean,default:!1},isHidePaging:{type:Boolean,default:!1},pageOptions:{type:Array,default:()=>[{value:10,text:10},{value:25,text:25},{value:50,text:50}]}},setup(N,{emit:U,slots:e}){let I=Fh(null),F=N.pageOptions.length>0?Fh(N.pageOptions[0].value):Fh(N.pageSize);N.pageOptions.length>0&&N.pageOptions.forEach(d=>{Object.prototype.hasOwnProperty.call(d,"value")&&Object.prototype.hasOwnProperty.call(d,"text")&&N.pageSize==d.value&&(F.value=d.value)});const s=lm({isSlotMode:N.isSlotMode,isCheckAll:!1,isHidePaging:N.isHidePaging,keyColumn:ku(()=>{let d="";return Object.assign(N.columns).forEach(b=>{b.isKey&&(d=b.field)}),d}),page:N.page,pageSize:F.value,maxPage:ku(()=>{if(N.total<=0)return 0;let d=Math.floor(N.total/s.pageSize);return N.total%s.pageSize>0&&d++,d}),offset:ku(()=>(s.page-1)*s.pageSize+1),limit:ku(()=>{let d=s.page*s.pageSize;return N.total>=d?d:N.total}),paging:ku(()=>{let d=s.page-2<=0?1:s.page-2;s.maxPage-s.page<=2&&(d=s.maxPage-4),d=d<=0?1:d;let b=[];for(let g=d;g<=s.maxPage;g++)b.length<5&&b.push(g);return b}),order:N.sortable.order,sort:N.sortable.sort,pageOptions:N.pageOptions}),o=ku(()=>{let d=s.order,b=1;s.sort==="desc"&&(b=-1);let g=N.rows;g.sort((p,A)=>p[d]<A[d]?-1*b:p[d]>A[d]?b:0);let _=[];for(let p=s.offset-1;p<s.limit;p++)g[p]&&_.push(g[p]);return _y(function(){m()}),_}),h=Fh([]);N.hasCheckbox&&(oE(()=>{h.value=[]}),Gs(()=>s.isCheckAll,d=>{let b=[];h.value.forEach(g=>{g&&(g.checked=d,g.checked&&b.push(g.value))}),U("return-checked-rows",b)}));const y=()=>{let d=[];h.value.forEach(b=>{b&&b.checked&&d.push(b.value)}),U("return-checked-rows",d)},t=()=>{h.value.forEach(d=>{d&&d.checked&&(d.checked=!1)}),U("return-checked-rows",[])},a=d=>{let b="asc";d==s.order&&s.sort=="asc"&&(b="desc");let g=(s.page-1)*s.pageSize,_=s.pageSize;s.order=d,s.sort=b,U("do-search",g,_,d,b),s.isCheckAll?s.isCheckAll=!1:N.hasCheckbox&&t()},i=(d,b)=>{s.isCheckAll=!1;let g=s.order,_=s.sort,p=(d-1)*s.pageSize,A=s.pageSize;(!N.isReSearch||d>1||d==b)&&U("do-search",p,A,g,_)};Gs(()=>s.page,i),Gs(()=>N.page,d=>{d<=1?(s.page=1,U("get-now-page",s.page)):d>=s.maxPage?(s.page=s.maxPage,U("get-now-page",s.page)):s.page=d}),Gs(()=>s.pageSize,()=>{s.page===1?i(s.page,s.page):(s.page=1,s.isCheckAll=!1)});const r=()=>{if(s.page==1)return!1;s.page--},f=d=>{s.page=d},u=()=>{if(s.page>=s.maxPage)return!1;s.page++};Gs(()=>N.rows,()=>{(N.isReSearch||N.isStaticMode)&&(s.page=1),_y(function(){N.isStaticMode||m()})});const l=(d,...b)=>d.replace(/{(\d+)}/g,function(g,_){return typeof b[_]!="undefined"?b[_]:g}),m=()=>{if(I.value){let d=I.value.getElementsByClassName("is-rows-el");U("is-finished",d)}U("get-now-page",s.page)};return vm(()=>{_y(()=>{N.rows.length>0&&m()})}),N.hasCheckbox?{slots:e,localTable:I,localRows:o,setting:s,rowCheckbox:h,checked:y,doSort:a,prevPage:r,movePage:f,nextPage:u,stringFormat:l}:{slots:e,localTable:I,localRows:o,setting:s,doSort:a,prevPage:r,movePage:f,nextPage:u,stringFormat:l}}}),Sf=N=>(cI("data-v-d261baf2"),N=N(),hI(),N),HR={class:"card"},GR={key:0,class:"vtl-title card-header"},jR={class:"card-body"},$R=Sf(()=>bi("p",{class:"card-title"},null,-1)),WR={id:"dataTables-example_wrapper",class:"dataTables_wrapper dt-bootstrap4 no-footer"},YR=Sf(()=>bi("div",{class:"row"},null,-1)),XR={class:"row"},ZR={class:"col-sm-12"},KR=Sf(()=>bi("div",{class:"row"},null,-1)),JR={key:0,class:"loading-mask"},QR=Sf(()=>bi("div",{class:"loading-content"},[bi("span",{style:{color:"white"}},"Loading...")],-1)),qR=[QR],eD={class:"vtl-table table table-hover table-bordered table-responsive-sm",id:"dataTables-example",ref:"localTable"},tD={class:"vtl-thead thead-dark"},rD={class:"vtl-thead-tr"},nD={key:0,class:"vtl-thead-th checkbox-th"},aD=["onClick"],iD={key:0,class:"vtl-tbody"},oD={key:0,class:"vtl-tbody-td"},sD=["value"],lD=["innerHTML"],uD={key:0},fD={key:1},cD={key:0,class:"vtl-tbody-td"},hD=["value"],vD=["innerHTML"],pD={key:1},dD={key:0},gD={key:1},yD={key:0,class:"vtl-paging row"},mD={class:"vtl-paging-info col-sm-12 col-md-4"},xD={role:"status","aria-live":"polite"},bD={class:"vtl-paging-change-div col-sm-12 col-md-4"},_D={class:"vtl-paging-count-label"},wD=["value"],TD={class:"vtl-paging-page-label"},AD=["value"],SD={class:"vtl-paging-pagination-div col-sm-12 col-md-4"},MD={class:"dataTables_paginate paging_simple_numbers",id:"dataTables-example_paginate"},ED={class:"vtl-paging-pagination-ul pagination"},kD=Sf(()=>bi("span",{"aria-hidden":"true"},"\xAB",-1)),CD=Sf(()=>bi("span",{class:"sr-only"},"First",-1)),LD=[kD,CD],PD=Sf(()=>bi("span",{"aria-hidden":"true"},"<",-1)),ID=Sf(()=>bi("span",{class:"sr-only"},"Prev",-1)),RD=[PD,ID],DD=["onClick"],FD=Sf(()=>bi("span",{"aria-hidden":"true"},">",-1)),OD=Sf(()=>bi("span",{class:"sr-only"},"Next",-1)),zD=[FD,OD],ND=Sf(()=>bi("span",{"aria-hidden":"true"},"\xBB",-1)),BD=Sf(()=>bi("span",{class:"sr-only"},"Last",-1)),UD=[ND,BD],VD={key:1,class:"row"},HD={class:"vtl-empty-msg col-sm-12 text-center"};function GD(N,U,e,I,F,s){return _i(),ro("div",HR,[N.title?(_i(),ro("div",GR,pl(N.title),1)):lu("",!0),bi("div",jR,[$R,bi("div",WR,[YR,bi("div",XR,[bi("div",ZR,[KR,N.isLoading?(_i(),ro("div",JR,qR)):lu("",!0),bi("table",eD,[bi("thead",tD,[bi("tr",rD,[N.hasCheckbox?(_i(),ro("th",nD,[bi("div",null,[Ih(bi("input",{type:"checkbox",class:"vtl-thead-checkbox","onUpdate:modelValue":U[0]||(U[0]=o=>N.setting.isCheckAll=o)},null,512),[[RR,N.setting.isCheckAll]])])])):lu("",!0),(_i(!0),ro(is,null,Lc(N.columns,(o,h)=>(_i(),ro("th",{class:mf(["vtl-thead-th",o.headerClasses]),key:h,style:$p(Object.assign({width:o.width?o.width:"auto"},o.headerStyles))},[bi("div",{class:mf(["vtl-thead-column",{sortable:o.sortable,both:o.sortable,asc:N.setting.order===o.field&&N.setting.sort==="asc",desc:N.setting.order===o.field&&N.setting.sort==="desc"}]),onClick:y=>o.sortable?N.doSort(o.field):!1},pl(o.label),11,aD)],6))),128))])]),N.rows.length>0?(_i(),ro("tbody",iD,[N.isStaticMode?(_i(!0),ro(is,{key:0},Lc(N.localRows,(o,h)=>(_i(),ro("tr",{key:h,class:"vtl-tbody-tr"},[N.hasCheckbox?(_i(),ro("td",oD,[bi("div",null,[bi("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:y=>{N.rowCheckbox[h]=y},value:o[N.setting.keyColumn],onClick:U[1]||(U[1]=(...y)=>N.checked&&N.checked(...y))},null,8,sD)])])):lu("",!0),(_i(!0),ro(is,null,Lc(N.columns,(y,t)=>(_i(),ro("td",{key:t,class:mf(["vtl-tbody-td",y.columnClasses]),style:$p(y.columnStyles)},[y.display?(_i(),ro("div",{key:0,innerHTML:y.display(o)},null,8,lD)):(_i(),ro(is,{key:1},[N.setting.isSlotMode&&N.slots[y.field]?(_i(),ro("div",uD,[Cl(N.$slots,y.field,{value:o},void 0,!0)])):(_i(),ro("span",fD,pl(o[y.field]),1))],64))],6))),128))]))),128)):(_i(!0),ro(is,{key:1},Lc(N.rows,(o,h)=>(_i(),ro("tr",{key:h,class:"vtl-tbody-tr"},[N.hasCheckbox?(_i(),ro("td",cD,[bi("div",null,[bi("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:y=>{N.rowCheckbox[h]=y},value:o[N.setting.keyColumn],onClick:U[2]||(U[2]=(...y)=>N.checked&&N.checked(...y))},null,8,hD)])])):lu("",!0),(_i(!0),ro(is,null,Lc(N.columns,(y,t)=>(_i(),ro("td",{key:t,class:mf(["vtl-tbody-td",y.columnClasses]),style:$p(y.columnStyles)},[y.display?(_i(),ro("div",{key:0,innerHTML:y.display(o)},null,8,vD)):(_i(),ro("div",pD,[N.setting.isSlotMode&&N.slots[y.field]?(_i(),ro("div",dD,[Cl(N.$slots,y.field,{value:o},void 0,!0)])):(_i(),ro("span",gD,pl(o[y.field]),1))]))],6))),128))]))),128))])):lu("",!0)],512)])]),N.rows.length>0?(_i(),ro("div",yD,[N.setting.isHidePaging?lu("",!0):(_i(),ro(is,{key:0},[bi("div",mD,[bi("div",xD,pl(N.stringFormat(N.messages.pagingInfo,N.setting.offset,N.setting.limit,N.total)),1)]),bi("div",bD,[bi("span",_D,pl(N.messages.pageSizeChangeLabel),1),Ih(bi("select",{class:"vtl-paging-count-dropdown","onUpdate:modelValue":U[3]||(U[3]=o=>N.setting.pageSize=o)},[(_i(!0),ro(is,null,Lc(N.pageOptions,o=>(_i(),ro("option",{value:o.value,key:o.value},pl(o.text),9,wD))),128))],512),[[rT,N.setting.pageSize]]),bi("span",TD,pl(N.messages.gotoPageLabel),1),Ih(bi("select",{class:"vtl-paging-page-dropdown","onUpdate:modelValue":U[4]||(U[4]=o=>N.setting.page=o)},[(_i(!0),ro(is,null,Lc(N.setting.maxPage,o=>(_i(),ro("option",{key:o,value:parseInt(o)},pl(o),9,AD))),128))],512),[[rT,N.setting.page]])]),bi("div",SD,[bi("div",MD,[bi("ul",ED,[bi("li",{class:mf(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-first page-item",{disabled:N.setting.page<=1}])},[bi("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-first page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:U[5]||(U[5]=o=>N.setting.page=1)},LD)],2),bi("li",{class:mf(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-prev page-item",{disabled:N.setting.page<=1}])},[bi("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-prev page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:U[6]||(U[6]=(...o)=>N.prevPage&&N.prevPage(...o))},RD)],2),(_i(!0),ro(is,null,Lc(N.setting.paging,o=>(_i(),ro("li",{class:mf(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-number page-item",{disabled:N.setting.page===o}]),key:o},[bi("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-number page-link",href:"javascript:void(0)",onClick:h=>N.movePage(o)},pl(o),9,DD)],2))),128)),bi("li",{class:mf(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-next page-item",{disabled:N.setting.page>=N.setting.maxPage}])},[bi("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-next page-link",href:"javascript:void(0)","aria-label":"Next",onClick:U[7]||(U[7]=(...o)=>N.nextPage&&N.nextPage(...o))},zD)],2),bi("li",{class:mf(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-last page-item",{disabled:N.setting.page>=N.setting.maxPage}])},[bi("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-last page-link",href:"javascript:void(0)","aria-label":"Next",onClick:U[8]||(U[8]=o=>N.setting.page=N.setting.maxPage)},UD)],2)])])])],64))])):(_i(),ro("div",VD,[bi("div",HD,pl(N.messages.noDataAvailable),1)]))])])])}var Cie=UR(VR,[["render",GD],["__scopeId","data-v-d261baf2"]]);function V1(N){return N===0?!1:Array.isArray(N)&&N.length===0?!0:!N}function jD(N){return(...U)=>!N(...U)}function $D(N,U){return N===void 0&&(N="undefined"),N===null&&(N="null"),N===!1&&(N="false"),N.toString().toLowerCase().indexOf(U.trim())!==-1}function CE(N,U,e,I){return U?N.filter(F=>$D(I(F,e),U)).sort((F,s)=>I(F,e).length-I(s,e).length):N}function WD(N){return N.filter(U=>!U.$isLabel)}function H1(N,U){return e=>e.reduce((I,F)=>F[N]&&F[N].length?(I.push({$groupLabel:F[U],$isLabel:!0}),I.concat(F[N])):I,[])}function YD(N,U,e,I,F){return s=>s.map(o=>{if(!o[e])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const h=CE(o[e],N,U,F);return h.length?{[I]:o[I],[e]:h}:[]})}const iT=(...N)=>U=>N.reduce((e,I)=>I(e),U);var XD={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(N,U){return V1(N)?"":U?N[U]:N}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const N=this.search||"",U=N.toLowerCase().trim();let e=this.options.concat();return this.internalSearch?e=this.groupValues?this.filterAndFlat(e,U,this.label):CE(e,U,this.label,this.customLabel):e=this.groupValues?H1(this.groupValues,this.groupLabel)(e):e,e=this.hideSelected?e.filter(jD(this.isSelected)):e,this.taggable&&U.length&&!this.isExistingOption(U)&&(this.tagPosition==="bottom"?e.push({isTag:!0,label:N}):e.unshift({isTag:!0,label:N})),e.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(N=>N[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(U=>this.customLabel(U,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(N,U,e){return iT(YD(U,e,this.groupValues,this.groupLabel,this.customLabel),H1(this.groupValues,this.groupLabel))(N)},flatAndStrip(N){return iT(H1(this.groupValues,this.groupLabel),WD)(N)},updateSearch(N){this.search=N},isExistingOption(N){return this.options?this.optionKeys.indexOf(N)>-1:!1},isSelected(N){const U=this.trackBy?N[this.trackBy]:N;return this.valueKeys.indexOf(U)>-1},isOptionDisabled(N){return!!N.$isDisabled},getOptionLabel(N){if(V1(N))return"";if(N.isTag)return N.label;if(N.$isLabel)return N.$groupLabel;const U=this.customLabel(N,this.label);return V1(U)?"":U},select(N,U){if(N.$isLabel&&this.groupSelect){this.selectGroup(N);return}if(!(this.blockKeys.indexOf(U)!==-1||this.disabled||N.$isDisabled||N.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(U==="Tab"&&!this.pointerDirty)){if(N.isTag)this.$emit("tag",N.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(N)){U!=="Tab"&&this.removeElement(N);return}this.$emit("select",N,this.id),this.multiple?this.$emit("update:modelValue",this.internalValue.concat([N])):this.$emit("update:modelValue",N),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(N){const U=this.options.find(e=>e[this.groupLabel]===N.$groupLabel);if(!!U){if(this.wholeGroupSelected(U)){this.$emit("remove",U[this.groupValues],this.id);const e=this.internalValue.filter(I=>U[this.groupValues].indexOf(I)===-1);this.$emit("update:modelValue",e)}else{const e=U[this.groupValues].filter(I=>!(this.isOptionDisabled(I)||this.isSelected(I)));this.$emit("select",e,this.id),this.$emit("update:modelValue",this.internalValue.concat(e))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(N){return N[this.groupValues].every(U=>this.isSelected(U)||this.isOptionDisabled(U))},wholeGroupDisabled(N){return N[this.groupValues].every(this.isOptionDisabled)},removeElement(N,U=!0){if(this.disabled||N.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const e=typeof N=="object"?this.valueKeys.indexOf(N[this.trackBy]):this.valueKeys.indexOf(N);if(this.$emit("remove",N,this.id),this.multiple){const I=this.internalValue.slice(0,e).concat(this.internalValue.slice(e+1));this.$emit("update:modelValue",I)}else this.$emit("update:modelValue",null);this.closeOnSelect&&U&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.$el.focus(),this.$emit("open",this.id))},deactivate(){!this.isOpen||(this.isOpen=!1,this.searchable?this.$refs.search&&this.$refs.search.blur():this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window=="undefined")return;const N=this.$el.getBoundingClientRect().top,U=window.innerHeight-this.$el.getBoundingClientRect().bottom;U>this.maxHeight||U>N||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(U-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(N-40,this.maxHeight))}}},ZD={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(N,U){return{"multiselect__option--highlight":N===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(U)}},groupHighlight(N,U){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":U.$isLabel}];const e=this.options.find(I=>I[this.groupLabel]===U.$groupLabel);return e&&!this.wholeGroupDisabled(e)?["multiselect__option--group",{"multiselect__option--highlight":N===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(e)}]:"multiselect__option--disabled"},addPointerElement({key:N}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],N),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){!this.closeOnSelect||(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(N){this.pointer=N,this.pointerDirty=!0}}},KD={name:"vue-multiselect",mixins:[XD,ZD],props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:N=>`and ${N} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const JD={ref:"tags",class:"multiselect__tags"},QD={class:"multiselect__tags-wrap"},qD={class:"multiselect__spinner"},e9={key:0},t9={class:"multiselect__option"},r9={class:"multiselect__option"},n9=Zp("No elements found. Consider changing the search query."),a9={class:"multiselect__option"},i9=Zp("List is empty.");function o9(N,U,e,I,F,s){return _i(),Yu("div",{tabindex:N.searchable?-1:e.tabindex,class:[{"multiselect--active":N.isOpen,"multiselect--disabled":e.disabled,"multiselect--above":s.isAbove},"multiselect"],onFocus:U[14]||(U[14]=o=>N.activate()),onBlur:U[15]||(U[15]=o=>N.searchable?!1:N.deactivate()),onKeydown:[U[16]||(U[16]=Mc(qs(o=>N.pointerForward(),["self","prevent"]),["down"])),U[17]||(U[17]=Mc(qs(o=>N.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:U[18]||(U[18]=Mc(qs(o=>N.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:U[19]||(U[19]=Mc(o=>N.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+N.id},[Cl(N.$slots,"caret",{toggle:N.toggle},()=>[yo("div",{onMousedown:U[1]||(U[1]=qs(o=>N.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),Cl(N.$slots,"clear",{search:N.search}),yo("div",JD,[Cl(N.$slots,"selection",{search:N.search,remove:N.removeElement,values:s.visibleValues,isOpen:N.isOpen},()=>[Ih(yo("div",QD,[(_i(!0),Yu(is,null,Lc(s.visibleValues,(o,h)=>Cl(N.$slots,"tag",{option:o,search:N.search,remove:N.removeElement},()=>[(_i(),Yu("span",{class:"multiselect__tag",key:h},[yo("span",{textContent:pl(N.getOptionLabel(o))},null,8,["textContent"]),yo("i",{tabindex:"1",onKeypress:Mc(qs(y=>N.removeElement(o),["prevent"]),["enter"]),onMousedown:qs(y=>N.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[Wd,s.visibleValues.length>0]]),N.internalValue&&N.internalValue.length>e.limit?Cl(N.$slots,"limit",{key:0},()=>[yo("strong",{class:"multiselect__strong",textContent:pl(e.limitText(N.internalValue.length-e.limit))},null,8,["textContent"])]):lu("v-if",!0)]),yo(Vy,{name:"multiselect__loading"},{default:db(()=>[Cl(N.$slots,"loading",{},()=>[Ih(yo("div",qD,null,512),[[Wd,e.loading]])])]),_:3}),N.searchable?(_i(),Yu("input",{key:0,ref:"search",name:e.name,id:N.id,type:"text",autocomplete:"off",spellcheck:"false",placeholder:N.placeholder,style:s.inputStyle,value:N.search,disabled:e.disabled,tabindex:e.tabindex,onInput:U[2]||(U[2]=o=>N.updateSearch(o.target.value)),onFocus:U[3]||(U[3]=qs(o=>N.activate(),["prevent"])),onBlur:U[4]||(U[4]=qs(o=>N.deactivate(),["prevent"])),onKeyup:U[5]||(U[5]=Mc(o=>N.deactivate(),["esc"])),onKeydown:[U[6]||(U[6]=Mc(qs(o=>N.pointerForward(),["prevent"]),["down"])),U[7]||(U[7]=Mc(qs(o=>N.pointerBackward(),["prevent"]),["up"])),U[9]||(U[9]=Mc(qs(o=>N.removeLastElement(),["stop"]),["delete"]))],onKeypress:U[8]||(U[8]=Mc(qs(o=>N.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+N.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):lu("v-if",!0),s.isSingleLabelVisible?(_i(),Yu("span",{key:1,class:"multiselect__single",onMousedown:U[10]||(U[10]=qs((...o)=>N.toggle&&N.toggle(...o),["prevent"]))},[Cl(N.$slots,"singleLabel",{option:s.singleValue},()=>[Zp(pl(N.currentOptionLabel),1)])],32)):lu("v-if",!0),s.isPlaceholderVisible?(_i(),Yu("span",{key:2,class:"multiselect__placeholder",onMousedown:U[11]||(U[11]=qs((...o)=>N.toggle&&N.toggle(...o),["prevent"]))},[Cl(N.$slots,"placeholder",{},()=>[Zp(pl(N.placeholder),1)])],32)):lu("v-if",!0)],512),yo(Vy,{name:"multiselect"},{default:db(()=>[Ih(yo("div",{class:"multiselect__content-wrapper",onFocus:U[12]||(U[12]=(...o)=>N.activate&&N.activate(...o)),tabindex:"-1",onMousedown:U[13]||(U[13]=qs(()=>{},["prevent"])),style:{maxHeight:N.optimizedHeight+"px"},ref:"list"},[yo("ul",{class:"multiselect__content",style:s.contentStyle,role:"listbox",id:"listbox-"+N.id},[Cl(N.$slots,"beforeList"),N.multiple&&N.max===N.internalValue.length?(_i(),Yu("li",e9,[yo("span",t9,[Cl(N.$slots,"maxElements",{},()=>[Zp("Maximum of "+pl(N.max)+" options selected. First remove a selected option to select another.",1)])])])):lu("v-if",!0),!N.max||N.internalValue.length<N.max?(_i(!0),Yu(is,{key:1},Lc(N.filteredOptions,(o,h)=>(_i(),Yu("li",{class:"multiselect__element",key:h,id:N.id+"-"+h,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?lu("v-if",!0):(_i(),Yu("span",{key:0,class:[N.optionHighlight(h,o),"multiselect__option"],onClick:qs(y=>N.select(o),["stop"]),onMouseenter:qs(y=>N.pointerSet(h),["self"]),"data-select":o&&o.isTag?N.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[Cl(N.$slots,"option",{option:o,search:N.search,index:h},()=>[yo("span",null,pl(N.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(_i(),Yu("span",{key:1,"data-select":N.groupSelect&&s.selectGroupLabelText,"data-deselect":N.groupSelect&&s.deselectGroupLabelText,class:[N.groupHighlight(h,o),"multiselect__option"],onMouseenter:qs(y=>N.groupSelect&&N.pointerSet(h),["self"]),onMousedown:qs(y=>N.selectGroup(o),["prevent"])},[Cl(N.$slots,"option",{option:o,search:N.search,index:h},()=>[yo("span",null,pl(N.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):lu("v-if",!0)],8,["id","role"]))),128)):lu("v-if",!0),Ih(yo("li",null,[yo("span",r9,[Cl(N.$slots,"noResult",{search:N.search},()=>[n9])])],512),[[Wd,e.showNoResults&&N.filteredOptions.length===0&&N.search&&!e.loading]]),Ih(yo("li",null,[yo("span",a9,[Cl(N.$slots,"noOptions",{},()=>[i9])])],512),[[Wd,e.showNoOptions&&N.options.length===0&&!N.search&&!e.loading]]),Cl(N.$slots,"afterList")],12,["id"])],36),[[Wd,N.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}KD.render=o9;function G1(N){return[null,void 0,!1].indexOf(N)!==-1}function oT(N,U){var e=Object.keys(N);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(N);U&&(I=I.filter(function(F){return Object.getOwnPropertyDescriptor(N,F).enumerable})),e.push.apply(e,I)}return e}function sT(N){for(var U=1;U<arguments.length;U++){var e=arguments[U]!=null?arguments[U]:{};U%2?oT(Object(e),!0).forEach(function(I){s9(N,I,e[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(e)):oT(Object(e)).forEach(function(I){Object.defineProperty(N,I,Object.getOwnPropertyDescriptor(e,I))})}return N}function s9(N,U,e){return U in N?Object.defineProperty(N,U,{value:e,enumerable:!0,configurable:!0,writable:!0}):N[U]=e,N}function l9(N){return N&&N.__esModule&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N}function LE(N){var U={exports:{}};return N(U,U.exports),U.exports}function Mb(N){return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},Mb(N)}var lT=LE(function(N,U){N.exports=function(){var e=["decimals","thousand","mark","prefix","suffix","encoder","decoder","negativeBefore","negative","edit","undo"];function I(f){return f.split("").reverse().join("")}function F(f,u){return f.substring(0,u.length)===u}function s(f,u){return f.slice(-1*u.length)===u}function o(f,u,l){if((f[u]||f[l])&&f[u]===f[l])throw new Error(u)}function h(f){return typeof f=="number"&&isFinite(f)}function y(f,u){return f=f.toString().split("e"),(+((f=(f=Math.round(+(f[0]+"e"+(f[1]?+f[1]+u:u)))).toString().split("e"))[0]+"e"+(f[1]?+f[1]-u:-u))).toFixed(u)}function t(f,u,l,m,d,b,g,_,p,A,c,S){var T,x,w,v=S,C="",M="";return b&&(S=b(S)),!!h(S)&&(f!==!1&&parseFloat(S.toFixed(f))===0&&(S=0),S<0&&(T=!0,S=Math.abs(S)),f!==!1&&(S=y(S,f)),(S=S.toString()).indexOf(".")!==-1?(w=(x=S.split("."))[0],l&&(C=l+x[1])):w=S,u&&(w=I(w).match(/.{1,3}/g),w=I(w.join(I(u)))),T&&_&&(M+=_),m&&(M+=m),T&&p&&(M+=p),M+=w,M+=C,d&&(M+=d),A&&(M=A(M,v)),M)}function a(f,u,l,m,d,b,g,_,p,A,c,S){var T,x="";return c&&(S=c(S)),!(!S||typeof S!="string")&&(_&&F(S,_)&&(S=S.replace(_,""),T=!0),m&&F(S,m)&&(S=S.replace(m,"")),p&&F(S,p)&&(S=S.replace(p,""),T=!0),d&&s(S,d)&&(S=S.slice(0,-1*d.length)),u&&(S=S.split(u).join("")),l&&(S=S.replace(l,".")),T&&(x+="-"),(x=(x+=S).replace(/[^0-9\.\-.]/g,""))!==""&&(x=Number(x),g&&(x=g(x)),!!h(x)&&x))}function i(f){var u,l,m,d={};for(f.suffix===void 0&&(f.suffix=f.postfix),u=0;u<e.length;u+=1)if((m=f[l=e[u]])===void 0)l!=="negative"||d.negativeBefore?l==="mark"&&d.thousand!=="."?d[l]=".":d[l]=!1:d[l]="-";else if(l==="decimals"){if(!(m>=0&&m<8))throw new Error(l);d[l]=m}else if(l==="encoder"||l==="decoder"||l==="edit"||l==="undo"){if(typeof m!="function")throw new Error(l);d[l]=m}else{if(typeof m!="string")throw new Error(l);d[l]=m}return o(d,"mark","thousand"),o(d,"prefix","negative"),o(d,"prefix","negativeBefore"),d}function n(f,u,l){var m,d=[];for(m=0;m<e.length;m+=1)d.push(f[e[m]]);return d.push(l),u.apply("",d)}function r(f){if(!(this instanceof r))return new r(f);Mb(f)==="object"&&(f=i(f),this.to=function(u){return n(f,t,u)},this.from=function(u){return n(f,a,u)})}return r}()});function uT(N,U){var e=Object.keys(N);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(N);U&&(I=I.filter(function(F){return Object.getOwnPropertyDescriptor(N,F).enumerable})),e.push.apply(e,I)}return e}function u9(N,U,e){return U in N?Object.defineProperty(N,U,{value:e,enumerable:!0,configurable:!0,writable:!0}):N[U]=e,N}function f9(N,U,e){var I=by(N),F=I.format,s=I.step,o=e.value,h=e.classList,y=ku(function(){return F&&F.value?typeof F.value=="function"?{to:F.value}:lT(function(t){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?uT(Object(i),!0).forEach(function(n){u9(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):uT(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}({},F.value)):lT({decimals:s.value>=0?0:2})});return{tooltipsFormat:ku(function(){return Array.isArray(o.value)?o.value.map(function(t){return y.value}):y.value}),tooltipsMerge:function(t,a,i){var n=getComputedStyle(t).direction==="rtl",r=t.noUiSlider.options.direction==="rtl",f=t.noUiSlider.options.orientation==="vertical",u=t.noUiSlider.getTooltips(),l=t.noUiSlider.getOrigins();u.forEach(function(m,d){m&&l[d].appendChild(m)}),t.noUiSlider.on("update",function(m,d,b,g,_){var p=[[]],A=[[]],c=[[]],S=0;u[0]&&(p[0][0]=0,A[0][0]=_[0],c[0][0]=y.value.to(parseFloat(m[0])));for(var T=1;T<m.length;T++)(!u[T]||m[T]-m[T-1]>a)&&(p[++S]=[],c[S]=[],A[S]=[]),u[T]&&(p[S].push(T),c[S].push(y.value.to(parseFloat(m[T]))),A[S].push(_[T]));p.forEach(function(x,w){for(var v=x.length,C=0;C<v;C++){var M=x[C];if(C===v-1){var E=0;A[w].forEach(function(R){E+=1e3-R});var L=f?"bottom":"right",z=r?0:v-1,O=1e3-A[w][z];E=(n&&!f?100:0)+E/v-O,u[M].innerHTML=c[w].join(i),u[M].style.display="block",u[M].style[L]=E+"%",h.value.tooltipHidden.split(" ").forEach(function(R){u[M].classList.contains(R)&&u[M].classList.remove(R)})}else u[M].style.display="none",h.value.tooltipHidden.split(" ").forEach(function(R){u[M].classList.add(R)})}})})}}}function x0(N){return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},x0(N)}var c9=l9(LE(function(N,U){(function(e){function I(Ce){return F(Ce)&&typeof Ce.from=="function"}function F(Ce){return x0(Ce)==="object"&&typeof Ce.to=="function"}function s(Ce){Ce.parentElement.removeChild(Ce)}function o(Ce){return Ce!=null}function h(Ce){Ce.preventDefault()}function y(Ce){return Ce.filter(function(Ee){return!this[Ee]&&(this[Ee]=!0)},{})}function t(Ce,Ee){return Math.round(Ce/Ee)*Ee}function a(Ce,Ee){var Oe=Ce.getBoundingClientRect(),_e=Ce.ownerDocument,Re=_e.documentElement,Ve=b(_e);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(Ve.x=0),Ee?Oe.top+Ve.y-Re.clientTop:Oe.left+Ve.x-Re.clientLeft}function i(Ce){return typeof Ce=="number"&&!isNaN(Ce)&&isFinite(Ce)}function n(Ce,Ee,Oe){Oe>0&&(l(Ce,Ee),setTimeout(function(){m(Ce,Ee)},Oe))}function r(Ce){return Math.max(Math.min(Ce,100),0)}function f(Ce){return Array.isArray(Ce)?Ce:[Ce]}function u(Ce){var Ee=(Ce=String(Ce)).split(".");return Ee.length>1?Ee[1].length:0}function l(Ce,Ee){Ce.classList&&!/\s/.test(Ee)?Ce.classList.add(Ee):Ce.className+=" "+Ee}function m(Ce,Ee){Ce.classList&&!/\s/.test(Ee)?Ce.classList.remove(Ee):Ce.className=Ce.className.replace(new RegExp("(^|\\b)"+Ee.split(" ").join("|")+"(\\b|$)","gi")," ")}function d(Ce,Ee){return Ce.classList?Ce.classList.contains(Ee):new RegExp("\\b"+Ee+"\\b").test(Ce.className)}function b(Ce){var Ee=window.pageXOffset!==void 0,Oe=(Ce.compatMode||"")==="CSS1Compat";return{x:Ee?window.pageXOffset:Oe?Ce.documentElement.scrollLeft:Ce.body.scrollLeft,y:Ee?window.pageYOffset:Oe?Ce.documentElement.scrollTop:Ce.body.scrollTop}}function g(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function _(){var Ce=!1;try{var Ee=Object.defineProperty({},"passive",{get:function(){Ce=!0}});window.addEventListener("test",null,Ee)}catch{}return Ce}function p(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function A(Ce,Ee){return 100/(Ee-Ce)}function c(Ce,Ee,Oe){return 100*Ee/(Ce[Oe+1]-Ce[Oe])}function S(Ce,Ee){return c(Ce,Ce[0]<0?Ee+Math.abs(Ce[0]):Ee-Ce[0],0)}function T(Ce,Ee){return Ee*(Ce[1]-Ce[0])/100+Ce[0]}function x(Ce,Ee){for(var Oe=1;Ce>=Ee[Oe];)Oe+=1;return Oe}function w(Ce,Ee,Oe){if(Oe>=Ce.slice(-1)[0])return 100;var _e=x(Oe,Ce),Re=Ce[_e-1],Ve=Ce[_e],Je=Ee[_e-1],ze=Ee[_e];return Je+S([Re,Ve],Oe)/A(Je,ze)}function v(Ce,Ee,Oe){if(Oe>=100)return Ce.slice(-1)[0];var _e=x(Oe,Ee),Re=Ce[_e-1],Ve=Ce[_e],Je=Ee[_e-1];return T([Re,Ve],(Oe-Je)*A(Je,Ee[_e]))}function C(Ce,Ee,Oe,_e){if(_e===100)return _e;var Re=x(_e,Ce),Ve=Ce[Re-1],Je=Ce[Re];return Oe?_e-Ve>(Je-Ve)/2?Je:Ve:Ee[Re-1]?Ce[Re-1]+t(_e-Ce[Re-1],Ee[Re-1]):_e}var M,E;e.PipsMode=void 0,(E=e.PipsMode||(e.PipsMode={})).Range="range",E.Steps="steps",E.Positions="positions",E.Count="count",E.Values="values",e.PipsType=void 0,(M=e.PipsType||(e.PipsType={}))[M.None=-1]="None",M[M.NoValue=0]="NoValue",M[M.LargeValue=1]="LargeValue",M[M.SmallValue=2]="SmallValue";var L=function(){function Ce(Ee,Oe,_e){var Re;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[_e||!1],this.xNumSteps=[!1],this.snap=Oe;var Ve=[];for(Object.keys(Ee).forEach(function(Je){Ve.push([f(Ee[Je]),Je])}),Ve.sort(function(Je,ze){return Je[0][0]-ze[0][0]}),Re=0;Re<Ve.length;Re++)this.handleEntryPoint(Ve[Re][1],Ve[Re][0]);for(this.xNumSteps=this.xSteps.slice(0),Re=0;Re<this.xNumSteps.length;Re++)this.handleStepPoint(Re,this.xNumSteps[Re])}return Ce.prototype.getDistance=function(Ee){for(var Oe=[],_e=0;_e<this.xNumSteps.length-1;_e++)Oe[_e]=c(this.xVal,Ee,_e);return Oe},Ce.prototype.getAbsoluteDistance=function(Ee,Oe,_e){var Re,Ve=0;if(Ee<this.xPct[this.xPct.length-1])for(;Ee>this.xPct[Ve+1];)Ve++;else Ee===this.xPct[this.xPct.length-1]&&(Ve=this.xPct.length-2);_e||Ee!==this.xPct[Ve+1]||Ve++,Oe===null&&(Oe=[]);var Je=1,ze=Oe[Ve],De=0,je=0,dt=0,Et=0;for(Re=_e?(Ee-this.xPct[Ve])/(this.xPct[Ve+1]-this.xPct[Ve]):(this.xPct[Ve+1]-Ee)/(this.xPct[Ve+1]-this.xPct[Ve]);ze>0;)De=this.xPct[Ve+1+Et]-this.xPct[Ve+Et],Oe[Ve+Et]*Je+100-100*Re>100?(je=De*Re,Je=(ze-100*Re)/Oe[Ve+Et],Re=1):(je=Oe[Ve+Et]*De/100*Je,Je=0),_e?(dt-=je,this.xPct.length+Et>=1&&Et--):(dt+=je,this.xPct.length-Et>=1&&Et++),ze=Oe[Ve+Et]*Je;return Ee+dt},Ce.prototype.toStepping=function(Ee){return Ee=w(this.xVal,this.xPct,Ee)},Ce.prototype.fromStepping=function(Ee){return v(this.xVal,this.xPct,Ee)},Ce.prototype.getStep=function(Ee){return Ee=C(this.xPct,this.xSteps,this.snap,Ee)},Ce.prototype.getDefaultStep=function(Ee,Oe,_e){var Re=x(Ee,this.xPct);return(Ee===100||Oe&&Ee===this.xPct[Re-1])&&(Re=Math.max(Re-1,1)),(this.xVal[Re]-this.xVal[Re-1])/_e},Ce.prototype.getNearbySteps=function(Ee){var Oe=x(Ee,this.xPct);return{stepBefore:{startValue:this.xVal[Oe-2],step:this.xNumSteps[Oe-2],highestStep:this.xHighestCompleteStep[Oe-2]},thisStep:{startValue:this.xVal[Oe-1],step:this.xNumSteps[Oe-1],highestStep:this.xHighestCompleteStep[Oe-1]},stepAfter:{startValue:this.xVal[Oe],step:this.xNumSteps[Oe],highestStep:this.xHighestCompleteStep[Oe]}}},Ce.prototype.countStepDecimals=function(){var Ee=this.xNumSteps.map(u);return Math.max.apply(null,Ee)},Ce.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},Ce.prototype.convert=function(Ee){return this.getStep(this.toStepping(Ee))},Ce.prototype.handleEntryPoint=function(Ee,Oe){var _e;if(!i(_e=Ee==="min"?0:Ee==="max"?100:parseFloat(Ee))||!i(Oe[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(_e),this.xVal.push(Oe[0]);var Re=Number(Oe[1]);_e?this.xSteps.push(!isNaN(Re)&&Re):isNaN(Re)||(this.xSteps[0]=Re),this.xHighestCompleteStep.push(0)},Ce.prototype.handleStepPoint=function(Ee,Oe){if(Oe)if(this.xVal[Ee]!==this.xVal[Ee+1]){this.xSteps[Ee]=c([this.xVal[Ee],this.xVal[Ee+1]],Oe,0)/A(this.xPct[Ee],this.xPct[Ee+1]);var _e=(this.xVal[Ee+1]-this.xVal[Ee])/this.xNumSteps[Ee],Re=Math.ceil(Number(_e.toFixed(3))-1),Ve=this.xVal[Ee]+this.xNumSteps[Ee]*Re;this.xHighestCompleteStep[Ee]=Ve}else this.xSteps[Ee]=this.xHighestCompleteStep[Ee]=this.xVal[Ee]},Ce}(),z={to:function(Ce){return Ce===void 0?"":Ce.toFixed(2)},from:Number},O={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},R={tooltips:".__tooltips",aria:".__aria"};function D(Ce,Ee){if(!i(Ee))throw new Error("noUiSlider: 'step' is not numeric.");Ce.singleStep=Ee}function H(Ce,Ee){if(!i(Ee))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");Ce.keyboardPageMultiplier=Ee}function B(Ce,Ee){if(!i(Ee))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");Ce.keyboardMultiplier=Ee}function $(Ce,Ee){if(!i(Ee))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");Ce.keyboardDefaultStep=Ee}function W(Ce,Ee){if(x0(Ee)!=="object"||Array.isArray(Ee))throw new Error("noUiSlider: 'range' is not an object.");if(Ee.min===void 0||Ee.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");Ce.spectrum=new L(Ee,Ce.snap||!1,Ce.singleStep)}function re(Ce,Ee){if(Ee=f(Ee),!Array.isArray(Ee)||!Ee.length)throw new Error("noUiSlider: 'start' option is incorrect.");Ce.handles=Ee.length,Ce.start=Ee}function Q(Ce,Ee){if(typeof Ee!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");Ce.snap=Ee}function Z(Ce,Ee){if(typeof Ee!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");Ce.animate=Ee}function K(Ce,Ee){if(typeof Ee!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");Ce.animationDuration=Ee}function le(Ce,Ee){var Oe,_e=[!1];if(Ee==="lower"?Ee=[!0,!1]:Ee==="upper"&&(Ee=[!1,!0]),Ee===!0||Ee===!1){for(Oe=1;Oe<Ce.handles;Oe++)_e.push(Ee);_e.push(!1)}else{if(!Array.isArray(Ee)||!Ee.length||Ee.length!==Ce.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");_e=Ee}Ce.connect=_e}function fe(Ce,Ee){switch(Ee){case"horizontal":Ce.ort=0;break;case"vertical":Ce.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function ue(Ce,Ee){if(!i(Ee))throw new Error("noUiSlider: 'margin' option must be numeric.");Ee!==0&&(Ce.margin=Ce.spectrum.getDistance(Ee))}function V(Ce,Ee){if(!i(Ee))throw new Error("noUiSlider: 'limit' option must be numeric.");if(Ce.limit=Ce.spectrum.getDistance(Ee),!Ce.limit||Ce.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function j(Ce,Ee){var Oe;if(!i(Ee)&&!Array.isArray(Ee))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(Ee)&&Ee.length!==2&&!i(Ee[0])&&!i(Ee[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Ee!==0){for(Array.isArray(Ee)||(Ee=[Ee,Ee]),Ce.padding=[Ce.spectrum.getDistance(Ee[0]),Ce.spectrum.getDistance(Ee[1])],Oe=0;Oe<Ce.spectrum.xNumSteps.length-1;Oe++)if(Ce.padding[0][Oe]<0||Ce.padding[1][Oe]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var _e=Ee[0]+Ee[1],Re=Ce.spectrum.xVal[0];if(_e/(Ce.spectrum.xVal[Ce.spectrum.xVal.length-1]-Re)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function ee(Ce,Ee){switch(Ee){case"ltr":Ce.dir=0;break;case"rtl":Ce.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function q(Ce,Ee){if(typeof Ee!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var Oe=Ee.indexOf("tap")>=0,_e=Ee.indexOf("drag")>=0,Re=Ee.indexOf("fixed")>=0,Ve=Ee.indexOf("snap")>=0,Je=Ee.indexOf("hover")>=0,ze=Ee.indexOf("unconstrained")>=0,De=Ee.indexOf("drag-all")>=0;if(Re){if(Ce.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");ue(Ce,Ce.start[1]-Ce.start[0])}if(ze&&(Ce.margin||Ce.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");Ce.events={tap:Oe||Ve,drag:_e,dragAll:De,fixed:Re,snap:Ve,hover:Je,unconstrained:ze}}function X(Ce,Ee){if(Ee!==!1)if(Ee===!0||F(Ee)){Ce.tooltips=[];for(var Oe=0;Oe<Ce.handles;Oe++)Ce.tooltips.push(Ee)}else{if((Ee=f(Ee)).length!==Ce.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");Ee.forEach(function(_e){if(typeof _e!="boolean"&&!F(_e))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),Ce.tooltips=Ee}}function J(Ce,Ee){if(Ee.length!==Ce.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");Ce.handleAttributes=Ee}function ie(Ce,Ee){if(!F(Ee))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");Ce.ariaFormat=Ee}function ne(Ce,Ee){if(!I(Ee))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");Ce.format=Ee}function oe(Ce,Ee){if(typeof Ee!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");Ce.keyboardSupport=Ee}function se(Ce,Ee){Ce.documentElement=Ee}function me(Ce,Ee){if(typeof Ee!="string"&&Ee!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");Ce.cssPrefix=Ee}function ce(Ce,Ee){if(x0(Ee)!=="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof Ce.cssPrefix=="string"?(Ce.cssClasses={},Object.keys(Ee).forEach(function(Oe){Ce.cssClasses[Oe]=Ce.cssPrefix+Ee[Oe]})):Ce.cssClasses=Ee}function pe(Ce){var Ee={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:z,format:z},Oe={step:{r:!1,t:D},keyboardPageMultiplier:{r:!1,t:H},keyboardMultiplier:{r:!1,t:B},keyboardDefaultStep:{r:!1,t:$},start:{r:!0,t:re},connect:{r:!0,t:le},direction:{r:!0,t:ee},snap:{r:!1,t:Q},animate:{r:!1,t:Z},animationDuration:{r:!1,t:K},range:{r:!0,t:W},orientation:{r:!1,t:fe},margin:{r:!1,t:ue},limit:{r:!1,t:V},padding:{r:!1,t:j},behaviour:{r:!0,t:q},ariaFormat:{r:!1,t:ie},format:{r:!1,t:ne},tooltips:{r:!1,t:X},keyboardSupport:{r:!0,t:oe},documentElement:{r:!1,t:se},cssPrefix:{r:!0,t:me},cssClasses:{r:!0,t:ce},handleAttributes:{r:!1,t:J}},_e={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:O,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};Ce.format&&!Ce.ariaFormat&&(Ce.ariaFormat=Ce.format),Object.keys(Oe).forEach(function(De){if(o(Ce[De])||_e[De]!==void 0)Oe[De].t(Ee,o(Ce[De])?Ce[De]:_e[De]);else if(Oe[De].r)throw new Error("noUiSlider: '"+De+"' is required.")}),Ee.pips=Ce.pips;var Re=document.createElement("div"),Ve=Re.style.msTransform!==void 0,Je=Re.style.transform!==void 0;Ee.transformRule=Je?"transform":Ve?"msTransform":"webkitTransform";var ze=[["left","top"],["right","bottom"]];return Ee.style=ze[Ee.dir][Ee.ort],Ee}function xe(Ce,Ee,Oe){var _e,Re,Ve,Je,ze,De=g(),je=p()&&_(),dt=Ce,Et=Ee.spectrum,$t=[],wt=[],Ot=[],Vt=0,kt={},St=Ce.ownerDocument,ot=Ee.documentElement||St.documentElement,ht=St.body,Ke=St.dir==="rtl"||Ee.ort===1?0:100;function Pe(Ct,tr){var Lr=St.createElement("div");return tr&&l(Lr,tr),Ct.appendChild(Lr),Lr}function We(Ct,tr){var Lr=Pe(Ct,Ee.cssClasses.origin),Nr=Pe(Lr,Ee.cssClasses.handle);if(Pe(Nr,Ee.cssClasses.touchArea),Nr.setAttribute("data-handle",String(tr)),Ee.keyboardSupport&&(Nr.setAttribute("tabindex","0"),Nr.addEventListener("keydown",function(rn){return et(rn,tr)})),Ee.handleAttributes!==void 0){var Tn=Ee.handleAttributes[tr];Object.keys(Tn).forEach(function(rn){Nr.setAttribute(rn,Tn[rn])})}return Nr.setAttribute("role","slider"),Nr.setAttribute("aria-orientation",Ee.ort?"vertical":"horizontal"),tr===0?l(Nr,Ee.cssClasses.handleLower):tr===Ee.handles-1&&l(Nr,Ee.cssClasses.handleUpper),Lr}function Qe(Ct,tr){return!!tr&&Pe(Ct,Ee.cssClasses.connect)}function ut(Ct,tr){var Lr=Pe(tr,Ee.cssClasses.connects);Re=[],(Ve=[]).push(Qe(Lr,Ct[0]));for(var Nr=0;Nr<Ee.handles;Nr++)Re.push(We(tr,Nr)),Ot[Nr]=Nr,Ve.push(Qe(Lr,Ct[Nr+1]))}function It(Ct){return l(Ct,Ee.cssClasses.target),Ee.dir===0?l(Ct,Ee.cssClasses.ltr):l(Ct,Ee.cssClasses.rtl),Ee.ort===0?l(Ct,Ee.cssClasses.horizontal):l(Ct,Ee.cssClasses.vertical),l(Ct,getComputedStyle(Ct).direction==="rtl"?Ee.cssClasses.textDirectionRtl:Ee.cssClasses.textDirectionLtr),Pe(Ct,Ee.cssClasses.base)}function Tt(Ct,tr){return!(!Ee.tooltips||!Ee.tooltips[tr])&&Pe(Ct.firstChild,Ee.cssClasses.tooltip)}function Bt(){return dt.hasAttribute("disabled")}function rr(Ct){return Re[Ct].hasAttribute("disabled")}function Ut(){ze&&(Xt("update"+R.tooltips),ze.forEach(function(Ct){Ct&&s(Ct)}),ze=null)}function Qt(){Ut(),ze=Re.map(Tt),_t("update"+R.tooltips,function(Ct,tr,Lr){if(ze&&Ee.tooltips&&ze[tr]!==!1){var Nr=Ct[tr];Ee.tooltips[tr]!==!0&&(Nr=Ee.tooltips[tr].to(Lr[tr])),ze[tr].innerHTML=Nr}})}function ar(){Xt("update"+R.aria),_t("update"+R.aria,function(Ct,tr,Lr,Nr,Tn){Ot.forEach(function(rn){var kn=Re[rn],Cn=ur(wt,rn,0,!0,!0,!0),oa=ur(wt,rn,100,!0,!0,!0),ya=Tn[rn],Oa=String(Ee.ariaFormat.to(Lr[rn]));Cn=Et.fromStepping(Cn).toFixed(1),oa=Et.fromStepping(oa).toFixed(1),ya=Et.fromStepping(ya).toFixed(1),kn.children[0].setAttribute("aria-valuemin",Cn),kn.children[0].setAttribute("aria-valuemax",oa),kn.children[0].setAttribute("aria-valuenow",ya),kn.children[0].setAttribute("aria-valuetext",Oa)})})}function nr(Ct){if(Ct.mode===e.PipsMode.Range||Ct.mode===e.PipsMode.Steps)return Et.xVal;if(Ct.mode===e.PipsMode.Count){if(Ct.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var tr=Ct.values-1,Lr=100/tr,Nr=[];tr--;)Nr[tr]=tr*Lr;return Nr.push(100),cr(Nr,Ct.stepped)}return Ct.mode===e.PipsMode.Positions?cr(Ct.values,Ct.stepped):Ct.mode===e.PipsMode.Values?Ct.stepped?Ct.values.map(function(Tn){return Et.fromStepping(Et.getStep(Et.toStepping(Tn)))}):Ct.values:[]}function cr(Ct,tr){return Ct.map(function(Lr){return Et.fromStepping(tr?Et.getStep(Lr):Lr)})}function Kr(Ct){function tr(ya,Oa){return Number((ya+Oa).toFixed(7))}var Lr=nr(Ct),Nr={},Tn=Et.xVal[0],rn=Et.xVal[Et.xVal.length-1],kn=!1,Cn=!1,oa=0;return(Lr=y(Lr.slice().sort(function(ya,Oa){return ya-Oa})))[0]!==Tn&&(Lr.unshift(Tn),kn=!0),Lr[Lr.length-1]!==rn&&(Lr.push(rn),Cn=!0),Lr.forEach(function(ya,Oa){var Xa,za,Pa,Ar,nn,vn,Mn,Gn,la,na,Nn=ya,Kn=Lr[Oa+1],Va=Ct.mode===e.PipsMode.Steps;for(Va&&(Xa=Et.xNumSteps[Oa]),Xa||(Xa=Kn-Nn),Kn===void 0&&(Kn=Nn),Xa=Math.max(Xa,1e-7),za=Nn;za<=Kn;za=tr(za,Xa)){for(Gn=(nn=(Ar=Et.toStepping(za))-oa)/(Ct.density||1),na=nn/(la=Math.round(Gn)),Pa=1;Pa<=la;Pa+=1)Nr[(vn=oa+Pa*na).toFixed(5)]=[Et.fromStepping(vn),0];Mn=Lr.indexOf(za)>-1?e.PipsType.LargeValue:Va?e.PipsType.SmallValue:e.PipsType.NoValue,!Oa&&kn&&za!==Kn&&(Mn=0),za===Kn&&Cn||(Nr[Ar.toFixed(5)]=[za,Mn]),oa=Ar}}),Nr}function yn(Ct,tr,Lr){var Nr,Tn,rn=St.createElement("div"),kn=((Nr={})[e.PipsType.None]="",Nr[e.PipsType.NoValue]=Ee.cssClasses.valueNormal,Nr[e.PipsType.LargeValue]=Ee.cssClasses.valueLarge,Nr[e.PipsType.SmallValue]=Ee.cssClasses.valueSub,Nr),Cn=((Tn={})[e.PipsType.None]="",Tn[e.PipsType.NoValue]=Ee.cssClasses.markerNormal,Tn[e.PipsType.LargeValue]=Ee.cssClasses.markerLarge,Tn[e.PipsType.SmallValue]=Ee.cssClasses.markerSub,Tn),oa=[Ee.cssClasses.valueHorizontal,Ee.cssClasses.valueVertical],ya=[Ee.cssClasses.markerHorizontal,Ee.cssClasses.markerVertical];function Oa(za,Pa){var Ar=Pa===Ee.cssClasses.value,nn=Ar?kn:Cn;return Pa+" "+(Ar?oa:ya)[Ee.ort]+" "+nn[za]}function Xa(za,Pa,Ar){if((Ar=tr?tr(Pa,Ar):Ar)!==e.PipsType.None){var nn=Pe(rn,!1);nn.className=Oa(Ar,Ee.cssClasses.marker),nn.style[Ee.style]=za+"%",Ar>e.PipsType.NoValue&&((nn=Pe(rn,!1)).className=Oa(Ar,Ee.cssClasses.value),nn.setAttribute("data-value",String(Pa)),nn.style[Ee.style]=za+"%",nn.innerHTML=String(Lr.to(Pa)))}}return l(rn,Ee.cssClasses.pips),l(rn,Ee.ort===0?Ee.cssClasses.pipsHorizontal:Ee.cssClasses.pipsVertical),Object.keys(Ct).forEach(function(za){Xa(za,Ct[za][0],Ct[za][1])}),rn}function Qr(){Je&&(s(Je),Je=null)}function st(Ct){Qr();var tr=Kr(Ct),Lr=Ct.filter,Nr=Ct.format||{to:function(Tn){return String(Math.round(Tn))}};return Je=dt.appendChild(yn(tr,Lr,Nr))}function Gt(){var Ct=_e.getBoundingClientRect(),tr="offset"+["Width","Height"][Ee.ort];return Ee.ort===0?Ct.width||_e[tr]:Ct.height||_e[tr]}function Zt(Ct,tr,Lr,Nr){var Tn=function(kn){var Cn=Ht(kn,Nr.pageOffset,Nr.target||tr);return!!Cn&&!(Bt()&&!Nr.doNotReject)&&!(d(dt,Ee.cssClasses.tap)&&!Nr.doNotReject)&&!(Ct===De.start&&Cn.buttons!==void 0&&Cn.buttons>1)&&(!Nr.hover||!Cn.buttons)&&(je||Cn.preventDefault(),Cn.calcPoint=Cn.points[Ee.ort],void Lr(Cn,Nr))},rn=[];return Ct.split(" ").forEach(function(kn){tr.addEventListener(kn,Tn,!!je&&{passive:!0}),rn.push([kn,Tn])}),rn}function Ht(Ct,tr,Lr){var Nr=Ct.type.indexOf("touch")===0,Tn=Ct.type.indexOf("mouse")===0,rn=Ct.type.indexOf("pointer")===0,kn=0,Cn=0;if(Ct.type.indexOf("MSPointer")===0&&(rn=!0),Ct.type==="mousedown"&&!Ct.buttons&&!Ct.touches)return!1;if(Nr){var oa=function(Xa){var za=Xa.target;return za===Lr||Lr.contains(za)||Ct.composed&&Ct.composedPath().shift()===Lr};if(Ct.type==="touchstart"){var ya=Array.prototype.filter.call(Ct.touches,oa);if(ya.length>1)return!1;kn=ya[0].pageX,Cn=ya[0].pageY}else{var Oa=Array.prototype.find.call(Ct.changedTouches,oa);if(!Oa)return!1;kn=Oa.pageX,Cn=Oa.pageY}}return tr=tr||b(St),(Tn||rn)&&(kn=Ct.clientX+tr.x,Cn=Ct.clientY+tr.y),Ct.pageOffset=tr,Ct.points=[kn,Cn],Ct.cursor=Tn||rn,Ct}function _r(Ct){var tr=100*(Ct-a(_e,Ee.ort))/Gt();return tr=r(tr),Ee.dir?100-tr:tr}function it(Ct){var tr=100,Lr=!1;return Re.forEach(function(Nr,Tn){if(!rr(Tn)){var rn=wt[Tn],kn=Math.abs(rn-Ct);(kn<tr||kn<=tr&&Ct>rn||kn===100&&tr===100)&&(Lr=Tn,tr=kn)}}),Lr}function Te(Ct,tr){Ct.type==="mouseout"&&Ct.target.nodeName==="HTML"&&Ct.relatedTarget===null&&Ge(Ct,tr)}function ke(Ct,tr){if(navigator.appVersion.indexOf("MSIE 9")===-1&&Ct.buttons===0&&tr.buttonsProperty!==0)return Ge(Ct,tr);var Lr=(Ee.dir?-1:1)*(Ct.calcPoint-tr.startCalcPoint);Mr(Lr>0,100*Lr/tr.baseSize,tr.locations,tr.handleNumbers,tr.connect)}function Ge(Ct,tr){tr.handle&&(m(tr.handle,Ee.cssClasses.active),Vt-=1),tr.listeners.forEach(function(Lr){ot.removeEventListener(Lr[0],Lr[1])}),Vt===0&&(m(dt,Ee.cssClasses.drag),$r(),Ct.cursor&&(ht.style.cursor="",ht.removeEventListener("selectstart",h))),tr.handleNumbers.forEach(function(Lr){zt("change",Lr),zt("set",Lr),zt("end",Lr)})}function Ye(Ct,tr){if(!tr.handleNumbers.some(rr)){var Lr;tr.handleNumbers.length===1&&(Lr=Re[tr.handleNumbers[0]].children[0],Vt+=1,l(Lr,Ee.cssClasses.active)),Ct.stopPropagation();var Nr=[],Tn=Zt(De.move,ot,ke,{target:Ct.target,handle:Lr,connect:tr.connect,listeners:Nr,startCalcPoint:Ct.calcPoint,baseSize:Gt(),pageOffset:Ct.pageOffset,handleNumbers:tr.handleNumbers,buttonsProperty:Ct.buttons,locations:wt.slice()}),rn=Zt(De.end,ot,Ge,{target:Ct.target,handle:Lr,listeners:Nr,doNotReject:!0,handleNumbers:tr.handleNumbers}),kn=Zt("mouseout",ot,Te,{target:Ct.target,handle:Lr,listeners:Nr,doNotReject:!0,handleNumbers:tr.handleNumbers});Nr.push.apply(Nr,Tn.concat(rn,kn)),Ct.cursor&&(ht.style.cursor=getComputedStyle(Ct.target).cursor,Re.length>1&&l(dt,Ee.cssClasses.drag),ht.addEventListener("selectstart",h,!1)),tr.handleNumbers.forEach(function(Cn){zt("start",Cn)})}}function qe(Ct){Ct.stopPropagation();var tr=_r(Ct.calcPoint),Lr=it(tr);Lr!==!1&&(Ee.events.snap||n(dt,Ee.cssClasses.tap,Ee.animationDuration),hn(Lr,tr,!0,!0),$r(),zt("slide",Lr,!0),zt("update",Lr,!0),Ee.events.snap?Ye(Ct,{handleNumbers:[Lr]}):(zt("change",Lr,!0),zt("set",Lr,!0)))}function at(Ct){var tr=_r(Ct.calcPoint),Lr=Et.getStep(tr),Nr=Et.fromStepping(Lr);Object.keys(kt).forEach(function(Tn){Tn.split(".")[0]==="hover"&&kt[Tn].forEach(function(rn){rn.call(Rr,Nr)})})}function et(Ct,tr){if(Bt()||rr(tr))return!1;var Lr=["Left","Right"],Nr=["Down","Up"],Tn=["PageDown","PageUp"],rn=["Home","End"];Ee.dir&&!Ee.ort?Lr.reverse():Ee.ort&&!Ee.dir&&(Nr.reverse(),Tn.reverse());var kn,Cn=Ct.key.replace("Arrow",""),oa=Cn===Tn[0],ya=Cn===Tn[1],Oa=Cn===Nr[0]||Cn===Lr[0]||oa,Xa=Cn===Nr[1]||Cn===Lr[1]||ya,za=Cn===rn[0],Pa=Cn===rn[1];if(!(Oa||Xa||za||Pa))return!0;if(Ct.preventDefault(),Xa||Oa){var Ar=Oa?0:1,nn=Jt(tr)[Ar];if(nn===null)return!1;nn===!1&&(nn=Et.getDefaultStep(wt[tr],Oa,Ee.keyboardDefaultStep)),nn*=ya||oa?Ee.keyboardPageMultiplier:Ee.keyboardMultiplier,nn=Math.max(nn,1e-7),nn*=Oa?-1:1,kn=$t[tr]+nn}else kn=Pa?Ee.spectrum.xVal[Ee.spectrum.xVal.length-1]:Ee.spectrum.xVal[0];return hn(tr,Et.toStepping(kn),!0,!0),zt("slide",tr),zt("update",tr),zt("change",tr),zt("set",tr),!1}function pt(Ct){Ct.fixed||Re.forEach(function(tr,Lr){Zt(De.start,tr.children[0],Ye,{handleNumbers:[Lr]})}),Ct.tap&&Zt(De.start,_e,qe,{}),Ct.hover&&Zt(De.move,_e,at,{hover:!0}),Ct.drag&&Ve.forEach(function(tr,Lr){if(tr!==!1&&Lr!==0&&Lr!==Ve.length-1){var Nr=Re[Lr-1],Tn=Re[Lr],rn=[tr],kn=[Nr,Tn],Cn=[Lr-1,Lr];l(tr,Ee.cssClasses.draggable),Ct.fixed&&(rn.push(Nr.children[0]),rn.push(Tn.children[0])),Ct.dragAll&&(kn=Re,Cn=Ot),rn.forEach(function(oa){Zt(De.start,oa,Ye,{handles:kn,handleNumbers:Cn,connect:tr})})}})}function _t(Ct,tr){kt[Ct]=kt[Ct]||[],kt[Ct].push(tr),Ct.split(".")[0]==="update"&&Re.forEach(function(Lr,Nr){zt("update",Nr)})}function Pt(Ct){return Ct===R.aria||Ct===R.tooltips}function Xt(Ct){var tr=Ct&&Ct.split(".")[0],Lr=tr?Ct.substring(tr.length):Ct;Object.keys(kt).forEach(function(Nr){var Tn=Nr.split(".")[0],rn=Nr.substring(Tn.length);tr&&tr!==Tn||Lr&&Lr!==rn||Pt(rn)&&Lr!==rn||delete kt[Nr]})}function zt(Ct,tr,Lr){Object.keys(kt).forEach(function(Nr){var Tn=Nr.split(".")[0];Ct===Tn&&kt[Nr].forEach(function(rn){rn.call(Rr,$t.map(Ee.format.to),tr,$t.slice(),Lr||!1,wt.slice(),Rr)})})}function ur(Ct,tr,Lr,Nr,Tn,rn){var kn;return Re.length>1&&!Ee.events.unconstrained&&(Nr&&tr>0&&(kn=Et.getAbsoluteDistance(Ct[tr-1],Ee.margin,!1),Lr=Math.max(Lr,kn)),Tn&&tr<Re.length-1&&(kn=Et.getAbsoluteDistance(Ct[tr+1],Ee.margin,!0),Lr=Math.min(Lr,kn))),Re.length>1&&Ee.limit&&(Nr&&tr>0&&(kn=Et.getAbsoluteDistance(Ct[tr-1],Ee.limit,!1),Lr=Math.min(Lr,kn)),Tn&&tr<Re.length-1&&(kn=Et.getAbsoluteDistance(Ct[tr+1],Ee.limit,!0),Lr=Math.max(Lr,kn))),Ee.padding&&(tr===0&&(kn=Et.getAbsoluteDistance(0,Ee.padding[0],!1),Lr=Math.max(Lr,kn)),tr===Re.length-1&&(kn=Et.getAbsoluteDistance(100,Ee.padding[1],!0),Lr=Math.min(Lr,kn))),!((Lr=r(Lr=Et.getStep(Lr)))===Ct[tr]&&!rn)&&Lr}function gr(Ct,tr){var Lr=Ee.ort;return(Lr?tr:Ct)+", "+(Lr?Ct:tr)}function Mr(Ct,tr,Lr,Nr,Tn){var rn=Lr.slice(),kn=Nr[0],Cn=[!Ct,Ct],oa=[Ct,!Ct];Nr=Nr.slice(),Ct&&Nr.reverse(),Nr.length>1?Nr.forEach(function(Oa,Xa){var za=ur(rn,Oa,rn[Oa]+tr,Cn[Xa],oa[Xa],!1);za===!1?tr=0:(tr=za-rn[Oa],rn[Oa]=za)}):Cn=oa=[!0];var ya=!1;Nr.forEach(function(Oa,Xa){ya=hn(Oa,Lr[Oa]+tr,Cn[Xa],oa[Xa])||ya}),ya&&(Nr.forEach(function(Oa){zt("update",Oa),zt("slide",Oa)}),Tn!=null&&zt("drag",kn))}function un(Ct,tr){return Ee.dir?100-Ct-tr:Ct}function zr(Ct,tr){wt[Ct]=tr,$t[Ct]=Et.fromStepping(tr);var Lr="translate("+gr(un(tr,0)-Ke+"%","0")+")";Re[Ct].style[Ee.transformRule]=Lr,Tr(Ct),Tr(Ct+1)}function $r(){Ot.forEach(function(Ct){var tr=wt[Ct]>50?-1:1,Lr=3+(Re.length+tr*Ct);Re[Ct].style.zIndex=String(Lr)})}function hn(Ct,tr,Lr,Nr,Tn){return Tn||(tr=ur(wt,Ct,tr,Lr,Nr,!1)),tr!==!1&&(zr(Ct,tr),!0)}function Tr(Ct){if(Ve[Ct]){var tr=0,Lr=100;Ct!==0&&(tr=wt[Ct-1]),Ct!==Ve.length-1&&(Lr=wt[Ct]);var Nr=Lr-tr,Tn="translate("+gr(un(tr,Nr)+"%","0")+")",rn="scale("+gr(Nr/100,"1")+")";Ve[Ct].style[Ee.transformRule]=Tn+" "+rn}}function wr(Ct,tr){return Ct===null||Ct===!1||Ct===void 0?wt[tr]:(typeof Ct=="number"&&(Ct=String(Ct)),(Ct=Ee.format.from(Ct))!==!1&&(Ct=Et.toStepping(Ct)),Ct===!1||isNaN(Ct)?wt[tr]:Ct)}function Ur(Ct,tr,Lr){var Nr=f(Ct),Tn=wt[0]===void 0;tr=tr===void 0||tr,Ee.animate&&!Tn&&n(dt,Ee.cssClasses.tap,Ee.animationDuration),Ot.forEach(function(Cn){hn(Cn,wr(Nr[Cn],Cn),!0,!1,Lr)});var rn=Ot.length===1?0:1;if(Tn&&Et.hasNoSize()&&(Lr=!0,wt[0]=0,Ot.length>1)){var kn=100/(Ot.length-1);Ot.forEach(function(Cn){wt[Cn]=Cn*kn})}for(;rn<Ot.length;++rn)Ot.forEach(function(Cn){hn(Cn,wt[Cn],!0,!0,Lr)});$r(),Ot.forEach(function(Cn){zt("update",Cn),Nr[Cn]!==null&&tr&&zt("set",Cn)})}function Br(Ct){Ur(Ee.start,Ct)}function Cr(Ct,tr,Lr,Nr){if(!((Ct=Number(Ct))>=0&&Ct<Ot.length))throw new Error("noUiSlider: invalid handle number, got: "+Ct);hn(Ct,wr(tr,Ct),!0,!0,Nr),zt("update",Ct),Lr&&zt("set",Ct)}function nt(Ct){if(Ct===void 0&&(Ct=!1),Ct)return $t.length===1?$t[0]:$t.slice(0);var tr=$t.map(Ee.format.to);return tr.length===1?tr[0]:tr}function Rt(){for(Xt(R.aria),Xt(R.tooltips),Object.keys(Ee.cssClasses).forEach(function(Ct){m(dt,Ee.cssClasses[Ct])});dt.firstChild;)dt.removeChild(dt.firstChild);delete dt.noUiSlider}function Jt(Ct){var tr=wt[Ct],Lr=Et.getNearbySteps(tr),Nr=$t[Ct],Tn=Lr.thisStep.step,rn=null;if(Ee.snap)return[Nr-Lr.stepBefore.startValue||null,Lr.stepAfter.startValue-Nr||null];Tn!==!1&&Nr+Tn>Lr.stepAfter.startValue&&(Tn=Lr.stepAfter.startValue-Nr),rn=Nr>Lr.thisStep.startValue?Lr.thisStep.step:Lr.stepBefore.step!==!1&&Nr-Lr.stepBefore.highestStep,tr===100?Tn=null:tr===0&&(rn=null);var kn=Et.countStepDecimals();return Tn!==null&&Tn!==!1&&(Tn=Number(Tn.toFixed(kn))),rn!==null&&rn!==!1&&(rn=Number(rn.toFixed(kn))),[rn,Tn]}function hr(){return Ot.map(Jt)}function Dr(Ct,tr){var Lr=nt(),Nr=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];Nr.forEach(function(rn){Ct[rn]!==void 0&&(Oe[rn]=Ct[rn])});var Tn=pe(Oe);Nr.forEach(function(rn){Ct[rn]!==void 0&&(Ee[rn]=Tn[rn])}),Et=Tn.spectrum,Ee.margin=Tn.margin,Ee.limit=Tn.limit,Ee.padding=Tn.padding,Ee.pips?st(Ee.pips):Qr(),Ee.tooltips?Qt():Ut(),wt=[],Ur(o(Ct.start)?Ct.start:Lr,tr)}function Gr(){_e=It(dt),ut(Ee.connect,_e),pt(Ee.events),Ur(Ee.start),Ee.pips&&st(Ee.pips),Ee.tooltips&&Qt(),ar()}Gr();var Rr={destroy:Rt,steps:hr,on:_t,off:Xt,get:nt,set:Ur,setHandle:Cr,reset:Br,__moveHandles:function(Ct,tr,Lr){Mr(Ct,tr,wt,Lr)},options:Oe,updateOptions:Dr,target:dt,removePips:Qr,removeTooltips:Ut,getPositions:function(){return wt.slice()},getTooltips:function(){return ze},getOrigins:function(){return Re},pips:st};return Rr}function Se(Ce,Ee){if(!Ce||!Ce.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+Ce);if(Ce.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var Oe=xe(Ce,pe(Ee),Ee);return Ce.noUiSlider=Oe,Oe}var Ae={__spectrum:L,cssClasses:O,create:Se};e.create=Se,e.cssClasses=O,e.default=Ae,Object.defineProperty(e,"__esModule",{value:!0})})(U)}));function fT(N,U){var e=U.slice().sort();return N.length===U.length&&N.slice().sort().every(function(I,F){return I===e[F]})}var cT={name:"Slider",emits:["input","update:modelValue","update","change"],props:{value:{validator:function(N){return U=>typeof U=="number"||U instanceof Array||U==null||U===!1},required:!1},modelValue:{validator:function(N){return U=>typeof U=="number"||U instanceof Array||U==null||U===!1},required:!1},id:{type:[String,Number],required:!1},disabled:{type:Boolean,required:!1,default:!1},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},orientation:{type:String,required:!1,default:"horizontal"},direction:{type:String,required:!1,default:"ltr"},tooltips:{type:Boolean,required:!1,default:!0},options:{type:Object,required:!1,default:()=>({})},merge:{type:Number,required:!1,default:-1},format:{type:[Object,Function,Boolean],required:!1,default:null},classes:{type:Object,required:!1,default:()=>({})},showTooltip:{type:String,required:!1,default:"always"},tooltipPosition:{type:String,required:!1,default:null},lazy:{type:Boolean,required:!1,default:!0}},setup(N,U){const e=function(o,h,y){var t=by(o),a=t.value,i=t.modelValue,n=h.expose!==void 0?i:a,r=Fh(n.value);if(G1(n.value))throw new Error("Slider v-model must be a Number or Array");if(Array.isArray(n.value)&&n.value.length==0)throw new Error("Slider v-model must not be an empty array");return{value:n,initialValue:r}}(N,U),I=function(o,h,y){var t=by(o),a=t.classes,i=t.showTooltip,n=t.tooltipPosition,r=t.orientation,f=ku(function(){return sT({target:"slider-target",focused:"slider-focused",tooltipFocus:"slider-tooltip-focus",tooltipDrag:"slider-tooltip-drag",ltr:"slider-ltr",rtl:"slider-rtl",horizontal:"slider-horizontal",vertical:"slider-vertical",textDirectionRtl:"slider-txt-dir-rtl",textDirectionLtr:"slider-txt-dir-ltr",base:"slider-base",connects:"slider-connects",connect:"slider-connect",origin:"slider-origin",handle:"slider-handle",handleLower:"slider-handle-lower",handleUpper:"slider-handle-upper",touchArea:"slider-touch-area",tooltip:"slider-tooltip",tooltipTop:"slider-tooltip-top",tooltipBottom:"slider-tooltip-bottom",tooltipLeft:"slider-tooltip-left",tooltipRight:"slider-tooltip-right",tooltipHidden:"slider-tooltip-hidden",active:"slider-active",draggable:"slider-draggable",tap:"slider-state-tap",drag:"slider-state-drag",pips:"slider-pips",pipsHorizontal:"slider-pips-horizontal",pipsVertical:"slider-pips-vertical",marker:"slider-marker",markerHorizontal:"slider-marker-horizontal",markerVertical:"slider-marker-vertical",markerNormal:"slider-marker-normal",markerLarge:"slider-marker-large",markerSub:"slider-marker-sub",value:"slider-value",valueHorizontal:"slider-value-horizontal",valueVertical:"slider-value-vertical",valueNormal:"slider-value-normal",valueLarge:"slider-value-large",valueSub:"slider-value-sub"},a.value)});return{classList:ku(function(){var u=sT({},f.value);return Object.keys(u).forEach(function(l){u[l]=Array.isArray(u[l])?u[l].filter(function(m){return m!==null}).join(" "):u[l]}),i.value!=="always"&&(u.target+=" ".concat(i.value==="drag"?u.tooltipDrag:u.tooltipFocus)),r.value==="horizontal"&&(u.tooltip+=n.value==="bottom"?" ".concat(u.tooltipBottom):" ".concat(u.tooltipTop)),r.value==="vertical"&&(u.tooltip+=n.value==="right"?" ".concat(u.tooltipRight):" ".concat(u.tooltipLeft)),u})}}(N),F=f9(N,0,{value:e.value,classList:I.classList}),s=function(o,h,y){var t=by(o),a=t.orientation,i=t.direction,n=t.tooltips,r=t.step,f=t.min,u=t.max,l=t.merge,m=t.id,d=t.disabled,b=t.options,g=t.classes,_=t.format,p=t.lazy,A=y.value,c=y.initialValue,S=y.tooltipsFormat,T=y.tooltipsMerge,x=y.classList,w=Fh(null),v=Fh(null),C=Fh(!1),M=ku(function(){var $={cssPrefix:"",cssClasses:x.value,orientation:a.value,direction:i.value,tooltips:!!n.value&&S.value,connect:"lower",start:G1(A.value)?f.value:A.value,range:{min:f.value,max:u.value}};return r.value>0&&($.step=r.value),Array.isArray(A.value)&&($.connect=!0),$}),E=ku(function(){var $={id:m&&m.value?m.value:void 0};return d.value&&($.disabled=!0),$}),L=ku(function(){return Array.isArray(A.value)}),z=function(){var $=v.value.get();return Array.isArray($)?$.map(function(W){return parseFloat(W)}):parseFloat($)},O=function($){var W=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];v.value.set($,W)},R=function($){h.emit("input",$),h.emit("update:modelValue",$),h.emit("update",$)},D=function(){v.value=c9.create(w.value,Object.assign({},M.value,b.value)),n.value&&L.value&&l.value>=0&&T(w.value,l.value," - "),v.value.on("set",function($){var W=z();h.emit("change",W),p.value&&R(W)}),v.value.on("update",function($){if(C.value){var W=z();L.value&&fT(A.value,W)||!L.value&&A.value==W?h.emit("update",W):p.value||R(W)}}),w.value.querySelectorAll("[data-handle]").forEach(function($){$.onblur=function(){x.value.focused.split(" ").forEach(function(W){w.value.classList.remove(W)})},$.onfocus=function(){x.value.focused.split(" ").forEach(function(W){w.value.classList.add(W)})}}),C.value=!0},H=function(){v.value.off(),v.value.destroy(),v.value=null},B=function($,W){C.value=!1,H(),D()};return vm(D),F2(H),Gs(L,B,{immediate:!1}),Gs(f,B,{immediate:!1}),Gs(u,B,{immediate:!1}),Gs(r,B,{immediate:!1}),Gs(a,B,{immediate:!1}),Gs(i,B,{immediate:!1}),Gs(n,B,{immediate:!1}),Gs(l,B,{immediate:!1}),Gs(_,B,{immediate:!1,deep:!0}),Gs(b,B,{immediate:!1,deep:!0}),Gs(g,B,{immediate:!1,deep:!0}),Gs(A,function($){G1($)?O(f.value,!1):(L.value&&!fT($,z())||!L.value&&$!=z())&&O($,!1)},{deep:!0}),{slider:w,slider$:v,isRange:L,sliderProps:E,init:D,destroy:H,refresh:B,update:O,reset:function(){R(c.value)}}}(N,U,{value:e.value,initialValue:e.initialValue,tooltipsFormat:F.tooltipsFormat,tooltipsMerge:F.tooltipsMerge,classList:I.classList});return Ri(Ri(Ri({},I),F),s)}};cT.render=function(N,U,e,I,F,s){return _i(),ro("div",xE(N.sliderProps,{ref:"slider"}),null,16)},cT.__file="src/Slider.vue";var PE={},Yg=function(N){return N&&N.Math==Math&&N},fi=Yg(typeof globalThis=="object"&&globalThis)||Yg(typeof window=="object"&&window)||Yg(typeof self=="object"&&self)||Yg(typeof No=="object"&&No)||function(){return this}()||Function("return this")(),Gh={},Ki=function(N){try{return!!N()}catch{return!0}},h9=Ki,el=!h9(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),v9=Ki,U0=!v9(function(){var N=function(){}.bind();return typeof N!="function"||N.hasOwnProperty("prototype")}),p9=U0,Xg=Function.prototype.call,co=p9?Xg.bind(Xg):function(){return Xg.apply(Xg,arguments)},V0={},IE={}.propertyIsEnumerable,RE=Object.getOwnPropertyDescriptor,d9=RE&&!IE.call({1:2},1);V0.f=d9?function(U){var e=RE(this,U);return!!e&&e.enumerable}:IE;var H0=function(N,U){return{enumerable:!(N&1),configurable:!(N&2),writable:!(N&4),value:U}},DE=U0,FE=Function.prototype,g9=FE.bind,Eb=FE.call,y9=DE&&g9.bind(Eb,Eb),ji=DE?function(N){return N&&y9(N)}:function(N){return N&&function(){return Eb.apply(N,arguments)}},OE=ji,m9=OE({}.toString),x9=OE("".slice),jh=function(N){return x9(m9(N),8,-1)},b9=fi,_9=ji,w9=Ki,T9=jh,j1=b9.Object,A9=_9("".split),G0=w9(function(){return!j1("z").propertyIsEnumerable(0)})?function(N){return T9(N)=="String"?A9(N,""):j1(N)}:j1,S9=fi,M9=S9.TypeError,$h=function(N){if(N==null)throw M9("Can't call method on "+N);return N},E9=G0,k9=$h,Mf=function(N){return E9(k9(N))},ss=function(N){return typeof N=="function"},C9=ss,tl=function(N){return typeof N=="object"?N!==null:C9(N)},$1=fi,L9=ss,P9=function(N){return L9(N)?N:void 0},rl=function(N,U){return arguments.length<2?P9($1[N]):$1[N]&&$1[N][U]},I9=ji,Wh=I9({}.isPrototypeOf),R9=rl,$v=R9("navigator","userAgent")||"",zE=fi,W1=$v,hT=zE.process,vT=zE.Deno,pT=hT&&hT.versions||vT&&vT.version,dT=pT&&pT.v8,Qf,Gy;dT&&(Qf=dT.split("."),Gy=Qf[0]>0&&Qf[0]<4?1:+(Qf[0]+Qf[1]));!Gy&&W1&&(Qf=W1.match(/Edge\/(\d+)/),(!Qf||Qf[1]>=74)&&(Qf=W1.match(/Chrome\/(\d+)/),Qf&&(Gy=+Qf[1])));var Wv=Gy,gT=Wv,D9=Ki,V2=!!Object.getOwnPropertySymbols&&!D9(function(){var N=Symbol();return!String(N)||!(Object(N)instanceof Symbol)||!Symbol.sham&&gT&&gT<41}),F9=V2,NE=F9&&!Symbol.sham&&typeof Symbol.iterator=="symbol",O9=fi,z9=rl,N9=ss,B9=Wh,U9=NE,V9=O9.Object,dm=U9?function(N){return typeof N=="symbol"}:function(N){var U=z9("Symbol");return N9(U)&&B9(U.prototype,V9(N))},H9=fi,G9=H9.String,gm=function(N){try{return G9(N)}catch{return"Object"}},j9=fi,$9=ss,W9=gm,Y9=j9.TypeError,Yo=function(N){if($9(N))return N;throw Y9(W9(N)+" is not a function")},X9=Yo,vd=function(N,U){var e=N[U];return e==null?void 0:X9(e)},Z9=fi,Y1=co,X1=ss,Z1=tl,K9=Z9.TypeError,J9=function(N,U){var e,I;if(U==="string"&&X1(e=N.toString)&&!Z1(I=Y1(e,N))||X1(e=N.valueOf)&&!Z1(I=Y1(e,N))||U!=="string"&&X1(e=N.toString)&&!Z1(I=Y1(e,N)))return I;throw K9("Can't convert object to primitive value")},j0={exports:{}},yT=fi,Q9=Object.defineProperty,H2=function(N,U){try{Q9(yT,N,{value:U,configurable:!0,writable:!0})}catch{yT[N]=U}return U},q9=fi,e7=H2,mT="__core-js_shared__",t7=q9[mT]||e7(mT,{}),G2=t7,xT=G2;(j0.exports=function(N,U){return xT[N]||(xT[N]=U!==void 0?U:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var r7=fi,n7=$h,a7=r7.Object,qu=function(N){return a7(n7(N))},i7=ji,o7=qu,s7=i7({}.hasOwnProperty),Rl=Object.hasOwn||function(U,e){return s7(o7(U),e)},l7=ji,u7=0,f7=Math.random(),c7=l7(1 .toString),ym=function(N){return"Symbol("+(N===void 0?"":N)+")_"+c7(++u7+f7,36)},h7=fi,v7=j0.exports,bT=Rl,p7=ym,_T=V2,BE=NE,Sp=v7("wks"),Dv=h7.Symbol,wT=Dv&&Dv.for,d7=BE?Dv:Dv&&Dv.withoutSetter||p7,es=function(N){if(!bT(Sp,N)||!(_T||typeof Sp[N]=="string")){var U="Symbol."+N;_T&&bT(Dv,N)?Sp[N]=Dv[N]:BE&&wT?Sp[N]=wT(U):Sp[N]=d7(U)}return Sp[N]},g7=fi,y7=co,TT=tl,AT=dm,m7=vd,x7=J9,b7=es,_7=g7.TypeError,w7=b7("toPrimitive"),j2=function(N,U){if(!TT(N)||AT(N))return N;var e=m7(N,w7),I;if(e){if(U===void 0&&(U="default"),I=y7(e,N,U),!TT(I)||AT(I))return I;throw _7("Can't convert object to primitive value")}return U===void 0&&(U="number"),x7(N,U)},T7=j2,A7=dm,mm=function(N){var U=T7(N,"string");return A7(U)?U:U+""},S7=fi,ST=tl,kb=S7.document,M7=ST(kb)&&ST(kb.createElement),xm=function(N){return M7?kb.createElement(N):{}},E7=el,k7=Ki,C7=xm,UE=!E7&&!k7(function(){return Object.defineProperty(C7("div"),"a",{get:function(){return 7}}).a!=7}),L7=el,P7=co,I7=V0,R7=H0,D7=Mf,F7=mm,O7=Rl,z7=UE,MT=Object.getOwnPropertyDescriptor;Gh.f=L7?MT:function(U,e){if(U=D7(U),e=F7(e),z7)try{return MT(U,e)}catch{}if(O7(U,e))return R7(!P7(I7.f,U,e),U[e])};var Dl={},N7=el,B7=Ki,VE=N7&&B7(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),HE=fi,U7=tl,V7=HE.String,H7=HE.TypeError,wi=function(N){if(U7(N))return N;throw H7(V7(N)+" is not an object")},G7=fi,j7=el,$7=UE,W7=VE,Zg=wi,ET=mm,Y7=G7.TypeError,K1=Object.defineProperty,X7=Object.getOwnPropertyDescriptor,J1="enumerable",Q1="configurable",q1="writable";Dl.f=j7?W7?function(U,e,I){if(Zg(U),e=ET(e),Zg(I),typeof U=="function"&&e==="prototype"&&"value"in I&&q1 in I&&!I[q1]){var F=X7(U,e);F&&F[q1]&&(U[e]=I.value,I={configurable:Q1 in I?I[Q1]:F[Q1],enumerable:J1 in I?I[J1]:F[J1],writable:!1})}return K1(U,e,I)}:K1:function(U,e,I){if(Zg(U),e=ET(e),Zg(I),$7)try{return K1(U,e,I)}catch{}if("get"in I||"set"in I)throw Y7("Accessors not supported");return"value"in I&&(U[e]=I.value),U};var Z7=el,K7=Dl,J7=H0,Yh=Z7?function(N,U,e){return K7.f(N,U,J7(1,e))}:function(N,U,e){return N[U]=e,N},Pu={exports:{}},Q7=ji,q7=ss,Cb=G2,eF=Q7(Function.toString);q7(Cb.inspectSource)||(Cb.inspectSource=function(N){return eF(N)});var bm=Cb.inspectSource,tF=fi,rF=ss,nF=bm,kT=tF.WeakMap,aF=rF(kT)&&/native code/.test(nF(kT)),iF=j0.exports,oF=ym,CT=iF("keys"),_m=function(N){return CT[N]||(CT[N]=oF(N))},$0={},sF=aF,GE=fi,ex=ji,lF=tl,uF=Yh,tx=Rl,rx=G2,fF=_m,cF=$0,LT="Object already initialized",Lb=GE.TypeError,hF=GE.WeakMap,jy,D0,$y,vF=function(N){return $y(N)?D0(N):jy(N,{})},pF=function(N){return function(U){var e;if(!lF(U)||(e=D0(U)).type!==N)throw Lb("Incompatible receiver, "+N+" required");return e}};if(sF||rx.state){var dv=rx.state||(rx.state=new hF),dF=ex(dv.get),PT=ex(dv.has),gF=ex(dv.set);jy=function(N,U){if(PT(dv,N))throw new Lb(LT);return U.facade=N,gF(dv,N,U),U},D0=function(N){return dF(dv,N)||{}},$y=function(N){return PT(dv,N)}}else{var Mp=fF("state");cF[Mp]=!0,jy=function(N,U){if(tx(N,Mp))throw new Lb(LT);return U.facade=N,uF(N,Mp,U),U},D0=function(N){return tx(N,Mp)?N[Mp]:{}},$y=function(N){return tx(N,Mp)}}var Xh={set:jy,get:D0,has:$y,enforce:vF,getterFor:pF},Pb=el,yF=Rl,jE=Function.prototype,mF=Pb&&Object.getOwnPropertyDescriptor,$2=yF(jE,"name"),xF=$2&&function(){}.name==="something",bF=$2&&(!Pb||Pb&&mF(jE,"name").configurable),W0={EXISTS:$2,PROPER:xF,CONFIGURABLE:bF},_F=fi,IT=ss,wF=Rl,RT=Yh,TF=H2,AF=bm,$E=Xh,SF=W0.CONFIGURABLE,MF=$E.get,EF=$E.enforce,kF=String(String).split("String");(Pu.exports=function(N,U,e,I){var F=I?!!I.unsafe:!1,s=I?!!I.enumerable:!1,o=I?!!I.noTargetGet:!1,h=I&&I.name!==void 0?I.name:U,y;if(IT(e)&&(String(h).slice(0,7)==="Symbol("&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!wF(e,"name")||SF&&e.name!==h)&&RT(e,"name",h),y=EF(e),y.source||(y.source=kF.join(typeof h=="string"?h:""))),N===_F){s?N[U]=e:TF(U,e);return}else F?!o&&N[U]&&(s=!0):delete N[U];s?N[U]=e:RT(N,U,e)})(Function.prototype,"toString",function(){return IT(this)&&MF(this).source||AF(this)});var Yv={},CF=Math.ceil,LF=Math.floor,wm=function(N){var U=+N;return U!==U||U===0?0:(U>0?LF:CF)(U)},PF=wm,IF=Math.max,RF=Math.min,W2=function(N,U){var e=PF(N);return e<0?IF(e+U,0):RF(e,U)},DF=wm,FF=Math.min,Tm=function(N){return N>0?FF(DF(N),9007199254740991):0},OF=Tm,sh=function(N){return OF(N.length)},zF=Mf,NF=W2,BF=sh,DT=function(N){return function(U,e,I){var F=zF(U),s=BF(F),o=NF(I,s),h;if(N&&e!=e){for(;s>o;)if(h=F[o++],h!=h)return!0}else for(;s>o;o++)if((N||o in F)&&F[o]===e)return N||o||0;return!N&&-1}},Y2={includes:DT(!0),indexOf:DT(!1)},UF=ji,nx=Rl,VF=Mf,HF=Y2.indexOf,GF=$0,FT=UF([].push),WE=function(N,U){var e=VF(N),I=0,F=[],s;for(s in e)!nx(GF,s)&&nx(e,s)&&FT(F,s);for(;U.length>I;)nx(e,s=U[I++])&&(~HF(F,s)||FT(F,s));return F},X2=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],jF=WE,$F=X2,WF=$F.concat("length","prototype");Yv.f=Object.getOwnPropertyNames||function(U){return jF(U,WF)};var Am={};Am.f=Object.getOwnPropertySymbols;var YF=rl,XF=ji,ZF=Yv,KF=Am,JF=wi,QF=XF([].concat),YE=YF("Reflect","ownKeys")||function(U){var e=ZF.f(JF(U)),I=KF.f;return I?QF(e,I(U)):e},OT=Rl,qF=YE,eO=Gh,tO=Dl,XE=function(N,U,e){for(var I=qF(U),F=tO.f,s=eO.f,o=0;o<I.length;o++){var h=I[o];!OT(N,h)&&!(e&&OT(e,h))&&F(N,h,s(U,h))}},rO=Ki,nO=ss,aO=/#|\.prototype\./,Y0=function(N,U){var e=oO[iO(N)];return e==lO?!0:e==sO?!1:nO(U)?rO(U):!!U},iO=Y0.normalize=function(N){return String(N).replace(aO,".").toLowerCase()},oO=Y0.data={},sO=Y0.NATIVE="N",lO=Y0.POLYFILL="P",X0=Y0,ax=fi,uO=Gh.f,fO=Yh,cO=Pu.exports,hO=H2,vO=XE,pO=X0,ti=function(N,U){var e=N.target,I=N.global,F=N.stat,s,o,h,y,t,a;if(I?o=ax:F?o=ax[e]||hO(e,{}):o=(ax[e]||{}).prototype,o)for(h in U){if(t=U[h],N.noTargetGet?(a=uO(o,h),y=a&&a.value):y=o[h],s=pO(I?h:e+(F?".":"#")+h,N.forced),!s&&y!==void 0){if(typeof t==typeof y)continue;vO(t,y)}(N.sham||y&&y.sham)&&fO(t,"sham",!0),cO(o,h,t,N)}},dO=ti,gO=Ki,yO=Mf,ZE=Gh.f,KE=el,mO=gO(function(){ZE(1)}),xO=!KE||mO;dO({target:"Object",stat:!0,forced:xO,sham:!KE},{getOwnPropertyDescriptor:function(U,e){return ZE(yO(U),e)}});var pd={},bO=U0,JE=Function.prototype,zT=JE.apply,NT=JE.call,Z0=typeof Reflect=="object"&&Reflect.apply||(bO?NT.bind(zT):function(){return NT.apply(zT,arguments)}),_O=jh,Sm=Array.isArray||function(U){return _O(U)=="Array"},wO=es,TO=wO("toStringTag"),QE={};QE[TO]="z";var Z2=String(QE)==="[object z]",AO=fi,SO=Z2,MO=ss,Ty=jh,EO=es,kO=EO("toStringTag"),CO=AO.Object,LO=Ty(function(){return arguments}())=="Arguments",PO=function(N,U){try{return N[U]}catch{}},Mm=SO?Ty:function(N){var U,e,I;return N===void 0?"Undefined":N===null?"Null":typeof(e=PO(U=CO(N),kO))=="string"?e:LO?Ty(U):(I=Ty(U))=="Object"&&MO(U.callee)?"Arguments":I},IO=fi,RO=Mm,DO=IO.String,cu=function(N){if(RO(N)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return DO(N)},K2={},FO=WE,OO=X2,K0=Object.keys||function(U){return FO(U,OO)},zO=el,NO=VE,BO=Dl,UO=wi,VO=Mf,HO=K0;K2.f=zO&&!NO?Object.defineProperties:function(U,e){UO(U);for(var I=VO(e),F=HO(e),s=F.length,o=0,h;s>o;)BO.f(U,h=F[o++],I[h]);return U};var GO=rl,qE=GO("document","documentElement"),jO=wi,$O=K2,BT=X2,WO=$0,YO=qE,XO=xm,ZO=_m,UT=">",VT="<",Ib="prototype",Rb="script",e4=ZO("IE_PROTO"),ix=function(){},t4=function(N){return VT+Rb+UT+N+VT+"/"+Rb+UT},HT=function(N){N.write(t4("")),N.close();var U=N.parentWindow.Object;return N=null,U},KO=function(){var N=XO("iframe"),U="java"+Rb+":",e;return N.style.display="none",YO.appendChild(N),N.src=String(U),e=N.contentWindow.document,e.open(),e.write(t4("document.F=Object")),e.close(),e.F},Kg,Ay=function(){try{Kg=new ActiveXObject("htmlfile")}catch{}Ay=typeof document!="undefined"?document.domain&&Kg?HT(Kg):KO():HT(Kg);for(var N=BT.length;N--;)delete Ay[Ib][BT[N]];return Ay()};WO[e4]=!0;var dd=Object.create||function(U,e){var I;return U!==null?(ix[Ib]=jO(U),I=new ix,ix[Ib]=null,I[e4]=U):I=Ay(),e===void 0?I:$O.f(I,e)},J2={},JO=mm,QO=Dl,qO=H0,J0=function(N,U,e){var I=JO(U);I in N?QO.f(N,I,qO(0,e)):N[I]=e},ez=fi,GT=W2,tz=sh,rz=J0,nz=ez.Array,az=Math.max,Q2=function(N,U,e){for(var I=tz(N),F=GT(U,I),s=GT(e===void 0?I:e,I),o=nz(az(s-F,0)),h=0;F<s;F++,h++)rz(o,h,N[F]);return o.length=h,o},iz=jh,oz=Mf,r4=Yv.f,sz=Q2,n4=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],lz=function(N){try{return r4(N)}catch{return sz(n4)}};J2.f=function(U){return n4&&iz(U)=="Window"?lz(U):r4(oz(U))};var uz=ji,Em=uz([].slice),q2={},fz=es;q2.f=fz;var cz=fi,hz=cz,jT=hz,vz=Rl,pz=q2,dz=Dl.f,a4=function(N){var U=jT.Symbol||(jT.Symbol={});vz(U,N)||dz(U,N,{value:pz.f(N)})},gz=Dl.f,yz=Rl,mz=es,$T=mz("toStringTag"),Q0=function(N,U,e){N&&!e&&(N=N.prototype),N&&!yz(N,$T)&&gz(N,$T,{configurable:!0,value:U})},WT=ji,xz=Yo,bz=U0,_z=WT(WT.bind),ml=function(N,U){return xz(N),U===void 0?N:bz?_z(N,U):function(){return N.apply(U,arguments)}},wz=ji,Tz=Ki,i4=ss,Az=Mm,Sz=rl,Mz=bm,o4=function(){},Ez=[],s4=Sz("Reflect","construct"),e_=/^\s*(?:class|function)\b/,kz=wz(e_.exec),Cz=!e_.exec(o4),Xd=function(U){if(!i4(U))return!1;try{return s4(o4,Ez,U),!0}catch{return!1}},l4=function(U){if(!i4(U))return!1;switch(Az(U)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Cz||!!kz(e_,Mz(U))}catch{return!0}};l4.sham=!0;var km=!s4||Tz(function(){var N;return Xd(Xd.call)||!Xd(Object)||!Xd(function(){N=!0})||N})?l4:Xd,Lz=fi,YT=Sm,Pz=km,Iz=tl,Rz=es,Dz=Rz("species"),XT=Lz.Array,Fz=function(N){var U;return YT(N)&&(U=N.constructor,Pz(U)&&(U===XT||YT(U.prototype))?U=void 0:Iz(U)&&(U=U[Dz],U===null&&(U=void 0))),U===void 0?XT:U},Oz=Fz,u4=function(N,U){return new(Oz(N))(U===0?0:U)},zz=ml,Nz=ji,Bz=G0,Uz=qu,Vz=sh,Hz=u4,ZT=Nz([].push),Sh=function(N){var U=N==1,e=N==2,I=N==3,F=N==4,s=N==6,o=N==7,h=N==5||s;return function(y,t,a,i){for(var n=Uz(y),r=Bz(n),f=zz(t,a),u=Vz(r),l=0,m=i||Hz,d=U?m(y,u):e||o?m(y,0):void 0,b,g;u>l;l++)if((h||l in r)&&(b=r[l],g=f(b,l,n),N))if(U)d[l]=g;else if(g)switch(N){case 3:return!0;case 5:return b;case 6:return l;case 2:ZT(d,b)}else switch(N){case 4:return!1;case 7:ZT(d,b)}return s?-1:I||F?F:d}},gd={forEach:Sh(0),map:Sh(1),filter:Sh(2),some:Sh(3),every:Sh(4),find:Sh(5),findIndex:Sh(6),filterReject:Sh(7)},yd=ti,t_=fi,Gz=rl,jz=Z0,q0=co,$z=ji,td=el,Nv=V2,r_=Ki,js=Rl,Wz=Sm,Yz=ss,Xz=tl,Zz=Wh,Db=dm,Fb=wi,Kz=qu,Cm=Mf,n_=mm,f4=cu,Ob=H0,F0=dd,c4=K0,Jz=Yv,h4=J2,zb=Am,v4=Gh,p4=Dl,Qz=K2,d4=V0,qz=Em,Sy=Pu.exports,eg=j0.exports,eN=_m,g4=$0,KT=ym,y4=es,tN=q2,rN=a4,nN=Q0,m4=Xh,Lm=gd.forEach,Cu=eN("hidden"),Pm="Symbol",O0="prototype",JT=y4("toPrimitive"),aN=m4.set,QT=m4.getterFor(Pm),_f=Object[O0],qc=t_.Symbol,Oh=qc&&qc[O0],x4=t_.TypeError,ox=t_.QObject,Zd=Gz("JSON","stringify"),b4=v4.f,Rh=p4.f,_4=h4.f,iN=d4.f,w4=$z([].push),th=eg("symbols"),tg=eg("op-symbols"),sx=eg("string-to-symbol-registry"),lx=eg("symbol-to-string-registry"),oN=eg("wks"),Nb=!ox||!ox[O0]||!ox[O0].findChild,Bb=td&&r_(function(){return F0(Rh({},"a",{get:function(){return Rh(this,"a",{value:7}).a}})).a!=7})?function(N,U,e){var I=b4(_f,U);I&&delete _f[U],Rh(N,U,e),I&&N!==_f&&Rh(_f,U,I)}:Rh,ux=function(N,U){var e=th[N]=F0(Oh);return aN(e,{type:Pm,tag:N,description:U}),td||(e.description=U),e},Im=function(U,e,I){U===_f&&Im(tg,e,I),Fb(U);var F=n_(e);return Fb(I),js(th,F)?(I.enumerable?(js(U,Cu)&&U[Cu][F]&&(U[Cu][F]=!1),I=F0(I,{enumerable:Ob(0,!1)})):(js(U,Cu)||Rh(U,Cu,Ob(1,{})),U[Cu][F]=!0),Bb(U,F,I)):Rh(U,F,I)},a_=function(U,e){Fb(U);var I=Cm(e),F=c4(I).concat(i_(I));return Lm(F,function(s){(!td||q0(Ub,I,s))&&Im(U,s,I[s])}),U},sN=function(U,e){return e===void 0?F0(U):a_(F0(U),e)},Ub=function(U){var e=n_(U),I=q0(iN,this,e);return this===_f&&js(th,e)&&!js(tg,e)?!1:I||!js(this,e)||!js(th,e)||js(this,Cu)&&this[Cu][e]?I:!0},T4=function(U,e){var I=Cm(U),F=n_(e);if(!(I===_f&&js(th,F)&&!js(tg,F))){var s=b4(I,F);return s&&js(th,F)&&!(js(I,Cu)&&I[Cu][F])&&(s.enumerable=!0),s}},A4=function(U){var e=_4(Cm(U)),I=[];return Lm(e,function(F){!js(th,F)&&!js(g4,F)&&w4(I,F)}),I},i_=function(U){var e=U===_f,I=_4(e?tg:Cm(U)),F=[];return Lm(I,function(s){js(th,s)&&(!e||js(_f,s))&&w4(F,th[s])}),F};Nv||(qc=function(){if(Zz(Oh,this))throw x4("Symbol is not a constructor");var U=!arguments.length||arguments[0]===void 0?void 0:f4(arguments[0]),e=KT(U),I=function(F){this===_f&&q0(I,tg,F),js(this,Cu)&&js(this[Cu],e)&&(this[Cu][e]=!1),Bb(this,e,Ob(1,F))};return td&&Nb&&Bb(_f,e,{configurable:!0,set:I}),ux(e,U)},Oh=qc[O0],Sy(Oh,"toString",function(){return QT(this).tag}),Sy(qc,"withoutSetter",function(N){return ux(KT(N),N)}),d4.f=Ub,p4.f=Im,Qz.f=a_,v4.f=T4,Jz.f=h4.f=A4,zb.f=i_,tN.f=function(N){return ux(y4(N),N)},td&&(Rh(Oh,"description",{configurable:!0,get:function(){return QT(this).description}}),Sy(_f,"propertyIsEnumerable",Ub,{unsafe:!0})));yd({global:!0,wrap:!0,forced:!Nv,sham:!Nv},{Symbol:qc});Lm(c4(oN),function(N){rN(N)});yd({target:Pm,stat:!0,forced:!Nv},{for:function(N){var U=f4(N);if(js(sx,U))return sx[U];var e=qc(U);return sx[U]=e,lx[e]=U,e},keyFor:function(U){if(!Db(U))throw x4(U+" is not a symbol");if(js(lx,U))return lx[U]},useSetter:function(){Nb=!0},useSimple:function(){Nb=!1}});yd({target:"Object",stat:!0,forced:!Nv,sham:!td},{create:sN,defineProperty:Im,defineProperties:a_,getOwnPropertyDescriptor:T4});yd({target:"Object",stat:!0,forced:!Nv},{getOwnPropertyNames:A4,getOwnPropertySymbols:i_});yd({target:"Object",stat:!0,forced:r_(function(){zb.f(1)})},{getOwnPropertySymbols:function(U){return zb.f(Kz(U))}});if(Zd){var lN=!Nv||r_(function(){var N=qc();return Zd([N])!="[null]"||Zd({a:N})!="{}"||Zd(Object(N))!="{}"});yd({target:"JSON",stat:!0,forced:lN},{stringify:function(U,e,I){var F=qz(arguments),s=e;if(!(!Xz(e)&&U===void 0||Db(U)))return Wz(e)||(e=function(o,h){if(Yz(s)&&(h=q0(s,this,o,h)),!Db(h))return h}),F[1]=e,jz(Zd,null,F)}})}if(!Oh[JT]){var uN=Oh.valueOf;Sy(Oh,JT,function(N){return q0(uN,this)})}nN(qc,Pm);g4[Cu]=!0;var fN=ti,cN=el,hN=fi,Jg=ji,vN=Rl,pN=ss,dN=Wh,gN=cu,yN=Dl.f,mN=XE,Zc=hN.Symbol,gv=Zc&&Zc.prototype;if(cN&&pN(Zc)&&(!("description"in gv)||Zc().description!==void 0)){var qT={},Qg=function(){var U=arguments.length<1||arguments[0]===void 0?void 0:gN(arguments[0]),e=dN(gv,this)?new Zc(U):U===void 0?Zc():Zc(U);return U===""&&(qT[e]=!0),e};mN(Qg,Zc),Qg.prototype=gv,gv.constructor=Qg;var xN=String(Zc("test"))=="Symbol(test)",bN=Jg(gv.toString),_N=Jg(gv.valueOf),wN=/^Symbol\((.*)\)[^)]+$/,TN=Jg("".replace),AN=Jg("".slice);yN(gv,"description",{configurable:!0,get:function(){var U=_N(this),e=bN(U);if(vN(qT,U))return"";var I=xN?AN(e,7,-1):TN(e,wN,"$1");return I===""?void 0:I}}),fN({global:!0,forced:!0},{Symbol:Qg})}var SN=a4;SN("iterator");var MN=Ki,EN=es,kN=Wv,CN=EN("species"),Rm=function(N){return kN>=51||!MN(function(){var U=[],e=U.constructor={};return e[CN]=function(){return{foo:1}},U[N](Boolean).foo!==1})},LN=ti,PN=fi,IN=Ki,RN=Sm,DN=tl,FN=qu,ON=sh,eA=J0,zN=u4,NN=Rm,BN=es,UN=Wv,S4=BN("isConcatSpreadable"),tA=9007199254740991,rA="Maximum allowed index exceeded",nA=PN.TypeError,VN=UN>=51||!IN(function(){var N=[];return N[S4]=!1,N.concat()[0]!==N}),HN=NN("concat"),GN=function(N){if(!DN(N))return!1;var U=N[S4];return U!==void 0?!!U:RN(N)},jN=!VN||!HN;LN({target:"Array",proto:!0,forced:jN},{concat:function(U){var e=FN(this),I=zN(e,0),F=0,s,o,h,y,t;for(s=-1,h=arguments.length;s<h;s++)if(t=s===-1?e:arguments[s],GN(t)){if(y=ON(t),F+y>tA)throw nA(rA);for(o=0;o<y;o++,F++)o in t&&eA(I,F,t[o])}else{if(F>=tA)throw nA(rA);eA(I,F++,t)}return I.length=F,I}});var $N=ti,WN=gd.filter,YN=Rm,XN=YN("filter");$N({target:"Array",proto:!0,forced:!XN},{filter:function(U){return WN(this,U,arguments.length>1?arguments[1]:void 0)}});var ZN=Ki,md=function(N,U){var e=[][N];return!!e&&ZN(function(){e.call(null,U||function(){return 1},1)})},KN=gd.forEach,JN=md,QN=JN("forEach"),M4=QN?[].forEach:function(U){return KN(this,U,arguments.length>1?arguments[1]:void 0)},qN=ti,aA=M4;qN({target:"Array",proto:!0,forced:[].forEach!=aA},{forEach:aA});var eB=co,iA=wi,tB=vd,E4=function(N,U,e){var I,F;iA(N);try{if(I=tB(N,"return"),!I){if(U==="throw")throw e;return e}I=eB(I,N)}catch(s){F=!0,I=s}if(U==="throw")throw e;if(F)throw I;return iA(I),e},rB=wi,nB=E4,aB=function(N,U,e,I){try{return I?U(rB(e)[0],e[1]):U(e)}catch(F){nB(N,"throw",F)}},rg={},iB=es,oB=rg,sB=iB("iterator"),lB=Array.prototype,k4=function(N){return N!==void 0&&(oB.Array===N||lB[sB]===N)},uB=Mm,oA=vd,fB=rg,cB=es,hB=cB("iterator"),o_=function(N){if(N!=null)return oA(N,hB)||oA(N,"@@iterator")||fB[uB(N)]},vB=fi,pB=co,dB=Yo,gB=wi,yB=gm,mB=o_,xB=vB.TypeError,s_=function(N,U){var e=arguments.length<2?mB(N):U;if(dB(e))return gB(pB(e,N));throw xB(yB(N)+" is not iterable")},bB=fi,_B=ml,wB=co,TB=qu,AB=aB,SB=k4,MB=km,EB=sh,sA=J0,kB=s_,CB=o_,lA=bB.Array,LB=function(U){var e=TB(U),I=MB(this),F=arguments.length,s=F>1?arguments[1]:void 0,o=s!==void 0;o&&(s=_B(s,F>2?arguments[2]:void 0));var h=CB(e),y=0,t,a,i,n,r,f;if(h&&!(this==lA&&SB(h)))for(n=kB(e,h),r=n.next,a=I?new this:[];!(i=wB(r,n)).done;y++)f=o?AB(n,s,[i.value,y],!0):i.value,sA(a,y,f);else for(t=EB(e),a=I?new this(t):lA(t);t>y;y++)f=o?s(e[y],y):e[y],sA(a,y,f);return a.length=y,a},PB=es,C4=PB("iterator"),L4=!1;try{var IB=0,uA={next:function(){return{done:!!IB++}},return:function(){L4=!0}};uA[C4]=function(){return this},Array.from(uA,function(){throw 2})}catch{}var l_=function(N,U){if(!U&&!L4)return!1;var e=!1;try{var I={};I[C4]=function(){return{next:function(){return{done:e=!0}}}},N(I)}catch{}return e},RB=ti,DB=LB,FB=l_,OB=!FB(function(N){Array.from(N)});RB({target:"Array",stat:!0,forced:OB},{from:DB});var zB=es,NB=dd,BB=Dl,Vb=zB("unscopables"),Hb=Array.prototype;Hb[Vb]==null&&BB.f(Hb,Vb,{configurable:!0,value:NB(null)});var Dm=function(N){Hb[Vb][N]=!0},UB=ti,VB=Y2.includes,HB=Dm;UB({target:"Array",proto:!0},{includes:function(U){return VB(this,U,arguments.length>1?arguments[1]:void 0)}});HB("includes");var GB=Ki,P4=!GB(function(){function N(){}return N.prototype.constructor=null,Object.getPrototypeOf(new N)!==N.prototype}),jB=fi,$B=Rl,WB=ss,YB=qu,XB=_m,ZB=P4,fA=XB("IE_PROTO"),Gb=jB.Object,KB=Gb.prototype,u_=ZB?Gb.getPrototypeOf:function(N){var U=YB(N);if($B(U,fA))return U[fA];var e=U.constructor;return WB(e)&&U instanceof e?e.prototype:U instanceof Gb?KB:null},JB=Ki,QB=ss,cA=u_,qB=Pu.exports,eU=es,jb=eU("iterator"),I4=!1,Bv,fx,cx;[].keys&&(cx=[].keys(),"next"in cx?(fx=cA(cA(cx)),fx!==Object.prototype&&(Bv=fx)):I4=!0);var tU=Bv==null||JB(function(){var N={};return Bv[jb].call(N)!==N});tU&&(Bv={});QB(Bv[jb])||qB(Bv,jb,function(){return this});var R4={IteratorPrototype:Bv,BUGGY_SAFARI_ITERATORS:I4},rU=R4.IteratorPrototype,nU=dd,aU=H0,iU=Q0,oU=rg,sU=function(){return this},lU=function(N,U,e,I){var F=U+" Iterator";return N.prototype=nU(rU,{next:aU(+!I,e)}),iU(N,F,!1),oU[F]=sU,N},D4=fi,uU=ss,fU=D4.String,cU=D4.TypeError,hU=function(N){if(typeof N=="object"||uU(N))return N;throw cU("Can't set "+fU(N)+" as a prototype")},vU=ji,pU=wi,dU=hU,Fm=Object.setPrototypeOf||("__proto__"in{}?function(){var N=!1,U={},e;try{e=vU(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(U,[]),N=U instanceof Array}catch{}return function(F,s){return pU(F),dU(s),N?e(F,s):F.__proto__=s,F}}():void 0),gU=ti,yU=co,F4=W0,mU=ss,xU=lU,hA=u_,vA=Fm,bU=Q0,_U=Yh,hx=Pu.exports,wU=es,TU=rg,O4=R4,AU=F4.PROPER,SU=F4.CONFIGURABLE,pA=O4.IteratorPrototype,qg=O4.BUGGY_SAFARI_ITERATORS,Kd=wU("iterator"),dA="keys",Jd="values",gA="entries",MU=function(){return this},f_=function(N,U,e,I,F,s,o){xU(e,U,I);var h=function(m){if(m===F&&n)return n;if(!qg&&m in a)return a[m];switch(m){case dA:return function(){return new e(this,m)};case Jd:return function(){return new e(this,m)};case gA:return function(){return new e(this,m)}}return function(){return new e(this)}},y=U+" Iterator",t=!1,a=N.prototype,i=a[Kd]||a["@@iterator"]||F&&a[F],n=!qg&&i||h(F),r=U=="Array"&&a.entries||i,f,u,l;if(r&&(f=hA(r.call(new N)),f!==Object.prototype&&f.next&&(hA(f)!==pA&&(vA?vA(f,pA):mU(f[Kd])||hx(f,Kd,MU)),bU(f,y,!0))),AU&&F==Jd&&i&&i.name!==Jd&&(SU?_U(a,"name",Jd):(t=!0,n=function(){return yU(i,this)})),F)if(u={values:h(Jd),keys:s?n:h(dA),entries:h(gA)},o)for(l in u)(qg||t||!(l in a))&&hx(a,l,u[l]);else gU({target:U,proto:!0,forced:qg||t},u);return a[Kd]!==n&&hx(a,Kd,n,{name:F}),TU[U]=n,u},EU=Mf,c_=Dm,yA=rg,z4=Xh,kU=Dl.f,CU=f_,LU=el,N4="Array Iterator",PU=z4.set,IU=z4.getterFor(N4),RU=CU(Array,"Array",function(N,U){PU(this,{type:N4,target:EU(N),index:0,kind:U})},function(){var N=IU(this),U=N.target,e=N.kind,I=N.index++;return!U||I>=U.length?(N.target=void 0,{value:void 0,done:!0}):e=="keys"?{value:I,done:!1}:e=="values"?{value:U[I],done:!1}:{value:[I,U[I]],done:!1}},"values"),mA=yA.Arguments=yA.Array;c_("keys");c_("values");c_("entries");if(LU&&mA.name!=="values")try{kU(mA,"name",{value:"values"})}catch{}var DU=ti,FU=ji,OU=G0,zU=Mf,NU=md,BU=FU([].join),UU=OU!=Object,VU=NU("join",",");DU({target:"Array",proto:!0,forced:UU||!VU},{join:function(U){return BU(zU(this),U===void 0?",":U)}});var HU=ti,GU=gd.map,jU=Rm,$U=jU("map");HU({target:"Array",proto:!0,forced:!$U},{map:function(U){return GU(this,U,arguments.length>1?arguments[1]:void 0)}});var WU=fi,YU=Yo,XU=qu,ZU=G0,KU=sh,JU=WU.TypeError,xA=function(N){return function(U,e,I,F){YU(e);var s=XU(U),o=ZU(s),h=KU(s),y=N?h-1:0,t=N?-1:1;if(I<2)for(;;){if(y in o){F=o[y],y+=t;break}if(y+=t,N?y<0:h<=y)throw JU("Reduce of empty array with no initial value")}for(;N?y>=0:h>y;y+=t)y in o&&(F=e(F,o[y],y,s));return F}},B4={left:xA(!1),right:xA(!0)},QU=jh,qU=fi,ng=QU(qU.process)=="process",eV=ti,tV=B4.left,rV=md,bA=Wv,nV=ng,aV=rV("reduce"),iV=!nV&&bA>79&&bA<83;eV({target:"Array",proto:!0,forced:!aV||iV},{reduce:function(U){var e=arguments.length;return tV(this,U,e,e>1?arguments[1]:void 0)}});var oV=ti,sV=B4.right,lV=md,_A=Wv,uV=ng,fV=lV("reduceRight"),cV=!uV&&_A>79&&_A<83;oV({target:"Array",proto:!0,forced:!fV||cV},{reduceRight:function(U){return sV(this,U,arguments.length,arguments.length>1?arguments[1]:void 0)}});var hV=ti,vV=fi,wA=Sm,pV=km,dV=tl,TA=W2,gV=sh,yV=Mf,mV=J0,xV=es,bV=Rm,_V=Em,wV=bV("slice"),TV=xV("species"),vx=vV.Array,AV=Math.max;hV({target:"Array",proto:!0,forced:!wV},{slice:function(U,e){var I=yV(this),F=gV(I),s=TA(U,F),o=TA(e===void 0?F:e,F),h,y,t;if(wA(I)&&(h=I.constructor,pV(h)&&(h===vx||wA(h.prototype))?h=void 0:dV(h)&&(h=h[TV],h===null&&(h=void 0)),h===vx||h===void 0))return _V(I,s,o);for(y=new(h===void 0?vx:h)(AV(o-s,0)),t=0;s<o;s++,t++)s in I&&mV(y,t,I[s]);return y.length=t,y}});var AA=Q2,SV=Math.floor,$b=function(N,U){var e=N.length,I=SV(e/2);return e<8?MV(N,U):EV(N,$b(AA(N,0,I),U),$b(AA(N,I),U),U)},MV=function(N,U){for(var e=N.length,I=1,F,s;I<e;){for(s=I,F=N[I];s&&U(N[s-1],F)>0;)N[s]=N[--s];s!==I++&&(N[s]=F)}return N},EV=function(N,U,e,I){for(var F=U.length,s=e.length,o=0,h=0;o<F||h<s;)N[o+h]=o<F&&h<s?I(U[o],e[h])<=0?U[o++]:e[h++]:o<F?U[o++]:e[h++];return N},kV=$b,CV=$v,SA=CV.match(/firefox\/(\d+)/i),LV=!!SA&&+SA[1],PV=$v,IV=/MSIE|Trident/.test(PV),RV=$v,MA=RV.match(/AppleWebKit\/(\d+)\./),DV=!!MA&&+MA[1],FV=ti,U4=ji,OV=Yo,zV=qu,NV=sh,EA=cu,h_=Ki,BV=kV,UV=md,kA=LV,VV=IV,CA=Wv,LA=DV,zh=[],PA=U4(zh.sort),HV=U4(zh.push),GV=h_(function(){zh.sort(void 0)}),jV=h_(function(){zh.sort(null)}),$V=UV("sort"),V4=!h_(function(){if(CA)return CA<70;if(!(kA&&kA>3)){if(VV)return!0;if(LA)return LA<603;var N="",U,e,I,F;for(U=65;U<76;U++){switch(e=String.fromCharCode(U),U){case 66:case 69:case 70:case 72:I=3;break;case 68:case 71:I=4;break;default:I=2}for(F=0;F<47;F++)zh.push({k:e+F,v:I})}for(zh.sort(function(s,o){return o.v-s.v}),F=0;F<zh.length;F++)e=zh[F].k.charAt(0),N.charAt(N.length-1)!==e&&(N+=e);return N!=="DGBEFHACIJK"}}),WV=GV||!jV||!$V||!V4,YV=function(N){return function(U,e){return e===void 0?-1:U===void 0?1:N!==void 0?+N(U,e)||0:EA(U)>EA(e)?1:-1}};FV({target:"Array",proto:!0,forced:WV},{sort:function(U){U!==void 0&&OV(U);var e=zV(this);if(V4)return U===void 0?PA(e):PA(e,U);var I=[],F=NV(e),s,o;for(o=0;o<F;o++)o in e&&HV(I,e[o]);for(BV(I,YV(U)),s=I.length,o=0;o<s;)e[o]=I[o++];for(;o<F;)delete e[o++];return e}});var XV=ti,ZV=Ki,KV=qu,JV=j2,QV=ZV(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});XV({target:"Date",proto:!0,forced:QV},{toJSON:function(U){var e=KV(this),I=JV(e,"number");return typeof I=="number"&&!isFinite(I)?null:e.toISOString()}});var H4=ji,qV=Pu.exports,v_=Date.prototype,IA="Invalid Date",G4="toString",eH=H4(v_[G4]),tH=H4(v_.getTime);String(new Date(NaN))!=IA&&qV(v_,G4,function(){var U=tH(this);return U===U?eH(this):IA});var rH=el,nH=W0.EXISTS,j4=ji,aH=Dl.f,$4=Function.prototype,iH=j4($4.toString),W4=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,oH=j4(W4.exec),sH="name";rH&&!nH&&aH($4,sH,{configurable:!0,get:function(){try{return oH(W4,iH(this))[1]}catch{return""}}});var RA=el,lH=ji,uH=co,fH=Ki,px=K0,cH=Am,hH=V0,vH=qu,pH=G0,Ep=Object.assign,DA=Object.defineProperty,dH=lH([].concat),gH=!Ep||fH(function(){if(RA&&Ep({b:1},Ep(DA({},"a",{enumerable:!0,get:function(){DA(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var N={},U={},e=Symbol(),I="abcdefghijklmnopqrst";return N[e]=7,I.split("").forEach(function(F){U[F]=F}),Ep({},N)[e]!=7||px(Ep({},U)).join("")!=I})?function(U,e){for(var I=vH(U),F=arguments.length,s=1,o=cH.f,h=hH.f;F>s;)for(var y=pH(arguments[s++]),t=o?dH(px(y),o(y)):px(y),a=t.length,i=0,n;a>i;)n=t[i++],(!RA||uH(h,y,n))&&(I[n]=y[n]);return I}:Ep,yH=ti,FA=gH;yH({target:"Object",stat:!0,forced:Object.assign!==FA},{assign:FA});var mH=el,Y4=ji,xH=K0,bH=Mf,_H=V0.f,wH=Y4(_H),TH=Y4([].push),OA=function(N){return function(U){for(var e=bH(U),I=xH(e),F=I.length,s=0,o=[],h;F>s;)h=I[s++],(!mH||wH(e,h))&&TH(o,N?[h,e[h]]:e[h]);return o}},X4={entries:OA(!0),values:OA(!1)},AH=ti,SH=X4.entries;AH({target:"Object",stat:!0},{entries:function(U){return SH(U)}});var MH=Object.is||function(U,e){return U===e?U!==0||1/U===1/e:U!=U&&e!=e},EH=ti,kH=MH;EH({target:"Object",stat:!0},{is:kH});var CH=ti,LH=qu,Z4=K0,PH=Ki,IH=PH(function(){Z4(1)});CH({target:"Object",stat:!0,forced:IH},{keys:function(U){return Z4(LH(U))}});var RH=Z2,DH=Mm,FH=RH?{}.toString:function(){return"[object "+DH(this)+"]"},OH=Z2,zH=Pu.exports,NH=FH;OH||zH(Object.prototype,"toString",NH,{unsafe:!0});var BH=ti,UH=X4.values;BH({target:"Object",stat:!0},{values:function(U){return UH(U)}});var VH=wi,p_=function(){var N=VH(this),U="";return N.global&&(U+="g"),N.ignoreCase&&(U+="i"),N.multiline&&(U+="m"),N.dotAll&&(U+="s"),N.unicode&&(U+="u"),N.sticky&&(U+="y"),U},d_=Ki,HH=fi,g_=HH.RegExp,y_=d_(function(){var N=g_("a","y");return N.lastIndex=2,N.exec("abcd")!=null}),GH=y_||d_(function(){return!g_("a","y").sticky}),jH=y_||d_(function(){var N=g_("^r","gy");return N.lastIndex=2,N.exec("str")!=null}),m_={BROKEN_CARET:jH,MISSED_STICKY:GH,UNSUPPORTED_Y:y_},$H=Ki,WH=fi,YH=WH.RegExp,K4=$H(function(){var N=YH(".","s");return!(N.dotAll&&N.exec(`
`)&&N.flags==="s")}),XH=Ki,ZH=fi,KH=ZH.RegExp,J4=XH(function(){var N=KH("(?<a>b)","g");return N.exec("b").groups.a!=="b"||"b".replace(N,"$<a>c")!=="bc"}),Hp=co,Om=ji,JH=cu,QH=p_,qH=m_,eG=j0.exports,tG=dd,rG=Xh.get,nG=K4,aG=J4,iG=eG("native-string-replace",String.prototype.replace),Wy=RegExp.prototype.exec,Wb=Wy,oG=Om("".charAt),sG=Om("".indexOf),lG=Om("".replace),dx=Om("".slice),Yb=function(){var N=/a/,U=/b*/g;return Hp(Wy,N,"a"),Hp(Wy,U,"a"),N.lastIndex!==0||U.lastIndex!==0}(),Q4=qH.BROKEN_CARET,Xb=/()??/.exec("")[1]!==void 0,uG=Yb||Xb||Q4||nG||aG;uG&&(Wb=function(U){var e=this,I=rG(e),F=JH(U),s=I.raw,o,h,y,t,a,i,n;if(s)return s.lastIndex=e.lastIndex,o=Hp(Wb,s,F),e.lastIndex=s.lastIndex,o;var r=I.groups,f=Q4&&e.sticky,u=Hp(QH,e),l=e.source,m=0,d=F;if(f&&(u=lG(u,"y",""),sG(u,"g")===-1&&(u+="g"),d=dx(F,e.lastIndex),e.lastIndex>0&&(!e.multiline||e.multiline&&oG(F,e.lastIndex-1)!==`
`)&&(l="(?: "+l+")",d=" "+d,m++),h=new RegExp("^(?:"+l+")",u)),Xb&&(h=new RegExp("^"+l+"$(?!\\s)",u)),Yb&&(y=e.lastIndex),t=Hp(Wy,f?h:e,d),f?t?(t.input=dx(t.input,m),t[0]=dx(t[0],m),t.index=e.lastIndex,e.lastIndex+=t[0].length):e.lastIndex=0:Yb&&t&&(e.lastIndex=e.global?t.index+t[0].length:y),Xb&&t&&t.length>1&&Hp(iG,t[0],h,function(){for(a=1;a<arguments.length-2;a++)arguments[a]===void 0&&(t[a]=void 0)}),t&&r)for(t.groups=i=tG(null),a=0;a<r.length;a++)n=r[a],i[n[0]]=t[n[1]];return t});var zm=Wb,fG=ti,zA=zm;fG({target:"RegExp",proto:!0,forced:/./.exec!==zA},{exec:zA});var cG=ji,hG=W0.PROPER,vG=Pu.exports,pG=wi,dG=Wh,NA=cu,gG=Ki,yG=p_,x_="toString",Zb=RegExp.prototype,q4=Zb[x_],mG=cG(yG),xG=gG(function(){return q4.call({source:"a",flags:"b"})!="/a/b"}),bG=hG&&q4.name!=x_;(xG||bG)&&vG(RegExp.prototype,x_,function(){var U=pG(this),e=NA(U.source),I=U.flags,F=NA(I===void 0&&dG(Zb,U)&&!("flags"in Zb)?mG(U):I);return"/"+e+"/"+F},{unsafe:!0});var Nm={exports:{}},_G=Ki,wG=_G(function(){if(typeof ArrayBuffer=="function"){var N=new ArrayBuffer(8);Object.isExtensible(N)&&Object.defineProperty(N,"a",{value:8})}}),TG=Ki,AG=tl,SG=jh,BA=wG,My=Object.isExtensible,MG=TG(function(){My(1)}),EG=MG||BA?function(U){return!AG(U)||BA&&SG(U)=="ArrayBuffer"?!1:My?My(U):!0}:My,kG=Ki,ek=!kG(function(){return Object.isExtensible(Object.preventExtensions({}))}),CG=ti,LG=ji,PG=$0,IG=tl,b_=Rl,RG=Dl.f,UA=Yv,DG=J2,__=EG,FG=ym,OG=ek,tk=!1,rh=FG("meta"),zG=0,w_=function(N){RG(N,rh,{value:{objectID:"O"+zG++,weakData:{}}})},NG=function(N,U){if(!IG(N))return typeof N=="symbol"?N:(typeof N=="string"?"S":"P")+N;if(!b_(N,rh)){if(!__(N))return"F";if(!U)return"E";w_(N)}return N[rh].objectID},BG=function(N,U){if(!b_(N,rh)){if(!__(N))return!0;if(!U)return!1;w_(N)}return N[rh].weakData},UG=function(N){return OG&&tk&&__(N)&&!b_(N,rh)&&w_(N),N},VG=function(){HG.enable=function(){},tk=!0;var N=UA.f,U=LG([].splice),e={};e[rh]=1,N(e).length&&(UA.f=function(I){for(var F=N(I),s=0,o=F.length;s<o;s++)if(F[s]===rh){U(F,s,1);break}return F},CG({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:DG.f}))},HG=Nm.exports={enable:VG,fastKey:NG,getWeakData:BG,onFreeze:UG};PG[rh]=!0;var GG=fi,jG=ml,$G=co,WG=wi,YG=gm,XG=k4,ZG=sh,VA=Wh,KG=s_,JG=o_,HA=E4,QG=GG.TypeError,Ey=function(N,U){this.stopped=N,this.result=U},GA=Ey.prototype,Bo=function(N,U,e){var I=e&&e.that,F=!!(e&&e.AS_ENTRIES),s=!!(e&&e.IS_ITERATOR),o=!!(e&&e.INTERRUPTED),h=jG(U,I),y,t,a,i,n,r,f,u=function(m){return y&&HA(y,"normal",m),new Ey(!0,m)},l=function(m){return F?(WG(m),o?h(m[0],m[1],u):h(m[0],m[1])):o?h(m,u):h(m)};if(s)y=N;else{if(t=JG(N),!t)throw QG(YG(N)+" is not iterable");if(XG(t)){for(a=0,i=ZG(N);i>a;a++)if(n=l(N[a]),n&&VA(GA,n))return n;return new Ey(!1)}y=KG(N,t)}for(r=y.next;!(f=$G(r,y)).done;){try{n=l(f.value)}catch(m){HA(y,"throw",m)}if(typeof n=="object"&&n&&VA(GA,n))return n}return new Ey(!1)},qG=fi,ej=Wh,tj=qG.TypeError,T_=function(N,U){if(ej(U,N))return N;throw tj("Incorrect invocation")},rj=ss,nj=tl,jA=Fm,A_=function(N,U,e){var I,F;return jA&&rj(I=U.constructor)&&I!==e&&nj(F=I.prototype)&&F!==e.prototype&&jA(N,F),N},aj=ti,ij=fi,oj=ji,$A=X0,sj=Pu.exports,lj=Nm.exports,uj=Bo,fj=T_,cj=ss,gx=tl,yx=Ki,hj=l_,vj=Q0,pj=A_,rk=function(N,U,e){var I=N.indexOf("Map")!==-1,F=N.indexOf("Weak")!==-1,s=I?"set":"add",o=ij[N],h=o&&o.prototype,y=o,t={},a=function(m){var d=oj(h[m]);sj(h,m,m=="add"?function(g){return d(this,g===0?0:g),this}:m=="delete"?function(b){return F&&!gx(b)?!1:d(this,b===0?0:b)}:m=="get"?function(g){return F&&!gx(g)?void 0:d(this,g===0?0:g)}:m=="has"?function(g){return F&&!gx(g)?!1:d(this,g===0?0:g)}:function(g,_){return d(this,g===0?0:g,_),this})},i=$A(N,!cj(o)||!(F||h.forEach&&!yx(function(){new o().entries().next()})));if(i)y=e.getConstructor(U,N,I,s),lj.enable();else if($A(N,!0)){var n=new y,r=n[s](F?{}:-0,1)!=n,f=yx(function(){n.has(1)}),u=hj(function(m){new o(m)}),l=!F&&yx(function(){for(var m=new o,d=5;d--;)m[s](d,d);return!m.has(-0)});u||(y=U(function(m,d){fj(m,h);var b=pj(new o,m,y);return d!=null&&uj(d,b[s],{that:b,AS_ENTRIES:I}),b}),y.prototype=h,h.constructor=y),(f||l)&&(a("delete"),a("has"),I&&a("get")),(l||r)&&a(s),F&&h.clear&&delete h.clear}return t[N]=y,aj({global:!0,forced:y!=o},t),vj(y,N),F||e.setStrong(y,N,I),y},dj=Pu.exports,nk=function(N,U,e){for(var I in U)dj(N,I,U[I],e);return N},gj=rl,yj=Dl,mj=es,xj=el,WA=mj("species"),S_=function(N){var U=gj(N),e=yj.f;xj&&U&&!U[WA]&&e(U,WA,{configurable:!0,get:function(){return this}})},bj=Dl.f,_j=dd,YA=nk,wj=ml,Tj=T_,Aj=Bo,Sj=f_,Mj=S_,Qd=el,XA=Nm.exports.fastKey,ak=Xh,ZA=ak.set,mx=ak.getterFor,ik={getConstructor:function(N,U,e,I){var F=N(function(t,a){Tj(t,s),ZA(t,{type:U,index:_j(null),first:void 0,last:void 0,size:0}),Qd||(t.size=0),a!=null&&Aj(a,t[I],{that:t,AS_ENTRIES:e})}),s=F.prototype,o=mx(U),h=function(t,a,i){var n=o(t),r=y(t,a),f,u;return r?r.value=i:(n.last=r={index:u=XA(a,!0),key:a,value:i,previous:f=n.last,next:void 0,removed:!1},n.first||(n.first=r),f&&(f.next=r),Qd?n.size++:t.size++,u!=="F"&&(n.index[u]=r)),t},y=function(t,a){var i=o(t),n=XA(a),r;if(n!=="F")return i.index[n];for(r=i.first;r;r=r.next)if(r.key==a)return r};return YA(s,{clear:function(){for(var a=this,i=o(a),n=i.index,r=i.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;i.first=i.last=void 0,Qd?i.size=0:a.size=0},delete:function(t){var a=this,i=o(a),n=y(a,t);if(n){var r=n.next,f=n.previous;delete i.index[n.index],n.removed=!0,f&&(f.next=r),r&&(r.previous=f),i.first==n&&(i.first=r),i.last==n&&(i.last=f),Qd?i.size--:a.size--}return!!n},forEach:function(a){for(var i=o(this),n=wj(a,arguments.length>1?arguments[1]:void 0),r;r=r?r.next:i.first;)for(n(r.value,r.key,this);r&&r.removed;)r=r.previous},has:function(a){return!!y(this,a)}}),YA(s,e?{get:function(a){var i=y(this,a);return i&&i.value},set:function(a,i){return h(this,a===0?0:a,i)}}:{add:function(a){return h(this,a=a===0?0:a,a)}}),Qd&&bj(s,"size",{get:function(){return o(this).size}}),F},setStrong:function(N,U,e){var I=U+" Iterator",F=mx(U),s=mx(I);Sj(N,U,function(o,h){ZA(this,{type:I,target:o,state:F(o),kind:h,last:void 0})},function(){for(var o=s(this),h=o.kind,y=o.last;y&&y.removed;)y=y.previous;return!o.target||!(o.last=y=y?y.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):h=="keys"?{value:y.key,done:!1}:h=="values"?{value:y.value,done:!1}:{value:[y.key,y.value],done:!1}},e?"entries":"values",!e,!0),Mj(U)}},Ej=rk,kj=ik;Ej("Set",function(N){return function(){return N(this,arguments.length?arguments[0]:void 0)}},kj);var Cj=tl,Lj=jh,Pj=es,Ij=Pj("match"),M_=function(N){var U;return Cj(N)&&((U=N[Ij])!==void 0?!!U:Lj(N)=="RegExp")},Rj=fi,Dj=M_,Fj=Rj.TypeError,Oj=function(N){if(Dj(N))throw Fj("The method doesn't accept regular expressions");return N},zj=es,Nj=zj("match"),Bj=function(N){var U=/./;try{"/./"[N](U)}catch{try{return U[Nj]=!1,"/./"[N](U)}catch{}}return!1},Uj=ti,Vj=ji,Hj=Oj,Gj=$h,KA=cu,jj=Bj,$j=Vj("".indexOf);Uj({target:"String",proto:!0,forced:!jj("includes")},{includes:function(U){return!!~$j(KA(Gj(this)),KA(Hj(U)),arguments.length>1?arguments[1]:void 0)}});var E_=ji,Wj=wm,Yj=cu,Xj=$h,Zj=E_("".charAt),JA=E_("".charCodeAt),Kj=E_("".slice),QA=function(N){return function(U,e){var I=Yj(Xj(U)),F=Wj(e),s=I.length,o,h;return F<0||F>=s?N?"":void 0:(o=JA(I,F),o<55296||o>56319||F+1===s||(h=JA(I,F+1))<56320||h>57343?N?Zj(I,F):o:N?Kj(I,F,F+2):(o-55296<<10)+(h-56320)+65536)}},ok={codeAt:QA(!1),charAt:QA(!0)},Jj=ok.charAt,Qj=cu,sk=Xh,qj=f_,lk="String Iterator",e$=sk.set,t$=sk.getterFor(lk);qj(String,"String",function(N){e$(this,{type:lk,string:Qj(N),index:0})},function(){var U=t$(this),e=U.string,I=U.index,F;return I>=e.length?{value:void 0,done:!0}:(F=Jj(e,I),U.index+=F.length,{value:F,done:!1})});var qA=ji,e5=Pu.exports,r$=zm,t5=Ki,uk=es,n$=Yh,a$=uk("species"),xx=RegExp.prototype,k_=function(N,U,e,I){var F=uk(N),s=!t5(function(){var t={};return t[F]=function(){return 7},""[N](t)!=7}),o=s&&!t5(function(){var t=!1,a=/a/;return N==="split"&&(a={},a.constructor={},a.constructor[a$]=function(){return a},a.flags="",a[F]=/./[F]),a.exec=function(){return t=!0,null},a[F](""),!t});if(!s||!o||e){var h=qA(/./[F]),y=U(F,""[N],function(t,a,i,n,r){var f=qA(t),u=a.exec;return u===r$||u===xx.exec?s&&!r?{done:!0,value:h(a,i,n)}:{done:!0,value:f(i,a,n)}:{done:!1}});e5(String.prototype,N,y[0]),e5(xx,F,y[1])}I&&n$(xx[F],"sham",!0)},i$=ok.charAt,C_=function(N,U,e){return U+(e?i$(N,U).length:1)},L_=ji,o$=qu,s$=Math.floor,bx=L_("".charAt),l$=L_("".replace),_x=L_("".slice),u$=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f$=/\$([$&'`]|\d{1,2})/g,c$=function(N,U,e,I,F,s){var o=e+N.length,h=I.length,y=f$;return F!==void 0&&(F=o$(F),y=u$),l$(s,y,function(t,a){var i;switch(bx(a,0)){case"$":return"$";case"&":return N;case"`":return _x(U,0,e);case"'":return _x(U,o);case"<":i=F[_x(a,1,-1)];break;default:var n=+a;if(n===0)return t;if(n>h){var r=s$(n/10);return r===0?t:r<=h?I[r-1]===void 0?bx(a,1):I[r-1]+bx(a,1):t}i=I[n-1]}return i===void 0?"":i})},h$=fi,r5=co,v$=wi,p$=ss,d$=jh,g$=zm,y$=h$.TypeError,P_=function(N,U){var e=N.exec;if(p$(e)){var I=r5(e,N,U);return I!==null&&v$(I),I}if(d$(N)==="RegExp")return r5(g$,N,U);throw y$("RegExp#exec called on incompatible receiver")},m$=Z0,n5=co,Bm=ji,x$=k_,b$=Ki,_$=wi,w$=ss,T$=wm,A$=Tm,kp=cu,S$=$h,M$=C_,E$=vd,k$=c$,C$=P_,L$=es,Kb=L$("replace"),P$=Math.max,I$=Math.min,R$=Bm([].concat),wx=Bm([].push),a5=Bm("".indexOf),i5=Bm("".slice),D$=function(N){return N===void 0?N:String(N)},F$=function(){return"a".replace(/./,"$0")==="$0"}(),o5=function(){return/./[Kb]?/./[Kb]("a","$0")==="":!1}(),O$=!b$(function(){var N=/./;return N.exec=function(){var U=[];return U.groups={a:"7"},U},"".replace(N,"$<a>")!=="7"});x$("replace",function(N,U,e){var I=o5?"$":"$0";return[function(s,o){var h=S$(this),y=s==null?void 0:E$(s,Kb);return y?n5(y,s,h,o):n5(U,kp(h),s,o)},function(F,s){var o=_$(this),h=kp(F);if(typeof s=="string"&&a5(s,I)===-1&&a5(s,"$<")===-1){var y=e(U,o,h,s);if(y.done)return y.value}var t=w$(s);t||(s=kp(s));var a=o.global;if(a){var i=o.unicode;o.lastIndex=0}for(var n=[];;){var r=C$(o,h);if(r===null||(wx(n,r),!a))break;var f=kp(r[0]);f===""&&(o.lastIndex=M$(h,A$(o.lastIndex),i))}for(var u="",l=0,m=0;m<n.length;m++){r=n[m];for(var d=kp(r[0]),b=P$(I$(T$(r.index),h.length),0),g=[],_=1;_<r.length;_++)wx(g,D$(r[_]));var p=r.groups;if(t){var A=R$([d],g,b,h);p!==void 0&&wx(A,p);var c=kp(m$(s,void 0,A))}else c=k$(d,h,b,g,p,s);b>=l&&(u+=i5(h,l,b)+c,l=b+d.length)}return u+i5(h,l)}]},!O$||!F$||o5);var z$=co,N$=Yo,B$=wi,U$=function(){for(var U=B$(this),e=N$(U.add),I=0,F=arguments.length;I<F;I++)z$(e,U,arguments[I]);return U},V$=ti,H$=U$;V$({target:"Set",proto:!0,real:!0,forced:!0},{addAll:H$});var G$=co,j$=Yo,$$=wi,fk=function(){for(var U=$$(this),e=j$(U.delete),I=!0,F,s=0,o=arguments.length;s<o;s++)F=G$(e,U,arguments[s]),I=I&&F;return!!I},W$=ti,Y$=fk;W$({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:Y$});var X$=fi,Z$=km,K$=gm,J$=X$.TypeError,ck=function(N){if(Z$(N))return N;throw J$(K$(N)+" is not a constructor")},s5=wi,Q$=ck,q$=es,eW=q$("species"),nc=function(N,U){var e=s5(N).constructor,I;return e===void 0||(I=s5(e)[eW])==null?U:Q$(I)},tW=ti,rW=rl,nW=co,aW=Yo,iW=wi,oW=nc,sW=Bo;tW({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(U){var e=iW(this),I=new(oW(e,rW("Set")))(e),F=aW(I.delete);return sW(U,function(s){nW(F,I,s)}),I}});var lW=co,Xv=function(N){return lW(Set.prototype.values,N)},uW=ti,fW=wi,cW=ml,hW=Xv,vW=Bo;uW({target:"Set",proto:!0,real:!0,forced:!0},{every:function(U){var e=fW(this),I=hW(e),F=cW(U,arguments.length>1?arguments[1]:void 0);return!vW(I,function(s,o){if(!F(s,s,e))return o()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var pW=ti,dW=rl,gW=co,yW=Yo,mW=wi,xW=ml,bW=nc,_W=Xv,wW=Bo;pW({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(U){var e=mW(this),I=_W(e),F=xW(U,arguments.length>1?arguments[1]:void 0),s=new(bW(e,dW("Set"))),o=yW(s.add);return wW(I,function(h){F(h,h,e)&&gW(o,s,h)},{IS_ITERATOR:!0}),s}});var TW=ti,AW=wi,SW=ml,MW=Xv,EW=Bo;TW({target:"Set",proto:!0,real:!0,forced:!0},{find:function(U){var e=AW(this),I=MW(e),F=SW(U,arguments.length>1?arguments[1]:void 0);return EW(I,function(s,o){if(F(s,s,e))return o(s)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var kW=ti,CW=rl,l5=co,u5=Yo,LW=wi,PW=nc,IW=Bo;kW({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(U){var e=LW(this),I=new(PW(e,CW("Set"))),F=u5(e.has),s=u5(I.add);return IW(U,function(o){l5(F,e,o)&&l5(s,I,o)}),I}});var RW=ti,DW=co,FW=Yo,OW=wi,zW=Bo;RW({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(U){var e=OW(this),I=FW(e.has);return!zW(U,function(F,s){if(DW(I,e,F)===!0)return s()},{INTERRUPTED:!0}).stopped}});var NW=ti,BW=rl,UW=co,VW=Yo,HW=ss,GW=wi,jW=s_,$W=Bo;NW({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(U){var e=jW(this),I=GW(U),F=I.has;return HW(F)||(I=new(BW("Set"))(U),F=VW(I.has)),!$W(e,function(s,o){if(UW(F,I,s)===!1)return o()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var WW=ti,YW=co,XW=Yo,ZW=wi,KW=Bo;WW({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(U){var e=ZW(this),I=XW(e.has);return!KW(U,function(F,s){if(YW(I,e,F)===!1)return s()},{INTERRUPTED:!0}).stopped}});var JW=ti,QW=ji,qW=wi,eY=cu,tY=Xv,rY=Bo,nY=QW([].join),aY=[].push;JW({target:"Set",proto:!0,real:!0,forced:!0},{join:function(U){var e=qW(this),I=tY(e),F=U===void 0?",":eY(U),s=[];return rY(I,aY,{that:s,IS_ITERATOR:!0}),nY(s,F)}});var iY=ti,oY=rl,sY=ml,lY=co,uY=Yo,fY=wi,cY=nc,hY=Xv,vY=Bo;iY({target:"Set",proto:!0,real:!0,forced:!0},{map:function(U){var e=fY(this),I=hY(e),F=sY(U,arguments.length>1?arguments[1]:void 0),s=new(cY(e,oY("Set"))),o=uY(s.add);return vY(I,function(h){lY(o,s,F(h,h,e))},{IS_ITERATOR:!0}),s}});var pY=ti,dY=fi,gY=Yo,yY=wi,mY=Xv,xY=Bo,bY=dY.TypeError;pY({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(U){var e=yY(this),I=mY(e),F=arguments.length<2,s=F?void 0:arguments[1];if(gY(U),xY(I,function(o){F?(F=!1,s=o):s=U(s,o,o,e)},{IS_ITERATOR:!0}),F)throw bY("Reduce of empty set with no initial value");return s}});var _Y=ti,wY=wi,TY=ml,AY=Xv,SY=Bo;_Y({target:"Set",proto:!0,real:!0,forced:!0},{some:function(U){var e=wY(this),I=AY(e),F=TY(U,arguments.length>1?arguments[1]:void 0);return SY(I,function(s,o){if(F(s,s,e))return o()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var MY=ti,EY=rl,f5=co,c5=Yo,kY=wi,CY=nc,LY=Bo;MY({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(U){var e=kY(this),I=new(CY(e,EY("Set")))(e),F=c5(I.delete),s=c5(I.add);return LY(U,function(o){f5(F,I,o)||f5(s,I,o)}),I}});var PY=ti,IY=rl,RY=Yo,DY=wi,FY=nc,OY=Bo;PY({target:"Set",proto:!0,real:!0,forced:!0},{union:function(U){var e=DY(this),I=new(FY(e,IY("Set")))(e);return OY(U,RY(I.add),{that:I}),I}});var hk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},zY=xm,Tx=zY("span").classList,h5=Tx&&Tx.constructor&&Tx.constructor.prototype,vk=h5===Object.prototype?void 0:h5,v5=fi,p5=hk,NY=vk,Ax=M4,BY=Yh,pk=function(N){if(N&&N.forEach!==Ax)try{BY(N,"forEach",Ax)}catch{N.forEach=Ax}};for(var Sx in p5)p5[Sx]&&pk(v5[Sx]&&v5[Sx].prototype);pk(NY);var d5=fi,dk=hk,UY=vk,v0=RU,Mx=Yh,gk=es,Ex=gk("iterator"),g5=gk("toStringTag"),kx=v0.values,yk=function(N,U){if(N){if(N[Ex]!==kx)try{Mx(N,Ex,kx)}catch{N[Ex]=kx}if(N[g5]||Mx(N,g5,U),dk[U]){for(var e in v0)if(N[e]!==v0[e])try{Mx(N,e,v0[e])}catch{N[e]=v0[e]}}}};for(var Cx in dk)yk(d5[Cx]&&d5[Cx].prototype,Cx);yk(UY,"DOMTokenList");var VY=ti,HY=co;VY({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return HY(URL.prototype.toString,this)}});var GY={exports:{}};(function(N){var U=function(e){var I=Object.prototype,F=I.hasOwnProperty,s,o=typeof Symbol=="function"?Symbol:{},h=o.iterator||"@@iterator",y=o.asyncIterator||"@@asyncIterator",t=o.toStringTag||"@@toStringTag";function a(z,O,R){return Object.defineProperty(z,O,{value:R,enumerable:!0,configurable:!0,writable:!0}),z[O]}try{a({},"")}catch{a=function(O,R,D){return O[R]=D}}function i(z,O,R,D){var H=O&&O.prototype instanceof d?O:d,B=Object.create(H.prototype),$=new M(D||[]);return B._invoke=x(z,R,$),B}e.wrap=i;function n(z,O,R){try{return{type:"normal",arg:z.call(O,R)}}catch(D){return{type:"throw",arg:D}}}var r="suspendedStart",f="suspendedYield",u="executing",l="completed",m={};function d(){}function b(){}function g(){}var _={};a(_,h,function(){return this});var p=Object.getPrototypeOf,A=p&&p(p(E([])));A&&A!==I&&F.call(A,h)&&(_=A);var c=g.prototype=d.prototype=Object.create(_);b.prototype=g,a(c,"constructor",g),a(g,"constructor",b),b.displayName=a(g,t,"GeneratorFunction");function S(z){["next","throw","return"].forEach(function(O){a(z,O,function(R){return this._invoke(O,R)})})}e.isGeneratorFunction=function(z){var O=typeof z=="function"&&z.constructor;return O?O===b||(O.displayName||O.name)==="GeneratorFunction":!1},e.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,g):(z.__proto__=g,a(z,t,"GeneratorFunction")),z.prototype=Object.create(c),z},e.awrap=function(z){return{__await:z}};function T(z,O){function R(B,$,W,re){var Q=n(z[B],z,$);if(Q.type==="throw")re(Q.arg);else{var Z=Q.arg,K=Z.value;return K&&typeof K=="object"&&F.call(K,"__await")?O.resolve(K.__await).then(function(le){R("next",le,W,re)},function(le){R("throw",le,W,re)}):O.resolve(K).then(function(le){Z.value=le,W(Z)},function(le){return R("throw",le,W,re)})}}var D;function H(B,$){function W(){return new O(function(re,Q){R(B,$,re,Q)})}return D=D?D.then(W,W):W()}this._invoke=H}S(T.prototype),a(T.prototype,y,function(){return this}),e.AsyncIterator=T,e.async=function(z,O,R,D,H){H===void 0&&(H=Promise);var B=new T(i(z,O,R,D),H);return e.isGeneratorFunction(O)?B:B.next().then(function($){return $.done?$.value:B.next()})};function x(z,O,R){var D=r;return function(B,$){if(D===u)throw new Error("Generator is already running");if(D===l){if(B==="throw")throw $;return L()}for(R.method=B,R.arg=$;;){var W=R.delegate;if(W){var re=w(W,R);if(re){if(re===m)continue;return re}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if(D===r)throw D=l,R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);D=u;var Q=n(z,O,R);if(Q.type==="normal"){if(D=R.done?l:f,Q.arg===m)continue;return{value:Q.arg,done:R.done}}else Q.type==="throw"&&(D=l,R.method="throw",R.arg=Q.arg)}}}function w(z,O){var R=z.iterator[O.method];if(R===s){if(O.delegate=null,O.method==="throw"){if(z.iterator.return&&(O.method="return",O.arg=s,w(z,O),O.method==="throw"))return m;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var D=n(R,z.iterator,O.arg);if(D.type==="throw")return O.method="throw",O.arg=D.arg,O.delegate=null,m;var H=D.arg;if(!H)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,m;if(H.done)O[z.resultName]=H.value,O.next=z.nextLoc,O.method!=="return"&&(O.method="next",O.arg=s);else return H;return O.delegate=null,m}S(c),a(c,t,"Generator"),a(c,h,function(){return this}),a(c,"toString",function(){return"[object Generator]"});function v(z){var O={tryLoc:z[0]};1 in z&&(O.catchLoc=z[1]),2 in z&&(O.finallyLoc=z[2],O.afterLoc=z[3]),this.tryEntries.push(O)}function C(z){var O=z.completion||{};O.type="normal",delete O.arg,z.completion=O}function M(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(v,this),this.reset(!0)}e.keys=function(z){var O=[];for(var R in z)O.push(R);return O.reverse(),function D(){for(;O.length;){var H=O.pop();if(H in z)return D.value=H,D.done=!1,D}return D.done=!0,D}};function E(z){if(z){var O=z[h];if(O)return O.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var R=-1,D=function H(){for(;++R<z.length;)if(F.call(z,R))return H.value=z[R],H.done=!1,H;return H.value=s,H.done=!0,H};return D.next=D}}return{next:L}}e.values=E;function L(){return{value:s,done:!0}}return M.prototype={constructor:M,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(C),!z)for(var O in this)O.charAt(0)==="t"&&F.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=s)},stop:function(){this.done=!0;var z=this.tryEntries[0],O=z.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var O=this;function R(re,Q){return B.type="throw",B.arg=z,O.next=re,Q&&(O.method="next",O.arg=s),!!Q}for(var D=this.tryEntries.length-1;D>=0;--D){var H=this.tryEntries[D],B=H.completion;if(H.tryLoc==="root")return R("end");if(H.tryLoc<=this.prev){var $=F.call(H,"catchLoc"),W=F.call(H,"finallyLoc");if($&&W){if(this.prev<H.catchLoc)return R(H.catchLoc,!0);if(this.prev<H.finallyLoc)return R(H.finallyLoc)}else if($){if(this.prev<H.catchLoc)return R(H.catchLoc,!0)}else if(W){if(this.prev<H.finallyLoc)return R(H.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(z,O){for(var R=this.tryEntries.length-1;R>=0;--R){var D=this.tryEntries[R];if(D.tryLoc<=this.prev&&F.call(D,"finallyLoc")&&this.prev<D.finallyLoc){var H=D;break}}H&&(z==="break"||z==="continue")&&H.tryLoc<=O&&O<=H.finallyLoc&&(H=null);var B=H?H.completion:{};return B.type=z,B.arg=O,H?(this.method="next",this.next=H.finallyLoc,m):this.complete(B)},complete:function(z,O){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&O&&(this.next=O),m},finish:function(z){for(var O=this.tryEntries.length-1;O>=0;--O){var R=this.tryEntries[O];if(R.finallyLoc===z)return this.complete(R.completion,R.afterLoc),C(R),m}},catch:function(z){for(var O=this.tryEntries.length-1;O>=0;--O){var R=this.tryEntries[O];if(R.tryLoc===z){var D=R.completion;if(D.type==="throw"){var H=D.arg;C(R)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(z,O,R){return this.delegate={iterator:E(z),resultName:O,nextLoc:R},this.method==="next"&&(this.arg=s),m}},e}(N.exports);try{regeneratorRuntime=U}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=U:Function("r","regeneratorRuntime = r")(U)}})(GY);var Fl={},I_=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,jY=ji,$Y=$h,WY=cu,YY=I_,y5=jY("".replace),Yy="["+YY+"]",XY=RegExp("^"+Yy+Yy+"*"),ZY=RegExp(Yy+Yy+"*$"),Lx=function(N){return function(U){var e=WY($Y(U));return N&1&&(e=y5(e,XY,"")),N&2&&(e=y5(e,ZY,"")),e}},R_={start:Lx(1),end:Lx(2),trim:Lx(3)},mk=fi,KY=Ki,JY=ji,QY=cu,qY=R_.trim,eX=I_,tX=JY("".charAt),Xy=mk.parseFloat,m5=mk.Symbol,x5=m5&&m5.iterator,rX=1/Xy(eX+"-0")!==-1/0||x5&&!KY(function(){Xy(Object(x5))}),nX=rX?function(U){var e=qY(QY(U)),I=Xy(e);return I===0&&tX(e,0)=="-"?-0:I}:Xy,aX=ti,b5=nX;aX({global:!0,forced:parseFloat!=b5},{parseFloat:b5});var iX=Z0,qd=co,D_=ji,oX=k_,sX=M_,lX=wi,_5=$h,uX=nc,fX=C_,cX=Tm,Px=cu,hX=vd,w5=Q2,T5=P_,vX=zm,pX=m_,dX=Ki,Cp=pX.UNSUPPORTED_Y,A5=4294967295,gX=Math.min,xk=[].push,yX=D_(/./.exec),Lp=D_(xk),e0=D_("".slice),mX=!dX(function(){var N=/(?:)/,U=N.exec;N.exec=function(){return U.apply(this,arguments)};var e="ab".split(N);return e.length!==2||e[0]!=="a"||e[1]!=="b"});oX("split",function(N,U,e){var I;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?I=function(F,s){var o=Px(_5(this)),h=s===void 0?A5:s>>>0;if(h===0)return[];if(F===void 0)return[o];if(!sX(F))return qd(U,o,F,h);for(var y=[],t=(F.ignoreCase?"i":"")+(F.multiline?"m":"")+(F.unicode?"u":"")+(F.sticky?"y":""),a=0,i=new RegExp(F.source,t+"g"),n,r,f;(n=qd(vX,i,o))&&(r=i.lastIndex,!(r>a&&(Lp(y,e0(o,a,n.index)),n.length>1&&n.index<o.length&&iX(xk,y,w5(n,1)),f=n[0].length,a=r,y.length>=h)));)i.lastIndex===n.index&&i.lastIndex++;return a===o.length?(f||!yX(i,""))&&Lp(y,""):Lp(y,e0(o,a)),y.length>h?w5(y,0,h):y}:"0".split(void 0,0).length?I=function(F,s){return F===void 0&&s===0?[]:qd(U,this,F,s)}:I=U,[function(s,o){var h=_5(this),y=s==null?void 0:hX(s,N);return y?qd(y,s,h,o):qd(I,Px(h),s,o)},function(F,s){var o=lX(this),h=Px(F),y=e(I,o,h,s,I!==U);if(y.done)return y.value;var t=uX(o,RegExp),a=o.unicode,i=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Cp?"g":"y"),n=new t(Cp?"^(?:"+o.source+")":o,i),r=s===void 0?A5:s>>>0;if(r===0)return[];if(h.length===0)return T5(n,h)===null?[h]:[];for(var f=0,u=0,l=[];u<h.length;){n.lastIndex=Cp?0:u;var m=T5(n,Cp?e0(h,u):h),d;if(m===null||(d=gX(cX(n.lastIndex+(Cp?u:0)),h.length))===f)u=fX(h,u,a);else{if(Lp(l,e0(h,f,u)),l.length===r)return l;for(var b=1;b<=m.length-1;b++)if(Lp(l,m[b]),l.length===r)return l;u=f=d}}return Lp(l,e0(h,f)),l}]},!mX,Cp);Object.defineProperty(Fl,"__esModule",{value:!0});Fl.isArrayOfType=AX;Fl.isNumber=SX;Fl.arrayEqual=MX;Fl.transpose=EX;Fl.makeGenerator=bk;Fl.iter=wk;Fl.chain=kX;Fl.xSplit=CX;Fl.xReplace=LX;Fl.xContains=PX;Fl.hashCode=IX;var xX=regeneratorRuntime.mark(bk),bX=regeneratorRuntime.mark(_k);function Zy(N){return TX(N)||wX(N)||_X()}function _X(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function wX(N){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]")return Array.from(N)}function TX(N){if(Array.isArray(N)){for(var U=0,e=new Array(N.length);U<N.length;U++)e[U]=N[U];return e}}function AX(N,U){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return!!(N instanceof Array&&N.hasOwnProperty(e)&&(U===String?typeof N[e]=="string":N[e]instanceof U))}function SX(N){return!isNaN(parseFloat(N))&&isFinite(N)}function MX(N,U){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e?Object.keys(N).map(function(I){return N[I]===U[I]}).reduce(function(I,F){return I&&F},!0):Zy(new Set(N.filter(function(I){return!new Set(U).has(I)}))).length===0}function EX(N){var U=N.map(function(e){return e.length}).reduce(function(e,I){return Math.max(e,I)},0);return Zy(Array(U).keys()).map(function(e){return N.map(function(I){return I[e]})})}function bk(N){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(N,"t0",1);case 1:case"end":return e.stop()}},xX)}function _k(N,U){var e,I,F,s,o,h,y,t,a,i=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=i.length>2&&i[2]!==void 0?i[2]:function(){return!1},I=0,F=!0,s=!1,o=void 0,r.prev=5,h=N[Symbol.iterator]();case 7:if(F=(y=h.next()).done){r.next=18;break}if(t=y.value,!e()){r.next=11;break}return r.abrupt("return");case 11:if(a=U(t,I++),!a){r.next=15;break}return r.next=15,a;case 15:F=!0,r.next=7;break;case 18:r.next=24;break;case 20:r.prev=20,r.t0=r.catch(5),s=!0,o=r.t0;case 24:r.prev=24,r.prev=25,!F&&h.return!=null&&h.return();case 27:if(r.prev=27,!s){r.next=30;break}throw o;case 30:return r.finish(27);case 31:return r.finish(24);case 32:case"end":return r.stop()}},bX,null,[[5,20,24,32],[25,,27,31]])}function wk(N,U){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return!1};return Array.from(_k(N,U,e))}function kX(N){for(var U=arguments.length,e=new Array(U>1?U-1:0),I=1;I<U;I++)e[I-1]=arguments[I];return Array.from(wk(N,e.reduce(function(F,s){return function(o,h){var y=F(o,h),t=y?s(y,h):!1;return t===!0?y:t}},function(F){return F})))}function CX(N){for(var U=arguments.length,e=new Array(U>1?U-1:0),I=1;I<U;I++)e[I-1]=arguments[I];return e.reduce(function(F,s){return F.map(function(o){return o.split(s)}).reduce(function(o,h){return[].concat(Zy(o),Zy(h))},[])},[N])}function LX(N){for(var U=arguments.length,e=new Array(U>1?U-1:0),I=1;I<U;I++)e[I-1]=arguments[I];return e.reduce(function(F,s){return F.split(s[0]).join(s[1])},N)}function PX(N){for(var U=arguments.length,e=new Array(U>1?U-1:0),I=1;I<U;I++)e[I-1]=arguments[I];return e.filter(function(F){return N.includes(F)})}function IX(N){var U=0,e;if(N.length===0)return U;for(var I=0;I<N.length;I++)e=N.charCodeAt(I),U=(U<<5)-U+e,U=U&U;return U}var os={},RX=ti,DX=ji,FX=Y2.indexOf,OX=md,Jb=DX([].indexOf),S5=!!Jb&&1/Jb([1],1,-0)<0,zX=OX("indexOf");RX({target:"Array",proto:!0,forced:S5||!zX},{indexOf:function(U){var e=arguments.length>1?arguments[1]:void 0;return S5?Jb(this,U,e)||0:FX(this,U,e)}});var NX=rk,BX=ik;NX("Map",function(N){return function(){return N(this,arguments.length?arguments[0]:void 0)}},BX);var UX=ti,VX=Ki,HX=qu,Tk=u_,GX=P4,jX=VX(function(){Tk(1)});UX({target:"Object",stat:!0,forced:jX,sham:!GX},{getPrototypeOf:function(U){return Tk(HX(U))}});var $X=ti,WX=Fm;$X({target:"Object",stat:!0},{setPrototypeOf:WX});var YX=fi,Ak=ji,XX=Yo,ZX=tl,KX=Rl,M5=Em,JX=U0,Sk=YX.Function,QX=Ak([].concat),qX=Ak([].join),Ix={},eZ=function(N,U,e){if(!KX(Ix,U)){for(var I=[],F=0;F<U;F++)I[F]="a["+F+"]";Ix[U]=Sk("C,a","return new C("+qX(I,",")+")")}return Ix[U](N,e)},tZ=JX?Sk.bind:function(U){var e=XX(this),I=e.prototype,F=M5(arguments,1),s=function(){var h=QX(F,M5(arguments));return this instanceof s?eZ(e,h.length,h):e.apply(U,h)};return ZX(I)&&(s.prototype=I),s},rZ=ti,nZ=rl,Rx=Z0,aZ=tZ,E5=ck,iZ=wi,k5=tl,oZ=dd,Mk=Ki,F_=nZ("Reflect","construct"),sZ=Object.prototype,lZ=[].push,Ek=Mk(function(){function N(){}return!(F_(function(){},[],N)instanceof N)}),kk=!Mk(function(){F_(function(){})}),C5=Ek||kk;rZ({target:"Reflect",stat:!0,forced:C5,sham:C5},{construct:function(U,e){E5(U),iZ(e);var I=arguments.length<3?U:E5(arguments[2]);if(kk&&!Ek)return F_(U,e,I);if(U==I){switch(e.length){case 0:return new U;case 1:return new U(e[0]);case 2:return new U(e[0],e[1]);case 3:return new U(e[0],e[1],e[2]);case 4:return new U(e[0],e[1],e[2],e[3])}var F=[null];return Rx(lZ,F,e),new(Rx(aZ,U,F))}var s=I.prototype,o=oZ(k5(s)?s:sZ),h=Rx(U,o,e);return k5(h)?h:o}});var uZ=ti,fZ=fk;uZ({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:fZ});var cZ=co,zc=function(N){return cZ(Map.prototype.entries,N)},hZ=ti,vZ=wi,pZ=ml,dZ=zc,gZ=Bo;hZ({target:"Map",proto:!0,real:!0,forced:!0},{every:function(U){var e=vZ(this),I=dZ(e),F=pZ(U,arguments.length>1?arguments[1]:void 0);return!gZ(I,function(s,o,h){if(!F(o,s,e))return h()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var yZ=ti,mZ=rl,xZ=ml,bZ=co,_Z=Yo,wZ=wi,TZ=nc,AZ=zc,SZ=Bo;yZ({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(U){var e=wZ(this),I=AZ(e),F=xZ(U,arguments.length>1?arguments[1]:void 0),s=new(TZ(e,mZ("Map"))),o=_Z(s.set);return SZ(I,function(h,y){F(y,h,e)&&bZ(o,s,h,y)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),s}});var MZ=ti,EZ=wi,kZ=ml,CZ=zc,LZ=Bo;MZ({target:"Map",proto:!0,real:!0,forced:!0},{find:function(U){var e=EZ(this),I=CZ(e),F=kZ(U,arguments.length>1?arguments[1]:void 0);return LZ(I,function(s,o,h){if(F(o,s,e))return h(o)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var PZ=ti,IZ=wi,RZ=ml,DZ=zc,FZ=Bo;PZ({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(U){var e=IZ(this),I=DZ(e),F=RZ(U,arguments.length>1?arguments[1]:void 0);return FZ(I,function(s,o,h){if(F(o,s,e))return h(s)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var OZ=function(N,U){return N===U||N!=N&&U!=U},zZ=ti,NZ=wi,BZ=zc,UZ=OZ,VZ=Bo;zZ({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(U){return VZ(BZ(NZ(this)),function(e,I,F){if(UZ(I,U))return F()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var HZ=ti,GZ=wi,jZ=zc,$Z=Bo;HZ({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(U){return $Z(jZ(GZ(this)),function(e,I,F){if(I===U)return F(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var WZ=ti,YZ=rl,XZ=ml,ZZ=co,KZ=Yo,JZ=wi,QZ=nc,qZ=zc,eK=Bo;WZ({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(U){var e=JZ(this),I=qZ(e),F=XZ(U,arguments.length>1?arguments[1]:void 0),s=new(QZ(e,YZ("Map"))),o=KZ(s.set);return eK(I,function(h,y){ZZ(o,s,F(y,h,e),y)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),s}});var tK=ti,rK=rl,nK=ml,aK=co,iK=Yo,oK=wi,sK=nc,lK=zc,uK=Bo;tK({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(U){var e=oK(this),I=lK(e),F=nK(U,arguments.length>1?arguments[1]:void 0),s=new(sK(e,rK("Map"))),o=iK(s.set);return uK(I,function(h,y){aK(o,s,h,F(y,h,e))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),s}});var fK=ti,cK=Yo,hK=wi,vK=Bo;fK({target:"Map",proto:!0,real:!0,forced:!0},{merge:function(U){for(var e=hK(this),I=cK(e.set),F=arguments.length,s=0;s<F;)vK(arguments[s++],I,{that:e,AS_ENTRIES:!0});return e}});var pK=ti,dK=fi,gK=wi,yK=Yo,mK=zc,xK=Bo,bK=dK.TypeError;pK({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(U){var e=gK(this),I=mK(e),F=arguments.length<2,s=F?void 0:arguments[1];if(yK(U),xK(I,function(o,h){F?(F=!1,s=h):s=U(s,h,o,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),F)throw bK("Reduce of empty map with no initial value");return s}});var _K=ti,wK=wi,TK=ml,AK=zc,SK=Bo;_K({target:"Map",proto:!0,real:!0,forced:!0},{some:function(U){var e=wK(this),I=AK(e),F=TK(U,arguments.length>1?arguments[1]:void 0);return SK(I,function(s,o,h){if(F(o,s,e))return h()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}});var MK=ti,EK=fi,Dx=co,kK=wi,t0=Yo,CK=EK.TypeError;MK({target:"Map",proto:!0,real:!0,forced:!0},{update:function(U,e){var I=kK(this),F=t0(I.get),s=t0(I.has),o=t0(I.set),h=arguments.length;t0(e);var y=Dx(s,I,U);if(!y&&h<3)throw CK("Updating absent value");var t=y?Dx(F,I,U):t0(h>2?arguments[2]:void 0)(U,I);return Dx(o,I,U,e(t,U,I)),I}});Object.defineProperty(os,"__esModule",{value:!0});os.WrongTableNameError=os.TableAlreadyExistsError=os.SQLParseError=os.ArgumentTypeError=os.WrongSchemaError=os.NoSuchColumnError=os.MixedTypeError=os.FileNotFoundError=void 0;function b0(N){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b0=function(e){return typeof e}:b0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b0(N)}function Zh(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function Kh(N,U){return U&&(b0(U)==="object"||typeof U=="function")?U:LK(N)}function LK(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function Jh(N,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(U&&U.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),U&&z0(N,U)}function Fc(N){var U=typeof Map=="function"?new Map:void 0;return Fc=function(I){if(I===null||!IK(I))return I;if(typeof I!="function")throw new TypeError("Super expression must either be null or a function");if(typeof U!="undefined"){if(U.has(I))return U.get(I);U.set(I,F)}function F(){return ky(I,arguments,rc(this).constructor)}return F.prototype=Object.create(I.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),z0(F,I)},Fc(N)}function PK(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ky(N,U,e){return PK()?ky=Reflect.construct:ky=function(F,s,o){var h=[null];h.push.apply(h,s);var y=Function.bind.apply(F,h),t=new y;return o&&z0(t,o.prototype),t},ky.apply(null,arguments)}function IK(N){return Function.toString.call(N).indexOf("[native code]")!==-1}function z0(N,U){return z0=Object.setPrototypeOf||function(I,F){return I.__proto__=F,I},z0(N,U)}function rc(N){return rc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rc(N)}var RK=function(N){Jh(U,N);function U(e){var I;return Zh(this,U),I=Kh(this,rc(U).call(this,Error)),I.message="".concat(e," not found. You maybe use a wrong path or url. Be sure you use absolute path, relative one being not supported."),I.name="FileNotFoundError",I}return U}(Fc(Error));os.FileNotFoundError=RK;var DK=function(N){Jh(U,N);function U(){var e;Zh(this,U),e=Kh(this,rc(U).call(this,TypeError));for(var I=arguments.length,F=new Array(I),s=0;s<I;s++)F[s]=arguments[s];return e.message="can't work with multiple variable types: [".concat(F.join(","),"]."),e.name="MixedTypeError",e}return U}(Fc(TypeError));os.MixedTypeError=DK;var FK=function(N){Jh(U,N);function U(e,I){var F;return Zh(this,U),F=Kh(this,rc(U).call(this,Error)),F.message="".concat(e," not found in [").concat(I.join(", "),"]."),F.name="NoSuchColumnError",F}return U}(Fc(Error));os.NoSuchColumnError=FK;var OK=function(N){Jh(U,N);function U(e,I){var F;return Zh(this,U),F=Kh(this,rc(U).call(this,Error)),F.message="[".concat(e.join(", "),"] while expecting [").concat(I.join(", "),"]."),F.name="WrongSchemaError",F}return U}(Fc(Error));os.WrongSchemaError=OK;var zK=function(N){Jh(U,N);function U(e,I){var F;return Zh(this,U),F=Kh(this,rc(U).call(this,TypeError)),F.message="".concat(e&&e.constructor?e.constructor.name:b0(e)," while expecting ").concat(I,"."),F.name="ArgumentTypeError",F}return U}(Fc(TypeError));os.ArgumentTypeError=zK;var NK=function(N){Jh(U,N);function U(e){var I;return Zh(this,U),I=Kh(this,rc(U).call(this,Error)),I.message="".concat(e,"."),I.name="SQLParseError",I}return U}(Fc(Error));os.SQLParseError=NK;var BK=function(N){Jh(U,N);function U(e){var I;return Zh(this,U),I=Kh(this,rc(U).call(this,Error)),I.message="The SQL temporary table ".concat(e," already exits. Use overwrite = true to overwrite it."),I.name="TableAlreadyExistsError",I}return U}(Fc(Error));os.TableAlreadyExistsError=BK;var UK=function(N){Jh(U,N);function U(e){var I;return Zh(this,U),I=Kh(this,rc(U).call(this,Error)),I.message="The SQL temporary table ".concat(e," is not allowed. Avoid to use Spaces, quotes, tabs...."),I.name="WrongTableNameError",I}return U}(Fc(Error));os.WrongTableNameError=UK;var ag={},VK=ti,HK=ek,GK=Ki,jK=tl,$K=Nm.exports.onFreeze,Qb=Object.freeze,WK=GK(function(){Qb(1)});VK({target:"Object",stat:!0,forced:WK,sham:!HK},{freeze:function(U){return Qb&&jK(U)?Qb($K(U)):U}});Object.defineProperty(ag,"__esModule",{value:!0});ag.default=void 0;var L5=Fl,ey=os;function Pp(N,U,e){return U in N?Object.defineProperty(N,U,{value:e,enumerable:!0,configurable:!0,writable:!0}):N[U]=e,N}function Ip(N){return ZK(N)||XK(N)||YK()}function YK(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function XK(N){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]")return Array.from(N)}function ZK(N){if(Array.isArray(N)){for(var U=0,e=new Array(N.length);U<N.length;U++)e[U]=N[U];return e}}function KK(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function P5(N,U){for(var e=0;e<U.length;e++){var I=U[e];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function JK(N,U,e){return U&&P5(N.prototype,U),e&&P5(N,e),N}var Ec=Symbol("columns"),Mh=Symbol("values"),QK=function(){function N(U,e){if(KK(this,N),!U)throw new ey.ArgumentTypeError(U,"Row | Array | Object");this[Ec]=e||Object.keys(U),this[Mh]=Object.freeze(this._build(U))}return JK(N,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function(){var e,I,F;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=0,I=Object.values(this[Mh]);case 1:if(!(e<I.length)){o.next=8;break}return F=I[e],o.next=5,F;case 5:e++,o.next=1;break;case 8:case"end":return o.stop()}},F,this)})},{key:"__newInstance__",value:function(e,I){var F;return(0,L5.arrayEqual)(this[Ec],I)?Object.assign(Object.create(Object.getPrototypeOf(this)),this,(F={},Pp(F,Mh,e),Pp(F,Ec,Ip(I)),F)):new N(e,I)}},{key:"_build",value:function(e){if(e instanceof Array)return this._fromArray(e);if(e instanceof N)return this._fromObject(e[Mh]);if(e instanceof Object&&e!==null)return this._fromObject(e);throw new ey.ArgumentTypeError(e,"Row | Array | Object")}},{key:"_fromObject",value:function(e){return Object.assign.apply(Object,[{}].concat(Ip(this[Ec].map(function(I){return Pp({},I,e[I])}))))}},{key:"_fromArray",value:function(e){return Object.assign.apply(Object,[{}].concat(Ip(Object.entries(this[Ec]).map(function(I){return Pp({},I[1],e[I[0]])}))))}},{key:"toDict",value:function(){return Object.assign({},this[Mh])}},{key:"toArray",value:function(){return Ip(this)}},{key:"size",value:function(){return this[Ec].length}},{key:"hash",value:function(){return(0,L5.hashCode)(JSON.stringify(this[Mh]))}},{key:"has",value:function(e){return this[Ec].includes(e)}},{key:"select",value:function(){for(var e=this,I=arguments.length,F=new Array(I),s=0;s<I;s++)F[s]=arguments[s];return this.__newInstance__(Object.assign.apply(Object,[{}].concat(Ip(F.map(function(o){return Pp({},o,e.get(o))})))),F)}},{key:"get",value:function(e){if(!this.has(e))throw new ey.NoSuchColumnError(e,this[Ec]);return this[Mh][e]}},{key:"set",value:function(e,I){var F=Object.assign({},this[Mh],Pp({},e,I));return this.__newInstance__(F,Object.keys(F))}},{key:"delete",value:function(e){if(!this.has(e))throw new ey.NoSuchColumnError(e,this[Ec]);return this.select.apply(this,Ip(this[Ec].filter(function(I){return I!==e})))}}]),N}(),qK=QK;ag.default=qK;var ig={},eJ=ti,tJ=el,rJ=YE,nJ=Mf,aJ=Gh,iJ=J0;eJ({target:"Object",stat:!0,sham:!tJ},{getOwnPropertyDescriptors:function(U){for(var e=nJ(U),I=aJ.f,F=rJ(e),s={},o=0,h,y;F.length>o;)y=I(e,h=F[o++]),y!==void 0&&iJ(s,h,y);return s}});var wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.__hashes__=wf.__groups__=wf.__rows__=wf.__columns__=void 0;var oJ=Symbol("columns");wf.__columns__=oJ;var sJ=Symbol("rows");wf.__rows__=sJ;var lJ=Symbol("groups");wf.__groups__=lJ;var uJ=Symbol("hashes");wf.__hashes__=uJ;Object.defineProperty(ig,"__esModule",{value:!0});ig.groupBy=bJ;ig.GroupedDataFrame=void 0;var Rp=wf;function fJ(N,U){return vJ(N)||hJ(N,U)||cJ()}function cJ(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function hJ(N,U){var e=[],I=!0,F=!1,s=void 0;try{for(var o=N[Symbol.iterator](),h;!(I=(h=o.next()).done)&&(e.push(h.value),!(U&&e.length===U));I=!0);}catch(y){F=!0,s=y}finally{try{!I&&o.return!=null&&o.return()}finally{if(F)throw s}}return e}function vJ(N){if(Array.isArray(N))return N}function I5(N,U){if(N==null)return{};var e=pJ(N,U),I,F;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(N);for(F=0;F<s.length;F++)I=s[F],!(U.indexOf(I)>=0)&&(!Object.prototype.propertyIsEnumerable.call(N,I)||(e[I]=N[I]))}return e}function pJ(N,U){if(N==null)return{};var e={},I=Object.keys(N),F,s;for(s=0;s<I.length;s++)F=I[s],!(U.indexOf(F)>=0)&&(e[F]=N[F]);return e}function R5(N,U){var e=Object.keys(N);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(N);U&&(I=I.filter(function(F){return Object.getOwnPropertyDescriptor(N,F).enumerable})),e.push.apply(e,I)}return e}function ty(N){for(var U=1;U<arguments.length;U++){var e=arguments[U]!=null?arguments[U]:{};U%2?R5(e,!0).forEach(function(I){p0(N,I,e[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(e)):R5(e).forEach(function(I){Object.defineProperty(N,I,Object.getOwnPropertyDescriptor(e,I))})}return N}function p0(N,U,e){return U in N?Object.defineProperty(N,U,{value:e,enumerable:!0,configurable:!0,writable:!0}):N[U]=e,N}function Ls(N){return yJ(N)||gJ(N)||dJ()}function dJ(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function gJ(N){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]")return Array.from(N)}function yJ(N){if(Array.isArray(N)){for(var U=0,e=new Array(N.length);U<N.length;U++)e[U]=N[U];return e}}function mJ(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function D5(N,U){for(var e=0;e<U.length;e++){var I=U[e];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function xJ(N,U,e){return U&&D5(N.prototype,U),e&&D5(N,e),N}var Ck=function(){function N(U,e,I,F){mJ(this,N),this[Rp.__groups__]=I,this[Rp.__hashes__]=F,this.df=U,this.on=e.length>0?e:U.listColumns()}return xJ(N,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function U(){var e,I,F,s,o,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,I=!1,F=void 0,t.prev=3,s=this[Rp.__hashes__][Symbol.iterator]();case 5:if(e=(o=s.next()).done){t.next=12;break}return h=o.value,t.next=9,this[Rp.__groups__][h];case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),I=!0,F=t.t0;case 18:t.prev=18,t.prev=19,!e&&s.return!=null&&s.return();case 21:if(t.prev=21,!I){t.next=24;break}throw F;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},U,this,[[3,14,18,26],[19,,21,25]])})},{key:"get",value:function(e){return this[Rp.__groups__][e]}},{key:"toCollection",value:function(){return Ls(this)}},{key:"show",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Ls(this).map(function(I){var F=I.group,s=I.groupKey,o=`--
[`.concat(JSON.stringify(s),`]
--`);return e||console.log(o),o+`
`+F.show(10,e)}).reduce(function(I,F){return I+`
`+F})}},{key:"listGroups",value:function(){return Ls(this).map(function(e){var I=e.groupKey;return I})}},{key:"listHashs",value:function(){return this[Rp.__hashes__]}},{key:"map",value:function(e){var I,F=Ls(this).map(function(s){var o=s.group;return o.map(e)});return this.df.__newInstance__((I=[]).concat.apply(I,Ls(F.map(function(s){return s.toCollection()}))),F[0].listColumns())}},{key:"filter",value:function(e){var I,F=Ls(this).map(function(s){var o=s.group;return o.filter(e)}).filter(function(s){return s.listColumns().length>0});return F.length===0?this.df.__newInstance__([],this.df.listColumns()):this.df.__newInstance__((I=[]).concat.apply(I,Ls(F.map(function(s){return s.toCollection()}))),this.df.listColumns())}},{key:"chain",value:function(){for(var e,I=arguments.length,F=new Array(I),s=0;s<I;s++)F[s]=arguments[s];var o=Ls(this).map(function(h){var y=h.group;return y.chain.apply(y,F)});return this.df.__newInstance__((e=[]).concat.apply(e,Ls(o.map(function(h){return h.toCollection()}))),o[0].listColumns())}},{key:"aggregate",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"aggregation";return this.df.__newInstance__(Ls(this).map(function(F){var s=F.group,o=F.groupKey;return ty({},o,p0({},I,e(s,o)))}),[].concat(Ls(this.on),[I]))}},{key:"pivot",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return s.count()},F=[].concat(Ls(this.on),Ls(this.df.distinct(e).toArray(e)));return this.df.__newInstance__(this.aggregate(function(s){return s.groupBy(e).aggregate(function(o,h){return p0({},h[e],I(o,h))}).toArray("aggregation").reduce(function(o,h){return ty({},o,{},h)},{})}).toCollection().map(function(s){var o=s.aggregation,h=I5(s,["aggregation"]);return ty({},h,{},o)}),F)}},{key:"melt",value:function(){var e=this,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"variable",F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"value",s=[].concat(Ls(this.on),[I,F]);return this.df.__newInstance__(this.aggregate(function(o){return Object.entries(o.toDict()).reduce(function(h,y){var t=fJ(y,2),a=t[0],i=t[1];return[].concat(Ls(h),Ls(i.reduce(function(n,r){var f;return e.on.includes(a)?n:[].concat(Ls(n),[(f={},p0(f,I,a),p0(f,F,r),f)])},[])))},[])}).toCollection().reduce(function(o,h){var y=h.aggregation,t=I5(h,["aggregation"]);return[].concat(Ls(o),Ls(y.map(function(a){return ty({},t,{},a)})))},[]),s)}}]),N}();ig.GroupedDataFrame=Ck;function bJ(N,U){var e={},I=[],F=!0,s=!1,o=void 0;try{for(var h=N.toCollection(!0)[Symbol.iterator](),y;!(F=(y=h.next()).done);F=!0){var t=y.value,a=t.select.apply(t,Ls(U)).hash();e[a]||(I.push(a),e[a]=[]),e[a].push(t)}}catch(n){s=!0,o=n}finally{try{!F&&h.return!=null&&h.return()}finally{if(s)throw o}}var i=I.reduce(function(n,r){var f;return n[r]={groupKey:(f=e[r][0]).select.apply(f,Ls(U)).toDict(),hash:r,group:new N.constructor(e[r],N.listColumns())},n},{});return new Ck(N,U,i,I)}var Iu={},_J=fi,wJ=_J.Promise,TJ=fi,AJ=TJ.TypeError,SJ=function(N,U){if(N<U)throw AJ("Not enough arguments");return N},MJ=$v,Lk=/(?:ipad|iphone|ipod).*applewebkit/i.test(MJ),Zu=fi,EJ=Z0,kJ=ml,F5=ss,CJ=Rl,LJ=Ki,O5=qE,PJ=Em,z5=xm,IJ=SJ,RJ=Lk,DJ=ng,qb=Zu.setImmediate,e2=Zu.clearImmediate,FJ=Zu.process,Fx=Zu.Dispatch,OJ=Zu.Function,N5=Zu.MessageChannel,zJ=Zu.String,Ox=0,_0={},B5="onreadystatechange",N0,yv,zx,Nx;try{N0=Zu.location}catch{}var O_=function(N){if(CJ(_0,N)){var U=_0[N];delete _0[N],U()}},Bx=function(N){return function(){O_(N)}},U5=function(N){O_(N.data)},V5=function(N){Zu.postMessage(zJ(N),N0.protocol+"//"+N0.host)};(!qb||!e2)&&(qb=function(U){IJ(arguments.length,1);var e=F5(U)?U:OJ(U),I=PJ(arguments,1);return _0[++Ox]=function(){EJ(e,void 0,I)},yv(Ox),Ox},e2=function(U){delete _0[U]},DJ?yv=function(N){FJ.nextTick(Bx(N))}:Fx&&Fx.now?yv=function(N){Fx.now(Bx(N))}:N5&&!RJ?(zx=new N5,Nx=zx.port2,zx.port1.onmessage=U5,yv=kJ(Nx.postMessage,Nx)):Zu.addEventListener&&F5(Zu.postMessage)&&!Zu.importScripts&&N0&&N0.protocol!=="file:"&&!LJ(V5)?(yv=V5,Zu.addEventListener("message",U5,!1)):B5 in z5("script")?yv=function(N){O5.appendChild(z5("script"))[B5]=function(){O5.removeChild(this),O_(N)}}:yv=function(N){setTimeout(Bx(N),0)});var Pk={set:qb,clear:e2},NJ=$v,BJ=fi,UJ=/ipad|iphone|ipod/i.test(NJ)&&BJ.Pebble!==void 0,VJ=$v,HJ=/web0s(?!.*chrome)/i.test(VJ),Uv=fi,H5=ml,GJ=Gh.f,Ux=Pk.set,jJ=Lk,$J=UJ,WJ=HJ,Vx=ng,G5=Uv.MutationObserver||Uv.WebKitMutationObserver,j5=Uv.document,$5=Uv.process,ry=Uv.Promise,W5=GJ(Uv,"queueMicrotask"),Ik=W5&&W5.value,r0,kv,w0,Bp,Hx,Gx,ny,Y5;Ik||(r0=function(){var N,U;for(Vx&&(N=$5.domain)&&N.exit();kv;){U=kv.fn,kv=kv.next;try{U()}catch(e){throw kv?Bp():w0=void 0,e}}w0=void 0,N&&N.enter()},!jJ&&!Vx&&!WJ&&G5&&j5?(Hx=!0,Gx=j5.createTextNode(""),new G5(r0).observe(Gx,{characterData:!0}),Bp=function(){Gx.data=Hx=!Hx}):!$J&&ry&&ry.resolve?(ny=ry.resolve(void 0),ny.constructor=ry,Y5=H5(ny.then,ny),Bp=function(){Y5(r0)}):Vx?Bp=function(){$5.nextTick(r0)}:(Ux=H5(Ux,Uv),Bp=function(){Ux(r0)}));var YJ=Ik||function(N){var U={fn:N,next:void 0};w0&&(w0.next=U),kv||(kv=U,Bp()),w0=U},z_={},X5=Yo,XJ=function(N){var U,e;this.promise=new N(function(I,F){if(U!==void 0||e!==void 0)throw TypeError("Bad Promise constructor");U=I,e=F}),this.resolve=X5(U),this.reject=X5(e)};z_.f=function(N){return new XJ(N)};var ZJ=wi,KJ=tl,JJ=z_,QJ=function(N,U){if(ZJ(N),KJ(U)&&U.constructor===N)return U;var e=JJ.f(N),I=e.resolve;return I(U),e.promise},qJ=fi,eQ=function(N,U){var e=qJ.console;e&&e.error&&(arguments.length==1?e.error(N):e.error(N,U))},tQ=function(N){try{return{error:!1,value:N()}}catch(U){return{error:!0,value:U}}},Rk=function(){this.head=null,this.tail=null};Rk.prototype={add:function(N){var U={item:N,next:null};this.head?this.tail.next=U:this.head=U,this.tail=U},get:function(){var N=this.head;if(N)return this.head=N.next,this.tail===N&&(this.tail=null),N.item}};var rQ=Rk,nQ=typeof window=="object",Um=ti,nh=fi,aQ=rl,ah=co,Ky=wJ,Z5=Pu.exports,iQ=nk,K5=Fm,oQ=Q0,sQ=S_,t2=Yo,T0=ss,lQ=tl,uQ=T_,fQ=bm,J5=Bo,cQ=l_,hQ=nc,Dk=Pk.set,N_=YJ,vQ=QJ,pQ=eQ,Fk=z_,r2=tQ,dQ=rQ,B_=Xh,gQ=X0,yQ=es,mQ=nQ,Jy=ng,Q5=Wv,xQ=yQ("species"),Nc="Promise",q5=B_.getterFor(Nc),bQ=B_.set,_Q=B_.getterFor(Nc),Av=Ky&&Ky.prototype,qf=Ky,n0=Av,Ok=nh.TypeError,n2=nh.document,U_=nh.process,rd=Fk.f,wQ=rd,TQ=!!(n2&&n2.createEvent&&nh.dispatchEvent),zk=T0(nh.PromiseRejectionEvent),Nk="unhandledrejection",AQ="rejectionhandled",eS=0,Bk=1,SQ=2,V_=1,Uk=2,a2=!1,ay,tS,Vk,rS,og=gQ(Nc,function(){var N=fQ(qf),U=N!==String(qf);if(!U&&Q5===66)return!0;if(Q5>=51&&/native code/.test(N))return!1;var e=new qf(function(s){s(1)}),I=function(s){s(function(){},function(){})},F=e.constructor={};return F[xQ]=I,a2=e.then(function(){})instanceof I,a2?!U&&mQ&&!zk:!0}),MQ=og||!cQ(function(N){qf.all(N).catch(function(){})}),Hk=function(N){var U;return lQ(N)&&T0(U=N.then)?U:!1},Gk=function(N,U){var e=U.value,I=U.state==Bk,F=I?N.ok:N.fail,s=N.resolve,o=N.reject,h=N.domain,y,t,a;try{F?(I||(U.rejection===Uk&&kQ(U),U.rejection=V_),F===!0?y=e:(h&&h.enter(),y=F(e),h&&(h.exit(),a=!0)),y===N.promise?o(Ok("Promise-chain cycle")):(t=Hk(y))?ah(t,y,s,o):s(y)):o(e)}catch(i){h&&!a&&h.exit(),o(i)}},jk=function(N,U){N.notified||(N.notified=!0,N_(function(){for(var e=N.reactions,I;I=e.get();)Gk(I,N);N.notified=!1,U&&!N.rejection&&EQ(N)}))},$k=function(N,U,e){var I,F;TQ?(I=n2.createEvent("Event"),I.promise=U,I.reason=e,I.initEvent(N,!1,!0),nh.dispatchEvent(I)):I={promise:U,reason:e},!zk&&(F=nh["on"+N])?F(I):N===Nk&&pQ("Unhandled promise rejection",e)},EQ=function(N){ah(Dk,nh,function(){var U=N.facade,e=N.value,I=nS(N),F;if(I&&(F=r2(function(){Jy?U_.emit("unhandledRejection",e,U):$k(Nk,U,e)}),N.rejection=Jy||nS(N)?Uk:V_,F.error))throw F.value})},nS=function(N){return N.rejection!==V_&&!N.parent},kQ=function(N){ah(Dk,nh,function(){var U=N.facade;Jy?U_.emit("rejectionHandled",U):$k(AQ,U,N.value)})},Gp=function(N,U,e){return function(I){N(U,I,e)}},Kp=function(N,U,e){N.done||(N.done=!0,e&&(N=e),N.value=U,N.state=SQ,jk(N,!0))},i2=function(N,U,e){if(!N.done){N.done=!0,e&&(N=e);try{if(N.facade===U)throw Ok("Promise can't be resolved itself");var I=Hk(U);I?N_(function(){var F={done:!1};try{ah(I,U,Gp(i2,F,N),Gp(Kp,F,N))}catch(s){Kp(F,s,N)}}):(N.value=U,N.state=Bk,jk(N,!1))}catch(F){Kp({done:!1},F,N)}}};if(og&&(qf=function(U){uQ(this,n0),t2(U),ah(ay,this);var e=q5(this);try{U(Gp(i2,e),Gp(Kp,e))}catch(I){Kp(e,I)}},n0=qf.prototype,ay=function(U){bQ(this,{type:Nc,done:!1,notified:!1,parent:!1,reactions:new dQ,rejection:!1,state:eS,value:void 0})},ay.prototype=iQ(n0,{then:function(U,e){var I=_Q(this),F=rd(hQ(this,qf));return I.parent=!0,F.ok=T0(U)?U:!0,F.fail=T0(e)&&e,F.domain=Jy?U_.domain:void 0,I.state==eS?I.reactions.add(F):N_(function(){Gk(F,I)}),F.promise},catch:function(N){return this.then(void 0,N)}}),tS=function(){var N=new ay,U=q5(N);this.promise=N,this.resolve=Gp(i2,U),this.reject=Gp(Kp,U)},Fk.f=rd=function(N){return N===qf||N===Vk?new tS(N):wQ(N)},T0(Ky)&&Av!==Object.prototype)){rS=Av.then,a2||(Z5(Av,"then",function(U,e){var I=this;return new qf(function(F,s){ah(rS,I,F,s)}).then(U,e)},{unsafe:!0}),Z5(Av,"catch",n0.catch,{unsafe:!0}));try{delete Av.constructor}catch{}K5&&K5(Av,n0)}Um({global:!0,wrap:!0,forced:og},{Promise:qf});oQ(qf,Nc,!1);sQ(Nc);Vk=aQ(Nc);Um({target:Nc,stat:!0,forced:og},{reject:function(U){var e=rd(this);return ah(e.reject,void 0,U),e.promise}});Um({target:Nc,stat:!0,forced:og},{resolve:function(U){return vQ(this,U)}});Um({target:Nc,stat:!0,forced:MQ},{all:function(U){var e=this,I=rd(e),F=I.resolve,s=I.reject,o=r2(function(){var h=t2(e.resolve),y=[],t=0,a=1;J5(U,function(i){var n=t++,r=!1;a++,ah(h,e,i).then(function(f){r||(r=!0,y[n]=f,--a||F(y))},s)}),--a||F(y)});return o.error&&s(o.value),I.promise},race:function(U){var e=this,I=rd(e),F=I.reject,s=r2(function(){var o=t2(e.resolve);J5(U,function(h){ah(o,e,h).then(I.resolve,F)})});return s.error&&F(s.value),I.promise}});var CQ=co,LQ=k_,PQ=wi,IQ=Tm,jx=cu,RQ=$h,DQ=vd,FQ=C_,aS=P_;LQ("match",function(N,U,e){return[function(F){var s=RQ(this),o=F==null?void 0:DQ(F,N);return o?CQ(o,F,s):new RegExp(F)[N](jx(s))},function(I){var F=PQ(this),s=jx(I),o=e(U,F,s);if(o.done)return o.value;if(!F.global)return aS(F,s);var h=F.unicode;F.lastIndex=0;for(var y=[],t=0,a;(a=aS(F,s))!==null;){var i=jx(a[0]);y[t]=i,i===""&&(F.lastIndex=FQ(s,IQ(F.lastIndex),h)),t++}return t===0?null:y}]});var yf="$";function Qy(){}Qy.prototype=H_.prototype={constructor:Qy,has:function(N){return yf+N in this},get:function(N){return this[yf+N]},set:function(N,U){return this[yf+N]=U,this},remove:function(N){var U=yf+N;return U in this&&delete this[U]},clear:function(){for(var N in this)N[0]===yf&&delete this[N]},keys:function(){var N=[];for(var U in this)U[0]===yf&&N.push(U.slice(1));return N},values:function(){var N=[];for(var U in this)U[0]===yf&&N.push(this[U]);return N},entries:function(){var N=[];for(var U in this)U[0]===yf&&N.push({key:U.slice(1),value:this[U]});return N},size:function(){var N=0;for(var U in this)U[0]===yf&&++N;return N},empty:function(){for(var N in this)if(N[0]===yf)return!1;return!0},each:function(N){for(var U in this)U[0]===yf&&N(this[U],U.slice(1),this)}};function H_(N,U){var e=new Qy;if(N instanceof Qy)N.each(function(h,y){e.set(y,h)});else if(Array.isArray(N)){var I=-1,F=N.length,s;if(U==null)for(;++I<F;)e.set(I,N[I]);else for(;++I<F;)e.set(U(s=N[I],I,N),s)}else if(N)for(var o in N)e.set(o,N[o]);return e}function iS(){}var mv=H_.prototype;iS.prototype={constructor:iS,has:mv.has,add:function(N){return N+="",this[yf+N]=N,this},remove:mv.remove,clear:mv.clear,values:mv.keys,size:mv.size,empty:mv.empty,each:mv.each};var OQ={value:function(){}};function Wk(){for(var N=0,U=arguments.length,e={},I;N<U;++N){if(!(I=arguments[N]+"")||I in e||/[\s.]/.test(I))throw new Error("illegal type: "+I);e[I]=[]}return new Cy(e)}function Cy(N){this._=N}function zQ(N,U){return N.trim().split(/^|\s+/).map(function(e){var I="",F=e.indexOf(".");if(F>=0&&(I=e.slice(F+1),e=e.slice(0,F)),e&&!U.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:I}})}Cy.prototype=Wk.prototype={constructor:Cy,on:function(N,U){var e=this._,I=zQ(N+"",e),F,s=-1,o=I.length;if(arguments.length<2){for(;++s<o;)if((F=(N=I[s]).type)&&(F=NQ(e[F],N.name)))return F;return}if(U!=null&&typeof U!="function")throw new Error("invalid callback: "+U);for(;++s<o;)if(F=(N=I[s]).type)e[F]=oS(e[F],N.name,U);else if(U==null)for(F in e)e[F]=oS(e[F],N.name,null);return this},copy:function(){var N={},U=this._;for(var e in U)N[e]=U[e].slice();return new Cy(N)},call:function(N,U){if((F=arguments.length-2)>0)for(var e=new Array(F),I=0,F,s;I<F;++I)e[I]=arguments[I+2];if(!this._.hasOwnProperty(N))throw new Error("unknown type: "+N);for(s=this._[N],I=0,F=s.length;I<F;++I)s[I].value.apply(U,e)},apply:function(N,U,e){if(!this._.hasOwnProperty(N))throw new Error("unknown type: "+N);for(var I=this._[N],F=0,s=I.length;F<s;++F)I[F].value.apply(U,e)}};function NQ(N,U){for(var e=0,I=N.length,F;e<I;++e)if((F=N[e]).name===U)return F.value}function oS(N,U,e){for(var I=0,F=N.length;I<F;++I)if(N[I].name===U){N[I]=OQ,N=N.slice(0,I).concat(N.slice(I+1));break}return e!=null&&N.push({name:U,value:e}),N}function G_(N,U){var e,I=Wk("beforesend","progress","load","error"),F,s=H_(),o=new XMLHttpRequest,h=null,y=null,t,a,i=0;typeof XDomainRequest!="undefined"&&!("withCredentials"in o)&&/^(http(s)?:)?\/\//.test(N)&&(o=new XDomainRequest),"onload"in o?o.onload=o.onerror=o.ontimeout=n:o.onreadystatechange=function(r){o.readyState>3&&n(r)};function n(r){var f=o.status,u;if(!f&&UQ(o)||f>=200&&f<300||f===304){if(t)try{u=t.call(e,o)}catch(l){I.call("error",e,l);return}else u=o;I.call("load",e,u)}else I.call("error",e,r)}if(o.onprogress=function(r){I.call("progress",e,r)},e={header:function(r,f){return r=(r+"").toLowerCase(),arguments.length<2?s.get(r):(f==null?s.remove(r):s.set(r,f+""),e)},mimeType:function(r){return arguments.length?(F=r==null?null:r+"",e):F},responseType:function(r){return arguments.length?(a=r,e):a},timeout:function(r){return arguments.length?(i=+r,e):i},user:function(r){return arguments.length<1?h:(h=r==null?null:r+"",e)},password:function(r){return arguments.length<1?y:(y=r==null?null:r+"",e)},response:function(r){return t=r,e},get:function(r,f){return e.send("GET",r,f)},post:function(r,f){return e.send("POST",r,f)},send:function(r,f,u){return o.open(r,N,!0,h,y),F!=null&&!s.has("accept")&&s.set("accept",F+",*/*"),o.setRequestHeader&&s.each(function(l,m){o.setRequestHeader(m,l)}),F!=null&&o.overrideMimeType&&o.overrideMimeType(F),a!=null&&(o.responseType=a),i>0&&(o.timeout=i),u==null&&typeof f=="function"&&(u=f,f=null),u!=null&&u.length===1&&(u=BQ(u)),u!=null&&e.on("error",u).on("load",function(l){u(null,l)}),I.call("beforesend",e,o),o.send(f==null?null:f),e},abort:function(){return o.abort(),e},on:function(){var r=I.on.apply(I,arguments);return r===I?e:r}},U!=null){if(typeof U!="function")throw new Error("invalid callback: "+U);return e.get(U)}return e}function BQ(N){return function(U,e){N(U==null?e:null)}}function UQ(N){var U=N.responseType;return U&&U!=="text"?N.response:N.responseText}function Vm(N,U){return function(e,I){var F=G_(e).mimeType(N).response(U);if(I!=null){if(typeof I!="function")throw new Error("invalid callback: "+I);return F.get(I)}return F}}var VQ=Vm("text/html",function(N){return document.createRange().createContextualFragment(N.responseText)}),HQ=Vm("application/json",function(N){return JSON.parse(N.responseText)}),GQ=Vm("text/plain",function(N){return N.responseText}),jQ=Vm("application/xml",function(N){var U=N.responseXML;if(!U)throw new Error("parse error");return U}),sS={},$x={},Wx=34,a0=10,Yx=13;function Yk(N){return new Function("d","return {"+N.map(function(U,e){return JSON.stringify(U)+": d["+e+"]"}).join(",")+"}")}function $Q(N,U){var e=Yk(N);return function(I,F){return U(e(I),F,N)}}function WQ(N){var U=Object.create(null),e=[];return N.forEach(function(I){for(var F in I)F in U||e.push(U[F]=F)}),e}function j_(N){var U=new RegExp('["'+N+`
\r]`),e=N.charCodeAt(0);function I(t,a){var i,n,r=F(t,function(f,u){if(i)return i(f,u-1);n=f,i=a?$Q(f,a):Yk(f)});return r.columns=n||[],r}function F(t,a){var i=[],n=t.length,r=0,f=0,u,l=n<=0,m=!1;t.charCodeAt(n-1)===a0&&--n,t.charCodeAt(n-1)===Yx&&--n;function d(){if(l)return $x;if(m)return m=!1,sS;var g,_=r,p;if(t.charCodeAt(_)===Wx){for(;r++<n&&t.charCodeAt(r)!==Wx||t.charCodeAt(++r)===Wx;);return(g=r)>=n?l=!0:(p=t.charCodeAt(r++))===a0?m=!0:p===Yx&&(m=!0,t.charCodeAt(r)===a0&&++r),t.slice(_+1,g-1).replace(/""/g,'"')}for(;r<n;){if((p=t.charCodeAt(g=r++))===a0)m=!0;else if(p===Yx)m=!0,t.charCodeAt(r)===a0&&++r;else if(p!==e)continue;return t.slice(_,g)}return l=!0,t.slice(_,n)}for(;(u=d())!==$x;){for(var b=[];u!==sS&&u!==$x;)b.push(u),u=d();a&&(b=a(b,f++))==null||i.push(b)}return i}function s(t,a){return a==null&&(a=WQ(t)),[a.map(y).join(N)].concat(t.map(function(i){return a.map(function(n){return y(i[n])}).join(N)})).join(`
`)}function o(t){return t.map(h).join(`
`)}function h(t){return t.map(y).join(N)}function y(t){return t==null?"":U.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:I,parseRows:F,format:s,formatRows:o}}var Hm=j_(","),Xk=Hm.parse,YQ=Hm.parseRows,XQ=Hm.format,ZQ=Hm.formatRows,Gm=j_("	"),Zk=Gm.parse,KQ=Gm.parseRows,JQ=Gm.format,QQ=Gm.formatRows,qQ=Object.freeze(Object.defineProperty({__proto__:null,dsvFormat:j_,csvParse:Xk,csvParseRows:YQ,csvFormat:XQ,csvFormatRows:ZQ,tsvParse:Zk,tsvParseRows:KQ,tsvFormat:JQ,tsvFormatRows:QQ},Symbol.toStringTag,{value:"Module"}));function Kk(N,U){return function(e,I,F){arguments.length<3&&(F=I,I=null);var s=G_(e).mimeType(N);return s.row=function(o){return arguments.length?s.response(eq(U,I=o)):I},s.row(I),F?s.get(F):s}}function eq(N,U){return function(e){return N(e.responseText,U)}}var tq=Kk("text/csv",Xk),rq=Kk("text/tab-separated-values",Zk),nq=Object.freeze(Object.defineProperty({__proto__:null,request:G_,html:VQ,json:HQ,text:GQ,xml:jQ,csv:tq,tsv:rq},Symbol.toStringTag,{value:"Module"})),aq=EE(nq),iq=EE(qQ);Object.defineProperty(Iu,"__esModule",{value:!0});Iu.toDSV=lq;Iu.toCSV=fq;Iu.toTSV=cq;Iu.toPSV=hq;Iu.toText=uq;Iu.toJSON=vq;Iu.fromDSV=sg;Iu.fromCSV=dq;Iu.fromTSV=gq;Iu.fromPSV=yq;Iu.fromText=pq;Iu.fromJSON=mq;var Jk=aq,Qk=iq,oq=wf,qk=os,sq=/^(?:[/]|[./]|(?:[a-zA-z]:\/)).*$/;function eC(N,U){try{require("fs").writeFileSync(N,U)}catch{console.warn("File system module is not available.")}}function tC(N,U){if(FileReader&&File){var e=new FileReader;e.onload=function(I){return U(I.target.result)},e.readAsText(N)}}function rC(N){var U=String(N).match(sq);return U?"file://".concat(N):N}function lq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:";",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0,F=(0,Qk.dsvFormat)(U),s=e?F.format(N.toCollection(),N[oq.__columns__]):F.formatRows(N.toArray());return I&&eC(N._cleanSavePath(I),s),s}function uq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:";",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;return N.toDSV(U,e,I)}function fq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return N.toDSV(",",U,e)}function cq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return N.toDSV("	",U,e)}function hq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return N.toDSV("|",U,e)}function vq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,I=JSON.stringify(U?N.toCollection():N.toDict());return e&&eC(N._cleanSavePath(e),I),I}function sg(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:";",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,I=(0,Qk.dsvFormat)(U);return new Promise(function(F){var s=function(h){if(h.includes("Error: ENOENT"))return F(null);var y=e?I.parse(h):I.parseRows(h);return F(y)};return typeof N=="string"?(0,Jk.text)(rC(N),s):tC(N,s)}).then(function(F){if(F===null)throw new qk.FileNotFoundError(N);return F})}function pq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:";",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return sg(N,U,e)}function dq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return sg(N,",",U)}function gq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return sg(N,"	",U)}function yq(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return sg(N,"|",U)}function mq(N){return new Promise(function(U){return typeof N=="string"?(0,Jk.json)(rC(N),U):tC(N,function(e){return U(JSON.parse(e))})}).then(function(U){if(U===null)throw new qk.FileNotFoundError(N);return U})}Object.defineProperty(pd,"__esModule",{value:!0});pd.default=void 0;var Kf=Fl,xv=os,iy=_q(ag),xq=ig,ei=wf,as=bq(Iu);function bq(N){if(N&&N.__esModule)return N;var U={};if(N!=null){for(var e in N)if(Object.prototype.hasOwnProperty.call(N,e)){var I=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(N,e):{};I.get||I.set?Object.defineProperty(U,e,I):U[e]=N[e]}}return U.default=N,U}function _q(N){return N&&N.__esModule?N:{default:N}}function Dh(N){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dh=function(e){return typeof e}:Dh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(N)}function Xx(N,U,e){return U in N?Object.defineProperty(N,U,{value:e,enumerable:!0,configurable:!0,writable:!0}):N[U]=e,N}function Ro(N){return Aq(N)||Tq(N)||wq()}function wq(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Tq(N){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]")return Array.from(N)}function Aq(N){if(Array.isArray(N)){for(var U=0,e=new Array(N.length);U<N.length;U++)e[U]=N[U];return e}}function Zx(N,U){return Eq(N)||Mq(N,U)||Sq()}function Sq(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Mq(N,U){var e=[],I=!0,F=!1,s=void 0;try{for(var o=N[Symbol.iterator](),h;!(I=(h=o.next()).done)&&(e.push(h.value),!(U&&e.length===U));I=!0);}catch(y){F=!0,s=y}finally{try{!I&&o.return!=null&&o.return()}finally{if(F)throw s}}return e}function Eq(N){if(Array.isArray(N))return N}function kq(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function lS(N,U){for(var e=0;e<U.length;e++){var I=U[e];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function uS(N,U,e){return U&&lS(N.prototype,U),e&&lS(N,e),N}var nC=function(){uS(N,null,[{key:"setDefaultModules",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];N.defaultModules=I}},{key:"fromDSV",value:function(){return as.fromDSV.apply(as,arguments).then(function(e){return new N(e)})}},{key:"fromText",value:function(){return as.fromText.apply(as,arguments).then(function(e){return new N(e)})}},{key:"fromCSV",value:function(){return as.fromCSV.apply(as,arguments).then(function(e){return new N(e)})}},{key:"fromTSV",value:function(){return as.fromTSV.apply(as,arguments).then(function(e){return new N(e)})}},{key:"fromPSV",value:function(){return as.fromPSV.apply(as,arguments).then(function(e){return new N(e)})}},{key:"fromJSON",value:function(){return as.fromJSON.apply(as,arguments).then(function(e){return new N(e)})}}]);function N(U,e){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};kq(this,N);var F=this._build(U,e),s=Zx(F,2);this[ei.__rows__]=s[0],this[ei.__columns__]=s[1],this.options=I,this.options.modules=[].concat(Ro(N.defaultModules),Ro(this.options.modules||[])),Object.assign.apply(Object,[this].concat(Ro(this.__instanciateModules__(this.options.modules))))}return uS(N,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function U(){var e,I,F,s,o,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,I=!1,F=void 0,t.prev=3,s=this[ei.__rows__][Symbol.iterator]();case 5:if(e=(o=s.next()).done){t.next=12;break}return h=o.value,t.next=9,h;case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),I=!0,F=t.t0;case 18:t.prev=18,t.prev=19,!e&&s.return!=null&&s.return();case 21:if(t.prev=21,!I){t.next=24;break}throw F;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},U,this,[[3,14,18,26],[19,,21,25]])})},{key:"_columnsAreEquals",value:function(e){for(var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[ei.__columns__],F=0,s=Object.keys(e);F<s.length;F++){var o=s[F];if(e[o]!==I[o])return!1}return!0}},{key:"__newInstance__",value:function(e,I){if(!this._columnsAreEquals(I)||!(e[0]instanceof iy.default))return new N(e,I,this.options);var F=Object.keys(e[0].toDict());if(!(0,Kf.arrayEqual)(F,this[ei.__columns__],!0))return new N(e,F,this.options);var s=new N([],[],this.options);return s[ei.__rows__]=Ro(e),s[ei.__columns__]=Ro(I),s}},{key:"__instanciateModules__",value:function(e){var I=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return e.map(function(s){var o=new s(F||I);return Xx({},o.name,o)})}},{key:"_build",value:function(e,I){if(e instanceof N)return this._fromArray(Array.from(e[ei.__rows__]),I||e[ei.__columns__]);if(e instanceof Array&&e.length>0)return this._fromArray(e,I||Array.from(new Set(e.slice(0,10).concat(e.slice(-10,-1)).map(function(F){return Object.keys(F)}).reduce(function(F,s){return F.concat(s)}))));if(e instanceof Array&&e.length===0)return this._fromArray(e,I||[]);if(e instanceof Object)return this._fromDict(e,I||Object.keys(e));throw new xv.ArgumentTypeError(e,"DataFrame | Array | Object")}},{key:"_fromDict",value:function(e,I){return[(0,Kf.transpose)(Object.values(e)).map(function(F){return new iy.default(F,I)}),I]}},{key:"_fromArray",value:function(e,I){return[e.map(function(F){return new iy.default(F,I)}),I]}},{key:"_joinByType",value:function(e,I,F,s){var o=this,h=I.listHashs();return e.toCollection().map(function(y){var t=y.group,a=y.hash,i=h.includes(a),n=t;if(I.get(a)){var r=I.get(a).group.toCollection(),f=t.toCollection().map(function(l){return r.map(function(m){return Object.assign({},m,l)})}).reduce(function(l,m){return[].concat(Ro(l),Ro(m))},[]);n=o.__newInstance__(f,s)}var u=function(m){return m?n:!1};return F==="full"?n:u(F==="out"?!i:i)}).filter(function(y){return y})}},{key:"_join",value:function(e,I,F){if(!(e instanceof N))throw new xv.ArgumentTypeError(e,"DataFrame");var s=Ro(new Set([].concat(Ro(this.listColumns()),Ro(e.listColumns())))),o=Array.isArray(I)?I:[I],h=this.groupBy.apply(this,Ro(o)),y=e.groupBy.apply(e,Ro(o));return[this.__newInstance__([],s)].concat(Ro((0,Kf.iter)([].concat(Ro(F[0]?this._joinByType(h,y,F[0],s):[]),Ro(F[1]?this._joinByType(y,h,F[1],s):[])),function(t){return t.restructure(s)}))).reduce(function(t,a){return t.union(a)}).dropDuplicates()}},{key:"_cleanSavePath",value:function(e){return e.replace("file://","/")}},{key:"toDSV",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return as.toDSV.apply(as,[this].concat(I))}},{key:"toCSV",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return as.toCSV.apply(as,[this].concat(I))}},{key:"toTSV",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return as.toTSV.apply(as,[this].concat(I))}},{key:"toPSV",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return as.toPSV.apply(as,[this].concat(I))}},{key:"toText",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return as.toText.apply(as,[this].concat(I))}},{key:"toJSON",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return as.toJSON.apply(as,[this].concat(I))}},{key:"toDict",value:function(){var e=this;return Object.assign.apply(Object,[{}].concat(Ro(Object.entries(this.transpose().toArray()).map(function(I){var F=Zx(I,2),s=F[0],o=F[1];return Xx({},e[ei.__columns__][s],o)}))))}},{key:"toArray",value:function(e){return e?Array.from(this).map(function(I){return I.get(e)}):Array.from(this).map(function(I){return I.toArray()})}},{key:"toCollection",value:function(e){return e?Array.from(this):Array.from(this).map(function(I){return I.toDict()})}},{key:"show",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,F=function(t){return"| ".concat(t.map(function(a){var i=String(a);return i.length>9?i.substring(0,6)+"...":i+Array(10-i.length).join(" ")}).join(" | ")," |")},s=F(this[ei.__columns__]),o=0,h=[s,Array(s.length).join("-")].concat(Ro((0,Kf.iter)(this[ei.__rows__],function(y){return o++,F(y.toArray())},function(){return o>=e}))).join(`
`);return I||console.log(h),h}},{key:"dim",value:function(){return[this.count(),this[ei.__columns__].length]}},{key:"transpose",value:function(e){var I=[].concat(Ro(e?["rowNames"]:[]),Ro(Ro(Array(this.count()).keys()).reverse())),F=(0,Kf.transpose)((e?this.push(this[ei.__columns__]):this).toArray());return this.__newInstance__(F,I.reverse()).restructure(I)}},{key:"count",value:function(){return this[ei.__rows__].length}},{key:"countValue",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[ei.__columns__][0];return this.filter(function(F){return F.get(I)===e}).count()}},{key:"push",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return this.union(new N(I,this[ei.__columns__]))}},{key:"replace",value:function(e,I,F){var s=this,o=F&&F.length>0?F:this[ei.__columns__],h=Array.isArray(e)?e:[e];return this.map(function(y){return(o.length>0?o:s[ei.__columns__]).reduce(function(t,a){return h.includes(t.get(a))?t.set(a,I):t},y)})}},{key:"distinct",value:function(e){return this.__newInstance__(Xx({},e,Ro(new Set(this.toArray(e)))),[e])}},{key:"unique",value:function(e){return this.distinct(e)}},{key:"listColumns",value:function(){return Ro(this[ei.__columns__])}},{key:"select",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return this.__newInstance__(this[ei.__rows__].map(function(s){return s.select.apply(s,I)}),I)}},{key:"withColumn",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return this.__newInstance__(this[ei.__rows__].map(function(F,s){return F.set(e,I(F,s))}),this[ei.__columns__].includes(e)?this[ei.__columns__]:[].concat(Ro(this[ei.__columns__]),[e]))}},{key:"restructure",value:function(e){return this.__newInstance__(this[ei.__rows__],e)}},{key:"renameAll",value:function(e){if(e.length!==this[ei.__columns__].length)throw new xv.WrongSchemaError(e,this[ei.__columns__]);return this.__newInstance__(this.toArray(),e)}},{key:"rename",value:function(e,I){var F=this[ei.__columns__].map(function(s){return s===e?I:s});return this.renameAll(F)}},{key:"castAll",value:function(e){var I=this;if(e.length!==this[ei.__columns__].length)throw new xv.WrongSchemaError(e,this[ei.__columns__]);return this.map(function(F){return new iy.default(F.toArray().map(function(s,o){return e[o](s)}),I[ei.__columns__])})}},{key:"cast",value:function(e,I){return this.withColumn(e,function(F){return I(F.get(e))})}},{key:"drop",value:function(e){return this.__newInstance__(this[ei.__rows__].map(function(I){return I.delete(e)}),this[ei.__columns__].filter(function(I){return I!==e}))}},{key:"chain",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return this.__newInstance__(Ro(Kf.chain.apply(void 0,[this[ei.__rows__]].concat(I))),this[ei.__columns__])}},{key:"filter",value:function(e){var I=Dh(e)==="object"?function(s){return Object.entries(e).map(function(o){var h=Zx(o,2),y=h[0],t=h[1];return Object.is(s.get(y),t)}).reduce(function(o,h){return o&&h})}:e,F=(0,Kf.iter)(this[ei.__rows__],function(s,o){return I(s,o)?s:!1});return this.__newInstance__(F,this[ei.__columns__])}},{key:"where",value:function(e){return this.filter(e)}},{key:"find",value:function(e){return this.filter(e)[ei.__rows__][0]}},{key:"map",value:function(e){return this.__newInstance__((0,Kf.iter)(this[ei.__rows__],function(I,F){return e(I,F)}),this[ei.__columns__])}},{key:"reduce",value:function(e,I){return typeof I=="undefined"?this[ei.__rows__].reduce(function(F,s){return e(F,s)}):this[ei.__rows__].reduce(function(F,s){return e(F,s)},I)}},{key:"reduceRight",value:function(e,I){return typeof I=="undefined"?this[ei.__rows__].reduceRight(function(F,s){return e(F,s)}):this[ei.__rows__].reduceRight(function(F,s){return e(F,s)},I)}},{key:"dropDuplicates",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];var s=I&&I.length>0?I:this[ei.__columns__];return this.groupBy.apply(this,Ro(s)).filter(function(o,h){return h===0})}},{key:"dropMissingValues",value:function(e){var I=e&&e.length>0?e:this[ei.__columns__];return this.filter(function(F){var s=!0,o=!1,h=void 0;try{for(var y=I[Symbol.iterator](),t;!(s=(t=y.next()).done);s=!0){var a=t.value;if([NaN,void 0,null].includes(F.get(a)))return!1}}catch(i){o=!0,h=i}finally{try{!s&&y.return!=null&&y.return()}finally{if(o)throw h}}return!0})}},{key:"fillMissingValues",value:function(e,I){return this.replace([NaN,void 0,null],e,I)}},{key:"shuffle",value:function(){return this.count()<2?this:this.__newInstance__(this.reduce(function(e,I){var F=Math.floor(Math.random()*(e.length-1)+1);return Array.isArray(e)?[].concat(Ro(e.slice(F,e.length+1)),[I],Ro(e.slice(0,F))):[e,I]}),this[ei.__columns__])}},{key:"sample",value:function(e){var I=this.count()*e,F=0;return this.__newInstance__((0,Kf.iter)(this.shuffle()[ei.__rows__],function(s){return F++,s},function(){return F>=I}),this[ei.__columns__])}},{key:"bisect",value:function(e){var I=this.count()*e,F=0,s=[];return[this.__newInstance__((0,Kf.iter)(this.shuffle()[ei.__rows__],function(o){if(F<I)return F++,o;s.push(o)}),this[ei.__columns__]),this.__newInstance__(s,this[ei.__columns__])]}},{key:"groupBy",value:function(){for(var e=arguments.length,I=new Array(e),F=0;F<e;F++)I[F]=arguments[F];return(0,xq.groupBy)(this,I)}},{key:"sortBy",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"first";Array.isArray(e)||(e=[e]);var s=e,o=["first","last"].includes(F)?F:"first",h=function(n){return[NaN,null,void 0].includes(n)},y=this[ei.__rows__].sort(function(i,n){return s.map(function(r){var f=[i.get(r),n.get(r)],u=f[0],l=f[1];if(h(u))return o==="last"?1:-1;if(h(l))return o==="last"?-1:1;if(Dh(u)!==Dh(l))throw new xv.MixedTypeError([Dh(u),Dh(l)]);return u>l?I?-1:1:u<l?I?1:-1:0}).reduce(function(r,f){return r||f})});if(s.length>1){var t=[],a=[];return y.forEach(function(i){var n=!0,r=!1,f=void 0;try{for(var u=s[Symbol.iterator](),l;!(n=(l=u.next()).done);n=!0){var m=l.value;if(h(i.get(m))){t.push(i);return}}}catch(d){r=!0,f=d}finally{try{!n&&u.return!=null&&u.return()}finally{if(r)throw f}}a.push(i)}),this.__newInstance__(F==="last"?a.concat(t):t.concat(a),this[ei.__columns__])}return this.__newInstance__(y,this[ei.__columns__])}},{key:"union",value:function(e){if(!(e instanceof N))throw new xv.ArgumentTypeError(e,"DataFrame");if(!(0,Kf.arrayEqual)(this[ei.__columns__],e[ei.__columns__]))throw new xv.WrongSchemaError(e[ei.__columns__],this[ei.__columns__]);return this.__newInstance__([].concat(Ro(this),Ro(e.restructure(this[ei.__columns__]))),this[ei.__columns__])}},{key:"join",value:function(e,I){var F=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"inner",o={inner:function(){return F.innerJoin(e,I)},full:function(){return F.fullJoin(e,I)},outer:function(){return F.outerJoin(e,I)},left:function(){return F.leftJoin(e,I)},right:function(){return F.rightJoin(e,I)}};return o[s]()}},{key:"innerJoin",value:function(e,I){return this._join(e,I,["in"])}},{key:"fullJoin",value:function(e,I){return this._join(e,I,["full","full"])}},{key:"outerJoin",value:function(e,I){return this.fullJoin(e,I)}},{key:"leftJoin",value:function(e,I){return this._join(e,I,["full","in"])}},{key:"rightJoin",value:function(e,I){return this._join(e,I,["in","full"])}},{key:"diff",value:function(e,I){return this._join(e,I,["out","out"])}},{key:"head",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this.slice(0,e)}},{key:"tail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this.slice(-e)}},{key:"slice",value:function(e,I){return this.__newInstance__(this[ei.__rows__].slice(e||void 0,I||void 0),this[ei.__columns__])}},{key:"getRow",value:function(e){return this[ei.__rows__][e]}},{key:"setRow",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return s},F=Array.from(this[ei.__rows__]);return F[e]=I(F[e]),this.__newInstance__(F,this[ei.__columns__])}}]),N}();nC.defaultModules=[];var Cq=nC;pd.default=Cq;var jm={},Lq=ji,Pq=Lq(1 .valueOf),Iq=el,$_=fi,aC=ji,Rq=X0,Dq=Pu.exports,fS=Rl,Fq=A_,Oq=Wh,zq=dm,iC=j2,Nq=Ki,Bq=Yv.f,Uq=Gh.f,Vq=Dl.f,Hq=Pq,Gq=R_.trim,o2="Number",Lh=$_[o2],Kx=Lh.prototype,jq=$_.TypeError,$q=aC("".slice),oy=aC("".charCodeAt),Wq=function(N){var U=iC(N,"number");return typeof U=="bigint"?U:Yq(U)},Yq=function(N){var U=iC(N,"number"),e,I,F,s,o,h,y,t;if(zq(U))throw jq("Cannot convert a Symbol value to a number");if(typeof U=="string"&&U.length>2){if(U=Gq(U),e=oy(U,0),e===43||e===45){if(I=oy(U,2),I===88||I===120)return NaN}else if(e===48){switch(oy(U,1)){case 66:case 98:F=2,s=49;break;case 79:case 111:F=8,s=55;break;default:return+U}for(o=$q(U,2),h=o.length,y=0;y<h;y++)if(t=oy(o,y),t<48||t>s)return NaN;return parseInt(o,F)}}return+U};if(Rq(o2,!Lh(" 0o1")||!Lh("0b1")||Lh("+0x1"))){for(var Dp=function(U){var e=arguments.length<1?0:Lh(Wq(U)),I=this;return Oq(Kx,I)&&Nq(function(){Hq(I)})?Fq(Object(e),I,Dp):e},cS=Iq?Bq(Lh):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Jx=0,sy;cS.length>Jx;Jx++)fS(Lh,sy=cS[Jx])&&!fS(Dp,sy)&&Vq(Dp,sy,Uq(Lh,sy));Dp.prototype=Kx,Kx.constructor=Dp,Dq($_,o2,Dp)}var Xq=ti;Xq({target:"Number",stat:!0},{isNaN:function(U){return U!=U}});Object.defineProperty(jm,"__esModule",{value:!0});jm.default=void 0;var ly=Fl;function Zq(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function hS(N,U){for(var e=0;e<U.length;e++){var I=U[e];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function Kq(N,U,e){return U&&hS(N.prototype,U),e&&hS(N,e),N}var Jq=function(){function N(U){Zq(this,N),this.df=U,this.name="stat"}return Kq(N,[{key:"_castAsNumber",value:function(e){return this.df.withColumn(e,function(I){return Number(I.get(e))}).filter(function(I){return!Number.isNaN(I.get(e))})}},{key:"sum",value:function(e){return Number(this.df.reduce(function(I,F){return(0,ly.isNumber)(F.get(e))?I+Number(F.get(e)):I},0))}},{key:"max",value:function(e){return this._castAsNumber(e).reduce(function(I,F){return F.get(e)>I.get(e)?F:I}).get(e)}},{key:"min",value:function(e){return this._castAsNumber(e).reduce(function(I,F){return I.get(e)>F.get(e)?F:I}).get(e)}},{key:"mean",value:function(e){var I=this.df.filter(function(F){return(0,ly.isNumber)(F.get(e))});return Number(I.reduce(function(F,s){return(0,ly.isNumber)(s.get(e))?F+Number(s.get(e)):F},0))/I.count()}},{key:"average",value:function(e){return this.mean(e)}},{key:"var",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,F=this.df.filter(function(o){return(0,ly.isNumber)(o.get(e))}),s=this.mean(e);return Number(F.reduce(function(o,h){return o+Math.pow(h.get(e)-s,2)},0))/(F.count()-(I?0:1))}},{key:"sd",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Math.sqrt(this.var(e,I))}},{key:"stats",value:function(e){return{sum:this.sum(e),mean:this.mean(e),min:this.min(e),max:this.max(e),var:this.var(e),varpop:this.var(e,!0),sd:this.sd(e),sdpop:this.sd(e,!0)}}}]),N}(),Qq=Jq;jm.default=Qq;var $m={};Object.defineProperty($m,"__esModule",{value:!0});$m.default=void 0;var qq=eee(pd),uy=os,fy=Fl;function eee(N){return N&&N.__esModule?N:{default:N}}function Jf(N){return nee(N)||ree(N)||tee()}function tee(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ree(N){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]")return Array.from(N)}function nee(N){if(Array.isArray(N)){for(var U=0,e=new Array(N.length);U<N.length;U++)e[U]=N[U];return e}}function aee(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function vS(N,U){for(var e=0;e<U.length;e++){var I=U[e];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function iee(N,U,e){return U&&vS(N.prototype,U),e&&vS(N,e),N}var oee=function(){function N(U){aee(this,N),this.df=U,this.name="matrix"}return iee(N,[{key:"isCommutative",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!(e instanceof qq.default))throw new uy.ArgumentTypeError(e,"DataFrame");return(0,fy.arrayEqual)(this.df.dim(),I?e.dim().reverse():e.dim(),!0)}},{key:"add",value:function(e){var I=this;if(!this.isCommutative(e))throw new uy.WrongSchemaError(this.df.dim(),e.dim());var F=Jf(Array(this.df.dim()[1]).keys());return this.df.__newInstance__(Jf((0,fy.iter)(Object.keys(Jf(this.df)),function(s){var o=Jf(I.df)[s].toArray(),h=Jf(e)[s].toArray();return F.map(function(y){return o[y]+h[y]})})),this.df.listColumns())}},{key:"product",value:function(e){if(typeof e!="number")throw new uy.ArgumentTypeError(e,"Number");return this.df.map(function(I){return I.toArray().map(function(F){return F*e})})}},{key:"dot",value:function(e){var I=this;if(!this.isCommutative(e,!0))throw new uy.WrongSchemaError(this.df.dim(),e.dim().reverse());var F=Jf(Array(this.df.dim()[0]).keys());return this.df.__newInstance__(Jf((0,fy.iter)(Object.keys(Jf(this.df)),function(s){var o=Jf(I.df)[s].toArray();return Jf((0,fy.iter)(F,function(h){var y=Jf(e.transpose())[h].toArray();return Object.keys(y).reduce(function(t,a){return t+y[a]*o[a]},0)}))})),F)}}]),N}(),see=oee;$m.default=see;var Wm={},lee=el,W_=fi,xd=ji,uee=X0,fee=A_,cee=Yh,hee=Dl.f,vee=Yv.f,pS=Wh,pee=M_,dS=cu,dee=p_,oC=m_,gee=Pu.exports,yee=Ki,mee=Rl,xee=Xh.enforce,bee=S_,_ee=es,sC=K4,lC=J4,wee=_ee("match"),Jc=W_.RegExp,Up=Jc.prototype,Tee=W_.SyntaxError,Aee=xd(dee),See=xd(Up.exec),qy=xd("".charAt),gS=xd("".replace),yS=xd("".indexOf),Mee=xd("".slice),Eee=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Fv=/a/g,Qx=/a/g,kee=new Jc(Fv)!==Fv,uC=oC.MISSED_STICKY,Cee=oC.UNSUPPORTED_Y,Lee=lee&&(!kee||uC||sC||lC||yee(function(){return Qx[wee]=!1,Jc(Fv)!=Fv||Jc(Qx)==Qx||Jc(Fv,"i")!="/a/i"})),Pee=function(N){for(var U=N.length,e=0,I="",F=!1,s;e<=U;e++){if(s=qy(N,e),s==="\\"){I+=s+qy(N,++e);continue}!F&&s==="."?I+="[\\s\\S]":(s==="["?F=!0:s==="]"&&(F=!1),I+=s)}return I},Iee=function(N){for(var U=N.length,e=0,I="",F=[],s={},o=!1,h=!1,y=0,t="",a;e<=U;e++){if(a=qy(N,e),a==="\\")a=a+qy(N,++e);else if(a==="]")o=!1;else if(!o)switch(!0){case a==="[":o=!0;break;case a==="(":See(Eee,Mee(N,e+1))&&(e+=2,h=!0),I+=a,y++;continue;case(a===">"&&h):if(t===""||mee(s,t))throw new Tee("Invalid capture group name");s[t]=!0,F[F.length]=[t,y],h=!1,t="";continue}h?t+=a:I+=a}return[I,F]};if(uee("RegExp",Lee)){for(var Eh=function(U,e){var I=pS(Up,this),F=pee(U),s=e===void 0,o=[],h=U,y,t,a,i,n,r;if(!I&&F&&s&&U.constructor===Eh)return U;if((F||pS(Up,U))&&(U=U.source,s&&(e="flags"in h?h.flags:Aee(h))),U=U===void 0?"":dS(U),e=e===void 0?"":dS(e),h=U,sC&&"dotAll"in Fv&&(t=!!e&&yS(e,"s")>-1,t&&(e=gS(e,/s/g,""))),y=e,uC&&"sticky"in Fv&&(a=!!e&&yS(e,"y")>-1,a&&Cee&&(e=gS(e,/y/g,""))),lC&&(i=Iee(U),U=i[0],o=i[1]),n=fee(Jc(U,e),I?this:Up,Eh),(t||a||o.length)&&(r=xee(n),t&&(r.dotAll=!0,r.raw=Eh(Pee(U),y)),a&&(r.sticky=!0),o.length&&(r.groups=o)),U!==h)try{cee(n,"source",h===""?"(?:)":h)}catch{}return n},Ree=function(N){N in Eh||hee(Eh,N,{configurable:!0,get:function(){return Jc[N]},set:function(U){Jc[N]=U}})},mS=vee(Jc),xS=0;mS.length>xS;)Ree(mS[xS++]);Up.constructor=Eh,Eh.prototype=Up,gee(W_,"RegExp",Eh)}bee("RegExp");var Y_={},Dee=ti,Fee=gd.find,Oee=Dm,s2="find",fC=!0;s2 in[]&&Array(1)[s2](function(){fC=!1});Dee({target:"Array",proto:!0,forced:fC},{find:function(U){return Fee(this,U,arguments.length>1?arguments[1]:void 0)}});Oee(s2);var zee=ti,Nee=gd.findIndex,Bee=Dm,l2="findIndex",cC=!0;l2 in[]&&Array(1)[l2](function(){cC=!1});zee({target:"Array",proto:!0,forced:cC},{findIndex:function(U){return Nee(this,U,arguments.length>1?arguments[1]:void 0)}});Bee(l2);var Uee=W0.PROPER,Vee=Ki,bS=I_,_S="\u200B\x85\u180E",Hee=function(N){return Vee(function(){return!!bS[N]()||_S[N]()!==_S||Uee&&bS[N].name!==N})},Gee=ti,jee=R_.trim,$ee=Hee;Gee({target:"String",proto:!0,forced:$ee("trim")},{trim:function(){return jee(this)}});Object.defineProperty(Y_,"__esModule",{value:!0});Y_.default=vC;var Rc=Fl,X_=os;function Wee(N,U){return Zee(N)||Xee(N,U)||Yee()}function Yee(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Xee(N,U){var e=[],I=!0,F=!1,s=void 0;try{for(var o=N[Symbol.iterator](),h;!(I=(h=o.next()).done)&&(e.push(h.value),!(U&&e.length===U));I=!0);}catch(y){F=!0,s=y}finally{try{!I&&o.return!=null&&o.return()}finally{if(F)throw s}}return e}function Zee(N){if(Array.isArray(N))return N}function em(N){return Qee(N)||Jee(N)||Kee()}function Kee(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Jee(N){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]")return Array.from(N)}function Qee(N){if(Array.isArray(N)){for(var U=0,e=new Array(N.length);U<N.length;U++)e[U]=N[U];return e}}var qee=[["INNER JOIN","INNERJOIN"],["LEFT JOIN","LEFTJOIN"],["RIGHT JOIN","RIGHTJOIN"],["FULL JOIN","FULLJOIN"],["GROUP BY","GROUPBY"]],cy={IN:function(U,e){return e.includes(U)},LIKE:function(U,e){return e.includes(U)||U.includes(e)},">=":function(U,e){return U>=e},"<=":function(U,e){return U<=e},"!=":function(U,e){return U!==e},"<":function(U,e){return U<e},">":function(U,e){return U>e},"=":function(U,e){return U===e},AND:function(U,e){return U&&e},OR:function(U,e){return U||e}},qx={COUNT:function(U){return U.count()},SUM:function(U,e){return U.stat.sum(e)},MAX:function(U,e){return U.stat.max(e)},MIN:function(U,e){return U.stat.min(e)},AVG:function(U,e){return U.stat.mean(e)}};function ete(N){for(var U=arguments.length,e=new Array(U>1?U-1:0),I=1;I<U;I++)e[I-1]=arguments[I];var F=(0,Rc.makeGenerator)(e),s=function o(h){return h[0](N)?h[1](N):o(F.next().value)};return s(F.next().value)}function hC(N){return(0,Rc.xReplace)(N.join(" "),[" ",""]).split(",")}function i0(N,U,e){var I=N.findIndex(function(F){return F.toUpperCase()==="ON"})+1;return function(F){return F.join(U[N[0]],hC(N.filter(function(s,o){return o>=I})),e)}}var wS={WHERE:function(U){var e=(0,Rc.xSplit)(U.join(" ")," AND "," OR ");return function(I){return I.filter(function(F){var s=U.filter(function(o){return["AND","OR"].includes(o.toUpperCase())});return e.map(function(o){var h=Rc.xContains.apply(void 0,[o].concat(em(Object.keys(cy))))[0],y=o.split(h).map(function(a){return a.trim()});if(!F.has(y[0])&&F.has(y[1]))return cy[h]((0,Rc.xReplace)(y[0].trim(),['"',""],["'",""],["`",""]),String(F.get(y[1])));var t=Number(y[1]);return cy[h](String(F.get(y[0])),Number.isNaN(t)?(0,Rc.xReplace)(y[1].trim(),['"',""],["'",""],["`",""]):t)}).reduce(function(o,h){return cy[s.shift()](o,h)})})}},JOIN:function(U,e){return i0(U,e,"inner")},INNERJOIN:function(U,e){return i0(U,e,"inner")},LEFTJOIN:function(U,e){return i0(U,e,"left")},RIGHTJOIN:function(U,e){return i0(U,e,"right")},FULLJOIN:function(U,e){return i0(U,e,"full")},UNION:function(U,e){return function(I){return I.union(U[0].toUpperCase().includes("SELECT")?vC(U.join(" "),e):e[U[0]])}},GROUPBY:function(U){return function(e){return e.groupBy.apply(e,em(hC(U)))}}};function tte(N){var U=N;return qee.forEach(function(e){var I=Wee(e,2),F=I[0],s=I[1];U=U.replace(F,s).replace(F.toLowerCase(),s)}),U}function rte(N){var U=tte(N).split(" "),e=U.findIndex(function(I){return I.toUpperCase()==="FROM"});if(e===-1)throw new X_.SQLParseError("Your query should contains FROM keyword");return{selections:U.slice(0,e),table:U[e+1],operations:U.slice(e+2,U.length)}}function nte(N,U){var e=N.map(function(I,F){return Object.keys(wS).includes(I.toUpperCase())?F:void 0}).filter(function(I){return I!==void 0});return e.map(function(I,F){return wS[N[I].toUpperCase()](N.slice(I+1,e[F+1]?e[F+1]:N.length),U)}).reduce(function(I,F){return function(s){return F(I(s))}},function(I){return I})}function ate(N){if(N[0].toUpperCase()!=="SELECT")throw new X_.SQLParseError("Your query should begin with SELECT keyword");return N.shift(),ete(N.join(" ").split(",").map(function(U){return U.trim()}),[function(U){return(0,Rc.xReplace)(U[0],[" ",""])==="*"},function(){return function(U){return U}}],[function(U){return U[0].toUpperCase().includes("DISTINCT")},function(U){var e=(0,Rc.xReplace)(U[0].split(" AS ")[0],["DISTINCT",""],["distinct",""],[" ",""]);return function(I){return I.distinct(e).rename(e,U[0].includes("AS")?U[0].split("AS")[1].replace(" ",""):e)}}],[function(U){return Rc.xContains.apply(void 0,[U[0].toUpperCase()].concat(em(Object.keys(qx))))[0]},function(U){return function(e){var I=Object.keys(qx).find(function(s){return U[0].toUpperCase().includes(s)}),F=function(o){return qx[I](o,(0,Rc.xReplace)(U[0],["".concat(I.toLowerCase(),"("),""],["".concat(I,"("),""],["(",""],[")",""]))};return e.on&&e.df?e.aggregate(F):F(e)}}],[function(){return!0},function(U){return function(e){return e.select.apply(e,em(U.map(function(I){return I.split(" AS ")[0].replace(" ","")}))).renameAll(U.map(function(I){return I.includes("AS")?I.split("AS")[1].replace(" ",""):I}))}}])}function vC(N,U){var e=rte(N),I=e.selections,F=e.table,s=e.operations;if(!F||!Object.keys(U).includes(F))throw new X_.SQLParseError("Wrong table name in your query: ".concat(F));var o=nte(s,U),h=ate(I);return h(o(U[F]))}Object.defineProperty(Wm,"__esModule",{value:!0});Wm.default=void 0;var ite=pC(Y_),ote=pC(pd),hy=os;function pC(N){return N&&N.__esModule?N:{default:N}}function ste(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function TS(N,U){for(var e=0;e<U.length;e++){var I=U[e];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function AS(N,U,e){return U&&TS(N.prototype,U),e&&TS(N,e),N}var dC=function(){AS(N,null,[{key:"request",value:function(e){if(typeof e!="string")throw new hy.ArgumentTypeError(e,"Stri g");return(0,ite.default)(e,N.tables)}},{key:"dropTables",value:function(){N.tables={}}},{key:"dropTable",value:function(e){delete N.tables[e]}},{key:"renameTable",value:function(e,I){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;N.registerTable(N.tables[e],I,F),N.dropTable(e)}},{key:"listTables",value:function(){return Object.keys(N.tables)}},{key:"registerTable",value:function(e,I){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(e instanceof ote.default))throw new hy.ArgumentTypeError(e,"DataFrame");var s=new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$");if(!s.test(I))throw new hy.WrongTableNameError(I);if(N.listTables().includes(I)&&!F)throw new hy.TableAlreadyExistsError(I);N.tables[I]=e}}]);function N(U){ste(this,N),this.df=U,this.name="sql"}return AS(N,[{key:"register",value:function(e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return N.registerTable(this.df,e,I),this.df}}]),N}();dC.tables={};var lte=dC;Wm.default=lte;(function(N){Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"DataFrame",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(N,"Row",{enumerable:!0,get:function(){return e.default}}),N.Errors=N.default=void 0;var U=y(pd),e=y(ag),I=h(os);N.Errors=I;var F=y(jm),s=y($m),o=y(Wm);function h(a){if(a&&a.__esModule)return a;var i={};if(a!=null){for(var n in a)if(Object.prototype.hasOwnProperty.call(a,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,n):{};r.get||r.set?Object.defineProperty(i,n,r):i[n]=a[n]}}return i.default=a,i}function y(a){return a&&a.__esModule?a:{default:a}}U.default.setDefaultModules(F.default,s.default,o.default),U.default.sql=o.default;var t=U.default;N.default=t})(PE);var Lie=ME(PE),uu="top",Ju="bottom",Qu="right",fu="left",Ym="auto",bd=[uu,Ju,Qu,fu],Vv="start",nd="end",gC="clippingParents",Z_="viewport",Vp="popper",yC="reference",u2=bd.reduce(function(N,U){return N.concat([U+"-"+Vv,U+"-"+nd])},[]),K_=[].concat(bd,[Ym]).reduce(function(N,U){return N.concat([U,U+"-"+Vv,U+"-"+nd])},[]),mC="beforeRead",xC="read",bC="afterRead",_C="beforeMain",wC="main",TC="afterMain",AC="beforeWrite",SC="write",MC="afterWrite",EC=[mC,xC,bC,_C,wC,TC,AC,SC,MC];function Oc(N){return N?(N.nodeName||"").toLowerCase():null}function ac(N){if(N==null)return window;if(N.toString()!=="[object Window]"){var U=N.ownerDocument;return U&&U.defaultView||window}return N}function ad(N){var U=ac(N).Element;return N instanceof U||N instanceof Element}function Af(N){var U=ac(N).HTMLElement;return N instanceof U||N instanceof HTMLElement}function J_(N){if(typeof ShadowRoot=="undefined")return!1;var U=ac(N).ShadowRoot;return N instanceof U||N instanceof ShadowRoot}function ute(N){var U=N.state;Object.keys(U.elements).forEach(function(e){var I=U.styles[e]||{},F=U.attributes[e]||{},s=U.elements[e];!Af(s)||!Oc(s)||(Object.assign(s.style,I),Object.keys(F).forEach(function(o){var h=F[o];h===!1?s.removeAttribute(o):s.setAttribute(o,h===!0?"":h)}))})}function fte(N){var U=N.state,e={popper:{position:U.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(U.elements.popper.style,e.popper),U.styles=e,U.elements.arrow&&Object.assign(U.elements.arrow.style,e.arrow),function(){Object.keys(U.elements).forEach(function(I){var F=U.elements[I],s=U.attributes[I]||{},o=Object.keys(U.styles.hasOwnProperty(I)?U.styles[I]:e[I]),h=o.reduce(function(y,t){return y[t]="",y},{});!Af(F)||!Oc(F)||(Object.assign(F.style,h),Object.keys(s).forEach(function(y){F.removeAttribute(y)}))})}}var Q_={name:"applyStyles",enabled:!0,phase:"write",fn:ute,effect:fte,requires:["computeStyles"]};function Dc(N){return N.split("-")[0]}var Ov=Math.max,tm=Math.min,id=Math.round;function od(N,U){U===void 0&&(U=!1);var e=N.getBoundingClientRect(),I=1,F=1;if(Af(N)&&U){var s=N.offsetHeight,o=N.offsetWidth;o>0&&(I=id(e.width)/o||1),s>0&&(F=id(e.height)/s||1)}return{width:e.width/I,height:e.height/F,top:e.top/F,right:e.right/I,bottom:e.bottom/F,left:e.left/I,x:e.left/I,y:e.top/F}}function q_(N){var U=od(N),e=N.offsetWidth,I=N.offsetHeight;return Math.abs(U.width-e)<=1&&(e=U.width),Math.abs(U.height-I)<=1&&(I=U.height),{x:N.offsetLeft,y:N.offsetTop,width:e,height:I}}function kC(N,U){var e=U.getRootNode&&U.getRootNode();if(N.contains(U))return!0;if(e&&J_(e)){var I=U;do{if(I&&N.isSameNode(I))return!0;I=I.parentNode||I.host}while(I)}return!1}function ih(N){return ac(N).getComputedStyle(N)}function cte(N){return["table","td","th"].indexOf(Oc(N))>=0}function Qh(N){return((ad(N)?N.ownerDocument:N.document)||window.document).documentElement}function Xm(N){return Oc(N)==="html"?N:N.assignedSlot||N.parentNode||(J_(N)?N.host:null)||Qh(N)}function SS(N){return!Af(N)||ih(N).position==="fixed"?null:N.offsetParent}function hte(N){var U=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,e=navigator.userAgent.indexOf("Trident")!==-1;if(e&&Af(N)){var I=ih(N);if(I.position==="fixed")return null}var F=Xm(N);for(J_(F)&&(F=F.host);Af(F)&&["html","body"].indexOf(Oc(F))<0;){var s=ih(F);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||U&&s.willChange==="filter"||U&&s.filter&&s.filter!=="none")return F;F=F.parentNode}return null}function lg(N){for(var U=ac(N),e=SS(N);e&&cte(e)&&ih(e).position==="static";)e=SS(e);return e&&(Oc(e)==="html"||Oc(e)==="body"&&ih(e).position==="static")?U:e||hte(N)||U}function ew(N){return["top","bottom"].indexOf(N)>=0?"x":"y"}function A0(N,U,e){return Ov(N,tm(U,e))}function vte(N,U,e){var I=A0(N,U,e);return I>e?e:I}function CC(){return{top:0,right:0,bottom:0,left:0}}function LC(N){return Object.assign({},CC(),N)}function PC(N,U){return U.reduce(function(e,I){return e[I]=N,e},{})}var pte=function(U,e){return U=typeof U=="function"?U(Object.assign({},e.rects,{placement:e.placement})):U,LC(typeof U!="number"?U:PC(U,bd))};function dte(N){var U,e=N.state,I=N.name,F=N.options,s=e.elements.arrow,o=e.modifiersData.popperOffsets,h=Dc(e.placement),y=ew(h),t=[fu,Qu].indexOf(h)>=0,a=t?"height":"width";if(!(!s||!o)){var i=pte(F.padding,e),n=q_(s),r=y==="y"?uu:fu,f=y==="y"?Ju:Qu,u=e.rects.reference[a]+e.rects.reference[y]-o[y]-e.rects.popper[a],l=o[y]-e.rects.reference[y],m=lg(s),d=m?y==="y"?m.clientHeight||0:m.clientWidth||0:0,b=u/2-l/2,g=i[r],_=d-n[a]-i[f],p=d/2-n[a]/2+b,A=A0(g,p,_),c=y;e.modifiersData[I]=(U={},U[c]=A,U.centerOffset=A-p,U)}}function gte(N){var U=N.state,e=N.options,I=e.element,F=I===void 0?"[data-popper-arrow]":I;F!=null&&(typeof F=="string"&&(F=U.elements.popper.querySelector(F),!F)||!kC(U.elements.popper,F)||(U.elements.arrow=F))}var IC={name:"arrow",enabled:!0,phase:"main",fn:dte,effect:gte,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function sd(N){return N.split("-")[1]}var yte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mte(N){var U=N.x,e=N.y,I=window,F=I.devicePixelRatio||1;return{x:id(U*F)/F||0,y:id(e*F)/F||0}}function MS(N){var U,e=N.popper,I=N.popperRect,F=N.placement,s=N.variation,o=N.offsets,h=N.position,y=N.gpuAcceleration,t=N.adaptive,a=N.roundOffsets,i=N.isFixed,n=o.x,r=n===void 0?0:n,f=o.y,u=f===void 0?0:f,l=typeof a=="function"?a({x:r,y:u}):{x:r,y:u};r=l.x,u=l.y;var m=o.hasOwnProperty("x"),d=o.hasOwnProperty("y"),b=fu,g=uu,_=window;if(t){var p=lg(e),A="clientHeight",c="clientWidth";if(p===ac(e)&&(p=Qh(e),ih(p).position!=="static"&&h==="absolute"&&(A="scrollHeight",c="scrollWidth")),p=p,F===uu||(F===fu||F===Qu)&&s===nd){g=Ju;var S=i&&p===_&&_.visualViewport?_.visualViewport.height:p[A];u-=S-I.height,u*=y?1:-1}if(F===fu||(F===uu||F===Ju)&&s===nd){b=Qu;var T=i&&p===_&&_.visualViewport?_.visualViewport.width:p[c];r-=T-I.width,r*=y?1:-1}}var x=Object.assign({position:h},t&&yte),w=a===!0?mte({x:r,y:u}):{x:r,y:u};if(r=w.x,u=w.y,y){var v;return Object.assign({},x,(v={},v[g]=d?"0":"",v[b]=m?"0":"",v.transform=(_.devicePixelRatio||1)<=1?"translate("+r+"px, "+u+"px)":"translate3d("+r+"px, "+u+"px, 0)",v))}return Object.assign({},x,(U={},U[g]=d?u+"px":"",U[b]=m?r+"px":"",U.transform="",U))}function xte(N){var U=N.state,e=N.options,I=e.gpuAcceleration,F=I===void 0?!0:I,s=e.adaptive,o=s===void 0?!0:s,h=e.roundOffsets,y=h===void 0?!0:h,t={placement:Dc(U.placement),variation:sd(U.placement),popper:U.elements.popper,popperRect:U.rects.popper,gpuAcceleration:F,isFixed:U.options.strategy==="fixed"};U.modifiersData.popperOffsets!=null&&(U.styles.popper=Object.assign({},U.styles.popper,MS(Object.assign({},t,{offsets:U.modifiersData.popperOffsets,position:U.options.strategy,adaptive:o,roundOffsets:y})))),U.modifiersData.arrow!=null&&(U.styles.arrow=Object.assign({},U.styles.arrow,MS(Object.assign({},t,{offsets:U.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:y})))),U.attributes.popper=Object.assign({},U.attributes.popper,{"data-popper-placement":U.placement})}var tw={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xte,data:{}},vy={passive:!0};function bte(N){var U=N.state,e=N.instance,I=N.options,F=I.scroll,s=F===void 0?!0:F,o=I.resize,h=o===void 0?!0:o,y=ac(U.elements.popper),t=[].concat(U.scrollParents.reference,U.scrollParents.popper);return s&&t.forEach(function(a){a.addEventListener("scroll",e.update,vy)}),h&&y.addEventListener("resize",e.update,vy),function(){s&&t.forEach(function(a){a.removeEventListener("scroll",e.update,vy)}),h&&y.removeEventListener("resize",e.update,vy)}}var rw={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:bte,data:{}},_te={left:"right",right:"left",bottom:"top",top:"bottom"};function Ly(N){return N.replace(/left|right|bottom|top/g,function(U){return _te[U]})}var wte={start:"end",end:"start"};function ES(N){return N.replace(/start|end/g,function(U){return wte[U]})}function nw(N){var U=ac(N),e=U.pageXOffset,I=U.pageYOffset;return{scrollLeft:e,scrollTop:I}}function aw(N){return od(Qh(N)).left+nw(N).scrollLeft}function Tte(N){var U=ac(N),e=Qh(N),I=U.visualViewport,F=e.clientWidth,s=e.clientHeight,o=0,h=0;return I&&(F=I.width,s=I.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=I.offsetLeft,h=I.offsetTop)),{width:F,height:s,x:o+aw(N),y:h}}function Ate(N){var U,e=Qh(N),I=nw(N),F=(U=N.ownerDocument)==null?void 0:U.body,s=Ov(e.scrollWidth,e.clientWidth,F?F.scrollWidth:0,F?F.clientWidth:0),o=Ov(e.scrollHeight,e.clientHeight,F?F.scrollHeight:0,F?F.clientHeight:0),h=-I.scrollLeft+aw(N),y=-I.scrollTop;return ih(F||e).direction==="rtl"&&(h+=Ov(e.clientWidth,F?F.clientWidth:0)-s),{width:s,height:o,x:h,y}}function iw(N){var U=ih(N),e=U.overflow,I=U.overflowX,F=U.overflowY;return/auto|scroll|overlay|hidden/.test(e+F+I)}function RC(N){return["html","body","#document"].indexOf(Oc(N))>=0?N.ownerDocument.body:Af(N)&&iw(N)?N:RC(Xm(N))}function S0(N,U){var e;U===void 0&&(U=[]);var I=RC(N),F=I===((e=N.ownerDocument)==null?void 0:e.body),s=ac(I),o=F?[s].concat(s.visualViewport||[],iw(I)?I:[]):I,h=U.concat(o);return F?h:h.concat(S0(Xm(o)))}function f2(N){return Object.assign({},N,{left:N.x,top:N.y,right:N.x+N.width,bottom:N.y+N.height})}function Ste(N){var U=od(N);return U.top=U.top+N.clientTop,U.left=U.left+N.clientLeft,U.bottom=U.top+N.clientHeight,U.right=U.left+N.clientWidth,U.width=N.clientWidth,U.height=N.clientHeight,U.x=U.left,U.y=U.top,U}function kS(N,U){return U===Z_?f2(Tte(N)):ad(U)?Ste(U):f2(Ate(Qh(N)))}function Mte(N){var U=S0(Xm(N)),e=["absolute","fixed"].indexOf(ih(N).position)>=0,I=e&&Af(N)?lg(N):N;return ad(I)?U.filter(function(F){return ad(F)&&kC(F,I)&&Oc(F)!=="body"}):[]}function Ete(N,U,e){var I=U==="clippingParents"?Mte(N):[].concat(U),F=[].concat(I,[e]),s=F[0],o=F.reduce(function(h,y){var t=kS(N,y);return h.top=Ov(t.top,h.top),h.right=tm(t.right,h.right),h.bottom=tm(t.bottom,h.bottom),h.left=Ov(t.left,h.left),h},kS(N,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function DC(N){var U=N.reference,e=N.element,I=N.placement,F=I?Dc(I):null,s=I?sd(I):null,o=U.x+U.width/2-e.width/2,h=U.y+U.height/2-e.height/2,y;switch(F){case uu:y={x:o,y:U.y-e.height};break;case Ju:y={x:o,y:U.y+U.height};break;case Qu:y={x:U.x+U.width,y:h};break;case fu:y={x:U.x-e.width,y:h};break;default:y={x:U.x,y:U.y}}var t=F?ew(F):null;if(t!=null){var a=t==="y"?"height":"width";switch(s){case Vv:y[t]=y[t]-(U[a]/2-e[a]/2);break;case nd:y[t]=y[t]+(U[a]/2-e[a]/2);break}}return y}function ld(N,U){U===void 0&&(U={});var e=U,I=e.placement,F=I===void 0?N.placement:I,s=e.boundary,o=s===void 0?gC:s,h=e.rootBoundary,y=h===void 0?Z_:h,t=e.elementContext,a=t===void 0?Vp:t,i=e.altBoundary,n=i===void 0?!1:i,r=e.padding,f=r===void 0?0:r,u=LC(typeof f!="number"?f:PC(f,bd)),l=a===Vp?yC:Vp,m=N.rects.popper,d=N.elements[n?l:a],b=Ete(ad(d)?d:d.contextElement||Qh(N.elements.popper),o,y),g=od(N.elements.reference),_=DC({reference:g,element:m,strategy:"absolute",placement:F}),p=f2(Object.assign({},m,_)),A=a===Vp?p:g,c={top:b.top-A.top+u.top,bottom:A.bottom-b.bottom+u.bottom,left:b.left-A.left+u.left,right:A.right-b.right+u.right},S=N.modifiersData.offset;if(a===Vp&&S){var T=S[F];Object.keys(c).forEach(function(x){var w=[Qu,Ju].indexOf(x)>=0?1:-1,v=[uu,Ju].indexOf(x)>=0?"y":"x";c[x]+=T[v]*w})}return c}function kte(N,U){U===void 0&&(U={});var e=U,I=e.placement,F=e.boundary,s=e.rootBoundary,o=e.padding,h=e.flipVariations,y=e.allowedAutoPlacements,t=y===void 0?K_:y,a=sd(I),i=a?h?u2:u2.filter(function(f){return sd(f)===a}):bd,n=i.filter(function(f){return t.indexOf(f)>=0});n.length===0&&(n=i);var r=n.reduce(function(f,u){return f[u]=ld(N,{placement:u,boundary:F,rootBoundary:s,padding:o})[Dc(u)],f},{});return Object.keys(r).sort(function(f,u){return r[f]-r[u]})}function Cte(N){if(Dc(N)===Ym)return[];var U=Ly(N);return[ES(N),U,ES(U)]}function Lte(N){var U=N.state,e=N.options,I=N.name;if(!U.modifiersData[I]._skip){for(var F=e.mainAxis,s=F===void 0?!0:F,o=e.altAxis,h=o===void 0?!0:o,y=e.fallbackPlacements,t=e.padding,a=e.boundary,i=e.rootBoundary,n=e.altBoundary,r=e.flipVariations,f=r===void 0?!0:r,u=e.allowedAutoPlacements,l=U.options.placement,m=Dc(l),d=m===l,b=y||(d||!f?[Ly(l)]:Cte(l)),g=[l].concat(b).reduce(function($,W){return $.concat(Dc(W)===Ym?kte(U,{placement:W,boundary:a,rootBoundary:i,padding:t,flipVariations:f,allowedAutoPlacements:u}):W)},[]),_=U.rects.reference,p=U.rects.popper,A=new Map,c=!0,S=g[0],T=0;T<g.length;T++){var x=g[T],w=Dc(x),v=sd(x)===Vv,C=[uu,Ju].indexOf(w)>=0,M=C?"width":"height",E=ld(U,{placement:x,boundary:a,rootBoundary:i,altBoundary:n,padding:t}),L=C?v?Qu:fu:v?Ju:uu;_[M]>p[M]&&(L=Ly(L));var z=Ly(L),O=[];if(s&&O.push(E[w]<=0),h&&O.push(E[L]<=0,E[z]<=0),O.every(function($){return $})){S=x,c=!1;break}A.set(x,O)}if(c)for(var R=f?3:1,D=function(W){var re=g.find(function(Q){var Z=A.get(Q);if(Z)return Z.slice(0,W).every(function(K){return K})});if(re)return S=re,"break"},H=R;H>0;H--){var B=D(H);if(B==="break")break}U.placement!==S&&(U.modifiersData[I]._skip=!0,U.placement=S,U.reset=!0)}}var FC={name:"flip",enabled:!0,phase:"main",fn:Lte,requiresIfExists:["offset"],data:{_skip:!1}};function CS(N,U,e){return e===void 0&&(e={x:0,y:0}),{top:N.top-U.height-e.y,right:N.right-U.width+e.x,bottom:N.bottom-U.height+e.y,left:N.left-U.width-e.x}}function LS(N){return[uu,Qu,Ju,fu].some(function(U){return N[U]>=0})}function Pte(N){var U=N.state,e=N.name,I=U.rects.reference,F=U.rects.popper,s=U.modifiersData.preventOverflow,o=ld(U,{elementContext:"reference"}),h=ld(U,{altBoundary:!0}),y=CS(o,I),t=CS(h,F,s),a=LS(y),i=LS(t);U.modifiersData[e]={referenceClippingOffsets:y,popperEscapeOffsets:t,isReferenceHidden:a,hasPopperEscaped:i},U.attributes.popper=Object.assign({},U.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":i})}var OC={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Pte};function Ite(N,U,e){var I=Dc(N),F=[fu,uu].indexOf(I)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},U,{placement:N})):e,o=s[0],h=s[1];return o=o||0,h=(h||0)*F,[fu,Qu].indexOf(I)>=0?{x:h,y:o}:{x:o,y:h}}function Rte(N){var U=N.state,e=N.options,I=N.name,F=e.offset,s=F===void 0?[0,0]:F,o=K_.reduce(function(a,i){return a[i]=Ite(i,U.rects,s),a},{}),h=o[U.placement],y=h.x,t=h.y;U.modifiersData.popperOffsets!=null&&(U.modifiersData.popperOffsets.x+=y,U.modifiersData.popperOffsets.y+=t),U.modifiersData[I]=o}var zC={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rte};function Dte(N){var U=N.state,e=N.name;U.modifiersData[e]=DC({reference:U.rects.reference,element:U.rects.popper,strategy:"absolute",placement:U.placement})}var ow={name:"popperOffsets",enabled:!0,phase:"read",fn:Dte,data:{}};function Fte(N){return N==="x"?"y":"x"}function Ote(N){var U=N.state,e=N.options,I=N.name,F=e.mainAxis,s=F===void 0?!0:F,o=e.altAxis,h=o===void 0?!1:o,y=e.boundary,t=e.rootBoundary,a=e.altBoundary,i=e.padding,n=e.tether,r=n===void 0?!0:n,f=e.tetherOffset,u=f===void 0?0:f,l=ld(U,{boundary:y,rootBoundary:t,padding:i,altBoundary:a}),m=Dc(U.placement),d=sd(U.placement),b=!d,g=ew(m),_=Fte(g),p=U.modifiersData.popperOffsets,A=U.rects.reference,c=U.rects.popper,S=typeof u=="function"?u(Object.assign({},U.rects,{placement:U.placement})):u,T=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),x=U.modifiersData.offset?U.modifiersData.offset[U.placement]:null,w={x:0,y:0};if(!!p){if(s){var v,C=g==="y"?uu:fu,M=g==="y"?Ju:Qu,E=g==="y"?"height":"width",L=p[g],z=L+l[C],O=L-l[M],R=r?-c[E]/2:0,D=d===Vv?A[E]:c[E],H=d===Vv?-c[E]:-A[E],B=U.elements.arrow,$=r&&B?q_(B):{width:0,height:0},W=U.modifiersData["arrow#persistent"]?U.modifiersData["arrow#persistent"].padding:CC(),re=W[C],Q=W[M],Z=A0(0,A[E],$[E]),K=b?A[E]/2-R-Z-re-T.mainAxis:D-Z-re-T.mainAxis,le=b?-A[E]/2+R+Z+Q+T.mainAxis:H+Z+Q+T.mainAxis,fe=U.elements.arrow&&lg(U.elements.arrow),ue=fe?g==="y"?fe.clientTop||0:fe.clientLeft||0:0,V=(v=x==null?void 0:x[g])!=null?v:0,j=L+K-V-ue,ee=L+le-V,q=A0(r?tm(z,j):z,L,r?Ov(O,ee):O);p[g]=q,w[g]=q-L}if(h){var X,J=g==="x"?uu:fu,ie=g==="x"?Ju:Qu,ne=p[_],oe=_==="y"?"height":"width",se=ne+l[J],me=ne-l[ie],ce=[uu,fu].indexOf(m)!==-1,pe=(X=x==null?void 0:x[_])!=null?X:0,xe=ce?se:ne-A[oe]-c[oe]-pe+T.altAxis,Se=ce?ne+A[oe]+c[oe]-pe-T.altAxis:me,Ae=r&&ce?vte(xe,ne,Se):A0(r?xe:se,ne,r?Se:me);p[_]=Ae,w[_]=Ae-ne}U.modifiersData[I]=w}}var NC={name:"preventOverflow",enabled:!0,phase:"main",fn:Ote,requiresIfExists:["offset"]};function zte(N){return{scrollLeft:N.scrollLeft,scrollTop:N.scrollTop}}function Nte(N){return N===ac(N)||!Af(N)?nw(N):zte(N)}function Bte(N){var U=N.getBoundingClientRect(),e=id(U.width)/N.offsetWidth||1,I=id(U.height)/N.offsetHeight||1;return e!==1||I!==1}function Ute(N,U,e){e===void 0&&(e=!1);var I=Af(U),F=Af(U)&&Bte(U),s=Qh(U),o=od(N,F),h={scrollLeft:0,scrollTop:0},y={x:0,y:0};return(I||!I&&!e)&&((Oc(U)!=="body"||iw(s))&&(h=Nte(U)),Af(U)?(y=od(U,!0),y.x+=U.clientLeft,y.y+=U.clientTop):s&&(y.x=aw(s))),{x:o.left+h.scrollLeft-y.x,y:o.top+h.scrollTop-y.y,width:o.width,height:o.height}}function Vte(N){var U=new Map,e=new Set,I=[];N.forEach(function(s){U.set(s.name,s)});function F(s){e.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(h){if(!e.has(h)){var y=U.get(h);y&&F(y)}}),I.push(s)}return N.forEach(function(s){e.has(s.name)||F(s)}),I}function Hte(N){var U=Vte(N);return EC.reduce(function(e,I){return e.concat(U.filter(function(F){return F.phase===I}))},[])}function Gte(N){var U;return function(){return U||(U=new Promise(function(e){Promise.resolve().then(function(){U=void 0,e(N())})})),U}}function jte(N){var U=N.reduce(function(e,I){var F=e[I.name];return e[I.name]=F?Object.assign({},F,I,{options:Object.assign({},F.options,I.options),data:Object.assign({},F.data,I.data)}):I,e},{});return Object.keys(U).map(function(e){return U[e]})}var PS={placement:"bottom",modifiers:[],strategy:"absolute"};function IS(){for(var N=arguments.length,U=new Array(N),e=0;e<N;e++)U[e]=arguments[e];return!U.some(function(I){return!(I&&typeof I.getBoundingClientRect=="function")})}function Zm(N){N===void 0&&(N={});var U=N,e=U.defaultModifiers,I=e===void 0?[]:e,F=U.defaultOptions,s=F===void 0?PS:F;return function(h,y,t){t===void 0&&(t=s);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},PS,s),modifiersData:{},elements:{reference:h,popper:y},attributes:{},styles:{}},i=[],n=!1,r={state:a,setOptions:function(m){var d=typeof m=="function"?m(a.options):m;u(),a.options=Object.assign({},s,a.options,d),a.scrollParents={reference:ad(h)?S0(h):h.contextElement?S0(h.contextElement):[],popper:S0(y)};var b=Hte(jte([].concat(I,a.options.modifiers)));return a.orderedModifiers=b.filter(function(g){return g.enabled}),f(),r.update()},forceUpdate:function(){if(!n){var m=a.elements,d=m.reference,b=m.popper;if(!!IS(d,b)){a.rects={reference:Ute(d,lg(b),a.options.strategy==="fixed"),popper:q_(b)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(T){return a.modifiersData[T.name]=Object.assign({},T.data)});for(var g=0;g<a.orderedModifiers.length;g++){if(a.reset===!0){a.reset=!1,g=-1;continue}var _=a.orderedModifiers[g],p=_.fn,A=_.options,c=A===void 0?{}:A,S=_.name;typeof p=="function"&&(a=p({state:a,options:c,name:S,instance:r})||a)}}}},update:Gte(function(){return new Promise(function(l){r.forceUpdate(),l(a)})}),destroy:function(){u(),n=!0}};if(!IS(h,y))return r;r.setOptions(t).then(function(l){!n&&t.onFirstUpdate&&t.onFirstUpdate(l)});function f(){a.orderedModifiers.forEach(function(l){var m=l.name,d=l.options,b=d===void 0?{}:d,g=l.effect;if(typeof g=="function"){var _=g({state:a,name:m,instance:r,options:b}),p=function(){};i.push(_||p)}})}function u(){i.forEach(function(l){return l()}),i=[]}return r}}var $te=Zm(),Wte=[rw,ow,tw,Q_],Yte=Zm({defaultModifiers:Wte}),Xte=[rw,ow,tw,Q_,zC,FC,NC,IC,OC],sw=Zm({defaultModifiers:Xte}),BC=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Zm,detectOverflow:ld,createPopperBase:$te,createPopper:sw,createPopperLite:Yte,top:uu,bottom:Ju,right:Qu,left:fu,auto:Ym,basePlacements:bd,start:Vv,end:nd,clippingParents:gC,viewport:Z_,popper:Vp,reference:yC,variationPlacements:u2,placements:K_,beforeRead:mC,read:xC,afterRead:bC,beforeMain:_C,main:wC,afterMain:TC,beforeWrite:AC,write:SC,afterWrite:MC,modifierPhases:EC,applyStyles:Q_,arrow:IC,computeStyles:tw,eventListeners:rw,flip:FC,hide:OC,offset:zC,popperOffsets:ow,preventOverflow:NC},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Zte=1e6,Kte=1e3,c2="transitionend",Jte=N=>N==null?`${N}`:{}.toString.call(N).match(/\s([a-z]+)/i)[1].toLowerCase(),Qte=N=>{do N+=Math.floor(Math.random()*Zte);while(document.getElementById(N));return N},UC=N=>{let U=N.getAttribute("data-bs-target");if(!U||U==="#"){let e=N.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),U=e&&e!=="#"?e.trim():null}return U},lw=N=>{const U=UC(N);return U&&document.querySelector(U)?U:null},Vh=N=>{const U=UC(N);return U?document.querySelector(U):null},qte=N=>{if(!N)return 0;let{transitionDuration:U,transitionDelay:e}=window.getComputedStyle(N);const I=Number.parseFloat(U),F=Number.parseFloat(e);return!I&&!F?0:(U=U.split(",")[0],e=e.split(",")[0],(Number.parseFloat(U)+Number.parseFloat(e))*Kte)},VC=N=>{N.dispatchEvent(new Event(c2))},Hv=N=>!N||typeof N!="object"?!1:(typeof N.jquery!="undefined"&&(N=N[0]),typeof N.nodeType!="undefined"),Hh=N=>Hv(N)?N.jquery?N[0]:N:typeof N=="string"&&N.length>0?document.querySelector(N):null,Bc=(N,U,e)=>{Object.keys(e).forEach(I=>{const F=e[I],s=U[I],o=s&&Hv(s)?"element":Jte(s);if(!new RegExp(F).test(o))throw new TypeError(`${N.toUpperCase()}: Option "${I}" provided type "${o}" but expected type "${F}".`)})},ug=N=>!Hv(N)||N.getClientRects().length===0?!1:getComputedStyle(N).getPropertyValue("visibility")==="visible",zv=N=>!N||N.nodeType!==Node.ELEMENT_NODE||N.classList.contains("disabled")?!0:typeof N.disabled!="undefined"?N.disabled:N.hasAttribute("disabled")&&N.getAttribute("disabled")!=="false",HC=N=>{if(!document.documentElement.attachShadow)return null;if(typeof N.getRootNode=="function"){const U=N.getRootNode();return U instanceof ShadowRoot?U:null}return N instanceof ShadowRoot?N:N.parentNode?HC(N.parentNode):null},rm=()=>{},_d=N=>{N.offsetHeight},GC=()=>{const{jQuery:N}=window;return N&&!document.body.hasAttribute("data-bs-no-jquery")?N:null},eb=[],ere=N=>{document.readyState==="loading"?(eb.length||document.addEventListener("DOMContentLoaded",()=>{eb.forEach(U=>U())}),eb.push(N)):N()},Lu=()=>document.documentElement.dir==="rtl",Ef=N=>{ere(()=>{const U=GC();if(U){const e=N.NAME,I=U.fn[e];U.fn[e]=N.jQueryInterface,U.fn[e].Constructor=N,U.fn[e].noConflict=()=>(U.fn[e]=I,N.jQueryInterface)}})},Cv=N=>{typeof N=="function"&&N()},jC=(N,U,e=!0)=>{if(!e){Cv(N);return}const I=5,F=qte(U)+I;let s=!1;const o=({target:h})=>{h===U&&(s=!0,U.removeEventListener(c2,o),Cv(N))};U.addEventListener(c2,o),setTimeout(()=>{s||VC(U)},F)},$C=(N,U,e,I)=>{let F=N.indexOf(U);if(F===-1)return N[!e&&I?N.length-1:0];const s=N.length;return F+=e?1:-1,I&&(F=(F+s)%s),N[Math.max(0,Math.min(F,s-1))]},tre=/[^.]*(?=\..*)\.|.*/,rre=/\..*/,nre=/::\d+$/,tb={};let RS=1;const are={mouseenter:"mouseover",mouseleave:"mouseout"},ire=/^(mouseenter|mouseleave)/i,WC=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function YC(N,U){return U&&`${U}::${RS++}`||N.uidEvent||RS++}function XC(N){const U=YC(N);return N.uidEvent=U,tb[U]=tb[U]||{},tb[U]}function ore(N,U){return function e(I){return I.delegateTarget=N,e.oneOff&&ba.off(N,I.type,U),U.apply(N,[I])}}function sre(N,U,e){return function I(F){const s=N.querySelectorAll(U);for(let{target:o}=F;o&&o!==this;o=o.parentNode)for(let h=s.length;h--;)if(s[h]===o)return F.delegateTarget=o,I.oneOff&&ba.off(N,F.type,U,e),e.apply(o,[F]);return null}}function ZC(N,U,e=null){const I=Object.keys(N);for(let F=0,s=I.length;F<s;F++){const o=N[I[F]];if(o.originalHandler===U&&o.delegationSelector===e)return o}return null}function KC(N,U,e){const I=typeof U=="string",F=I?e:U;let s=JC(N);return WC.has(s)||(s=N),[I,F,s]}function DS(N,U,e,I,F){if(typeof U!="string"||!N)return;if(e||(e=I,I=null),ire.test(U)){const r=f=>function(u){if(!u.relatedTarget||u.relatedTarget!==u.delegateTarget&&!u.delegateTarget.contains(u.relatedTarget))return f.call(this,u)};I?I=r(I):e=r(e)}const[s,o,h]=KC(U,e,I),y=XC(N),t=y[h]||(y[h]={}),a=ZC(t,o,s?e:null);if(a){a.oneOff=a.oneOff&&F;return}const i=YC(o,U.replace(tre,"")),n=s?sre(N,e,I):ore(N,e);n.delegationSelector=s?e:null,n.originalHandler=o,n.oneOff=F,n.uidEvent=i,t[i]=n,N.addEventListener(h,n,s)}function h2(N,U,e,I,F){const s=ZC(U[e],I,F);!s||(N.removeEventListener(e,s,Boolean(F)),delete U[e][s.uidEvent])}function lre(N,U,e,I){const F=U[e]||{};Object.keys(F).forEach(s=>{if(s.includes(I)){const o=F[s];h2(N,U,e,o.originalHandler,o.delegationSelector)}})}function JC(N){return N=N.replace(rre,""),are[N]||N}const ba={on(N,U,e,I){DS(N,U,e,I,!1)},one(N,U,e,I){DS(N,U,e,I,!0)},off(N,U,e,I){if(typeof U!="string"||!N)return;const[F,s,o]=KC(U,e,I),h=o!==U,y=XC(N),t=U.startsWith(".");if(typeof s!="undefined"){if(!y||!y[o])return;h2(N,y,o,s,F?e:null);return}t&&Object.keys(y).forEach(i=>{lre(N,y,i,U.slice(1))});const a=y[o]||{};Object.keys(a).forEach(i=>{const n=i.replace(nre,"");if(!h||U.includes(n)){const r=a[i];h2(N,y,o,r.originalHandler,r.delegationSelector)}})},trigger(N,U,e){if(typeof U!="string"||!N)return null;const I=GC(),F=JC(U),s=U!==F,o=WC.has(F);let h,y=!0,t=!0,a=!1,i=null;return s&&I&&(h=I.Event(U,e),I(N).trigger(h),y=!h.isPropagationStopped(),t=!h.isImmediatePropagationStopped(),a=h.isDefaultPrevented()),o?(i=document.createEvent("HTMLEvents"),i.initEvent(F,y,!0)):i=new CustomEvent(U,{bubbles:y,cancelable:!0}),typeof e!="undefined"&&Object.keys(e).forEach(n=>{Object.defineProperty(i,n,{get(){return e[n]}})}),a&&i.preventDefault(),t&&N.dispatchEvent(i),i.defaultPrevented&&typeof h!="undefined"&&h.preventDefault(),i}},kh=new Map,M0={set(N,U,e){kh.has(N)||kh.set(N,new Map);const I=kh.get(N);if(!I.has(U)&&I.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(I.keys())[0]}.`);return}I.set(U,e)},get(N,U){return kh.has(N)&&kh.get(N).get(U)||null},remove(N,U){if(!kh.has(N))return;const e=kh.get(N);e.delete(U),e.size===0&&kh.delete(N)}},ure="5.1.3";class ic{constructor(U){U=Hh(U),U&&(this._element=U,M0.set(this._element,this.constructor.DATA_KEY,this))}dispose(){M0.remove(this._element,this.constructor.DATA_KEY),ba.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(U=>{this[U]=null})}_queueCallback(U,e,I=!0){jC(U,e,I)}static getInstance(U){return M0.get(Hh(U),this.DATA_KEY)}static getOrCreateInstance(U,e={}){return this.getInstance(U)||new this(U,typeof e=="object"?e:null)}static get VERSION(){return ure}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const Km=(N,U="hide")=>{const e=`click.dismiss${N.EVENT_KEY}`,I=N.NAME;ba.on(document,e,`[data-bs-dismiss="${I}"]`,function(F){if(["A","AREA"].includes(this.tagName)&&F.preventDefault(),zv(this))return;const s=Vh(this)||this.closest(`.${I}`);N.getOrCreateInstance(s)[U]()})},fre="alert",cre="bs.alert",QC=`.${cre}`,hre=`close${QC}`,vre=`closed${QC}`,pre="fade",dre="show";class Jm extends ic{static get NAME(){return fre}close(){if(ba.trigger(this._element,hre).defaultPrevented)return;this._element.classList.remove(dre);const e=this._element.classList.contains(pre);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),ba.trigger(this._element,vre),this.dispose()}static jQueryInterface(U){return this.each(function(){const e=Jm.getOrCreateInstance(this);if(typeof U=="string"){if(e[U]===void 0||U.startsWith("_")||U==="constructor")throw new TypeError(`No method named "${U}"`);e[U](this)}})}}Km(Jm,"close");Ef(Jm);const gre="button",yre="bs.button",mre=`.${yre}`,xre=".data-api",bre="active",FS='[data-bs-toggle="button"]',_re=`click${mre}${xre}`;class Qm extends ic{static get NAME(){return gre}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(bre))}static jQueryInterface(U){return this.each(function(){const e=Qm.getOrCreateInstance(this);U==="toggle"&&e[U]()})}}ba.on(document,_re,FS,N=>{N.preventDefault();const U=N.target.closest(FS);Qm.getOrCreateInstance(U).toggle()});Ef(Qm);function OS(N){return N==="true"?!0:N==="false"?!1:N===Number(N).toString()?Number(N):N===""||N==="null"?null:N}function rb(N){return N.replace(/[A-Z]/g,U=>`-${U.toLowerCase()}`)}const Pl={setDataAttribute(N,U,e){N.setAttribute(`data-bs-${rb(U)}`,e)},removeDataAttribute(N,U){N.removeAttribute(`data-bs-${rb(U)}`)},getDataAttributes(N){if(!N)return{};const U={};return Object.keys(N.dataset).filter(e=>e.startsWith("bs")).forEach(e=>{let I=e.replace(/^bs/,"");I=I.charAt(0).toLowerCase()+I.slice(1,I.length),U[I]=OS(N.dataset[e])}),U},getDataAttribute(N,U){return OS(N.getAttribute(`data-bs-${rb(U)}`))},offset(N){const U=N.getBoundingClientRect();return{top:U.top+window.pageYOffset,left:U.left+window.pageXOffset}},position(N){return{top:N.offsetTop,left:N.offsetLeft}}},wre=3,Ti={find(N,U=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(U,N))},findOne(N,U=document.documentElement){return Element.prototype.querySelector.call(U,N)},children(N,U){return[].concat(...N.children).filter(e=>e.matches(U))},parents(N,U){const e=[];let I=N.parentNode;for(;I&&I.nodeType===Node.ELEMENT_NODE&&I.nodeType!==wre;)I.matches(U)&&e.push(I),I=I.parentNode;return e},prev(N,U){let e=N.previousElementSibling;for(;e;){if(e.matches(U))return[e];e=e.previousElementSibling}return[]},next(N,U){let e=N.nextElementSibling;for(;e;){if(e.matches(U))return[e];e=e.nextElementSibling}return[]},focusableChildren(N){const U=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(", ");return this.find(U,N).filter(e=>!zv(e)&&ug(e))}},zS="carousel",Tre="bs.carousel",ef=`.${Tre}`,qC=".data-api",Are="ArrowLeft",Sre="ArrowRight",Mre=500,Ere=40,NS={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},kre={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},bv="next",_v="prev",Sv="left",d0="right",Cre={[Are]:d0,[Sre]:Sv},Lre=`slide${ef}`,BS=`slid${ef}`,Pre=`keydown${ef}`,Ire=`mouseenter${ef}`,Rre=`mouseleave${ef}`,Dre=`touchstart${ef}`,Fre=`touchmove${ef}`,Ore=`touchend${ef}`,zre=`pointerdown${ef}`,Nre=`pointerup${ef}`,Bre=`dragstart${ef}`,Ure=`load${ef}${qC}`,Vre=`click${ef}${qC}`,Hre="carousel",wv="active",Gre="slide",jre="carousel-item-end",$re="carousel-item-start",Wre="carousel-item-next",Yre="carousel-item-prev",Xre="pointer-event",Zre=".active",py=".active.carousel-item",Kre=".carousel-item",Jre=".carousel-item img",Qre=".carousel-item-next, .carousel-item-prev",qre=".carousel-indicators",ene="[data-bs-target]",tne="[data-bs-slide], [data-bs-slide-to]",rne='[data-bs-ride="carousel"]',nne="touch",ane="pen";class Qc extends ic{constructor(U,e){super(U);this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=Ti.findOne(qre,this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return NS}static get NAME(){return zS}next(){this._slide(bv)}nextWhenVisible(){!document.hidden&&ug(this._element)&&this.next()}prev(){this._slide(_v)}pause(U){U||(this._isPaused=!0),Ti.findOne(Qre,this._element)&&(VC(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(U){U||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(U){this._activeElement=Ti.findOne(py,this._element);const e=this._getItemIndex(this._activeElement);if(U>this._items.length-1||U<0)return;if(this._isSliding){ba.one(this._element,BS,()=>this.to(U));return}if(e===U){this.pause(),this.cycle();return}const I=U>e?bv:_v;this._slide(I,this._items[U])}_getConfig(U){return U=Ri(Ri(Ri({},NS),Pl.getDataAttributes(this._element)),typeof U=="object"?U:{}),Bc(zS,U,kre),U}_handleSwipe(){const U=Math.abs(this.touchDeltaX);if(U<=Ere)return;const e=U/this.touchDeltaX;this.touchDeltaX=0,e&&this._slide(e>0?d0:Sv)}_addEventListeners(){this._config.keyboard&&ba.on(this._element,Pre,U=>this._keydown(U)),this._config.pause==="hover"&&(ba.on(this._element,Ire,U=>this.pause(U)),ba.on(this._element,Rre,U=>this.cycle(U))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const U=s=>this._pointerEvent&&(s.pointerType===ane||s.pointerType===nne),e=s=>{U(s)?this.touchStartX=s.clientX:this._pointerEvent||(this.touchStartX=s.touches[0].clientX)},I=s=>{this.touchDeltaX=s.touches&&s.touches.length>1?0:s.touches[0].clientX-this.touchStartX},F=s=>{U(s)&&(this.touchDeltaX=s.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(o=>this.cycle(o),Mre+this._config.interval))};Ti.find(Jre,this._element).forEach(s=>{ba.on(s,Bre,o=>o.preventDefault())}),this._pointerEvent?(ba.on(this._element,zre,s=>e(s)),ba.on(this._element,Nre,s=>F(s)),this._element.classList.add(Xre)):(ba.on(this._element,Dre,s=>e(s)),ba.on(this._element,Fre,s=>I(s)),ba.on(this._element,Ore,s=>F(s)))}_keydown(U){if(/input|textarea/i.test(U.target.tagName))return;const e=Cre[U.key];e&&(U.preventDefault(),this._slide(e))}_getItemIndex(U){return this._items=U&&U.parentNode?Ti.find(Kre,U.parentNode):[],this._items.indexOf(U)}_getItemByOrder(U,e){const I=U===bv;return $C(this._items,e,I,this._config.wrap)}_triggerSlideEvent(U,e){const I=this._getItemIndex(U),F=this._getItemIndex(Ti.findOne(py,this._element));return ba.trigger(this._element,Lre,{relatedTarget:U,direction:e,from:F,to:I})}_setActiveIndicatorElement(U){if(this._indicatorsElement){const e=Ti.findOne(Zre,this._indicatorsElement);e.classList.remove(wv),e.removeAttribute("aria-current");const I=Ti.find(ene,this._indicatorsElement);for(let F=0;F<I.length;F++)if(Number.parseInt(I[F].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(U)){I[F].classList.add(wv),I[F].setAttribute("aria-current","true");break}}}_updateInterval(){const U=this._activeElement||Ti.findOne(py,this._element);if(!U)return;const e=Number.parseInt(U.getAttribute("data-bs-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(U,e){const I=this._directionToOrder(U),F=Ti.findOne(py,this._element),s=this._getItemIndex(F),o=e||this._getItemByOrder(I,F),h=this._getItemIndex(o),y=Boolean(this._interval),t=I===bv,a=t?$re:jre,i=t?Wre:Yre,n=this._orderToDirection(I);if(o&&o.classList.contains(wv)){this._isSliding=!1;return}if(this._isSliding||this._triggerSlideEvent(o,n).defaultPrevented||!F||!o)return;this._isSliding=!0,y&&this.pause(),this._setActiveIndicatorElement(o),this._activeElement=o;const f=()=>{ba.trigger(this._element,BS,{relatedTarget:o,direction:n,from:s,to:h})};if(this._element.classList.contains(Gre)){o.classList.add(i),_d(o),F.classList.add(a),o.classList.add(a);const u=()=>{o.classList.remove(a,i),o.classList.add(wv),F.classList.remove(wv,i,a),this._isSliding=!1,setTimeout(f,0)};this._queueCallback(u,F,!0)}else F.classList.remove(wv),o.classList.add(wv),this._isSliding=!1,f();y&&this.cycle()}_directionToOrder(U){return[d0,Sv].includes(U)?Lu()?U===Sv?_v:bv:U===Sv?bv:_v:U}_orderToDirection(U){return[bv,_v].includes(U)?Lu()?U===_v?Sv:d0:U===_v?d0:Sv:U}static carouselInterface(U,e){const I=Qc.getOrCreateInstance(U,e);let{_config:F}=I;typeof e=="object"&&(F=Ri(Ri({},F),e));const s=typeof e=="string"?e:F.slide;if(typeof e=="number")I.to(e);else if(typeof s=="string"){if(typeof I[s]=="undefined")throw new TypeError(`No method named "${s}"`);I[s]()}else F.interval&&F.ride&&(I.pause(),I.cycle())}static jQueryInterface(U){return this.each(function(){Qc.carouselInterface(this,U)})}static dataApiClickHandler(U){const e=Vh(this);if(!e||!e.classList.contains(Hre))return;const I=Ri(Ri({},Pl.getDataAttributes(e)),Pl.getDataAttributes(this)),F=this.getAttribute("data-bs-slide-to");F&&(I.interval=!1),Qc.carouselInterface(e,I),F&&Qc.getInstance(e).to(F),U.preventDefault()}}ba.on(document,Vre,tne,Qc.dataApiClickHandler);ba.on(window,Ure,()=>{const N=Ti.find(rne);for(let U=0,e=N.length;U<e;U++)Qc.carouselInterface(N[U],Qc.getInstance(N[U]))});Ef(Qc);const US="collapse",e6="bs.collapse",fg=`.${e6}`,ine=".data-api",VS={toggle:!0,parent:null},one={toggle:"boolean",parent:"(null|element)"},sne=`show${fg}`,lne=`shown${fg}`,une=`hide${fg}`,fne=`hidden${fg}`,cne=`click${fg}${ine}`,nb="show",jp="collapse",dy="collapsing",HS="collapsed",GS=`:scope .${jp} .${jp}`,hne="collapse-horizontal",vne="width",pne="height",dne=".collapse.show, .collapse.collapsing",v2='[data-bs-toggle="collapse"]';class Jp extends ic{constructor(U,e){super(U);this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=[];const I=Ti.find(v2);for(let F=0,s=I.length;F<s;F++){const o=I[F],h=lw(o),y=Ti.find(h).filter(t=>t===this._element);h!==null&&y.length&&(this._selector=h,this._triggerArray.push(o))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return VS}static get NAME(){return US}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let U=[],e;if(this._config.parent){const t=Ti.find(GS,this._config.parent);U=Ti.find(dne,this._config.parent).filter(a=>!t.includes(a))}const I=Ti.findOne(this._selector);if(U.length){const t=U.find(a=>I!==a);if(e=t?Jp.getInstance(t):null,e&&e._isTransitioning)return}if(ba.trigger(this._element,sne).defaultPrevented)return;U.forEach(t=>{I!==t&&Jp.getOrCreateInstance(t,{toggle:!1}).hide(),e||M0.set(t,e6,null)});const s=this._getDimension();this._element.classList.remove(jp),this._element.classList.add(dy),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(dy),this._element.classList.add(jp,nb),this._element.style[s]="",ba.trigger(this._element,lne)},y=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[s]=`${this._element[y]}px`}hide(){if(this._isTransitioning||!this._isShown()||ba.trigger(this._element,une).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,_d(this._element),this._element.classList.add(dy),this._element.classList.remove(jp,nb);const I=this._triggerArray.length;for(let s=0;s<I;s++){const o=this._triggerArray[s],h=Vh(o);h&&!this._isShown(h)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const F=()=>{this._isTransitioning=!1,this._element.classList.remove(dy),this._element.classList.add(jp),ba.trigger(this._element,fne)};this._element.style[e]="",this._queueCallback(F,this._element,!0)}_isShown(U=this._element){return U.classList.contains(nb)}_getConfig(U){return U=Ri(Ri(Ri({},VS),Pl.getDataAttributes(this._element)),U),U.toggle=Boolean(U.toggle),U.parent=Hh(U.parent),Bc(US,U,one),U}_getDimension(){return this._element.classList.contains(hne)?vne:pne}_initializeChildren(){if(!this._config.parent)return;const U=Ti.find(GS,this._config.parent);Ti.find(v2,this._config.parent).filter(e=>!U.includes(e)).forEach(e=>{const I=Vh(e);I&&this._addAriaAndCollapsedClass([e],this._isShown(I))})}_addAriaAndCollapsedClass(U,e){!U.length||U.forEach(I=>{e?I.classList.remove(HS):I.classList.add(HS),I.setAttribute("aria-expanded",e)})}static jQueryInterface(U){return this.each(function(){const e={};typeof U=="string"&&/show|hide/.test(U)&&(e.toggle=!1);const I=Jp.getOrCreateInstance(this,e);if(typeof U=="string"){if(typeof I[U]=="undefined")throw new TypeError(`No method named "${U}"`);I[U]()}})}}ba.on(document,cne,v2,function(N){(N.target.tagName==="A"||N.delegateTarget&&N.delegateTarget.tagName==="A")&&N.preventDefault();const U=lw(this);Ti.find(U).forEach(I=>{Jp.getOrCreateInstance(I,{toggle:!1}).toggle()})});Ef(Jp);const ab="dropdown",gne="bs.dropdown",Zv=`.${gne}`,uw=".data-api",Py="Escape",jS="Space",$S="Tab",p2="ArrowUp",Iy="ArrowDown",yne=2,mne=new RegExp(`${p2}|${Iy}|${Py}`),xne=`hide${Zv}`,bne=`hidden${Zv}`,_ne=`show${Zv}`,wne=`shown${Zv}`,t6=`click${Zv}${uw}`,r6=`keydown${Zv}${uw}`,Tne=`keyup${Zv}${uw}`,Fp="show",Ane="dropup",Sne="dropend",Mne="dropstart",Ene="navbar",E0='[data-bs-toggle="dropdown"]',d2=".dropdown-menu",kne=".navbar-nav",Cne=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Lne=Lu()?"top-end":"top-start",Pne=Lu()?"top-start":"top-end",Ine=Lu()?"bottom-end":"bottom-start",Rne=Lu()?"bottom-start":"bottom-end",Dne=Lu()?"left-start":"right-start",Fne=Lu()?"right-start":"left-start",One={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},zne={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class xf extends ic{constructor(U,e){super(U);this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return One}static get DefaultType(){return zne}static get NAME(){return ab}toggle(){return this._isShown()?this.hide():this.show()}show(){if(zv(this._element)||this._isShown(this._menu))return;const U={relatedTarget:this._element};if(ba.trigger(this._element,_ne,U).defaultPrevented)return;const I=xf.getParentFromElement(this._element);this._inNavbar?Pl.setDataAttribute(this._menu,"popper","none"):this._createPopper(I),"ontouchstart"in document.documentElement&&!I.closest(kne)&&[].concat(...document.body.children).forEach(F=>ba.on(F,"mouseover",rm)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Fp),this._element.classList.add(Fp),ba.trigger(this._element,wne,U)}hide(){if(zv(this._element)||!this._isShown(this._menu))return;const U={relatedTarget:this._element};this._completeHide(U)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(U){ba.trigger(this._element,xne,U).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(I=>ba.off(I,"mouseover",rm)),this._popper&&this._popper.destroy(),this._menu.classList.remove(Fp),this._element.classList.remove(Fp),this._element.setAttribute("aria-expanded","false"),Pl.removeDataAttribute(this._menu,"popper"),ba.trigger(this._element,bne,U))}_getConfig(U){if(U=Ri(Ri(Ri({},this.constructor.Default),Pl.getDataAttributes(this._element)),U),Bc(ab,U,this.constructor.DefaultType),typeof U.reference=="object"&&!Hv(U.reference)&&typeof U.reference.getBoundingClientRect!="function")throw new TypeError(`${ab.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return U}_createPopper(U){if(typeof BC=="undefined")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=U:Hv(this._config.reference)?e=Hh(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const I=this._getPopperConfig(),F=I.modifiers.find(s=>s.name==="applyStyles"&&s.enabled===!1);this._popper=sw(e,this._menu,I),F&&Pl.setDataAttribute(this._menu,"popper","static")}_isShown(U=this._element){return U.classList.contains(Fp)}_getMenuElement(){return Ti.next(this._element,d2)[0]}_getPlacement(){const U=this._element.parentNode;if(U.classList.contains(Sne))return Dne;if(U.classList.contains(Mne))return Fne;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return U.classList.contains(Ane)?e?Pne:Lne:e?Rne:Ine}_detectNavbar(){return this._element.closest(`.${Ene}`)!==null}_getOffset(){const{offset:U}=this._config;return typeof U=="string"?U.split(",").map(e=>Number.parseInt(e,10)):typeof U=="function"?e=>U(e,this._element):U}_getPopperConfig(){const U={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(U.modifiers=[{name:"applyStyles",enabled:!1}]),Ri(Ri({},U),typeof this._config.popperConfig=="function"?this._config.popperConfig(U):this._config.popperConfig)}_selectMenuItem({key:U,target:e}){const I=Ti.find(Cne,this._menu).filter(ug);!I.length||$C(I,e,U===Iy,!I.includes(e)).focus()}static jQueryInterface(U){return this.each(function(){const e=xf.getOrCreateInstance(this,U);if(typeof U=="string"){if(typeof e[U]=="undefined")throw new TypeError(`No method named "${U}"`);e[U]()}})}static clearMenus(U){if(U&&(U.button===yne||U.type==="keyup"&&U.key!==$S))return;const e=Ti.find(E0);for(let I=0,F=e.length;I<F;I++){const s=xf.getInstance(e[I]);if(!s||s._config.autoClose===!1||!s._isShown())continue;const o={relatedTarget:s._element};if(U){const h=U.composedPath(),y=h.includes(s._menu);if(h.includes(s._element)||s._config.autoClose==="inside"&&!y||s._config.autoClose==="outside"&&y||s._menu.contains(U.target)&&(U.type==="keyup"&&U.key===$S||/input|select|option|textarea|form/i.test(U.target.tagName)))continue;U.type==="click"&&(o.clickEvent=U)}s._completeHide(o)}}static getParentFromElement(U){return Vh(U)||U.parentNode}static dataApiKeydownHandler(U){if(/input|textarea/i.test(U.target.tagName)?U.key===jS||U.key!==Py&&(U.key!==Iy&&U.key!==p2||U.target.closest(d2)):!mne.test(U.key))return;const e=this.classList.contains(Fp);if(!e&&U.key===Py||(U.preventDefault(),U.stopPropagation(),zv(this)))return;const I=this.matches(E0)?this:Ti.prev(this,E0)[0],F=xf.getOrCreateInstance(I);if(U.key===Py){F.hide();return}if(U.key===p2||U.key===Iy){e||F.show(),F._selectMenuItem(U);return}(!e||U.key===jS)&&xf.clearMenus()}}ba.on(document,r6,E0,xf.dataApiKeydownHandler);ba.on(document,r6,d2,xf.dataApiKeydownHandler);ba.on(document,t6,xf.clearMenus);ba.on(document,Tne,xf.clearMenus);ba.on(document,t6,E0,function(N){N.preventDefault(),xf.getOrCreateInstance(this).toggle()});Ef(xf);const WS=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",YS=".sticky-top";class g2{constructor(){this._element=document.body}getWidth(){const U=document.documentElement.clientWidth;return Math.abs(window.innerWidth-U)}hide(){const U=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",e=>e+U),this._setElementAttributes(WS,"paddingRight",e=>e+U),this._setElementAttributes(YS,"marginRight",e=>e-U)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(U,e,I){const F=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+F)return;this._saveInitialAttribute(o,e);const h=window.getComputedStyle(o)[e];o.style[e]=`${I(Number.parseFloat(h))}px`};this._applyManipulationCallback(U,s)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(WS,"paddingRight"),this._resetElementAttributes(YS,"marginRight")}_saveInitialAttribute(U,e){const I=U.style[e];I&&Pl.setDataAttribute(U,e,I)}_resetElementAttributes(U,e){const I=F=>{const s=Pl.getDataAttribute(F,e);typeof s=="undefined"?F.style.removeProperty(e):(Pl.removeDataAttribute(F,e),F.style[e]=s)};this._applyManipulationCallback(U,I)}_applyManipulationCallback(U,e){Hv(U)?e(U):Ti.find(U,this._element).forEach(e)}isOverflowing(){return this.getWidth()>0}}const Nne={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Bne={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},n6="backdrop",Une="fade",XS="show",ZS=`mousedown.bs.${n6}`;class a6{constructor(U){this._config=this._getConfig(U),this._isAppended=!1,this._element=null}show(U){if(!this._config.isVisible){Cv(U);return}this._append(),this._config.isAnimated&&_d(this._getElement()),this._getElement().classList.add(XS),this._emulateAnimation(()=>{Cv(U)})}hide(U){if(!this._config.isVisible){Cv(U);return}this._getElement().classList.remove(XS),this._emulateAnimation(()=>{this.dispose(),Cv(U)})}_getElement(){if(!this._element){const U=document.createElement("div");U.className=this._config.className,this._config.isAnimated&&U.classList.add(Une),this._element=U}return this._element}_getConfig(U){return U=Ri(Ri({},Nne),typeof U=="object"?U:{}),U.rootElement=Hh(U.rootElement),Bc(n6,U,Bne),U}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),ba.on(this._getElement(),ZS,()=>{Cv(this._config.clickCallback)}),this._isAppended=!0)}dispose(){!this._isAppended||(ba.off(this._element,ZS),this._element.remove(),this._isAppended=!1)}_emulateAnimation(U){jC(U,this._getElement(),this._config.isAnimated)}}const Vne={trapElement:null,autofocus:!0},Hne={trapElement:"element",autofocus:"boolean"},Gne="focustrap",jne="bs.focustrap",nm=`.${jne}`,$ne=`focusin${nm}`,Wne=`keydown.tab${nm}`,Yne="Tab",Xne="forward",KS="backward";class i6{constructor(U){this._config=this._getConfig(U),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:U,autofocus:e}=this._config;this._isActive||(e&&U.focus(),ba.off(document,nm),ba.on(document,$ne,I=>this._handleFocusin(I)),ba.on(document,Wne,I=>this._handleKeydown(I)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,ba.off(document,nm))}_handleFocusin(U){const{target:e}=U,{trapElement:I}=this._config;if(e===document||e===I||I.contains(e))return;const F=Ti.focusableChildren(I);F.length===0?I.focus():this._lastTabNavDirection===KS?F[F.length-1].focus():F[0].focus()}_handleKeydown(U){U.key===Yne&&(this._lastTabNavDirection=U.shiftKey?KS:Xne)}_getConfig(U){return U=Ri(Ri({},Vne),typeof U=="object"?U:{}),Bc(Gne,U,Hne),U}}const JS="modal",Zne="bs.modal",kf=`.${Zne}`,Kne=".data-api",QS="Escape",qS={backdrop:!0,keyboard:!0,focus:!0},Jne={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Qne=`hide${kf}`,qne=`hidePrevented${kf}`,o6=`hidden${kf}`,s6=`show${kf}`,eae=`shown${kf}`,eM=`resize${kf}`,tM=`click.dismiss${kf}`,rM=`keydown.dismiss${kf}`,tae=`mouseup.dismiss${kf}`,nM=`mousedown.dismiss${kf}`,rae=`click${kf}${Kne}`,aM="modal-open",nae="fade",iM="show",ib="modal-static",aae=".modal.show",iae=".modal-dialog",oae=".modal-body",sae='[data-bs-toggle="modal"]';class ud extends ic{constructor(U,e){super(U);this._config=this._getConfig(e),this._dialog=Ti.findOne(iae,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new g2}static get Default(){return qS}static get NAME(){return JS}toggle(U){return this._isShown?this.hide():this.show(U)}show(U){this._isShown||this._isTransitioning||ba.trigger(this._element,s6,{relatedTarget:U}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(aM),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),ba.on(this._dialog,nM,()=>{ba.one(this._element,tae,I=>{I.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(U)))}hide(){if(!this._isShown||this._isTransitioning||ba.trigger(this._element,Qne).defaultPrevented)return;this._isShown=!1;const e=this._isAnimated();e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(iM),ba.off(this._element,tM),ba.off(this._dialog,nM),this._queueCallback(()=>this._hideModal(),this._element,e)}dispose(){[window,this._dialog].forEach(U=>ba.off(U,kf)),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new a6({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new i6({trapElement:this._element})}_getConfig(U){return U=Ri(Ri(Ri({},qS),Pl.getDataAttributes(this._element)),typeof U=="object"?U:{}),Bc(JS,U,Jne),U}_showElement(U){const e=this._isAnimated(),I=Ti.findOne(oae,this._dialog);(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,I&&(I.scrollTop=0),e&&_d(this._element),this._element.classList.add(iM);const F=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ba.trigger(this._element,eae,{relatedTarget:U})};this._queueCallback(F,this._dialog,e)}_setEscapeEvent(){this._isShown?ba.on(this._element,rM,U=>{this._config.keyboard&&U.key===QS?(U.preventDefault(),this.hide()):!this._config.keyboard&&U.key===QS&&this._triggerBackdropTransition()}):ba.off(this._element,rM)}_setResizeEvent(){this._isShown?ba.on(window,eM,()=>this._adjustDialog()):ba.off(window,eM)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(aM),this._resetAdjustments(),this._scrollBar.reset(),ba.trigger(this._element,o6)})}_showBackdrop(U){ba.on(this._element,tM,e=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=!1;return}e.target===e.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(U)}_isAnimated(){return this._element.classList.contains(nae)}_triggerBackdropTransition(){if(ba.trigger(this._element,qne).defaultPrevented)return;const{classList:e,scrollHeight:I,style:F}=this._element,s=I>document.documentElement.clientHeight;!s&&F.overflowY==="hidden"||e.contains(ib)||(s||(F.overflowY="hidden"),e.add(ib),this._queueCallback(()=>{e.remove(ib),s||this._queueCallback(()=>{F.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const U=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),I=e>0;(!I&&U&&!Lu()||I&&!U&&Lu())&&(this._element.style.paddingLeft=`${e}px`),(I&&!U&&!Lu()||!I&&U&&Lu())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(U,e){return this.each(function(){const I=ud.getOrCreateInstance(this,U);if(typeof U=="string"){if(typeof I[U]=="undefined")throw new TypeError(`No method named "${U}"`);I[U](e)}})}}ba.on(document,rae,sae,function(N){const U=Vh(this);["A","AREA"].includes(this.tagName)&&N.preventDefault(),ba.one(U,s6,F=>{F.defaultPrevented||ba.one(U,o6,()=>{ug(this)&&this.focus()})});const e=Ti.findOne(aae);e&&ud.getInstance(e).hide(),ud.getOrCreateInstance(U).toggle(this)});Km(ud);Ef(ud);const oM="offcanvas",lae="bs.offcanvas",Kv=`.${lae}`,l6=".data-api",uae=`load${Kv}${l6}`,fae="Escape",sM={backdrop:!0,keyboard:!0,scroll:!1},cae={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},lM="show",hae="offcanvas-backdrop",u6=".offcanvas.show",vae=`show${Kv}`,pae=`shown${Kv}`,dae=`hide${Kv}`,f6=`hidden${Kv}`,gae=`click${Kv}${l6}`,yae=`keydown.dismiss${Kv}`,mae='[data-bs-toggle="offcanvas"]';class Gv extends ic{constructor(U,e){super(U);this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return oM}static get Default(){return sM}toggle(U){return this._isShown?this.hide():this.show(U)}show(U){if(this._isShown||ba.trigger(this._element,vae,{relatedTarget:U}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new g2().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(lM);const I=()=>{this._config.scroll||this._focustrap.activate(),ba.trigger(this._element,pae,{relatedTarget:U})};this._queueCallback(I,this._element,!0)}hide(){if(!this._isShown||ba.trigger(this._element,dae).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(lM),this._backdrop.hide();const e=()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new g2().reset(),ba.trigger(this._element,f6)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(U){return U=Ri(Ri(Ri({},sM),Pl.getDataAttributes(this._element)),typeof U=="object"?U:{}),Bc(oM,U,cae),U}_initializeBackDrop(){return new a6({className:hae,isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new i6({trapElement:this._element})}_addEventListeners(){ba.on(this._element,yae,U=>{this._config.keyboard&&U.key===fae&&this.hide()})}static jQueryInterface(U){return this.each(function(){const e=Gv.getOrCreateInstance(this,U);if(typeof U=="string"){if(e[U]===void 0||U.startsWith("_")||U==="constructor")throw new TypeError(`No method named "${U}"`);e[U](this)}})}}ba.on(document,gae,mae,function(N){const U=Vh(this);if(["A","AREA"].includes(this.tagName)&&N.preventDefault(),zv(this))return;ba.one(U,f6,()=>{ug(this)&&this.focus()});const e=Ti.findOne(u6);e&&e!==U&&Gv.getInstance(e).hide(),Gv.getOrCreateInstance(U).toggle(this)});ba.on(window,uae,()=>Ti.find(u6).forEach(N=>Gv.getOrCreateInstance(N).show()));Km(Gv);Ef(Gv);const xae=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),bae=/^aria-[\w-]*$/i,_ae=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,wae=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Tae=(N,U)=>{const e=N.nodeName.toLowerCase();if(U.includes(e))return xae.has(e)?Boolean(_ae.test(N.nodeValue)||wae.test(N.nodeValue)):!0;const I=U.filter(F=>F instanceof RegExp);for(let F=0,s=I.length;F<s;F++)if(I[F].test(e))return!0;return!1},Aae={"*":["class","dir","id","lang","role",bae],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function uM(N,U,e){if(!N.length)return N;if(e&&typeof e=="function")return e(N);const F=new window.DOMParser().parseFromString(N,"text/html"),s=[].concat(...F.body.querySelectorAll("*"));for(let o=0,h=s.length;o<h;o++){const y=s[o],t=y.nodeName.toLowerCase();if(!Object.keys(U).includes(t)){y.remove();continue}const a=[].concat(...y.attributes),i=[].concat(U["*"]||[],U[t]||[]);a.forEach(n=>{Tae(n,i)||y.removeAttribute(n.nodeName)})}return F.body.innerHTML}const fM="tooltip",Sae="bs.tooltip",kc=`.${Sae}`,Mae="bs-tooltip",Eae=new Set(["sanitize","allowList","sanitizeFn"]),kae={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},Cae={AUTO:"auto",TOP:"top",RIGHT:Lu()?"left":"right",BOTTOM:"bottom",LEFT:Lu()?"right":"left"},Lae={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:Aae,popperConfig:null},Pae={HIDE:`hide${kc}`,HIDDEN:`hidden${kc}`,SHOW:`show${kc}`,SHOWN:`shown${kc}`,INSERTED:`inserted${kc}`,CLICK:`click${kc}`,FOCUSIN:`focusin${kc}`,FOCUSOUT:`focusout${kc}`,MOUSEENTER:`mouseenter${kc}`,MOUSELEAVE:`mouseleave${kc}`},gy="fade",Iae="modal",o0="show",s0="show",ob="out",cM=".tooltip-inner",hM=`.${Iae}`,vM="hide.bs.modal",l0="hover",sb="focus",Rae="click",Dae="manual";class wd extends ic{constructor(U,e){if(typeof BC=="undefined")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(U);this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(e),this.tip=null,this._setListeners()}static get Default(){return Lae}static get NAME(){return fM}static get Event(){return Pae}static get DefaultType(){return kae}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(U){if(!!this._isEnabled)if(U){const e=this._initializeOnDelegatedTarget(U);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else{if(this.getTipElement().classList.contains(o0)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout),ba.off(this._element.closest(hM),vM,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this.isWithContent()&&this._isEnabled))return;const U=ba.trigger(this._element,this.constructor.Event.SHOW),e=HC(this._element),I=e===null?this._element.ownerDocument.documentElement.contains(this._element):e.contains(this._element);if(U.defaultPrevented||!I)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(cM).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const F=this.getTipElement(),s=Qte(this.constructor.NAME);F.setAttribute("id",s),this._element.setAttribute("aria-describedby",s),this._config.animation&&F.classList.add(gy);const o=typeof this._config.placement=="function"?this._config.placement.call(this,F,this._element):this._config.placement,h=this._getAttachment(o);this._addAttachmentClass(h);const{container:y}=this._config;M0.set(F,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(y.append(F),ba.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=sw(this._element,F,this._getPopperConfig(h)),F.classList.add(o0);const t=this._resolvePossibleFunction(this._config.customClass);t&&F.classList.add(...t.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(n=>{ba.on(n,"mouseover",rm)});const a=()=>{const n=this._hoverState;this._hoverState=null,ba.trigger(this._element,this.constructor.Event.SHOWN),n===ob&&this._leave(null,this)},i=this.tip.classList.contains(gy);this._queueCallback(a,this.tip,i)}hide(){if(!this._popper)return;const U=this.getTipElement(),e=()=>{this._isWithActiveTrigger()||(this._hoverState!==s0&&U.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),ba.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())};if(ba.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;U.classList.remove(o0),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(s=>ba.off(s,"mouseover",rm)),this._activeTrigger[Rae]=!1,this._activeTrigger[sb]=!1,this._activeTrigger[l0]=!1;const F=this.tip.classList.contains(gy);this._queueCallback(e,this.tip,F),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const U=document.createElement("div");U.innerHTML=this._config.template;const e=U.children[0];return this.setContent(e),e.classList.remove(gy,o0),this.tip=e,this.tip}setContent(U){this._sanitizeAndSetContent(U,this.getTitle(),cM)}_sanitizeAndSetContent(U,e,I){const F=Ti.findOne(I,U);if(!e&&F){F.remove();return}this.setElementContent(F,e)}setElementContent(U,e){if(U!==null){if(Hv(e)){e=Hh(e),this._config.html?e.parentNode!==U&&(U.innerHTML="",U.append(e)):U.textContent=e.textContent;return}this._config.html?(this._config.sanitize&&(e=uM(e,this._config.allowList,this._config.sanitizeFn)),U.innerHTML=e):U.textContent=e}}getTitle(){const U=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(U)}updateAttachment(U){return U==="right"?"end":U==="left"?"start":U}_initializeOnDelegatedTarget(U,e){return e||this.constructor.getOrCreateInstance(U.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:U}=this._config;return typeof U=="string"?U.split(",").map(e=>Number.parseInt(e,10)):typeof U=="function"?e=>U(e,this._element):U}_resolvePossibleFunction(U){return typeof U=="function"?U.call(this._element):U}_getPopperConfig(U){const e={placement:U,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:I=>this._handlePopperPlacementChange(I)}],onFirstUpdate:I=>{I.options.placement!==I.placement&&this._handlePopperPlacementChange(I)}};return Ri(Ri({},e),typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig)}_addAttachmentClass(U){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(U)}`)}_getAttachment(U){return Cae[U.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(e=>{if(e==="click")ba.on(this._element,this.constructor.Event.CLICK,this._config.selector,I=>this.toggle(I));else if(e!==Dae){const I=e===l0?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,F=e===l0?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;ba.on(this._element,I,this._config.selector,s=>this._enter(s)),ba.on(this._element,F,this._config.selector,s=>this._leave(s))}}),this._hideModalHandler=()=>{this._element&&this.hide()},ba.on(this._element.closest(hM),vM,this._hideModalHandler),this._config.selector?this._config=Ug(Ri({},this._config),{trigger:"manual",selector:""}):this._fixTitle()}_fixTitle(){const U=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");(U||e!=="string")&&(this._element.setAttribute("data-bs-original-title",U||""),U&&!this._element.getAttribute("aria-label")&&!this._element.textContent&&this._element.setAttribute("aria-label",U),this._element.setAttribute("title",""))}_enter(U,e){if(e=this._initializeOnDelegatedTarget(U,e),U&&(e._activeTrigger[U.type==="focusin"?sb:l0]=!0),e.getTipElement().classList.contains(o0)||e._hoverState===s0){e._hoverState=s0;return}if(clearTimeout(e._timeout),e._hoverState=s0,!e._config.delay||!e._config.delay.show){e.show();return}e._timeout=setTimeout(()=>{e._hoverState===s0&&e.show()},e._config.delay.show)}_leave(U,e){if(e=this._initializeOnDelegatedTarget(U,e),U&&(e._activeTrigger[U.type==="focusout"?sb:l0]=e._element.contains(U.relatedTarget)),!e._isWithActiveTrigger()){if(clearTimeout(e._timeout),e._hoverState=ob,!e._config.delay||!e._config.delay.hide){e.hide();return}e._timeout=setTimeout(()=>{e._hoverState===ob&&e.hide()},e._config.delay.hide)}}_isWithActiveTrigger(){for(const U in this._activeTrigger)if(this._activeTrigger[U])return!0;return!1}_getConfig(U){const e=Pl.getDataAttributes(this._element);return Object.keys(e).forEach(I=>{Eae.has(I)&&delete e[I]}),U=Ri(Ri(Ri({},this.constructor.Default),e),typeof U=="object"&&U?U:{}),U.container=U.container===!1?document.body:Hh(U.container),typeof U.delay=="number"&&(U.delay={show:U.delay,hide:U.delay}),typeof U.title=="number"&&(U.title=U.title.toString()),typeof U.content=="number"&&(U.content=U.content.toString()),Bc(fM,U,this.constructor.DefaultType),U.sanitize&&(U.template=uM(U.template,U.allowList,U.sanitizeFn)),U}_getDelegateConfig(){const U={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(U[e]=this._config[e]);return U}_cleanTipClass(){const U=this.getTipElement(),e=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),I=U.getAttribute("class").match(e);I!==null&&I.length>0&&I.map(F=>F.trim()).forEach(F=>U.classList.remove(F))}_getBasicClassPrefix(){return Mae}_handlePopperPlacementChange(U){const{state:e}=U;!e||(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(U){return this.each(function(){const e=wd.getOrCreateInstance(this,U);if(typeof U=="string"){if(typeof e[U]=="undefined")throw new TypeError(`No method named "${U}"`);e[U]()}})}}Ef(wd);const Fae="popover",Oae="bs.popover",Cc=`.${Oae}`,zae="bs-popover",Nae=Ug(Ri({},wd.Default),{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Bae=Ug(Ri({},wd.DefaultType),{content:"(string|element|function)"}),Uae={HIDE:`hide${Cc}`,HIDDEN:`hidden${Cc}`,SHOW:`show${Cc}`,SHOWN:`shown${Cc}`,INSERTED:`inserted${Cc}`,CLICK:`click${Cc}`,FOCUSIN:`focusin${Cc}`,FOCUSOUT:`focusout${Cc}`,MOUSEENTER:`mouseenter${Cc}`,MOUSELEAVE:`mouseleave${Cc}`},Vae=".popover-header",Hae=".popover-body";class fw extends wd{static get Default(){return Nae}static get NAME(){return Fae}static get Event(){return Uae}static get DefaultType(){return Bae}isWithContent(){return this.getTitle()||this._getContent()}setContent(U){this._sanitizeAndSetContent(U,this.getTitle(),Vae),this._sanitizeAndSetContent(U,this._getContent(),Hae)}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return zae}static jQueryInterface(U){return this.each(function(){const e=fw.getOrCreateInstance(this,U);if(typeof U=="string"){if(typeof e[U]=="undefined")throw new TypeError(`No method named "${U}"`);e[U]()}})}}Ef(fw);const pM="scrollspy",Gae="bs.scrollspy",qm=`.${Gae}`,jae=".data-api",dM={offset:10,method:"auto",target:""},$ae={offset:"number",method:"string",target:"(string|element)"},Wae=`activate${qm}`,Yae=`scroll${qm}`,Xae=`load${qm}${jae}`,c6="dropdown-item",Op="active",Zae='[data-bs-spy="scroll"]',Kae=".nav, .list-group",y2=".nav-link",Jae=".nav-item",h6=".list-group-item",lb=`${y2}, ${h6}, .${c6}`,Qae=".dropdown",qae=".dropdown-toggle",eie="offset",gM="position";class e1 extends ic{constructor(U,e){super(U);this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(e),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,ba.on(this._scrollElement,Yae,()=>this._process()),this.refresh(),this._process()}static get Default(){return dM}static get NAME(){return pM}refresh(){const U=this._scrollElement===this._scrollElement.window?eie:gM,e=this._config.method==="auto"?U:this._config.method,I=e===gM?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Ti.find(lb,this._config.target).map(s=>{const o=lw(s),h=o?Ti.findOne(o):null;if(h){const y=h.getBoundingClientRect();if(y.width||y.height)return[Pl[e](h).top+I,o]}return null}).filter(s=>s).sort((s,o)=>s[0]-o[0]).forEach(s=>{this._offsets.push(s[0]),this._targets.push(s[1])})}dispose(){ba.off(this._scrollElement,qm),super.dispose()}_getConfig(U){return U=Ri(Ri(Ri({},dM),Pl.getDataAttributes(this._element)),typeof U=="object"&&U?U:{}),U.target=Hh(U.target)||document.documentElement,Bc(pM,U,$ae),U}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const U=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),I=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),U>=I){const F=this._targets[this._targets.length-1];this._activeTarget!==F&&this._activate(F);return}if(this._activeTarget&&U<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(let F=this._offsets.length;F--;)this._activeTarget!==this._targets[F]&&U>=this._offsets[F]&&(typeof this._offsets[F+1]=="undefined"||U<this._offsets[F+1])&&this._activate(this._targets[F])}_activate(U){this._activeTarget=U,this._clear();const e=lb.split(",").map(F=>`${F}[data-bs-target="${U}"],${F}[href="${U}"]`),I=Ti.findOne(e.join(","),this._config.target);I.classList.add(Op),I.classList.contains(c6)?Ti.findOne(qae,I.closest(Qae)).classList.add(Op):Ti.parents(I,Kae).forEach(F=>{Ti.prev(F,`${y2}, ${h6}`).forEach(s=>s.classList.add(Op)),Ti.prev(F,Jae).forEach(s=>{Ti.children(s,y2).forEach(o=>o.classList.add(Op))})}),ba.trigger(this._scrollElement,Wae,{relatedTarget:U})}_clear(){Ti.find(lb,this._config.target).filter(U=>U.classList.contains(Op)).forEach(U=>U.classList.remove(Op))}static jQueryInterface(U){return this.each(function(){const e=e1.getOrCreateInstance(this,U);if(typeof U=="string"){if(typeof e[U]=="undefined")throw new TypeError(`No method named "${U}"`);e[U]()}})}}ba.on(window,Xae,()=>{Ti.find(Zae).forEach(N=>new e1(N))});Ef(e1);const tie="tab",rie="bs.tab",cg=`.${rie}`,nie=".data-api",aie=`hide${cg}`,iie=`hidden${cg}`,oie=`show${cg}`,sie=`shown${cg}`,lie=`click${cg}${nie}`,uie="dropdown-menu",u0="active",yM="fade",mM="show",fie=".dropdown",cie=".nav, .list-group",xM=".active",bM=":scope > li > .active",hie='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',vie=".dropdown-toggle",pie=":scope > .dropdown-menu .active";class t1 extends ic{static get NAME(){return tie}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(u0))return;let U;const e=Vh(this._element),I=this._element.closest(cie);if(I){const h=I.nodeName==="UL"||I.nodeName==="OL"?bM:xM;U=Ti.find(h,I),U=U[U.length-1]}const F=U?ba.trigger(U,aie,{relatedTarget:this._element}):null;if(ba.trigger(this._element,oie,{relatedTarget:U}).defaultPrevented||F!==null&&F.defaultPrevented)return;this._activate(this._element,I);const o=()=>{ba.trigger(U,iie,{relatedTarget:this._element}),ba.trigger(this._element,sie,{relatedTarget:U})};e?this._activate(e,e.parentNode,o):o()}_activate(U,e,I){const s=(e&&(e.nodeName==="UL"||e.nodeName==="OL")?Ti.find(bM,e):Ti.children(e,xM))[0],o=I&&s&&s.classList.contains(yM),h=()=>this._transitionComplete(U,s,I);s&&o?(s.classList.remove(mM),this._queueCallback(h,U,!0)):h()}_transitionComplete(U,e,I){if(e){e.classList.remove(u0);const s=Ti.findOne(pie,e.parentNode);s&&s.classList.remove(u0),e.getAttribute("role")==="tab"&&e.setAttribute("aria-selected",!1)}U.classList.add(u0),U.getAttribute("role")==="tab"&&U.setAttribute("aria-selected",!0),_d(U),U.classList.contains(yM)&&U.classList.add(mM);let F=U.parentNode;if(F&&F.nodeName==="LI"&&(F=F.parentNode),F&&F.classList.contains(uie)){const s=U.closest(fie);s&&Ti.find(vie,s).forEach(o=>o.classList.add(u0)),U.setAttribute("aria-expanded",!0)}I&&I()}static jQueryInterface(U){return this.each(function(){const e=t1.getOrCreateInstance(this);if(typeof U=="string"){if(typeof e[U]=="undefined")throw new TypeError(`No method named "${U}"`);e[U]()}})}}ba.on(document,lie,hie,function(N){if(["A","AREA"].includes(this.tagName)&&N.preventDefault(),zv(this))return;t1.getOrCreateInstance(this).show()});Ef(t1);const _M="toast",die="bs.toast",qh=`.${die}`,gie=`mouseover${qh}`,yie=`mouseout${qh}`,mie=`focusin${qh}`,xie=`focusout${qh}`,bie=`hide${qh}`,_ie=`hidden${qh}`,wie=`show${qh}`,Tie=`shown${qh}`,Aie="fade",wM="hide",f0="show",yy="showing",Sie={animation:"boolean",autohide:"boolean",delay:"number"},TM={animation:!0,autohide:!0,delay:5e3};class r1 extends ic{constructor(U,e){super(U);this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Sie}static get Default(){return TM}static get NAME(){return _M}show(){if(ba.trigger(this._element,wie).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Aie);const e=()=>{this._element.classList.remove(yy),ba.trigger(this._element,Tie),this._maybeScheduleHide()};this._element.classList.remove(wM),_d(this._element),this._element.classList.add(f0),this._element.classList.add(yy),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(f0)||ba.trigger(this._element,bie).defaultPrevented)return;const e=()=>{this._element.classList.add(wM),this._element.classList.remove(yy),this._element.classList.remove(f0),ba.trigger(this._element,_ie)};this._element.classList.add(yy),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(f0)&&this._element.classList.remove(f0),super.dispose()}_getConfig(U){return U=Ri(Ri(Ri({},TM),Pl.getDataAttributes(this._element)),typeof U=="object"&&U?U:{}),Bc(_M,U,this.constructor.DefaultType),U}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(U,e){switch(U.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e){this._clearTimeout();return}const I=U.relatedTarget;this._element===I||this._element.contains(I)||this._maybeScheduleHide()}_setListeners(){ba.on(this._element,gie,U=>this._onInteraction(U,!0)),ba.on(this._element,yie,U=>this._onInteraction(U,!1)),ba.on(this._element,mie,U=>this._onInteraction(U,!0)),ba.on(this._element,xie,U=>this._onInteraction(U,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(U){return this.each(function(){const e=r1.getOrCreateInstance(this,U);if(typeof U=="string"){if(typeof e[U]=="undefined")throw new TypeError(`No method named "${U}"`);e[U](this)}})}}Km(r1);Ef(r1);export{Lie as D,kie as P,Cie as T,UR as _,_i as a,bi as b,ro as c,yo as d,hI as e,Fh as f,db as g,qs as h,dl as i,lu as j,cT as k,Eie as l,vm as o,cI as p,lm as r,KD as s,pl as t,q8 as u,Gs as w};
